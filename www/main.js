var WA=Object.defineProperty,GA=Object.defineProperties,zA=Object.getOwnPropertyDescriptors,Bb=Object.getOwnPropertySymbols,qA=Object.prototype.hasOwnProperty,YA=Object.prototype.propertyIsEnumerable,Ub=(Xt,it,L)=>it in Xt?WA(Xt,it,{enumerable:!0,configurable:!0,writable:!0,value:L}):Xt[it]=L,jb=(Xt,it)=>{for(var L in it||(it={}))qA.call(it,L)&&Ub(Xt,L,it[L]);if(Bb)for(var L of Bb(it))YA.call(it,L)&&Ub(Xt,L,it[L]);return Xt},Hb=(Xt,it)=>GA(Xt,zA(it));(self.webpackChunktrail_app=self.webpackChunktrail_app||[]).push([[179],{8255:Xt=>{function it(L){return Promise.resolve().then(()=>{var _=new Error("Cannot find module '"+L+"'");throw _.code="MODULE_NOT_FOUND",_})}it.keys=()=>[],it.resolve=it,it.id=8255,Xt.exports=it},3796:(Xt,it,L)=>{"use strict";L.d(it,{Uw:()=>Oe,fo:()=>Ee});var _=L(8239);"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global&&global;var V=(()=>{return(Te=V||(V={})).Unimplemented="UNIMPLEMENTED",Te.Unavailable="UNAVAILABLE",V;var Te})();class Ie extends Error{constructor(he,we,qe){super(he),this.message=he,this.code=we,this.data=qe}}const ae=Te=>{var he,we,qe,Ve,ot;const je=Te.CapacitorCustomPlatform||null,Ae=Te.Capacitor||{},ze=Ae.Plugins=Ae.Plugins||{},nt=Te.CapacitorPlatforms,mt=(null===(he=null==nt?void 0:nt.currentPlatform)||void 0===he?void 0:he.getPlatform)||(()=>null!==je?je.name:(Te=>{var he,we;return(null==Te?void 0:Te.androidBridge)?"android":(null===(we=null===(he=null==Te?void 0:Te.webkit)||void 0===he?void 0:he.messageHandlers)||void 0===we?void 0:we.bridge)?"ios":"web"})(Te)),Yt=(null===(we=null==nt?void 0:nt.currentPlatform)||void 0===we?void 0:we.isNativePlatform)||(()=>"web"!==mt()),Ft=(null===(qe=null==nt?void 0:nt.currentPlatform)||void 0===qe?void 0:qe.isPluginAvailable)||(wt=>{const an=dr.get(wt);return!(!(null==an?void 0:an.platforms.has(mt()))&&!rr(wt))}),rr=(null===(Ve=null==nt?void 0:nt.currentPlatform)||void 0===Ve?void 0:Ve.getPluginHeader)||(wt=>{var an;return null===(an=Ae.PluginHeaders)||void 0===an?void 0:an.find(jn=>jn.name===wt)}),dr=new Map,Qn=(null===(ot=null==nt?void 0:nt.currentPlatform)||void 0===ot?void 0:ot.registerPlugin)||((wt,an={})=>{const jn=dr.get(wt);if(jn)return console.warn(`Capacitor plugin "${wt}" already registered. Cannot register plugins twice.`),jn.proxy;const tr=mt(),On=rr(wt);let Nn;const si=function(){var Kt=(0,_.Z)(function*(){return!Nn&&tr in an?Nn=Nn="function"==typeof an[tr]?yield an[tr]():an[tr]:null!==je&&!Nn&&"web"in an&&(Nn=Nn="function"==typeof an.web?yield an.web():an.web),Nn});return function(){return Kt.apply(this,arguments)}}(),vn=Kt=>{let ft;const Kn=(...Tr)=>{const Fn=si().then(bn=>{const gn=((Kt,ft)=>{var Kn,Tr;if(!On){if(Kt)return null===(Tr=Kt[ft])||void 0===Tr?void 0:Tr.bind(Kt);throw new Ie(`"${wt}" plugin is not implemented on ${tr}`,V.Unimplemented)}{const Fn=null==On?void 0:On.methods.find(bn=>ft===bn.name);if(Fn)return"promise"===Fn.rtype?bn=>Ae.nativePromise(wt,ft.toString(),bn):(bn,gn)=>Ae.nativeCallback(wt,ft.toString(),bn,gn);if(Kt)return null===(Kn=Kt[ft])||void 0===Kn?void 0:Kn.bind(Kt)}})(bn,Kt);if(gn){const hr=gn(...Tr);return ft=null==hr?void 0:hr.remove,hr}throw new Ie(`"${wt}.${Kt}()" is not implemented on ${tr}`,V.Unimplemented)});return"addListener"===Kt&&(Fn.remove=(0,_.Z)(function*(){return ft()})),Fn};return Kn.toString=()=>`${Kt.toString()}() { [capacitor code] }`,Object.defineProperty(Kn,"name",{value:Kt,writable:!1,configurable:!1}),Kn},Fr=vn("addListener"),Yr=vn("removeListener"),Br=(Kt,ft)=>{const Kn=Fr({eventName:Kt},ft),Tr=function(){var bn=(0,_.Z)(function*(){const gn=yield Kn;Yr({eventName:Kt,callbackId:gn},ft)});return function(){return bn.apply(this,arguments)}}(),Fn=new Promise(bn=>Kn.then(()=>bn({remove:Tr})));return Fn.remove=(0,_.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield Tr()}),Fn},er=new Proxy({},{get(Kt,ft){switch(ft){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return On?Br:Fr;case"removeListener":return Yr;default:return vn(ft)}}});return ze[wt]=er,dr.set(wt,{name:wt,proxy:er,platforms:new Set([...Object.keys(an),...On?[tr]:[]])}),er});return Ae.convertFileSrc||(Ae.convertFileSrc=wt=>wt),Ae.getPlatform=mt,Ae.handleError=wt=>Te.console.error(wt),Ae.isNativePlatform=Yt,Ae.isPluginAvailable=Ft,Ae.pluginMethodNoop=(wt,an,jn)=>Promise.reject(`${jn} does not have an implementation of "${an}".`),Ae.registerPlugin=Qn,Ae.Exception=Ie,Ae.DEBUG=!!Ae.DEBUG,Ae.isLoggingEnabled=!!Ae.isLoggingEnabled,Ae.platform=Ae.getPlatform(),Ae.isNative=Ae.isNativePlatform(),Ae},le=(Te=>Te.Capacitor=ae(Te))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),Ee=le.registerPlugin;class Oe{constructor(he){this.listeners={},this.windowListeners={},he&&(console.warn(`Capacitor WebPlugin "${he.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=he)}addListener(he,we){var qe=this;this.listeners[he]||(this.listeners[he]=[]),this.listeners[he].push(we);const ot=this.windowListeners[he];ot&&!ot.registered&&this.addWindowListener(ot);const je=function(){var ze=(0,_.Z)(function*(){return qe.removeListener(he,we)});return function(){return ze.apply(this,arguments)}}(),Ae=Promise.resolve({remove:je});return Object.defineProperty(Ae,"remove",{value:(ze=(0,_.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield je()}),function(){return ze.apply(this,arguments)})}),Ae;var ze}removeAllListeners(){var he=this;return(0,_.Z)(function*(){he.listeners={};for(const we in he.windowListeners)he.removeWindowListener(he.windowListeners[we]);he.windowListeners={}})()}notifyListeners(he,we){const qe=this.listeners[he];qe&&qe.forEach(Ve=>Ve(we))}hasListeners(he){return!!this.listeners[he].length}registerWindowListener(he,we){this.windowListeners[we]={registered:!1,windowEventName:he,pluginEventName:we,handler:qe=>{this.notifyListeners(we,qe)}}}unimplemented(he="not implemented"){return new le.Exception(he,V.Unimplemented)}unavailable(he="not available"){return new le.Exception(he,V.Unavailable)}removeListener(he,we){var qe=this;return(0,_.Z)(function*(){const Ve=qe.listeners[he];if(!Ve)return;const ot=Ve.indexOf(we);qe.listeners[he].splice(ot,1),qe.listeners[he].length||qe.removeWindowListener(qe.windowListeners[he])})()}addWindowListener(he){window.addEventListener(he.windowEventName,he.handler),he.registered=!0}removeWindowListener(he){!he||(window.removeEventListener(he.windowEventName,he.handler),he.registered=!1)}}const Ke=Te=>encodeURIComponent(Te).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);class $e extends Oe{setCookie(he){return(0,_.Z)(function*(){try{const we=Ke(he.key),qe=Ke(he.value),Ve=`; expires=${(he.expires||"").replace("expires=","")}`,ot=(he.path||"/").replace("path=","");document.cookie=`${we}=${qe||""}${Ve}; path=${ot}`}catch(we){return Promise.reject(we)}})()}deleteCookie(he){return(0,_.Z)(function*(){try{document.cookie=`${he.key}=; Max-Age=0`}catch(we){return Promise.reject(we)}})()}clearCookies(){return(0,_.Z)(function*(){try{const he=document.cookie.split(";")||[];for(const we of he)document.cookie=we.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(he){return Promise.reject(he)}})()}clearAllCookies(){var he=this;return(0,_.Z)(function*(){try{yield he.clearCookies()}catch(we){return Promise.reject(we)}})()}}Ee("CapacitorCookies",{web:()=>new $e});const gt=function(){var Te=(0,_.Z)(function*(he){return new Promise((we,qe)=>{const Ve=new FileReader;Ve.onload=()=>{const ot=Ve.result;we(ot.indexOf(",")>=0?ot.split(",")[1]:ot)},Ve.onerror=ot=>qe(ot),Ve.readAsDataURL(he)})});return function(we){return Te.apply(this,arguments)}}();class We extends Oe{request(he){return(0,_.Z)(function*(){const we=((Te,he={})=>{const we=Object.assign({method:Te.method||"GET",headers:Te.headers},he),Ve=((Te={})=>{const he=Object.keys(Te);return Object.keys(Te).map(Ve=>Ve.toLocaleLowerCase()).reduce((Ve,ot,je)=>(Ve[ot]=Te[he[je]],Ve),{})})(Te.headers)["content-type"]||"";if("string"==typeof Te.data)we.body=Te.data;else if(Ve.includes("application/x-www-form-urlencoded")){const ot=new URLSearchParams;for(const[je,Ae]of Object.entries(Te.data||{}))ot.set(je,Ae);we.body=ot.toString()}else if(Ve.includes("multipart/form-data")){const ot=new FormData;if(Te.data instanceof FormData)Te.data.forEach((Ae,ze)=>{ot.append(ze,Ae)});else for(const Ae of Object.keys(Te.data))ot.append(Ae,Te.data[Ae]);we.body=ot;const je=new Headers(we.headers);je.delete("content-type"),we.headers=je}else(Ve.includes("application/json")||"object"==typeof Te.data)&&(we.body=JSON.stringify(Te.data));return we})(he,he.webFetchExtra),qe=((Te,he=!0)=>Te?Object.entries(Te).reduce((qe,Ve)=>{const[ot,je]=Ve;let Ae,ze;return Array.isArray(je)?(ze="",je.forEach(nt=>{Ae=he?encodeURIComponent(nt):nt,ze+=`${ot}=${Ae}&`}),ze.slice(0,-1)):(Ae=he?encodeURIComponent(je):je,ze=`${ot}=${Ae}`),`${qe}&${ze}`},"").substr(1):null)(he.params,he.shouldEncodeUrlParams),Ve=qe?`${he.url}?${qe}`:he.url,ot=yield fetch(Ve,we),je=ot.headers.get("content-type")||"";let ze,nt,{responseType:Ae="text"}=ot.ok?he:{};switch(je.includes("application/json")&&(Ae="json"),Ae){case"arraybuffer":case"blob":nt=yield ot.blob(),ze=yield gt(nt);break;case"json":ze=yield ot.json();break;default:ze=yield ot.text()}const st={};return ot.headers.forEach((mt,Ot)=>{st[Ot]=mt}),{data:ze,headers:st,status:ot.status,url:ot.url}})()}get(he){var we=this;return(0,_.Z)(function*(){return we.request(Object.assign(Object.assign({},he),{method:"GET"}))})()}post(he){var we=this;return(0,_.Z)(function*(){return we.request(Object.assign(Object.assign({},he),{method:"POST"}))})()}put(he){var we=this;return(0,_.Z)(function*(){return we.request(Object.assign(Object.assign({},he),{method:"PUT"}))})()}patch(he){var we=this;return(0,_.Z)(function*(){return we.request(Object.assign(Object.assign({},he),{method:"PATCH"}))})()}delete(he){var we=this;return(0,_.Z)(function*(){return we.request(Object.assign(Object.assign({},he),{method:"DELETE"}))})()}}Ee("CapacitorHttp",{web:()=>new We})},8583:(Xt,it,L)=>{"use strict";L.d(it,{mr:()=>Ke,ez:()=>Ls,K0:()=>ne,Do:()=>He,V_:()=>ie,Ye:()=>gt,S$:()=>Oe,mk:()=>Cs,sg:()=>Di,O5:()=>z,b0:()=>$e,lw:()=>V,EM:()=>Vs,JF:()=>Ds,PM:()=>ys,w_:()=>_e,bD:()=>ji,q:()=>re,Mx:()=>kn,HT:()=>ce});var _=L(3018);let A=null;function re(){return A}function ce(q){A||(A=q)}class _e{}const ne=new _.OlP("DocumentToken");let V=(()=>{class q{historyGo(K){throw new Error("Not implemented")}}return q.\u0275fac=function(K){return new(K||q)},q.\u0275prov=(0,_.Yz7)({factory:Ie,token:q,providedIn:"platform"}),q})();function Ie(){return(0,_.LFG)(ae)}const ie=new _.OlP("Location Initialized");let ae=(()=>{class q extends V{constructor(K){super(),this._doc=K,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return re().getBaseHref(this._doc)}onPopState(K){const ye=re().getGlobalEventTarget(this._doc,"window");return ye.addEventListener("popstate",K,!1),()=>ye.removeEventListener("popstate",K)}onHashChange(K){const ye=re().getGlobalEventTarget(this._doc,"window");return ye.addEventListener("hashchange",K,!1),()=>ye.removeEventListener("hashchange",K)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(K){this.location.pathname=K}pushState(K,ye,Ze){Ne()?this._history.pushState(K,ye,Ze):this.location.hash=Ze}replaceState(K,ye,Ze){Ne()?this._history.replaceState(K,ye,Ze):this.location.hash=Ze}forward(){this._history.forward()}back(){this._history.back()}historyGo(K=0){this._history.go(K)}getState(){return this._history.state}}return q.\u0275fac=function(K){return new(K||q)(_.LFG(ne))},q.\u0275prov=(0,_.Yz7)({factory:le,token:q,providedIn:"platform"}),q})();function Ne(){return!!window.history.pushState}function le(){return new ae((0,_.LFG)(ne))}function Ee(q,fe){if(0==q.length)return fe;if(0==fe.length)return q;let K=0;return q.endsWith("/")&&K++,fe.startsWith("/")&&K++,2==K?q+fe.substring(1):1==K?q+fe:q+"/"+fe}function at(q){const fe=q.match(/#|\?|$/),K=fe&&fe.index||q.length;return q.slice(0,K-("/"===q[K-1]?1:0))+q.slice(K)}function xe(q){return q&&"?"!==q[0]?"?"+q:q}let Oe=(()=>{class q{historyGo(K){throw new Error("Not implemented")}}return q.\u0275fac=function(K){return new(K||q)},q.\u0275prov=(0,_.Yz7)({factory:Ye,token:q,providedIn:"root"}),q})();function Ye(q){const fe=(0,_.LFG)(ne).location;return new $e((0,_.LFG)(V),fe&&fe.origin||"")}const Ke=new _.OlP("appBaseHref");let $e=(()=>{class q extends Oe{constructor(K,ye){if(super(),this._platformLocation=K,this._removeListenerFns=[],null==ye&&(ye=this._platformLocation.getBaseHrefFromDOM()),null==ye)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=ye}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(K){this._removeListenerFns.push(this._platformLocation.onPopState(K),this._platformLocation.onHashChange(K))}getBaseHref(){return this._baseHref}prepareExternalUrl(K){return Ee(this._baseHref,K)}path(K=!1){const ye=this._platformLocation.pathname+xe(this._platformLocation.search),Ze=this._platformLocation.hash;return Ze&&K?`${ye}${Ze}`:ye}pushState(K,ye,Ze,Dt){const Jt=this.prepareExternalUrl(Ze+xe(Dt));this._platformLocation.pushState(K,ye,Jt)}replaceState(K,ye,Ze,Dt){const Jt=this.prepareExternalUrl(Ze+xe(Dt));this._platformLocation.replaceState(K,ye,Jt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(K=0){var ye,Ze;null===(Ze=(ye=this._platformLocation).historyGo)||void 0===Ze||Ze.call(ye,K)}}return q.\u0275fac=function(K){return new(K||q)(_.LFG(V),_.LFG(Ke,8))},q.\u0275prov=_.Yz7({token:q,factory:q.\u0275fac}),q})(),He=(()=>{class q extends Oe{constructor(K,ye){super(),this._platformLocation=K,this._baseHref="",this._removeListenerFns=[],null!=ye&&(this._baseHref=ye)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(K){this._removeListenerFns.push(this._platformLocation.onPopState(K),this._platformLocation.onHashChange(K))}getBaseHref(){return this._baseHref}path(K=!1){let ye=this._platformLocation.hash;return null==ye&&(ye="#"),ye.length>0?ye.substring(1):ye}prepareExternalUrl(K){const ye=Ee(this._baseHref,K);return ye.length>0?"#"+ye:ye}pushState(K,ye,Ze,Dt){let Jt=this.prepareExternalUrl(Ze+xe(Dt));0==Jt.length&&(Jt=this._platformLocation.pathname),this._platformLocation.pushState(K,ye,Jt)}replaceState(K,ye,Ze,Dt){let Jt=this.prepareExternalUrl(Ze+xe(Dt));0==Jt.length&&(Jt=this._platformLocation.pathname),this._platformLocation.replaceState(K,ye,Jt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(K=0){var ye,Ze;null===(Ze=(ye=this._platformLocation).historyGo)||void 0===Ze||Ze.call(ye,K)}}return q.\u0275fac=function(K){return new(K||q)(_.LFG(V),_.LFG(Ke,8))},q.\u0275prov=_.Yz7({token:q,factory:q.\u0275fac}),q})(),gt=(()=>{class q{constructor(K,ye){this._subject=new _.vpe,this._urlChangeListeners=[],this._platformStrategy=K;const Ze=this._platformStrategy.getBaseHref();this._platformLocation=ye,this._baseHref=at(E(Ze)),this._platformStrategy.onPopState(Dt=>{this._subject.emit({url:this.path(!0),pop:!0,state:Dt.state,type:Dt.type})})}path(K=!1){return this.normalize(this._platformStrategy.path(K))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(K,ye=""){return this.path()==this.normalize(K+xe(ye))}normalize(K){return q.stripTrailingSlash(function(q,fe){return q&&fe.startsWith(q)?fe.substring(q.length):fe}(this._baseHref,E(K)))}prepareExternalUrl(K){return K&&"/"!==K[0]&&(K="/"+K),this._platformStrategy.prepareExternalUrl(K)}go(K,ye="",Ze=null){this._platformStrategy.pushState(Ze,"",K,ye),this._notifyUrlChangeListeners(this.prepareExternalUrl(K+xe(ye)),Ze)}replaceState(K,ye="",Ze=null){this._platformStrategy.replaceState(Ze,"",K,ye),this._notifyUrlChangeListeners(this.prepareExternalUrl(K+xe(ye)),Ze)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(K=0){var ye,Ze;null===(Ze=(ye=this._platformStrategy).historyGo)||void 0===Ze||Ze.call(ye,K)}onUrlChange(K){this._urlChangeListeners.push(K),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ye=>{this._notifyUrlChangeListeners(ye.url,ye.state)}))}_notifyUrlChangeListeners(K="",ye){this._urlChangeListeners.forEach(Ze=>Ze(K,ye))}subscribe(K,ye,Ze){return this._subject.subscribe({next:K,error:ye,complete:Ze})}}return q.\u0275fac=function(K){return new(K||q)(_.LFG(Oe),_.LFG(V))},q.normalizeQueryParams=xe,q.joinWithSlash=Ee,q.stripTrailingSlash=at,q.\u0275prov=(0,_.Yz7)({factory:ct,token:q,providedIn:"root"}),q})();function ct(){return new gt((0,_.LFG)(Oe),(0,_.LFG)(V))}function E(q){return q.replace(/\/index.html$/,"")}var Te=(()=>((Te=Te||{})[Te.Zero=0]="Zero",Te[Te.One=1]="One",Te[Te.Two=2]="Two",Te[Te.Few=3]="Few",Te[Te.Many=4]="Many",Te[Te.Other=5]="Other",Te))();const Qn=_.kL8;class Or{}let Vr=(()=>{class q extends Or{constructor(K){super(),this.locale=K}getPluralCategory(K,ye){switch(Qn(ye||this.locale)(K)){case Te.Zero:return"zero";case Te.One:return"one";case Te.Two:return"two";case Te.Few:return"few";case Te.Many:return"many";default:return"other"}}}return q.\u0275fac=function(K){return new(K||q)(_.LFG(_.soG))},q.\u0275prov=_.Yz7({token:q,factory:q.\u0275fac}),q})();function kn(q,fe){fe=encodeURIComponent(fe);for(const K of q.split(";")){const ye=K.indexOf("="),[Ze,Dt]=-1==ye?[K,""]:[K.slice(0,ye),K.slice(ye+1)];if(Ze.trim()===fe)return decodeURIComponent(Dt)}return null}let Cs=(()=>{class q{constructor(K,ye,Ze,Dt){this._iterableDiffers=K,this._keyValueDiffers=ye,this._ngEl=Ze,this._renderer=Dt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(K){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof K?K.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(K){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof K?K.split(/\s+/):K,this._rawClass&&((0,_.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const K=this._iterableDiffer.diff(this._rawClass);K&&this._applyIterableChanges(K)}else if(this._keyValueDiffer){const K=this._keyValueDiffer.diff(this._rawClass);K&&this._applyKeyValueChanges(K)}}_applyKeyValueChanges(K){K.forEachAddedItem(ye=>this._toggleClass(ye.key,ye.currentValue)),K.forEachChangedItem(ye=>this._toggleClass(ye.key,ye.currentValue)),K.forEachRemovedItem(ye=>{ye.previousValue&&this._toggleClass(ye.key,!1)})}_applyIterableChanges(K){K.forEachAddedItem(ye=>{if("string"!=typeof ye.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,_.AaK)(ye.item)}`);this._toggleClass(ye.item,!0)}),K.forEachRemovedItem(ye=>this._toggleClass(ye.item,!1))}_applyClasses(K){K&&(Array.isArray(K)||K instanceof Set?K.forEach(ye=>this._toggleClass(ye,!0)):Object.keys(K).forEach(ye=>this._toggleClass(ye,!!K[ye])))}_removeClasses(K){K&&(Array.isArray(K)||K instanceof Set?K.forEach(ye=>this._toggleClass(ye,!1)):Object.keys(K).forEach(ye=>this._toggleClass(ye,!1)))}_toggleClass(K,ye){(K=K.trim())&&K.split(/\s+/g).forEach(Ze=>{ye?this._renderer.addClass(this._ngEl.nativeElement,Ze):this._renderer.removeClass(this._ngEl.nativeElement,Ze)})}}return q.\u0275fac=function(K){return new(K||q)(_.Y36(_.ZZ4),_.Y36(_.aQg),_.Y36(_.SBq),_.Y36(_.Qsj))},q.\u0275dir=_.lG2({type:q,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),q})();class ki{constructor(fe,K,ye,Ze){this.$implicit=fe,this.ngForOf=K,this.index=ye,this.count=Ze}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Di=(()=>{class q{constructor(K,ye,Ze){this._viewContainer=K,this._template=ye,this._differs=Ze,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(K){this._ngForOf=K,this._ngForOfDirty=!0}set ngForTrackBy(K){this._trackByFn=K}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(K){K&&(this._template=K)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const K=this._ngForOf;if(!this._differ&&K)try{this._differ=this._differs.find(K).create(this.ngForTrackBy)}catch(ye){throw new Error(`Cannot find a differ supporting object '${K}' of type '${function(q){return q.name||typeof q}(K)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const K=this._differ.diff(this._ngForOf);K&&this._applyChanges(K)}}_applyChanges(K){const ye=[];K.forEachOperation((Ze,Dt,Jt)=>{if(null==Ze.previousIndex){const G=this._viewContainer.createEmbeddedView(this._template,new ki(null,this._ngForOf,-1,-1),null===Jt?void 0:Jt),H=new Ii(Ze,G);ye.push(H)}else if(null==Jt)this._viewContainer.remove(null===Dt?void 0:Dt);else if(null!==Dt){const G=this._viewContainer.get(Dt);this._viewContainer.move(G,Jt);const H=new Ii(Ze,G);ye.push(H)}});for(let Ze=0;Ze<ye.length;Ze++)this._perViewChange(ye[Ze].view,ye[Ze].record);for(let Ze=0,Dt=this._viewContainer.length;Ze<Dt;Ze++){const Jt=this._viewContainer.get(Ze);Jt.context.index=Ze,Jt.context.count=Dt,Jt.context.ngForOf=this._ngForOf}K.forEachIdentityChange(Ze=>{this._viewContainer.get(Ze.currentIndex).context.$implicit=Ze.item})}_perViewChange(K,ye){K.context.$implicit=ye.item}static ngTemplateContextGuard(K,ye){return!0}}return q.\u0275fac=function(K){return new(K||q)(_.Y36(_.s_b),_.Y36(_.Rgc),_.Y36(_.ZZ4))},q.\u0275dir=_.lG2({type:q,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),q})();class Ii{constructor(fe,K){this.record=fe,this.view=K}}let z=(()=>{class q{constructor(K,ye){this._viewContainer=K,this._context=new W,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ye}set ngIf(K){this._context.$implicit=this._context.ngIf=K,this._updateView()}set ngIfThen(K){oe("ngIfThen",K),this._thenTemplateRef=K,this._thenViewRef=null,this._updateView()}set ngIfElse(K){oe("ngIfElse",K),this._elseTemplateRef=K,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(K,ye){return!0}}return q.\u0275fac=function(K){return new(K||q)(_.Y36(_.s_b),_.Y36(_.Rgc))},q.\u0275dir=_.lG2({type:q,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),q})();class W{constructor(){this.$implicit=null,this.ngIf=null}}function oe(q,fe){if(fe&&!fe.createEmbeddedView)throw new Error(`${q} must be a TemplateRef, but received '${(0,_.AaK)(fe)}'.`)}let Ls=(()=>{class q{}return q.\u0275fac=function(K){return new(K||q)},q.\u0275mod=_.oAB({type:q}),q.\u0275inj=_.cJS({providers:[{provide:Or,useClass:Vr}]}),q})();const ji="browser";function ys(q){return"server"===q}let Vs=(()=>{class q{}return q.\u0275prov=(0,_.Yz7)({token:q,providedIn:"root",factory:()=>new _s((0,_.LFG)(ne),window)}),q})();class _s{constructor(fe,K){this.document=fe,this.window=K,this.offset=()=>[0,0]}setOffset(fe){this.offset=Array.isArray(fe)?()=>fe:fe}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(fe){this.supportsScrolling()&&this.window.scrollTo(fe[0],fe[1])}scrollToAnchor(fe){if(!this.supportsScrolling())return;const K=function(q,fe){const K=q.getElementById(fe)||q.getElementsByName(fe)[0];if(K)return K;if("function"==typeof q.createTreeWalker&&q.body&&(q.body.createShadowRoot||q.body.attachShadow)){const ye=q.createTreeWalker(q.body,NodeFilter.SHOW_ELEMENT);let Ze=ye.currentNode;for(;Ze;){const Dt=Ze.shadowRoot;if(Dt){const Jt=Dt.getElementById(fe)||Dt.querySelector(`[name="${fe}"]`);if(Jt)return Jt}Ze=ye.nextNode()}}return null}(this.document,fe);K&&(this.scrollToElement(K),this.attemptFocus(K))}setHistoryScrollRestoration(fe){if(this.supportScrollRestoration()){const K=this.window.history;K&&K.scrollRestoration&&(K.scrollRestoration=fe)}}scrollToElement(fe){const K=fe.getBoundingClientRect(),ye=K.left+this.window.pageXOffset,Ze=K.top+this.window.pageYOffset,Dt=this.offset();this.window.scrollTo(ye-Dt[0],Ze-Dt[1])}attemptFocus(fe){return fe.focus(),this.document.activeElement===fe}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const fe=vs(this.window.history)||vs(Object.getPrototypeOf(this.window.history));return!(!fe||!fe.writable&&!fe.set)}catch(fe){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(fe){return!1}}}function vs(q){return Object.getOwnPropertyDescriptor(q,"scrollRestoration")}class Ds{}},3018:(Xt,it,L)=>{"use strict";L.d(it,{deG:()=>Rc,tb:()=>XI,AFp:()=>KI,ip1:()=>Jv,CZH:()=>Ug,hGG:()=>qS,z2F:()=>fy,ahi:()=>wi,sBO:()=>Rw,Sil:()=>hy,_Vd:()=>Og,aQ5:()=>qi,EJc:()=>eb,SBq:()=>Pd,qLn:()=>mc,vpe:()=>Od,L6J:()=>BD,gxx:()=>Cd,tBr:()=>Rl,XFs:()=>vn,OlP:()=>Jn,zs3:()=>es,ZZ4:()=>E_,aQg:()=>I_,soG:()=>P_,YKP:()=>WE,v3s:()=>DS,h0i:()=>bp,PXZ:()=>ES,R0b:()=>xc,FiY:()=>Lo,r_U:()=>$D,Lbi:()=>QI,g9A:()=>ZI,Qsj:()=>gw,FYo:()=>v_,JOm:()=>Bi,Tiy:()=>Dv,q3G:()=>Cr,tp0:()=>eo,EAV:()=>RS,Rgc:()=>ey,dDg:()=>ib,DyG:()=>Ea,q4F:()=>Sv,GfV:()=>LE,i9L:()=>Yl,s_b:()=>w_,ifc:()=>bn,eFA:()=>cb,G48:()=>fS,Gpc:()=>xe,X6Q:()=>a0,_c5:()=>BS,VLi:()=>hS,c2e:()=>JI,zSh:()=>Sc,wAp:()=>$r,vHH:()=>$e,EiD:()=>An,mCW:()=>fc,qzn:()=>yl,JVY:()=>Ju,pB0:()=>Mh,eBb:()=>Nl,L6k:()=>Bc,LAX:()=>Bd,cg1:()=>yv,Tjo:()=>VS,kL8:()=>sE,yhl:()=>$d,dqk:()=>Dn,sIi:()=>$u,CqO:()=>Th,QGY:()=>Uu,F4k:()=>Rd,RDi:()=>K,AaK:()=>le,z3N:()=>tl,qOj:()=>Lu,TTD:()=>po,_Bn:()=>PE,xp6:()=>Hf,uIk:()=>Ge,ekj:()=>X,Suo:()=>SI,Xpm:()=>Pe,lG2:()=>Lr,Yz7:()=>hn,cJS:()=>br,oAB:()=>ir,Yjl:()=>At,Y36:()=>Ep,_UZ:()=>Hm,qZA:()=>jm,TgZ:()=>Um,EpF:()=>Qy,n5z:()=>Yn,Ikx:()=>mv,LFG:()=>Qi,$8M:()=>qr,$Z:()=>Vm,NdJ:()=>ju,CRH:()=>AI,oxw:()=>e_,Hsn:()=>n_,F$t:()=>t_,Q6J:()=>$m,s9C:()=>zm,iGM:()=>TI,CHM:()=>so,LSH:()=>ca,kYT:()=>En,YNc:()=>ky,_uU:()=>B0,Oqu:()=>gv,hij:()=>h_,Gf:()=>DI});var _=L(9765),A=L(5319),re=L(8891),Me=L(6682),ce=L(2441);var V=L(1307);function Ie(){return new _.xQ}function ae(t){for(let n in t)if(t[n]===ae)return n;throw Error("Could not find renamed property on target object.")}function Ne(t,n){for(const i in n)n.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=n[i])}function le(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(le).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const i=n.indexOf("\n");return-1===i?n:n.substring(0,i)}function Ee(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const at=ae({__forward_ref__:ae});function xe(t){return t.__forward_ref__=xe,t.toString=function(){return le(this())},t}function Oe(t){return Ye(t)?t():t}function Ye(t){return"function"==typeof t&&t.hasOwnProperty(at)&&t.__forward_ref__===xe}class $e extends Error{constructor(n,i){super(function(t,n){return`${t?`NG0${t}: `:""}${n}`}(n,i)),this.code=n}}function ct(t){return"string"==typeof t?t:null==t?"":String(t)}function bt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ct(t)}function Te(t,n){const i=n?` in ${n}`:"";throw new $e("201",`No provider for ${bt(t)} found${i}`)}function sn(t,n){null==t&&function(t,n,i,o){throw new Error(`ASSERTION ERROR: ${t}`+(null==o?"":` [Expected=> ${i} ${o} ${n} <=Actual]`))}(n,t,null,"!=")}function hn(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function br(t){return{providers:t.providers||[],imports:t.imports||[]}}function Qn(t){return wt(t,On)||wt(t,si)}function wt(t,n){return t.hasOwnProperty(n)?t[n]:null}function tr(t){return t&&(t.hasOwnProperty(Nn)||t.hasOwnProperty(Rr))?t[Nn]:null}const On=ae({\u0275prov:ae}),Nn=ae({\u0275inj:ae}),si=ae({ngInjectableDef:ae}),Rr=ae({ngInjectorDef:ae});var vn=(()=>((vn=vn||{})[vn.Default=0]="Default",vn[vn.Host=1]="Host",vn[vn.Self=2]="Self",vn[vn.SkipSelf=4]="SkipSelf",vn[vn.Optional=8]="Optional",vn))();let Fr;function Br(t){const n=Fr;return Fr=t,n}function er(t,n,i){const o=Qn(t);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:i&vn.Optional?null:void 0!==n?n:void Te(le(t),"Injector")}function ft(t){return{toString:t}.toString()}var Kn=(()=>((Kn=Kn||{})[Kn.OnPush=0]="OnPush",Kn[Kn.Default=1]="Default",Kn))(),bn=(()=>((bn=bn||{})[bn.Emulated=0]="Emulated",bn[bn.None=2]="None",bn[bn.ShadowDom=3]="ShadowDom",bn))();const gn="undefined"!=typeof globalThis&&globalThis,hr="undefined"!=typeof window&&window,fr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Dn=gn||"undefined"!=typeof global&&global||hr||fr,Lt={},Gt=[],yn=ae({\u0275cmp:ae}),rn=ae({\u0275dir:ae}),un=ae({\u0275pipe:ae}),Ue=ae({\u0275mod:ae}),ke=ae({\u0275loc:ae}),et=ae({\u0275fac:ae}),Fe=ae({__NG_ELEMENT_ID__:ae});let ve=0;function Pe(t){return ft(()=>{const i={},o={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Kn.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Gt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||bn.Emulated,id:"c",styles:t.styles||Gt,_:null,setInput:null,schemas:t.schemas||null,tView:null},u=t.directives,f=t.features,y=t.pipes;return o.id+=ve++,o.inputs=vr(t.inputs,i),o.outputs=vr(t.outputs),f&&f.forEach(b=>b(o)),o.directiveDefs=u?()=>("function"==typeof u?u():u).map(qt):null,o.pipeDefs=y?()=>("function"==typeof y?y():y).map(Un):null,o})}function qt(t){return jt(t)||function(t){return t[rn]||null}(t)}function Un(t){return function(t){return t[un]||null}(t)}const Sn={};function ir(t){return ft(()=>{const n={type:t.type,bootstrap:t.bootstrap||Gt,declarations:t.declarations||Gt,imports:t.imports||Gt,exports:t.exports||Gt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(Sn[t.id]=t.type),n})}function En(t,n){return ft(()=>{const i=qn(t,!0);i.declarations=n.declarations||Gt,i.imports=n.imports||Gt,i.exports=n.exports||Gt})}function vr(t,n){if(null==t)return Lt;const i={};for(const o in t)if(t.hasOwnProperty(o)){let u=t[o],f=u;Array.isArray(u)&&(f=u[1],u=u[0]),i[u]=o,n&&(n[u]=f)}return i}const Lr=Pe;function At(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function jt(t){return t[yn]||null}function qn(t,n){const i=t[Ue]||null;if(!i&&!0===n)throw new Error(`Type ${le(t)} does not have '\u0275mod' property.`);return i}const z=18,W=19;function Xn(t){return Array.isArray(t)&&"object"==typeof t[1]}function ur(t){return Array.isArray(t)&&!0===t[1]}function Gi(t){return 0!=(8&t.flags)}function di(t){return 2==(2&t.flags)}function bi(t){return 1==(1&t.flags)}function _i(t){return null!==t.template}function ws(t){return 0!=(512&t[2])}function as(t,n){return t.hasOwnProperty(et)?t[et]:null}class Nr{constructor(n,i,o){this.previousValue=n,this.currentValue=i,this.firstChange=o}isFirstChange(){return this.firstChange}}function po(){return ys}function ys(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ri),Fi}function Fi(){const t=Vs(this),n=null==t?void 0:t.current;if(n){const i=t.previous;if(i===Lt)t.previous=n;else for(let o in n)i[o]=n[o];t.current=null,this.ngOnChanges(n)}}function Ri(t,n,i,o){const u=Vs(t)||function(t,n){return t[Ws]=n}(t,{previous:Lt,current:null}),f=u.current||(u.current={}),y=u.previous,b=this.declaredInputs[i],M=y[b];f[b]=new Nr(M&&M.currentValue,n,y===Lt),t[o]=n}po.ngInherit=!0;const Ws="__ngSimpleChanges__";function Vs(t){return t[Ws]||null}let fe;function K(t){fe=t}function Dt(t){return!!t.listen}const G={createRenderer:(t,n)=>void 0!==fe?fe:"undefined"!=typeof document?document:void 0};function O(t){for(;Array.isArray(t);)t=t[0];return t}function pn(t,n){return O(n[t])}function Gn(t,n){return O(n[t.index])}function Li(t,n){return t.data[n]}function Pr(t,n){const i=n[t];return Xn(i)?i:i[0]}function Hr(t){return 4==(4&t[2])}function $s(t){return 128==(128&t[2])}function Ki(t,n){return null==n?null:t[n]}function ma(t){t[z]=0}function ya(t,n){t[5]+=n;let i=t,o=t[3];for(;null!==o&&(1===n&&1===i[5]||-1===n&&0===i[5]);)o[5]+=n,i=o,o=o[3]}const yr={lFrame:w(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Jo(){return yr.bindingsEnabled}function en(){return yr.lFrame.lView}function Ur(){return yr.lFrame.tView}function so(t){return yr.lFrame.contextLView=t,t[8]}function Si(){let t=ea();for(;null!==t&&64===t.type;)t=t.parent;return t}function ea(){return yr.lFrame.currentTNode}function zs(t,n){const i=yr.lFrame;i.currentTNode=t,i.isParent=n}function qs(){return yr.lFrame.isParent}function _a(){yr.lFrame.isParent=!1}function Bs(){return yr.isInCheckNoChangesMode}function Xi(t){yr.isInCheckNoChangesMode=t}function cs(){return yr.lFrame.bindingIndex++}function Eo(t,n){const i=yr.lFrame;i.bindingIndex=i.bindingRootIndex=t,ta(n)}function ta(t){yr.lFrame.currentDirectiveIndex=t}function ao(){return yr.lFrame.currentQueryIndex}function Ka(t){yr.lFrame.currentQueryIndex=t}function qo(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function na(t,n,i){if(i&vn.SkipSelf){let u=n,f=t;for(;!(u=u.parent,null!==u||i&vn.Host||(u=qo(f),null===u||(f=f[15],10&u.type))););if(null===u)return!1;n=u,t=f}const o=yr.lFrame=go();return o.currentTNode=n,o.lView=t,!0}function Io(t){const n=go(),i=t[1];yr.lFrame=n,n.currentTNode=i.firstChild,n.lView=t,n.tView=i,n.contextLView=t,n.bindingIndex=i.bindingStartIndex,n.inI18n=!1}function go(){const t=yr.lFrame,n=null===t?null:t.child;return null===n?w(t):n}function w(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function k(){const t=yr.lFrame;return yr.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const T=k;function Z(){const t=k();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ut(){return yr.lFrame.selectedIndex}function on(t){yr.lFrame.selectedIndex=t}function $n(){const t=yr.lFrame;return Li(t.tView,t.selectedIndex)}function Ys(t,n){for(let i=n.directiveStart,o=n.directiveEnd;i<o;i++){const f=t.data[i].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:b,ngAfterViewInit:M,ngAfterViewChecked:U,ngOnDestroy:te}=f;y&&(t.contentHooks||(t.contentHooks=[])).push(-i,y),b&&((t.contentHooks||(t.contentHooks=[])).push(i,b),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(i,b)),M&&(t.viewHooks||(t.viewHooks=[])).push(-i,M),U&&((t.viewHooks||(t.viewHooks=[])).push(i,U),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(i,U)),null!=te&&(t.destroyHooks||(t.destroyHooks=[])).push(i,te)}}function Bn(t,n,i){_n(t,n,3,i)}function or(t,n,i,o){(3&t[2])===i&&_n(t,n,i,o)}function Ra(t,n){let i=t[2];(3&i)===n&&(i&=2047,i+=1,t[2]=i)}function _n(t,n,i,o){const f=null!=o?o:-1,y=n.length-1;let b=0;for(let M=void 0!==o?65535&t[z]:0;M<y;M++)if("number"==typeof n[M+1]){if(b=n[M],null!=o&&b>=o)break}else n[M]<0&&(t[z]+=65536),(b<f||-1==f)&&(Et(t,i,n,M),t[z]=(4294901760&t[z])+M+2),M++}function Et(t,n,i,o){const u=i[o]<0,f=i[o+1],b=t[u?-i[o]:i[o]];if(u){if(t[2]>>11<t[z]>>16&&(3&t[2])===n){t[2]+=2048;try{f.call(b)}finally{}}}else try{f.call(b)}finally{}}class Zn{constructor(n,i,o){this.factory=n,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=o}}function Us(t,n,i){const o=Dt(t);let u=0;for(;u<i.length;){const f=i[u];if("number"==typeof f){if(0!==f)break;u++;const y=i[u++],b=i[u++],M=i[u++];o?t.setAttribute(n,b,M,y):n.setAttributeNS(y,b,M)}else{const y=f,b=i[++u];Ma(y)?o&&t.setProperty(n,y,b):o?t.setAttribute(n,y,b):n.setAttribute(y,b),u++}}return u}function zl(t){return 3===t||4===t||6===t}function Ma(t){return 64===t.charCodeAt(0)}function ar(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let i=-1;for(let o=0;o<n.length;o++){const u=n[o];"number"==typeof u?i=u:0===i||Ks(t,i,u,null,-1===i||2===i?n[++o]:null)}}return t}function Ks(t,n,i,o,u){let f=0,y=t.length;if(-1===n)y=-1;else for(;f<t.length;){const b=t[f++];if("number"==typeof b){if(b===n){y=-1;break}if(b>n){y=f-1;break}}}for(;f<t.length;){const b=t[f];if("number"==typeof b)break;if(b===i){if(null===o)return void(null!==u&&(t[f+1]=u));if(o===t[f+1])return void(t[f+2]=u)}f++,null!==o&&f++,null!==u&&f++}-1!==y&&(t.splice(y,0,n),f=y+1),t.splice(f++,0,i),null!==o&&t.splice(f++,0,o),null!==u&&t.splice(f++,0,u)}function Po(t){return-1!==t}function Ei(t){return 32767&t}function Zs(t,n){let i=function(t){return t>>16}(t),o=n;for(;i>0;)o=o[15],i--;return o}let Gr=!0;function Pa(t){const n=Gr;return Gr=t,n}let pl=0;function gl(t,n){const i=zr(t,n);if(-1!==i)return i;const o=n[1];o.firstCreatePass&&(t.injectorIndex=n.length,Qs(o.data,t),Qs(n,null),Qs(o.blueprint,null));const u=Oo(t,n),f=t.injectorIndex;if(Po(u)){const y=Ei(u),b=Zs(u,n),M=b[1].data;for(let U=0;U<8;U++)n[f+U]=b[y+U]|M[y+U]}return n[f+8]=u,f}function Qs(t,n){t.push(0,0,0,0,0,0,0,0,n)}function zr(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Oo(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let i=0,o=null,u=n;for(;null!==u;){const f=u[1],y=f.type;if(o=2===y?f.declTNode:1===y?u[6]:null,null===o)return-1;if(i++,u=u[15],-1!==o.injectorIndex)return o.injectorIndex|i<<16}return-1}function No(t,n,i){!function(t,n,i){let o;"string"==typeof i?o=i.charCodeAt(0)||0:i.hasOwnProperty(Fe)&&(o=i[Fe]),null==o&&(o=i[Fe]=pl++);const u=255&o;n.data[t+(u>>5)]|=1<<u}(t,n,i)}function $i(t,n,i){if(i&vn.Optional)return t;Te(n,"NodeInjector")}function F(t,n,i,o){if(i&vn.Optional&&void 0===o&&(o=null),0==(i&(vn.Self|vn.Host))){const u=t[9],f=Br(void 0);try{return u?u.get(n,o,i&vn.Optional):er(n,o,i&vn.Optional)}finally{Br(f)}}return $i(o,n,i)}function x(t,n,i,o=vn.Default,u){if(null!==t){const f=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(Fe)?t[Fe]:void 0;return"number"==typeof n?n>=0?255&n:B:n}(i);if("function"==typeof f){if(!na(n,t,o))return o&vn.Host?$i(u,i,o):F(n,i,o,u);try{const y=f(o);if(null!=y||o&vn.Optional)return y;Te(i)}finally{T()}}else if("number"==typeof f){let y=null,b=zr(t,n),M=-1,U=o&vn.Host?n[16][6]:null;for((-1===b||o&vn.SkipSelf)&&(M=-1===b?Oo(t,n):n[b+8],-1!==M&&Pn(o,!1)?(y=n[1],b=Ei(M),n=Zs(M,n)):b=-1);-1!==b;){const te=n[1];if(Bt(f,b,te.data)){const Ce=J(b,n,i,y,o,U);if(Ce!==S)return Ce}M=n[b+8],-1!==M&&Pn(o,n[1].data[b+8]===U)&&Bt(f,b,n)?(y=te,b=Ei(M),n=Zs(M,n)):b=-1}}}return F(n,i,o,u)}const S={};function B(){return new Ar(Si(),en())}function J(t,n,i,o,u,f){const y=n[1],b=y.data[t+8],te=Q(b,y,i,null==o?di(b)&&Gr:o!=y&&0!=(3&b.type),u&vn.Host&&f===b);return null!==te?Be(n,y,te,b):S}function Q(t,n,i,o,u){const f=t.providerIndexes,y=n.data,b=1048575&f,M=t.directiveStart,te=f>>20,Se=u?b+te:t.directiveEnd;for(let tt=o?b:b+te;tt<Se;tt++){const dt=y[tt];if(tt<M&&i===dt||tt>=M&&dt.type===i)return tt}if(u){const tt=y[M];if(tt&&_i(tt)&&tt.type===i)return M}return null}function Be(t,n,i,o){let u=t[i];const f=n.data;if(function(t){return t instanceof Zn}(u)){const y=u;y.resolving&&function(t,n){throw new $e("200",`Circular dependency in DI detected for ${t}`)}(bt(f[i]));const b=Pa(y.canSeeViewProviders);y.resolving=!0;const M=y.injectImpl?Br(y.injectImpl):null;na(t,o,vn.Default);try{u=t[i]=y.factory(void 0,f,t,o),n.firstCreatePass&&i>=o.directiveStart&&function(t,n,i){const{ngOnChanges:o,ngOnInit:u,ngDoCheck:f}=n.type.prototype;if(o){const y=ys(n);(i.preOrderHooks||(i.preOrderHooks=[])).push(t,y),(i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(t,y)}u&&(i.preOrderHooks||(i.preOrderHooks=[])).push(0-t,u),f&&((i.preOrderHooks||(i.preOrderHooks=[])).push(t,f),(i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(t,f))}(i,f[i],n)}finally{null!==M&&Br(M),Pa(b),y.resolving=!1,T()}}return u}function Bt(t,n,i){return!!(i[n+(t>>5)]&1<<t)}function Pn(t,n){return!(t&vn.Self||t&vn.Host&&n)}class Ar{constructor(n,i){this._tNode=n,this._lView=i}get(n,i,o){return x(this._tNode,this._lView,n,o,i)}}function Yn(t){return ft(()=>{const n=t.prototype.constructor,i=n[et]||ii(n),o=Object.prototype;let u=Object.getPrototypeOf(t.prototype).constructor;for(;u&&u!==o;){const f=u[et]||ii(u);if(f&&f!==i)return f;u=Object.getPrototypeOf(u)}return f=>new f})}function ii(t){return Ye(t)?()=>{const n=ii(Oe(t));return n&&n()}:as(t)}function qr(t){return function(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const i=t.attrs;if(i){const o=i.length;let u=0;for(;u<o;){const f=i[u];if(zl(f))break;if(0===f)u+=2;else if("number"==typeof f)for(u++;u<o&&"string"==typeof i[u];)u++;else{if(f===n)return i[u+1];u+=2}}}return null}(Si(),t)}const xs="__parameters__",js="__prop__metadata__";function bo(t){return function(...i){if(t){const o=t(...i);for(const u in o)this[u]=o[u]}}}function zi(t,n,i){return ft(()=>{const o=bo(n);function u(...f){if(this instanceof u)return o.apply(this,f),this;const y=new u(...f);return b.annotation=y,b;function b(M,U,te){const Ce=M.hasOwnProperty(xs)?M[xs]:Object.defineProperty(M,xs,{value:[]})[xs];for(;Ce.length<=te;)Ce.push(null);return(Ce[te]=Ce[te]||[]).push(y),M}}return i&&(u.prototype=Object.create(i.prototype)),u.prototype.ngMetadataName=t,u.annotationCls=u,u})}function Ko(t,n,i,o){return ft(()=>{const u=bo(n);function f(...y){if(this instanceof f)return u.apply(this,y),this;const b=new f(...y);return function(U,te){const Ce=U.constructor,Se=Ce.hasOwnProperty(js)?Ce[js]:Object.defineProperty(Ce,js,{value:{}})[js];Se[te]=Se.hasOwnProperty(te)&&Se[te]||[],Se[te].unshift(b),o&&o(U,te,...y)}}return i&&(f.prototype=Object.create(i.prototype)),f.prototype.ngMetadataName=t,f.annotationCls=f,f})}function Na(){return zi("Attribute",t=>({attributeName:t,__NG_ELEMENT_ID__:()=>qr(t)}))}const wi=Na();class Jn{constructor(n,i){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=hn({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Rc=new Jn("AnalyzeForEntryComponents");class lu{}const qi=Ko("ContentChild",(t,n={})=>Object.assign({selector:t,first:!0,isViewQuery:!1,descendants:!0},n),lu),Yl=Ko("ViewChild",(t,n)=>Object.assign({selector:t,first:!0,isViewQuery:!0,descendants:!0},n),lu),Ea=Function;function lo(t,n){void 0===n&&(n=t);for(let i=0;i<t.length;i++){let o=t[i];Array.isArray(o)?(n===t&&(n=t.slice(0,i)),lo(o,n)):n!==t&&n.push(o)}return n}function Ms(t,n){t.forEach(i=>Array.isArray(i)?Ms(i,n):n(i))}function Ia(t,n,i){n>=t.length?t.push(i):t.splice(n,0,i)}function Co(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function ba(t,n){const i=[];for(let o=0;o<t;o++)i.push(n);return i}function hs(t,n,i){let o=aa(t,n);return o>=0?t[1|o]=i:(o=~o,function(t,n,i,o){let u=t.length;if(u==n)t.push(i,o);else if(1===u)t.push(o,t[0]),t[0]=i;else{for(u--,t.push(t[u-1],t[u]);u>n;)t[u]=t[u-2],u--;t[n]=i,t[n+1]=o}}(t,o,n,i)),o}function ml(t,n){const i=aa(t,n);if(i>=0)return t[1|i]}function aa(t,n){return function(t,n,i){let o=0,u=t.length>>i;for(;u!==o;){const f=o+(u-o>>1),y=t[f<<i];if(n===y)return f<<i;y>n?u=f:o=f+1}return~(u<<i)}(t,n,1)}const xn={},gr="__NG_DI_FLAG__",lr="ngTempTokenPath",_r=/\n/gm,pi="__source",wo=ae({provide:String,useValue:ae});let To;function Js(t){const n=To;return To=t,n}function uu(t,n=vn.Default){if(void 0===To)throw new Error("inject() must be called from an injection context");return null===To?er(t,void 0,n):To.get(t,n&vn.Optional?null:void 0,n)}function Qi(t,n=vn.Default){return(Fr||uu)(Oe(t),n)}function co(t){const n=[];for(let i=0;i<t.length;i++){const o=Oe(t[i]);if(Array.isArray(o)){if(0===o.length)throw new Error("Arguments array must have arguments.");let u,f=vn.Default;for(let y=0;y<o.length;y++){const b=o[y],M=Oc(b);"number"==typeof M?-1===M?u=b.token:f|=M:u=b}n.push(Qi(u,f))}else n.push(Qi(o))}return n}function Ca(t,n){return t[gr]=n,t.prototype[gr]=n,t}function Oc(t){return t[gr]}function du(t,n,i,o){const u=t[lr];throw n[pi]&&u.unshift(n[pi]),t.message=function(t,n,i,o=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let u=le(n);if(Array.isArray(n))u=n.map(le).join(" -> ");else if("object"==typeof n){let f=[];for(let y in n)if(n.hasOwnProperty(y)){let b=n[y];f.push(y+":"+("string"==typeof b?JSON.stringify(b):le(b)))}u=`{${f.join(", ")}}`}return`${i}${o?"("+o+")":""}[${u}]: ${t.replace(_r,"\n  ")}`}("\n"+t.message,u,i,o),t.ngTokenPath=u,t[lr]=null,t}const Rl=Ca(zi("Inject",t=>({token:t})),-1),Lo=Ca(zi("Optional"),8),eo=Ca(zi("SkipSelf"),4);let Qu;function $a(t){var n;return(null===(n=function(){if(void 0===Qu&&(Qu=null,Dn.trustedTypes))try{Qu=Dn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return Qu}())||void 0===n?void 0:n.createHTML(t))||t}class Jl{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Xu extends Jl{getTypeName(){return"HTML"}}class fs extends Jl{getTypeName(){return"Style"}}class $c extends Jl{getTypeName(){return"Script"}}class gu extends Jl{getTypeName(){return"URL"}}class Vd extends Jl{getTypeName(){return"ResourceURL"}}function tl(t){return t instanceof Jl?t.changingThisBreaksApplicationSecurity:t}function yl(t,n){const i=$d(t);if(null!=i&&i!==n){if("ResourceURL"===i&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${i} (see https://g.co/ng/security#xss)`)}return i===n}function $d(t){return t instanceof Jl&&t.getTypeName()||null}function Ju(t){return new Xu(t)}function Bc(t){return new fs(t)}function Nl(t){return new $c(t)}function Bd(t){return new gu(t)}function Mh(t){return new Vd(t)}class kl{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const i=(new window.DOMParser).parseFromString($a(n),"text/html").body;return null===i?this.inertDocumentHelper.getInertBodyElement(n):(i.removeChild(i.firstChild),i)}catch(i){return null}}}class mu{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const i=this.inertDocument.createElement("html");this.inertDocument.appendChild(i);const o=this.inertDocument.createElement("body");i.appendChild(o)}}getInertBodyElement(n){const i=this.inertDocument.createElement("template");if("content"in i)return i.innerHTML=$a(n),i;const o=this.inertDocument.createElement("body");return o.innerHTML=$a(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(o),o}stripCustomNsAttrs(n){const i=n.attributes;for(let u=i.length-1;0<u;u--){const y=i.item(u).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&n.removeAttribute(y)}let o=n.firstChild;for(;o;)o.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(o),o=o.nextSibling}}const to=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,nd=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function fc(t){return(t=String(t)).match(to)||t.match(nd)?t:"unsafe:"+t}function Ba(t){const n={};for(const i of t.split(","))n[i]=!0;return n}function mo(...t){const n={};for(const i of t)for(const o in i)i.hasOwnProperty(o)&&(n[o]=!0);return n}const rd=Ba("area,br,col,hr,img,wbr"),pc=Ba("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ud=Ba("rp,rt"),id=mo(rd,mo(pc,Ba("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),mo(Ud,Ba("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),mo(Ud,pc)),sd=Ba("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),jr=Ba("srcset"),g=mo(sd,jr,Ba("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ba("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),v=Ba("script,style,template");class R{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let i=n.firstChild,o=!0;for(;i;)if(i.nodeType===Node.ELEMENT_NODE?o=this.startElement(i):i.nodeType===Node.TEXT_NODE?this.chars(i.nodeValue):this.sanitizedSomething=!0,o&&i.firstChild)i=i.firstChild;else for(;i;){i.nodeType===Node.ELEMENT_NODE&&this.endElement(i);let u=this.checkClobberedElement(i,i.nextSibling);if(u){i=u;break}i=this.checkClobberedElement(i,i.parentNode)}return this.buf.join("")}startElement(n){const i=n.nodeName.toLowerCase();if(!id.hasOwnProperty(i))return this.sanitizedSomething=!0,!v.hasOwnProperty(i);this.buf.push("<"),this.buf.push(i);const o=n.attributes;for(let u=0;u<o.length;u++){const f=o.item(u),y=f.name,b=y.toLowerCase();if(!g.hasOwnProperty(b)){this.sanitizedSomething=!0;continue}let M=f.value;sd[b]&&(M=fc(M)),jr[b]&&(t=M,M=(t=String(t)).split(",").map(n=>fc(n.trim())).join(", ")),this.buf.push(" ",y,'="',lt(M),'"')}var t;return this.buf.push(">"),!0}endElement(n){const i=n.nodeName.toLowerCase();id.hasOwnProperty(i)&&!rd.hasOwnProperty(i)&&(this.buf.push("</"),this.buf.push(i),this.buf.push(">"))}chars(n){this.buf.push(lt(n))}checkClobberedElement(n,i){if(i&&(n.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return i}}const ee=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,de=/([^\#-~ |!])/g;function lt(t){return t.replace(/&/g,"&amp;").replace(ee,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(de,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Vt;function An(t,n){let i=null;try{Vt=Vt||function(t){const n=new mu(t);return function(){try{return!!(new window.DOMParser).parseFromString($a(""),"text/html")}catch(t){return!1}}()?new kl(n):n}(t);let o=n?String(n):"";i=Vt.getInertBodyElement(o);let u=5,f=o;do{if(0===u)throw new Error("Failed to sanitize html because the input is unstable");u--,o=f,f=i.innerHTML,i=Vt.getInertBodyElement(o)}while(o!==f);return $a((new R).sanitizeChildren(dn(i)||i))}finally{if(i){const o=dn(i)||i;for(;o.firstChild;)o.removeChild(o.firstChild)}}}function dn(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Cr=(()=>((Cr=Cr||{})[Cr.NONE=0]="NONE",Cr[Cr.HTML=1]="HTML",Cr[Cr.STYLE=2]="STYLE",Cr[Cr.SCRIPT=3]="SCRIPT",Cr[Cr.URL=4]="URL",Cr[Cr.RESOURCE_URL=5]="RESOURCE_URL",Cr))();function ca(t){const n=function(){const t=en();return t&&t[12]}();return n?n.sanitize(Cr.URL,t)||"":yl(t,"URL")?tl(t):fc(ct(t))}const Cf="__ngContext__";function ua(t,n){t[Cf]=n}function Hc(t){const n=function(t){return t[Cf]||null}(t);return n?Array.isArray(n)?n:n.lView:null}function Iu(t){return t.ngOriginalError}function Sf(t,...n){t.error(...n)}class mc{constructor(){this._console=console}handleError(n){const i=this._findOriginalError(n),o=this._findContext(n),u=(t=n)&&t.ngErrorLogger||Sf;var t;u(this._console,"ERROR",n),i&&u(this._console,"ORIGINAL ERROR",i),o&&u(this._console,"ERROR CONTEXT",o)}_findContext(n){return n?n.ngDebugContext||this._findContext(Iu(n)):null}_findOriginalError(n){let i=n&&Iu(n);for(;i&&Iu(i);)i=Iu(i);return i||null}}const Op=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Dn))();function tc(t){return t instanceof Function?t():t}var Bi=(()=>((Bi=Bi||{})[Bi.Important=1]="Important",Bi[Bi.DashCase=2]="DashCase",Bi))();function yc(t,n){return undefined(t,n)}function zc(t){const n=t[3];return ur(n)?n[3]:n}function ud(t){return _c(t[13])}function Bo(t){return _c(t[4])}function _c(t){for(;null!==t&&!ur(t);)t=t[4];return t}function rl(t,n,i,o,u){if(null!=o){let f,y=!1;ur(o)?f=o:Xn(o)&&(y=!0,o=o[0]);const b=O(o);0===t&&null!==i?null==u?Lf(n,i,b):il(n,i,b,u||null,!0):1===t&&null!==i?il(n,i,b,u||null,!0):2===t?function(t,n,i){const o=hd(t,n);o&&function(t,n,i,o){Dt(t)?t.removeChild(n,i,o):n.removeChild(i)}(t,o,n,i)}(n,b,y):3===t&&n.destroyNode(b),null!=f&&function(t,n,i,o,u){const f=i[7];f!==O(i)&&rl(n,t,o,f,u);for(let b=10;b<i.length;b++){const M=i[b];Tu(M[1],M,t,n,o,f)}}(n,t,f,i,u)}}function Fh(t,n,i){return Dt(t)?t.createElement(n,i):null===i?t.createElement(n):t.createElementNS(i,n)}function Ec(t,n){const i=t[9],o=i.indexOf(n),u=n[3];1024&n[2]&&(n[2]&=-1025,ya(u,-1)),i.splice(o,1)}function Lh(t,n){if(t.length<=10)return;const i=10+n,o=t[i];if(o){const u=o[17];null!==u&&u!==t&&Ec(u,o),n>0&&(t[i-1][4]=o[4]);const f=Co(t,10+n);!function(t,n){Tu(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(o[1],o);const y=f[W];null!==y&&y.detachView(f[1]),o[3]=null,o[4]=null,o[2]&=-129}return o}function Ff(t,n){if(!(256&n[2])){const i=n[11];Dt(i)&&i.destroyNode&&Tu(t,n,i,3,null,null),function(t){let n=t[13];if(!n)return Zd(t[1],t);for(;n;){let i=null;if(Xn(n))i=n[13];else{const o=n[10];o&&(i=o)}if(!i){for(;n&&!n[4]&&n!==t;)Xn(n)&&Zd(n[1],n),n=n[3];null===n&&(n=t),Xn(n)&&Zd(n[1],n),i=n&&n[4]}n=i}}(n)}}function Zd(t,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function(t,n){let i;if(null!=t&&null!=(i=t.destroyHooks))for(let o=0;o<i.length;o+=2){const u=n[i[o]];if(!(u instanceof Zn)){const f=i[o+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const b=u[f[y]],M=f[y+1];try{M.call(b)}finally{}}else try{f.call(u)}finally{}}}}(t,n),function(t,n){const i=t.cleanup,o=n[7];let u=-1;if(null!==i)for(let f=0;f<i.length-1;f+=2)if("string"==typeof i[f]){const y=i[f+1],b="function"==typeof y?y(n):O(n[y]),M=o[u=i[f+2]],U=i[f+3];"boolean"==typeof U?b.removeEventListener(i[f],M,U):U>=0?o[u=U]():o[u=-U].unsubscribe(),f+=2}else{const y=o[u=i[f+1]];i[f].call(y)}if(null!==o){for(let f=u+1;f<o.length;f++)o[f]();n[7]=null}}(t,n),1===n[1].type&&Dt(n[11])&&n[11].destroy();const i=n[17];if(null!==i&&ur(n[3])){i!==n[3]&&Ec(i,n);const o=n[W];null!==o&&o.detachView(t)}}}function qc(t,n,i){return function(t,n,i){let o=n;for(;null!==o&&40&o.type;)o=(n=o).parent;if(null===o)return i[0];if(2&o.flags){const u=t.data[o.directiveStart].encapsulation;if(u===bn.None||u===bn.Emulated)return null}return Gn(o,i)}(t,n.parent,i)}function il(t,n,i,o,u){Dt(t)?t.insertBefore(n,i,o,u):n.insertBefore(i,o,u)}function Lf(t,n,i){Dt(t)?t.appendChild(n,i):n.appendChild(i)}function Vf(t,n,i,o,u){null!==o?il(t,n,i,o,u):Lf(t,n,i)}function hd(t,n){return Dt(t)?t.parentNode(n):n.parentNode}function Bh(t,n,i){return fd(t,n,i)}let fd=function(t,n,i){return 40&t.type?Gn(t,i):null};function Qd(t,n,i,o){const u=qc(t,o,n),f=n[11],b=Bh(o.parent||n[6],o,n);if(null!=u)if(Array.isArray(i))for(let M=0;M<i.length;M++)Vf(f,u,i[M],b,!1);else Vf(f,u,i,b,!1)}function wu(t,n){if(null!==n){const i=n.type;if(3&i)return Gn(n,t);if(4&i)return jh(-1,t[n.index]);if(8&i){const o=n.child;if(null!==o)return wu(t,o);{const u=t[n.index];return ur(u)?jh(-1,u):O(u)}}if(32&i)return yc(n,t)()||O(t[n.index]);{const o=Uo(t,n);return null!==o?Array.isArray(o)?o[0]:wu(zc(t[16]),o):wu(t,n.next)}}return null}function Uo(t,n){return null!==n?t[16][6].projection[n.projection]:null}function jh(t,n){const i=10+t+1;if(i<n.length){const o=n[i],u=o[1].firstChild;if(null!==u)return wu(o,u)}return n[7]}function pd(t,n,i,o,u,f,y){for(;null!=i;){const b=o[i.index],M=i.type;if(y&&0===n&&(b&&ua(O(b),o),i.flags|=4),64!=(64&i.flags))if(8&M)pd(t,n,i.child,o,u,f,!1),rl(n,t,u,b,f);else if(32&M){const U=yc(i,o);let te;for(;te=U();)rl(n,t,u,te,f);rl(n,t,u,b,f)}else 16&M?Kc(t,n,o,i,u,f):rl(n,t,u,b,f);i=y?i.projectionNext:i.next}}function Tu(t,n,i,o,u,f){pd(i,o,t.firstChild,n,u,f,!1)}function Kc(t,n,i,o,u,f){const y=i[16],M=y[6].projection[o.projection];if(Array.isArray(M))for(let U=0;U<M.length;U++)rl(n,t,u,M[U],f);else pd(t,n,M,y[3],u,f,!0)}function Hh(t,n,i){Dt(t)?t.setAttribute(n,"style",i):n.style.cssText=i}function Zc(t,n,i){Dt(t)?""===i?t.removeAttribute(n,"class"):t.setAttribute(n,"class",i):n.className=i}function $f(t,n,i){let o=t.length;for(;;){const u=t.indexOf(n,i);if(-1===u)return u;if(0===u||t.charCodeAt(u-1)<=32){const f=n.length;if(u+f===o||t.charCodeAt(u+f)<=32)return u}i=u+1}}const Bf="ng-template";function Lp(t,n,i){let o=0;for(;o<t.length;){let u=t[o++];if(i&&"class"===u){if(u=t[o],-1!==$f(u.toLowerCase(),n,0))return!0}else if(1===u){for(;o<t.length&&"string"==typeof(u=t[o++]);)if(u.toLowerCase()===n)return!0;return!1}}return!1}function Uf(t){return 4===t.type&&t.value!==Bf}function jf(t,n,i){return n===(4!==t.type||i?t.value:Bf)}function em(t,n,i){let o=4;const u=t.attrs||[],f=function(t){for(let n=0;n<t.length;n++)if(zl(t[n]))return n;return t.length}(u);let y=!1;for(let b=0;b<n.length;b++){const M=n[b];if("number"!=typeof M){if(!y)if(4&o){if(o=2|1&o,""!==M&&!jf(t,M,i)||""===M&&1===n.length){if(ps(o))return!1;y=!0}}else{const U=8&o?M:n[++b];if(8&o&&null!==t.attrs){if(!Lp(t.attrs,U,i)){if(ps(o))return!1;y=!0}continue}const Ce=Jd(8&o?"class":M,u,Uf(t),i);if(-1===Ce){if(ps(o))return!1;y=!0;continue}if(""!==U){let Se;Se=Ce>f?"":u[Ce+1].toLowerCase();const tt=8&o?Se:null;if(tt&&-1!==$f(tt,U,0)||2&o&&U!==Se){if(ps(o))return!1;y=!0}}}}else{if(!y&&!ps(o)&&!ps(M))return!1;if(y&&ps(M))continue;y=!1,o=M|1&o}}return ps(o)||y}function ps(t){return 0==(1&t)}function Jd(t,n,i,o){if(null===n)return-1;let u=0;if(o||!i){let f=!1;for(;u<n.length;){const y=n[u];if(y===t)return u;if(3===y||6===y)f=!0;else{if(1===y||2===y){let b=n[++u];for(;"string"==typeof b;)b=n[++u];continue}if(4===y)break;if(0===y){u+=4;continue}}u+=f?1:2}return-1}return function(t,n){let i=t.indexOf(4);if(i>-1)for(i++;i<t.length;){const o=t[i];if("number"==typeof o)return-1;if(o===n)return i;i++}return-1}(n,t)}function wc(t,n,i=!1){for(let o=0;o<n.length;o++)if(em(t,n[o],i))return!0;return!1}function Du(t,n){e:for(let i=0;i<n.length;i++){const o=n[i];if(t.length===o.length){for(let u=0;u<t.length;u++)if(t[u]!==o[u])continue e;return!0}}return!1}function th(t,n){return t?":not("+n.trim()+")":n}function Su(t){let n=t[0],i=1,o=2,u="",f=!1;for(;i<t.length;){let y=t[i];if("string"==typeof y)if(2&o){const b=t[++i];u+="["+y+(b.length>0?'="'+b+'"':"")+"]"}else 8&o?u+="."+y:4&o&&(u+=" "+y);else""!==u&&!ps(y)&&(n+=th(f,u),u=""),o=y,f=f||!ps(o);i++}return""!==u&&(n+=th(f,u)),n}const Qr={};function Hf(t){nm(Ur(),en(),Ut()+t,Bs())}function nm(t,n,i,o){if(!o)if(3==(3&n[2])){const f=t.preOrderCheckHooks;null!==f&&Bn(n,f,i)}else{const f=t.preOrderHooks;null!==f&&or(n,f,0,i)}on(i)}function nh(t,n){return t<<17|n<<2}function Ji(t){return t>>17&32767}function gd(t){return 2|t}function ol(t){return(131068&t)>>2}function Wh(t,n){return-131069&t|n<<2}function ih(t){return 1|t}function gm(t,n){const i=t.contentQueries;if(null!==i)for(let o=0;o<i.length;o+=2){const u=i[o],f=i[o+1];if(-1!==f){const y=t.data[f];Ka(u),y.contentQueries(2,n[f],f)}}}function Xc(t,n,i,o,u,f,y,b,M,U){const te=n.blueprint.slice();return te[0]=u,te[2]=140|o,ma(te),te[3]=te[15]=t,te[8]=i,te[10]=y||t&&t[10],te[11]=b||t&&t[11],te[12]=M||t&&t[12]||null,te[9]=U||t&&t[9]||null,te[6]=f,te[16]=2==n.type?t[16]:te,te}function Dc(t,n,i,o,u){let f=t.data[n];if(null===f)f=function(t,n,i,o,u){const f=ea(),y=qs(),M=t.data[n]=function(t,n,i,o,u,f){return{type:i,index:o,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:u,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,i,n,o,u);return null===t.firstChild&&(t.firstChild=M),null!==f&&(y?null==f.child&&null!==M.parent&&(f.child=M):null===f.next&&(f.next=M)),M}(t,n,i,o,u),yr.lFrame.inI18n&&(f.flags|=64);else if(64&f.type){f.type=i,f.value=o,f.attrs=u;const y=function(){const t=yr.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return zs(f,!0),f}function Au(t,n,i,o){if(0===i)return-1;const u=n.length;for(let f=0;f<i;f++)n.push(o),t.blueprint.push(o),t.data.push(null);return u}function Zh(t,n,i){Io(n);try{const o=t.viewQuery;null!==o&&ig(1,o,i);const u=t.template;null!==u&&Qh(t,n,u,1,i),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&gm(t,n),t.staticViewQueries&&ig(2,t.viewQuery,i);const f=t.components;null!==f&&function(t,n){for(let i=0;i<n.length;i++)hh(t,n[i])}(n,f)}catch(o){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),o}finally{n[2]&=-5,Z()}}function lh(t,n,i,o){const u=n[2];if(256==(256&u))return;Io(n);const f=Bs();try{ma(n),function(t){yr.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==i&&Qh(t,n,i,2,o);const y=3==(3&u);if(!f)if(y){const U=t.preOrderCheckHooks;null!==U&&Bn(n,U,null)}else{const U=t.preOrderHooks;null!==U&&or(n,U,0,null),Ra(n,0)}if(function(t){for(let n=ud(t);null!==n;n=Bo(n)){if(!n[2])continue;const i=n[9];for(let o=0;o<i.length;o++){const u=i[o],f=u[3];0==(1024&u[2])&&ya(f,1),u[2]|=1024}}}(n),function(t){for(let n=ud(t);null!==n;n=Bo(n))for(let i=10;i<n.length;i++){const o=n[i],u=o[1];$s(o)&&lh(u,o,u.template,o[8])}}(n),null!==t.contentQueries&&gm(t,n),!f)if(y){const U=t.contentCheckHooks;null!==U&&Bn(n,U)}else{const U=t.contentHooks;null!==U&&or(n,U,1),Ra(n,1)}!function(t,n){const i=t.hostBindingOpCodes;if(null!==i)try{for(let o=0;o<i.length;o++){const u=i[o];if(u<0)on(~u);else{const f=u,y=i[++o],b=i[++o];Eo(y,f),b(2,n[f])}}}finally{on(-1)}}(t,n);const b=t.components;null!==b&&function(t,n){for(let i=0;i<n.length;i++)xu(t,n[i])}(n,b);const M=t.viewQuery;if(null!==M&&ig(2,M,o),!f)if(y){const U=t.viewCheckHooks;null!==U&&Bn(n,U)}else{const U=t.viewHooks;null!==U&&or(n,U,2),Ra(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),f||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,ya(n[3],-1))}finally{Z()}}function Dy(t,n,i,o){const u=n[10],f=!Bs(),y=Hr(n);try{f&&!y&&u.begin&&u.begin(),y&&Zh(t,n,o),lh(t,n,i,o)}finally{f&&!y&&u.end&&u.end()}}function Qh(t,n,i,o,u){const f=Ut(),y=2&o;try{on(-1),y&&n.length>20&&nm(t,n,20,Bs()),i(o,u)}finally{on(f)}}function Yf(t,n,i){!Jo()||(function(t,n,i,o){const u=i.directiveStart,f=i.directiveEnd;t.firstCreatePass||gl(i,n),ua(o,n);const y=i.initialInputs;for(let b=u;b<f;b++){const M=t.data[b],U=_i(M);U&&Ry(n,i,M);const te=Be(n,t,b,i);ua(te,n),null!==y&&Jp(0,b-u,te,M,0,y),U&&(Pr(i.index,n)[8]=te)}}(t,n,i,Gn(i,n)),128==(128&i.flags)&&function(t,n,i){const o=i.directiveStart,u=i.directiveEnd,y=i.index,b=yr.lFrame.currentDirectiveIndex;try{on(y);for(let M=o;M<u;M++){const U=t.data[M],te=n[M];ta(M),(null!==U.hostBindings||0!==U.hostVars||null!==U.hostAttrs)&&Kp(U,te)}}finally{on(-1),ta(b)}}(t,n,i))}function Wp(t,n,i=Gn){const o=n.localNames;if(null!==o){let u=n.index+1;for(let f=0;f<o.length;f+=2){const y=o[f+1],b=-1===y?i(n,t):t[y];t[u++]=b}}}function Jc(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Ed(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function Ed(t,n,i,o,u,f,y,b,M,U){const te=20+o,Ce=te+u,Se=function(t,n){const i=[];for(let o=0;o<n;o++)i.push(o<t?null:Qr);return i}(te,Ce),tt="function"==typeof U?U():U;return Se[1]={type:t,blueprint:Se,template:i,queries:null,viewQuery:b,declTNode:n,data:Se.slice().fill(null,te),bindingStartIndex:te,expandoStartIndex:Ce,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:M,consts:tt,incompleteFirstPass:!1}}function Jh(t,n,i,o){const u=sf(n);null===i?u.push(o):(u.push(i),t.firstCreatePass&&np(t).push(o,u.length-1))}function Zf(t,n,i){for(let o in t)if(t.hasOwnProperty(o)){const u=t[o];(i=null===i?{}:i).hasOwnProperty(o)?i[o].push(n,u):i[o]=[n,u]}return i}function al(t,n,i,o,u,f,y,b){const M=Gn(n,i);let te,U=n.inputs;!b&&null!=U&&(te=U[o])?(ph(t,i,te,o,u),di(n)&&function(t,n){const i=Pr(n,t);16&i[2]||(i[2]|=64)}(i,n.index)):3&n.type&&(o=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(o),u=null!=y?y(u,n.value||"",o):u,Dt(f)?f.setProperty(M,o,u):Ma(o)||(M.setProperty?M.setProperty(o,u):M[o]=u))}function ef(t,n,i,o){let u=!1;if(Jo()){const f=function(t,n,i){const o=t.directiveRegistry;let u=null;if(o)for(let f=0;f<o.length;f++){const y=o[f];wc(i,y.selectors,!1)&&(u||(u=[]),No(gl(i,n),t,y.type),_i(y)?(Zp(t,i),u.unshift(y)):u.push(y))}return u}(t,n,i),y=null===o?null:{"":-1};if(null!==f){u=!0,Im(i,t.data.length,f.length);for(let te=0;te<f.length;te++){const Ce=f[te];Ce.providersResolver&&Ce.providersResolver(Ce)}let b=!1,M=!1,U=Au(t,n,f.length,null);for(let te=0;te<f.length;te++){const Ce=f[te];i.mergedAttrs=ar(i.mergedAttrs,Ce.hostAttrs),Xf(t,i,n,U,Ce),Qp(U,Ce,y),null!==Ce.contentQueries&&(i.flags|=8),(null!==Ce.hostBindings||null!==Ce.hostAttrs||0!==Ce.hostVars)&&(i.flags|=128);const Se=Ce.type.prototype;!b&&(Se.ngOnChanges||Se.ngOnInit||Se.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(i.index),b=!0),!M&&(Se.ngOnChanges||Se.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(i.index),M=!0),U++}!function(t,n){const o=n.directiveEnd,u=t.data,f=n.attrs,y=[];let b=null,M=null;for(let U=n.directiveStart;U<o;U++){const te=u[U],Ce=te.inputs,Se=null===f||Uf(n)?null:bm(Ce,f);y.push(Se),b=Zf(Ce,U,b),M=Zf(te.outputs,U,M)}null!==b&&(b.hasOwnProperty("class")&&(n.flags|=16),b.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=y,n.inputs=b,n.outputs=M}(t,i)}y&&function(t,n,i){if(n){const o=t.localNames=[];for(let u=0;u<n.length;u+=2){const f=i[n[u+1]];if(null==f)throw new $e("301",`Export of name '${n[u+1]}' not found!`);o.push(n[u],f)}}}(i,o,y)}return i.mergedAttrs=ar(i.mergedAttrs,i.attrs),u}function qp(t,n,i,o,u,f){const y=f.hostBindings;if(y){let b=t.hostBindingOpCodes;null===b&&(b=t.hostBindingOpCodes=[]);const M=~n.index;(function(t){let n=t.length;for(;n>0;){const i=t[--n];if("number"==typeof i&&i<0)return i}return 0})(b)!=M&&b.push(M),b.push(o,u,y)}}function Kp(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function Zp(t,n){n.flags|=2,(t.components||(t.components=[])).push(n.index)}function Qp(t,n,i){if(i){if(n.exportAs)for(let o=0;o<n.exportAs.length;o++)i[n.exportAs[o]]=t;_i(n)&&(i[""]=t)}}function Im(t,n,i){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+i,t.providerIndexes=n}function Xf(t,n,i,o,u){t.data[o]=u;const f=u.factory||(u.factory=as(u.type)),y=new Zn(f,_i(u),null);t.blueprint[o]=y,i[o]=y,qp(t,n,0,o,Au(t,i,u.hostVars,Qr),u)}function Ry(t,n,i){const o=Gn(n,t),u=Jc(i),f=t[10],y=nf(t,Xc(t,u,null,i.onPush?64:16,o,n,f,f.createRenderer(o,i),null,null));t[n.index]=y}function jl(t,n,i,o,u,f){const y=Gn(t,n);!function(t,n,i,o,u,f,y){if(null==f)Dt(t)?t.removeAttribute(n,u,i):n.removeAttribute(u);else{const b=null==y?ct(f):y(f,o||"",u);Dt(t)?t.setAttribute(n,u,b,i):i?n.setAttributeNS(i,u,b):n.setAttribute(u,b)}}(n[11],y,f,t.value,i,o,u)}function Jp(t,n,i,o,u,f){const y=f[n];if(null!==y){const b=o.setInput;for(let M=0;M<y.length;){const U=y[M++],te=y[M++],Ce=y[M++];null!==b?o.setInput(i,Ce,U,te):i[te]=Ce}}}function bm(t,n){let i=null,o=0;for(;o<n.length;){const u=n[o];if(0!==u)if(5!==u){if("number"==typeof u)break;t.hasOwnProperty(u)&&(null===i&&(i=[]),i.push(u,t[u],n[o+1])),o+=2}else o+=2;else o+=4}return i}function Jf(t,n,i,o){return new Array(t,!0,!1,n,null,0,o,i,null,null)}function xu(t,n){const i=Pr(n,t);if($s(i)){const o=i[1];80&i[2]?lh(o,i,o.template,i[8]):i[5]>0&&tf(i)}}function tf(t){for(let o=ud(t);null!==o;o=Bo(o))for(let u=10;u<o.length;u++){const f=o[u];if(1024&f[2]){const y=f[1];lh(y,f,y.template,f[8])}else f[5]>0&&tf(f)}const i=t[1].components;if(null!==i)for(let o=0;o<i.length;o++){const u=Pr(i[o],t);$s(u)&&u[5]>0&&tf(u)}}function hh(t,n){const i=Pr(n,t),o=i[1];(function(t,n){for(let i=n.length;i<t.blueprint.length;i++)n.push(t.blueprint[i])})(o,i),Zh(o,i,i[8])}function nf(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function Ru(t){for(;t;){t[2]|=64;const n=zc(t);if(ws(t)&&!n)return t;t=n}return null}function rf(t,n,i){const o=n[10];o.begin&&o.begin();try{lh(t,n,t.template,i)}catch(u){throw sg(n,u),u}finally{o.end&&o.end()}}function ep(t){!function(t){for(let n=0;n<t.components.length;n++){const i=t.components[n],o=Hc(i),u=o[1];Dy(u,o,u.template,i)}}(t[8])}function ig(t,n,i){Ka(0),n(t,i)}const tp=(()=>Promise.resolve(null))();function sf(t){return t[7]||(t[7]=[])}function np(t){return t.cleanup||(t.cleanup=[])}function sg(t,n){const i=t[9],o=i?i.get(mc,null):null;o&&o.handleError(n)}function ph(t,n,i,o,u){for(let f=0;f<i.length;){const y=i[f++],b=i[f++],M=n[y],U=t.data[y];null!==U.setInput?U.setInput(M,u,o,b):M[b]=u}}function Ta(t,n,i){const o=pn(n,t);!function(t,n,i){Dt(t)?t.setValue(n,i):n.textContent=i}(t[11],o,i)}function sc(t,n,i){let o=i?t.styles:null,u=i?t.classes:null,f=0;if(null!==n)for(let y=0;y<n.length;y++){const b=n[y];"number"==typeof b?f=b:1==f?u=Ee(u,b):2==f&&(o=Ee(o,b+": "+n[++y]+";"))}i?t.styles=o:t.stylesWithoutHost=o,i?t.classes=u:t.classesWithoutHost=u}const Cd=new Jn("INJECTOR",-1);class ag{get(n,i=xn){if(i===xn){const o=new Error(`NullInjectorError: No provider for ${le(n)}!`);throw o.name="NullInjectorError",o}return i}}const Sc=new Jn("Set Injector scope."),Mu={},gh={};let ll;function ip(){return void 0===ll&&(ll=new ag),ll}function In(t,n=null,i=null,o){return new lg(t,i,n||ip(),o)}class lg{constructor(n,i,o,u=null){this.parent=o,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];i&&Ms(i,b=>this.processProvider(b,n,i)),Ms([n],b=>this.processInjectorType(b,[],f)),this.records.set(Cd,oc(void 0,this));const y=this.records.get(Sc);this.scope=null!=y?y.value:null,this.source=u||("object"==typeof n?null:le(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,i=xn,o=vn.Default){this.assertNotDestroyed();const u=Js(this),f=Br(void 0);try{if(!(o&vn.SkipSelf)){let b=this.records.get(n);if(void 0===b){const M=("function"==typeof(t=n)||"object"==typeof t&&t instanceof Jn)&&Qn(n);b=M&&this.injectableDefInScope(M)?oc(mh(n),Mu):null,this.records.set(n,b)}if(null!=b)return this.hydrate(n,b)}return(o&vn.Self?ip():this.parent).get(n,i=o&vn.Optional&&i===xn?null:i)}catch(y){if("NullInjectorError"===y.name){if((y[lr]=y[lr]||[]).unshift(le(n)),u)throw y;return du(y,n,"R3InjectorError",this.source)}throw y}finally{Br(f),Js(u)}var t}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((o,u)=>n.push(le(u))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(n,i,o){if(!(n=Oe(n)))return!1;let u=tr(n);const f=null==u&&n.ngModule||void 0,y=void 0===f?n:f,b=-1!==o.indexOf(y);if(void 0!==f&&(u=tr(f)),null==u)return!1;if(null!=u.imports&&!b){let te;o.push(y);try{Ms(u.imports,Ce=>{this.processInjectorType(Ce,i,o)&&(void 0===te&&(te=[]),te.push(Ce))})}finally{}if(void 0!==te)for(let Ce=0;Ce<te.length;Ce++){const{ngModule:Se,providers:tt}=te[Ce];Ms(tt,dt=>this.processProvider(dt,Se,tt||Gt))}}this.injectorDefTypes.add(y);const M=as(y)||(()=>new y);this.records.set(y,oc(M,Mu));const U=u.providers;if(null!=U&&!b){const te=n;Ms(U,Ce=>this.processProvider(Ce,te,U))}return void 0!==f&&void 0!==n.providers}processProvider(n,i,o){let u=Pu(n=Oe(n))?n:Oe(n&&n.provide);const f=(t=n,wd(t)?oc(void 0,t.useValue):oc(yh(t),Mu));var t;if(Pu(n)||!0!==n.multi)this.records.get(u);else{let y=this.records.get(u);y||(y=oc(void 0,Mu,!0),y.factory=()=>co(y.multi),this.records.set(u,y)),u=n,y.multi.push(n)}this.records.set(u,f)}hydrate(n,i){return i.value===Mu&&(i.value=gh,i.value=i.factory()),"object"==typeof i.value&&i.value&&null!==(t=i.value)&&"object"==typeof t&&"function"==typeof t.ngOnDestroy&&this.onDestroy.add(i.value),i.value;var t}injectableDefInScope(n){if(!n.providedIn)return!1;const i=Oe(n.providedIn);return"string"==typeof i?"any"===i||i===this.scope:this.injectorDefTypes.has(i)}}function mh(t){const n=Qn(t),i=null!==n?n.factory:as(t);if(null!==i)return i;if(t instanceof Jn)throw new Error(`Token ${le(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const n=t.length;if(n>0){const o=ba(n,"?");throw new Error(`Can't resolve all parameters for ${le(t)}: (${o.join(", ")}).`)}const i=function(t){const n=t&&(t[On]||t[si]);if(n){const i=function(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${i}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${i}" class.`),n}return null}(t);return null!==i?()=>i.factory(t):()=>new t}(t);throw new Error("unreachable")}function yh(t,n,i){let o;if(Pu(t)){const u=Oe(t);return as(u)||mh(u)}if(wd(t))o=()=>Oe(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))o=()=>t.useFactory(...co(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))o=()=>Qi(Oe(t.useExisting));else{const u=Oe(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return as(u)||mh(u);o=()=>new u(...co(t.deps))}return o}function oc(t,n,i=!1){return{factory:t,value:n,multi:i?[]:void 0}}function wd(t){return null!==t&&"object"==typeof t&&wo in t}function Pu(t){return"function"==typeof t}const ha=function(t,n,i){return function(t,n=null,i=null,o){const u=In(t,n,i,o);return u._resolveInjectorDefTypes(),u}({name:i},n,t,i)};let es=(()=>{class t{static create(i,o){return Array.isArray(i)?ha(i,o,""):ha(i.providers,i.parent,i.name||"")}}return t.THROW_IF_NOT_FOUND=xn,t.NULL=new ag,t.\u0275prov=hn({token:t,providedIn:"any",factory:()=>Qi(Cd)}),t.__NG_ELEMENT_ID__=-1,t})();function pf(t,n){Ys(Hc(t)[1],Si())}function Lu(t){let n=function(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),i=!0;const o=[t];for(;n;){let u;if(_i(t))u=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Error("Directives cannot inherit Components");u=n.\u0275dir}if(u){if(i){o.push(u);const y=t;y.inputs=Vu(t.inputs),y.declaredInputs=Vu(t.declaredInputs),y.outputs=Vu(t.outputs);const b=u.hostBindings;b&&Rm(t,b);const M=u.viewQuery,U=u.contentQueries;if(M&&Eg(t,M),U&&xm(t,U),Ne(t.inputs,u.inputs),Ne(t.declaredInputs,u.declaredInputs),Ne(t.outputs,u.outputs),_i(u)&&u.data.animation){const te=t.data;te.animation=(te.animation||[]).concat(u.data.animation)}}const f=u.features;if(f)for(let y=0;y<f.length;y++){const b=f[y];b&&b.ngInherit&&b(t),b===Lu&&(i=!1)}}n=Object.getPrototypeOf(n)}!function(t){let n=0,i=null;for(let o=t.length-1;o>=0;o--){const u=t[o];u.hostVars=n+=u.hostVars,u.hostAttrs=ar(u.hostAttrs,i=ar(i,u.hostAttrs))}}(o)}function Vu(t){return t===Lt?{}:t===Gt?[]:t}function Eg(t,n){const i=t.viewQuery;t.viewQuery=i?(o,u)=>{n(o,u),i(o,u)}:n}function xm(t,n){const i=t.contentQueries;t.contentQueries=i?(o,u,f)=>{n(o,u,f),i(o,u,f)}:n}function Rm(t,n){const i=t.hostBindings;t.hostBindings=i?(o,u)=>{n(o,u),i(o,u)}:n}let gf=null;function iu(){if(!gf){const t=Dn.Symbol;if(t&&t.iterator)gf=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let i=0;i<n.length;++i){const o=n[i];"entries"!==o&&"size"!==o&&Map.prototype[o]===Map.prototype.entries&&(gf=o)}}}return gf}function $u(t){return!!c(t)&&(Array.isArray(t)||!(t instanceof Map)&&iu()in t)}function c(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function N(t,n,i){return!Object.is(t[n],i)&&(t[n]=i,!0)}function Ge(t,n,i,o){const u=en();return N(u,cs(),n)&&(Ur(),jl($n(),u,t,n,i,o)),Ge}function kt(t,n,i,o){return N(t,cs(),i)?n+ct(i)+o:Qr}function ky(t,n,i,o,u,f,y,b){const M=en(),U=Ur(),te=t+20,Ce=U.firstCreatePass?function(t,n,i,o,u,f,y,b,M){const U=n.consts,te=Dc(n,t,4,y||null,Ki(U,b));ef(n,i,te,Ki(U,M)),Ys(n,te);const Ce=te.tViews=Ed(2,te,o,u,f,n.directiveRegistry,n.pipeRegistry,null,n.schemas,U);return null!==n.queries&&(n.queries.template(n,te),Ce.queries=n.queries.embeddedTView(te)),te}(te,U,M,n,i,o,u,f,y):U.data[te];zs(Ce,!1);const Se=M[11].createComment("");Qd(U,M,Se,Ce),ua(Se,M),nf(M,M[te]=Jf(Se,M,Se,Ce)),bi(Ce)&&Yf(U,M,Ce),null!=y&&Wp(M,Ce,b)}function Ep(t,n=vn.Default){const i=en();return null===i?Qi(t,n):x(Si(),i,Oe(t),n)}function Vm(){throw new Error("invalid")}function $m(t,n,i){const o=en();return N(o,cs(),n)&&al(Ur(),$n(),o,t,n,o[11],i,!1),$m}function Bm(t,n,i,o,u){const y=u?"class":"style";ph(t,i,n.inputs[y],y,o)}function Um(t,n,i,o){const u=en(),f=Ur(),y=20+t,b=u[11],M=u[y]=Fh(b,n,yr.lFrame.currentNamespace),U=f.firstCreatePass?function(t,n,i,o,u,f,y){const b=n.consts,U=Dc(n,t,2,u,Ki(b,f));return ef(n,i,U,Ki(b,y)),null!==U.attrs&&sc(U,U.attrs,!1),null!==U.mergedAttrs&&sc(U,U.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,U),U}(y,f,u,0,n,i,o):f.data[y];zs(U,!0);const te=U.mergedAttrs;null!==te&&Us(b,M,te);const Ce=U.classes;null!==Ce&&Zc(b,M,Ce);const Se=U.styles;null!==Se&&Hh(b,M,Se),64!=(64&U.flags)&&Qd(f,u,M,U),0===yr.lFrame.elementDepthCount&&ua(M,u),yr.lFrame.elementDepthCount++,bi(U)&&(Yf(f,u,U),function(t,n,i){if(Gi(n)){const u=n.directiveEnd;for(let f=n.directiveStart;f<u;f++){const y=t.data[f];y.contentQueries&&y.contentQueries(1,i[f],f)}}}(f,U,u)),null!==o&&Wp(u,U)}function jm(){let t=Si();qs()?_a():(t=t.parent,zs(t,!1));const n=t;yr.lFrame.elementDepthCount--;const i=Ur();i.firstCreatePass&&(Ys(i,t),Gi(t)&&i.queries.elementEnd(t)),null!=n.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(n)&&Bm(i,n,en(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(n)&&Bm(i,n,en(),n.stylesWithoutHost,!1)}function Hm(t,n,i,o){Um(t,n,i,o),jm()}function Qy(){return en()}function Uu(t){return!!t&&"function"==typeof t.then}function Rd(t){return!!t&&"function"==typeof t.subscribe}const Th=Rd;function ju(t,n,i,o){const u=en(),f=Ur(),y=Si();return function(t,n,i,o,u,f,y,b){const M=bi(o),te=t.firstCreatePass&&np(t),Ce=n[8],Se=sf(n);let tt=!0;if(3&o.type||b){const St=Gn(o,n),wn=b?b(St):St,tn=Se.length,wr=b?Xr=>b(O(Xr[o.index])):o.index;if(Dt(i)){let Xr=null;if(!b&&M&&(Xr=function(t,n,i,o){const u=t.cleanup;if(null!=u)for(let f=0;f<u.length-1;f+=2){const y=u[f];if(y===i&&u[f+1]===o){const b=n[7],M=u[f+2];return b.length>M?b[M]:null}"string"==typeof y&&(f+=2)}return null}(t,n,u,o.index)),null!==Xr)(Xr.__ngLastListenerFn__||Xr).__ngNextListenerFn__=f,Xr.__ngLastListenerFn__=f,tt=!1;else{f=Gm(o,n,Ce,f,!1);const Mi=i.listen(wn,u,f);Se.push(f,Mi),te&&te.push(u,wr,tn,tn+1)}}else f=Gm(o,n,Ce,f,!0),wn.addEventListener(u,f,y),Se.push(f),te&&te.push(u,wr,tn,y)}else f=Gm(o,n,Ce,f,!1);const dt=o.outputs;let $t;if(tt&&null!==dt&&($t=dt[u])){const St=$t.length;if(St)for(let wn=0;wn<St;wn+=2){const Sa=n[$t[wn]][$t[wn+1]].subscribe(f),au=Se.length;Se.push(f,Sa),te&&te.push(u,o.index,au,-(au+1))}}}(f,u,u[11],y,t,n,!!i,o),ju}function Hu(t,n,i,o){try{return!1!==i(o)}catch(u){return sg(t,u),!1}}function Gm(t,n,i,o,u){return function f(y){if(y===Function)return o;const b=2&t.flags?Pr(t.index,n):n;0==(32&n[2])&&Ru(b);let M=Hu(n,0,o,y),U=f.__ngNextListenerFn__;for(;U;)M=Hu(n,0,U,y)&&M,U=U.__ngNextListenerFn__;return u&&!1===M&&(y.preventDefault(),y.returnValue=!1),M}}function e_(t=1){return function(t){return(yr.lFrame.contextLView=function(t,n){for(;t>0;)n=n[15],t--;return n}(t,yr.lFrame.contextLView))[8]}(t)}function lv(t,n){let i=null;const o=function(t){const n=t.attrs;if(null!=n){const i=n.indexOf(5);if(0==(1&i))return n[i+1]}return null}(t);for(let u=0;u<n.length;u++){const f=n[u];if("*"!==f){if(null===o?wc(t,f,!0):Du(o,f))return u}else i=u}return i}function t_(t){const n=en()[16][6];if(!n.projection){const o=n.projection=ba(t?t.length:1,null),u=o.slice();let f=n.child;for(;null!==f;){const y=t?lv(f,t):0;null!==y&&(u[y]?u[y].projectionNext=f:o[y]=f,u[y]=f),f=f.next}}}function n_(t,n=0,i){const o=en(),u=Ur(),f=Dc(u,20+t,16,null,i||null);null===f.projection&&(f.projection=n),_a(),64!=(64&f.flags)&&function(t,n,i){Kc(n[11],0,n,i,qc(t,i,n),Bh(i.parent||n[6],i,n))}(u,o,f)}function zm(t,n,i){return qm(t,"",n,"",i),zm}function qm(t,n,i,o,u){const f=en(),y=kt(f,n,i,o);return y!==Qr&&al(Ur(),$n(),f,t,y,f[11],u,!1),qm}function l_(t,n,i,o,u){const f=t[i+1],y=null===n;let b=o?Ji(f):ol(f),M=!1;for(;0!==b&&(!1===M||y);){const te=t[b+1];dv(t[b],n)&&(M=!0,t[b+1]=o?ih(te):gd(te)),b=o?Ji(te):ol(te)}M&&(t[i+1]=o?gd(f):ih(f))}function dv(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&aa(t,n)>=0}function X(t,n){return function(t,n,i,o){const u=en(),f=Ur(),y=function(t){const n=yr.lFrame,i=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,i}(2);f.firstUpdatePass&&function(t,n,i,o){const u=t.data;if(null===u[i+1]){const f=u[Ut()],y=function(t,n){return n>=t.expandoStartIndex}(t,i);(function(t,n){return 0!=(t.flags&(n?16:32))})(f,o)&&null===n&&!y&&(n=!1),n=function(t,n,i,o){const u=function(t){const n=yr.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let f=o?n.residualClasses:n.residualStyles;if(null===u)0===(o?n.classBindings:n.styleBindings)&&(i=Ni(i=ns(null,t,n,i,o),n.attrs,o),f=null);else{const y=n.directiveStylingLast;if(-1===y||t[y]!==u)if(i=ns(u,t,n,i,o),null===f){let M=function(t,n,i){const o=i?n.classBindings:n.styleBindings;if(0!==ol(o))return t[Ji(o)]}(t,n,o);void 0!==M&&Array.isArray(M)&&(M=ns(null,t,n,M[1],o),M=Ni(M,n.attrs,o),function(t,n,i,o){t[Ji(i?n.classBindings:n.styleBindings)]=o}(t,n,o,M))}else f=function(t,n,i){let o;const u=n.directiveEnd;for(let f=1+n.directiveStylingLast;f<u;f++)o=Ni(o,t[f].hostAttrs,i);return Ni(o,n.attrs,i)}(t,n,o)}return void 0!==f&&(o?n.residualClasses=f:n.residualStyles=f),i}(u,f,n,o),function(t,n,i,o,u,f){let y=f?n.classBindings:n.styleBindings,b=Ji(y),M=ol(y);t[o]=i;let te,U=!1;if(Array.isArray(i)){const Ce=i;te=Ce[1],(null===te||aa(Ce,te)>0)&&(U=!0)}else te=i;if(u)if(0!==M){const Se=Ji(t[b+1]);t[o+1]=nh(Se,b),0!==Se&&(t[Se+1]=Wh(t[Se+1],o)),t[b+1]=function(t,n){return 131071&t|n<<17}(t[b+1],o)}else t[o+1]=nh(b,0),0!==b&&(t[b+1]=Wh(t[b+1],o)),b=o;else t[o+1]=nh(M,0),0===b?b=o:t[M+1]=Wh(t[M+1],o),M=o;U&&(t[o+1]=gd(t[o+1])),l_(t,te,o,!0),l_(t,te,o,!1),function(t,n,i,o,u){const f=u?t.residualClasses:t.residualStyles;null!=f&&"string"==typeof n&&aa(f,n)>=0&&(i[o+1]=ih(i[o+1]))}(n,te,t,o,f),y=nh(b,M),f?n.classBindings=y:n.styleBindings=y}(u,f,n,i,y,o)}}(f,t,y,o),n!==Qr&&N(u,y,n)&&function(t,n,i,o,u,f,y,b){if(!(3&n.type))return;const M=t.data,U=M[b+1];d_(function(t){return 1==(1&t)}(U)?V0(M,n,i,u,ol(U),y):void 0)||(d_(f)||function(t){return 2==(2&t)}(U)&&(f=V0(M,null,i,u,b,y)),function(t,n,i,o,u){const f=Dt(t);if(n)u?f?t.addClass(i,o):i.classList.add(o):f?t.removeClass(i,o):i.classList.remove(o);else{let y=-1===o.indexOf("-")?void 0:Bi.DashCase;if(null==u)f?t.removeStyle(i,o,y):i.style.removeProperty(o);else{const b="string"==typeof u&&u.endsWith("!important");b&&(u=u.slice(0,-10),y|=Bi.Important),f?t.setStyle(i,o,u,y):i.style.setProperty(o,u,b?"important":"")}}}(o,y,pn(Ut(),i),u,f))}(f,f.data[Ut()],u,u[11],t,u[y+1]=function(t,n){return null==t||("string"==typeof n?t+=n:"object"==typeof t&&(t=le(tl(t)))),t}(n,i),o,y)}(t,n,null,!0),X}function ns(t,n,i,o,u){let f=null;const y=i.directiveEnd;let b=i.directiveStylingLast;for(-1===b?b=i.directiveStart:b++;b<y&&(f=n[b],o=Ni(o,f.hostAttrs,u),f!==t);)b++;return null!==t&&(i.directiveStylingLast=b),o}function Ni(t,n,i){const o=i?1:2;let u=-1;if(null!==n)for(let f=0;f<n.length;f++){const y=n[f];"number"==typeof y?u=y:u===o&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),hs(t,y,!!i||n[++f]))}return void 0===t?null:t}function V0(t,n,i,o,u,f){const y=null===n;let b;for(;u>0;){const M=t[u],U=Array.isArray(M),te=U?M[1]:M,Ce=null===te;let Se=i[u+1];Se===Qr&&(Se=Ce?Gt:void 0);let tt=Ce?ml(Se,o):te===o?Se:void 0;if(U&&!d_(tt)&&(tt=ml(M,o)),d_(tt)&&(b=tt,y))return b;const dt=t[u+1];u=y?Ji(dt):ol(dt)}if(null!==n){let M=f?n.residualClasses:n.residualStyles;null!=M&&(b=ml(M,o))}return b}function d_(t){return void 0!==t}function B0(t,n=""){const i=en(),o=Ur(),u=t+20,f=o.firstCreatePass?Dc(o,u,1,n,null):o.data[u],y=i[u]=function(t,n){return Dt(t)?t.createText(n):t.createTextNode(n)}(i[11],n);Qd(o,i,y,f),zs(f,!1)}function gv(t){return h_("",t,""),gv}function h_(t,n,i){const o=en(),u=kt(o,t,n,i);return u!==Qr&&Ta(o,Ut(),u),h_}function mv(t,n,i){const o=en();return N(o,cs(),n)&&al(Ur(),$n(),o,t,n,o[11],i,!0),mv}const Ip=void 0;var dC=["en",[["a","p"],["AM","PM"],Ip],[["AM","PM"],Ip,Ip],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ip,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ip,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ip,"{1} 'at' {0}",Ip],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const n=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===i?1:5}];let Mg={};function yv(t){const n=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let i=oE(n);if(i)return i;const o=n.split("-")[0];if(i=oE(o),i)return i;if("en"===o)return dC;throw new Error(`Missing locale data for the locale "${t}".`)}function sE(t){return yv(t)[$r.PluralCase]}function oE(t){return t in Mg||(Mg[t]=Dn.ng&&Dn.ng.common&&Dn.ng.common.locales&&Dn.ng.common.locales[t]),Mg[t]}var $r=(()=>(($r=$r||{})[$r.LocaleId=0]="LocaleId",$r[$r.DayPeriodsFormat=1]="DayPeriodsFormat",$r[$r.DayPeriodsStandalone=2]="DayPeriodsStandalone",$r[$r.DaysFormat=3]="DaysFormat",$r[$r.DaysStandalone=4]="DaysStandalone",$r[$r.MonthsFormat=5]="MonthsFormat",$r[$r.MonthsStandalone=6]="MonthsStandalone",$r[$r.Eras=7]="Eras",$r[$r.FirstDayOfWeek=8]="FirstDayOfWeek",$r[$r.WeekendRange=9]="WeekendRange",$r[$r.DateFormat=10]="DateFormat",$r[$r.TimeFormat=11]="TimeFormat",$r[$r.DateTimeFormat=12]="DateTimeFormat",$r[$r.NumberSymbols=13]="NumberSymbols",$r[$r.NumberFormats=14]="NumberFormats",$r[$r.CurrencyCode=15]="CurrencyCode",$r[$r.CurrencySymbol=16]="CurrencySymbol",$r[$r.CurrencyName=17]="CurrencyName",$r[$r.Currencies=18]="Currencies",$r[$r.Directionality=19]="Directionality",$r[$r.PluralCase=20]="PluralCase",$r[$r.ExtraData=21]="ExtraData",$r))();const f_="en-US";let aE=f_;function _v(t){sn(t,"Expected localeId to be defined"),"string"==typeof t&&(aE=t.toLowerCase().replace(/_/g,"-"))}function Iv(t,n,i,o,u){if(t=Oe(t),Array.isArray(t))for(let f=0;f<t.length;f++)Iv(t[f],n,i,o,u);else{const f=Ur(),y=en();let b=Pu(t)?t:Oe(t.provide),M=yh(t);const U=Si(),te=1048575&U.providerIndexes,Ce=U.directiveStart,Se=U.providerIndexes>>20;if(Pu(t)||!t.multi){const tt=new Zn(M,u,Ep),dt=Cv(b,n,u?te:te+Se,Ce);-1===dt?(No(gl(U,y),f,b),bv(f,t,n.length),n.push(b),U.directiveStart++,U.directiveEnd++,u&&(U.providerIndexes+=1048576),i.push(tt),y.push(tt)):(i[dt]=tt,y[dt]=tt)}else{const tt=Cv(b,n,te+Se,Ce),dt=Cv(b,n,te,te+Se),$t=tt>=0&&i[tt],St=dt>=0&&i[dt];if(u&&!St||!u&&!$t){No(gl(U,y),f,b);const wn=function(t,n,i,o,u){const f=new Zn(t,i,Ep);return f.multi=[],f.index=n,f.componentProviders=0,ME(f,u,o&&!i),f}(u?lw:aw,i.length,u,o,M);!u&&St&&(i[dt].providerFactory=wn),bv(f,t,n.length,0),n.push(b),U.directiveStart++,U.directiveEnd++,u&&(U.providerIndexes+=1048576),i.push(wn),y.push(wn)}else bv(f,t,tt>-1?tt:dt,ME(i[u?dt:tt],M,!u&&o));!u&&o&&St&&i[dt].componentProviders++}}}function bv(t,n,i,o){const u=Pu(n);if(u||function(t){return!!t.useClass}(n)){const y=(n.useClass||n).prototype.ngOnDestroy;if(y){const b=t.destroyHooks||(t.destroyHooks=[]);if(!u&&n.multi){const M=b.indexOf(i);-1===M?b.push(i,[o,y]):b[M+1].push(o,y)}else b.push(i,y)}}}function ME(t,n,i){return i&&t.componentProviders++,t.multi.push(n)-1}function Cv(t,n,i,o){for(let u=i;u<o;u++)if(n[u]===t)return u;return-1}function aw(t,n,i,o){return wv(this.multi,[])}function lw(t,n,i,o){const u=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,b=Be(i,i[1],this.providerFactory.index,o);f=b.slice(0,y),wv(u,f);for(let M=y;M<b.length;M++)f.push(b[M])}else f=[],wv(u,f);return f}function wv(t,n){for(let i=0;i<t.length;i++)n.push((0,t[i])());return n}function PE(t,n=[]){return i=>{i.providersResolver=(o,u)=>function(t,n,i){const o=Ur();if(o.firstCreatePass){const u=_i(t);Iv(i,o.data,o.blueprint,u,!0),Iv(n,o.data,o.blueprint,u,!1)}}(o,u?u(t):t,n)}}class OE{}const kE="ngComponent";class dw{resolveComponentFactory(n){throw function(t){const n=Error(`No component factory found for ${le(t)}. Did you add it to @NgModule.entryComponents?`);return n[kE]=t,n}(n)}}let Og=(()=>{class t{}return t.NULL=new dw,t})();function __(...t){}function Ng(t,n){return new Pd(Gn(t,n))}const pw=function(){return Ng(Si(),en())};let Pd=(()=>{class t{constructor(i){this.nativeElement=i}}return t.__NG_ELEMENT_ID__=pw,t})();function FE(t){return t instanceof Pd?t.nativeElement:t}class v_{}let gw=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>yw(),t})();const yw=function(){const t=en(),i=Pr(Si().index,t);return function(t){return t[11]}(Xn(i)?i:t)};let Dv=(()=>{class t{}return t.\u0275prov=hn({token:t,providedIn:"root",factory:()=>null}),t})();class LE{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const Sv=new LE("12.2.16");class VE{constructor(){}supports(n){return $u(n)}create(n){return new Iw(n)}}const Ew=(t,n)=>n;class Iw{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||Ew}forEachItem(n){let i;for(i=this._itHead;null!==i;i=i._next)n(i)}forEachOperation(n){let i=this._itHead,o=this._removalsHead,u=0,f=null;for(;i||o;){const y=!o||i&&i.currentIndex<BE(o,u,f)?i:o,b=BE(y,u,f),M=y.currentIndex;if(y===o)u--,o=o._nextRemoved;else if(i=i._next,null==y.previousIndex)u++;else{f||(f=[]);const U=b-u,te=M-u;if(U!=te){for(let Se=0;Se<U;Se++){const tt=Se<f.length?f[Se]:f[Se]=0,dt=tt+Se;te<=dt&&dt<U&&(f[Se]=tt+1)}f[y.previousIndex]=te-U}}b!==M&&n(y,b,M)}}forEachPreviousItem(n){let i;for(i=this._previousItHead;null!==i;i=i._nextPrevious)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachMovedItem(n){let i;for(i=this._movesHead;null!==i;i=i._nextMoved)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}forEachIdentityChange(n){let i;for(i=this._identityChangesHead;null!==i;i=i._nextIdentityChange)n(i)}diff(n){if(null==n&&(n=[]),!$u(n))throw new Error(`Error trying to diff '${le(n)}'. Only arrays and iterables are allowed`);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let u,f,y,i=this._itHead,o=!1;if(Array.isArray(n)){this.length=n.length;for(let b=0;b<this.length;b++)f=n[b],y=this._trackByFn(b,f),null!==i&&Object.is(i.trackById,y)?(o&&(i=this._verifyReinsertion(i,f,y,b)),Object.is(i.item,f)||this._addIdentityChange(i,f)):(i=this._mismatch(i,f,y,b),o=!0),i=i._next}else u=0,function(t,n){if(Array.isArray(t))for(let i=0;i<t.length;i++)n(t[i]);else{const i=t[iu()]();let o;for(;!(o=i.next()).done;)n(o.value)}}(n,b=>{y=this._trackByFn(u,b),null!==i&&Object.is(i.trackById,y)?(o&&(i=this._verifyReinsertion(i,b,y,u)),Object.is(i.item,b)||this._addIdentityChange(i,b)):(i=this._mismatch(i,b,y,u),o=!0),i=i._next,u++}),this.length=u;return this._truncate(i),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,i,o,u){let f;return null===n?f=this._itTail:(f=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._reinsertAfter(n,f,u)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(o,u))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._moveAfter(n,f,u)):n=this._addAfter(new bw(i,o),f,u),n}_verifyReinsertion(n,i,o,u){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==f?n=this._reinsertAfter(f,n._prev,u):n.currentIndex!=u&&(n.currentIndex=u,this._addToMoves(n,u)),n}_truncate(n){for(;null!==n;){const i=n._next;this._addToRemovals(this._unlink(n)),n=i}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,i,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const u=n._prevRemoved,f=n._nextRemoved;return null===u?this._removalsHead=f:u._nextRemoved=f,null===f?this._removalsTail=u:f._prevRemoved=u,this._insertAfter(n,i,o),this._addToMoves(n,o),n}_moveAfter(n,i,o){return this._unlink(n),this._insertAfter(n,i,o),this._addToMoves(n,o),n}_addAfter(n,i,o){return this._insertAfter(n,i,o),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,i,o){const u=null===i?this._itHead:i._next;return n._next=u,n._prev=i,null===u?this._itTail=n:u._prev=n,null===i?this._itHead=n:i._next=n,null===this._linkedRecords&&(this._linkedRecords=new $E),this._linkedRecords.put(n),n.currentIndex=o,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const i=n._prev,o=n._next;return null===i?this._itHead=o:i._next=o,null===o?this._itTail=i:o._prev=i,n}_addToMoves(n,i){return n.previousIndex===i||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $E),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,i){return n.item=i,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class bw{constructor(n,i){this.item=n,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Cw{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,i){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===i||i<=o.currentIndex)&&Object.is(o.trackById,n))return o;return null}remove(n){const i=n._prevDup,o=n._nextDup;return null===i?this._head=o:i._nextDup=o,null===o?this._tail=i:o._prevDup=i,null===this._head}}class $E{constructor(){this.map=new Map}put(n){const i=n.trackById;let o=this.map.get(i);o||(o=new Cw,this.map.set(i,o)),o.add(n)}get(n,i){const u=this.map.get(n);return u?u.get(n,i):null}remove(n){const i=n.trackById;return this.map.get(i).remove(n)&&this.map.delete(i),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function BE(t,n,i){const o=t.previousIndex;if(null===o)return o;let u=0;return i&&o<i.length&&(u=i[o]),o+n+u}class UE{constructor(){}supports(n){return n instanceof Map||c(n)}create(){return new ww}}class ww{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let i;for(i=this._mapHead;null!==i;i=i._next)n(i)}forEachPreviousItem(n){let i;for(i=this._previousMapHead;null!==i;i=i._nextPrevious)n(i)}forEachChangedItem(n){let i;for(i=this._changesHead;null!==i;i=i._nextChanged)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}diff(n){if(n){if(!(n instanceof Map||c(n)))throw new Error(`Error trying to diff '${le(n)}'. Only maps and objects are allowed`)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(n,(o,u)=>{if(i&&i.key===u)this._maybeAddToChanges(i,o),this._appendAfter=i,i=i._next;else{const f=this._getOrCreateRecordForKey(u,o);i=this._insertBeforeOrAppend(i,f)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let o=i;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,i){if(n){const o=n._prev;return i._next=n,i._prev=o,n._prev=i,o&&(o._next=i),n===this._mapHead&&(this._mapHead=i),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(n,i){if(this._records.has(n)){const u=this._records.get(n);this._maybeAddToChanges(u,i);const f=u._prev,y=u._next;return f&&(f._next=y),y&&(y._prev=f),u._next=null,u._prev=null,u}const o=new Tw(n);return this._records.set(n,o),o.currentValue=i,this._addToAdditions(o),o}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,i){Object.is(i,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=i,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,i){n instanceof Map?n.forEach(i):Object.keys(n).forEach(o=>i(n[o],o))}}class Tw{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function jE(){return new E_([new VE])}let E_=(()=>{class t{constructor(i){this.factories=i}static create(i,o){if(null!=o){const u=o.factories.slice();i=i.concat(u)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||jE()),deps:[[t,new eo,new Lo]]}}find(i){const o=this.factories.find(u=>u.supports(i));if(null!=o)return o;throw new Error(`Cannot find a differ supporting object '${i}' of type '${function(t){return t.name||typeof t}(i)}'`)}}return t.\u0275prov=hn({token:t,providedIn:"root",factory:jE}),t})();function HE(){return new I_([new UE])}let I_=(()=>{class t{constructor(i){this.factories=i}static create(i,o){if(o){const u=o.factories.slice();i=i.concat(u)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||HE()),deps:[[t,new eo,new Lo]]}}find(i){const o=this.factories.find(u=>u.supports(i));if(o)return o;throw new Error(`Cannot find a differ supporting object '${i}'`)}}return t.\u0275prov=hn({token:t,providedIn:"root",factory:HE}),t})();function b_(t,n,i,o,u=!1){for(;null!==i;){const f=n[i.index];if(null!==f&&o.push(O(f)),ur(f))for(let b=10;b<f.length;b++){const M=f[b],U=M[1].firstChild;null!==U&&b_(M[1],M,U,o)}const y=i.type;if(8&y)b_(t,n,i.child,o);else if(32&y){const b=yc(i,n);let M;for(;M=b();)o.push(M)}else if(16&y){const b=Uo(n,i);if(Array.isArray(b))o.push(...b);else{const M=zc(n[16]);b_(M[1],M,b,o,!0)}}i=u?i.projectionNext:i.next}return o}class Jm{constructor(n,i){this._lView=n,this._cdRefInjectingView=i,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,i=n[1];return b_(i,n,i.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(ur(n)){const i=n[8],o=i?i.indexOf(this):-1;o>-1&&(Lh(n,o),Co(i,o))}this._attachedToViewContainer=!1}Ff(this._lView[1],this._lView)}onDestroy(n){Jh(this._lView[1],this._lView,null,n)}markForCheck(){Ru(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){rf(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,n,i){Xi(!0);try{rf(t,n,i)}finally{Xi(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var n;this._appRef=null,Tu(this._lView[1],n=this._lView,n[11],2,null,null)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=n}}class Sw extends Jm{constructor(n){super(n),this._view=n}detectChanges(){ep(this._view)}checkNoChanges(){!function(t){Xi(!0);try{ep(t)}finally{Xi(!1)}}(this._view)}get context(){return null}}const xw=function(t){return function(t,n,i){if(di(t)&&!i){const o=Pr(t.index,n);return new Jm(o,o)}return 47&t.type?new Jm(n[16],n):null}(Si(),en(),16==(16&t))};let Rw=(()=>{class t{}return t.__NG_ELEMENT_ID__=xw,t})();const Ow=[new UE],kw=new E_([new VE]),Fw=new I_(Ow),Vw=function(){return C_(Si(),en())};let ey=(()=>{class t{}return t.__NG_ELEMENT_ID__=Vw,t})();const $w=ey,Bw=class extends $w{constructor(n,i,o){super(),this._declarationLView=n,this._declarationTContainer=i,this.elementRef=o}createEmbeddedView(n){const i=this._declarationTContainer.tViews,o=Xc(this._declarationLView,i,n,16,null,i.declTNode,null,null,null,null);o[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[W];return null!==f&&(o[W]=f.createEmbeddedView(i)),Zh(i,o,n),new Jm(o)}};function C_(t,n){return 4&t.type?new Bw(n,t,Ng(t,n)):null}class bp{}class WE{}const Hw=function(){return qE(Si(),en())};let w_=(()=>{class t{}return t.__NG_ELEMENT_ID__=Hw,t})();const Gw=w_,GE=class extends Gw{constructor(n,i,o){super(),this._lContainer=n,this._hostTNode=i,this._hostLView=o}get element(){return Ng(this._hostTNode,this._hostLView)}get injector(){return new Ar(this._hostTNode,this._hostLView)}get parentInjector(){const n=Oo(this._hostTNode,this._hostLView);if(Po(n)){const i=Zs(n,this._hostLView),o=Ei(n);return new Ar(i[1].data[o+8],i)}return new Ar(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const i=zE(this._lContainer);return null!==i&&i[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,i,o){const u=n.createEmbeddedView(i||{});return this.insert(u,o),u}createComponent(n,i,o,u,f){const y=o||this.parentInjector;if(!f&&null==n.ngModule&&y){const M=y.get(bp,null);M&&(f=M)}const b=n.create(y,u,void 0,f);return this.insert(b.hostView,i),b}insert(n,i){const o=n._lView,u=o[1];if(ur(o[3])){const te=this.indexOf(n);if(-1!==te)this.detach(te);else{const Ce=o[3],Se=new GE(Ce,Ce[6],Ce[3]);Se.detach(Se.indexOf(n))}}const f=this._adjustIndex(i),y=this._lContainer;!function(t,n,i,o){const u=10+o,f=i.length;o>0&&(i[u-1][4]=n),o<f-10?(n[4]=i[u],Ia(i,10+o,n)):(i.push(n),n[4]=null),n[3]=i;const y=n[17];null!==y&&i!==y&&function(t,n){const i=t[9];n[16]!==n[3][3][16]&&(t[2]=!0),null===i?t[9]=[n]:i.push(n)}(y,n);const b=n[W];null!==b&&b.insertView(t),n[2]|=128}(u,o,y,f);const b=jh(f,y),M=o[11],U=hd(M,y[7]);return null!==U&&function(t,n,i,o,u,f){o[0]=u,o[6]=n,Tu(t,o,i,1,u,f)}(u,y[6],M,o,U,b),n.attachToViewContainerRef(),Ia(Av(y),f,n),n}move(n,i){return this.insert(n,i)}indexOf(n){const i=zE(this._lContainer);return null!==i?i.indexOf(n):-1}remove(n){const i=this._adjustIndex(n,-1),o=Lh(this._lContainer,i);o&&(Co(Av(this._lContainer),i),Ff(o[1],o))}detach(n){const i=this._adjustIndex(n,-1),o=Lh(this._lContainer,i);return o&&null!=Co(Av(this._lContainer),i)?new Jm(o):null}_adjustIndex(n,i=0){return null==n?this.length+i:n}};function zE(t){return t[8]}function Av(t){return t[8]||(t[8]=[])}function qE(t,n){let i;const o=n[t.index];if(ur(o))i=o;else{let u;if(8&t.type)u=O(o);else{const f=n[11];u=f.createComment("");const y=Gn(t,n);il(f,hd(f,y),u,function(t,n){return Dt(t)?t.nextSibling(n):n.nextSibling}(f,y),!1)}n[t.index]=i=Jf(o,n,u,t),nf(n,i)}return new GE(i,t,n)}const Vg={};class fI extends Og{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const i=jt(n);return new gI(i,this.ngModule)}}function pI(t){const n=[];for(let i in t)t.hasOwnProperty(i)&&n.push({propName:t[i],templateName:i});return n}const UT=new Jn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Op});class gI extends OE{constructor(n,i){super(),this.componentDef=n,this.ngModule=i,this.componentType=n.type,this.selector=n.selectors.map(Su).join(","),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!i}get inputs(){return pI(this.componentDef.inputs)}get outputs(){return pI(this.componentDef.outputs)}create(n,i,o,u){const f=(u=u||this.ngModule)?function(t,n){return{get:(i,o,u)=>{const f=t.get(i,Vg,u);return f!==Vg||o===Vg?f:n.get(i,o,u)}}}(n,u.injector):n,y=f.get(v_,G),b=f.get(Dv,null),M=y.createRenderer(null,this.componentDef),U=this.componentDef.selectors[0][0]||"div",te=o?function(t,n,i){if(Dt(t))return t.selectRootElement(n,i===bn.ShadowDom);let o="string"==typeof n?t.querySelector(n):n;return o.textContent="",o}(M,o,this.componentDef.encapsulation):Fh(y.createRenderer(null,this.componentDef),U,function(t){const n=t.toLowerCase();return"svg"===n?"http://www.w3.org/2000/svg":"math"===n?"http://www.w3.org/1998/MathML/":null}(U)),Ce=this.componentDef.onPush?576:528,Se=function(t,n){return{components:[],scheduler:t||Op,clean:tp,playerHandler:n||null,flags:0}}(),tt=Ed(0,null,null,1,0,null,null,null,null,null),dt=Xc(null,tt,Se,Ce,null,null,y,M,b,f);let $t,St;Io(dt);try{const wn=function(t,n,i,o,u,f){const y=i[1];i[20]=t;const M=Dc(y,20,2,"#host",null),U=M.mergedAttrs=n.hostAttrs;null!==U&&(sc(M,U,!0),null!==t&&(Us(u,t,U),null!==M.classes&&Zc(u,t,M.classes),null!==M.styles&&Hh(u,t,M.styles)));const te=o.createRenderer(t,n),Ce=Xc(i,Jc(n),null,n.onPush?64:16,i[20],M,o,te,f||null,null);return y.firstCreatePass&&(No(gl(M,i),y,n.type),Zp(y,M),Im(M,i.length,1)),nf(i,Ce),i[20]=Ce}(te,this.componentDef,dt,y,M);if(te)if(o)Us(M,te,["ng-version",Sv.full]);else{const{attrs:tn,classes:wr}=function(t){const n=[],i=[];let o=1,u=2;for(;o<t.length;){let f=t[o];if("string"==typeof f)2===u?""!==f&&n.push(f,t[++o]):8===u&&i.push(f);else{if(!ps(u))break;u=f}o++}return{attrs:n,classes:i}}(this.componentDef.selectors[0]);tn&&Us(M,te,tn),wr&&wr.length>0&&Zc(M,te,wr.join(" "))}if(St=Li(tt,20),void 0!==i){const tn=St.projection=[];for(let wr=0;wr<this.ngContentSelectors.length;wr++){const Xr=i[wr];tn.push(null!=Xr?Array.from(Xr):null)}}$t=function(t,n,i,o,u){const f=i[1],y=function(t,n,i){const o=Si();t.firstCreatePass&&(i.providersResolver&&i.providersResolver(i),Xf(t,o,n,Au(t,n,1,null),i));const u=Be(n,t,o.directiveStart,o);ua(u,n);const f=Gn(o,n);return f&&ua(f,n),u}(f,i,n);if(o.components.push(y),t[8]=y,u&&u.forEach(M=>M(y,n)),n.contentQueries){const M=Si();n.contentQueries(1,y,M.directiveStart)}const b=Si();return!f.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(on(b.index),qp(i[1],b,0,b.directiveStart,b.directiveEnd,n),Kp(n,y)),y}(wn,this.componentDef,dt,Se,[pf]),Zh(tt,dt,null)}finally{Z()}return new WT(this.componentType,$t,Ng(St,dt),dt,St)}}class WT extends class{}{constructor(n,i,o,u,f){super(),this.location=o,this._rootLView=u,this._tNode=f,this.instance=i,this.hostView=this.changeDetectorRef=new Sw(u),this.componentType=n}get injector(){return new Ar(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}const $g=new Map;class qT extends bp{constructor(n,i){super(),this._parent=i,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new fI(this);const o=qn(n),u=n[ke]||null;u&&_v(u),this._bootstrapComponents=tc(o.bootstrap),this._r3Injector=In(n,i,[{provide:bp,useValue:this},{provide:Og,useValue:this.componentFactoryResolver}],le(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,i=es.THROW_IF_NOT_FOUND,o=vn.Default){return n===es||n===bp||n===Cd?this:this._r3Injector.get(n,i,o)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Uv extends WE{constructor(n){super(),this.moduleType=n,null!==qn(n)&&function(t){const n=new Set;!function i(o){const u=qn(o,!0),f=u.id;null!==f&&(function(t,n,i){if(n&&n!==i)throw new Error(`Duplicate module registered for ${t} - ${le(n)} vs ${le(n.name)}`)}(f,$g.get(f),o),$g.set(f,o));const y=tc(u.imports);for(const b of y)n.has(b)||(n.add(b),i(b))}(t)}(n)}create(n){return new qT(this.moduleType,n)}}function jv(t){return n=>{setTimeout(t,void 0,n)}}const Od=class extends _.xQ{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,i,o){var u,f,y;let b=n,M=i||(()=>null),U=o;if(n&&"object"==typeof n){const Ce=n;b=null===(u=Ce.next)||void 0===u?void 0:u.bind(Ce),M=null===(f=Ce.error)||void 0===f?void 0:f.bind(Ce),U=null===(y=Ce.complete)||void 0===y?void 0:y.bind(Ce)}this.__isAsync&&(M=jv(M),b&&(b=jv(b)),U&&(U=jv(U)));const te=super.subscribe({next:b,error:M,complete:U});return n instanceof A.w&&n.add(te),te}};function hD(){return this._results[iu()]()}class x_{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const i=iu(),o=x_.prototype;o[i]||(o[i]=hD)}get changes(){return this._changes||(this._changes=new Od)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,i){return this._results.reduce(n,i)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,i){const o=this;o.dirty=!1;const u=lo(n);(this._changesDetected=!function(t,n,i){if(t.length!==n.length)return!1;for(let o=0;o<t.length;o++){let u=t[o],f=n[o];if(i&&(u=i(u),f=i(f)),f!==u)return!1}return!0}(o._results,u,i))&&(o._results=u,o.length=u.length,o.last=u[this.length-1],o.first=u[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Hv{constructor(n){this.queryList=n,this.matches=null}clone(){return new Hv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Wv{constructor(n=[]){this.queries=n}createEmbeddedView(n){const i=n.queries;if(null!==i){const o=null!==n.contentQueries?n.contentQueries[0]:i.length,u=[];for(let f=0;f<o;f++){const y=i.getByIndex(f);u.push(this.queries[y.indexInDeclarationView].clone())}return new Wv(u)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let i=0;i<this.queries.length;i++)null!==MI(n,i).matches&&this.queries[i].setDirty()}}class CI{constructor(n,i,o=null){this.predicate=n,this.flags=i,this.read=o}}class Gv{constructor(n=[]){this.queries=n}elementStart(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(n,i)}elementEnd(n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(n)}embeddedTView(n){let i=null;for(let o=0;o<this.length;o++){const u=null!==i?i.length:0,f=this.getByIndex(o).embeddedTView(n,u);f&&(f.indexInDeclarationView=o,null!==i?i.push(f):i=[f])}return null!==i?new Gv(i):null}template(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].template(n,i)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class zv{constructor(n,i=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(n,i){this.isApplyingToNode(i)&&this.matchTNode(n,i)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,i){this.elementStart(n,i)}embeddedTView(n,i){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,i),new zv(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const i=this._declarationNodeIndex;let o=n.parent;for(;null!==o&&8&o.type&&o.index!==i;)o=o.parent;return i===(null!==o?o.index:-1)}return this._appliesToNextNode}matchTNode(n,i){const o=this.metadata.predicate;if(Array.isArray(o))for(let u=0;u<o.length;u++){const f=o[u];this.matchTNodeWithReadOption(n,i,gD(i,f)),this.matchTNodeWithReadOption(n,i,Q(i,n,f,!1,!1))}else o===ey?4&i.type&&this.matchTNodeWithReadOption(n,i,-1):this.matchTNodeWithReadOption(n,i,Q(i,n,o,!1,!1))}matchTNodeWithReadOption(n,i,o){if(null!==o){const u=this.metadata.read;if(null!==u)if(u===Pd||u===w_||u===ey&&4&i.type)this.addMatch(i.index,-2);else{const f=Q(i,n,u,!1,!1);null!==f&&this.addMatch(i.index,f)}else this.addMatch(i.index,o)}}addMatch(n,i){null===this.matches?this.matches=[n,i]:this.matches.push(n,i)}}function gD(t,n){const i=t.localNames;if(null!==i)for(let o=0;o<i.length;o+=2)if(i[o]===n)return i[o+1];return null}function yD(t,n,i,o){return-1===i?function(t,n){return 11&t.type?Ng(t,n):4&t.type?C_(t,n):null}(n,t):-2===i?function(t,n,i){return i===Pd?Ng(n,t):i===ey?C_(n,t):i===w_?qE(n,t):void 0}(t,n,o):Be(t,t[1],i,n)}function wI(t,n,i,o){const u=n[W].queries[o];if(null===u.matches){const f=t.data,y=i.matches,b=[];for(let M=0;M<y.length;M+=2){const U=y[M];b.push(U<0?null:yD(n,f[U],y[M+1],i.metadata.read))}u.matches=b}return u.matches}function qv(t,n,i,o){const u=t.queries.getByIndex(i),f=u.matches;if(null!==f){const y=wI(t,n,u,i);for(let b=0;b<f.length;b+=2){const M=f[b];if(M>0)o.push(y[b/2]);else{const U=f[b+1],te=n[-M];for(let Ce=10;Ce<te.length;Ce++){const Se=te[Ce];Se[17]===Se[3]&&qv(Se[1],Se,U,o)}if(null!==te[9]){const Ce=te[9];for(let Se=0;Se<Ce.length;Se++){const tt=Ce[Se];qv(tt[1],tt,U,o)}}}}}return o}function TI(t){const n=en(),i=Ur(),o=ao();Ka(o+1);const u=MI(i,o);if(t.dirty&&Hr(n)===(2==(2&u.metadata.flags))){if(null===u.matches)t.reset([]);else{const f=u.crossesNgTemplate?qv(i,n,o,[]):wI(i,n,u,o);t.reset(f,FE),t.notifyOnChanges()}return!0}return!1}function DI(t,n,i){const o=Ur();o.firstCreatePass&&(RI(o,new CI(t,n,i),-1),2==(2&n)&&(o.staticViewQueries=!0)),xI(o,en(),n)}function SI(t,n,i,o){const u=Ur();if(u.firstCreatePass){const f=Si();RI(u,new CI(n,i,o),f.index),function(t,n){const i=t.contentQueries||(t.contentQueries=[]);n!==(i.length?i[i.length-1]:-1)&&i.push(t.queries.length-1,n)}(u,t),2==(2&i)&&(u.staticContentQueries=!0)}xI(u,en(),i)}function AI(){return t=en(),n=ao(),t[W].queries[n].queryList;var t,n}function xI(t,n,i){const o=new x_(4==(4&i));Jh(t,n,o,o.destroy),null===n[W]&&(n[W]=new Wv),n[W].queries.push(new Hv(o))}function RI(t,n,i){null===t.queries&&(t.queries=new Gv),t.queries.track(new zv(n,i))}function MI(t,n){return t.queries.getByIndex(n)}const $D=Ko("Output",t=>({bindingPropertyName:t})),BD=Ko("HostListener",(t,n)=>({eventName:t,args:n})),Jv=new Jn("Application Initializer");let Ug=(()=>{class t{constructor(i){this.appInits=i,this.resolve=__,this.reject=__,this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,u)=>{this.resolve=o,this.reject=u})}runInitializers(){if(this.initialized)return;const i=[],o=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let u=0;u<this.appInits.length;u++){const f=this.appInits[u]();if(Uu(f))i.push(f);else if(Th(f)){const y=new Promise((b,M)=>{f.subscribe({complete:b,error:M})});i.push(y)}}Promise.all(i).then(()=>{o()}).catch(u=>{this.reject(u)}),0===i.length&&o(),this.initialized=!0}}return t.\u0275fac=function(i){return new(i||t)(Qi(Jv,8))},t.\u0275prov=hn({token:t,factory:t.\u0275fac}),t})();const KI=new Jn("AppId"),ZD={provide:KI,useFactory:function(){return`${e0()}${e0()}${e0()}`},deps:[]};function e0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ZI=new Jn("Platform Initializer"),QI=new Jn("Platform ID"),XI=new Jn("appBootstrapListener");let JI=(()=>{class t{log(i){console.log(i)}warn(i){console.warn(i)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=hn({token:t,factory:t.\u0275fac}),t})();const P_=new Jn("LocaleId"),eb=new Jn("DefaultCurrencyCode");class XD{constructor(n,i){this.ngModuleFactory=n,this.componentFactories=i}}const t0=function(t){return new Uv(t)},JD=t0,eS=function(t){return Promise.resolve(t0(t))},tb=function(t){const n=t0(t),o=tc(qn(t).declarations).reduce((u,f)=>{const y=jt(f);return y&&u.push(new gI(y)),u},[]);return new XD(n,o)},tS=tb,nS=function(t){return Promise.resolve(tb(t))};let hy=(()=>{class t{constructor(){this.compileModuleSync=JD,this.compileModuleAsync=eS,this.compileModuleAndAllComponentsSync=tS,this.compileModuleAndAllComponentsAsync=nS}clearCache(){}clearCacheFor(i){}getModuleId(i){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=hn({token:t,factory:t.\u0275fac}),t})();const sS=(()=>Promise.resolve(0))();function n0(t){"undefined"==typeof Zone?sS.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class xc{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Od(!1),this.onMicrotaskEmpty=new Od(!1),this.onStable=new Od(!1),this.onError=new Od(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const u=this;u._nesting=0,u._outer=u._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!o&&i,u.shouldCoalesceRunChangeDetection=o,u.lastRequestAnimationFrameId=-1,u.nativeRequestAnimationFrame=function(){let t=Dn.requestAnimationFrame,n=Dn.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&n){const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i);const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function(t){const n=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Dn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,s0(t),t.isCheckStableRunning=!0,r0(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),s0(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,o,u,f,y,b)=>{try{return nb(t),i.invokeTask(u,f,y,b)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||t.shouldCoalesceRunChangeDetection)&&n(),rb(t)}},onInvoke:(i,o,u,f,y,b,M)=>{try{return nb(t),i.invoke(u,f,y,b,M)}finally{t.shouldCoalesceRunChangeDetection&&n(),rb(t)}},onHasTask:(i,o,u,f)=>{i.hasTask(u,f),o===u&&("microTask"==f.change?(t._hasPendingMicrotasks=f.microTask,s0(t),r0(t)):"macroTask"==f.change&&(t.hasPendingMacrotasks=f.macroTask))},onHandleError:(i,o,u,f)=>(i.handleError(u,f),t.runOutsideAngular(()=>t.onError.emit(f)),!1)})}(u)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!xc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(xc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,i,o){return this._inner.run(n,i,o)}runTask(n,i,o,u){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+u,n,aS,__,__);try{return f.runTask(y,i,o)}finally{f.cancelTask(y)}}runGuarded(n,i,o){return this._inner.runGuarded(n,i,o)}runOutsideAngular(n){return this._outer.run(n)}}const aS={};function r0(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function s0(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function nb(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function rb(t){t._nesting--,r0(t)}class uS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Od,this.onMicrotaskEmpty=new Od,this.onStable=new Od,this.onError=new Od}run(n,i,o){return n.apply(i,o)}runGuarded(n,i,o){return n.apply(i,o)}runOutsideAngular(n){return n()}runTask(n,i,o,u){return n.apply(i,o)}}let ib=(()=>{class t{constructor(i){this._ngZone=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{xc.assertNotInAngularZone(),n0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())n0(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(i)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,o,u){let f=-1;o&&o>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),i(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:i,timeoutId:f,updateCb:u})}whenStable(i,o,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,o,u),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(i,o,u){return[]}}return t.\u0275fac=function(i){return new(i||t)(Qi(xc))},t.\u0275prov=hn({token:t,factory:t.\u0275fac}),t})(),sb=(()=>{class t{constructor(){this._applications=new Map,o0.addToWindow(this)}registerApplication(i,o){this._applications.set(i,o)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,o=!0){return o0.findTestabilityInTree(this,i,o)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=hn({token:t,factory:t.\u0275fac}),t})();class dS{addToWindow(n){}findTestabilityInTree(n,i,o){return null}}function hS(t){o0=t}let o0=new dS,ob=!0,ab=!1;function a0(){return ab=!0,ob}function fS(){if(ab)throw new Error("Cannot enable prod mode after platform setup.");ob=!1}let zu;const lb=new Jn("AllowMultipleToken");class ES{constructor(n,i){this.name=n,this.token=i}}function cb(t,n,i=[]){const o=`Platform: ${n}`,u=new Jn(o);return(f=[])=>{let y=ub();if(!y||y.injector.get(lb,!1))if(t)t(i.concat(f).concat({provide:u,useValue:!0}));else{const b=i.concat(f).concat({provide:u,useValue:!0},{provide:Sc,useValue:"platform"});!function(t){if(zu&&!zu.destroyed&&!zu.injector.get(lb,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");zu=t.get(db);const n=t.get(ZI,null);n&&n.forEach(i=>i())}(es.create({providers:b,name:o}))}return function(t){const n=ub();if(!n)throw new Error("No platform exists!");if(!n.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return n}(u)}}function ub(){return zu&&!zu.destroyed?zu:null}let db=(()=>{class t{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,o){const b=function(t,n){let i;return i="noop"===t?new uS:("zone.js"===t?void 0:t)||new xc({enableLongStackTrace:a0(),shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),i}(o?o.ngZone:void 0,{ngZoneEventCoalescing:o&&o.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:o&&o.ngZoneRunCoalescing||!1}),M=[{provide:xc,useValue:b}];return b.run(()=>{const U=es.create({providers:M,parent:this.injector,name:i.moduleType.name}),te=i.create(U),Ce=te.injector.get(mc,null);if(!Ce)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return b.runOutsideAngular(()=>{const Se=b.onError.subscribe({next:tt=>{Ce.handleError(tt)}});te.onDestroy(()=>{l0(this._modules,te),Se.unsubscribe()})}),function(t,n,i){try{const o=i();return Uu(o)?o.catch(u=>{throw n.runOutsideAngular(()=>t.handleError(u)),u}):o}catch(o){throw n.runOutsideAngular(()=>t.handleError(o)),o}}(Ce,b,()=>{const Se=te.injector.get(Ug);return Se.runInitializers(),Se.donePromise.then(()=>(_v(te.injector.get(P_,f_)||f_),this._moduleDoBootstrap(te),te))})})}bootstrapModule(i,o=[]){const u=hb({},o);return function(t,n,i){const o=new Uv(i);return Promise.resolve(o)}(0,0,i).then(f=>this.bootstrapModuleFactory(f,u))}_moduleDoBootstrap(i){const o=i.injector.get(fy);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(u=>o.bootstrap(u));else{if(!i.instance.ngDoBootstrap)throw new Error(`The module ${le(i.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);i.instance.ngDoBootstrap(o)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(i){return new(i||t)(Qi(es))},t.\u0275prov=hn({token:t,factory:t.\u0275fac}),t})();function hb(t,n){return Array.isArray(n)?n.reduce(hb,t):Object.assign(Object.assign({},t),n)}let fy=(()=>{class t{constructor(i,o,u,f,y){this._zone=i,this._injector=o,this._exceptionHandler=u,this._componentFactoryResolver=f,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const b=new re.y(U=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{U.next(this._stable),U.complete()})}),M=new re.y(U=>{let te;this._zone.runOutsideAngular(()=>{te=this._zone.onStable.subscribe(()=>{xc.assertNotInAngularZone(),n0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,U.next(!0))})})});const Ce=this._zone.onUnstable.subscribe(()=>{xc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{U.next(!1)}))});return()=>{te.unsubscribe(),Ce.unsubscribe()}});this.isStable=(0,Me.T)(b,M.pipe(t=>(0,V.x)()(function(t,n){return function(o){let u;u="function"==typeof t?t:function(){return t};const f=Object.create(o,ce.N);return f.source=o,f.subjectFactory=u,f}}(Ie)(t))))}bootstrap(i,o){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let u;u=i instanceof OE?i:this._componentFactoryResolver.resolveComponentFactory(i),this.componentTypes.push(u.componentType);const f=function(t){return t.isBoundToModule}(u)?void 0:this._injector.get(bp),b=u.create(es.NULL,[],o||u.selector,f),M=b.location.nativeElement,U=b.injector.get(ib,null),te=U&&b.injector.get(sb);return U&&te&&te.registerApplication(M,U),b.onDestroy(()=>{this.detachView(b.hostView),l0(this.components,b),te&&te.unregisterApplication(M)}),this._loadComponent(b),b}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(i))}finally{this._runningTick=!1}}attachView(i){const o=i;this._views.push(o),o.attachToAppRef(this)}detachView(i){const o=i;l0(this._views,o),o.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i),this._injector.get(XI,[]).concat(this._bootstrapListeners).forEach(u=>u(i))}ngOnDestroy(){this._views.slice().forEach(i=>i.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(i){return new(i||t)(Qi(xc),Qi(es),Qi(mc),Qi(Og),Qi(Ug))},t.\u0275prov=hn({token:t,factory:t.\u0275fac}),t})();function l0(t,n){const i=t.indexOf(n);i>-1&&t.splice(i,1)}class DS{}class AS{}const xS={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let RS=(()=>{class t{constructor(i,o){this._compiler=i,this._config=o||xS}load(i){return this.loadAndCompile(i)}loadAndCompile(i){let[o,u]=i.split("#");return void 0===u&&(u="default"),L(8255)(o).then(f=>f[u]).then(f=>mb(f,o,u)).then(f=>this._compiler.compileModuleAsync(f))}loadFactory(i){let[o,u]=i.split("#"),f="NgFactory";return void 0===u&&(u="default",f=""),L(8255)(this._config.factoryPathPrefix+o+this._config.factoryPathSuffix).then(y=>y[u+f]).then(y=>mb(y,o,u))}}return t.\u0275fac=function(i){return new(i||t)(Qi(hy),Qi(AS,8))},t.\u0275prov=hn({token:t,factory:t.\u0275fac}),t})();function mb(t,n,i){if(!t)throw new Error(`Cannot find '${i}' in '${n}'`);return t}const VS=function(t){return null},BS=cb(null,"core",[{provide:QI,useValue:"unknown"},{provide:db,deps:[es]},{provide:sb,deps:[]},{provide:JI,deps:[]}]),GS=[{provide:fy,useClass:fy,deps:[xc,es,mc,Og,Ug]},{provide:UT,deps:[xc],useFactory:function(t){let n=[];return t.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(i){n.push(i)}}},{provide:Ug,useClass:Ug,deps:[[new Lo,Jv]]},{provide:hy,useClass:hy,deps:[]},ZD,{provide:E_,useFactory:function(){return kw},deps:[]},{provide:I_,useFactory:function(){return Fw},deps:[]},{provide:P_,useFactory:function(t){return _v(t=t||"undefined"!=typeof $localize&&$localize.locale||f_),t},deps:[[new Rl(P_),new Lo,new eo]]},{provide:eb,useValue:"USD"}];let qS=(()=>{class t{constructor(i){}}return t.\u0275fac=function(i){return new(i||t)(Qi(fy))},t.\u0275mod=ir({type:t}),t.\u0275inj=br({providers:GS}),t})()},841:(Xt,it,L)=>{"use strict";L.d(it,{nm:()=>cn});var _=L(2805),ce=(L(3018),L(127),L(2329),L(8239)),_e=L(8026),ne=L(3910),V=L(3854),Ie=L(5422);const ie=new Map,ae={activated:!1,tokenObservers:[]},Ne={initialized:!1,enabled:!1};function le(ut){return ie.get(ut)||ae}function Ee(ut,z){ie.set(ut,z)}function at(){return Ne}class gt{constructor(z,W,oe,be,Qe){if(this.operation=z,this.retryPolicy=W,this.getWaitDuration=oe,this.lowerBound=be,this.upperBound=Qe,this.pending=null,this.nextErrorWaitInterval=be,be>Qe)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(z){var W=this;return(0,ce.Z)(function*(){W.stop();try{W.pending=new V.BH,yield(ut=W.getNextRun(z),new Promise(z=>{setTimeout(z,ut)})),W.pending.resolve(),yield W.pending.promise,W.pending=new V.BH,yield W.operation(),W.pending.resolve(),yield W.pending.promise,W.process(!0).catch(()=>{})}catch(oe){W.retryPolicy(oe)?W.process(!1).catch(()=>{}):W.stop()}var ut})()}getNextRun(z){if(z)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const W=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),W}}}const E=new V.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function _t(ut){if(!le(ut).activated)throw E.create("use-before-activation",{appName:ut.name})}function we(ut,z){return qe.apply(this,arguments)}function qe(){return(qe=(0,ce.Z)(function*({url:ut,body:z},W){var oe,be;const Qe={"Content-Type":"application/json"},Xe=W.getImmediate({optional:!0});if(Xe){const Xn=yield Xe.getHeartbeatsHeader();Xn&&(Qe["X-Firebase-Client"]=Xn)}const Ct={method:"POST",body:JSON.stringify(z),headers:Qe};let xt,Rt;try{xt=yield fetch(ut,Ct)}catch(Xn){throw E.create("fetch-network-error",{originalErrorMessage:null===(oe=Xn)||void 0===oe?void 0:oe.message})}if(200!==xt.status)throw E.create("fetch-status-error",{httpStatus:xt.status});try{Rt=yield xt.json()}catch(Xn){throw E.create("fetch-parse-error",{originalErrorMessage:null===(be=Xn)||void 0===be?void 0:be.message})}const Qt=Rt.ttl.match(/^([\d.]+)(s)$/);if(!Qt||!Qt[2]||isNaN(Number(Qt[1])))throw E.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Rt.ttl}`});const fn=1e3*Number(Qt[1]),Wn=Date.now();return{token:Rt.token,expireTimeMillis:Wn+fn,issuedAtTimeMillis:Wn}})).apply(this,arguments)}function je(ut,z){const{projectId:W,appId:oe,apiKey:be}=ut.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${W}/apps/${oe}:exchangeDebugToken?key=${be}`,body:{debug_token:z}}}const nt="firebase-app-check-store";let mt=null;function Ot(){return mt||(mt=new Promise((ut,z)=>{var W;try{const oe=indexedDB.open("firebase-app-check-database",1);oe.onsuccess=be=>{ut(be.target.result)},oe.onerror=be=>{var Qe;z(E.create("storage-open",{originalErrorMessage:null===(Qe=be.target.error)||void 0===Qe?void 0:Qe.message}))},oe.onupgradeneeded=be=>{0===be.oldVersion&&be.target.result.createObjectStore(nt,{keyPath:"compositeKey"})}}catch(oe){z(E.create("storage-open",{originalErrorMessage:null===(W=oe)||void 0===W?void 0:W.message}))}}),mt)}function Rn(){return(Rn=(0,ce.Z)(function*(ut,z){const oe=(yield Ot()).transaction(nt,"readwrite"),Qe=oe.objectStore(nt).put({compositeKey:ut,value:z});return new Promise((Xe,Ct)=>{Qe.onsuccess=xt=>{Xe()},oe.onerror=xt=>{var Rt;Ct(E.create("storage-set",{originalErrorMessage:null===(Rt=xt.target.error)||void 0===Rt?void 0:Rt.message}))}})})).apply(this,arguments)}const Qn=new Ie.Yd("@firebase/app-check");function jn(ut,z){return(0,V.hl)()?function(ut,z){return function(ut,z){return Rn.apply(this,arguments)}(function(ut){return`${ut.options.appId}-${ut.name}`}(ut),z)}(ut,z).catch(W=>{Qn.warn(`Failed to write token to IndexedDB. Error: ${W}`)}):Promise.resolve()}function Nn(){return at().enabled}function si(){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,ce.Z)(function*(){const ut=at();if(ut.enabled&&ut.token)return ut.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Fr={error:"UNKNOWN_ERROR"};function Yr(ut){return V.US.encodeString(JSON.stringify(ut),!1)}function Br(ut){return er.apply(this,arguments)}function er(){return(er=(0,ce.Z)(function*(ut,z=!1){const W=ut.app;_t(W);const oe=le(W);let Qe,be=oe.token;if(be&&!bn(be)&&(Ee(W,Object.assign(Object.assign({},oe),{token:void 0})),be=void 0),!be){const xt=yield oe.cachedTokenPromise;xt&&(bn(xt)?be=xt:yield jn(W,void 0))}if(!z&&be&&bn(be))return{token:be.token};let Ct,Xe=!1;if(Nn()){oe.exchangeTokenPromise||(oe.exchangeTokenPromise=we(je(W,yield si()),ut.heartbeatServiceProvider).finally(()=>{oe.exchangeTokenPromise=void 0}),Xe=!0);const xt=yield oe.exchangeTokenPromise;return yield jn(W,xt),Ee(W,Object.assign(Object.assign({},oe),{token:xt})),{token:xt.token}}try{oe.exchangeTokenPromise||(oe.exchangeTokenPromise=oe.provider.getToken().finally(()=>{oe.exchangeTokenPromise=void 0}),Xe=!0),be=yield oe.exchangeTokenPromise}catch(xt){"appCheck/throttled"===xt.code?Qn.warn(xt.message):Qn.error(xt),Qe=xt}return be?Qe?Ct=bn(be)?{token:be.token,internalError:Qe}:gn(Qe):(Ct={token:be.token},Ee(W,Object.assign(Object.assign({},oe),{token:be})),yield jn(W,be)):Ct=gn(Qe),Xe&&Fn(W,Ct),Ct})).apply(this,arguments)}function ft(ut,z){const W=le(ut),oe=W.tokenObservers.filter(be=>be.next!==z);0===oe.length&&W.tokenRefresher&&W.tokenRefresher.isRunning()&&W.tokenRefresher.stop(),Ee(ut,Object.assign(Object.assign({},W),{tokenObservers:oe}))}function Kn(ut){const{app:z}=ut,W=le(z);let oe=W.tokenRefresher;oe||(oe=function(ut){const{app:z}=ut;return new gt((0,ce.Z)(function*(){let oe;if(oe=le(z).token?yield Br(ut,!0):yield Br(ut),oe.error)throw oe.error;if(oe.internalError)throw oe.internalError}),()=>!0,()=>{const W=le(z);if(W.token){let oe=W.token.issuedAtTimeMillis+.5*(W.token.expireTimeMillis-W.token.issuedAtTimeMillis)+3e5;return oe=Math.min(oe,W.token.expireTimeMillis-3e5),Math.max(0,oe-Date.now())}return 0},3e4,96e4)}(ut),Ee(z,Object.assign(Object.assign({},W),{tokenRefresher:oe}))),!oe.isRunning()&&W.isTokenAutoRefreshEnabled&&oe.start()}function Fn(ut,z){const W=le(ut).tokenObservers;for(const oe of W)try{"EXTERNAL"===oe.type&&null!=z.error?oe.error(z.error):oe.next(z)}catch(be){}}function bn(ut){return ut.expireTimeMillis-Date.now()>0}function gn(ut){return{token:Yr(Fr),error:ut}}class hr{constructor(z,W){this.app=z,this.heartbeatServiceProvider=W}_delete(){const{tokenObservers:z}=le(this.app);for(const W of z)ft(this.app,W.next);return Promise.resolve()}}const sr="app-check-internal";(0,_e._registerComponent)(new ne.wA("app-check",ut=>function(ut,z){return new hr(ut,z)}(ut.getProvider("app").getImmediate(),ut.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((ut,z,W)=>{ut.getProvider(sr).initialize()})),(0,_e._registerComponent)(new ne.wA(sr,ut=>function(ut){return{getToken:z=>Br(ut,z),addTokenListener:z=>function(ut,z,W,oe){const{app:be}=ut,Qe=le(be),Xe={next:W,error:oe,type:z};if(Ee(be,Object.assign(Object.assign({},Qe),{tokenObservers:[...Qe.tokenObservers,Xe]})),Qe.token&&bn(Qe.token)){const Ct=Qe.token;Promise.resolve().then(()=>{W({token:Ct.token}),Kn(ut)}).catch(()=>{})}Qe.cachedTokenPromise.then(()=>Kn(ut))}(ut,"INTERNAL",z),removeTokenListener:z=>ft(ut.app,z)}}(ut.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,_e.registerVersion)("@firebase/app-check","0.5.15");class cn{constructor(){return(0,_.vb)("app-check")}}"undefined"!=typeof window&&window},127:(Xt,it,L)=>{"use strict";L.d(it,{Ot:()=>Me,z6:()=>ce,ZF:()=>Oe,hX:()=>le});var _=L(2329),A=L(3018),re=L(2805);class Me{constructor(gt){return gt}}class ce{constructor(){return(0,_.C6)()}}const V=new A.OlP("angularfire2._apps"),Ie={provide:Me,useFactory:function(He){return He&&1===He.length?He[0]:new Me((0,_.Mq)())},deps:[[new A.FiY,V]]},ie={provide:ce,deps:[[new A.FiY,V]]};function ae(He){return(gt,ct)=>{const bt=gt.runOutsideAngular(()=>He(ct));return new Me(bt)}}let Ne=(()=>{class He{constructor(ct){(0,_.KN)("angularfire",re.q4.full,"core"),(0,_.KN)("angularfire",re.q4.full,"app"),(0,_.KN)("angular",A.q4F.full,ct.toString())}}return He.\u0275fac=function(ct){return new(ct||He)(A.LFG(A.Lbi))},He.\u0275mod=A.oAB({type:He}),He.\u0275inj=A.cJS({providers:[Ie,ie]}),He})();function le(He,...gt){return{ngModule:Ne,providers:[{provide:V,useFactory:ae(He),multi:!0,deps:[A.R0b,A.zs3,re.HU,...gt]}]}}const Oe=(0,re.u3)(_.ZF,!0)},7910:(Xt,it,L)=>{"use strict";L.d(it,{gx:()=>xe,dh:()=>Oe,Xb:()=>je,v0:()=>st,AR:()=>E,e5:()=>ft,w7:()=>gn,EA:()=>_t});var _=L(2805),A=L(3018),re=L(127),Me=L(2329),ce=L(841),_e=L(3607),ae=(L(3854),L(8026),L(5422),L(3910),L(8891));function le(rn){return new ae.y(function(un){return{unsubscribe:(0,_e.q)(rn,un.next.bind(un),un.error.bind(un),un.complete.bind(un))}})}class xe{constructor(un){return un}}class Oe{constructor(){return(0,_.vb)("auth")}}const Ke=new A.OlP("angularfire2.auth-instances");function He(rn){return(un,Ue)=>{const ke=un.runOutsideAngular(()=>rn(Ue));return new xe(ke)}}const gt={provide:Oe,deps:[[new A.FiY,Ke]]},ct={provide:xe,useFactory:function(rn,un){const Ue=(0,_.JM)("auth",rn,un);return Ue&&new xe(Ue)},deps:[[new A.FiY,Ke],re.Ot]};let bt=(()=>{class rn{constructor(){(0,Me.KN)("angularfire",_.q4.full,"auth")}}return rn.\u0275fac=function(Ue){return new(Ue||rn)},rn.\u0275mod=A.oAB({type:rn}),rn.\u0275inj=A.cJS({providers:[ct,gt]}),rn})();function E(rn,...un){return{ngModule:bt,providers:[{provide:Ke,useFactory:He(rn),multi:!0,deps:[A.R0b,A.zs3,_.HU,re.z6,[new A.FiY,ce.nm],...un]}]}}const _t=(0,_.u3)(le,!0),je=(0,_.u3)(_e.a5,!0),st=(0,_.u3)(_e.n,!0),ft=(0,_.u3)(_e.a6,!0),gn=(0,_.u3)(_e.y,!0)},8939:(Xt,it,L)=>{"use strict";L.d(it,{hO:()=>le,xv:()=>Ie,Dh:()=>V,GT:()=>_e,cc:()=>Ee,on:()=>ie,pX:()=>ce});var _=L(3018),A=L(7841),re=L(2805);Xt=L.hmd(Xt);const Me=["ngOnDestroy"],ce=(Ye,Ke,$e,He={})=>new Proxy(Ye,{get:(gt,ct)=>$e.runOutsideAngular(()=>{var bt;if(Ye[ct])return(null===(bt=null==He?void 0:He.spy)||void 0===bt?void 0:bt.get)&&He.spy.get(ct,Ye[ct]),Ye[ct];if(Me.indexOf(ct)>-1)return()=>{};const E=Ke.toPromise().then(We=>{const _t=We&&We[ct];return"function"==typeof _t?_t.bind(We):_t&&_t.then?_t.then(Te=>$e.run(()=>Te)):$e.run(()=>_t)});return new Proxy(()=>{},{get:(We,_t)=>E[_t],apply:(We,_t,Te)=>E.then(he=>{var we;const qe=he&&he(...Te);return(null===(we=null==He?void 0:He.spy)||void 0===we?void 0:we.apply)&&He.spy.apply(ct,Te,qe),qe})})})}),_e=(Ye,Ke)=>{Ke.forEach($e=>{Object.getOwnPropertyNames($e.prototype||$e).forEach(He=>{Object.defineProperty(Ye.prototype,He,Object.getOwnPropertyDescriptor($e.prototype||$e,He))})})};class ne{constructor(Ke){return Ke}}const V=new _.OlP("angularfire2.app.options"),Ie=new _.OlP("angularfire2.app.name");function ie(Ye,Ke,$e){const gt="object"==typeof $e&&$e||{};gt.name=gt.name||"string"==typeof $e&&$e||"[DEFAULT]";const bt=A.Z.apps.filter(E=>E&&E.name===gt.name)[0]||Ke.runOutsideAngular(()=>A.Z.initializeApp(Ye,gt));try{JSON.stringify(Ye)!==JSON.stringify(bt.options)&&ae("error",`${bt.name} Firebase App already initialized with different options${Xt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(E){}return new ne(bt)}const ae=(Ye,...Ke)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[Ye](...Ke)},Ne={provide:ne,useFactory:ie,deps:[V,_.R0b,[new _.FiY,Ie]]};let le=(()=>{class Ye{constructor($e){A.Z.registerVersion("angularfire",re.q4.full,"core"),A.Z.registerVersion("angularfire",re.q4.full,"app-compat"),A.Z.registerVersion("angular",_.q4F.full,$e.toString())}static initializeApp($e,He){return{ngModule:Ye,providers:[{provide:V,useValue:$e},{provide:Ie,useValue:He}]}}}return Ye.\u0275fac=function($e){return new($e||Ye)(_.LFG(_.Lbi))},Ye.\u0275mod=_.oAB({type:Ye}),Ye.\u0275inj=_.cJS({providers:[Ne]}),Ye})();function Ee(Ye,Ke,$e,He,gt){const[,ct,bt]=globalThis.\u0275AngularfireInstanceCache.find(E=>E[0]===Ye)||[];if(ct)return function(Ye,Ke){try{return Ye.toString()===Ke.toString()}catch($e){return Ye===Ke}}(gt,bt)||(Oe("error",`${Ke} was already initialized on the ${$e} Firebase App with different settings.${xe?" You may need to reload as Firebase is not HMR aware.":""}`),Oe("warn",{is:gt,was:bt})),ct;{const E=He();return globalThis.\u0275AngularfireInstanceCache.push([Ye,E,gt]),E}}const xe=!!Xt.hot,Oe=(Ye,...Ke)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[Ye](...Ke)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2502:(Xt,it,L)=>{"use strict";L.d(it,{gg:()=>Te,BS:()=>Ft,JU:()=>Rr,_1:()=>rr,ST:()=>Fr,ad:()=>hr,Xo:()=>rn,Cm:()=>st,IO:()=>un,pl:()=>ve});var _=L(2805),A=L(3018),re=L(7910),Me=L(127),ce=L(2329),_e=L(841),ne=L(1304),V=L(8891),Ie=L(8002),ie={includeMetadataChanges:!1};function ae(At,jt){return void 0===jt&&(jt=ie),new V.y(function(Hn){return{unsubscribe:(0,ne.cf)(At,jt,{next:Hn.next.bind(Hn),error:Hn.error.bind(Hn),complete:Hn.complete.bind(Hn)})}})}function le(At,jt){return void 0===jt&&(jt={}),function(At){return ae(At,{includeMetadataChanges:!0})}(At).pipe((0,Ie.U)(function(Hn){return Ee(Hn,jt)}))}function Ee(At,jt){void 0===jt&&(jt={});var Hn=At.data();return!At.exists()||"object"!=typeof Hn||null===Hn||jt.idField&&(Hn[jt.idField]=At.id),Hn}function _t(At,jt){return void 0===jt&&(jt={}),function(At){return ae(At,{includeMetadataChanges:!0}).pipe((0,Ie.U)(function(jt){return jt.docs}))}(At).pipe((0,Ie.U)(function(Hn){return Hn.map(function(sr){return Ee(sr,jt)})}))}class Te{constructor(jt){return jt}}const he="firestore",Ve=new A.OlP("angularfire2.firestore-instances");function je(At){return(jt,Hn)=>{const sr=jt.runOutsideAngular(()=>At(Hn));return new Te(sr)}}const Ae={provide:class{constructor(){return(0,_.vb)(he)}},deps:[[new A.FiY,Ve]]},ze={provide:Te,useFactory:function(At,jt){const Hn=(0,_.JM)(he,At,jt);return Hn&&new Te(Hn)},deps:[[new A.FiY,Ve],Me.Ot]};let nt=(()=>{class At{constructor(){(0,ce.KN)("angularfire",_.q4.full,"fst")}}return At.\u0275fac=function(Hn){return new(Hn||At)},At.\u0275mod=A.oAB({type:At}),At.\u0275inj=A.cJS({providers:[ze,Ae]}),At})();function st(At,...jt){return{ngModule:nt,providers:[{provide:Ve,useFactory:je(At),multi:!0,deps:[A.R0b,A.zs3,_.HU,Me.z6,[new A.FiY,re.dh],[new A.FiY,_e.nm],...jt]}]}}const Ft=(0,_.u3)(_t,!0),rr=(0,_.u3)(le,!0),Rr=(0,_.u3)(ne.JU,!0),Fr=(0,_.u3)(ne.ST,!0),hr=(0,_.u3)(ne.ad,!0),rn=(0,_.u3)(ne.Xo,!0),un=(0,_.u3)(ne.IO,!0),ve=(0,_.u3)(ne.pl,!0)},2805:(Xt,it,L)=>{"use strict";L.d(it,{q4:()=>Yl,iC:()=>Kl,HU:()=>Pc,vb:()=>ba,JM:()=>Co,u3:()=>Al});var _=L(3018),A=L(2329),re=L(8239),Me=L(8026),ce=L(3854),_e=L(3910),ne=L(5422),V=L(2268);const Ie="@firebase/installations",ie="0.5.15",Ne=`w:${ie}`,le="FIS_v2",Ke=new ce.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function $e($){return $ instanceof ce.ZR&&$.code.includes("request-failed")}function He({projectId:$}){return`https://firebaseinstallations.googleapis.com/v1/projects/${$}/installations`}function gt($){return{token:$.token,requestStatus:2,expiresIn:he($.expiresIn),creationTime:Date.now()}}function ct($,Y){return bt.apply(this,arguments)}function bt(){return(bt=(0,re.Z)(function*($,Y){const Le=(yield Y.json()).error;return Ke.create("request-failed",{requestName:$,serverCode:Le.code,serverMessage:Le.message,serverStatus:Le.status})})).apply(this,arguments)}function E({apiKey:$}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":$})}function We($,{refreshToken:Y}){const me=E($);return me.append("Authorization",function($){return`${le} ${$}`}(Y)),me}function _t($){return Te.apply(this,arguments)}function Te(){return(Te=(0,re.Z)(function*($){const Y=yield $();return Y.status>=500&&Y.status<600?$():Y})).apply(this,arguments)}function he($){return Number($.replace("s","000"))}function qe($,Y){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,re.Z)(function*({appConfig:$,heartbeatServiceProvider:Y},{fid:me}){const Le=He($),yt=E($),Pt=Y.getImmediate({optional:!0});if(Pt){const lr=yield Pt.getHeartbeatsHeader();lr&&yt.append("x-firebase-client",lr)}const xn={method:"POST",headers:yt,body:JSON.stringify({fid:me,authVersion:le,appId:$.appId,sdkVersion:Ne})},gr=yield _t(()=>fetch(Le,xn));if(gr.ok){const lr=yield gr.json();return{fid:lr.fid||me,registrationStatus:2,refreshToken:lr.refreshToken,authToken:gt(lr.authToken)}}throw yield ct("Create Installation",gr)})).apply(this,arguments)}function ot($){return new Promise(Y=>{setTimeout(Y,$)})}const Ae=/^[cdef][\w-]{21}$/;function nt(){try{const $=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues($),$[0]=112+$[0]%16;const me=function($){return function($){return btoa(String.fromCharCode(...$)).replace(/\+/g,"-").replace(/\//g,"_")}($).substr(0,22)}($);return Ae.test(me)?me:""}catch($){return""}}function mt($){return`${$.appName}!${$.appId}`}const Ot=new Map;function Yt($,Y){const me=mt($);Cn(me,Y),function($,Y){const me=(!Rn&&"BroadcastChannel"in self&&(Rn=new BroadcastChannel("[Firebase] FID Change"),Rn.onmessage=$=>{Cn($.data.key,$.data.fid)}),Rn);me&&me.postMessage({key:$,fid:Y}),0===Ot.size&&Rn&&(Rn.close(),Rn=null)}(me,Y)}function Cn($,Y){const me=Ot.get($);if(me)for(const Le of me)Le(Y)}let Rn=null;const wt="firebase-installations-store";let an=null;function jn(){return an||(an=(0,V.X3)("firebase-installations-database",1,{upgrade:($,Y)=>{0===Y&&$.createObjectStore(wt)}})),an}function tr($,Y){return On.apply(this,arguments)}function On(){return(On=(0,re.Z)(function*($,Y){const me=mt($),yt=(yield jn()).transaction(wt,"readwrite"),Pt=yt.objectStore(wt),nn=yield Pt.get(me);return yield Pt.put(Y,me),yield yt.done,(!nn||nn.fid!==Y.fid)&&Yt($,Y.fid),Y})).apply(this,arguments)}function Nn($){return si.apply(this,arguments)}function si(){return(si=(0,re.Z)(function*($){const Y=mt($),Le=(yield jn()).transaction(wt,"readwrite");yield Le.objectStore(wt).delete(Y),yield Le.done})).apply(this,arguments)}function Rr($,Y){return vn.apply(this,arguments)}function vn(){return(vn=(0,re.Z)(function*($,Y){const me=mt($),yt=(yield jn()).transaction(wt,"readwrite"),Pt=yt.objectStore(wt),nn=yield Pt.get(me),xn=Y(nn);return void 0===xn?yield Pt.delete(me):yield Pt.put(xn,me),yield yt.done,xn&&(!nn||nn.fid!==xn.fid)&&Yt($,xn.fid),xn})).apply(this,arguments)}function Fr($){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,re.Z)(function*($){let Y;const me=yield Rr($.appConfig,Le=>{const yt=Br(Le),Pt=er($,yt);return Y=Pt.registrationPromise,Pt.installationEntry});return""===me.fid?{installationEntry:yield Y}:{installationEntry:me,registrationPromise:Y}})).apply(this,arguments)}function Br($){return bn($||{fid:nt(),registrationStatus:0})}function er($,Y){if(0===Y.registrationStatus){if(!navigator.onLine)return{installationEntry:Y,registrationPromise:Promise.reject(Ke.create("app-offline"))};const me={fid:Y.fid,registrationStatus:1,registrationTime:Date.now()},Le=function($,Y){return ft.apply(this,arguments)}($,me);return{installationEntry:me,registrationPromise:Le}}return 1===Y.registrationStatus?{installationEntry:Y,registrationPromise:Kn($)}:{installationEntry:Y}}function ft(){return(ft=(0,re.Z)(function*($,Y){try{const me=yield qe($,Y);return tr($.appConfig,me)}catch(me){throw $e(me)&&409===me.customData.serverCode?yield Nn($.appConfig):yield tr($.appConfig,{fid:Y.fid,registrationStatus:0}),me}})).apply(this,arguments)}function Kn($){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,re.Z)(function*($){let Y=yield Fn($.appConfig);for(;1===Y.registrationStatus;)yield ot(100),Y=yield Fn($.appConfig);if(0===Y.registrationStatus){const{installationEntry:me,registrationPromise:Le}=yield Fr($);return Le||me}return Y})).apply(this,arguments)}function Fn($){return Rr($,Y=>{if(!Y)throw Ke.create("installation-not-found");return bn(Y)})}function bn($){return function($){return 1===$.registrationStatus&&$.registrationTime+1e4<Date.now()}($)?{fid:$.fid,registrationStatus:0}:$}function hr($,Y){return fr.apply(this,arguments)}function fr(){return(fr=(0,re.Z)(function*({appConfig:$,heartbeatServiceProvider:Y},me){const Le=li($,me),yt=We($,me),Pt=Y.getImmediate({optional:!0});if(Pt){const lr=yield Pt.getHeartbeatsHeader();lr&&yt.append("x-firebase-client",lr)}const xn={method:"POST",headers:yt,body:JSON.stringify({installation:{sdkVersion:Ne,appId:$.appId}})},gr=yield _t(()=>fetch(Le,xn));if(gr.ok)return gt(yield gr.json());throw yield ct("Generate Auth Token",gr)})).apply(this,arguments)}function li($,{fid:Y}){return`${He($)}/${Y}/authTokens:generate`}function Dn($){return yi.apply(this,arguments)}function yi(){return(yi=(0,re.Z)(function*($,Y=!1){let me;const Le=yield Rr($.appConfig,Pt=>{if(!un(Pt))throw Ke.create("not-registered");const nn=Pt.authToken;if(!Y&&Ue(nn))return Pt;if(1===nn.requestStatus)return me=mn($,Y),Pt;{if(!navigator.onLine)throw Ke.create("app-offline");const xn=et(Pt);return me=yn($,xn),xn}});return me?yield me:Le.authToken})).apply(this,arguments)}function mn($,Y){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,re.Z)(function*($,Y){let me=yield Gt($.appConfig);for(;1===me.authToken.requestStatus;)yield ot(100),me=yield Gt($.appConfig);const Le=me.authToken;return 0===Le.requestStatus?Dn($,Y):Le})).apply(this,arguments)}function Gt($){return Rr($,Y=>{if(!un(Y))throw Ke.create("not-registered");return function($){return 1===$.requestStatus&&$.requestTime+1e4<Date.now()}(Y.authToken)?Object.assign(Object.assign({},Y),{authToken:{requestStatus:0}}):Y})}function yn($,Y){return rn.apply(this,arguments)}function rn(){return(rn=(0,re.Z)(function*($,Y){try{const me=yield hr($,Y),Le=Object.assign(Object.assign({},Y),{authToken:me});return yield tr($.appConfig,Le),me}catch(me){if(!$e(me)||401!==me.customData.serverCode&&404!==me.customData.serverCode){const Le=Object.assign(Object.assign({},Y),{authToken:{requestStatus:0}});yield tr($.appConfig,Le)}else yield Nn($.appConfig);throw me}})).apply(this,arguments)}function un($){return void 0!==$&&2===$.registrationStatus}function Ue($){return 2===$.requestStatus&&!function($){const Y=Date.now();return Y<$.creationTime||$.creationTime+$.expiresIn<Y+36e5}($)}function et($){const Y={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},$),{authToken:Y})}function Pe(){return(Pe=(0,re.Z)(function*($){const Y=$,{installationEntry:me,registrationPromise:Le}=yield Fr(Y);return Le?Le.catch(console.error):Dn(Y).catch(console.error),me.fid})).apply(this,arguments)}function qt(){return(qt=(0,re.Z)(function*($,Y=!1){const me=$;return yield Un(me),(yield Dn(me,Y)).token})).apply(this,arguments)}function Un($){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,re.Z)(function*($){const{registrationPromise:Y}=yield Fr($);Y&&(yield Y)})).apply(this,arguments)}function qn($){return Ke.create("missing-app-config-values",{valueName:$})}const ln="installations";(0,Me._registerComponent)(new _e.wA(ln,$=>{const Y=$.getProvider("app").getImmediate(),me=function($){if(!$||!$.options)throw qn("App Configuration");if(!$.name)throw qn("App Name");const Y=["projectId","apiKey","appId"];for(const me of Y)if(!$.options[me])throw qn(me);return{appName:$.name,projectId:$.options.projectId,apiKey:$.options.apiKey,appId:$.options.appId}}(Y);return{app:Y,appConfig:me,heartbeatServiceProvider:(0,Me._getProvider)(Y,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,Me._registerComponent)(new _e.wA("installations-internal",$=>{const Y=$.getProvider("app").getImmediate(),me=(0,Me._getProvider)(Y,ln).getImmediate();return{getId:()=>function($){return Pe.apply(this,arguments)}(me),getToken:yt=>function($){return qt.apply(this,arguments)}(me,yt)}},"PRIVATE")),(0,Me.registerVersion)(Ie,ie),(0,Me.registerVersion)(Ie,ie,"esm2017");const Sr="@firebase/remote-config",Vr=new ce.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Wn{constructor(Y,me,Le,yt){this.client=Y,this.storage=me,this.storageCache=Le,this.logger=yt}isCachedDataFresh(Y,me){if(!me)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Le=Date.now()-me,yt=Le<=Y;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Le}. Cache max age millis (minimumFetchIntervalMillis setting): ${Y}. Is cache hit: ${yt}.`),yt}fetch(Y){var me=this;return(0,re.Z)(function*(){const[Le,yt]=yield Promise.all([me.storage.getLastSuccessfulFetchTimestampMillis(),me.storage.getLastSuccessfulFetchResponse()]);if(yt&&me.isCachedDataFresh(Y.cacheMaxAgeMillis,Le))return yt;Y.eTag=yt&&yt.eTag;const Pt=yield me.client.fetch(Y),nn=[me.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Pt.status&&nn.push(me.storage.setLastSuccessfulFetchResponse(Pt)),yield Promise.all(nn),Pt})()}}function Xn($=navigator){return $.languages&&$.languages[0]||$.language}class ur{constructor(Y,me,Le,yt,Pt,nn){this.firebaseInstallations=Y,this.sdkVersion=me,this.namespace=Le,this.projectId=yt,this.apiKey=Pt,this.appId=nn}fetch(Y){var me=this;return(0,re.Z)(function*(){var Le,yt,Pt;const[nn,xn]=yield Promise.all([me.firebaseInstallations.getId(),me.firebaseInstallations.getToken()]),lr=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${me.projectId}/namespaces/${me.namespace}:fetch?key=${me.apiKey}`,kr={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":Y.eTag||"*"},_r={sdk_version:me.sdkVersion,app_instance_id:nn,app_instance_id_token:xn,app_id:me.appId,language_code:Xn()},Is={method:"POST",headers:kr,body:JSON.stringify(_r)},pi=fetch(lr,Is),Xa=new Promise((Fo,xl)=>{Y.signal.addEventListener(()=>{const co=new Error("The operation was aborted.");co.name="AbortError",xl(co)})});let wo;try{yield Promise.race([pi,Xa]),wo=yield pi}catch(Fo){let xl="fetch-client-network";throw"AbortError"===(null===(Le=Fo)||void 0===Le?void 0:Le.name)&&(xl="fetch-timeout"),Vr.create(xl,{originalErrorMessage:null===(yt=Fo)||void 0===yt?void 0:yt.message})}let To=wo.status;const Js=wo.headers.get("ETag")||void 0;let uu,Qi;if(200===wo.status){let Fo;try{Fo=yield wo.json()}catch(xl){throw Vr.create("fetch-client-parse",{originalErrorMessage:null===(Pt=xl)||void 0===Pt?void 0:Pt.message})}uu=Fo.entries,Qi=Fo.state}if("INSTANCE_STATE_UNSPECIFIED"===Qi?To=500:"NO_CHANGE"===Qi?To=304:("NO_TEMPLATE"===Qi||"EMPTY_CONFIG"===Qi)&&(uu={}),304!==To&&200!==To)throw Vr.create("fetch-status",{httpStatus:To});return{status:To,eTag:Js,config:uu}})()}}class bi{constructor(Y,me){this.client=Y,this.storage=me}fetch(Y){var me=this;return(0,re.Z)(function*(){const Le=(yield me.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return me.attemptFetch(Y,Le)})()}attemptFetch(Y,{throttleEndTimeMillis:me,backoffCount:Le}){var yt=this;return(0,re.Z)(function*(){yield function($,Y){return new Promise((me,Le)=>{const yt=Math.max(Y-Date.now(),0),Pt=setTimeout(me,yt);$.addEventListener(()=>{clearTimeout(Pt),Le(Vr.create("fetch-throttle",{throttleEndTimeMillis:Y}))})})}(Y.signal,me);try{const Pt=yield yt.client.fetch(Y);return yield yt.storage.deleteThrottleMetadata(),Pt}catch(Pt){if(!function($){if(!($ instanceof ce.ZR&&$.customData))return!1;const Y=Number($.customData.httpStatus);return 429===Y||500===Y||503===Y||504===Y}(Pt))throw Pt;const nn={throttleEndTimeMillis:Date.now()+(0,ce.$s)(Le),backoffCount:Le+1};return yield yt.storage.setThrottleMetadata(nn),yt.attemptFetch(Y,nn)}})()}}class Zr{constructor(Y,me,Le,yt,Pt){this.app=Y,this._client=me,this._storageCache=Le,this._storage=yt,this._logger=Pt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function is($,Y){var me;const Le=$.target.error||void 0;return Vr.create(Y,{originalErrorMessage:Le&&(null===(me=Le)||void 0===me?void 0:me.message)})}const ss="app_namespace_store";class Ao{constructor(Y,me,Le,yt=function(){return new Promise(($,Y)=>{var me;try{const Le=indexedDB.open("firebase_remote_config",1);Le.onerror=yt=>{Y(is(yt,"storage-open"))},Le.onsuccess=yt=>{$(yt.target.result)},Le.onupgradeneeded=yt=>{0===yt.oldVersion&&yt.target.result.createObjectStore(ss,{keyPath:"compositeKey"})}}catch(Le){Y(Vr.create("storage-open",{originalErrorMessage:null===(me=Le)||void 0===me?void 0:me.message}))}})}()){this.appId=Y,this.appName=me,this.namespace=Le,this.openDbPromise=yt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(Y){return this.set("last_fetch_status",Y)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(Y){return this.set("last_successful_fetch_timestamp_millis",Y)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(Y){return this.set("last_successful_fetch_response",Y)}getActiveConfig(){return this.get("active_config")}setActiveConfig(Y){return this.set("active_config",Y)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(Y){return this.set("active_config_etag",Y)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(Y){return this.set("throttle_metadata",Y)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(Y){var me=this;return(0,re.Z)(function*(){const Le=yield me.openDbPromise;return new Promise((yt,Pt)=>{var nn;const gr=Le.transaction([ss],"readonly").objectStore(ss),lr=me.createCompositeKey(Y);try{const kr=gr.get(lr);kr.onerror=_r=>{Pt(is(_r,"storage-get"))},kr.onsuccess=_r=>{const Is=_r.target.result;yt(Is?Is.value:void 0)}}catch(kr){Pt(Vr.create("storage-get",{originalErrorMessage:null===(nn=kr)||void 0===nn?void 0:nn.message}))}})})()}set(Y,me){var Le=this;return(0,re.Z)(function*(){const yt=yield Le.openDbPromise;return new Promise((Pt,nn)=>{var xn;const lr=yt.transaction([ss],"readwrite").objectStore(ss),kr=Le.createCompositeKey(Y);try{const _r=lr.put({compositeKey:kr,value:me});_r.onerror=Is=>{nn(is(Is,"storage-set"))},_r.onsuccess=()=>{Pt()}}catch(_r){nn(Vr.create("storage-set",{originalErrorMessage:null===(xn=_r)||void 0===xn?void 0:xn.message}))}})})()}delete(Y){var me=this;return(0,re.Z)(function*(){const Le=yield me.openDbPromise;return new Promise((yt,Pt)=>{var nn;const gr=Le.transaction([ss],"readwrite").objectStore(ss),lr=me.createCompositeKey(Y);try{const kr=gr.delete(lr);kr.onerror=_r=>{Pt(is(_r,"storage-delete"))},kr.onsuccess=()=>{yt()}}catch(kr){Pt(Vr.create("storage-delete",{originalErrorMessage:null===(nn=kr)||void 0===nn?void 0:nn.message}))}})})()}createCompositeKey(Y){return[this.appId,this.appName,this.namespace,Y].join()}}class ho{constructor(Y){this.storage=Y}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var Y=this;return(0,re.Z)(function*(){const me=Y.storage.getLastFetchStatus(),Le=Y.storage.getLastSuccessfulFetchTimestampMillis(),yt=Y.storage.getActiveConfig(),Pt=yield me;Pt&&(Y.lastFetchStatus=Pt);const nn=yield Le;nn&&(Y.lastSuccessfulFetchTimestampMillis=nn);const xn=yield yt;xn&&(Y.activeConfig=xn)})()}setLastFetchStatus(Y){return this.lastFetchStatus=Y,this.storage.setLastFetchStatus(Y)}setLastSuccessfulFetchTimestampMillis(Y){return this.lastSuccessfulFetchTimestampMillis=Y,this.storage.setLastSuccessfulFetchTimestampMillis(Y)}setActiveConfig(Y){return this.activeConfig=Y,this.storage.setActiveConfig(Y)}}function ro(){return fo.apply(this,arguments)}function fo(){return(fo=(0,re.Z)(function*(){if(!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch($){return!1}})).apply(this,arguments)}(0,Me._registerComponent)(new _e.wA("remote-config",function(Y,{instanceIdentifier:me}){const Le=Y.getProvider("app").getImmediate(),yt=Y.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Vr.create("registration-window");if(!(0,ce.hl)())throw Vr.create("indexed-db-unavailable");const{projectId:Pt,apiKey:nn,appId:xn}=Le.options;if(!Pt)throw Vr.create("registration-project-id");if(!nn)throw Vr.create("registration-api-key");if(!xn)throw Vr.create("registration-app-id");const gr=new Ao(xn,Le.name,me=me||"firebase"),lr=new ho(gr),kr=new ne.Yd(Sr);kr.logLevel=ne.in.ERROR;const _r=new ur(yt,Me.SDK_VERSION,me,Pt,nn,xn),Is=new bi(_r,gr),pi=new Wn(Is,gr,lr,kr),Xa=new Zr(Le,pi,lr,gr,kr);return function($){const Y=(0,ce.m9)($);Y._initializePromise||(Y._initializePromise=Y._storageCache.loadFromStorage().then(()=>{Y._isInitializationComplete=!0}))}(Xa),Xa},"PUBLIC").setMultipleInstances(!0)),(0,Me.registerVersion)(Sr,"0.3.14"),(0,Me.registerVersion)(Sr,"0.3.14","esm2017");const Ro="/firebase-messaging-sw.js",io="/firebase-cloud-messaging-push-scope",ci="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Fs="google.c.a.c_id",Hs="google.c.a.c_l",Ls="google.c.a.ts",ji="google.c.a.e";var as=(()=>{return($=as||(as={})).PUSH_RECEIVED="push-received",$.NOTIFICATION_CLICKED="notification-clicked",as;var $})();function Nr($){const Y=new Uint8Array($);return btoa(String.fromCharCode(...Y)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function po($){const me=($+"=".repeat((4-$.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Le=atob(me),yt=new Uint8Array(Le.length);for(let Pt=0;Pt<Le.length;++Pt)yt[Pt]=Le.charCodeAt(Pt);return yt}const ys="fcm_token_details_db",Ri="fcm_token_object_Store";function Ws($){return Vs.apply(this,arguments)}function Vs(){return Vs=(0,re.Z)(function*($){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Pt=>Pt.name).includes(ys))return null;let Y=null;return(yield(0,V.X3)(ys,5,{upgrade:(Le=(0,re.Z)(function*(yt,Pt,nn,xn){var gr;if(Pt<2||!yt.objectStoreNames.contains(Ri))return;const lr=xn.objectStore(Ri),kr=yield lr.index("fcmSenderId").get($);if(yield lr.clear(),kr)if(2===Pt){const _r=kr;if(!_r.auth||!_r.p256dh||!_r.endpoint)return;Y={token:_r.fcmToken,createTime:null!==(gr=_r.createTime)&&void 0!==gr?gr:Date.now(),subscriptionOptions:{auth:_r.auth,p256dh:_r.p256dh,endpoint:_r.endpoint,swScope:_r.swScope,vapidKey:"string"==typeof _r.vapidKey?_r.vapidKey:Nr(_r.vapidKey)}}}else if(3===Pt){const _r=kr;Y={token:_r.fcmToken,createTime:_r.createTime,subscriptionOptions:{auth:Nr(_r.auth),p256dh:Nr(_r.p256dh),endpoint:_r.endpoint,swScope:_r.swScope,vapidKey:Nr(_r.vapidKey)}}}else if(4===Pt){const _r=kr;Y={token:_r.fcmToken,createTime:_r.createTime,subscriptionOptions:{auth:Nr(_r.auth),p256dh:Nr(_r.p256dh),endpoint:_r.endpoint,swScope:_r.swScope,vapidKey:Nr(_r.vapidKey)}}}}),function(Pt,nn,xn,gr){return Le.apply(this,arguments)})})).close(),yield(0,V.Lj)(ys),yield(0,V.Lj)("fcm_vapid_details_db"),yield(0,V.Lj)("undefined"),_s(Y)?Y:null;var Le}),Vs.apply(this,arguments)}function _s($){if(!$||!$.subscriptionOptions)return!1;const{subscriptionOptions:Y}=$;return"number"==typeof $.createTime&&$.createTime>0&&"string"==typeof $.token&&$.token.length>0&&"string"==typeof Y.auth&&Y.auth.length>0&&"string"==typeof Y.p256dh&&Y.p256dh.length>0&&"string"==typeof Y.endpoint&&Y.endpoint.length>0&&"string"==typeof Y.swScope&&Y.swScope.length>0&&"string"==typeof Y.vapidKey&&Y.vapidKey.length>0}const oi="firebase-messaging-store";let Ds=null;function q(){return Ds||(Ds=(0,V.X3)("firebase-messaging-database",1,{upgrade:($,Y)=>{0===Y&&$.createObjectStore(oi)}})),Ds}function fe($){return K.apply(this,arguments)}function K(){return(K=(0,re.Z)(function*($){const Y=G($),Le=yield(yield q()).transaction(oi).objectStore(oi).get(Y);if(Le)return Le;{const yt=yield Ws($.appConfig.senderId);if(yt)return yield ye($,yt),yt}})).apply(this,arguments)}function ye($,Y){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,re.Z)(function*($,Y){const me=G($),yt=(yield q()).transaction(oi,"readwrite");return yield yt.objectStore(oi).put(Y,me),yield yt.done,Y})).apply(this,arguments)}function Dt($){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,re.Z)(function*($){const Y=G($),Le=(yield q()).transaction(oi,"readwrite");yield Le.objectStore(oi).delete(Y),yield Le.done})).apply(this,arguments)}function G({appConfig:$}){return $.appId}const O=new ce.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ue($,Y){return pt.apply(this,arguments)}function pt(){return(pt=(0,re.Z)(function*($,Y){var me;const Le=yield Pr($),yt=$s(Y),Pt={method:"POST",headers:Le,body:JSON.stringify(yt)};let nn;try{nn=yield(yield fetch(Ci($.appConfig),Pt)).json()}catch(xn){throw O.create("token-subscribe-failed",{errorInfo:null===(me=xn)||void 0===me?void 0:me.toString()})}if(nn.error)throw O.create("token-subscribe-failed",{errorInfo:nn.error.message});if(!nn.token)throw O.create("token-subscribe-no-token");return nn.token})).apply(this,arguments)}function pn($,Y){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,re.Z)(function*($,Y){var me;const Le=yield Pr($),yt=$s(Y.subscriptionOptions),Pt={method:"PATCH",headers:Le,body:JSON.stringify(yt)};let nn;try{nn=yield(yield fetch(`${Ci($.appConfig)}/${Y.token}`,Pt)).json()}catch(xn){throw O.create("token-update-failed",{errorInfo:null===(me=xn)||void 0===me?void 0:me.toString()})}if(nn.error)throw O.create("token-update-failed",{errorInfo:nn.error.message});if(!nn.token)throw O.create("token-update-no-token");return nn.token})).apply(this,arguments)}function ei($,Y){return Li.apply(this,arguments)}function Li(){return(Li=(0,re.Z)(function*($,Y){var me;const yt={method:"DELETE",headers:yield Pr($)};try{const nn=yield(yield fetch(`${Ci($.appConfig)}/${Y}`,yt)).json();if(nn.error)throw O.create("token-unsubscribe-failed",{errorInfo:nn.error.message})}catch(Pt){throw O.create("token-unsubscribe-failed",{errorInfo:null===(me=Pt)||void 0===me?void 0:me.toString()})}})).apply(this,arguments)}function Ci({projectId:$}){return`https://fcmregistrations.googleapis.com/v1/projects/${$}/registrations`}function Pr($){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,re.Z)(function*({appConfig:$,installations:Y}){const me=yield Y.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":$.apiKey,"x-goog-firebase-installations-auth":`FIS ${me}`})})).apply(this,arguments)}function $s({p256dh:$,auth:Y,endpoint:me,vapidKey:Le}){const yt={web:{endpoint:me,auth:Y,p256dh:$}};return Le!==ci&&(yt.web.applicationPubKey=Le),yt}const Xo=6048e5;function Ki($){return ma.apply(this,arguments)}function ma(){return(ma=(0,re.Z)(function*($){const Y=yield Jo($.swRegistration,$.vapidKey),me={vapidKey:$.vapidKey,swScope:$.swRegistration.scope,endpoint:Y.endpoint,auth:Nr(Y.getKey("auth")),p256dh:Nr(Y.getKey("p256dh"))},Le=yield fe($.firebaseDependencies);if(Le){if(Gs(Le.subscriptionOptions,me))return Date.now()>=Le.createTime+Xo?qa($,{token:Le.token,createTime:Date.now(),subscriptionOptions:me}):Le.token;try{yield ei($.firebaseDependencies,Le.token)}catch(yt){console.warn(yt)}return Aa($.firebaseDependencies,me)}return Aa($.firebaseDependencies,me)})).apply(this,arguments)}function ya($){return yr.apply(this,arguments)}function yr(){return(yr=(0,re.Z)(function*($){const Y=yield fe($.firebaseDependencies);Y&&(yield ei($.firebaseDependencies,Y.token),yield Dt($.firebaseDependencies));const me=yield $.swRegistration.pushManager.getSubscription();return!me||me.unsubscribe()})).apply(this,arguments)}function qa($,Y){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,re.Z)(function*($,Y){try{const me=yield pn($.firebaseDependencies,Y),Le=Object.assign(Object.assign({},Y),{token:me,createTime:Date.now()});return yield ye($.firebaseDependencies,Le),me}catch(me){throw yield ya($),me}})).apply(this,arguments)}function Aa($,Y){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,re.Z)(function*($,Y){const Le={token:yield ue($,Y),createTime:Date.now(),subscriptionOptions:Y};return yield ye($,Le),Le.token})).apply(this,arguments)}function Jo($,Y){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,re.Z)(function*($,Y){return(yield $.pushManager.getSubscription())||$.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:po(Y)})})).apply(this,arguments)}function Gs($,Y){return Y.vapidKey===$.vapidKey&&Y.endpoint===$.endpoint&&Y.auth===$.auth&&Y.p256dh===$.p256dh}function en($){const Y={from:$.from,collapseKey:$.collapse_key,messageId:$.fcmMessageId};return function($,Y){if(!Y.notification)return;$.notification={};const me=Y.notification.title;me&&($.notification.title=me);const Le=Y.notification.body;Le&&($.notification.body=Le);const yt=Y.notification.image;yt&&($.notification.image=yt)}(Y,$),function($,Y){!Y.data||($.data=Y.data)}(Y,$),function($,Y){var me,Le,yt,Pt,nn;if(!Y.fcmOptions&&!(null===(me=Y.notification)||void 0===me?void 0:me.click_action))return;$.fcmOptions={};const xn=null!==(yt=null===(Le=Y.fcmOptions)||void 0===Le?void 0:Le.link)&&void 0!==yt?yt:null===(Pt=Y.notification)||void 0===Pt?void 0:Pt.click_action;xn&&($.fcmOptions.link=xn);const gr=null===(nn=Y.fcmOptions)||void 0===nn?void 0:nn.analytics_label;gr&&($.fcmOptions.analyticsLabel=gr)}(Y,$),Y}function ea($){return"object"==typeof $&&!!$&&Fs in $}function oo($,Y){const me=[];for(let Le=0;Le<$.length;Le++)me.push($.charAt(Le)),Le<Y.length&&me.push(Y.charAt(Le));return me.join("")}function qs($){return O.create("missing-app-config-values",{valueName:$})}oo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),oo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class _a{constructor(Y,me,Le){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const yt=function($){if(!$||!$.options)throw qs("App Configuration Object");if(!$.name)throw qs("App Name");const Y=["projectId","apiKey","appId","messagingSenderId"],{options:me}=$;for(const Le of Y)if(!me[Le])throw qs(Le);return{appName:$.name,projectId:me.projectId,apiKey:me.apiKey,appId:me.appId,senderId:me.messagingSenderId}}(Y);this.firebaseDependencies={app:Y,appConfig:yt,installations:me,analyticsProvider:Le}}_delete(){return Promise.resolve()}}function hl($){return fl.apply(this,arguments)}function fl(){return(fl=(0,re.Z)(function*($){var Y;try{$.swRegistration=yield navigator.serviceWorker.register(Ro,{scope:io}),$.swRegistration.update().catch(()=>{})}catch(me){throw O.create("failed-service-worker-registration",{browserErrorMessage:null===(Y=me)||void 0===Y?void 0:Y.message})}})).apply(this,arguments)}function Bs($,Y){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,re.Z)(function*($,Y){if(!Y&&!$.swRegistration&&(yield hl($)),Y||!$.swRegistration){if(!(Y instanceof ServiceWorkerRegistration))throw O.create("invalid-sw-registration");$.swRegistration=Y}})).apply(this,arguments)}function Ai($,Y){return xi.apply(this,arguments)}function xi(){return(xi=(0,re.Z)(function*($,Y){Y?$.vapidKey=Y:$.vapidKey||($.vapidKey=ci)})).apply(this,arguments)}function cs(){return(cs=(0,re.Z)(function*($,Y){if(!navigator)throw O.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw O.create("permission-blocked");return yield Ai($,null==Y?void 0:Y.vapidKey),yield Bs($,null==Y?void 0:Y.serviceWorkerRegistration),Ki($)})).apply(this,arguments)}function As($,Y,me){return va.apply(this,arguments)}function va(){return(va=(0,re.Z)(function*($,Y,me){const Le=vo(Y);(yield $.firebaseDependencies.analyticsProvider.get()).logEvent(Le,{message_id:me[Fs],message_name:me[Hs],message_time:me[Ls],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function vo($){switch($){case as.NOTIFICATION_CLICKED:return"notification_open";case as.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function xa(){return(xa=(0,re.Z)(function*($,Y){const me=Y.data;if(!me.isFirebaseMessaging)return;$.onMessageHandler&&me.messageType===as.PUSH_RECEIVED&&("function"==typeof $.onMessageHandler?$.onMessageHandler(en(me)):$.onMessageHandler.next(en(me)));const Le=me.data;ea(Le)&&"1"===Le[ji]&&(yield As($,me.messageType,Le))})).apply(this,arguments)}const ta="@firebase/messaging";function na(){return Io.apply(this,arguments)}function Io(){return(Io=(0,re.Z)(function*(){try{yield(0,ce.eu)()}catch($){return!1}return"undefined"!=typeof window&&(0,ce.hl)()&&(0,ce.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,Me._registerComponent)(new _e.wA("messaging",$=>{const Y=new _a($.getProvider("app").getImmediate(),$.getProvider("installations-internal").getImmediate(),$.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",me=>function($,Y){return xa.apply(this,arguments)}(Y,me)),Y},"PUBLIC")),(0,Me._registerComponent)(new _e.wA("messaging-internal",$=>{const Y=$.getProvider("messaging").getImmediate();return{getToken:Le=>function($,Y){return cs.apply(this,arguments)}(Y,Le)}},"PRIVATE")),(0,Me.registerVersion)(ta,"0.9.19"),(0,Me.registerVersion)(ta,"0.9.19","esm2017");const on="analytics",$n="firebase_id",vi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ht="https://www.googletagmanager.com/gtag/js",pr=new ne.Yd("@firebase/analytics");function us($){return Promise.all($.map(Y=>Y.catch(me=>me)))}function Ys($,Y){const me=document.createElement("script");me.src=`${Ht}?l=${$}&id=${Y}`,me.async=!0,document.head.appendChild(me)}function or($,Y,me,Le,yt,Pt){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,re.Z)(function*($,Y,me,Le,yt,Pt){const nn=Le[yt];try{if(nn)yield Y[nn];else{const gr=(yield us(me)).find(lr=>lr.measurementId===yt);gr&&(yield Y[gr.appId])}}catch(xn){pr.error(xn)}$("config",yt,Pt)})).apply(this,arguments)}function _n($,Y,me,Le,yt){return Et.apply(this,arguments)}function Et(){return(Et=(0,re.Z)(function*($,Y,me,Le,yt){try{let Pt=[];if(yt&&yt.send_to){let nn=yt.send_to;Array.isArray(nn)||(nn=[nn]);const xn=yield us(me);for(const gr of nn){const lr=xn.find(_r=>_r.measurementId===gr),kr=lr&&Y[lr.appId];if(!kr){Pt=[];break}Pt.push(kr)}}0===Pt.length&&(Pt=Object.values(Y)),yield Promise.all(Pt),$("event",Le,yt||{})}catch(Pt){pr.error(Pt)}})).apply(this,arguments)}function Yo($){const Y=window.document.getElementsByTagName("script");for(const me of Object.values(Y))if(me.src&&me.src.includes(Ht)&&me.src.includes($))return me;return null}const Es=new ce.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Pi=new class{constructor(Y={},me=1e3){this.throttleMetadata=Y,this.intervalMillis=me}getThrottleMetadata(Y){return this.throttleMetadata[Y]}setThrottleMetadata(Y,me){this.throttleMetadata[Y]=me}deleteThrottleMetadata(Y){delete this.throttleMetadata[Y]}};function ti($){return new Headers({Accept:"application/json","x-goog-api-key":$})}function Us($){return zl.apply(this,arguments)}function zl(){return(zl=(0,re.Z)(function*($){var Y;const{appId:me,apiKey:Le}=$,yt={method:"GET",headers:ti(Le)},Pt=vi.replace("{app-id}",me),nn=yield fetch(Pt,yt);if(200!==nn.status&&304!==nn.status){let xn="";try{const gr=yield nn.json();(null===(Y=gr.error)||void 0===Y?void 0:Y.message)&&(xn=gr.error.message)}catch(gr){}throw Es.create("config-fetch-failed",{httpStatus:nn.status,responseMessage:xn})}return nn.json()})).apply(this,arguments)}function Ma($){return ar.apply(this,arguments)}function ar(){return(ar=(0,re.Z)(function*($,Y=Pi,me){const{appId:Le,apiKey:yt,measurementId:Pt}=$.options;if(!Le)throw Es.create("no-app-id");if(!yt){if(Pt)return{measurementId:Pt,appId:Le};throw Es.create("no-api-key")}const nn=Y.getThrottleMetadata(Le)||{backoffCount:0,throttleEndTimeMillis:Date.now()},xn=new Zs;return setTimeout((0,re.Z)(function*(){xn.abort()}),void 0!==me?me:6e4),Ks({appId:Le,apiKey:yt,measurementId:Pt},nn,xn,Y)})).apply(this,arguments)}function Ks($,Y,me){return Po.apply(this,arguments)}function Po(){return(Po=(0,re.Z)(function*($,{throttleEndTimeMillis:Y,backoffCount:me},Le,yt=Pi){var Pt,nn;const{appId:xn,measurementId:gr}=$;try{yield Ei(Le,Y)}catch(lr){if(gr)return pr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${gr} provided in the "measurementId" field in the local Firebase config. [${null===(Pt=lr)||void 0===Pt?void 0:Pt.message}]`),{appId:xn,measurementId:gr};throw lr}try{const lr=yield Us($);return yt.deleteThrottleMetadata(xn),lr}catch(lr){const kr=lr;if(!Er(kr)){if(yt.deleteThrottleMetadata(xn),gr)return pr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${gr} provided in the "measurementId" field in the local Firebase config. [${null==kr?void 0:kr.message}]`),{appId:xn,measurementId:gr};throw lr}const _r=503===Number(null===(nn=null==kr?void 0:kr.customData)||void 0===nn?void 0:nn.httpStatus)?(0,ce.$s)(me,yt.intervalMillis,30):(0,ce.$s)(me,yt.intervalMillis),Is={throttleEndTimeMillis:Date.now()+_r,backoffCount:me+1};return yt.setThrottleMetadata(xn,Is),pr.debug(`Calling attemptFetch again in ${_r} millis`),Ks($,Is,Le,yt)}})).apply(this,arguments)}function Ei($,Y){return new Promise((me,Le)=>{const yt=Math.max(Y-Date.now(),0),Pt=setTimeout(me,yt);$.addEventListener(()=>{clearTimeout(Pt),Le(Es.create("fetch-throttle",{throttleEndTimeMillis:Y}))})})}function Er($){if(!($ instanceof ce.ZR&&$.customData))return!1;const Y=Number($.customData.httpStatus);return 429===Y||500===Y||503===Y||504===Y}class Zs{constructor(){this.listeners=[]}addEventListener(Y){this.listeners.push(Y)}abort(){this.listeners.forEach(Y=>Y())}}let Gr,No;function Vi(){return(Vi=(0,re.Z)(function*($,Y,me,Le,yt){if(yt&&yt.global)$("event",me,Le);else{const Pt=yield Y;$("event",me,Object.assign(Object.assign({},Le),{send_to:Pt}))}})).apply(this,arguments)}function uc($){No=$}function $i($){Gr=$}function F(){return x.apply(this,arguments)}function x(){return(x=(0,re.Z)(function*(){var $;if(!(0,ce.hl)())return pr.warn(Es.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ce.eu)()}catch(Y){return pr.warn(Es.create("indexeddb-unavailable",{errorInfo:null===($=Y)||void 0===$?void 0:$.toString()}).message),!1}return!0})).apply(this,arguments)}function B(){return(B=(0,re.Z)(function*($,Y,me,Le,yt,Pt,nn){var xn;const gr=Ma($);gr.then(pi=>{me[pi.measurementId]=pi.appId,$.options.measurementId&&pi.measurementId!==$.options.measurementId&&pr.warn(`The measurement ID in the local Firebase config (${$.options.measurementId}) does not match the measurement ID fetched from the server (${pi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(pi=>pr.error(pi)),Y.push(gr);const lr=F().then(pi=>{if(pi)return Le.getId()}),[kr,_r]=yield Promise.all([gr,lr]);Yo(Pt)||Ys(Pt,kr.measurementId),No&&(yt("consent","default",No),uc(void 0)),yt("js",new Date);const Is=null!==(xn=null==nn?void 0:nn.config)&&void 0!==xn?xn:{};return Is.origin="firebase",Is.update=!0,null!=_r&&(Is[$n]=_r),yt("config",kr.measurementId,Is),Gr&&(yt("set",Gr),$i(void 0)),kr.measurementId})).apply(this,arguments)}class J{constructor(Y){this.app=Y}_delete(){return delete Q[this.app.options.appId],Promise.resolve()}}let Q={},Be=[];const rt={};let Ar,Yn,Bt="dataLayer",ii=!1;function xs($,Y,me){!function(){const $=[];if((0,ce.ru)()&&$.push("This is a browser extension environment."),(0,ce.zI)()||$.push("Cookies are not available."),$.length>0){const Y=$.map((Le,yt)=>`(${yt+1}) ${Le}`).join(" "),me=Es.create("invalid-analytics-context",{errorInfo:Y});pr.warn(me.message)}}();const Le=$.options.appId;if(!Le)throw Es.create("no-app-id");if(!$.options.apiKey){if(!$.options.measurementId)throw Es.create("no-api-key");pr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${$.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Q[Le])throw Es.create("already-exists",{id:Le});if(!ii){!function($){let Y=[];Array.isArray(window[$])?Y=window[$]:window[$]=Y}(Bt);const{wrappedGtag:Pt,gtagCore:nn}=function($,Y,me,Le,yt){let Pt=function(...nn){window[Le].push(arguments)};return window[yt]&&"function"==typeof window[yt]&&(Pt=window[yt]),window[yt]=function($,Y,me,Le){function Pt(){return(Pt=(0,re.Z)(function*(nn,xn,gr){try{"event"===nn?yield _n($,Y,me,xn,gr):"config"===nn?yield or($,Y,me,Le,xn,gr):"consent"===nn?$("consent","update",gr):$("set",xn)}catch(lr){pr.error(lr)}})).apply(this,arguments)}return function(nn,xn,gr){return Pt.apply(this,arguments)}}(Pt,$,Y,me),{gtagCore:Pt,wrappedGtag:window[yt]}}(Q,Be,rt,Bt,"gtag");Yn=Pt,Ar=nn,ii=!0}return Q[Le]=function($,Y,me,Le,yt,Pt,nn){return B.apply(this,arguments)}($,Be,rt,Y,Ar,Bt,me),new J($)}function bo(){return zi.apply(this,arguments)}function zi(){return(zi=(0,re.Z)(function*(){if((0,ce.ru)()||!(0,ce.zI)()||!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch($){return!1}})).apply(this,arguments)}const Rs="@firebase/analytics";(0,Me._registerComponent)(new _e.wA(on,(Y,{options:me})=>xs(Y.getProvider("app").getImmediate(),Y.getProvider("installations-internal").getImmediate(),me),"PUBLIC")),(0,Me._registerComponent)(new _e.wA("analytics-internal",function(Y){try{const me=Y.getProvider(on).getImmediate();return{logEvent:(Le,yt,Pt)=>function($,Y,me,Le){$=(0,ce.m9)($),function($,Y,me,Le,yt){return Vi.apply(this,arguments)}(Yn,Q[$.app.options.appId],Y,me,Le).catch(yt=>pr.error(yt))}(me,Le,yt,Pt)}}catch(me){throw Es.create("interop-component-reg-failed",{reason:me})}},"PRIVATE")),(0,Me.registerVersion)(Rs,"0.8.3"),(0,Me.registerVersion)(Rs,"0.8.3","esm2017");var Ku=L(7771),Za=L(3637),qi=L(8891),ia=L(3342),ql=L(3101),cu=L(309);const Yl=new _.GfV("7.4.1"),ka="__angularfire_symbol__analyticsIsSupportedValue",Fa="__angularfire_symbol__analyticsIsSupported",Hi="__angularfire_symbol__remoteConfigIsSupportedValue",Ea="__angularfire_symbol__remoteConfigIsSupported",ko="__angularfire_symbol__messagingIsSupportedValue",Zo="__angularfire_symbol__messagingIsSupported";function Co($,Y,me){if(Y){if(1===Y.length)return Y[0];const Pt=Y.filter(nn=>nn.app===me);if(1===Pt.length)return Pt[0]}return me.container.getProvider($).getImmediate({optional:!0})}globalThis[Fa]||(globalThis[Fa]=bo().then($=>globalThis[ka]=$).catch(()=>globalThis[ka]=!1)),globalThis[Zo]||(globalThis[Zo]=na().then($=>globalThis[ko]=$).catch(()=>globalThis[ko]=!1)),globalThis[Ea]||(globalThis[Ea]=ro().then($=>globalThis[Hi]=$).catch(()=>globalThis[Hi]=!1));const ba=($,Y)=>{const me=Y?[Y]:(0,A.C6)(),Le=[];return me.forEach(yt=>{yt.container.getProvider($).instances.forEach(nn=>{Le.includes(nn)||Le.push(nn)})}),Le};function sa(){}class Mc{constructor(Y,me=Ku.N){this.zone=Y,this.delegate=me}now(){return this.delegate.now()}schedule(Y,me,Le){const yt=this.zone;return this.delegate.schedule(function(nn){yt.runGuarded(()=>{Y.apply(this,[nn])})},me,Le)}}class Qa{constructor(Y){this.zone=Y,this.task=null}call(Y,me){const Le=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",sa,{},sa,sa)),me.pipe((0,ia.b)({next:Le,complete:Le,error:Le})).subscribe(Y).add(Le)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Pc=(()=>{class ${constructor(me){this.ngZone=me,this.outsideAngular=me.runOutsideAngular(()=>new Mc(Zone.current)),this.insideAngular=me.run(()=>new Mc(Zone.current,Za.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return $.\u0275fac=function(me){return new(me||$)(_.LFG(_.R0b))},$.\u0275prov=_.Yz7({token:$,factory:$.\u0275fac,providedIn:"root"}),$})();function oa(){const $=globalThis.\u0275AngularFireScheduler;if(!$)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return $}function dc($){return oa().ngZone.runOutsideAngular(()=>$())}function hs($){return oa().ngZone.run(()=>$())}function Kl($){return oa(),function($){return function(me){return(me=me.lift(new Qa($.ngZone))).pipe((0,ql.R)($.outsideAngular),(0,cu.QV)($.insideAngular))}}(oa())($)}const Nd=($,Y)=>function(){const Le=arguments;return Y&&setTimeout(()=>{"scheduled"===Y.state&&Y.invoke()},10),hs(()=>$.apply(void 0,Le))},Al=($,Y)=>function(){let me;const Le=arguments;for(let Pt=0;Pt<arguments.length;Pt++)"function"==typeof Le[Pt]&&(Y&&(me||(me=hs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",sa,{},sa,sa)))),Le[Pt]=Nd(Le[Pt],me));const yt=dc(()=>$.apply(this,Le));if(!Y){if(yt instanceof qi.y){const Pt=oa();return yt.pipe((0,ql.R)(Pt.outsideAngular),(0,cu.QV)(Pt.insideAngular))}return hs(()=>yt)}return yt instanceof qi.y?yt.pipe(Kl):yt instanceof Promise?hs(()=>new Promise((Pt,nn)=>yt.then(xn=>hs(()=>Pt(xn)),xn=>hs(()=>nn(xn))))):"function"==typeof yt&&me?function(){return setTimeout(()=>{me&&"scheduled"===me.state&&me.invoke()},10),yt.apply(this,arguments)}:hs(()=>yt)}},665:(Xt,it,L)=>{"use strict";L.d(it,{qu:()=>Dt,u:()=>ms,sg:()=>di,u5:()=>K,JU:()=>Ne,a5:()=>jn,JJ:()=>si,JL:()=>Rr,UX:()=>ye,kI:()=>bt,_Y:()=>W});var _=L(3018),A=L(8583),re=L(8891),Me=L(9796),ce=L(8002),_e=L(1555),ne=L(4402);function Ie(G,H){return new re.y(O=>{const ue=G.length;if(0===ue)return void O.complete();const pt=new Array(ue);let pn=0,Gn=0;for(let ei=0;ei<ue;ei++){const Li=(0,ne.D)(G[ei]);let Ci=!1;O.add(Li.subscribe({next:Pr=>{Ci||(Ci=!0,Gn++),pt[ei]=Pr},error:Pr=>O.error(Pr),complete:()=>{pn++,(pn===ue||!Ci)&&(Gn===ue&&O.next(H?H.reduce((Pr,Hr,$s)=>(Pr[Hr]=pt[$s],Pr),{}):pt),O.complete())}}))}})}let ie=(()=>{class G{constructor(O,ue){this._renderer=O,this._elementRef=ue,this.onChange=pt=>{},this.onTouched=()=>{}}setProperty(O,ue){this._renderer.setProperty(this._elementRef.nativeElement,O,ue)}registerOnTouched(O){this.onTouched=O}registerOnChange(O){this.onChange=O}setDisabledState(O){this.setProperty("disabled",O)}}return G.\u0275fac=function(O){return new(O||G)(_.Y36(_.Qsj),_.Y36(_.SBq))},G.\u0275dir=_.lG2({type:G}),G})(),ae=(()=>{class G extends ie{}return G.\u0275fac=function(){let H;return function(ue){return(H||(H=_.n5z(G)))(ue||G)}}(),G.\u0275dir=_.lG2({type:G,features:[_.qOj]}),G})();const Ne=new _.OlP("NgValueAccessor"),at={provide:Ne,useExisting:(0,_.Gpc)(()=>Ye),multi:!0},Oe=new _.OlP("CompositionEventMode");let Ye=(()=>{class G extends ie{constructor(O,ue,pt){super(O,ue),this._compositionMode=pt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const G=(0,A.q)()?(0,A.q)().getUserAgent():"";return/android (\d+)/.test(G.toLowerCase())}())}writeValue(O){this.setProperty("value",null==O?"":O)}_handleInput(O){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(O)}_compositionStart(){this._composing=!0}_compositionEnd(O){this._composing=!1,this._compositionMode&&this.onChange(O)}}return G.\u0275fac=function(O){return new(O||G)(_.Y36(_.Qsj),_.Y36(_.SBq),_.Y36(Oe,8))},G.\u0275dir=_.lG2({type:G,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(O,ue){1&O&&_.NdJ("input",function(pn){return ue._handleInput(pn.target.value)})("blur",function(){return ue.onTouched()})("compositionstart",function(){return ue._compositionStart()})("compositionend",function(pn){return ue._compositionEnd(pn.target.value)})},features:[_._Bn([at]),_.qOj]}),G})();function Ke(G){return null==G||0===G.length}function $e(G){return null!=G&&"number"==typeof G.length}const He=new _.OlP("NgValidators"),gt=new _.OlP("NgAsyncValidators"),ct=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class bt{static min(H){return G=H,H=>{if(Ke(H.value)||Ke(G))return null;const O=parseFloat(H.value);return!isNaN(O)&&O<G?{min:{min:G,actual:H.value}}:null};var G}static max(H){return G=H,H=>{if(Ke(H.value)||Ke(G))return null;const O=parseFloat(H.value);return!isNaN(O)&&O>G?{max:{max:G,actual:H.value}}:null};var G}static required(H){return Ke(H.value)?{required:!0}:null}static requiredTrue(H){return!0===H.value?null:{required:!0}}static email(H){return Ke((G=H).value)||ct.test(G.value)?null:{email:!0};var G}static minLength(H){return G=H,H=>Ke(H.value)||!$e(H.value)?null:H.value.length<G?{minlength:{requiredLength:G,actualLength:H.value.length}}:null;var G}static maxLength(H){return G=H,H=>$e(H.value)&&H.value.length>G?{maxlength:{requiredLength:G,actualLength:H.value.length}}:null;var G}static pattern(H){return function(G){if(!G)return ot;let H,O;return"string"==typeof G?(O="","^"!==G.charAt(0)&&(O+="^"),O+=G,"$"!==G.charAt(G.length-1)&&(O+="$"),H=new RegExp(O)):(O=G.toString(),H=G),ue=>{if(Ke(ue.value))return null;const pt=ue.value;return H.test(pt)?null:{pattern:{requiredPattern:O,actualValue:pt}}}}(H)}static nullValidator(H){return null}static compose(H){return Ot(H)}static composeAsync(H){return sn(H)}}function ot(G){return null}function je(G){return null!=G}function Ae(G){const H=(0,_.QGY)(G)?(0,ne.D)(G):G;return(0,_.CqO)(H),H}function ze(G){let H={};return G.forEach(O=>{H=null!=O?Object.assign(Object.assign({},H),O):H}),0===Object.keys(H).length?null:H}function nt(G,H){return H.map(O=>O(G))}function mt(G){return G.map(H=>function(G){return!G.validate}(H)?H:O=>H.validate(O))}function Ot(G){if(!G)return null;const H=G.filter(je);return 0==H.length?null:function(O){return ze(nt(O,H))}}function Yt(G){return null!=G?Ot(mt(G)):null}function sn(G){if(!G)return null;const H=G.filter(je);return 0==H.length?null:function(O){return function(...G){if(1===G.length){const H=G[0];if((0,Me.k)(H))return Ie(H,null);if((0,_e.K)(H)&&Object.getPrototypeOf(H)===Object.prototype){const O=Object.keys(H);return Ie(O.map(ue=>H[ue]),O)}}if("function"==typeof G[G.length-1]){const H=G.pop();return Ie(G=1===G.length&&(0,Me.k)(G[0])?G[0]:G,null).pipe((0,ce.U)(O=>H(...O)))}return Ie(G,null)}(nt(O,H).map(Ae)).pipe((0,ce.U)(ze))}}function Ft(G){return null!=G?sn(mt(G)):null}function Cn(G,H){return null===G?[H]:Array.isArray(G)?[...G,H]:[G,H]}function rr(G){return G._rawValidators}function Rn(G){return G._rawAsyncValidators}function hn(G){return G?Array.isArray(G)?G:[G]:[]}function dr(G,H){return Array.isArray(G)?G.includes(H):G===H}function br(G,H){const O=hn(H);return hn(G).forEach(pt=>{dr(O,pt)||O.push(pt)}),O}function Qn(G,H){return hn(H).filter(O=>!dr(G,O))}let wt=(()=>{class G{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(O){this._rawValidators=O||[],this._composedValidatorFn=Yt(this._rawValidators)}_setAsyncValidators(O){this._rawAsyncValidators=O||[],this._composedAsyncValidatorFn=Ft(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(O){this._onDestroyCallbacks.push(O)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(O=>O()),this._onDestroyCallbacks=[]}reset(O){this.control&&this.control.reset(O)}hasError(O,ue){return!!this.control&&this.control.hasError(O,ue)}getError(O,ue){return this.control?this.control.getError(O,ue):null}}return G.\u0275fac=function(O){return new(O||G)},G.\u0275dir=_.lG2({type:G}),G})(),an=(()=>{class G extends wt{get formDirective(){return null}get path(){return null}}return G.\u0275fac=function(){let H;return function(ue){return(H||(H=_.n5z(G)))(ue||G)}}(),G.\u0275dir=_.lG2({type:G,features:[_.qOj]}),G})();class jn extends wt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class tr{constructor(H){this._cd=H}is(H){var O,ue,pt;return"submitted"===H?!!(null===(O=this._cd)||void 0===O?void 0:O.submitted):!!(null===(pt=null===(ue=this._cd)||void 0===ue?void 0:ue.control)||void 0===pt?void 0:pt[H])}}let si=(()=>{class G extends tr{constructor(O){super(O)}}return G.\u0275fac=function(O){return new(O||G)(_.Y36(jn,2))},G.\u0275dir=_.lG2({type:G,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(O,ue){2&O&&_.ekj("ng-untouched",ue.is("untouched"))("ng-touched",ue.is("touched"))("ng-pristine",ue.is("pristine"))("ng-dirty",ue.is("dirty"))("ng-valid",ue.is("valid"))("ng-invalid",ue.is("invalid"))("ng-pending",ue.is("pending"))},features:[_.qOj]}),G})(),Rr=(()=>{class G extends tr{constructor(O){super(O)}}return G.\u0275fac=function(O){return new(O||G)(_.Y36(an,10))},G.\u0275dir=_.lG2({type:G,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(O,ue){2&O&&_.ekj("ng-untouched",ue.is("untouched"))("ng-touched",ue.is("touched"))("ng-pristine",ue.is("pristine"))("ng-dirty",ue.is("dirty"))("ng-valid",ue.is("valid"))("ng-invalid",ue.is("invalid"))("ng-pending",ue.is("pending"))("ng-submitted",ue.is("submitted"))},features:[_.qOj]}),G})();function fr(G,H){mn(G,H),H.valueAccessor.writeValue(G.value),function(G,H){H.valueAccessor.registerOnChange(O=>{G._pendingValue=O,G._pendingChange=!0,G._pendingDirty=!0,"change"===G.updateOn&&rn(G,H)})}(G,H),function(G,H){const O=(ue,pt)=>{H.valueAccessor.writeValue(ue),pt&&H.viewToModelUpdate(ue)};G.registerOnChange(O),H._registerOnDestroy(()=>{G._unregisterOnChange(O)})}(G,H),function(G,H){H.valueAccessor.registerOnTouched(()=>{G._pendingTouched=!0,"blur"===G.updateOn&&G._pendingChange&&rn(G,H),"submit"!==G.updateOn&&G.markAsTouched()})}(G,H),function(G,H){if(H.valueAccessor.setDisabledState){const O=ue=>{H.valueAccessor.setDisabledState(ue)};G.registerOnDisabledChange(O),H._registerOnDestroy(()=>{G._unregisterOnDisabledChange(O)})}}(G,H)}function li(G,H,O=!0){const ue=()=>{};H.valueAccessor&&(H.valueAccessor.registerOnChange(ue),H.valueAccessor.registerOnTouched(ue)),Lt(G,H),G&&(H._invokeOnDestroyCallbacks(),G._registerOnCollectionChange(()=>{}))}function Dn(G,H){G.forEach(O=>{O.registerOnValidatorChange&&O.registerOnValidatorChange(H)})}function mn(G,H){const O=rr(G);null!==H.validator?G.setValidators(Cn(O,H.validator)):"function"==typeof O&&G.setValidators([O]);const ue=Rn(G);null!==H.asyncValidator?G.setAsyncValidators(Cn(ue,H.asyncValidator)):"function"==typeof ue&&G.setAsyncValidators([ue]);const pt=()=>G.updateValueAndValidity();Dn(H._rawValidators,pt),Dn(H._rawAsyncValidators,pt)}function Lt(G,H){let O=!1;if(null!==G){if(null!==H.validator){const pt=rr(G);if(Array.isArray(pt)&&pt.length>0){const pn=pt.filter(Gn=>Gn!==H.validator);pn.length!==pt.length&&(O=!0,G.setValidators(pn))}}if(null!==H.asyncValidator){const pt=Rn(G);if(Array.isArray(pt)&&pt.length>0){const pn=pt.filter(Gn=>Gn!==H.asyncValidator);pn.length!==pt.length&&(O=!0,G.setAsyncValidators(pn))}}}const ue=()=>{};return Dn(H._rawValidators,ue),Dn(H._rawAsyncValidators,ue),O}function rn(G,H){G._pendingDirty&&G.markAsDirty(),G.setValue(G._pendingValue,{emitModelToViewChange:!1}),H.viewToModelUpdate(G._pendingValue),G._pendingChange=!1}function Un(G,H){const O=G.indexOf(H);O>-1&&G.splice(O,1)}const ir="VALID",En="INVALID",vr="PENDING",Lr="DISABLED";function jt(G){return(ln(G)?G.validators:G)||null}function Hn(G){return Array.isArray(G)?Yt(G):G||null}function sr(G,H){return(ln(H)?H.asyncValidators:G)||null}function qn(G){return Array.isArray(G)?Ft(G):G||null}function ln(G){return null!=G&&!Array.isArray(G)&&"object"==typeof G}class Mr{constructor(H,O){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=H,this._rawAsyncValidators=O,this._composedValidatorFn=Hn(this._rawValidators),this._composedAsyncValidatorFn=qn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(H){this._rawValidators=this._composedValidatorFn=H}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(H){this._rawAsyncValidators=this._composedAsyncValidatorFn=H}get parent(){return this._parent}get valid(){return this.status===ir}get invalid(){return this.status===En}get pending(){return this.status==vr}get disabled(){return this.status===Lr}get enabled(){return this.status!==Lr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(H){this._rawValidators=H,this._composedValidatorFn=Hn(H)}setAsyncValidators(H){this._rawAsyncValidators=H,this._composedAsyncValidatorFn=qn(H)}addValidators(H){this.setValidators(br(H,this._rawValidators))}addAsyncValidators(H){this.setAsyncValidators(br(H,this._rawAsyncValidators))}removeValidators(H){this.setValidators(Qn(H,this._rawValidators))}removeAsyncValidators(H){this.setAsyncValidators(Qn(H,this._rawAsyncValidators))}hasValidator(H){return dr(this._rawValidators,H)}hasAsyncValidator(H){return dr(this._rawAsyncValidators,H)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(H={}){this.touched=!0,this._parent&&!H.onlySelf&&this._parent.markAsTouched(H)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(H=>H.markAllAsTouched())}markAsUntouched(H={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(O=>{O.markAsUntouched({onlySelf:!0})}),this._parent&&!H.onlySelf&&this._parent._updateTouched(H)}markAsDirty(H={}){this.pristine=!1,this._parent&&!H.onlySelf&&this._parent.markAsDirty(H)}markAsPristine(H={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(O=>{O.markAsPristine({onlySelf:!0})}),this._parent&&!H.onlySelf&&this._parent._updatePristine(H)}markAsPending(H={}){this.status=vr,!1!==H.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!H.onlySelf&&this._parent.markAsPending(H)}disable(H={}){const O=this._parentMarkedDirty(H.onlySelf);this.status=Lr,this.errors=null,this._forEachChild(ue=>{ue.disable(Object.assign(Object.assign({},H),{onlySelf:!0}))}),this._updateValue(),!1!==H.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},H),{skipPristineCheck:O})),this._onDisabledChange.forEach(ue=>ue(!0))}enable(H={}){const O=this._parentMarkedDirty(H.onlySelf);this.status=ir,this._forEachChild(ue=>{ue.enable(Object.assign(Object.assign({},H),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:H.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},H),{skipPristineCheck:O})),this._onDisabledChange.forEach(ue=>ue(!1))}_updateAncestors(H){this._parent&&!H.onlySelf&&(this._parent.updateValueAndValidity(H),H.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(H){this._parent=H}updateValueAndValidity(H={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ir||this.status===vr)&&this._runAsyncValidator(H.emitEvent)),!1!==H.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!H.onlySelf&&this._parent.updateValueAndValidity(H)}_updateTreeValidity(H={emitEvent:!0}){this._forEachChild(O=>O._updateTreeValidity(H)),this.updateValueAndValidity({onlySelf:!0,emitEvent:H.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Lr:ir}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(H){if(this.asyncValidator){this.status=vr,this._hasOwnPendingAsyncValidator=!0;const O=Ae(this.asyncValidator(this));this._asyncValidationSubscription=O.subscribe(ue=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ue,{emitEvent:H})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(H,O={}){this.errors=H,this._updateControlsErrors(!1!==O.emitEvent)}get(H){return function(G,H,O){if(null==H||(Array.isArray(H)||(H=H.split(".")),Array.isArray(H)&&0===H.length))return null;let ue=G;return H.forEach(pt=>{ue=ue instanceof Mn?ue.controls.hasOwnProperty(pt)?ue.controls[pt]:null:ue instanceof mr&&ue.at(pt)||null}),ue}(this,H)}getError(H,O){const ue=O?this.get(O):this;return ue&&ue.errors?ue.errors[H]:null}hasError(H,O){return!!this.getError(H,O)}get root(){let H=this;for(;H._parent;)H=H._parent;return H}_updateControlsErrors(H){this.status=this._calculateStatus(),H&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(H)}_initObservables(){this.valueChanges=new _.vpe,this.statusChanges=new _.vpe}_calculateStatus(){return this._allControlsDisabled()?Lr:this.errors?En:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(vr)?vr:this._anyControlsHaveStatus(En)?En:ir}_anyControlsHaveStatus(H){return this._anyControls(O=>O.status===H)}_anyControlsDirty(){return this._anyControls(H=>H.dirty)}_anyControlsTouched(){return this._anyControls(H=>H.touched)}_updatePristine(H={}){this.pristine=!this._anyControlsDirty(),this._parent&&!H.onlySelf&&this._parent._updatePristine(H)}_updateTouched(H={}){this.touched=this._anyControlsTouched(),this._parent&&!H.onlySelf&&this._parent._updateTouched(H)}_isBoxedValue(H){return"object"==typeof H&&null!==H&&2===Object.keys(H).length&&"value"in H&&"disabled"in H}_registerOnCollectionChange(H){this._onCollectionChange=H}_setUpdateStrategy(H){ln(H)&&null!=H.updateOn&&(this._updateOn=H.updateOn)}_parentMarkedDirty(H){return!H&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class cn extends Mr{constructor(H=null,O,ue){super(jt(O),sr(ue,O)),this._onChange=[],this._applyFormState(H),this._setUpdateStrategy(O),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(H,O={}){this.value=this._pendingValue=H,this._onChange.length&&!1!==O.emitModelToViewChange&&this._onChange.forEach(ue=>ue(this.value,!1!==O.emitViewToModelChange)),this.updateValueAndValidity(O)}patchValue(H,O={}){this.setValue(H,O)}reset(H=null,O={}){this._applyFormState(H),this.markAsPristine(O),this.markAsUntouched(O),this.setValue(this.value,O),this._pendingChange=!1}_updateValue(){}_anyControls(H){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(H){this._onChange.push(H)}_unregisterOnChange(H){Un(this._onChange,H)}registerOnDisabledChange(H){this._onDisabledChange.push(H)}_unregisterOnDisabledChange(H){Un(this._onDisabledChange,H)}_forEachChild(H){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(H){this._isBoxedValue(H)?(this.value=this._pendingValue=H.value,H.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=H}}class Mn extends Mr{constructor(H,O,ue){super(jt(O),sr(ue,O)),this.controls=H,this._initObservables(),this._setUpdateStrategy(O),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(H,O){return this.controls[H]?this.controls[H]:(this.controls[H]=O,O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange),O)}addControl(H,O,ue={}){this.registerControl(H,O),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}removeControl(H,O={}){this.controls[H]&&this.controls[H]._registerOnCollectionChange(()=>{}),delete this.controls[H],this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}setControl(H,O,ue={}){this.controls[H]&&this.controls[H]._registerOnCollectionChange(()=>{}),delete this.controls[H],O&&this.registerControl(H,O),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}contains(H){return this.controls.hasOwnProperty(H)&&this.controls[H].enabled}setValue(H,O={}){this._checkAllValuesPresent(H),Object.keys(H).forEach(ue=>{this._throwIfControlMissing(ue),this.controls[ue].setValue(H[ue],{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O)}patchValue(H,O={}){null!=H&&(Object.keys(H).forEach(ue=>{this.controls[ue]&&this.controls[ue].patchValue(H[ue],{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O))}reset(H={},O={}){this._forEachChild((ue,pt)=>{ue.reset(H[pt],{onlySelf:!0,emitEvent:O.emitEvent})}),this._updatePristine(O),this._updateTouched(O),this.updateValueAndValidity(O)}getRawValue(){return this._reduceChildren({},(H,O,ue)=>(H[ue]=O instanceof cn?O.value:O.getRawValue(),H))}_syncPendingControls(){let H=this._reduceChildren(!1,(O,ue)=>!!ue._syncPendingControls()||O);return H&&this.updateValueAndValidity({onlySelf:!0}),H}_throwIfControlMissing(H){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[H])throw new Error(`Cannot find form control with name: ${H}.`)}_forEachChild(H){Object.keys(this.controls).forEach(O=>{const ue=this.controls[O];ue&&H(ue,O)})}_setUpControls(){this._forEachChild(H=>{H.setParent(this),H._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(H){for(const O of Object.keys(this.controls)){const ue=this.controls[O];if(this.contains(O)&&H(ue))return!0}return!1}_reduceValue(){return this._reduceChildren({},(H,O,ue)=>((O.enabled||this.disabled)&&(H[ue]=O.value),H))}_reduceChildren(H,O){let ue=H;return this._forEachChild((pt,pn)=>{ue=O(ue,pt,pn)}),ue}_allControlsDisabled(){for(const H of Object.keys(this.controls))if(this.controls[H].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(H){this._forEachChild((O,ue)=>{if(void 0===H[ue])throw new Error(`Must supply a value for form control with name: '${ue}'.`)})}}class mr extends Mr{constructor(H,O,ue){super(jt(O),sr(ue,O)),this.controls=H,this._initObservables(),this._setUpdateStrategy(O),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(H){return this.controls[H]}push(H,O={}){this.controls.push(H),this._registerControl(H),this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}insert(H,O,ue={}){this.controls.splice(H,0,O),this._registerControl(O),this.updateValueAndValidity({emitEvent:ue.emitEvent})}removeAt(H,O={}){this.controls[H]&&this.controls[H]._registerOnCollectionChange(()=>{}),this.controls.splice(H,1),this.updateValueAndValidity({emitEvent:O.emitEvent})}setControl(H,O,ue={}){this.controls[H]&&this.controls[H]._registerOnCollectionChange(()=>{}),this.controls.splice(H,1),O&&(this.controls.splice(H,0,O),this._registerControl(O)),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(H,O={}){this._checkAllValuesPresent(H),H.forEach((ue,pt)=>{this._throwIfControlMissing(pt),this.at(pt).setValue(ue,{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O)}patchValue(H,O={}){null!=H&&(H.forEach((ue,pt)=>{this.at(pt)&&this.at(pt).patchValue(ue,{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O))}reset(H=[],O={}){this._forEachChild((ue,pt)=>{ue.reset(H[pt],{onlySelf:!0,emitEvent:O.emitEvent})}),this._updatePristine(O),this._updateTouched(O),this.updateValueAndValidity(O)}getRawValue(){return this.controls.map(H=>H instanceof cn?H.value:H.getRawValue())}clear(H={}){this.controls.length<1||(this._forEachChild(O=>O._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:H.emitEvent}))}_syncPendingControls(){let H=this.controls.reduce((O,ue)=>!!ue._syncPendingControls()||O,!1);return H&&this.updateValueAndValidity({onlySelf:!0}),H}_throwIfControlMissing(H){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(H))throw new Error(`Cannot find form control at index ${H}`)}_forEachChild(H){this.controls.forEach((O,ue)=>{H(O,ue)})}_updateValue(){this.value=this.controls.filter(H=>H.enabled||this.disabled).map(H=>H.value)}_anyControls(H){return this.controls.some(O=>O.enabled&&H(O))}_setUpControls(){this._forEachChild(H=>this._registerControl(H))}_checkAllValuesPresent(H){this._forEachChild((O,ue)=>{if(void 0===H[ue])throw new Error(`Must supply a value for form control at index: ${ue}.`)})}_allControlsDisabled(){for(const H of this.controls)if(H.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(H){H.setParent(this),H._registerOnCollectionChange(this._onCollectionChange)}}let W=(()=>{class G{}return G.\u0275fac=function(O){return new(O||G)},G.\u0275dir=_.lG2({type:G,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),G})(),Ct=(()=>{class G{}return G.\u0275fac=function(O){return new(O||G)},G.\u0275mod=_.oAB({type:G}),G.\u0275inj=_.cJS({}),G})();const Wn=new _.OlP("NgModelWithFormControlWarning"),Gi={provide:an,useExisting:(0,_.Gpc)(()=>di)};let di=(()=>{class G extends an{constructor(O,ue){super(),this.validators=O,this.asyncValidators=ue,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _.vpe,this._setValidators(O),this._setAsyncValidators(ue)}ngOnChanges(O){this._checkFormPresent(),O.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Lt(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(O){const ue=this.form.get(O.path);return fr(ue,O),ue.updateValueAndValidity({emitEvent:!1}),this.directives.push(O),ue}getControl(O){return this.form.get(O.path)}removeControl(O){li(O.control||null,O,!1),Un(this.directives,O)}addFormGroup(O){this._setUpFormContainer(O)}removeFormGroup(O){this._cleanUpFormContainer(O)}getFormGroup(O){return this.form.get(O.path)}addFormArray(O){this._setUpFormContainer(O)}removeFormArray(O){this._cleanUpFormContainer(O)}getFormArray(O){return this.form.get(O.path)}updateModel(O,ue){this.form.get(O.path).setValue(ue)}onSubmit(O){return this.submitted=!0,function(G,H){G._syncPendingControls(),H.forEach(O=>{const ue=O.control;"submit"===ue.updateOn&&ue._pendingChange&&(O.viewToModelUpdate(ue._pendingValue),ue._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(O),!1}onReset(){this.resetForm()}resetForm(O){this.form.reset(O),this.submitted=!1}_updateDomValue(){this.directives.forEach(O=>{const ue=O.control,pt=this.form.get(O.path);ue!==pt&&(li(ue||null,O),pt instanceof cn&&(fr(pt,O),O.control=pt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(O){const ue=this.form.get(O.path);(function(G,H){mn(G,H)})(ue,O),ue.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(O){if(this.form){const ue=this.form.get(O.path);ue&&function(G,H){return Lt(G,H)}(ue,O)&&ue.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){mn(this.form,this),this._oldForm&&Lt(this._oldForm,this)}_checkFormPresent(){}}return G.\u0275fac=function(O){return new(O||G)(_.Y36(He,10),_.Y36(gt,10))},G.\u0275dir=_.lG2({type:G,selectors:[["","formGroup",""]],hostBindings:function(O,ue){1&O&&_.NdJ("submit",function(pn){return ue.onSubmit(pn)})("reset",function(){return ue.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_._Bn([Gi]),_.qOj,_.TTD]}),G})();const ss={provide:jn,useExisting:(0,_.Gpc)(()=>ms)};let ms=(()=>{class G extends jn{constructor(O,ue,pt,pn,Gn){super(),this._ngModelWarningConfig=Gn,this._added=!1,this.update=new _.vpe,this._ngModelWarningSent=!1,this._parent=O,this._setValidators(ue),this._setAsyncValidators(pt),this.valueAccessor=function(G,H){if(!H)return null;let O,ue,pt;return Array.isArray(H),H.forEach(pn=>{pn.constructor===Ye?O=pn:function(G){return Object.getPrototypeOf(G.constructor)===ae}(pn)?ue=pn:pt=pn}),pt||ue||O||null}(0,pn)}set isDisabled(O){}ngOnChanges(O){this._added||this._setUpControl(),function(G,H){if(!G.hasOwnProperty("model"))return!1;const O=G.model;return!!O.isFirstChange()||!Object.is(H,O.currentValue)}(O,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(O){this.viewModel=O,this.update.emit(O)}get path(){return function(G,H){return[...H.path,G]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return G.\u0275fac=function(O){return new(O||G)(_.Y36(an,13),_.Y36(He,10),_.Y36(gt,10),_.Y36(Ne,10),_.Y36(Wn,8))},G.\u0275dir=_.lG2({type:G,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[_._Bn([ss]),_.qOj,_.TTD]}),G._ngModelWarningSentOnce=!1,G})(),fe=(()=>{class G{}return G.\u0275fac=function(O){return new(O||G)},G.\u0275mod=_.oAB({type:G}),G.\u0275inj=_.cJS({imports:[[Ct]]}),G})(),K=(()=>{class G{}return G.\u0275fac=function(O){return new(O||G)},G.\u0275mod=_.oAB({type:G}),G.\u0275inj=_.cJS({imports:[fe]}),G})(),ye=(()=>{class G{static withConfig(O){return{ngModule:G,providers:[{provide:Wn,useValue:O.warnOnNgModelWithFormControl}]}}}return G.\u0275fac=function(O){return new(O||G)},G.\u0275mod=_.oAB({type:G}),G.\u0275inj=_.cJS({imports:[fe]}),G})(),Dt=(()=>{class G{group(O,ue=null){const pt=this._reduceControls(O);let ei,pn=null,Gn=null;return null!=ue&&(function(G){return void 0!==G.asyncValidators||void 0!==G.validators||void 0!==G.updateOn}(ue)?(pn=null!=ue.validators?ue.validators:null,Gn=null!=ue.asyncValidators?ue.asyncValidators:null,ei=null!=ue.updateOn?ue.updateOn:void 0):(pn=null!=ue.validator?ue.validator:null,Gn=null!=ue.asyncValidator?ue.asyncValidator:null)),new Mn(pt,{asyncValidators:Gn,updateOn:ei,validators:pn})}control(O,ue,pt){return new cn(O,ue,pt)}array(O,ue,pt){const pn=O.map(Gn=>this._createControl(Gn));return new mr(pn,ue,pt)}_reduceControls(O){const ue={};return Object.keys(O).forEach(pt=>{ue[pt]=this._createControl(O[pt])}),ue}_createControl(O){return O instanceof cn||O instanceof Mn||O instanceof mr?O:Array.isArray(O)?this.control(O[0],O.length>1?O[1]:null,O.length>2?O[2]:null):this.control(O)}}return G.\u0275fac=function(O){return new(O||G)},G.\u0275prov=(0,_.Yz7)({factory:function(){return new G},token:G,providedIn:ye}),G})()},5496:(Xt,it,L)=>{"use strict";L.d(it,{gz:()=>fn,y6:()=>vi,OD:()=>tr,eC:()=>gn,wm:()=>ti,wN:()=>ht,F0:()=>_n,rH:()=>Zn,Bz:()=>Gr,Hx:()=>ln});var _=L(8583),A=L(3018),re=L(4869),Me=L(9796),ce=L(7393);class _e extends ce.L{notifyNext(x,S,B,J,Q){this.destination.next(S)}notifyError(x,S){this.destination.error(x)}notifyComplete(x){this.destination.complete()}}class ne extends ce.L{constructor(x,S,B){super(),this.parent=x,this.outerValue=S,this.outerIndex=B,this.index=0}_next(x){this.parent.notifyNext(this.outerValue,x,this.outerIndex,this.index++,this)}_error(x){this.parent.notifyError(x,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var V=L(7444),Ie=L(8891);function ie(F,x,S,B,J=new ne(F,S,B)){if(!J.closed)return x instanceof Ie.y?x.subscribe(J):(0,V.s)(x)(J)}var ae=L(6693);const Ne={};class Ee{constructor(x){this.resultSelector=x}call(x,S){return S.subscribe(new at(x,this.resultSelector))}}class at extends _e{constructor(x,S){super(x),this.resultSelector=S,this.active=0,this.values=[],this.observables=[]}_next(x){this.values.push(Ne),this.observables.push(x)}_complete(){const x=this.observables,S=x.length;if(0===S)this.destination.complete();else{this.active=S,this.toRespond=S;for(let B=0;B<S;B++)this.add(ie(this,x[B],void 0,B))}}notifyComplete(x){0==(this.active-=1)&&this.destination.complete()}notifyNext(x,S,B){const J=this.values,Be=this.toRespond?J[B]===Ne?--this.toRespond:this.toRespond:0;J[B]=S,0===Be&&(this.resultSelector?this._tryResultSelector(J):this.destination.next(J.slice()))}_tryResultSelector(x){let S;try{S=this.resultSelector.apply(this,x)}catch(B){return void this.destination.error(B)}this.destination.next(S)}}var xe=L(4402),Oe=L(9193);function Ye(F){return new Ie.y(x=>{let S;try{S=F()}catch(J){return void x.error(J)}return(S?(0,xe.D)(S):(0,Oe.c)()).subscribe(x)})}var Ke=L(5917),$e=L(6215),He=L(3410),gt=L(8071),ct=L(2441),bt=L(9765),E=L(5345);function We(F){return function(S){const B=new _t(F),J=S.lift(B);return B.caught=J}}class _t{constructor(x){this.selector=x}call(x,S){return S.subscribe(new Te(x,this.selector,this.caught))}}class Te extends E.Ds{constructor(x,S,B){super(x),this.selector=S,this.caught=B}error(x){if(!this.isStopped){let S;try{S=this.selector(x,this.caught)}catch(Q){return void super.error(Q)}this._unsubscribeAndRecycle();const B=new E.IY(this);this.add(B);const J=(0,E.ft)(S,B);J!==B&&this.add(J)}}}var he=L(9773);function we(F,x){return(0,he.zg)(F,x,1)}var qe=L(5435),Ve=L(7108);function ot(F){return function(S){return 0===F?(0,Oe.c)():S.lift(new je(F))}}class je{constructor(x){if(this.total=x,this.total<0)throw new Ve.W}call(x,S){return S.subscribe(new Ae(x,this.total))}}class Ae extends ce.L{constructor(x,S){super(x),this.total=S,this.ring=new Array,this.count=0}_next(x){const S=this.ring,B=this.total,J=this.count++;S.length<B?S.push(x):S[J%B]=x}_complete(){const x=this.destination;let S=this.count;if(S>0){const B=this.count>=this.total?this.total:this.count,J=this.ring;for(let Q=0;Q<B;Q++){const Be=S++%B;x.next(J[Be])}}x.complete()}}var ze=L(4635),nt=L(5242),st=L(4487),Ot=L(5319);class sn{constructor(x){this.callback=x}call(x,S){return S.subscribe(new Ft(x,this.callback))}}class Ft extends ce.L{constructor(x,S){super(x),this.add(new Ot.w(S))}}var Cn=L(8002),rr=L(3190),Rn=L(5257),hn=L(9761),dr=L(2145),br=L(8049),Qn=L(3342),wt=L(1307),an=L(3282);class jn{constructor(x,S){this.id=x,this.url=S}}class tr extends jn{constructor(x,S,B="imperative",J=null){super(x,S),this.navigationTrigger=B,this.restoredState=J}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class On extends jn{constructor(x,S,B){super(x,S),this.urlAfterRedirects=B}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Nn extends jn{constructor(x,S,B){super(x,S),this.reason=B}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class si extends jn{constructor(x,S,B){super(x,S),this.error=B}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Rr extends jn{constructor(x,S,B,J){super(x,S),this.urlAfterRedirects=B,this.state=J}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vn extends jn{constructor(x,S,B,J){super(x,S),this.urlAfterRedirects=B,this.state=J}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fr extends jn{constructor(x,S,B,J,Q){super(x,S),this.urlAfterRedirects=B,this.state=J,this.shouldActivate=Q}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Yr extends jn{constructor(x,S,B,J){super(x,S),this.urlAfterRedirects=B,this.state=J}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Br extends jn{constructor(x,S,B,J){super(x,S),this.urlAfterRedirects=B,this.state=J}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class er{constructor(x){this.route=x}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Kt{constructor(x){this.route=x}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ft{constructor(x){this.snapshot=x}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kn{constructor(x){this.snapshot=x}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tr{constructor(x){this.snapshot=x}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fn{constructor(x){this.snapshot=x}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bn{constructor(x,S,B){this.routerEvent=x,this.position=S,this.anchor=B}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const gn="primary";class hr{constructor(x){this.params=x||{}}has(x){return Object.prototype.hasOwnProperty.call(this.params,x)}get(x){if(this.has(x)){const S=this.params[x];return Array.isArray(S)?S[0]:S}return null}getAll(x){if(this.has(x)){const S=this.params[x];return Array.isArray(S)?S:[S]}return[]}get keys(){return Object.keys(this.params)}}function fr(F){return new hr(F)}const li="ngNavigationCancelingError";function Dn(F){const x=Error("NavigationCancelingError: "+F);return x[li]=!0,x}function mn(F,x,S){const B=S.path.split("/");if(B.length>F.length||"full"===S.pathMatch&&(x.hasChildren()||B.length<F.length))return null;const J={};for(let Q=0;Q<B.length;Q++){const Be=B[Q],rt=F[Q];if(Be.startsWith(":"))J[Be.substring(1)]=rt;else if(Be!==rt.path)return null}return{consumed:F.slice(0,B.length),posParams:J}}function Gt(F,x){const S=F?Object.keys(F):void 0,B=x?Object.keys(x):void 0;if(!S||!B||S.length!=B.length)return!1;let J;for(let Q=0;Q<S.length;Q++)if(J=S[Q],!yn(F[J],x[J]))return!1;return!0}function yn(F,x){if(Array.isArray(F)&&Array.isArray(x)){if(F.length!==x.length)return!1;const S=[...F].sort(),B=[...x].sort();return S.every((J,Q)=>B[Q]===J)}return F===x}function rn(F){return Array.prototype.concat.apply([],F)}function un(F){return F.length>0?F[F.length-1]:null}function ke(F,x){for(const S in F)F.hasOwnProperty(S)&&x(F[S],S)}function et(F){return(0,A.CqO)(F)?F:(0,A.QGY)(F)?(0,xe.D)(Promise.resolve(F)):(0,Ke.of)(F)}const ve={exact:function Un(F,x,S){if(!sr(F.segments,x.segments)||!vr(F.segments,x.segments,S)||F.numberOfChildren!==x.numberOfChildren)return!1;for(const B in x.children)if(!F.children[B]||!Un(F.children[B],x.children[B],S))return!1;return!0},subset:ir},Pe={exact:function(F,x){return Gt(F,x)},subset:function(F,x){return Object.keys(x).length<=Object.keys(F).length&&Object.keys(x).every(S=>yn(F[S],x[S]))},ignored:()=>!0};function vt(F,x,S){return ve[S.paths](F.root,x.root,S.matrixParams)&&Pe[S.queryParams](F.queryParams,x.queryParams)&&!("exact"===S.fragment&&F.fragment!==x.fragment)}function ir(F,x,S){return En(F,x,x.segments,S)}function En(F,x,S,B){if(F.segments.length>S.length){const J=F.segments.slice(0,S.length);return!(!sr(J,S)||x.hasChildren()||!vr(J,S,B))}if(F.segments.length===S.length){if(!sr(F.segments,S)||!vr(F.segments,S,B))return!1;for(const J in x.children)if(!F.children[J]||!ir(F.children[J],x.children[J],B))return!1;return!0}{const J=S.slice(0,F.segments.length),Q=S.slice(F.segments.length);return!!(sr(F.segments,J)&&vr(F.segments,J,B)&&F.children[gn])&&En(F.children[gn],x,Q,B)}}function vr(F,x,S){return x.every((B,J)=>Pe[S](F[J].parameters,B.parameters))}class Lr{constructor(x,S,B){this.root=x,this.queryParams=S,this.fragment=B}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fr(this.queryParams)),this._queryParamMap}toString(){return cn.serialize(this)}}class At{constructor(x,S){this.segments=x,this.children=S,this.parent=null,ke(S,(B,J)=>B.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Mn(this)}}class jt{constructor(x,S){this.path=x,this.parameters=S}get parameterMap(){return this._parameterMap||(this._parameterMap=fr(this.parameters)),this._parameterMap}toString(){return rs(this)}}function sr(F,x){return F.length===x.length&&F.every((S,B)=>S.path===x[B].path)}class ln{}class Mr{parse(x){const S=new W(x);return new Lr(S.parseRootSegment(),S.parseQueryParams(),S.parseFragment())}serialize(x){const S=`/${mr(x.root,!0)}`,B=function(F){const x=Object.keys(F).map(S=>{const B=F[S];return Array.isArray(B)?B.map(J=>`${Wi(S)}=${Wi(J)}`).join("&"):`${Wi(S)}=${Wi(B)}`}).filter(S=>!!S);return x.length?`?${x.join("&")}`:""}(x.queryParams);var F;return`${S}${B}${"string"==typeof x.fragment?`#${F=x.fragment,encodeURI(F)}`:""}`}}const cn=new Mr;function Mn(F){return F.segments.map(x=>rs(x)).join("/")}function mr(F,x){if(!F.hasChildren())return Mn(F);if(x){const S=F.children[gn]?mr(F.children[gn],!1):"",B=[];return ke(F.children,(J,Q)=>{Q!==gn&&B.push(`${Q}:${mr(J,!1)}`)}),B.length>0?`${S}(${B.join("//")})`:S}{const S=function(F,x){let S=[];return ke(F.children,(B,J)=>{J===gn&&(S=S.concat(x(B,J)))}),ke(F.children,(B,J)=>{J!==gn&&(S=S.concat(x(B,J)))}),S}(F,(B,J)=>J===gn?[mr(F.children[gn],!1)]:[`${J}:${mr(B,!1)}`]);return 1===Object.keys(F.children).length&&null!=F.children[gn]?`${Mn(F)}/${S[0]}`:`${Mn(F)}/(${S.join("//")})`}}function Sr(F){return encodeURIComponent(F).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wi(F){return Sr(F).replace(/%3B/gi,";")}function Or(F){return Sr(F).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dr(F){return decodeURIComponent(F)}function Vr(F){return Dr(F.replace(/\+/g,"%20"))}function rs(F){return`${Or(F.path)}${function(F){return Object.keys(F).map(x=>`;${Or(x)}=${Or(F[x])}`).join("")}(F.parameters)}`}const Kr=/^[^\/()?;=#]+/;function ki(F){const x=F.match(Kr);return x?x[0]:""}const Di=/^[^=?&#]+/,ut=/^[^?&#]+/;class W{constructor(x){this.url=x,this.remaining=x}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new At([],{}):new At([],this.parseChildren())}parseQueryParams(){const x={};if(this.consumeOptional("?"))do{this.parseQueryParam(x)}while(this.consumeOptional("&"));return x}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const x=[];for(this.peekStartsWith("(")||x.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),x.push(this.parseSegment());let S={};this.peekStartsWith("/(")&&(this.capture("/"),S=this.parseParens(!0));let B={};return this.peekStartsWith("(")&&(B=this.parseParens(!1)),(x.length>0||Object.keys(S).length>0)&&(B[gn]=new At(x,S)),B}parseSegment(){const x=ki(this.remaining);if(""===x&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(x),new jt(Dr(x),this.parseMatrixParams())}parseMatrixParams(){const x={};for(;this.consumeOptional(";");)this.parseParam(x);return x}parseParam(x){const S=ki(this.remaining);if(!S)return;this.capture(S);let B="";if(this.consumeOptional("=")){const J=ki(this.remaining);J&&(B=J,this.capture(B))}x[Dr(S)]=Dr(B)}parseQueryParam(x){const S=function(F){const x=F.match(Di);return x?x[0]:""}(this.remaining);if(!S)return;this.capture(S);let B="";if(this.consumeOptional("=")){const Be=function(F){const x=F.match(ut);return x?x[0]:""}(this.remaining);Be&&(B=Be,this.capture(B))}const J=Vr(S),Q=Vr(B);if(x.hasOwnProperty(J)){let Be=x[J];Array.isArray(Be)||(Be=[Be],x[J]=Be),Be.push(Q)}else x[J]=Q}parseParens(x){const S={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const B=ki(this.remaining),J=this.remaining[B.length];if("/"!==J&&")"!==J&&";"!==J)throw new Error(`Cannot parse url '${this.url}'`);let Q;B.indexOf(":")>-1?(Q=B.substr(0,B.indexOf(":")),this.capture(Q),this.capture(":")):x&&(Q=gn);const Be=this.parseChildren();S[Q]=1===Object.keys(Be).length?Be[gn]:new At([],Be),this.consumeOptional("//")}return S}peekStartsWith(x){return this.remaining.startsWith(x)}consumeOptional(x){return!!this.peekStartsWith(x)&&(this.remaining=this.remaining.substring(x.length),!0)}capture(x){if(!this.consumeOptional(x))throw new Error(`Expected "${x}".`)}}class oe{constructor(x){this._root=x}get root(){return this._root.value}parent(x){const S=this.pathFromRoot(x);return S.length>1?S[S.length-2]:null}children(x){const S=be(x,this._root);return S?S.children.map(B=>B.value):[]}firstChild(x){const S=be(x,this._root);return S&&S.children.length>0?S.children[0].value:null}siblings(x){const S=Qe(x,this._root);return S.length<2?[]:S[S.length-2].children.map(J=>J.value).filter(J=>J!==x)}pathFromRoot(x){return Qe(x,this._root).map(S=>S.value)}}function be(F,x){if(F===x.value)return x;for(const S of x.children){const B=be(F,S);if(B)return B}return null}function Qe(F,x){if(F===x.value)return[x];for(const S of x.children){const B=Qe(F,S);if(B.length)return B.unshift(x),B}return[]}class Xe{constructor(x,S){this.value=x,this.children=S}toString(){return`TreeNode(${this.value})`}}function Ct(F){const x={};return F&&F.children.forEach(S=>x[S.value.outlet]=S),x}class xt extends oe{constructor(x,S){super(x),this.snapshot=S,di(this,x)}toString(){return this.snapshot.toString()}}function Rt(F,x){const S=function(F,x){const Be=new ur([],{},{},"",{},gn,x,null,F.root,-1,{});return new Gi("",new Xe(Be,[]))}(F,x),B=new $e.X([new jt("",{})]),J=new $e.X({}),Q=new $e.X({}),Be=new $e.X({}),rt=new $e.X(""),Bt=new fn(B,J,Be,rt,Q,gn,x,S.root);return Bt.snapshot=S.root,new xt(new Xe(Bt,[]),S)}class fn{constructor(x,S,B,J,Q,Be,rt,Bt){this.url=x,this.params=S,this.queryParams=B,this.fragment=J,this.data=Q,this.outlet=Be,this.component=rt,this._futureSnapshot=Bt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Cn.U)(x=>fr(x)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Cn.U)(x=>fr(x)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Wn(F,x="emptyOnly"){const S=F.pathFromRoot;let B=0;if("always"!==x)for(B=S.length-1;B>=1;){const J=S[B],Q=S[B-1];if(J.routeConfig&&""===J.routeConfig.path)B--;else{if(Q.component)break;B--}}return function(F){return F.reduce((x,S)=>({params:Object.assign(Object.assign({},x.params),S.params),data:Object.assign(Object.assign({},x.data),S.data),resolve:Object.assign(Object.assign({},x.resolve),S._resolvedData)}),{params:{},data:{},resolve:{}})}(S.slice(B))}class ur{constructor(x,S,B,J,Q,Be,rt,Bt,Pn,Ar,Yn){this.url=x,this.params=S,this.queryParams=B,this.fragment=J,this.data=Q,this.outlet=Be,this.component=rt,this.routeConfig=Bt,this._urlSegment=Pn,this._lastPathIndex=Ar,this._resolve=Yn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=fr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(B=>B.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Gi extends oe{constructor(x,S){super(S),this.url=x,di(this,S)}toString(){return bi(this._root)}}function di(F,x){x.value._routerState=F,x.children.forEach(S=>di(F,S))}function bi(F){const x=F.children.length>0?` { ${F.children.map(bi).join(", ")} } `:"";return`${F.value}${x}`}function _i(F){if(F.snapshot){const x=F.snapshot,S=F._futureSnapshot;F.snapshot=S,Gt(x.queryParams,S.queryParams)||F.queryParams.next(S.queryParams),x.fragment!==S.fragment&&F.fragment.next(S.fragment),Gt(x.params,S.params)||F.params.next(S.params),function(F,x){if(F.length!==x.length)return!1;for(let S=0;S<F.length;++S)if(!Gt(F[S],x[S]))return!1;return!0}(x.url,S.url)||F.url.next(S.url),Gt(x.data,S.data)||F.data.next(S.data)}else F.snapshot=F._futureSnapshot,F.data.next(F._futureSnapshot.data)}function ws(F,x){const S=Gt(F.params,x.params)&&function(F,x){return sr(F,x)&&F.every((S,B)=>Gt(S.parameters,x[B].parameters))}(F.url,x.url);return S&&!(!F.parent!=!x.parent)&&(!F.parent||ws(F.parent,x.parent))}function is(F,x,S){if(S&&F.shouldReuseRoute(x.value,S.value.snapshot)){const B=S.value;B._futureSnapshot=x.value;const J=function(F,x,S){return x.children.map(B=>{for(const J of S.children)if(F.shouldReuseRoute(B.value,J.value.snapshot))return is(F,B,J);return is(F,B)})}(F,x,S);return new Xe(B,J)}{if(F.shouldAttach(x.value)){const Q=F.retrieve(x.value);if(null!==Q){const Be=Q.route;return ss(x,Be),Be}}const B=function(F){return new fn(new $e.X(F.url),new $e.X(F.params),new $e.X(F.queryParams),new $e.X(F.fragment),new $e.X(F.data),F.outlet,F.component,F)}(x.value),J=x.children.map(Q=>is(F,Q));return new Xe(B,J)}}function ss(F,x){if(F.value.routeConfig!==x.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(F.children.length!==x.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");x.value._futureSnapshot=F.value;for(let S=0;S<F.children.length;++S)ss(F.children[S],x.children[S])}function Ao(F){return"object"==typeof F&&null!=F&&!F.outlets&&!F.segmentPath}function ho(F){return"object"==typeof F&&null!=F&&F.outlets}function xo(F,x,S,B,J){let Q={};return B&&ke(B,(Be,rt)=>{Q[rt]=Array.isArray(Be)?Be.map(Bt=>`${Bt}`):`${Be}`}),new Lr(S.root===F?x:pa(S.root,F,x),Q,J)}function pa(F,x,S){const B={};return ke(F.children,(J,Q)=>{B[Q]=J===x?S:pa(J,x,S)}),new At(F.segments,B)}class Ts{constructor(x,S,B){if(this.isAbsolute=x,this.numberOfDoubleDots=S,this.commands=B,x&&B.length>0&&Ao(B[0]))throw new Error("Root segment cannot have matrix parameters");const J=B.find(ho);if(J&&J!==un(B))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class fo{constructor(x,S,B){this.segmentGroup=x,this.processChildren=S,this.index=B}}function os(F,x,S){if(F||(F=new At([],{})),0===F.segments.length&&F.hasChildren())return Fs(F,x,S);const B=function(F,x,S){let B=0,J=x;const Q={match:!1,pathIndex:0,commandIndex:0};for(;J<F.segments.length;){if(B>=S.length)return Q;const Be=F.segments[J],rt=S[B];if(ho(rt))break;const Bt=`${rt}`,Pn=B<S.length-1?S[B+1]:null;if(J>0&&void 0===Bt)break;if(Bt&&Pn&&"object"==typeof Pn&&void 0===Pn.outlets){if(!as(Bt,Pn,Be))return Q;B+=2}else{if(!as(Bt,{},Be))return Q;B++}J++}return{match:!0,pathIndex:J,commandIndex:B}}(F,x,S),J=S.slice(B.commandIndex);if(B.match&&B.pathIndex<F.segments.length){const Q=new At(F.segments.slice(0,B.pathIndex),{});return Q.children[gn]=new At(F.segments.slice(B.pathIndex),F.children),Fs(Q,0,J)}return B.match&&0===J.length?new At(F.segments,{}):B.match&&!F.hasChildren()?Ls(F,x,S):B.match?Fs(F,0,J):Ls(F,x,S)}function Fs(F,x,S){if(0===S.length)return new At(F.segments,{});{const B=function(F){return ho(F[0])?F[0].outlets:{[gn]:F}}(S),J={};return ke(B,(Q,Be)=>{"string"==typeof Q&&(Q=[Q]),null!==Q&&(J[Be]=os(F.children[Be],x,Q))}),ke(F.children,(Q,Be)=>{void 0===B[Be]&&(J[Be]=Q)}),new At(F.segments,J)}}function Ls(F,x,S){const B=F.segments.slice(0,x);let J=0;for(;J<S.length;){const Q=S[J];if(ho(Q)){const Bt=ji(Q.outlets);return new At(B,Bt)}if(0===J&&Ao(S[0])){B.push(new jt(F.segments[x].path,ga(S[0]))),J++;continue}const Be=ho(Q)?Q.outlets[gn]:`${Q}`,rt=J<S.length-1?S[J+1]:null;Be&&rt&&Ao(rt)?(B.push(new jt(Be,ga(rt))),J+=2):(B.push(new jt(Be,{})),J++)}return new At(B,{})}function ji(F){const x={};return ke(F,(S,B)=>{"string"==typeof S&&(S=[S]),null!==S&&(x[B]=Ls(new At([],{}),0,S))}),x}function ga(F){const x={};return ke(F,(S,B)=>x[B]=`${S}`),x}function as(F,x,S){return F==S.path&&Gt(x,S.parameters)}class po{constructor(x,S,B,J){this.routeReuseStrategy=x,this.futureState=S,this.currState=B,this.forwardEvent=J}activate(x){const S=this.futureState._root,B=this.currState?this.currState._root:null;this.deactivateChildRoutes(S,B,x),_i(this.futureState.root),this.activateChildRoutes(S,B,x)}deactivateChildRoutes(x,S,B){const J=Ct(S);x.children.forEach(Q=>{const Be=Q.value.outlet;this.deactivateRoutes(Q,J[Be],B),delete J[Be]}),ke(J,(Q,Be)=>{this.deactivateRouteAndItsChildren(Q,B)})}deactivateRoutes(x,S,B){const J=x.value,Q=S?S.value:null;if(J===Q)if(J.component){const Be=B.getContext(J.outlet);Be&&this.deactivateChildRoutes(x,S,Be.children)}else this.deactivateChildRoutes(x,S,B);else Q&&this.deactivateRouteAndItsChildren(S,B)}deactivateRouteAndItsChildren(x,S){this.routeReuseStrategy.shouldDetach(x.value.snapshot)?this.detachAndStoreRouteSubtree(x,S):this.deactivateRouteAndOutlet(x,S)}detachAndStoreRouteSubtree(x,S){const B=S.getContext(x.value.outlet);if(B&&B.outlet){const J=B.outlet.detach(),Q=B.children.onOutletDeactivated();this.routeReuseStrategy.store(x.value.snapshot,{componentRef:J,route:x,contexts:Q})}}deactivateRouteAndOutlet(x,S){const B=S.getContext(x.value.outlet),J=B&&x.value.component?B.children:S,Q=Ct(x);for(const Be of Object.keys(Q))this.deactivateRouteAndItsChildren(Q[Be],J);B&&B.outlet&&(B.outlet.deactivate(),B.children.onOutletDeactivated(),B.attachRef=null,B.resolver=null,B.route=null)}activateChildRoutes(x,S,B){const J=Ct(S);x.children.forEach(Q=>{this.activateRoutes(Q,J[Q.value.outlet],B),this.forwardEvent(new Fn(Q.value.snapshot))}),x.children.length&&this.forwardEvent(new Kn(x.value.snapshot))}activateRoutes(x,S,B){const J=x.value,Q=S?S.value:null;if(_i(J),J===Q)if(J.component){const Be=B.getOrCreateContext(J.outlet);this.activateChildRoutes(x,S,Be.children)}else this.activateChildRoutes(x,S,B);else if(J.component){const Be=B.getOrCreateContext(J.outlet);if(this.routeReuseStrategy.shouldAttach(J.snapshot)){const rt=this.routeReuseStrategy.retrieve(J.snapshot);this.routeReuseStrategy.store(J.snapshot,null),Be.children.onOutletReAttached(rt.contexts),Be.attachRef=rt.componentRef,Be.route=rt.route.value,Be.outlet&&Be.outlet.attach(rt.componentRef,rt.route.value),ys(rt.route)}else{const rt=function(F){for(let x=F.parent;x;x=x.parent){const S=x.routeConfig;if(S&&S._loadedConfig)return S._loadedConfig;if(S&&S.component)return null}return null}(J.snapshot),Bt=rt?rt.module.componentFactoryResolver:null;Be.attachRef=null,Be.route=J,Be.resolver=Bt,Be.outlet&&Be.outlet.activateWith(J,Bt),this.activateChildRoutes(x,null,Be.children)}}else this.activateChildRoutes(x,null,B)}}function ys(F){_i(F.value),F.children.forEach(ys)}class Ri{constructor(x,S){this.routes=x,this.module=S}}function Ws(F){return"function"==typeof F}function _s(F){return F instanceof Lr}const q=Symbol("INITIAL_VALUE");function fe(){return(0,rr.w)(F=>function(...F){let x,S;return(0,re.K)(F[F.length-1])&&(S=F.pop()),"function"==typeof F[F.length-1]&&(x=F.pop()),1===F.length&&(0,Me.k)(F[0])&&(F=F[0]),(0,ae.n)(F,S).lift(new Ee(x))}(F.map(x=>x.pipe((0,Rn.q)(1),(0,hn.O)(q)))).pipe((0,dr.R)((x,S)=>{let B=!1;return S.reduce((J,Q,Be)=>J!==q?J:(Q===q&&(B=!0),B||!1!==Q&&Be!==S.length-1&&!_s(Q)?J:Q),x)},q),(0,qe.h)(x=>x!==q),(0,Cn.U)(x=>_s(x)?x:!0===x),(0,Rn.q)(1)))}let K=(()=>{class F{}return F.\u0275fac=function(S){return new(S||F)},F.\u0275cmp=A.Xpm({type:F,selectors:[["ng-component"]],decls:1,vars:0,template:function(S,B){1&S&&A._UZ(0,"router-outlet")},directives:function(){return[Dl]},encapsulation:2}),F})();function ye(F,x=""){for(let S=0;S<F.length;S++){const B=F[S];Ze(B,Dt(x,B))}}function Ze(F,x){F.children&&ye(F.children,x)}function Dt(F,x){return x?F||x.path?F&&!x.path?`${F}/`:!F&&x.path?x.path:`${F}/${x.path}`:"":F}function Jt(F){const x=F.children&&F.children.map(Jt),S=x?Object.assign(Object.assign({},F),{children:x}):Object.assign({},F);return!S.component&&(x||S.loadChildren)&&S.outlet&&S.outlet!==gn&&(S.component=K),S}function G(F){return F.outlet||gn}function H(F,x){const S=F.filter(B=>G(B)===x);return S.push(...F.filter(B=>G(B)!==x)),S}const O={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function ue(F,x,S){var B;if(""===x.path)return"full"===x.pathMatch&&(F.hasChildren()||S.length>0)?Object.assign({},O):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const Q=(x.matcher||mn)(S,F,x);if(!Q)return Object.assign({},O);const Be={};ke(Q.posParams,(Bt,Pn)=>{Be[Pn]=Bt.path});const rt=Q.consumed.length>0?Object.assign(Object.assign({},Be),Q.consumed[Q.consumed.length-1].parameters):Be;return{matched:!0,consumedSegments:Q.consumed,lastChild:Q.consumed.length,parameters:rt,positionalParamSegments:null!==(B=Q.posParams)&&void 0!==B?B:{}}}function pt(F,x,S,B,J="corrected"){if(S.length>0&&function(F,x,S){return S.some(B=>Ci(F,x,B)&&G(B)!==gn)}(F,S,B)){const Be=new At(x,function(F,x,S,B){const J={};J[gn]=B,B._sourceSegment=F,B._segmentIndexShift=x.length;for(const Q of S)if(""===Q.path&&G(Q)!==gn){const Be=new At([],{});Be._sourceSegment=F,Be._segmentIndexShift=x.length,J[G(Q)]=Be}return J}(F,x,B,new At(S,F.children)));return Be._sourceSegment=F,Be._segmentIndexShift=x.length,{segmentGroup:Be,slicedSegments:[]}}if(0===S.length&&function(F,x,S){return S.some(B=>Ci(F,x,B))}(F,S,B)){const Be=new At(F.segments,function(F,x,S,B,J,Q){const Be={};for(const rt of B)if(Ci(F,S,rt)&&!J[G(rt)]){const Bt=new At([],{});Bt._sourceSegment=F,Bt._segmentIndexShift="legacy"===Q?F.segments.length:x.length,Be[G(rt)]=Bt}return Object.assign(Object.assign({},J),Be)}(F,x,S,B,F.children,J));return Be._sourceSegment=F,Be._segmentIndexShift=x.length,{segmentGroup:Be,slicedSegments:S}}const Q=new At(F.segments,F.children);return Q._sourceSegment=F,Q._segmentIndexShift=x.length,{segmentGroup:Q,slicedSegments:S}}function Ci(F,x,S){return(!(F.hasChildren()||x.length>0)||"full"!==S.pathMatch)&&""===S.path}function Pr(F,x,S,B){return!!(G(F)===B||B!==gn&&Ci(x,S,F))&&("**"===F.path||ue(x,F,S).matched)}function Hr(F,x,S){return 0===x.length&&!F.children[S]}class $s{constructor(x){this.segmentGroup=x||null}}class Xo{constructor(x){this.urlTree=x}}function Ki(F){return new Ie.y(x=>x.error(new $s(F)))}function ma(F){return new Ie.y(x=>x.error(new Xo(F)))}function ya(F){return new Ie.y(x=>x.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${F}'`)))}class Mo{constructor(x,S,B,J,Q){this.configLoader=S,this.urlSerializer=B,this.urlTree=J,this.config=Q,this.allowRedirects=!0,this.ngModule=x.get(A.h0i)}apply(){const x=pt(this.urlTree.root,[],[],this.config).segmentGroup,S=new At(x.segments,x.children);return this.expandSegmentGroup(this.ngModule,this.config,S,gn).pipe((0,Cn.U)(Q=>this.createUrlTree(Ss(Q),this.urlTree.queryParams,this.urlTree.fragment))).pipe(We(Q=>{if(Q instanceof Xo)return this.allowRedirects=!1,this.match(Q.urlTree);throw Q instanceof $s?this.noMatchError(Q):Q}))}match(x){return this.expandSegmentGroup(this.ngModule,this.config,x.root,gn).pipe((0,Cn.U)(J=>this.createUrlTree(Ss(J),x.queryParams,x.fragment))).pipe(We(J=>{throw J instanceof $s?this.noMatchError(J):J}))}noMatchError(x){return new Error(`Cannot match any routes. URL Segment: '${x.segmentGroup}'`)}createUrlTree(x,S,B){const J=x.segments.length>0?new At([],{[gn]:x}):x;return new Lr(J,S,B)}expandSegmentGroup(x,S,B,J){return 0===B.segments.length&&B.hasChildren()?this.expandChildren(x,S,B).pipe((0,Cn.U)(Q=>new At([],Q))):this.expandSegment(x,B,S,B.segments,J,!0)}expandChildren(x,S,B){const J=[];for(const Q of Object.keys(B.children))"primary"===Q?J.unshift(Q):J.push(Q);return(0,xe.D)(J).pipe(we(Q=>{const Be=B.children[Q],rt=H(S,Q);return this.expandSegmentGroup(x,rt,Be,Q).pipe((0,Cn.U)(Bt=>({segment:Bt,outlet:Q})))}),(0,dr.R)((Q,Be)=>(Q[Be.outlet]=Be.segment,Q),{}),function(F,x){const S=arguments.length>=2;return B=>B.pipe(F?(0,qe.h)((J,Q)=>F(J,Q,B)):st.y,ot(1),S?(0,nt.d)(x):(0,ze.T)(()=>new He.K))}())}expandSegment(x,S,B,J,Q,Be){return(0,xe.D)(B).pipe(we(rt=>this.expandSegmentAgainstRoute(x,S,B,rt,J,Q,Be).pipe(We(Pn=>{if(Pn instanceof $s)return(0,Ke.of)(null);throw Pn}))),(0,br.P)(rt=>!!rt),We((rt,Bt)=>{if(rt instanceof He.K||"EmptyError"===rt.name){if(Hr(S,J,Q))return(0,Ke.of)(new At([],{}));throw new $s(S)}throw rt}))}expandSegmentAgainstRoute(x,S,B,J,Q,Be,rt){return Pr(J,S,Q,Be)?void 0===J.redirectTo?this.matchSegmentAgainstRoute(x,S,J,Q,Be):rt&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(x,S,B,J,Q,Be):Ki(S):Ki(S)}expandSegmentAgainstRouteUsingRedirect(x,S,B,J,Q,Be){return"**"===J.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(x,B,J,Be):this.expandRegularSegmentAgainstRouteUsingRedirect(x,S,B,J,Q,Be)}expandWildCardWithParamsAgainstRouteUsingRedirect(x,S,B,J){const Q=this.applyRedirectCommands([],B.redirectTo,{});return B.redirectTo.startsWith("/")?ma(Q):this.lineralizeSegments(B,Q).pipe((0,he.zg)(Be=>{const rt=new At(Be,{});return this.expandSegment(x,rt,S,Be,J,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(x,S,B,J,Q,Be){const{matched:rt,consumedSegments:Bt,lastChild:Pn,positionalParamSegments:Ar}=ue(S,J,Q);if(!rt)return Ki(S);const Yn=this.applyRedirectCommands(Bt,J.redirectTo,Ar);return J.redirectTo.startsWith("/")?ma(Yn):this.lineralizeSegments(J,Yn).pipe((0,he.zg)(ii=>this.expandSegment(x,S,B,ii.concat(Q.slice(Pn)),Be,!1)))}matchSegmentAgainstRoute(x,S,B,J,Q){if("**"===B.path)return B.loadChildren?(B._loadedConfig?(0,Ke.of)(B._loadedConfig):this.configLoader.load(x.injector,B)).pipe((0,Cn.U)(ii=>(B._loadedConfig=ii,new At(J,{})))):(0,Ke.of)(new At(J,{}));const{matched:Be,consumedSegments:rt,lastChild:Bt}=ue(S,B,J);if(!Be)return Ki(S);const Pn=J.slice(Bt);return this.getChildConfig(x,B,J).pipe((0,he.zg)(Yn=>{const ii=Yn.module,qr=Yn.routes,{segmentGroup:Xs,slicedSegments:xs}=pt(S,rt,Pn,qr),js=new At(Xs.segments,Xs.children);if(0===xs.length&&js.hasChildren())return this.expandChildren(ii,qr,js).pipe((0,Cn.U)(Ko=>new At(rt,Ko)));if(0===qr.length&&0===xs.length)return(0,Ke.of)(new At(rt,{}));const xr=G(B)===Q;return this.expandSegment(ii,js,qr,xs,xr?gn:Q,!0).pipe((0,Cn.U)(zi=>new At(rt.concat(zi.segments),zi.children)))}))}getChildConfig(x,S,B){return S.children?(0,Ke.of)(new Ri(S.children,x)):S.loadChildren?void 0!==S._loadedConfig?(0,Ke.of)(S._loadedConfig):this.runCanLoadGuards(x.injector,S,B).pipe((0,he.zg)(J=>{return J?this.configLoader.load(x.injector,S).pipe((0,Cn.U)(Q=>(S._loadedConfig=Q,Q))):(F=S,new Ie.y(x=>x.error(Dn(`Cannot load children because the guard of the route "path: '${F.path}'" returned false`))));var F})):(0,Ke.of)(new Ri([],x))}runCanLoadGuards(x,S,B){const J=S.canLoad;if(!J||0===J.length)return(0,Ke.of)(!0);const Q=J.map(Be=>{const rt=x.get(Be);let Bt;if((F=rt)&&Ws(F.canLoad))Bt=rt.canLoad(S,B);else{if(!Ws(rt))throw new Error("Invalid CanLoad guard");Bt=rt(S,B)}var F;return et(Bt)});return(0,Ke.of)(Q).pipe(fe(),(0,Qn.b)(Be=>{if(!_s(Be))return;const rt=Dn(`Redirecting to "${this.urlSerializer.serialize(Be)}"`);throw rt.url=Be,rt}),(0,Cn.U)(Be=>!0===Be))}lineralizeSegments(x,S){let B=[],J=S.root;for(;;){if(B=B.concat(J.segments),0===J.numberOfChildren)return(0,Ke.of)(B);if(J.numberOfChildren>1||!J.children[gn])return ya(x.redirectTo);J=J.children[gn]}}applyRedirectCommands(x,S,B){return this.applyRedirectCreatreUrlTree(S,this.urlSerializer.parse(S),x,B)}applyRedirectCreatreUrlTree(x,S,B,J){const Q=this.createSegmentGroup(x,S.root,B,J);return new Lr(Q,this.createQueryParams(S.queryParams,this.urlTree.queryParams),S.fragment)}createQueryParams(x,S){const B={};return ke(x,(J,Q)=>{if("string"==typeof J&&J.startsWith(":")){const rt=J.substring(1);B[Q]=S[rt]}else B[Q]=J}),B}createSegmentGroup(x,S,B,J){const Q=this.createSegments(x,S.segments,B,J);let Be={};return ke(S.children,(rt,Bt)=>{Be[Bt]=this.createSegmentGroup(x,rt,B,J)}),new At(Q,Be)}createSegments(x,S,B,J){return S.map(Q=>Q.path.startsWith(":")?this.findPosParam(x,Q,J):this.findOrReturn(Q,B))}findPosParam(x,S,B){const J=B[S.path.substring(1)];if(!J)throw new Error(`Cannot redirect to '${x}'. Cannot find '${S.path}'.`);return J}findOrReturn(x,S){let B=0;for(const J of S){if(J.path===x.path)return S.splice(B),J;B++}return x}}function Ss(F){const x={};for(const B of Object.keys(F.children)){const Q=Ss(F.children[B]);(Q.segments.length>0||Q.hasChildren())&&(x[B]=Q)}return function(F){if(1===F.numberOfChildren&&F.children[gn]){const x=F.children[gn];return new At(F.segments.concat(x.segments),x.children)}return F}(new At(F.segments,x))}class Ya{constructor(x){this.path=x,this.route=this.path[this.path.length-1]}}class Gs{constructor(x,S){this.component=x,this.route=S}}function en(F,x,S){const B=F._root;return ea(B,x?x._root:null,S,[B.value])}function so(F,x,S){const B=function(F){if(!F)return null;for(let x=F.parent;x;x=x.parent){const S=x.routeConfig;if(S&&S._loadedConfig)return S._loadedConfig}return null}(x);return(B?B.module.injector:S).get(F)}function ea(F,x,S,B,J={canDeactivateChecks:[],canActivateChecks:[]}){const Q=Ct(x);return F.children.forEach(Be=>{(function(F,x,S,B,J={canDeactivateChecks:[],canActivateChecks:[]}){const Q=F.value,Be=x?x.value:null,rt=S?S.getContext(F.value.outlet):null;if(Be&&Q.routeConfig===Be.routeConfig){const Bt=function(F,x,S){if("function"==typeof S)return S(F,x);switch(S){case"pathParamsChange":return!sr(F.url,x.url);case"pathParamsOrQueryParamsChange":return!sr(F.url,x.url)||!Gt(F.queryParams,x.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ws(F,x)||!Gt(F.queryParams,x.queryParams);default:return!ws(F,x)}}(Be,Q,Q.routeConfig.runGuardsAndResolvers);Bt?J.canActivateChecks.push(new Ya(B)):(Q.data=Be.data,Q._resolvedData=Be._resolvedData),ea(F,x,Q.component?rt?rt.children:null:S,B,J),Bt&&rt&&rt.outlet&&rt.outlet.isActivated&&J.canDeactivateChecks.push(new Gs(rt.outlet.component,Be))}else Be&&qs(x,rt,J),J.canActivateChecks.push(new Ya(B)),ea(F,null,Q.component?rt?rt.children:null:S,B,J)})(Be,Q[Be.value.outlet],S,B.concat([Be.value]),J),delete Q[Be.value.outlet]}),ke(Q,(Be,rt)=>qs(Be,S.getContext(rt),J)),J}function qs(F,x,S){const B=Ct(F),J=F.value;ke(B,(Q,Be)=>{qs(Q,J.component?x?x.children.getContext(Be):null:x,S)}),S.canDeactivateChecks.push(new Gs(J.component&&x&&x.outlet&&x.outlet.isActivated?x.outlet.component:null,J))}class cs{}function As(F){return new Ie.y(x=>x.error(F))}class vo{constructor(x,S,B,J,Q,Be){this.rootComponentType=x,this.config=S,this.urlTree=B,this.url=J,this.paramsInheritanceStrategy=Q,this.relativeLinkResolution=Be}recognize(){const x=pt(this.urlTree.root,[],[],this.config.filter(Be=>void 0===Be.redirectTo),this.relativeLinkResolution).segmentGroup,S=this.processSegmentGroup(this.config,x,gn);if(null===S)return null;const B=new ur([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},gn,this.rootComponentType,null,this.urlTree.root,-1,{}),J=new Xe(B,S),Q=new Gi(this.url,J);return this.inheritParamsAndData(Q._root),Q}inheritParamsAndData(x){const S=x.value,B=Wn(S,this.paramsInheritanceStrategy);S.params=Object.freeze(B.params),S.data=Object.freeze(B.data),x.children.forEach(J=>this.inheritParamsAndData(J))}processSegmentGroup(x,S,B){return 0===S.segments.length&&S.hasChildren()?this.processChildren(x,S):this.processSegment(x,S,S.segments,B)}processChildren(x,S){const B=[];for(const Q of Object.keys(S.children)){const Be=S.children[Q],rt=H(x,Q),Bt=this.processSegmentGroup(rt,Be,Q);if(null===Bt)return null;B.push(...Bt)}const J=hi(B);return J.sort((x,S)=>x.value.outlet===gn?-1:S.value.outlet===gn?1:x.value.outlet.localeCompare(S.value.outlet)),J}processSegment(x,S,B,J){for(const Q of x){const Be=this.processSegmentAgainstRoute(Q,S,B,J);if(null!==Be)return Be}return Hr(S,B,J)?[]:null}processSegmentAgainstRoute(x,S,B,J){if(x.redirectTo||!Pr(x,S,B,J))return null;let Q,Be=[],rt=[];if("**"===x.path){const qr=B.length>0?un(B).parameters:{};Q=new ur(B,qr,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,na(x),G(x),x.component,x,Ka(S),qo(S)+B.length,Io(x))}else{const qr=ue(S,x,B);if(!qr.matched)return null;Be=qr.consumedSegments,rt=B.slice(qr.lastChild),Q=new ur(Be,qr.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,na(x),G(x),x.component,x,Ka(S),qo(S)+Be.length,Io(x))}const Bt=(F=x).children?F.children:F.loadChildren?F._loadedConfig.routes:[],{segmentGroup:Pn,slicedSegments:Ar}=pt(S,Be,rt,Bt.filter(qr=>void 0===qr.redirectTo),this.relativeLinkResolution);var F;if(0===Ar.length&&Pn.hasChildren()){const qr=this.processChildren(Bt,Pn);return null===qr?null:[new Xe(Q,qr)]}if(0===Bt.length&&0===Ar.length)return[new Xe(Q,[])];const Yn=G(x)===J,ii=this.processSegment(Bt,Pn,Ar,Yn?gn:J);return null===ii?null:[new Xe(Q,ii)]}}function ta(F){const x=F.value.routeConfig;return x&&""===x.path&&void 0===x.redirectTo}function hi(F){const x=[],S=new Set;for(const B of F){if(!ta(B)){x.push(B);continue}const J=x.find(Q=>B.value.routeConfig===Q.value.routeConfig);void 0!==J?(J.children.push(...B.children),S.add(J)):x.push(B)}for(const B of S){const J=hi(B.children);x.push(new Xe(B.value,J))}return x.filter(B=>!S.has(B))}function Ka(F){let x=F;for(;x._sourceSegment;)x=x._sourceSegment;return x}function qo(F){let x=F,S=x._segmentIndexShift?x._segmentIndexShift:0;for(;x._sourceSegment;)x=x._sourceSegment,S+=x._segmentIndexShift?x._segmentIndexShift:0;return S-1}function na(F){return F.data||{}}function Io(F){return F.resolve||{}}function pe(F){return(0,rr.w)(x=>{const S=F(x);return S?(0,xe.D)(S).pipe((0,Cn.U)(()=>x)):(0,Ke.of)(x)})}class ht{}class on extends class{shouldDetach(x){return!1}store(x,S){}shouldAttach(x){return!1}retrieve(x){return null}shouldReuseRoute(x,S){return x.routeConfig===S.routeConfig}}{}const $n=new A.OlP("ROUTES");class Ln{constructor(x,S,B,J){this.loader=x,this.compiler=S,this.onLoadStartListener=B,this.onLoadEndListener=J}load(x,S){if(S._loader$)return S._loader$;this.onLoadStartListener&&this.onLoadStartListener(S);const J=this.loadModuleFactory(S.loadChildren).pipe((0,Cn.U)(Q=>{this.onLoadEndListener&&this.onLoadEndListener(S);const Be=Q.create(x);return new Ri(rn(Be.injector.get($n,void 0,A.XFs.Self|A.XFs.Optional)).map(Jt),Be)}),We(Q=>{throw S._loader$=void 0,Q}));return S._loader$=new ct.c(J,()=>new bt.xQ).pipe((0,wt.x)()),S._loader$}loadModuleFactory(x){return"string"==typeof x?(0,xe.D)(this.loader.load(x)):et(x()).pipe((0,he.zg)(S=>S instanceof A.YKP?(0,Ke.of)(S):(0,xe.D)(this.compiler.compileModuleAsync(S))))}}class Wr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new vi,this.attachRef=null}}class vi{constructor(){this.contexts=new Map}onChildOutletCreated(x,S){const B=this.getOrCreateContext(x);B.outlet=S,this.contexts.set(x,B)}onChildOutletDestroyed(x){const S=this.getContext(x);S&&(S.outlet=null,S.attachRef=null)}onOutletDeactivated(){const x=this.contexts;return this.contexts=new Map,x}onOutletReAttached(x){this.contexts=x}getOrCreateContext(x){let S=this.getContext(x);return S||(S=new Wr,this.contexts.set(x,S)),S}getContext(x){return this.contexts.get(x)||null}}class pr{shouldProcessUrl(x){return!0}extract(x){return x}merge(x,S){return x}}function us(F){throw F}function Ys(F,x,S){return x.parse("/")}function Bn(F,x){return(0,Ke.of)(null)}const or={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ra={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let _n=(()=>{class F{constructor(S,B,J,Q,Be,rt,Bt,Pn){this.rootComponentType=S,this.urlSerializer=B,this.rootContexts=J,this.location=Q,this.config=Pn,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new bt.xQ,this.errorHandler=us,this.malformedUriErrorHandler=Ys,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Bn,afterPreactivation:Bn},this.urlHandlingStrategy=new pr,this.routeReuseStrategy=new on,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Be.get(A.h0i),this.console=Be.get(A.c2e);const ii=Be.get(A.R0b);this.isNgZoneEnabled=ii instanceof A.R0b&&A.R0b.isInAngularZone(),this.resetConfig(Pn),this.currentUrlTree=new Lr(new At([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ln(rt,Bt,qr=>this.triggerEvent(new er(qr)),qr=>this.triggerEvent(new Kt(qr))),this.routerState=Rt(this.currentUrlTree,this.rootComponentType),this.transitions=new $e.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var S;return null===(S=this.location.getState())||void 0===S?void 0:S.\u0275routerPageId}setupNavigations(S){const B=this.events;return S.pipe((0,qe.h)(J=>0!==J.id),(0,Cn.U)(J=>Object.assign(Object.assign({},J),{extractedUrl:this.urlHandlingStrategy.extract(J.rawUrl)})),(0,rr.w)(J=>{let Q=!1,Be=!1;return(0,Ke.of)(J).pipe((0,Qn.b)(rt=>{this.currentNavigation={id:rt.id,initialUrl:rt.currentRawUrl,extractedUrl:rt.extractedUrl,trigger:rt.source,extras:rt.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,rr.w)(rt=>{const Bt=this.browserUrlTree.toString(),Pn=!this.navigated||rt.extractedUrl.toString()!==Bt||Bt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Pn)&&this.urlHandlingStrategy.shouldProcessUrl(rt.rawUrl))return Nt(rt.source)&&(this.browserUrlTree=rt.extractedUrl),(0,Ke.of)(rt).pipe((0,rr.w)(Yn=>{const ii=this.transitions.getValue();return B.next(new tr(Yn.id,this.serializeUrl(Yn.extractedUrl),Yn.source,Yn.restoredState)),ii!==this.transitions.getValue()?Oe.E:Promise.resolve(Yn)}),function(F,x,S,B){return(0,rr.w)(J=>function(F,x,S,B,J){return new Mo(F,x,S,B,J).apply()}(F,x,S,J.extractedUrl,B).pipe((0,Cn.U)(Q=>Object.assign(Object.assign({},J),{urlAfterRedirects:Q}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Qn.b)(Yn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Yn.urlAfterRedirects})}),function(F,x,S,B,J){return(0,he.zg)(Q=>function(F,x,S,B,J="emptyOnly",Q="legacy"){try{const Be=new vo(F,x,S,B,J,Q).recognize();return null===Be?As(new cs):(0,Ke.of)(Be)}catch(Be){return As(Be)}}(F,x,Q.urlAfterRedirects,S(Q.urlAfterRedirects),B,J).pipe((0,Cn.U)(Be=>Object.assign(Object.assign({},Q),{targetSnapshot:Be}))))}(this.rootComponentType,this.config,Yn=>this.serializeUrl(Yn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Qn.b)(Yn=>{"eager"===this.urlUpdateStrategy&&(Yn.extras.skipLocationChange||this.setBrowserUrl(Yn.urlAfterRedirects,Yn),this.browserUrlTree=Yn.urlAfterRedirects);const ii=new Rr(Yn.id,this.serializeUrl(Yn.extractedUrl),this.serializeUrl(Yn.urlAfterRedirects),Yn.targetSnapshot);B.next(ii)}));if(Pn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:ii,extractedUrl:qr,source:Xs,restoredState:xs,extras:js}=rt,xr=new tr(ii,this.serializeUrl(qr),Xs,xs);B.next(xr);const bo=Rt(qr,this.rootComponentType).snapshot;return(0,Ke.of)(Object.assign(Object.assign({},rt),{targetSnapshot:bo,urlAfterRedirects:qr,extras:Object.assign(Object.assign({},js),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=rt.rawUrl,this.browserUrlTree=rt.urlAfterRedirects,rt.resolve(null),Oe.E}),pe(rt=>{const{targetSnapshot:Bt,id:Pn,extractedUrl:Ar,rawUrl:Yn,extras:{skipLocationChange:ii,replaceUrl:qr}}=rt;return this.hooks.beforePreactivation(Bt,{navigationId:Pn,appliedUrlTree:Ar,rawUrlTree:Yn,skipLocationChange:!!ii,replaceUrl:!!qr})}),(0,Qn.b)(rt=>{const Bt=new vn(rt.id,this.serializeUrl(rt.extractedUrl),this.serializeUrl(rt.urlAfterRedirects),rt.targetSnapshot);this.triggerEvent(Bt)}),(0,Cn.U)(rt=>Object.assign(Object.assign({},rt),{guards:en(rt.targetSnapshot,rt.currentSnapshot,this.rootContexts)})),function(F,x){return(0,he.zg)(S=>{const{targetSnapshot:B,currentSnapshot:J,guards:{canActivateChecks:Q,canDeactivateChecks:Be}}=S;return 0===Be.length&&0===Q.length?(0,Ke.of)(Object.assign(Object.assign({},S),{guardsResult:!0})):function(F,x,S,B){return(0,xe.D)(F).pipe((0,he.zg)(J=>function(F,x,S,B,J){const Q=x&&x.routeConfig?x.routeConfig.canDeactivate:null;if(!Q||0===Q.length)return(0,Ke.of)(!0);const Be=Q.map(rt=>{const Bt=so(rt,x,J);let Pn;if(function(F){return F&&Ws(F.canDeactivate)}(Bt))Pn=et(Bt.canDeactivate(F,x,S,B));else{if(!Ws(Bt))throw new Error("Invalid CanDeactivate guard");Pn=et(Bt(F,x,S,B))}return Pn.pipe((0,br.P)())});return(0,Ke.of)(Be).pipe(fe())}(J.component,J.route,S,x,B)),(0,br.P)(J=>!0!==J,!0))}(Be,B,J,F).pipe((0,he.zg)(rt=>rt&&function(F){return"boolean"==typeof F}(rt)?function(F,x,S,B){return(0,xe.D)(x).pipe(we(J=>(0,gt.z)(function(F,x){return null!==F&&x&&x(new ft(F)),(0,Ke.of)(!0)}(J.route.parent,B),function(F,x){return null!==F&&x&&x(new Tr(F)),(0,Ke.of)(!0)}(J.route,B),function(F,x,S){const B=x[x.length-1],Q=x.slice(0,x.length-1).reverse().map(Be=>function(F){const x=F.routeConfig?F.routeConfig.canActivateChild:null;return x&&0!==x.length?{node:F,guards:x}:null}(Be)).filter(Be=>null!==Be).map(Be=>Ye(()=>{const rt=Be.guards.map(Bt=>{const Pn=so(Bt,Be.node,S);let Ar;if(function(F){return F&&Ws(F.canActivateChild)}(Pn))Ar=et(Pn.canActivateChild(B,F));else{if(!Ws(Pn))throw new Error("Invalid CanActivateChild guard");Ar=et(Pn(B,F))}return Ar.pipe((0,br.P)())});return(0,Ke.of)(rt).pipe(fe())}));return(0,Ke.of)(Q).pipe(fe())}(F,J.path,S),function(F,x,S){const B=x.routeConfig?x.routeConfig.canActivate:null;if(!B||0===B.length)return(0,Ke.of)(!0);const J=B.map(Q=>Ye(()=>{const Be=so(Q,x,S);let rt;if(function(F){return F&&Ws(F.canActivate)}(Be))rt=et(Be.canActivate(x,F));else{if(!Ws(Be))throw new Error("Invalid CanActivate guard");rt=et(Be(x,F))}return rt.pipe((0,br.P)())}));return(0,Ke.of)(J).pipe(fe())}(F,J.route,S))),(0,br.P)(J=>!0!==J,!0))}(B,Q,F,x):(0,Ke.of)(rt)),(0,Cn.U)(rt=>Object.assign(Object.assign({},S),{guardsResult:rt})))})}(this.ngModule.injector,rt=>this.triggerEvent(rt)),(0,Qn.b)(rt=>{if(_s(rt.guardsResult)){const Pn=Dn(`Redirecting to "${this.serializeUrl(rt.guardsResult)}"`);throw Pn.url=rt.guardsResult,Pn}const Bt=new Fr(rt.id,this.serializeUrl(rt.extractedUrl),this.serializeUrl(rt.urlAfterRedirects),rt.targetSnapshot,!!rt.guardsResult);this.triggerEvent(Bt)}),(0,qe.h)(rt=>!!rt.guardsResult||(this.restoreHistory(rt),this.cancelNavigationTransition(rt,""),!1)),pe(rt=>{if(rt.guards.canActivateChecks.length)return(0,Ke.of)(rt).pipe((0,Qn.b)(Bt=>{const Pn=new Yr(Bt.id,this.serializeUrl(Bt.extractedUrl),this.serializeUrl(Bt.urlAfterRedirects),Bt.targetSnapshot);this.triggerEvent(Pn)}),(0,rr.w)(Bt=>{let Pn=!1;return(0,Ke.of)(Bt).pipe(function(F,x){return(0,he.zg)(S=>{const{targetSnapshot:B,guards:{canActivateChecks:J}}=S;if(!J.length)return(0,Ke.of)(S);let Q=0;return(0,xe.D)(J).pipe(we(Be=>function(F,x,S,B){return function(F,x,S,B){const J=Object.keys(F);if(0===J.length)return(0,Ke.of)({});const Q={};return(0,xe.D)(J).pipe((0,he.zg)(Be=>function(F,x,S,B){const J=so(F,x,B);return et(J.resolve?J.resolve(x,S):J(x,S))}(F[Be],x,S,B).pipe((0,Qn.b)(rt=>{Q[Be]=rt}))),ot(1),(0,he.zg)(()=>Object.keys(Q).length===J.length?(0,Ke.of)(Q):Oe.E))}(F._resolve,F,x,B).pipe((0,Cn.U)(Q=>(F._resolvedData=Q,F.data=Object.assign(Object.assign({},F.data),Wn(F,S).resolve),null)))}(Be.route,B,F,x)),(0,Qn.b)(()=>Q++),ot(1),(0,he.zg)(Be=>Q===J.length?(0,Ke.of)(S):Oe.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Qn.b)({next:()=>Pn=!0,complete:()=>{Pn||(this.restoreHistory(Bt),this.cancelNavigationTransition(Bt,"At least one route resolver didn't emit any value."))}}))}),(0,Qn.b)(Bt=>{const Pn=new Br(Bt.id,this.serializeUrl(Bt.extractedUrl),this.serializeUrl(Bt.urlAfterRedirects),Bt.targetSnapshot);this.triggerEvent(Pn)}))}),pe(rt=>{const{targetSnapshot:Bt,id:Pn,extractedUrl:Ar,rawUrl:Yn,extras:{skipLocationChange:ii,replaceUrl:qr}}=rt;return this.hooks.afterPreactivation(Bt,{navigationId:Pn,appliedUrlTree:Ar,rawUrlTree:Yn,skipLocationChange:!!ii,replaceUrl:!!qr})}),(0,Cn.U)(rt=>{const Bt=function(F,x,S){const B=is(F,x._root,S?S._root:void 0);return new xt(B,x)}(this.routeReuseStrategy,rt.targetSnapshot,rt.currentRouterState);return Object.assign(Object.assign({},rt),{targetRouterState:Bt})}),(0,Qn.b)(rt=>{this.currentUrlTree=rt.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(rt.urlAfterRedirects,rt.rawUrl),this.routerState=rt.targetRouterState,"deferred"===this.urlUpdateStrategy&&(rt.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,rt),this.browserUrlTree=rt.urlAfterRedirects)}),((F,x,S)=>(0,Cn.U)(B=>(new po(x,B.targetRouterState,B.currentRouterState,S).activate(F),B)))(this.rootContexts,this.routeReuseStrategy,rt=>this.triggerEvent(rt)),(0,Qn.b)({next(){Q=!0},complete(){Q=!0}}),function(F){return x=>x.lift(new sn(F))}(()=>{var rt;if(!Q&&!Be){const Bt=`Navigation ID ${J.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(J),this.cancelNavigationTransition(J,Bt)):this.cancelNavigationTransition(J,Bt)}(null===(rt=this.currentNavigation)||void 0===rt?void 0:rt.id)===J.id&&(this.currentNavigation=null)}),We(rt=>{if(Be=!0,function(F){return F&&F[li]}(rt)){const Bt=_s(rt.url);Bt||(this.navigated=!0,this.restoreHistory(J,!0));const Pn=new Nn(J.id,this.serializeUrl(J.extractedUrl),rt.message);B.next(Pn),Bt?setTimeout(()=>{const Ar=this.urlHandlingStrategy.merge(rt.url,this.rawUrlTree),Yn={skipLocationChange:J.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Nt(J.source)};this.scheduleNavigation(Ar,"imperative",null,Yn,{resolve:J.resolve,reject:J.reject,promise:J.promise})},0):J.resolve(!1)}else{this.restoreHistory(J,!0);const Bt=new si(J.id,this.serializeUrl(J.extractedUrl),rt);B.next(Bt);try{J.resolve(this.errorHandler(rt))}catch(Pn){J.reject(Pn)}}return Oe.E}))}))}resetRootComponentType(S){this.rootComponentType=S,this.routerState.root.component=this.rootComponentType}getTransition(){const S=this.transitions.value;return S.urlAfterRedirects=this.browserUrlTree,S}setTransition(S){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),S))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(S=>{const B=this.extractLocationChangeInfoFromEvent(S);this.shouldScheduleNavigation(this.lastLocationChangeInfo,B)&&setTimeout(()=>{const{source:J,state:Q,urlTree:Be}=B,rt={replaceUrl:!0};if(Q){const Bt=Object.assign({},Q);delete Bt.navigationId,delete Bt.\u0275routerPageId,0!==Object.keys(Bt).length&&(rt.state=Bt)}this.scheduleNavigation(Be,J,Q,rt)},0),this.lastLocationChangeInfo=B}))}extractLocationChangeInfoFromEvent(S){var B;return{source:"popstate"===S.type?"popstate":"hashchange",urlTree:this.parseUrl(S.url),state:(null===(B=S.state)||void 0===B?void 0:B.navigationId)?S.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(S,B){if(!S)return!0;const J=B.urlTree.toString()===S.urlTree.toString();return B.transitionId!==S.transitionId||!J||!("hashchange"===B.source&&"popstate"===S.source||"popstate"===B.source&&"hashchange"===S.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(S){this.events.next(S)}resetConfig(S){ye(S),this.config=S.map(Jt),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(S,B={}){const{relativeTo:J,queryParams:Q,fragment:Be,queryParamsHandling:rt,preserveFragment:Bt}=B,Pn=J||this.routerState.root,Ar=Bt?this.currentUrlTree.fragment:Be;let Yn=null;switch(rt){case"merge":Yn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),Q);break;case"preserve":Yn=this.currentUrlTree.queryParams;break;default:Yn=Q||null}return null!==Yn&&(Yn=this.removeEmptyProps(Yn)),function(F,x,S,B,J){if(0===S.length)return xo(x.root,x.root,x,B,J);const Q=function(F){if("string"==typeof F[0]&&1===F.length&&"/"===F[0])return new Ts(!0,0,F);let x=0,S=!1;const B=F.reduce((J,Q,Be)=>{if("object"==typeof Q&&null!=Q){if(Q.outlets){const rt={};return ke(Q.outlets,(Bt,Pn)=>{rt[Pn]="string"==typeof Bt?Bt.split("/"):Bt}),[...J,{outlets:rt}]}if(Q.segmentPath)return[...J,Q.segmentPath]}return"string"!=typeof Q?[...J,Q]:0===Be?(Q.split("/").forEach((rt,Bt)=>{0==Bt&&"."===rt||(0==Bt&&""===rt?S=!0:".."===rt?x++:""!=rt&&J.push(rt))}),J):[...J,Q]},[]);return new Ts(S,x,B)}(S);if(Q.toRoot())return xo(x.root,new At([],{}),x,B,J);const Be=function(F,x,S){if(F.isAbsolute)return new fo(x.root,!0,0);if(-1===S.snapshot._lastPathIndex){const Q=S.snapshot._urlSegment;return new fo(Q,Q===x.root,0)}const B=Ao(F.commands[0])?0:1;return function(F,x,S){let B=F,J=x,Q=S;for(;Q>J;){if(Q-=J,B=B.parent,!B)throw new Error("Invalid number of '../'");J=B.segments.length}return new fo(B,!1,J-Q)}(S.snapshot._urlSegment,S.snapshot._lastPathIndex+B,F.numberOfDoubleDots)}(Q,x,F),rt=Be.processChildren?Fs(Be.segmentGroup,Be.index,Q.commands):os(Be.segmentGroup,Be.index,Q.commands);return xo(Be.segmentGroup,rt,x,B,J)}(Pn,this.currentUrlTree,S,Yn,null!=Ar?Ar:null)}navigateByUrl(S,B={skipLocationChange:!1}){const J=_s(S)?S:this.parseUrl(S),Q=this.urlHandlingStrategy.merge(J,this.rawUrlTree);return this.scheduleNavigation(Q,"imperative",null,B)}navigate(S,B={skipLocationChange:!1}){return function(F){for(let x=0;x<F.length;x++){const S=F[x];if(null==S)throw new Error(`The requested path contains ${S} segment at index ${x}`)}}(S),this.navigateByUrl(this.createUrlTree(S,B),B)}serializeUrl(S){return this.urlSerializer.serialize(S)}parseUrl(S){let B;try{B=this.urlSerializer.parse(S)}catch(J){B=this.malformedUriErrorHandler(J,this.urlSerializer,S)}return B}isActive(S,B){let J;if(J=!0===B?Object.assign({},or):!1===B?Object.assign({},Ra):B,_s(S))return vt(this.currentUrlTree,S,J);const Q=this.parseUrl(S);return vt(this.currentUrlTree,Q,J)}removeEmptyProps(S){return Object.keys(S).reduce((B,J)=>{const Q=S[J];return null!=Q&&(B[J]=Q),B},{})}processNavigations(){this.navigations.subscribe(S=>{this.navigated=!0,this.lastSuccessfulId=S.id,this.currentPageId=S.targetPageId,this.events.next(new On(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,S.resolve(!0)},S=>{this.console.warn(`Unhandled Navigation Error: ${S}`)})}scheduleNavigation(S,B,J,Q,Be){var rt,Bt;if(this.disposed)return Promise.resolve(!1);const Pn=this.getTransition(),Ar=Nt(B)&&Pn&&!Nt(Pn.source),qr=(this.lastSuccessfulId===Pn.id||this.currentNavigation?Pn.rawUrl:Pn.urlAfterRedirects).toString()===S.toString();if(Ar&&qr)return Promise.resolve(!0);let Xs,xs,js;Be?(Xs=Be.resolve,xs=Be.reject,js=Be.promise):js=new Promise((zi,Ko)=>{Xs=zi,xs=Ko});const xr=++this.navigationId;let bo;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(J=this.location.getState()),bo=J&&J.\u0275routerPageId?J.\u0275routerPageId:Q.replaceUrl||Q.skipLocationChange?null!==(rt=this.browserPageId)&&void 0!==rt?rt:0:(null!==(Bt=this.browserPageId)&&void 0!==Bt?Bt:0)+1):bo=0,this.setTransition({id:xr,targetPageId:bo,source:B,restoredState:J,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:S,extras:Q,resolve:Xs,reject:xs,promise:js,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),js.catch(zi=>Promise.reject(zi))}setBrowserUrl(S,B){const J=this.urlSerializer.serialize(S),Q=Object.assign(Object.assign({},B.extras.state),this.generateNgRouterState(B.id,B.targetPageId));this.location.isCurrentPathEqualTo(J)||B.extras.replaceUrl?this.location.replaceState(J,"",Q):this.location.go(J,"",Q)}restoreHistory(S,B=!1){var J,Q;if("computed"===this.canceledNavigationResolution){const Be=this.currentPageId-S.targetPageId;"popstate"!==S.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(J=this.currentNavigation)||void 0===J?void 0:J.finalUrl)||0===Be?this.currentUrlTree===(null===(Q=this.currentNavigation)||void 0===Q?void 0:Q.finalUrl)&&0===Be&&(this.resetState(S),this.browserUrlTree=S.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Be)}else"replace"===this.canceledNavigationResolution&&(B&&this.resetState(S),this.resetUrlToCurrentUrlTree())}resetState(S){this.routerState=S.currentRouterState,this.currentUrlTree=S.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,S.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(S,B){const J=new Nn(S.id,this.serializeUrl(S.extractedUrl),B);this.triggerEvent(J),S.resolve(!1)}generateNgRouterState(S,B){return"computed"===this.canceledNavigationResolution?{navigationId:S,\u0275routerPageId:B}:{navigationId:S}}}return F.\u0275fac=function(S){return new(S||F)(A.LFG(A.DyG),A.LFG(ln),A.LFG(vi),A.LFG(_.Ye),A.LFG(A.zs3),A.LFG(A.v3s),A.LFG(A.Sil),A.LFG(void 0))},F.\u0275prov=A.Yz7({token:F,factory:F.\u0275fac}),F})();function Nt(F){return"imperative"!==F}let Zn=(()=>{class F{constructor(S,B,J,Q,Be){this.router=S,this.route=B,this.commands=[],this.onChanges=new bt.xQ,null==J&&Q.setAttribute(Be.nativeElement,"tabindex","0")}ngOnChanges(S){this.onChanges.next(this)}set routerLink(S){this.commands=null!=S?Array.isArray(S)?S:[S]:[]}onClick(){const S={skipLocationChange:fi(this.skipLocationChange),replaceUrl:fi(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,S),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:fi(this.preserveFragment)})}}return F.\u0275fac=function(S){return new(S||F)(A.Y36(_n),A.Y36(fn),A.$8M("tabindex"),A.Y36(A.Qsj),A.Y36(A.SBq))},F.\u0275dir=A.lG2({type:F,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(S,B){1&S&&A.NdJ("click",function(){return B.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[A.TTD]}),F})();function fi(F){return""===F||!!F}let Dl=(()=>{class F{constructor(S,B,J,Q,Be){this.parentContexts=S,this.location=B,this.resolver=J,this.changeDetector=Be,this.activated=null,this._activatedRoute=null,this.activateEvents=new A.vpe,this.deactivateEvents=new A.vpe,this.name=Q||gn,S.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const S=this.parentContexts.getContext(this.name);S&&S.route&&(S.attachRef?this.attach(S.attachRef,S.route):this.activateWith(S.route,S.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const S=this.activated;return this.activated=null,this._activatedRoute=null,S}attach(S,B){this.activated=S,this._activatedRoute=B,this.location.insert(S.hostView)}deactivate(){if(this.activated){const S=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(S)}}activateWith(S,B){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=S;const Be=(B=B||this.resolver).resolveComponentFactory(S._futureSnapshot.routeConfig.component),rt=this.parentContexts.getOrCreateContext(this.name).children,Bt=new cc(S,rt,this.location.injector);this.activated=this.location.createComponent(Be,this.location.length,Bt),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return F.\u0275fac=function(S){return new(S||F)(A.Y36(vi),A.Y36(A.s_b),A.Y36(A._Vd),A.$8M("name"),A.Y36(A.sBO))},F.\u0275dir=A.lG2({type:F,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),F})();class cc{constructor(x,S,B){this.route=x,this.childContexts=S,this.parent=B}get(x,S){return x===fn?this.route:x===vi?this.childContexts:this.parent.get(x,S)}}class Pi{}class ti{preload(x,S){return S().pipe(We(()=>(0,Ke.of)(null)))}}class Us{preload(x,S){return(0,Ke.of)(null)}}let zl=(()=>{class F{constructor(S,B,J,Q,Be){this.router=S,this.injector=Q,this.preloadingStrategy=Be,this.loader=new Ln(B,J,Pn=>S.triggerEvent(new er(Pn)),Pn=>S.triggerEvent(new Kt(Pn)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,qe.h)(S=>S instanceof On),we(()=>this.preload())).subscribe(()=>{})}preload(){const S=this.injector.get(A.h0i);return this.processRoutes(S,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(S,B){const J=[];for(const Q of B)if(Q.loadChildren&&!Q.canLoad&&Q._loadedConfig){const Be=Q._loadedConfig;J.push(this.processRoutes(Be.module,Be.routes))}else Q.loadChildren&&!Q.canLoad?J.push(this.preloadConfig(S,Q)):Q.children&&J.push(this.processRoutes(S,Q.children));return(0,xe.D)(J).pipe((0,an.J)(),(0,Cn.U)(Q=>{}))}preloadConfig(S,B){return this.preloadingStrategy.preload(B,()=>(B._loadedConfig?(0,Ke.of)(B._loadedConfig):this.loader.load(S.injector,B)).pipe((0,he.zg)(Q=>(B._loadedConfig=Q,this.processRoutes(Q.module,Q.routes)))))}}return F.\u0275fac=function(S){return new(S||F)(A.LFG(_n),A.LFG(A.v3s),A.LFG(A.Sil),A.LFG(A.zs3),A.LFG(Pi))},F.\u0275prov=A.Yz7({token:F,factory:F.\u0275fac}),F})(),Ma=(()=>{class F{constructor(S,B,J={}){this.router=S,this.viewportScroller=B,this.options=J,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},J.scrollPositionRestoration=J.scrollPositionRestoration||"disabled",J.anchorScrolling=J.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(S=>{S instanceof tr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=S.navigationTrigger,this.restoredId=S.restoredState?S.restoredState.navigationId:0):S instanceof On&&(this.lastId=S.id,this.scheduleScrollEvent(S,this.router.parseUrl(S.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(S=>{S instanceof bn&&(S.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(S.position):S.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(S.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(S,B){this.router.triggerEvent(new bn(S,"popstate"===this.lastSource?this.store[this.restoredId]:null,B))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return F.\u0275fac=function(S){return new(S||F)(A.LFG(_n),A.LFG(_.EM),A.LFG(void 0))},F.\u0275prov=A.Yz7({token:F,factory:F.\u0275fac}),F})();const Ks=new A.OlP("ROUTER_CONFIGURATION"),Po=new A.OlP("ROUTER_FORROOT_GUARD"),Er=[_.Ye,{provide:ln,useClass:Mr},{provide:_n,useFactory:function(F,x,S,B,J,Q,Be,rt={},Bt,Pn){const Ar=new _n(null,F,x,S,B,J,Q,rn(Be));return Bt&&(Ar.urlHandlingStrategy=Bt),Pn&&(Ar.routeReuseStrategy=Pn),function(F,x){F.errorHandler&&(x.errorHandler=F.errorHandler),F.malformedUriErrorHandler&&(x.malformedUriErrorHandler=F.malformedUriErrorHandler),F.onSameUrlNavigation&&(x.onSameUrlNavigation=F.onSameUrlNavigation),F.paramsInheritanceStrategy&&(x.paramsInheritanceStrategy=F.paramsInheritanceStrategy),F.relativeLinkResolution&&(x.relativeLinkResolution=F.relativeLinkResolution),F.urlUpdateStrategy&&(x.urlUpdateStrategy=F.urlUpdateStrategy)}(rt,Ar),rt.enableTracing&&Ar.events.subscribe(Yn=>{var ii,qr;null===(ii=console.group)||void 0===ii||ii.call(console,`Router Event: ${Yn.constructor.name}`),console.log(Yn.toString()),console.log(Yn),null===(qr=console.groupEnd)||void 0===qr||qr.call(console)}),Ar},deps:[ln,vi,_.Ye,A.zs3,A.v3s,A.Sil,$n,Ks,[class{},new A.FiY],[ht,new A.FiY]]},vi,{provide:fn,useFactory:function(F){return F.routerState.root},deps:[_n]},{provide:A.v3s,useClass:A.EAV},zl,Us,ti,{provide:Ks,useValue:{enableTracing:!1}}];function Zs(){return new A.PXZ("Router",_n)}let Gr=(()=>{class F{constructor(S,B){}static forRoot(S,B){return{ngModule:F,providers:[Er,Oa(S),{provide:Po,useFactory:Tn,deps:[[_n,new A.FiY,new A.tp0]]},{provide:Ks,useValue:B||{}},{provide:_.S$,useFactory:Vi,deps:[_.lw,[new A.tBr(_.mr),new A.FiY],Ks]},{provide:Ma,useFactory:Pa,deps:[_n,_.EM,Ks]},{provide:Pi,useExisting:B&&B.preloadingStrategy?B.preloadingStrategy:Us},{provide:A.PXZ,multi:!0,useFactory:Zs},[Qs,{provide:A.ip1,multi:!0,useFactory:zr,deps:[Qs]},{provide:No,useFactory:Oo,deps:[Qs]},{provide:A.tb,multi:!0,useExisting:No}]]}}static forChild(S){return{ngModule:F,providers:[Oa(S)]}}}return F.\u0275fac=function(S){return new(S||F)(A.LFG(Po,8),A.LFG(_n,8))},F.\u0275mod=A.oAB({type:F}),F.\u0275inj=A.cJS({}),F})();function Pa(F,x,S){return S.scrollOffset&&x.setOffset(S.scrollOffset),new Ma(F,x,S)}function Vi(F,x,S={}){return S.useHash?new _.Do(F,x):new _.b0(F,x)}function Tn(F){return"guarded"}function Oa(F){return[{provide:A.deG,multi:!0,useValue:F},{provide:$n,multi:!0,useValue:F}]}let Qs=(()=>{class F{constructor(S){this.injector=S,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new bt.xQ}appInitializer(){return this.injector.get(_.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let B=null;const J=new Promise(rt=>B=rt),Q=this.injector.get(_n),Be=this.injector.get(Ks);return"disabled"===Be.initialNavigation?(Q.setUpLocationChangeListener(),B(!0)):"enabled"===Be.initialNavigation||"enabledBlocking"===Be.initialNavigation?(Q.hooks.afterPreactivation=()=>this.initNavigation?(0,Ke.of)(null):(this.initNavigation=!0,B(!0),this.resultOfPreactivationDone),Q.initialNavigation()):B(!0),J})}bootstrapListener(S){const B=this.injector.get(Ks),J=this.injector.get(zl),Q=this.injector.get(Ma),Be=this.injector.get(_n),rt=this.injector.get(A.z2F);S===rt.components[0]&&(("enabledNonBlocking"===B.initialNavigation||void 0===B.initialNavigation)&&Be.initialNavigation(),J.setUpPreloading(),Q.init(),Be.resetRootComponentType(rt.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return F.\u0275fac=function(S){return new(S||F)(A.LFG(A.zs3))},F.\u0275prov=A.Yz7({token:F,factory:F.\u0275fac}),F})();function zr(F){return F.appInitializer.bind(F)}function Oo(F){return F.bootstrapListener.bind(F)}const No=new A.OlP("Router Initializer")},8384:(Xt,it,L)=>{"use strict";L.d(it,{Uw:()=>Oe,fo:()=>Ee});var _=L(8239);"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global&&global;var V=(()=>{return(Te=V||(V={})).Unimplemented="UNIMPLEMENTED",Te.Unavailable="UNAVAILABLE",V;var Te})();class Ie extends Error{constructor(he,we,qe){super(he),this.message=he,this.code=we,this.data=qe}}const ae=Te=>{var he,we,qe,Ve,ot;const je=Te.CapacitorCustomPlatform||null,Ae=Te.Capacitor||{},ze=Ae.Plugins=Ae.Plugins||{},nt=Te.CapacitorPlatforms,mt=(null===(he=null==nt?void 0:nt.currentPlatform)||void 0===he?void 0:he.getPlatform)||(()=>null!==je?je.name:(Te=>{var he,we;return(null==Te?void 0:Te.androidBridge)?"android":(null===(we=null===(he=null==Te?void 0:Te.webkit)||void 0===he?void 0:he.messageHandlers)||void 0===we?void 0:we.bridge)?"ios":"web"})(Te)),Yt=(null===(we=null==nt?void 0:nt.currentPlatform)||void 0===we?void 0:we.isNativePlatform)||(()=>"web"!==mt()),Ft=(null===(qe=null==nt?void 0:nt.currentPlatform)||void 0===qe?void 0:qe.isPluginAvailable)||(wt=>{const an=dr.get(wt);return!(!(null==an?void 0:an.platforms.has(mt()))&&!rr(wt))}),rr=(null===(Ve=null==nt?void 0:nt.currentPlatform)||void 0===Ve?void 0:Ve.getPluginHeader)||(wt=>{var an;return null===(an=Ae.PluginHeaders)||void 0===an?void 0:an.find(jn=>jn.name===wt)}),dr=new Map,Qn=(null===(ot=null==nt?void 0:nt.currentPlatform)||void 0===ot?void 0:ot.registerPlugin)||((wt,an={})=>{const jn=dr.get(wt);if(jn)return console.warn(`Capacitor plugin "${wt}" already registered. Cannot register plugins twice.`),jn.proxy;const tr=mt(),On=rr(wt);let Nn;const si=function(){var Kt=(0,_.Z)(function*(){return!Nn&&tr in an?Nn=Nn="function"==typeof an[tr]?yield an[tr]():an[tr]:null!==je&&!Nn&&"web"in an&&(Nn=Nn="function"==typeof an.web?yield an.web():an.web),Nn});return function(){return Kt.apply(this,arguments)}}(),vn=Kt=>{let ft;const Kn=(...Tr)=>{const Fn=si().then(bn=>{const gn=((Kt,ft)=>{var Kn,Tr;if(!On){if(Kt)return null===(Tr=Kt[ft])||void 0===Tr?void 0:Tr.bind(Kt);throw new Ie(`"${wt}" plugin is not implemented on ${tr}`,V.Unimplemented)}{const Fn=null==On?void 0:On.methods.find(bn=>ft===bn.name);if(Fn)return"promise"===Fn.rtype?bn=>Ae.nativePromise(wt,ft.toString(),bn):(bn,gn)=>Ae.nativeCallback(wt,ft.toString(),bn,gn);if(Kt)return null===(Kn=Kt[ft])||void 0===Kn?void 0:Kn.bind(Kt)}})(bn,Kt);if(gn){const hr=gn(...Tr);return ft=null==hr?void 0:hr.remove,hr}throw new Ie(`"${wt}.${Kt}()" is not implemented on ${tr}`,V.Unimplemented)});return"addListener"===Kt&&(Fn.remove=(0,_.Z)(function*(){return ft()})),Fn};return Kn.toString=()=>`${Kt.toString()}() { [capacitor code] }`,Object.defineProperty(Kn,"name",{value:Kt,writable:!1,configurable:!1}),Kn},Fr=vn("addListener"),Yr=vn("removeListener"),Br=(Kt,ft)=>{const Kn=Fr({eventName:Kt},ft),Tr=function(){var bn=(0,_.Z)(function*(){const gn=yield Kn;Yr({eventName:Kt,callbackId:gn},ft)});return function(){return bn.apply(this,arguments)}}(),Fn=new Promise(bn=>Kn.then(()=>bn({remove:Tr})));return Fn.remove=(0,_.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield Tr()}),Fn},er=new Proxy({},{get(Kt,ft){switch(ft){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return On?Br:Fr;case"removeListener":return Yr;default:return vn(ft)}}});return ze[wt]=er,dr.set(wt,{name:wt,proxy:er,platforms:new Set([...Object.keys(an),...On?[tr]:[]])}),er});return Ae.convertFileSrc||(Ae.convertFileSrc=wt=>wt),Ae.getPlatform=mt,Ae.handleError=wt=>Te.console.error(wt),Ae.isNativePlatform=Yt,Ae.isPluginAvailable=Ft,Ae.pluginMethodNoop=(wt,an,jn)=>Promise.reject(`${jn} does not have an implementation of "${an}".`),Ae.registerPlugin=Qn,Ae.Exception=Ie,Ae.DEBUG=!!Ae.DEBUG,Ae.isLoggingEnabled=!!Ae.isLoggingEnabled,Ae.platform=Ae.getPlatform(),Ae.isNative=Ae.isNativePlatform(),Ae},le=(Te=>Te.Capacitor=ae(Te))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),Ee=le.registerPlugin;class Oe{constructor(he){this.listeners={},this.windowListeners={},he&&(console.warn(`Capacitor WebPlugin "${he.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=he)}addListener(he,we){var qe=this;this.listeners[he]||(this.listeners[he]=[]),this.listeners[he].push(we);const ot=this.windowListeners[he];ot&&!ot.registered&&this.addWindowListener(ot);const je=function(){var ze=(0,_.Z)(function*(){return qe.removeListener(he,we)});return function(){return ze.apply(this,arguments)}}(),Ae=Promise.resolve({remove:je});return Object.defineProperty(Ae,"remove",{value:(ze=(0,_.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield je()}),function(){return ze.apply(this,arguments)})}),Ae;var ze}removeAllListeners(){var he=this;return(0,_.Z)(function*(){he.listeners={};for(const we in he.windowListeners)he.removeWindowListener(he.windowListeners[we]);he.windowListeners={}})()}notifyListeners(he,we){const qe=this.listeners[he];qe&&qe.forEach(Ve=>Ve(we))}hasListeners(he){return!!this.listeners[he].length}registerWindowListener(he,we){this.windowListeners[we]={registered:!1,windowEventName:he,pluginEventName:we,handler:qe=>{this.notifyListeners(we,qe)}}}unimplemented(he="not implemented"){return new le.Exception(he,V.Unimplemented)}unavailable(he="not available"){return new le.Exception(he,V.Unavailable)}removeListener(he,we){var qe=this;return(0,_.Z)(function*(){const Ve=qe.listeners[he];if(!Ve)return;const ot=Ve.indexOf(we);qe.listeners[he].splice(ot,1),qe.listeners[he].length||qe.removeWindowListener(qe.windowListeners[he])})()}addWindowListener(he){window.addEventListener(he.windowEventName,he.handler),he.registered=!0}removeWindowListener(he){!he||(window.removeEventListener(he.windowEventName,he.handler),he.registered=!1)}}const Ke=Te=>encodeURIComponent(Te).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);class $e extends Oe{setCookie(he){return(0,_.Z)(function*(){try{const we=Ke(he.key),qe=Ke(he.value),Ve=`; expires=${(he.expires||"").replace("expires=","")}`,ot=(he.path||"/").replace("path=","");document.cookie=`${we}=${qe||""}${Ve}; path=${ot}`}catch(we){return Promise.reject(we)}})()}deleteCookie(he){return(0,_.Z)(function*(){try{document.cookie=`${he.key}=; Max-Age=0`}catch(we){return Promise.reject(we)}})()}clearCookies(){return(0,_.Z)(function*(){try{const he=document.cookie.split(";")||[];for(const we of he)document.cookie=we.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(he){return Promise.reject(he)}})()}clearAllCookies(){var he=this;return(0,_.Z)(function*(){try{yield he.clearCookies()}catch(we){return Promise.reject(we)}})()}}Ee("CapacitorCookies",{web:()=>new $e});const gt=function(){var Te=(0,_.Z)(function*(he){return new Promise((we,qe)=>{const Ve=new FileReader;Ve.onload=()=>{const ot=Ve.result;we(ot.indexOf(",")>=0?ot.split(",")[1]:ot)},Ve.onerror=ot=>qe(ot),Ve.readAsDataURL(he)})});return function(we){return Te.apply(this,arguments)}}();class We extends Oe{request(he){return(0,_.Z)(function*(){const we=((Te,he={})=>{const we=Object.assign({method:Te.method||"GET",headers:Te.headers},he),Ve=((Te={})=>{const he=Object.keys(Te);return Object.keys(Te).map(Ve=>Ve.toLocaleLowerCase()).reduce((Ve,ot,je)=>(Ve[ot]=Te[he[je]],Ve),{})})(Te.headers)["content-type"]||"";if("string"==typeof Te.data)we.body=Te.data;else if(Ve.includes("application/x-www-form-urlencoded")){const ot=new URLSearchParams;for(const[je,Ae]of Object.entries(Te.data||{}))ot.set(je,Ae);we.body=ot.toString()}else if(Ve.includes("multipart/form-data")){const ot=new FormData;if(Te.data instanceof FormData)Te.data.forEach((Ae,ze)=>{ot.append(ze,Ae)});else for(const Ae of Object.keys(Te.data))ot.append(Ae,Te.data[Ae]);we.body=ot;const je=new Headers(we.headers);je.delete("content-type"),we.headers=je}else(Ve.includes("application/json")||"object"==typeof Te.data)&&(we.body=JSON.stringify(Te.data));return we})(he,he.webFetchExtra),qe=((Te,he=!0)=>Te?Object.entries(Te).reduce((qe,Ve)=>{const[ot,je]=Ve;let Ae,ze;return Array.isArray(je)?(ze="",je.forEach(nt=>{Ae=he?encodeURIComponent(nt):nt,ze+=`${ot}=${Ae}&`}),ze.slice(0,-1)):(Ae=he?encodeURIComponent(je):je,ze=`${ot}=${Ae}`),`${qe}&${ze}`},"").substr(1):null)(he.params,he.shouldEncodeUrlParams),Ve=qe?`${he.url}?${qe}`:he.url,ot=yield fetch(Ve,we),je=ot.headers.get("content-type")||"";let ze,nt,{responseType:Ae="text"}=ot.ok?he:{};switch(je.includes("application/json")&&(Ae="json"),Ae){case"arraybuffer":case"blob":nt=yield ot.blob(),ze=yield gt(nt);break;case"json":ze=yield ot.json();break;default:ze=yield ot.text()}const st={};return ot.headers.forEach((mt,Ot)=>{st[Ot]=mt}),{data:ze,headers:st,status:ot.status,url:ot.url}})()}get(he){var we=this;return(0,_.Z)(function*(){return we.request(Object.assign(Object.assign({},he),{method:"GET"}))})()}post(he){var we=this;return(0,_.Z)(function*(){return we.request(Object.assign(Object.assign({},he),{method:"POST"}))})()}put(he){var we=this;return(0,_.Z)(function*(){return we.request(Object.assign(Object.assign({},he),{method:"PUT"}))})()}patch(he){var we=this;return(0,_.Z)(function*(){return we.request(Object.assign(Object.assign({},he),{method:"PATCH"}))})()}delete(he){var we=this;return(0,_.Z)(function*(){return we.request(Object.assign(Object.assign({},he),{method:"DELETE"}))})()}}Ee("CapacitorHttp",{web:()=>new We})},1796:(Xt,it,L)=>{"use strict";L.d(it,{u:()=>A});const A=(0,L(8384).fo)("Preferences",{web:()=>L.e(5034).then(L.bind(L,5034)).then(re=>new re.PreferencesWeb)})},3607:(Xt,it,L)=>{"use strict";L.d(it,{$:()=>fl,A:()=>nt,B:()=>Ot,G:()=>fn,H:()=>di,J:()=>Nr,L:()=>Jr,M:()=>ye,N:()=>G,P:()=>$,Q:()=>H,R:()=>sa,T:()=>O,U:()=>Jt,V:()=>Gn,W:()=>ei,X:()=>$s,Y:()=>so,Z:()=>ea,_:()=>zs,a:()=>$i,a0:()=>_o,a1:()=>As,a2:()=>vo,a3:()=>xa,a4:()=>hi,a5:()=>Ka,a6:()=>na,a7:()=>Io,a8:()=>w,a9:()=>k,aA:()=>kd,aB:()=>el,aC:()=>Oc,aD:()=>Ca,aE:()=>Rt,aI:()=>S,aL:()=>pt,aa:()=>ht,ab:()=>on,ac:()=>Ln,af:()=>pr,ag:()=>Ys,ah:()=>Bn,ak:()=>yr,al:()=>lc,an:()=>Er,ao:()=>Oa,ap:()=>z,aq:()=>jn,ar:()=>ut,as:()=>ki,at:()=>Rn,au:()=>td,av:()=>fu,aw:()=>hn,ax:()=>wt,ay:()=>On,az:()=>Or,b:()=>No,c:()=>lr,d:()=>pi,e:()=>_r,f:()=>la,g:()=>Nc,h:()=>Oi,i:()=>Rs,j:()=>Ja,k:()=>fc,l:()=>dc,m:()=>mo,n:()=>jd,o:()=>je,q:()=>cc,r:()=>ml,s:()=>Pc,u:()=>Nd,y:()=>Ma});var _=L(8239),A=L(3854),re=L(8026),Me=L(5422);function V(D,g){var v={};for(var R in D)Object.prototype.hasOwnProperty.call(D,R)&&g.indexOf(R)<0&&(v[R]=D[R]);if(null!=D&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(R=Object.getOwnPropertySymbols(D);ee<R.length;ee++)g.indexOf(R[ee])<0&&Object.prototype.propertyIsEnumerable.call(D,R[ee])&&(v[R[ee]]=D[R[ee]])}return v}var Ve=L(3910);const je={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},nt={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ot=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Yt=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},sn=new A.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Cn=new Me.Yd("@firebase/auth");function rr(D,...g){Cn.logLevel<=Me.in.ERROR&&Cn.error(`Auth (${re.SDK_VERSION}): ${D}`,...g)}function Rn(D,...g){throw Qn(D,...g)}function hn(D,...g){return Qn(D,...g)}function dr(D,g,v){const R=Object.assign(Object.assign({},Yt()),{[g]:v});return new A.LL("auth","Firebase",R).create(g,{appName:D.name})}function br(D,g,v){if(!(g instanceof v))throw v.name!==g.constructor.name&&Rn(D,"argument-error"),dr(D,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Qn(D,...g){if("string"!=typeof D){const v=g[0],R=[...g.slice(1)];return R[0]&&(R[0].appName=D.name),D._errorFactory.create(v,...R)}return sn.create(D,...g)}function wt(D,g,...v){if(!D)throw Qn(g,...v)}function an(D){const g="INTERNAL ASSERTION FAILED: "+D;throw rr(g),new Error(g)}function jn(D,g){D||an(g)}const tr=new Map;function On(D){jn(D instanceof Function,"Expected a class definition");let g=tr.get(D);return g?(jn(g instanceof D,"Instance stored in cache mismatched with class"),g):(g=new D,tr.set(D,g),g)}function Rr(){var D;return"undefined"!=typeof self&&(null===(D=self.location)||void 0===D?void 0:D.href)||""}function vn(){return"http:"===Fr()||"https:"===Fr()}function Fr(){var D;return"undefined"!=typeof self&&(null===(D=self.location)||void 0===D?void 0:D.protocol)||null}class er{constructor(g,v){this.shortDelay=g,this.longDelay=v,jn(v>g,"Short delay should be less than long delay!"),this.isMobile=(0,A.uI)()||(0,A.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(vn()||(0,A.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Kt(D,g){jn(D.emulator,"Emulator should always be set here");const{url:v}=D.emulator;return g?`${v}${g.startsWith("/")?g.slice(1):g}`:v}class ft{static initialize(g,v,R){this.fetchImpl=g,v&&(this.headersImpl=v),R&&(this.responseImpl=R)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void an("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void an("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void an("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Kn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Tr=new er(3e4,6e4);function Fn(D,g){return D.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:D.tenantId}):g}function bn(D,g,v,R){return gn.apply(this,arguments)}function gn(){return(gn=(0,_.Z)(function*(D,g,v,R,ee={}){return hr(D,ee,(0,_.Z)(function*(){let de={},lt={};R&&("GET"===g?lt=R:de={body:JSON.stringify(R)});const Vt=(0,A.xO)(Object.assign({key:D.config.apiKey},lt)).slice(1),An=yield D._getAdditionalHeaders();return An["Content-Type"]="application/json",D.languageCode&&(An["X-Firebase-Locale"]=D.languageCode),ft.fetch()(yi(D,D.config.apiHost,v,Vt),Object.assign({method:g,headers:An,referrerPolicy:"no-referrer"},de))}))})).apply(this,arguments)}function hr(D,g,v){return fr.apply(this,arguments)}function fr(){return(fr=(0,_.Z)(function*(D,g,v){D._canInitEmulator=!1;const R=Object.assign(Object.assign({},Kn),g);try{const ee=new mn(D),de=yield Promise.race([v(),ee.promise]);ee.clearNetworkTimeout();const lt=yield de.json();if("needConfirmation"in lt)throw Lt(D,"account-exists-with-different-credential",lt);if(de.ok&&!("errorMessage"in lt))return lt;{const Vt=de.ok?lt.errorMessage:lt.error.message,[An,dn]=Vt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===An)throw Lt(D,"credential-already-in-use",lt);if("EMAIL_EXISTS"===An)throw Lt(D,"email-already-in-use",lt);if("USER_DISABLED"===An)throw Lt(D,"user-disabled",lt);const Ir=R[An]||An.toLowerCase().replace(/[_\s]+/g,"-");if(dn)throw dr(D,Ir,dn);Rn(D,Ir)}}catch(ee){if(ee instanceof A.ZR)throw ee;Rn(D,"network-request-failed")}})).apply(this,arguments)}function li(D,g,v,R){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,_.Z)(function*(D,g,v,R,ee={}){const de=yield bn(D,g,v,R,ee);return"mfaPendingCredential"in de&&Rn(D,"multi-factor-auth-required",{_serverResponse:de}),de})).apply(this,arguments)}function yi(D,g,v,R){const ee=`${g}${v}?${R}`;return D.config.emulator?Kt(D.config,ee):`${D.config.apiScheme}://${ee}`}class mn{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((v,R)=>{this.timer=setTimeout(()=>R(hn(this.auth,"network-request-failed")),Tr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Lt(D,g,v){const R={appName:D.name};v.email&&(R.email=v.email),v.phoneNumber&&(R.phoneNumber=v.phoneNumber);const ee=hn(D,g,R);return ee.customData._tokenResponse=v,ee}function yn(){return(yn=(0,_.Z)(function*(D,g){return bn(D,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function rn(D,g){return un.apply(this,arguments)}function un(){return(un=(0,_.Z)(function*(D,g){return bn(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ue(D,g){return ke.apply(this,arguments)}function ke(){return(ke=(0,_.Z)(function*(D,g){return bn(D,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function et(D){if(D)try{const g=new Date(Number(D));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function Pe(){return(Pe=(0,_.Z)(function*(D,g=!1){const v=(0,A.m9)(D),R=yield v.getIdToken(g),ee=qt(R);wt(ee&&ee.exp&&ee.auth_time&&ee.iat,v.auth,"internal-error");const de="object"==typeof ee.firebase?ee.firebase:void 0,lt=null==de?void 0:de.sign_in_provider;return{claims:ee,token:R,authTime:et(vt(ee.auth_time)),issuedAtTime:et(vt(ee.iat)),expirationTime:et(vt(ee.exp)),signInProvider:lt||null,signInSecondFactor:(null==de?void 0:de.sign_in_second_factor)||null}})).apply(this,arguments)}function vt(D){return 1e3*Number(D)}function qt(D){var g;const[v,R,ee]=D.split(".");if(void 0===v||void 0===R||void 0===ee)return rr("JWT malformed, contained fewer than 3 sections"),null;try{const de=(0,A.tV)(R);return de?JSON.parse(de):(rr("Failed to decode base64 JWT payload"),null)}catch(de){return rr("Caught error parsing JWT payload as JSON",null===(g=de)||void 0===g?void 0:g.toString()),null}}function Sn(D,g){return ir.apply(this,arguments)}function ir(){return(ir=(0,_.Z)(function*(D,g,v=!1){if(v)return g;try{return yield g}catch(R){throw R instanceof A.ZR&&En(R)&&D.auth.currentUser===D&&(yield D.auth.signOut()),R}})).apply(this,arguments)}function En({code:D}){return"auth/user-disabled"===D||"auth/user-token-expired"===D}class vr{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var v;if(g){const R=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),R}{this.errorBackoff=3e4;const ee=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,ee)}}schedule(g=!1){var v=this;if(!this.isRunning)return;const R=this.getInterval(g);this.timerId=setTimeout((0,_.Z)(function*(){yield v.iteration()}),R)}iteration(){var g=this;return(0,_.Z)(function*(){var v;try{yield g.user.getIdToken(!0)}catch(R){return void("auth/network-request-failed"===(null===(v=R)||void 0===v?void 0:v.code)&&g.schedule(!0))}g.schedule()})()}}class Lr{constructor(g,v){this.createdAt=g,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=et(this.lastLoginAt),this.creationTime=et(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function At(D){return jt.apply(this,arguments)}function jt(){return(jt=(0,_.Z)(function*(D){var g;const v=D.auth,R=yield D.getIdToken(),ee=yield Sn(D,Ue(v,{idToken:R}));wt(null==ee?void 0:ee.users.length,v,"internal-error");const de=ee.users[0];D._notifyReloadListener(de);const lt=(null===(g=de.providerUserInfo)||void 0===g?void 0:g.length)?ln(de.providerUserInfo):[],Vt=qn(D.providerData,lt),Ir=!!D.isAnonymous&&!(D.email&&de.passwordHash||(null==Vt?void 0:Vt.length)),Cr={uid:de.localId,displayName:de.displayName||null,photoURL:de.photoUrl||null,email:de.email||null,emailVerified:de.emailVerified||!1,phoneNumber:de.phoneNumber||null,tenantId:de.tenantId||null,providerData:Vt,metadata:new Lr(de.createdAt,de.lastLoginAt),isAnonymous:Ir};Object.assign(D,Cr)})).apply(this,arguments)}function sr(){return(sr=(0,_.Z)(function*(D){const g=(0,A.m9)(D);yield At(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function qn(D,g){return[...D.filter(R=>!g.some(ee=>ee.providerId===R.providerId)),...g]}function ln(D){return D.map(g=>{var{providerId:v}=g,R=V(g,["providerId"]);return{providerId:v,uid:R.rawId||"",displayName:R.displayName||null,email:R.email||null,phoneNumber:R.phoneNumber||null,photoURL:R.photoUrl||null}})}function cn(){return(cn=(0,_.Z)(function*(D,g){const v=yield hr(D,{},(0,_.Z)(function*(){const R=(0,A.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:ee,apiKey:de}=D.config,lt=yi(D,ee,"/v1/token",`key=${de}`),Vt=yield D._getAdditionalHeaders();return Vt["Content-Type"]="application/x-www-form-urlencoded",ft.fetch()(lt,{method:"POST",headers:Vt,body:R})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class Mn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){wt(g.idToken,"internal-error"),wt(void 0!==g.idToken,"internal-error"),wt(void 0!==g.refreshToken,"internal-error");const v="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function(D){const g=qt(D);return wt(g,"internal-error"),wt(void 0!==g.exp,"internal-error"),wt(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,v)}getToken(g,v=!1){var R=this;return(0,_.Z)(function*(){return wt(!R.accessToken||R.refreshToken,g,"user-token-expired"),v||!R.accessToken||R.isExpired?R.refreshToken?(yield R.refresh(g,R.refreshToken),R.accessToken):null:R.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,v){var R=this;return(0,_.Z)(function*(){const{accessToken:ee,refreshToken:de,expiresIn:lt}=yield function(D,g){return cn.apply(this,arguments)}(g,v);R.updateTokensAndExpiration(ee,de,Number(lt))})()}updateTokensAndExpiration(g,v,R){this.refreshToken=v||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*R}static fromJSON(g,v){const{refreshToken:R,accessToken:ee,expirationTime:de}=v,lt=new Mn;return R&&(wt("string"==typeof R,"internal-error",{appName:g}),lt.refreshToken=R),ee&&(wt("string"==typeof ee,"internal-error",{appName:g}),lt.accessToken=ee),de&&(wt("number"==typeof de,"internal-error",{appName:g}),lt.expirationTime=de),lt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Mn,this.toJSON())}_performRefresh(){return an("not implemented")}}function mr(D,g){wt("string"==typeof D||void 0===D,"internal-error",{appName:g})}class Sr{constructor(g){var{uid:v,auth:R,stsTokenManager:ee}=g,de=V(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=R,this.stsTokenManager=ee,this.accessToken=ee.accessToken,this.displayName=de.displayName||null,this.email=de.email||null,this.emailVerified=de.emailVerified||!1,this.phoneNumber=de.phoneNumber||null,this.photoURL=de.photoURL||null,this.isAnonymous=de.isAnonymous||!1,this.tenantId=de.tenantId||null,this.providerData=de.providerData?[...de.providerData]:[],this.metadata=new Lr(de.createdAt||void 0,de.lastLoginAt||void 0)}getIdToken(g){var v=this;return(0,_.Z)(function*(){const R=yield Sn(v,v.stsTokenManager.getToken(v.auth,g));return wt(R,v.auth,"internal-error"),v.accessToken!==R&&(v.accessToken=R,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),R})()}getIdTokenResult(g){return function(D){return Pe.apply(this,arguments)}(this,g)}reload(){return function(D){return sr.apply(this,arguments)}(this)}_assign(g){this!==g&&(wt(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(v=>Object.assign({},v)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Sr(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){wt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,v=!1){var R=this;return(0,_.Z)(function*(){let ee=!1;g.idToken&&g.idToken!==R.stsTokenManager.accessToken&&(R.stsTokenManager.updateFromServerResponse(g),ee=!0),v&&(yield At(R)),yield R.auth._persistUserIfCurrent(R),ee&&R.auth._notifyListenersIfCurrent(R)})()}delete(){var g=this;return(0,_.Z)(function*(){const v=yield g.getIdToken();return yield Sn(g,function(D,g){return yn.apply(this,arguments)}(g.auth,{idToken:v})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,v){var R,ee,de,lt,Vt,An,dn,Ir;const Cr=null!==(R=v.displayName)&&void 0!==R?R:void 0,Ti=null!==(ee=v.email)&&void 0!==ee?ee:void 0,Os=null!==(de=v.phoneNumber)&&void 0!==de?de:void 0,ca=null!==(lt=v.photoURL)&&void 0!==lt?lt:void 0,_u=null!==(Vt=v.tenantId)&&void 0!==Vt?Vt:void 0,no=null!==(An=v._redirectEventId)&&void 0!==An?An:void 0,od=null!==(dn=v.createdAt)&&void 0!==dn?dn:void 0,ad=null!==(Ir=v.lastLoginAt)&&void 0!==Ir?Ir:void 0,{uid:Ll,emailVerified:nl,isAnonymous:vl,providerData:gc,stsTokenManager:El}=v;wt(Ll&&El,g,"internal-error");const Vo=Mn.fromJSON(this.name,El);wt("string"==typeof Ll,g,"internal-error"),mr(Cr,g.name),mr(Ti,g.name),wt("boolean"==typeof nl,g,"internal-error"),wt("boolean"==typeof vl,g,"internal-error"),mr(Os,g.name),mr(ca,g.name),mr(_u,g.name),mr(no,g.name),mr(od,g.name),mr(ad,g.name);const Uc=new Sr({uid:Ll,auth:g,email:Ti,emailVerified:nl,displayName:Cr,isAnonymous:vl,photoURL:ca,phoneNumber:Os,tenantId:_u,stsTokenManager:Vo,createdAt:od,lastLoginAt:ad});return gc&&Array.isArray(gc)&&(Uc.providerData=gc.map(jc=>Object.assign({},jc))),no&&(Uc._redirectEventId=no),Uc}static _fromIdTokenResponse(g,v,R=!1){return(0,_.Z)(function*(){const ee=new Mn;ee.updateFromServerResponse(v);const de=new Sr({uid:v.localId,auth:g,stsTokenManager:ee,isAnonymous:R});return yield At(de),de})()}}const Jr=(()=>{class D{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(v,R){var ee=this;return(0,_.Z)(function*(){ee.storage[v]=R})()}_get(v){var R=this;return(0,_.Z)(function*(){const ee=R.storage[v];return void 0===ee?null:ee})()}_remove(v){var R=this;return(0,_.Z)(function*(){delete R.storage[v]})()}_addListener(v,R){}_removeListener(v,R){}}return D.type="NONE",D})();function Or(D,g,v){return`firebase:${D}:${g}:${v}`}class Dr{constructor(g,v,R){this.persistence=g,this.auth=v,this.userKey=R;const{config:ee,name:de}=this.auth;this.fullUserKey=Or(this.userKey,ee.apiKey,de),this.fullPersistenceKey=Or("persistence",ee.apiKey,de),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,_.Z)(function*(){const v=yield g.persistence._get(g.fullUserKey);return v?Sr._fromJSON(g.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var v=this;return(0,_.Z)(function*(){if(v.persistence===g)return;const R=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=g,R?v.setCurrentUser(R):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,v,R="authUser"){return(0,_.Z)(function*(){if(!v.length)return new Dr(On(Jr),g,R);const ee=(yield Promise.all(v.map(function(){var dn=(0,_.Z)(function*(Ir){if(yield Ir._isAvailable())return Ir});return function(Ir){return dn.apply(this,arguments)}}()))).filter(dn=>dn);let de=ee[0]||On(Jr);const lt=Or(R,g.config.apiKey,g.name);let Vt=null;for(const dn of v)try{const Ir=yield dn._get(lt);if(Ir){const Cr=Sr._fromJSON(g,Ir);dn!==de&&(Vt=Cr),de=dn;break}}catch(Ir){}const An=ee.filter(dn=>dn._shouldAllowMigration);return de._shouldAllowMigration&&An.length?(de=An[0],Vt&&(yield de._set(lt,Vt.toJSON())),yield Promise.all(v.map(function(){var dn=(0,_.Z)(function*(Ir){if(Ir!==de)try{yield Ir._remove(lt)}catch(Cr){}});return function(Ir){return dn.apply(this,arguments)}}())),new Dr(de,g,R)):new Dr(de,g,R)})()}}function Vr(D){const g=D.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Kr(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(rs(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Di(g))return"Blackberry";if(Ii(g))return"Webos";if(kn(g))return"Safari";if((g.includes("chrome/")||Cs(g))&&!g.includes("edge/"))return"Chrome";if(ki(g))return"Android";{const R=D.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==R?void 0:R.length))return R[1]}return"Other"}function rs(D=(0,A.z$)()){return/firefox\//i.test(D)}function kn(D=(0,A.z$)()){const g=D.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Cs(D=(0,A.z$)()){return/crios\//i.test(D)}function Kr(D=(0,A.z$)()){return/iemobile/i.test(D)}function ki(D=(0,A.z$)()){return/android/i.test(D)}function Di(D=(0,A.z$)()){return/blackberry/i.test(D)}function Ii(D=(0,A.z$)()){return/webos/i.test(D)}function ut(D=(0,A.z$)()){return/iphone|ipad|ipod/i.test(D)||/macintosh/i.test(D)&&/mobile/i.test(D)}function z(D=(0,A.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(D)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(D)}function be(D=(0,A.z$)()){return ut(D)||ki(D)||Ii(D)||Di(D)||/windows phone/i.test(D)||Kr(D)}function Xe(D,g=[]){let v;switch(D){case"Browser":v=Vr((0,A.z$)());break;case"Worker":v=`${Vr((0,A.z$)())}-${D}`;break;default:v=D}const R=g.length?g.join(","):"FirebaseCore-web";return`${v}/JsCore/${re.SDK_VERSION}/${R}`}class Ct{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,v){const R=de=>new Promise((lt,Vt)=>{try{lt(g(de))}catch(An){Vt(An)}});R.onAbort=v,this.queue.push(R);const ee=this.queue.length-1;return()=>{this.queue[ee]=()=>Promise.resolve()}}runMiddleware(g){var v=this;return(0,_.Z)(function*(){var R;if(v.auth.currentUser===g)return;const ee=[];try{for(const de of v.queue)yield de(g),de.onAbort&&ee.push(de.onAbort)}catch(de){ee.reverse();for(const lt of ee)try{lt()}catch(Vt){}throw v.auth._errorFactory.create("login-blocked",{originalMessage:null===(R=de)||void 0===R?void 0:R.message})}})()}}class xt{constructor(g,v,R){this.app=g,this.heartbeatServiceProvider=v,this.config=R,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qt(this),this.idTokenSubscription=new Qt(this),this.beforeStateQueue=new Ct(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=R.sdkClientVersion}_initializeWithPersistence(g,v){var R=this;return v&&(this._popupRedirectResolver=On(v)),this._initializationPromise=this.queue((0,_.Z)(function*(){var ee,de;if(!R._deleted&&(R.persistenceManager=yield Dr.create(R,g),!R._deleted)){if(null===(ee=R._popupRedirectResolver)||void 0===ee?void 0:ee._shouldInitProactively)try{yield R._popupRedirectResolver._initialize(R)}catch(lt){}yield R.initializeCurrentUser(v),R.lastNotifiedUid=(null===(de=R.currentUser)||void 0===de?void 0:de.uid)||null,!R._deleted&&(R._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,_.Z)(function*(){if(g._deleted)return;const v=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||v){if(g.currentUser&&v&&g.currentUser.uid===v.uid)return g._currentUser._assign(v),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(v,!0)}})()}initializeCurrentUser(g){var v=this;return(0,_.Z)(function*(){var R;const ee=yield v.assertedPersistence.getCurrentUser();let de=ee,lt=!1;if(g&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const Vt=null===(R=v.redirectUser)||void 0===R?void 0:R._redirectEventId,An=null==de?void 0:de._redirectEventId,dn=yield v.tryRedirectSignIn(g);(!Vt||Vt===An)&&(null==dn?void 0:dn.user)&&(de=dn.user,lt=!0)}if(!de)return v.directlySetCurrentUser(null);if(!de._redirectEventId){if(lt)try{yield v.beforeStateQueue.runMiddleware(de)}catch(Vt){de=ee,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(Vt))}return de?v.reloadAndSetCurrentUserOrClear(de):v.directlySetCurrentUser(null)}return wt(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===de._redirectEventId?v.directlySetCurrentUser(de):v.reloadAndSetCurrentUserOrClear(de)})()}tryRedirectSignIn(g){var v=this;return(0,_.Z)(function*(){let R=null;try{R=yield v._popupRedirectResolver._completeRedirectFn(v,g,!0)}catch(ee){yield v._setRedirectUser(null)}return R})()}reloadAndSetCurrentUserOrClear(g){var v=this;return(0,_.Z)(function*(){var R;try{yield At(g)}catch(ee){if("auth/network-request-failed"!==(null===(R=ee)||void 0===R?void 0:R.code))return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const D=navigator;return D.languages&&D.languages[0]||D.language||null}()}_delete(){var g=this;return(0,_.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var v=this;return(0,_.Z)(function*(){const R=g?(0,A.m9)(g):null;return R&&wt(R.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(R&&R._clone(v))})()}_updateCurrentUser(g,v=!1){var R=this;return(0,_.Z)(function*(){if(!R._deleted)return g&&wt(R.tenantId===g.tenantId,R,"tenant-id-mismatch"),v||(yield R.beforeStateQueue.runMiddleware(g)),R.queue((0,_.Z)(function*(){yield R.directlySetCurrentUser(g),R.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,_.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var v=this;return this.queue((0,_.Z)(function*(){yield v.assertedPersistence.setPersistence(On(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new A.LL("auth","Firebase",g())}onAuthStateChanged(g,v,R){return this.registerStateListener(this.authStateSubscription,g,v,R)}beforeAuthStateChanged(g,v){return this.beforeStateQueue.pushCallback(g,v)}onIdTokenChanged(g,v,R){return this.registerStateListener(this.idTokenSubscription,g,v,R)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,v){var R=this;return(0,_.Z)(function*(){const ee=yield R.getOrInitRedirectPersistenceManager(v);return null===g?ee.removeCurrentUser():ee.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var v=this;return(0,_.Z)(function*(){if(!v.redirectPersistenceManager){const R=g&&On(g)||v._popupRedirectResolver;wt(R,v,"argument-error"),v.redirectPersistenceManager=yield Dr.create(v,[On(R._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(g){var v=this;return(0,_.Z)(function*(){var R,ee;return v._isInitialized&&(yield v.queue((0,_.Z)(function*(){}))),(null===(R=v._currentUser)||void 0===R?void 0:R._redirectEventId)===g?v._currentUser:(null===(ee=v.redirectUser)||void 0===ee?void 0:ee._redirectEventId)===g?v.redirectUser:null})()}_persistUserIfCurrent(g){var v=this;return(0,_.Z)(function*(){if(g===v.currentUser)return v.queue((0,_.Z)(function*(){return v.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const R=null!==(v=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==R&&(this.lastNotifiedUid=R,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,v,R,ee){if(this._deleted)return()=>{};const de="function"==typeof v?v:v.next.bind(v),lt=this._isInitialized?Promise.resolve():this._initializationPromise;return wt(lt,this,"internal-error"),lt.then(()=>de(this.currentUser)),"function"==typeof v?g.addObserver(v,R,ee):g.addObserver(v)}directlySetCurrentUser(g){var v=this;return(0,_.Z)(function*(){v.currentUser&&v.currentUser!==g&&v._currentUser._stopProactiveRefresh(),g&&v.isProactiveRefreshEnabled&&g._startProactiveRefresh(),v.currentUser=g,g?yield v.assertedPersistence.setCurrentUser(g):yield v.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return wt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Xe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,_.Z)(function*(){var v;const R={"X-Client-Version":g.clientVersion};g.app.options.appId&&(R["X-Firebase-gmpid"]=g.app.options.appId);const ee=yield null===(v=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();return ee&&(R["X-Firebase-Client"]=ee),R})()}}function Rt(D){return(0,A.m9)(D)}class Qt{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,A.ne)(v=>this.observer=v)}get next(){return wt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function fn(D,g,v){const R=Rt(D);wt(R._canInitEmulator,R,"emulator-config-failed"),wt(/^https?:\/\//.test(g),R,"invalid-emulator-scheme");const ee=!!(null==v?void 0:v.disableWarnings),de=Wn(g),{host:lt,port:Vt}=function(D){const g=Wn(D),v=/(\/\/)?([^?#/]+)/.exec(D.substr(g.length));if(!v)return{host:"",port:null};const R=v[2].split("@").pop()||"",ee=/^(\[[^\]]+\])(:|$)/.exec(R);if(ee){const de=ee[1];return{host:de,port:ur(R.substr(de.length+1))}}{const[de,lt]=R.split(":");return{host:de,port:ur(lt)}}}(g);R.config.emulator={url:`${de}//${lt}${null===Vt?"":`:${Vt}`}/`},R.settings.appVerificationDisabledForTesting=!0,R.emulatorConfig=Object.freeze({host:lt,port:Vt,protocol:de.replace(":",""),options:Object.freeze({disableWarnings:ee})}),ee||function(){function D(){const g=document.createElement("p"),v=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",D):D())}()}function Wn(D){const g=D.indexOf(":");return g<0?"":D.substr(0,g+1)}function ur(D){if(!D)return null;const g=Number(D);return isNaN(g)?null:g}class di{constructor(g,v){this.providerId=g,this.signInMethod=v}toJSON(){return an("not implemented")}_getIdTokenResponse(g){return an("not implemented")}_linkToIdToken(g,v){return an("not implemented")}_getReauthenticationResolver(g){return an("not implemented")}}function bi(D,g){return _i.apply(this,arguments)}function _i(){return(_i=(0,_.Z)(function*(D,g){return bn(D,"POST","/v1/accounts:resetPassword",Fn(D,g))})).apply(this,arguments)}function ws(D,g){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,_.Z)(function*(D,g){return bn(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function is(D,g){return ss.apply(this,arguments)}function ss(){return(ss=(0,_.Z)(function*(D,g){return bn(D,"POST","/v1/accounts:update",Fn(D,g))})).apply(this,arguments)}function zo(){return(zo=(0,_.Z)(function*(D,g){return li(D,"POST","/v1/accounts:signInWithPassword",Fn(D,g))})).apply(this,arguments)}function It(D,g){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,_.Z)(function*(D,g){return bn(D,"POST","/v1/accounts:sendOobCode",Fn(D,g))})).apply(this,arguments)}function ho(D,g){return xo.apply(this,arguments)}function xo(){return(xo=(0,_.Z)(function*(D,g){return It(D,g)})).apply(this,arguments)}function pa(D,g){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,_.Z)(function*(D,g){return It(D,g)})).apply(this,arguments)}function ro(D,g){return fo.apply(this,arguments)}function fo(){return(fo=(0,_.Z)(function*(D,g){return It(D,g)})).apply(this,arguments)}function Ro(D,g){return io.apply(this,arguments)}function io(){return(io=(0,_.Z)(function*(D,g){return It(D,g)})).apply(this,arguments)}function os(){return(os=(0,_.Z)(function*(D,g){return li(D,"POST","/v1/accounts:signInWithEmailLink",Fn(D,g))})).apply(this,arguments)}function Hs(){return(Hs=(0,_.Z)(function*(D,g){return li(D,"POST","/v1/accounts:signInWithEmailLink",Fn(D,g))})).apply(this,arguments)}class Ls extends di{constructor(g,v,R,ee=null){super("password",R),this._email=g,this._password=v,this._tenantId=ee}static _fromEmailAndPassword(g,v){return new Ls(g,v,"password")}static _fromEmailAndCode(g,v,R=null){return new Ls(g,v,"emailLink",R)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g;if((null==v?void 0:v.email)&&(null==v?void 0:v.password)){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(g){var v=this;return(0,_.Z)(function*(){switch(v.signInMethod){case"password":return function(D,g){return zo.apply(this,arguments)}(g,{returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function(D,g){return os.apply(this,arguments)}(g,{email:v._email,oobCode:v._password});default:Rn(g,"internal-error")}})()}_linkToIdToken(g,v){var R=this;return(0,_.Z)(function*(){switch(R.signInMethod){case"password":return ws(g,{idToken:v,returnSecureToken:!0,email:R._email,password:R._password});case"emailLink":return function(D,g){return Hs.apply(this,arguments)}(g,{idToken:v,email:R._email,oobCode:R._password});default:Rn(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function ji(D,g){return ga.apply(this,arguments)}function ga(){return(ga=(0,_.Z)(function*(D,g){return li(D,"POST","/v1/accounts:signInWithIdp",Fn(D,g))})).apply(this,arguments)}class Nr extends di{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const v=new Nr(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(v.idToken=g.idToken),g.accessToken&&(v.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(v.nonce=g.nonce),g.pendingToken&&(v.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(v.accessToken=g.oauthToken,v.secret=g.oauthTokenSecret):Rn("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:R,signInMethod:ee}=v,de=V(v,["providerId","signInMethod"]);if(!R||!ee)return null;const lt=new Nr(R,ee);return lt.idToken=de.idToken||void 0,lt.accessToken=de.accessToken||void 0,lt.secret=de.secret,lt.nonce=de.nonce,lt.pendingToken=de.pendingToken||null,lt}_getIdTokenResponse(g){return ji(g,this.buildRequest())}_linkToIdToken(g,v){const R=this.buildRequest();return R.idToken=v,ji(g,R)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,ji(g,v)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),g.postBody=(0,A.xO)(v)}return g}}function po(D,g){return ys.apply(this,arguments)}function ys(){return(ys=(0,_.Z)(function*(D,g){return bn(D,"POST","/v1/accounts:sendVerificationCode",Fn(D,g))})).apply(this,arguments)}function Ri(){return(Ri=(0,_.Z)(function*(D,g){return li(D,"POST","/v1/accounts:signInWithPhoneNumber",Fn(D,g))})).apply(this,arguments)}function Vs(){return(Vs=(0,_.Z)(function*(D,g){const v=yield li(D,"POST","/v1/accounts:signInWithPhoneNumber",Fn(D,g));if(v.temporaryProof)throw Lt(D,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const _s={USER_NOT_FOUND:"user-not-found"};function ls(){return(ls=(0,_.Z)(function*(D,g){return li(D,"POST","/v1/accounts:signInWithPhoneNumber",Fn(D,Object.assign(Object.assign({},g),{operation:"REAUTH"})),_s)})).apply(this,arguments)}class oi extends di{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,v){return new oi({verificationId:g,verificationCode:v})}static _fromTokenResponse(g,v){return new oi({phoneNumber:g,temporaryProof:v})}_getIdTokenResponse(g){return function(D,g){return Ri.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,v){return function(D,g){return Vs.apply(this,arguments)}(g,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function(D,g){return ls.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:v,verificationId:R,verificationCode:ee}=this.params;return g&&v?{temporaryProof:g,phoneNumber:v}:{sessionInfo:R,code:ee}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:v,verificationCode:R,phoneNumber:ee,temporaryProof:de}=g;return R||v||ee||de?new oi({verificationId:v,verificationCode:R,phoneNumber:ee,temporaryProof:de}):null}}class fe{constructor(g){var v,R,ee,de,lt,Vt;const An=(0,A.zd)((0,A.pd)(g)),dn=null!==(v=An.apiKey)&&void 0!==v?v:null,Ir=null!==(R=An.oobCode)&&void 0!==R?R:null,Cr=function(D){switch(D){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(ee=An.mode)&&void 0!==ee?ee:null);wt(dn&&Ir&&Cr,"argument-error"),this.apiKey=dn,this.operation=Cr,this.code=Ir,this.continueUrl=null!==(de=An.continueUrl)&&void 0!==de?de:null,this.languageCode=null!==(lt=An.languageCode)&&void 0!==lt?lt:null,this.tenantId=null!==(Vt=An.tenantId)&&void 0!==Vt?Vt:null}static parseLink(g){const v=function(D){const g=(0,A.zd)((0,A.pd)(D)).link,v=g?(0,A.zd)((0,A.pd)(g)).deep_link_id:null,R=(0,A.zd)((0,A.pd)(D)).deep_link_id;return(R?(0,A.zd)((0,A.pd)(R)).link:null)||R||v||g||D}(g);try{return new fe(v)}catch(R){return null}}}let ye=(()=>{class D{constructor(){this.providerId=D.PROVIDER_ID}static credential(v,R){return Ls._fromEmailAndPassword(v,R)}static credentialWithLink(v,R){const ee=fe.parseLink(R);return wt(ee,"argument-error"),Ls._fromEmailAndCode(v,ee.code,ee.tenantId)}}return D.PROVIDER_ID="password",D.EMAIL_PASSWORD_SIGN_IN_METHOD="password",D.EMAIL_LINK_SIGN_IN_METHOD="emailLink",D})();class Ze{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Dt extends Ze{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Jt extends Dt{static credentialFromJSON(g){const v="string"==typeof g?JSON.parse(g):g;return wt("providerId"in v&&"signInMethod"in v,"argument-error"),Nr._fromParams(v)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return wt(g.idToken||g.accessToken,"argument-error"),Nr._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Jt.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Jt.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:R,oauthTokenSecret:ee,pendingToken:de,nonce:lt,providerId:Vt}=g;if(!R&&!ee&&!v&&!de||!Vt)return null;try{return new Jt(Vt)._credential({idToken:v,accessToken:R,nonce:lt,pendingToken:de})}catch(An){return null}}}let G=(()=>{class D extends Dt{constructor(){super("facebook.com")}static credential(v){return Nr._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return D.credential(v.oauthAccessToken)}catch(R){return null}}}return D.FACEBOOK_SIGN_IN_METHOD="facebook.com",D.PROVIDER_ID="facebook.com",D})(),H=(()=>{class D extends Dt{constructor(){super("google.com"),this.addScope("profile")}static credential(v,R){return Nr._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:R})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:R,oauthAccessToken:ee}=v;if(!R&&!ee)return null;try{return D.credential(R,ee)}catch(de){return null}}}return D.GOOGLE_SIGN_IN_METHOD="google.com",D.PROVIDER_ID="google.com",D})(),O=(()=>{class D extends Dt{constructor(){super("github.com")}static credential(v){return Nr._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return D.credential(v.oauthAccessToken)}catch(R){return null}}}return D.GITHUB_SIGN_IN_METHOD="github.com",D.PROVIDER_ID="github.com",D})();class pt extends di{constructor(g,v){super(g,g),this.pendingToken=v}_getIdTokenResponse(g){return ji(g,this.buildRequest())}_linkToIdToken(g,v){const R=this.buildRequest();return R.idToken=v,ji(g,R)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,ji(g,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:R,signInMethod:ee,pendingToken:de}=v;return R&&ee&&de&&R===ee?new pt(R,de):null}static _create(g,v){return new pt(g,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Gn extends Ze{constructor(g){wt(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Gn.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Gn.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const v=pt.fromJSON(g);return wt(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:v,providerId:R}=g;if(!v||!R)return null;try{return pt._create(R,v)}catch(ee){return null}}}let ei=(()=>{class D extends Dt{constructor(){super("twitter.com")}static credential(v,R){return Nr._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:R})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:R,oauthTokenSecret:ee}=v;if(!R||!ee)return null;try{return D.credential(R,ee)}catch(de){return null}}}return D.TWITTER_SIGN_IN_METHOD="twitter.com",D.PROVIDER_ID="twitter.com",D})();function Li(D,g){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,_.Z)(function*(D,g){return li(D,"POST","/v1/accounts:signUp",Fn(D,g))})).apply(this,arguments)}class Pr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,v,R,ee=!1){return(0,_.Z)(function*(){const de=yield Sr._fromIdTokenResponse(g,R,ee),lt=Hr(R);return new Pr({user:de,providerId:lt,_tokenResponse:R,operationType:v})})()}static _forOperation(g,v,R){return(0,_.Z)(function*(){yield g._updateTokensIfNecessary(R,!0);const ee=Hr(R);return new Pr({user:g,providerId:ee,_tokenResponse:R,operationType:v})})()}}function Hr(D){return D.providerId?D.providerId:"phoneNumber"in D?"phone":null}function $s(D){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,_.Z)(function*(D){var g;const v=Rt(D);if(yield v._initializationPromise,null===(g=v.currentUser)||void 0===g?void 0:g.isAnonymous)return new Pr({user:v.currentUser,providerId:null,operationType:"signIn"});const R=yield Li(v,{returnSecureToken:!0}),ee=yield Pr._fromIdTokenResponse(v,"signIn",R,!0);return yield v._updateCurrentUser(ee.user),ee})).apply(this,arguments)}class Ki extends A.ZR{constructor(g,v,R,ee){var de;super(v.code,v.message),this.operationType=R,this.user=ee,Object.setPrototypeOf(this,Ki.prototype),this.customData={appName:g.name,tenantId:null!==(de=g.tenantId)&&void 0!==de?de:void 0,_serverResponse:v.customData._serverResponse,operationType:R}}static _fromErrorAndOperation(g,v,R,ee){return new Ki(g,v,R,ee)}}function ma(D,g,v,R){return("reauthenticate"===g?v._getReauthenticationResolver(D):v._getIdTokenResponse(D)).catch(de=>{throw"auth/multi-factor-auth-required"===de.code?Ki._fromErrorAndOperation(D,de,g,R):de})}function ya(D){return new Set(D.map(({providerId:g})=>g).filter(g=>!!g))}function yr(D,g){return qa.apply(this,arguments)}function qa(){return(qa=(0,_.Z)(function*(D,g){const v=(0,A.m9)(D);yield Ss(!0,v,g);const{providerUserInfo:R}=yield rn(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[g]}),ee=ya(R||[]);return v.providerData=v.providerData.filter(de=>ee.has(de.providerId)),ee.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v})).apply(this,arguments)}function Mo(D,g){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,_.Z)(function*(D,g,v=!1){const R=yield Sn(D,g._linkToIdToken(D.auth,yield D.getIdToken()),v);return Pr._forOperation(D,"link",R)})).apply(this,arguments)}function Ss(D,g,v){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,_.Z)(function*(D,g,v){yield At(g);const ee=!1===D?"provider-already-linked":"no-such-provider";wt(ya(g.providerData).has(v)===D,g.auth,ee)})).apply(this,arguments)}function Ya(D,g){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,_.Z)(function*(D,g,v=!1){var R;const{auth:ee}=D,de="reauthenticate";try{const lt=yield Sn(D,ma(ee,de,g,D),v);wt(lt.idToken,ee,"internal-error");const Vt=qt(lt.idToken);wt(Vt,ee,"internal-error");const{sub:An}=Vt;return wt(D.uid===An,ee,"user-mismatch"),Pr._forOperation(D,de,lt)}catch(lt){throw"auth/user-not-found"===(null===(R=lt)||void 0===R?void 0:R.code)&&Rn(ee,"user-mismatch"),lt}})).apply(this,arguments)}function en(D,g){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,_.Z)(function*(D,g,v=!1){const R="signIn",ee=yield ma(D,R,g),de=yield Pr._fromIdTokenResponse(D,R,ee);return v||(yield D._updateCurrentUser(de.user)),de})).apply(this,arguments)}function so(D,g){return Si.apply(this,arguments)}function Si(){return(Si=(0,_.Z)(function*(D,g){return en(Rt(D),g)})).apply(this,arguments)}function ea(D,g){return oo.apply(this,arguments)}function oo(){return(oo=(0,_.Z)(function*(D,g){const v=(0,A.m9)(D);return yield Ss(!1,v,g.providerId),Mo(v,g)})).apply(this,arguments)}function zs(D,g){return qs.apply(this,arguments)}function qs(){return(qs=(0,_.Z)(function*(D,g){return Ya((0,A.m9)(D),g)})).apply(this,arguments)}function _a(D,g){return hl.apply(this,arguments)}function hl(){return(hl=(0,_.Z)(function*(D,g){return li(D,"POST","/v1/accounts:signInWithCustomToken",Fn(D,g))})).apply(this,arguments)}function fl(D,g){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,_.Z)(function*(D,g){const v=Rt(D),R=yield _a(v,{token:g,returnSecureToken:!0}),ee=yield Pr._fromIdTokenResponse(v,"signIn",R);return yield v._updateCurrentUser(ee.user),ee})).apply(this,arguments)}class Xi{constructor(g,v){this.factorId=g,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(g,v){return"phoneInfo"in v?Ai._fromServerResponse(g,v):Rn(g,"internal-error")}}class Ai extends Xi{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,v){return new Ai(v)}}function xi(D,g,v){var R;wt((null===(R=v.url)||void 0===R?void 0:R.length)>0,D,"invalid-continue-uri"),wt(void 0===v.dynamicLinkDomain||v.dynamicLinkDomain.length>0,D,"invalid-dynamic-link-domain"),g.continueUrl=v.url,g.dynamicLinkDomain=v.dynamicLinkDomain,g.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(wt(v.iOS.bundleId.length>0,D,"missing-ios-bundle-id"),g.iOSBundleId=v.iOS.bundleId),v.android&&(wt(v.android.packageName.length>0,D,"missing-android-pkg-name"),g.androidInstallApp=v.android.installApp,g.androidMinimumVersionCode=v.android.minimumVersion,g.androidPackageName=v.android.packageName)}function _o(D,g,v){return cs.apply(this,arguments)}function cs(){return(cs=(0,_.Z)(function*(D,g,v){const R=(0,A.m9)(D),ee={requestType:"PASSWORD_RESET",email:g};v&&xi(R,ee,v),yield pa(R,ee)})).apply(this,arguments)}function As(D,g,v){return va.apply(this,arguments)}function va(){return(va=(0,_.Z)(function*(D,g,v){yield bi((0,A.m9)(D),{oobCode:g,newPassword:v})})).apply(this,arguments)}function vo(D,g){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,_.Z)(function*(D,g){yield is((0,A.m9)(D),{oobCode:g})})).apply(this,arguments)}function xa(D,g){return ta.apply(this,arguments)}function ta(){return(ta=(0,_.Z)(function*(D,g){const v=(0,A.m9)(D),R=yield bi(v,{oobCode:g}),ee=R.requestType;switch(wt(ee,v,"internal-error"),ee){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":wt(R.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":wt(R.mfaInfo,v,"internal-error");default:wt(R.email,v,"internal-error")}let de=null;return R.mfaInfo&&(de=Xi._fromServerResponse(Rt(v),R.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===R.requestType?R.newEmail:R.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===R.requestType?R.email:R.newEmail)||null,multiFactorInfo:de},operation:ee}})).apply(this,arguments)}function hi(D,g){return ao.apply(this,arguments)}function ao(){return(ao=(0,_.Z)(function*(D,g){const{data:v}=yield xa((0,A.m9)(D),g);return v.email})).apply(this,arguments)}function Ka(D,g,v){return qo.apply(this,arguments)}function qo(){return(qo=(0,_.Z)(function*(D,g,v){const R=Rt(D),ee=yield Li(R,{returnSecureToken:!0,email:g,password:v}),de=yield Pr._fromIdTokenResponse(R,"signIn",ee);return yield R._updateCurrentUser(de.user),de})).apply(this,arguments)}function na(D,g,v){return so((0,A.m9)(D),ye.credential(g,v))}function Io(D,g,v){return go.apply(this,arguments)}function go(){return(go=(0,_.Z)(function*(D,g,v){const R=(0,A.m9)(D),ee={requestType:"EMAIL_SIGNIN",email:g};wt(v.handleCodeInApp,R,"argument-error"),v&&xi(R,ee,v),yield ro(R,ee)})).apply(this,arguments)}function w(D,g){const v=fe.parseLink(g);return"EMAIL_SIGNIN"===(null==v?void 0:v.operation)}function k(D,g,v){return T.apply(this,arguments)}function T(){return(T=(0,_.Z)(function*(D,g,v){const R=(0,A.m9)(D),ee=ye.credentialWithLink(g,v||Rr());return wt(ee._tenantId===(R.tenantId||null),R,"tenant-id-mismatch"),so(R,ee)})).apply(this,arguments)}function Z(D,g){return pe.apply(this,arguments)}function pe(){return(pe=(0,_.Z)(function*(D,g){return bn(D,"POST","/v1/accounts:createAuthUri",Fn(D,g))})).apply(this,arguments)}function ht(D,g){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,_.Z)(function*(D,g){const R={identifier:g,continueUri:vn()?Rr():"http://localhost"},{signinMethods:ee}=yield Z((0,A.m9)(D),R);return ee||[]})).apply(this,arguments)}function on(D,g){return $n.apply(this,arguments)}function $n(){return($n=(0,_.Z)(function*(D,g){const v=(0,A.m9)(D),ee={requestType:"VERIFY_EMAIL",idToken:yield D.getIdToken()};g&&xi(v.auth,ee,g);const{email:de}=yield ho(v.auth,ee);de!==D.email&&(yield D.reload())})).apply(this,arguments)}function Ln(D,g,v){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,_.Z)(function*(D,g,v){const R=(0,A.m9)(D),de={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield D.getIdToken(),newEmail:g};v&&xi(R.auth,de,v);const{email:lt}=yield Ro(R.auth,de);lt!==D.email&&(yield D.reload())})).apply(this,arguments)}function vi(D,g){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,_.Z)(function*(D,g){return bn(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function pr(D,g){return us.apply(this,arguments)}function us(){return(us=(0,_.Z)(function*(D,{displayName:g,photoURL:v}){if(void 0===g&&void 0===v)return;const R=(0,A.m9)(D),de={idToken:yield R.getIdToken(),displayName:g,photoUrl:v,returnSecureToken:!0},lt=yield Sn(R,vi(R.auth,de));R.displayName=lt.displayName||null,R.photoURL=lt.photoUrl||null;const Vt=R.providerData.find(({providerId:An})=>"password"===An);Vt&&(Vt.displayName=R.displayName,Vt.photoURL=R.photoURL),yield R._updateTokensIfNecessary(lt)})).apply(this,arguments)}function Ys(D,g){return or((0,A.m9)(D),g,null)}function Bn(D,g){return or((0,A.m9)(D),null,g)}function or(D,g,v){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,_.Z)(function*(D,g,v){const{auth:R}=D,de={idToken:yield D.getIdToken(),returnSecureToken:!0};g&&(de.email=g),v&&(de.password=v);const lt=yield Sn(D,ws(R,de));yield D._updateTokensIfNecessary(lt,!0)})).apply(this,arguments)}class Et{constructor(g,v,R={}){this.isNewUser=g,this.providerId=v,this.profile=R}}class Nt extends Et{constructor(g,v,R,ee){super(g,v,R),this.username=ee}}class Zn extends Et{constructor(g,v){super(g,"facebook.com",v)}}class Yo extends Nt{constructor(g,v){super(g,"github.com",v,"string"==typeof(null==v?void 0:v.login)?null==v?void 0:v.login:null)}}class fi extends Et{constructor(g,v){super(g,"google.com",v)}}class Es extends Nt{constructor(g,v,R){super(g,"twitter.com",v,R)}}function lc(D){const{user:g,_tokenResponse:v}=D;return g.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function(D){var g,v;if(!D)return null;const{providerId:R}=D,ee=D.rawUserInfo?JSON.parse(D.rawUserInfo):{},de=D.isNewUser||"identitytoolkit#SignupNewUserResponse"===D.kind;if(!R&&(null==D?void 0:D.idToken)){const lt=null===(v=null===(g=qt(D.idToken))||void 0===g?void 0:g.firebase)||void 0===v?void 0:v.sign_in_provider;if(lt)return new Et(de,"anonymous"!==lt&&"custom"!==lt?lt:null)}if(!R)return null;switch(R){case"facebook.com":return new Zn(de,ee);case"github.com":return new Yo(de,ee);case"google.com":return new fi(de,ee);case"twitter.com":return new Es(de,ee,D.screenName||null);case"custom":case"anonymous":return new Et(de,null);default:return new Et(de,R,ee)}}(v)}function cc(D,g,v,R){return(0,A.m9)(D).onIdTokenChanged(g,v,R)}function Ma(D){return(0,A.m9)(D).signOut()}class Po{constructor(g,v,R){this.type=g,this.credential=v,this.auth=R}static _fromIdtoken(g,v){return new Po("enroll",g,v)}static _fromMfaPendingCredential(g){return new Po("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var v,R;if(null==g?void 0:g.multiFactorSession){if(null===(v=g.multiFactorSession)||void 0===v?void 0:v.pendingCredential)return Po._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(R=g.multiFactorSession)||void 0===R?void 0:R.idToken)return Po._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Ei{constructor(g,v,R){this.session=g,this.hints=v,this.signInResolver=R}static _fromError(g,v){const R=Rt(g),ee=v.customData._serverResponse,de=(ee.mfaInfo||[]).map(Vt=>Xi._fromServerResponse(R,Vt));wt(ee.mfaPendingCredential,R,"internal-error");const lt=Po._fromMfaPendingCredential(ee.mfaPendingCredential);return new Ei(lt,de,function(){var Vt=(0,_.Z)(function*(An){const dn=yield An._process(R,lt);delete ee.mfaInfo,delete ee.mfaPendingCredential;const Ir=Object.assign(Object.assign({},ee),{idToken:dn.idToken,refreshToken:dn.refreshToken});switch(v.operationType){case"signIn":const Cr=yield Pr._fromIdTokenResponse(R,v.operationType,Ir);return yield R._updateCurrentUser(Cr.user),Cr;case"reauthenticate":return wt(v.user,R,"internal-error"),Pr._forOperation(v.user,v.operationType,Ir);default:Rn(R,"internal-error")}});return function(An){return Vt.apply(this,arguments)}}())}resolveSignIn(g){var v=this;return(0,_.Z)(function*(){return v.signInResolver(g)})()}}function Er(D,g){var v;const R=(0,A.m9)(D),ee=g;return wt(g.customData.operationType,R,"argument-error"),wt(null===(v=ee.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,R,"argument-error"),Ei._fromError(R,ee)}function Zs(D,g){return bn(D,"POST","/v2/accounts/mfaEnrollment:start",Fn(D,g))}class Vi{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(R=>Xi._fromServerResponse(g.auth,R)))})}static _fromUser(g){return new Vi(g)}getSession(){var g=this;return(0,_.Z)(function*(){return Po._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,v){var R=this;return(0,_.Z)(function*(){const ee=g,de=yield R.getSession(),lt=yield Sn(R.user,ee._process(R.user.auth,de,v));return yield R.user._updateTokensIfNecessary(lt),R.user.reload()})()}unenroll(g){var v=this;return(0,_.Z)(function*(){var R;const ee="string"==typeof g?g:g.uid,de=yield v.user.getIdToken(),lt=yield Sn(v.user,function(D,g){return bn(D,"POST","/v2/accounts/mfaEnrollment:withdraw",Fn(D,g))}(v.user.auth,{idToken:de,mfaEnrollmentId:ee}));v.enrolledFactors=v.enrolledFactors.filter(({uid:Vt})=>Vt!==ee),yield v.user._updateTokensIfNecessary(lt);try{yield v.user.reload()}catch(Vt){if("auth/user-token-expired"!==(null===(R=Vt)||void 0===R?void 0:R.code))throw Vt}})()}}const Tn=new WeakMap;function Oa(D){const g=(0,A.m9)(D);return Tn.has(g)||Tn.set(g,Vi._fromUser(g)),Tn.get(g)}const pl="__sak";class ra{constructor(g,v){this.storageRetriever=g,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(pl,"1"),this.storage.removeItem(pl),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,v){return this.storage.setItem(g,JSON.stringify(v)),Promise.resolve()}_get(g){const v=this.storage.getItem(g);return Promise.resolve(v?JSON.parse(v):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const No=(()=>{class D extends ra{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,R)=>this.onStorageEvent(v,R),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const D=(0,A.z$)();return kn(D)||ut(D)}()&&function(){try{return!(!window||window===window.top)}catch(D){return!1}}(),this.fallbackToPolling=be(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const R of Object.keys(this.listeners)){const ee=this.storage.getItem(R),de=this.localCache[R];ee!==de&&v(R,de,ee)}}onStorageEvent(v,R=!1){if(!v.key)return void this.forAllChangedKeys((Vt,An,dn)=>{this.notifyListeners(Vt,dn)});const ee=v.key;if(R?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Vt=this.storage.getItem(ee);if(v.newValue!==Vt)null!==v.newValue?this.storage.setItem(ee,v.newValue):this.storage.removeItem(ee);else if(this.localCache[ee]===v.newValue&&!R)return}const de=()=>{const Vt=this.storage.getItem(ee);!R&&this.localCache[ee]===Vt||this.notifyListeners(ee,Vt)},lt=this.storage.getItem(ee);(0,A.w1)()&&10===document.documentMode&&lt!==v.newValue&&v.newValue!==v.oldValue?setTimeout(de,10):de()}notifyListeners(v,R){this.localCache[v]=R;const ee=this.listeners[v];if(ee)for(const de of Array.from(ee))de(R&&JSON.parse(R))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,R,ee)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:R,newValue:ee}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,R){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(R)}_removeListener(v,R){this.listeners[v]&&(this.listeners[v].delete(R),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,R){var ee=()=>super._set,de=this;return(0,_.Z)(function*(){yield ee().call(de,v,R),de.localCache[v]=JSON.stringify(R)})()}_get(v){var R=()=>super._get,ee=this;return(0,_.Z)(function*(){const de=yield R().call(ee,v);return ee.localCache[v]=JSON.stringify(de),de})()}_remove(v){var R=()=>super._remove,ee=this;return(0,_.Z)(function*(){yield R().call(ee,v),delete ee.localCache[v]})()}}return D.type="LOCAL",D})(),$i=(()=>{class D extends ra{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,R){}_removeListener(v,R){}}return D.type="SESSION",D})();let x=(()=>{class D{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const R=this.receivers.find(de=>de.isListeningto(v));if(R)return R;const ee=new D(v);return this.receivers.push(ee),ee}isListeningto(v){return this.eventTarget===v}handleEvent(v){var R=this;return(0,_.Z)(function*(){const ee=v,{eventId:de,eventType:lt,data:Vt}=ee.data,An=R.handlersMap[lt];if(!(null==An?void 0:An.size))return;ee.ports[0].postMessage({status:"ack",eventId:de,eventType:lt});const dn=Array.from(An).map(function(){var Cr=(0,_.Z)(function*(Ti){return Ti(ee.origin,Vt)});return function(Ti){return Cr.apply(this,arguments)}}()),Ir=yield function(D){return Promise.all(D.map(function(){var g=(0,_.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(R){return{fulfilled:!1,reason:R}}});return function(v){return g.apply(this,arguments)}}()))}(dn);ee.ports[0].postMessage({status:"done",eventId:de,eventType:lt,response:Ir})})()}_subscribe(v,R){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(R)}_unsubscribe(v,R){this.handlersMap[v]&&R&&this.handlersMap[v].delete(R),(!R||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return D.receivers=[],D})();function S(D="",g=10){let v="";for(let R=0;R<g;R++)v+=Math.floor(10*Math.random());return D+v}class B{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,v,R=50){var ee=this;return(0,_.Z)(function*(){const de="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!de)throw new Error("connection_unavailable");let lt,Vt;return new Promise((An,dn)=>{const Ir=S("",20);de.port1.start();const Cr=setTimeout(()=>{dn(new Error("unsupported_event"))},R);Vt={messageChannel:de,onMessage(Ti){const Os=Ti;if(Os.data.eventId===Ir)switch(Os.data.status){case"ack":clearTimeout(Cr),lt=setTimeout(()=>{dn(new Error("timeout"))},3e3);break;case"done":clearTimeout(lt),An(Os.data.response);break;default:clearTimeout(Cr),clearTimeout(lt),dn(new Error("invalid_response"))}}},ee.handlers.add(Vt),de.port1.addEventListener("message",Vt.onMessage),ee.target.postMessage({eventType:g,eventId:Ir,data:v},[de.port2])}).finally(()=>{Vt&&ee.removeMessageHandler(Vt)})})()}}function J(){return window}function Be(){return void 0!==J().WorkerGlobalScope&&"function"==typeof J().importScripts}function Bt(){return(Bt=(0,_.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(D){return null}})).apply(this,arguments)}const Yn="firebaseLocalStorageDb",qr="firebaseLocalStorage",Xs="fbase_key";class xs{constructor(g){this.request=g}toPromise(){return new Promise((g,v)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function js(D,g){return D.transaction([qr],g?"readwrite":"readonly").objectStore(qr)}function bo(){const D=indexedDB.open(Yn,1);return new Promise((g,v)=>{D.addEventListener("error",()=>{v(D.error)}),D.addEventListener("upgradeneeded",()=>{const R=D.result;try{R.createObjectStore(qr,{keyPath:Xs})}catch(ee){v(ee)}}),D.addEventListener("success",(0,_.Z)(function*(){const R=D.result;R.objectStoreNames.contains(qr)?g(R):(R.close(),yield function(){const D=indexedDB.deleteDatabase(Yn);return new xs(D).toPromise()}(),g(yield bo()))}))})}function zi(D,g,v){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,_.Z)(function*(D,g,v){const R=js(D,!0).put({[Xs]:g,value:v});return new xs(R).toPromise()})).apply(this,arguments)}function Na(){return(Na=(0,_.Z)(function*(D,g){const v=js(D,!1).get(g),R=yield new xs(v).toPromise();return void 0===R?null:R.value})).apply(this,arguments)}function Zi(D,g){const v=js(D,!0).delete(g);return new xs(v).toPromise()}const Rs=(()=>{class D{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,_.Z)(function*(){return v.db||(v.db=yield bo()),v.db})()}_withRetries(v){var R=this;return(0,_.Z)(function*(){let ee=0;for(;;)try{const de=yield R._openDb();return yield v(de)}catch(de){if(ee++>3)throw de;R.db&&(R.db.close(),R.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,_.Z)(function*(){return Be()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,_.Z)(function*(){v.receiver=x._getInstance(Be()?self:null),v.receiver._subscribe("keyChanged",function(){var R=(0,_.Z)(function*(ee,de){return{keyProcessed:(yield v._poll()).includes(de.key)}});return function(ee,de){return R.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var R=(0,_.Z)(function*(ee,de){return["keyChanged"]});return function(ee,de){return R.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,_.Z)(function*(){var R,ee;if(v.activeServiceWorker=yield function(){return Bt.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new B(v.activeServiceWorker);const de=yield v.sender._send("ping",{},800);!de||(null===(R=de[0])||void 0===R?void 0:R.fulfilled)&&(null===(ee=de[0])||void 0===ee?void 0:ee.value.includes("keyChanged"))&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var R=this;return(0,_.Z)(function*(){if(R.sender&&R.activeServiceWorker&&function(){var D;return(null===(D=null==navigator?void 0:navigator.serviceWorker)||void 0===D?void 0:D.controller)||null}()===R.activeServiceWorker)try{yield R.sender._send("keyChanged",{key:v},R.serviceWorkerReceiverAvailable?800:50)}catch(ee){}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const v=yield bo();return yield zi(v,pl,"1"),yield Zi(v,pl),!0}catch(v){}return!1})()}_withPendingWrite(v){var R=this;return(0,_.Z)(function*(){R.pendingWrites++;try{yield v()}finally{R.pendingWrites--}})()}_set(v,R){var ee=this;return(0,_.Z)(function*(){return ee._withPendingWrite((0,_.Z)(function*(){return yield ee._withRetries(de=>zi(de,v,R)),ee.localCache[v]=R,ee.notifyServiceWorker(v)}))})()}_get(v){var R=this;return(0,_.Z)(function*(){const ee=yield R._withRetries(de=>function(D,g){return Na.apply(this,arguments)}(de,v));return R.localCache[v]=ee,ee})()}_remove(v){var R=this;return(0,_.Z)(function*(){return R._withPendingWrite((0,_.Z)(function*(){return yield R._withRetries(ee=>Zi(ee,v)),delete R.localCache[v],R.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,_.Z)(function*(){const R=yield v._withRetries(lt=>{const Vt=js(lt,!1).getAll();return new xs(Vt).toPromise()});if(!R)return[];if(0!==v.pendingWrites)return[];const ee=[],de=new Set;for(const{fbase_key:lt,value:Vt}of R)de.add(lt),JSON.stringify(v.localCache[lt])!==JSON.stringify(Vt)&&(v.notifyListeners(lt,Vt),ee.push(lt));for(const lt of Object.keys(v.localCache))v.localCache[lt]&&!de.has(lt)&&(v.notifyListeners(lt,null),ee.push(lt));return ee})()}notifyListeners(v,R){this.localCache[v]=R;const ee=this.listeners[v];if(ee)for(const de of Array.from(ee))de(R)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,R){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(R)}_removeListener(v,R){this.listeners[v]&&(this.listeners[v].delete(R),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return D.type="LOCAL",D})();function lu(D,g){return bn(D,"POST","/v2/accounts/mfaSignIn:start",Fn(D,g))}function Za(){return(Za=(0,_.Z)(function*(D){return(yield bn(D,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ia(D){return new Promise((g,v)=>{const R=document.createElement("script");R.setAttribute("src",D),R.onload=g,R.onerror=ee=>{const de=hn("internal-error");de.customData=ee,v(de)},R.type="text/javascript",R.charset="UTF-8",function(){var D,g;return null!==(g=null===(D=document.getElementsByTagName("head"))||void 0===D?void 0:D[0])&&void 0!==g?g:document}().appendChild(R)})}function ql(D){return`__${D}${Math.floor(1e6*Math.random())}`}const ka=1e12;class Fa{constructor(g){this.auth=g,this.counter=ka,this._widgets=new Map}render(g,v){const R=this.counter;return this._widgets.set(R,new Hi(g,this.auth.name,v||{})),this.counter++,R}reset(g){var v;const R=g||ka;null===(v=this._widgets.get(R))||void 0===v||v.delete(),this._widgets.delete(R)}getResponse(g){var v;return(null===(v=this._widgets.get(g||ka))||void 0===v?void 0:v.getResponse())||""}execute(g){var v=this;return(0,_.Z)(function*(){var R;return null===(R=v._widgets.get(g||ka))||void 0===R||R.execute(),""})()}}class Hi{constructor(g,v,R){this.params=R,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const ee="string"==typeof g?document.getElementById(g):g;wt(ee,"argument-error",{appName:v}),this.container=ee,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(D){const g=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let R=0;R<50;R++)g.push(v.charAt(Math.floor(Math.random()*v.length)));return g.join("")}();const{callback:g,"expired-callback":v}=this.params;if(g)try{g(this.responseToken)}catch(R){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch(R){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ko=ql("rcb"),Zo=new er(3e4,6e4);class lo{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(g=J().grecaptcha)||void 0===g?void 0:g.render)}load(g,v=""){return wt((D=v).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(D),g,"argument-error"),this.shouldResolveImmediately(v)?Promise.resolve(J().grecaptcha):new Promise((R,ee)=>{const de=J().setTimeout(()=>{ee(hn(g,"network-request-failed"))},Zo.get());J()[ko]=()=>{J().clearTimeout(de),delete J()[ko];const Vt=J().grecaptcha;if(!Vt)return void ee(hn(g,"internal-error"));const An=Vt.render;Vt.render=(dn,Ir)=>{const Cr=An(dn,Ir);return this.counter++,Cr},this.hostLanguage=v,R(Vt)},ia(`https://www.google.com/recaptcha/api.js??${(0,A.xO)({onload:ko,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(de),ee(hn(g,"internal-error"))})});var D}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var v;return!!(null===(v=J().grecaptcha)||void 0===v?void 0:v.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ia{load(g){return(0,_.Z)(function*(){return new Fa(g)})()}clearedOneInstance(){}}const Co="recaptcha",ba={theme:"light",type:"image"};class sa{constructor(g,v=Object.assign({},ba),R){this.parameters=v,this.type=Co,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Rt(R),this.isInvisible="invisible"===this.parameters.size,wt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const ee="string"==typeof g?document.getElementById(g):g;wt(ee,this.auth,"argument-error"),this.container=ee,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ia:new lo,this.validateStartingState()}verify(){var g=this;return(0,_.Z)(function*(){g.assertNotDestroyed();const v=yield g.render(),R=g.getAssertedRecaptcha();return R.getResponse(v)||new Promise(de=>{const lt=Vt=>{!Vt||(g.tokenChangeListeners.delete(lt),de(Vt))};g.tokenChangeListeners.add(lt),g.isInvisible&&R.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){wt(!this.parameters.sitekey,this.auth,"argument-error"),wt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),wt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return v=>{if(this.tokenChangeListeners.forEach(R=>R(v)),"function"==typeof g)g(v);else if("string"==typeof g){const R=J()[g];"function"==typeof R&&R(v)}}}assertNotDestroyed(){wt(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,_.Z)(function*(){if(yield g.init(),!g.widgetId){let v=g.container;if(!g.isInvisible){const R=document.createElement("div");v.appendChild(R),v=R}g.widgetId=g.getAssertedRecaptcha().render(v,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,_.Z)(function*(){wt(vn()&&!Be(),g.auth,"internal-error"),yield function(){let D=null;return new Promise(g=>{"complete"!==document.readyState?(D=()=>g(),window.addEventListener("load",D)):g()}).catch(g=>{throw D&&window.removeEventListener("load",D),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const v=yield function(D){return Za.apply(this,arguments)}(g.auth);wt(v,g.auth,"internal-error"),g.parameters.sitekey=v})()}getAssertedRecaptcha(){return wt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Qa{constructor(g,v){this.verificationId=g,this.onConfirmation=v}confirm(g){const v=oi._fromVerification(this.verificationId,g);return this.onConfirmation(v)}}function Pc(D,g,v){return oa.apply(this,arguments)}function oa(){return(oa=(0,_.Z)(function*(D,g,v){const R=Rt(D),ee=yield Kl(R,g,(0,A.m9)(v));return new Qa(ee,de=>so(R,de))})).apply(this,arguments)}function dc(D,g,v){return hs.apply(this,arguments)}function hs(){return(hs=(0,_.Z)(function*(D,g,v){const R=(0,A.m9)(D);yield Ss(!1,R,"phone");const ee=yield Kl(R.auth,g,(0,A.m9)(v));return new Qa(ee,de=>ea(R,de))})).apply(this,arguments)}function ml(D,g,v){return aa.apply(this,arguments)}function aa(){return(aa=(0,_.Z)(function*(D,g,v){const R=(0,A.m9)(D),ee=yield Kl(R.auth,g,(0,A.m9)(v));return new Qa(ee,de=>zs(R,de))})).apply(this,arguments)}function Kl(D,g,v){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,_.Z)(function*(D,g,v){var R;const ee=yield v.verify();try{let de;if(wt("string"==typeof ee,D,"argument-error"),wt(v.type===Co,D,"argument-error"),de="string"==typeof g?{phoneNumber:g}:g,"session"in de){const lt=de.session;if("phoneNumber"in de)return wt("enroll"===lt.type,D,"internal-error"),(yield Zs(D,{idToken:lt.credential,phoneEnrollmentInfo:{phoneNumber:de.phoneNumber,recaptchaToken:ee}})).phoneSessionInfo.sessionInfo;{wt("signin"===lt.type,D,"internal-error");const Vt=(null===(R=de.multiFactorHint)||void 0===R?void 0:R.uid)||de.multiFactorUid;return wt(Vt,D,"missing-multi-factor-info"),(yield lu(D,{mfaPendingCredential:lt.credential,mfaEnrollmentId:Vt,phoneSignInInfo:{recaptchaToken:ee}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:lt}=yield po(D,{phoneNumber:de.phoneNumber,recaptchaToken:ee});return lt}}finally{v._reset()}})).apply(this,arguments)}function Nd(D,g){return Al.apply(this,arguments)}function Al(){return(Al=(0,_.Z)(function*(D,g){yield Mo((0,A.m9)(D),g)})).apply(this,arguments)}let $=(()=>{class D{constructor(v){this.providerId=D.PROVIDER_ID,this.auth=Rt(v)}verifyPhoneNumber(v,R){return Kl(this.auth,v,(0,A.m9)(R))}static credential(v,R){return oi._fromVerification(v,R)}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:R,temporaryProof:ee}=v;return R&&ee?oi._fromTokenResponse(R,ee):null}}return D.PROVIDER_ID="phone",D.PHONE_SIGN_IN_METHOD="phone",D})();function Y(D,g){return g?On(g):(wt(D._popupRedirectResolver,D,"argument-error"),D._popupRedirectResolver)}class me extends di{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return ji(g,this._buildIdpRequest())}_linkToIdToken(g,v){return ji(g,this._buildIdpRequest(v))}_getReauthenticationResolver(g){return ji(g,this._buildIdpRequest())}_buildIdpRequest(g){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(v.idToken=g),v}}function Le(D){return en(D.auth,new me(D),D.bypassAuthState)}function yt(D){const{auth:g,user:v}=D;return wt(v,g,"internal-error"),Ya(v,new me(D),D.bypassAuthState)}function Pt(D){return nn.apply(this,arguments)}function nn(){return(nn=(0,_.Z)(function*(D){const{auth:g,user:v}=D;return wt(v,g,"internal-error"),Mo(v,new me(D),D.bypassAuthState)})).apply(this,arguments)}class xn{constructor(g,v,R,ee,de=!1){this.auth=g,this.resolver=R,this.user=ee,this.bypassAuthState=de,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var g=this;return new Promise(function(){var v=(0,_.Z)(function*(R,ee){g.pendingPromise={resolve:R,reject:ee};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(de){g.reject(de)}});return function(R,ee){return v.apply(this,arguments)}}())}onAuthEvent(g){var v=this;return(0,_.Z)(function*(){const{urlResponse:R,sessionId:ee,postBody:de,tenantId:lt,error:Vt,type:An}=g;if(Vt)return void v.reject(Vt);const dn={auth:v.auth,requestUri:R,sessionId:ee,tenantId:lt||void 0,postBody:de||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(An)(dn))}catch(Ir){v.reject(Ir)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Le;case"linkViaPopup":case"linkViaRedirect":return Pt;case"reauthViaPopup":case"reauthViaRedirect":return yt;default:Rn(this.auth,"internal-error")}}resolve(g){jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const gr=new er(2e3,1e4);function lr(D,g,v){return kr.apply(this,arguments)}function kr(){return(kr=(0,_.Z)(function*(D,g,v){const R=Rt(D);br(D,g,Ze);const ee=Y(R,v);return new wo(R,"signInViaPopup",g,ee).executeNotNull()})).apply(this,arguments)}function _r(D,g,v){return Is.apply(this,arguments)}function Is(){return(Is=(0,_.Z)(function*(D,g,v){const R=(0,A.m9)(D);br(R.auth,g,Ze);const ee=Y(R.auth,v);return new wo(R.auth,"reauthViaPopup",g,ee,R).executeNotNull()})).apply(this,arguments)}function pi(D,g,v){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,_.Z)(function*(D,g,v){const R=(0,A.m9)(D);br(R.auth,g,Ze);const ee=Y(R.auth,v);return new wo(R.auth,"linkViaPopup",g,ee,R).executeNotNull()})).apply(this,arguments)}let wo=(()=>{class D extends xn{constructor(v,R,ee,de,lt){super(v,R,de,lt),this.provider=ee,this.authWindow=null,this.pollId=null,D.currentPopupAction&&D.currentPopupAction.cancel(),D.currentPopupAction=this}executeNotNull(){var v=this;return(0,_.Z)(function*(){const R=yield v.execute();return wt(R,v.auth,"internal-error"),R})()}onExecution(){var v=this;return(0,_.Z)(function*(){jn(1===v.filter.length,"Popup operations only handle one event");const R=S();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],R),v.authWindow.associatedEvent=R,v.resolver._originValidation(v.auth).catch(ee=>{v.reject(ee)}),v.resolver._isIframeWebStorageSupported(v.auth,ee=>{ee||v.reject(hn(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,D.currentPopupAction=null}pollUserCancellation(){const v=()=>{var R,ee;this.pollId=(null===(ee=null===(R=this.authWindow)||void 0===R?void 0:R.window)||void 0===ee?void 0:ee.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(hn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(v,gr.get())};v()}}return D.currentPopupAction=null,D})();const Js=new Map;class uu extends xn{constructor(g,v,R=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,R),this.eventId=null}execute(){var g=()=>super.execute,v=this;return(0,_.Z)(function*(){let R=Js.get(v.auth._key());if(!R){try{const de=(yield function(D,g){return Fo.apply(this,arguments)}(v.resolver,v.auth))?yield g().call(v):null;R=()=>Promise.resolve(de)}catch(ee){R=()=>Promise.reject(ee)}Js.set(v.auth._key(),R)}return v.bypassAuthState||Js.set(v.auth._key(),()=>Promise.resolve(null)),R()})()}onAuthEvent(g){var v=()=>super.onAuthEvent,R=this;return(0,_.Z)(function*(){if("signInViaRedirect"===g.type)return v().call(R,g);if("unknown"!==g.type){if(g.eventId){const ee=yield R.auth._redirectUserForId(g.eventId);if(ee)return R.user=ee,v().call(R,g);R.resolve(null)}}else R.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function Fo(){return(Fo=(0,_.Z)(function*(D,g){const v=hc(g),R=du(D);if(!(yield R._isAvailable()))return!1;const ee="true"===(yield R._get(v));return yield R._remove(v),ee})).apply(this,arguments)}function xl(D,g){return co.apply(this,arguments)}function co(){return(co=(0,_.Z)(function*(D,g){return du(D)._set(hc(g),"true")})).apply(this,arguments)}function Ca(){Js.clear()}function Oc(D,g){Js.set(D._key(),g)}function du(D){return On(D._redirectPersistence)}function hc(D){return Or("pendingRedirect",D.config.apiKey,D.name)}function la(D,g,v){return function(D,g,v){return Lo.apply(this,arguments)}(D,g,v)}function Lo(){return(Lo=(0,_.Z)(function*(D,g,v){const R=Rt(D);br(D,g,Ze);const ee=Y(R,v);return yield xl(ee,R),ee._openRedirect(R,g,"signInViaRedirect")})).apply(this,arguments)}function Oi(D,g,v){return function(D,g,v){return Ml.apply(this,arguments)}(D,g,v)}function Ml(){return(Ml=(0,_.Z)(function*(D,g,v){const R=(0,A.m9)(D);br(R.auth,g,Ze);const ee=Y(R.auth,v);yield xl(ee,R.auth);const de=yield wa(R);return ee._openRedirect(R.auth,g,"reauthViaRedirect",de)})).apply(this,arguments)}function Nc(D,g,v){return function(D,g,v){return Ps.apply(this,arguments)}(D,g,v)}function Ps(){return(Ps=(0,_.Z)(function*(D,g,v){const R=(0,A.m9)(D);br(R.auth,g,Ze);const ee=Y(R.auth,v);yield Ss(!1,R,g.providerId),yield xl(ee,R.auth);const de=yield wa(R);return ee._openRedirect(R.auth,g,"linkViaRedirect",de)})).apply(this,arguments)}function Ja(D,g){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,_.Z)(function*(D,g){return yield Rt(D)._initializationPromise,el(D,g,!1)})).apply(this,arguments)}function el(D,g){return Va.apply(this,arguments)}function Va(){return(Va=(0,_.Z)(function*(D,g,v=!1){const R=Rt(D),ee=Y(R,g),lt=yield new uu(R,ee,v).execute();return lt&&!v&&(delete lt.user._redirectEventId,yield R._persistUserIfCurrent(lt.user),yield R._setRedirectUser(null,g)),lt})).apply(this,arguments)}function wa(D){return hu.apply(this,arguments)}function hu(){return(hu=(0,_.Z)(function*(D){const g=S(`${D.uid}:::`);return D._redirectEventId=g,yield D.auth._setRedirectUser(D),yield D.auth._persistUserIfCurrent(D),g})).apply(this,arguments)}class kd{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let v=!1;return this.consumers.forEach(R=>{this.isEventForConsumer(g,R)&&(v=!0,this.sendToConsumer(g,R),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function(D){switch(D.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ah(D);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=g,v=!0)),v}sendToConsumer(g,v){var R;if(g.error&&!Ah(g)){const ee=(null===(R=g.error.code)||void 0===R?void 0:R.split("auth/")[1])||"internal-error";v.onError(hn(this.auth,ee))}else v.onAuthEvent(g)}isEventForConsumer(g,v){const R=null===v.eventId||!!g.eventId&&g.eventId===v.eventId;return v.filter.includes(g.type)&&R}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fd(g))}saveEventToCache(g){this.cachedEventUids.add(Fd(g)),this.lastProcessedEventTime=Date.now()}}function Fd(D){return[D.type,D.eventId,D.sessionId,D.tenantId].filter(g=>g).join("-")}function Ah({type:D,error:g}){return"unknown"===D&&"auth/no-auth-event"===(null==g?void 0:g.code)}function fu(D){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,_.Z)(function*(D,g={}){return bn(D,"GET","/v1/projects",g)})).apply(this,arguments)}const Qu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pu=/^https?/;function Ol(){return(Ol=(0,_.Z)(function*(D){if(D.config.emulator)return;const{authorizedDomains:g}=yield fu(D);for(const v of g)try{if(Rh(v))return}catch(R){}Rn(D,"unauthorized-domain")})).apply(this,arguments)}function Rh(D){const g=Rr(),{protocol:v,hostname:R}=new URL(g);if(D.startsWith("chrome-extension://")){const lt=new URL(D);return""===lt.hostname&&""===R?"chrome-extension:"===v&&D.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===v&&lt.hostname===R}if(!pu.test(v))return!1;if(Qu.test(D))return R===D;const ee=D.replace(/\./g,"\\.");return new RegExp("^(.+\\."+ee+"|"+ee+")$","i").test(R)}const kc=new er(3e4,6e4);function Fc(){const D=J().___jsl;if(null==D?void 0:D.H)for(const g of Object.keys(D.H))if(D.H[g].r=D.H[g].r||[],D.H[g].L=D.H[g].L||[],D.H[g].r=[...D.H[g].L],D.CP)for(let v=0;v<D.CP.length;v++)D.CP[v]=null}let Lc=null;function Vc(D){return Lc=Lc||function(D){return new Promise((g,v)=>{var R,ee,de;function lt(){Fc(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Fc(),v(hn(D,"network-request-failed"))},timeout:kc.get()})}if(null===(ee=null===(R=J().gapi)||void 0===R?void 0:R.iframes)||void 0===ee?void 0:ee.Iframe)g(gapi.iframes.getContext());else{if(!(null===(de=J().gapi)||void 0===de?void 0:de.load)){const Vt=ql("iframefcb");return J()[Vt]=()=>{gapi.load?lt():v(hn(D,"network-request-failed"))},ia(`https://apis.google.com/js/api.js?onload=${Vt}`).catch(An=>v(An))}lt()}}).catch(g=>{throw Lc=null,g})}(D),Lc}const Xl=new er(5e3,15e3),fs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$c=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gu(D){const g=D.config;wt(g.authDomain,D,"auth-domain-config-required");const v=g.emulator?Kt(g,"emulator/auth/iframe"):`https://${D.config.authDomain}/__/auth/iframe`,R={apiKey:g.apiKey,appName:D.name,v:re.SDK_VERSION},ee=$c.get(D.config.apiHost);ee&&(R.eid=ee);const de=D._getFrameworks();return de.length&&(R.fw=de.join(",")),`${v}?${(0,A.xO)(R).slice(1)}`}function tl(){return tl=(0,_.Z)(function*(D){const g=yield Vc(D),v=J().gapi;return wt(v,D,"internal-error"),g.open({where:document.body,url:gu(D),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fs,dontclear:!0},R=>new Promise(function(){var ee=(0,_.Z)(function*(de,lt){yield R.restyle({setHideOnLeave:!1});const Vt=hn(D,"network-request-failed"),An=J().setTimeout(()=>{lt(Vt)},Xl.get());function dn(){J().clearTimeout(An),de(R)}R.ping(dn).then(dn,()=>{lt(Vt)})});return function(de,lt){return ee.apply(this,arguments)}}()))}),tl.apply(this,arguments)}const yl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Bd{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function td(D,g,v,R,ee,de){wt(D.config.authDomain,D,"auth-domain-config-required"),wt(D.config.apiKey,D,"invalid-api-key");const lt={apiKey:D.config.apiKey,appName:D.name,authType:v,redirectUrl:R,v:re.SDK_VERSION,eventId:ee};if(g instanceof Ze){g.setDefaultLanguage(D.languageCode),lt.providerId=g.providerId||"",(0,A.xb)(g.getCustomParameters())||(lt.customParameters=JSON.stringify(g.getCustomParameters()));for(const[An,dn]of Object.entries(de||{}))lt[An]=dn}if(g instanceof Dt){const An=g.getScopes().filter(dn=>""!==dn);An.length>0&&(lt.scopes=An.join(","))}D.tenantId&&(lt.tid=D.tenantId);const Vt=lt;for(const An of Object.keys(Vt))void 0===Vt[An]&&delete Vt[An];return`${function({config:D}){return D.emulator?Kt(D,"emulator/auth/handler"):`https://${D.authDomain}/__/auth/handler`}(D)}?${(0,A.xO)(Vt).slice(1)}`}const gi="webStorageSupport",fc=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$i,this._completeRedirectFn=el,this._overrideRedirectResult=Oc}_openPopup(g,v,R,ee){var de=this;return(0,_.Z)(function*(){var lt;jn(null===(lt=de.eventManagers[g._key()])||void 0===lt?void 0:lt.manager,"_initialize() not called before _openPopup()");const Vt=td(g,v,R,Rr(),ee);return function(D,g,v,R=500,ee=600){const de=Math.max((window.screen.availHeight-ee)/2,0).toString(),lt=Math.max((window.screen.availWidth-R)/2,0).toString();let Vt="";const An=Object.assign(Object.assign({},yl),{width:R.toString(),height:ee.toString(),top:de,left:lt}),dn=(0,A.z$)().toLowerCase();v&&(Vt=Cs(dn)?"_blank":v),rs(dn)&&(g=g||"http://localhost",An.scrollbars="yes");const Ir=Object.entries(An).reduce((Ti,[Os,ca])=>`${Ti}${Os}=${ca},`,"");if(function(D=(0,A.z$)()){var g;return ut(D)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(dn)&&"_self"!==Vt)return function(D,g){const v=document.createElement("a");v.href=D,v.target=g;const R=document.createEvent("MouseEvent");R.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(R)}(g||"",Vt),new Bd(null);const Cr=window.open(g||"",Vt,Ir);wt(Cr,D,"popup-blocked");try{Cr.focus()}catch(Ti){}return new Bd(Cr)}(g,Vt,S())})()}_openRedirect(g,v,R,ee){var de=this;return(0,_.Z)(function*(){return yield de._originValidation(g),D=td(g,v,R,Rr(),ee),J().location.href=D,new Promise(()=>{});var D})()}_initialize(g){const v=g._key();if(this.eventManagers[v]){const{manager:ee,promise:de}=this.eventManagers[v];return ee?Promise.resolve(ee):(jn(de,"If manager is not set, promise should be"),de)}const R=this.initAndGetManager(g);return this.eventManagers[v]={promise:R},R.catch(()=>{delete this.eventManagers[v]}),R}initAndGetManager(g){var v=this;return(0,_.Z)(function*(){const R=yield function(D){return tl.apply(this,arguments)}(g),ee=new kd(g);return R.register("authEvent",de=>(wt(null==de?void 0:de.authEvent,g,"invalid-auth-event"),{status:ee.onEvent(de.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[g._key()]={manager:ee},v.iframes[g._key()]=R,ee})()}_isIframeWebStorageSupported(g,v){this.iframes[g._key()].send(gi,{type:gi},ee=>{var de;const lt=null===(de=null==ee?void 0:ee[0])||void 0===de?void 0:de[gi];void 0!==lt&&v(!!lt),Rn(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const v=g._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function(D){return Ol.apply(this,arguments)}(g)),this.originValidationPromises[v]}get _shouldInitProactively(){return be()||kn()||ut()}};class Ba extends class{constructor(g){this.factorId=g}_process(g,v,R){switch(v.type){case"enroll":return this._finalizeEnroll(g,v.credential,R);case"signin":return this._finalizeSignIn(g,v.credential);default:return an("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Ba(g)}_finalizeEnroll(g,v,R){return function(D,g){return bn(D,"POST","/v2/accounts/mfaEnrollment:finalize",Fn(D,g))}(g,{idToken:v,displayName:R,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,v){return function(D,g){return bn(D,"POST","/v2/accounts/mfaSignIn:finalize",Fn(D,g))}(g,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let mo=(()=>{class D{constructor(){}static assertion(v){return Ba._fromCredential(v)}}return D.FACTOR_ID="phone",D})();var rd="@firebase/auth",pc="0.20.10";class Ud{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var v=this;return(0,_.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const v=this.auth.onIdTokenChanged(R=>{var ee;g((null===(ee=R)||void 0===ee?void 0:ee.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,v),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const v=this.internalListeners.get(g);!v||(this.internalListeners.delete(g),v(),this.updateProactiveRefresh())}assertAuthConfigured(){wt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const id=(0,A.Pz)("authIdTokenMaxAge")||300;let sd=null;const jr=D=>function(){var g=(0,_.Z)(function*(v){const R=v&&(yield v.getIdTokenResult()),ee=R&&((new Date).getTime()-Date.parse(R.issuedAtTime))/1e3;if(ee&&ee>id)return;const de=null==R?void 0:R.token;sd!==de&&(sd=de,yield fetch(D,{method:de?"POST":"DELETE",headers:de?{Authorization:`Bearer ${de}`}:{}}))});return function(v){return g.apply(this,arguments)}}();function jd(D=(0,re.getApp)()){const g=(0,re._getProvider)(D,"auth");if(g.isInitialized())return g.getImmediate();const v=function(D,g){const v=(0,re._getProvider)(D,"auth");if(v.isInitialized()){const ee=v.getImmediate(),de=v.getOptions();if((0,A.vZ)(de,null!=g?g:{}))return ee;Rn(ee,"already-initialized")}return v.initialize({options:g})}(D,{popupRedirectResolver:fc,persistence:[Rs,No,$i]}),R=(0,A.Pz)("authTokenSyncURL");if(R){const de=jr(R);(function(D,g,v){(0,A.m9)(D).beforeAuthStateChanged(g,v)})(v,de,()=>de(v.currentUser)),cc(v,lt=>de(lt))}const ee=(0,A.q4)("auth");return ee&&fn(v,`http://${ee}`),v}var D;D="Browser",(0,re._registerComponent)(new Ve.wA("auth",(g,{options:v})=>{const R=g.getProvider("app").getImmediate(),ee=g.getProvider("heartbeat"),{apiKey:de,authDomain:lt}=R.options;return((Vt,An)=>{wt(de&&!de.includes(":"),"invalid-api-key",{appName:Vt.name}),wt(!(null==lt?void 0:lt.includes(":")),"argument-error",{appName:Vt.name});const dn={apiKey:de,authDomain:lt,clientPlatform:D,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xe(D)},Ir=new xt(Vt,An,dn);return function(D,g){const v=(null==g?void 0:g.persistence)||[],R=(Array.isArray(v)?v:[v]).map(On);(null==g?void 0:g.errorMap)&&D._updateErrorMap(g.errorMap),D._initializeWithPersistence(R,null==g?void 0:g.popupRedirectResolver)}(Ir,v),Ir})(R,ee)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,v,R)=>{g.getProvider("auth-internal").initialize()})),(0,re._registerComponent)(new Ve.wA("auth-internal",g=>{const v=Rt(g.getProvider("auth").getImmediate());return new Ud(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,re.registerVersion)(rd,pc,void 0),(0,re.registerVersion)(rd,pc,"esm2017")},1304:(Xt,it,L)=>{"use strict";L.d(it,{u7:()=>Ag,Jj:()=>Ad,IX:()=>Cg,my:()=>uo,xU:()=>Rd,Lz:()=>bh,WA:()=>Nt,F8:()=>Pm,$q:()=>Th,W:()=>ju,EK:()=>Ei,PU:()=>a_,l7:()=>Fa,Ky:()=>Tn,Xb:()=>Vi,Cf:()=>mi,K9:()=>Ra,Me:()=>lu,yq:()=>us,Wi:()=>Am,ET:()=>i_,Ab:()=>fv,vr:()=>hv,Fc:()=>Ly,hJ:()=>ff,B$:()=>pf,at:()=>Py,oe:()=>r_,AK:()=>Qo,TF:()=>Q_,JU:()=>yg,ST:()=>ky,fH:()=>K_,Ix:()=>A0,Wu:()=>jm,Lx:()=>Um,qY:()=>yo,GL:()=>Dh,QT:()=>Jy,kl:()=>Gm,Xk:()=>e_,PL:()=>lv,UQ:()=>t_,zN:()=>n_,ad:()=>Oy,nP:()=>u_,b9:()=>N0,vh:()=>Ep,Pb:()=>J_,L$:()=>Vy,cf:()=>s_,sc:()=>o_,Xo:()=>Lm,IO:()=>zy,iE:()=>Lu,Eo:()=>_g,i3:()=>dv,Bt:()=>c_,pl:()=>zm,Ub:()=>vi,qK:()=>av,TQ:()=>Bm,e0:()=>$m,r7:()=>qm,Mx:()=>Z_,ar:()=>Fm});var V,_=L(8239),A=L(8026),re=L(3910),Me=L(5422),ce=L(3854),_e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ne={},Ie=Ie||{},ie=_e||self;function ae(){}function Ne(s){var e=typeof s;return"array"==(e="object"!=e?e:s?Array.isArray(s)?"array":e:"null")||"object"==e&&"number"==typeof s.length}function le(s){var e=typeof s;return"object"==e&&null!=s||"function"==e}var at="closure_uid_"+(1e9*Math.random()>>>0),xe=0;function Oe(s,e,r){return s.call.apply(s.bind,arguments)}function Ye(s,e,r){if(!s)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var h=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(h,a),s.apply(e,h)}}return function(){return s.apply(e,arguments)}}function Ke(s,e,r){return(Ke=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Oe:Ye).apply(null,arguments)}function $e(s,e){var r=Array.prototype.slice.call(arguments,1);return function(){var a=r.slice();return a.push.apply(a,arguments),s.apply(this,a)}}function He(s,e){function r(){}r.prototype=e.prototype,s.X=e.prototype,s.prototype=new r,s.prototype.constructor=s,s.Wb=function(a,h,m){for(var C=Array(arguments.length-2),P=2;P<arguments.length;P++)C[P-2]=arguments[P];return e.prototype[h].apply(a,C)}}function gt(){this.s=this.s,this.o=this.o}var bt={};gt.prototype.s=!1,gt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var s=function(s){return Object.prototype.hasOwnProperty.call(s,at)&&s[at]||(s[at]=++xe)}(this);delete bt[s]}},gt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const E=Array.prototype.indexOf?function(s,e){return Array.prototype.indexOf.call(s,e,void 0)}:function(s,e){if("string"==typeof s)return"string"!=typeof e||1!=e.length?-1:s.indexOf(e,0);for(let r=0;r<s.length;r++)if(r in s&&s[r]===e)return r;return-1};function We(s){const e=s.length;if(0<e){const r=Array(e);for(let a=0;a<e;a++)r[a]=s[a];return r}return[]}function _t(s,e){for(let r=1;r<arguments.length;r++){const a=arguments[r];if(Ne(a)){const h=s.length||0,m=a.length||0;s.length=h+m;for(let C=0;C<m;C++)s[h+C]=a[C]}else s.push(a)}}function Te(s,e){this.type=s,this.g=this.target=e,this.defaultPrevented=!1}Te.prototype.h=function(){this.defaultPrevented=!0};var he=function(){if(!ie.addEventListener||!Object.defineProperty)return!1;var s=!1,e=Object.defineProperty({},"passive",{get:function(){s=!0}});try{ie.addEventListener("test",ae,e),ie.removeEventListener("test",ae,e)}catch(r){}return s}();function we(s){return/^[\s\xa0]*$/.test(s)}var qe=String.prototype.trim?function(s){return s.trim()}:function(s){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(s)[1]};function Ve(s,e){return s<e?-1:s>e?1:0}function ot(){var s=ie.navigator;return s&&(s=s.userAgent)?s:""}function je(s){return-1!=ot().indexOf(s)}function Ae(s){return Ae[" "](s),s}Ae[" "]=ae;var Cn,s,nt=je("Opera"),st=je("Trident")||je("MSIE"),mt=je("Edge"),Ot=mt||st,Yt=je("Gecko")&&!(-1!=ot().toLowerCase().indexOf("webkit")&&!je("Edge"))&&!(je("Trident")||je("MSIE"))&&!je("Edge"),sn=-1!=ot().toLowerCase().indexOf("webkit")&&!je("Edge");function Ft(){var s=ie.document;return s?s.documentMode:void 0}e:{var rr="",Rn=(s=ot(),Yt?/rv:([^\);]+)(\)|;)/.exec(s):mt?/Edge\/([\d\.]+)/.exec(s):st?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(s):sn?/WebKit\/(\S+)/.exec(s):nt?/(?:Version)[ \/]?(\S+)/.exec(s):void 0);if(Rn&&(rr=Rn?Rn[1]:""),st){var hn=Ft();if(null!=hn&&hn>parseFloat(rr)){Cn=String(hn);break e}}Cn=rr}var dr={};function br(){return e=dr,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let s=0;const e=qe(String(Cn)).split("."),r=qe("9").split("."),a=Math.max(e.length,r.length);for(let C=0;0==s&&C<a;C++){var h=e[C]||"",m=r[C]||"";do{if(h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],m=/(\d*)(\D*)(.*)/.exec(m)||["","","",""],0==h[0].length&&0==m[0].length)break;s=Ve(0==h[1].length?0:parseInt(h[1],10),0==m[1].length?0:parseInt(m[1],10))||Ve(0==h[2].length,0==m[2].length)||Ve(h[2],m[2]),h=h[3],m=m[3]}while(0==s)}return 0<=s}();var e}var an=ie.document&&st&&(Ft()||parseInt(Cn,10))||void 0;function jn(s,e){if(Te.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var r=this.type=s.type,a=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=e,e=s.relatedTarget){if(Yt){e:{try{Ae(e.nodeName);var h=!0;break e}catch(m){}h=!1}h||(e=null)}}else"mouseover"==r?e=s.fromElement:"mouseout"==r&&(e=s.toElement);this.relatedTarget=e,a?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType="string"==typeof s.pointerType?s.pointerType:tr[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&jn.X.h.call(this)}}He(jn,Te);var tr={2:"touch",3:"pen",4:"mouse"};jn.prototype.h=function(){jn.X.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var On="closure_listenable_"+(1e6*Math.random()|0),Nn=0;function si(s,e,r,a,h){this.listener=s,this.proxy=null,this.src=e,this.type=r,this.capture=!!a,this.ha=h,this.key=++Nn,this.ba=this.ea=!1}function Rr(s){s.ba=!0,s.listener=null,s.proxy=null,s.src=null,s.ha=null}function vn(s,e,r){for(const a in s)e.call(r,s[a],a,s)}function Fr(s){const e={};for(const r in s)e[r]=s[r];return e}const Yr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Br(s,e){let r,a;for(let h=1;h<arguments.length;h++){for(r in a=arguments[h],a)s[r]=a[r];for(let m=0;m<Yr.length;m++)r=Yr[m],Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}}function er(s){this.src=s,this.g={},this.h=0}function Kt(s,e){var r=e.type;if(r in s.g){var m,a=s.g[r],h=E(a,e);(m=0<=h)&&Array.prototype.splice.call(a,h,1),m&&(Rr(e),0==s.g[r].length&&(delete s.g[r],s.h--))}}function ft(s,e,r,a){for(var h=0;h<s.length;++h){var m=s[h];if(!m.ba&&m.listener==e&&m.capture==!!r&&m.ha==a)return h}return-1}er.prototype.add=function(s,e,r,a,h){var m=s.toString();(s=this.g[m])||(s=this.g[m]=[],this.h++);var C=ft(s,e,a,h);return-1<C?(e=s[C],r||(e.ea=!1)):((e=new si(e,this.src,m,!!a,h)).ea=r,s.push(e)),e};var Kn="closure_lm_"+(1e6*Math.random()|0),Tr={};function Fn(s,e,r,a,h){if(a&&a.once)return hr(s,e,r,a,h);if(Array.isArray(e)){for(var m=0;m<e.length;m++)Fn(s,e[m],r,a,h);return null}return r=Gt(r),s&&s[On]?s.N(e,r,le(a)?!!a.capture:!!a,h):bn(s,e,r,!1,a,h)}function bn(s,e,r,a,h,m){if(!e)throw Error("Invalid event type");var C=le(h)?!!h.capture:!!h,P=mn(s);if(P||(s[Kn]=P=new er(s)),(r=P.add(e,r,a,C,m)).proxy)return r;if(a=function(){const e=yi;return function s(r){return e.call(s.src,s.listener,r)}}(),r.proxy=a,a.src=s,a.listener=r,s.addEventListener)he||(h=C),void 0===h&&(h=!1),s.addEventListener(e.toString(),a,h);else if(s.attachEvent)s.attachEvent(Dn(e.toString()),a);else{if(!s.addListener||!s.removeListener)throw Error("addEventListener and attachEvent are unavailable.");s.addListener(a)}return r}function hr(s,e,r,a,h){if(Array.isArray(e)){for(var m=0;m<e.length;m++)hr(s,e[m],r,a,h);return null}return r=Gt(r),s&&s[On]?s.O(e,r,le(a)?!!a.capture:!!a,h):bn(s,e,r,!0,a,h)}function fr(s,e,r,a,h){if(Array.isArray(e))for(var m=0;m<e.length;m++)fr(s,e[m],r,a,h);else a=le(a)?!!a.capture:!!a,r=Gt(r),s&&s[On]?(s=s.i,(e=String(e).toString())in s.g&&-1<(r=ft(m=s.g[e],r,a,h))&&(Rr(m[r]),Array.prototype.splice.call(m,r,1),0==m.length&&(delete s.g[e],s.h--))):s&&(s=mn(s))&&(e=s.g[e.toString()],s=-1,e&&(s=ft(e,r,a,h)),(r=-1<s?e[s]:null)&&li(r))}function li(s){if("number"!=typeof s&&s&&!s.ba){var e=s.src;if(e&&e[On])Kt(e.i,s);else{var r=s.type,a=s.proxy;e.removeEventListener?e.removeEventListener(r,a,s.capture):e.detachEvent?e.detachEvent(Dn(r),a):e.addListener&&e.removeListener&&e.removeListener(a),(r=mn(e))?(Kt(r,s),0==r.h&&(r.src=null,e[Kn]=null)):Rr(s)}}}function Dn(s){return s in Tr?Tr[s]:Tr[s]="on"+s}function yi(s,e){if(s.ba)s=!0;else{e=new jn(e,this);var r=s.listener,a=s.ha||s.src;s.ea&&li(s),s=r.call(a,e)}return s}function mn(s){return(s=s[Kn])instanceof er?s:null}var Lt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gt(s){return"function"==typeof s?s:(s[Lt]||(s[Lt]=function(e){return s.handleEvent(e)}),s[Lt])}function yn(){gt.call(this),this.i=new er(this),this.P=this,this.I=null}function rn(s,e){var r,a=s.I;if(a)for(r=[];a;a=a.I)r.push(a);if(s=s.P,a=e.type||e,"string"==typeof e)e=new Te(e,s);else if(e instanceof Te)e.target=e.target||s;else{var h=e;Br(e=new Te(a,s),h)}if(h=!0,r)for(var m=r.length-1;0<=m;m--){var C=e.g=r[m];h=un(C,a,!0,e)&&h}if(h=un(C=e.g=s,a,!0,e)&&h,h=un(C,a,!1,e)&&h,r)for(m=0;m<r.length;m++)h=un(C=e.g=r[m],a,!1,e)&&h}function un(s,e,r,a){if(!(e=s.i.g[String(e)]))return!0;e=e.concat();for(var h=!0,m=0;m<e.length;++m){var C=e[m];if(C&&!C.ba&&C.capture==r){var P=C.listener,X=C.ha||C.src;C.ea&&Kt(s.i,C),h=!1!==P.call(X,a)&&h}}return h&&!a.defaultPrevented}He(yn,gt),yn.prototype[On]=!0,yn.prototype.removeEventListener=function(s,e,r,a){fr(this,s,e,r,a)},yn.prototype.M=function(){if(yn.X.M.call(this),this.i){var e,s=this.i;for(e in s.g){for(var r=s.g[e],a=0;a<r.length;a++)Rr(r[a]);delete s.g[e],s.h--}}this.I=null},yn.prototype.N=function(s,e,r,a){return this.i.add(String(s),e,!1,r,a)},yn.prototype.O=function(s,e,r,a){return this.i.add(String(s),e,!0,r,a)};var Ue=ie.JSON.stringify;function ke(){var s=ir;let e=null;return s.g&&(e=s.g,s.g=s.g.next,s.g||(s.h=null),e.next=null),e}var qt,Fe=new class{constructor(s,e){this.i=s,this.j=e,this.h=0,this.g=null}get(){let s;return 0<this.h?(this.h--,s=this.g,this.g=s.next,s.next=null):s=this.i(),s}}(()=>new ve,s=>s.reset());class ve{constructor(){this.next=this.g=this.h=null}set(e,r){this.h=e,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function Pe(s){ie.setTimeout(()=>{throw s},0)}function vt(s,e){qt||function(){var s=ie.Promise.resolve(void 0);qt=function(){s.then(En)}}(),Sn||(qt(),Sn=!0),ir.add(s,e)}var Sn=!1,ir=new class{constructor(){this.h=this.g=null}add(e,r){const a=Fe.get();a.set(e,r),this.h?this.h.next=a:this.g=a,this.h=a}};function En(){for(var s;s=ke();){try{s.h.call(s.g)}catch(r){Pe(r)}var e=Fe;e.j(s),100>e.h&&(e.h++,s.next=e.g,e.g=s)}Sn=!1}function vr(s,e){yn.call(this),this.h=s||1,this.g=e||ie,this.j=Ke(this.lb,this),this.l=Date.now()}function Lr(s){s.ca=!1,s.R&&(s.g.clearTimeout(s.R),s.R=null)}function At(s,e,r){if("function"==typeof s)r&&(s=Ke(s,r));else{if(!s||"function"!=typeof s.handleEvent)throw Error("Invalid listener argument");s=Ke(s.handleEvent,s)}return 2147483647<Number(e)?-1:ie.setTimeout(s,e||0)}function jt(s){s.g=At(()=>{s.g=null,s.i&&(s.i=!1,jt(s))},s.j);const e=s.h;s.h=null,s.m.apply(null,e)}He(vr,yn),(V=vr.prototype).ca=!1,V.R=null,V.lb=function(){if(this.ca){var s=Date.now()-this.l;0<s&&s<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-s):(this.R&&(this.g.clearTimeout(this.R),this.R=null),rn(this,"tick"),this.ca&&(Lr(this),this.start()))}},V.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},V.M=function(){vr.X.M.call(this),Lr(this),delete this.g};class Hn extends gt{constructor(e,r){super(),this.m=e,this.j=r,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:jt(this)}M(){super.M(),this.g&&(ie.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sr(s){gt.call(this),this.h=s,this.g={}}He(sr,gt);var qn=[];function ln(s,e,r,a){Array.isArray(r)||(r&&(qn[0]=r.toString()),r=qn);for(var h=0;h<r.length;h++){var m=Fn(e,r[h],a||s.handleEvent,!1,s.h||s);if(!m)break;s.g[m.key]=m}}function Mr(s){vn(s.g,function(e,r){this.g.hasOwnProperty(r)&&li(e)},s),s.g={}}function cn(){this.g=!0}function Sr(s,e,r,a){s.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(s,e){if(!s.g)return e;if(!e)return null;try{var r=JSON.parse(e);if(r)for(s=0;s<r.length;s++)if(Array.isArray(r[s])){var a=r[s];if(!(2>a.length)){var h=a[1];if(Array.isArray(h)&&!(1>h.length)){var m=h[0];if("noop"!=m&&"stop"!=m&&"close"!=m)for(var C=1;C<h.length;C++)h[C]=""}}}return Ue(r)}catch(P){return e}}(s,r)+(a?" "+a:"")})}sr.prototype.M=function(){sr.X.M.call(this),Mr(this)},sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},cn.prototype.Aa=function(){this.g=!1},cn.prototype.info=function(){};var Or={},Dr=null;function Vr(){return Dr=Dr||new yn}function rs(s){Te.call(this,Or.Pa,s)}function kn(s){const e=Vr();rn(e,new rs(e,s))}function Cs(s,e){Te.call(this,Or.STAT_EVENT,s),this.stat=e}function Kr(s){const e=Vr();rn(e,new Cs(e,s))}function ki(s,e){Te.call(this,Or.Qa,s),this.size=e}function Di(s,e){if("function"!=typeof s)throw Error("Fn must not be null and must be a function");return ie.setTimeout(function(){s()},e)}Or.Pa="serverreachability",He(rs,Te),Or.STAT_EVENT="statevent",He(Cs,Te),Or.Qa="timingevent",He(ki,Te);var Ii={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},ut={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function z(){}function oe(){}z.prototype.h=null;var Ct,be={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Qe(){Te.call(this,"d")}function Xe(){Te.call(this,"c")}function xt(){}function Rt(s,e,r,a){this.l=s,this.j=e,this.m=r,this.U=a||1,this.S=new sr(this),this.O=fn,this.T=new vr(s=Ot?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Qt}function Qt(){this.i=null,this.g="",this.h=!1}He(Qe,Te),He(Xe,Te),He(xt,z),xt.prototype.g=function(){return new XMLHttpRequest},xt.prototype.i=function(){return{}},Ct=new xt;var fn=45e3,Wn={},Xn={};function ur(s,e,r){s.K=1,s.v=os(ro(e)),s.s=r,s.P=!0,Gi(s,null)}function Gi(s,e){s.F=Date.now(),ws(s),s.A=ro(s.v);var r=s.A,a=s.U;Array.isArray(a)||(a=[String(a)]),Vs(r.i,"t",a),s.C=0,r=s.l.H,s.h=new Qt,s.g=Eo(s.l,r?e:null,!s.s),0<s.N&&(s.L=new Hn(Ke(s.La,s,s.g),s.N)),ln(s.S,s.g,"readystatechange",s.ib),e=s.H?Fr(s.H):{},s.s?(s.u||(s.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",s.g.da(s.A,s.u,s.s,e)):(s.u="GET",s.g.da(s.A,s.u,null,e)),kn(1),function(s,e,r,a,h,m){s.info(function(){if(s.g)if(m)for(var C="",P=m.split("&"),X=0;X<P.length;X++){var se=P[X].split("=");if(1<se.length){var De=se[0];se=se[1];var Je=De.split("_");C=2<=Je.length&&"type"==Je[1]?C+(De+"=")+se+"&":C+(De+"=redacted&")}}else C=null;else C=m;return"XMLHTTP REQ ("+a+") [attempt "+h+"]: "+e+"\n"+r+"\n"+C})}(s.j,s.u,s.A,s.m,s.U,s.s)}function di(s){return!!s.g&&"GET"==s.u&&2!=s.K&&s.l.Da}function bi(s,e,r){let h,a=!0;for(;!s.I&&s.C<r.length;){if(h=_i(s,r),h==Xn){4==e&&(s.o=4,Kr(14),a=!1),Sr(s.j,s.m,null,"[Incomplete Response]");break}if(h==Wn){s.o=4,Kr(15),Sr(s.j,s.m,r,"[Invalid Chunk]"),a=!1;break}Sr(s.j,s.m,h,null),zo(s,h)}di(s)&&h!=Xn&&h!=Wn&&(s.h.g="",s.C=0),4!=e||0!=r.length||s.h.h||(s.o=1,Kr(16),a=!1),s.i=s.i&&a,a?0<r.length&&!s.$&&(s.$=!0,(e=s.l).g==s&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+r.length),Xi(e),e.K=!0,Kr(11))):(Sr(s.j,s.m,r,"[Invalid Chunked Response]"),ms(s),ss(s))}function _i(s,e){var r=s.C,a=e.indexOf("\n",r);return-1==a?Xn:(r=Number(e.substring(r,a)),isNaN(r)?Wn:(a+=1)+r>e.length?Xn:(e=e.substr(a,r),s.C=a+r,e))}function ws(s){s.V=Date.now()+s.O,Zr(s,s.O)}function Zr(s,e){if(null!=s.B)throw Error("WatchDog timer not null");s.B=Di(Ke(s.gb,s),e)}function is(s){s.B&&(ie.clearTimeout(s.B),s.B=null)}function ss(s){0==s.l.G||s.I||_o(s.l,s)}function ms(s){is(s);var e=s.L;e&&"function"==typeof e.na&&e.na(),s.L=null,Lr(s.T),Mr(s.S),s.g&&(e=s.g,s.g=null,e.abort(),e.na())}function zo(s,e){try{var r=s.l;if(0!=r.G&&(r.g==s||K(r.h,s)))if(!s.J&&K(r.h,s)&&3==r.G){try{var a=r.Fa.g.parse(e)}catch(se){a=null}if(Array.isArray(a)&&3==a.length){var h=a;if(0==h[0])e:if(r.u)r.Ba=h[1],0<r.Ba-r.T&&37500>h[2]&&r.L&&0==r.A&&!r.v&&(r.v=Di(Ke(r.cb,r),6e3));else{if(r.g){if(!(r.g.F+3e3<s.F))break e;xi(r),Si(r)}Bs(r),Kr(18)}if(1>=fe(r.h)&&r.ja){try{r.ja()}catch(se){}r.ja=void 0}}else As(r,11)}else if((s.J||r.g==s)&&xi(r),!we(e))for(h=r.Fa.g.parse(e),e=0;e<h.length;e++){let se=h[e];if(r.T=se[0],se=se[1],2==r.G)if("c"==se[0]){r.I=se[1],r.ka=se[2];const De=se[3];null!=De&&(r.ma=De,r.j.info("VER="+r.ma));const Je=se[4];null!=Je&&(r.Ca=Je,r.j.info("SVER="+r.Ca));const Tt=se[5];null!=Tt&&"number"==typeof Tt&&0<Tt&&(r.J=a=1.5*Tt,r.j.info("backChannelRequestTimeoutMs_="+a)),a=r;const zt=s.g;if(zt){const Zt=zt.g?zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zt){var m=a.h;m.g||-1==Zt.indexOf("spdy")&&-1==Zt.indexOf("quic")&&-1==Zt.indexOf("h2")||(m.j=m.l,m.g=new Set,m.h&&(ye(m,m.h),m.h=null))}if(a.D){const zn=zt.g?zt.g.getResponseHeader("X-HTTP-Session-Id"):null;zn&&(a.za=zn,ci(a.F,a.D,zn))}}r.G=3,r.l&&r.l.xa(),r.$&&(r.P=Date.now()-s.F,r.j.info("Handshake RTT: "+r.P+"ms"));var C=s;if((a=r).sa=vo(a,a.H?a.ka:null,a.V),C.J){Ze(a.h,C);var P=C,X=a.J;X&&P.setTimeout(X),P.B&&(is(P),ws(P)),a.g=C}else fl(a);0<r.i.length&&oo(r)}else"stop"!=se[0]&&"close"!=se[0]||As(r,7);else 3==r.G&&("stop"==se[0]||"close"==se[0]?"stop"==se[0]?As(r,7):so(r):"noop"!=se[0]&&r.l&&r.l.wa(se),r.A=0)}kn(4)}catch(se){}}function ho(s,e){if(s.forEach&&"function"==typeof s.forEach)s.forEach(e,void 0);else if(Ne(s)||"string"==typeof s)Array.prototype.forEach.call(s,e,void 0);else for(var r=function(s){if(s.oa&&"function"==typeof s.oa)return s.oa();if(!s.W||"function"!=typeof s.W){if("undefined"!=typeof Map&&s instanceof Map)return Array.from(s.keys());if(!("undefined"!=typeof Set&&s instanceof Set)){if(Ne(s)||"string"==typeof s){var e=[];s=s.length;for(var r=0;r<s;r++)e.push(r);return e}e=[],r=0;for(const a in s)e[r++]=a;return e}}}(s),a=function(s){if(s.W&&"function"==typeof s.W)return s.W();if("undefined"!=typeof Map&&s instanceof Map||"undefined"!=typeof Set&&s instanceof Set)return Array.from(s.values());if("string"==typeof s)return s.split("");if(Ne(s)){for(var e=[],r=s.length,a=0;a<r;a++)e.push(s[a]);return e}for(a in e=[],r=0,s)e[r++]=s[a];return e}(s),h=a.length,m=0;m<h;m++)e.call(void 0,a[m],r&&r[m],s)}(V=Rt.prototype).setTimeout=function(s){this.O=s},V.ib=function(s){s=s.target;const e=this.L;e&&3==Ss(s)?e.l():this.La(s)},V.La=function(s){try{if(s==this.g)e:{const De=Ss(this.g);var e=this.g.Ea();const Je=this.g.aa();if(!(3>De)&&(3!=De||Ot||this.g&&(this.h.h||this.g.fa()||Jo(this.g)))){this.I||4!=De||7==e||kn(8==e||0>=Je?3:2),is(this);var r=this.g.aa();this.Y=r;t:if(di(this)){var a=Jo(this.g);s="";var h=a.length,m=4==Ss(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ms(this),ss(this);var C="";break t}this.h.i=new ie.TextDecoder}for(e=0;e<h;e++)this.h.h=!0,s+=this.h.i.decode(a[e],{stream:m&&e==h-1});a.splice(0,h),this.h.g+=s,this.C=0,C=this.h.g}else C=this.g.fa();if(this.i=200==r,function(s,e,r,a,h,m,C){s.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+h+"]: "+e+"\n"+r+"\n"+m+" "+C})}(this.j,this.u,this.A,this.m,this.U,De,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var P,X=this.g;if((P=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!we(P)){var se=P;break t}}se=null}if(!(r=se)){this.i=!1,this.o=3,Kr(12),ms(this),ss(this);break e}Sr(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,zo(this,r)}this.P?(bi(this,De,C),Ot&&this.i&&3==De&&(ln(this.S,this.T,"tick",this.hb),this.T.start())):(Sr(this.j,this.m,C,null),zo(this,C)),4==De&&ms(this),this.i&&!this.I&&(4==De?_o(this.l,this):(this.i=!1,ws(this)))}else 400==r&&0<C.indexOf("Unknown SID")?(this.o=3,Kr(12)):(this.o=0,Kr(13)),ms(this),ss(this)}}}catch(De){}},V.hb=function(){if(this.g){var s=Ss(this.g),e=this.g.fa();this.C<e.length&&(is(this),bi(this,s,e),this.i&&4!=s&&ws(this))}},V.cancel=function(){this.I=!0,ms(this)},V.gb=function(){this.B=null;const s=Date.now();0<=s-this.V?(function(s,e){s.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(kn(3),Kr(17)),ms(this),this.o=2,ss(this)):Zr(this,this.V-s)};var xo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ts(s,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,s instanceof Ts){this.h=void 0!==e?e:s.h,fo(this,s.j),this.s=s.s,this.g=s.g,Ro(this,s.m),this.l=s.l,e=s.i;var r=new ys;r.i=e.i,e.g&&(r.g=new Map(e.g),r.h=e.h),io(this,r),this.o=s.o}else s&&(r=String(s).match(xo))?(this.h=!!e,fo(this,r[1]||"",!0),this.s=Fs(r[2]||""),this.g=Fs(r[3]||"",!0),Ro(this,r[4]),this.l=Fs(r[5]||"",!0),io(this,r[6]||"",!0),this.o=Fs(r[7]||"")):(this.h=!!e,this.i=new ys(null,this.h))}function ro(s){return new Ts(s)}function fo(s,e,r){s.j=r?Fs(e,!0):e,s.j&&(s.j=s.j.replace(/:$/,""))}function Ro(s,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);s.m=e}else s.m=null}function io(s,e,r){e instanceof ys?(s.i=e,function(s,e){e&&!s.j&&(Fi(s),s.i=null,s.g.forEach(function(r,a){var h=a.toLowerCase();a!=h&&(Ri(this,a),Vs(this,h,r))},s)),s.j=e}(s.i,s.h)):(r||(e=Hs(e,Nr)),s.i=new ys(e,s.h))}function ci(s,e,r){s.i.set(e,r)}function os(s){return ci(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function Fs(s,e){return s?e?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function Hs(s,e,r){return"string"==typeof s?(s=encodeURI(s).replace(e,Ls),r&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function Ls(s){return"%"+((s=s.charCodeAt(0))>>4&15).toString(16)+(15&s).toString(16)}Ts.prototype.toString=function(){var s=[],e=this.j;e&&s.push(Hs(e,ji,!0),":");var r=this.g;return(r||"file"==e)&&(s.push("//"),(e=this.s)&&s.push(Hs(e,ji,!0),"@"),s.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&s.push(":",String(r))),(r=this.l)&&(this.g&&"/"!=r.charAt(0)&&s.push("/"),s.push(Hs(r,"/"==r.charAt(0)?as:ga,!0))),(r=this.i.toString())&&s.push("?",r),(r=this.o)&&s.push("#",Hs(r,po)),s.join("")};var ji=/[#\/\?@]/g,ga=/[#\?:]/g,as=/[#\?]/g,Nr=/[#\?@]/g,po=/#/g;function ys(s,e){this.h=this.g=null,this.i=s||null,this.j=!!e}function Fi(s){s.g||(s.g=new Map,s.h=0,s.i&&function(s,e){if(s){s=s.split("&");for(var r=0;r<s.length;r++){var a=s[r].indexOf("="),h=null;if(0<=a){var m=s[r].substring(0,a);h=s[r].substring(a+1)}else m=s[r];e(m,h?decodeURIComponent(h.replace(/\+/g," ")):"")}}}(s.i,function(e,r){s.add(decodeURIComponent(e.replace(/\+/g," ")),r)}))}function Ri(s,e){Fi(s),e=_s(s,e),s.g.has(e)&&(s.i=null,s.h-=s.g.get(e).length,s.g.delete(e))}function Ws(s,e){return Fi(s),e=_s(s,e),s.g.has(e)}function Vs(s,e,r){Ri(s,e),0<r.length&&(s.i=null,s.g.set(_s(s,e),We(r)),s.h+=r.length)}function _s(s,e){return e=String(e),s.j&&(e=e.toLowerCase()),e}function oi(s){this.l=s||Ds,s=ie.PerformanceNavigationTiming?0<(s=ie.performance.getEntriesByType("navigation")).length&&("hq"==s[0].nextHopProtocol||"h2"==s[0].nextHopProtocol):!!(ie.g&&ie.g.Ga&&ie.g.Ga()&&ie.g.Ga().$b),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(V=ys.prototype).add=function(s,e){Fi(this),this.i=null,s=_s(this,s);var r=this.g.get(s);return r||this.g.set(s,r=[]),r.push(e),this.h+=1,this},V.forEach=function(s,e){Fi(this),this.g.forEach(function(r,a){r.forEach(function(h){s.call(e,h,a,this)},this)},this)},V.oa=function(){Fi(this);const s=Array.from(this.g.values()),e=Array.from(this.g.keys()),r=[];for(let a=0;a<e.length;a++){const h=s[a];for(let m=0;m<h.length;m++)r.push(e[a])}return r},V.W=function(s){Fi(this);let e=[];if("string"==typeof s)Ws(this,s)&&(e=e.concat(this.g.get(_s(this,s))));else{s=Array.from(this.g.values());for(let r=0;r<s.length;r++)e=e.concat(s[r])}return e},V.set=function(s,e){return Fi(this),this.i=null,Ws(this,s=_s(this,s))&&(this.h-=this.g.get(s).length),this.g.set(s,[e]),this.h+=1,this},V.get=function(s,e){return s&&0<(s=this.W(s)).length?String(s[0]):e},V.toString=function(){if(this.i)return this.i;if(!this.g)return"";const s=[],e=Array.from(this.g.keys());for(var r=0;r<e.length;r++){var a=e[r];const m=encodeURIComponent(String(a)),C=this.W(a);for(a=0;a<C.length;a++){var h=m;""!==C[a]&&(h+="="+encodeURIComponent(String(C[a]))),s.push(h)}}return this.i=s.join("&")};var Ds=10;function q(s){return!!s.h||!!s.g&&s.g.size>=s.j}function fe(s){return s.h?1:s.g?s.g.size:0}function K(s,e){return s.h?s.h==e:!!s.g&&s.g.has(e)}function ye(s,e){s.g?s.g.add(e):s.h=e}function Ze(s,e){s.h&&s.h==e?s.h=null:s.g&&s.g.has(e)&&s.g.delete(e)}function Dt(s){if(null!=s.h)return s.i.concat(s.h.D);if(null!=s.g&&0!==s.g.size){let e=s.i;for(const r of s.g.values())e=e.concat(r.D);return e}return We(s.i)}function Jt(){}function G(){this.g=new Jt}function H(s,e,r){const a=r||"";try{ho(s,function(h,m){let C=h;le(h)&&(C=Ue(h)),e.push(a+m+"="+encodeURIComponent(C))})}catch(h){throw e.push(a+"type="+encodeURIComponent("_badmap")),h}}function ue(s,e,r,a,h){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,h(a)}catch(m){}}function pt(s){this.l=s.ac||null,this.j=s.jb||!1}function pn(s,e){yn.call(this),this.D=s,this.u=e,this.m=void 0,this.readyState=Gn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}oi.prototype.cancel=function(){if(this.i=Dt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const s of this.g.values())s.cancel();this.g.clear()}},Jt.prototype.stringify=function(s){return ie.JSON.stringify(s,void 0)},Jt.prototype.parse=function(s){return ie.JSON.parse(s,void 0)},He(pt,z),pt.prototype.g=function(){return new pn(this.l,this.j)},pt.prototype.i=function(s){return function(){return s}}({}),He(pn,yn);var Gn=0;function ei(s){s.j.read().then(s.Ta.bind(s)).catch(s.ga.bind(s))}function Li(s){s.readyState=4,s.l=null,s.j=null,s.A=null,Ci(s)}function Ci(s){s.onreadystatechange&&s.onreadystatechange.call(s)}(V=pn.prototype).open=function(s,e){if(this.readyState!=Gn)throw this.abort(),Error("Error reopening a connection");this.C=s,this.B=e,this.readyState=1,Ci(this)},V.send=function(s){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};s&&(e.body=s),(this.D||ie).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},V.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Li(this)),this.readyState=Gn},V.Wa=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,Ci(this)),this.g&&(this.readyState=3,Ci(this),this.g)))if("arraybuffer"===this.responseType)s.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==ie.ReadableStream&&"body"in s){if(this.j=s.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ei(this)}else s.text().then(this.Va.bind(this),this.ga.bind(this))},V.Ta=function(s){if(this.g){if(this.u&&s.value)this.response.push(s.value);else if(!this.u){var e=s.value?s.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!s.done}))&&(this.response=this.responseText+=e)}s.done?Li(this):Ci(this),3==this.readyState&&ei(this)}},V.Va=function(s){this.g&&(this.response=this.responseText=s,Li(this))},V.Ua=function(s){this.g&&(this.response=s,Li(this))},V.ga=function(){this.g&&Li(this)},V.setRequestHeader=function(s,e){this.v.append(s,e)},V.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},V.getAllResponseHeaders=function(){if(!this.h)return"";const s=[],e=this.h.entries();for(var r=e.next();!r.done;)s.push((r=r.value)[0]+": "+r[1]),r=e.next();return s.join("\r\n")},Object.defineProperty(pn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(s){this.m=s?"include":"same-origin"}});var Pr=ie.JSON.parse;function Hr(s){yn.call(this),this.headers=new Map,this.u=s||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=$s,this.K=this.L=!1}He(Hr,yn);var $s="",Xo=/^https?$/i,Ki=["POST","PUT"];function ya(s,e){s.h=!1,s.g&&(s.l=!0,s.g.abort(),s.l=!1),s.j=e,s.m=5,yr(s),Mo(s)}function yr(s){s.D||(s.D=!0,rn(s,"complete"),rn(s,"error"))}function qa(s){if(s.h&&void 0!==Ie&&(!s.C[1]||4!=Ss(s)||2!=s.aa()))if(s.v&&4==Ss(s))At(s.Ha,0,s);else if(rn(s,"readystatechange"),4==Ss(s)){s.h=!1;try{const P=s.aa();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var r;if(!(r=e)){var a;if(a=0===P){var h=String(s.H).match(xo)[1]||null;if(!h&&ie.self&&ie.self.location){var m=ie.self.location.protocol;h=m.substr(0,m.length-1)}a=!Xo.test(h?h.toLowerCase():"")}r=a}if(r)rn(s,"complete"),rn(s,"success");else{s.m=6;try{var C=2<Ss(s)?s.g.statusText:""}catch(X){C=""}s.j=C+" ["+s.aa()+"]",yr(s)}}finally{Mo(s)}}}function Mo(s,e){if(s.g){Aa(s);const r=s.g,a=s.C[0]?ae:null;s.g=null,s.C=null,e||rn(s,"ready");try{r.onreadystatechange=a}catch(h){}}}function Aa(s){s.g&&s.K&&(s.g.ontimeout=null),s.A&&(ie.clearTimeout(s.A),s.A=null)}function Ss(s){return s.g?s.g.readyState:0}function Jo(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.J){case $s:case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ya(s){let e="";return vn(s,function(r,a){e+=a,e+=":",e+=r,e+="\r\n"}),e}function Gs(s,e,r){e:{for(a in r){var a=!1;break e}a=!0}a||(r=Ya(r),"string"==typeof s?null!=r&&encodeURIComponent(String(r)):ci(s,e,r))}function en(s,e,r){return r&&r.internalChannelParams&&r.internalChannelParams[s]||e}function Ur(s){this.Ca=0,this.i=[],this.j=new cn,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=en("failFast",!1,s),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=en("baseRetryDelayMs",5e3,s),this.bb=en("retryDelaySeedMs",1e4,s),this.$a=en("forwardChannelMaxRetries",2,s),this.ta=en("forwardChannelRequestTimeoutMs",2e4,s),this.ra=s&&s.xmlHttpFactory||void 0,this.Da=s&&s.Zb||!1,this.J=void 0,this.H=s&&s.supportsCrossDomainXhr||!1,this.I="",this.h=new oi(s&&s.concurrentRequestLimit),this.Fa=new G,this.O=s&&s.fastHandshake||!1,this.N=s&&s.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=s&&s.Xb||!1,s&&s.Aa&&this.j.Aa(),s&&s.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&s&&s.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function so(s){if(ea(s),3==s.G){var e=s.U++,r=ro(s.F);ci(r,"SID",s.I),ci(r,"RID",e),ci(r,"TYPE","terminate"),_a(s,r),(e=new Rt(s,s.j,e,void 0)).K=2,e.v=os(ro(r)),r=!1,ie.navigator&&ie.navigator.sendBeacon&&(r=ie.navigator.sendBeacon(e.v.toString(),"")),!r&&ie.Image&&((new Image).src=e.v,r=!0),r||(e.g=Eo(e.l,null),e.g.da(e.v)),e.F=Date.now(),ws(e)}va(s)}function Si(s){s.g&&(Xi(s),s.g.cancel(),s.g=null)}function ea(s){Si(s),s.u&&(ie.clearTimeout(s.u),s.u=null),xi(s),s.h.cancel(),s.m&&("number"==typeof s.m&&ie.clearTimeout(s.m),s.m=null)}function oo(s){q(s.h)||s.m||(s.m=!0,vt(s.Ja,s),s.C=0)}function qs(s,e){var r;r=e?e.m:s.U++;const a=ro(s.F);ci(a,"SID",s.I),ci(a,"RID",r),ci(a,"AID",s.T),_a(s,a),s.o&&s.s&&Gs(a,s.o,s.s),r=new Rt(s,s.j,r,s.C+1),null===s.o&&(r.H=s.s),e&&(s.i=e.D.concat(s.i)),e=hl(s,r,1e3),r.setTimeout(Math.round(.5*s.ta)+Math.round(.5*s.ta*Math.random())),ye(s.h,r),ur(r,a,e)}function _a(s,e){s.ia&&vn(s.ia,function(r,a){ci(e,a,r)}),s.l&&ho({},function(r,a){ci(e,a,r)})}function hl(s,e,r){r=Math.min(s.i.length,r);var a=s.l?Ke(s.l.Ra,s.l,s):null;e:{var h=s.i;let m=-1;for(;;){const C=["count="+r];-1==m?0<r?(m=h[0].h,C.push("ofs="+m)):m=0:C.push("ofs="+m);let P=!0;for(let X=0;X<r;X++){let se=h[X].h;const De=h[X].g;if(se-=m,0>se)m=Math.max(0,h[X].h-100),P=!1;else try{H(De,C,"req"+se+"_")}catch(Je){a&&a(De)}}if(P){a=C.join("&");break e}}}return s=s.i.splice(0,r),e.D=s,a}function fl(s){s.g||s.u||(s.Z=1,vt(s.Ia,s),s.A=0)}function Bs(s){return!(s.g||s.u||3<=s.A||(s.Z++,s.u=Di(Ke(s.Ia,s),cs(s,s.A)),s.A++,0))}function Xi(s){null!=s.B&&(ie.clearTimeout(s.B),s.B=null)}function Ai(s){s.g=new Rt(s,s.j,"rpc",s.Z),null===s.o&&(s.g.H=s.s),s.g.N=0;var e=ro(s.sa);ci(e,"RID","rpc"),ci(e,"SID",s.I),ci(e,"CI",s.L?"0":"1"),ci(e,"AID",s.T),ci(e,"TYPE","xmlhttp"),_a(s,e),s.o&&s.s&&Gs(e,s.o,s.s),s.J&&s.g.setTimeout(s.J);var r=s.g;s=s.ka,r.K=1,r.v=os(ro(e)),r.s=null,r.P=!0,Gi(r,s)}function xi(s){null!=s.v&&(ie.clearTimeout(s.v),s.v=null)}function _o(s,e){var r=null;if(s.g==e){xi(s),Xi(s),s.g=null;var a=2}else{if(!K(s.h,e))return;r=e.D,Ze(s.h,e),a=1}if(0!=s.G)if(s.pa=e.Y,e.i)if(1==a){r=e.s?e.s.length:0,e=Date.now()-e.F;var h=s.C;rn(a=Vr(),new ki(a,r,e,h)),oo(s)}else fl(s);else if(3==(h=e.o)||0==h&&0<s.pa||!(1==a&&function(s,e){return!(fe(s.h)>=s.h.j-(s.m?1:0)||(s.m?(s.i=e.D.concat(s.i),0):1==s.G||2==s.G||s.C>=(s.Za?0:s.$a)||(s.m=Di(Ke(s.Ja,s,e),cs(s,s.C)),s.C++,0)))}(s,e)||2==a&&Bs(s)))switch(r&&0<r.length&&(e=s.h,e.i=e.i.concat(r)),h){case 1:As(s,5);break;case 4:As(s,10);break;case 3:As(s,6);break;default:As(s,2)}}function cs(s,e){let r=s.Xa+Math.floor(Math.random()*s.bb);return s.l||(r*=2),r*e}function As(s,e){if(s.j.info("Error code "+e),2==e){var r=null;s.l&&(r=null);var a=Ke(s.kb,s);r||(r=new Ts("//www.google.com/images/cleardot.gif"),ie.location&&"http"==ie.location.protocol||fo(r,"https"),os(r)),function(s,e){const r=new cn;if(ie.Image){const a=new Image;a.onload=$e(ue,r,a,"TestLoadImage: loaded",!0,e),a.onerror=$e(ue,r,a,"TestLoadImage: error",!1,e),a.onabort=$e(ue,r,a,"TestLoadImage: abort",!1,e),a.ontimeout=$e(ue,r,a,"TestLoadImage: timeout",!1,e),ie.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=s}else e(!1)}(r.toString(),a)}else Kr(2);s.G=0,s.l&&s.l.va(e),va(s),ea(s)}function va(s){if(s.G=0,s.la=[],s.l){const e=Dt(s.h);(0!=e.length||0!=s.i.length)&&(_t(s.la,e),_t(s.la,s.i),s.h.i.length=0,We(s.i),s.i.length=0),s.l.ua()}}function vo(s,e,r){var a=r instanceof Ts?ro(r):new Ts(r,void 0);if(""!=a.g)e&&(a.g=e+"."+a.g),Ro(a,a.m);else{var h=ie.location;a=h.protocol,e=e?e+"."+h.hostname:h.hostname,h=+h.port;var m=new Ts(null,void 0);a&&fo(m,a),e&&(m.g=e),h&&Ro(m,h),r&&(m.l=r),a=m}return e=s.za,(r=s.D)&&e&&ci(a,r,e),ci(a,"VER",s.ma),_a(s,a),a}function Eo(s,e,r){if(e&&!s.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Hr(r&&s.Da&&!s.ra?new pt({jb:!0}):s.ra)).Ka(s.H),e}function xa(){}function ta(){if(st&&!(10<=Number(an)))throw Error("Environmental error: no available transport.")}function hi(s,e){yn.call(this),this.g=new Ur(e),this.l=s,this.h=e&&e.messageUrlParams||null,s=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.s=s,s=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(s?s["X-WebChannel-Content-Type"]=e.messageContentType:s={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(s?s["X-WebChannel-Client-Profile"]=e.ya:s={"X-WebChannel-Client-Profile":e.ya}),this.g.S=s,(s=e&&e.Yb)&&!we(s)&&(this.g.o=s),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!we(e)&&(this.g.D=e,null!==(s=this.h)&&e in s&&e in(s=this.h)&&delete s[e]),this.j=new qo(this)}function ao(s){Qe.call(this);var e=s.__sm__;if(e){e:{for(const r in e){s=r;break e}s=void 0}(this.i=s)&&(s=this.i,e=null!==e&&s in e?e[s]:void 0),this.data=e}else this.data=s}function Ka(){Xe.call(this),this.status=1}function qo(s){this.g=s}(V=Hr.prototype).Ka=function(s){this.L=s},V.da=function(s,e,r,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+s);e=e?e.toUpperCase():"GET",this.H=s,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ct.g(),this.C=function(s){return s.h||(s.h=s.i())}(this.u?this.u:Ct),this.g.onreadystatechange=Ke(this.Ha,this);try{this.F=!0,this.g.open(e,String(s),!0),this.F=!1}catch(m){return void ya(this,m)}if(s=r||"",r=new Map(this.headers),a)if(Object.getPrototypeOf(a)===Object.prototype)for(var h in a)r.set(h,a[h]);else{if("function"!=typeof a.keys||"function"!=typeof a.get)throw Error("Unknown input type for opt_headers: "+String(a));for(const m of a.keys())r.set(m,a.get(m))}a=Array.from(r.keys()).find(m=>"content-type"==m.toLowerCase()),h=ie.FormData&&s instanceof ie.FormData,!(0<=E(Ki,e))||a||h||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[m,C]of r)this.g.setRequestHeader(m,C);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Aa(this),0<this.B&&((this.K=function(s){return st&&br()&&"number"==typeof s.timeout&&void 0!==s.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ke(this.qa,this)):this.A=At(this.qa,this.B,this)),this.v=!0,this.g.send(s),this.v=!1}catch(m){ya(this,m)}},V.qa=function(){void 0!==Ie&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,rn(this,"timeout"),this.abort(8))},V.abort=function(s){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=s||7,rn(this,"complete"),rn(this,"abort"),Mo(this))},V.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Mo(this,!0)),Hr.X.M.call(this)},V.Ha=function(){this.s||(this.F||this.v||this.l?qa(this):this.fb())},V.fb=function(){qa(this)},V.aa=function(){try{return 2<Ss(this)?this.g.status:-1}catch(s){return-1}},V.fa=function(){try{return this.g?this.g.responseText:""}catch(s){return""}},V.Sa=function(s){if(this.g){var e=this.g.responseText;return s&&0==e.indexOf(s)&&(e=e.substring(s.length)),Pr(e)}},V.Ea=function(){return this.m},V.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(V=Ur.prototype).ma=8,V.G=1,V.Ja=function(s){if(this.m)if(this.m=null,1==this.G){if(!s){this.U=Math.floor(1e5*Math.random()),s=this.U++;const h=new Rt(this,this.j,s,void 0);let m=this.s;if(this.S&&(m?(m=Fr(m),Br(m,this.S)):m=this.S),null!==this.o||this.N||(h.H=m,m=null),this.O)e:{for(var e=0,r=0;r<this.i.length;r++){var a=this.i[r];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(e+=a)){e=r;break e}if(4096===e||r===this.i.length-1){e=r+1;break e}}e=1e3}else e=1e3;e=hl(this,h,e),ci(r=ro(this.F),"RID",s),ci(r,"CVER",22),this.D&&ci(r,"X-HTTP-Session-Id",this.D),_a(this,r),m&&(this.N?e="headers="+encodeURIComponent(String(Ya(m)))+"&"+e:this.o&&Gs(r,this.o,m)),ye(this.h,h),this.Ya&&ci(r,"TYPE","init"),this.O?(ci(r,"$req",e),ci(r,"SID","null"),h.Z=!0,ur(h,r,null)):ur(h,r,e),this.G=2}}else 3==this.G&&(s?qs(this,s):0==this.i.length||q(this.h)||qs(this))},V.Ia=function(){if(this.u=null,Ai(this),this.$&&!(this.K||null==this.g||0>=this.P)){var s=2*this.P;this.j.info("BP detection timer enabled: "+s),this.B=Di(Ke(this.eb,this),s)}},V.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Kr(10),Si(this),Ai(this))},V.cb=function(){null!=this.v&&(this.v=null,Si(this),Bs(this),Kr(19))},V.kb=function(s){s?(this.j.info("Successfully pinged google.com"),Kr(2)):(this.j.info("Failed to ping google.com"),Kr(1))},(V=xa.prototype).xa=function(){},V.wa=function(){},V.va=function(){},V.ua=function(){},V.Ra=function(){},ta.prototype.g=function(s,e){return new hi(s,e)},He(hi,yn),hi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var s=this.g,e=this.l,r=this.h||void 0;Kr(0),s.V=e,s.ia=r||{},s.L=s.Y,s.F=vo(s,null,s.V),oo(s)},hi.prototype.close=function(){so(this.g)},hi.prototype.u=function(s){var e=this.g;if("string"==typeof s){var r={};r.__data__=s,s=r}else this.v&&((r={}).__data__=Ue(s),s=r);e.i.push(new class{constructor(s,e){this.h=s,this.g=e}}(e.ab++,s)),3==e.G&&oo(e)},hi.prototype.M=function(){this.g.l=null,delete this.j,so(this.g),delete this.g,hi.X.M.call(this)},He(ao,Qe),He(Ka,Xe),He(qo,xa),qo.prototype.xa=function(){rn(this.g,"a")},qo.prototype.wa=function(s){rn(this.g,new ao(s))},qo.prototype.va=function(s){rn(this.g,new Ka(s))},qo.prototype.ua=function(){rn(this.g,"b")},ta.prototype.createWebChannel=ta.prototype.g,hi.prototype.send=hi.prototype.u,hi.prototype.open=hi.prototype.m,hi.prototype.close=hi.prototype.close,Ii.NO_ERROR=0,Ii.TIMEOUT=8,Ii.HTTP_ERROR=6,ut.COMPLETE="complete",oe.EventType=be,be.OPEN="a",be.CLOSE="b",be.ERROR="c",be.MESSAGE="d",yn.prototype.listen=yn.prototype.N,Hr.prototype.listenOnce=Hr.prototype.O,Hr.prototype.getLastError=Hr.prototype.Oa,Hr.prototype.getLastErrorCode=Hr.prototype.Ea,Hr.prototype.getStatus=Hr.prototype.aa,Hr.prototype.getResponseJson=Hr.prototype.Sa,Hr.prototype.getResponseText=Hr.prototype.fa,Hr.prototype.send=Hr.prototype.da,Hr.prototype.setWithCredentials=Hr.prototype.Ka;var na=ne.createWebChannelTransport=function(){return new ta},Io=ne.getStatEventTarget=function(){return Vr()},go=ne.ErrorCode=Ii,w=ne.EventType=ut,k=ne.Event=Or,T=ne.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Z=ne.FetchXmlHttpFactory=pt,pe=ne.WebChannel=oe,ht=ne.XhrIo=Hr;const Ut="@firebase/firestore";class on{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");let $n="9.12.1";const Ln=new Me.Yd("@firebase/firestore");function Wr(){return Ln.logLevel}function vi(s){Ln.setLogLevel(s)}function Ht(s,...e){if(Ln.logLevel<=Me.in.DEBUG){const r=e.map(Ys);Ln.debug(`Firestore (${$n}): ${s}`,...r)}}function pr(s,...e){if(Ln.logLevel<=Me.in.ERROR){const r=e.map(Ys);Ln.error(`Firestore (${$n}): ${s}`,...r)}}function us(s,...e){if(Ln.logLevel<=Me.in.WARN){const r=e.map(Ys);Ln.warn(`Firestore (${$n}): ${s}`,...r)}}function Ys(s){if("string"==typeof s)return s;try{return JSON.stringify(s)}catch(r){return s}}function Bn(s="Unexpected state"){const e=`FIRESTORE (${$n}) INTERNAL ASSERTION FAILED: `+s;throw pr(e),new Error(e)}function or(s,e){s||Bn()}function Ra(s,e){s||Bn()}function _n(s,e){return s}const Et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Nt extends ce.ZR{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Zn{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}class Yo{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fi{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(on.UNAUTHENTICATED))}shutdown(){}}class Es{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class lc{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){var a=this;let h=this.i;const m=se=>this.i!==h?(h=this.i,r(se)):Promise.resolve();let C=new Zn;this.o=()=>{this.i++,this.currentUser=this.u(),C.resolve(),C=new Zn,e.enqueueRetryable(()=>m(this.currentUser))};const P=()=>{const se=C;e.enqueueRetryable((0,_.Z)(function*(){yield se.promise,yield m(a.currentUser)}))},X=se=>{Ht("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=se,this.auth.addAuthTokenListener(this.o),P()};this.t.onInit(se=>X(se)),setTimeout(()=>{if(!this.auth){const se=this.t.getImmediate({optional:!0});se?X(se):(Ht("FirebaseAuthCredentialsProvider","Auth not yet detected"),C.resolve(),C=new Zn)}},0),P()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(a=>this.i!==e?(Ht("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(or("string"==typeof a.accessToken),new Yo(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return or(null===e||"string"==typeof e),new on(e)}}class Dl{constructor(e,r,a,h){this.h=e,this.l=r,this.m=a,this.g=h,this.type="FirstParty",this.user=on.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(or(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class cc{constructor(e,r,a,h){this.h=e,this.l=r,this.m=a,this.g=h}getToken(){return Promise.resolve(new Dl(this.h,this.l,this.m,this.g))}start(e,r){e.enqueueRetryable(()=>r(on.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Pi{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ti{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,r){const a=m=>{null!=m.error&&Ht("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const C=m.token!==this.A;return this.A=m.token,Ht("FirebaseAppCheckTokenProvider",`Received ${C?"new":"existing"} token.`),C?r(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable(()=>a(m))};const h=m=>{Ht("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.appCheck.addTokenListener(this.o)};this.T.onInit(m=>h(m)),setTimeout(()=>{if(!this.appCheck){const m=this.T.getImmediate({optional:!0});m?h(m):Ht("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(or("string"==typeof r.token),this.A=r.token,new Pi(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function zl(s){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(s);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(r);else for(let a=0;a<s;a++)r[a]=Math.floor(256*Math.random());return r}class Ma{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let a="";for(;a.length<20;){const h=zl(40);for(let m=0;m<h.length;++m)a.length<20&&h[m]<r&&(a+=e.charAt(h[m]%e.length))}return a}}function ar(s,e){return s<e?-1:s>e?1:0}function Ks(s,e,r){return s.length===e.length&&s.every((a,h)=>r(a,e[h]))}function Po(s){return s+"\0"}class Ei{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Nt(Et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Nt(Et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Nt(Et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Nt(Et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ei.fromMillis(Date.now())}static fromDate(e){return Ei.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),a=Math.floor(1e6*(e-1e3*r));return new Ei(r,a)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ar(this.nanoseconds,e.nanoseconds):ar(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Er{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Er(e)}static min(){return new Er(new Ei(0,0))}static max(){return new Er(new Ei(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Zs{constructor(e,r,a){void 0===r?r=0:r>e.length&&Bn(),void 0===a?a=e.length-r:a>e.length-r&&Bn(),this.segments=e,this.offset=r,this.len=a}get length(){return this.len}isEqual(e){return 0===Zs.comparator(this,e)}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Zs?e.forEach(a=>{r.push(a)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,a=this.limit();r<a;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const a=Math.min(e.length,r.length);for(let h=0;h<a;h++){const m=e.get(h),C=r.get(h);if(m<C)return-1;if(m>C)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Gr extends Zs{construct(e,r,a){return new Gr(e,r,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const r=[];for(const a of e){if(a.indexOf("//")>=0)throw new Nt(Et.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);r.push(...a.split("/").filter(h=>h.length>0))}return new Gr(r)}static emptyPath(){return new Gr([])}}const Pa=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vi extends Zs{construct(e,r,a){return new Vi(e,r,a)}static isValidIdentifier(e){return Pa.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Vi(["__name__"])}static fromServerFormat(e){const r=[];let a="",h=0;const m=()=>{if(0===a.length)throw new Nt(Et.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(a),a=""};let C=!1;for(;h<e.length;){const P=e[h];if("\\"===P){if(h+1===e.length)throw new Nt(Et.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const X=e[h+1];if("\\"!==X&&"."!==X&&"`"!==X)throw new Nt(Et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=X,h+=2}else"`"===P?(C=!C,h++):"."!==P||C?(a+=P,h++):(m(),h++)}if(m(),C)throw new Nt(Et.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vi(r)}static emptyPath(){return new Vi([])}}class Tn{constructor(e){this.path=e}static fromPath(e){return new Tn(Gr.fromString(e))}static fromName(e){return new Tn(Gr.fromString(e).popFirst(5))}static empty(){return new Tn(Gr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Gr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,r){return Gr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Tn(new Gr(e.slice()))}}class Oa{constructor(e,r,a,h){this.indexId=e,this.collectionGroup=r,this.fields=a,this.indexState=h}}function pl(s){return s.fields.find(e=>2===e.kind)}function ra(s){return s.fields.filter(e=>2!==e.kind)}Oa.UNKNOWN_ID=-1;class Qs{constructor(e,r){this.fieldPath=e,this.kind=r}}class Oo{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Oo(0,$i.min())}}function No(s,e){const r=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,h=Er.fromTimestamp(1e9===a?new Ei(r+1,0):new Ei(r,a));return new $i(h,Tn.empty(),e)}function uc(s){return new $i(s.readTime,s.key,-1)}class $i{constructor(e,r,a){this.readTime=e,this.documentKey=r,this.largestBatchId=a}static min(){return new $i(Er.min(),Tn.empty(),-1)}static max(){return new $i(Er.max(),Tn.empty(),-1)}}function F(s,e){let r=s.readTime.compareTo(e.readTime);return 0!==r?r:(r=Tn.comparator(s.documentKey,e.documentKey),0!==r?r:ar(s.largestBatchId,e.largestBatchId))}const x="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class S{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function B(s){return J.apply(this,arguments)}function J(){return J=(0,_.Z)(function*(s){if(s.code!==Et.FAILED_PRECONDITION||s.message!==x)throw s;Ht("LocalStore","Unexpectedly lost primary lease")}),J.apply(this,arguments)}class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Bn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Q((a,h)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(a,h)},this.catchCallback=m=>{this.wrapFailure(r,m).next(a,h)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Q?r:Q.resolve(r)}catch(r){return Q.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Q.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Q.reject(r)}static resolve(e){return new Q((r,a)=>{r(e)})}static reject(e){return new Q((r,a)=>{a(e)})}static waitFor(e){return new Q((r,a)=>{let h=0,m=0,C=!1;e.forEach(P=>{++h,P.next(()=>{++m,C&&m===h&&r()},X=>a(X))}),C=!0,m===h&&r()})}static or(e){let r=Q.resolve(!1);for(const a of e)r=r.next(h=>h?Q.resolve(h):a());return r}static forEach(e,r){const a=[];return e.forEach((h,m)=>{a.push(r.call(this,h,m))}),this.waitFor(a)}static mapArray(e,r){return new Q((a,h)=>{const m=e.length,C=new Array(m);let P=0;for(let X=0;X<m;X++){const se=X;r(e[se]).next(De=>{C[se]=De,++P,P===m&&a(C)},De=>h(De))}})}static doWhile(e,r){return new Q((a,h)=>{const m=()=>{!0===e()?r().next(()=>{m()},h):a()};m()})}}class Be{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.P=new Zn,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{r.error?this.P.reject(new Pn(e,r.error)):this.P.resolve()},this.transaction.onerror=a=>{const h=Xs(a.target.error);this.P.reject(new Pn(e,h))}}static open(e,r,a,h){try{return new Be(r,e.transaction(h,a))}catch(m){throw new Pn(r,m)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ht("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const r=this.transaction.objectStore(e);return new Yn(r)}}class rt{constructor(e,r,a){this.name=e,this.version=r,this.S=a,12.2===rt.D((0,ce.z$)())&&pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ht("SimpleDb","Removing database:",e),ii(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,ce.hl)())return!1;if(rt.N())return!0;const e=(0,ce.z$)(),r=rt.D(e),a=0<r&&r<10,h=rt.k(e),m=0<h&&h<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||a||m)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,r){return e.store(r)}static D(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(a)}static k(e){const r=e.match(/Android ([\d.]+)/i),a=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(a)}F(e){var r=this;return(0,_.Z)(function*(){return r.db||(Ht("SimpleDb","Opening database:",r.name),r.db=yield new Promise((a,h)=>{const m=indexedDB.open(r.name,r.version);m.onsuccess=C=>{a(C.target.result)},m.onblocked=()=>{h(new Pn(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},m.onerror=C=>{const P=C.target.error;h("VersionError"===P.name?new Nt(Et.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===P.name?new Nt(Et.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+P):new Pn(e,P))},m.onupgradeneeded=C=>{Ht("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',C.oldVersion),r.S.$(C.target.result,m.transaction,C.oldVersion,r.version).next(()=>{Ht("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.B&&(r.db.onversionchange=a=>r.B(a)),r.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=r=>e(r))}runTransaction(e,r,a,h){var m=this;return(0,_.Z)(function*(){const C="readonly"===r;let P=0;for(;;){++P;try{m.db=yield m.F(e);const X=Be.open(m.db,e,C?"readonly":"readwrite",a),se=h(X).next(De=>(X.V(),De)).catch(De=>(X.abort(De),Q.reject(De))).toPromise();return se.catch(()=>{}),yield X.v,se}catch(X){const se=X,De="FirebaseError"!==se.name&&P<3;if(Ht("SimpleDb","Transaction failed with error:",se.message,"Retrying:",De),m.close(),!De)return Promise.reject(se)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Bt{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return ii(this.U.delete())}}class Pn extends Nt{constructor(e,r){super(Et.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Ar(s){return"IndexedDbTransactionError"===s.name}class Yn{constructor(e){this.store=e}put(e,r){let a;return void 0!==r?(Ht("SimpleDb","PUT",this.store.name,e,r),a=this.store.put(r,e)):(Ht("SimpleDb","PUT",this.store.name,"<auto-key>",e),a=this.store.put(e)),ii(a)}add(e){return Ht("SimpleDb","ADD",this.store.name,e,e),ii(this.store.add(e))}get(e){return ii(this.store.get(e)).next(r=>(void 0===r&&(r=null),Ht("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return Ht("SimpleDb","DELETE",this.store.name,e),ii(this.store.delete(e))}count(){return Ht("SimpleDb","COUNT",this.store.name),ii(this.store.count())}W(e,r){const a=this.options(e,r);if(a.index||"function"!=typeof this.store.getAll){const h=this.cursor(a),m=[];return this.H(h,(C,P)=>{m.push(P)}).next(()=>m)}{const h=this.store.getAll(a.range);return new Q((m,C)=>{h.onerror=P=>{C(P.target.error)},h.onsuccess=P=>{m(P.target.result)}})}}J(e,r){const a=this.store.getAll(e,null===r?void 0:r);return new Q((h,m)=>{a.onerror=C=>{m(C.target.error)},a.onsuccess=C=>{h(C.target.result)}})}Y(e,r){Ht("SimpleDb","DELETE ALL",this.store.name);const a=this.options(e,r);a.X=!1;const h=this.cursor(a);return this.H(h,(m,C,P)=>P.delete())}Z(e,r){let a;r?a=e:(a={},r=e);const h=this.cursor(a);return this.H(h,r)}tt(e){const r=this.cursor({});return new Q((a,h)=>{r.onerror=m=>{const C=Xs(m.target.error);h(C)},r.onsuccess=m=>{const C=m.target.result;C?e(C.primaryKey,C.value).next(P=>{P?C.continue():a()}):a()}})}H(e,r){const a=[];return new Q((h,m)=>{e.onerror=C=>{m(C.target.error)},e.onsuccess=C=>{const P=C.target.result;if(!P)return void h();const X=new Bt(P),se=r(P.primaryKey,P.value,X);if(se instanceof Q){const De=se.catch(Je=>(X.done(),Q.reject(Je)));a.push(De)}X.isDone?h():null===X.G?P.continue():P.continue(X.G)}}).next(()=>Q.waitFor(a))}options(e,r){let a;return void 0!==e&&("string"==typeof e?a=e:r=e),{index:a,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const a=this.store.index(e.index);return e.X?a.openKeyCursor(e.range,r):a.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function ii(s){return new Q((e,r)=>{s.onsuccess=a=>{e(a.target.result)},s.onerror=a=>{const h=Xs(a.target.error);r(h)}})}let qr=!1;function Xs(s){const e=rt.D((0,ce.z$)());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(r)>=0){const a=new Nt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return qr||(qr=!0,setTimeout(()=>{throw a},0)),a}}return s}class xs{constructor(e,r){this.asyncQueue=e,this.et=r,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var r=this;Ht("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,_.Z)(function*(){r.task=null;try{Ht("IndexBackiller",`Documents written: ${yield r.et.st()}`)}catch(a){Ar(a)?Ht("IndexBackiller","Ignoring IndexedDB error during index backfill: ",a):yield B(a)}yield r.nt(6e4)}))}}class js{constructor(e,r){this.localStore=e,this.persistence=r}st(e=50){var r=this;return(0,_.Z)(function*(){return r.persistence.runTransaction("Backfill Indexes","readwrite-primary",a=>r.it(a,e))})()}it(e,r){const a=new Set;let h=r,m=!0;return Q.doWhile(()=>!0===m&&h>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(C=>{if(null!==C&&!a.has(C))return Ht("IndexBackiller",`Processing collection: ${C}`),this.rt(e,C,h).next(P=>{h-=P,a.add(C)});m=!1})).next(()=>r-h)}rt(e,r,a){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(h=>this.localStore.localDocuments.getNextDocuments(e,r,h,a).next(m=>{const C=m.changes;return this.localStore.indexManager.updateIndexEntries(e,C).next(()=>this.ot(h,m)).next(P=>(Ht("IndexBackiller",`Updating offset: ${P}`),this.localStore.indexManager.updateCollectionGroup(e,r,P))).next(()=>C.size)}))}ot(e,r){let a=e;return r.changes.forEach((h,m)=>{const C=uc(m);F(C,a)>0&&(a=C)}),new $i(a.readTime,a.documentKey,Math.max(r.batchId,e.largestBatchId))}}class xr{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=a=>this.ut(a),this.ct=a=>r.writeSequenceNumber(a))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function bo(s){let e=0;for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&e++;return e}function zi(s,e){for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&e(r,s[r])}function Ko(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}xr.at=-1;class ds{constructor(e,r){this.comparator=e,this.root=r||Zi.EMPTY}insert(e,r){return new ds(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Zi.BLACK,null,null))}remove(e){return new ds(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zi.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(0===a)return r.value;a<0?r=r.left:a>0&&(r=r.right)}return null}indexOf(e){let r=0,a=this.root;for(;!a.isEmpty();){const h=this.comparator(e,a.key);if(0===h)return r+a.left.size;h<0?a=a.left:(r+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,a)=>(e(r,a),!1))}toString(){const e=[];return this.inorderTraversal((r,a)=>(e.push(`${r}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Na(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Na(this.root,e,this.comparator,!1)}getReverseIterator(){return new Na(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Na(this.root,e,this.comparator,!0)}}class Na{constructor(e,r,a,h){this.isReverse=h,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=r?a(e.key,r):1,r&&h&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(0===m){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zi{constructor(e,r,a,h,m){this.key=e,this.value=r,this.color=null!=a?a:Zi.RED,this.left=null!=h?h:Zi.EMPTY,this.right=null!=m?m:Zi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,a,h,m){return new Zi(null!=e?e:this.key,null!=r?r:this.value,null!=a?a:this.color,null!=h?h:this.left,null!=m?m:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,a){let h=this;const m=a(e,h.key);return h=m<0?h.copy(null,null,null,h.left.insert(e,r,a),null):0===m?h.copy(null,r,null,null,null):h.copy(null,null,null,null,h.right.insert(e,r,a)),h.fixUp()}removeMin(){if(this.left.isEmpty())return Zi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let a,h=this;if(r(e,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(e,r),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),0===r(e,h.key)){if(h.right.isEmpty())return Zi.EMPTY;a=h.right.min(),h=h.copy(a.key,a.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(e,r))}return h.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Bn();const e=this.left.check();if(e!==this.right.check())throw Bn();return e+(this.isRed()?0:1)}}Zi.EMPTY=null,Zi.RED=!0,Zi.BLACK=!1,Zi.EMPTY=new class{constructor(){this.size=0}get key(){throw Bn()}get value(){throw Bn()}get color(){throw Bn()}get left(){throw Bn()}get right(){throw Bn()}copy(s,e,r,a,h){return this}insert(s,e,r){return new Zi(s,e)}remove(s,e){return this}isEmpty(){return!0}inorderTraversal(s){return!1}reverseTraversal(s){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class wi{constructor(e){this.comparator=e,this.data=new ds(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,a)=>(e(r),!1))}forEachInRange(e,r){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const h=a.getNext();if(this.comparator(h.key,e[1])>=0)return;r(h.key)}}forEachWhile(e,r){let a;for(a=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Jn(this.data.getIterator())}getIteratorFrom(e){return new Jn(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(a=>{r=r.add(a)}),r}isEqual(e){if(!(e instanceof wi)||this.size!==e.size)return!1;const r=this.data.getIterator(),a=e.data.getIterator();for(;r.hasNext();){const h=r.getNext().key,m=a.getNext().key;if(0!==this.comparator(h,m))return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new wi(this.comparator);return r.data=e,r}}class Jn{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Rc(s){return s.hasNext()?s.getNext():void 0}class Rs{constructor(e){this.fields=e,e.sort(Vi.comparator)}static empty(){return new Rs([])}unionWith(e){let r=new wi(Vi.comparator);for(const a of this.fields)r=r.add(a);for(const a of e)r=r.add(a);return new Rs(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Ks(this.fields,e.fields,(r,a)=>r.isEqual(a))}}function lu(){return"undefined"!=typeof atob}class ni{constructor(e){this.binaryString=e}static fromBase64String(e){const r=atob(e);return new ni(r)}static fromUint8Array(e){const r=function(a){let h="";for(let m=0;m<a.length;++m)h+=String.fromCharCode(a[m]);return h}(e);return new ni(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let a=0;a<e.length;a++)r[a]=e.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ar(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ni.EMPTY_BYTE_STRING=new ni("");const Ku=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Za(s){if(or(!!s),"string"==typeof s){let e=0;const r=Ku.exec(s);if(or(!!r),r[1]){let h=r[1];h=(h+"000000000").substr(0,9),e=Number(h)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:qi(s.seconds),nanos:qi(s.nanos)}}function qi(s){return"number"==typeof s?s:"string"==typeof s?Number(s):0}function ia(s){return"string"==typeof s?ni.fromBase64String(s):ni.fromUint8Array(s)}function ql(s){var e,r;return"server_timestamp"===(null===(r=((null===(e=null==s?void 0:s.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function cu(s){const e=s.mapValue.fields.__previous_value__;return ql(e)?cu(e):e}function Yl(s){const e=Za(s.mapValue.fields.__local_write_time__.timestampValue);return new Ei(e.seconds,e.nanos)}class ka{constructor(e,r,a,h,m,C,P,X){this.databaseId=e,this.appId=r,this.persistenceKey=a,this.host=h,this.ssl=m,this.forceLongPolling=C,this.autoDetectLongPolling=P,this.useFetchStreams=X}}class Fa{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Fa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Fa&&e.projectId===this.projectId&&e.database===this.database}}function Hi(s){return null==s}function Ea(s){return 0===s&&1/s==-1/0}function ko(s){return"number"==typeof s&&Number.isInteger(s)&&!Ea(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const Zo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},La={nullValue:"NULL_VALUE"};function lo(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?ql(s)?4:Kl(s)?9007199254740991:10:Bn()}function Ms(s,e){if(s===e)return!0;const r=lo(s);if(r!==lo(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Yl(s).isEqual(Yl(e));case 3:return function(a,h){if("string"==typeof a.timestampValue&&"string"==typeof h.timestampValue&&a.timestampValue.length===h.timestampValue.length)return a.timestampValue===h.timestampValue;const m=Za(a.timestampValue),C=Za(h.timestampValue);return m.seconds===C.seconds&&m.nanos===C.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return h=e,ia(s.bytesValue).isEqual(ia(h.bytesValue));case 7:return s.referenceValue===e.referenceValue;case 8:return function(a,h){return qi(a.geoPointValue.latitude)===qi(h.geoPointValue.latitude)&&qi(a.geoPointValue.longitude)===qi(h.geoPointValue.longitude)}(s,e);case 2:return function(a,h){if("integerValue"in a&&"integerValue"in h)return qi(a.integerValue)===qi(h.integerValue);if("doubleValue"in a&&"doubleValue"in h){const m=qi(a.doubleValue),C=qi(h.doubleValue);return m===C?Ea(m)===Ea(C):isNaN(m)&&isNaN(C)}return!1}(s,e);case 9:return Ks(s.arrayValue.values||[],e.arrayValue.values||[],Ms);case 10:return function(a,h){const m=a.mapValue.fields||{},C=h.mapValue.fields||{};if(bo(m)!==bo(C))return!1;for(const P in m)if(m.hasOwnProperty(P)&&(void 0===C[P]||!Ms(m[P],C[P])))return!1;return!0}(s,e);default:return Bn()}var h}function Ia(s,e){return void 0!==(s.values||[]).find(r=>Ms(r,e))}function Co(s,e){if(s===e)return 0;const r=lo(s),a=lo(e);if(r!==a)return ar(r,a);switch(r){case 0:case 9007199254740991:return 0;case 1:return ar(s.booleanValue,e.booleanValue);case 2:return function(h,m){const C=qi(h.integerValue||h.doubleValue),P=qi(m.integerValue||m.doubleValue);return C<P?-1:C>P?1:C===P?0:isNaN(C)?isNaN(P)?0:-1:1}(s,e);case 3:return ba(s.timestampValue,e.timestampValue);case 4:return ba(Yl(s),Yl(e));case 5:return ar(s.stringValue,e.stringValue);case 6:return function(h,m){const C=ia(h),P=ia(m);return C.compareTo(P)}(s.bytesValue,e.bytesValue);case 7:return function(h,m){const C=h.split("/"),P=m.split("/");for(let X=0;X<C.length&&X<P.length;X++){const se=ar(C[X],P[X]);if(0!==se)return se}return ar(C.length,P.length)}(s.referenceValue,e.referenceValue);case 8:return function(h,m){const C=ar(qi(h.latitude),qi(m.latitude));return 0!==C?C:ar(qi(h.longitude),qi(m.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return function(h,m){const C=h.values||[],P=m.values||[];for(let X=0;X<C.length&&X<P.length;++X){const se=Co(C[X],P[X]);if(se)return se}return ar(C.length,P.length)}(s.arrayValue,e.arrayValue);case 10:return function(h,m){if(h===Zo.mapValue&&m===Zo.mapValue)return 0;if(h===Zo.mapValue)return 1;if(m===Zo.mapValue)return-1;const C=h.fields||{},P=Object.keys(C),X=m.fields||{},se=Object.keys(X);P.sort(),se.sort();for(let De=0;De<P.length&&De<se.length;++De){const Je=ar(P[De],se[De]);if(0!==Je)return Je;const Tt=Co(C[P[De]],X[se[De]]);if(0!==Tt)return Tt}return ar(P.length,se.length)}(s.mapValue,e.mapValue);default:throw Bn()}}function ba(s,e){if("string"==typeof s&&"string"==typeof e&&s.length===e.length)return ar(s,e);const r=Za(s),a=Za(e),h=ar(r.seconds,a.seconds);return 0!==h?h:ar(r.nanos,a.nanos)}function sa(s){return Mc(s)}function Mc(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(a){const h=Za(a);return`time(${h.seconds},${h.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?ia(s.bytesValue).toBase64():"referenceValue"in s?Tn.fromName(s.referenceValue).toString():"geoPointValue"in s?`geo(${(e=s.geoPointValue).latitude},${e.longitude})`:"arrayValue"in s?function(a){let h="[",m=!0;for(const C of a.values||[])m?m=!1:h+=",",h+=Mc(C);return h+"]"}(s.arrayValue):"mapValue"in s?function(a){const h=Object.keys(a.fields||{}).sort();let m="{",C=!0;for(const P of h)C?C=!1:m+=",",m+=`${P}:${Mc(a.fields[P])}`;return m+"}"}(s.mapValue):Bn();var e}function Qa(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Pc(s){return!!s&&"integerValue"in s}function oa(s){return!!s&&"arrayValue"in s}function dc(s){return!!s&&"nullValue"in s}function hs(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function ml(s){return!!s&&"mapValue"in s}function aa(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&"object"==typeof s.timestampValue)return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return zi(s.mapValue.fields,(r,a)=>e.mapValue.fields[r]=aa(a)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(s.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=aa(s.arrayValue.values[r]);return e}return Object.assign({},s)}function Kl(s){return"__max__"===(((s.mapValue||{}).fields||{}).__type__||{}).stringValue}function Sl(s){return"nullValue"in s?La:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?Qa(Fa.empty(),Tn.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?{mapValue:{}}:Bn()}function Nd(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?Qa(Fa.empty(),Tn.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?{mapValue:{}}:"mapValue"in s?Zo:Bn()}function Al(s,e){const r=Co(s.value,e.value);return 0!==r?r:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function $(s,e){const r=Co(s.value,e.value);return 0!==r?r:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}class Y{constructor(e){this.value=e}static empty(){return new Y({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let a=0;a<e.length-1;++a)if(r=(r.mapValue.fields||{})[e.get(a)],!ml(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=aa(r)}setAll(e){let r=Vi.emptyPath(),a={},h=[];e.forEach((C,P)=>{if(!r.isImmediateParentOf(P)){const X=this.getFieldsMap(r);this.applyChanges(X,a,h),a={},h=[],r=P.popLast()}C?a[P.lastSegment()]=aa(C):h.push(P.lastSegment())});const m=this.getFieldsMap(r);this.applyChanges(m,a,h)}delete(e){const r=this.field(e.popLast());ml(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Ms(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let a=0;a<e.length;++a){let h=r.mapValue.fields[e.get(a)];ml(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},r.mapValue.fields[e.get(a)]=h),r=h}return r.mapValue.fields}applyChanges(e,r,a){zi(r,(h,m)=>e[h]=m);for(const h of a)delete e[h]}clone(){return new Y(aa(this.value))}}function me(s){const e=[];return zi(s.fields,(r,a)=>{const h=new Vi([r]);if(ml(a)){const m=me(a.mapValue).fields;if(0===m.length)e.push(h);else for(const C of m)e.push(h.child(C))}else e.push(h)}),new Rs(e)}class Le{constructor(e,r,a,h,m,C){this.key=e,this.documentType=r,this.version=a,this.readTime=h,this.data=m,this.documentState=C}static newInvalidDocument(e){return new Le(e,0,Er.min(),Er.min(),Y.empty(),0)}static newFoundDocument(e,r,a){return new Le(e,1,r,Er.min(),a,0)}static newNoDocument(e,r){return new Le(e,2,r,Er.min(),Y.empty(),0)}static newUnknownDocument(e,r){return new Le(e,3,r,Er.min(),Y.empty(),2)}convertToFoundDocument(e,r){return this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Y.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Y.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Er.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Le&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Le(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class yt{constructor(e,r=null,a=[],h=[],m=null,C=null,P=null){this.path=e,this.collectionGroup=r,this.orderBy=a,this.filters=h,this.limit=m,this.startAt=C,this.endAt=P,this.ht=null}}function Pt(s,e=null,r=[],a=[],h=null,m=null,C=null){return new yt(s,e,r,a,h,m,C)}function nn(s){const e=_n(s);if(null===e.ht){let r=e.path.canonicalString();null!==e.collectionGroup&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(a=>{return(h=a).field.canonicalString()+h.op.toString()+sa(h.value);var h}).join(","),r+="|ob:",r+=e.orderBy.map(a=>{return(h=a).field.canonicalString()+h.dir;var h}).join(","),Hi(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(a=>sa(a)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(a=>sa(a)).join(",")),e.ht=r}return e.ht}function gr(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let h=0;h<s.orderBy.length;h++)if(!Oc(s.orderBy[h],e.orderBy[h]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let h=0;h<s.filters.length;h++)if((r=s.filters[h]).op!==(a=e.filters[h]).op||!r.field.isEqual(a.field)||!Ms(r.value,a.value))return!1;var r,a;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!hc(s.startAt,e.startAt)&&hc(s.endAt,e.endAt)}function lr(s){return Tn.isDocumentKey(s.path)&&null===s.collectionGroup&&0===s.filters.length}function kr(s,e){return s.filters.filter(r=>r instanceof pi&&r.field.isEqual(e))}function _r(s,e,r){let a=La,h=!0;for(const m of kr(s,e)){let C=La,P=!0;switch(m.op){case"<":case"<=":C=Sl(m.value);break;case"==":case"in":case">=":C=m.value;break;case">":C=m.value,P=!1;break;case"!=":case"not-in":C=La}Al({value:a,inclusive:h},{value:C,inclusive:P})<0&&(a=C,h=P)}if(null!==r)for(let m=0;m<s.orderBy.length;++m)if(s.orderBy[m].field.isEqual(e)){const C=r.position[m];Al({value:a,inclusive:h},{value:C,inclusive:r.inclusive})<0&&(a=C,h=r.inclusive);break}return{value:a,inclusive:h}}function Is(s,e,r){let a=Zo,h=!0;for(const m of kr(s,e)){let C=Zo,P=!0;switch(m.op){case">=":case">":C=Nd(m.value),P=!1;break;case"==":case"in":case"<=":C=m.value;break;case"<":C=m.value,P=!1;break;case"!=":case"not-in":C=Zo}$({value:a,inclusive:h},{value:C,inclusive:P})>0&&(a=C,h=P)}if(null!==r)for(let m=0;m<s.orderBy.length;++m)if(s.orderBy[m].field.isEqual(e)){const C=r.position[m];$({value:a,inclusive:h},{value:C,inclusive:r.inclusive})>0&&(a=C,h=r.inclusive);break}return{value:a,inclusive:h}}class pi extends class{}{constructor(e,r,a){super(),this.field=e,this.op=r,this.value=a}static create(e,r,a){return e.isKeyField()?"in"===r||"not-in"===r?this.lt(e,r,a):new Xa(e,r,a):"array-contains"===r?new uu(e,a):"in"===r?new Qi(e,a):"not-in"===r?new Fo(e,a):"array-contains-any"===r?new xl(e,a):new pi(e,r,a)}static lt(e,r,a){return"in"===r?new wo(e,a):new To(e,a)}matches(e){const r=e.data.field(this.field);return"!="===this.op?null!==r&&this.ft(Co(r,this.value)):null!==r&&lo(this.value)===lo(r)&&this.ft(Co(r,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Bn()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Xa extends pi{constructor(e,r,a){super(e,r,a),this.key=Tn.fromName(a.referenceValue)}matches(e){const r=Tn.comparator(e.key,this.key);return this.ft(r)}}class wo extends pi{constructor(e,r){super(e,"in",r),this.keys=Js(0,r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class To extends pi{constructor(e,r){super(e,"not-in",r),this.keys=Js(0,r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function Js(s,e){var r;return((null===(r=e.arrayValue)||void 0===r?void 0:r.values)||[]).map(a=>Tn.fromName(a.referenceValue))}class uu extends pi{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return oa(r)&&Ia(r.arrayValue,this.value)}}class Qi extends pi{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return null!==r&&Ia(this.value.arrayValue,r)}}class Fo extends pi{constructor(e,r){super(e,"not-in",r)}matches(e){if(Ia(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return null!==r&&!Ia(this.value.arrayValue,r)}}class xl extends pi{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!oa(r)||!r.arrayValue.values)&&r.arrayValue.values.some(a=>Ia(this.value.arrayValue,a))}}class co{constructor(e,r){this.position=e,this.inclusive=r}}class Ca{constructor(e,r="asc"){this.field=e,this.dir=r}}function Oc(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}function du(s,e,r){let a=0;for(let h=0;h<s.position.length;h++){const m=e[h],C=s.position[h];if(a=m.field.isKeyField()?Tn.comparator(Tn.fromName(C.referenceValue),r.key):Co(C,r.data.field(m.field)),"desc"===m.dir&&(a*=-1),0!==a)break}return a}function hc(s,e){if(null===s)return null===e;if(null===e||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let r=0;r<s.position.length;r++)if(!Ms(s.position[r],e.position[r]))return!1;return!0}class la{constructor(e,r=null,a=[],h=[],m=null,C="F",P=null,X=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=a,this.filters=h,this.limit=m,this.limitType=C,this.startAt=P,this.endAt=X,this._t=null,this.wt=null}}function Rl(s,e,r,a,h,m,C,P){return new la(s,e,r,a,h,m,C,P)}function Lo(s){return new la(s)}function Oi(s){return 0===s.filters.length&&null===s.limit&&null==s.startAt&&null==s.endAt&&(0===s.explicitOrderBy.length||1===s.explicitOrderBy.length&&s.explicitOrderBy[0].field.isKeyField())}function eo(s){return s.explicitOrderBy.length>0?s.explicitOrderBy[0].field:null}function Ml(s){for(const e of s.filters)if(e.dt())return e.field;return null}function Nc(s){return null!==s.collectionGroup}function Pl(s){const e=_n(s);if(null===e._t){e._t=[];const r=Ml(e),a=eo(e);if(null!==r&&null===a)r.isKeyField()||e._t.push(new Ca(r)),e._t.push(new Ca(Vi.keyField(),"asc"));else{let h=!1;for(const m of e.explicitOrderBy)e._t.push(m),m.field.isKeyField()&&(h=!0);if(!h){const m=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Ca(Vi.keyField(),m))}}}return e._t}function Ps(s){const e=_n(s);if(!e.wt)if("F"===e.limitType)e.wt=Pt(e.path,e.collectionGroup,Pl(e),e.filters,e.limit,e.startAt,e.endAt);else{const r=[];for(const m of Pl(e))r.push(new Ca(m.field,"desc"===m.dir?"asc":"desc"));const a=e.endAt?new co(e.endAt.position,e.endAt.inclusive):null,h=e.startAt?new co(e.startAt.position,e.startAt.inclusive):null;e.wt=Pt(e.path,e.collectionGroup,r,e.filters,e.limit,a,h)}return e.wt}function Ja(s,e,r){return new la(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,r,s.startAt,s.endAt)}function Zl(s,e){return gr(Ps(s),Ps(e))&&s.limitType===e.limitType}function el(s){return`${nn(Ps(s))}|lt:${s.limitType}`}function Va(s){return`Query(target=${function(s){let e=s.path.canonicalString();return null!==s.collectionGroup&&(e+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(e+=`, filters: [${s.filters.map(r=>{return`${(a=r).field.canonicalString()} ${a.op} ${sa(a.value)}`;var a}).join(", ")}]`),Hi(s.limit)||(e+=", limit: "+s.limit),s.orderBy.length>0&&(e+=`, orderBy: [${s.orderBy.map(r=>{return`${(a=r).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),s.startAt&&(e+=", startAt: ",e+=s.startAt.inclusive?"b:":"a:",e+=s.startAt.position.map(r=>sa(r)).join(",")),s.endAt&&(e+=", endAt: ",e+=s.endAt.inclusive?"a:":"b:",e+=s.endAt.position.map(r=>sa(r)).join(",")),`Target(${e})`}(Ps(s))}; limitType=${s.limitType})`}function wa(s,e){return e.isFoundDocument()&&function(r,a){const h=a.key.path;return null!==r.collectionGroup?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(h):Tn.isDocumentKey(r.path)?r.path.isEqual(h):r.path.isImmediateParentOf(h)}(s,e)&&function(r,a){for(const h of r.explicitOrderBy)if(!h.field.isKeyField()&&null===a.data.field(h.field))return!1;return!0}(s,e)&&function(r,a){for(const h of r.filters)if(!h.matches(a))return!1;return!0}(s,e)&&(a=e,!((r=s).startAt&&!function(h,m,C){const P=du(h,m,C);return h.inclusive?P<=0:P<0}(r.startAt,Pl(r),a)||r.endAt&&!function(h,m,C){const P=du(h,m,C);return h.inclusive?P>=0:P>0}(r.endAt,Pl(r),a)));var r,a}function hu(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Zu(s){return(e,r)=>{let a=!1;for(const h of Pl(s)){const m=kd(h,e,r);if(0!==m)return m;a=a||h.field.isKeyField()}return 0}}function kd(s,e,r){const a=s.field.isKeyField()?Tn.comparator(e.key,r.key):function(h,m,C){const P=m.data.field(h),X=C.data.field(h);return null!==P&&null!==X?Co(P,X):Bn()}(s.field,e,r);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return Bn()}}function Fd(s,e){if(s.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ea(e)?"-0":e}}function Ah(s){return{integerValue:""+s}}function xh(s,e){return ko(e)?Ah(e):Fd(s,e)}class fu{constructor(){this._=void 0}}function Ld(s,e,r){return s instanceof $a?function(a,h){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return h&&(m.fields.__previous_value__=h),{mapValue:m}}(r,e):s instanceof Ol?Rh(s,e):s instanceof kc?Fc(s,e):function(a,h){const m=pu(a,h),C=Lc(m)+Lc(a.yt);return Pc(m)&&Pc(a.yt)?Ah(C):Fd(a.It,C)}(s,e)}function Qu(s,e,r){return s instanceof Ol?Rh(s,e):s instanceof kc?Fc(s,e):r}function pu(s,e){return s instanceof Ql?Pc(r=e)||(a=r)&&"doubleValue"in a?e:{integerValue:0}:null;var a,r}class $a extends fu{}class Ol extends fu{constructor(e){super(),this.elements=e}}function Rh(s,e){const r=Vc(e);for(const a of s.elements)r.some(h=>Ms(h,a))||r.push(a);return{arrayValue:{values:r}}}class kc extends fu{constructor(e){super(),this.elements=e}}function Fc(s,e){let r=Vc(e);for(const a of s.elements)r=r.filter(h=>!Ms(h,a));return{arrayValue:{values:r}}}class Ql extends fu{constructor(e,r){super(),this.It=e,this.yt=r}}function Lc(s){return qi(s.integerValue||s.doubleValue)}function Vc(s){return oa(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class Xl{constructor(e,r){this.field=e,this.transform=r}}class Xu{constructor(e,r){this.version=e,this.transformResults=r}}class fs{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new fs}static exists(e){return new fs(void 0,e)}static updateTime(e){return new fs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $c(s,e){return void 0!==s.updateTime?e.isFoundDocument()&&e.version.isEqual(s.updateTime):void 0===s.exists||s.exists===e.isFoundDocument()}class gu{}function Vd(s,e){if(!s.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return s.isNoDocument()?new kl(s.key,fs.none()):new Bc(s.key,s.data,fs.none());{const r=s.data,a=Y.empty();let h=new wi(Vi.comparator);for(let m of e.fields)if(!h.has(m)){let C=r.field(m);null===C&&m.length>1&&(m=m.popLast(),C=r.field(m)),null===C?a.delete(m):a.set(m,C),h=h.add(m)}return new Nl(s.key,a,new Rs(h.toArray()),fs.none())}}function tl(s,e,r){s instanceof Bc?function(a,h,m){const C=a.value.clone(),P=Mh(a.fieldTransforms,h,m.transformResults);C.setAll(P),h.convertToFoundDocument(m.version,C).setHasCommittedMutations()}(s,e,r):s instanceof Nl?function(a,h,m){if(!$c(a.precondition,h))return void h.convertToUnknownDocument(m.version);const C=Mh(a.fieldTransforms,h,m.transformResults),P=h.data;P.setAll(Bd(a)),P.setAll(C),h.convertToFoundDocument(m.version,P).setHasCommittedMutations()}(s,e,r):e.convertToNoDocument(r.version).setHasCommittedMutations()}function yl(s,e,r,a){return s instanceof Bc?function(h,m,C,P){if(!$c(h.precondition,m))return C;const X=h.value.clone(),se=ed(h.fieldTransforms,P,m);return X.setAll(se),m.convertToFoundDocument(m.version,X).setHasLocalMutations(),null}(s,e,r,a):s instanceof Nl?function(h,m,C,P){if(!$c(h.precondition,m))return C;const X=ed(h.fieldTransforms,P,m),se=m.data;return se.setAll(Bd(h)),se.setAll(X),m.convertToFoundDocument(m.version,se).setHasLocalMutations(),null===C?null:C.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(De=>De.field))}(s,e,r,a):(C=r,$c(s.precondition,m=e)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):C);var m,C}function $d(s,e){let r=null;for(const a of s.fieldTransforms){const h=e.data.field(a.field),m=pu(a.transform,h||null);null!=m&&(null===r&&(r=Y.empty()),r.set(a.field,m))}return r||null}function Ju(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&(a=e.fieldTransforms,!!(void 0===(r=s.fieldTransforms)&&void 0===a||r&&a&&Ks(r,a,(h,m)=>function(s,e){return s.field.isEqual(e.field)&&(a=e.transform,(r=s.transform)instanceof Ol&&a instanceof Ol||r instanceof kc&&a instanceof kc?Ks(r.elements,a.elements,Ms):r instanceof Ql&&a instanceof Ql?Ms(r.yt,a.yt):r instanceof $a&&a instanceof $a);var r,a}(h,m))))&&(0===s.type?s.value.isEqual(e.value):1!==s.type||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask));var r,a}class Bc extends gu{constructor(e,r,a,h=[]){super(),this.key=e,this.value=r,this.precondition=a,this.fieldTransforms=h,this.type=0}getFieldMask(){return null}}class Nl extends gu{constructor(e,r,a,h,m=[]){super(),this.key=e,this.data=r,this.fieldMask=a,this.precondition=h,this.fieldTransforms=m,this.type=1}getFieldMask(){return this.fieldMask}}function Bd(s){const e=new Map;return s.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const a=s.data.field(r);e.set(r,a)}}),e}function Mh(s,e,r){const a=new Map;or(s.length===r.length);for(let h=0;h<r.length;h++){const m=s[h],C=m.transform,P=e.data.field(m.field);a.set(m.field,Qu(C,P,r[h]))}return a}function ed(s,e,r){const a=new Map;for(const h of s){const m=h.transform,C=r.data.field(h.field);a.set(h.field,Ld(m,C,e))}return a}class kl extends gu{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mu extends gu{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class td{constructor(e){this.count=e}}var to,gi;function nd(s){switch(s){default:return Bn();case Et.CANCELLED:case Et.UNKNOWN:case Et.DEADLINE_EXCEEDED:case Et.RESOURCE_EXHAUSTED:case Et.INTERNAL:case Et.UNAVAILABLE:case Et.UNAUTHENTICATED:return!1;case Et.INVALID_ARGUMENT:case Et.NOT_FOUND:case Et.ALREADY_EXISTS:case Et.PERMISSION_DENIED:case Et.FAILED_PRECONDITION:case Et.ABORTED:case Et.OUT_OF_RANGE:case Et.UNIMPLEMENTED:case Et.DATA_LOSS:return!0}}function fc(s){if(void 0===s)return pr("GRPC error has no .code"),Et.UNKNOWN;switch(s){case to.OK:return Et.OK;case to.CANCELLED:return Et.CANCELLED;case to.UNKNOWN:return Et.UNKNOWN;case to.DEADLINE_EXCEEDED:return Et.DEADLINE_EXCEEDED;case to.RESOURCE_EXHAUSTED:return Et.RESOURCE_EXHAUSTED;case to.INTERNAL:return Et.INTERNAL;case to.UNAVAILABLE:return Et.UNAVAILABLE;case to.UNAUTHENTICATED:return Et.UNAUTHENTICATED;case to.INVALID_ARGUMENT:return Et.INVALID_ARGUMENT;case to.NOT_FOUND:return Et.NOT_FOUND;case to.ALREADY_EXISTS:return Et.ALREADY_EXISTS;case to.PERMISSION_DENIED:return Et.PERMISSION_DENIED;case to.FAILED_PRECONDITION:return Et.FAILED_PRECONDITION;case to.ABORTED:return Et.ABORTED;case to.OUT_OF_RANGE:return Et.OUT_OF_RANGE;case to.UNIMPLEMENTED:return Et.UNIMPLEMENTED;case to.DATA_LOSS:return Et.DATA_LOSS;default:return Bn()}}(gi=to||(to={}))[gi.OK=0]="OK",gi[gi.CANCELLED=1]="CANCELLED",gi[gi.UNKNOWN=2]="UNKNOWN",gi[gi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gi[gi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gi[gi.NOT_FOUND=5]="NOT_FOUND",gi[gi.ALREADY_EXISTS=6]="ALREADY_EXISTS",gi[gi.PERMISSION_DENIED=7]="PERMISSION_DENIED",gi[gi.UNAUTHENTICATED=16]="UNAUTHENTICATED",gi[gi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gi[gi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gi[gi.ABORTED=10]="ABORTED",gi[gi.OUT_OF_RANGE=11]="OUT_OF_RANGE",gi[gi.UNIMPLEMENTED=12]="UNIMPLEMENTED",gi[gi.INTERNAL=13]="INTERNAL",gi[gi.UNAVAILABLE=14]="UNAVAILABLE",gi[gi.DATA_LOSS=15]="DATA_LOSS";class Fl{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),a=this.inner[r];if(void 0!==a)for(const[h,m]of a)if(this.equalsFn(h,e))return m}has(e){return void 0!==this.get(e)}set(e,r){const a=this.mapKeyFn(e),h=this.inner[a];if(void 0===h)return this.inner[a]=[[e,r]],void this.innerSize++;for(let m=0;m<h.length;m++)if(this.equalsFn(h[m][0],e))return void(h[m]=[e,r]);h.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),a=this.inner[r];if(void 0===a)return!1;for(let h=0;h<a.length;h++)if(this.equalsFn(a[h][0],e))return 1===a.length?delete this.inner[r]:a.splice(h,1),this.innerSize--,!0;return!1}forEach(e){zi(this.inner,(r,a)=>{for(const[h,m]of a)e(h,m)})}isEmpty(){return Ko(this.inner)}size(){return this.innerSize}}const Ba=new ds(Tn.comparator);function mo(){return Ba}const rd=new ds(Tn.comparator);function pc(...s){let e=rd;for(const r of s)e=e.insert(r.key,r);return e}function Ud(s){let e=rd;return s.forEach((r,a)=>e=e.insert(r,a.overlayedDocument)),e}function _l(){return yu()}function bf(){return yu()}function yu(){return new Fl(s=>s.toString(),(s,e)=>s.isEqual(e))}const id=new ds(Tn.comparator),sd=new wi(Tn.comparator);function jr(...s){let e=sd;for(const r of s)e=e.add(r);return e}const jd=new wi(ar);function D(){return jd}class g{constructor(e,r,a,h,m){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=a,this.documentUpdates=h,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,r,a){const h=new Map;return h.set(e,v.createSynthesizedTargetChangeForCurrentChange(e,r,a)),new g(Er.min(),h,D(),mo(),jr())}}class v{constructor(e,r,a,h,m){this.resumeToken=e,this.current=r,this.addedDocuments=a,this.modifiedDocuments=h,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,r,a){return new v(a,r,jr(),jr(),jr())}}class R{constructor(e,r,a,h){this.Tt=e,this.removedTargetIds=r,this.key=a,this.Et=h}}class ee{constructor(e,r){this.targetId=e,this.At=r}}class de{constructor(e,r,a=ni.EMPTY_BYTE_STRING,h=null){this.state=e,this.targetIds=r,this.resumeToken=a,this.cause=h}}class lt{constructor(){this.Rt=0,this.bt=dn(),this.Pt=ni.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=jr(),r=jr(),a=jr();return this.bt.forEach((h,m)=>{switch(m){case 0:e=e.add(h);break;case 2:r=r.add(h);break;case 1:a=a.add(h);break;default:Bn()}}),new v(this.Pt,this.vt,e,r,a)}Nt(){this.Vt=!1,this.bt=dn()}kt(e,r){this.Vt=!0,this.bt=this.bt.insert(e,r)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Vt{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=mo(),this.qt=An(),this.Kt=new wi(ar)}Gt(e){for(const r of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(r,e.Et):this.jt(r,e.key,e.Et);for(const r of e.removedTargetIds)this.jt(r,e.key,e.Et)}Wt(e){this.forEachTarget(e,r=>{const a=this.zt(r);switch(e.state){case 0:this.Ht(r)&&a.Ct(e.resumeToken);break;case 1:a.Ft(),a.St||a.Nt(),a.Ct(e.resumeToken);break;case 2:a.Ft(),a.St||this.removeTarget(r);break;case 3:this.Ht(r)&&(a.$t(),a.Ct(e.resumeToken));break;case 4:this.Ht(r)&&(this.Jt(r),a.Ct(e.resumeToken));break;default:Bn()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Lt.forEach((a,h)=>{this.Ht(h)&&r(h)})}Yt(e){const r=e.targetId,a=e.At.count,h=this.Xt(r);if(h){const m=h.target;if(lr(m))if(0===a){const C=new Tn(m.path);this.jt(r,C,Le.newNoDocument(C,Er.min()))}else or(1===a);else this.Zt(r)!==a&&(this.Jt(r),this.Kt=this.Kt.add(r))}}te(e){const r=new Map;this.Lt.forEach((m,C)=>{const P=this.Xt(C);if(P){if(m.current&&lr(P.target)){const X=new Tn(P.target.path);null!==this.Ut.get(X)||this.ee(C,X)||this.jt(C,X,Le.newNoDocument(X,e))}m.Dt&&(r.set(C,m.xt()),m.Nt())}});let a=jr();this.qt.forEach((m,C)=>{let P=!0;C.forEachWhile(X=>{const se=this.Xt(X);return!se||2===se.purpose||(P=!1,!1)}),P&&(a=a.add(m))}),this.Ut.forEach((m,C)=>C.setReadTime(e));const h=new g(e,r,this.Kt,this.Ut,a);return this.Ut=mo(),this.qt=An(),this.Kt=new wi(ar),h}Qt(e,r){if(!this.Ht(e))return;const a=this.ee(e,r.key)?2:0;this.zt(e).kt(r.key,a),this.Ut=this.Ut.insert(r.key,r),this.qt=this.qt.insert(r.key,this.ne(r.key).add(e))}jt(e,r,a){if(!this.Ht(e))return;const h=this.zt(e);this.ee(e,r)?h.kt(r,1):h.Ot(r),this.qt=this.qt.insert(r,this.ne(r).delete(e)),a&&(this.Ut=this.Ut.insert(r,a))}removeTarget(e){this.Lt.delete(e)}Zt(e){const r=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let r=this.Lt.get(e);return r||(r=new lt,this.Lt.set(e,r)),r}ne(e){let r=this.qt.get(e);return r||(r=new wi(ar),this.qt=this.qt.insert(e,r)),r}Ht(e){const r=null!==this.Xt(e);return r||Ht("WatchChangeAggregator","Detected inactive target",e),r}Xt(e){const r=this.Lt.get(e);return r&&r.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new lt),this.Bt.getRemoteKeysForTarget(e).forEach(r=>{this.jt(e,r,null)})}ee(e,r){return this.Bt.getRemoteKeysForTarget(e).has(r)}}function An(){return new ds(Tn.comparator)}function dn(){return new ds(Tn.comparator)}const Ir={asc:"ASCENDING",desc:"DESCENDING"},Cr={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Ti{constructor(e,r){this.databaseId=e,this.gt=r}}function Os(s,e){return s.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ca(s,e){return s.gt?e.toBase64():e.toUint8Array()}function _u(s,e){return Os(s,e.toTimestamp())}function no(s){return or(!!s),Er.fromTimestamp(function(e){const r=Za(e);return new Ei(r.seconds,r.nanos)}(s))}function od(s,e){return(r=s,new Gr(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function ad(s){const e=Gr.fromString(s);return or(xp(e)),e}function Ll(s,e){return od(s.databaseId,e.path)}function nl(s,e){const r=ad(e);if(r.get(1)!==s.databaseId.projectId)throw new Nt(Et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+s.databaseId.projectId);if(r.get(3)!==s.databaseId.database)throw new Nt(Et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+s.databaseId.database);return new Tn(Vo(r))}function vl(s,e){return od(s.databaseId,e)}function gc(s){const e=ad(s);return 4===e.length?Gr.emptyPath():Vo(e)}function El(s){return new Gr(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Vo(s){return or(s.length>4&&"documents"===s.get(4)),s.popFirst(5)}function Uc(s,e,r){return{name:Ll(s,e),fields:r.value.mapValue.fields}}function jc(s,e,r){const a=nl(s,e.name),h=no(e.updateTime),m=new Y({mapValue:{fields:e.fields}}),C=Le.newFoundDocument(a,h,m);return r&&C.setHasCommittedMutations(),r?C.setHasCommittedMutations():C}function Vl(s,e){let r;if(e instanceof Bc)r={update:Uc(s,e.key,e.value)};else if(e instanceof kl)r={delete:Ll(s,e.key)};else if(e instanceof Nl)r={update:Uc(s,e.key,e.data),updateMask:Ap(e.fieldMask)};else{if(!(e instanceof mu))return Bn();r={verify:Ll(s,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(a=>function(h,m){const C=m.transform;if(C instanceof $a)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(C instanceof Ol)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:C.elements}};if(C instanceof kc)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:C.elements}};if(C instanceof Ql)return{fieldPath:m.field.canonicalString(),increment:C.yt};throw Bn()}(0,a))),e.precondition.isNone||(r.currentDocument=void 0!==(h=e.precondition).updateTime?{updateTime:_u(s,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:Bn()),r;var h}function Hc(s,e){const r=e.currentDocument?void 0!==(h=e.currentDocument).updateTime?fs.updateTime(no(h.updateTime)):void 0!==h.exists?fs.exists(h.exists):fs.none():fs.none(),a=e.updateTransforms?e.updateTransforms.map(h=>function(m,C){let P=null;"setToServerValue"in C?(or("REQUEST_TIME"===C.setToServerValue),P=new $a):"appendMissingElements"in C?P=new Ol(C.appendMissingElements.values||[]):"removeAllFromArray"in C?P=new kc(C.removeAllFromArray.values||[]):"increment"in C?P=new Ql(m,C.increment):Bn();const X=Vi.fromServerFormat(C.fieldPath);return new Xl(X,P)}(s,h)):[];var h;if(e.update){const h=nl(s,e.update.name),m=new Y({mapValue:{fields:e.update.fields}});if(e.updateMask){const C=new Rs((e.updateMask.fieldPaths||[]).map(se=>Vi.fromServerFormat(se)));return new Nl(h,m,C,r,a)}return new Bc(h,m,r,a)}if(e.delete){const h=nl(s,e.delete);return new kl(h,r)}if(e.verify){const h=nl(s,e.verify);return new mu(h,r)}return Bn()}function vu(s,e){return{documents:[vl(s,e.path)]}}function Hd(s,e){const r={structuredQuery:{}},a=e.path;null!==e.collectionGroup?(r.parent=vl(s,a),r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r.parent=vl(s,a.popLast()),r.structuredQuery.from=[{collectionId:a.lastSegment()}]);const h=function(X){if(0===X.length)return;const se=X.map(De=>function(Je){if("=="===Je.op){if(hs(Je.value))return{unaryFilter:{field:Wc(Je.field),op:"IS_NAN"}};if(dc(Je.value))return{unaryFilter:{field:Wc(Je.field),op:"IS_NULL"}}}else if("!="===Je.op){if(hs(Je.value))return{unaryFilter:{field:Wc(Je.field),op:"IS_NOT_NAN"}};if(dc(Je.value))return{unaryFilter:{field:Wc(Je.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wc(Je.field),op:Df(Je.op),value:Je.value}}}(De));return 1===se.length?se[0]:{compositeFilter:{op:"AND",filters:se}}}(e.filters);h&&(r.structuredQuery.where=h);const m=function(X){if(0!==X.length)return X.map(se=>{return{field:Wc((De=se).field),direction:Wd(De.dir)};var De})}(e.orderBy);m&&(r.structuredQuery.orderBy=m);const C=(se=e.limit,s.gt||Hi(se)?se:{value:se});var se,P,X;return null!==C&&(r.structuredQuery.limit=C),e.startAt&&(r.structuredQuery.startAt={before:(P=e.startAt).inclusive,values:P.position}),e.endAt&&(r.structuredQuery.endAt={before:!(X=e.endAt).inclusive,values:X.position}),r}function wf(s){let e=gc(s.parent);const r=s.structuredQuery,a=r.from?r.from.length:0;let h=null;if(a>0){or(1===a);const De=r.from[0];De.allDescendants?h=De.collectionId:e=e.child(De.collectionId)}let m=[];r.where&&(m=ld(r.where));let C=[];r.orderBy&&(C=r.orderBy.map(De=>{return new Ca(Gc((Je=De).field),function(Tt){switch(Tt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Je.direction));var Je}));let P=null;r.limit&&(P=function(De){let Je;return Je="object"==typeof De?De.value:De,Hi(Je)?null:Je}(r.limit));let X=null;var De;r.startAt&&(X=new co((De=r.startAt).values||[],!!De.before));let se=null;return r.endAt&&(se=function(De){return new co(De.values||[],!De.before)}(r.endAt)),Rl(e,h,C,m,P,"F",X,se)}function ld(s){return s?void 0!==s.unaryFilter?[Eu(s)]:void 0!==s.fieldFilter?[Sp(s)]:void 0!==s.compositeFilter?s.compositeFilter.filters.map(e=>ld(e)).reduce((e,r)=>e.concat(r)):Bn():[]}function Wd(s){return Ir[s]}function Df(s){return Cr[s]}function Wc(s){return{fieldPath:s.canonicalString()}}function Gc(s){return Vi.fromServerFormat(s.fieldPath)}function Sp(s){return pi.create(Gc(s.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Bn()}}(s.fieldFilter.op),s.fieldFilter.value)}function Eu(s){switch(s.unaryFilter.op){case"IS_NAN":const e=Gc(s.unaryFilter.field);return pi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const r=Gc(s.unaryFilter.field);return pi.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Gc(s.unaryFilter.field);return pi.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Gc(s.unaryFilter.field);return pi.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Bn()}}function Ap(s){const e=[];return s.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function xp(s){return s.length>=4&&"projects"===s.get(0)&&"databases"===s.get(2)}function Ua(s){let e="";for(let r=0;r<s.length;r++)e.length>0&&(e=Iu(e)),e=Ph(s.get(r),e);return Iu(e)}function Ph(s,e){let r=e;const a=s.length;for(let h=0;h<a;h++){const m=s.charAt(h);switch(m){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=m}}return r}function Iu(s){return s+"\x01\x01"}function ec(s){const e=s.length;if(or(e>=2),2===e)return or("\x01"===s.charAt(0)&&"\x01"===s.charAt(1)),Gr.emptyPath();const r=e-2,a=[];let h="";for(let m=0;m<e;){const C=s.indexOf("\x01",m);switch((C<0||C>r)&&Bn(),s.charAt(C+1)){case"\x01":const P=s.substring(m,C);let X;0===h.length?X=P:(h+=P,X=h,h=""),a.push(X);break;case"\x10":h+=s.substring(m,C),h+="\0";break;case"\x11":h+=s.substring(m,C+1);break;default:Bn()}m=C+2}return new Gr(a)}const Sf=["userId","batchId"];function mc(s,e){return[s,Ua(e)]}function Rp(s,e,r){return[s,Ua(e),r]}const Mp={},Af=["prefixPath","collectionGroup","readTime","documentId"],xf=["prefixPath","collectionGroup","documentId"],Rf=["collectionGroup","readTime","prefixPath","documentId"],bu=["canonicalId","targetId"],$o=["targetId","path"],Oh=["path","targetId"],Pp=["collectionId","parent"],Yg=["indexId","uid"],Gd=["uid","sequenceNumber"],Kg=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Op=["indexId","uid","orderedDocumentKey"],zd=["userId","collectionPath","documentId"],Mf=["userId","collectionPath","largestBatchId"],Zg=["userId","collectionGroup","largestBatchId"],Cu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],tc=[...Cu,"documentOverlays"],Pf=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Nh=Pf,Of=[...Nh,"indexConfiguration","indexState","indexEntries"];class Np extends S{constructor(e,r){super(),this.ie=e,this.currentSequenceNumber=r}}function Bi(s,e){const r=_n(s);return rt.M(r.ie,e)}class ja{constructor(e,r,a,h){this.batchId=e,this.localWriteTime=r,this.baseMutations=a,this.mutations=h}applyToRemoteDocument(e,r){const a=r.mutationResults;for(let h=0;h<this.mutations.length;h++){const m=this.mutations[h];m.key.isEqual(e.key)&&tl(m,e,a[h])}}applyToLocalView(e,r){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(r=yl(a,e,r,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(r=yl(a,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const a=bf();return this.mutations.forEach(h=>{const m=e.get(h.key),C=m.overlayedDocument;let P=this.applyToLocalView(C,m.mutatedFields);P=r.has(h.key)?null:P;const X=Vd(C,P);null!==X&&a.set(h.key,X),C.isValidDocument()||C.convertToNoDocument(Er.min())}),a}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),jr())}isEqual(e){return this.batchId===e.batchId&&Ks(this.mutations,e.mutations,(r,a)=>Ju(r,a))&&Ks(this.baseMutations,e.baseMutations,(r,a)=>Ju(r,a))}}class yc{constructor(e,r,a,h){this.batch=e,this.commitVersion=r,this.mutationResults=a,this.docVersions=h}static from(e,r,a){or(e.mutations.length===a.length);let h=id;const m=e.mutations;for(let C=0;C<m.length;C++)h=h.insert(m[C].key,a[C].version);return new yc(e,r,a,h)}}class Nf{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class nc{constructor(e,r,a,h,m=Er.min(),C=Er.min(),P=ni.EMPTY_BYTE_STRING){this.target=e,this.targetId=r,this.purpose=a,this.sequenceNumber=h,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=C,this.resumeToken=P}withSequenceNumber(e){return new nc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,r){return new nc(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new nc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class zc{constructor(e){this.re=e}}function qd(s,e){const r=e.key,a={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:ud(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())a.document={name:Ll(h=s.re,(m=e).key),fields:m.data.value.mapValue.fields,updateTime:Os(h,m.version.toTimestamp())};else if(e.isNoDocument())a.noDocument={path:r.path.toArray(),readTime:Bo(e.version)};else{if(!e.isUnknownDocument())return Bn();a.unknownDocument={path:r.path.toArray(),version:Bo(e.version)}}var h,m;return a}function ud(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function Bo(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function _c(s){const e=new Ei(s.seconds,s.nanoseconds);return Er.fromTimestamp(e)}function dd(s,e){const r=(e.baseMutations||[]).map(m=>Hc(s.re,m));for(let m=0;m<e.mutations.length-1;++m){const C=e.mutations[m];m+1<e.mutations.length&&void 0!==e.mutations[m+1].transform&&(C.updateTransforms=e.mutations[m+1].transform.fieldTransforms,e.mutations.splice(m+1,1),++m)}const a=e.mutations.map(m=>Hc(s.re,m)),h=Ei.fromMillis(e.localWriteTimeMs);return new ja(e.batchId,h,r,a)}function rl(s){const e=_c(s.readTime),r=void 0!==s.lastLimboFreeSnapshotVersion?_c(s.lastLimboFreeSnapshotVersion):Er.min();let a;var h;return void 0!==s.query.documents?(or(1===(h=s.query).documents.length),a=Ps(Lo(gc(h.documents[0])))):a=Ps(wf(s.query)),new nc(a,s.targetId,0,s.lastListenSequenceNumber,e,r,ni.fromBase64String(s.resumeToken))}function Yd(s,e){const r=Bo(e.snapshotVersion),a=Bo(e.lastLimboFreeSnapshotVersion);let h;h=lr(e.target)?vu(s.re,e.target):Hd(s.re,e.target);const m=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:nn(e.target),readTime:r,resumeToken:m,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:a,query:h}}function da(s){const e=wf({parent:s.parent,structuredQuery:s.structuredQuery});return"LAST"===s.limitType?Ja(e,e.limit,"L"):e}function kh(s,e){return new Nf(e.largestBatchId,Hc(s.re,e.overlayMutation))}function Fh(s,e){const r=e.path.lastSegment();return[s,Ua(e.path.popLast()),r]}function kf(s,e,r,a){return{indexId:s,uid:e.uid||"",sequenceNumber:r,readTime:Bo(a.readTime),documentKey:Ua(a.documentKey.path),largestBatchId:a.largestBatchId}}class Qg{getBundleMetadata(e,r){return kp(e).get(r).next(a=>{if(a)return{id:(h=a).bundleId,createTime:_c(h.createTime),version:h.version};var h})}saveBundleMetadata(e,r){return kp(e).put({bundleId:(a=r).id,createTime:Bo(no(a.createTime)),version:a.version});var a}getNamedQuery(e,r){return Fp(e).get(r).next(a=>{if(a)return{name:(h=a).name,query:da(h.bundledQuery),readTime:_c(h.readTime)};var h})}saveNamedQuery(e,r){return Fp(e).put({name:(a=r).name,readTime:Bo(no(a.readTime)),bundledQuery:a.bundledQuery});var a}}function kp(s){return Bi(s,"bundles")}function Fp(s){return Bi(s,"namedQueries")}class Kd{constructor(e,r){this.It=e,this.userId=r}static oe(e,r){return new Kd(e,r.uid||"")}getOverlay(e,r){return vc(e).get(Fh(this.userId,r)).next(a=>a?kh(this.It,a):null)}getOverlays(e,r){const a=_l();return Q.forEach(r,h=>this.getOverlay(e,h).next(m=>{null!==m&&a.set(h,m)})).next(()=>a)}saveOverlays(e,r,a){const h=[];return a.forEach((m,C)=>{const P=new Nf(r,C);h.push(this.ue(e,P))}),Q.waitFor(h)}removeOverlaysForBatchId(e,r,a){const h=new Set;r.forEach(C=>h.add(Ua(C.getCollectionPath())));const m=[];return h.forEach(C=>{const P=IDBKeyRange.bound([this.userId,C,a],[this.userId,C,a+1],!1,!0);m.push(vc(e).Y("collectionPathOverlayIndex",P))}),Q.waitFor(m)}getOverlaysForCollection(e,r,a){const h=_l(),m=Ua(r),C=IDBKeyRange.bound([this.userId,m,a],[this.userId,m,Number.POSITIVE_INFINITY],!0);return vc(e).W("collectionPathOverlayIndex",C).next(P=>{for(const X of P){const se=kh(this.It,X);h.set(se.getKey(),se)}return h})}getOverlaysForCollectionGroup(e,r,a,h){const m=_l();let C;const P=IDBKeyRange.bound([this.userId,r,a],[this.userId,r,Number.POSITIVE_INFINITY],!0);return vc(e).Z({index:"collectionGroupOverlayIndex",range:P},(X,se,De)=>{const Je=kh(this.It,se);m.size()<h||Je.largestBatchId===C?(m.set(Je.getKey(),Je),C=Je.largestBatchId):De.done()}).next(()=>m)}ue(e,r){return vc(e).put(function(a,h,m){const[C,P,X]=Fh(h,m.mutation.key);return{userId:h,collectionPath:P,documentId:X,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:Vl(a.re,m.mutation)}}(this.It,this.userId,r))}}function vc(s){return Bi(s,"documentOverlays")}class Ec{constructor(){}ce(e,r){this.ae(e,r),r.he()}ae(e,r){if("nullValue"in e)this.le(r,5);else if("booleanValue"in e)this.le(r,10),r.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(r,15),r.fe(qi(e.integerValue));else if("doubleValue"in e){const a=qi(e.doubleValue);isNaN(a)?this.le(r,13):(this.le(r,15),Ea(a)?r.fe(0):r.fe(a))}else if("timestampValue"in e){const a=e.timestampValue;this.le(r,20),"string"==typeof a?r.de(a):(r.de(`${a.seconds||""}`),r.fe(a.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,r),this.we(r);else if("bytesValue"in e)this.le(r,30),r.me(ia(e.bytesValue)),this.we(r);else if("referenceValue"in e)this.ge(e.referenceValue,r);else if("geoPointValue"in e){const a=e.geoPointValue;this.le(r,45),r.fe(a.latitude||0),r.fe(a.longitude||0)}else"mapValue"in e?Kl(e)?this.le(r,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,r),this.we(r)):"arrayValue"in e?(this.pe(e.arrayValue,r),this.we(r)):Bn()}_e(e,r){this.le(r,25),this.Ie(e,r)}Ie(e,r){r.de(e)}ye(e,r){const a=e.fields||{};this.le(r,55);for(const h of Object.keys(a))this._e(h,r),this.ae(a[h],r)}pe(e,r){const a=e.values||[];this.le(r,50);for(const h of a)this.ae(h,r)}ge(e,r){this.le(r,37),Tn.fromName(e).path.forEach(a=>{this.le(r,60),this.Ie(a,r)})}le(e,r){e.fe(r)}we(e){e.fe(2)}}function Lh(s){if(0===s)return 8;let e=0;return s>>4==0&&(e+=4,s<<=4),s>>6==0&&(e+=2,s<<=2),s>>7==0&&(e+=1),e}function Ff(s){const e=64-function(r){let a=0;for(let h=0;h<8;++h){const m=Lh(255&r[h]);if(a+=m,8!==m)break}return a}(s);return Math.ceil(e/8)}Ec.Te=new Ec;class Zd{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const r=e[Symbol.iterator]();let a=r.next();for(;!a.done;)this.Ae(a.value),a=r.next();this.Re()}be(e){const r=e[Symbol.iterator]();let a=r.next();for(;!a.done;)this.Pe(a.value),a=r.next();this.ve()}Ve(e){for(const r of e){const a=r.charCodeAt(0);if(a<128)this.Ae(a);else if(a<2048)this.Ae(960|a>>>6),this.Ae(128|63&a);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a);else{const h=r.codePointAt(0);this.Ae(240|h>>>18),this.Ae(128|63&h>>>12),this.Ae(128|63&h>>>6),this.Ae(128|63&h)}}this.Re()}Se(e){for(const r of e){const a=r.charCodeAt(0);if(a<128)this.Pe(a);else if(a<2048)this.Pe(960|a>>>6),this.Pe(128|63&a);else if(r<"\ud800"||"\udbff"<r)this.Pe(480|a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a);else{const h=r.codePointAt(0);this.Pe(240|h>>>18),this.Pe(128|63&h>>>12),this.Pe(128|63&h>>>6),this.Pe(128|63&h)}}this.ve()}De(e){const r=this.Ce(e),a=Ff(r);this.xe(1+a),this.buffer[this.position++]=255&a;for(let h=r.length-a;h<r.length;++h)this.buffer[this.position++]=255&r[h]}Ne(e){const r=this.Ce(e),a=Ff(r);this.xe(1+a),this.buffer[this.position++]=~(255&a);for(let h=r.length-a;h<r.length;++h)this.buffer[this.position++]=~(255&r[h])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const r=function(h){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,h,!1),new Uint8Array(m.buffer)}(e),a=0!=(128&r[0]);r[0]^=a?255:128;for(let h=1;h<r.length;++h)r[h]^=a?255:0;return r}Ae(e){const r=255&e;0===r?(this.Oe(0),this.Oe(255)):255===r?(this.Oe(255),this.Oe(0)):this.Oe(r)}Pe(e){const r=255&e;0===r?(this.Fe(0),this.Fe(255)):255===r?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const r=e+this.position;if(r<=this.buffer.length)return;let a=2*this.buffer.length;a<r&&(a=r);const h=new Uint8Array(a);h.set(this.buffer),this.buffer=h}}class Vh{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class Xg{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class qc{constructor(){this.Be=new Zd,this.Le=new Vh(this.Be),this.Ue=new Xg(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Yc{constructor(e,r,a,h){this.indexId=e,this.documentKey=r,this.arrayValue=a,this.directionalValue=h}Ke(){const e=this.directionalValue.length,r=0===e||255===this.directionalValue[e-1]?e+1:e,a=new Uint8Array(r);return a.set(this.directionalValue,0),r!==e?a.set([0],this.directionalValue.length):++a[a.length-1],new Yc(this.indexId,this.documentKey,this.arrayValue,a)}}function il(s,e){let r=s.indexId-e.indexId;return 0!==r?r:(r=Lf(s.arrayValue,e.arrayValue),0!==r?r:(r=Lf(s.directionalValue,e.directionalValue),0!==r?r:Tn.comparator(s.documentKey,e.documentKey)))}function Lf(s,e){for(let r=0;r<s.length&&r<e.length;++r){const a=s[r]-e[r];if(0!==a)return a}return s.length-e.length}class Vf{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const r of e.filters){const a=r;a.dt()?this.je=a:this.Qe.push(a)}}We(e){const r=pl(e);if(void 0!==r&&!this.ze(r))return!1;const a=ra(e);let h=0,m=0;for(;h<a.length&&this.ze(a[h]);++h);if(h===a.length)return!0;if(void 0!==this.je){const C=a[h];if(!this.He(this.je,C)||!this.Je(this.Ge[m++],C))return!1;++h}for(;h<a.length;++h){const C=a[h];if(m>=this.Ge.length||!this.Je(this.Ge[m++],C))return!1}return!0}ze(e){for(const r of this.Qe)if(this.He(r,e))return!0;return!1}He(e,r){return!(void 0===e||!e.field.isEqual(r.fieldPath))&&2===r.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,r){return!!e.field.isEqual(r.fieldPath)&&(0===r.kind&&"asc"===e.dir||1===r.kind&&"desc"===e.dir)}}class Jg{constructor(){this.Ye=new hd}addToCollectionParentIndex(e,r){return this.Ye.add(r),Q.resolve()}getCollectionParents(e,r){return Q.resolve(this.Ye.getEntries(r))}addFieldIndex(e,r){return Q.resolve()}deleteFieldIndex(e,r){return Q.resolve()}getDocumentsMatchingTarget(e,r){return Q.resolve(null)}getIndexType(e,r){return Q.resolve(0)}getFieldIndexes(e,r){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,r){return Q.resolve($i.min())}getMinOffsetFromCollectionGroup(e,r){return Q.resolve($i.min())}updateCollectionGroup(e,r,a){return Q.resolve()}updateIndexEntries(e,r){return Q.resolve()}}class hd{constructor(){this.index={}}add(e){const r=e.lastSegment(),a=e.popLast(),h=this.index[r]||new wi(Gr.comparator),m=!h.has(a);return this.index[r]=h.add(a),m}has(e){const r=e.lastSegment(),a=e.popLast(),h=this.index[r];return h&&h.has(a)}getEntries(e){return(this.index[e]||new wi(Gr.comparator)).toArray()}}const $h=new Uint8Array(0);class Bh{constructor(e,r){this.user=e,this.databaseId=r,this.Xe=new hd,this.Ze=new Fl(a=>nn(a),(a,h)=>gr(a,h)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.Xe.has(r)){const a=r.lastSegment(),h=r.popLast();e.addOnCommittedListener(()=>{this.Xe.add(r)});const m={collectionId:a,parent:Ua(h)};return Uh(e).put(m)}return Q.resolve()}getCollectionParents(e,r){const a=[],h=IDBKeyRange.bound([r,""],[Po(r),""],!1,!0);return Uh(e).W(h).next(m=>{for(const C of m){if(C.collectionId!==r)break;a.push(ec(C.parent))}return a})}addFieldIndex(e,r){const a=$l(e),h={indexId:(C=r).indexId,collectionGroup:C.collectionGroup,fields:C.fields.map(P=>[P.fieldPath.canonicalString(),P.kind])};var C;delete h.indexId;const m=a.add(h);if(r.indexState){const C=sl(e);return m.next(P=>{C.put(kf(P,this.user,r.indexState.sequenceNumber,r.indexState.offset))})}return m.next()}deleteFieldIndex(e,r){const a=$l(e),h=sl(e),m=fd(e);return a.delete(r.indexId).next(()=>h.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>m.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,r){const a=fd(e);let h=!0;const m=new Map;return Q.forEach(this.tn(r),C=>this.en(e,C).next(P=>{h&&(h=!!P),m.set(C,P)})).next(()=>{if(h){let C=jr();const P=[];return Q.forEach(m,(X,se)=>{var De;Ht("IndexedDbIndexManager",`Using index ${De=X,`id=${De.indexId}|cg=${De.collectionGroup}|f=${De.fields.map(ts=>`${ts.fieldPath}:${ts.kind}`).join(",")}`} to execute ${nn(r)}`);const Je=function(ts,fa){const ns=pl(fa);if(void 0===ns)return null;for(const Ni of kr(ts,ns.fieldPath))switch(Ni.op){case"array-contains-any":return Ni.value.arrayValue.values||[];case"array-contains":return[Ni.value]}return null}(se,X),Tt=function(ts,fa){const ns=new Map;for(const Ni of ra(fa))for(const Da of kr(ts,Ni.fieldPath))switch(Da.op){case"==":case"in":ns.set(Ni.fieldPath.canonicalString(),Da.value);break;case"not-in":case"!=":return ns.set(Ni.fieldPath.canonicalString(),Da.value),Array.from(ns.values())}return null}(se,X),zt=function(ts,fa){const ns=[];let Ni=!0;for(const Da of ra(fa)){const vf=0===Da.kind?_r(ts,Da.fieldPath,ts.startAt):Is(ts,Da.fieldPath,ts.startAt);ns.push(vf.value),Ni&&(Ni=vf.inclusive)}return new co(ns,Ni)}(se,X),Zt=function(ts,fa){const ns=[];let Ni=!0;for(const Da of ra(fa)){const vf=0===Da.kind?Is(ts,Da.fieldPath,ts.endAt):_r(ts,Da.fieldPath,ts.endAt);ns.push(vf.value),Ni&&(Ni=vf.inclusive)}return new co(ns,Ni)}(se,X),zn=this.nn(X,se,zt),cr=this.nn(X,se,Zt),Yi=this.sn(X,se,Tt),ks=this.rn(X.indexId,Je,zn,zt.inclusive,cr,Zt.inclusive,Yi);return Q.forEach(ks,ts=>a.J(ts,r.limit).next(fa=>{fa.forEach(ns=>{const Ni=Tn.fromSegments(ns.documentKey);C.has(Ni)||(C=C.add(Ni),P.push(Ni))})}))}).next(()=>P)}return Q.resolve(null)})}tn(e){let r=this.Ze.get(e);return r||(r=[e],this.Ze.set(e,r),r)}rn(e,r,a,h,m,C,P){const X=(null!=r?r.length:1)*Math.max(a.length,m.length),se=X/(null!=r?r.length:1),De=[];for(let Je=0;Je<X;++Je){const Tt=r?this.on(r[Je/se]):$h,zt=this.un(e,Tt,a[Je%se],h),Zt=this.cn(e,Tt,m[Je%se],C),zn=P.map(cr=>this.un(e,Tt,cr,!0));De.push(...this.createRange(zt,Zt,zn))}return De}un(e,r,a,h){const m=new Yc(e,Tn.empty(),r,a);return h?m:m.Ke()}cn(e,r,a,h){const m=new Yc(e,Tn.empty(),r,a);return h?m.Ke():m}en(e,r){const a=new Vf(r),h=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,h).next(m=>{let C=null;for(const P of m)a.We(P)&&(!C||P.fields.length>C.fields.length)&&(C=P);return C})}getIndexType(e,r){let a=2;return Q.forEach(this.tn(r),h=>this.en(e,h).next(m=>{m?0!==a&&m.fields.length<function(C){let P=new wi(Vi.comparator),X=!1;for(const se of C.filters){const De=se;De.field.isKeyField()||("array-contains"===De.op||"array-contains-any"===De.op?X=!0:P=P.add(De.field))}for(const se of C.orderBy)se.field.isKeyField()||(P=P.add(se.field));return P.size+(X?1:0)}(h)&&(a=1):a=0})).next(()=>a)}an(e,r){const a=new qc;for(const h of ra(e)){const m=r.data.field(h.fieldPath);if(null==m)return null;const C=a.qe(h.kind);Ec.Te.ce(m,C)}return a.$e()}on(e){const r=new qc;return Ec.Te.ce(e,r.qe(0)),r.$e()}hn(e,r){const a=new qc;return Ec.Te.ce(Qa(this.databaseId,r),a.qe(function(h){const m=ra(h);return 0===m.length?0:m[m.length-1].kind}(e))),a.$e()}sn(e,r,a){if(null===a)return[];let h=[];h.push(new qc);let m=0;for(const C of ra(e)){const P=a[m++];for(const X of h)if(this.ln(r,C.fieldPath)&&oa(P))h=this.fn(h,C,P);else{const se=X.qe(C.kind);Ec.Te.ce(P,se)}}return this.dn(h)}nn(e,r,a){return this.sn(e,r,a.position)}dn(e){const r=[];for(let a=0;a<e.length;++a)r[a]=e[a].$e();return r}fn(e,r,a){const h=[...e],m=[];for(const C of a.arrayValue.values||[])for(const P of h){const X=new qc;X.seed(P.$e()),Ec.Te.ce(C,X.qe(r.kind)),m.push(X)}return m}ln(e,r){return!!e.filters.find(a=>a instanceof pi&&a.field.isEqual(r)&&("in"===a.op||"not-in"===a.op))}getFieldIndexes(e,r){const a=$l(e),h=sl(e);return(r?a.W("collectionGroupIndex",IDBKeyRange.bound(r,r)):a.W()).next(m=>{const C=[];return Q.forEach(m,P=>h.get([P.indexId,this.uid]).next(X=>{C.push(function(se,De){const Je=De?new Oo(De.sequenceNumber,new $i(_c(De.readTime),new Tn(ec(De.documentKey)),De.largestBatchId)):Oo.empty(),Tt=se.fields.map(([zt,Zt])=>new Qs(Vi.fromServerFormat(zt),Zt));return new Oa(se.indexId,se.collectionGroup,Tt,Je)}(P,X))})).next(()=>C)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>0===r.length?null:(r.sort((a,h)=>{const m=a.indexState.sequenceNumber-h.indexState.sequenceNumber;return 0!==m?m:ar(a.collectionGroup,h.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,a){const h=$l(e),m=sl(e);return this._n(e).next(C=>h.W("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(P=>Q.forEach(P,X=>m.put(kf(X.indexId,this.user,C,a)))))}updateIndexEntries(e,r){const a=new Map;return Q.forEach(r,(h,m)=>{const C=a.get(h.collectionGroup);return(C?Q.resolve(C):this.getFieldIndexes(e,h.collectionGroup)).next(P=>(a.set(h.collectionGroup,P),Q.forEach(P,X=>this.wn(e,h,X).next(se=>{const De=this.mn(m,X);return se.isEqual(De)?Q.resolve():this.gn(e,m,X,se,De)}))))})}yn(e,r,a,h){return fd(e).put({indexId:h.indexId,uid:this.uid,arrayValue:h.arrayValue,directionalValue:h.directionalValue,orderedDocumentKey:this.hn(a,r.key),documentKey:r.key.path.toArray()})}pn(e,r,a,h){return fd(e).delete([h.indexId,this.uid,h.arrayValue,h.directionalValue,this.hn(a,r.key),r.key.path.toArray()])}wn(e,r,a){const h=fd(e);let m=new wi(il);return h.Z({index:"documentKeyIndex",range:IDBKeyRange.only([a.indexId,this.uid,this.hn(a,r)])},(C,P)=>{m=m.add(new Yc(a.indexId,r,P.arrayValue,P.directionalValue))}).next(()=>m)}mn(e,r){let a=new wi(il);const h=this.an(r,e);if(null==h)return a;const m=pl(r);if(null!=m){const C=e.data.field(m.fieldPath);if(oa(C))for(const P of C.arrayValue.values||[])a=a.add(new Yc(r.indexId,e.key,this.on(P),h))}else a=a.add(new Yc(r.indexId,e.key,$h,h));return a}gn(e,r,a,h,m){Ht("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const C=[];return function(P,X,se,De,Je){const Tt=P.getIterator(),zt=X.getIterator();let Zt=Rc(Tt),zn=Rc(zt);for(;Zt||zn;){let cr=!1,Yi=!1;if(Zt&&zn){const ks=se(Zt,zn);ks<0?Yi=!0:ks>0&&(cr=!0)}else null!=Zt?Yi=!0:cr=!0;cr?(De(zn),zn=Rc(zt)):Yi?(Je(Zt),Zt=Rc(Tt)):(Zt=Rc(Tt),zn=Rc(zt))}}(h,m,il,P=>{C.push(this.yn(e,r,a,P))},P=>{C.push(this.pn(e,r,a,P))}),Q.waitFor(C)}_n(e){let r=1;return sl(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(a,h,m)=>{m.done(),r=h.sequenceNumber+1}).next(()=>r)}createRange(e,r,a){a=a.sort((C,P)=>il(C,P)).filter((C,P,X)=>!P||0!==il(C,X[P-1]));const h=[];h.push(e);for(const C of a){const P=il(C,e),X=il(C,r);if(0===P)h[0]=e.Ke();else if(P>0&&X<0)h.push(C),h.push(C.Ke());else if(X>0)break}h.push(r);const m=[];for(let C=0;C<h.length;C+=2)m.push(IDBKeyRange.bound([h[C].indexId,this.uid,h[C].arrayValue,h[C].directionalValue,$h,[]],[h[C+1].indexId,this.uid,h[C+1].arrayValue,h[C+1].directionalValue,$h,[]]));return m}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(Qd)}getMinOffset(e,r){return Q.mapArray(this.tn(r),a=>this.en(e,a).next(h=>h||Bn())).next(Qd)}}function Uh(s){return Bi(s,"collectionParents")}function fd(s){return Bi(s,"indexEntries")}function $l(s){return Bi(s,"indexConfiguration")}function sl(s){return Bi(s,"indexState")}function Qd(s){or(0!==s.length);let e=s[0].indexState.offset,r=e.largestBatchId;for(let a=1;a<s.length;a++){const h=s[a].indexState.offset;F(h,e)<0&&(e=h),r<h.largestBatchId&&(r=h.largestBatchId)}return new $i(e.readTime,e.documentKey,r)}const wu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Uo{constructor(e,r,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=a}static withCacheSize(e){return new Uo(e,Uo.DEFAULT_COLLECTION_PERCENTILE,Uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function jh(s,e,r){const a=s.store("mutations"),h=s.store("documentMutations"),m=[],C=IDBKeyRange.only(r.batchId);let P=0;const X=a.Z({range:C},(De,Je,Tt)=>(P++,Tt.delete()));m.push(X.next(()=>{or(1===P)}));const se=[];for(const De of r.mutations){const Je=Rp(e,De.key.path,r.batchId);m.push(h.delete(Je)),se.push(De.key)}return Q.waitFor(m).next(()=>se)}function rc(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw Bn();e=s.noDocument}return JSON.stringify(e).length}Uo.DEFAULT_COLLECTION_PERCENTILE=10,Uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Uo.DEFAULT=new Uo(41943040,Uo.DEFAULT_COLLECTION_PERCENTILE,Uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Uo.DISABLED=new Uo(-1,0,0);class pd{constructor(e,r,a,h){this.userId=e,this.It=r,this.indexManager=a,this.referenceDelegate=h,this.In={}}static oe(e,r,a,h){or(""!==e.uid);const m=e.isAuthenticated()?e.uid:"";return new pd(m,r,a,h)}checkEmpty(e){let r=!0;const a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ic(e).Z({index:"userMutationsIndex",range:a},(h,m,C)=>{r=!1,C.done()}).next(()=>r)}addMutationBatch(e,r,a,h){const m=Kc(e),C=Ic(e);return C.add({}).next(P=>{or("number"==typeof P);const X=new ja(P,r,a,h),se=function(Tt,zt,Zt){const zn=Zt.baseMutations.map(Yi=>Vl(Tt.re,Yi)),cr=Zt.mutations.map(Yi=>Vl(Tt.re,Yi));return{userId:zt,batchId:Zt.batchId,localWriteTimeMs:Zt.localWriteTime.toMillis(),baseMutations:zn,mutations:cr}}(this.It,this.userId,X),De=[];let Je=new wi((Tt,zt)=>ar(Tt.canonicalString(),zt.canonicalString()));for(const Tt of h){const zt=Rp(this.userId,Tt.key.path,P);Je=Je.add(Tt.key.path.popLast()),De.push(C.put(se)),De.push(m.put(zt,Mp))}return Je.forEach(Tt=>{De.push(this.indexManager.addToCollectionParentIndex(e,Tt))}),e.addOnCommittedListener(()=>{this.In[P]=X.keys()}),Q.waitFor(De).next(()=>X)})}lookupMutationBatch(e,r){return Ic(e).get(r).next(a=>a?(or(a.userId===this.userId),dd(this.It,a)):null)}Tn(e,r){return this.In[r]?Q.resolve(this.In[r]):this.lookupMutationBatch(e,r).next(a=>{if(a){const h=a.keys();return this.In[r]=h,h}return null})}getNextMutationBatchAfterBatchId(e,r){const a=r+1,h=IDBKeyRange.lowerBound([this.userId,a]);let m=null;return Ic(e).Z({index:"userMutationsIndex",range:h},(C,P,X)=>{P.userId===this.userId&&(or(P.batchId>=a),m=dd(this.It,P)),X.done()}).next(()=>m)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let a=-1;return Ic(e).Z({index:"userMutationsIndex",range:r,reverse:!0},(h,m,C)=>{a=m.batchId,C.done()}).next(()=>a)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ic(e).W("userMutationsIndex",r).next(a=>a.map(h=>dd(this.It,h)))}getAllMutationBatchesAffectingDocumentKey(e,r){const a=mc(this.userId,r.path),h=IDBKeyRange.lowerBound(a),m=[];return Kc(e).Z({range:h},(C,P,X)=>{const[se,De,Je]=C,Tt=ec(De);if(se===this.userId&&r.path.isEqual(Tt))return Ic(e).get(Je).next(zt=>{if(!zt)throw Bn();or(zt.userId===this.userId),m.push(dd(this.It,zt))});X.done()}).next(()=>m)}getAllMutationBatchesAffectingDocumentKeys(e,r){let a=new wi(ar);const h=[];return r.forEach(m=>{const C=mc(this.userId,m.path),P=IDBKeyRange.lowerBound(C),X=Kc(e).Z({range:P},(se,De,Je)=>{const[Tt,zt,Zt]=se,zn=ec(zt);Tt===this.userId&&m.path.isEqual(zn)?a=a.add(Zt):Je.done()});h.push(X)}),Q.waitFor(h).next(()=>this.En(e,a))}getAllMutationBatchesAffectingQuery(e,r){const a=r.path,h=a.length+1,m=mc(this.userId,a),C=IDBKeyRange.lowerBound(m);let P=new wi(ar);return Kc(e).Z({range:C},(X,se,De)=>{const[Je,Tt,zt]=X,Zt=ec(Tt);Je===this.userId&&a.isPrefixOf(Zt)?Zt.length===h&&(P=P.add(zt)):De.done()}).next(()=>this.En(e,P))}En(e,r){const a=[],h=[];return r.forEach(m=>{h.push(Ic(e).get(m).next(C=>{if(null===C)throw Bn();or(C.userId===this.userId),a.push(dd(this.It,C))}))}),Q.waitFor(h).next(()=>a)}removeMutationBatch(e,r){return jh(e.ie,this.userId,r).next(a=>(e.addOnCommittedListener(()=>{this.An(r.batchId)}),Q.forEach(a,h=>this.referenceDelegate.markPotentiallyOrphaned(e,h))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return Q.resolve();const a=IDBKeyRange.lowerBound([this.userId]),h=[];return Kc(e).Z({range:a},(m,C,P)=>{if(m[0]===this.userId){const X=ec(m[1]);h.push(X)}else P.done()}).next(()=>{or(0===h.length)})})}containsKey(e,r){return Tu(e,this.userId,r)}Rn(e){return Xd(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Tu(s,e,r){const a=mc(e,r.path),h=a[1],m=IDBKeyRange.lowerBound(a);let C=!1;return Kc(s).Z({range:m,X:!0},(P,X,se)=>{const[De,Je,Tt]=P;De===e&&Je===h&&(C=!0),se.done()}).next(()=>C)}function Ic(s){return Bi(s,"mutations")}function Kc(s){return Bi(s,"documentMutations")}function Xd(s){return Bi(s,"mutationQueues")}class bc{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new bc(0)}static vn(){return new bc(-1)}}class Hh{constructor(e,r){this.referenceDelegate=e,this.It=r}allocateTargetId(e){return this.Vn(e).next(r=>{const a=new bc(r.highestTargetId);return r.highestTargetId=a.next(),this.Sn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(r=>Er.fromTimestamp(new Ei(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,a){return this.Vn(e).next(h=>(h.highestListenSequenceNumber=r,a&&(h.lastRemoteSnapshotVersion=a.toTimestamp()),r>h.highestListenSequenceNumber&&(h.highestListenSequenceNumber=r),this.Sn(e,h)))}addTargetData(e,r){return this.Dn(e,r).next(()=>this.Vn(e).next(a=>(a.targetCount+=1,this.Cn(r,a),this.Sn(e,a))))}updateTargetData(e,r){return this.Dn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Zc(e).delete(r.targetId)).next(()=>this.Vn(e)).next(a=>(or(a.targetCount>0),a.targetCount-=1,this.Sn(e,a)))}removeTargets(e,r,a){let h=0;const m=[];return Zc(e).Z((C,P)=>{const X=rl(P);X.sequenceNumber<=r&&null===a.get(X.targetId)&&(h++,m.push(this.removeTargetData(e,X)))}).next(()=>Q.waitFor(m)).next(()=>h)}forEachTarget(e,r){return Zc(e).Z((a,h)=>{const m=rl(h);r(m)})}Vn(e){return $f(e).get("targetGlobalKey").next(r=>(or(null!==r),r))}Sn(e,r){return $f(e).put("targetGlobalKey",r)}Dn(e,r){return Zc(e).put(Yd(this.It,r))}Cn(e,r){let a=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,a=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,a=!0),a}getTargetCount(e){return this.Vn(e).next(r=>r.targetCount)}getTargetData(e,r){const a=nn(r),h=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]);let m=null;return Zc(e).Z({range:h,index:"queryTargetsIndex"},(C,P,X)=>{const se=rl(P);gr(r,se.target)&&(m=se,X.done())}).next(()=>m)}addMatchingKeys(e,r,a){const h=[],m=Cc(e);return r.forEach(C=>{const P=Ua(C.path);h.push(m.put({targetId:a,path:P})),h.push(this.referenceDelegate.addReference(e,a,C))}),Q.waitFor(h)}removeMatchingKeys(e,r,a){const h=Cc(e);return Q.forEach(r,m=>{const C=Ua(m.path);return Q.waitFor([h.delete([a,C]),this.referenceDelegate.removeReference(e,a,m)])})}removeMatchingKeysForTargetId(e,r){const a=Cc(e),h=IDBKeyRange.bound([r],[r+1],!1,!0);return a.delete(h)}getMatchingKeysForTargetId(e,r){const a=IDBKeyRange.bound([r],[r+1],!1,!0),h=Cc(e);let m=jr();return h.Z({range:a,X:!0},(C,P,X)=>{const se=ec(C[1]),De=new Tn(se);m=m.add(De)}).next(()=>m)}containsKey(e,r){const a=Ua(r.path),h=IDBKeyRange.bound([a],[Po(a)],!1,!0);let m=0;return Cc(e).Z({index:"documentTargetsIndex",X:!0,range:h},([C,P],X,se)=>{0!==C&&(m++,se.done())}).next(()=>m>0)}se(e,r){return Zc(e).get(r).next(a=>a?rl(a):null)}}function Zc(s){return Bi(s,"targets")}function $f(s){return Bi(s,"targetGlobal")}function Cc(s){return Bi(s,"targetDocuments")}function Bf([s,e],[r,a]){const h=ar(s,r);return 0===h?ar(e,a):h}class Lp{constructor(e){this.xn=e,this.buffer=new wi(Bf),this.Nn=0}kn(){return++this.Nn}On(e){const r=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(r);else{const a=this.buffer.last();Bf(r,a)<0&&(this.buffer=this.buffer.delete(a).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Uf{constructor(e,r,a){this.garbageCollector=e,this.asyncQueue=r,this.localStore=a,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var r=this;Ht("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,_.Z)(function*(){r.Mn=null;try{yield r.localStore.collectGarbage(r.garbageCollector)}catch(a){Ar(a)?Ht("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield B(a)}yield r.Fn(3e5)}))}}class jf{constructor(e,r){this.$n=e,this.params=r}calculateTargetCount(e,r){return this.$n.Bn(e).next(a=>Math.floor(r/100*a))}nthSequenceNumber(e,r){if(0===r)return Q.resolve(xr.at);const a=new Lp(r);return this.$n.forEachTarget(e,h=>a.On(h.sequenceNumber)).next(()=>this.$n.Ln(e,h=>a.On(h))).next(()=>a.maxValue)}removeTargets(e,r,a){return this.$n.removeTargets(e,r,a)}removeOrphanedDocuments(e,r){return this.$n.removeOrphanedDocuments(e,r)}collect(e,r){return-1===this.params.cacheSizeCollectionThreshold?(Ht("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(wu)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(Ht("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wu):this.Un(e,r))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,r){let a,h,m,C,P,X,se;const De=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Je=>(Je>this.params.maximumSequenceNumbersToCollect?(Ht("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Je}`),h=this.params.maximumSequenceNumbersToCollect):h=Je,C=Date.now(),this.nthSequenceNumber(e,h))).next(Je=>(a=Je,P=Date.now(),this.removeTargets(e,a,r))).next(Je=>(m=Je,X=Date.now(),this.removeOrphanedDocuments(e,a))).next(Je=>(se=Date.now(),Wr()<=Me.in.DEBUG&&Ht("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${C-De}ms\n\tDetermined least recently used ${h} in `+(P-C)+`ms\n\tRemoved ${m} targets in `+(X-P)+`ms\n\tRemoved ${Je} documents in `+(se-X)+`ms\nTotal Duration: ${se-De}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:m,documentsRemoved:Je})))}}class em{constructor(e,r){this.db=e,this.garbageCollector=new jf(this,r)}Bn(e){const r=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(a=>r.next(h=>a+h))}qn(e){let r=0;return this.Ln(e,a=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Ln(e,r){return this.Kn(e,(a,h)=>r(h))}addReference(e,r,a){return ps(e,a)}removeReference(e,r,a){return ps(e,a)}removeTargets(e,r,a){return this.db.getTargetCache().removeTargets(e,r,a)}markPotentiallyOrphaned(e,r){return ps(e,r)}Gn(e,r){return function(a,h){let m=!1;return Xd(a).tt(C=>Tu(a,C,h).next(P=>(P&&(m=!0),Q.resolve(!P)))).next(()=>m)}(e,r)}removeOrphanedDocuments(e,r){const a=this.db.getRemoteDocumentCache().newChangeBuffer(),h=[];let m=0;return this.Kn(e,(C,P)=>{if(P<=r){const X=this.Gn(e,C).next(se=>{if(!se)return m++,a.getEntry(e,C).next(()=>(a.removeEntry(C,Er.min()),Cc(e).delete([0,Ua(C.path)])))});h.push(X)}}).next(()=>Q.waitFor(h)).next(()=>a.apply(e)).next(()=>m)}removeTarget(e,r){const a=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,a)}updateLimboDocument(e,r){return ps(e,r)}Kn(e,r){const a=Cc(e);let h,m=xr.at;return a.Z({index:"documentTargetsIndex"},([C,P],{path:X,sequenceNumber:se})=>{0===C?(m!==xr.at&&r(new Tn(ec(h)),m),m=se,h=X):m=xr.at}).next(()=>{m!==xr.at&&r(new Tn(ec(h)),m)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ps(s,e){return Cc(s).put((a=s.currentSequenceNumber,{targetId:0,path:Ua(e.path),sequenceNumber:a}));var a}class Jd{constructor(){this.changes=new Fl(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Le.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const a=this.changes.get(r);return void 0!==a?Q.resolve(a):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class wc{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,a){return Du(e).put(a)}removeEntry(e,r,a){return Du(e).delete(function(h,m){const C=h.path.toArray();return[C.slice(0,C.length-2),C[C.length-2],ud(m),C[C.length-1]]}(r,a))}updateMetadata(e,r){return this.getMetadata(e).next(a=>(a.byteSize+=r,this.Qn(e,a)))}getEntry(e,r){let a=Le.newInvalidDocument(r);return Du(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(th(r))},(h,m)=>{a=this.jn(r,m)}).next(()=>a)}Wn(e,r){let a={size:0,document:Le.newInvalidDocument(r)};return Du(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(th(r))},(h,m)=>{a={document:this.jn(r,m),size:rc(m)}}).next(()=>a)}getEntries(e,r){let a=mo();return this.zn(e,r,(h,m)=>{const C=this.jn(h,m);a=a.insert(h,C)}).next(()=>a)}Hn(e,r){let a=mo(),h=new ds(Tn.comparator);return this.zn(e,r,(m,C)=>{const P=this.jn(m,C);a=a.insert(m,P),h=h.insert(m,rc(C))}).next(()=>({documents:a,Jn:h}))}zn(e,r,a){if(r.isEmpty())return Q.resolve();let h=new wi(tm);r.forEach(X=>h=h.add(X));const m=IDBKeyRange.bound(th(h.first()),th(h.last())),C=h.getIterator();let P=C.getNext();return Du(e).Z({index:"documentKeyIndex",range:m},(X,se,De)=>{const Je=Tn.fromSegments([...se.prefixPath,se.collectionGroup,se.documentId]);for(;P&&tm(P,Je)<0;)a(P,null),P=C.getNext();P&&P.isEqual(Je)&&(a(P,se),P=C.hasNext()?C.getNext():null),P?De.j(th(P)):De.done()}).next(()=>{for(;P;)a(P,null),P=C.hasNext()?C.getNext():null})}getAllFromCollection(e,r,a){const h=[r.popLast().toArray(),r.lastSegment(),ud(a.readTime),a.documentKey.path.isEmpty()?"":a.documentKey.path.lastSegment()],m=[r.popLast().toArray(),r.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Du(e).W(IDBKeyRange.bound(h,m,!0)).next(C=>{let P=mo();for(const X of C){const se=this.jn(Tn.fromSegments(X.prefixPath.concat(X.collectionGroup,X.documentId)),X);P=P.insert(se.key,se)}return P})}getAllFromCollectionGroup(e,r,a,h){let m=mo();const C=Su(r,a),P=Su(r,$i.max());return Du(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(C,P,!0)},(X,se,De)=>{const Je=this.jn(Tn.fromSegments(se.prefixPath.concat(se.collectionGroup,se.documentId)),se);m=m.insert(Je.key,Je),m.size===h&&De.done()}).next(()=>m)}newChangeBuffer(e){return new Bl(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return Qc(e).get("remoteDocumentGlobalKey").next(r=>(or(!!r),r))}Qn(e,r){return Qc(e).put("remoteDocumentGlobalKey",r)}jn(e,r){if(r){const a=function(s,e){let r;if(e.document)r=jc(s.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const a=Tn.fromSegments(e.noDocument.path),h=_c(e.noDocument.readTime);r=Le.newNoDocument(a,h),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Bn();{const a=Tn.fromSegments(e.unknownDocument.path),h=_c(e.unknownDocument.version);r=Le.newUnknownDocument(a,h)}}return e.readTime&&r.setReadTime(function(a){const h=new Ei(a[0],a[1]);return Er.fromTimestamp(h)}(e.readTime)),r}(this.It,r);if(!a.isNoDocument()||!a.version.isEqual(Er.min()))return a}return Le.newInvalidDocument(e)}}function eh(s){return new wc(s)}class Bl extends Jd{constructor(e,r){super(),this.Yn=e,this.trackRemovals=r,this.Xn=new Fl(a=>a.toString(),(a,h)=>a.isEqual(h))}applyChanges(e){const r=[];let a=0,h=new wi((m,C)=>ar(m.canonicalString(),C.canonicalString()));return this.changes.forEach((m,C)=>{const P=this.Xn.get(m);if(r.push(this.Yn.removeEntry(e,m,P.readTime)),C.isValidDocument()){const X=qd(this.Yn.It,C);h=h.add(m.path.popLast()),a+=rc(X)-P.size,r.push(this.Yn.addEntry(e,m,X))}else if(a-=P.size,this.trackRemovals){const X=qd(this.Yn.It,C.convertToNoDocument(Er.min()));r.push(this.Yn.addEntry(e,m,X))}}),h.forEach(m=>{r.push(this.Yn.indexManager.addToCollectionParentIndex(e,m))}),r.push(this.Yn.updateMetadata(e,a)),Q.waitFor(r)}getFromCache(e,r){return this.Yn.Wn(e,r).next(a=>(this.Xn.set(r,{size:a.size,readTime:a.document.readTime}),a.document))}getAllFromCache(e,r){return this.Yn.Hn(e,r).next(({documents:a,Jn:h})=>(h.forEach((m,C)=>{this.Xn.set(m,{size:C,readTime:a.get(m).readTime})}),a))}}function Qc(s){return Bi(s,"remoteDocumentGlobal")}function Du(s){return Bi(s,"remoteDocumentsV14")}function th(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Su(s,e){const r=e.documentKey.path.toArray();return[s,ud(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function tm(s,e){const r=s.path.toArray(),a=e.path.toArray();let h=0;for(let m=0;m<r.length-2&&m<a.length-2;++m)if(h=ar(r[m],a[m]),h)return h;return h=ar(r.length,a.length),h||(h=ar(r[r.length-2],a[a.length-2]),h||ar(r[r.length-1],a[a.length-1]))}class vy{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}class Qr{constructor(e,r,a,h){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=a,this.indexManager=h}getDocument(e,r){let a=null;return this.documentOverlayCache.getOverlay(e,r).next(h=>(a=h,this.getBaseDocument(e,r,a))).next(h=>(null!==a&&yl(a.mutation,h,Rs.empty(),Ei.now()),h))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(a=>this.getLocalViewOfDocuments(e,a,jr()).next(()=>a))}getLocalViewOfDocuments(e,r,a=jr()){const h=_l();return this.populateOverlays(e,h,r).next(()=>this.computeViews(e,r,h,a).next(m=>{let C=pc();return m.forEach((P,X)=>{C=C.insert(P,X.overlayedDocument)}),C}))}getOverlayedDocuments(e,r){const a=_l();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,jr()))}populateOverlays(e,r,a){const h=[];return a.forEach(m=>{r.has(m)||h.push(m)}),this.documentOverlayCache.getOverlays(e,h).next(m=>{m.forEach((C,P)=>{r.set(C,P)})})}computeViews(e,r,a,h){let m=mo();const C=yu(),P=yu();return r.forEach((X,se)=>{const De=a.get(se.key);h.has(se.key)&&(void 0===De||De.mutation instanceof Nl)?m=m.insert(se.key,se):void 0!==De&&(C.set(se.key,De.mutation.getFieldMask()),yl(De.mutation,se,De.mutation.getFieldMask(),Ei.now()))}),this.recalculateAndSaveOverlays(e,m).next(X=>(X.forEach((se,De)=>C.set(se,De)),r.forEach((se,De)=>{var Je;return P.set(se,new vy(De,null!==(Je=C.get(se))&&void 0!==Je?Je:null))}),P))}recalculateAndSaveOverlays(e,r){const a=yu();let h=new ds((C,P)=>C-P),m=jr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(C=>{for(const P of C)P.keys().forEach(X=>{const se=r.get(X);if(null===se)return;let De=a.get(X)||Rs.empty();De=P.applyToLocalView(se,De),a.set(X,De);const Je=(h.get(P.batchId)||jr()).add(X);h=h.insert(P.batchId,Je)})}).next(()=>{const C=[],P=h.getReverseIterator();for(;P.hasNext();){const X=P.getNext(),se=X.key,De=X.value,Je=bf();De.forEach(Tt=>{if(!m.has(Tt)){const zt=Vd(r.get(Tt),a.get(Tt));null!==zt&&Je.set(Tt,zt),m=m.add(Tt)}}),C.push(this.documentOverlayCache.saveOverlays(e,se,Je))}return Q.waitFor(C)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,r,a){return Tn.isDocumentKey((h=r).path)&&null===h.collectionGroup&&0===h.filters.length?this.getDocumentsMatchingDocumentQuery(e,r.path):Nc(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,a):this.getDocumentsMatchingCollectionQuery(e,r,a);var h}getNextDocuments(e,r,a,h){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,a,h).next(m=>{const C=h-m.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,a.largestBatchId,h-m.size):Q.resolve(_l());let P=-1,X=m;return C.next(se=>Q.forEach(se,(De,Je)=>(P<Je.largestBatchId&&(P=Je.largestBatchId),m.get(De)?Q.resolve():this.getBaseDocument(e,De,Je).next(Tt=>{X=X.insert(De,Tt)}))).next(()=>this.populateOverlays(e,se,m)).next(()=>this.computeViews(e,X,se,jr())).next(De=>({batchId:P,changes:Ud(De)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Tn(r)).next(a=>{let h=pc();return a.isFoundDocument()&&(h=h.insert(a.key,a)),h})}getDocumentsMatchingCollectionGroupQuery(e,r,a){const h=r.collectionGroup;let m=pc();return this.indexManager.getCollectionParents(e,h).next(C=>Q.forEach(C,P=>{const X=(se=r,De=P.child(h),new la(De,null,se.explicitOrderBy.slice(),se.filters.slice(),se.limit,se.limitType,se.startAt,se.endAt));var se,De;return this.getDocumentsMatchingCollectionQuery(e,X,a).next(se=>{se.forEach((De,Je)=>{m=m.insert(De,Je)})})}).next(()=>m))}getDocumentsMatchingCollectionQuery(e,r,a){let h;return this.remoteDocumentCache.getAllFromCollection(e,r.path,a).next(m=>(h=m,this.documentOverlayCache.getOverlaysForCollection(e,r.path,a.largestBatchId))).next(m=>{m.forEach((P,X)=>{const se=X.getKey();null===h.get(se)&&(h=h.insert(se,Le.newInvalidDocument(se)))});let C=pc();return h.forEach((P,X)=>{const se=m.get(P);void 0!==se&&yl(se.mutation,X,Rs.empty(),Ei.now()),wa(r,X)&&(C=C.insert(P,X))}),C})}getBaseDocument(e,r,a){return null===a||1===a.mutation.type?this.remoteDocumentCache.getEntry(e,r):Q.resolve(Le.newInvalidDocument(r))}}class Hf{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,r){return Q.resolve(this.Zn.get(r))}saveBundleMetadata(e,r){var a;return this.Zn.set(r.id,{id:(a=r).id,version:a.version,createTime:no(a.createTime)}),Q.resolve()}getNamedQuery(e,r){return Q.resolve(this.ts.get(r))}saveNamedQuery(e,r){return this.ts.set(r.name,{name:(a=r).name,query:da(a.bundledQuery),readTime:no(a.readTime)}),Q.resolve();var a}}class nm{constructor(){this.overlays=new ds(Tn.comparator),this.es=new Map}getOverlay(e,r){return Q.resolve(this.overlays.get(r))}getOverlays(e,r){const a=_l();return Q.forEach(r,h=>this.getOverlay(e,h).next(m=>{null!==m&&a.set(h,m)})).next(()=>a)}saveOverlays(e,r,a){return a.forEach((h,m)=>{this.ue(e,r,m)}),Q.resolve()}removeOverlaysForBatchId(e,r,a){const h=this.es.get(a);return void 0!==h&&(h.forEach(m=>this.overlays=this.overlays.remove(m)),this.es.delete(a)),Q.resolve()}getOverlaysForCollection(e,r,a){const h=_l(),m=r.length+1,C=new Tn(r.child("")),P=this.overlays.getIteratorFrom(C);for(;P.hasNext();){const X=P.getNext().value,se=X.getKey();if(!r.isPrefixOf(se.path))break;se.path.length===m&&X.largestBatchId>a&&h.set(X.getKey(),X)}return Q.resolve(h)}getOverlaysForCollectionGroup(e,r,a,h){let m=new ds((se,De)=>se-De);const C=this.overlays.getIterator();for(;C.hasNext();){const se=C.getNext().value;if(se.getKey().getCollectionGroup()===r&&se.largestBatchId>a){let De=m.get(se.largestBatchId);null===De&&(De=_l(),m=m.insert(se.largestBatchId,De)),De.set(se.getKey(),se)}}const P=_l(),X=m.getIterator();for(;X.hasNext()&&(X.getNext().value.forEach((se,De)=>P.set(se,De)),!(P.size()>=h)););return Q.resolve(P)}ue(e,r,a){const h=this.overlays.get(a.key);if(null!==h){const C=this.es.get(h.largestBatchId).delete(a.key);this.es.set(h.largestBatchId,C)}this.overlays=this.overlays.insert(a.key,new Nf(r,a));let m=this.es.get(r);void 0===m&&(m=jr(),this.es.set(r,m)),this.es.set(r,m.add(a.key))}}class nh{constructor(){this.ns=new wi(Ji.ss),this.rs=new wi(Ji.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,r){const a=new Ji(e,r);this.ns=this.ns.add(a),this.rs=this.rs.add(a)}us(e,r){e.forEach(a=>this.addReference(a,r))}removeReference(e,r){this.cs(new Ji(e,r))}hs(e,r){e.forEach(a=>this.removeReference(a,r))}ls(e){const r=new Tn(new Gr([])),a=new Ji(r,e),h=new Ji(r,e+1),m=[];return this.rs.forEachInRange([a,h],C=>{this.cs(C),m.push(C.key)}),m}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const r=new Tn(new Gr([])),a=new Ji(r,e),h=new Ji(r,e+1);let m=jr();return this.rs.forEachInRange([a,h],C=>{m=m.add(C.key)}),m}containsKey(e){const r=new Ji(e,0),a=this.ns.firstAfterOrEqual(r);return null!==a&&e.isEqual(a.key)}}class Ji{constructor(e,r){this.key=e,this._s=r}static ss(e,r){return Tn.comparator(e.key,r.key)||ar(e._s,r._s)}static os(e,r){return ar(e._s,r._s)||Tn.comparator(e.key,r.key)}}class rm{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.ws=1,this.gs=new wi(Ji.ss)}checkEmpty(e){return Q.resolve(0===this.mutationQueue.length)}addMutationBatch(e,r,a,h){const m=this.ws;this.ws++;const C=new ja(m,r,a,h);this.mutationQueue.push(C);for(const P of h)this.gs=this.gs.add(new Ji(P.key,m)),this.indexManager.addToCollectionParentIndex(e,P.key.path.popLast());return Q.resolve(C)}lookupMutationBatch(e,r){return Q.resolve(this.ys(r))}getNextMutationBatchAfterBatchId(e,r){const h=this.ps(r+1),m=h<0?0:h;return Q.resolve(this.mutationQueue.length>m?this.mutationQueue[m]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const a=new Ji(r,0),h=new Ji(r,Number.POSITIVE_INFINITY),m=[];return this.gs.forEachInRange([a,h],C=>{const P=this.ys(C._s);m.push(P)}),Q.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,r){let a=new wi(ar);return r.forEach(h=>{const m=new Ji(h,0),C=new Ji(h,Number.POSITIVE_INFINITY);this.gs.forEachInRange([m,C],P=>{a=a.add(P._s)})}),Q.resolve(this.Is(a))}getAllMutationBatchesAffectingQuery(e,r){const a=r.path,h=a.length+1;let m=a;Tn.isDocumentKey(m)||(m=m.child(""));const C=new Ji(new Tn(m),0);let P=new wi(ar);return this.gs.forEachWhile(X=>{const se=X.key.path;return!!a.isPrefixOf(se)&&(se.length===h&&(P=P.add(X._s)),!0)},C),Q.resolve(this.Is(P))}Is(e){const r=[];return e.forEach(a=>{const h=this.ys(a);null!==h&&r.push(h)}),r}removeMutationBatch(e,r){or(0===this.Ts(r.batchId,"removed")),this.mutationQueue.shift();let a=this.gs;return Q.forEach(r.mutations,h=>{const m=new Ji(h.key,r.batchId);return a=a.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,h.key)}).next(()=>{this.gs=a})}An(e){}containsKey(e,r){const a=new Ji(r,0),h=this.gs.firstAfterOrEqual(a);return Q.resolve(r.isEqual(h&&h.key))}performConsistencyCheck(e){return Q.resolve()}Ts(e,r){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const r=this.ps(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class rh{constructor(e){this.Es=e,this.docs=new ds(Tn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const a=r.key,h=this.docs.get(a),m=h?h.size:0,C=this.Es(r);return this.docs=this.docs.insert(a,{document:r.mutableCopy(),size:C}),this.size+=C-m,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const a=this.docs.get(r);return Q.resolve(a?a.document.mutableCopy():Le.newInvalidDocument(r))}getEntries(e,r){let a=mo();return r.forEach(h=>{const m=this.docs.get(h);a=a.insert(h,m?m.document.mutableCopy():Le.newInvalidDocument(h))}),Q.resolve(a)}getAllFromCollection(e,r,a){let h=mo();const m=new Tn(r.child("")),C=this.docs.getIteratorFrom(m);for(;C.hasNext();){const{key:P,value:{document:X}}=C.getNext();if(!r.isPrefixOf(P.path))break;P.path.length>r.length+1||F(uc(X),a)<=0||(h=h.insert(X.key,X.mutableCopy()))}return Q.resolve(h)}getAllFromCollectionGroup(e,r,a,h){Bn()}As(e,r){return Q.forEach(this.docs,a=>r(a))}newChangeBuffer(e){return new gd(this)}getSize(e){return Q.resolve(this.size)}}class gd extends Jd{constructor(e){super(),this.Yn=e}applyChanges(e){const r=[];return this.changes.forEach((a,h)=>{h.isValidDocument()?r.push(this.Yn.addEntry(e,h)):this.Yn.removeEntry(a)}),Q.waitFor(r)}getFromCache(e,r){return this.Yn.getEntry(e,r)}getAllFromCache(e,r){return this.Yn.getEntries(e,r)}}class ol{constructor(e){this.persistence=e,this.Rs=new Fl(r=>nn(r),gr),this.lastRemoteSnapshotVersion=Er.min(),this.highestTargetId=0,this.bs=0,this.Ps=new nh,this.targetCount=0,this.vs=bc.Pn()}forEachTarget(e,r){return this.Rs.forEach((a,h)=>r(h)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,r,a){return a&&(this.lastRemoteSnapshotVersion=a),r>this.bs&&(this.bs=r),Q.resolve()}Dn(e){this.Rs.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.vs=new bc(r),this.highestTargetId=r),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,r){return this.Dn(r),this.targetCount+=1,Q.resolve()}updateTargetData(e,r){return this.Dn(r),Q.resolve()}removeTargetData(e,r){return this.Rs.delete(r.target),this.Ps.ls(r.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,r,a){let h=0;const m=[];return this.Rs.forEach((C,P)=>{P.sequenceNumber<=r&&null===a.get(P.targetId)&&(this.Rs.delete(C),m.push(this.removeMatchingKeysForTargetId(e,P.targetId)),h++)}),Q.waitFor(m).next(()=>h)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,r){const a=this.Rs.get(r)||null;return Q.resolve(a)}addMatchingKeys(e,r,a){return this.Ps.us(r,a),Q.resolve()}removeMatchingKeys(e,r,a){this.Ps.hs(r,a);const h=this.persistence.referenceDelegate,m=[];return h&&r.forEach(C=>{m.push(h.markPotentiallyOrphaned(e,C))}),Q.waitFor(m)}removeMatchingKeysForTargetId(e,r){return this.Ps.ls(r),Q.resolve()}getMatchingKeysForTargetId(e,r){const a=this.Ps.ds(r);return Q.resolve(a)}containsKey(e,r){return Q.resolve(this.Ps.containsKey(r))}}class Wh{constructor(e,r){this.Vs={},this.overlays={},this.Ss=new xr(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new ol(this),this.indexManager=new Jg,this.remoteDocumentCache=new rh(a=>this.referenceDelegate.xs(a)),this.It=new zc(r),this.Ns=new Hf(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new nm,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let a=this.Vs[e.toKey()];return a||(a=new rm(r,this.referenceDelegate),this.Vs[e.toKey()]=a),a}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,r,a){Ht("MemoryPersistence","Starting transaction:",e);const h=new im(this.Ss.next());return this.referenceDelegate.ks(),a(h).next(m=>this.referenceDelegate.Os(h).next(()=>m)).toPromise().then(m=>(h.raiseOnCommittedEvent(),m))}Ms(e,r){return Q.or(Object.values(this.Vs).map(a=>()=>a.containsKey(e,r)))}}class im extends S{constructor(e){super(),this.currentSequenceNumber=e}}class ih{constructor(e){this.persistence=e,this.Fs=new nh,this.$s=null}static Bs(e){return new ih(e)}get Ls(){if(this.$s)return this.$s;throw Bn()}addReference(e,r,a){return this.Fs.addReference(a,r),this.Ls.delete(a.toString()),Q.resolve()}removeReference(e,r,a){return this.Fs.removeReference(a,r),this.Ls.add(a.toString()),Q.resolve()}markPotentiallyOrphaned(e,r){return this.Ls.add(r.toString()),Q.resolve()}removeTarget(e,r){this.Fs.ls(r.targetId).forEach(h=>this.Ls.add(h.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,r.targetId).next(h=>{h.forEach(m=>this.Ls.add(m.toString()))}).next(()=>a.removeTargetData(e,r))}ks(){this.$s=new Set}Os(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.Ls,a=>{const h=Tn.fromPath(a);return this.Us(e,h).next(m=>{m||r.removeEntry(h,Er.min())})}).next(()=>(this.$s=null,r.apply(e)))}updateLimboDocument(e,r){return this.Us(e,r).next(a=>{a?this.Ls.delete(r.toString()):this.Ls.add(r.toString())})}xs(e){return 0}Us(e,r){return Q.or([()=>Q.resolve(this.Fs.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ms(e,r)])}}class H_{constructor(e){this.It=e}$(e,r,a,h){const m=new Be("createOrUpgrade",r);var P;a<1&&h>=1&&(e.createObjectStore("owner"),(P=e).createObjectStore("mutationQueues",{keyPath:"userId"}),P.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Sf,{unique:!0}),P.createObjectStore("documentMutations"),Vp(e),function(P){P.createObjectStore("remoteDocuments")}(e));let C=Q.resolve();return a<3&&h>=3&&(0!==a&&(function(P){P.deleteObjectStore("targetDocuments"),P.deleteObjectStore("targets"),P.deleteObjectStore("targetGlobal")}(e),Vp(e)),C=C.next(()=>function(P){const X=P.store("targetGlobal"),se={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Er.min().toTimestamp(),targetCount:0};return X.put("targetGlobalKey",se)}(m))),a<4&&h>=4&&(0!==a&&(C=C.next(()=>function(P,X){return X.store("mutations").W().next(se=>{P.deleteObjectStore("mutations"),P.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Sf,{unique:!0});const De=X.store("mutations"),Je=se.map(Tt=>De.put(Tt));return Q.waitFor(Je)})}(e,m))),C=C.next(()=>{!function(P){P.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),a<5&&h>=5&&(C=C.next(()=>this.qs(m))),a<6&&h>=6&&(C=C.next(()=>(function(P){P.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(m)))),a<7&&h>=7&&(C=C.next(()=>this.Gs(m))),a<8&&h>=8&&(C=C.next(()=>this.Qs(e,m))),a<9&&h>=9&&(C=C.next(()=>{!function(P){P.objectStoreNames.contains("remoteDocumentChanges")&&P.deleteObjectStore("remoteDocumentChanges")}(e)})),a<10&&h>=10&&(C=C.next(()=>this.js(m))),a<11&&h>=11&&(C=C.next(()=>{(function(P){P.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(P){P.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),a<12&&h>=12&&(C=C.next(()=>{!function(P){const X=P.createObjectStore("documentOverlays",{keyPath:zd});X.createIndex("collectionPathOverlayIndex",Mf,{unique:!1}),X.createIndex("collectionGroupOverlayIndex",Zg,{unique:!1})}(e)})),a<13&&h>=13&&(C=C.next(()=>function(P){const X=P.createObjectStore("remoteDocumentsV14",{keyPath:Af});X.createIndex("documentKeyIndex",xf),X.createIndex("collectionGroupIndex",Rf)}(e)).next(()=>this.Ws(e,m)).next(()=>e.deleteObjectStore("remoteDocuments"))),a<14&&h>=14&&(C=C.next(()=>this.zs(e,m))),a<15&&h>=15&&(C=C.next(()=>function(P){P.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),P.createObjectStore("indexState",{keyPath:Yg}).createIndex("sequenceNumberIndex",Gd,{unique:!1}),P.createObjectStore("indexEntries",{keyPath:Kg}).createIndex("documentKeyIndex",Op,{unique:!1})}(e))),C}Ks(e){let r=0;return e.store("remoteDocuments").Z((a,h)=>{r+=rc(h)}).next(()=>{const a={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",a)})}qs(e){const r=e.store("mutationQueues"),a=e.store("mutations");return r.W().next(h=>Q.forEach(h,m=>{const C=IDBKeyRange.bound([m.userId,-1],[m.userId,m.lastAcknowledgedBatchId]);return a.W("userMutationsIndex",C).next(P=>Q.forEach(P,X=>{or(X.userId===m.userId);const se=dd(this.It,X);return jh(e,m.userId,se).next(()=>{})}))}))}Gs(e){const r=e.store("targetDocuments"),a=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(h=>{const m=[];return a.Z((C,P)=>{const X=new Gr(C),se=[0,Ua(X)];m.push(r.get(se).next(De=>De?Q.resolve():r.put({targetId:0,path:Ua(X),sequenceNumber:h.highestListenSequenceNumber})))}).next(()=>Q.waitFor(m))})}Qs(e,r){e.createObjectStore("collectionParents",{keyPath:Pp});const a=r.store("collectionParents"),h=new hd,m=C=>{if(h.add(C)){const P=C.lastSegment(),X=C.popLast();return a.put({collectionId:P,parent:Ua(X)})}};return r.store("remoteDocuments").Z({X:!0},(C,P)=>{const X=new Gr(C);return m(X.popLast())}).next(()=>r.store("documentMutations").Z({X:!0},([C,P,X],se)=>{const De=ec(P);return m(De.popLast())}))}js(e){const r=e.store("targets");return r.Z((a,h)=>{const m=rl(h),C=Yd(this.It,m);return r.put(C)})}Ws(e,r){const a=r.store("remoteDocuments"),h=[];return a.Z((m,C)=>{const P=r.store("remoteDocumentsV14"),X=(se=C,se.document?new Tn(Gr.fromString(se.document.name).popFirst(5)):se.noDocument?Tn.fromSegments(se.noDocument.path):se.unknownDocument?Tn.fromSegments(se.unknownDocument.path):Bn()).path.toArray();var se;const De={prefixPath:X.slice(0,X.length-2),collectionGroup:X[X.length-2],documentId:X[X.length-1],readTime:C.readTime||[0,0],unknownDocument:C.unknownDocument,noDocument:C.noDocument,document:C.document,hasCommittedMutations:!!C.hasCommittedMutations};h.push(P.put(De))}).next(()=>Q.waitFor(h))}zs(e,r){const a=r.store("mutations"),h=eh(this.It),m=new Wh(ih.Bs,this.It.re);return a.W().next(C=>{const P=new Map;return C.forEach(X=>{var se;let De=null!==(se=P.get(X.userId))&&void 0!==se?se:jr();dd(this.It,X).keys().forEach(Je=>De=De.add(Je)),P.set(X.userId,De)}),Q.forEach(P,(X,se)=>{const De=new on(se),Je=Kd.oe(this.It,De),Tt=m.getIndexManager(De),zt=pd.oe(De,this.It,Tt,m.referenceDelegate);return new Qr(h,zt,Je,Tt).recalculateAndSaveOverlaysForDocumentKeys(new Np(r,xr.at),X).next()})})}}function Vp(s){s.createObjectStore("targetDocuments",{keyPath:$o}).createIndex("documentTargetsIndex",Oh,{unique:!0}),s.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",bu,{unique:!0}),s.createObjectStore("targetGlobal")}const sm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ic{constructor(e,r,a,h,m,C,P,X,se,De,Je=15){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=a,this.Hs=m,this.window=C,this.document=P,this.Js=se,this.Ys=De,this.Xs=Je,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=Tt=>Promise.resolve(),!ic.C())throw new Nt(Et.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new em(this,h),this.ii=r+"main",this.It=new zc(X),this.ri=new rt(this.ii,this.Xs,new H_(this.It)),this.Cs=new Hh(this.referenceDelegate,this.It),this.remoteDocumentCache=eh(this.It),this.Ns=new Qg,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===De&&pr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Nt(Et.FAILED_PRECONDITION,sm);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new xr(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var r=this;return this.si=function(){var a=(0,_.Z)(function*(h){if(r.started)return e(h)});return function(h){return a.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var r=(0,_.Z)(function*(a){null===a.newVersion&&(yield e())});return function(a){return r.apply(this,arguments)}}())}setNetworkEnabled(e){var r=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,_.Z)(function*(){r.started&&(yield r.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>md(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(r=>{r||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(r=>this.isPrimary&&!r?this._i(e).next(()=>!1):!!r&&this.wi(e).next(()=>!0))).catch(e=>{if(Ar(e))return Ht("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ht("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Tc(e).get("owner").next(r=>Q.resolve(this.mi(r)))}gi(e){return md(e).delete(this.clientId)}yi(){var e=this;return(0,_.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const r=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",a=>{const h=Bi(a,"clientMetadata");return h.W().next(m=>{const C=e.Ii(m,18e5),P=m.filter(X=>-1===C.indexOf(X));return Q.forEach(P,X=>h.delete(X.clientId)).next(()=>P)})}).catch(()=>[]);if(e.oi)for(const a of r)e.oi.removeItem(e.Ti(a.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?Q.resolve(!0):Tc(e).get("owner").next(r=>{if(null!==r&&this.pi(r.leaseTimestampMs,5e3)&&!this.Ei(r.ownerId)){if(this.mi(r)&&this.networkEnabled)return!0;if(!this.mi(r)){if(!r.allowTabSynchronization)throw new Nt(Et.FAILED_PRECONDITION,sm);return!1}}return!(!this.networkEnabled||!this.inForeground)||md(e).W().next(a=>void 0===this.Ii(a,5e3).find(h=>{if(this.clientId!==h.clientId){const C=!this.inForeground&&h.inForeground,P=this.networkEnabled===h.networkEnabled;if(!this.networkEnabled&&h.networkEnabled||C&&P)return!0}return!1}))}).next(r=>(this.isPrimary!==r&&Ht("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var e=this;return(0,_.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],r=>{const a=new Np(r,xr.at);return e._i(a).next(()=>e.gi(a))}),e.ri.close(),e.Pi()})()}Ii(e,r){return e.filter(a=>this.pi(a.updateTimeMs,r)&&!this.Ei(a.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>md(e).W().next(r=>this.Ii(r,18e5).map(a=>a.clientId)))}get started(){return this.Ds}getMutationQueue(e,r){return pd.oe(e,this.It,r,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Bh(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Kd.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,r,a){Ht("IndexedDbPersistence","Starting transaction:",e);const h="readonly"===r?"readonly":"readwrite",m=15===(C=this.Xs)?Of:14===C?Nh:13===C?Pf:12===C?tc:11===C?Cu:void Bn();var C;let P;return this.ri.runTransaction(e,h,m,X=>(P=new Np(X,this.Ss?this.Ss.next():xr.at),"readwrite-primary"===r?this.fi(P).next(se=>!!se||this.di(P)).next(se=>{if(!se)throw pr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Nt(Et.FAILED_PRECONDITION,x);return a(P)}).next(se=>this.wi(P).next(()=>se)):this.Vi(P).next(()=>a(P)))).then(X=>(P.raiseOnCommittedEvent(),X))}Vi(e){return Tc(e).get("owner").next(r=>{if(null!==r&&this.pi(r.leaseTimestampMs,5e3)&&!this.Ei(r.ownerId)&&!this.mi(r)&&!(this.Ys||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Nt(Et.FAILED_PRECONDITION,sm)})}wi(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Tc(e).put("owner",r)}static C(){return rt.C()}_i(e){const r=Tc(e);return r.get("owner").next(a=>this.mi(a)?(Ht("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Q.resolve())}pi(e,r){const a=Date.now();return!(e<a-r||e>a&&(pr(`Detected an update time that is in the future: ${e} > ${a}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,ce.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var r;try{const a=null!==(null===(r=this.oi)||void 0===r?void 0:r.getItem(this.Ti(e)));return Ht("IndexedDbPersistence",`Client '${e}' ${a?"is":"is not"} zombied in LocalStorage`),a}catch(a){return pr("IndexedDbPersistence","Failed to get zombied client id.",a),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){pr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Tc(s){return Bi(s,"owner")}function md(s){return Bi(s,"clientMetadata")}function sh(s,e){let r=s.projectId;return s.isDefaultDatabase||(r+="."+s.database),"firestore/"+e+"/"+r+"/"}class om{constructor(e,r,a,h){this.targetId=e,this.fromCache=r,this.Si=a,this.Di=h}static Ci(e,r){let a=jr(),h=jr();for(const m of r.docChanges)switch(m.type){case 0:a=a.add(m.doc.key);break;case 1:h=h.add(m.doc.key)}return new om(e,r.fromCache,a,h)}}class Wf{constructor(){this.xi=!1}initialize(e,r){this.Ni=e,this.indexManager=r,this.xi=!0}getDocumentsMatchingQuery(e,r,a,h){return this.ki(e,r).next(m=>m||this.Oi(e,r,h,a)).next(m=>m||this.Mi(e,r))}ki(e,r){if(Oi(r))return Q.resolve(null);let a=Ps(r);return this.indexManager.getIndexType(e,a).next(h=>0===h?null:(null!==r.limit&&1===h&&(r=Ja(r,null,"F"),a=Ps(r)),this.indexManager.getDocumentsMatchingTarget(e,a).next(m=>{const C=jr(...m);return this.Ni.getDocuments(e,C).next(P=>this.indexManager.getMinOffset(e,a).next(X=>{const se=this.Fi(r,P);return this.$i(r,se,C,X.readTime)?this.ki(e,Ja(r,null,"F")):this.Bi(e,se,r,X)}))})))}Oi(e,r,a,h){return Oi(r)||h.isEqual(Er.min())?this.Mi(e,r):this.Ni.getDocuments(e,a).next(m=>{const C=this.Fi(r,m);return this.$i(r,C,a,h)?this.Mi(e,r):(Wr()<=Me.in.DEBUG&&Ht("QueryEngine","Re-using previous result from %s to execute query: %s",h.toString(),Va(r)),this.Bi(e,C,r,No(h,-1)))})}Fi(e,r){let a=new wi(Zu(e));return r.forEach((h,m)=>{wa(e,m)&&(a=a.add(m))}),a}$i(e,r,a,h){if(null===e.limit)return!1;if(a.size!==r.size)return!0;const m="F"===e.limitType?r.last():r.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(h)>0)}Mi(e,r){return Wr()<=Me.in.DEBUG&&Ht("QueryEngine","Using full collection scan to execute query:",Va(r)),this.Ni.getDocumentsMatchingQuery(e,r,$i.min())}Bi(e,r,a,h){return this.Ni.getDocumentsMatchingQuery(e,a,h).next(m=>(r.forEach(C=>{m=m.insert(C.key,C)}),m))}}class am{constructor(e,r,a,h){this.persistence=e,this.Li=r,this.It=h,this.Ui=new ds(ar),this.qi=new Fl(m=>nn(m),gr),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(a)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Qr(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ui))}}function lm(s,e,r,a){return new am(s,e,r,a)}function cm(s,e){return $p.apply(this,arguments)}function $p(){return $p=(0,_.Z)(function*(s,e){const r=_n(s);return yield r.persistence.runTransaction("Handle user change","readonly",a=>{let h;return r.mutationQueue.getAllMutationBatches(a).next(m=>(h=m,r.Qi(e),r.mutationQueue.getAllMutationBatches(a))).next(m=>{const C=[],P=[];let X=jr();for(const se of h){C.push(se.batchId);for(const De of se.mutations)X=X.add(De.key)}for(const se of m){P.push(se.batchId);for(const De of se.mutations)X=X.add(De.key)}return r.localDocuments.getDocuments(a,X).next(se=>({ji:se,removedBatchIds:C,addedBatchIds:P}))})})}),$p.apply(this,arguments)}function um(s,e){const r=_n(s);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const h=e.batch.keys(),m=r.Gi.newChangeBuffer({trackRemovals:!0});return function(C,P,X,se){const De=X.batch,Je=De.keys();let Tt=Q.resolve();return Je.forEach(zt=>{Tt=Tt.next(()=>se.getEntry(P,zt)).next(Zt=>{const zn=X.docVersions.get(zt);or(null!==zn),Zt.version.compareTo(zn)<0&&(De.applyToRemoteDocument(Zt,X),Zt.isValidDocument()&&(Zt.setReadTime(X.commitVersion),se.addEntry(Zt)))})}),Tt.next(()=>C.mutationQueue.removeMutationBatch(P,De))}(r,a,e,m).next(()=>m.apply(a)).next(()=>r.mutationQueue.performConsistencyCheck(a)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(a,h,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(C){let P=jr();for(let X=0;X<C.mutationResults.length;++X)C.mutationResults[X].transformResults.length>0&&(P=P.add(C.batch.mutations[X].key));return P}(e))).next(()=>r.localDocuments.getDocuments(a,h))})}function Gf(s){const e=_n(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Cs.getLastRemoteSnapshotVersion(r))}function Ey(s,e){const r=_n(s),a=e.snapshotVersion;let h=r.Ui;return r.persistence.runTransaction("Apply remote event","readwrite-primary",m=>{const C=r.Gi.newChangeBuffer({trackRemovals:!0});h=r.Ui;const P=[];e.targetChanges.forEach((De,Je)=>{const Tt=h.get(Je);if(!Tt)return;P.push(r.Cs.removeMatchingKeys(m,De.removedDocuments,Je).next(()=>r.Cs.addMatchingKeys(m,De.addedDocuments,Je)));let zt=Tt.withSequenceNumber(m.currentSequenceNumber);var Zt,zn,cr;e.targetMismatches.has(Je)?zt=zt.withResumeToken(ni.EMPTY_BYTE_STRING,Er.min()).withLastLimboFreeSnapshotVersion(Er.min()):De.resumeToken.approximateByteSize()>0&&(zt=zt.withResumeToken(De.resumeToken,a)),h=h.insert(Je,zt),zn=zt,cr=De,(0===(Zt=Tt).resumeToken.approximateByteSize()||zn.snapshotVersion.toMicroseconds()-Zt.snapshotVersion.toMicroseconds()>=3e8||cr.addedDocuments.size+cr.modifiedDocuments.size+cr.removedDocuments.size>0)&&P.push(r.Cs.updateTargetData(m,zt))});let X=mo(),se=jr();if(e.documentUpdates.forEach(De=>{e.resolvedLimboDocuments.has(De)&&P.push(r.persistence.referenceDelegate.updateLimboDocument(m,De))}),P.push(Gh(m,C,e.documentUpdates).next(De=>{X=De.Wi,se=De.zi})),!a.isEqual(Er.min())){const De=r.Cs.getLastRemoteSnapshotVersion(m).next(Je=>r.Cs.setTargetsMetadata(m,m.currentSequenceNumber,a));P.push(De)}return Q.waitFor(P).next(()=>C.apply(m)).next(()=>r.localDocuments.getLocalViewOfDocuments(m,X,se)).next(()=>X)}).then(m=>(r.Ui=h,m))}function Gh(s,e,r){let a=jr(),h=jr();return r.forEach(m=>a=a.add(m)),e.getEntries(s,a).next(m=>{let C=mo();return r.forEach((P,X)=>{const se=m.get(P);X.isFoundDocument()!==se.isFoundDocument()&&(h=h.add(P)),X.isNoDocument()&&X.version.isEqual(Er.min())?(e.removeEntry(P,X.readTime),C=C.insert(P,X)):!se.isValidDocument()||X.version.compareTo(se.version)>0||0===X.version.compareTo(se.version)&&se.hasPendingWrites?(e.addEntry(X),C=C.insert(P,X)):Ht("LocalStore","Ignoring outdated watch update for ",P,". Current version:",se.version," Watch version:",X.version)}),{Wi:C,zi:h}})}function W_(s,e){const r=_n(s);return r.persistence.runTransaction("Get next mutation batch","readonly",a=>(void 0===e&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function oh(s,e){const r=_n(s);return r.persistence.runTransaction("Allocate target","readwrite",a=>{let h;return r.Cs.getTargetData(a,e).next(m=>m?(h=m,Q.resolve(h)):r.Cs.allocateTargetId(a).next(C=>(h=new nc(e,C,0,a.currentSequenceNumber),r.Cs.addTargetData(a,h).next(()=>h))))}).then(a=>{const h=r.Ui.get(a.targetId);return(null===h||a.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(r.Ui=r.Ui.insert(a.targetId,a),r.qi.set(e,a.targetId)),a})}function zh(s,e,r){return Bp.apply(this,arguments)}function Bp(){return Bp=(0,_.Z)(function*(s,e,r){const a=_n(s),h=a.Ui.get(e),m=r?"readwrite":"readwrite-primary";try{r||(yield a.persistence.runTransaction("Release target",m,C=>a.persistence.referenceDelegate.removeTarget(C,h)))}catch(C){if(!Ar(C))throw C;Ht("LocalStore",`Failed to update sequence numbers for target ${e}: ${C}`)}a.Ui=a.Ui.remove(e),a.qi.delete(h.target)}),Bp.apply(this,arguments)}function Up(s,e,r){const a=_n(s);let h=Er.min(),m=jr();return a.persistence.runTransaction("Execute query","readonly",C=>function(P,X,se){const De=_n(P),Je=De.qi.get(se);return void 0!==Je?Q.resolve(De.Ui.get(Je)):De.Cs.getTargetData(X,se)}(a,C,Ps(e)).next(P=>{if(P)return h=P.lastLimboFreeSnapshotVersion,a.Cs.getMatchingKeysForTargetId(C,P.targetId).next(X=>{m=X})}).next(()=>a.Li.getDocumentsMatchingQuery(C,e,r?h:Er.min(),r?m:jr())).next(P=>(hm(a,hu(e),P),{documents:P,Hi:m})))}function dm(s,e){const r=_n(s),a=_n(r.Cs),h=r.Ui.get(e);return h?Promise.resolve(h.target):r.persistence.runTransaction("Get target data","readonly",m=>a.se(m,e).next(C=>C?C.target:null))}function Iy(s,e){const r=_n(s),a=r.Ki.get(e)||Er.min();return r.persistence.runTransaction("Get new document changes","readonly",h=>r.Gi.getAllFromCollectionGroup(h,e,No(a,-1),Number.MAX_SAFE_INTEGER)).then(h=>(hm(r,e,h),h))}function hm(s,e,r){let a=s.Ki.get(e)||Er.min();r.forEach((h,m)=>{m.readTime.compareTo(a)>0&&(a=m.readTime)}),s.Ki.set(e,a)}function fm(){return fm=(0,_.Z)(function*(s,e,r,a){const h=_n(s);let m=jr(),C=mo();for(const se of r){const De=e.Ji(se.metadata.name);se.document&&(m=m.add(De));const Je=e.Yi(se);Je.setReadTime(e.Xi(se.metadata.readTime)),C=C.insert(De,Je)}const P=h.Gi.newChangeBuffer({trackRemovals:!0}),X=yield oh(h,(se=a,Ps(Lo(Gr.fromString(`__bundle__/docs/${se}`)))));var se;return h.persistence.runTransaction("Apply bundle documents","readwrite",se=>Gh(se,P,C).next(De=>(P.apply(se),De)).next(De=>h.Cs.removeMatchingKeysForTargetId(se,X.targetId).next(()=>h.Cs.addMatchingKeys(se,m,X.targetId)).next(()=>h.localDocuments.getLocalViewOfDocuments(se,De.Wi,De.zi)).next(()=>De.Wi)))}),fm.apply(this,arguments)}function by(s,e){return Il.apply(this,arguments)}function Il(){return Il=(0,_.Z)(function*(s,e,r=jr()){const a=yield oh(s,Ps(da(e.bundledQuery))),h=_n(s);return h.persistence.runTransaction("Save named query","readwrite",m=>{const C=no(e.readTime);if(a.snapshotVersion.compareTo(C)>=0)return h.Ns.saveNamedQuery(m,e);const P=a.withResumeToken(ni.EMPTY_BYTE_STRING,C);return h.Ui=h.Ui.insert(P.targetId,P),h.Cs.updateTargetData(m,P).next(()=>h.Cs.removeMatchingKeysForTargetId(m,a.targetId)).next(()=>h.Cs.addMatchingKeys(m,r,a.targetId)).next(()=>h.Ns.saveNamedQuery(m,e))})}),Il.apply(this,arguments)}function ah(s,e){return`firestore_clients_${s}_${e}`}function jp(s,e,r){let a=`firestore_mutations_${s}_${r}`;return e.isAuthenticated()&&(a+=`_${e.uid}`),a}function qh(s,e){return`firestore_targets_${s}_${e}`}class yd{constructor(e,r,a,h){this.user=e,this.batchId=r,this.state=a,this.error=h}static Zi(e,r,a){const h=JSON.parse(a);let m,C="object"==typeof h&&-1!==["pending","acknowledged","rejected"].indexOf(h.state)&&(void 0===h.error||"object"==typeof h.error);return C&&h.error&&(C="string"==typeof h.error.message&&"string"==typeof h.error.code,C&&(m=new Nt(h.error.code,h.error.message))),C?new yd(e,r,h.state,m):(pr("SharedClientState",`Failed to parse mutation state for ID '${r}': ${a}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _d{constructor(e,r,a){this.targetId=e,this.state=r,this.error=a}static Zi(e,r){const a=JSON.parse(r);let h,m="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return m&&a.error&&(m="string"==typeof a.error.message&&"string"==typeof a.error.code,m&&(h=new Nt(a.error.code,a.error.message))),m?new _d(e,a.state,h):(pr("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vd{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Zi(e,r){const a=JSON.parse(r);let h="object"==typeof a&&a.activeTargetIds instanceof Array,m=D();for(let C=0;h&&C<a.activeTargetIds.length;++C)h=ko(a.activeTargetIds[C]),m=m.add(a.activeTargetIds[C]);return h?new vd(e,m):(pr("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class zf{constructor(e,r){this.clientId=e,this.onlineState=r}static Zi(e){const r=JSON.parse(e);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new zf(r.clientId,r.onlineState):(pr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ul{constructor(){this.activeTargetIds=D()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qf{constructor(e,r,a,h,m){this.window=e,this.Hs=r,this.persistenceKey=a,this.sr=h,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new ds(ar),this.started=!1,this.cr=[];const C=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=m,this.ar=ah(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Ul),this.lr=new RegExp(`^firestore_clients_${C}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${C}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${C}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(P){return`firestore_bundle_loaded_v2_${P}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_.Z)(function*(){const r=yield e.syncEngine.vi();for(const h of r){if(h===e.sr)continue;const m=e.getItem(ah(e.persistenceKey,h));if(m){const C=vd.Zi(h,m);C&&(e.ur=e.ur.insert(C.clientId,C))}}e.gr();const a=e.storage.getItem(e.wr);if(a){const h=e.yr(a);h&&e.pr(h)}for(const h of e.cr)e.rr(h);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let r=!1;return this.ur.forEach((a,h)=>{h.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,r,a){this.Tr(e,r,a),this.Er(e)}addLocalQueryTarget(e){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(qh(this.persistenceKey,e));if(a){const h=_d.Zi(e,a);h&&(r=h.state)}}return this.Ar.er(e),this.gr(),r}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(qh(this.persistenceKey,e))}updateQueryState(e,r,a){this.Rr(e,r,a)}handleUserChange(e,r,a){r.forEach(h=>{this.Er(h)}),this.currentUser=e,a.forEach(h=>{this.addPendingMutation(h)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return Ht("SharedClientState","READ",e,r),r}setItem(e,r){Ht("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){Ht("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var r=this;const a=e;if(a.storageArea===this.storage){if(Ht("SharedClientState","EVENT",a.key,a.newValue),a.key===this.ar)return void pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,_.Z)(function*(){if(r.started){if(null!==a.key)if(r.lr.test(a.key)){if(null==a.newValue){const h=r.vr(a.key);return r.Vr(h,null)}{const h=r.Sr(a.key,a.newValue);if(h)return r.Vr(h.clientId,h)}}else if(r.dr.test(a.key)){if(null!==a.newValue){const h=r.Dr(a.key,a.newValue);if(h)return r.Cr(h)}}else if(r._r.test(a.key)){if(null!==a.newValue){const h=r.Nr(a.key,a.newValue);if(h)return r.kr(h)}}else if(a.key===r.wr){if(null!==a.newValue){const h=r.yr(a.newValue);if(h)return r.pr(h)}}else if(a.key===r.hr){const h=function(m){let C=xr.at;if(null!=m)try{const P=JSON.parse(m);or("number"==typeof P),C=P}catch(P){pr("SharedClientState","Failed to read sequence number from WebStorage",P)}return C}(a.newValue);h!==xr.at&&r.sequenceNumberHandler(h)}else if(a.key===r.mr){const h=r.Or(a.newValue);yield Promise.all(h.map(m=>r.syncEngine.Mr(m)))}}else r.cr.push(a)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,r,a){const h=new yd(this.currentUser,e,r,a),m=jp(this.persistenceKey,this.currentUser,e);this.setItem(m,h.tr())}Er(e){const r=jp(this.persistenceKey,this.currentUser,e);this.removeItem(r)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,r,a){const h=qh(this.persistenceKey,e),m=new _d(e,r,a);this.setItem(h,m.tr())}Pr(e){const r=JSON.stringify(Array.from(e));this.setItem(this.mr,r)}vr(e){const r=this.lr.exec(e);return r?r[1]:null}Sr(e,r){const a=this.vr(e);return vd.Zi(a,r)}Dr(e,r){const a=this.dr.exec(e),h=Number(a[1]);return yd.Zi(new on(void 0!==a[2]?a[2]:null),h,r)}Nr(e,r){const a=this._r.exec(e),h=Number(a[1]);return _d.Zi(h,r)}yr(e){return zf.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var r=this;return(0,_.Z)(function*(){if(e.user.uid===r.currentUser.uid)return r.syncEngine.Fr(e.batchId,e.state,e.error);Ht("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,r){const a=r?this.ur.insert(e,r):this.ur.remove(e),h=this.Ir(this.ur),m=this.Ir(a),C=[],P=[];return m.forEach(X=>{h.has(X)||C.push(X)}),h.forEach(X=>{m.has(X)||P.push(X)}),this.syncEngine.Br(C,P).then(()=>{this.ur=a})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let r=D();return e.forEach((a,h)=>{r=r.unionWith(h.activeTargetIds)}),r}}class pm{constructor(){this.Lr=new Ul,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,a){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,r,a){this.Ur[e]=r}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Ul,Promise.resolve()}handleUserChange(e,r,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Cy{qr(e){}shutdown(){}}class Yh{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ht("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ht("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const wy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gm{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Ty extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,r,a,h,m){const C=this.ho(e,r);Ht("RestConnection","Sending: ",C,a);const P={};return this.lo(P,h,m),this.fo(e,C,P,a).then(X=>(Ht("RestConnection","Received: ",X),X),X=>{throw us("RestConnection",`${e} failed with error: `,X,"url: ",C,"request:",a),X})}_o(e,r,a,h,m,C){return this.ao(e,r,a,h,m)}lo(e,r,a){e["X-Goog-Api-Client"]="gl-js/ fire/"+$n,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((h,m)=>e[m]=h),a&&a.headers.forEach((h,m)=>e[m]=h)}ho(e,r){return`${this.oo}/v1/${r}:${wy[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,r,a,h){return new Promise((m,C)=>{const P=new ht;P.setWithCredentials(!0),P.listenOnce(w.COMPLETE,()=>{try{switch(P.getLastErrorCode()){case go.NO_ERROR:const se=P.getResponseJson();Ht("Connection","XHR received:",JSON.stringify(se)),m(se);break;case go.TIMEOUT:Ht("Connection",'RPC "'+e+'" timed out'),C(new Nt(Et.DEADLINE_EXCEEDED,"Request time out"));break;case go.HTTP_ERROR:const De=P.getStatus();if(Ht("Connection",'RPC "'+e+'" failed with status:',De,"response text:",P.getResponseText()),De>0){const Je=P.getResponseJson().error;if(Je&&Je.status&&Je.message){const Tt=function(zt){const Zt=zt.toLowerCase().replace(/_/g,"-");return Object.values(Et).indexOf(Zt)>=0?Zt:Et.UNKNOWN}(Je.status);C(new Nt(Tt,Je.message))}else C(new Nt(Et.UNKNOWN,"Server responded with status "+P.getStatus()))}else C(new Nt(Et.UNAVAILABLE,"Connection failed."));break;default:Bn()}}finally{Ht("Connection",'RPC "'+e+'" completed.')}});const X=JSON.stringify(h);P.send(r,"POST",X,a,15)})}wo(e,r,a){const h=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=na(),C=Io(),P={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(P.xmlHttpFactory=new Z({})),this.lo(P.initMessageHeaders,r,a),P.encodeInitMessageHeaders=!0;const X=h.join("");Ht("Connection","Creating WebChannel: "+X,P);const se=m.createWebChannel(X,P);let De=!1,Je=!1;const Tt=new gm({Hr:Zt=>{Je?Ht("Connection","Not sending because WebChannel is closed:",Zt):(De||(Ht("Connection","Opening WebChannel transport."),se.open(),De=!0),Ht("Connection","WebChannel sending:",Zt),se.send(Zt))},Jr:()=>se.close()}),zt=(Zt,zn,cr)=>{Zt.listen(zn,Yi=>{try{cr(Yi)}catch(ks){setTimeout(()=>{throw ks},0)}})};return zt(se,pe.EventType.OPEN,()=>{Je||Ht("Connection","WebChannel transport opened.")}),zt(se,pe.EventType.CLOSE,()=>{Je||(Je=!0,Ht("Connection","WebChannel transport closed"),Tt.io())}),zt(se,pe.EventType.ERROR,Zt=>{Je||(Je=!0,us("Connection","WebChannel transport errored:",Zt),Tt.io(new Nt(Et.UNAVAILABLE,"The operation could not be completed")))}),zt(se,pe.EventType.MESSAGE,Zt=>{var zn;if(!Je){const cr=Zt.data[0];or(!!cr);const Yi=cr,ks=Yi.error||(null===(zn=Yi[0])||void 0===zn?void 0:zn.error);if(ks){Ht("Connection","WebChannel received error:",ks);const ts=ks.status;let fa=function(Ni){const Da=to[Ni];if(void 0!==Da)return fc(Da)}(ts),ns=ks.message;void 0===fa&&(fa=Et.INTERNAL,ns="Unknown error status: "+ts+" with message "+ks.message),Je=!0,Tt.io(new Nt(fa,ns)),se.close()}else Ht("Connection","WebChannel received:",cr),Tt.ro(cr)}}),zt(C,k.STAT_EVENT,Zt=>{Zt.stat===T.PROXY?Ht("Connection","Detected buffering proxy"):Zt.stat===T.NOPROXY&&Ht("Connection","Detected no buffering proxy")}),setTimeout(()=>{Tt.so()},0),Tt}}function Hp(){return"undefined"!=typeof window?window:null}function Xc(){return"undefined"!=typeof document?document:null}function Dc(s){return new Ti(s,!0)}class Kh{constructor(e,r,a=1e3,h=1.5,m=6e4){this.Hs=e,this.timerId=r,this.mo=a,this.yo=h,this.po=m,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const r=Math.floor(this.Io+this.bo()),a=Math.max(0,Date.now()-this.Eo),h=Math.max(0,r-a);h>0&&Ht("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.Io} ms, delay with jitter: ${r} ms, last attempt: ${a} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,h,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Au{constructor(e,r,a,h,m,C,P,X){this.Hs=e,this.vo=a,this.Vo=h,this.So=m,this.authCredentialsProvider=C,this.appCheckCredentialsProvider=P,this.listener=X,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Kh(e,r)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,_.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,_.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,r){var a=this;return(0,_.Z)(function*(){a.Uo(),a.qo(),a.No.cancel(),a.Do++,4!==e?a.No.reset():r&&r.code===Et.RESOURCE_EXHAUSTED?(pr(r.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),a.No.Ao()):r&&r.code===Et.UNAUTHENTICATED&&3!==a.state&&(a.authCredentialsProvider.invalidateToken(),a.appCheckCredentialsProvider.invalidateToken()),null!==a.stream&&(a.Ko(),a.stream.close(),a.stream=null),a.state=e,yield a.listener.Zr(r)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),r=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,h])=>{this.Do===r&&this.Qo(a,h)},a=>{e(()=>{const h=new Nt(Et.UNKNOWN,"Fetching auth token failed: "+a.message);return this.jo(h)})})}Qo(e,r){const a=this.Go(this.Do);this.stream=this.Wo(e,r),this.stream.Yr(()=>{a(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(h=>{a(()=>this.jo(h))}),this.stream.onMessage(h=>{a(()=>this.onMessage(h))})}Mo(){var e=this;this.state=5,this.No.Ro((0,_.Z)(function*(){e.state=0,e.start()}))}jo(e){return Ht("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return r=>{this.Hs.enqueueAndForget(()=>this.Do===e?r():(Ht("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Zh extends Au{constructor(e,r,a,h,m,C){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,a,h,C),this.It=m}Wo(e,r){return this.So.wo("Listen",e,r)}onMessage(e){this.No.reset();const r=function(s,e){let r;if("targetChange"in e){const a="NO_CHANGE"===(X=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===X?1:"REMOVE"===X?2:"CURRENT"===X?3:"RESET"===X?4:Bn(),h=e.targetChange.targetIds||[],m=function(X,se){return X.gt?(or(void 0===se||"string"==typeof se),ni.fromBase64String(se||"")):(or(void 0===se||se instanceof Uint8Array),ni.fromUint8Array(se||new Uint8Array))}(s,e.targetChange.resumeToken),C=e.targetChange.cause,P=C&&function(X){const se=void 0===X.code?Et.UNKNOWN:fc(X.code);return new Nt(se,X.message||"")}(C);r=new de(a,h,m,P||null)}else if("documentChange"in e){const a=e.documentChange,h=nl(s,a.document.name),m=no(a.document.updateTime),C=new Y({mapValue:{fields:a.document.fields}}),P=Le.newFoundDocument(h,m,C);r=new R(a.targetIds||[],a.removedTargetIds||[],P.key,P)}else if("documentDelete"in e){const a=e.documentDelete,h=nl(s,a.document),m=a.readTime?no(a.readTime):Er.min(),C=Le.newNoDocument(h,m);r=new R([],a.removedTargetIds||[],C.key,C)}else if("documentRemove"in e){const a=e.documentRemove,h=nl(s,a.document);r=new R([],a.removedTargetIds||[],h,null)}else{if(!("filter"in e))return Bn();{const a=e.filter,m=new td(a.count||0);r=new ee(a.targetId,m)}}var X;return r}(this.It,e),a=function(h){if(!("targetChange"in h))return Er.min();const m=h.targetChange;return m.targetIds&&m.targetIds.length?Er.min():m.readTime?no(m.readTime):Er.min()}(e);return this.listener.zo(r,a)}Ho(e){const r={};r.database=El(this.It),r.addTarget=function(h,m){let C;const P=m.target;return C=lr(P)?{documents:vu(h,P)}:{query:Hd(h,P)},C.targetId=m.targetId,m.resumeToken.approximateByteSize()>0?C.resumeToken=ca(h,m.resumeToken):m.snapshotVersion.compareTo(Er.min())>0&&(C.readTime=Os(h,m.snapshotVersion.toTimestamp())),C}(this.It,e);const a=function(s,e){const r=function(a,h){switch(h){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Bn()}}(0,e.purpose);return null==r?null:{"goog-listen-tags":r}}(0,e);a&&(r.labels=a),this.Lo(r)}Jo(e){const r={};r.database=El(this.It),r.removeTarget=e,this.Lo(r)}}class lh extends Au{constructor(e,r,a,h,m,C){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,a,h,C),this.It=m,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,r){return this.So.wo("Write",e,r)}onMessage(e){if(or(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const r=function(s,e){return s&&s.length>0?(or(void 0!==e),s.map(r=>function(a,h){let m=no(a.updateTime?a.updateTime:h);return m.isEqual(Er.min())&&(m=no(h)),new Xu(m,a.transformResults||[])}(r,e))):[]}(e.writeResults,e.commitTime),a=no(e.commitTime);return this.listener.tu(a,r)}return or(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=El(this.It),this.Lo(e)}Zo(e){const r={streamToken:this.lastStreamToken,writes:e.map(a=>Vl(this.It,a))};this.Lo(r)}}class Dy extends class{}{constructor(e,r,a,h){super(),this.authCredentials=e,this.appCheckCredentials=r,this.So=a,this.It=h,this.su=!1}iu(){if(this.su)throw new Nt(Et.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,r,a){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.So.ao(e,r,a,h,m)).catch(h=>{throw"FirebaseError"===h.name?(h.code===Et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Nt(Et.UNKNOWN,h.toString())})}_o(e,r,a,h){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,C])=>this.So._o(e,r,a,m,C,h)).catch(m=>{throw"FirebaseError"===m.name?(m.code===Et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new Nt(Et.UNKNOWN,m.toString())})}terminate(){this.su=!0}}class Yf{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const r=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(pr(r),this.uu=!1):Ht("OnlineStateTracker",r)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class Wp{constructor(e,r,a,h,m){var C=this;this.localStore=e,this.datastore=r,this.asyncQueue=a,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=m,this.gu.qr(P=>{a.enqueueAndForget((0,_.Z)(function*(){var X;eu(C)&&(Ht("RemoteStore","Restarting streams for network reachability change."),yield(X=(0,_.Z)(function*(se){const De=_n(se);De.wu.add(4),yield Id(De),De.yu.set("Unknown"),De.wu.delete(4),yield Jc(De)}),function(se){return X.apply(this,arguments)})(C))}))}),this.yu=new Yf(a,h)}}function Jc(s){return Ed.apply(this,arguments)}function Ed(){return Ed=(0,_.Z)(function*(s){if(eu(s))for(const e of s.mu)yield e(!0)}),Ed.apply(this,arguments)}function Id(s){return Xh.apply(this,arguments)}function Xh(){return Xh=(0,_.Z)(function*(s){for(const e of s.mu)yield e(!1)}),Xh.apply(this,arguments)}function Kf(s,e){const r=_n(s);r._u.has(e.targetId)||(r._u.set(e.targetId,e),Gp(r)?Zf(r):dh(r).Oo()&&Jh(r,e))}function bd(s,e){const r=_n(s),a=dh(r);r._u.delete(e),a.Oo()&&mm(r,e),0===r._u.size&&(a.Oo()?a.$o():eu(r)&&r.yu.set("Unknown"))}function Jh(s,e){s.pu.Mt(e.targetId),dh(s).Ho(e)}function mm(s,e){s.pu.Mt(e),dh(s).Jo(e)}function Zf(s){s.pu=new Vt({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),se:e=>s._u.get(e)||null}),dh(s).start(),s.yu.cu()}function Gp(s){return eu(s)&&!dh(s).ko()&&s._u.size>0}function eu(s){return 0===_n(s).wu.size}function al(s){s.pu=void 0}function Sy(s){return zp.apply(this,arguments)}function zp(){return zp=(0,_.Z)(function*(s){s._u.forEach((e,r)=>{Jh(s,e)})}),zp.apply(this,arguments)}function z_(s,e){return ym.apply(this,arguments)}function ym(){return ym=(0,_.Z)(function*(s,e){al(s),Gp(s)?(s.yu.lu(e),Zf(s)):s.yu.set("Unknown")}),ym.apply(this,arguments)}function _m(s,e,r){return vm.apply(this,arguments)}function vm(){return vm=(0,_.Z)(function*(s,e,r){if(s.yu.set("Online"),e instanceof de&&2===e.state&&e.cause)try{yield(a=(0,_.Z)(function*(h,m){const C=m.cause;for(const P of m.targetIds)h._u.has(P)&&(yield h.remoteSyncer.rejectListen(P,C),h._u.delete(P),h.pu.removeTarget(P))}),function(h,m){return a.apply(this,arguments)})(s,e)}catch(a){Ht("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),a),yield Qf(s,a)}else if(e instanceof R?s.pu.Gt(e):e instanceof ee?s.pu.Yt(e):s.pu.Wt(e),!r.isEqual(Er.min()))try{const a=yield Gf(s.localStore);r.compareTo(a)>=0&&(yield function(h,m){const C=h.pu.te(m);return C.targetChanges.forEach((P,X)=>{if(P.resumeToken.approximateByteSize()>0){const se=h._u.get(X);se&&h._u.set(X,se.withResumeToken(P.resumeToken,m))}}),C.targetMismatches.forEach(P=>{const X=h._u.get(P);if(!X)return;h._u.set(P,X.withResumeToken(ni.EMPTY_BYTE_STRING,X.snapshotVersion)),mm(h,P);const se=new nc(X.target,P,1,X.sequenceNumber);Jh(h,se)}),h.remoteSyncer.applyRemoteEvent(C)}(s,r))}catch(a){Ht("RemoteStore","Failed to raise snapshot:",a),yield Qf(s,a)}var a}),vm.apply(this,arguments)}function Qf(s,e,r){return ef.apply(this,arguments)}function ef(){return ef=(0,_.Z)(function*(s,e,r){if(!Ar(e))throw e;s.wu.add(1),yield Id(s),s.yu.set("Offline"),r||(r=()=>Gf(s.localStore)),s.asyncQueue.enqueueRetryable((0,_.Z)(function*(){Ht("RemoteStore","Retrying IndexedDB access"),yield r(),s.wu.delete(1),yield Jc(s)}))}),ef.apply(this,arguments)}function qp(s,e){return e().catch(r=>Qf(s,r,e))}function uh(s){return Yp.apply(this,arguments)}function Yp(){return Yp=(0,_.Z)(function*(s){const e=_n(s),r=xu(e);let a=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;Ay(e);)try{const h=yield W_(e.localStore,a);if(null===h){0===e.du.length&&r.$o();break}a=h.batchId,Kp(e,h)}catch(h){yield Qf(e,h)}Em(e)&&Zp(e)}),Yp.apply(this,arguments)}function Ay(s){return eu(s)&&s.du.length<10}function Kp(s,e){s.du.push(e);const r=xu(s);r.Oo()&&r.Xo&&r.Zo(e.mutations)}function Em(s){return eu(s)&&!xu(s).ko()&&s.du.length>0}function Zp(s){xu(s).start()}function xy(s){return Qp.apply(this,arguments)}function Qp(){return Qp=(0,_.Z)(function*(s){xu(s).nu()}),Qp.apply(this,arguments)}function Im(s){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,_.Z)(function*(s){const e=xu(s);for(const r of s.du)e.Zo(r.mutations)}),Xf.apply(this,arguments)}function Ry(s,e,r){return jl.apply(this,arguments)}function jl(){return jl=(0,_.Z)(function*(s,e,r){const a=s.du.shift(),h=yc.from(a,e,r);yield qp(s,()=>s.remoteSyncer.applySuccessfulWrite(h)),yield uh(s)}),jl.apply(this,arguments)}function Xp(s,e){return Jp.apply(this,arguments)}function Jp(){return Jp=(0,_.Z)(function*(s,e){var r;e&&xu(s).Xo&&(yield(r=(0,_.Z)(function*(a,h){if(nd(m=h.code)&&m!==Et.ABORTED){const C=a.du.shift();xu(a).Fo(),yield qp(a,()=>a.remoteSyncer.rejectFailedWrite(C.batchId,h)),yield uh(a)}var m}),function(a,h){return r.apply(this,arguments)})(s,e)),Em(s)&&Zp(s)}),Jp.apply(this,arguments)}function bm(s,e){return Cm.apply(this,arguments)}function Cm(){return Cm=(0,_.Z)(function*(s,e){const r=_n(s);r.asyncQueue.verifyOperationInProgress(),Ht("RemoteStore","RemoteStore received new credentials");const a=eu(r);r.wu.add(3),yield Id(r),a&&r.yu.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(e),r.wu.delete(3),yield Jc(r)}),Cm.apply(this,arguments)}function Jf(s,e){return eg.apply(this,arguments)}function eg(){return eg=(0,_.Z)(function*(s,e){const r=_n(s);e?(r.wu.delete(2),yield Jc(r)):e||(r.wu.add(2),yield Id(r),r.yu.set("Unknown"))}),eg.apply(this,arguments)}function dh(s){return s.Iu||(s.Iu=function(e,r,a){const h=_n(e);return h.iu(),new Zh(r,h.So,h.authCredentials,h.appCheckCredentials,h.It,a)}(s.datastore,s.asyncQueue,{Yr:Sy.bind(null,s),Zr:z_.bind(null,s),zo:_m.bind(null,s)}),s.mu.push(function(){var e=(0,_.Z)(function*(r){r?(s.Iu.Fo(),Gp(s)?Zf(s):s.yu.set("Unknown")):(yield s.Iu.stop(),al(s))});return function(r){return e.apply(this,arguments)}}())),s.Iu}function xu(s){return s.Tu||(s.Tu=function(e,r,a){const h=_n(e);return h.iu(),new lh(r,h.So,h.authCredentials,h.appCheckCredentials,h.It,a)}(s.datastore,s.asyncQueue,{Yr:xy.bind(null,s),Zr:Xp.bind(null,s),eu:Im.bind(null,s),tu:Ry.bind(null,s)}),s.mu.push(function(){var e=(0,_.Z)(function*(r){r?(s.Tu.Fo(),yield uh(s)):(yield s.Tu.stop(),s.du.length>0&&(Ht("RemoteStore",`Stopping write stream with ${s.du.length} pending writes`),s.du=[]))});return function(r){return e.apply(this,arguments)}}())),s.Tu}class tf{constructor(e,r,a,h,m){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=a,this.op=h,this.removalCallback=m,this.deferred=new Zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(C=>{})}static createAndSchedule(e,r,a,h,m){const C=Date.now()+a,P=new tf(e,r,C,h,m);return P.start(a),P}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Nt(Et.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hh(s,e){if(pr("AsyncQueue",`${e}: ${s}`),Ar(s))return new Nt(Et.UNAVAILABLE,`${e}: ${s}`);throw s}class fh{constructor(e){this.comparator=e?(r,a)=>e(r,a)||Tn.comparator(r.key,a.key):(r,a)=>Tn.comparator(r.key,a.key),this.keyedMap=pc(),this.sortedSet=new ds(this.comparator)}static emptySet(e){return new fh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,a)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof fh)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;r.hasNext();){const h=r.getNext().key,m=a.getNext().key;if(!h.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,r){const a=new fh;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=r,a}}class nf{constructor(){this.Eu=new ds(Tn.comparator)}track(e){const r=e.doc.key,a=this.Eu.get(r);a?0!==e.type&&3===a.type?this.Eu=this.Eu.insert(r,e):3===e.type&&1!==a.type?this.Eu=this.Eu.insert(r,{type:a.type,doc:e.doc}):2===e.type&&2===a.type?this.Eu=this.Eu.insert(r,{type:2,doc:e.doc}):2===e.type&&0===a.type?this.Eu=this.Eu.insert(r,{type:0,doc:e.doc}):1===e.type&&0===a.type?this.Eu=this.Eu.remove(r):1===e.type&&2===a.type?this.Eu=this.Eu.insert(r,{type:1,doc:a.doc}):0===e.type&&1===a.type?this.Eu=this.Eu.insert(r,{type:2,doc:e.doc}):Bn():this.Eu=this.Eu.insert(r,e)}Au(){const e=[];return this.Eu.inorderTraversal((r,a)=>{e.push(a)}),e}}class Ru{constructor(e,r,a,h,m,C,P,X,se){this.query=e,this.docs=r,this.oldDocs=a,this.docChanges=h,this.mutatedKeys=m,this.fromCache=C,this.syncStateChanged=P,this.excludesMetadataChanges=X,this.hasCachedResults=se}static fromInitialDocuments(e,r,a,h,m){const C=[];return r.forEach(P=>{C.push({type:0,doc:P})}),new Ru(e,r,fh.emptySet(r),C,a,h,!0,!1,m)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,a=e.docChanges;if(r.length!==a.length)return!1;for(let h=0;h<r.length;h++)if(r[h].type!==a[h].type||!r[h].doc.isEqual(a[h].doc))return!1;return!0}}class My{constructor(){this.Ru=void 0,this.listeners=[]}}class tg{constructor(){this.queries=new Fl(e=>el(e),Zl),this.onlineState="Unknown",this.bu=new Set}}function rf(s,e){return ep.apply(this,arguments)}function ep(){return ep=(0,_.Z)(function*(s,e){const r=_n(s),a=e.query;let h=!1,m=r.queries.get(a);if(m||(h=!0,m=new My),h)try{m.Ru=yield r.onListen(a)}catch(C){const P=hh(C,`Initialization of query '${Va(e.query)}' failed`);return void e.onError(P)}r.queries.set(a,m),m.listeners.push(e),e.Pu(r.onlineState),m.Ru&&e.vu(m.Ru)&&tp(r)}),ep.apply(this,arguments)}function ng(s,e){return rg.apply(this,arguments)}function rg(){return rg=(0,_.Z)(function*(s,e){const r=_n(s),a=e.query;let h=!1;const m=r.queries.get(a);if(m){const C=m.listeners.indexOf(e);C>=0&&(m.listeners.splice(C,1),h=0===m.listeners.length)}if(h)return r.queries.delete(a),r.onUnlisten(a)}),rg.apply(this,arguments)}function ig(s,e){const r=_n(s);let a=!1;for(const h of e){const C=r.queries.get(h.query);if(C){for(const P of C.listeners)P.vu(h)&&(a=!0);C.Ru=h}}a&&tp(r)}function q_(s,e,r){const a=_n(s),h=a.queries.get(e);if(h)for(const m of h.listeners)m.onError(r);a.queries.delete(e)}function tp(s){s.bu.forEach(e=>{e.next()})}class sf{constructor(e,r,a){this.query=e,this.Vu=r,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=a||{}}vu(e){if(!this.options.includeMetadataChanges){const a=[];for(const h of e.docChanges)3!==h.type&&a.push(h);e=new Ru(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),r=!0):this.xu(e,this.onlineState)&&(this.Nu(e),r=!0),this.Du=e,r}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let r=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),r=!0),r}xu(e,r){return!e.fromCache||(!this.options.ku||!("Offline"!==r))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===r)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Ru.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class np{constructor(e,r){this.payload=e,this.byteLength=r}Ou(){return"metadata"in this.payload}}class rp{constructor(e){this.It=e}Ji(e){return nl(this.It,e)}Yi(e){return e.metadata.exists?jc(this.It,e.document,!1):Le.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return no(e)}}class sg{constructor(e,r,a){this.Mu=e,this.localStore=r,this.It=a,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ph(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++r;const a=Gr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(a.get(a.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}$u(e){const r=new Map,a=new rp(this.It);for(const h of e)if(h.metadata.queries){const m=a.Ji(h.metadata.name);for(const C of h.metadata.queries){const P=(r.get(C)||jr()).add(m);r.set(C,P)}}return r}complete(){var e=this;return(0,_.Z)(function*(){const r=yield function(s,e,r,a){return fm.apply(this,arguments)}(e.localStore,new rp(e.It),e.documents,e.Mu.id),a=e.$u(e.documents);for(const h of e.queries)yield by(e.localStore,h,a.get(h.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:r}})()}}function ph(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}class Ta{constructor(e){this.key=e}}class sc{constructor(e){this.key=e}}class af{constructor(e,r){this.query=e,this.Uu=r,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=jr(),this.mutatedKeys=jr(),this.Gu=Zu(e),this.Qu=new fh(this.Gu)}get ju(){return this.Uu}Wu(e,r){const a=r?r.zu:new nf,h=r?r.Qu:this.Qu;let m=r?r.mutatedKeys:this.mutatedKeys,C=h,P=!1;const X="F"===this.query.limitType&&h.size===this.query.limit?h.last():null,se="L"===this.query.limitType&&h.size===this.query.limit?h.first():null;if(e.inorderTraversal((De,Je)=>{const Tt=h.get(De),zt=wa(this.query,Je)?Je:null,Zt=!!Tt&&this.mutatedKeys.has(Tt.key),zn=!!zt&&(zt.hasLocalMutations||this.mutatedKeys.has(zt.key)&&zt.hasCommittedMutations);let cr=!1;Tt&&zt?Tt.data.isEqual(zt.data)?Zt!==zn&&(a.track({type:3,doc:zt}),cr=!0):this.Hu(Tt,zt)||(a.track({type:2,doc:zt}),cr=!0,(X&&this.Gu(zt,X)>0||se&&this.Gu(zt,se)<0)&&(P=!0)):!Tt&&zt?(a.track({type:0,doc:zt}),cr=!0):Tt&&!zt&&(a.track({type:1,doc:Tt}),cr=!0,(X||se)&&(P=!0)),cr&&(zt?(C=C.add(zt),m=zn?m.add(De):m.delete(De)):(C=C.delete(De),m=m.delete(De)))}),null!==this.query.limit)for(;C.size>this.query.limit;){const De="F"===this.query.limitType?C.last():C.first();C=C.delete(De.key),m=m.delete(De.key),a.track({type:1,doc:De})}return{Qu:C,zu:a,$i:P,mutatedKeys:m}}Hu(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,a){const h=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const m=e.zu.Au();m.sort((se,De)=>function(Je,Tt){const zt=Zt=>{switch(Zt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bn()}};return zt(Je)-zt(Tt)}(se.type,De.type)||this.Gu(se.doc,De.doc)),this.Ju(a);const C=r?this.Yu():[],P=0===this.Ku.size&&this.current?1:0,X=P!==this.qu;return this.qu=P,0!==m.length||X?{snapshot:new Ru(this.query,e.Qu,h,m,e.mutatedKeys,0===P,X,!1,!!a&&a.resumeToken.approximateByteSize()>0),Xu:C}:{Xu:C}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new nf,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(r=>this.Uu=this.Uu.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Uu=this.Uu.delete(r)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=jr(),this.Qu.forEach(a=>{this.Zu(a.key)&&(this.Ku=this.Ku.add(a.key))});const r=[];return e.forEach(a=>{this.Ku.has(a)||r.push(new sc(a))}),this.Ku.forEach(a=>{e.has(a)||r.push(new Ta(a))}),r}tc(e){this.Uu=e.Hi,this.Ku=jr();const r=this.Wu(e.documents);return this.applyChanges(r,!0)}ec(){return Ru.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class wm{constructor(e,r,a){this.query=e,this.targetId=r,this.view=a}}class og{constructor(e){this.key=e,this.nc=!1}}class Cd{constructor(e,r,a,h,m,C){this.localStore=e,this.remoteStore=r,this.eventManager=a,this.sharedClientState=h,this.currentUser=m,this.maxConcurrentLimboResolutions=C,this.sc={},this.ic=new Fl(P=>el(P),Zl),this.rc=new Map,this.oc=new Set,this.uc=new ds(Tn.comparator),this.cc=new Map,this.ac=new nh,this.hc={},this.lc=new Map,this.fc=bc.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function ag(s,e){return Sc.apply(this,arguments)}function Sc(){return Sc=(0,_.Z)(function*(s,e){const r=dp(s);let a,h;const m=r.ic.get(e);if(m)a=m.targetId,r.sharedClientState.addLocalQueryTarget(a),h=m.view.ec();else{const C=yield oh(r.localStore,Ps(e));r.isPrimaryClient&&Kf(r.remoteStore,C);const P=r.sharedClientState.addLocalQueryTarget(C.targetId);a=C.targetId,h=yield Mu(r,e,a,"current"===P,C.resumeToken)}return h}),Sc.apply(this,arguments)}function Mu(s,e,r,a,h){return gh.apply(this,arguments)}function gh(){return gh=(0,_.Z)(function*(s,e,r,a,h){s._c=(Je,Tt,zt)=>{return(Zt=(0,_.Z)(function*(zn,cr,Yi,ks){let ts=cr.view.Wu(Yi);ts.$i&&(ts=yield Up(zn.localStore,cr.query,!1).then(({documents:Ni})=>cr.view.Wu(Ni,ts)));const fa=ks&&ks.targetChanges.get(cr.targetId),ns=cr.view.applyChanges(ts,zn.isPrimaryClient,fa);return Ha(zn,cr.targetId,ns.Xu),ns.snapshot}),function(zn,cr,Yi,ks){return Zt.apply(this,arguments)})(s,Je,Tt,zt);var Zt};const m=yield Up(s.localStore,e,!0),C=new af(e,m.Hi),P=C.Wu(m.documents),X=v.createSynthesizedTargetChangeForCurrentChange(r,a&&"Offline"!==s.onlineState,h),se=C.applyChanges(P,s.isPrimaryClient,X);Ha(s,r,se.Xu);const De=new wm(e,r,C);return s.ic.set(e,De),s.rc.has(r)?s.rc.get(r).push(e):s.rc.set(r,[e]),se.snapshot}),gh.apply(this,arguments)}function ll(s,e){return ip.apply(this,arguments)}function ip(){return ip=(0,_.Z)(function*(s,e){const r=_n(s),a=r.ic.get(e),h=r.rc.get(a.targetId);if(h.length>1)return r.rc.set(a.targetId,h.filter(m=>!Zl(m,e))),void r.ic.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||(yield zh(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),bd(r.remoteStore,a.targetId),Ou(r,a.targetId)}).catch(B))):(Ou(r,a.targetId),yield zh(r.localStore,a.targetId,!0))}),ip.apply(this,arguments)}function In(){return In=(0,_.Z)(function*(s,e,r){const a=hp(s);try{const h=yield function(m,C){const P=_n(m),X=Ei.now(),se=C.reduce((Tt,zt)=>Tt.add(zt.key),jr());let De,Je;return P.persistence.runTransaction("Locally write mutations","readwrite",Tt=>{let zt=mo(),Zt=jr();return P.Gi.getEntries(Tt,se).next(zn=>{zt=zn,zt.forEach((cr,Yi)=>{Yi.isValidDocument()||(Zt=Zt.add(cr))})}).next(()=>P.localDocuments.getOverlayedDocuments(Tt,zt)).next(zn=>{De=zn;const cr=[];for(const Yi of C){const ks=$d(Yi,De.get(Yi.key).overlayedDocument);null!=ks&&cr.push(new Nl(Yi.key,ks,me(ks.value.mapValue),fs.exists(!0)))}return P.mutationQueue.addMutationBatch(Tt,X,cr,C)}).next(zn=>{Je=zn;const cr=zn.applyToLocalDocumentSet(De,Zt);return P.documentOverlayCache.saveOverlays(Tt,zn.batchId,cr)})}).then(()=>({batchId:Je.batchId,changes:Ud(De)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(h.batchId),function(m,C,P){let X=m.hc[m.currentUser.toKey()];X||(X=new ds(ar)),X=X.insert(C,P),m.hc[m.currentUser.toKey()]=X}(a,h.batchId,r),yield bl(a,h.changes),yield uh(a.remoteStore)}catch(h){const m=hh(h,"Failed to persist write");r.reject(m)}}),In.apply(this,arguments)}function lg(s,e){return mh.apply(this,arguments)}function mh(){return mh=(0,_.Z)(function*(s,e){const r=_n(s);try{const a=yield Ey(r.localStore,e);e.targetChanges.forEach((h,m)=>{const C=r.cc.get(m);C&&(or(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1),h.addedDocuments.size>0?C.nc=!0:h.modifiedDocuments.size>0?or(C.nc):h.removedDocuments.size>0&&(or(C.nc),C.nc=!1))}),yield bl(r,a,e)}catch(a){yield B(a)}}),mh.apply(this,arguments)}function lf(s,e,r){const a=_n(s);if(a.isPrimaryClient&&0===r||!a.isPrimaryClient&&1===r){const h=[];a.ic.forEach((m,C)=>{const P=C.view.Pu(e);P.snapshot&&h.push(P.snapshot)}),function(m,C){const P=_n(m);P.onlineState=C;let X=!1;P.queries.forEach((se,De)=>{for(const Je of De.listeners)Je.Pu(C)&&(X=!0)}),X&&tp(P)}(a.eventManager,e),h.length&&a.sc.zo(h),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}function cg(s,e,r){return yh.apply(this,arguments)}function yh(){return yh=(0,_.Z)(function*(s,e,r){const a=_n(s);a.sharedClientState.updateQueryState(e,"rejected",r);const h=a.cc.get(e),m=h&&h.key;if(m){let C=new ds(Tn.comparator);C=C.insert(m,Le.newNoDocument(m,Er.min()));const P=jr().add(m),X=new g(Er.min(),new Map,new wi(ar),C,P);yield lg(a,X),a.uc=a.uc.remove(m),a.cc.delete(e),es(a)}else yield zh(a.localStore,e,!1).then(()=>Ou(a,e,r)).catch(B)}),yh.apply(this,arguments)}function oc(s,e){return wd.apply(this,arguments)}function wd(){return wd=(0,_.Z)(function*(s,e){const r=_n(s),a=e.batch.batchId;try{const h=yield um(r.localStore,e);cf(r,a,null),op(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),yield bl(r,h)}catch(h){yield B(h)}}),wd.apply(this,arguments)}function Dm(s,e,r){return sp.apply(this,arguments)}function sp(){return sp=(0,_.Z)(function*(s,e,r){const a=_n(s);try{const h=yield function(m,C){const P=_n(m);return P.persistence.runTransaction("Reject batch","readwrite-primary",X=>{let se;return P.mutationQueue.lookupMutationBatch(X,C).next(De=>(or(null!==De),se=De.keys(),P.mutationQueue.removeMutationBatch(X,De))).next(()=>P.mutationQueue.performConsistencyCheck(X)).next(()=>P.documentOverlayCache.removeOverlaysForBatchId(X,se,C)).next(()=>P.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(X,se)).next(()=>P.localDocuments.getDocuments(X,se))})}(a.localStore,e);cf(a,e,r),op(a,e),a.sharedClientState.updateMutationState(e,"rejected",r),yield bl(a,h)}catch(h){yield B(h)}}),sp.apply(this,arguments)}function Td(){return Td=(0,_.Z)(function*(s,e){const r=_n(s);eu(r.remoteStore)||Ht("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const a=yield function(m){const C=_n(m);return C.persistence.runTransaction("Get highest unacknowledged batch id","readonly",P=>C.mutationQueue.getHighestUnacknowledgedBatchId(P))}(r.localStore);if(-1===a)return void e.resolve();const h=r.lc.get(a)||[];h.push(e),r.lc.set(a,h)}catch(a){const h=hh(a,"Initialization of waitForPendingWrites() operation failed");e.reject(h)}}),Td.apply(this,arguments)}function op(s,e){(s.lc.get(e)||[]).forEach(r=>{r.resolve()}),s.lc.delete(e)}function cf(s,e,r){const a=_n(s);let h=a.hc[a.currentUser.toKey()];if(h){const m=h.get(e);m&&(r?m.reject(r):m.resolve(),h=h.remove(e)),a.hc[a.currentUser.toKey()]=h}}function Ou(s,e,r=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.rc.get(e))s.ic.delete(a),r&&s.sc.wc(a,r);s.rc.delete(e),s.isPrimaryClient&&s.ac.ls(e).forEach(a=>{s.ac.containsKey(a)||Nu(s,a)})}function Nu(s,e){s.oc.delete(e.path.canonicalString());const r=s.uc.get(e);null!==r&&(bd(s.remoteStore,r),s.uc=s.uc.remove(e),s.cc.delete(r),es(s))}function Ha(s,e,r){for(const a of r)a instanceof Ta?(s.ac.addReference(a.key,e),ha(s,a)):a instanceof sc?(Ht("SyncEngine","Document no longer in limbo: "+a.key),s.ac.removeReference(a.key,e),s.ac.containsKey(a.key)||Nu(s,a.key)):Bn()}function ha(s,e){const r=e.key,a=r.path.canonicalString();s.uc.get(r)||s.oc.has(a)||(Ht("SyncEngine","New document in limbo: "+r),s.oc.add(a),es(s))}function es(s){for(;s.oc.size>0&&s.uc.size<s.maxConcurrentLimboResolutions;){const e=s.oc.values().next().value;s.oc.delete(e);const r=new Tn(Gr.fromString(e)),a=s.fc.next();s.cc.set(a,new og(r)),s.uc=s.uc.insert(r,a),Kf(s.remoteStore,new nc(Ps(Lo(r.path)),a,2,xr.at))}}function bl(s,e,r){return Dd.apply(this,arguments)}function Dd(){return Dd=(0,_.Z)(function*(s,e,r){const a=_n(s),h=[],m=[],C=[];var P;a.ic.isEmpty()||(a.ic.forEach((P,X)=>{C.push(a._c(X,e,r).then(se=>{if((se||r)&&a.isPrimaryClient&&a.sharedClientState.updateQueryState(X.targetId,(null==se?void 0:se.fromCache)?"not-current":"current"),se){h.push(se);const De=om.Ci(X.targetId,se);m.push(De)}}))}),yield Promise.all(C),a.sc.zo(h),yield(P=(0,_.Z)(function*(X,se){const De=_n(X);try{yield De.persistence.runTransaction("notifyLocalViewChanges","readwrite",Je=>Q.forEach(se,Tt=>Q.forEach(Tt.Si,zt=>De.persistence.referenceDelegate.addReference(Je,Tt.targetId,zt)).next(()=>Q.forEach(Tt.Di,zt=>De.persistence.referenceDelegate.removeReference(Je,Tt.targetId,zt)))))}catch(Je){if(!Ar(Je))throw Je;Ht("LocalStore","Failed to update sequence numbers: "+Je)}for(const Je of se){const Tt=Je.targetId;if(!Je.fromCache){const zt=De.Ui.get(Tt),zn=zt.withLastLimboFreeSnapshotVersion(zt.snapshotVersion);De.Ui=De.Ui.insert(Tt,zn)}}}),function(X,se){return P.apply(this,arguments)})(a.localStore,m))}),Dd.apply(this,arguments)}function cl(s,e){return Do.apply(this,arguments)}function Do(){return Do=(0,_.Z)(function*(s,e){const r=_n(s);if(!r.currentUser.isEqual(e)){Ht("SyncEngine","User change. New user:",e.toKey());const a=yield cm(r.localStore,e);r.currentUser=e,(h=r).lc.forEach(C=>{C.forEach(P=>{P.reject(new Nt(Et.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.lc.clear(),r.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),yield bl(r,a.ji)}var h}),Do.apply(this,arguments)}function ap(s,e){const r=_n(s),a=r.cc.get(e);if(a&&a.nc)return jr().add(a.key);{let h=jr();const m=r.rc.get(e);if(!m)return h;for(const C of m){const P=r.ic.get(C);h=h.unionWith(P.view.ju)}return h}}function ug(s,e){return tu.apply(this,arguments)}function tu(){return tu=(0,_.Z)(function*(s,e){const r=_n(s),a=yield Up(r.localStore,e.query,!0),h=e.view.tc(a);return r.isPrimaryClient&&Ha(r,e.targetId,h.Xu),h}),tu.apply(this,arguments)}function ku(s,e){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,_.Z)(function*(s,e){const r=_n(s);return Iy(r.localStore,e).then(a=>bl(r,a))}),Sd.apply(this,arguments)}function nu(s,e,r,a){return uf.apply(this,arguments)}function uf(){return uf=(0,_.Z)(function*(s,e,r,a){const h=_n(s),m=yield function(C,P){const X=_n(C),se=_n(X.mutationQueue);return X.persistence.runTransaction("Lookup mutation documents","readonly",De=>se.Tn(De,P).next(Je=>Je?X.localDocuments.getDocuments(De,Je):Q.resolve(null)))}(h.localStore,e);var P;null!==m?("pending"===r?yield uh(h.remoteStore):"acknowledged"===r||"rejected"===r?(cf(h,e,a||null),op(h,e),P=e,_n(_n(h.localStore).mutationQueue).An(P)):Bn(),yield bl(h,m)):Ht("SyncEngine","Cannot apply mutation batch with id: "+e)}),uf.apply(this,arguments)}function lp(){return lp=(0,_.Z)(function*(s,e){const r=_n(s);if(dp(r),hp(r),!0===e&&!0!==r.dc){const a=r.sharedClientState.getAllActiveQueryTargets(),h=yield cp(r,a.toArray());r.dc=!0,yield Jf(r.remoteStore,!0);for(const m of h)Kf(r.remoteStore,m)}else if(!1===e&&!1!==r.dc){const a=[];let h=Promise.resolve();r.rc.forEach((m,C)=>{r.sharedClientState.isLocalQueryTarget(C)?a.push(C):h=h.then(()=>(Ou(r,C),zh(r.localStore,C,!0))),bd(r.remoteStore,C)}),yield h,yield cp(r,a),function(m){const C=_n(m);C.cc.forEach((P,X)=>{bd(C.remoteStore,X)}),C.ac.fs(),C.cc=new Map,C.uc=new ds(Tn.comparator)}(r),r.dc=!1,yield Jf(r.remoteStore,!1)}}),lp.apply(this,arguments)}function cp(s,e,r){return Fu.apply(this,arguments)}function Fu(){return Fu=(0,_.Z)(function*(s,e,r){const a=_n(s),h=[],m=[];for(const C of e){let P;const X=a.rc.get(C);if(X&&0!==X.length){P=yield oh(a.localStore,Ps(X[0]));for(const se of X){const De=a.ic.get(se),Je=yield ug(a,De);Je.snapshot&&m.push(Je.snapshot)}}else{const se=yield dm(a.localStore,C);P=yield oh(a.localStore,se),yield Mu(a,ru(se),C,!1,P.resumeToken)}h.push(P)}return a.sc.zo(m),h}),Fu.apply(this,arguments)}function ru(s){return Rl(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function Ac(s){const e=_n(s);return _n(_n(e.localStore).persistence).vi()}function hg(s,e,r,a){return df.apply(this,arguments)}function df(){return df=(0,_.Z)(function*(s,e,r,a){const h=_n(s);if(h.dc)return void Ht("SyncEngine","Ignoring unexpected query state notification.");const m=h.rc.get(e);if(m&&m.length>0)switch(r){case"current":case"not-current":{const C=yield Iy(h.localStore,hu(m[0])),P=g.createSynthesizedRemoteEventForCurrentChange(e,"current"===r,ni.EMPTY_BYTE_STRING);yield bl(h,C,P);break}case"rejected":yield zh(h.localStore,e,!0),Ou(h,e,a);break;default:Bn()}}),df.apply(this,arguments)}function fg(s,e,r){return up.apply(this,arguments)}function up(){return up=(0,_.Z)(function*(s,e,r){const a=dp(s);if(a.dc){for(const h of e){if(a.rc.has(h)){Ht("SyncEngine","Adding an already active target "+h);continue}const m=yield dm(a.localStore,h),C=yield oh(a.localStore,m);yield Mu(a,ru(m),C.targetId,!1,C.resumeToken),Kf(a.remoteStore,C)}for(const h of r)a.rc.has(h)&&(yield zh(a.localStore,h,!1).then(()=>{bd(a.remoteStore,h),Ou(a,h)}).catch(B))}}),up.apply(this,arguments)}function dp(s){const e=_n(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=lg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ap.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cg.bind(null,e),e.sc.zo=ig.bind(null,e.eventManager),e.sc.wc=q_.bind(null,e.eventManager),e}function hp(s){const e=_n(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oc.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Dm.bind(null,e),e}class fp{constructor(){this.synchronizeTabs=!1}initialize(e){var r=this;return(0,_.Z)(function*(){r.It=Dc(e.databaseInfo.databaseId),r.sharedClientState=r.gc(e),r.persistence=r.yc(e),yield r.persistence.start(),r.localStore=r.Ic(e),r.gcScheduler=r.Tc(e,r.localStore),r.indexBackfillerScheduler=r.Ec(e,r.localStore)})()}Tc(e,r){return null}Ec(e,r){return null}Ic(e){return lm(this.persistence,new Wf,e.initialUser,this.It)}yc(e){return new Wh(ih.Bs,this.It)}gc(e){return new pm}terminate(){var e=this;return(0,_.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Sm extends fp{constructor(e,r,a){super(),this.Ac=e,this.cacheSizeBytes=r,this.forceOwnership=a,this.synchronizeTabs=!1}initialize(e){var r=()=>super.initialize,a=this;return(0,_.Z)(function*(){yield r().call(a,e),yield a.Ac.initialize(a,e),yield hp(a.Ac.syncEngine),yield uh(a.Ac.remoteStore),yield a.persistence.li(()=>(a.gcScheduler&&!a.gcScheduler.started&&a.gcScheduler.start(),a.indexBackfillerScheduler&&!a.indexBackfillerScheduler.started&&a.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return lm(this.persistence,new Wf,e.initialUser,this.It)}Tc(e,r){return new Uf(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,r)}Ec(e,r){const a=new js(r,this.persistence);return new xs(e.asyncQueue,a)}yc(e){const r=sh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),a=void 0!==this.cacheSizeBytes?Uo.withCacheSize(this.cacheSizeBytes):Uo.DEFAULT;return new ic(this.synchronizeTabs,r,e.clientId,a,e.asyncQueue,Hp(),Xc(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new pm}}class pp extends Sm{constructor(e,r){super(e,r,!1),this.Ac=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(e){var r=()=>super.initialize,a=this;return(0,_.Z)(function*(){yield r().call(a,e);const h=a.Ac.syncEngine;a.sharedClientState instanceof qf&&(a.sharedClientState.syncEngine={Fr:nu.bind(null,h),$r:hg.bind(null,h),Br:fg.bind(null,h),vi:Ac.bind(null,h),Mr:ku.bind(null,h)},yield a.sharedClientState.start()),yield a.persistence.li(function(){var m=(0,_.Z)(function*(C){yield function(s,e){return lp.apply(this,arguments)}(a.Ac.syncEngine,C),a.gcScheduler&&(C&&!a.gcScheduler.started?a.gcScheduler.start():C||a.gcScheduler.stop()),a.indexBackfillerScheduler&&(C&&!a.indexBackfillerScheduler.started?a.indexBackfillerScheduler.start():C||a.indexBackfillerScheduler.stop())});return function(C){return m.apply(this,arguments)}}())})()}gc(e){const r=Hp();if(!qf.C(r))throw new Nt(Et.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const a=sh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qf(r,e.asyncQueue,a,e.clientId,e.initialUser)}}class _h{initialize(e,r){var a=this;return(0,_.Z)(function*(){a.localStore||(a.localStore=e.localStore,a.sharedClientState=e.sharedClientState,a.datastore=a.createDatastore(r),a.remoteStore=a.createRemoteStore(r),a.eventManager=a.createEventManager(r),a.syncEngine=a.createSyncEngine(r,!e.synchronizeTabs),a.sharedClientState.onlineStateHandler=h=>lf(a.syncEngine,h,1),a.remoteStore.remoteSyncer.handleCredentialChange=cl.bind(null,a.syncEngine),yield Jf(a.remoteStore,a.syncEngine.isPrimaryClient))})()}createEventManager(e){return new tg}createDatastore(e){const r=Dc(e.databaseInfo.databaseId),a=new Ty(e.databaseInfo);return new Dy(e.authCredentials,e.appCheckCredentials,a,r)}createRemoteStore(e){return r=this.localStore,a=this.datastore,h=e.asyncQueue,m=P=>lf(this.syncEngine,P,0),C=Yh.C()?new Yh:new Cy,new Wp(r,a,h,m,C);var r,a,h,m,C}createSyncEngine(e,r){return function(a,h,m,C,P,X,se){const De=new Cd(a,h,m,C,P,X);return se&&(De.dc=!0),De}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}terminate(){return(e=(0,_.Z)(function*(r){const a=_n(r);Ht("RemoteStore","RemoteStore shutting down."),a.wu.add(5),yield Id(a),a.gu.shutdown(),a.yu.set("Unknown")}),function(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function gp(s,e,r){if(!r)throw new Nt(Et.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Am(s,e,r,a){if(!0===e&&!0===a)throw new Nt(Et.INVALID_ARGUMENT,`${s} and ${r} cannot be used together.`)}function gg(s){if(!Tn.isDocumentKey(s))throw new Nt(Et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function vh(s){if(Tn.isDocumentKey(s))throw new Nt(Et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Eh(s){if(void 0===s)return"undefined";if(null===s)return"null";if("string"==typeof s)return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if("number"==typeof s||"boolean"==typeof s)return""+s;if("object"==typeof s){if(s instanceof Array)return"an array";{const e=(r=s).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof s?"a function":Bn()}function mi(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Nt(Et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Eh(s);throw new Nt(Et.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return s}function hf(s,e){if(e<=0)throw new Nt(Et.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}const mg=new Map;class ul{constructor(e){var r;if(void 0===e.host){if(void 0!==e.ssl)throw new Nt(Et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(r=e.ssl)||void 0===r||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Nt(Et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Am("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ih{constructor(e,r,a,h){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=a,this._app=h,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ul({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Nt(Et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Nt(Et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ul(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new fi;switch(r.type){case"gapi":return new cc(r.client,r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Nt(Et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=mg.get(e);r&&(Ht("ComponentProvider","Removing Datastore"),mg.delete(e),r.terminate())}(this),Promise.resolve()}}function Py(s,e,r,a={}){var h;const m=(s=mi(s,Ih))._getSettings();if("firestore.googleapis.com"!==m.host&&m.host!==e&&us("Host has been set in both settings() and useEmulator(), emulator host will be used"),s._setSettings(Object.assign(Object.assign({},m),{host:`${e}:${r}`,ssl:!1})),a.mockUserToken){let C,P;if("string"==typeof a.mockUserToken)C=a.mockUserToken,P=on.MOCK_USER;else{C=(0,ce.Sg)(a.mockUserToken,null===(h=s._app)||void 0===h?void 0:h.options.projectId);const X=a.mockUserToken.sub||a.mockUserToken.user_id;if(!X)throw new Nt(Et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");P=new on(X)}s._authCredentials=new Es(new Yo(C,P))}}class uo{constructor(e,r,a){this.converter=r,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new uo(this.firestore,e,this._key)}}class jo{constructor(e,r,a){this.converter=r,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new jo(this.firestore,e,this._query)}}class Hl extends jo{constructor(e,r,a){super(e,r,Lo(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new uo(this.firestore,null,new Tn(e))}withConverter(e){return new Hl(this.firestore,e,this._path)}}function ff(s,e,...r){if(s=(0,ce.m9)(s),gp("collection","path",e),s instanceof Ih){const a=Gr.fromString(e,...r);return vh(a),new Hl(s,null,a)}{if(!(s instanceof uo||s instanceof Hl))throw new Nt(Et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Gr.fromString(e,...r));return vh(a),new Hl(s.firestore,null,a)}}function pf(s,e){if(s=mi(s,Ih),gp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Nt(Et.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new jo(s,null,(r=e,new la(Gr.emptyPath(),r)));var r}function yg(s,e,...r){if(s=(0,ce.m9)(s),1===arguments.length&&(e=Ma.R()),gp("doc","path",e),s instanceof Ih){const a=Gr.fromString(e,...r);return gg(a),new uo(s,null,new Tn(a))}{if(!(s instanceof uo||s instanceof Hl))throw new Nt(Et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Gr.fromString(e,...r));return gg(a),new uo(s.firestore,s instanceof Hl?s.converter:null,new Tn(a))}}function _g(s,e){return s=(0,ce.m9)(s),e=(0,ce.m9)(e),(s instanceof uo||s instanceof Hl)&&(e instanceof uo||e instanceof Hl)&&s.firestore===e.firestore&&s.path===e.path&&s.converter===e.converter}function Lu(s,e){return s=(0,ce.m9)(s),e=(0,ce.m9)(e),s instanceof jo&&e instanceof jo&&s.firestore===e.firestore&&Zl(s._query,e._query)&&s.converter===e.converter}function vg(s,e=10240){let r=0;return{read:()=>(0,_.Z)(function*(){if(r<s.byteLength){const a={value:s.slice(r,r+e),done:!1};return r+=e,a}return{done:!0}})(),cancel:()=>(0,_.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Vu{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}class Eg{constructor(e,r){this.Pc=e,this.It=r,this.metadata=new Zn,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(a=>{a&&a.Ou()?this.metadata.resolve(a.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==a?void 0:a.payload)}`))},a=>this.metadata.reject(a))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,_.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,_.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,_.Z)(function*(){const r=yield e.Sc();if(null===r)return null;const a=e.vc.decode(r),h=Number(a);isNaN(h)&&e.Dc(`length string (${a}) is not valid number`);const m=yield e.Cc(h);return new np(JSON.parse(m),r.length+h)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,_.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const r=e.xc();r<0&&e.Dc("Reached the end of bundle when a length string is expected.");const a=e.buffer.slice(0,r);return e.buffer=e.buffer.slice(r),a})()}Cc(e){var r=this;return(0,_.Z)(function*(){for(;r.buffer.length<e;)(yield r.Nc())&&r.Dc("Reached the end of bundle when more is expected.");const a=r.vc.decode(r.buffer.slice(0,e));return r.buffer=r.buffer.slice(e),a})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,_.Z)(function*(){const r=yield e.Pc.read();if(!r.done){const a=new Uint8Array(e.buffer.length+r.value.length);a.set(e.buffer),a.set(r.value,e.buffer.length),e.buffer=a}return r.done})()}}class bg{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var r=this;return(0,_.Z)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw new Nt(Et.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const a=yield(h=(0,_.Z)(function*(m,C){const P=_n(m),X=El(P.It)+"/documents",se={documents:C.map(zt=>Ll(P.It,zt))},De=yield P._o("BatchGetDocuments",X,se,C.length),Je=new Map;De.forEach(zt=>{const Zt=function(s,e){return"found"in e?function(r,a){or(!!a.found);const h=nl(r,a.found.name),m=no(a.found.updateTime),C=new Y({mapValue:{fields:a.found.fields}});return Le.newFoundDocument(h,m,C)}(s,e):"missing"in e?function(r,a){or(!!a.missing),or(!!a.readTime);const h=nl(r,a.missing),m=no(a.readTime);return Le.newNoDocument(h,m)}(s,e):Bn()}(P.It,zt);Je.set(Zt.key.toString(),Zt)});const Tt=[];return C.forEach(zt=>{const Zt=Je.get(zt.toString());or(!!Zt),Tt.push(Zt)}),Tt}),function(m,C){return h.apply(this,arguments)})(r.datastore,e);var h;return a.forEach(h=>r.recordVersion(h)),a})()}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(a){this.lastWriteError=a}this.writtenDocs.add(e.toString())}delete(e){this.write(new kl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const r=e.readVersions;var a;e.mutations.forEach(a=>{r.delete(a.key.toString())}),r.forEach((a,h)=>{const m=Tn.fromPath(h);e.mutations.push(new mu(m,e.precondition(m)))}),yield(a=(0,_.Z)(function*(h,m){const C=_n(h),P=El(C.It)+"/documents",X={writes:m.map(se=>Vl(C.It,se))};yield C.ao("Commit",P,X)}),function(h,m){return a.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Bn();r=Er.min()}const a=this.readVersions.get(e.key.toString());if(a){if(!r.isEqual(a))throw new Nt(Et.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Er.min())?fs.exists(!1):fs.updateTime(r):fs.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Er.min()))throw new Nt(Et.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fs.updateTime(r)}return fs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Mm{constructor(e,r,a,h,m){this.asyncQueue=e,this.datastore=r,this.options=a,this.updateFunction=h,this.deferred=m,this.kc=a.maxAttempts,this.No=new Kh(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,_.Z)(function*(){const r=new bg(e.datastore),a=e.Mc(r);a&&a.then(h=>{e.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{e.deferred.resolve(h)}).catch(m=>{e.Fc(m)}))}).catch(h=>{e.Fc(h)})}))}Mc(e){try{const r=this.updateFunction(e);return!Hi(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const r=e.code;return"aborted"===r||"failed-precondition"===r||!nd(r)}return!1}}class gf{constructor(e,r,a,h){var m=this;this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=a,this.databaseInfo=h,this.user=on.UNAUTHENTICATED,this.clientId=Ma.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(a,function(){var C=(0,_.Z)(function*(P){Ht("FirestoreClient","Received user=",P.uid),yield m.authCredentialListener(P),m.user=P});return function(P){return C.apply(this,arguments)}}()),this.appCheckCredentials.start(a,C=>(Ht("FirestoreClient","Received new app check token=",C),this.appCheckCredentialListener(C,this.user)))}getConfiguration(){var e=this;return(0,_.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Nt(Et.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const r=new Zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),r.resolve()}catch(a){const h=hh(a,"Failed to shutdown persistence");r.reject(h)}})),r.promise}}function iu(s,e){return mf.apply(this,arguments)}function mf(){return mf=(0,_.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress(),Ht("FirestoreClient","Initializing OfflineComponentProvider");const r=yield s.getConfiguration();yield e.initialize(r);let a=r.initialUser;s.setCredentialChangeListener(function(){var h=(0,_.Z)(function*(m){a.isEqual(m)||(yield cm(e.localStore,m),a=m)});return function(m){return h.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s.offlineComponents=e}),mf.apply(this,arguments)}function Cl(s,e){return $u.apply(this,arguments)}function $u(){return $u=(0,_.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress();const r=yield d(s);Ht("FirestoreClient","Initializing OnlineComponentProvider");const a=yield s.getConfiguration();yield e.initialize(r,a),s.setCredentialChangeListener(h=>bm(e.remoteStore,h)),s.setAppCheckTokenChangeListener((h,m)=>bm(e.remoteStore,m)),s.onlineComponents=e}),$u.apply(this,arguments)}function d(s){return l.apply(this,arguments)}function l(){return l=(0,_.Z)(function*(s){return s.offlineComponents||(Ht("FirestoreClient","Using default OfflineComponentProvider"),yield iu(s,new fp)),s.offlineComponents}),l.apply(this,arguments)}function c(s){return p.apply(this,arguments)}function p(){return p=(0,_.Z)(function*(s){return s.onlineComponents||(Ht("FirestoreClient","Using default OnlineComponentProvider"),yield Cl(s,new _h)),s.onlineComponents}),p.apply(this,arguments)}function I(s){return d(s).then(e=>e.persistence)}function N(s){return d(s).then(e=>e.localStore)}function j(s){return c(s).then(e=>e.remoteStore)}function ge(s){return c(s).then(e=>e.syncEngine)}function Ge(s){return Mt.apply(this,arguments)}function Mt(){return Mt=(0,_.Z)(function*(s){const e=yield c(s),r=e.eventManager;return r.onListen=ag.bind(null,e.syncEngine),r.onUnlisten=ll.bind(null,e.syncEngine),r}),Mt.apply(this,arguments)}function nr(s,e,r={}){const a=new Zn;return s.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function(h,m,C,P,X){const se=new Vu({next:Je=>{m.enqueueAndForget(()=>ng(h,De));const Tt=Je.docs.has(C);!Tt&&Je.fromCache?X.reject(new Nt(Et.UNAVAILABLE,"Failed to get document because the client is offline.")):Tt&&Je.fromCache&&P&&"server"===P.source?X.reject(new Nt(Et.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):X.resolve(Je)},error:Je=>X.reject(Je)}),De=new sf(Lo(C.path),se,{includeMetadataChanges:!0,ku:!0});return rf(h,De)}(yield Ge(s),s.asyncQueue,e,r,a)})),a.promise}function Ui(s,e,r={}){const a=new Zn;return s.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function(h,m,C,P,X){const se=new Vu({next:Je=>{m.enqueueAndForget(()=>ng(h,De)),Je.fromCache&&"server"===P.source?X.reject(new Nt(Et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):X.resolve(Je)},error:Je=>X.reject(Je)}),De=new sf(C,se,{includeMetadataChanges:!0,ku:!0});return rf(h,De)}(yield Ge(s),s.asyncQueue,e,r,a)})),a.promise}class bs{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new Kh(this,"async_queue_retry"),this.Wc=()=>{const r=Xc();r&&Ht("AsyncQueue","Visibility state changed to "+r.visibilityState),this.No.Po()};const e=Xc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const r=Xc();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const r=new Zn;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,_.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(r){if(!Ar(r))throw r;Ht("AsyncQueue","Operation failed with retryable error: "+r)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const r=this.Bc.then(()=>(this.Gc=!0,e().catch(a=>{throw this.Kc=a,this.Gc=!1,pr("INTERNAL UNHANDLED ERROR: ",function(m){let C=m.message||"";return m.stack&&(C=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),C}(a)),a}).then(a=>(this.Gc=!1,a))));return this.Bc=r,r}enqueueAfterDelay(e,r,a){this.zc(),this.jc.indexOf(e)>-1&&(r=0);const h=tf.createAndSchedule(this,e,r,a,m=>this.Yc(m));return this.qc.push(h),h}zc(){this.Kc&&Bn()}verifyOperationInProgress(){}Xc(){var e=this;return(0,_.Z)(function*(){let r;do{r=e.Bc,yield r}while(r!==e.Bc)})()}Zc(e){for(const r of this.qc)if(r.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((r,a)=>r.targetTimeMs-a.targetTimeMs);for(const r of this.qc)if(r.skipDelay(),"all"!==e&&r.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const r=this.qc.indexOf(e);this.qc.splice(r,1)}}function Wo(s){return function(e,r){if("object"!=typeof e||null===e)return!1;const a=e;for(const h of["next","error","complete"])if(h in a&&"function"==typeof a[h])return!0;return!1}(s)}class ac{constructor(){this._progressObserver={},this._taskCompletionResolver=new Zn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,a){this._progressObserver={next:e,error:r,complete:a}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const Cg=-1;class Ns extends Ih{constructor(e,r,a,h){super(e,r,a,h),this.type="firestore",this._queue=new bs,this._persistenceKey=(null==h?void 0:h.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ny(this),this._firestoreClient.terminate()}}function Oy(s,e){const r="object"==typeof s?s:(0,A.getApp)(),a="string"==typeof s?s:e||"(default)",h=(0,A._getProvider)(r,"firestore").getImmediate({identifier:a});if(!h._initialized){const m=(0,ce.P0)("firestore");m&&Py(h,...m)}return h}function yo(s){return s._firestoreClient||Ny(s),s._firestoreClient.verifyNotTerminated(),s._firestoreClient}function Ny(s){var e;const r=s._freezeSettings(),a=(m=(null===(e=s._app)||void 0===e?void 0:e.options.appId)||"",new ka(s._databaseId,m,s._persistenceKey,(P=r).host,P.ssl,P.experimentalForceLongPolling,P.experimentalAutoDetectLongPolling,P.useFetchStreams));var m,P;s._firestoreClient=new gf(s._authCredentials,s._appCheckCredentials,s._queue,a)}function ky(s,e){$y(s=mi(s,Ns));const r=yo(s),a=s._freezeSettings(),h=new _h;return Fy(r,h,new Sm(h,a.cacheSizeBytes,null==e?void 0:e.forceOwnership))}function K_(s){$y(s=mi(s,Ns));const e=yo(s),r=s._freezeSettings(),a=new _h;return Fy(e,a,new pp(a,r.cacheSizeBytes))}function Fy(s,e,r){const a=new Zn;return s.asyncQueue.enqueue((0,_.Z)(function*(){try{yield iu(s,r),yield Cl(s,e),a.resolve()}catch(h){const m=h;if(!("FirebaseError"===(C=m).name?C.code===Et.FAILED_PRECONDITION||C.code===Et.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&C instanceof DOMException)||22===C.code||20===C.code||11===C.code))throw m;us("Error enabling offline persistence. Falling back to persistence disabled: "+m),a.reject(m)}var C})).then(()=>a.promise)}function Ly(s){if(s._initialized&&!s._terminated)throw new Nt(Et.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Zn;return s._queue.enqueueAndForgetEvenWhileRestricted((0,_.Z)(function*(){try{yield(r=(0,_.Z)(function*(a){if(!rt.C())return Promise.resolve();const h=a+"main";yield rt.delete(h)}),function(a){return r.apply(this,arguments)})(sh(s._databaseId,s._persistenceKey)),e.resolve()}catch(r){e.reject(r)}var r})),e.promise}function Z_(s){return function(e){const r=new Zn;return e.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function(s,e){return Td.apply(this,arguments)}(yield ge(e),r)})),r.promise}(yo(s=mi(s,Ns)))}function A0(s){return function(s){return s.asyncQueue.enqueue((0,_.Z)(function*(){const e=yield I(s),r=yield j(s);return e.setNetworkEnabled(!0),function(a){const h=_n(a);return h.wu.delete(0),Jc(h)}(r)}))}(yo(s=mi(s,Ns)))}function Q_(s){return function(s){return s.asyncQueue.enqueue((0,_.Z)(function*(){const e=yield I(s),r=yield j(s);return e.setNetworkEnabled(!1),(a=(0,_.Z)(function*(h){const m=_n(h);m.wu.add(0),yield Id(m),m.yu.set("Offline")}),function(h){return a.apply(this,arguments)})(r);var a}))}(yo(s=mi(s,Ns)))}function J_(s,e){const r=yo(s=mi(s,Ns)),a=new ac;return function(s,e,r,a){const h=function(m,C){let P;return P="string"==typeof m?(new TextEncoder).encode(m):m,X=function(X,se){if(X instanceof Uint8Array)return vg(X,void 0);if(X instanceof ArrayBuffer)return vg(new Uint8Array(X),void 0);if(X instanceof ReadableStream)return X.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(P),new Eg(X,C);var X}(r,Dc(e));s.asyncQueue.enqueueAndForget((0,_.Z)(function*(){!function(s,e,r){const a=_n(s);var h;(h=(0,_.Z)(function*(m,C,P){try{const X=yield C.getMetadata();if(yield function(Tt,zt){const Zt=_n(Tt),zn=no(zt.createTime);return Zt.persistence.runTransaction("hasNewerBundle","readonly",cr=>Zt.Ns.getBundleMetadata(cr,zt.id)).then(cr=>!!cr&&cr.createTime.compareTo(zn)>=0)}(m.localStore,X))return yield C.close(),P._completeWith({taskState:"Success",documentsLoaded:(Tt=X).totalDocuments,bytesLoaded:Tt.totalBytes,totalDocuments:Tt.totalDocuments,totalBytes:Tt.totalBytes}),Promise.resolve(new Set);P._updateProgress(ph(X));const se=new sg(X,m.localStore,C.It);let De=yield C.mc();for(;De;){const Tt=yield se.Fu(De);Tt&&P._updateProgress(Tt),De=yield C.mc()}const Je=yield se.complete();return yield bl(m,Je.Lu,void 0),yield function(Tt,zt){const Zt=_n(Tt);return Zt.persistence.runTransaction("Save bundle","readwrite",zn=>Zt.Ns.saveBundleMetadata(zn,zt))}(m.localStore,X),P._completeWith(Je.progress),Promise.resolve(Je.Bu)}catch(X){return us("SyncEngine",`Loading bundle failed with ${X}`),P._failWith(X),Promise.resolve(new Set)}var Tt}),function(m,C,P){return h.apply(this,arguments)})(a,e,r).then(h=>{a.sharedClientState.notifyBundleLoaded(h)})}(yield ge(s),h,a)}))}(r,s._databaseId,e,a),a}function Vy(s,e){return function(s,e){return s.asyncQueue.enqueue((0,_.Z)(function*(){return function(r,a){const h=_n(r);return h.persistence.runTransaction("Get named query","readonly",m=>h.Ns.getNamedQuery(m,a))}(yield N(s),e)}))}(yo(s=mi(s,Ns)),e).then(r=>r?new jo(s,null,r.query):null)}function $y(s){if(s._initialized||s._terminated)throw new Nt(Et.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ad{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ad(ni.fromBase64String(e))}catch(r){throw new Nt(Et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Ad(ni.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class bh{constructor(...e){for(let r=0;r<e.length;++r)if(0===e[r].length)throw new Nt(Et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xd{constructor(e){this._methodName=e}}class Pm{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Nt(Et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Nt(Et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ar(this._lat,e._lat)||ar(this._long,e._long)}}const R0=/^__.*__$/;class M0{constructor(e,r,a){this.data=e,this.fieldMask=r,this.fieldTransforms=a}toMutation(e,r){return null!==this.fieldMask?new Nl(e,this.data,this.fieldMask,r,this.fieldTransforms):new Bc(e,this.data,r,this.fieldTransforms)}}class By{constructor(e,r,a){this.data=e,this.fieldMask=r,this.fieldTransforms=a}toMutation(e,r){return new Nl(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function ev(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Bn()}}class wg{constructor(e,r,a,h,m,C){this.settings=e,this.databaseId=r,this.It=a,this.ignoreUndefinedProperties=h,void 0===m&&this.na(),this.fieldTransforms=m||[],this.fieldMask=C||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new wg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var r;const a=null===(r=this.path)||void 0===r?void 0:r.child(e),h=this.ia({path:a,oa:!1});return h.ua(e),h}ca(e){var r;const a=null===(r=this.path)||void 0===r?void 0:r.child(e),h=this.ia({path:a,oa:!1});return h.na(),h}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Dg(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(r=>e.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>e.isPrefixOf(r.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(ev(this.sa)&&R0.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class tv{constructor(e,r,a){this.databaseId=e,this.ignoreUndefinedProperties=r,this.It=a||Dc(e)}da(e,r,a,h=!1){return new wg({sa:e,methodName:r,fa:a,path:Vi.emptyPath(),oa:!1,la:h},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Bu(s){const e=s._freezeSettings(),r=Dc(s._databaseId);return new tv(s._databaseId,!!e.ignoreUndefinedProperties,r)}function yf(s,e,r,a,h,m={}){const C=s.da(m.merge||m.mergeFields?2:0,e,r,h);Tg("Data must be an object, but it was:",C,a);const P=Nm(a,C);let X,se;if(m.merge)X=new Rs(C.fieldMask),se=C.fieldTransforms;else if(m.mergeFields){const De=[];for(const Je of m.mergeFields){const Tt=_f(e,Je,r);if(!C.contains(Tt))throw new Nt(Et.INVALID_ARGUMENT,`Field '${Tt}' is specified in your field mask but missing from your input data.`);Gy(De,Tt)||De.push(Tt)}X=new Rs(De),se=C.fieldTransforms.filter(Je=>X.covers(Je.field))}else X=null,se=C.fieldTransforms;return new M0(new Y(P),X,se)}class mp extends xd{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mp}}function nv(s,e,r){return new wg({sa:3,fa:e.settings.fa,methodName:s._methodName,oa:r},e.databaseId,e.It,e.ignoreUndefinedProperties)}class Uy extends xd{_toFieldTransform(e){return new Xl(e.path,new $a)}isEqual(e){return e instanceof Uy}}class P0 extends xd{constructor(e,r){super(e),this._a=r}_toFieldTransform(e){const r=nv(this,e,!0),a=this._a.map(m=>wh(m,r)),h=new Ol(a);return new Xl(e.path,h)}isEqual(e){return this===e}}class rv extends xd{constructor(e,r){super(e),this._a=r}_toFieldTransform(e){const r=nv(this,e,!0),a=this._a.map(m=>wh(m,r)),h=new kc(a);return new Xl(e.path,h)}isEqual(e){return this===e}}class jy extends xd{constructor(e,r){super(e),this.wa=r}_toFieldTransform(e){const r=new Ql(e.It,xh(e.It,this.wa));return new Xl(e.path,r)}isEqual(e){return this===e}}function Hy(s,e,r,a){const h=s.da(1,e,r);Tg("Data must be an object, but it was:",h,a);const m=[],C=Y.empty();zi(a,(X,se)=>{const De=yp(e,X,r);se=(0,ce.m9)(se);const Je=h.ca(De);if(se instanceof mp)m.push(De);else{const Tt=wh(se,Je);null!=Tt&&(m.push(De),C.set(De,Tt))}});const P=new Rs(m);return new By(C,P,h.fieldTransforms)}function Om(s,e,r,a,h,m){const C=s.da(1,e,r),P=[_f(e,a,r)],X=[h];if(m.length%2!=0)throw new Nt(Et.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Tt=0;Tt<m.length;Tt+=2)P.push(_f(e,m[Tt])),X.push(m[Tt+1]);const se=[],De=Y.empty();for(let Tt=P.length-1;Tt>=0;--Tt)if(!Gy(se,P[Tt])){const zt=P[Tt];let Zt=X[Tt];Zt=(0,ce.m9)(Zt);const zn=C.ca(zt);if(Zt instanceof mp)se.push(zt);else{const cr=wh(Zt,zn);null!=cr&&(se.push(zt),De.set(zt,cr))}}const Je=new Rs(se);return new By(De,Je,C.fieldTransforms)}function Ch(s,e,r,a=!1){return wh(r,s.da(a?4:3,e))}function wh(s,e){if(Wy(s=(0,ce.m9)(s)))return Tg("Unsupported field value:",e,s),Nm(s,e);if(s instanceof xd)return function(r,a){if(!ev(a.sa))throw a.ha(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.ha(`${r._methodName}() is not currently supported inside arrays`);const h=r._toFieldTransform(a);h&&a.fieldTransforms.push(h)}(s,e),null;if(void 0===s&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(r,a){const h=[];let m=0;for(const C of r){let P=wh(C,a.aa(m));null==P&&(P={nullValue:"NULL_VALUE"}),h.push(P),m++}return{arrayValue:{values:h}}}(s,e)}return function(r,a){if(null===(r=(0,ce.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return xh(a.It,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const h=Ei.fromDate(r);return{timestampValue:Os(a.It,h)}}if(r instanceof Ei){const h=new Ei(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Os(a.It,h)}}if(r instanceof Pm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ad)return{bytesValue:ca(a.It,r._byteString)};if(r instanceof uo){const h=a.databaseId,m=r.firestore._databaseId;if(!m.isEqual(h))throw a.ha(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:od(r.firestore._databaseId||a.databaseId,r._key.path)}}throw a.ha(`Unsupported field value: ${Eh(r)}`)}(s,e)}function Nm(s,e){const r={};return Ko(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zi(s,(a,h)=>{const m=wh(h,e.ra(a));null!=m&&(r[a]=m)}),{mapValue:{fields:r}}}function Wy(s){return!("object"!=typeof s||null===s||s instanceof Array||s instanceof Date||s instanceof Ei||s instanceof Pm||s instanceof Ad||s instanceof uo||s instanceof xd)}function Tg(s,e,r){if(!Wy(r)||"object"!=typeof(a=r)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const a=Eh(r);throw e.ha("an object"===a?s+" a custom object":s+" "+a)}var a}function _f(s,e,r){if((e=(0,ce.m9)(e))instanceof bh)return e._internalPath;if("string"==typeof e)return yp(s,e);throw Dg("Field path arguments must be of type string or ",s,!1,void 0,r)}const iv=new RegExp("[~\\*/\\[\\]]");function yp(s,e,r){if(e.search(iv)>=0)throw Dg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,r);try{return new bh(...e.split("."))._internalPath}catch(a){throw Dg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,r)}}function Dg(s,e,r,a,h){const m=a&&!a.isEmpty(),C=void 0!==h;let P=`Function ${e}() called with invalid data`;r&&(P+=" (via `toFirestore()`)"),P+=". ";let X="";return(m||C)&&(X+=" (found",m&&(X+=` in field ${a}`),C&&(X+=` in document ${h}`),X+=")"),new Nt(Et.INVALID_ARGUMENT,P+s+X)}function Gy(s,e){return s.some(r=>r.isEqual(e))}class _p{constructor(e,r,a,h,m){this._firestore=e,this._userDataWriter=r,this._key=a,this._document=h,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new uo(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new sv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Sg("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r)}}}class sv extends _p{data(){return super.data()}}function Sg(s,e){return"string"==typeof e?yp(s,e):e instanceof bh?e._internalPath:e._delegate._internalPath}function km(s){if("L"===s.limitType&&0===s.explicitOrderBy.length)throw new Nt(Et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vp{}function zy(s,...e){for(const r of e)s=r._apply(s);return s}class qy extends vp{constructor(e,r,a){super(),this.ma=e,this.ga=r,this.ya=a,this.type="where"}_apply(e){const r=Bu(e.firestore),a=function(h,m,C,P,X,se,De){let Je;if(X.isKeyField()){if("array-contains"===se||"array-contains-any"===se)throw new Nt(Et.INVALID_ARGUMENT,`Invalid Query. You can't perform '${se}' queries on documentId().`);if("in"===se||"not-in"===se){Zy(De,se);const zt=[];for(const Zt of De)zt.push(ov(P,h,Zt));Je={arrayValue:{values:zt}}}else Je=ov(P,h,De)}else"in"!==se&&"not-in"!==se&&"array-contains-any"!==se||Zy(De,se),Je=Ch(C,"where",De,"in"===se||"not-in"===se);const Tt=pi.create(X,se,Je);return function(zt,Zt){if(Zt.dt()){const cr=Ml(zt);if(null!==cr&&!cr.isEqual(Zt.field))throw new Nt(Et.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${cr.toString()}' and '${Zt.field.toString()}'`);const Yi=eo(zt);null!==Yi&&Wm(0,Zt.field,Yi)}const zn=function(cr,Yi){for(const ks of cr.filters)if(Yi.indexOf(ks.op)>=0)return ks.op;return null}(zt,function(cr){switch(cr){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Zt.op));if(null!==zn)throw new Nt(Et.INVALID_ARGUMENT,zn===Zt.op?`Invalid query. You cannot use more than one '${Zt.op.toString()}' filter.`:`Invalid query. You cannot use '${Zt.op.toString()}' filters with '${zn.toString()}' filters.`)}(h,Tt),Tt}(e._query,0,r,e.firestore._databaseId,this.ma,this.ga,this.ya);return new jo(e.firestore,e.converter,function(h,m){const C=h.filters.concat([m]);return new la(h.path,h.collectionGroup,h.explicitOrderBy.slice(),C,h.limit,h.limitType,h.startAt,h.endAt)}(e._query,a))}}function Fm(s,e,r){const a=e,h=Sg("where",s);return new qy(h,a,r)}class O0 extends vp{constructor(e,r){super(),this.ma=e,this.pa=r,this.type="orderBy"}_apply(e){const r=function(a,h,m){if(null!==a.startAt)throw new Nt(Et.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new Nt(Et.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const C=new Ca(h,m);return function(P,X){if(null===eo(P)){const se=Ml(P);null!==se&&Wm(0,se,X.field)}}(a,C),C}(e._query,this.ma,this.pa);return new jo(e.firestore,e.converter,function(a,h){const m=a.explicitOrderBy.concat([h]);return new la(a.path,a.collectionGroup,m,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}function Lm(s,e="asc"){const r=e,a=Sg("orderBy",s);return new O0(a,r)}class Yy extends vp{constructor(e,r,a){super(),this.type=e,this.Ia=r,this.Ta=a}_apply(e){return new jo(e.firestore,e.converter,Ja(e._query,this.Ia,this.Ta))}}function N0(s){return hf("limit",s),new Yy("limit",s,"F")}function Ep(s){return hf("limitToLast",s),new Yy("limitToLast",s,"L")}class Vm extends vp{constructor(e,r,a){super(),this.type=e,this.Ea=r,this.Aa=a}_apply(e){const r=Hm(e,this.type,this.Ea,this.Aa);return new jo(e.firestore,e.converter,(h=r,new la((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,h,a.endAt)));var a,h}}function $m(...s){return new Vm("startAt",s,!0)}function Bm(...s){return new Vm("startAfter",s,!1)}class Ky extends vp{constructor(e,r,a){super(),this.type=e,this.Ea=r,this.Aa=a}_apply(e){const r=Hm(e,this.type,this.Ea,this.Aa);return new jo(e.firestore,e.converter,(h=r,new la((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,h)));var a,h}}function Um(...s){return new Ky("endBefore",s,!1)}function jm(...s){return new Ky("endAt",s,!0)}function Hm(s,e,r,a){if(r[0]=(0,ce.m9)(r[0]),r[0]instanceof _p)return function(h,m,C,P,X){if(!P)throw new Nt(Et.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${C}().`);const se=[];for(const De of Pl(h))if(De.field.isKeyField())se.push(Qa(m,P.key));else{const Je=P.data.field(De.field);if(ql(Je))throw new Nt(Et.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+De.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Je){const Tt=De.field.canonicalString();throw new Nt(Et.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Tt}' (used as the orderBy) does not exist.`)}se.push(Je)}return new co(se,X)}(s._query,s.firestore._databaseId,e,r[0]._document,a);{const h=Bu(s.firestore);return function(m,C,P,X,se,De){const Je=m.explicitOrderBy;if(se.length>Je.length)throw new Nt(Et.INVALID_ARGUMENT,`Too many arguments provided to ${X}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Tt=[];for(let zt=0;zt<se.length;zt++){const Zt=se[zt];if(Je[zt].field.isKeyField()){if("string"!=typeof Zt)throw new Nt(Et.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${X}(), but got a ${typeof Zt}`);if(!Nc(m)&&-1!==Zt.indexOf("/"))throw new Nt(Et.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${X}() must be a plain document ID, but '${Zt}' contains a slash.`);const zn=m.path.child(Gr.fromString(Zt));if(!Tn.isDocumentKey(zn))throw new Nt(Et.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${X}() must result in a valid document path, but '${zn}' is not because it contains an odd number of segments.`);const cr=new Tn(zn);Tt.push(Qa(C,cr))}else{const zn=Ch(P,X,Zt);Tt.push(zn)}}return new co(Tt,De)}(s._query,s.firestore._databaseId,h,e,r,a)}}function ov(s,e,r){if("string"==typeof(r=(0,ce.m9)(r))){if(""===r)throw new Nt(Et.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nc(e)&&-1!==r.indexOf("/"))throw new Nt(Et.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const a=e.path.child(Gr.fromString(r));if(!Tn.isDocumentKey(a))throw new Nt(Et.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Qa(s,new Tn(a))}if(r instanceof uo)return Qa(s,r._key);throw new Nt(Et.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Eh(r)}.`)}function Zy(s,e){if(!Array.isArray(s)||0===s.length)throw new Nt(Et.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(s.length>10)throw new Nt(Et.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Wm(s,e,r){if(!r.isEqual(e))throw new Nt(Et.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}class Ag{convertValue(e,r="none"){switch(lo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(ia(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw Bn()}}convertObject(e,r){const a={};return zi(e.fields,(h,m)=>{a[h]=this.convertValue(m,r)}),a}convertGeoPoint(e){return new Pm(qi(e.latitude),qi(e.longitude))}convertArray(e,r){return(e.values||[]).map(a=>this.convertValue(a,r))}convertServerTimestamp(e,r){switch(r){case"previous":const a=cu(e);return null==a?null:this.convertValue(a,r);case"estimate":return this.convertTimestamp(Yl(e));default:return null}}convertTimestamp(e){const r=Za(e);return new Ei(r.seconds,r.nanos)}convertDocumentKey(e,r){const a=Gr.fromString(e);or(xp(a));const h=new Fa(a.get(1),a.get(3)),m=new Tn(a.popFirst(5));return h.isEqual(r)||pr(`Document ${m} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),m}}function xg(s,e,r){let a;return a=s?r&&(r.merge||r.mergeFields)?s.toFirestore(e,r):s.toFirestore(e):e,a}class Qy extends Ag{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ad(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new uo(this.firestore,null,r)}}class Uu{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Rd extends _p{constructor(e,r,a,h,m,C){super(e,r,a,h,C),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Th(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const a=this._document.data.field(Sg("DocumentSnapshot.get",e));if(null!==a)return this._userDataWriter.convertValue(a,r.serverTimestamps)}}}class Th extends Rd{data(e={}){return super.data(e)}}class ju{constructor(e,r,a,h){this._firestore=e,this._userDataWriter=r,this._snapshot=h,this.metadata=new Uu(h.hasPendingWrites,h.fromCache),this.query=a}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,r){this._snapshot.docs.forEach(a=>{e.call(r,new Th(this._firestore,this._userDataWriter,a.key,a,new Uu(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Nt(Et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,h){if(a._snapshot.oldDocs.isEmpty()){let m=0;return a._snapshot.docChanges.map(C=>({type:"added",doc:new Th(a._firestore,a._userDataWriter,C.doc.key,C.doc,new Uu(a._snapshot.mutatedKeys.has(C.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:m++}))}{let m=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(C=>h||3!==C.type).map(C=>{const P=new Th(a._firestore,a._userDataWriter,C.doc.key,C.doc,new Uu(a._snapshot.mutatedKeys.has(C.doc.key),a._snapshot.fromCache),a.query.converter);let X=-1,se=-1;return 0!==C.type&&(X=m.indexOf(C.doc.key),m=m.delete(C.doc.key)),1!==C.type&&(m=m.add(C.doc),se=m.indexOf(C.doc.key)),{type:Xy(C.type),doc:P,oldIndex:X,newIndex:se}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Xy(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bn()}}function av(s,e){return s instanceof Rd&&e instanceof Rd?s._firestore===e._firestore&&s._key.isEqual(e._key)&&(null===s._document?null===e._document:s._document.isEqual(e._document))&&s._converter===e._converter:s instanceof ju&&e instanceof ju&&s._firestore===e._firestore&&Lu(s.query,e.query)&&s.metadata.isEqual(e.metadata)&&s._snapshot.isEqual(e._snapshot)}function Jy(s){s=mi(s,uo);const e=mi(s.firestore,Ns);return nr(yo(e),s._key).then(r=>Rg(e,s,r))}class Hu extends Ag{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ad(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new uo(this.firestore,null,r)}}function Gm(s){s=mi(s,uo);const e=mi(s.firestore,Ns),r=yo(e),a=new Hu(e);return function(s,e){const r=new Zn;return s.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return(a=(0,_.Z)(function*(h,m,C){try{const P=yield function(X,se){const De=_n(X);return De.persistence.runTransaction("read document","readonly",Je=>De.localDocuments.getDocument(Je,se))}(h,m);P.isFoundDocument()?C.resolve(P):P.isNoDocument()?C.resolve(null):C.reject(new Nt(Et.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(P){const X=hh(P,`Failed to get document '${m} from cache`);C.reject(X)}}),function(h,m,C){return a.apply(this,arguments)})(yield N(s),e,r);var a})),r.promise}(r,s._key).then(h=>new Rd(e,a,s._key,h,new Uu(null!==h&&h.hasLocalMutations,!0),s.converter))}function e_(s){s=mi(s,uo);const e=mi(s.firestore,Ns);return nr(yo(e),s._key,{source:"server"}).then(r=>Rg(e,s,r))}function lv(s){s=mi(s,jo);const e=mi(s.firestore,Ns),r=yo(e),a=new Hu(e);return km(s._query),Ui(r,s._query).then(h=>new ju(e,a,s,h))}function t_(s){s=mi(s,jo);const e=mi(s.firestore,Ns),r=yo(e),a=new Hu(e);return function(s,e){const r=new Zn;return s.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return(a=(0,_.Z)(function*(h,m,C){try{const P=yield Up(h,m,!0),X=new af(m,P.Hi),se=X.Wu(P.documents),De=X.applyChanges(se,!1);C.resolve(De.snapshot)}catch(P){const X=hh(P,`Failed to execute query '${m} against cache`);C.reject(X)}}),function(h,m,C){return a.apply(this,arguments)})(yield N(s),e,r);var a})),r.promise}(r,s._query).then(h=>new ju(e,a,s,h))}function n_(s){s=mi(s,jo);const e=mi(s.firestore,Ns),r=yo(e),a=new Hu(e);return Ui(r,s._query,{source:"server"}).then(h=>new ju(e,a,s,h))}function zm(s,e,r){s=mi(s,uo);const a=mi(s.firestore,Ns),h=xg(s.converter,e,r);return Dh(a,[yf(Bu(a),"setDoc",s._key,h,null!==s.converter,r).toMutation(s._key,fs.none())])}function qm(s,e,r,...a){s=mi(s,uo);const h=mi(s.firestore,Ns),m=Bu(h);let C;return C="string"==typeof(e=(0,ce.m9)(e))||e instanceof bh?Om(m,"updateDoc",s._key,e,r,a):Hy(m,"updateDoc",s._key,e),Dh(h,[C.toMutation(s._key,fs.exists(!0))])}function r_(s){return Dh(mi(s.firestore,Ns),[new kl(s._key,fs.none())])}function i_(s,e){const r=mi(s.firestore,Ns),a=yg(s),h=xg(s.converter,e);return Dh(r,[yf(Bu(s.firestore),"addDoc",a._key,h,null!==s.converter,{}).toMutation(a._key,fs.exists(!1))]).then(()=>a)}function s_(s,...e){var r,a,h;s=(0,ce.m9)(s);let m={includeMetadataChanges:!1},C=0;"object"!=typeof e[C]||Wo(e[C])||(m=e[C],C++);const P={includeMetadataChanges:m.includeMetadataChanges};if(Wo(e[C])){const Je=e[C];e[C]=null===(r=Je.next)||void 0===r?void 0:r.bind(Je),e[C+1]=null===(a=Je.error)||void 0===a?void 0:a.bind(Je),e[C+2]=null===(h=Je.complete)||void 0===h?void 0:h.bind(Je)}let X,se,De;if(s instanceof uo)se=mi(s.firestore,Ns),De=Lo(s._key.path),X={next:Je=>{e[C]&&e[C](Rg(se,s,Je))},error:e[C+1],complete:e[C+2]};else{const Je=mi(s,jo);se=mi(Je.firestore,Ns),De=Je._query;const Tt=new Hu(se);X={next:zt=>{e[C]&&e[C](new ju(se,Tt,Je,zt))},error:e[C+1],complete:e[C+2]},km(s._query)}return function(Je,Tt,zt,Zt){const zn=new Vu(Zt),cr=new sf(Tt,zn,zt);return Je.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return rf(yield Ge(Je),cr)})),()=>{zn.bc(),Je.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return ng(yield Ge(Je),cr)}))}}(yo(se),De,P,X)}function o_(s,e){return function(s,e){const r=new Vu(e);return s.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return a=yield Ge(s),h=r,_n(a).bu.add(h),void h.next();var a,h})),()=>{r.bc(),s.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return a=yield Ge(s),h=r,void _n(a).bu.delete(h);var a,h}))}}(yo(s=mi(s,Ns)),Wo(e)?e:{next:e})}function Dh(s,e){return function(r,a){const h=new Zn;return r.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function(s,e,r){return In.apply(this,arguments)}(yield ge(r),a,h)})),h.promise}(yo(s),e)}function Rg(s,e,r){const a=r.docs.get(e._key),h=new Hu(s);return new Rd(s,h,e._key,a,new Uu(r.hasPendingWrites,r.fromCache),e.converter)}const k0={maxAttempts:5};class a_{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Bu(e)}set(e,r,a){this._verifyNotCommitted();const h=Md(e,this._firestore),m=xg(h.converter,r,a),C=yf(this._dataReader,"WriteBatch.set",h._key,m,null!==h.converter,a);return this._mutations.push(C.toMutation(h._key,fs.none())),this}update(e,r,a,...h){this._verifyNotCommitted();const m=Md(e,this._firestore);let C;return C="string"==typeof(r=(0,ce.m9)(r))||r instanceof bh?Om(this._dataReader,"WriteBatch.update",m._key,r,a,h):Hy(this._dataReader,"WriteBatch.update",m._key,r),this._mutations.push(C.toMutation(m._key,fs.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Md(e,this._firestore);return this._mutations=this._mutations.concat(new kl(r._key,fs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Nt(Et.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Md(s,e){if((s=(0,ce.m9)(s)).firestore!==e)throw new Nt(Et.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}class l_ extends class{constructor(e,r){this._firestore=e,this._transaction=r,this._dataReader=Bu(e)}get(e){const r=Md(e,this._firestore),a=new Qy(this._firestore);return this._transaction.lookup([r._key]).then(h=>{if(!h||1!==h.length)return Bn();const m=h[0];if(m.isFoundDocument())return new _p(this._firestore,a,m.key,m,r.converter);if(m.isNoDocument())return new _p(this._firestore,a,r._key,null,r.converter);throw Bn()})}set(e,r,a){const h=Md(e,this._firestore),m=xg(h.converter,r,a),C=yf(this._dataReader,"Transaction.set",h._key,m,null!==h.converter,a);return this._transaction.set(h._key,C),this}update(e,r,a,...h){const m=Md(e,this._firestore);let C;return C="string"==typeof(r=(0,ce.m9)(r))||r instanceof bh?Om(this._dataReader,"Transaction.update",m._key,r,a,h):Hy(this._dataReader,"Transaction.update",m._key,r),this._transaction.update(m._key,C),this}delete(e){const r=Md(e,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=Md(e,this._firestore),a=new Hu(this._firestore);return super.get(e).then(h=>new Rd(this._firestore,a,r._key,h._document,new Uu(!1,!1),r.converter))}}function dv(s,e,r){s=mi(s,Ns);const a=Object.assign(Object.assign({},k0),r);return function(h){if(h.maxAttempts<1)throw new Nt(Et.INVALID_ARGUMENT,"Max attempts must be at least 1")}(a),function(h,m,C){const P=new Zn;return h.asyncQueue.enqueueAndForget((0,_.Z)(function*(){const X=yield function(s){return c(s).then(e=>e.datastore)}(h);new Mm(h.asyncQueue,X,C,m,P).run()})),P.promise}(yo(s),h=>e(new l_(s,h)),a)}function Qo(){return new mp("deleteField")}function c_(){return new Uy("serverTimestamp")}function hv(...s){return new P0("arrayUnion",s)}function fv(...s){return new rv("arrayRemove",s)}function u_(s){return new jy("increment",s)}!function(s,e=!0){$n=A.SDK_VERSION,(0,A._registerComponent)(new re.wA("firestore",(r,{instanceIdentifier:a,options:h})=>{const m=r.getProvider("app").getImmediate(),C=new Ns(new lc(r.getProvider("auth-internal")),new ti(r.getProvider("app-check-internal")),function(P,X){if(!Object.prototype.hasOwnProperty.apply(P.options,["projectId"]))throw new Nt(Et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fa(P.options.projectId,X)}(m,a),m);return h=Object.assign({useFetchStreams:e},h),C._setSettings(h),C},"PUBLIC").setMultipleInstances(!0)),(0,A.registerVersion)(Ut,"3.7.1",s),(0,A.registerVersion)(Ut,"3.7.1","esm2017")}()},3854:(Xt,it,L)=>{"use strict";L.d(it,{BH:()=>ze,LL:()=>Ot,ZR:()=>mt,gQ:()=>Fr,zI:()=>We,hu:()=>A,g5:()=>re,US:()=>_e,tV:()=>Ie,h$:()=>ne,L:()=>V,$s:()=>Gt,r3:()=>Qn,Sg:()=>nt,ne:()=>Yr,p$:()=>ie,vZ:()=>tr,ZB:()=>ae,gK:()=>Tr,pd:()=>vn,aH:()=>je,q4:()=>Ve,P0:()=>ot,Pz:()=>Ae,m9:()=>un,z$:()=>le,GJ:()=>br,jU:()=>xe,ru:()=>Oe,xb:()=>an,w1:()=>$e,hl:()=>bt,uI:()=>Ee,UG:()=>at,Yr:()=>gt,b$:()=>Ye,G6:()=>ct,w9:()=>dr,cI:()=>Ft,UI:()=>jn,xO:()=>si,zd:()=>Rr,DV:()=>wt,ug:()=>fr,dS:()=>hr,Wl:()=>Cn,eu:()=>E});const A=function(Ue,ke){if(!Ue)throw re(ke)},re=function(Ue){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Ue)},Me=function(Ue){const ke=[];let et=0;for(let Fe=0;Fe<Ue.length;Fe++){let ve=Ue.charCodeAt(Fe);ve<128?ke[et++]=ve:ve<2048?(ke[et++]=ve>>6|192,ke[et++]=63&ve|128):55296==(64512&ve)&&Fe+1<Ue.length&&56320==(64512&Ue.charCodeAt(Fe+1))?(ve=65536+((1023&ve)<<10)+(1023&Ue.charCodeAt(++Fe)),ke[et++]=ve>>18|240,ke[et++]=ve>>12&63|128,ke[et++]=ve>>6&63|128,ke[et++]=63&ve|128):(ke[et++]=ve>>12|224,ke[et++]=ve>>6&63|128,ke[et++]=63&ve|128)}return ke},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Ue,ke){if(!Array.isArray(Ue))throw Error("encodeByteArray takes an array as a parameter");this.init_();const et=ke?this.byteToCharMapWebSafe_:this.byteToCharMap_,Fe=[];for(let ve=0;ve<Ue.length;ve+=3){const Pe=Ue[ve],vt=ve+1<Ue.length,qt=vt?Ue[ve+1]:0,Un=ve+2<Ue.length,Sn=Un?Ue[ve+2]:0;let vr=(15&qt)<<2|Sn>>6,Lr=63&Sn;Un||(Lr=64,vt||(vr=64)),Fe.push(et[Pe>>2],et[(3&Pe)<<4|qt>>4],et[vr],et[Lr])}return Fe.join("")},encodeString(Ue,ke){return this.HAS_NATIVE_SUPPORT&&!ke?btoa(Ue):this.encodeByteArray(Me(Ue),ke)},decodeString(Ue,ke){return this.HAS_NATIVE_SUPPORT&&!ke?atob(Ue):function(Ue){const ke=[];let et=0,Fe=0;for(;et<Ue.length;){const ve=Ue[et++];if(ve<128)ke[Fe++]=String.fromCharCode(ve);else if(ve>191&&ve<224){const Pe=Ue[et++];ke[Fe++]=String.fromCharCode((31&ve)<<6|63&Pe)}else if(ve>239&&ve<365){const Un=((7&ve)<<18|(63&Ue[et++])<<12|(63&Ue[et++])<<6|63&Ue[et++])-65536;ke[Fe++]=String.fromCharCode(55296+(Un>>10)),ke[Fe++]=String.fromCharCode(56320+(1023&Un))}else{const Pe=Ue[et++],vt=Ue[et++];ke[Fe++]=String.fromCharCode((15&ve)<<12|(63&Pe)<<6|63&vt)}}return ke.join("")}(this.decodeStringToByteArray(Ue,ke))},decodeStringToByteArray(Ue,ke){this.init_();const et=ke?this.charToByteMapWebSafe_:this.charToByteMap_,Fe=[];for(let ve=0;ve<Ue.length;){const Pe=et[Ue.charAt(ve++)],qt=ve<Ue.length?et[Ue.charAt(ve)]:0;++ve;const Sn=ve<Ue.length?et[Ue.charAt(ve)]:64;++ve;const En=ve<Ue.length?et[Ue.charAt(ve)]:64;if(++ve,null==Pe||null==qt||null==Sn||null==En)throw Error();Fe.push(Pe<<2|qt>>4),64!==Sn&&(Fe.push(qt<<4&240|Sn>>2),64!==En&&Fe.push(Sn<<6&192|En))}return Fe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Ue=0;Ue<this.ENCODED_VALS.length;Ue++)this.byteToCharMap_[Ue]=this.ENCODED_VALS.charAt(Ue),this.charToByteMap_[this.byteToCharMap_[Ue]]=Ue,this.byteToCharMapWebSafe_[Ue]=this.ENCODED_VALS_WEBSAFE.charAt(Ue),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Ue]]=Ue,Ue>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Ue)]=Ue,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Ue)]=Ue)}}},ne=function(Ue){const ke=Me(Ue);return _e.encodeByteArray(ke,!0)},V=function(Ue){return ne(Ue).replace(/\./g,"")},Ie=function(Ue){try{return _e.decodeString(Ue,!0)}catch(ke){console.error("base64Decode failed: ",ke)}return null};function ie(Ue){return ae(void 0,Ue)}function ae(Ue,ke){if(!(ke instanceof Object))return ke;switch(ke.constructor){case Date:return new Date(ke.getTime());case Object:void 0===Ue&&(Ue={});break;case Array:Ue=[];break;default:return ke}for(const et in ke)!ke.hasOwnProperty(et)||!Ne(et)||(Ue[et]=ae(Ue[et],ke[et]));return Ue}function Ne(Ue){return"__proto__"!==Ue}function le(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ee(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(le())}function at(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Ue){return!1}}function xe(){return"object"==typeof self&&self.self===self}function Oe(){const Ue="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Ue&&void 0!==Ue.id}function Ye(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function $e(){const Ue=le();return Ue.indexOf("MSIE ")>=0||Ue.indexOf("Trident/")>=0}function gt(){return!1}function ct(){return!at()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bt(){return"object"==typeof indexedDB}function E(){return new Promise((Ue,ke)=>{try{let et=!0;const Fe="validate-browser-context-for-indexeddb-analytics-module",ve=self.indexedDB.open(Fe);ve.onsuccess=()=>{ve.result.close(),et||self.indexedDB.deleteDatabase(Fe),Ue(!0)},ve.onupgradeneeded=()=>{et=!1},ve.onerror=()=>{var Pe;ke((null===(Pe=ve.error)||void 0===Pe?void 0:Pe.message)||"")}}catch(et){ke(et)}})}function We(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const qe=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const Ue=process.env.__FIREBASE_DEFAULTS__;return Ue?JSON.parse(Ue):void 0})()||(()=>{if("undefined"==typeof document)return;let Ue;try{Ue=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(et){return}const ke=Ue&&Ie(Ue[1]);return ke&&JSON.parse(ke)})()}catch(Ue){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Ue}`)}},Ve=Ue=>{var ke,et;return null===(et=null===(ke=qe())||void 0===ke?void 0:ke.emulatorHosts)||void 0===et?void 0:et[Ue]},ot=Ue=>{const ke=Ve(Ue);if(!ke)return;const et=ke.lastIndexOf(":");if(et<=0||et+1===ke.length)throw new Error(`Invalid host ${ke} with no separate hostname and port!`);const Fe=parseInt(ke.substring(et+1),10);return"["===ke[0]?[ke.substring(1,et-1),Fe]:[ke.substring(0,et),Fe]},je=()=>{var Ue;return null===(Ue=qe())||void 0===Ue?void 0:Ue.config},Ae=Ue=>{var ke;return null===(ke=qe())||void 0===ke?void 0:ke[`_${Ue}`]};class ze{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ke,et)=>{this.resolve=ke,this.reject=et})}wrapCallback(ke){return(et,Fe)=>{et?this.reject(et):this.resolve(Fe),"function"==typeof ke&&(this.promise.catch(()=>{}),1===ke.length?ke(et):ke(et,Fe))}}}function nt(Ue,ke){if(Ue.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Fe=ke||"demo-project",ve=Ue.iat||0,Pe=Ue.sub||Ue.user_id;if(!Pe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const vt=Object.assign({iss:`https://securetoken.google.com/${Fe}`,aud:Fe,iat:ve,exp:ve+3600,auth_time:ve,sub:Pe,user_id:Pe,firebase:{sign_in_provider:"custom",identities:{}}},Ue);return[V(JSON.stringify({alg:"none",type:"JWT"})),V(JSON.stringify(vt)),""].join(".")}class mt extends Error{constructor(ke,et,Fe){super(et),this.code=ke,this.customData=Fe,this.name="FirebaseError",Object.setPrototypeOf(this,mt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ot.prototype.create)}}class Ot{constructor(ke,et,Fe){this.service=ke,this.serviceName=et,this.errors=Fe}create(ke,...et){const Fe=et[0]||{},ve=`${this.service}/${ke}`,Pe=this.errors[ke],vt=Pe?function(Ue,ke){return Ue.replace(sn,(et,Fe)=>{const ve=ke[Fe];return null!=ve?String(ve):`<${Fe}?>`})}(Pe,Fe):"Error";return new mt(ve,`${this.serviceName}: ${vt} (${ve}).`,Fe)}}const sn=/\{\$([^}]+)}/g;function Ft(Ue){return JSON.parse(Ue)}function Cn(Ue){return JSON.stringify(Ue)}const rr=function(Ue){let ke={},et={},Fe={},ve="";try{const Pe=Ue.split(".");ke=Ft(Ie(Pe[0])||""),et=Ft(Ie(Pe[1])||""),ve=Pe[2],Fe=et.d||{},delete et.d}catch(Pe){}return{header:ke,claims:et,data:Fe,signature:ve}},dr=function(Ue){const et=rr(Ue).claims;return!!et&&"object"==typeof et&&et.hasOwnProperty("iat")},br=function(Ue){const ke=rr(Ue).claims;return"object"==typeof ke&&!0===ke.admin};function Qn(Ue,ke){return Object.prototype.hasOwnProperty.call(Ue,ke)}function wt(Ue,ke){if(Object.prototype.hasOwnProperty.call(Ue,ke))return Ue[ke]}function an(Ue){for(const ke in Ue)if(Object.prototype.hasOwnProperty.call(Ue,ke))return!1;return!0}function jn(Ue,ke,et){const Fe={};for(const ve in Ue)Object.prototype.hasOwnProperty.call(Ue,ve)&&(Fe[ve]=ke.call(et,Ue[ve],ve,Ue));return Fe}function tr(Ue,ke){if(Ue===ke)return!0;const et=Object.keys(Ue),Fe=Object.keys(ke);for(const ve of et){if(!Fe.includes(ve))return!1;const Pe=Ue[ve],vt=ke[ve];if(On(Pe)&&On(vt)){if(!tr(Pe,vt))return!1}else if(Pe!==vt)return!1}for(const ve of Fe)if(!et.includes(ve))return!1;return!0}function On(Ue){return null!==Ue&&"object"==typeof Ue}function si(Ue){const ke=[];for(const[et,Fe]of Object.entries(Ue))Array.isArray(Fe)?Fe.forEach(ve=>{ke.push(encodeURIComponent(et)+"="+encodeURIComponent(ve))}):ke.push(encodeURIComponent(et)+"="+encodeURIComponent(Fe));return ke.length?"&"+ke.join("&"):""}function Rr(Ue){const ke={};return Ue.replace(/^\?/,"").split("&").forEach(Fe=>{if(Fe){const[ve,Pe]=Fe.split("=");ke[decodeURIComponent(ve)]=decodeURIComponent(Pe)}}),ke}function vn(Ue){const ke=Ue.indexOf("?");if(!ke)return"";const et=Ue.indexOf("#",ke);return Ue.substring(ke,et>0?et:void 0)}class Fr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let ke=1;ke<this.blockSize;++ke)this.pad_[ke]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(ke,et){et||(et=0);const Fe=this.W_;if("string"==typeof ke)for(let En=0;En<16;En++)Fe[En]=ke.charCodeAt(et)<<24|ke.charCodeAt(et+1)<<16|ke.charCodeAt(et+2)<<8|ke.charCodeAt(et+3),et+=4;else for(let En=0;En<16;En++)Fe[En]=ke[et]<<24|ke[et+1]<<16|ke[et+2]<<8|ke[et+3],et+=4;for(let En=16;En<80;En++){const vr=Fe[En-3]^Fe[En-8]^Fe[En-14]^Fe[En-16];Fe[En]=4294967295&(vr<<1|vr>>>31)}let Sn,ir,ve=this.chain_[0],Pe=this.chain_[1],vt=this.chain_[2],qt=this.chain_[3],Un=this.chain_[4];for(let En=0;En<80;En++){En<40?En<20?(Sn=qt^Pe&(vt^qt),ir=1518500249):(Sn=Pe^vt^qt,ir=1859775393):En<60?(Sn=Pe&vt|qt&(Pe|vt),ir=2400959708):(Sn=Pe^vt^qt,ir=3395469782);const vr=(ve<<5|ve>>>27)+Sn+Un+ir+Fe[En]&4294967295;Un=qt,qt=vt,vt=4294967295&(Pe<<30|Pe>>>2),Pe=ve,ve=vr}this.chain_[0]=this.chain_[0]+ve&4294967295,this.chain_[1]=this.chain_[1]+Pe&4294967295,this.chain_[2]=this.chain_[2]+vt&4294967295,this.chain_[3]=this.chain_[3]+qt&4294967295,this.chain_[4]=this.chain_[4]+Un&4294967295}update(ke,et){if(null==ke)return;void 0===et&&(et=ke.length);const Fe=et-this.blockSize;let ve=0;const Pe=this.buf_;let vt=this.inbuf_;for(;ve<et;){if(0===vt)for(;ve<=Fe;)this.compress_(ke,ve),ve+=this.blockSize;if("string"==typeof ke){for(;ve<et;)if(Pe[vt]=ke.charCodeAt(ve),++vt,++ve,vt===this.blockSize){this.compress_(Pe),vt=0;break}}else for(;ve<et;)if(Pe[vt]=ke[ve],++vt,++ve,vt===this.blockSize){this.compress_(Pe),vt=0;break}}this.inbuf_=vt,this.total_+=et}digest(){const ke=[];let et=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ve=this.blockSize-1;ve>=56;ve--)this.buf_[ve]=255&et,et/=256;this.compress_(this.buf_);let Fe=0;for(let ve=0;ve<5;ve++)for(let Pe=24;Pe>=0;Pe-=8)ke[Fe]=this.chain_[ve]>>Pe&255,++Fe;return ke}}function Yr(Ue,ke){const et=new Br(Ue,ke);return et.subscribe.bind(et)}class Br{constructor(ke,et){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=et,this.task.then(()=>{ke(this)}).catch(Fe=>{this.error(Fe)})}next(ke){this.forEachObserver(et=>{et.next(ke)})}error(ke){this.forEachObserver(et=>{et.error(ke)}),this.close(ke)}complete(){this.forEachObserver(ke=>{ke.complete()}),this.close()}subscribe(ke,et,Fe){let ve;if(void 0===ke&&void 0===et&&void 0===Fe)throw new Error("Missing Observer.");ve=function(Ue,ke){if("object"!=typeof Ue||null===Ue)return!1;for(const et of["next","error","complete"])if(et in Ue&&"function"==typeof Ue[et])return!0;return!1}(ke)?ke:{next:ke,error:et,complete:Fe},void 0===ve.next&&(ve.next=ft),void 0===ve.error&&(ve.error=ft),void 0===ve.complete&&(ve.complete=ft);const Pe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ve.error(this.finalError):ve.complete()}catch(vt){}}),this.observers.push(ve),Pe}unsubscribeOne(ke){void 0===this.observers||void 0===this.observers[ke]||(delete this.observers[ke],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ke){if(!this.finalized)for(let et=0;et<this.observers.length;et++)this.sendOne(et,ke)}sendOne(ke,et){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ke])try{et(this.observers[ke])}catch(Fe){"undefined"!=typeof console&&console.error&&console.error(Fe)}})}close(ke){this.finalized||(this.finalized=!0,void 0!==ke&&(this.finalError=ke),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ft(){}function Tr(Ue,ke){return`${Ue} failed: ${ke} argument `}const hr=function(Ue){const ke=[];let et=0;for(let Fe=0;Fe<Ue.length;Fe++){let ve=Ue.charCodeAt(Fe);if(ve>=55296&&ve<=56319){const Pe=ve-55296;Fe++,A(Fe<Ue.length,"Surrogate pair missing trail surrogate."),ve=65536+(Pe<<10)+(Ue.charCodeAt(Fe)-56320)}ve<128?ke[et++]=ve:ve<2048?(ke[et++]=ve>>6|192,ke[et++]=63&ve|128):ve<65536?(ke[et++]=ve>>12|224,ke[et++]=ve>>6&63|128,ke[et++]=63&ve|128):(ke[et++]=ve>>18|240,ke[et++]=ve>>12&63|128,ke[et++]=ve>>6&63|128,ke[et++]=63&ve|128)}return ke},fr=function(Ue){let ke=0;for(let et=0;et<Ue.length;et++){const Fe=Ue.charCodeAt(et);Fe<128?ke++:Fe<2048?ke+=2:Fe>=55296&&Fe<=56319?(ke+=4,et++):ke+=3}return ke};function Gt(Ue,ke=1e3,et=2){const Fe=ke*Math.pow(et,Ue),ve=Math.round(.5*Fe*(Math.random()-.5)*2);return Math.min(144e5,Fe+ve)}function un(Ue){return Ue&&Ue._delegate?Ue._delegate:Ue}},8945:(Xt,it,L)=>{"use strict";function ce(w,k,T,Z){var Ut,pe=arguments.length,ht=pe<3?k:null===Z?Z=Object.getOwnPropertyDescriptor(k,T):Z;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)ht=Reflect.decorate(w,k,T,Z);else for(var on=w.length-1;on>=0;on--)(Ut=w[on])&&(ht=(pe<3?Ut(ht):pe>3?Ut(k,T,ht):Ut(k,T))||ht);return pe>3&&ht&&Object.defineProperty(k,T,ht),ht}function _e(w,k){return function(T,Z){k(T,Z,w)}}function V(w,k,T,Z){return new(T||(T=Promise))(function(ht,Ut){function on(Wr){try{Ln(Z.next(Wr))}catch(vi){Ut(vi)}}function $n(Wr){try{Ln(Z.throw(Wr))}catch(vi){Ut(vi)}}function Ln(Wr){Wr.done?ht(Wr.value):function(ht){return ht instanceof T?ht:new T(function(Ut){Ut(ht)})}(Wr.value).then(on,$n)}Ln((Z=Z.apply(w,k||[])).next())})}L.d(it,{Br:()=>Ai,w:()=>yn,dr:()=>Mr,oU:()=>Mn,cs:()=>so,YG:()=>Wi,Sm:()=>Jr,W2:()=>Di,Gu:()=>Qe,gu:()=>Xe,pK:()=>Qt,Ie:()=>fn,u8:()=>ur,IK:()=>Gi,td:()=>di,Q$:()=>bi,q_:()=>_i,z0:()=>Zr,fG:()=>is,uN:()=>It,I_:()=>pa,jP:()=>Gs,t9:()=>Ls,n0:()=>ji,PQ:()=>po,g2:()=>Vs,wd:()=>vs,ho:()=>ls,sr:()=>oi,Pc:()=>go,r4:()=>Ka,HT:()=>xi,t4:()=>vt,QI:()=>Fe,j9:()=>Pe});var E=L(3018),We=L(665),_t=L(8583),Te=L(5496),he=L(7235),Ve=(L(7689),L(5392),L(7807)),ot=L(9461),je=L(7585),Ae=L(1567),ze=L(4425),nt=L(6951),st=L(3291),Ot=(L(960),L(3150)),Rn=L(8891),hn=L(9796),dr=L(9105),br=L(8002);function wt(w,k,T,Z){return(0,dr.m)(T)&&(Z=T,T=void 0),Z?wt(w,k,T).pipe((0,br.U)(pe=>(0,hn.k)(pe)?Z(...pe):Z(pe))):new Rn.y(pe=>{an(w,k,function(Ut){pe.next(arguments.length>1?Array.prototype.slice.call(arguments):Ut)},pe,T)})}function an(w,k,T,Z,pe){let ht;if(function(w){return w&&"function"==typeof w.addEventListener&&"function"==typeof w.removeEventListener}(w)){const Ut=w;w.addEventListener(k,T,pe),ht=()=>Ut.removeEventListener(k,T,pe)}else if(function(w){return w&&"function"==typeof w.on&&"function"==typeof w.off}(w)){const Ut=w;w.on(k,T),ht=()=>Ut.off(k,T)}else if(function(w){return w&&"function"==typeof w.addListener&&"function"==typeof w.removeListener}(w)){const Ut=w;w.addListener(k,T),ht=()=>Ut.removeListener(k,T)}else{if(!w||!w.length)throw new TypeError("Invalid event target");for(let Ut=0,on=w.length;Ut<on;Ut++)an(w[Ut],k,T,Z,pe)}Z.add(ht)}var Nn=L(9765),si=L(6215),Rr=L(5435),vn=L(3190),Fr=L(7519);const Br=je.i,ft=["*"],bn=w=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(w):"function"==typeof requestAnimationFrame?requestAnimationFrame(w):setTimeout(w);let gn=(()=>{class w{constructor(T,Z){this.injector=T,this.el=Z,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(T){this.el.nativeElement.value=this.lastValue=null==T?"":T,hr(this.el)}handleChangeEvent(T,Z){T===this.el.nativeElement&&(Z!==this.lastValue&&(this.lastValue=Z,this.onChange(Z)),hr(this.el))}_handleBlurEvent(T){T===this.el.nativeElement&&(this.onTouched(),hr(this.el))}registerOnChange(T){this.onChange=T}registerOnTouched(T){this.onTouched=T}setDisabledState(T){this.el.nativeElement.disabled=T}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let T;try{T=this.injector.get(We.a5)}catch(pe){}if(!T)return;T.statusChanges&&(this.statusChanges=T.statusChanges.subscribe(()=>hr(this.el)));const Z=T.control;Z&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(ht=>{if(Z[ht]){const Ut=Z[ht].bind(Z);Z[ht]=(...on)=>{Ut(...on),hr(this.el)}}})}}return w.\u0275fac=function(T){E.$Z()},w.\u0275dir=E.lG2({type:w,hostBindings:function(T,Z){1&T&&E.NdJ("ionBlur",function(ht){return Z._handleBlurEvent(ht.target)})}}),ce([(0,E.L6J)("ionBlur",["$event.target"])],w.prototype,"_handleBlurEvent",null),w})();const hr=w=>{bn(()=>{const k=w.nativeElement,T=fr(k);Dn(k,T);const Z=k.closest("ion-item");Z&&Dn(Z,T)})},fr=w=>{const k=w.classList,T=[];for(let Z=0;Z<k.length;Z++){const pe=k.item(Z);null!==pe&&mn(pe,"ng-")&&T.push(`ion-${pe.substr(3)}`)}return T},Dn=(w,k)=>{const T=w.classList;["ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"].forEach(Z=>T.remove(Z)),k.forEach(Z=>T.add(Z))},mn=(w,k)=>w.substr(0,k.length)===k;var Gt;let yn=Gt=class extends gn{constructor(k,T){super(k,T)}writeValue(k){this.el.nativeElement.checked=this.lastValue=null!=k&&k,hr(this.el)}_handleIonChange(k){this.handleChangeEvent(k,k.checked)}};var rn;yn.\u0275fac=function(k){return new(k||yn)(E.Y36(E.zs3),E.Y36(E.SBq))},yn.\u0275dir=E.lG2({type:yn,selectors:[["ion-checkbox"],["ion-toggle"]],hostBindings:function(k,T){1&k&&E.NdJ("ionChange",function(pe){return T._handleIonChange(pe.target)})},features:[E._Bn([{provide:We.JU,useExisting:Gt,multi:!0}]),E.qOj]}),yn.ctorParameters=()=>[{type:E.zs3},{type:E.SBq}],ce([(0,E.L6J)("ionChange",["$event.target"])],yn.prototype,"_handleIonChange",null);let un=rn=class extends gn{constructor(k,T){super(k,T)}_handleIonChange(k){this.handleChangeEvent(k,k.value)}registerOnChange(k){super.registerOnChange(T=>{k(""===T?null:parseFloat(T))})}};var Ue;un.\u0275fac=function(k){return new(k||un)(E.Y36(E.zs3),E.Y36(E.SBq))},un.\u0275dir=E.lG2({type:un,selectors:[["ion-input","type","number"]],hostBindings:function(k,T){1&k&&E.NdJ("ionChange",function(pe){return T._handleIonChange(pe.target)})},features:[E._Bn([{provide:We.JU,useExisting:rn,multi:!0}]),E.qOj]}),un.ctorParameters=()=>[{type:E.zs3},{type:E.SBq}],ce([(0,E.L6J)("ionChange",["$event.target"])],un.prototype,"_handleIonChange",null);let ke=Ue=class extends gn{constructor(k,T){super(k,T)}_handleIonSelect(k){this.handleChangeEvent(k,k.checked)}};var et;ke.\u0275fac=function(k){return new(k||ke)(E.Y36(E.zs3),E.Y36(E.SBq))},ke.\u0275dir=E.lG2({type:ke,selectors:[["ion-radio"]],hostBindings:function(k,T){1&k&&E.NdJ("ionSelect",function(pe){return T._handleIonSelect(pe.target)})},features:[E._Bn([{provide:We.JU,useExisting:Ue,multi:!0}]),E.qOj]}),ke.ctorParameters=()=>[{type:E.zs3},{type:E.SBq}],ce([(0,E.L6J)("ionSelect",["$event.target"])],ke.prototype,"_handleIonSelect",null);let Fe=et=class extends gn{constructor(k,T){super(k,T)}_handleChangeEvent(k){this.handleChangeEvent(k,k.value)}};var ve;Fe.\u0275fac=function(k){return new(k||Fe)(E.Y36(E.zs3),E.Y36(E.SBq))},Fe.\u0275dir=E.lG2({type:Fe,selectors:[["ion-range"],["ion-select"],["ion-radio-group"],["ion-segment"],["ion-datetime"]],hostBindings:function(k,T){1&k&&E.NdJ("ionChange",function(pe){return T._handleChangeEvent(pe.target)})},features:[E._Bn([{provide:We.JU,useExisting:et,multi:!0}]),E.qOj]}),Fe.ctorParameters=()=>[{type:E.zs3},{type:E.SBq}],ce([(0,E.L6J)("ionChange",["$event.target"])],Fe.prototype,"_handleChangeEvent",null);let Pe=ve=class extends gn{constructor(k,T){super(k,T)}_handleInputEvent(k){this.handleChangeEvent(k,k.value)}};Pe.\u0275fac=function(k){return new(k||Pe)(E.Y36(E.zs3),E.Y36(E.SBq))},Pe.\u0275dir=E.lG2({type:Pe,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(k,T){1&k&&E.NdJ("ionChange",function(pe){return T._handleInputEvent(pe.target)})},features:[E._Bn([{provide:We.JU,useExisting:ve,multi:!0}]),E.qOj]}),Pe.ctorParameters=()=>[{type:E.zs3},{type:E.SBq}],ce([(0,E.L6J)("ionChange",["$event.target"])],Pe.prototype,"_handleInputEvent",null);let vt=class{constructor(k,T){this.doc=k,this.backButton=new Nn.xQ,this.keyboardDidShow=new Nn.xQ,this.keyboardDidHide=new Nn.xQ,this.pause=new Nn.xQ,this.resume=new Nn.xQ,this.resize=new Nn.xQ,T.run(()=>{let Z;this.win=k.defaultView,this.backButton.subscribeWithPriority=function(pe,ht){return this.subscribe(Ut=>Ut.register(pe,on=>T.run(()=>ht(on))))},Sn(this.pause,k,"pause"),Sn(this.resume,k,"resume"),Sn(this.backButton,k,"ionBackButton"),Sn(this.resize,this.win,"resize"),Sn(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),Sn(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(pe=>{Z=pe}),this.win&&this.win.cordova?k.addEventListener("deviceready",()=>{Z("cordova")},{once:!0}):Z("dom")})}is(k){return(0,je.a)(this.win,k)}platforms(){return(0,je.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(k){return qt(this.win.location.href,k)}isLandscape(){return!this.isPortrait()}isPortrait(){return this.win.matchMedia&&this.win.matchMedia("(orientation: portrait)").matches}testUserAgent(k){const T=this.win.navigator;return!!(T&&T.userAgent&&T.userAgent.indexOf(k)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}};vt.\u0275fac=function(k){return new(k||vt)(E.LFG(_t.K0),E.LFG(E.R0b))},vt.\u0275prov=E.Yz7({token:vt,factory:function(w){return vt.\u0275fac(w)},providedIn:"root"}),vt.ngInjectableDef=(0,E.Yz7)({factory:function(){return new vt((0,E.LFG)(_t.K0),(0,E.LFG)(E.R0b))},token:vt,providedIn:"root"}),vt=ce([_e(0,(0,E.tBr)(_t.K0))],vt);const qt=(w,k)=>{k=k.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");const Z=new RegExp("[\\?&]"+k+"=([^&#]*)").exec(w);return Z?decodeURIComponent(Z[1].replace(/\+/g," ")):null},Sn=(w,k,T)=>{k&&k.addEventListener(T,Z=>{w.next(null!=Z?Z.detail:void 0)})};let En=class{constructor(k,T,Z,pe){this.location=T,this.serializer=Z,this.router=pe,this.direction=At,this.animated=jt,this.guessDirection="forward",this.lastNavId=-1,pe&&pe.events.subscribe(ht=>{if(ht instanceof Te.OD){const Ut=ht.restoredState?ht.restoredState.navigationId:ht.id;this.guessDirection=Ut<this.lastNavId?"back":"forward",this.guessAnimation=ht.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?ht.id:Ut}}),k.backButton.subscribeWithPriority(0,ht=>{this.pop(),ht()})}navigateForward(k,T={}){return this.setDirection("forward",T.animated,T.animationDirection,T.animation),this.navigate(k,T)}navigateBack(k,T={}){return this.setDirection("back",T.animated,T.animationDirection,T.animation),this.navigate(k,T)}navigateRoot(k,T={}){return this.setDirection("root",T.animated,T.animationDirection,T.animation),this.navigate(k,T)}back(k={animated:!0,animationDirection:"back"}){return this.setDirection("back",k.animated,k.animationDirection,k.animation),this.location.back()}pop(){return V(this,void 0,void 0,function*(){let k=this.topOutlet;for(;k&&!(yield k.pop());)k=k.parentOutlet})}setDirection(k,T,Z,pe){this.direction=k,this.animated=vr(k,T,Z),this.animationBuilder=pe}setTopOutlet(k){this.topOutlet=k}consumeTransition(){let T,k="root";const Z=this.animationBuilder;return"auto"===this.direction?(k=this.guessDirection,T=this.guessAnimation):(T=this.animated,k=this.direction),this.direction=At,this.animated=jt,this.animationBuilder=void 0,{direction:k,animation:T,animationBuilder:Z}}navigate(k,T){if(Array.isArray(k))return this.router.navigate(k,T);{const Z=this.serializer.parse(k.toString());return void 0!==T.queryParams&&(Z.queryParams=Object.assign({},T.queryParams)),void 0!==T.fragment&&(Z.fragment=T.fragment),this.router.navigateByUrl(Z,T)}}};En.\u0275fac=function(k){return new(k||En)(E.LFG(vt),E.LFG(_t.Ye),E.LFG(Te.Hx),E.LFG(Te.F0,8))},En.\u0275prov=E.Yz7({token:En,factory:function(w){return En.\u0275fac(w)},providedIn:"root"}),En.ngInjectableDef=(0,E.Yz7)({factory:function(){return new En((0,E.LFG)(vt),(0,E.LFG)(_t.Ye),(0,E.LFG)(Te.Hx),(0,E.LFG)(Te.F0,8))},token:En,providedIn:"root"}),En=ce([_e(3,(0,E.FiY)())],En);const vr=(w,k,T)=>{if(!1!==k){if(void 0!==T)return T;if("forward"===w||"back"===w)return w;if("root"===w&&!0===k)return"forward"}},At="auto",jt=void 0,Hn=(w,k)=>{const T=w.prototype;k.forEach(Z=>{Object.defineProperty(T,Z,{get(){return this.el[Z]},set(pe){this.z.runOutsideAngular(()=>this.el[Z]=pe)}})})},sr=(w,k)=>{const T=w.prototype;k.forEach(Z=>{T[Z]=function(){const pe=arguments;return this.z.runOutsideAngular(()=>this.el[Z].apply(this.el,pe))}})},qn=(w,k,T)=>{T.forEach(Z=>w[Z]=wt(k,Z))};function ln(w){return function(T){return w.inputs&&Hn(T,w.inputs),w.methods&&sr(T,w.methods),T}}let Mr=(()=>{let w=class{constructor(T,Z,pe){this.z=pe,T.detach(),this.el=Z.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-app"]],ngContentSelectors:ft,decls:1,vars:0,template:function(T,Z){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w})(),Mn=(()=>{let w=class{constructor(T,Z,pe){this.z=pe,T.detach(),this.el=Z.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-back-button"]],inputs:{color:"color",defaultHref:"defaultHref",disabled:"disabled",icon:"icon",mode:"mode",routerAnimation:"routerAnimation",text:"text",type:"type"},ngContentSelectors:ft,decls:1,vars:0,template:function(T,Z){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ce([ln({inputs:["color","defaultHref","disabled","icon","mode","routerAnimation","text","type"]})],w),w})(),Wi=(()=>{let w=class{constructor(T,Z,pe){this.z=pe,T.detach(),this.el=Z.nativeElement,qn(this,this.el,["ionFocus","ionBlur"])}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:ft,decls:1,vars:0,template:function(T,Z){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ce([ln({inputs:["buttonType","color","disabled","download","expand","fill","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],w),w})(),Jr=(()=>{let w=class{constructor(T,Z,pe){this.z=pe,T.detach(),this.el=Z.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},ngContentSelectors:ft,decls:1,vars:0,template:function(T,Z){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ce([ln({inputs:["collapse"]})],w),w})(),Di=(()=>{let w=class{constructor(T,Z,pe){this.z=pe,T.detach(),this.el=Z.nativeElement,qn(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:ft,decls:1,vars:0,template:function(T,Z){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ce([ln({inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],w),w})(),Qe=(()=>{let w=class{constructor(T,Z,pe){this.z=pe,T.detach(),this.el=Z.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:ft,decls:1,vars:0,template:function(T,Z){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ce([ln({inputs:["collapse","mode","translucent"]})],w),w})(),Xe=(()=>{let w=class{constructor(T,Z,pe){this.z=pe,T.detach(),this.el=Z.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-icon"]],inputs:{ariaHidden:"ariaHidden",ariaLabel:"ariaLabel",color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:ft,decls:1,vars:0,template:function(T,Z){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ce([ln({inputs:["ariaHidden","ariaLabel","color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],w),w})(),Qt=(()=>{let w=class{constructor(T,Z,pe){this.z=pe,T.detach(),this.el=Z.nativeElement,qn(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:ft,decls:1,vars:0,template:function(T,Z){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ce([ln({inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","debounce","disabled","enterkeyhint","inputmode","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],w),w})(),fn=(()=>{let w=class{constructor(T,Z,pe){this.z=pe,T.detach(),this.el=Z.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-item"]],inputs:{button:"button",color:"color",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:ft,decls:1,vars:0,template:function(T,Z){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ce([ln({inputs:["button","color","detail","detailIcon","disabled","download","href","lines","mode","rel","routerAnimation","routerDirection","target","type"]})],w),w})(),ur=(()=>{let w=class{constructor(T,Z,pe){this.z=pe,T.detach(),this.el=Z.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-item-option"]],inputs:{color:"color",disabled:"disabled",download:"download",expandable:"expandable",href:"href",mode:"mode",rel:"rel",target:"target",type:"type"},ngContentSelectors:ft,decls:1,vars:0,template:function(T,Z){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ce([ln({inputs:["color","disabled","download","expandable","href","mode","rel","target","type"]})],w),w})(),Gi=(()=>{let w=class{constructor(T,Z,pe){this.z=pe,T.detach(),this.el=Z.nativeElement,qn(this,this.el,["ionSwipe"])}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-item-options"]],inputs:{side:"side"},ngContentSelectors:ft,decls:1,vars:0,template:function(T,Z){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ce([ln({inputs:["side"]})],w),w})(),di=(()=>{let w=class{constructor(T,Z,pe){this.z=pe,T.detach(),this.el=Z.nativeElement,qn(this,this.el,["ionDrag"])}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-item-sliding"]],inputs:{disabled:"disabled"},ngContentSelectors:ft,decls:1,vars:0,template:function(T,Z){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ce([ln({inputs:["disabled"],methods:["getOpenAmount","getSlidingRatio","open","close","closeOpened"]})],w),w})(),bi=(()=>{let w=class{constructor(T,Z,pe){this.z=pe,T.detach(),this.el=Z.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:ft,decls:1,vars:0,template:function(T,Z){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ce([ln({inputs:["color","mode","position"]})],w),w})(),_i=(()=>{let w=class{constructor(T,Z,pe){this.z=pe,T.detach(),this.el=Z.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:ft,decls:1,vars:0,template:function(T,Z){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ce([ln({inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],w),w})(),Zr=(()=>{let w=class{constructor(T,Z,pe){this.z=pe,T.detach(),this.el=Z.nativeElement,qn(this,this.el,["ionWillOpen","ionWillClose","ionDidOpen","ionDidClose"])}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-menu"]],inputs:{contentId:"contentId",disabled:"disabled",maxEdgeStart:"maxEdgeStart",menuId:"menuId",side:"side",swipeGesture:"swipeGesture",type:"type"},ngContentSelectors:ft,decls:1,vars:0,template:function(T,Z){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ce([ln({inputs:["contentId","disabled","maxEdgeStart","menuId","side","swipeGesture","type"],methods:["isOpen","isActive","open","close","toggle","setOpen"]})],w),w})(),is=(()=>{let w=class{constructor(T,Z,pe){this.z=pe,T.detach(),this.el=Z.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-menu-button"]],inputs:{autoHide:"autoHide",color:"color",disabled:"disabled",menu:"menu",mode:"mode",type:"type"},ngContentSelectors:ft,decls:1,vars:0,template:function(T,Z){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ce([ln({inputs:["autoHide","color","disabled","menu","mode","type"]})],w),w})(),It=(()=>{let w=class{constructor(T,Z,pe){this.z=pe,T.detach(),this.el=Z.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-note"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:ft,decls:1,vars:0,template:function(T,Z){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ce([ln({inputs:["color","mode"]})],w),w})(),pa=(()=>{let w=class{constructor(T,Z,pe){this.z=pe,T.detach(),this.el=Z.nativeElement,qn(this,this.el,["ionChange","ionFocus","ionBlur"])}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-range"]],inputs:{color:"color",debounce:"debounce",disabled:"disabled",dualKnobs:"dualKnobs",max:"max",min:"min",mode:"mode",name:"name",pin:"pin",snaps:"snaps",step:"step",ticks:"ticks",value:"value"},ngContentSelectors:ft,decls:1,vars:0,template:function(T,Z){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ce([ln({inputs:["color","debounce","disabled","dualKnobs","max","min","mode","name","pin","snaps","step","ticks","value"]})],w),w})(),Ls=(()=>{let w=class{constructor(T,Z,pe){this.z=pe,T.detach(),this.el=Z.nativeElement,qn(this,this.el,["ionChange","ionCancel","ionFocus","ionBlur"])}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-select"]],inputs:{cancelText:"cancelText",compareWith:"compareWith",disabled:"disabled",interface:"interface",interfaceOptions:"interfaceOptions",mode:"mode",multiple:"multiple",name:"name",okText:"okText",placeholder:"placeholder",selectedText:"selectedText",value:"value"},ngContentSelectors:ft,decls:1,vars:0,template:function(T,Z){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ce([ln({inputs:["cancelText","compareWith","disabled","interface","interfaceOptions","mode","multiple","name","okText","placeholder","selectedText","value"],methods:["open"]})],w),w})(),ji=(()=>{let w=class{constructor(T,Z,pe){this.z=pe,T.detach(),this.el=Z.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-select-option"]],inputs:{disabled:"disabled",value:"value"},ngContentSelectors:ft,decls:1,vars:0,template:function(T,Z){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ce([ln({inputs:["disabled","value"]})],w),w})(),po=(()=>{let w=class{constructor(T,Z,pe){this.z=pe,T.detach(),this.el=Z.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-spinner"]],inputs:{color:"color",duration:"duration",name:"name",paused:"paused"},ngContentSelectors:ft,decls:1,vars:0,template:function(T,Z){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ce([ln({inputs:["color","duration","name","paused"]})],w),w})(),Vs=(()=>{let w=class{constructor(T,Z,pe){this.z=pe,T.detach(),this.el=Z.nativeElement,qn(this,this.el,["ionChange","ionInput","ionBlur","ionFocus"])}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-textarea"]],inputs:{autoGrow:"autoGrow",autocapitalize:"autocapitalize",autofocus:"autofocus",clearOnEdit:"clearOnEdit",color:"color",cols:"cols",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",maxlength:"maxlength",minlength:"minlength",mode:"mode",name:"name",placeholder:"placeholder",readonly:"readonly",required:"required",rows:"rows",spellcheck:"spellcheck",value:"value",wrap:"wrap"},ngContentSelectors:ft,decls:1,vars:0,template:function(T,Z){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ce([ln({inputs:["autoGrow","autocapitalize","autofocus","clearOnEdit","color","cols","debounce","disabled","enterkeyhint","inputmode","maxlength","minlength","mode","name","placeholder","readonly","required","rows","spellcheck","value","wrap"],methods:["setFocus","getInputElement"]})],w),w})(),vs=(()=>{let w=class{constructor(T,Z,pe){this.z=pe,T.detach(),this.el=Z.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:ft,decls:1,vars:0,template:function(T,Z){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ce([ln({inputs:["color","size"]})],w),w})(),ls=(()=>{let w=class{constructor(T,Z,pe){this.z=pe,T.detach(),this.el=Z.nativeElement,qn(this,this.el,["ionChange","ionFocus","ionBlur"])}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-toggle"]],inputs:{checked:"checked",color:"color",disabled:"disabled",mode:"mode",name:"name",value:"value"},ngContentSelectors:ft,decls:1,vars:0,template:function(T,Z){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ce([ln({inputs:["checked","color","disabled","mode","name","value"]})],w),w})(),oi=(()=>{let w=class{constructor(T,Z,pe){this.z=pe,T.detach(),this.el=Z.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:ft,decls:1,vars:0,template:function(T,Z){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ce([ln({inputs:["color","mode"]})],w),w})(),Ds=class{get(k,T){const Z=fe();return Z?Z.get(k,T):null}getBoolean(k,T){const Z=fe();return!!Z&&Z.getBoolean(k,T)}getNumber(k,T){const Z=fe();return Z?Z.getNumber(k,T):0}set(k,T){console.warn("[DEPRECATION][Config]: The Config.set() method is deprecated and will be removed in Ionic Framework 6.0. Please see https://ionicframework.com/docs/angular/config for alternatives.");const Z=fe();Z&&Z.set(k,T)}};Ds.\u0275fac=function(k){return new(k||Ds)},Ds.\u0275prov=E.Yz7({token:Ds,factory:function(w){return Ds.\u0275fac(w)},providedIn:"root"}),Ds.ngInjectableDef=(0,E.Yz7)({factory:function(){return new Ds},token:Ds,providedIn:"root"});const q=new E.OlP("USERCONFIG"),fe=()=>{if("undefined"!=typeof window){const w=window.Ionic;if(w&&w.config)return w.config}return null};class ye{constructor(k={}){this.data=k}get(k){return this.data[k]}}let Ze=(()=>{let w=class{constructor(T,Z){this.zone=T,this.appRef=Z}create(T,Z,pe){return new Dt(T,Z,pe,this.appRef,this.zone)}};return w.\u0275fac=function(T){return new(T||w)(E.LFG(E.R0b),E.LFG(E.z2F))},w.\u0275prov=E.Yz7({token:w,factory:function(k){return w.\u0275fac(k)}}),w})();class Dt{constructor(k,T,Z,pe,ht){this.resolver=k,this.injector=T,this.location=Z,this.appRef=pe,this.zone=ht,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(k,T,Z,pe){return this.zone.run(()=>new Promise(ht=>{ht(Jt(this.zone,this.resolver,this.injector,this.location,this.appRef,this.elRefMap,this.elEventsMap,k,T,Z,pe))}))}removeViewFromDom(k,T){return this.zone.run(()=>new Promise(Z=>{const pe=this.elRefMap.get(T);if(pe){pe.destroy(),this.elRefMap.delete(T);const ht=this.elEventsMap.get(T);ht&&(ht(),this.elEventsMap.delete(T))}Z()}))}}const Jt=(w,k,T,Z,pe,ht,Ut,on,$n,Ln,Wr)=>{const vi=k.resolveComponentFactory($n),Ht=E.zs3.create({providers:ue(Ln),parent:T}),pr=Z?Z.createComponent(vi,Z.length,Ht):vi.create(Ht),us=pr.instance,Ys=pr.location.nativeElement;if(Ln&&Object.assign(us,Ln),Wr)for(const or of Wr)Ys.classList.add(or);const Bn=H(w,us,Ys);return on.appendChild(Ys),Z||pe.attachView(pr.hostView),pr.changeDetectorRef.reattach(),ht.set(Ys,pr),Ut.set(Ys,Bn),Ys},G=[ze.L,ze.a,ze.b,ze.c,ze.d],H=(w,k,T)=>w.run(()=>{const Z=G.filter(pe=>"function"==typeof k[pe]).map(pe=>{const ht=Ut=>k[pe](Ut.detail);return T.addEventListener(pe,ht),()=>T.removeEventListener(pe,ht)});return()=>Z.forEach(pe=>pe())}),O=new E.OlP("NavParamsToken"),ue=w=>[{provide:O,useValue:w},{provide:ye,useFactory:pn,deps:[O]}],pn=w=>new ye(w),Li=(w,k)=>((w=w.filter(T=>T.stackId!==k.stackId)).push(k),w),Ki=(w,k)=>{const T=w.createUrlTree(["."],{relativeTo:k});return w.serializeUrl(T)},ya=(w,k)=>{if(!w)return;const T=yr(k);for(let Z=0;Z<T.length;Z++){if(Z>=w.length)return T[Z];if(T[Z]!==w[Z])return}},yr=w=>w.split("/").map(k=>k.trim()).filter(k=>""!==k),qa=w=>{w&&(w.ref.destroy(),w.unlistenEvents())};class Mo{constructor(k,T,Z,pe,ht,Ut){this.containerEl=T,this.router=Z,this.navCtrl=pe,this.zone=ht,this.location=Ut,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==k?yr(k):void 0}createView(k,T){const Z=Ki(this.router,T),pe=k&&k.location&&k.location.nativeElement,ht=H(this.zone,k.instance,pe);return{id:this.nextId++,stackId:ya(this.tabsPrefix,Z),unlistenEvents:ht,element:pe,ref:k,url:Z}}getExistingView(k){const T=Ki(this.router,k),Z=this.views.find(pe=>pe.url===T);return Z&&Z.ref.changeDetectorRef.reattach(),Z}setActive(k){const T=this.navCtrl.consumeTransition();let{direction:Z,animation:pe,animationBuilder:ht}=T;const Ut=this.activeView,on=((w,k)=>!k||w.stackId!==k.stackId)(k,Ut);on&&(Z="back",pe=void 0);const $n=this.views.slice();let Ln;const Wr=this.router;Wr.getCurrentNavigation?Ln=Wr.getCurrentNavigation():Wr.navigations&&Wr.navigations.value&&(Ln=Wr.navigations.value),Ln&&Ln.extras&&Ln.extras.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const vi=this.views.includes(k),Ht=this.insertView(k,Z);vi||k.ref.changeDetectorRef.detectChanges();const pr=k.animationBuilder;return void 0===ht&&"back"===Z&&!on&&void 0!==pr&&(ht=pr),Ut&&(Ut.animationBuilder=ht),this.zone.runOutsideAngular(()=>this.wait(()=>(Ut&&Ut.ref.changeDetectorRef.detach(),k.ref.changeDetectorRef.reattach(),this.transition(k,Ut,pe,this.canGoBack(1),!1,ht).then(()=>Aa(k,Ht,$n,this.location)).then(()=>({enteringView:k,direction:Z,animation:pe,tabSwitch:on})))))}canGoBack(k,T=this.getActiveStackId()){return this.getStack(T).length>k}pop(k,T=this.getActiveStackId()){return this.zone.run(()=>{const Z=this.getStack(T);if(Z.length<=k)return Promise.resolve(!1);const pe=Z[Z.length-k-1];let ht=pe.url;const Ut=pe.savedData;if(Ut){const $n=Ut.get("primary");$n&&$n.route&&$n.route._routerState&&$n.route._routerState.snapshot&&$n.route._routerState.snapshot.url&&(ht=$n.route._routerState.snapshot.url)}const{animationBuilder:on}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(ht,Object.assign({},pe.savedExtras,{animation:on})).then(()=>!0)})}startBackTransition(){const k=this.activeView;if(k){const T=this.getStack(k.stackId),Z=T[T.length-2],pe=Z.animationBuilder;return this.wait(()=>this.transition(Z,k,"back",this.canGoBack(2),!0,pe))}return Promise.resolve()}endBackTransition(k){k?(this.skipTransition=!0,this.pop(1)):this.activeView&&Jo(this.activeView,this.views,this.views,this.location)}getLastUrl(k){const T=this.getStack(k);return T.length>0?T[T.length-1]:void 0}getRootUrl(k){const T=this.getStack(k);return T.length>0?T[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(qa),this.activeView=void 0,this.views=[]}getStack(k){return this.views.filter(T=>T.stackId===k)}insertView(k,T){return this.activeView=k,this.views=((w,k,T)=>"root"===T?Li(w,k):"forward"===T?((w,k)=>(w.indexOf(k)>=0?w=w.filter(Z=>Z.stackId!==k.stackId||Z.id<=k.id):w.push(k),w))(w,k):((w,k)=>w.indexOf(k)>=0?w.filter(Z=>Z.stackId!==k.stackId||Z.id<=k.id):Li(w,k))(w,k))(this.views,k,T),this.views.slice()}transition(k,T,Z,pe,ht,Ut){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(T===k)return Promise.resolve(!1);const on=k?k.element:void 0,$n=T?T.element:void 0,Ln=this.containerEl;return on&&on!==$n&&(on.classList.add("ion-page"),on.classList.add("ion-page-invisible"),on.parentElement!==Ln&&Ln.appendChild(on),Ln.commit)?Ln.commit(on,$n,{deepWait:!0,duration:void 0===Z?0:void 0,direction:Z,showGoBack:pe,progressAnimation:ht,animationBuilder:Ut}):Promise.resolve(!1)}wait(k){return V(this,void 0,void 0,function*(){void 0!==this.runningTask&&(yield this.runningTask,this.runningTask=void 0);const T=this.runningTask=k();return T.finally(()=>this.runningTask=void 0),T})}}const Aa=(w,k,T,Z)=>"function"==typeof requestAnimationFrame?new Promise(pe=>{requestAnimationFrame(()=>{Jo(w,k,T,Z),pe()})}):Promise.resolve(),Jo=(w,k,T,Z)=>{T.filter(pe=>!k.includes(pe)).forEach(qa),k.forEach(pe=>{const Ut=Z.path().split("?")[0].split("#")[0];if(pe!==w&&pe.url!==Ut){const on=pe.element;on.setAttribute("aria-hidden","true"),on.classList.add("ion-page-hidden"),pe.ref.changeDetectorRef.detach()}})};let Gs=(()=>{let w=class{constructor(T,Z,pe,ht,Ut,on,$n,Ln,Wr,vi,Ht,pr,us){this.parentContexts=T,this.location=Z,this.resolver=pe,this.config=on,this.navCtrl=$n,this.parentOutlet=us,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new si.X(null),this.stackEvents=new E.vpe,this.activateEvents=new E.vpe,this.deactivateEvents=new E.vpe,this.nativeEl=Wr.nativeElement,this.name=ht||Te.eC,this.tabsPrefix="true"===Ut?Ki(vi,pr):void 0,this.stackCtrl=new Mo(this.tabsPrefix,this.nativeEl,vi,$n,Ht,Ln),T.onChildOutletCreated(this.name,this)}set animation(T){this.nativeEl.animation=T}set animated(T){this.nativeEl.animated=T}set swipeGesture(T){this._swipeGesture=T,this.nativeEl.swipeHandler=T?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:Z=>this.stackCtrl.endBackTransition(Z)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){if(!this.activated){const T=this.getContext();T&&T.route&&this.activateWith(T.route,T.resolver||null)}new Promise(T=>(0,Ae.c)(this.nativeEl,T)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(T,Z){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const Z=this.getContext();this.activatedView.savedData=new Map(Z.children.contexts);const pe=this.activatedView.savedData.get("primary");if(pe&&Z.route&&(pe.route=Object.assign({},Z.route)),this.activatedView.savedExtras={},Z.route){const ht=Z.route.snapshot;this.activatedView.savedExtras.queryParams=ht.queryParams,this.activatedView.savedExtras.fragment=ht.fragment}}const T=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,Z){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=T;let pe,ht=this.stackCtrl.getExistingView(T);if(ht){pe=this.activated=ht.ref;const Ut=ht.savedData;Ut&&(this.getContext().children.contexts=Ut),this.updateActivatedRouteProxy(pe.instance,T)}else{const $n=(Z=Z||this.resolver).resolveComponentFactory(T._futureSnapshot.routeConfig.component),Ln=this.parentContexts.getOrCreateContext(this.name).children,Wr=new si.X(null),vi=this.createActivatedRouteProxy(Wr,T),Ht=new en(vi,Ln,this.location.injector);pe=this.activated=this.location.createComponent($n,this.location.length,Ht),Wr.next(pe.instance),ht=this.stackCtrl.createView(this.activated,T),this.proxyMap.set(pe.instance,vi),this.currentActivatedRoute$.next({component:pe.instance,activatedRoute:T})}this.activatedView=ht,this.stackCtrl.setActive(ht).then(Ut=>{this.navCtrl.setTopOutlet(this),this.activateEvents.emit(pe.instance),this.stackEvents.emit(Ut)})}canGoBack(T=1,Z){return this.stackCtrl.canGoBack(T,Z)}pop(T=1,Z){return this.stackCtrl.pop(T,Z)}getLastUrl(T){const Z=this.stackCtrl.getLastUrl(T);return Z?Z.url:void 0}getLastRouteView(T){return this.stackCtrl.getLastUrl(T)}getRootView(T){return this.stackCtrl.getRootUrl(T)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(T,Z){const pe=new Te.gz;return pe._futureSnapshot=Z._futureSnapshot,pe._routerState=Z._routerState,pe.snapshot=Z.snapshot,pe.outlet=Z.outlet,pe.component=Z.component,pe._paramMap=this.proxyObservable(T,"paramMap"),pe._queryParamMap=this.proxyObservable(T,"queryParamMap"),pe.url=this.proxyObservable(T,"url"),pe.params=this.proxyObservable(T,"params"),pe.queryParams=this.proxyObservable(T,"queryParams"),pe.fragment=this.proxyObservable(T,"fragment"),pe.data=this.proxyObservable(T,"data"),pe}proxyObservable(T,Z){return T.pipe((0,Rr.h)(pe=>!!pe),(0,vn.w)(pe=>this.currentActivatedRoute$.pipe((0,Rr.h)(ht=>null!==ht&&ht.component===pe),(0,vn.w)(ht=>ht&&ht.activatedRoute[Z]),(0,Fr.x)())))}updateActivatedRouteProxy(T,Z){const pe=this.proxyMap.get(T);if(!pe)throw new Error("Could not find activated route proxy for view");pe._futureSnapshot=Z._futureSnapshot,pe._routerState=Z._routerState,pe.snapshot=Z.snapshot,pe.outlet=Z.outlet,pe.component=Z.component,this.currentActivatedRoute$.next({component:T,activatedRoute:Z})}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(Te.y6),E.Y36(E.s_b),E.Y36(E._Vd),E.$8M("name"),E.$8M("tabs"),E.Y36(Ds),E.Y36(En),E.Y36(_t.Ye),E.Y36(E.SBq),E.Y36(Te.F0),E.Y36(E.R0b),E.Y36(Te.gz),E.Y36(w,12))},w.\u0275dir=E.lG2({type:w,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",swipeGesture:"swipeGesture"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),ce([(0,E.r_U)()],w.prototype,"stackEvents",void 0),ce([(0,E.r_U)("activate")],w.prototype,"activateEvents",void 0),ce([(0,E.r_U)("deactivate")],w.prototype,"deactivateEvents",void 0),w=ce([_e(3,(0,E.ahi)("name")),_e(4,(0,E.FiY)()),_e(4,(0,E.ahi)("tabs")),_e(12,(0,E.tp0)()),_e(12,(0,E.FiY)())],w),w})();class en{constructor(k,T,Z){this.route=k,this.childContexts=T,this.parent=Z}get(k,T){return k===Te.gz?this.route:k===Te.y6?this.childContexts:this.parent.get(k,T)}}let so=(()=>{let w=class{constructor(T,Z,pe){this.routerOutlet=T,this.navCtrl=Z,this.config=pe}onClick(T){const Z=this.defaultHref||this.config.get("backButtonDefaultHref");this.routerOutlet&&this.routerOutlet.canGoBack()?(this.navCtrl.setDirection("back",void 0,void 0,this.routerAnimation),this.routerOutlet.pop(),T.preventDefault()):null!=Z&&(this.navCtrl.navigateBack(Z,{animation:this.routerAnimation}),T.preventDefault())}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(Gs,8),E.Y36(En),E.Y36(Ds))},w.\u0275dir=E.lG2({type:w,selectors:[["ion-back-button"]],hostBindings:function(T,Z){1&T&&E.NdJ("click",function(ht){return Z.onClick(ht)})},inputs:{defaultHref:"defaultHref",routerAnimation:"routerAnimation"}}),ce([(0,E.L6J)("click",["$event"])],w.prototype,"onClick",null),w=ce([_e(0,(0,E.FiY)())],w),w})();class Bs{constructor(k){this.ctrl=k}create(k){return this.ctrl.create(k||{})}dismiss(k,T,Z){return this.ctrl.dismiss(k,T,Z)}getTop(){return this.ctrl.getTop()}}let Xi=class extends Bs{constructor(){super(st.b)}};Xi.\u0275fac=function(k){return new(k||Xi)},Xi.\u0275prov=E.Yz7({token:Xi,factory:function(w){return Xi.\u0275fac(w)},providedIn:"root"}),Xi.ngInjectableDef=(0,E.Yz7)({factory:function(){return new Xi},token:Xi,providedIn:"root"});let Ai=class extends Bs{constructor(){super(st.a)}};Ai.\u0275fac=function(k){return new(k||Ai)},Ai.\u0275prov=E.Yz7({token:Ai,factory:function(w){return Ai.\u0275fac(w)},providedIn:"root"}),Ai.ngInjectableDef=(0,E.Yz7)({factory:function(){return new Ai},token:Ai,providedIn:"root"});let xi=class extends Bs{constructor(){super(st.l)}};xi.\u0275fac=function(k){return new(k||xi)},xi.\u0275prov=E.Yz7({token:xi,factory:function(w){return xi.\u0275fac(w)},providedIn:"root"}),xi.ngInjectableDef=(0,E.Yz7)({factory:function(){return new xi},token:xi,providedIn:"root"});let _o=class{open(k){return nt.m.open(k)}close(k){return nt.m.close(k)}toggle(k){return nt.m.toggle(k)}enable(k,T){return nt.m.enable(k,T)}swipeGesture(k,T){return nt.m.swipeGesture(k,T)}isOpen(k){return nt.m.isOpen(k)}isEnabled(k){return nt.m.isEnabled(k)}get(k){return nt.m.get(k)}getOpen(){return nt.m.getOpen()}getMenus(){return nt.m.getMenus()}};_o.\u0275fac=function(k){return new(k||_o)},_o.\u0275prov=E.Yz7({token:_o,factory:function(w){return _o.\u0275fac(w)},providedIn:"root"}),_o.ngInjectableDef=(0,E.Yz7)({factory:function(){return new _o},token:_o,providedIn:"root"});let cs=class extends Bs{constructor(){super(st.p)}};cs.\u0275fac=function(k){return new(k||cs)},cs.\u0275prov=E.Yz7({token:cs,factory:function(w){return cs.\u0275fac(w)},providedIn:"root"}),cs.ngInjectableDef=(0,E.Yz7)({factory:function(){return new cs},token:cs,providedIn:"root"});let As=(()=>{let w=class extends Bs{constructor(T,Z,pe){super(st.m),this.angularDelegate=T,this.resolver=Z,this.injector=pe}create(T){return super.create(Object.assign({},T,{delegate:this.angularDelegate.create(this.resolver,this.injector)}))}};return w.\u0275fac=function(T){return new(T||w)(E.LFG(Ze),E.LFG(E._Vd),E.LFG(E.zs3))},w.\u0275prov=E.Yz7({token:w,factory:function(k){return w.\u0275fac(k)}}),w})(),va=(()=>{let w=class extends Bs{constructor(T,Z,pe){super(st.c),this.angularDelegate=T,this.resolver=Z,this.injector=pe}create(T){return super.create(Object.assign({},T,{delegate:this.angularDelegate.create(this.resolver,this.injector)}))}};return w.\u0275fac=function(T){return new(T||w)(E.LFG(Ze),E.LFG(E._Vd),E.LFG(E.zs3))},w.\u0275prov=E.Yz7({token:w,factory:function(k){return w.\u0275fac(k)}}),w})(),vo=class extends Bs{constructor(){super(st.t)}};vo.\u0275fac=function(k){return new(k||vo)},vo.\u0275prov=E.Yz7({token:vo,factory:function(w){return vo.\u0275fac(w)},providedIn:"root"}),vo.ngInjectableDef=(0,E.Yz7)({factory:function(){return new vo},token:vo,providedIn:"root"});let Eo=class{read(k){xa().read(k)}write(k){xa().write(k)}};Eo.\u0275fac=function(k){return new(k||Eo)},Eo.\u0275prov=E.Yz7({token:Eo,factory:function(w){return Eo.\u0275fac(w)},providedIn:"root"}),Eo.ngInjectableDef=(0,E.Yz7)({factory:function(){return new Eo},token:Eo,providedIn:"root"});const xa=()=>{const w="undefined"!=typeof window?window:null;if(null!=w){const k=w.Ionic;return k&&k.queue?k.queue:{read:T=>w.requestAnimationFrame(T),write:T=>w.requestAnimationFrame(T)}}return{read:k=>k(),write:k=>k()}};let hi=class{create(k){return(0,he.c)(k)}easingTime(k,T,Z,pe,ht){return(0,Ve.g)(k,T,Z,pe,ht)}};hi.\u0275fac=function(k){return new(k||hi)},hi.\u0275prov=E.Yz7({token:hi,factory:function(w){return hi.\u0275fac(w)},providedIn:"root"}),hi.ngInjectableDef=(0,E.Yz7)({factory:function(){return new hi},token:hi,providedIn:"root"});let ao=class{constructor(k){this.zone=k}create(k,T=!1){return T&&Object.getOwnPropertyNames(k).forEach(Z=>{if("function"==typeof k[Z]){const pe=k[Z];k[Z]=(...ht)=>this.zone.run(()=>pe(...ht))}}),(0,ot.createGesture)(k)}};ao.\u0275fac=function(k){return new(k||ao)(E.LFG(E.R0b))},ao.\u0275prov=E.Yz7({token:ao,factory:function(w){return ao.\u0275fac(w)},providedIn:"root"}),ao.ngInjectableDef=(0,E.Yz7)({factory:function(){return new ao((0,E.LFG)(E.R0b))},token:ao,providedIn:"root"});class Ka{shouldDetach(k){return!1}shouldAttach(k){return!1}store(k,T){}retrieve(k){return null}shouldReuseRoute(k,T){if(k.routeConfig!==T.routeConfig)return!1;const Z=k.params,pe=T.params,ht=Object.keys(Z),Ut=Object.keys(pe);if(ht.length!==Ut.length)return!1;for(const on of ht)if(pe[on]!==Z[on])return!1;return!0}}const qo=(w,k,T)=>()=>{if(k.defaultView&&"undefined"!=typeof window){(w=>{const k=window,T=k.Ionic;T&&T.config&&"Object"!==T.config.constructor.name||(k.Ionic=k.Ionic||{},k.Ionic.config=Object.assign(Object.assign({},k.Ionic.config),w))})(Object.assign({},w,{_zoneGate:ht=>T.run(ht)}));const pe="__zone_symbol__addEventListener"in k.body?"__zone_symbol__addEventListener":"addEventListener";return function(){var w=[];if("undefined"!=typeof window){var k=window;(!k.customElements||k.Element&&(!k.Element.prototype.closest||!k.Element.prototype.matches||!k.Element.prototype.remove||!k.Element.prototype.getRootNode))&&w.push(L.e(6748).then(L.t.bind(L,5141,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||k.NodeList&&!k.NodeList.prototype.forEach||!k.fetch||!function(){try{var Z=new URL("b","http://a");return Z.pathname="c%20d","http://a/c%20d"===Z.href&&Z.searchParams}catch(pe){return!1}}()||"undefined"==typeof WeakMap)&&w.push(L.e(2214).then(L.t.bind(L,7656,23)))}return Promise.all(w)}().then(()=>((w,k)=>"undefined"==typeof window?Promise.resolve():(Ot.C&&Ot.C.supports&&Ot.C.supports("color","var(--c)")?(0,Ot.a)():L.e(1843).then(L.t.bind(L,5902,23)).then(()=>(Ot.p.$cssShim$=Ot.w.__cssshim)?Ot.p.$cssShim$.i():0)).then(()=>(Br(),(0,Ot.b)(JSON.parse('[["ion-select_3",[[2,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"options":[16]},[[0,"ionChange","onSelect"]]],[33,"ion-select",{"disabled":[4],"cancelText":[1,"cancel-text"],"okText":[1,"ok-text"],"placeholder":[1],"name":[1],"selectedText":[1,"selected-text"],"multiple":[4],"interface":[1],"interfaceOptions":[8,"interface-options"],"compareWith":[1,"compare-with"],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}]]],["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"activated":[32]}]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-modal",[[34,"ion-modal",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"swipeToClose":[4,"swipe-to-close"],"presentingElement":[16],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-popover",[[34,"ion-popover",{"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-app_8",[[0,"ion-app"],[34,"ion-buttons",{"collapse":[4]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"]]],[36,"ion-footer",{"translucent":[4]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-slide_2",[[0,"ion-slide"],[36,"ion-slides",{"options":[8],"pager":[4],"scrollbar":[4],"update":[64],"updateAutoHeight":[64],"slideTo":[64],"slideNext":[64],"slidePrev":[64],"getActiveIndex":[64],"getPreviousIndex":[64],"length":[64],"isEnd":[64],"isBeginning":[64],"startAutoplay":[64],"stopAutoplay":[64],"lockSwipeToNext":[64],"lockSwipeToPrev":[64],"lockSwipes":[64],"getSwiper":[64]}]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[1]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-input",[[34,"ion-input",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"inputmode":[1],"max":[1],"maxlength":[2],"min":[1],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"snaps":[4],"step":[2],"ticks":[4],"disabled":[4],"value":[1026],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-textarea",[[34,"ion-textarea",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[4,"auto-grow"],"value":[1025],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"activated":[32]}]]],["ion-virtual-scroll",[[0,"ion-virtual-scroll",{"approxItemHeight":[2,"approx-item-height"],"approxHeaderHeight":[2,"approx-header-height"],"approxFooterHeight":[2,"approx-footer-height"],"headerFn":[16],"footerFn":[16],"items":[16],"itemHeight":[16],"headerHeight":[16],"footerHeight":[16],"renderItem":[16],"renderHeader":[16],"renderFooter":[16],"nodeRender":[16],"domRender":[16],"totalHeight":[32],"positionForItem":[64],"checkRange":[64],"checkEnd":[64]},[[9,"resize","onResize"]]]]],["ion-datetime_3",[[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[33,"ion-datetime",{"name":[1],"disabled":[4],"readonly":[4],"min":[1025],"max":[1025],"displayFormat":[1,"display-format"],"displayTimezone":[1,"display-timezone"],"pickerFormat":[1,"picker-format"],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"monthNames":[1,"month-names"],"monthShortNames":[1,"month-short-names"],"dayNames":[1,"day-names"],"dayShortNames":[1,"day-short-names"],"pickerOptions":[16],"placeholder":[1],"value":[1025],"isExpanded":[32],"open":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ariaLabel":[1537,"aria-label"],"ariaHidden":[513,"aria-hidden"],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[33,"ion-note",{"color":[513]}],[1,"ion-skeleton-text",{"animated":[4]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"href":[1],"rel":[1],"lines":[1],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"multipleInputs":[32],"focusable":[32]},[[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}]]]]'),k))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:bn,jmp:ht=>T.runOutsideAngular(ht),ael(ht,Ut,on,$n){ht[pe](Ut,on,$n)},rel(ht,Ut,on,$n){ht.removeEventListener(Ut,on,$n)}}))}};var na;let go=na=class{static forRoot(k){return{ngModule:na,providers:[{provide:q,useValue:k},{provide:E.ip1,useFactory:qo,multi:!0,deps:[q,_t.K0,E.R0b]}]}}};go.\u0275fac=function(k){return new(k||go)},go.\u0275mod=E.oAB({type:go}),go.\u0275inj=E.cJS({providers:[Ze,As,va],imports:[[_t.ez]]})},7235:(Xt,it,L)=>{"use strict";L.d(it,{c:()=>at});var _=L(1567);let A;const Me=xe=>xe.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ce=xe=>{if(void 0===A){const Ye=void 0!==xe.style.webkitAnimationName;A=void 0===xe.style.animationName&&Ye?"-webkit-":""}return A},_e=(xe,Oe,Ye)=>{const Ke=Oe.startsWith("animation")?ce(xe):"";xe.style.setProperty(Ke+Oe,Ye)},ne=(xe,Oe)=>{const Ye=Oe.startsWith("animation")?ce(xe):"";xe.style.removeProperty(Ye+Oe)},ie=[],Ee=(xe=[],Oe)=>{if(void 0!==Oe){const Ye=Array.isArray(Oe)?Oe:[Oe];return[...xe,...Ye]}return xe},at=xe=>{let Oe,Ye,Ke,$e,He,gt,_t,Ae,ze,nt,st,sn,Ft,ct=[],bt=[],E=[],We=!1,Te={},he=[],we=[],qe={},Ve=0,ot=!1,je=!1,mt=!0,Ot=!1,Yt=!0;const Cn=xe,rr=[],Rn=[],hn=[],dr=[],br=[],Qn=[],wt=[],an=[],jn=[],tr=[],On="function"==typeof AnimationEffect||"function"==typeof window.AnimationEffect,Nn="function"==typeof Element&&"function"==typeof Element.prototype.animate&&On,Br=(W,oe)=>((oe&&oe.oneTimeCallback?Rn:rr).push({c:W,o:oe}),Ft),Kt=()=>{if(Nn)tr.forEach(W=>{W.cancel()}),tr.length=0;else{const W=hn.slice();(0,_.r)(()=>{W.forEach(oe=>{ne(oe,"animation-name"),ne(oe,"animation-duration"),ne(oe,"animation-timing-function"),ne(oe,"animation-iteration-count"),ne(oe,"animation-delay"),ne(oe,"animation-play-state"),ne(oe,"animation-fill-mode"),ne(oe,"animation-direction")})})}},ft=()=>{br.forEach(W=>{W&&W.parentNode&&W.parentNode.removeChild(W)}),br.length=0},Gt=()=>void 0!==He?He:_t?_t.getFill():"both",yn=()=>void 0!==ze?ze:void 0!==gt?gt:_t?_t.getDirection():"normal",rn=()=>ot?"linear":void 0!==Ke?Ke:_t?_t.getEasing():"linear",un=()=>je?0:void 0!==nt?nt:void 0!==Ye?Ye:_t?_t.getDuration():0,Ue=()=>void 0!==$e?$e:_t?_t.getIterations():1,ke=()=>void 0!==st?st:void 0!==Oe?Oe:_t?_t.getDelay():0,jt=()=>{0!==Ve&&(Ve--,0===Ve&&((()=>{Vr(),an.forEach(Xe=>Xe()),jn.forEach(Xe=>Xe());const W=mt?1:0,oe=he,be=we,Qe=qe;hn.forEach(Xe=>{const Ct=Xe.classList;oe.forEach(xt=>Ct.add(xt)),be.forEach(xt=>Ct.remove(xt));for(const xt in Qe)Qe.hasOwnProperty(xt)&&_e(Xe,xt,Qe[xt])}),rr.forEach(Xe=>Xe.c(W,Ft)),Rn.forEach(Xe=>Xe.c(W,Ft)),Rn.length=0,Yt=!0,mt&&(Ot=!0),mt=!0})(),_t&&_t.animationFinish()))},qn=(W=!0)=>{(()=>{Qn.forEach(Qe=>Qe()),wt.forEach(Qe=>Qe());const W=bt,oe=E,be=Te;hn.forEach(Qe=>{const Xe=Qe.classList;W.forEach(Ct=>Xe.add(Ct)),oe.forEach(Ct=>Xe.remove(Ct));for(const Ct in be)be.hasOwnProperty(Ct)&&_e(Qe,Ct,be[Ct])})})(),ct.length>0&&(Nn?(hn.forEach(W=>{const oe=W.animate(ct,{id:Cn,delay:ke(),duration:un(),easing:rn(),iterations:Ue(),fill:Gt(),direction:yn()});oe.pause(),tr.push(oe)}),tr.length>0&&(tr[0].onfinish=()=>{jt()})):((W=!0)=>{ft();const oe=(xe=>(xe.forEach(Oe=>{for(const Ye in Oe)if(Oe.hasOwnProperty(Ye)){const Ke=Oe[Ye];if("easing"===Ye)Oe["animation-timing-function"]=Ke,delete Oe[Ye];else{const $e=Me(Ye);$e!==Ye&&(Oe[$e]=Ke,delete Oe[Ye])}}}),xe))(ct);hn.forEach(be=>{if(oe.length>0){const Qe=((xe=[])=>xe.map(Oe=>{const Ye=Oe.offset,Ke=[];for(const $e in Oe)Oe.hasOwnProperty($e)&&"offset"!==$e&&Ke.push(`${$e}: ${Oe[$e]};`);return`${100*Ye}% { ${Ke.join(" ")} }`}).join(" "))(oe);sn=void 0!==xe?xe:(xe=>{let Oe=ie.indexOf(xe);return Oe<0&&(Oe=ie.push(xe)-1),`ion-animation-${Oe}`})(Qe);const Xe=((xe,Oe,Ye)=>{const Ke=(xe=>{const Oe=xe.getRootNode();return Oe.head||Oe})(Ye),$e=ce(Ye),He=Ke.querySelector("#"+xe);if(He)return He;const gt=(Ye.ownerDocument||document).createElement("style");return gt.id=xe,gt.textContent=`@${$e}keyframes ${xe} { ${Oe} } @${$e}keyframes ${xe}-alt { ${Oe} }`,Ke.appendChild(gt),gt})(sn,Qe,be);br.push(Xe),_e(be,"animation-duration",`${un()}ms`),_e(be,"animation-timing-function",rn()),_e(be,"animation-delay",`${ke()}ms`),_e(be,"animation-fill-mode",Gt()),_e(be,"animation-direction",yn());const Ct=Ue()===1/0?"infinite":Ue().toString();_e(be,"animation-iteration-count",Ct),_e(be,"animation-play-state","paused"),W&&_e(be,"animation-name",`${Xe.id}-alt`),(0,_.r)(()=>{_e(be,"animation-name",Xe.id||null)})}})})(W)),We=!0},ln=W=>{if(W=Math.min(Math.max(W,0),.9999),Nn)tr.forEach(oe=>{oe.currentTime=oe.effect.getComputedTiming().delay+un()*W,oe.pause()});else{const oe=`-${un()*W}ms`;hn.forEach(be=>{ct.length>0&&(_e(be,"animation-delay",oe),_e(be,"animation-play-state","paused"))})}},Mr=W=>{tr.forEach(oe=>{oe.effect.updateTiming({delay:ke(),duration:un(),easing:rn(),iterations:Ue(),fill:Gt(),direction:yn()})}),void 0!==W&&ln(W)},cn=(W=!0,oe)=>{(0,_.r)(()=>{hn.forEach(be=>{_e(be,"animation-name",sn||null),_e(be,"animation-duration",`${un()}ms`),_e(be,"animation-timing-function",rn()),_e(be,"animation-delay",void 0!==oe?`-${oe*un()}ms`:`${ke()}ms`),_e(be,"animation-fill-mode",Gt()||null),_e(be,"animation-direction",yn()||null);const Qe=Ue()===1/0?"infinite":Ue().toString();_e(be,"animation-iteration-count",Qe),W&&_e(be,"animation-name",`${sn}-alt`),(0,_.r)(()=>{_e(be,"animation-name",sn||null)})})})},Mn=(W=!1,oe=!0,be)=>(W&&dr.forEach(Qe=>{Qe.update(W,oe,be)}),Nn?Mr(be):cn(oe,be),Ft),Jr=()=>{We&&(Nn?tr.forEach(W=>{W.pause()}):hn.forEach(W=>{_e(W,"animation-play-state","paused")}))},Dr=()=>{Ae=void 0,jt()},Vr=()=>{Ae&&clearTimeout(Ae)},ki=W=>new Promise(oe=>{W&&W.sync&&(je=!0,Br(()=>je=!1,{oneTimeCallback:!0})),We||qn(),Ot&&(Nn?(ln(0),Mr()):cn(),Ot=!1),Yt&&(Ve=dr.length+1,Yt=!1),Br(()=>oe(),{oneTimeCallback:!0}),dr.forEach(be=>{be.play()}),Nn?(tr.forEach(W=>{W.play()}),(0===ct.length||0===hn.length)&&jt()):(()=>{if(Vr(),(0,_.r)(()=>{hn.forEach(W=>{ct.length>0&&_e(W,"animation-play-state","running")})}),0===ct.length||0===hn.length)jt();else{const W=ke()||0,oe=un()||0,be=Ue()||1;isFinite(be)&&(Ae=setTimeout(Dr,W+oe*be+100)),((xe,Oe)=>{let Ye;const Ke={passive:!0},He=gt=>{xe===gt.target&&(Ye&&Ye(),Vr(),(0,_.r)(()=>{hn.forEach(W=>{ne(W,"animation-duration"),ne(W,"animation-delay"),ne(W,"animation-play-state")}),(0,_.r)(jt)}))};xe&&(xe.addEventListener("webkitAnimationEnd",He,Ke),xe.addEventListener("animationend",He,Ke),Ye=()=>{xe.removeEventListener("webkitAnimationEnd",He,Ke),xe.removeEventListener("animationend",He,Ke)})})(hn[0])}})()}),Ii=(W,oe)=>{const be=ct[0];return void 0===be||void 0!==be.offset&&0!==be.offset?ct=[{offset:0,[W]:oe},...ct]:be[W]=oe,Ft};return Ft={parentAnimation:_t,elements:hn,childAnimations:dr,id:Cn,animationFinish:jt,from:Ii,to:(W,oe)=>{const be=ct[ct.length-1];return void 0===be||void 0!==be.offset&&1!==be.offset?ct=[...ct,{offset:1,[W]:oe}]:be[W]=oe,Ft},fromTo:(W,oe,be)=>Ii(W,oe).to(W,be),parent:W=>(_t=W,Ft),play:ki,pause:()=>(dr.forEach(W=>{W.pause()}),Jr(),Ft),stop:()=>{dr.forEach(W=>{W.stop()}),We&&(Kt(),We=!1),ot=!1,je=!1,Yt=!0,ze=void 0,nt=void 0,st=void 0,Ve=0,Ot=!1,mt=!0},destroy:W=>(dr.forEach(oe=>{oe.destroy(W)}),(W=>{Kt(),W&&ft()})(W),hn.length=0,dr.length=0,ct.length=0,rr.length=0,Rn.length=0,We=!1,Yt=!0,Ft),keyframes:W=>(ct=W,Ft),addAnimation:W=>{if(null!=W)if(Array.isArray(W))for(const oe of W)oe.parent(Ft),dr.push(oe);else W.parent(Ft),dr.push(W);return Ft},addElement:W=>{if(null!=W)if(1===W.nodeType)hn.push(W);else if(W.length>=0)for(let oe=0;oe<W.length;oe++)hn.push(W[oe]);else console.error("Invalid addElement value");return Ft},update:Mn,fill:W=>(He=W,Mn(!0),Ft),direction:W=>(gt=W,Mn(!0),Ft),iterations:W=>($e=W,Mn(!0),Ft),duration:W=>(!Nn&&0===W&&(W=1),Ye=W,Mn(!0),Ft),easing:W=>(Ke=W,Mn(!0),Ft),delay:W=>(Oe=W,Mn(!0),Ft),getWebAnimations:()=>tr,getKeyframes:()=>ct,getFill:Gt,getDirection:yn,getDelay:ke,getIterations:Ue,getEasing:rn,getDuration:un,afterAddRead:W=>(an.push(W),Ft),afterAddWrite:W=>(jn.push(W),Ft),afterClearStyles:(W=[])=>{for(const oe of W)qe[oe]="";return Ft},afterStyles:(W={})=>(qe=W,Ft),afterRemoveClass:W=>(we=Ee(we,W),Ft),afterAddClass:W=>(he=Ee(he,W),Ft),beforeAddRead:W=>(Qn.push(W),Ft),beforeAddWrite:W=>(wt.push(W),Ft),beforeClearStyles:(W=[])=>{for(const oe of W)Te[oe]="";return Ft},beforeStyles:(W={})=>(Te=W,Ft),beforeRemoveClass:W=>(E=Ee(E,W),Ft),beforeAddClass:W=>(bt=Ee(bt,W),Ft),onFinish:Br,progressStart:(W=!1,oe)=>(dr.forEach(be=>{be.progressStart(W,oe)}),Jr(),ot=W,We?Mn(!1,!0,oe):qn(),Ft),progressStep:W=>(dr.forEach(oe=>{oe.progressStep(W)}),ln(W),Ft),progressEnd:(W,oe,be)=>(ot=!1,dr.forEach(Qe=>{Qe.progressEnd(W,oe,be)}),void 0!==be&&(nt=be),Ot=!1,mt=!0,0===W?(ze="reverse"===yn()?"normal":"reverse","reverse"===ze&&(mt=!1),Nn?(Mn(),ln(1-oe)):(st=(1-oe)*un()*-1,Mn(!1,!1))):1===W&&(Nn?(Mn(),ln(oe)):(st=oe*un()*-1,Mn(!1,!1))),void 0!==W&&(Br(()=>{nt=void 0,ze=void 0,st=void 0},{oneTimeCallback:!0}),_t||ki()),Ft)}}},7807:(Xt,it,L)=>{"use strict";L.d(it,{g:()=>_});const _=(_e,ne,V,Ie,ie)=>re(_e[1],ne[1],V[1],Ie[1],ie).map(ae=>A(_e[0],ne[0],V[0],Ie[0],ae)),A=(_e,ne,V,Ie,ie)=>ie*(3*ne*Math.pow(ie-1,2)+ie*(-3*V*ie+3*V+Ie*ie))-_e*Math.pow(ie-1,3),re=(_e,ne,V,Ie,ie)=>ce((Ie-=ie)-3*(V-=ie)+3*(ne-=ie)-(_e-=ie),3*V-6*ne+3*_e,3*ne-3*_e,_e).filter(Ne=>Ne>=0&&Ne<=1),ce=(_e,ne,V,Ie)=>{if(0===_e)return((_e,ne,V)=>{const Ie=ne*ne-4*_e*V;return Ie<0?[]:[(-ne+Math.sqrt(Ie))/(2*_e),(-ne-Math.sqrt(Ie))/(2*_e)]})(ne,V,Ie);const ie=(3*(V/=_e)-(ne/=_e)*ne)/3,ae=(2*ne*ne*ne-9*ne*V+27*(Ie/=_e))/27;if(0===ie)return[Math.pow(-ae,1/3)];if(0===ae)return[Math.sqrt(-ie),-Math.sqrt(-ie)];const Ne=Math.pow(ae/2,2)+Math.pow(ie/3,3);if(0===Ne)return[Math.pow(ae/2,.5)-ne/3];if(Ne>0)return[Math.pow(-ae/2+Math.sqrt(Ne),1/3)-Math.pow(ae/2+Math.sqrt(Ne),1/3)-ne/3];const le=Math.sqrt(Math.pow(-ie/3,3)),Ee=Math.acos(-ae/(2*Math.sqrt(Math.pow(-ie/3,3)))),at=2*Math.pow(le,1/3);return[at*Math.cos(Ee/3)-ne/3,at*Math.cos((Ee+2*Math.PI)/3)-ne/3,at*Math.cos((Ee+4*Math.PI)/3)-ne/3]}},960:(Xt,it,L)=>{"use strict";L.d(it,{G:()=>ce});class A{constructor(ne,V,Ie,ie,ae){this.id=V,this.name=Ie,this.disableScroll=ae,this.priority=1e6*ie+V,this.ctrl=ne}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const ne=this.ctrl.capture(this.name,this.id,this.priority);return ne&&this.disableScroll&&this.ctrl.disableScroll(this.id),ne}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class re{constructor(ne,V,Ie,ie){this.id=V,this.disable=Ie,this.disableScroll=ie,this.ctrl=ne}block(){if(this.ctrl){if(this.disable)for(const ne of this.disable)this.ctrl.disableGesture(ne,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const ne of this.disable)this.ctrl.enableGesture(ne,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const Me="backdrop-no-scroll",ce=new class{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(ne){return new A(this,this.newID(),ne.name,ne.priority||0,!!ne.disableScroll)}createBlocker(ne={}){return new re(this,this.newID(),ne.disable,!!ne.disableScroll)}start(ne,V,Ie){return this.canStart(ne)?(this.requestedStart.set(V,Ie),!0):(this.requestedStart.delete(V),!1)}capture(ne,V,Ie){if(!this.start(ne,V,Ie))return!1;const ie=this.requestedStart;let ae=-1e4;if(ie.forEach(Ne=>{ae=Math.max(ae,Ne)}),ae===Ie){this.capturedId=V,ie.clear();const Ne=new CustomEvent("ionGestureCaptured",{detail:{gestureName:ne}});return document.dispatchEvent(Ne),!0}return ie.delete(V),!1}release(ne){this.requestedStart.delete(ne),this.capturedId===ne&&(this.capturedId=void 0)}disableGesture(ne,V){let Ie=this.disabledGestures.get(ne);void 0===Ie&&(Ie=new Set,this.disabledGestures.set(ne,Ie)),Ie.add(V)}enableGesture(ne,V){const Ie=this.disabledGestures.get(ne);void 0!==Ie&&Ie.delete(V)}disableScroll(ne){this.disabledScroll.add(ne),1===this.disabledScroll.size&&document.body.classList.add(Me)}enableScroll(ne){this.disabledScroll.delete(ne),0===this.disabledScroll.size&&document.body.classList.remove(Me)}canStart(ne){return!(void 0!==this.capturedId||this.isDisabled(ne))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(ne){const V=this.disabledGestures.get(ne);return!!(V&&V.size>0)}newID(){return this.gestureId++,this.gestureId}}},3087:(Xt,it,L)=>{"use strict";L.r(it),L.d(it,{MENU_BACK_BUTTON_PRIORITY:()=>ce,OVERLAY_BACK_BUTTON_PRIORITY:()=>Me,blockHardwareBackButton:()=>A,startHardwareBackButton:()=>re});var _=L(8239);const A=()=>{document.addEventListener("backbutton",()=>{})},re=()=>{const _e=document;let ne=!1;_e.addEventListener("backbutton",()=>{if(ne)return;let V=0,Ie=[];const ie=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(le,Ee){Ie.push({priority:le,handler:Ee,id:V++})}}});_e.dispatchEvent(ie);const ae=function(){var le=(0,_.Z)(function*(Ee){try{if(Ee&&Ee.handler){const at=Ee.handler(Ne);null!=at&&(yield at)}}catch(at){console.error(at)}});return function(at){return le.apply(this,arguments)}}(),Ne=()=>{if(Ie.length>0){let le={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};Ie.forEach(Ee=>{Ee.priority>=le.priority&&(le=Ee)}),ne=!0,Ie=Ie.filter(Ee=>Ee.id!==le.id),ae(le).then(()=>ne=!1)}};Ne()})},Me=100,ce=99},1567:(Xt,it,L)=>{"use strict";L.d(it,{a:()=>ce,b:()=>_e,c:()=>_,d:()=>ae,e:()=>Ne,f:()=>Ye,g:()=>ne,h:()=>A,i:()=>Me,j:()=>ie,k:()=>le,l:()=>Ie,m:()=>Ee,n:()=>Oe,o:()=>Ke,p:()=>xe,q:()=>at,r:()=>V});const _=($e,He)=>{$e.componentOnReady?$e.componentOnReady().then(gt=>He(gt)):V(()=>He($e))},A=($e,He=[])=>{const gt={};return He.forEach(ct=>{$e.hasAttribute(ct)&&(null!==$e.getAttribute(ct)&&(gt[ct]=$e.getAttribute(ct)),$e.removeAttribute(ct))}),gt},re=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],Me=$e=>A($e,re),ce=($e,He,gt,ct)=>{if("undefined"!=typeof window){const bt=window,E=bt&&bt.Ionic&&bt.Ionic.config;if(E){const We=E.get("_ael");if(We)return We($e,He,gt,ct);if(E._ael)return E._ael($e,He,gt,ct)}}return $e.addEventListener(He,gt,ct)},_e=($e,He,gt,ct)=>{if("undefined"!=typeof window){const bt=window,E=bt&&bt.Ionic&&bt.Ionic.config;if(E){const We=E.get("_rel");if(We)return We($e,He,gt,ct);if(E._rel)return E._rel($e,He,gt,ct)}}return $e.removeEventListener(He,gt,ct)},ne=($e,He=$e)=>$e.shadowRoot||He,V=$e=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame($e):"function"==typeof requestAnimationFrame?requestAnimationFrame($e):setTimeout($e),Ie=$e=>!!$e.shadowRoot&&!!$e.attachShadow,ie=$e=>{const He=$e.closest("ion-item");return He?He.querySelector("ion-label"):null},ae=($e,He)=>{let gt;const ct=$e.getAttribute("aria-labelledby"),bt=$e.id;let E=null!==ct&&""!==ct.trim()?ct:He+"-lbl",We=null!==ct&&""!==ct.trim()?document.getElementById(ct):ie($e);return We?(null===ct&&(We.id=E),gt=We.textContent,We.setAttribute("aria-hidden","true")):""!==bt.trim()&&(We=document.querySelector(`label[for="${bt}"]`),We&&(""!==We.id?E=We.id:We.id=E=`${bt}-lbl`,gt=We.textContent)),{label:We,labelId:E,labelText:gt}},Ne=($e,He,gt,ct,bt)=>{if($e||Ie(He)){let E=He.querySelector("input.aux-input");E||(E=He.ownerDocument.createElement("input"),E.type="hidden",E.classList.add("aux-input"),He.appendChild(E)),E.disabled=bt,E.name=gt,E.value=ct||""}},le=($e,He,gt)=>Math.max($e,Math.min(He,gt)),Ee=($e,He)=>{if(!$e){const gt="ASSERT: "+He;throw console.error(gt),new Error(gt)}},at=$e=>$e.timeStamp||Date.now(),xe=$e=>{if($e){const He=$e.changedTouches;if(He&&He.length>0){const gt=He[0];return{x:gt.clientX,y:gt.clientY}}if(void 0!==$e.pageX)return{x:$e.pageX,y:$e.pageY}}return{x:0,y:0}},Oe=$e=>{const He="rtl"===document.dir;switch($e){case"start":return He;case"end":return!He;default:throw new Error(`"${$e}" is not a valid value for [side]. Use "start" or "end" instead.`)}},Ye=($e,He)=>{const gt=$e._original||$e;return{_original:$e,emit:Ke(gt.emit.bind(gt),He)}},Ke=($e,He=0)=>{let gt;return(...ct)=>{clearTimeout(gt),gt=setTimeout($e,He,...ct)}}},6951:(Xt,it,L)=>{"use strict";L.d(it,{m:()=>ae});var _=L(8239),A=L(3087),re=L(1567),Me=L(7585),ce=L(7235);const _e=Ne=>(0,ce.c)().duration(Ne?400:300),ne=Ne=>{let le,Ee;const at=Ne.width+8,xe=(0,ce.c)(),Oe=(0,ce.c)();Ne.isEndSide?(le=at+"px",Ee="0px"):(le=-at+"px",Ee="0px"),xe.addElement(Ne.menuInnerEl).fromTo("transform",`translateX(${le})`,`translateX(${Ee})`);const Ke="ios"===(0,Me.b)(Ne),$e=Ke?.2:.25;return Oe.addElement(Ne.backdropEl).fromTo("opacity",.01,$e),_e(Ke).addAnimation([xe,Oe])},V=Ne=>{let le,Ee;const at=(0,Me.b)(Ne),xe=Ne.width;Ne.isEndSide?(le=-xe+"px",Ee=xe+"px"):(le=xe+"px",Ee=-xe+"px");const Oe=(0,ce.c)().addElement(Ne.menuInnerEl).fromTo("transform",`translateX(${Ee})`,"translateX(0px)"),Ye=(0,ce.c)().addElement(Ne.contentEl).fromTo("transform","translateX(0px)",`translateX(${le})`),Ke=(0,ce.c)().addElement(Ne.backdropEl).fromTo("opacity",.01,.32);return _e("ios"===at).addAnimation([Oe,Ye,Ke])},Ie=Ne=>{const le=(0,Me.b)(Ne),Ee=Ne.width*(Ne.isEndSide?-1:1)+"px",at=(0,ce.c)().addElement(Ne.contentEl).fromTo("transform","translateX(0px)",`translateX(${Ee})`);return _e("ios"===le).addAnimation(at)},ae=(()=>{const Ne=new Map,le=[],Ee=function(){var ze=(0,_.Z)(function*(nt){const st=yield He(nt);return!!st&&st.open()});return function(st){return ze.apply(this,arguments)}}(),at=function(){var ze=(0,_.Z)(function*(nt){const st=yield void 0!==nt?He(nt):gt();return void 0!==st&&st.close()});return function(st){return ze.apply(this,arguments)}}(),xe=function(){var ze=(0,_.Z)(function*(nt){const st=yield He(nt);return!!st&&st.toggle()});return function(st){return ze.apply(this,arguments)}}(),Oe=function(){var ze=(0,_.Z)(function*(nt,st){const mt=yield He(st);return mt&&(mt.disabled=!nt),mt});return function(st,mt){return ze.apply(this,arguments)}}(),Ye=function(){var ze=(0,_.Z)(function*(nt,st){const mt=yield He(st);return mt&&(mt.swipeGesture=nt),mt});return function(st,mt){return ze.apply(this,arguments)}}(),Ke=function(){var ze=(0,_.Z)(function*(nt){if(null!=nt){const st=yield He(nt);return void 0!==st&&st.isOpen()}return void 0!==(yield gt())});return function(st){return ze.apply(this,arguments)}}(),$e=function(){var ze=(0,_.Z)(function*(nt){const st=yield He(nt);return!!st&&!st.disabled});return function(st){return ze.apply(this,arguments)}}(),He=function(){var ze=(0,_.Z)(function*(nt){return yield Ae(),"start"===nt||"end"===nt?je(Ot=>Ot.side===nt&&!Ot.disabled)||je(Ot=>Ot.side===nt):null!=nt?je(mt=>mt.menuId===nt):je(mt=>!mt.disabled)||(le.length>0?le[0].el:void 0)});return function(st){return ze.apply(this,arguments)}}(),gt=function(){var ze=(0,_.Z)(function*(){return yield Ae(),qe()});return function(){return ze.apply(this,arguments)}}(),ct=function(){var ze=(0,_.Z)(function*(){return yield Ae(),Ve()});return function(){return ze.apply(this,arguments)}}(),bt=function(){var ze=(0,_.Z)(function*(){return yield Ae(),ot()});return function(){return ze.apply(this,arguments)}}(),E=(ze,nt)=>{Ne.set(ze,nt)},Te=ze=>{const nt=ze.side;le.filter(st=>st.side===nt&&st!==ze).forEach(st=>st.disabled=!0)},he=function(){var ze=(0,_.Z)(function*(nt,st,mt){if(ot())return!1;if(st){const Ot=yield gt();Ot&&nt.el!==Ot&&(yield Ot.setOpen(!1,!1))}return nt._setOpen(st,mt)});return function(st,mt,Ot){return ze.apply(this,arguments)}}(),qe=()=>je(ze=>ze._isOpen),Ve=()=>le.map(ze=>ze.el),ot=()=>le.some(ze=>ze.isAnimating),je=ze=>{const nt=le.find(ze);if(void 0!==nt)return nt.el},Ae=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(ze=>new Promise(nt=>(0,re.c)(ze,nt))));return E("reveal",Ie),E("push",V),E("overlay",ne),"undefined"!=typeof document&&document.addEventListener("ionBackButton",ze=>{const nt=qe();nt&&ze.detail.register(A.MENU_BACK_BUTTON_PRIORITY,()=>nt.close())}),{registerAnimation:E,get:He,getMenus:ct,getOpen:gt,isEnabled:$e,swipeGesture:Ye,isAnimating:bt,isOpen:Ke,enable:Oe,toggle:xe,close:at,open:Ee,_getOpenSync:qe,_createAnimation:(ze,nt)=>{const st=Ne.get(ze);if(!st)throw new Error("animation not registered");return st(nt)},_register:ze=>{le.indexOf(ze)<0&&(ze.disabled||Te(ze),le.push(ze))},_unregister:ze=>{const nt=le.indexOf(ze);nt>-1&&le.splice(nt,1)},_setOpen:he,_setActiveMenu:Te}})()},9461:(Xt,it,L)=>{"use strict";L.r(it),L.d(it,{GESTURE_CONTROLLER:()=>_.G,createGesture:()=>Ie});var _=L(960);const A=(le,Ee,at,xe)=>{const Oe=re(le)?{capture:!!xe.capture,passive:!!xe.passive}:!!xe.capture;let Ye,Ke;return le.__zone_symbol__addEventListener?(Ye="__zone_symbol__addEventListener",Ke="__zone_symbol__removeEventListener"):(Ye="addEventListener",Ke="removeEventListener"),le[Ye](Ee,at,Oe),()=>{le[Ke](Ee,at,Oe)}},re=le=>{if(void 0===Me)try{const Ee=Object.defineProperty({},"passive",{get:()=>{Me=!0}});le.addEventListener("optsTest",()=>{},Ee)}catch(Ee){Me=!1}return!!Me};let Me;const ne=le=>le instanceof Document?le:le.ownerDocument,Ie=le=>{let Ee=!1,at=!1,xe=!0,Oe=!1;const Ye=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},le),Ke=Ye.canStart,$e=Ye.onWillStart,He=Ye.onStart,gt=Ye.onEnd,ct=Ye.notCaptured,bt=Ye.onMove,E=Ye.threshold,We=Ye.passive,_t=Ye.blurOnStart,Te={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},he=((le,Ee,at)=>{const xe=at*(Math.PI/180),Oe="x"===le,Ye=Math.cos(xe),Ke=Ee*Ee;let $e=0,He=0,gt=!1,ct=0;return{start(bt,E){$e=bt,He=E,ct=0,gt=!0},detect(bt,E){if(!gt)return!1;const We=bt-$e,_t=E-He,Te=We*We+_t*_t;if(Te<Ke)return!1;const he=Math.sqrt(Te),we=(Oe?We:_t)/he;return ct=we>Ye?1:we<-Ye?-1:0,gt=!1,!0},isGesture:()=>0!==ct,getDirection:()=>ct}})(Ye.direction,Ye.threshold,Ye.maxAngle),we=_.G.createGesture({name:le.gestureName,priority:le.gesturePriority,disableScroll:le.disableScroll}),ot=()=>{!Ee||(Oe=!1,bt&&bt(Te))},je=()=>!(we&&!we.capture()||(Ee=!0,xe=!1,Te.startX=Te.currentX,Te.startY=Te.currentY,Te.startTime=Te.currentTime,$e?$e(Te).then(ze):ze(),0)),ze=()=>{_t&&(()=>{if("undefined"!=typeof document){const Yt=document.activeElement;null!==Yt&&Yt.blur&&Yt.blur()}})(),He&&He(Te),xe=!0},nt=()=>{Ee=!1,at=!1,Oe=!1,xe=!0,we.release()},st=Yt=>{const sn=Ee,Ft=xe;if(nt(),Ft){if(ie(Te,Yt),sn)return void(gt&&gt(Te));ct&&ct(Te)}},mt=((le,Ee,at,xe,Oe)=>{let Ye,Ke,$e,He,gt,ct,bt,E=0;const We=Ae=>{E=Date.now()+2e3,Ee(Ae)&&(!Ke&&at&&(Ke=A(le,"touchmove",at,Oe)),$e||($e=A(Ae.target,"touchend",Te,Oe)),He||(He=A(Ae.target,"touchcancel",Te,Oe)))},_t=Ae=>{E>Date.now()||!Ee(Ae)||(!ct&&at&&(ct=A(ne(le),"mousemove",at,Oe)),bt||(bt=A(ne(le),"mouseup",he,Oe)))},Te=Ae=>{we(),xe&&xe(Ae)},he=Ae=>{qe(),xe&&xe(Ae)},we=()=>{Ke&&Ke(),$e&&$e(),He&&He(),Ke=$e=He=void 0},qe=()=>{ct&&ct(),bt&&bt(),ct=bt=void 0},Ve=()=>{we(),qe()},ot=(Ae=!0)=>{Ae?(Ye||(Ye=A(le,"touchstart",We,Oe)),gt||(gt=A(le,"mousedown",_t,Oe))):(Ye&&Ye(),gt&&gt(),Ye=gt=void 0,Ve())};return{enable:ot,stop:Ve,destroy:()=>{ot(!1),xe=at=Ee=void 0}}})(Ye.el,Yt=>{const sn=Ne(Yt);return!(at||!xe||(ae(Yt,Te),Te.startX=Te.currentX,Te.startY=Te.currentY,Te.startTime=Te.currentTime=sn,Te.velocityX=Te.velocityY=Te.deltaX=Te.deltaY=0,Te.event=Yt,Ke&&!1===Ke(Te))||(we.release(),!we.start()))&&(at=!0,0===E?je():(he.start(Te.startX,Te.startY),!0))},Yt=>{Ee?!Oe&&xe&&(Oe=!0,ie(Te,Yt),requestAnimationFrame(ot)):(ie(Te,Yt),he.detect(Te.currentX,Te.currentY)&&(!he.isGesture()||!je())&&Ot())},st,{capture:!1,passive:We}),Ot=()=>{nt(),mt.stop(),ct&&ct(Te)};return{enable(Yt=!0){Yt||(Ee&&st(void 0),nt()),mt.enable(Yt)},destroy(){we.destroy(),mt.destroy()}}},ie=(le,Ee)=>{if(!Ee)return;const at=le.currentX,xe=le.currentY,Oe=le.currentTime;ae(Ee,le);const Ye=le.currentX,Ke=le.currentY,He=(le.currentTime=Ne(Ee))-Oe;if(He>0&&He<100){const ct=(Ke-xe)/He;le.velocityX=(Ye-at)/He*.7+.3*le.velocityX,le.velocityY=.7*ct+.3*le.velocityY}le.deltaX=Ye-le.startX,le.deltaY=Ke-le.startY,le.event=Ee},ae=(le,Ee)=>{let at=0,xe=0;if(le){const Oe=le.changedTouches;if(Oe&&Oe.length>0){const Ye=Oe[0];at=Ye.clientX,xe=Ye.clientY}else void 0!==le.pageX&&(at=le.pageX,xe=le.pageY)}Ee.currentX=at,Ee.currentY=xe},Ne=le=>le.timeStamp||Date.now()},3150:(Xt,it,L)=>{"use strict";L.d(it,{B:()=>ut,C:()=>Ne,H:()=>br,a:()=>xe,b:()=>sr,c:()=>Ii,e:()=>Dn,f:()=>Di,g:()=>Yt,h:()=>hn,i:()=>li,j:()=>Ue,k:()=>qn,p:()=>Ee,r:()=>cn,s:()=>Ot,w:()=>ae});var _=L(8239);let re,Me,ce,_e=!1,ne=!1,V=!1,Ie=!1,ie=!1;const ae="undefined"!=typeof window?window:{},Ne=ae.CSS,le=ae.document||{head:{}},Ee={$flags$:0,$resourcesUrl$:"",jmp:z=>z(),raf:z=>requestAnimationFrame(z),ael:(z,W,oe,be)=>z.addEventListener(W,oe,be),rel:(z,W,oe,be)=>z.removeEventListener(W,oe,be),ce:(z,W)=>new CustomEvent(z,W)},at=(()=>(le.head.attachShadow+"").indexOf("[native")>-1)(),xe=z=>Promise.resolve(z),Oe=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replace}catch(z){}return!1})(),Ye=(z,W,oe,be)=>{oe&&oe.map(([Qe,Xe,Ct])=>{const xt=$e(z,Qe),Rt=Ke(W,Ct),Qt=He(Qe);Ee.ael(xt,Xe,Rt,Qt),(W.$rmListeners$=W.$rmListeners$||[]).push(()=>Ee.rel(xt,Xe,Rt,Qt))})},Ke=(z,W)=>oe=>{try{256&z.$flags$?z.$lazyInstance$[W](oe):(z.$queuedListeners$=z.$queuedListeners$||[]).push([W,oe])}catch(be){Sr(be)}},$e=(z,W)=>4&W?le:8&W?ae:16&W?le.body:z,He=z=>0!=(2&z),We="s-id",_t="sty-id",we="http://www.w3.org/1999/xlink",ot=new WeakMap,je=(z,W,oe)=>{let be=Or.get(z);Oe&&oe?(be=be||new CSSStyleSheet,be.replace(W)):be=W,Or.set(z,be)},Ae=(z,W,oe,be)=>{let Qe=nt(W,oe),Xe=Or.get(Qe);if(z=11===z.nodeType?z:le,Xe)if("string"==typeof Xe){let xt,Ct=ot.get(z=z.head||z);if(Ct||ot.set(z,Ct=new Set),!Ct.has(Qe)){if(z.host&&(xt=z.querySelector(`[${_t}="${Qe}"]`)))xt.innerHTML=Xe;else{if(Ee.$cssShim$){xt=Ee.$cssShim$.createHostStyle(be,Qe,Xe,!!(10&W.$flags$));const Rt=xt["s-sc"];Rt&&(Qe=Rt,Ct=null)}else xt=le.createElement("style"),xt.innerHTML=Xe;z.insertBefore(xt,z.querySelector("link"))}Ct&&Ct.add(Qe)}}else z.adoptedStyleSheets.includes(Xe)||(z.adoptedStyleSheets=[...z.adoptedStyleSheets,Xe]);return Qe},nt=(z,W)=>"sc-"+(W&&32&z.$flags$?z.$tagName$+"-"+W:z.$tagName$),st=z=>z.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),Ot=z=>Dr.push(z),Yt=z=>Mr(z).$modeName$,sn={},Rn=z=>"object"==(z=typeof z)||"function"===z,hn=(z,W,...oe)=>{let be=null,Qe=null,Xe=null,Ct=!1,xt=!1,Rt=[];const Qt=Wn=>{for(let Xn=0;Xn<Wn.length;Xn++)be=Wn[Xn],Array.isArray(be)?Qt(be):null!=be&&"boolean"!=typeof be&&((Ct="function"!=typeof z&&!Rn(be))&&(be=String(be)),Ct&&xt?Rt[Rt.length-1].$text$+=be:Rt.push(Ct?dr(null,be):be),xt=Ct)};if(Qt(oe),W){W.key&&(Qe=W.key),W.name&&(Xe=W.name);{const Wn=W.className||W.class;Wn&&(W.class="object"!=typeof Wn?Wn:Object.keys(Wn).filter(Xn=>Wn[Xn]).join(" "))}}if("function"==typeof z)return z(null===W?{}:W,Rt,wt);const fn=dr(z,null);return fn.$attrs$=W,Rt.length>0&&(fn.$children$=Rt),fn.$key$=Qe,fn.$name$=Xe,fn},dr=(z,W)=>({$flags$:0,$tag$:z,$text$:W,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),br={},wt={forEach:(z,W)=>z.map(an).forEach(W),map:(z,W)=>z.map(an).map(W).map(jn)},an=z=>({vattrs:z.$attrs$,vchildren:z.$children$,vkey:z.$key$,vname:z.$name$,vtag:z.$tag$,vtext:z.$text$}),jn=z=>{if("function"==typeof z.vtag){const oe=Object.assign({},z.vattrs);return z.vkey&&(oe.key=z.vkey),z.vname&&(oe.name=z.vname),hn(z.vtag,oe,...z.vchildren||[])}const W=dr(z.vtag,z.vtext);return W.$attrs$=z.vattrs,W.$children$=z.vchildren,W.$key$=z.vkey,W.$name$=z.vname,W},tr=(z,W,oe,be,Qe,Xe)=>{if(oe!==be){let Ct=mr(z,W),xt=W.toLowerCase();if("class"===W){const Rt=z.classList,Qt=Nn(oe),fn=Nn(be);Rt.remove(...Qt.filter(Wn=>Wn&&!fn.includes(Wn))),Rt.add(...fn.filter(Wn=>Wn&&!Qt.includes(Wn)))}else if("style"===W){for(const Rt in oe)(!be||null==be[Rt])&&(Rt.includes("-")?z.style.removeProperty(Rt):z.style[Rt]="");for(const Rt in be)(!oe||be[Rt]!==oe[Rt])&&(Rt.includes("-")?z.style.setProperty(Rt,be[Rt]):z.style[Rt]=be[Rt])}else if("key"!==W)if("ref"===W)be&&be(z);else if(Ct||"o"!==W[0]||"n"!==W[1]){const Rt=Rn(be);if((Ct||Rt&&null!==be)&&!Qe)try{if(z.tagName.includes("-"))z[W]=be;else{let fn=null==be?"":be;"list"===W?Ct=!1:(null==oe||z[W]!=fn)&&(z[W]=fn)}}catch(fn){}let Qt=!1;xt!==(xt=xt.replace(/^xlink\:?/,""))&&(W=xt,Qt=!0),null==be||!1===be?(!1!==be||""===z.getAttribute(W))&&(Qt?z.removeAttributeNS(we,W):z.removeAttribute(W)):(!Ct||4&Xe||Qe)&&!Rt&&(be=!0===be?"":be,Qt?z.setAttributeNS(we,W,be):z.setAttribute(W,be))}else W="-"===W[2]?W.slice(3):mr(ae,xt)?xt.slice(2):xt[2]+W.slice(3),oe&&Ee.rel(z,W,oe,!1),be&&Ee.ael(z,W,be,!1)}},On=/\s/,Nn=z=>z?z.split(On):[],si=(z,W,oe,be)=>{const Qe=11===W.$elm$.nodeType&&W.$elm$.host?W.$elm$.host:W.$elm$,Xe=z&&z.$attrs$||sn,Ct=W.$attrs$||sn;for(be in Xe)be in Ct||tr(Qe,be,Xe[be],void 0,oe,W.$flags$);for(be in Ct)tr(Qe,be,Xe[be],Ct[be],oe,W.$flags$)},Rr=(z,W,oe,be)=>{let Ct,xt,Rt,Qe=W.$children$[oe],Xe=0;if(_e||(V=!0,"slot"===Qe.$tag$&&(re&&be.classList.add(re+"-s"),Qe.$flags$|=Qe.$children$?2:1)),null!==Qe.$text$)Ct=Qe.$elm$=le.createTextNode(Qe.$text$);else if(1&Qe.$flags$)Ct=Qe.$elm$=le.createTextNode("");else{if(Ie||(Ie="svg"===Qe.$tag$),Ct=Qe.$elm$=le.createElementNS(Ie?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&Qe.$flags$?"slot-fb":Qe.$tag$),Ie&&"foreignObject"===Qe.$tag$&&(Ie=!1),si(null,Qe,Ie),(z=>null!=z)(re)&&Ct["s-si"]!==re&&Ct.classList.add(Ct["s-si"]=re),Qe.$children$)for(Xe=0;Xe<Qe.$children$.length;++Xe)xt=Rr(z,Qe,Xe,Ct),xt&&Ct.appendChild(xt);"svg"===Qe.$tag$?Ie=!1:"foreignObject"===Ct.tagName&&(Ie=!0)}return Ct["s-hn"]=ce,3&Qe.$flags$&&(Ct["s-sr"]=!0,Ct["s-cr"]=Me,Ct["s-sn"]=Qe.$name$||"",Rt=z&&z.$children$&&z.$children$[oe],Rt&&Rt.$tag$===Qe.$tag$&&z.$elm$&&vn(z.$elm$,!1)),Ct},vn=(z,W)=>{Ee.$flags$|=1;const oe=z.childNodes;for(let be=oe.length-1;be>=0;be--){const Qe=oe[be];Qe["s-hn"]!==ce&&Qe["s-ol"]&&(ft(Qe).insertBefore(Qe,Kt(Qe)),Qe["s-ol"].remove(),Qe["s-ol"]=void 0,V=!0),W&&vn(Qe,W)}Ee.$flags$&=-2},Fr=(z,W,oe,be,Qe,Xe)=>{let xt,Ct=z["s-cr"]&&z["s-cr"].parentNode||z;for(Ct.shadowRoot&&Ct.tagName===ce&&(Ct=Ct.shadowRoot);Qe<=Xe;++Qe)be[Qe]&&(xt=Rr(null,oe,Qe,z),xt&&(be[Qe].$elm$=xt,Ct.insertBefore(xt,Kt(W))))},Yr=(z,W,oe,be,Qe)=>{for(;W<=oe;++W)(be=z[W])&&(Qe=be.$elm$,hr(be),ne=!0,Qe["s-ol"]?Qe["s-ol"].remove():vn(Qe,!0),Qe.remove())},er=(z,W)=>z.$tag$===W.$tag$&&("slot"===z.$tag$?z.$name$===W.$name$:z.$key$===W.$key$),Kt=z=>z&&z["s-ol"]||z,ft=z=>(z["s-ol"]?z["s-ol"]:z).parentNode,Kn=(z,W)=>{const oe=W.$elm$=z.$elm$,be=z.$children$,Qe=W.$children$,Xe=W.$tag$,Ct=W.$text$;let xt;null===Ct?(Ie="svg"===Xe||"foreignObject"!==Xe&&Ie,"slot"===Xe||si(z,W,Ie),null!==be&&null!==Qe?((z,W,oe,be)=>{let Gi,di,Qe=0,Xe=0,Ct=0,xt=0,Rt=W.length-1,Qt=W[0],fn=W[Rt],Wn=be.length-1,Xn=be[0],ur=be[Wn];for(;Qe<=Rt&&Xe<=Wn;)if(null==Qt)Qt=W[++Qe];else if(null==fn)fn=W[--Rt];else if(null==Xn)Xn=be[++Xe];else if(null==ur)ur=be[--Wn];else if(er(Qt,Xn))Kn(Qt,Xn),Qt=W[++Qe],Xn=be[++Xe];else if(er(fn,ur))Kn(fn,ur),fn=W[--Rt],ur=be[--Wn];else if(er(Qt,ur))("slot"===Qt.$tag$||"slot"===ur.$tag$)&&vn(Qt.$elm$.parentNode,!1),Kn(Qt,ur),z.insertBefore(Qt.$elm$,fn.$elm$.nextSibling),Qt=W[++Qe],ur=be[--Wn];else if(er(fn,Xn))("slot"===Qt.$tag$||"slot"===ur.$tag$)&&vn(fn.$elm$.parentNode,!1),Kn(fn,Xn),z.insertBefore(fn.$elm$,Qt.$elm$),fn=W[--Rt],Xn=be[++Xe];else{for(Ct=-1,xt=Qe;xt<=Rt;++xt)if(W[xt]&&null!==W[xt].$key$&&W[xt].$key$===Xn.$key$){Ct=xt;break}Ct>=0?(di=W[Ct],di.$tag$!==Xn.$tag$?Gi=Rr(W&&W[Xe],oe,Ct,z):(Kn(di,Xn),W[Ct]=void 0,Gi=di.$elm$),Xn=be[++Xe]):(Gi=Rr(W&&W[Xe],oe,Xe,z),Xn=be[++Xe]),Gi&&ft(Qt.$elm$).insertBefore(Gi,Kt(Qt.$elm$))}Qe>Rt?Fr(z,null==be[Wn+1]?null:be[Wn+1].$elm$,oe,be,Xe,Wn):Xe>Wn&&Yr(W,Qe,Rt)})(oe,be,W,Qe):null!==Qe?(null!==z.$text$&&(oe.textContent=""),Fr(oe,null,W,Qe,0,Qe.length-1)):null!==be&&Yr(be,0,be.length-1),Ie&&"svg"===Xe&&(Ie=!1)):(xt=oe["s-cr"])?xt.parentNode.textContent=Ct:z.$text$!==Ct&&(oe.data=Ct)},Tr=z=>{let oe,be,Qe,Xe,Ct,xt,W=z.childNodes;for(be=0,Qe=W.length;be<Qe;be++)if(oe=W[be],1===oe.nodeType){if(oe["s-sr"])for(Ct=oe["s-sn"],oe.hidden=!1,Xe=0;Xe<Qe;Xe++)if(xt=W[Xe].nodeType,W[Xe]["s-hn"]!==oe["s-hn"]||""!==Ct){if(1===xt&&Ct===W[Xe].getAttribute("slot")){oe.hidden=!0;break}}else if(1===xt||3===xt&&""!==W[Xe].textContent.trim()){oe.hidden=!0;break}Tr(oe)}},Fn=[],bn=z=>{let W,oe,be,Qe,Xe,Ct,xt=0,Rt=z.childNodes,Qt=Rt.length;for(;xt<Qt;xt++){if(W=Rt[xt],W["s-sr"]&&(oe=W["s-cr"])&&oe.parentNode)for(be=oe.parentNode.childNodes,Qe=W["s-sn"],Ct=be.length-1;Ct>=0;Ct--)oe=be[Ct],!oe["s-cn"]&&!oe["s-nr"]&&oe["s-hn"]!==W["s-hn"]&&(gn(oe,Qe)?(Xe=Fn.find(fn=>fn.$nodeToRelocate$===oe),ne=!0,oe["s-sn"]=oe["s-sn"]||Qe,Xe?Xe.$slotRefNode$=W:Fn.push({$slotRefNode$:W,$nodeToRelocate$:oe}),oe["s-sr"]&&Fn.map(fn=>{gn(fn.$nodeToRelocate$,oe["s-sn"])&&(Xe=Fn.find(Wn=>Wn.$nodeToRelocate$===oe),Xe&&!fn.$slotRefNode$&&(fn.$slotRefNode$=Xe.$slotRefNode$))})):Fn.some(fn=>fn.$nodeToRelocate$===oe)||Fn.push({$nodeToRelocate$:oe}));1===W.nodeType&&bn(W)}},gn=(z,W)=>1===z.nodeType?null===z.getAttribute("slot")&&""===W||z.getAttribute("slot")===W:z["s-sn"]===W||""===W,hr=z=>{z.$attrs$&&z.$attrs$.ref&&z.$attrs$.ref(null),z.$children$&&z.$children$.map(hr)},li=z=>Mr(z).$hostElement$,Dn=(z,W,oe)=>{const be=li(z);return{emit:Qe=>yi(be,W,{bubbles:!!(4&oe),composed:!!(2&oe),cancelable:!!(1&oe),detail:Qe})}},yi=(z,W,oe)=>{const be=Ee.ce(W,oe);return z.dispatchEvent(be),be},mn=(z,W)=>{W&&!z.$onRenderResolve$&&W["s-p"]&&W["s-p"].push(new Promise(oe=>z.$onRenderResolve$=oe))},Lt=(z,W)=>{if(z.$flags$|=16,!(4&z.$flags$))return mn(z,z.$ancestorComponent$),Ii(()=>Gt(z,W));z.$flags$|=512},Gt=(z,W)=>{const be=z.$lazyInstance$;let Qe;return W&&(z.$flags$|=256,z.$queuedListeners$&&(z.$queuedListeners$.map(([Xe,Ct])=>et(be,Xe,Ct)),z.$queuedListeners$=null),Qe=et(be,"componentWillLoad")),Qe=Fe(Qe,()=>et(be,"componentWillRender")),Fe(Qe,()=>yn(z,be,W))},yn=function(){var z=(0,_.Z)(function*(W,oe,be){const Qe=W.$hostElement$,Ct=Qe["s-rc"];be&&(z=>{const W=z.$cmpMeta$,oe=z.$hostElement$,be=W.$flags$,Xe=Ae(at&&oe.shadowRoot?oe.shadowRoot:oe.getRootNode(),W,z.$modeName$,oe);10&be&&(oe["s-sc"]=Xe,oe.classList.add(Xe+"-h"),2&be&&oe.classList.add(Xe+"-s"))})(W);rn(W,oe),Ee.$cssShim$&&Ee.$cssShim$.updateHost(Qe),Ct&&(Ct.map(Rt=>Rt()),Qe["s-rc"]=void 0);{const Rt=Qe["s-p"],Qt=()=>un(W);0===Rt.length?Qt():(Promise.all(Rt).then(Qt),W.$flags$|=4,Rt.length=0)}});return function(oe,be,Qe){return z.apply(this,arguments)}}(),rn=(z,W,oe)=>{try{W=W.render&&W.render(),z.$flags$&=-17,z.$flags$|=2,((z,W)=>{const oe=z.$hostElement$,be=z.$cmpMeta$,Qe=z.$vnode$||dr(null,null),Xe=(z=>z&&z.$tag$===br)(W)?W:hn(null,null,W);if(ce=oe.tagName,be.$attrsToReflect$&&(Xe.$attrs$=Xe.$attrs$||{},be.$attrsToReflect$.map(([Ct,xt])=>Xe.$attrs$[xt]=oe[Ct])),Xe.$tag$=null,Xe.$flags$|=4,z.$vnode$=Xe,Xe.$elm$=Qe.$elm$=oe.shadowRoot||oe,re=oe["s-sc"],Me=oe["s-cr"],_e=at&&0!=(1&be.$flags$),ne=!1,Kn(Qe,Xe),Ee.$flags$|=1,V){bn(Xe.$elm$);let Ct,xt,Rt,Qt,fn,Wn,Xn=0;for(;Xn<Fn.length;Xn++)Ct=Fn[Xn],xt=Ct.$nodeToRelocate$,xt["s-ol"]||(Rt=le.createTextNode(""),Rt["s-nr"]=xt,xt.parentNode.insertBefore(xt["s-ol"]=Rt,xt));for(Xn=0;Xn<Fn.length;Xn++)if(Ct=Fn[Xn],xt=Ct.$nodeToRelocate$,Ct.$slotRefNode$){for(Qt=Ct.$slotRefNode$.parentNode,fn=Ct.$slotRefNode$.nextSibling,Rt=xt["s-ol"];Rt=Rt.previousSibling;)if(Wn=Rt["s-nr"],Wn&&Wn["s-sn"]===xt["s-sn"]&&Qt===Wn.parentNode&&(Wn=Wn.nextSibling,!Wn||!Wn["s-nr"])){fn=Wn;break}(!fn&&Qt!==xt.parentNode||xt.nextSibling!==fn)&&xt!==fn&&(!xt["s-hn"]&&xt["s-ol"]&&(xt["s-hn"]=xt["s-ol"].parentNode.nodeName),Qt.insertBefore(xt,fn))}else 1===xt.nodeType&&(xt.hidden=!0)}ne&&Tr(Xe.$elm$),Ee.$flags$&=-2,Fn.length=0})(z,W)}catch(be){Sr(be,z.$hostElement$)}return null},un=z=>{const oe=z.$hostElement$,Qe=z.$lazyInstance$,Xe=z.$ancestorComponent$;64&z.$flags$?et(Qe,"componentDidUpdate"):(z.$flags$|=64,ve(oe),et(Qe,"componentDidLoad"),z.$onReadyResolve$(oe),Xe||ke()),z.$onInstanceResolve$(oe),z.$onRenderResolve$&&(z.$onRenderResolve$(),z.$onRenderResolve$=void 0),512&z.$flags$&&ki(()=>Lt(z,!1)),z.$flags$&=-517},Ue=z=>{{const W=Mr(z),oe=W.$hostElement$.isConnected;return oe&&2==(18&W.$flags$)&&Lt(W,!1),oe}},ke=z=>{ve(le.documentElement),ki(()=>yi(ae,"appload",{detail:{namespace:"ionic"}}))},et=(z,W,oe)=>{if(z&&z[W])try{return z[W](oe)}catch(be){Sr(be)}},Fe=(z,W)=>z&&z.then?z.then(W):W(),ve=z=>z.classList.add("hydrated"),vt=(z,W,oe,be,Qe,Xe,Ct)=>{let xt,Rt,Qt,fn;if(1===Xe.nodeType){for(xt=Xe.getAttribute("c-id"),xt&&(Rt=xt.split("."),(Rt[0]===Ct||"0"===Rt[0])&&(Qt={$flags$:0,$hostId$:Rt[0],$nodeId$:Rt[1],$depth$:Rt[2],$index$:Rt[3],$tag$:Xe.tagName.toLowerCase(),$elm$:Xe,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},W.push(Qt),Xe.removeAttribute("c-id"),z.$children$||(z.$children$=[]),z.$children$[Qt.$index$]=Qt,z=Qt,be&&"0"===Qt.$depth$&&(be[Qt.$index$]=Qt.$elm$))),fn=Xe.childNodes.length-1;fn>=0;fn--)vt(z,W,oe,be,Qe,Xe.childNodes[fn],Ct);if(Xe.shadowRoot)for(fn=Xe.shadowRoot.childNodes.length-1;fn>=0;fn--)vt(z,W,oe,be,Qe,Xe.shadowRoot.childNodes[fn],Ct)}else if(8===Xe.nodeType)Rt=Xe.nodeValue.split("."),(Rt[1]===Ct||"0"===Rt[1])&&(xt=Rt[0],Qt={$flags$:0,$hostId$:Rt[1],$nodeId$:Rt[2],$depth$:Rt[3],$index$:Rt[4],$elm$:Xe,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===xt?(Qt.$elm$=Xe.nextSibling,Qt.$elm$&&3===Qt.$elm$.nodeType&&(Qt.$text$=Qt.$elm$.textContent,W.push(Qt),Xe.remove(),z.$children$||(z.$children$=[]),z.$children$[Qt.$index$]=Qt,be&&"0"===Qt.$depth$&&(be[Qt.$index$]=Qt.$elm$))):Qt.$hostId$===Ct&&("s"===xt?(Qt.$tag$="slot",Xe["s-sn"]=Rt[5]?Qt.$name$=Rt[5]:"",Xe["s-sr"]=!0,be&&(Qt.$elm$=le.createElement(Qt.$tag$),Qt.$name$&&Qt.$elm$.setAttribute("name",Qt.$name$),Xe.parentNode.insertBefore(Qt.$elm$,Xe),Xe.remove(),"0"===Qt.$depth$&&(be[Qt.$index$]=Qt.$elm$)),oe.push(Qt),z.$children$||(z.$children$=[]),z.$children$[Qt.$index$]=Qt):"r"===xt&&(be?Xe.remove():(Qe["s-cr"]=Xe,Xe["s-cn"]=!0))));else if(z&&"style"===z.$tag$){const Wn=dr(null,Xe.textContent);Wn.$elm$=Xe,Wn.$index$="0",z.$children$=[Wn]}},qt=(z,W)=>{if(1===z.nodeType){let oe=0;for(;oe<z.childNodes.length;oe++)qt(z.childNodes[oe],W);if(z.shadowRoot)for(oe=0;oe<z.shadowRoot.childNodes.length;oe++)qt(z.shadowRoot.childNodes[oe],W)}else if(8===z.nodeType){const oe=z.nodeValue.split(".");"o"===oe[0]&&(W.set(oe[1]+"."+oe[2],z),z.nodeValue="",z["s-en"]=oe[3])}},En=(z,W,oe)=>{if(W.$members$){z.watchers&&(W.$watchers$=z.watchers);const be=Object.entries(W.$members$),Qe=z.prototype;if(be.map(([Xe,[Ct]])=>{31&Ct||2&oe&&32&Ct?Object.defineProperty(Qe,Xe,{get(){return((z,W)=>Mr(this).$instanceValues$.get(W))(0,Xe)},set(xt){((z,W,oe,be)=>{const Qe=Mr(z),Xe=Qe.$hostElement$,Ct=Qe.$instanceValues$.get(W),xt=Qe.$flags$,Rt=Qe.$lazyInstance$;if(oe=((z,W)=>null==z||Rn(z)?z:4&W?"false"!==z&&(""===z||!!z):2&W?parseFloat(z):1&W?String(z):z)(oe,be.$members$[W][0]),(!(8&xt)||void 0===Ct)&&oe!==Ct&&(Qe.$instanceValues$.set(W,oe),Rt)){if(be.$watchers$&&128&xt){const Qt=be.$watchers$[W];Qt&&Qt.map(fn=>{try{Rt[fn](oe,Ct,W)}catch(Wn){Sr(Wn,Xe)}})}2==(18&xt)&&Lt(Qe,!1)}})(this,Xe,xt,W)},configurable:!0,enumerable:!0}):1&oe&&64&Ct&&Object.defineProperty(Qe,Xe,{value(...xt){const Rt=Mr(this);return Rt.$onInstancePromise$.then(()=>Rt.$lazyInstance$[Xe](...xt))}})}),1&oe){const Xe=new Map;Qe.attributeChangedCallback=function(Ct,xt,Rt){Ee.jmp(()=>{const Qt=Xe.get(Ct);this[Qt]=(null!==Rt||"boolean"!=typeof this[Qt])&&Rt})},z.observedAttributes=be.filter(([Ct,xt])=>15&xt[0]).map(([Ct,xt])=>{const Rt=xt[1]||Ct;return Xe.set(Rt,Ct),512&xt[0]&&W.$attrsToReflect$.push([Ct,Rt]),Rt})}}return z},vr=function(){var z=(0,_.Z)(function*(W,oe,be,Qe,Xe){if(0==(32&oe.$flags$)){{if(oe.$flags$|=32,(Xe=Jr(be)).then){const Qt=()=>{};Xe=yield Xe,Qt()}Xe.isProxied||(be.$watchers$=Xe.watchers,En(Xe,be,2),Xe.isProxied=!0);const Rt=()=>{};oe.$flags$|=8;try{new Xe(oe)}catch(Qt){Sr(Qt)}oe.$flags$&=-9,oe.$flags$|=128,Rt(),Lr(oe.$lazyInstance$)}if(Xe.style){let Rt=Xe.style;"string"!=typeof Rt&&(Rt=Rt[oe.$modeName$=(z=>Dr.map(W=>W(z)).find(W=>!!W))(W)]);const Qt=nt(be,oe.$modeName$);if(!Or.has(Qt)){const fn=()=>{};8&be.$flags$&&(Rt=yield L.e(8810).then(L.bind(L,8810)).then(Wn=>Wn.scopeCss(Rt,Qt,!1))),je(Qt,Rt,!!(1&be.$flags$)),fn()}}}const Ct=oe.$ancestorComponent$,xt=()=>Lt(oe,!0);Ct&&Ct["s-rc"]?Ct["s-rc"].push(xt):xt()});return function(oe,be,Qe,Xe,Ct){return z.apply(this,arguments)}}(),Lr=z=>{et(z,"connectedCallback")},jt=z=>{const W=z["s-cr"]=le.createComment("");W["s-cn"]=!0,z.insertBefore(W,z.firstChild)},sr=(z,W={})=>{const be=[],Qe=W.exclude||[],Xe=ae.customElements,Ct=le.head,xt=Ct.querySelector("meta[charset]"),Rt=le.createElement("style"),Qt=[],fn=le.querySelectorAll(`[${_t}]`);let Wn,Xn=!0,ur=0;for(Object.assign(Ee,W),Ee.$resourcesUrl$=new URL(W.resourcesUrl||"./",le.baseURI).href,Ee.$flags$|=2;ur<fn.length;ur++)je(fn[ur].getAttribute(_t),st(fn[ur].innerHTML),!0);z.map(Gi=>Gi[1].map(di=>{const bi={$flags$:di[0],$tagName$:di[1],$members$:di[2],$listeners$:di[3]};bi.$members$=di[2],bi.$listeners$=di[3],bi.$attrsToReflect$=[],bi.$watchers$={},!at&&1&bi.$flags$&&(bi.$flags$|=8);const _i=bi.$tagName$,ws=class extends HTMLElement{constructor(Zr){super(Zr),Mn(Zr=this,bi),1&bi.$flags$&&(at?Zr.attachShadow({mode:"open",delegatesFocus:!!(16&bi.$flags$)}):"shadowRoot"in Zr||(Zr.shadowRoot=Zr))}connectedCallback(){Wn&&(clearTimeout(Wn),Wn=null),Xn?Qt.push(this):Ee.jmp(()=>(z=>{if(0==(1&Ee.$flags$)){const W=Mr(z),oe=W.$cmpMeta$,be=()=>{};if(1&W.$flags$)Ye(z,W,oe.$listeners$),Lr(W.$lazyInstance$);else{let Qe;if(W.$flags$|=1,Qe=z.getAttribute(We),Qe){if(at&&1&oe.$flags$){const Xe=Ae(z.shadowRoot,oe,z.getAttribute("s-mode"));z.classList.remove(Xe+"-h",Xe+"-s")}((z,W,oe,be)=>{const Xe=z.shadowRoot,Ct=[],Rt=Xe?[]:null,Qt=be.$vnode$=dr(W,null);Ee.$orgLocNodes$||qt(le.body,Ee.$orgLocNodes$=new Map),z[We]=oe,z.removeAttribute(We),vt(Qt,Ct,[],Rt,z,z,oe),Ct.map(fn=>{const Wn=fn.$hostId$+"."+fn.$nodeId$,Xn=Ee.$orgLocNodes$.get(Wn),ur=fn.$elm$;Xn&&at&&""===Xn["s-en"]&&Xn.parentNode.insertBefore(ur,Xn.nextSibling),Xe||(ur["s-hn"]=W,Xn&&(ur["s-ol"]=Xn,ur["s-ol"]["s-nr"]=ur)),Ee.$orgLocNodes$.delete(Wn)}),Xe&&Rt.map(fn=>{fn&&Xe.appendChild(fn)})})(z,oe.$tagName$,Qe,W)}Qe||12&oe.$flags$&&jt(z);{let Xe=z;for(;Xe=Xe.parentNode||Xe.host;)if(1===Xe.nodeType&&Xe.hasAttribute("s-id")&&Xe["s-p"]||Xe["s-p"]){mn(W,W.$ancestorComponent$=Xe);break}}oe.$members$&&Object.entries(oe.$members$).map(([Xe,[Ct]])=>{if(31&Ct&&z.hasOwnProperty(Xe)){const xt=z[Xe];delete z[Xe],z[Xe]=xt}}),ki(()=>vr(z,W,oe))}be()}})(this))}disconnectedCallback(){Ee.jmp(()=>(z=>{if(0==(1&Ee.$flags$)){const W=Mr(z),oe=W.$lazyInstance$;W.$rmListeners$&&(W.$rmListeners$.map(be=>be()),W.$rmListeners$=void 0),Ee.$cssShim$&&Ee.$cssShim$.removeHost(z),et(oe,"disconnectedCallback")}})(this))}componentOnReady(){return Mr(this).$onReadyPromise$}};bi.$lazyBundleId$=Gi[0],!Qe.includes(_i)&&!Xe.get(_i)&&(be.push(_i),Xe.define(_i,En(ws,bi,1)))})),Rt.innerHTML=be+"{visibility:hidden}.hydrated{visibility:inherit}",Rt.setAttribute("data-styles",""),Ct.insertBefore(Rt,xt?xt.nextSibling:Ct.firstChild),Xn=!1,Qt.length?Qt.map(Gi=>Gi.connectedCallback()):Ee.jmp(()=>Wn=setTimeout(ke,30))},qn=z=>{const W=new URL(z,Ee.$resourcesUrl$);return W.origin!==ae.location.origin?W.href:W.pathname},ln=new WeakMap,Mr=z=>ln.get(z),cn=(z,W)=>ln.set(W.$lazyInstance$=z,W),Mn=(z,W)=>{const oe={$flags$:0,$hostElement$:z,$cmpMeta$:W,$instanceValues$:new Map};return oe.$onInstancePromise$=new Promise(be=>oe.$onInstanceResolve$=be),oe.$onReadyPromise$=new Promise(be=>oe.$onReadyResolve$=be),z["s-p"]=[],z["s-rc"]=[],Ye(z,oe,W.$listeners$),ln.set(z,oe)},mr=(z,W)=>W in z,Sr=(z,W)=>(0,console.error)(z,W),Wi=new Map,Jr=(z,W,oe)=>{const be=z.$tagName$.replace(/-/g,"_"),Qe=z.$lazyBundleId$,Xe=Wi.get(Qe);return Xe?Xe[be]:L(863)(`./${Qe}.entry.js`).then(Ct=>(Wi.set(Qe,Ct),Ct[be]),Sr)},Or=new Map,Dr=[],Vr=[],rs=[],kn=(z,W)=>oe=>{z.push(oe),ie||(ie=!0,W&&4&Ee.$flags$?ki(Kr):Ee.raf(Kr))},Cs=z=>{for(let W=0;W<z.length;W++)try{z[W](performance.now())}catch(oe){Sr(oe)}z.length=0},Kr=()=>{Cs(Vr),Cs(rs),(ie=Vr.length>0)&&Ee.raf(Kr)},ki=z=>xe().then(z),Di=kn(Vr,!1),Ii=kn(rs,!0),ut={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},4425:(Xt,it,L)=>{"use strict";L.d(it,{L:()=>Me,a:()=>ce,b:()=>_e,c:()=>ne,d:()=>V,e:()=>E,g:()=>Te,l:()=>ct,s:()=>We,t:()=>ae});var _=L(8239),A=L(3150),re=L(1567);const Me="ionViewWillEnter",ce="ionViewDidEnter",_e="ionViewWillLeave",ne="ionViewDidLeave",V="ionViewWillUnload",ae=he=>new Promise((we,qe)=>{(0,A.c)(()=>{Ne(he),le(he).then(Ve=>{Ve.animation&&Ve.animation.destroy(),Ee(he),we(Ve)},Ve=>{Ee(he),qe(Ve)})})}),Ne=he=>{const we=he.enteringEl,qe=he.leavingEl;_t(we,qe,he.direction),he.showGoBack?we.classList.add("can-go-back"):we.classList.remove("can-go-back"),We(we,!1),we.style.setProperty("pointer-events","none"),qe&&(We(qe,!1),qe.style.setProperty("pointer-events","none"))},le=function(){var he=(0,_.Z)(function*(we){const qe=yield at(we);return qe&&A.B.isBrowser?xe(qe,we):Oe(we)});return function(qe){return he.apply(this,arguments)}}(),Ee=he=>{const we=he.enteringEl,qe=he.leavingEl;we.classList.remove("ion-page-invisible"),we.style.removeProperty("pointer-events"),void 0!==qe&&(qe.classList.remove("ion-page-invisible"),qe.style.removeProperty("pointer-events"))},at=function(){var he=(0,_.Z)(function*(we){return we.leavingEl&&we.animated&&0!==we.duration?we.animationBuilder?we.animationBuilder:"ios"===we.mode?(yield Promise.resolve().then(L.bind(L,7689))).iosTransitionAnimation:(yield Promise.resolve().then(L.bind(L,5392))).mdTransitionAnimation:void 0});return function(qe){return he.apply(this,arguments)}}(),xe=function(){var he=(0,_.Z)(function*(we,qe){yield Ye(qe,!0);const Ve=we(qe.baseEl,qe);He(qe.enteringEl,qe.leavingEl);const ot=yield $e(Ve,qe);return qe.progressCallback&&qe.progressCallback(void 0),ot&&gt(qe.enteringEl,qe.leavingEl),{hasCompleted:ot,animation:Ve}});return function(qe,Ve){return he.apply(this,arguments)}}(),Oe=function(){var he=(0,_.Z)(function*(we){const qe=we.enteringEl,Ve=we.leavingEl;return yield Ye(we,!1),He(qe,Ve),gt(qe,Ve),{hasCompleted:!0}});return function(qe){return he.apply(this,arguments)}}(),Ye=function(){var he=(0,_.Z)(function*(we,qe){const ot=(void 0!==we.deepWait?we.deepWait:qe)?[E(we.enteringEl),E(we.leavingEl)]:[bt(we.enteringEl),bt(we.leavingEl)];yield Promise.all(ot),yield Ke(we.viewIsReady,we.enteringEl)});return function(qe,Ve){return he.apply(this,arguments)}}(),Ke=function(){var he=(0,_.Z)(function*(we,qe){we&&(yield we(qe))});return function(qe,Ve){return he.apply(this,arguments)}}(),$e=(he,we)=>{const qe=we.progressCallback,Ve=new Promise(ot=>{he.onFinish(je=>ot(1===je))});return qe?(he.progressStart(!0),qe(he)):he.play(),Ve},He=(he,we)=>{ct(we,_e),ct(he,Me)},gt=(he,we)=>{ct(he,ce),ct(we,ne)},ct=(he,we)=>{if(he){const qe=new CustomEvent(we,{bubbles:!1,cancelable:!1});he.dispatchEvent(qe)}},bt=he=>he?new Promise(we=>(0,re.c)(he,we)):Promise.resolve(),E=function(){var he=(0,_.Z)(function*(we){const qe=we;if(qe){if(null!=qe.componentOnReady&&null!=(yield qe.componentOnReady()))return;yield Promise.all(Array.from(qe.children).map(E))}});return function(qe){return he.apply(this,arguments)}}(),We=(he,we)=>{we?(he.setAttribute("aria-hidden","true"),he.classList.add("ion-page-hidden")):(he.hidden=!1,he.removeAttribute("aria-hidden"),he.classList.remove("ion-page-hidden"))},_t=(he,we,qe)=>{void 0!==he&&(he.style.zIndex="back"===qe?"99":"101"),void 0!==we&&(we.style.zIndex="100")},Te=he=>he.classList.contains("ion-page")?he:he.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||he},7585:(Xt,it,L)=>{"use strict";L.d(it,{a:()=>re,b:()=>ot,c:()=>E,g:()=>A,i:()=>je});var _=L(3150);const A=Ae=>Me(Ae),re=(Ae,ze)=>("string"==typeof Ae&&(ze=Ae,Ae=void 0),A(Ae).includes(ze)),Me=(Ae=window)=>{if(void 0===Ae)return[];Ae.Ionic=Ae.Ionic||{};let ze=Ae.Ionic.platforms;return null==ze&&(ze=Ae.Ionic.platforms=ce(Ae),ze.forEach(nt=>Ae.document.documentElement.classList.add(`plt-${nt}`))),ze},ce=Ae=>Object.keys(ct).filter(ze=>ct[ze](Ae)),ne=Ae=>!!(He(Ae,/iPad/i)||He(Ae,/Macintosh/i)&&Ee(Ae)),ie=Ae=>He(Ae,/android|sink/i),Ee=Ae=>gt(Ae,"(any-pointer:coarse)"),xe=Ae=>Oe(Ae)||Ye(Ae),Oe=Ae=>!!(Ae.cordova||Ae.phonegap||Ae.PhoneGap),Ye=Ae=>{const ze=Ae.Capacitor;return!(!ze||!ze.isNative)},He=(Ae,ze)=>ze.test(Ae.navigator.userAgent),gt=(Ae,ze)=>Ae.matchMedia(ze).matches,ct={ipad:ne,iphone:Ae=>He(Ae,/iPhone/i),ios:Ae=>He(Ae,/iPhone|iPod/i)||ne(Ae),android:ie,phablet:Ae=>{const ze=Ae.innerWidth,nt=Ae.innerHeight,st=Math.min(ze,nt),mt=Math.max(ze,nt);return st>390&&st<520&&mt>620&&mt<800},tablet:Ae=>{const ze=Ae.innerWidth,nt=Ae.innerHeight,st=Math.min(ze,nt),mt=Math.max(ze,nt);return ne(Ae)||(Ae=>ie(Ae)&&!He(Ae,/mobile/i))(Ae)||st>460&&st<820&&mt>780&&mt<1400},cordova:Oe,capacitor:Ye,electron:Ae=>He(Ae,/electron/i),pwa:Ae=>!(!Ae.matchMedia("(display-mode: standalone)").matches&&!Ae.navigator.standalone),mobile:Ee,mobileweb:Ae=>Ee(Ae)&&!xe(Ae),desktop:Ae=>!Ee(Ae),hybrid:xe};class bt{constructor(){this.m=new Map}reset(ze){this.m=new Map(Object.entries(ze))}get(ze,nt){const st=this.m.get(ze);return void 0!==st?st:nt}getBoolean(ze,nt=!1){const st=this.m.get(ze);return void 0===st?nt:"string"==typeof st?"true"===st:!!st}getNumber(ze,nt){const st=parseFloat(this.m.get(ze));return isNaN(st)?void 0!==nt?nt:NaN:st}set(ze,nt){this.m.set(ze,nt)}}const E=new bt,qe="ionic-persist-config";let Ve;const ot=Ae=>Ae&&(0,_.g)(Ae)||Ve,je=(Ae={})=>{if("undefined"==typeof window)return;const ze=window.document,nt=window,st=nt.Ionic=nt.Ionic||{};Me(nt);const mt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(Ae=>{try{const ze=Ae.sessionStorage.getItem(qe);return null!==ze?JSON.parse(ze):{}}catch(ze){return{}}})(nt)),{persistConfig:!1}),st.config),(Ae=>{const ze={};return Ae.location.search.slice(1).split("&").map(nt=>nt.split("=")).map(([nt,st])=>[decodeURIComponent(nt),decodeURIComponent(st)]).filter(([nt])=>((Ae,ze)=>Ae.substr(0,ze.length)===ze)(nt,"ionic:")).map(([nt,st])=>[nt.slice("ionic:".length),st]).forEach(([nt,st])=>{ze[nt]=st}),ze})(nt)),Ae);E.reset(mt),E.getBoolean("persistConfig")&&((Ae,ze)=>{try{Ae.sessionStorage.setItem(qe,JSON.stringify(ze))}catch(nt){return}})(nt,mt),st.config=E,st.mode=Ve=E.get("mode",ze.documentElement.getAttribute("mode")||(re(nt,"ios")?"ios":"md")),E.set("mode",Ve),ze.documentElement.setAttribute("mode",Ve),ze.documentElement.classList.add(Ve),E.getBoolean("_testing")&&E.set("animated",!1);const Ot=sn=>sn.tagName&&sn.tagName.startsWith("ION-"),Yt=sn=>["ios","md"].includes(sn);(0,_.s)(sn=>{for(;sn;){const Ft=sn.mode||sn.getAttribute("mode");if(Ft){if(Yt(Ft))return Ft;Ot(sn)&&console.warn('Invalid ionic mode: "'+Ft+'", expected: "ios" or "md"')}sn=sn.parentElement}return Ve})}},7689:(Xt,it,L)=>{"use strict";L.r(it),L.d(it,{iosTransitionAnimation:()=>Ne,shadow:()=>_e});var _=L(7235),A=L(4425);L(3150);const ce=le=>document.querySelector(`${le}.ion-cloned-element`),_e=le=>le.shadowRoot||le,ne=le=>{const Ee="ION-TABS"===le.tagName?le:le.querySelector("ion-tabs"),at="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=Ee){const xe=Ee.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=xe?xe.querySelector(at):null}return le.querySelector(at)},V=(le,Ee)=>{const at="ION-TABS"===le.tagName?le:le.querySelector("ion-tabs");let xe=[];if(null!=at){const Oe=at.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=Oe&&(xe=Oe.querySelectorAll("ion-buttons"))}else xe=le.querySelectorAll("ion-buttons");for(const Oe of xe){const Ye=Oe.closest("ion-header"),Ke=Ye&&!Ye.classList.contains("header-collapse-condense-inactive"),$e=Oe.querySelector("ion-back-button"),He=Oe.classList.contains("buttons-collapse"),gt="start"===Oe.slot||""===Oe.slot;if(null!==$e&&gt&&(He&&Ke&&Ee||!He))return $e}return null},ie=(le,Ee,at,xe,Oe,Ye)=>{const Ke=Ee?`calc(100% - ${Ye.right+4}px)`:Ye.left-4+"px",$e=Ee?"7px":"-7px",He=Ee?"-4px":"4px",gt=Ee?"-4px":"4px",ct=Ee?"right":"left",bt=Ee?"left":"right",_t=at?[{offset:0,opacity:1,transform:`translate3d(${He}, ${Ye.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${$e}, ${Oe.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${$e}, ${Oe.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${He}, ${Ye.top-46}px, 0) scale(1)`}],we=at?[{offset:0,opacity:1,transform:`translate3d(${gt}, ${Ye.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${gt}, ${Ye.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${gt}, ${Ye.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${gt}, ${Ye.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${gt}, ${Ye.top-46}px, 0) scale(1)`}],qe=(0,_.c)(),Ve=(0,_.c)(),ot=ce("ion-back-button"),je=_e(ot).querySelector(".button-text"),Ae=_e(ot).querySelector("ion-icon");ot.text=xe.text,ot.mode=xe.mode,ot.icon=xe.icon,ot.color=xe.color,ot.disabled=xe.disabled,ot.style.setProperty("display","block"),ot.style.setProperty("position","fixed"),Ve.addElement(Ae),qe.addElement(je),qe.beforeStyles({"transform-origin":`${ct} center`}).beforeAddWrite(()=>{xe.style.setProperty("display","none"),ot.style.setProperty(ct,Ke)}).afterAddWrite(()=>{xe.style.setProperty("display",""),ot.style.setProperty("display","none"),ot.style.removeProperty(ct)}).keyframes(_t),Ve.beforeStyles({"transform-origin":`${bt} center`}).keyframes(we),le.addAnimation([qe,Ve])},ae=(le,Ee,at,xe,Oe,Ye)=>{const Ke=Ee?`calc(100% - ${Oe.right}px)`:`${Oe.left}px`,$e=Ee?"-18px":"18px",He=Ee?"right":"left",bt=at?[{offset:0,opacity:0,transform:`translate3d(${$e}, ${Ye.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${Oe.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${Oe.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${$e}, ${Ye.top-4}px, 0) scale(0.5)`}],E=ce("ion-title"),We=(0,_.c)();E.innerText=xe.innerText,E.size=xe.size,E.color=xe.color,We.addElement(E),We.beforeStyles({"transform-origin":`${He} center`,height:"46px",display:"",position:"relative",[He]:Ke}).beforeAddWrite(()=>{xe.style.setProperty("display","none")}).afterAddWrite(()=>{xe.style.setProperty("display",""),E.style.setProperty("display","none")}).keyframes(bt),le.addAnimation(We)},Ne=(le,Ee)=>{try{const at="cubic-bezier(0.32,0.72,0,1)",xe="opacity",Oe="transform",Ye="0%",Ke=.8,$e="rtl"===le.ownerDocument.dir,He=$e?"-99.5%":"99.5%",gt=$e?"33%":"-33%",ct=Ee.enteringEl,bt=Ee.leavingEl,E="back"===Ee.direction,We=ct.querySelector(":scope > ion-content"),_t=ct.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),Te=ct.querySelectorAll(":scope > ion-header > ion-toolbar"),he=(0,_.c)(),we=(0,_.c)();if(he.addElement(ct).duration(Ee.duration||540).easing(Ee.easing||at).fill("both").beforeRemoveClass("ion-page-invisible"),bt&&le){const je=(0,_.c)();je.addElement(le),he.addAnimation(je)}if(We||0!==Te.length||0!==_t.length?(we.addElement(We),we.addElement(_t)):we.addElement(ct.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),he.addAnimation(we),E?we.beforeClearStyles([xe]).fromTo("transform",`translateX(${gt})`,`translateX(${Ye})`).fromTo(xe,Ke,1):we.beforeClearStyles([xe]).fromTo("transform",`translateX(${He})`,`translateX(${Ye})`),We){const je=_e(We).querySelector(".transition-effect");if(je){const Ae=je.querySelector(".transition-cover"),ze=je.querySelector(".transition-shadow"),nt=(0,_.c)(),st=(0,_.c)(),mt=(0,_.c)();nt.addElement(je).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),st.addElement(Ae).beforeClearStyles([xe]).fromTo(xe,0,.1),mt.addElement(ze).beforeClearStyles([xe]).fromTo(xe,.03,.7),nt.addAnimation([st,mt]),we.addAnimation([nt])}}const qe=ct.querySelector("ion-header.header-collapse-condense"),{forward:Ve,backward:ot}=((le,Ee,at,xe,Oe)=>{const Ye=V(xe,at),Ke=ne(Oe),$e=ne(xe),He=V(Oe,at),gt=null!==Ye&&null!==Ke&&!at,ct=null!==$e&&null!==He&&at;if(gt){const bt=Ke.getBoundingClientRect(),E=Ye.getBoundingClientRect();ae(le,Ee,at,Ke,bt,E),ie(le,Ee,at,Ye,bt,E)}else if(ct){const bt=$e.getBoundingClientRect(),E=He.getBoundingClientRect();ae(le,Ee,at,$e,bt,E),ie(le,Ee,at,He,bt,E)}return{forward:gt,backward:ct}})(he,$e,E,ct,bt);if(Te.forEach(je=>{const Ae=(0,_.c)();Ae.addElement(je),he.addAnimation(Ae);const ze=(0,_.c)();ze.addElement(je.querySelector("ion-title"));const nt=(0,_.c)(),st=Array.from(je.querySelectorAll("ion-buttons,[menuToggle]")),mt=je.closest("ion-header"),Ot=mt&&mt.classList.contains("header-collapse-condense-inactive");let Yt;Yt=st.filter(E?Rn=>{const hn=Rn.classList.contains("buttons-collapse");return hn&&!Ot||!hn}:Rn=>!Rn.classList.contains("buttons-collapse")),nt.addElement(Yt);const sn=(0,_.c)();sn.addElement(je.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const Ft=(0,_.c)();Ft.addElement(_e(je).querySelector(".toolbar-background"));const Cn=(0,_.c)(),rr=je.querySelector("ion-back-button");if(rr&&Cn.addElement(rr),Ae.addAnimation([ze,nt,sn,Ft,Cn]),nt.fromTo(xe,.01,1),sn.fromTo(xe,.01,1),E)Ot||ze.fromTo("transform",`translateX(${gt})`,`translateX(${Ye})`).fromTo(xe,.01,1),sn.fromTo("transform",`translateX(${gt})`,`translateX(${Ye})`),Cn.fromTo(xe,.01,1);else if(qe||ze.fromTo("transform",`translateX(${He})`,`translateX(${Ye})`).fromTo(xe,.01,1),sn.fromTo("transform",`translateX(${He})`,`translateX(${Ye})`),Ft.beforeClearStyles([xe,"transform"]),(null==mt?void 0:mt.translucent)?Ft.fromTo("transform",$e?"translateX(-100%)":"translateX(100%)","translateX(0px)"):Ft.fromTo(xe,.01,"var(--opacity)"),Ve||Cn.fromTo(xe,.01,1),rr&&!Ve){const hn=(0,_.c)();hn.addElement(_e(rr).querySelector(".button-text")).fromTo("transform",$e?"translateX(-100px)":"translateX(100px)","translateX(0px)"),Ae.addAnimation(hn)}}),bt){const je=(0,_.c)(),Ae=bt.querySelector(":scope > ion-content"),ze=bt.querySelectorAll(":scope > ion-header > ion-toolbar"),nt=bt.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(Ae||0!==ze.length||0!==nt.length?(je.addElement(Ae),je.addElement(nt)):je.addElement(bt.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),he.addAnimation(je),E){je.beforeClearStyles([xe]).fromTo("transform",`translateX(${Ye})`,$e?"translateX(-100%)":"translateX(100%)");const st=(0,A.g)(bt);he.afterAddWrite(()=>{"normal"===he.getDirection()&&st.style.setProperty("display","none")})}else je.fromTo("transform",`translateX(${Ye})`,`translateX(${gt})`).fromTo(xe,1,Ke);if(Ae){const st=_e(Ae).querySelector(".transition-effect");if(st){const mt=st.querySelector(".transition-cover"),Ot=st.querySelector(".transition-shadow"),Yt=(0,_.c)(),sn=(0,_.c)(),Ft=(0,_.c)();Yt.addElement(st).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),sn.addElement(mt).beforeClearStyles([xe]).fromTo(xe,.1,0),Ft.addElement(Ot).beforeClearStyles([xe]).fromTo(xe,.7,.03),Yt.addAnimation([sn,Ft]),je.addAnimation([Yt])}}ze.forEach(st=>{const mt=(0,_.c)();mt.addElement(st);const Ot=(0,_.c)();Ot.addElement(st.querySelector("ion-title"));const Yt=(0,_.c)(),sn=st.querySelectorAll("ion-buttons,[menuToggle]"),Ft=st.closest("ion-header"),Cn=Ft&&Ft.classList.contains("header-collapse-condense-inactive"),rr=Array.from(sn).filter(wt=>{const an=wt.classList.contains("buttons-collapse");return an&&!Cn||!an});Yt.addElement(rr);const Rn=(0,_.c)(),hn=st.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");hn.length>0&&Rn.addElement(hn);const dr=(0,_.c)();dr.addElement(_e(st).querySelector(".toolbar-background"));const br=(0,_.c)(),Qn=st.querySelector("ion-back-button");if(Qn&&br.addElement(Qn),mt.addAnimation([Ot,Yt,Rn,br,dr]),he.addAnimation(mt),br.fromTo(xe,.99,0),Yt.fromTo(xe,.99,0),Rn.fromTo(xe,.99,0),E){if(Cn||Ot.fromTo("transform",`translateX(${Ye})`,$e?"translateX(-100%)":"translateX(100%)").fromTo(xe,.99,0),Rn.fromTo("transform",`translateX(${Ye})`,$e?"translateX(-100%)":"translateX(100%)"),dr.beforeClearStyles([xe,"transform"]),(null==Ft?void 0:Ft.translucent)?dr.fromTo("transform","translateX(0px)",$e?"translateX(-100%)":"translateX(100%)"):dr.fromTo(xe,"var(--opacity)",0),Qn&&!ot){const an=(0,_.c)();an.addElement(_e(Qn).querySelector(".button-text")).fromTo("transform",`translateX(${Ye})`,`translateX(${($e?-124:124)+"px"})`),mt.addAnimation(an)}}else Cn||Ot.fromTo("transform",`translateX(${Ye})`,`translateX(${gt})`).fromTo(xe,.99,0).afterClearStyles([Oe,xe]),Rn.fromTo("transform",`translateX(${Ye})`,`translateX(${gt})`).afterClearStyles([Oe,xe]),br.afterClearStyles([xe]),Ot.afterClearStyles([xe]),Yt.afterClearStyles([xe])})}return he}catch(at){throw at}}},5392:(Xt,it,L)=>{"use strict";L.r(it),L.d(it,{mdTransitionAnimation:()=>Me});var _=L(7235),A=L(4425);L(3150);const Me=(ce,_e)=>{const Ie="back"===_e.direction,ae=_e.leavingEl,Ne=(0,A.g)(_e.enteringEl),le=Ne.querySelector("ion-toolbar"),Ee=(0,_.c)();if(Ee.addElement(Ne).fill("both").beforeRemoveClass("ion-page-invisible"),Ie?Ee.duration(_e.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):Ee.duration(_e.duration||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),le){const at=(0,_.c)();at.addElement(le),Ee.addAnimation(at)}if(ae&&Ie){Ee.duration(_e.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const at=(0,_.c)();at.addElement((0,A.g)(ae)).onFinish(xe=>{1===xe&&at.elements.length>0&&at.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),Ee.addAnimation(at)}return Ee}},3291:(Xt,it,L)=>{"use strict";L.d(it,{B:()=>nt,a:()=>V,b:()=>Ie,c:()=>le,d:()=>_t,e:()=>at,f:()=>he,g:()=>Ve,h:()=>_e,i:()=>je,l:()=>ie,m:()=>ae,p:()=>Ne,s:()=>ze,t:()=>Ee});var _=L(8239),A=L(7585),re=L(3087),Me=L(1567);let ce=0;const _e=new WeakMap,ne=st=>({create:mt=>xe(st,mt),dismiss:(mt,Ot,Yt)=>ct(document,mt,Ot,st,Yt),getTop:()=>(0,_.Z)(function*(){return E(document,st)})()}),V=ne("ion-alert"),Ie=ne("ion-action-sheet"),ie=ne("ion-loading"),ae=ne("ion-modal"),Ne=ne("ion-picker"),le=ne("ion-popover"),Ee=ne("ion-toast"),at=st=>{"undefined"!=typeof document&&gt(document);const mt=ce++;st.overlayIndex=mt,st.hasAttribute("id")||(st.id=`ion-overlay-${mt}`)},xe=(st,mt)=>"undefined"!=typeof customElements?customElements.whenDefined(st).then(()=>{const Ot=document.createElement(st);return Ot.classList.add("overlay-hidden"),Object.assign(Ot,mt),we(document).appendChild(Ot),new Promise(Yt=>(0,Me.c)(Ot,Yt))}):Promise.resolve(),Oe='[tabindex]:not([tabindex^="-"]), input:not([type=hidden]):not([tabindex^="-"]), textarea:not([tabindex^="-"]), button:not([tabindex^="-"]), select:not([tabindex^="-"]), .ion-focusable:not([tabindex^="-"])',Ye="input:not([type=hidden]), textarea, button, select",gt=st=>{0===ce&&(ce=1,st.addEventListener("focus",mt=>((st,mt)=>{const Ot=E(mt),Yt=st.target;if(Ot&&Yt)if(Ot===Yt)Ot.lastFocus=void 0;else{const sn=(0,Me.g)(Ot);if(!sn.contains(Yt))return;const Ft=sn.querySelector(".ion-overlay-wrapper");if(!Ft)return;if(Ft.contains(Yt))Ot.lastFocus=Yt;else{const Cn=Ot.lastFocus;((st,mt)=>{let Ot=st.querySelector(Oe);const Yt=Ot&&Ot.shadowRoot;Yt&&(Ot=Yt.querySelector(Ye)||Ot),Ot?Ot.focus():mt.focus()})(Ft,Ot),Cn===mt.activeElement&&((st,mt)=>{const Ot=Array.from(st.querySelectorAll(Oe));let Yt=Ot.length>0?Ot[Ot.length-1]:null;const sn=Yt&&Yt.shadowRoot;sn&&(Yt=sn.querySelector(Ye)||Yt),Yt?Yt.focus():mt.focus()})(Ft,Ot),Ot.lastFocus=mt.activeElement}}})(mt,st),!0),st.addEventListener("ionBackButton",mt=>{const Ot=E(st);Ot&&Ot.backdropDismiss&&mt.detail.register(re.OVERLAY_BACK_BUTTON_PRIORITY,()=>Ot.dismiss(void 0,nt))}),st.addEventListener("keyup",mt=>{if("Escape"===mt.key){const Ot=E(st);Ot&&Ot.backdropDismiss&&Ot.dismiss(void 0,nt)}}))},ct=(st,mt,Ot,Yt,sn)=>{const Ft=E(st,Yt,sn);return Ft?Ft.dismiss(mt,Ot):Promise.reject("overlay does not exist")},E=(st,mt,Ot)=>{const Yt=((st,mt)=>(void 0===mt&&(mt="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(st.querySelectorAll(mt)).filter(Ot=>Ot.overlayIndex>0)))(st,mt);return void 0===Ot?Yt[Yt.length-1]:Yt.find(sn=>sn.id===Ot)},We=(st=!1)=>{const Ot=we(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");!Ot||(st?Ot.setAttribute("aria-hidden","true"):Ot.removeAttribute("aria-hidden"))},_t=function(){var st=(0,_.Z)(function*(mt,Ot,Yt,sn,Ft){if(mt.presented)return;We(!0),mt.presented=!0,mt.willPresent.emit();const Cn=(0,A.b)(mt),rr=mt.enterAnimation?mt.enterAnimation:A.c.get(Ot,"ios"===Cn?Yt:sn);(yield qe(mt,rr,mt.el,Ft))&&mt.didPresent.emit(),"ION-TOAST"!==mt.el.tagName&&Te(mt.el),mt.keyboardClose&&mt.el.focus()});return function(Ot,Yt,sn,Ft,Cn){return st.apply(this,arguments)}}(),Te=function(){var st=(0,_.Z)(function*(mt){let Ot=document.activeElement;if(!Ot)return;const Yt=Ot&&Ot.shadowRoot;Yt&&(Ot=Yt.querySelector(Ye)||Ot),yield mt.onDidDismiss(),Ot.focus()});return function(Ot){return st.apply(this,arguments)}}(),he=function(){var st=(0,_.Z)(function*(mt,Ot,Yt,sn,Ft,Cn,rr){if(!mt.presented)return!1;We(!1),mt.presented=!1;try{mt.el.style.setProperty("pointer-events","none"),mt.willDismiss.emit({data:Ot,role:Yt});const Rn=(0,A.b)(mt),hn=mt.leaveAnimation?mt.leaveAnimation:A.c.get(sn,"ios"===Rn?Ft:Cn);"gesture"!==Yt&&(yield qe(mt,hn,mt.el,rr)),mt.didDismiss.emit({data:Ot,role:Yt}),_e.delete(mt)}catch(Rn){console.error(Rn)}return mt.el.remove(),!0});return function(Ot,Yt,sn,Ft,Cn,rr,Rn){return st.apply(this,arguments)}}(),we=st=>st.querySelector("ion-app")||st.body,qe=function(){var st=(0,_.Z)(function*(mt,Ot,Yt,sn){Yt.classList.remove("overlay-hidden");const Cn=Ot(Yt.shadowRoot||mt.el,sn);(!mt.animated||!A.c.getBoolean("animated",!0))&&Cn.duration(0),mt.keyboardClose&&Cn.beforeAddWrite(()=>{const Rn=Yt.ownerDocument.activeElement;Rn&&Rn.matches("input, ion-input, ion-textarea")&&Rn.blur()});const rr=_e.get(mt)||[];return _e.set(mt,[...rr,Cn]),yield Cn.play(),!0});return function(Ot,Yt,sn,Ft){return st.apply(this,arguments)}}(),Ve=(st,mt)=>{let Ot;const Yt=new Promise(sn=>Ot=sn);return ot(st,mt,sn=>{Ot(sn.detail)}),Yt},ot=(st,mt,Ot)=>{const Yt=sn=>{(0,Me.b)(st,mt,Yt),Ot(sn)};(0,Me.a)(st,mt,Yt)},je=st=>"cancel"===st||st===nt,Ae=st=>st(),ze=(st,mt)=>{if("function"==typeof st)return A.c.get("_zoneGate",Ae)(()=>{try{return st(mt)}catch(Yt){console.error(Yt)}})},nt="backdrop"},2329:(Xt,it,L)=>{"use strict";L.d(it,{Mq:()=>_.getApp,C6:()=>_.getApps,ZF:()=>_.initializeApp,KN:()=>_.registerVersion});var _=L(8026);(0,_.registerVersion)("firebase","9.12.1","app")},7841:(Xt,it,L)=>{"use strict";L.d(it,{Z:()=>_.Z});var _=L(3394);_.Z.registerVersion("firebase","9.12.1","app-compat")},4828:(Xt,it,L)=>{"use strict";L.r(it);var _=L(8239),A=L(3394),re=L(3607),Me=L(3854),ne=(L(8026),L(5422),L(3910));function V(){return window}function ae(){return(ae=(0,_.Z)(function*(Fe,ve,Pe){var vt;const{BuildInfo:qt}=V();(0,re.aq)(ve.sessionId,"AuthEvent did not contain a session ID");const Un=yield Ye(ve.sessionId),Sn={};return(0,re.ar)()?Sn.ibi=qt.packageName:(0,re.as)()?Sn.apn=qt.packageName:(0,re.at)(Fe,"operation-not-supported-in-this-environment"),qt.displayName&&(Sn.appDisplayName=qt.displayName),Sn.sessionId=Un,(0,re.au)(Fe,Pe,ve.type,void 0,null!==(vt=ve.eventId)&&void 0!==vt?vt:void 0,Sn)})).apply(this,arguments)}function le(){return(le=(0,_.Z)(function*(Fe){const{BuildInfo:ve}=V(),Pe={};(0,re.ar)()?Pe.iosBundleId=ve.packageName:(0,re.as)()?Pe.androidPackageName=ve.packageName:(0,re.at)(Fe,"operation-not-supported-in-this-environment"),yield(0,re.av)(Fe,Pe)})).apply(this,arguments)}function xe(){return(xe=(0,_.Z)(function*(Fe,ve,Pe){const{cordova:vt}=V();let qt=()=>{};try{yield new Promise((Un,Sn)=>{let ir=null;function En(){var At;Un();const jt=null===(At=vt.plugins.browsertab)||void 0===At?void 0:At.close;"function"==typeof jt&&jt(),"function"==typeof(null==Pe?void 0:Pe.close)&&Pe.close()}function vr(){ir||(ir=window.setTimeout(()=>{Sn((0,re.aw)(Fe,"redirect-cancelled-by-user"))},2e3))}function Lr(){"visible"===(null==document?void 0:document.visibilityState)&&vr()}ve.addPassiveListener(En),document.addEventListener("resume",vr,!1),(0,re.as)()&&document.addEventListener("visibilitychange",Lr,!1),qt=()=>{ve.removePassiveListener(En),document.removeEventListener("resume",vr,!1),document.removeEventListener("visibilitychange",Lr,!1),ir&&window.clearTimeout(ir)}})}finally{qt()}})).apply(this,arguments)}function Ye(Fe){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,_.Z)(function*(Fe){const ve=$e(Fe),Pe=yield crypto.subtle.digest("SHA-256",ve);return Array.from(new Uint8Array(Pe)).map(qt=>qt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function $e(Fe){if((0,re.aq)(/[0-9a-zA-Z]+/.test(Fe),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(Fe);const ve=new ArrayBuffer(Fe.length),Pe=new Uint8Array(ve);for(let vt=0;vt<Fe.length;vt++)Pe[vt]=Fe.charCodeAt(vt);return Pe}class gt extends re.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(ve=>{this.resolveInialized=ve})}addPassiveListener(ve){this.passiveListeners.add(ve)}removePassiveListener(ve){this.passiveListeners.delete(ve)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(ve){return this.resolveInialized(),this.passiveListeners.forEach(Pe=>Pe(ve)),super.onEvent(ve)}initialized(){var ve=this;return(0,_.Z)(function*(){yield ve.initPromise})()}}function E(Fe){return We.apply(this,arguments)}function We(){return(We=(0,_.Z)(function*(Fe){const ve=yield he()._get(we(Fe));return ve&&(yield he()._remove(we(Fe))),ve})).apply(this,arguments)}function Te(){const Fe=[],ve="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Pe=0;Pe<20;Pe++){const vt=Math.floor(Math.random()*ve.length);Fe.push(ve.charAt(vt))}return Fe.join("")}function he(){return(0,re.ay)(re.b)}function we(Fe){return(0,re.az)("authEvent",Fe.config.apiKey,Fe.name)}function ot(Fe){if(!(null==Fe?void 0:Fe.includes("?")))return{};const[ve,...Pe]=Fe.split("?");return(0,Me.zd)(Pe.join("?"))}function nt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,re.aw)("no-auth-event")}}function sn(){var Fe;return(null===(Fe=null==self?void 0:self.location)||void 0===Fe?void 0:Fe.protocol)||null}function Cn(Fe=(0,Me.z$)()){return!("file:"!==sn()&&"ionic:"!==sn()&&"capacitor:"!==sn()||!Fe.toLowerCase().match(/iphone|ipad|ipod|android/))}function br(){try{const Fe=self.localStorage,ve=re.aI();if(Fe)return Fe.setItem(ve,"1"),Fe.removeItem(ve),!function(Fe=(0,Me.z$)()){return(0,Me.w1)()&&11===(null==document?void 0:document.documentMode)||function(Fe=(0,Me.z$)()){return/Edge\/\d+/.test(Fe)}(Fe)}()||(0,Me.hl)()}catch(Fe){return Qn()&&(0,Me.hl)()}return!1}function Qn(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function wt(){return("http:"===sn()||"https:"===sn()||(0,Me.ru)()||Cn())&&!((0,Me.b$)()||(0,Me.UG)())&&br()&&!Qn()}function an(){return Cn()&&"undefined"!=typeof document}function tr(){return(tr=(0,_.Z)(function*(){return!!an()&&new Promise(Fe=>{const ve=setTimeout(()=>{Fe(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(ve),Fe(!0)})})})).apply(this,arguments)}const Nn={LOCAL:"local",NONE:"none",SESSION:"session"},si=re.ax,Rr="persistence";function Fr(Fe){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,_.Z)(function*(Fe){yield Fe._initializationPromise;const ve=er(),Pe=re.az(Rr,Fe.config.apiKey,Fe.name);ve&&ve.setItem(Pe,Fe._getPersistence())})).apply(this,arguments)}function er(){var Fe;try{return(null===(Fe="undefined"!=typeof window?window:null)||void 0===Fe?void 0:Fe.sessionStorage)||null}catch(ve){return null}}const Kt=re.ax;class ft{constructor(){this.browserResolver=re.ay(re.k),this.cordovaResolver=re.ay(class{constructor(){this._redirectPersistence=re.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=re.aB,this._overrideRedirectResult=re.aC}_initialize(ve){var Pe=this;return(0,_.Z)(function*(){const vt=ve._key();let qt=Pe.eventManagers.get(vt);return qt||(qt=new gt(ve),Pe.eventManagers.set(vt,qt),Pe.attachCallbackListeners(ve,qt)),qt})()}_openPopup(ve){(0,re.at)(ve,"operation-not-supported-in-this-environment")}_openRedirect(ve,Pe,vt,qt){var Un=this;return(0,_.Z)(function*(){!function(Fe){var ve,Pe,vt,qt,Un,Sn,ir,En,vr,Lr;const At=V();(0,re.ax)("function"==typeof(null===(ve=null==At?void 0:At.universalLinks)||void 0===ve?void 0:ve.subscribe),Fe,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,re.ax)(void 0!==(null===(Pe=null==At?void 0:At.BuildInfo)||void 0===Pe?void 0:Pe.packageName),Fe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,re.ax)("function"==typeof(null===(Un=null===(qt=null===(vt=null==At?void 0:At.cordova)||void 0===vt?void 0:vt.plugins)||void 0===qt?void 0:qt.browsertab)||void 0===Un?void 0:Un.openUrl),Fe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,re.ax)("function"==typeof(null===(En=null===(ir=null===(Sn=null==At?void 0:At.cordova)||void 0===Sn?void 0:Sn.plugins)||void 0===ir?void 0:ir.browsertab)||void 0===En?void 0:En.isAvailable),Fe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,re.ax)("function"==typeof(null===(Lr=null===(vr=null==At?void 0:At.cordova)||void 0===vr?void 0:vr.InAppBrowser)||void 0===Lr?void 0:Lr.open),Fe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(ve);const Sn=yield Un._initialize(ve);yield Sn.initialized(),Sn.resetRedirect(),(0,re.aD)(),yield Un._originValidation(ve);const ir=function(Fe,ve,Pe=null){return{type:ve,eventId:Pe,urlResponse:null,sessionId:Te(),postBody:null,tenantId:Fe.tenantId,error:(0,re.aw)(Fe,"no-auth-event")}}(ve,vt,qt);yield function(Fe,ve){return he()._set(we(Fe),ve)}(ve,ir);const En=yield function(Fe,ve,Pe){return ae.apply(this,arguments)}(ve,ir,Pe),vr=yield function(Fe){const{cordova:ve}=V();return new Promise(Pe=>{ve.plugins.browsertab.isAvailable(vt=>{let qt=null;vt?ve.plugins.browsertab.openUrl(Fe):qt=ve.InAppBrowser.open(Fe,(0,re.ap)()?"_blank":"_system","location=yes"),Pe(qt)})})}(En);return function(Fe,ve,Pe){return xe.apply(this,arguments)}(ve,Sn,vr)})()}_isIframeWebStorageSupported(ve,Pe){throw new Error("Method not implemented.")}_originValidation(ve){const Pe=ve._key();return this.originValidationPromises[Pe]||(this.originValidationPromises[Pe]=function(Fe){return le.apply(this,arguments)}(ve)),this.originValidationPromises[Pe]}attachCallbackListeners(ve,Pe){const{universalLinks:vt,handleOpenURL:qt,BuildInfo:Un}=V(),Sn=setTimeout((0,_.Z)(function*(){yield E(ve),Pe.onEvent(nt())}),500),ir=function(){var Lr=(0,_.Z)(function*(At){clearTimeout(Sn);const jt=yield E(ve);let Hn=null;jt&&(null==At?void 0:At.url)&&(Hn=function(Fe,ve){var Pe,vt;const qt=function(Fe){const ve=ot(Fe),Pe=ve.link?decodeURIComponent(ve.link):void 0,vt=ot(Pe).link,qt=ve.deep_link_id?decodeURIComponent(ve.deep_link_id):void 0;return ot(qt).link||qt||vt||Pe||Fe}(ve);if(qt.includes("/__/auth/callback")){const Un=ot(qt),Sn=Un.firebaseError?function(Fe){try{return JSON.parse(Fe)}catch(ve){return null}}(decodeURIComponent(Un.firebaseError)):null,ir=null===(vt=null===(Pe=null==Sn?void 0:Sn.code)||void 0===Pe?void 0:Pe.split("auth/"))||void 0===vt?void 0:vt[1],En=ir?(0,re.aw)(ir):null;return En?{type:Fe.type,eventId:Fe.eventId,tenantId:Fe.tenantId,error:En,urlResponse:null,sessionId:null,postBody:null}:{type:Fe.type,eventId:Fe.eventId,tenantId:Fe.tenantId,sessionId:Fe.sessionId,urlResponse:qt,postBody:null}}return null}(jt,At.url)),Pe.onEvent(Hn||nt())});return function(jt){return Lr.apply(this,arguments)}}();void 0!==vt&&"function"==typeof vt.subscribe&&vt.subscribe(null,ir);const En=qt,vr=`${Un.packageName.toLowerCase()}://`;V().handleOpenURL=function(){var Lr=(0,_.Z)(function*(At){if(At.toLowerCase().startsWith(vr)&&ir({url:At}),"function"==typeof En)try{En(At)}catch(jt){console.error(jt)}});return function(At){return Lr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=re.a,this._completeRedirectFn=re.aB,this._overrideRedirectResult=re.aC}_initialize(ve){var Pe=this;return(0,_.Z)(function*(){return yield Pe.selectUnderlyingResolver(),Pe.assertedUnderlyingResolver._initialize(ve)})()}_openPopup(ve,Pe,vt,qt){var Un=this;return(0,_.Z)(function*(){return yield Un.selectUnderlyingResolver(),Un.assertedUnderlyingResolver._openPopup(ve,Pe,vt,qt)})()}_openRedirect(ve,Pe,vt,qt){var Un=this;return(0,_.Z)(function*(){return yield Un.selectUnderlyingResolver(),Un.assertedUnderlyingResolver._openRedirect(ve,Pe,vt,qt)})()}_isIframeWebStorageSupported(ve,Pe){this.assertedUnderlyingResolver._isIframeWebStorageSupported(ve,Pe)}_originValidation(ve){return this.assertedUnderlyingResolver._originValidation(ve)}get _shouldInitProactively(){return an()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Kt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var ve=this;return(0,_.Z)(function*(){if(ve.underlyingResolver)return;const Pe=yield function(){return tr.apply(this,arguments)}();ve.underlyingResolver=Pe?ve.cordovaResolver:ve.browserResolver})()}}function Kn(Fe){return Fe.unwrap()}function Fn(Fe){return gn(Fe)}function gn(Fe){const{_tokenResponse:ve}=Fe instanceof Me.ZR?Fe.customData:Fe;if(!ve)return null;if(!(Fe instanceof Me.ZR)&&"temporaryProof"in ve&&"phoneNumber"in ve)return re.P.credentialFromResult(Fe);const Pe=ve.providerId;if(!Pe||Pe===re.o.PASSWORD)return null;let vt;switch(Pe){case re.o.GOOGLE:vt=re.Q;break;case re.o.FACEBOOK:vt=re.N;break;case re.o.GITHUB:vt=re.T;break;case re.o.TWITTER:vt=re.W;break;default:const{oauthIdToken:qt,oauthAccessToken:Un,oauthTokenSecret:Sn,pendingToken:ir,nonce:En}=ve;return Un||Sn||qt||ir?ir?Pe.startsWith("saml.")?re.aL._create(Pe,ir):re.J._fromParams({providerId:Pe,signInMethod:Pe,pendingToken:ir,idToken:qt,accessToken:Un}):new re.U(Pe).credential({idToken:qt,accessToken:Un,rawNonce:En}):null}return Fe instanceof Me.ZR?vt.credentialFromError(Fe):vt.credentialFromResult(Fe)}function hr(Fe,ve){return ve.catch(Pe=>{throw Pe instanceof Me.ZR&&function(Fe,ve){var Pe,vt;const qt=null===(Pe=ve.customData)||void 0===Pe?void 0:Pe._tokenResponse;if("auth/multi-factor-auth-required"===(null===(vt=ve)||void 0===vt?void 0:vt.code))ve.resolver=new Dn(Fe,re.an(Fe,ve));else if(qt){const Un=gn(ve),Sn=ve;Un&&(Sn.credential=Un,Sn.tenantId=qt.tenantId||void 0,Sn.email=qt.email||void 0,Sn.phoneNumber=qt.phoneNumber||void 0)}}(Fe,Pe),Pe}).then(Pe=>{const qt=Pe.user;return{operationType:Pe.operationType,credential:Fn(Pe),additionalUserInfo:re.al(Pe),user:yi.getOrCreate(qt)}})}function fr(Fe,ve){return li.apply(this,arguments)}function li(){return(li=(0,_.Z)(function*(Fe,ve){const Pe=yield ve;return{verificationId:Pe.verificationId,confirm:vt=>hr(Fe,Pe.confirm(vt))}})).apply(this,arguments)}class Dn{constructor(ve,Pe){this.resolver=Pe,this.auth=ve.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(ve){return hr(Kn(this.auth),this.resolver.resolveSignIn(ve))}}class yi{constructor(ve){this._delegate=ve,this.multiFactor=re.ao(ve)}static getOrCreate(ve){return yi.USER_MAP.has(ve)||yi.USER_MAP.set(ve,new yi(ve)),yi.USER_MAP.get(ve)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(ve){return this._delegate.getIdTokenResult(ve)}getIdToken(ve){return this._delegate.getIdToken(ve)}linkAndRetrieveDataWithCredential(ve){return this.linkWithCredential(ve)}linkWithCredential(ve){var Pe=this;return(0,_.Z)(function*(){return hr(Pe.auth,re.Z(Pe._delegate,ve))})()}linkWithPhoneNumber(ve,Pe){var vt=this;return(0,_.Z)(function*(){return fr(vt.auth,re.l(vt._delegate,ve,Pe))})()}linkWithPopup(ve){var Pe=this;return(0,_.Z)(function*(){return hr(Pe.auth,re.d(Pe._delegate,ve,ft))})()}linkWithRedirect(ve){var Pe=this;return(0,_.Z)(function*(){return yield Fr(re.aE(Pe.auth)),re.g(Pe._delegate,ve,ft)})()}reauthenticateAndRetrieveDataWithCredential(ve){return this.reauthenticateWithCredential(ve)}reauthenticateWithCredential(ve){var Pe=this;return(0,_.Z)(function*(){return hr(Pe.auth,re._(Pe._delegate,ve))})()}reauthenticateWithPhoneNumber(ve,Pe){return fr(this.auth,re.r(this._delegate,ve,Pe))}reauthenticateWithPopup(ve){return hr(this.auth,re.e(this._delegate,ve,ft))}reauthenticateWithRedirect(ve){var Pe=this;return(0,_.Z)(function*(){return yield Fr(re.aE(Pe.auth)),re.h(Pe._delegate,ve,ft)})()}sendEmailVerification(ve){return re.ab(this._delegate,ve)}unlink(ve){var Pe=this;return(0,_.Z)(function*(){return yield re.ak(Pe._delegate,ve),Pe})()}updateEmail(ve){return re.ag(this._delegate,ve)}updatePassword(ve){return re.ah(this._delegate,ve)}updatePhoneNumber(ve){return re.u(this._delegate,ve)}updateProfile(ve){return re.af(this._delegate,ve)}verifyBeforeUpdateEmail(ve,Pe){return re.ac(this._delegate,ve,Pe)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}yi.USER_MAP=new WeakMap;const mn=re.ax;let Lt=(()=>{class Fe{constructor(Pe,vt){if(this.app=Pe,vt.isInitialized())return this._delegate=vt.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:qt}=Pe.options;mn(qt,"invalid-api-key",{appName:Pe.name}),mn(qt,"invalid-api-key",{appName:Pe.name});const Un="undefined"!=typeof window?ft:void 0;this._delegate=vt.initialize({options:{persistence:yn(qt,Pe.name),popupRedirectResolver:Un}}),this._delegate._updateErrorMap(re.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?yi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Pe){this._delegate.languageCode=Pe}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Pe){this._delegate.tenantId=Pe}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Pe,vt){re.G(this._delegate,Pe,vt)}applyActionCode(Pe){return re.a2(this._delegate,Pe)}checkActionCode(Pe){return re.a3(this._delegate,Pe)}confirmPasswordReset(Pe,vt){return re.a1(this._delegate,Pe,vt)}createUserWithEmailAndPassword(Pe,vt){var qt=this;return(0,_.Z)(function*(){return hr(qt._delegate,re.a5(qt._delegate,Pe,vt))})()}fetchProvidersForEmail(Pe){return this.fetchSignInMethodsForEmail(Pe)}fetchSignInMethodsForEmail(Pe){return re.aa(this._delegate,Pe)}isSignInWithEmailLink(Pe){return re.a8(this._delegate,Pe)}getRedirectResult(){var Pe=this;return(0,_.Z)(function*(){mn(wt(),Pe._delegate,"operation-not-supported-in-this-environment");const vt=yield re.j(Pe._delegate,ft);return vt?hr(Pe._delegate,Promise.resolve(vt)):{credential:null,user:null}})()}addFrameworkForLogging(Pe){!function(Fe,ve){(0,re.aE)(Fe)._logFramework(ve)}(this._delegate,Pe)}onAuthStateChanged(Pe,vt,qt){const{next:Un,error:Sn,complete:ir}=Gt(Pe,vt,qt);return this._delegate.onAuthStateChanged(Un,Sn,ir)}onIdTokenChanged(Pe,vt,qt){const{next:Un,error:Sn,complete:ir}=Gt(Pe,vt,qt);return this._delegate.onIdTokenChanged(Un,Sn,ir)}sendSignInLinkToEmail(Pe,vt){return re.a7(this._delegate,Pe,vt)}sendPasswordResetEmail(Pe,vt){return re.a0(this._delegate,Pe,vt||void 0)}setPersistence(Pe){var vt=this;return(0,_.Z)(function*(){let qt;switch(function(Fe,ve){si(Object.values(Nn).includes(ve),Fe,"invalid-persistence-type"),(0,Me.b$)()?si(ve!==Nn.SESSION,Fe,"unsupported-persistence-type"):(0,Me.UG)()?si(ve===Nn.NONE,Fe,"unsupported-persistence-type"):Qn()?si(ve===Nn.NONE||ve===Nn.LOCAL&&(0,Me.hl)(),Fe,"unsupported-persistence-type"):si(ve===Nn.NONE||br(),Fe,"unsupported-persistence-type")}(vt._delegate,Pe),Pe){case Nn.SESSION:qt=re.a;break;case Nn.LOCAL:qt=(yield re.ay(re.i)._isAvailable())?re.i:re.b;break;case Nn.NONE:qt=re.L;break;default:return re.at("argument-error",{appName:vt._delegate.name})}return vt._delegate.setPersistence(qt)})()}signInAndRetrieveDataWithCredential(Pe){return this.signInWithCredential(Pe)}signInAnonymously(){return hr(this._delegate,re.X(this._delegate))}signInWithCredential(Pe){return hr(this._delegate,re.Y(this._delegate,Pe))}signInWithCustomToken(Pe){return hr(this._delegate,re.$(this._delegate,Pe))}signInWithEmailAndPassword(Pe,vt){return hr(this._delegate,re.a6(this._delegate,Pe,vt))}signInWithEmailLink(Pe,vt){return hr(this._delegate,re.a9(this._delegate,Pe,vt))}signInWithPhoneNumber(Pe,vt){return fr(this._delegate,re.s(this._delegate,Pe,vt))}signInWithPopup(Pe){var vt=this;return(0,_.Z)(function*(){return mn(wt(),vt._delegate,"operation-not-supported-in-this-environment"),hr(vt._delegate,re.c(vt._delegate,Pe,ft))})()}signInWithRedirect(Pe){var vt=this;return(0,_.Z)(function*(){return mn(wt(),vt._delegate,"operation-not-supported-in-this-environment"),yield Fr(vt._delegate),re.f(vt._delegate,Pe,ft)})()}updateCurrentUser(Pe){return this._delegate.updateCurrentUser(Pe)}verifyPasswordResetCode(Pe){return re.a4(this._delegate,Pe)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Fe.Persistence=Nn,Fe})();function Gt(Fe,ve,Pe){let vt=Fe;"function"!=typeof Fe&&({next:vt,error:ve,complete:Pe}=Fe);const qt=vt;return{next:Sn=>qt(Sn&&yi.getOrCreate(Sn)),error:ve,complete:Pe}}function yn(Fe,ve){const Pe=function(Fe,ve){const Pe=er();if(!Pe)return[];const vt=re.az(Rr,Fe,ve);switch(Pe.getItem(vt)){case Nn.NONE:return[re.L];case Nn.LOCAL:return[re.i,re.a];case Nn.SESSION:return[re.a];default:return[]}}(Fe,ve);if("undefined"!=typeof self&&!Pe.includes(re.i)&&Pe.push(re.i),"undefined"!=typeof window)for(const vt of[re.b,re.a])Pe.includes(vt)||Pe.push(vt);return Pe.includes(re.L)||Pe.push(re.L),Pe}class rn{constructor(){this.providerId="phone",this._delegate=new re.P(Kn(A.Z.auth()))}static credential(ve,Pe){return re.P.credential(ve,Pe)}verifyPhoneNumber(ve,Pe){return this._delegate.verifyPhoneNumber(ve,Pe)}unwrap(){return this._delegate}}rn.PHONE_SIGN_IN_METHOD=re.P.PHONE_SIGN_IN_METHOD,rn.PROVIDER_ID=re.P.PROVIDER_ID;const un=re.ax;var Fe;(Fe=A.Z).INTERNAL.registerComponent(new ne.wA("auth-compat",ve=>{const Pe=ve.getProvider("app-compat").getImmediate(),vt=ve.getProvider("auth");return new Lt(Pe,vt)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:re.A.EMAIL_SIGNIN,PASSWORD_RESET:re.A.PASSWORD_RESET,RECOVER_EMAIL:re.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:re.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:re.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:re.A.VERIFY_EMAIL}},EmailAuthProvider:re.M,FacebookAuthProvider:re.N,GithubAuthProvider:re.T,GoogleAuthProvider:re.Q,OAuthProvider:re.U,SAMLAuthProvider:re.V,PhoneAuthProvider:rn,PhoneMultiFactorGenerator:re.m,RecaptchaVerifier:class{constructor(ve,Pe,vt=A.Z.app()){var qt;un(null===(qt=vt.options)||void 0===qt?void 0:qt.apiKey,"invalid-api-key",{appName:vt.name}),this._delegate=new re.R(ve,Pe,vt.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:re.W,Auth:Lt,AuthCredential:re.H,Error:Me.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Fe.registerVersion("@firebase/auth-compat","0.2.23")},6215:(Xt,it,L)=>{"use strict";L.d(it,{X:()=>re});var _=L(9765),A=L(7971);class re extends _.xQ{constructor(ce){super(),this._value=ce}get value(){return this.getValue()}_subscribe(ce){const _e=super._subscribe(ce);return _e&&!_e.closed&&ce.next(this._value),_e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new A.N;return this._value}next(ce){super.next(this._value=ce)}}},8891:(Xt,it,L)=>{"use strict";L.d(it,{y:()=>Ie});var _=L(7393),re=L(9181),Me=L(6490),_e=L(6554),ne=L(4022),V=L(2494);let Ie=(()=>{class ae{constructor(le){this._isScalar=!1,le&&(this._subscribe=le)}lift(le){const Ee=new ae;return Ee.source=this,Ee.operator=le,Ee}subscribe(le,Ee,at){const{operator:xe}=this,Oe=function(ae,Ne,le){if(ae){if(ae instanceof _.L)return ae;if(ae[re.b])return ae[re.b]()}return ae||Ne||le?new _.L(ae,Ne,le):new _.L(Me.c)}(le,Ee,at);if(Oe.add(xe?xe.call(Oe,this.source):this.source||V.v.useDeprecatedSynchronousErrorHandling&&!Oe.syncErrorThrowable?this._subscribe(Oe):this._trySubscribe(Oe)),V.v.useDeprecatedSynchronousErrorHandling&&Oe.syncErrorThrowable&&(Oe.syncErrorThrowable=!1,Oe.syncErrorThrown))throw Oe.syncErrorValue;return Oe}_trySubscribe(le){try{return this._subscribe(le)}catch(Ee){V.v.useDeprecatedSynchronousErrorHandling&&(le.syncErrorThrown=!0,le.syncErrorValue=Ee),function(ae){for(;ae;){const{closed:Ne,destination:le,isStopped:Ee}=ae;if(Ne||Ee)return!1;ae=le&&le instanceof _.L?le:null}return!0}(le)?le.error(Ee):console.warn(Ee)}}forEach(le,Ee){return new(Ee=ie(Ee))((at,xe)=>{let Oe;Oe=this.subscribe(Ye=>{try{le(Ye)}catch(Ke){xe(Ke),Oe&&Oe.unsubscribe()}},xe,at)})}_subscribe(le){const{source:Ee}=this;return Ee&&Ee.subscribe(le)}[_e.L](){return this}pipe(...le){return 0===le.length?this:(0,ne.U)(le)(this)}toPromise(le){return new(le=ie(le))((Ee,at)=>{let xe;this.subscribe(Oe=>xe=Oe,Oe=>at(Oe),()=>Ee(xe))})}}return ae.create=Ne=>new ae(Ne),ae})();function ie(ae){if(ae||(ae=V.v.Promise||Promise),!ae)throw new Error("no Promise impl found");return ae}},6490:(Xt,it,L)=>{"use strict";L.d(it,{c:()=>re});var _=L(2494),A=L(4449);const re={closed:!0,next(Me){},error(Me){if(_.v.useDeprecatedSynchronousErrorHandling)throw Me;(0,A.z)(Me)},complete(){}}},9765:(Xt,it,L)=>{"use strict";L.d(it,{Yc:()=>ne,xQ:()=>V});var _=L(8891),A=L(7393),re=L(5319),Me=L(7971),ce=L(8858),_e=L(9181);class ne extends A.L{constructor(ae){super(ae),this.destination=ae}}let V=(()=>{class ie extends _.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[_e.b](){return new ne(this)}lift(Ne){const le=new Ie(this,this);return le.operator=Ne,le}next(Ne){if(this.closed)throw new Me.N;if(!this.isStopped){const{observers:le}=this,Ee=le.length,at=le.slice();for(let xe=0;xe<Ee;xe++)at[xe].next(Ne)}}error(Ne){if(this.closed)throw new Me.N;this.hasError=!0,this.thrownError=Ne,this.isStopped=!0;const{observers:le}=this,Ee=le.length,at=le.slice();for(let xe=0;xe<Ee;xe++)at[xe].error(Ne);this.observers.length=0}complete(){if(this.closed)throw new Me.N;this.isStopped=!0;const{observers:Ne}=this,le=Ne.length,Ee=Ne.slice();for(let at=0;at<le;at++)Ee[at].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(Ne){if(this.closed)throw new Me.N;return super._trySubscribe(Ne)}_subscribe(Ne){if(this.closed)throw new Me.N;return this.hasError?(Ne.error(this.thrownError),re.w.EMPTY):this.isStopped?(Ne.complete(),re.w.EMPTY):(this.observers.push(Ne),new ce.W(this,Ne))}asObservable(){const Ne=new _.y;return Ne.source=this,Ne}}return ie.create=(ae,Ne)=>new Ie(ae,Ne),ie})();class Ie extends V{constructor(ae,Ne){super(),this.destination=ae,this.source=Ne}next(ae){const{destination:Ne}=this;Ne&&Ne.next&&Ne.next(ae)}error(ae){const{destination:Ne}=this;Ne&&Ne.error&&this.destination.error(ae)}complete(){const{destination:ae}=this;ae&&ae.complete&&this.destination.complete()}_subscribe(ae){const{source:Ne}=this;return Ne?this.source.subscribe(ae):re.w.EMPTY}}},8858:(Xt,it,L)=>{"use strict";L.d(it,{W:()=>A});var _=L(5319);class A extends _.w{constructor(Me,ce){super(),this.subject=Me,this.subscriber=ce,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const Me=this.subject,ce=Me.observers;if(this.subject=null,!ce||0===ce.length||Me.isStopped||Me.closed)return;const _e=ce.indexOf(this.subscriber);-1!==_e&&ce.splice(_e,1)}}},7393:(Xt,it,L)=>{"use strict";L.d(it,{L:()=>ne});var _=L(9105),A=L(6490),re=L(5319),Me=L(9181),ce=L(2494),_e=L(4449);class ne extends re.w{constructor(ie,ae,Ne){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=A.c;break;case 1:if(!ie){this.destination=A.c;break}if("object"==typeof ie){ie instanceof ne?(this.syncErrorThrowable=ie.syncErrorThrowable,this.destination=ie,ie.add(this)):(this.syncErrorThrowable=!0,this.destination=new V(this,ie));break}default:this.syncErrorThrowable=!0,this.destination=new V(this,ie,ae,Ne)}}[Me.b](){return this}static create(ie,ae,Ne){const le=new ne(ie,ae,Ne);return le.syncErrorThrowable=!1,le}next(ie){this.isStopped||this._next(ie)}error(ie){this.isStopped||(this.isStopped=!0,this._error(ie))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(ie){this.destination.next(ie)}_error(ie){this.destination.error(ie),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:ie}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=ie,this}}class V extends ne{constructor(ie,ae,Ne,le){super(),this._parentSubscriber=ie;let Ee,at=this;(0,_.m)(ae)?Ee=ae:ae&&(Ee=ae.next,Ne=ae.error,le=ae.complete,ae!==A.c&&(at=Object.create(ae),(0,_.m)(at.unsubscribe)&&this.add(at.unsubscribe.bind(at)),at.unsubscribe=this.unsubscribe.bind(this))),this._context=at,this._next=Ee,this._error=Ne,this._complete=le}next(ie){if(!this.isStopped&&this._next){const{_parentSubscriber:ae}=this;ce.v.useDeprecatedSynchronousErrorHandling&&ae.syncErrorThrowable?this.__tryOrSetError(ae,this._next,ie)&&this.unsubscribe():this.__tryOrUnsub(this._next,ie)}}error(ie){if(!this.isStopped){const{_parentSubscriber:ae}=this,{useDeprecatedSynchronousErrorHandling:Ne}=ce.v;if(this._error)Ne&&ae.syncErrorThrowable?(this.__tryOrSetError(ae,this._error,ie),this.unsubscribe()):(this.__tryOrUnsub(this._error,ie),this.unsubscribe());else if(ae.syncErrorThrowable)Ne?(ae.syncErrorValue=ie,ae.syncErrorThrown=!0):(0,_e.z)(ie),this.unsubscribe();else{if(this.unsubscribe(),Ne)throw ie;(0,_e.z)(ie)}}}complete(){if(!this.isStopped){const{_parentSubscriber:ie}=this;if(this._complete){const ae=()=>this._complete.call(this._context);ce.v.useDeprecatedSynchronousErrorHandling&&ie.syncErrorThrowable?(this.__tryOrSetError(ie,ae),this.unsubscribe()):(this.__tryOrUnsub(ae),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(ie,ae){try{ie.call(this._context,ae)}catch(Ne){if(this.unsubscribe(),ce.v.useDeprecatedSynchronousErrorHandling)throw Ne;(0,_e.z)(Ne)}}__tryOrSetError(ie,ae,Ne){if(!ce.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{ae.call(this._context,Ne)}catch(le){return ce.v.useDeprecatedSynchronousErrorHandling?(ie.syncErrorValue=le,ie.syncErrorThrown=!0,!0):((0,_e.z)(le),!0)}return!1}_unsubscribe(){const{_parentSubscriber:ie}=this;this._context=null,this._parentSubscriber=null,ie.unsubscribe()}}},5319:(Xt,it,L)=>{"use strict";L.d(it,{w:()=>_e});var _=L(9796),A=L(1555),re=L(9105);const ce=(()=>{function V(Ie){return Error.call(this),this.message=Ie?`${Ie.length} errors occurred during unsubscription:\n${Ie.map((ie,ae)=>`${ae+1}) ${ie.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ie,this}return V.prototype=Object.create(Error.prototype),V})();class _e{constructor(Ie){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,Ie&&(this._ctorUnsubscribe=!0,this._unsubscribe=Ie)}unsubscribe(){let Ie;if(this.closed)return;let{_parentOrParents:ie,_ctorUnsubscribe:ae,_unsubscribe:Ne,_subscriptions:le}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,ie instanceof _e)ie.remove(this);else if(null!==ie)for(let Ee=0;Ee<ie.length;++Ee)ie[Ee].remove(this);if((0,re.m)(Ne)){ae&&(this._unsubscribe=void 0);try{Ne.call(this)}catch(Ee){Ie=Ee instanceof ce?ne(Ee.errors):[Ee]}}if((0,_.k)(le)){let Ee=-1,at=le.length;for(;++Ee<at;){const xe=le[Ee];if((0,A.K)(xe))try{xe.unsubscribe()}catch(Oe){Ie=Ie||[],Oe instanceof ce?Ie=Ie.concat(ne(Oe.errors)):Ie.push(Oe)}}}if(Ie)throw new ce(Ie)}add(Ie){let ie=Ie;if(!Ie)return _e.EMPTY;switch(typeof Ie){case"function":ie=new _e(Ie);case"object":if(ie===this||ie.closed||"function"!=typeof ie.unsubscribe)return ie;if(this.closed)return ie.unsubscribe(),ie;if(!(ie instanceof _e)){const le=ie;ie=new _e,ie._subscriptions=[le]}break;default:throw new Error("unrecognized teardown "+Ie+" added to Subscription.")}let{_parentOrParents:ae}=ie;if(null===ae)ie._parentOrParents=this;else if(ae instanceof _e){if(ae===this)return ie;ie._parentOrParents=[ae,this]}else{if(-1!==ae.indexOf(this))return ie;ae.push(this)}const Ne=this._subscriptions;return null===Ne?this._subscriptions=[ie]:Ne.push(ie),ie}remove(Ie){const ie=this._subscriptions;if(ie){const ae=ie.indexOf(Ie);-1!==ae&&ie.splice(ae,1)}}}var V;function ne(V){return V.reduce((Ie,ie)=>Ie.concat(ie instanceof ce?ie.errors:ie),[])}_e.EMPTY=((V=new _e).closed=!0,V)},2494:(Xt,it,L)=>{"use strict";L.d(it,{v:()=>A});let _=!1;const A={Promise:void 0,set useDeprecatedSynchronousErrorHandling(re){if(re){const Me=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Me.stack)}else _&&console.log("RxJS: Back to a better error behavior. Thank you. <3");_=re},get useDeprecatedSynchronousErrorHandling(){return _}}},5345:(Xt,it,L)=>{"use strict";L.d(it,{IY:()=>Me,Ds:()=>_e,ft:()=>V});var _=L(7393),A=L(8891),re=L(7444);class Me extends _.L{constructor(ie){super(),this.parent=ie}_next(ie){this.parent.notifyNext(ie)}_error(ie){this.parent.notifyError(ie),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class _e extends _.L{notifyNext(ie){this.destination.next(ie)}notifyError(ie){this.destination.error(ie)}notifyComplete(){this.destination.complete()}}function V(Ie,ie){if(ie.closed)return;if(Ie instanceof A.y)return Ie.subscribe(ie);let ae;try{ae=(0,re.s)(Ie)(ie)}catch(Ne){ie.error(Ne)}return ae}},2441:(Xt,it,L)=>{"use strict";L.d(it,{c:()=>ce,N:()=>_e});var _=L(9765),A=L(8891),re=L(5319),Me=L(1307);class ce extends A.y{constructor(ae,Ne){super(),this.source=ae,this.subjectFactory=Ne,this._refCount=0,this._isComplete=!1}_subscribe(ae){return this.getSubject().subscribe(ae)}getSubject(){const ae=this._subject;return(!ae||ae.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let ae=this._connection;return ae||(this._isComplete=!1,ae=this._connection=new re.w,ae.add(this.source.subscribe(new ne(this.getSubject(),this))),ae.closed&&(this._connection=null,ae=re.w.EMPTY)),ae}refCount(){return(0,Me.x)()(this)}}const _e=(()=>{const ie=ce.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:ie._subscribe},_isComplete:{value:ie._isComplete,writable:!0},getSubject:{value:ie.getSubject},connect:{value:ie.connect},refCount:{value:ie.refCount}}})();class ne extends _.Yc{constructor(ae,Ne){super(ae),this.connectable=Ne}_error(ae){this._unsubscribe(),super._error(ae)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const ae=this.connectable;if(ae){this.connectable=null;const Ne=ae._connection;ae._refCount=0,ae._subject=null,ae._connection=null,Ne&&Ne.unsubscribe()}}}},8071:(Xt,it,L)=>{"use strict";L.d(it,{z:()=>Me});var _=L(5917),A=L(3282);function Me(...ce){return(0,A.J)(1)((0,_.of)(...ce))}},9193:(Xt,it,L)=>{"use strict";L.d(it,{E:()=>A,c:()=>re});var _=L(8891);const A=new _.y(ce=>ce.complete());function re(ce){return ce?function(ce){return new _.y(_e=>ce.schedule(()=>_e.complete()))}(ce):A}},4402:(Xt,it,L)=>{"use strict";L.d(it,{D:()=>at});var _=L(8891),A=L(7444),re=L(5319),Me=L(6554),ne=L(4087),V=L(377),ae=L(4072),Ne=L(9489);function at(xe,Oe){return Oe?function(xe,Oe){if(null!=xe){if(function(xe){return xe&&"function"==typeof xe[Me.L]}(xe))return function(xe,Oe){return new _.y(Ye=>{const Ke=new re.w;return Ke.add(Oe.schedule(()=>{const $e=xe[Me.L]();Ke.add($e.subscribe({next(He){Ke.add(Oe.schedule(()=>Ye.next(He)))},error(He){Ke.add(Oe.schedule(()=>Ye.error(He)))},complete(){Ke.add(Oe.schedule(()=>Ye.complete()))}}))})),Ke})}(xe,Oe);if((0,ae.t)(xe))return function(xe,Oe){return new _.y(Ye=>{const Ke=new re.w;return Ke.add(Oe.schedule(()=>xe.then($e=>{Ke.add(Oe.schedule(()=>{Ye.next($e),Ke.add(Oe.schedule(()=>Ye.complete()))}))},$e=>{Ke.add(Oe.schedule(()=>Ye.error($e)))}))),Ke})}(xe,Oe);if((0,Ne.z)(xe))return(0,ne.r)(xe,Oe);if(function(xe){return xe&&"function"==typeof xe[V.hZ]}(xe)||"string"==typeof xe)return function(xe,Oe){if(!xe)throw new Error("Iterable cannot be null");return new _.y(Ye=>{const Ke=new re.w;let $e;return Ke.add(()=>{$e&&"function"==typeof $e.return&&$e.return()}),Ke.add(Oe.schedule(()=>{$e=xe[V.hZ](),Ke.add(Oe.schedule(function(){if(Ye.closed)return;let He,gt;try{const ct=$e.next();He=ct.value,gt=ct.done}catch(ct){return void Ye.error(ct)}gt?Ye.complete():(Ye.next(He),this.schedule())}))})),Ke})}(xe,Oe)}throw new TypeError((null!==xe&&typeof xe||xe)+" is not observable")}(xe,Oe):xe instanceof _.y?xe:new _.y((0,A.s)(xe))}},6693:(Xt,it,L)=>{"use strict";L.d(it,{n:()=>Me});var _=L(8891),A=L(5015),re=L(4087);function Me(ce,_e){return _e?(0,re.r)(ce,_e):new _.y((0,A.V)(ce))}},6682:(Xt,it,L)=>{"use strict";L.d(it,{T:()=>ce});var _=L(8891),A=L(4869),re=L(3282),Me=L(6693);function ce(..._e){let ne=Number.POSITIVE_INFINITY,V=null,Ie=_e[_e.length-1];return(0,A.K)(Ie)?(V=_e.pop(),_e.length>1&&"number"==typeof _e[_e.length-1]&&(ne=_e.pop())):"number"==typeof Ie&&(ne=_e.pop()),null===V&&1===_e.length&&_e[0]instanceof _.y?_e[0]:(0,re.J)(ne)((0,Me.n)(_e,V))}},5917:(Xt,it,L)=>{"use strict";L.d(it,{of:()=>Me});var _=L(4869),A=L(6693),re=L(4087);function Me(...ce){let _e=ce[ce.length-1];return(0,_.K)(_e)?(ce.pop(),(0,re.r)(ce,_e)):(0,A.n)(ce)}},5242:(Xt,it,L)=>{"use strict";L.d(it,{d:()=>A});var _=L(7393);function A(ce=null){return _e=>_e.lift(new re(ce))}class re{constructor(_e){this.defaultValue=_e}call(_e,ne){return ne.subscribe(new Me(_e,this.defaultValue))}}class Me extends _.L{constructor(_e,ne){super(_e),this.defaultValue=ne,this.isEmpty=!0}_next(_e){this.isEmpty=!1,this.destination.next(_e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},7519:(Xt,it,L)=>{"use strict";L.d(it,{x:()=>A});var _=L(7393);function A(ce,_e){return ne=>ne.lift(new re(ce,_e))}class re{constructor(_e,ne){this.compare=_e,this.keySelector=ne}call(_e,ne){return ne.subscribe(new Me(_e,this.compare,this.keySelector))}}class Me extends _.L{constructor(_e,ne,V){super(_e),this.keySelector=V,this.hasKey=!1,"function"==typeof ne&&(this.compare=ne)}compare(_e,ne){return _e===ne}_next(_e){let ne;try{const{keySelector:Ie}=this;ne=Ie?Ie(_e):_e}catch(Ie){return this.destination.error(Ie)}let V=!1;if(this.hasKey)try{const{compare:Ie}=this;V=Ie(this.key,ne)}catch(Ie){return this.destination.error(Ie)}else this.hasKey=!0;V||(this.key=ne,this.destination.next(_e))}}},5435:(Xt,it,L)=>{"use strict";L.d(it,{h:()=>A});var _=L(7393);function A(ce,_e){return function(V){return V.lift(new re(ce,_e))}}class re{constructor(_e,ne){this.predicate=_e,this.thisArg=ne}call(_e,ne){return ne.subscribe(new Me(_e,this.predicate,this.thisArg))}}class Me extends _.L{constructor(_e,ne,V){super(_e),this.predicate=ne,this.thisArg=V,this.count=0}_next(_e){let ne;try{ne=this.predicate.call(this.thisArg,_e,this.count++)}catch(V){return void this.destination.error(V)}ne&&this.destination.next(_e)}}},8049:(Xt,it,L)=>{"use strict";L.d(it,{P:()=>ne});var _=L(3410),A=L(5435),re=L(5257),Me=L(5242),ce=L(4635),_e=L(4487);function ne(V,Ie){const ie=arguments.length>=2;return ae=>ae.pipe(V?(0,A.h)((Ne,le)=>V(Ne,le,ae)):_e.y,(0,re.q)(1),ie?(0,Me.d)(Ie):(0,ce.T)(()=>new _.K))}},8002:(Xt,it,L)=>{"use strict";L.d(it,{U:()=>A});var _=L(7393);function A(ce,_e){return function(V){if("function"!=typeof ce)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return V.lift(new re(ce,_e))}}class re{constructor(_e,ne){this.project=_e,this.thisArg=ne}call(_e,ne){return ne.subscribe(new Me(_e,this.project,this.thisArg))}}class Me extends _.L{constructor(_e,ne,V){super(_e),this.project=ne,this.count=0,this.thisArg=V||this}_next(_e){let ne;try{ne=this.project.call(this.thisArg,_e,this.count++)}catch(V){return void this.destination.error(V)}this.destination.next(ne)}}},3282:(Xt,it,L)=>{"use strict";L.d(it,{J:()=>re});var _=L(9773),A=L(4487);function re(Me=Number.POSITIVE_INFINITY){return(0,_.zg)(A.y,Me)}},9773:(Xt,it,L)=>{"use strict";L.d(it,{zg:()=>Me});var _=L(8002),A=L(4402),re=L(5345);function Me(V,Ie,ie=Number.POSITIVE_INFINITY){return"function"==typeof Ie?ae=>ae.pipe(Me((Ne,le)=>(0,A.D)(V(Ne,le)).pipe((0,_.U)((Ee,at)=>Ie(Ne,Ee,le,at))),ie)):("number"==typeof Ie&&(ie=Ie),ae=>ae.lift(new ce(V,ie)))}class ce{constructor(Ie,ie=Number.POSITIVE_INFINITY){this.project=Ie,this.concurrent=ie}call(Ie,ie){return ie.subscribe(new _e(Ie,this.project,this.concurrent))}}class _e extends re.Ds{constructor(Ie,ie,ae=Number.POSITIVE_INFINITY){super(Ie),this.project=ie,this.concurrent=ae,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(Ie){this.active<this.concurrent?this._tryNext(Ie):this.buffer.push(Ie)}_tryNext(Ie){let ie;const ae=this.index++;try{ie=this.project(Ie,ae)}catch(Ne){return void this.destination.error(Ne)}this.active++,this._innerSub(ie)}_innerSub(Ie){const ie=new re.IY(this),ae=this.destination;ae.add(ie);const Ne=(0,re.ft)(Ie,ie);Ne!==ie&&ae.add(Ne)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(Ie){this.destination.next(Ie)}notifyComplete(){const Ie=this.buffer;this.active--,Ie.length>0?this._next(Ie.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(Xt,it,L)=>{"use strict";L.d(it,{ht:()=>ae,QV:()=>Ie});var _=L(7393),A=L(9193),re=L(5917),Me=L(8891);class V{constructor(Ee,at,xe){this.kind=Ee,this.value=at,this.error=xe,this.hasValue="N"===Ee}observe(Ee){switch(this.kind){case"N":return Ee.next&&Ee.next(this.value);case"E":return Ee.error&&Ee.error(this.error);case"C":return Ee.complete&&Ee.complete()}}do(Ee,at,xe){switch(this.kind){case"N":return Ee&&Ee(this.value);case"E":return at&&at(this.error);case"C":return xe&&xe()}}accept(Ee,at,xe){return Ee&&"function"==typeof Ee.next?this.observe(Ee):this.do(Ee,at,xe)}toObservable(){switch(this.kind){case"N":return(0,re.of)(this.value);case"E":return le=this.error,new Me.y(at=>at.error(le));case"C":return(0,A.c)()}var le;throw new Error("unexpected notification kind value")}static createNext(Ee){return void 0!==Ee?new V("N",Ee):V.undefinedValueNotification}static createError(Ee){return new V("E",void 0,Ee)}static createComplete(){return V.completeNotification}}function Ie(le,Ee=0){return function(xe){return xe.lift(new ie(le,Ee))}}V.completeNotification=new V("C"),V.undefinedValueNotification=new V("N",void 0);class ie{constructor(Ee,at=0){this.scheduler=Ee,this.delay=at}call(Ee,at){return at.subscribe(new ae(Ee,this.scheduler,this.delay))}}class ae extends _.L{constructor(Ee,at,xe=0){super(Ee),this.scheduler=at,this.delay=xe}static dispatch(Ee){const{notification:at,destination:xe}=Ee;at.observe(xe),this.unsubscribe()}scheduleMessage(Ee){this.destination.add(this.scheduler.schedule(ae.dispatch,this.delay,new Ne(Ee,this.destination)))}_next(Ee){this.scheduleMessage(V.createNext(Ee))}_error(Ee){this.scheduleMessage(V.createError(Ee)),this.unsubscribe()}_complete(){this.scheduleMessage(V.createComplete()),this.unsubscribe()}}class Ne{constructor(Ee,at){this.notification=Ee,this.destination=at}}},1307:(Xt,it,L)=>{"use strict";L.d(it,{x:()=>A});var _=L(7393);function A(){return function(_e){return _e.lift(new re(_e))}}class re{constructor(_e){this.connectable=_e}call(_e,ne){const{connectable:V}=this;V._refCount++;const Ie=new Me(_e,V),ie=ne.subscribe(Ie);return Ie.closed||(Ie.connection=V.connect()),ie}}class Me extends _.L{constructor(_e,ne){super(_e),this.connectable=ne}_unsubscribe(){const{connectable:_e}=this;if(!_e)return void(this.connection=null);this.connectable=null;const ne=_e._refCount;if(ne<=0)return void(this.connection=null);if(_e._refCount=ne-1,ne>1)return void(this.connection=null);const{connection:V}=this,Ie=_e._connection;this.connection=null,Ie&&(!V||Ie===V)&&Ie.unsubscribe()}}},2145:(Xt,it,L)=>{"use strict";L.d(it,{R:()=>A});var _=L(7393);function A(ce,_e){let ne=!1;return arguments.length>=2&&(ne=!0),function(Ie){return Ie.lift(new re(ce,_e,ne))}}class re{constructor(_e,ne,V=!1){this.accumulator=_e,this.seed=ne,this.hasSeed=V}call(_e,ne){return ne.subscribe(new Me(_e,this.accumulator,this.seed,this.hasSeed))}}class Me extends _.L{constructor(_e,ne,V,Ie){super(_e),this.accumulator=ne,this._seed=V,this.hasSeed=Ie,this.index=0}get seed(){return this._seed}set seed(_e){this.hasSeed=!0,this._seed=_e}_next(_e){if(this.hasSeed)return this._tryNext(_e);this.seed=_e,this.destination.next(_e)}_tryNext(_e){const ne=this.index++;let V;try{V=this.accumulator(this.seed,_e,ne)}catch(Ie){this.destination.error(Ie)}this.seed=V,this.destination.next(V)}}},9761:(Xt,it,L)=>{"use strict";L.d(it,{O:()=>re});var _=L(8071),A=L(4869);function re(...Me){const ce=Me[Me.length-1];return(0,A.K)(ce)?(Me.pop(),_e=>(0,_.z)(Me,_e,ce)):_e=>(0,_.z)(Me,_e)}},3101:(Xt,it,L)=>{"use strict";L.d(it,{R:()=>Oe});var _=L(8891);let A=1;const re=Promise.resolve(),Me={};function ce(Ke){return Ke in Me&&(delete Me[Ke],!0)}const _e={setImmediate(Ke){const $e=A++;return Me[$e]=!0,re.then(()=>ce($e)&&Ke()),$e},clearImmediate(Ke){ce(Ke)}};var V=L(6465),ie=L(6102);const le=new class extends ie.v{flush($e){this.active=!0,this.scheduled=void 0;const{actions:He}=this;let gt,ct=-1,bt=He.length;$e=$e||He.shift();do{if(gt=$e.execute($e.state,$e.delay))break}while(++ct<bt&&($e=He.shift()));if(this.active=!1,gt){for(;++ct<bt&&($e=He.shift());)$e.unsubscribe();throw gt}}}(class extends V.o{constructor($e,He){super($e,He),this.scheduler=$e,this.work=He}requestAsyncId($e,He,gt=0){return null!==gt&&gt>0?super.requestAsyncId($e,He,gt):($e.actions.push(this),$e.scheduled||($e.scheduled=_e.setImmediate($e.flush.bind($e,null))))}recycleAsyncId($e,He,gt=0){if(null!==gt&&gt>0||null===gt&&this.delay>0)return super.recycleAsyncId($e,He,gt);0===$e.actions.length&&(_e.clearImmediate(He),$e.scheduled=void 0)}});var Ee=L(9796);class xe extends _.y{constructor($e,He=0,gt=le){var Ke;super(),this.source=$e,this.delayTime=He,this.scheduler=gt,(!(!(0,Ee.k)(Ke=He)&&Ke-parseFloat(Ke)+1>=0)||He<0)&&(this.delayTime=0),(!gt||"function"!=typeof gt.schedule)&&(this.scheduler=le)}static create($e,He=0,gt=le){return new xe($e,He,gt)}static dispatch($e){const{source:He,subscriber:gt}=$e;return this.add(He.subscribe(gt))}_subscribe($e){return this.scheduler.schedule(xe.dispatch,this.delayTime,{source:this.source,subscriber:$e})}}function Oe(Ke,$e=0){return function(gt){return gt.lift(new Ye(Ke,$e))}}class Ye{constructor($e,He){this.scheduler=$e,this.delay=He}call($e,He){return new xe(He,this.delay,this.scheduler).subscribe($e)}}},3190:(Xt,it,L)=>{"use strict";L.d(it,{w:()=>Me});var _=L(8002),A=L(4402),re=L(5345);function Me(ne,V){return"function"==typeof V?Ie=>Ie.pipe(Me((ie,ae)=>(0,A.D)(ne(ie,ae)).pipe((0,_.U)((Ne,le)=>V(ie,Ne,ae,le))))):Ie=>Ie.lift(new ce(ne))}class ce{constructor(V){this.project=V}call(V,Ie){return Ie.subscribe(new _e(V,this.project))}}class _e extends re.Ds{constructor(V,Ie){super(V),this.project=Ie,this.index=0}_next(V){let Ie;const ie=this.index++;try{Ie=this.project(V,ie)}catch(ae){return void this.destination.error(ae)}this._innerSub(Ie)}_innerSub(V){const Ie=this.innerSubscription;Ie&&Ie.unsubscribe();const ie=new re.IY(this),ae=this.destination;ae.add(ie),this.innerSubscription=(0,re.ft)(V,ie),this.innerSubscription!==ie&&ae.add(this.innerSubscription)}_complete(){const{innerSubscription:V}=this;(!V||V.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(V){this.destination.next(V)}}},5257:(Xt,it,L)=>{"use strict";L.d(it,{q:()=>Me});var _=L(7393),A=L(7108),re=L(9193);function Me(ne){return V=>0===ne?(0,re.c)():V.lift(new ce(ne))}class ce{constructor(V){if(this.total=V,this.total<0)throw new A.W}call(V,Ie){return Ie.subscribe(new _e(V,this.total))}}class _e extends _.L{constructor(V,Ie){super(V),this.total=Ie,this.count=0}_next(V){const Ie=this.total,ie=++this.count;ie<=Ie&&(this.destination.next(V),ie===Ie&&(this.destination.complete(),this.unsubscribe()))}}},3342:(Xt,it,L)=>{"use strict";L.d(it,{b:()=>Me});var _=L(7393);function A(){}var re=L(9105);function Me(ne,V,Ie){return function(ae){return ae.lift(new ce(ne,V,Ie))}}class ce{constructor(V,Ie,ie){this.nextOrObserver=V,this.error=Ie,this.complete=ie}call(V,Ie){return Ie.subscribe(new _e(V,this.nextOrObserver,this.error,this.complete))}}class _e extends _.L{constructor(V,Ie,ie,ae){super(V),this._tapNext=A,this._tapError=A,this._tapComplete=A,this._tapError=ie||A,this._tapComplete=ae||A,(0,re.m)(Ie)?(this._context=this,this._tapNext=Ie):Ie&&(this._context=Ie,this._tapNext=Ie.next||A,this._tapError=Ie.error||A,this._tapComplete=Ie.complete||A)}_next(V){try{this._tapNext.call(this._context,V)}catch(Ie){return void this.destination.error(Ie)}this.destination.next(V)}_error(V){try{this._tapError.call(this._context,V)}catch(Ie){return void this.destination.error(Ie)}this.destination.error(V)}_complete(){try{this._tapComplete.call(this._context)}catch(V){return void this.destination.error(V)}return this.destination.complete()}}},4635:(Xt,it,L)=>{"use strict";L.d(it,{T:()=>re});var _=L(3410),A=L(7393);function re(ne=_e){return V=>V.lift(new Me(ne))}class Me{constructor(V){this.errorFactory=V}call(V,Ie){return Ie.subscribe(new ce(V,this.errorFactory))}}class ce extends A.L{constructor(V,Ie){super(V),this.errorFactory=Ie,this.hasValue=!1}_next(V){this.hasValue=!0,this.destination.next(V)}_complete(){if(this.hasValue)return this.destination.complete();{let V;try{V=this.errorFactory()}catch(Ie){V=Ie}this.destination.error(V)}}}function _e(){return new _.K}},4087:(Xt,it,L)=>{"use strict";L.d(it,{r:()=>re});var _=L(8891),A=L(5319);function re(Me,ce){return new _.y(_e=>{const ne=new A.w;let V=0;return ne.add(ce.schedule(function(){V!==Me.length?(_e.next(Me[V++]),_e.closed||ne.add(this.schedule())):_e.complete()})),ne})}},6465:(Xt,it,L)=>{"use strict";L.d(it,{o:()=>re});var _=L(5319);class A extends _.w{constructor(ce,_e){super()}schedule(ce,_e=0){return this}}class re extends A{constructor(ce,_e){super(ce,_e),this.scheduler=ce,this.work=_e,this.pending=!1}schedule(ce,_e=0){if(this.closed)return this;this.state=ce;const ne=this.id,V=this.scheduler;return null!=ne&&(this.id=this.recycleAsyncId(V,ne,_e)),this.pending=!0,this.delay=_e,this.id=this.id||this.requestAsyncId(V,this.id,_e),this}requestAsyncId(ce,_e,ne=0){return setInterval(ce.flush.bind(ce,this),ne)}recycleAsyncId(ce,_e,ne=0){if(null!==ne&&this.delay===ne&&!1===this.pending)return _e;clearInterval(_e)}execute(ce,_e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ne=this._execute(ce,_e);if(ne)return ne;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ce,_e){let V,ne=!1;try{this.work(ce)}catch(Ie){ne=!0,V=!!Ie&&Ie||new Error(Ie)}if(ne)return this.unsubscribe(),V}_unsubscribe(){const ce=this.id,_e=this.scheduler,ne=_e.actions,V=ne.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==V&&ne.splice(V,1),null!=ce&&(this.id=this.recycleAsyncId(_e,ce,null)),this.delay=null}}},6102:(Xt,it,L)=>{"use strict";L.d(it,{v:()=>A});let _=(()=>{class re{constructor(ce,_e=re.now){this.SchedulerAction=ce,this.now=_e}schedule(ce,_e=0,ne){return new this.SchedulerAction(this,ce).schedule(ne,_e)}}return re.now=()=>Date.now(),re})();class A extends _{constructor(Me,ce=_.now){super(Me,()=>A.delegate&&A.delegate!==this?A.delegate.now():ce()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(Me,ce=0,_e){return A.delegate&&A.delegate!==this?A.delegate.schedule(Me,ce,_e):super.schedule(Me,ce,_e)}flush(Me){const{actions:ce}=this;if(this.active)return void ce.push(Me);let _e;this.active=!0;do{if(_e=Me.execute(Me.state,Me.delay))break}while(Me=ce.shift());if(this.active=!1,_e){for(;Me=ce.shift();)Me.unsubscribe();throw _e}}}},3637:(Xt,it,L)=>{"use strict";L.d(it,{z:()=>re});var _=L(6465);const re=new(L(6102).v)(_.o)},7771:(Xt,it,L)=>{"use strict";L.d(it,{c:()=>_e,N:()=>ce});var _=L(6465),re=L(6102);const ce=new class extends re.v{}(class extends _.o{constructor(V,Ie){super(V,Ie),this.scheduler=V,this.work=Ie}schedule(V,Ie=0){return Ie>0?super.schedule(V,Ie):(this.delay=Ie,this.state=V,this.scheduler.flush(this),this)}execute(V,Ie){return Ie>0||this.closed?super.execute(V,Ie):this._execute(V,Ie)}requestAsyncId(V,Ie,ie=0){return null!==ie&&ie>0||null===ie&&this.delay>0?super.requestAsyncId(V,Ie,ie):V.flush(this)}}),_e=ce},377:(Xt,it,L)=>{"use strict";L.d(it,{hZ:()=>A});const A="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Xt,it,L)=>{"use strict";L.d(it,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Xt,it,L)=>{"use strict";L.d(it,{b:()=>_});const _="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7108:(Xt,it,L)=>{"use strict";L.d(it,{W:()=>A});const A=(()=>{function re(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return re.prototype=Object.create(Error.prototype),re})()},3410:(Xt,it,L)=>{"use strict";L.d(it,{K:()=>A});const A=(()=>{function re(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return re.prototype=Object.create(Error.prototype),re})()},7971:(Xt,it,L)=>{"use strict";L.d(it,{N:()=>A});const A=(()=>{function re(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return re.prototype=Object.create(Error.prototype),re})()},4449:(Xt,it,L)=>{"use strict";function _(A){setTimeout(()=>{throw A},0)}L.d(it,{z:()=>_})},4487:(Xt,it,L)=>{"use strict";function _(A){return A}L.d(it,{y:()=>_})},9796:(Xt,it,L)=>{"use strict";L.d(it,{k:()=>_});const _=Array.isArray||(A=>A&&"number"==typeof A.length)},9489:(Xt,it,L)=>{"use strict";L.d(it,{z:()=>_});const _=A=>A&&"number"==typeof A.length&&"function"!=typeof A},9105:(Xt,it,L)=>{"use strict";function _(A){return"function"==typeof A}L.d(it,{m:()=>_})},1555:(Xt,it,L)=>{"use strict";function _(A){return null!==A&&"object"==typeof A}L.d(it,{K:()=>_})},4072:(Xt,it,L)=>{"use strict";function _(A){return!!A&&"function"!=typeof A.subscribe&&"function"==typeof A.then}L.d(it,{t:()=>_})},4869:(Xt,it,L)=>{"use strict";function _(A){return A&&"function"==typeof A.schedule}L.d(it,{K:()=>_})},4022:(Xt,it,L)=>{"use strict";L.d(it,{z:()=>A,U:()=>re});var _=L(4487);function A(...Me){return re(Me)}function re(Me){return 0===Me.length?_.y:1===Me.length?Me[0]:function(_e){return Me.reduce((ne,V)=>V(ne),_e)}}},7444:(Xt,it,L)=>{"use strict";L.d(it,{s:()=>ae});var _=L(5015),A=L(4449),Me=L(377),_e=L(6554),V=L(9489),Ie=L(4072),ie=L(1555);const ae=Ne=>{if(Ne&&"function"==typeof Ne[_e.L])return(Ne=>le=>{const Ee=Ne[_e.L]();if("function"!=typeof Ee.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Ee.subscribe(le)})(Ne);if((0,V.z)(Ne))return(0,_.V)(Ne);if((0,Ie.t)(Ne))return(Ne=>le=>(Ne.then(Ee=>{le.closed||(le.next(Ee),le.complete())},Ee=>le.error(Ee)).then(null,A.z),le))(Ne);if(Ne&&"function"==typeof Ne[Me.hZ])return(Ne=>le=>{const Ee=Ne[Me.hZ]();for(;;){let at;try{at=Ee.next()}catch(xe){return le.error(xe),le}if(at.done){le.complete();break}if(le.next(at.value),le.closed)break}return"function"==typeof Ee.return&&le.add(()=>{Ee.return&&Ee.return()}),le})(Ne);{const Ee=`You provided ${(0,ie.K)(Ne)?"an invalid object":`'${Ne}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Ee)}}},5015:(Xt,it,L)=>{"use strict";L.d(it,{V:()=>_});const _=A=>re=>{for(let Me=0,ce=A.length;Me<ce&&!re.closed;Me++)re.next(A[Me]);re.complete()}},994:(Xt,it,L)=>{"use strict";L.d(it,{r:()=>ie});var _=L(8945),A=L(3018),re=L(3071),Me=L(7556),ce=L(5496),_e=L(8583);function ne(ae,Ne){1&ae&&(A.TgZ(0,"ion-buttons",3),A.TgZ(1,"ion-menu-button"),A._UZ(2,"ion-icon",4),A.qZA(),A.qZA())}function V(ae,Ne){1&ae&&(A.TgZ(0,"ion-buttons",3),A._UZ(1,"ion-back-button",5),A.qZA())}function Ie(ae,Ne){if(1&ae){const le=A.EpF();A.TgZ(0,"ion-menu",6,7),A.TgZ(2,"ion-header"),A.TgZ(3,"ion-toolbar",0),A.TgZ(4,"ion-title"),A._uU(5,"User Information"),A.qZA(),A.qZA(),A.qZA(),A.TgZ(6,"ion-content"),A.TgZ(7,"div",8),A.TgZ(8,"div",9),A.TgZ(9,"div",10),A._UZ(10,"ion-icon",11),A.qZA(),A.TgZ(11,"div",12),A.TgZ(12,"div",13),A._uU(13),A.qZA(),A.TgZ(14,"div",14),A._uU(15),A.qZA(),A.qZA(),A.qZA(),A.TgZ(16,"div",15),A.TgZ(17,"ion-button",16),A.NdJ("click",function(){return A.CHM(le),A.oxw().navigateToSettings()}),A._uU(18,"App Settings"),A.qZA(),A.TgZ(19,"ion-button",17),A.NdJ("click",function(){return A.CHM(le),A.oxw().logout()}),A._uU(20,"Logout"),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA()}if(2&ae){const le=A.oxw();A.xp6(13),A.Oqu(le.user.displayName),A.xp6(2),A.Oqu(le.user.email)}}let ie=(()=>{class ae{constructor(le,Ee,at){this.userSvc=le,this.auth=Ee,this.router=at}ngOnInit(){const le=this.userSvc.getUserDataFromLocalStorage();Object.keys(le).length>0&&(this.user=le)}logout(){this.auth.logout().then(()=>{this.router.navigateByUrl("/login",{replaceUrl:!0})})}navigateToSettings(){this.router.navigateByUrl("/home/settings"),this.menu.toggle()}}return ae.\u0275fac=function(le){return new(le||ae)(A.Y36(re.K),A.Y36(Me.e),A.Y36(ce.F0))},ae.\u0275cmp=A.Xpm({type:ae,selectors:[["app-nav"]],viewQuery:function(le,Ee){if(1&le&&A.Gf(_.z0,5),2&le){let at;A.iGM(at=A.CRH())&&(Ee.menu=at.first)}},inputs:{pageTitle:"pageTitle",showBackButton:"showBackButton"},decls:7,vars:4,consts:[["color","primary"],["slot","start",4,"ngIf"],["side","start","menuId","first","contentId","main",4,"ngIf"],["slot","start"],["name","person-circle-outline","size","large"],["defaultHref","/home"],["side","start","menuId","first","contentId","main"],["menu",""],[1,"nav-content"],[1,"user-container"],[1,"avatar"],["name","person-circle-outline",1,"avatar-alt"],[1,"user-info"],[1,"display-name"],[1,"email"],[1,"button-container"],["color","primary",3,"click"],["color","danger",3,"click"]],template:function(le,Ee){1&le&&(A.TgZ(0,"ion-header"),A.TgZ(1,"ion-toolbar",0),A.YNc(2,ne,3,0,"ion-buttons",1),A.YNc(3,V,2,0,"ion-buttons",1),A.TgZ(4,"ion-title"),A._uU(5),A.qZA(),A.qZA(),A.qZA(),A.YNc(6,Ie,21,2,"ion-menu",2)),2&le&&(A.xp6(2),A.Q6J("ngIf",Ee.user&&!Ee.showBackButton),A.xp6(1),A.Q6J("ngIf",Ee.showBackButton),A.xp6(2),A.Oqu(Ee.pageTitle),A.xp6(1),A.Q6J("ngIf",Ee.user&&!Ee.showBackButton))},directives:[_.Gu,_.sr,_e.O5,_.wd,_.Sm,_.fG,_.gu,_.oU,_.cs,_.z0,_.W2,_.YG],styles:[".nav-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:calc(100vh - 60px);align-items:center}.nav-content[_ngcontent-%COMP%]   .user-container[_ngcontent-%COMP%]{padding:3rem 1rem;text-align:center}.nav-content[_ngcontent-%COMP%]   .user-container[_ngcontent-%COMP%]   .avatar-alt[_ngcontent-%COMP%]{font-size:5em}.nav-content[_ngcontent-%COMP%]   .user-container[_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%]{font-weight:500;font-size:1.5em}.nav-content[_ngcontent-%COMP%]   .user-container[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{color:var(--ion-color-secondary)}.nav-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:100%}.nav-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:last-child{margin-bottom:3rem}"]}),ae})()},6175:(Xt,it,L)=>{"use strict";L.d(it,{q:()=>Me});var _=L(8583),A=L(8945),re=L(3018);let Me=(()=>{class ce{}return ce.\u0275fac=function(ne){return new(ne||ce)},ce.\u0275mod=re.oAB({type:ce}),ce.\u0275inj=re.cJS({imports:[[_.ez,A.Pc]]}),ce})()},8176:(Xt,it,L)=>{"use strict";L.r(it),L.d(it,{HomeModule:()=>qe});var _=L(8583),A=L(8945),re=L(5496),Me=L(8239),ce=L(5257);const ne=(0,L(3796).fo)("TextToSpeech",{web:()=>L.e(322).then(L.bind(L,322)).then(Ve=>new Ve.TextToSpeechWeb)});"speechSynthesis"in window&&(window,console.log("using window.speechSynthesis"));var V=L(3018),Ie=L(547),ie=L(3071),ae=L(994);function Ne(Ve,ot){if(1&Ve&&(V.TgZ(0,"ion-select-option",8),V._uU(1),V.qZA()),2&Ve){const je=ot.$implicit;V.Q6J("value",je.index),V.xp6(1),V.hij(" ",je.default?"(Default) "+je.name:je.name," ")}}function le(Ve,ot){if(1&Ve){const je=V.EpF();V.TgZ(0,"ion-select",6),V.NdJ("ionChange",function(ze){return V.CHM(je),V.oxw().handleSelectVoiceChange(ze)}),V.YNc(1,Ne,2,2,"ion-select-option",7),V.qZA()}if(2&Ve){const je=V.oxw();V.Q6J("value",je.selectedVoice),V.xp6(1),V.Q6J("ngForOf",je.voices)}}function Ee(Ve,ot){if(1&Ve&&(V.TgZ(0,"ion-select-option",8),V._uU(1),V.qZA()),2&Ve){const je=ot.$implicit;V.Q6J("value",je.lang),V.xp6(1),V.hij(" ",je.default?"(Default) "+je.name:je.name," ")}}function at(Ve,ot){if(1&Ve){const je=V.EpF();V.TgZ(0,"ion-select",6),V.NdJ("ionChange",function(ze){return V.CHM(je),V.oxw().handleSelectVoiceChange(ze)}),V.YNc(1,Ee,2,2,"ion-select-option",7),V.qZA()}if(2&Ve){const je=V.oxw();V.Q6J("value",je.selectedVoice),V.xp6(1),V.Q6J("ngForOf",je.voices)}}let xe=(()=>{class Ve{constructor(je,Ae,ze){this.prefSvc=je,this.userSvc=Ae,this.platform=ze}ngOnInit(){this.isIOS=this.platform.is("ios"),this.userInfo=this.userSvc.getUserDataFromLocalStorage(),this.prefSvc.getPreferencesFromFirebase().pipe((0,ce.q)(1)).subscribe(je=>{this.preferences=je,this.selectedVoice=this.isIOS?this.preferences.iosVoiceProfile:this.preferences.androidVoiceProfile,this.loadSettings()}),ne.getSupportedVoices().then(je=>{this.voices=this.getEnglishVoices(je.voices),this.selectedVoice=this.isIOS?this.preferences?this.preferences.iosVoiceProfile:"en-US":this.preferences?this.preferences.androidVoiceProfile:0})}loadSettings(){var je=this;return(0,Me.Z)(function*(){je.darkThemeEnabled="dark"==je.preferences.theme,je.minVolume=je.preferences.minVolumeToPlayAudio||10,je.speechRate=je.preferences.speechRate||100})()}getEnglishVoices(je){return je.forEach((Ae,ze)=>{Ae.index=ze}),je.filter(Ae=>Ae.lang.startsWith("en"))}getVoicesForWeb(){return(0,Me.Z)(function*(){return new Promise(je=>{void 0!==window.speechSynthesis.onvoiceschanged&&setTimeout(()=>{const ze=window.speechSynthesis.getVoices();je(ze)},1e3)})})()}handleThemeChange(je){var Ae=this;return(0,Me.Z)(function*(){je.detail.checked?(Ae.preferences.theme="dark",Ae.darkThemeEnabled=!0):(Ae.preferences.theme="light",Ae.darkThemeEnabled=!1),document.body.setAttribute("color-theme",Ae.preferences.theme)})()}handleSelectVoiceChange(je){this.platform.is("ios")?this.preferences.iosVoiceProfile=je.detail.value:this.preferences.androidVoiceProfile=je.detail.value,this.selectedVoice=je.detail.value}handleMinVolumeChange(je){this.preferences.minVolumeToPlayAudio=je.detail.value,this.minVolume=je.detail.value}handleSpeechRateChange(je){this.preferences.speechRate=je.detail.value,this.speechRate=je.detail.value}ngOnDestroy(){this.prefSvc.setLocalPreferences(this.preferences),this.prefSvc.savePreference(this.preferences)}}return Ve.\u0275fac=function(je){return new(je||Ve)(V.Y36(Ie.O),V.Y36(ie.K),V.Y36(A.t4))},Ve.\u0275cmp=V.Xpm({type:Ve,selectors:[["app-settings"]],decls:20,vars:8,consts:[["pageTitle","Preferences",3,"showBackButton"],[1,"ion-padding-vertical"],["color","light","slot","end",3,"checked","ionChange"],["placeholder","Loading...",3,"value","ionChange",4,"ngIf"],["position","stacked"],["size","small",3,"value","pin","ionChange"],["placeholder","Loading...",3,"value","ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(je,Ae){1&je&&(V._UZ(0,"app-nav",0),V.TgZ(1,"ion-content"),V.TgZ(2,"ion-list",1),V.TgZ(3,"ion-item"),V.TgZ(4,"ion-label"),V._uU(5,"Enable Dark Mode"),V.qZA(),V.TgZ(6,"ion-toggle",2),V.NdJ("ionChange",function(nt){return Ae.handleThemeChange(nt)}),V.qZA(),V.qZA(),V.TgZ(7,"ion-item"),V.TgZ(8,"ion-label"),V._uU(9,"Playback Voice"),V.qZA(),V.YNc(10,le,2,2,"ion-select",3),V.YNc(11,at,2,2,"ion-select",3),V.qZA(),V.TgZ(12,"ion-item"),V.TgZ(13,"ion-label",4),V._uU(14,"Minimum volume to play audio comments"),V.qZA(),V.TgZ(15,"ion-range",5),V.NdJ("ionChange",function(nt){return Ae.handleMinVolumeChange(nt)}),V.qZA(),V.qZA(),V.TgZ(16,"ion-item"),V.TgZ(17,"ion-label",4),V._uU(18,"Speech Speed Rate"),V.qZA(),V.TgZ(19,"ion-range",5),V.NdJ("ionChange",function(nt){return Ae.handleSpeechRateChange(nt)}),V.qZA(),V.qZA(),V.qZA(),V.qZA()),2&je&&(V.Q6J("showBackButton",!0),V.xp6(6),V.Q6J("checked",Ae.darkThemeEnabled),V.xp6(4),V.Q6J("ngIf",!Ae.isIOS),V.xp6(1),V.Q6J("ngIf",Ae.isIOS),V.xp6(4),V.Q6J("value",Ae.minVolume)("pin",!0),V.xp6(4),V.Q6J("value",Ae.speechRate)("pin",!0))},directives:[ae.r,A.W2,A.q_,A.Ie,A.Q$,A.ho,A.w,_.O5,A.QI,A.I_,A.t9,_.sg,A.n0],styles:["ion-select[_ngcontent-%COMP%]{font-size:.85em}"]}),Ve})();var Oe=L(3792),Ye=L(1796);function Ke(Ve,ot){1&Ve&&V._UZ(0,"ion-icon",3)}let $e=(()=>{class Ve{constructor(je,Ae,ze){this.commentService=je,this.alertController=Ae,this.platform=ze}ngOnInit(){this.comment.speak&&this.processMessage()}getTimeStamp(){if(null==this.comment.createdTime)return"Saving...";let je=this.comment.createdTime.seconds,Ae="";this.comment.updatedTime&&this.comment.textEdited&&(Ae="Edited ",je=this.comment.updatedTime.seconds);const ze=new Date(1e3*je),nt=ze.getDate(),st=ze.getMonth();return`${Ae}${ze.getFullYear()}-${nt}-${st+1} ${ze.getHours()}:${ze.getMinutes()}`}processMessage(){var je=this;return(0,Me.Z)(function*(){const Ae=(yield(yield Ye.u.get({key:"minVolumeToPlayAudio"})).value)||"10",ze=yield(yield ne.getSystemVolume()).volume;console.log(ze),ze>parseInt(Ae,10)?yield je.speakMessage():yield je.showAlertMessage(je.comment.content),je.completeSpeechMessage()})()}speakMessage(){var je=this;return(0,Me.Z)(function*(){const Ae=(yield(yield Ye.u.get({key:"speechRate"})).value)||"100";try{const ze={text:je.comment.content,lang:"en-US",rate:parseInt(Ae,10)/100,pitch:1,volume:1,category:"ambient"};if(je.platform.is("ios")){const nt=(yield(yield Ye.u.get({key:"iosVoiceProfile"})).value)||"en-US";ze.lang=nt}else{const nt=(yield(yield Ye.u.get({key:"androidVoiceProfile"})).value)||"0";ze.voice=parseInt(nt,10)}console.log(ze),yield ne.speak(ze)}catch(ze){console.log(ze)}})()}completeSpeechMessage(){var je=this;return(0,Me.Z)(function*(){const Ae=Object.assign({},je.comment);delete Ae.id,je.commentService.updateComment(je.comment.id,Object.assign(Object.assign({},Ae),{speak:!1}),!1)})()}showAlertMessage(je,Ae=1e4){var ze=this;return(0,Me.Z)(function*(){const nt=yield ze.alertController.create({header:"You received an important message",message:je,buttons:["OK"]});yield nt.present();const st=setTimeout((0,Me.Z)(function*(){yield nt.dismiss(),clearTimeout(st)}),Ae)})()}}return Ve.\u0275fac=function(je){return new(je||Ve)(V.Y36(Oe.O),V.Y36(A.Br),V.Y36(A.t4))},Ve.\u0275cmp=V.Xpm({type:Ve,selectors:[["app-comment"]],inputs:{comment:"comment",commentId:"commentId",textToSpeechAvailable:"textToSpeechAvailable"},decls:6,vars:4,consts:[[3,"ngClass"],[1,"metadata"],["name","volume-medium-outline",4,"ngIf"],["name","volume-medium-outline"]],template:function(je,Ae){1&je&&(V.TgZ(0,"div",0),V._uU(1),V.TgZ(2,"div",1),V.YNc(3,Ke,1,0,"ion-icon",2),V.TgZ(4,"p"),V._uU(5),V.qZA(),V.qZA(),V.qZA()),2&je&&(V.Q6J("ngClass",Ae.comment.speak?"comment-item apply-dark-theme-background speak":"comment-item apply-dark-theme-background"),V.xp6(1),V.hij(" ",Ae.comment.content," "),V.xp6(2),V.Q6J("ngIf",Ae.comment.speak),V.xp6(2),V.Oqu(Ae.getTimeStamp()))},directives:[_.mk,_.O5,A.gu],styles:[".comment-item[_ngcontent-%COMP%]{width:100%;background:#f1f1f1;padding:1rem 1em .5em;font-size:1em;border-radius:14px;white-space:pre-wrap}.comment-item.speak[_ngcontent-%COMP%]{background:#d3f2f5}.comment-item[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]{font-size:.75em;display:flex;align-items:center;justify-content:space-between;padding:0;margin:.5rem 0}.comment-item[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{justify-self:flex-end;flex-grow:1;text-align:right;margin:0}"]}),Ve})();const He=["scrollContent"];function gt(Ve,ot){1&Ve&&(V.TgZ(0,"ion-item",12),V._UZ(1,"ion-spinner"),V.qZA())}function ct(Ve,ot){1&Ve&&(V.TgZ(0,"ion-item"),V._uU(1,"You don't have any comments yet "),V.qZA())}function bt(Ve,ot){if(1&Ve){const je=V.EpF();V.TgZ(0,"ion-item-sliding",13),V.TgZ(1,"ion-item",13),V._UZ(2,"app-comment",14),V.qZA(),V.TgZ(3,"ion-item-options",15),V.TgZ(4,"ion-item-option",16),V.NdJ("click",function(){const nt=V.CHM(je).$implicit;return V.oxw().editComment(nt)}),V._UZ(5,"ion-icon",17),V.qZA(),V.qZA(),V.qZA()}if(2&Ve){const je=ot.$implicit,Ae=V.oxw();V.xp6(2),V.Q6J("textToSpeechAvailable",Ae.textToSpeechSupport)("commentId",je.id)("comment",je)}}function E(Ve,ot){if(1&Ve){const je=V.EpF();V.TgZ(0,"div",18),V.TgZ(1,"ion-button",19),V.NdJ("click",function(){return V.CHM(je),V.oxw().saveComment()}),V._UZ(2,"ion-icon",20),V.qZA(),V.TgZ(3,"ion-button",19),V.NdJ("click",function(){return V.CHM(je),V.oxw().saveComment(!0)}),V._UZ(4,"ion-icon",21),V.qZA(),V.qZA()}}function We(Ve,ot){if(1&Ve){const je=V.EpF();V.TgZ(0,"div",18),V.TgZ(1,"ion-button",22),V.NdJ("click",function(){return V.CHM(je),V.oxw().saveComment()}),V._uU(2," Save "),V.qZA(),V.TgZ(3,"ion-button",22),V.NdJ("click",function(){return V.CHM(je),V.oxw().cancelEdit()}),V._uU(4," Cancel "),V.qZA(),V.qZA()}}const Te=[{path:"",component:(()=>{class Ve{constructor(je){this.cmtSvc=je,this.showEditButtons=!1,this.showSpinner=!0,this.textToSpeechSupport=!1}ngOnInit(){this.cmtSvc.getComments().subscribe(je=>{this.comments=je,this.showSpinner=!1,this.scrollToBottomOnInit()})}scrollToBottomOnInit(){const je=setTimeout(()=>{this.scrollContent.scrollToBottom(500),clearTimeout(je)},300)}saveComment(je=!1){if(console.log(ne.getSystemVolume()),null!==this.commentText&&""!==this.commentText){const Ae={content:this.commentText,speak:je};this.commentId&&null!==this.commentText?this.cmtSvc.updateComment(this.commentId,Ae,!0):this.cmtSvc.addComment(Ae),this.commentText="",this.commentId=null,this.showEditButtons=!1}}handleChange(je){this.commentText=je.target.innerHTML}editComment(je){this.commentId=je.id,this.commentText=je.content,this.showEditButtons=!0,this.slidingList.closeSlidingItems()}trackByFn(je,Ae){return Ae.id}cancelEdit(){this.commentId=null,this.commentText="",this.showEditButtons=!1}}return Ve.\u0275fac=function(je){return new(je||Ve)(V.Y36(Oe.O))},Ve.\u0275cmp=V.Xpm({type:Ve,selectors:[["app-home"]],viewQuery:function(je,Ae){if(1&je&&(V.Gf(A.q_,5),V.Gf(He,5)),2&je){let ze;V.iGM(ze=V.CRH())&&(Ae.slidingList=ze.first),V.iGM(ze=V.CRH())&&(Ae.scrollContent=ze.first)}},decls:15,vars:9,consts:[["pageTitle","Trail App"],["id","main",3,"scrollEvents","fullscreen"],["scrollContent",""],["slidingList",""],["class","ion-no-padding","lines","none",4,"ngIf"],[4,"ngIf"],["lines","none",4,"ngFor","ngForOf","ngForTrackBy"],["lines","none",1,"comment-spacer"],[1,"form-container"],[1,"form-row","apply-dark-theme-background"],["placeholder","Enter more information here...",3,"value","change"],["class","edit-btn-container",4,"ngIf"],["lines","none",1,"ion-no-padding"],["lines","none"],[3,"textToSpeechAvailable","commentId","comment"],["side","end"],[3,"click"],["slot","icon-only","name","pencil-outline"],[1,"edit-btn-container"],["shape","circle",3,"click"],["name","add-outline","size","large"],["name","volume-medium-outline"],["size","small",3,"click"]],template:function(je,Ae){1&je&&(V._UZ(0,"app-nav",0),V.TgZ(1,"ion-content",1,2),V.TgZ(3,"ion-list",null,3),V.YNc(5,gt,2,0,"ion-item",4),V.YNc(6,ct,2,0,"ion-item",5),V.YNc(7,bt,6,3,"ion-item-sliding",6),V._UZ(8,"ion-item",7),V.qZA(),V.TgZ(9,"div",8),V.TgZ(10,"form"),V.TgZ(11,"div",9),V.TgZ(12,"ion-textarea",10),V.NdJ("change",function(nt){return Ae.handleChange(nt)}),V.qZA(),V.YNc(13,E,5,0,"div",11),V.YNc(14,We,5,0,"div",11),V.qZA(),V.qZA(),V.qZA(),V.qZA()),2&je&&(V.xp6(1),V.Q6J("scrollEvents",!0)("fullscreen",!0),V.xp6(4),V.Q6J("ngIf",Ae.showSpinner),V.xp6(1),V.Q6J("ngIf",!(Ae.comments&&0!=Ae.comments.length||Ae.showSpinner)),V.xp6(1),V.Q6J("ngForOf",Ae.comments)("ngForTrackBy",Ae.trackByFn),V.xp6(5),V.s9C("value",Ae.commentText),V.xp6(1),V.Q6J("ngIf",!Ae.showEditButtons),V.xp6(1),V.Q6J("ngIf",Ae.showEditButtons))},directives:[ae.r,A.W2,A.q_,_.O5,_.sg,A.Ie,A.g2,A.j9,A.PQ,A.td,$e,A.IK,A.u8,A.gu,A.YG],styles:[".nav-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:calc(100vh - 60px);align-items:center}.nav-content[_ngcontent-%COMP%]   .user-container[_ngcontent-%COMP%]{padding:3rem 1rem;text-align:center}.nav-content[_ngcontent-%COMP%]   .user-container[_ngcontent-%COMP%]   .avatar-alt[_ngcontent-%COMP%]{font-size:5em}.nav-content[_ngcontent-%COMP%]   .user-container[_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%]{font-weight:500;font-size:1.5em}.nav-content[_ngcontent-%COMP%]   .user-container[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{color:var(--ion-color-secondary)}.nav-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:75%;margin-bottom:3rem}.form-row[_ngcontent-%COMP%]{position:fixed;display:flex;padding:1.5em 1em;align-items:center;width:100%;bottom:0;background-color:#fff;z-index:999}.form-row[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-weight:500}ion-button[shape=circle][_ngcontent-%COMP%]{--border-radius: 50%;width:56px;height:56px}app-comment[_ngcontent-%COMP%]{width:100%}ion-list[_ngcontent-%COMP%]{margin-top:1em}.scroll-container[_ngcontent-%COMP%]{height:calc(100vh - 220px);overflow-y:scroll}.edit-btn-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}ion-spinner[_ngcontent-%COMP%]{margin:2rem auto}ion-item-sliding[_ngcontent-%COMP%]{margin-bottom:1rem}ion-textarea[_ngcontent-%COMP%]{align-self:flex-start}.comment-spacer[_ngcontent-%COMP%]{height:220px}"]}),Ve})()},{path:"settings",component:xe}];let he=(()=>{class Ve{}return Ve.\u0275fac=function(je){return new(je||Ve)},Ve.\u0275mod=V.oAB({type:Ve}),Ve.\u0275inj=V.cJS({imports:[[re.Bz.forChild(Te)],re.Bz]}),Ve})();var we=L(6175);let qe=(()=>{class Ve{}return Ve.\u0275fac=function(je){return new(je||Ve)},Ve.\u0275mod=V.oAB({type:Ve}),Ve.\u0275inj=V.cJS({imports:[[_.ez,A.Pc,he,we.q]]}),Ve})()},7545:(Xt,it,L)=>{"use strict";L.r(it),L.d(it,{LoginModule:()=>ct});var _=L(8583),A=L(8945),re=L(665),Me=L(5496),ce=L(8239),_e=L(5257),ne=L(3018),V=L(7556),Ie=L(3071),ie=L(547),ae=L(994);function Ne(bt,E){1&bt&&(ne.TgZ(0,"ion-note",10),ne._uU(1,"Email is invalid"),ne.qZA())}function le(bt,E){1&bt&&(ne.TgZ(0,"ion-note",10),ne._uU(1,"Password needs to be 6 characters"),ne.qZA())}function Ee(bt,E){if(1&bt){const We=ne.EpF();ne.TgZ(0,"form",3),ne.NdJ("ngSubmit",function(){return ne.CHM(We),ne.oxw().login()}),ne.TgZ(1,"ion-item",4),ne._UZ(2,"ion-input",5),ne.YNc(3,Ne,2,0,"ion-note",6),ne.qZA(),ne.TgZ(4,"ion-item",4),ne._UZ(5,"ion-input",7),ne.YNc(6,le,2,0,"ion-note",6),ne.qZA(),ne.TgZ(7,"ion-button",8),ne._uU(8," Log in "),ne.qZA(),ne.TgZ(9,"ion-button",9),ne.NdJ("click",function(){return ne.CHM(We),ne.oxw().createUser()}),ne._uU(10,"Create account "),ne.qZA(),ne.qZA()}if(2&bt){const We=ne.oxw();ne.Q6J("formGroup",We.credentials),ne.xp6(3),ne.Q6J("ngIf",(We.email.dirty||We.email.touched)&&We.email.errors),ne.xp6(3),ne.Q6J("ngIf",(We.password.dirty||We.password.touched)&&We.password.errors)}}function at(bt,E){1&bt&&(ne.TgZ(0,"ion-note",10),ne._uU(1,"Name is required"),ne.qZA())}function xe(bt,E){1&bt&&(ne.TgZ(0,"ion-note",10),ne._uU(1,"Email is invalid"),ne.qZA())}function Oe(bt,E){1&bt&&(ne.TgZ(0,"ion-note",10),ne._uU(1,"Password needs to be 6 characters"),ne.qZA())}function Ye(bt,E){if(1&bt){const We=ne.EpF();ne.TgZ(0,"form",3),ne.NdJ("ngSubmit",function(){return ne.CHM(We),ne.oxw().register()}),ne.TgZ(1,"ion-item",4),ne._UZ(2,"ion-input",11),ne.YNc(3,at,2,0,"ion-note",6),ne.qZA(),ne.TgZ(4,"ion-item",4),ne._UZ(5,"ion-input",5),ne.YNc(6,xe,2,0,"ion-note",6),ne.qZA(),ne.TgZ(7,"ion-item",4),ne._UZ(8,"ion-input",7),ne.YNc(9,Oe,2,0,"ion-note",6),ne.qZA(),ne.TgZ(10,"ion-button",8),ne._uU(11," Register "),ne.qZA(),ne.TgZ(12,"ion-button",12),ne.NdJ("click",function(){return ne.CHM(We),ne.oxw().cancelRegister()}),ne._uU(13," Cancel "),ne.qZA(),ne.qZA()}if(2&bt){const We=ne.oxw();ne.Q6J("formGroup",We.userRegistration),ne.xp6(3),ne.Q6J("ngIf",(We.name.dirty||We.name.touched)&&We.name.errors),ne.xp6(3),ne.Q6J("ngIf",(We.email.dirty||We.email.touched)&&We.email.errors),ne.xp6(3),ne.Q6J("ngIf",(We.password.dirty||We.password.touched)&&We.password.errors)}}const $e=[{path:"",component:(()=>{class bt{constructor(We,_t,Te,he,we,qe,Ve){this.fb=We,this.loadingController=_t,this.alertController=Te,this.authService=he,this.userService=we,this.prefService=qe,this.router=Ve,this.showRegister=!1}ngOnInit(){this.credentials=this.fb.group({email:["",[re.kI.required,re.kI.email]],password:["",[re.kI.required,re.kI.minLength(6)]]}),this.userRegistration=this.fb.group({name:["",[re.kI.required]],email:["",[re.kI.required,re.kI.email]],password:["",[re.kI.required,re.kI.minLength(6)]]})}get email(){return this.credentials.get("email")}get password(){return this.credentials.get("password")}get regEmail(){return this.userRegistration.get("email")}get regPassword(){return this.userRegistration.get("password")}get name(){return this.userRegistration.get("name")}login(){var We=this;return(0,ce.Z)(function*(){const _t=yield We.loadingController.create();yield _t.present();const Te=yield We.authService.login(We.credentials.value);yield _t.dismiss(),Te?(yield We.initializeUser(Te),yield We.prefService.setUserPrefs(Te.user.uid),We.router.navigateByUrl("/home",{replaceUrl:!0})):We.showAlert("Login failed","Please try again!")})()}initializeUser(We){var _t=this;return(0,ce.Z)(function*(){return new Promise(Te=>{const he={id:We.user.uid,email:We.user.email};_t.userService.getUserInfo(We.user.uid).pipe((0,_e.q)(1)).subscribe(we=>{he.displayName=we.displayName,_t.userService.saveUserToLocalStorage(he),Te()})})})()}register(){var We=this;return(0,ce.Z)(function*(){const _t=yield We.loadingController.create();yield _t.present();const Te=yield We.authService.register(We.userRegistration.value);yield _t.dismiss(),Te?We.router.navigateByUrl("/home",{replaceUrl:!0}):We.showAlert("Registration failed","Please try again!")})()}createUser(){this.showRegister=!0}showAlert(We,_t){var Te=this;return(0,ce.Z)(function*(){yield(yield Te.alertController.create({header:We,message:_t,buttons:["OK"]})).present()})()}cancelRegister(){this.userRegistration.reset(),this.showRegister=!1}}return bt.\u0275fac=function(We){return new(We||bt)(ne.Y36(re.qu),ne.Y36(A.HT),ne.Y36(A.Br),ne.Y36(V.e),ne.Y36(Ie.K),ne.Y36(ie.O),ne.Y36(Me.F0))},bt.\u0275cmp=ne.Xpm({type:bt,selectors:[["app-login"]],decls:4,vars:2,consts:[["pageTitle","Login"],[1,"ion-padding"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],["fill","solid",1,"ion-margin-bottom"],["type","email","placeholder","Email","formControlName","email"],["slot","error",4,"ngIf"],["type","password","placeholder","Password","formControlName","password"],["size","medium","shape","round","color","primary","type","submit","expand","block",1,"ion-margin-bottom"],["size","medium","shape","round","type","button","expand","block","color","light",3,"click"],["slot","error"],["type","text","placeholder","Name","formControlName","name"],["size","medium","shape","round","color","primary","type","button","expand","block",1,"ion-margin-bottom",3,"click"]],template:function(We,_t){1&We&&(ne._UZ(0,"app-nav",0),ne.TgZ(1,"ion-content",1),ne.YNc(2,Ee,11,3,"form",2),ne.YNc(3,Ye,14,4,"form",2),ne.qZA()),2&We&&(ne.xp6(2),ne.Q6J("ngIf",!_t.showRegister),ne.xp6(1),ne.Q6J("ngIf",_t.showRegister))},directives:[ae.r,A.W2,_.O5,re._Y,re.JL,re.sg,A.Ie,A.pK,A.j9,re.JJ,re.u,A.YG,A.uN],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]}),bt})()}];let He=(()=>{class bt{}return bt.\u0275fac=function(We){return new(We||bt)},bt.\u0275mod=ne.oAB({type:bt}),bt.\u0275inj=ne.cJS({imports:[[Me.Bz.forChild($e)],Me.Bz]}),bt})();var gt=L(6175);let ct=(()=>{class bt{}return bt.\u0275fac=function(We){return new(We||bt)},bt.\u0275mod=ne.oAB({type:bt}),bt.\u0275inj=ne.cJS({providers:[],imports:[[_.ez,re.u5,re.UX,A.Pc,He,gt.q]]}),bt})()},7556:(Xt,it,L)=>{"use strict";L.d(it,{e:()=>ne});var _=L(8239),A=L(7910),re=L(1796),Me=L(3018),ce=L(3071),_e=L(547);let ne=(()=>{class V{constructor(ie,ae,Ne){this.auth=ie,this.userSvc=ae,this.prefService=Ne}register({email:ie,password:ae,name:Ne}){var le=this;return(0,_.Z)(function*(){try{const Ee=yield(0,A.Xb)(le.auth,ie,ae);return le.userSvc.addUserInfo({displayName:Ne}),le.userSvc.saveUserToLocalStorage({id:Ee.user.uid,email:Ee.user.email,displayName:Ne}),yield le.prefService.setDefaultPrefs(),Ee}catch(Ee){return null}})()}login({email:ie,password:ae}){var Ne=this;return(0,_.Z)(function*(){try{return yield(0,A.e5)(Ne.auth,ie,ae)}catch(le){return null}})()}logout(){var ie=this;return(0,_.Z)(function*(){return ie.userSvc.clearStorage(),yield re.u.clear(),(0,A.w7)(ie.auth)})()}}return V.\u0275fac=function(ie){return new(ie||V)(Me.LFG(A.gx),Me.LFG(ce.K),Me.LFG(_e.O))},V.\u0275prov=Me.Yz7({token:V,factory:V.\u0275fac,providedIn:"root"}),V})()},3792:(Xt,it,L)=>{"use strict";L.d(it,{O:()=>ce});var _=L(2502),A=L(1304),re=L(3018),Me=L(3071);let ce=(()=>{class _e{constructor(V,Ie){this.firestore=V,this.userSvc=Ie,this.COMMENTS_COLLECTION="comments/comment",this.user=this.userSvc.getUserDataFromLocalStorage()}getComments(){const V=(0,A.hJ)(this.firestore,`${this.user.id}/${this.COMMENTS_COLLECTION}`),Ie=(0,_.IO)(V,(0,_.Xo)("createdTime","asc"));return(0,_.BS)(Ie,{idField:"id"})}addComment(V){const Ie=(0,A.hJ)(this.firestore,`${this.user.id}/${this.COMMENTS_COLLECTION}`);return(0,A.ET)(Ie,Object.assign(Object.assign({},V),{createdTime:A.EK.fromDate(new Date)}))}updateComment(V,Ie,ie=!1){const ae=(0,A.JU)(this.firestore,`${this.user.id}/${this.COMMENTS_COLLECTION}/${V}`);(0,A.r7)(ae,Object.assign(Object.assign({},Ie),{textEdited:ie,updatedTime:A.EK.fromDate(new Date)}))}}return _e.\u0275fac=function(V){return new(V||_e)(re.LFG(_.gg),re.LFG(Me.K))},_e.\u0275prov=re.Yz7({token:_e,factory:_e.\u0275fac,providedIn:"root"}),_e})()},547:(Xt,it,L)=>{"use strict";L.d(it,{O:()=>_e});var _=L(8239),A=L(2502),re=L(1796),Me=L(3018),ce=L(3071);let _e=(()=>{class ne{constructor(Ie,ie){this.firestore=Ie,this.FIRESTORE_USER_PREFS_PATH="user_prefs",this.DEFAULT_USER_PREFS={minVolumeToPlayAudio:10,theme:"light",iosVoiceProfile:"en-US",androidVoiceProfile:0,speechRate:100},this.user=ie.getUserDataFromLocalStorage()}getPreferencesFromFirebase(Ie=this.user.id){const ie=(0,A.JU)(this.firestore,`${Ie}/${this.FIRESTORE_USER_PREFS_PATH}`);return(0,A._1)(ie)}savePreference(Ie){const ie=(0,A.JU)(this.firestore,`${this.user.id}/${this.FIRESTORE_USER_PREFS_PATH}`);return(0,A.pl)(ie,Ie)}setUserPrefs(Ie=this.user.id){this.getPreferencesFromFirebase(Ie).subscribe(ie=>{this.preferences=ie,this.setLocalPreferences(ie),this.loadPreferences()})}setDefaultPrefs(){return new Promise(Ie=>{this.preferences=this.DEFAULT_USER_PREFS,this.savePreference(this.preferences),this.setLocalPreferences(this.preferences),this.loadPreferences(),Ie()})}setLocalPreferences(Ie){return(0,_.Z)(function*(){for(const[ie,ae]of Object.entries(Ie))"string"==typeof ae&&(yield re.u.set({key:ie,value:ae})),"object"==typeof ae&&(yield re.u.set({key:ie,value:JSON.stringify(ae)})),"number"==typeof ae&&(yield re.u.set({key:ie,value:ae.toString(10)}))})()}loadPreferences(){const{theme:Ie}=this.preferences;document.body.setAttribute("color-theme",Ie||"")}}return ne.\u0275fac=function(Ie){return new(Ie||ne)(Me.LFG(A.gg),Me.LFG(ce.K))},ne.\u0275prov=Me.Yz7({token:ne,factory:ne.\u0275fac,providedIn:"root"}),ne})()},3071:(Xt,it,L)=>{"use strict";L.d(it,{K:()=>Me});var _=L(2502),A=L(1304),re=L(3018);let Me=(()=>{class ce{constructor(ne){this.firestore=ne,this.USER_INFO_PATH="user_info",this.user=this.getUserDataFromLocalStorage()}getUserInfo(ne=this.user.id){const V=(0,A.JU)(this.firestore,`${ne}/${this.USER_INFO_PATH}`);return(0,_._1)(V)}addUserInfo(ne){const V=(0,A.JU)(this.firestore,`${this.user.id}/${this.USER_INFO_PATH}`);return(0,A.pl)(V,ne)}updateUserInfo(ne){const V=(0,A.JU)(this.firestore,`${this.user.id}/${this.USER_INFO_PATH}`);return(0,A.pl)(V,ne)}saveUserToLocalStorage(ne){localStorage.setItem("userData",JSON.stringify(ne))}getUserDataFromLocalStorage(){return JSON.parse(localStorage.getItem("userData")||"{}")}clearStorage(){localStorage.clear()}}return ce.\u0275fac=function(ne){return new(ne||ce)(re.LFG(_.gg))},ce.\u0275prov=re.Yz7({token:ce,factory:ce.\u0275fac,providedIn:"root"}),ce})()},7073:(Xt,it,L)=>{"use strict";var _=L(8583),A=L(3018);class re extends _.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Me extends re{static makeCurrent(){(0,_.HT)(new Me)}onAndCancel(l,c,p){return l.addEventListener(c,p,!1),()=>{l.removeEventListener(c,p,!1)}}dispatchEvent(l,c){l.dispatchEvent(c)}remove(l){l.parentNode&&l.parentNode.removeChild(l)}createElement(l,c){return(c=c||this.getDefaultDocument()).createElement(l)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(l){return l.nodeType===Node.ELEMENT_NODE}isShadowRoot(l){return l instanceof DocumentFragment}getGlobalEventTarget(l,c){return"window"===c?window:"document"===c?l:"body"===c?l.body:null}getBaseHref(l){const c=(ce=ce||document.querySelector("base"),ce?ce.getAttribute("href"):null);return null==c?null:function(d){ne=ne||document.createElement("a"),ne.setAttribute("href",d);const l=ne.pathname;return"/"===l.charAt(0)?l:`/${l}`}(c)}resetBaseElement(){ce=null}getUserAgent(){return window.navigator.userAgent}getCookie(l){return(0,_.Mx)(document.cookie,l)}}let ne,ce=null;const Ie=new A.OlP("TRANSITION_ID"),ae=[{provide:A.ip1,useFactory:function(d,l,c){return()=>{c.get(A.CZH).donePromise.then(()=>{const p=(0,_.q)(),I=l.querySelectorAll(`style[ng-transition="${d}"]`);for(let N=0;N<I.length;N++)p.remove(I[N])})}},deps:[Ie,_.K0,A.zs3],multi:!0}];class Ne{static init(){(0,A.VLi)(new Ne)}addToWindow(l){A.dqk.getAngularTestability=(p,I=!0)=>{const N=l.findTestabilityInTree(p,I);if(null==N)throw new Error("Could not find testability for element.");return N},A.dqk.getAllAngularTestabilities=()=>l.getAllTestabilities(),A.dqk.getAllAngularRootElements=()=>l.getAllRootElements(),A.dqk.frameworkStabilizers||(A.dqk.frameworkStabilizers=[]),A.dqk.frameworkStabilizers.push(p=>{const I=A.dqk.getAllAngularTestabilities();let N=I.length,j=!1;const ge=function(Re){j=j||Re,N--,0==N&&p(j)};I.forEach(function(Re){Re.whenStable(ge)})})}findTestabilityInTree(l,c,p){if(null==c)return null;const I=l.getTestability(c);return null!=I?I:p?(0,_.q)().isShadowRoot(c)?this.findTestabilityInTree(l,c.host,!0):this.findTestabilityInTree(l,c.parentElement,!0):null}}let le=(()=>{class d{build(){return new XMLHttpRequest}}return d.\u0275fac=function(c){return new(c||d)},d.\u0275prov=A.Yz7({token:d,factory:d.\u0275fac}),d})();const he=new A.OlP("EventManagerPlugins");let we=(()=>{class d{constructor(c,p){this._zone=p,this._eventNameToPlugin=new Map,c.forEach(I=>I.manager=this),this._plugins=c.slice().reverse()}addEventListener(c,p,I){return this._findPluginFor(p).addEventListener(c,p,I)}addGlobalEventListener(c,p,I){return this._findPluginFor(p).addGlobalEventListener(c,p,I)}getZone(){return this._zone}_findPluginFor(c){const p=this._eventNameToPlugin.get(c);if(p)return p;const I=this._plugins;for(let N=0;N<I.length;N++){const j=I[N];if(j.supports(c))return this._eventNameToPlugin.set(c,j),j}throw new Error(`No event manager plugin found for event ${c}`)}}return d.\u0275fac=function(c){return new(c||d)(A.LFG(he),A.LFG(A.R0b))},d.\u0275prov=A.Yz7({token:d,factory:d.\u0275fac}),d})();class qe{constructor(l){this._doc=l}addGlobalEventListener(l,c,p){const I=(0,_.q)().getGlobalEventTarget(this._doc,l);if(!I)throw new Error(`Unsupported event target ${I} for event ${c}`);return this.addEventListener(I,c,p)}}let Ve=(()=>{class d{constructor(){this._stylesSet=new Set}addStyles(c){const p=new Set;c.forEach(I=>{this._stylesSet.has(I)||(this._stylesSet.add(I),p.add(I))}),this.onStylesAdded(p)}onStylesAdded(c){}getAllStyles(){return Array.from(this._stylesSet)}}return d.\u0275fac=function(c){return new(c||d)},d.\u0275prov=A.Yz7({token:d,factory:d.\u0275fac}),d})(),ot=(()=>{class d extends Ve{constructor(c){super(),this._doc=c,this._hostNodes=new Map,this._hostNodes.set(c.head,[])}_addStylesToHost(c,p,I){c.forEach(N=>{const j=this._doc.createElement("style");j.textContent=N,I.push(p.appendChild(j))})}addHost(c){const p=[];this._addStylesToHost(this._stylesSet,c,p),this._hostNodes.set(c,p)}removeHost(c){const p=this._hostNodes.get(c);p&&p.forEach(je),this._hostNodes.delete(c)}onStylesAdded(c){this._hostNodes.forEach((p,I)=>{this._addStylesToHost(c,I,p)})}ngOnDestroy(){this._hostNodes.forEach(c=>c.forEach(je))}}return d.\u0275fac=function(c){return new(c||d)(A.LFG(_.K0))},d.\u0275prov=A.Yz7({token:d,factory:d.\u0275fac}),d})();function je(d){(0,_.q)().remove(d)}const Ae={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ze=/%COMP%/g;function Ft(d,l,c){for(let p=0;p<l.length;p++){let I=l[p];Array.isArray(I)?Ft(d,I,c):(I=I.replace(ze,d),c.push(I))}return c}function Cn(d){return l=>{if("__ngUnwrap__"===l)return d;!1===d(l)&&(l.preventDefault(),l.returnValue=!1)}}let Rn=(()=>{class d{constructor(c,p,I){this.eventManager=c,this.sharedStylesHost=p,this.appId=I,this.rendererByCompId=new Map,this.defaultRenderer=new hn(c)}createRenderer(c,p){if(!c||!p)return this.defaultRenderer;switch(p.encapsulation){case A.ifc.Emulated:{let I=this.rendererByCompId.get(p.id);return I||(I=new wt(this.eventManager,this.sharedStylesHost,p,this.appId),this.rendererByCompId.set(p.id,I)),I.applyToHost(c),I}case 1:case A.ifc.ShadowDom:return new an(this.eventManager,this.sharedStylesHost,c,p);default:if(!this.rendererByCompId.has(p.id)){const I=Ft(p.id,p.styles,[]);this.sharedStylesHost.addStyles(I),this.rendererByCompId.set(p.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return d.\u0275fac=function(c){return new(c||d)(A.LFG(we),A.LFG(ot),A.LFG(A.AFp))},d.\u0275prov=A.Yz7({token:d,factory:d.\u0275fac}),d})();class hn{constructor(l){this.eventManager=l,this.data=Object.create(null)}destroy(){}createElement(l,c){return c?document.createElementNS(Ae[c]||c,l):document.createElement(l)}createComment(l){return document.createComment(l)}createText(l){return document.createTextNode(l)}appendChild(l,c){l.appendChild(c)}insertBefore(l,c,p){l&&l.insertBefore(c,p)}removeChild(l,c){l&&l.removeChild(c)}selectRootElement(l,c){let p="string"==typeof l?document.querySelector(l):l;if(!p)throw new Error(`The selector "${l}" did not match any elements`);return c||(p.textContent=""),p}parentNode(l){return l.parentNode}nextSibling(l){return l.nextSibling}setAttribute(l,c,p,I){if(I){c=I+":"+c;const N=Ae[I];N?l.setAttributeNS(N,c,p):l.setAttribute(c,p)}else l.setAttribute(c,p)}removeAttribute(l,c,p){if(p){const I=Ae[p];I?l.removeAttributeNS(I,c):l.removeAttribute(`${p}:${c}`)}else l.removeAttribute(c)}addClass(l,c){l.classList.add(c)}removeClass(l,c){l.classList.remove(c)}setStyle(l,c,p,I){I&(A.JOm.DashCase|A.JOm.Important)?l.style.setProperty(c,p,I&A.JOm.Important?"important":""):l.style[c]=p}removeStyle(l,c,p){p&A.JOm.DashCase?l.style.removeProperty(c):l.style[c]=""}setProperty(l,c,p){l[c]=p}setValue(l,c){l.nodeValue=c}listen(l,c,p){return"string"==typeof l?this.eventManager.addGlobalEventListener(l,c,Cn(p)):this.eventManager.addEventListener(l,c,Cn(p))}}class wt extends hn{constructor(l,c,p,I){super(l),this.component=p;const N=Ft(I+"-"+p.id,p.styles,[]);c.addStyles(N),this.contentAttr="_ngcontent-%COMP%".replace(ze,I+"-"+p.id),this.hostAttr="_nghost-%COMP%".replace(ze,I+"-"+p.id)}applyToHost(l){super.setAttribute(l,this.hostAttr,"")}createElement(l,c){const p=super.createElement(l,c);return super.setAttribute(p,this.contentAttr,""),p}}class an extends hn{constructor(l,c,p,I){super(l),this.sharedStylesHost=c,this.hostEl=p,this.shadowRoot=p.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const N=Ft(I.id,I.styles,[]);for(let j=0;j<N.length;j++){const ge=document.createElement("style");ge.textContent=N[j],this.shadowRoot.appendChild(ge)}}nodeOrShadowRoot(l){return l===this.hostEl?this.shadowRoot:l}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(l,c){return super.appendChild(this.nodeOrShadowRoot(l),c)}insertBefore(l,c,p){return super.insertBefore(this.nodeOrShadowRoot(l),c,p)}removeChild(l,c){return super.removeChild(this.nodeOrShadowRoot(l),c)}parentNode(l){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(l)))}}let jn=(()=>{class d extends qe{constructor(c){super(c)}supports(c){return!0}addEventListener(c,p,I){return c.addEventListener(p,I,!1),()=>this.removeEventListener(c,p,I)}removeEventListener(c,p,I){return c.removeEventListener(p,I)}}return d.\u0275fac=function(c){return new(c||d)(A.LFG(_.K0))},d.\u0275prov=A.Yz7({token:d,factory:d.\u0275fac}),d})();const er=["alt","control","meta","shift"],ft={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Kn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},hr={alt:d=>d.altKey,control:d=>d.ctrlKey,meta:d=>d.metaKey,shift:d=>d.shiftKey};let fr=(()=>{class d extends qe{constructor(c){super(c)}supports(c){return null!=d.parseEventName(c)}addEventListener(c,p,I){const N=d.parseEventName(p),j=d.eventCallback(N.fullKey,I,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,_.q)().onAndCancel(c,N.domEventName,j))}static parseEventName(c){const p=c.toLowerCase().split("."),I=p.shift();if(0===p.length||"keydown"!==I&&"keyup"!==I)return null;const N=d._normalizeKey(p.pop());let j="";if(er.forEach(Re=>{const Ge=p.indexOf(Re);Ge>-1&&(p.splice(Ge,1),j+=Re+".")}),j+=N,0!=p.length||0===N.length)return null;const ge={};return ge.domEventName=I,ge.fullKey=j,ge}static getEventFullKey(c){let p="",I=function(d){let l=d.key;if(null==l){if(l=d.keyIdentifier,null==l)return"Unidentified";l.startsWith("U+")&&(l=String.fromCharCode(parseInt(l.substring(2),16)),3===d.location&&Kn.hasOwnProperty(l)&&(l=Kn[l]))}return ft[l]||l}(c);return I=I.toLowerCase()," "===I?I="space":"."===I&&(I="dot"),er.forEach(N=>{N!=I&&hr[N](c)&&(p+=N+".")}),p+=I,p}static eventCallback(c,p,I){return N=>{d.getEventFullKey(N)===c&&I.runGuarded(()=>p(N))}}static _normalizeKey(c){return"esc"===c?"escape":c}}return d.\u0275fac=function(c){return new(c||d)(A.LFG(_.K0))},d.\u0275prov=A.Yz7({token:d,factory:d.\u0275fac}),d})();const Fe=(0,A.eFA)(A._c5,"browser",[{provide:A.Lbi,useValue:_.bD},{provide:A.g9A,useValue:function(){Me.makeCurrent(),Ne.init()},multi:!0},{provide:_.K0,useFactory:function(){return(0,A.RDi)(document),document},deps:[]}]),ve=[[],{provide:A.zSh,useValue:"root"},{provide:A.qLn,useFactory:function(){return new A.qLn},deps:[]},{provide:he,useClass:jn,multi:!0,deps:[_.K0,A.R0b,A.Lbi]},{provide:he,useClass:fr,multi:!0,deps:[_.K0]},[],{provide:Rn,useClass:Rn,deps:[we,ot,A.AFp]},{provide:A.FYo,useExisting:Rn},{provide:Ve,useExisting:ot},{provide:ot,useClass:ot,deps:[_.K0]},{provide:A.dDg,useClass:A.dDg,deps:[A.R0b]},{provide:we,useClass:we,deps:[he,A.R0b]},{provide:_.JF,useClass:le,deps:[]},[]];let Pe=(()=>{class d{constructor(c){if(c)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(c){return{ngModule:d,providers:[{provide:A.AFp,useValue:c.appId},{provide:Ie,useExisting:A.AFp},ae]}}}return d.\u0275fac=function(c){return new(c||d)(A.LFG(d,12))},d.\u0275mod=A.oAB({type:d}),d.\u0275inj=A.cJS({providers:ve,imports:[_.ez,A.hGG]}),d})();"undefined"!=typeof window&&window;var Or=L(5496),Dr=L(665),Vr=L(8945),rs=L(4022),kn=L(8002),Cs=L(5257),Kr=L(7910),ki=L(2329);const Di=(0,kn.U)(d=>!!d);let Ii=(()=>{class d{constructor(c,p){this.router=c,this.auth=p,this.canActivate=(I,N)=>{const j=I.data.authGuardPipe||(()=>Di);return(0,Kr.EA)(this.auth).pipe((0,Cs.q)(1),j(I,N),(0,kn.U)(ge=>"boolean"==typeof ge?ge:Array.isArray(ge)?this.router.createUrlTree(ge):this.router.parseUrl(ge)))}}}return d.\u0275fac=function(c){return new(c||d)(A.LFG(Or.F0),A.LFG(Kr.gx))},d.\u0275prov=A.Yz7({token:d,factory:d.\u0275fac,providedIn:"any"}),d})();const ut=d=>({canActivate:[Ii],data:{authGuardPipe:d}}),fn=[Object.assign({path:"",loadChildren:()=>Promise.resolve().then(L.bind(L,7545)).then(d=>d.LoginModule)},ut(()=>{return d=["home"],(0,rs.z)(Di,(0,kn.U)(l=>l&&d||!0));var d})),Object.assign({path:"home",loadChildren:()=>Promise.resolve().then(L.bind(L,8176)).then(d=>d.HomeModule)},ut(()=>{return d=[""],(0,rs.z)(Di,(0,kn.U)(l=>l||d));var d})),{path:"**",redirectTo:"",pathMatch:"full"}];let Wn=(()=>{class d{}return d.\u0275fac=function(c){return new(c||d)},d.\u0275mod=A.oAB({type:d}),d.\u0275inj=A.cJS({imports:[[Or.Bz.forRoot(fn,{preloadingStrategy:Or.wm})],Or.Bz]}),d})();var Xn=L(547),ur=L(3071);let Gi=(()=>{class d{constructor(c,p,I){this.platform=c,this.prefService=p,this.userService=I,this.title="trailApp",this.initializeApp(),this.user=this.userService.getUserDataFromLocalStorage()}initializeApp(){this.platform.ready().then(()=>{Object.keys(this.user).length>0&&this.prefService.setUserPrefs()})}}return d.\u0275fac=function(c){return new(c||d)(A.Y36(Vr.t4),A.Y36(Xn.O),A.Y36(ur.K))},d.\u0275cmp=A.Xpm({type:d,selectors:[["app-root"]],decls:2,vars:0,template:function(c,p){1&c&&(A.TgZ(0,"ion-app"),A._UZ(1,"ion-router-outlet"),A.qZA())},directives:[Vr.dr,Vr.jP],styles:[""]}),d})();var di=L(8176),bi=L(127),_i=L(2502);const ws_firebase={projectId:"trail-app-aa3ab",appId:"1:274367012522:web:30b70ab84769c87aca3ad3",databaseURL:"https://trail-app-aa3ab-default-rtdb.firebaseio.com",storageBucket:"trail-app-aa3ab.appspot.com",apiKey:"AIzaSyBVh_gUX8-vRECj9rPbevw38_FAyV6e12s",authDomain:"trail-app-aa3ab.firebaseapp.com",messagingSenderId:"274367012522"};var Zr=L(2805),is=L(841),ss=L(8239),ms=L(8026),zo=L(3910),It=L(3854),Ao=L(5422);const ho="@firebase/database";let pa="";class ro{constructor(l){this.domStorage_=l,this.prefix_="firebase:"}set(l,c){null==c?this.domStorage_.removeItem(this.prefixedName_(l)):this.domStorage_.setItem(this.prefixedName_(l),(0,It.Wl)(c))}get(l){const c=this.domStorage_.getItem(this.prefixedName_(l));return null==c?null:(0,It.cI)(c)}remove(l){this.domStorage_.removeItem(this.prefixedName_(l))}prefixedName_(l){return this.prefix_+l}toString(){return this.domStorage_.toString()}}class fo{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(l,c){null==c?delete this.cache_[l]:this.cache_[l]=c}get(l){return(0,It.r3)(this.cache_,l)?this.cache_[l]:null}remove(l){delete this.cache_[l]}}const Ro=function(d){try{if("undefined"!=typeof window&&void 0!==window[d]){const l=window[d];return l.setItem("firebase:sentinel","cache"),l.removeItem("firebase:sentinel"),new ro(l)}}catch(l){}return new fo},io=Ro("localStorage"),ci=Ro("sessionStorage"),os=new Ao.Yd("@firebase/database"),Fs=function(){let d=1;return function(){return d++}}(),Hs=function(d){const l=(0,It.dS)(d),c=new It.gQ;c.update(l);const p=c.digest();return It.US.encodeByteArray(p)},Ls=function(...d){let l="";for(let c=0;c<d.length;c++){const p=d[c];Array.isArray(p)||p&&"object"==typeof p&&"number"==typeof p.length?l+=Ls.apply(null,p):l+="object"==typeof p?(0,It.Wl)(p):p,l+=" "}return l};let ji=null,ga=!0;const Nr=function(...d){if(!0===ga&&(ga=!1,null===ji&&!0===ci.get("logging_enabled")&&function(d,l){(0,It.hu)(!l||!0===d||!1===d,"Can't turn on custom loggers persistently."),!0===d?(os.logLevel=Ao.in.VERBOSE,ji=os.log.bind(os),l&&ci.set("logging_enabled",!0)):"function"==typeof d?ji=d:(ji=null,ci.remove("logging_enabled"))}(!0)),ji){const l=Ls.apply(null,d);ji(l)}},po=function(d){return function(...l){Nr(d,...l)}},ys=function(...d){const l="FIREBASE INTERNAL ERROR: "+Ls(...d);os.error(l)},Fi=function(...d){const l=`FIREBASE FATAL ERROR: ${Ls(...d)}`;throw os.error(l),new Error(l)},Ri=function(...d){const l="FIREBASE WARNING: "+Ls(...d);os.warn(l)},Vs=function(d){return"number"==typeof d&&(d!=d||d===Number.POSITIVE_INFINITY||d===Number.NEGATIVE_INFINITY)},vs="[MIN_NAME]",ls="[MAX_NAME]",oi=function(d,l){if(d===l)return 0;if(d===vs||l===ls)return-1;if(l===vs||d===ls)return 1;{const c=pt(d),p=pt(l);return null!==c?null!==p?c-p==0?d.length-l.length:c-p:-1:null!==p?1:d<l?-1:1}},Ds=function(d,l){return d===l?0:d<l?-1:1},q=function(d,l){if(l&&d in l)return l[d];throw new Error("Missing required key ("+d+") in object: "+(0,It.Wl)(l))},fe=function(d){if("object"!=typeof d||null===d)return(0,It.Wl)(d);const l=[];for(const p in d)l.push(p);l.sort();let c="{";for(let p=0;p<l.length;p++)0!==p&&(c+=","),c+=(0,It.Wl)(l[p]),c+=":",c+=fe(d[l[p]]);return c+="}",c},K=function(d,l){const c=d.length;if(c<=l)return[d];const p=[];for(let I=0;I<c;I+=l)p.push(d.substring(I,I+l>c?c:I+l));return p};function ye(d,l){for(const c in d)d.hasOwnProperty(c)&&l(c,d[c])}const Ze=function(d){(0,It.hu)(!Vs(d),"Invalid JSON number");const p=1023;let I,N,j,ge,Re;0===d?(N=0,j=0,I=1/d==-1/0?1:0):(I=d<0,(d=Math.abs(d))>=Math.pow(2,1-p)?(ge=Math.min(Math.floor(Math.log(d)/Math.LN2),p),N=ge+p,j=Math.round(d*Math.pow(2,52-ge)-Math.pow(2,52))):(N=0,j=Math.round(d/Math.pow(2,-1074))));const Ge=[];for(Re=52;Re;Re-=1)Ge.push(j%2?1:0),j=Math.floor(j/2);for(Re=11;Re;Re-=1)Ge.push(N%2?1:0),N=Math.floor(N/2);Ge.push(I?1:0),Ge.reverse();const Mt=Ge.join("");let kt="";for(Re=0;Re<64;Re+=8){let Wt=parseInt(Mt.substr(Re,8),2).toString(16);1===Wt.length&&(Wt="0"+Wt),kt+=Wt}return kt.toLowerCase()},H=new RegExp("^-?(0*)\\d{1,10}$"),pt=function(d){if(H.test(d)){const l=Number(d);if(l>=-2147483648&&l<=2147483647)return l}return null},pn=function(d){try{d()}catch(l){setTimeout(()=>{throw Ri("Exception was thrown by user callback.",l.stack||""),l},Math.floor(0))}},ei=function(d,l){const c=setTimeout(d,l);return"number"==typeof c&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(c):"object"==typeof c&&c.unref&&c.unref(),c};class Li{constructor(l,c){this.appName_=l,this.appCheckProvider=c,this.appCheck=null==c?void 0:c.getImmediate({optional:!0}),this.appCheck||null==c||c.get().then(p=>this.appCheck=p)}getToken(l){return this.appCheck?this.appCheck.getToken(l):new Promise((c,p)=>{setTimeout(()=>{this.appCheck?this.getToken(l).then(c,p):c(null)},0)})}addTokenChangeListener(l){var c;null===(c=this.appCheckProvider)||void 0===c||c.get().then(p=>p.addTokenListener(l))}notifyForInvalidToken(){Ri(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Ci{constructor(l,c,p){this.appName_=l,this.firebaseOptions_=c,this.authProvider_=p,this.auth_=null,this.auth_=p.getImmediate({optional:!0}),this.auth_||p.onInit(I=>this.auth_=I)}getToken(l){return this.auth_?this.auth_.getToken(l).catch(c=>c&&"auth/token-not-initialized"===c.code?(Nr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(c)):new Promise((c,p)=>{setTimeout(()=>{this.auth_?this.getToken(l).then(c,p):c(null)},0)})}addTokenChangeListener(l){this.auth_?this.auth_.addAuthTokenListener(l):this.authProvider_.get().then(c=>c.addAuthTokenListener(l))}removeTokenChangeListener(l){this.authProvider_.get().then(c=>c.removeAuthTokenListener(l))}notifyForInvalidToken(){let l='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';l+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ri(l)}}let Pr=(()=>{class d{constructor(c){this.accessToken=c}getToken(c){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(c){c(this.accessToken)}removeTokenChangeListener(c){}notifyForInvalidToken(){}}return d.OWNER="owner",d})();const ya=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Aa="websocket",Ss="long_polling";class Jo{constructor(l,c,p,I,N=!1,j="",ge=!1){this.secure=c,this.namespace=p,this.webSocketOnly=I,this.nodeAdmin=N,this.persistenceKey=j,this.includeNamespaceInQueryParams=ge,this._host=l.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=io.get("host:"+l)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(l){l!==this.internalHost&&(this.internalHost=l,this.isCacheableHost()&&io.set("host:"+this._host,this.internalHost))}toString(){let l=this.toURLString();return this.persistenceKey&&(l+="<"+this.persistenceKey+">"),l}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Gs(d,l,c){let p;if((0,It.hu)("string"==typeof l,"typeof type must == string"),(0,It.hu)("object"==typeof c,"typeof params must == object"),l===Aa)p=(d.secure?"wss://":"ws://")+d.internalHost+"/.ws?";else{if(l!==Ss)throw new Error("Unknown connection type: "+l);p=(d.secure?"https://":"http://")+d.internalHost+"/.lp?"}(function(d){return d.host!==d.internalHost||d.isCustomHost()||d.includeNamespaceInQueryParams})(d)&&(c.ns=d.namespace);const I=[];return ye(c,(N,j)=>{I.push(N+"="+j)}),p+I.join("&")}class en{constructor(){this.counters_={}}incrementCounter(l,c=1){(0,It.r3)(this.counters_,l)||(this.counters_[l]=0),this.counters_[l]+=c}get(){return(0,It.p$)(this.counters_)}}const Ur={},so={};function Si(d){const l=d.toString();return Ur[l]||(Ur[l]=new en),Ur[l]}class oo{constructor(l){this.onMessage_=l,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(l,c){this.closeAfterResponse=l,this.onClose=c,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(l,c){for(this.pendingResponses[l]=c;this.pendingResponses[this.currentResponseNum];){const p=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let I=0;I<p.length;++I)p[I]&&pn(()=>{this.onMessage_(p[I])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class hi{constructor(l,c,p,I,N,j,ge){this.connId=l,this.repoInfo=c,this.applicationId=p,this.appCheckToken=I,this.authToken=N,this.transportSessionId=j,this.lastSessionId=ge,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=po(l),this.stats_=Si(c),this.urlFn=Re=>(this.appCheckToken&&(Re.ac=this.appCheckToken),Gs(c,Ss,Re))}open(l,c){this.curSegmentNum=0,this.onDisconnect_=c,this.myPacketOrderer=new oo(l),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(d){if((0,It.Yr)()||"complete"===document.readyState)d();else{let l=!1;const c=function(){document.body?l||(l=!0,d()):setTimeout(c,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&c()}),window.attachEvent("onload",c))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ao((...N)=>{const[j,ge,Re,Ge,Mt]=N;if(this.incrementIncomingBytes_(N),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===j)this.id=ge,this.password=Re;else{if("close"!==j)throw new Error("Unrecognized command received: "+j);ge?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(ge,()=>{this.onClosed_()})):this.onClosed_()}},(...N)=>{const[j,ge]=N;this.incrementIncomingBytes_(N),this.myPacketOrderer.handleResponse(j,ge)},()=>{this.onClosed_()},this.urlFn);const p={start:"t"};p.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(p.cb=this.scriptTagHolder.uniqueCallbackIdentifier),p.v="5",this.transportSessionId&&(p.s=this.transportSessionId),this.lastSessionId&&(p.ls=this.lastSessionId),this.applicationId&&(p.p=this.applicationId),this.appCheckToken&&(p.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&ya.test(location.hostname)&&(p.r="f");const I=this.urlFn(p);this.log_("Connecting via long-poll to "+I),this.scriptTagHolder.addTag(I,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){hi.forceAllow_=!0}static forceDisallow(){hi.forceDisallow_=!0}static isAvailable(){return!((0,It.Yr)()||!hi.forceAllow_&&(hi.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(l){const c=(0,It.Wl)(l);this.bytesSent+=c.length,this.stats_.incrementCounter("bytes_sent",c.length);const p=(0,It.h$)(c),I=K(p,1840);for(let N=0;N<I.length;N++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,I.length,I[N]),this.curSegmentNum++}addDisconnectPingFrame(l,c){if((0,It.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const p={dframe:"t"};p.id=l,p.pw=c,this.myDisconnFrame.src=this.urlFn(p),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(l){const c=(0,It.Wl)(l).length;this.bytesReceived+=c,this.stats_.incrementCounter("bytes_received",c)}}class ao{constructor(l,c,p,I){if(this.onDisconnect=p,this.urlFn=I,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,It.Yr)())this.commandCB=l,this.onMessageCB=c;else{this.uniqueCallbackIdentifier=Fs(),window["pLPCommand"+this.uniqueCallbackIdentifier]=l,window["pRTLPCB"+this.uniqueCallbackIdentifier]=c,this.myIFrame=ao.createIFrame_();let N="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(N='<script>document.domain="'+document.domain+'";<\/script>');const j="<html><body>"+N+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(j),this.myIFrame.doc.close()}catch(ge){Nr("frame writing exception"),ge.stack&&Nr(ge.stack),Nr(ge)}}}static createIFrame_(){const l=document.createElement("iframe");if(l.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(l);try{l.contentWindow.document||Nr("No IE domain setting required")}catch(c){const p=document.domain;l.src="javascript:void((function(){document.open();document.domain='"+p+"';document.close();})())"}return l.contentDocument?l.doc=l.contentDocument:l.contentWindow?l.doc=l.contentWindow.document:l.document&&(l.doc=l.document),l}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const l=this.onDisconnect;l&&(this.onDisconnect=null,l())}startLongPoll(l,c){for(this.myID=l,this.myPW=c,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const l={};l.id=this.myID,l.pw=this.myPW,l.ser=this.currentSerial;let c=this.urlFn(l),p="",I=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+p.length<=1870;){const j=this.pendingSegs.shift();p=p+"&seg"+I+"="+j.seg+"&ts"+I+"="+j.ts+"&d"+I+"="+j.d,I++}return c+=p,this.addLongPollTag_(c,this.currentSerial),!0}return!1}enqueueSegment(l,c,p){this.pendingSegs.push({seg:l,ts:c,d:p}),this.alive&&this.newRequest_()}addLongPollTag_(l,c){this.outstandingRequests.add(c);const p=()=>{this.outstandingRequests.delete(c),this.newRequest_()},I=setTimeout(p,Math.floor(25e3));this.addTag(l,()=>{clearTimeout(I),p()})}addTag(l,c){(0,It.Yr)()?this.doNodeLongPoll(l,c):setTimeout(()=>{try{if(!this.sendNewPolls)return;const p=this.myIFrame.doc.createElement("script");p.type="text/javascript",p.async=!0,p.src=l,p.onload=p.onreadystatechange=function(){const I=p.readyState;(!I||"loaded"===I||"complete"===I)&&(p.onload=p.onreadystatechange=null,p.parentNode&&p.parentNode.removeChild(p),c())},p.onerror=()=>{Nr("Long-poll script failed to load: "+l),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(p)}catch(p){}},Math.floor(1))}}let na=null;"undefined"!=typeof MozWebSocket?na=MozWebSocket:"undefined"!=typeof WebSocket&&(na=WebSocket);let Io=(()=>{class d{constructor(c,p,I,N,j,ge,Re){this.connId=c,this.applicationId=I,this.appCheckToken=N,this.authToken=j,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=po(this.connId),this.stats_=Si(p),this.connURL=d.connectionURL_(p,ge,Re,N,I),this.nodeAdmin=p.nodeAdmin}static connectionURL_(c,p,I,N,j){const ge={v:"5"};return!(0,It.Yr)()&&"undefined"!=typeof location&&location.hostname&&ya.test(location.hostname)&&(ge.r="f"),p&&(ge.s=p),I&&(ge.ls=I),N&&(ge.ac=N),j&&(ge.p=j),Gs(c,Aa,ge)}open(c,p){this.onDisconnect=p,this.onMessage=c,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,io.set("previous_websocket_failure",!0);try{let I;if((0,It.Yr)()){I={headers:{"User-Agent":`Firebase/5/${pa}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(I.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(I.headers["X-Firebase-AppCheck"]=this.appCheckToken);const j=process.env,ge=0===this.connURL.indexOf("wss://")?j.HTTPS_PROXY||j.https_proxy:j.HTTP_PROXY||j.http_proxy;ge&&(I.proxy={origin:ge})}this.mySock=new na(this.connURL,[],I)}catch(I){this.log_("Error instantiating WebSocket.");const N=I.message||I.data;return N&&this.log_(N),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=I=>{this.handleIncomingFrame(I)},this.mySock.onerror=I=>{this.log_("WebSocket error.  Closing connection.");const N=I.message||I.data;N&&this.log_(N),this.onClosed_()}}start(){}static forceDisallow(){d.forceDisallow_=!0}static isAvailable(){let c=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const I=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);I&&I.length>1&&parseFloat(I[1])<4.4&&(c=!0)}return!c&&null!==na&&!d.forceDisallow_}static previouslyFailed(){return io.isInMemoryStorage||!0===io.get("previous_websocket_failure")}markConnectionHealthy(){io.remove("previous_websocket_failure")}appendFrame_(c){if(this.frames.push(c),this.frames.length===this.totalFrames){const p=this.frames.join("");this.frames=null;const I=(0,It.cI)(p);this.onMessage(I)}}handleNewFrameCount_(c){this.totalFrames=c,this.frames=[]}extractFrameCount_(c){if((0,It.hu)(null===this.frames,"We already have a frame buffer"),c.length<=6){const p=Number(c);if(!isNaN(p))return this.handleNewFrameCount_(p),null}return this.handleNewFrameCount_(1),c}handleIncomingFrame(c){if(null===this.mySock)return;const p=c.data;if(this.bytesReceived+=p.length,this.stats_.incrementCounter("bytes_received",p.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(p);else{const I=this.extractFrameCount_(p);null!==I&&this.appendFrame_(I)}}send(c){this.resetKeepAlive();const p=(0,It.Wl)(c);this.bytesSent+=p.length,this.stats_.incrementCounter("bytes_sent",p.length);const I=K(p,16384);I.length>1&&this.sendString_(String(I.length));for(let N=0;N<I.length;N++)this.sendString_(I[N])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(c){try{this.mySock.send(c)}catch(p){this.log_("Exception thrown from WebSocket.send():",p.message||p.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return d.responsesRequiredToBeHealthy=2,d.healthyTimeout=3e4,d})(),go=(()=>{class d{constructor(c){this.initTransports_(c)}static get ALL_TRANSPORTS(){return[hi,Io]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(c){const p=Io&&Io.isAvailable();let I=p&&!Io.previouslyFailed();if(c.webSocketOnly&&(p||Ri("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),I=!0),I)this.transports_=[Io];else{const N=this.transports_=[];for(const j of d.ALL_TRANSPORTS)j&&j.isAvailable()&&N.push(j);d.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return d.globalTransportInitialized_=!1,d})();class us{constructor(l,c,p,I,N,j,ge,Re,Ge,Mt){this.id=l,this.repoInfo_=c,this.applicationId_=p,this.appCheckToken_=I,this.authToken_=N,this.onMessage_=j,this.onReady_=ge,this.onDisconnect_=Re,this.onKill_=Ge,this.lastSessionId=Mt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=po("c:"+this.id+":"),this.transportManager_=new go(c),this.log_("Connection created"),this.start_()}start_(){const l=this.transportManager_.initialTransport();this.conn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.conn_),p=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(c,p)},Math.floor(0));const I=l.healthyTimeout||0;I>0&&(this.healthyTimeout_=ei(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(I)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(l){return c=>{l===this.conn_?this.onConnectionLost_(c):l===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(l){return c=>{2!==this.state_&&(l===this.rx_?this.onPrimaryMessageReceived_(c):l===this.secondaryConn_?this.onSecondaryMessageReceived_(c):this.log_("message on old connection"))}}sendRequest(l){this.sendData_({t:"d",d:l})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(l){if("t"in l){const c=l.t;"a"===c?this.upgradeIfSecondaryHealthy_():"r"===c?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===c&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(l){const c=q("t",l),p=q("d",l);if("c"===c)this.onSecondaryControl_(p);else{if("d"!==c)throw new Error("Unknown protocol layer: "+c);this.pendingDataMessages.push(p)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(l){const c=q("t",l),p=q("d",l);"c"===c?this.onControl_(p):"d"===c&&this.onDataMessage_(p)}onDataMessage_(l){this.onPrimaryResponse_(),this.onMessage_(l)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(l){const c=q("t",l);if("d"in l){const p=l.d;if("h"===c)this.onHandshake_(p);else if("n"===c){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let I=0;I<this.pendingDataMessages.length;++I)this.onDataMessage_(this.pendingDataMessages[I]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===c?this.onConnectionShutdown_(p):"r"===c?this.onReset_(p):"e"===c?ys("Server Error: "+p):"o"===c?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ys("Unknown control packet command: "+c)}}onHandshake_(l){const c=l.ts,p=l.v,I=l.h;this.sessionId=l.s,this.repoInfo_.host=I,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,c),"5"!==p&&Ri("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const l=this.transportManager_.upgradeTransport();l&&this.startUpgrade_(l)}startUpgrade_(l){this.secondaryConn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.secondaryConn_),p=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(c,p),ei(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(l){this.log_("Reset packet received.  New host: "+l),this.repoInfo_.host=l,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(l,c){this.log_("Realtime connection established."),this.conn_=l,this.state_=1,this.onReady_&&(this.onReady_(c,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ei(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const l=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===l||this.rx_===l)&&this.close()}onConnectionLost_(l){this.conn_=null,l||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(io.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(l){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(l),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(l){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(l)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Ys{put(l,c,p,I){}merge(l,c,p,I){}refreshAuthToken(l){}refreshAppCheckToken(l){}onDisconnectPut(l,c,p){}onDisconnectMerge(l,c,p){}onDisconnectCancel(l,c){}reportStats(l){}}class Bn{constructor(l){this.allowedEvents_=l,this.listeners_={},(0,It.hu)(Array.isArray(l)&&l.length>0,"Requires a non-empty array")}trigger(l,...c){if(Array.isArray(this.listeners_[l])){const p=[...this.listeners_[l]];for(let I=0;I<p.length;I++)p[I].callback.apply(p[I].context,c)}}on(l,c,p){this.validateEventType_(l),this.listeners_[l]=this.listeners_[l]||[],this.listeners_[l].push({callback:c,context:p});const I=this.getInitialEvent(l);I&&c.apply(p,I)}off(l,c,p){this.validateEventType_(l);const I=this.listeners_[l]||[];for(let N=0;N<I.length;N++)if(I[N].callback===c&&(!p||p===I[N].context))return void I.splice(N,1)}validateEventType_(l){(0,It.hu)(this.allowedEvents_.find(c=>c===l),"Unknown event: "+l)}}class or extends Bn{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,It.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new or}getInitialEvent(l){return(0,It.hu)("online"===l,"Unknown event type: "+l),[this.online_]}currentlyOnline(){return this.online_}}class Et{constructor(l,c){if(void 0===c){this.pieces_=l.split("/");let p=0;for(let I=0;I<this.pieces_.length;I++)this.pieces_[I].length>0&&(this.pieces_[p]=this.pieces_[I],p++);this.pieces_.length=p,this.pieceNum_=0}else this.pieces_=l,this.pieceNum_=c}toString(){let l="";for(let c=this.pieceNum_;c<this.pieces_.length;c++)""!==this.pieces_[c]&&(l+="/"+this.pieces_[c]);return l||"/"}}function Nt(){return new Et("")}function Zn(d){return d.pieceNum_>=d.pieces_.length?null:d.pieces_[d.pieceNum_]}function Yo(d){return d.pieces_.length-d.pieceNum_}function fi(d){let l=d.pieceNum_;return l<d.pieces_.length&&l++,new Et(d.pieces_,l)}function Es(d){return d.pieceNum_<d.pieces_.length?d.pieces_[d.pieces_.length-1]:null}function Dl(d,l=0){return d.pieces_.slice(d.pieceNum_+l)}function cc(d){if(d.pieceNum_>=d.pieces_.length)return null;const l=[];for(let c=d.pieceNum_;c<d.pieces_.length-1;c++)l.push(d.pieces_[c]);return new Et(l,0)}function Pi(d,l){const c=[];for(let p=d.pieceNum_;p<d.pieces_.length;p++)c.push(d.pieces_[p]);if(l instanceof Et)for(let p=l.pieceNum_;p<l.pieces_.length;p++)c.push(l.pieces_[p]);else{const p=l.split("/");for(let I=0;I<p.length;I++)p[I].length>0&&c.push(p[I])}return new Et(c,0)}function ti(d){return d.pieceNum_>=d.pieces_.length}function Us(d,l){const c=Zn(d),p=Zn(l);if(null===c)return l;if(c===p)return Us(fi(d),fi(l));throw new Error("INTERNAL ERROR: innerPath ("+l+") is not within outerPath ("+d+")")}function Ma(d,l){if(Yo(d)!==Yo(l))return!1;for(let c=d.pieceNum_,p=l.pieceNum_;c<=d.pieces_.length;c++,p++)if(d.pieces_[c]!==l.pieces_[p])return!1;return!0}function ar(d,l){let c=d.pieceNum_,p=l.pieceNum_;if(Yo(d)>Yo(l))return!1;for(;c<d.pieces_.length;){if(d.pieces_[c]!==l.pieces_[p])return!1;++c,++p}return!0}class Ks{constructor(l,c){this.errorPrefix_=c,this.parts_=Dl(l,0),this.byteLength_=Math.max(1,this.parts_.length);for(let p=0;p<this.parts_.length;p++)this.byteLength_+=(0,It.ug)(this.parts_[p]);Er(this)}}function Er(d){if(d.byteLength_>768)throw new Error(d.errorPrefix_+"has a key path longer than 768 bytes ("+d.byteLength_+").");if(d.parts_.length>32)throw new Error(d.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Zs(d))}function Zs(d){return 0===d.parts_.length?"":"in property '"+d.parts_.join(".")+"'"}class Gr extends Bn{constructor(){let l,c;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(c="visibilitychange",l="hidden"):void 0!==document.mozHidden?(c="mozvisibilitychange",l="mozHidden"):void 0!==document.msHidden?(c="msvisibilitychange",l="msHidden"):void 0!==document.webkitHidden&&(c="webkitvisibilitychange",l="webkitHidden")),this.visible_=!0,c&&document.addEventListener(c,()=>{const p=!document[l];p!==this.visible_&&(this.visible_=p,this.trigger("visible",p))},!1)}static getInstance(){return new Gr}getInitialEvent(l){return(0,It.hu)("visible"===l,"Unknown event type: "+l),[this.visible_]}}const Pa=1e3;let No,Qs=(()=>{class d extends Ys{constructor(c,p,I,N,j,ge,Re,Ge){if(super(),this.repoInfo_=c,this.applicationId_=p,this.onDataUpdate_=I,this.onConnectStatus_=N,this.onServerInfoUpdate_=j,this.authTokenProvider_=ge,this.appCheckTokenProvider_=Re,this.authOverride_=Ge,this.id=d.nextPersistentConnectionId_++,this.log_=po("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Pa,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Ge&&!(0,It.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Gr.getInstance().on("visible",this.onVisible_,this),-1===c.host.indexOf("fblocal")&&or.getInstance().on("online",this.onOnline_,this)}sendRequest(c,p,I){const N=++this.requestNumber_,j={r:N,a:c,b:p};this.log_((0,It.Wl)(j)),(0,It.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(j),I&&(this.requestCBHash_[N]=I)}get(c){this.initConnection_();const p=new It.BH,I={p:c._path.toString(),q:c._queryObject};return this.outstandingGets_.push({action:"g",request:I,onComplete:ge=>{const Re=ge.d;"ok"===ge.s?p.resolve(Re):p.reject(Re)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),p.promise}listen(c,p,I,N){this.initConnection_();const j=c._queryIdentifier,ge=c._path.toString();this.log_("Listen called for "+ge+" "+j),this.listens.has(ge)||this.listens.set(ge,new Map),(0,It.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,It.hu)(!this.listens.get(ge).has(j),"listen() called twice for same path/queryId.");const Re={onComplete:N,hashFn:p,query:c,tag:I};this.listens.get(ge).set(j,Re),this.connected_&&this.sendListen_(Re)}sendGet_(c){const p=this.outstandingGets_[c];this.sendRequest("g",p.request,I=>{delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),p.onComplete&&p.onComplete(I)})}sendListen_(c){const p=c.query,I=p._path.toString(),N=p._queryIdentifier;this.log_("Listen on "+I+" for "+N);const j={p:I};c.tag&&(j.q=p._queryObject,j.t=c.tag),j.h=c.hashFn(),this.sendRequest("q",j,Re=>{const Ge=Re.d,Mt=Re.s;d.warnOnListenWarnings_(Ge,p),(this.listens.get(I)&&this.listens.get(I).get(N))===c&&(this.log_("listen response",Re),"ok"!==Mt&&this.removeListen_(I,N),c.onComplete&&c.onComplete(Mt,Ge))})}static warnOnListenWarnings_(c,p){if(c&&"object"==typeof c&&(0,It.r3)(c,"w")){const I=(0,It.DV)(c,"w");if(Array.isArray(I)&&~I.indexOf("no_index")){const N='".indexOn": "'+p._queryParams.getIndex().toString()+'"',j=p._path.toString();Ri(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${N} at ${j} to your security rules for better performance.`)}}}refreshAuthToken(c){this.authToken_=c,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(c)}reduceReconnectDelayIfAdminCredential_(c){(c&&40===c.length||(0,It.GJ)(c))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(c){this.appCheckToken_=c,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const c=this.authToken_,p=(0,It.w9)(c)?"auth":"gauth",I={cred:c};null===this.authOverride_?I.noauth=!0:"object"==typeof this.authOverride_&&(I.authvar=this.authOverride_),this.sendRequest(p,I,N=>{const j=N.s,ge=N.d||"error";this.authToken_===c&&("ok"===j?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(j,ge))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},c=>{const p=c.s,I=c.d||"error";"ok"===p?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(p,I)})}unlisten(c,p){const I=c._path.toString(),N=c._queryIdentifier;this.log_("Unlisten called for "+I+" "+N),(0,It.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(I,N)&&this.connected_&&this.sendUnlisten_(I,N,c._queryObject,p)}sendUnlisten_(c,p,I,N){this.log_("Unlisten on "+c+" for "+p);const j={p:c};N&&(j.q=I,j.t=N),this.sendRequest("n",j)}onDisconnectPut(c,p,I){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",c,p,I):this.onDisconnectRequestQueue_.push({pathString:c,action:"o",data:p,onComplete:I})}onDisconnectMerge(c,p,I){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",c,p,I):this.onDisconnectRequestQueue_.push({pathString:c,action:"om",data:p,onComplete:I})}onDisconnectCancel(c,p){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",c,null,p):this.onDisconnectRequestQueue_.push({pathString:c,action:"oc",data:null,onComplete:p})}sendOnDisconnect_(c,p,I,N){const j={p,d:I};this.log_("onDisconnect "+c,j),this.sendRequest(c,j,ge=>{N&&setTimeout(()=>{N(ge.s,ge.d)},Math.floor(0))})}put(c,p,I,N){this.putInternal("p",c,p,I,N)}merge(c,p,I,N){this.putInternal("m",c,p,I,N)}putInternal(c,p,I,N,j){this.initConnection_();const ge={p,d:I};void 0!==j&&(ge.h=j),this.outstandingPuts_.push({action:c,request:ge,onComplete:N}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+p)}sendPut_(c){const p=this.outstandingPuts_[c].action,I=this.outstandingPuts_[c].request,N=this.outstandingPuts_[c].onComplete;this.outstandingPuts_[c].queued=this.connected_,this.sendRequest(p,I,j=>{this.log_(p+" response",j),delete this.outstandingPuts_[c],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),N&&N(j.s,j.d)})}reportStats(c){if(this.connected_){const p={c};this.log_("reportStats",p),this.sendRequest("s",p,I=>{"ok"!==I.s&&this.log_("reportStats","Error sending stats: "+I.d)})}}onDataMessage_(c){if("r"in c){this.log_("from server: "+(0,It.Wl)(c));const p=c.r,I=this.requestCBHash_[p];I&&(delete this.requestCBHash_[p],I(c.b))}else{if("error"in c)throw"A server-side error has occurred: "+c.error;"a"in c&&this.onDataPush_(c.a,c.b)}}onDataPush_(c,p){this.log_("handleServerMessage",c,p),"d"===c?this.onDataUpdate_(p.p,p.d,!1,p.t):"m"===c?this.onDataUpdate_(p.p,p.d,!0,p.t):"c"===c?this.onListenRevoked_(p.p,p.q):"ac"===c?this.onAuthRevoked_(p.s,p.d):"apc"===c?this.onAppCheckRevoked_(p.s,p.d):"sd"===c?this.onSecurityDebugPacket_(p):ys("Unrecognized action received from server: "+(0,It.Wl)(c)+"\nAre you using the latest client?")}onReady_(c,p){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(c),this.lastSessionId=p,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(c){(0,It.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(c))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(c){c&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Pa,this.realtime_||this.scheduleConnect_(0)),this.visible_=c}onOnline_(c){c?(this.log_("Browser went online."),this.reconnectDelay_=Pa,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Pa),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const c=(new Date).getTime()-this.lastConnectionAttemptTime_;let p=Math.max(0,this.reconnectDelay_-c);p=Math.random()*p,this.log_("Trying to reconnect in "+p+"ms"),this.scheduleConnect_(p),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var c=this;return(0,ss.Z)(function*(){if(c.shouldReconnect_()){c.log_("Making a connection attempt"),c.lastConnectionAttemptTime_=(new Date).getTime(),c.lastConnectionEstablishedTime_=null;const p=c.onDataMessage_.bind(c),I=c.onReady_.bind(c),N=c.onRealtimeDisconnect_.bind(c),j=c.id+":"+d.nextConnectionId_++,ge=c.lastSessionId;let Re=!1,Ge=null;const Mt=function(){Ge?Ge.close():(Re=!0,N())};c.realtime_={close:Mt,sendRequest:function(Vn){(0,It.hu)(Ge,"sendRequest call when we're not connected not allowed."),Ge.sendRequest(Vn)}};const Wt=c.forceTokenRefresh_;c.forceTokenRefresh_=!1;try{const[Vn,nr]=yield Promise.all([c.authTokenProvider_.getToken(Wt),c.appCheckTokenProvider_.getToken(Wt)]);Re?Nr("getToken() completed but was canceled"):(Nr("getToken() completed. Creating connection."),c.authToken_=Vn&&Vn.accessToken,c.appCheckToken_=nr&&nr.token,Ge=new us(j,c.repoInfo_,c.applicationId_,c.appCheckToken_,c.authToken_,p,I,N,ri=>{Ri(ri+" ("+c.repoInfo_.toString()+")"),c.interrupt("server_kill")},ge))}catch(Vn){c.log_("Failed to get token: "+Vn),Re||(c.repoInfo_.nodeAdmin&&Ri(Vn),Mt())}}})()}interrupt(c){Nr("Interrupting connection for reason: "+c),this.interruptReasons_[c]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(c){Nr("Resuming connection for reason: "+c),delete this.interruptReasons_[c],(0,It.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Pa,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(c){const p=c-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:p})}cancelSentTransactions_(){for(let c=0;c<this.outstandingPuts_.length;c++){const p=this.outstandingPuts_[c];p&&"h"in p.request&&p.queued&&(p.onComplete&&p.onComplete("disconnect"),delete this.outstandingPuts_[c],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(c,p){let I;I=p?p.map(j=>fe(j)).join("$"):"default";const N=this.removeListen_(c,I);N&&N.onComplete&&N.onComplete("permission_denied")}removeListen_(c,p){const I=new Et(c).toString();let N;if(this.listens.has(I)){const j=this.listens.get(I);N=j.get(p),j.delete(p),0===j.size&&this.listens.delete(I)}else N=void 0;return N}onAuthRevoked_(c,p){Nr("Auth token revoked: "+c+"/"+p),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===c||"permission_denied"===c)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(c,p){Nr("App check token revoked: "+c+"/"+p),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===c||"permission_denied"===c)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(c){this.securityDebugCallback_?this.securityDebugCallback_(c):"msg"in c&&console.log("FIREBASE: "+c.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const c of this.listens.values())for(const p of c.values())this.sendListen_(p);for(let c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){const c=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(c.action,c.pathString,c.data,c.onComplete)}for(let c=0;c<this.outstandingGets_.length;c++)this.outstandingGets_[c]&&this.sendGet_(c)}sendConnectStats_(){const c={};let p="js";(0,It.Yr)()&&(p=this.repoInfo_.nodeAdmin?"admin_node":"node"),c["sdk."+p+"."+pa.replace(/\./g,"-")]=1,(0,It.uI)()?c["framework.cordova"]=1:(0,It.b$)()&&(c["framework.reactnative"]=1),this.reportStats(c)}shouldReconnect_(){const c=or.getInstance().currentlyOnline();return(0,It.xb)(this.interruptReasons_)&&c}}return d.nextPersistentConnectionId_=0,d.nextConnectionId_=0,d})();class zr{constructor(l,c){this.name=l,this.node=c}static Wrap(l,c){return new zr(l,c)}}class Oo{getCompare(){return this.compare.bind(this)}indexedValueChanged(l,c){const p=new zr(vs,l),I=new zr(vs,c);return 0!==this.compare(p,I)}minPost(){return zr.MIN}}class uc extends Oo{static get __EMPTY_NODE(){return No}static set __EMPTY_NODE(l){No=l}compare(l,c){return oi(l.name,c.name)}isDefinedOn(l){throw(0,It.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(l,c){return!1}minPost(){return zr.MIN}maxPost(){return new zr(ls,No)}makePost(l,c){return(0,It.hu)("string"==typeof l,"KeyIndex indexValue must always be a string."),new zr(l,No)}toString(){return".key"}}const $i=new uc;class F{constructor(l,c,p,I,N=null){this.isReverse_=I,this.resultGenerator_=N,this.nodeStack_=[];let j=1;for(;!l.isEmpty();)if(j=c?p(l.key,c):1,I&&(j*=-1),j<0)l=this.isReverse_?l.left:l.right;else{if(0===j){this.nodeStack_.push(l);break}this.nodeStack_.push(l),l=this.isReverse_?l.right:l.left}}getNext(){if(0===this.nodeStack_.length)return null;let c,l=this.nodeStack_.pop();if(c=this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value},this.isReverse_)for(l=l.left;!l.isEmpty();)this.nodeStack_.push(l),l=l.right;else for(l=l.right;!l.isEmpty();)this.nodeStack_.push(l),l=l.left;return c}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const l=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value}}}let Be,x=(()=>{class d{constructor(c,p,I,N,j){this.key=c,this.value=p,this.color=null!=I?I:d.RED,this.left=null!=N?N:B.EMPTY_NODE,this.right=null!=j?j:B.EMPTY_NODE}copy(c,p,I,N,j){return new d(null!=c?c:this.key,null!=p?p:this.value,null!=I?I:this.color,null!=N?N:this.left,null!=j?j:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(c){return this.left.inorderTraversal(c)||!!c(this.key,this.value)||this.right.inorderTraversal(c)}reverseTraversal(c){return this.right.reverseTraversal(c)||c(this.key,this.value)||this.left.reverseTraversal(c)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(c,p,I){let N=this;const j=I(c,N.key);return N=j<0?N.copy(null,null,null,N.left.insert(c,p,I),null):0===j?N.copy(null,p,null,null,null):N.copy(null,null,null,null,N.right.insert(c,p,I)),N.fixUp_()}removeMin_(){if(this.left.isEmpty())return B.EMPTY_NODE;let c=this;return!c.left.isRed_()&&!c.left.left.isRed_()&&(c=c.moveRedLeft_()),c=c.copy(null,null,null,c.left.removeMin_(),null),c.fixUp_()}remove(c,p){let I,N;if(I=this,p(c,I.key)<0)!I.left.isEmpty()&&!I.left.isRed_()&&!I.left.left.isRed_()&&(I=I.moveRedLeft_()),I=I.copy(null,null,null,I.left.remove(c,p),null);else{if(I.left.isRed_()&&(I=I.rotateRight_()),!I.right.isEmpty()&&!I.right.isRed_()&&!I.right.left.isRed_()&&(I=I.moveRedRight_()),0===p(c,I.key)){if(I.right.isEmpty())return B.EMPTY_NODE;N=I.right.min_(),I=I.copy(N.key,N.value,null,null,I.right.removeMin_())}I=I.copy(null,null,null,null,I.right.remove(c,p))}return I.fixUp_()}isRed_(){return this.color}fixUp_(){let c=this;return c.right.isRed_()&&!c.left.isRed_()&&(c=c.rotateLeft_()),c.left.isRed_()&&c.left.left.isRed_()&&(c=c.rotateRight_()),c.left.isRed_()&&c.right.isRed_()&&(c=c.colorFlip_()),c}moveRedLeft_(){let c=this.colorFlip_();return c.right.left.isRed_()&&(c=c.copy(null,null,null,null,c.right.rotateRight_()),c=c.rotateLeft_(),c=c.colorFlip_()),c}moveRedRight_(){let c=this.colorFlip_();return c.left.left.isRed_()&&(c=c.rotateRight_(),c=c.colorFlip_()),c}rotateLeft_(){const c=this.copy(null,null,d.RED,null,this.right.left);return this.right.copy(null,null,this.color,c,null)}rotateRight_(){const c=this.copy(null,null,d.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,c)}colorFlip_(){const c=this.left.copy(null,null,!this.left.color,null,null),p=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,c,p)}checkMaxDepth_(){const c=this.check_();return Math.pow(2,c)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const c=this.left.check_();if(c!==this.right.check_())throw new Error("Black depths differ");return c+(this.isRed_()?0:1)}}return d.RED=!0,d.BLACK=!1,d})();class B{constructor(l,c=B.EMPTY_NODE){this.comparator_=l,this.root_=c}insert(l,c){return new B(this.comparator_,this.root_.insert(l,c,this.comparator_).copy(null,null,x.BLACK,null,null))}remove(l){return new B(this.comparator_,this.root_.remove(l,this.comparator_).copy(null,null,x.BLACK,null,null))}get(l){let c,p=this.root_;for(;!p.isEmpty();){if(c=this.comparator_(l,p.key),0===c)return p.value;c<0?p=p.left:c>0&&(p=p.right)}return null}getPredecessorKey(l){let c,p=this.root_,I=null;for(;!p.isEmpty();){if(c=this.comparator_(l,p.key),0===c){if(p.left.isEmpty())return I?I.key:null;for(p=p.left;!p.right.isEmpty();)p=p.right;return p.key}c<0?p=p.left:c>0&&(I=p,p=p.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(l){return this.root_.inorderTraversal(l)}reverseTraversal(l){return this.root_.reverseTraversal(l)}getIterator(l){return new F(this.root_,null,this.comparator_,!1,l)}getIteratorFrom(l,c){return new F(this.root_,l,this.comparator_,!1,c)}getReverseIteratorFrom(l,c){return new F(this.root_,l,this.comparator_,!0,c)}getReverseIterator(l){return new F(this.root_,null,this.comparator_,!0,l)}}function J(d,l){return oi(d.name,l.name)}function Q(d,l){return oi(d,l)}B.EMPTY_NODE=new class{copy(l,c,p,I,N){return this}insert(l,c,p){return new x(l,c,null)}remove(l,c){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(l){return!1}reverseTraversal(l){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Bt=function(d){return"number"==typeof d?"number:"+Ze(d):"string:"+d},Pn=function(d){if(d.isLeafNode()){const l=d.val();(0,It.hu)("string"==typeof l||"number"==typeof l||"object"==typeof l&&(0,It.r3)(l,".sv"),"Priority must be a string or number.")}else(0,It.hu)(d===Be||d.isEmpty(),"priority of unexpected type.");(0,It.hu)(d===Be||d.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Ar,ii,qr,Yn=(()=>{class d{constructor(c,p=d.__childrenNodeConstructor.EMPTY_NODE){this.value_=c,this.priorityNode_=p,this.lazyHash_=null,(0,It.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Pn(this.priorityNode_)}static set __childrenNodeConstructor(c){Ar=c}static get __childrenNodeConstructor(){return Ar}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(c){return new d(this.value_,c)}getImmediateChild(c){return".priority"===c?this.priorityNode_:d.__childrenNodeConstructor.EMPTY_NODE}getChild(c){return ti(c)?this:".priority"===Zn(c)?this.priorityNode_:d.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(c,p){return null}updateImmediateChild(c,p){return".priority"===c?this.updatePriority(p):p.isEmpty()&&".priority"!==c?this:d.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(c,p).updatePriority(this.priorityNode_)}updateChild(c,p){const I=Zn(c);return null===I?p:p.isEmpty()&&".priority"!==I?this:((0,It.hu)(".priority"!==I||1===Yo(c),".priority must be the last token in a path"),this.updateImmediateChild(I,d.__childrenNodeConstructor.EMPTY_NODE.updateChild(fi(c),p)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(c,p){return!1}val(c){return c&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let c="";this.priorityNode_.isEmpty()||(c+="priority:"+Bt(this.priorityNode_.val())+":");const p=typeof this.value_;c+=p+":",c+="number"===p?Ze(this.value_):this.value_,this.lazyHash_=Hs(c)}return this.lazyHash_}getValue(){return this.value_}compareTo(c){return c===d.__childrenNodeConstructor.EMPTY_NODE?1:c instanceof d.__childrenNodeConstructor?-1:((0,It.hu)(c.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(c))}compareToLeafNode_(c){const p=typeof c.value_,I=typeof this.value_,N=d.VALUE_TYPE_ORDER.indexOf(p),j=d.VALUE_TYPE_ORDER.indexOf(I);return(0,It.hu)(N>=0,"Unknown leaf type: "+p),(0,It.hu)(j>=0,"Unknown leaf type: "+I),N===j?"object"===I?0:this.value_<c.value_?-1:this.value_===c.value_?0:1:j-N}withIndex(){return this}isIndexed(){return!0}equals(c){if(c===this)return!0;if(c.isLeafNode()){const p=c;return this.value_===p.value_&&this.priorityNode_.equals(p.priorityNode_)}return!1}}return d.VALUE_TYPE_ORDER=["object","boolean","number","string"],d})();const xr=new class extends Oo{compare(l,c){const p=l.node.getPriority(),I=c.node.getPriority(),N=p.compareTo(I);return 0===N?oi(l.name,c.name):N}isDefinedOn(l){return!l.getPriority().isEmpty()}indexedValueChanged(l,c){return!l.getPriority().equals(c.getPriority())}minPost(){return zr.MIN}maxPost(){return new zr(ls,new Yn("[PRIORITY-POST]",qr))}makePost(l,c){const p=ii(l);return new zr(c,new Yn("[PRIORITY-POST]",p))}toString(){return".priority"}},bo=Math.log(2);class zi{constructor(l){this.count=parseInt(Math.log(l+1)/bo,10),this.current_=this.count-1;const I=(N=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=l+1&I}nextBitIsOne(){const l=!(this.bits_&1<<this.current_);return this.current_--,l}}const Ko=function(d,l,c,p){d.sort(l);const I=function(Re,Ge){const Mt=Ge-Re;let kt,Wt;if(0===Mt)return null;if(1===Mt)return kt=d[Re],Wt=c?c(kt):kt,new x(Wt,kt.node,x.BLACK,null,null);{const Vn=parseInt(Mt/2,10)+Re,nr=I(Re,Vn),ri=I(Vn+1,Ge);return kt=d[Vn],Wt=c?c(kt):kt,new x(Wt,kt.node,x.BLACK,nr,ri)}},ge=function(Re){let Ge=null,Mt=null,kt=d.length;const Wt=function(nr,ri){const Ui=kt-nr,Ho=kt;kt-=nr;const Wa=I(Ui+1,Ho),dl=d[Ui],bs=c?c(dl):dl;Vn(new x(bs,dl.node,ri,null,Wa))},Vn=function(nr){Ge?(Ge.left=nr,Ge=nr):(Mt=nr,Ge=nr)};for(let nr=0;nr<Re.count;++nr){const ri=Re.nextBitIsOne(),Ui=Math.pow(2,Re.count-(nr+1));ri?Wt(Ui,x.BLACK):(Wt(Ui,x.BLACK),Wt(Ui,x.RED))}return Mt}(new zi(d.length));return new B(p||l,ge)};let ds;const Na={};class Zi{constructor(l,c){this.indexes_=l,this.indexSet_=c}static get Default(){return(0,It.hu)(Na&&xr,"ChildrenNode.ts has not been loaded"),ds=ds||new Zi({".priority":Na},{".priority":xr}),ds}get(l){const c=(0,It.DV)(this.indexes_,l);if(!c)throw new Error("No index defined for "+l);return c instanceof B?c:null}hasIndex(l){return(0,It.r3)(this.indexSet_,l.toString())}addIndex(l,c){(0,It.hu)(l!==$i,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const p=[];let I=!1;const N=c.getIterator(zr.Wrap);let ge,j=N.getNext();for(;j;)I=I||l.isDefinedOn(j.node),p.push(j),j=N.getNext();ge=I?Ko(p,l.getCompare()):Na;const Re=l.toString(),Ge=Object.assign({},this.indexSet_);Ge[Re]=l;const Mt=Object.assign({},this.indexes_);return Mt[Re]=ge,new Zi(Mt,Ge)}addToIndexes(l,c){const p=(0,It.UI)(this.indexes_,(I,N)=>{const j=(0,It.DV)(this.indexSet_,N);if((0,It.hu)(j,"Missing index implementation for "+N),I===Na){if(j.isDefinedOn(l.node)){const ge=[],Re=c.getIterator(zr.Wrap);let Ge=Re.getNext();for(;Ge;)Ge.name!==l.name&&ge.push(Ge),Ge=Re.getNext();return ge.push(l),Ko(ge,j.getCompare())}return Na}{const ge=c.get(l.name);let Re=I;return ge&&(Re=Re.remove(new zr(l.name,ge))),Re.insert(l,l.node)}});return new Zi(p,this.indexSet_)}removeFromIndexes(l,c){const p=(0,It.UI)(this.indexes_,I=>{if(I===Na)return I;{const N=c.get(l.name);return N?I.remove(new zr(l.name,N)):I}});return new Zi(p,this.indexSet_)}}let wi,Jn=(()=>{class d{constructor(c,p,I){this.children_=c,this.priorityNode_=p,this.indexMap_=I,this.lazyHash_=null,this.priorityNode_&&Pn(this.priorityNode_),this.children_.isEmpty()&&(0,It.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return wi||(wi=new d(new B(Q),null,Zi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||wi}updatePriority(c){return this.children_.isEmpty()?this:new d(this.children_,c,this.indexMap_)}getImmediateChild(c){if(".priority"===c)return this.getPriority();{const p=this.children_.get(c);return null===p?wi:p}}getChild(c){const p=Zn(c);return null===p?this:this.getImmediateChild(p).getChild(fi(c))}hasChild(c){return null!==this.children_.get(c)}updateImmediateChild(c,p){if((0,It.hu)(p,"We should always be passing snapshot nodes"),".priority"===c)return this.updatePriority(p);{const I=new zr(c,p);let N,j;p.isEmpty()?(N=this.children_.remove(c),j=this.indexMap_.removeFromIndexes(I,this.children_)):(N=this.children_.insert(c,p),j=this.indexMap_.addToIndexes(I,this.children_));const ge=N.isEmpty()?wi:this.priorityNode_;return new d(N,ge,j)}}updateChild(c,p){const I=Zn(c);if(null===I)return p;{(0,It.hu)(".priority"!==Zn(c)||1===Yo(c),".priority must be the last token in a path");const N=this.getImmediateChild(I).updateChild(fi(c),p);return this.updateImmediateChild(I,N)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(c){if(this.isEmpty())return null;const p={};let I=0,N=0,j=!0;if(this.forEachChild(xr,(ge,Re)=>{p[ge]=Re.val(c),I++,j&&d.INTEGER_REGEXP_.test(ge)?N=Math.max(N,Number(ge)):j=!1}),!c&&j&&N<2*I){const ge=[];for(const Re in p)ge[Re]=p[Re];return ge}return c&&!this.getPriority().isEmpty()&&(p[".priority"]=this.getPriority().val()),p}hash(){if(null===this.lazyHash_){let c="";this.getPriority().isEmpty()||(c+="priority:"+Bt(this.getPriority().val())+":"),this.forEachChild(xr,(p,I)=>{const N=I.hash();""!==N&&(c+=":"+p+":"+N)}),this.lazyHash_=""===c?"":Hs(c)}return this.lazyHash_}getPredecessorChildName(c,p,I){const N=this.resolveIndex_(I);if(N){const j=N.getPredecessorKey(new zr(c,p));return j?j.name:null}return this.children_.getPredecessorKey(c)}getFirstChildName(c){const p=this.resolveIndex_(c);if(p){const I=p.minKey();return I&&I.name}return this.children_.minKey()}getFirstChild(c){const p=this.getFirstChildName(c);return p?new zr(p,this.children_.get(p)):null}getLastChildName(c){const p=this.resolveIndex_(c);if(p){const I=p.maxKey();return I&&I.name}return this.children_.maxKey()}getLastChild(c){const p=this.getLastChildName(c);return p?new zr(p,this.children_.get(p)):null}forEachChild(c,p){const I=this.resolveIndex_(c);return I?I.inorderTraversal(N=>p(N.name,N.node)):this.children_.inorderTraversal(p)}getIterator(c){return this.getIteratorFrom(c.minPost(),c)}getIteratorFrom(c,p){const I=this.resolveIndex_(p);if(I)return I.getIteratorFrom(c,N=>N);{const N=this.children_.getIteratorFrom(c.name,zr.Wrap);let j=N.peek();for(;null!=j&&p.compare(j,c)<0;)N.getNext(),j=N.peek();return N}}getReverseIterator(c){return this.getReverseIteratorFrom(c.maxPost(),c)}getReverseIteratorFrom(c,p){const I=this.resolveIndex_(p);if(I)return I.getReverseIteratorFrom(c,N=>N);{const N=this.children_.getReverseIteratorFrom(c.name,zr.Wrap);let j=N.peek();for(;null!=j&&p.compare(j,c)>0;)N.getNext(),j=N.peek();return N}}compareTo(c){return this.isEmpty()?c.isEmpty()?0:-1:c.isLeafNode()||c.isEmpty()?1:c===Rs?-1:0}withIndex(c){if(c===$i||this.indexMap_.hasIndex(c))return this;{const p=this.indexMap_.addIndex(c,this.children_);return new d(this.children_,this.priorityNode_,p)}}isIndexed(c){return c===$i||this.indexMap_.hasIndex(c)}equals(c){if(c===this)return!0;if(c.isLeafNode())return!1;{const p=c;if(this.getPriority().equals(p.getPriority())){if(this.children_.count()===p.children_.count()){const I=this.getIterator(xr),N=p.getIterator(xr);let j=I.getNext(),ge=N.getNext();for(;j&&ge;){if(j.name!==ge.name||!j.node.equals(ge.node))return!1;j=I.getNext(),ge=N.getNext()}return null===j&&null===ge}return!1}return!1}}resolveIndex_(c){return c===$i?null:this.indexMap_.get(c.toString())}}return d.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,d})();const Rs=new class extends Jn{constructor(){super(new B(Q),Jn.EMPTY_NODE,Zi.Default)}compareTo(l){return l===this?0:1}equals(l){return l===this}getPriority(){return this}getImmediateChild(l){return Jn.EMPTY_NODE}isEmpty(){return!1}};function ni(d,l=null){if(null===d)return Jn.EMPTY_NODE;if("object"==typeof d&&".priority"in d&&(l=d[".priority"]),(0,It.hu)(null===l||"string"==typeof l||"number"==typeof l||"object"==typeof l&&".sv"in l,"Invalid priority type found: "+typeof l),"object"==typeof d&&".value"in d&&null!==d[".value"]&&(d=d[".value"]),"object"!=typeof d||".sv"in d)return new Yn(d,ni(l));if(d instanceof Array){let c=Jn.EMPTY_NODE;return ye(d,(p,I)=>{if((0,It.r3)(d,p)&&"."!==p.substring(0,1)){const N=ni(I);(N.isLeafNode()||!N.isEmpty())&&(c=c.updateImmediateChild(p,N))}}),c.updatePriority(ni(l))}{const c=[];let p=!1;if(ye(d,(j,ge)=>{if("."!==j.substring(0,1)){const Re=ni(ge);Re.isEmpty()||(p=p||!Re.getPriority().isEmpty(),c.push(new zr(j,Re)))}}),0===c.length)return Jn.EMPTY_NODE;const N=Ko(c,J,j=>j.name,Q);if(p){const j=Ko(c,xr.getCompare());return new Jn(N,ni(l),new Zi({".priority":j},{".priority":xr}))}return new Jn(N,ni(l),Zi.Default)}}Object.defineProperties(zr,{MIN:{value:new zr(vs,Jn.EMPTY_NODE)},MAX:{value:new zr(ls,Rs)}}),uc.__EMPTY_NODE=Jn.EMPTY_NODE,Yn.__childrenNodeConstructor=Jn,Be=Rs,qr=Rs,function(d){ii=d}(ni);class Ku extends Oo{constructor(l){super(),this.indexPath_=l,(0,It.hu)(!ti(l)&&".priority"!==Zn(l),"Can't create PathIndex with empty path or .priority key")}extractChild(l){return l.getChild(this.indexPath_)}isDefinedOn(l){return!l.getChild(this.indexPath_).isEmpty()}compare(l,c){const p=this.extractChild(l.node),I=this.extractChild(c.node),N=p.compareTo(I);return 0===N?oi(l.name,c.name):N}makePost(l,c){const p=ni(l),I=Jn.EMPTY_NODE.updateChild(this.indexPath_,p);return new zr(c,I)}maxPost(){const l=Jn.EMPTY_NODE.updateChild(this.indexPath_,Rs);return new zr(ls,l)}toString(){return Dl(this.indexPath_,0).join("/")}}const qi=new class extends Oo{compare(l,c){const p=l.node.compareTo(c.node);return 0===p?oi(l.name,c.name):p}isDefinedOn(l){return!0}indexedValueChanged(l,c){return!l.equals(c)}minPost(){return zr.MIN}maxPost(){return zr.MAX}makePost(l,c){const p=ni(l);return new zr(c,p)}toString(){return".value"}};function La(d,l,c){return{type:"child_changed",snapshotNode:l,childName:d,oldSnap:c}}class ba{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=xr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,It.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,It.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:vs}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,It.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,It.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ls}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,It.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===xr}copy(){const l=new ba;return l.limitSet_=this.limitSet_,l.limit_=this.limit_,l.startSet_=this.startSet_,l.indexStartValue_=this.indexStartValue_,l.startNameSet_=this.startNameSet_,l.indexStartName_=this.indexStartName_,l.endSet_=this.endSet_,l.indexEndValue_=this.indexEndValue_,l.endNameSet_=this.endNameSet_,l.indexEndName_=this.indexEndName_,l.index_=this.index_,l.viewFrom_=this.viewFrom_,l}}function aa(d){const l={};if(d.isDefault())return l;let c;return d.index_===xr?c="$priority":d.index_===qi?c="$value":d.index_===$i?c="$key":((0,It.hu)(d.index_ instanceof Ku,"Unrecognized index type!"),c=d.index_.toString()),l.orderBy=(0,It.Wl)(c),d.startSet_&&(l.startAt=(0,It.Wl)(d.indexStartValue_),d.startNameSet_&&(l.startAt+=","+(0,It.Wl)(d.indexStartName_))),d.endSet_&&(l.endAt=(0,It.Wl)(d.indexEndValue_),d.endNameSet_&&(l.endAt+=","+(0,It.Wl)(d.indexEndName_))),d.limitSet_&&(d.isViewFromLeft()?l.limitToFirst=d.limit_:l.limitToLast=d.limit_),l}function Kl(d){const l={};if(d.startSet_&&(l.sp=d.indexStartValue_,d.startNameSet_&&(l.sn=d.indexStartName_)),d.endSet_&&(l.ep=d.indexEndValue_,d.endNameSet_&&(l.en=d.indexEndName_)),d.limitSet_){l.l=d.limit_;let c=d.viewFrom_;""===c&&(c=d.isViewFromLeft()?"l":"r"),l.vf=c}return d.index_!==xr&&(l.i=d.index_.toString()),l}class Sl extends Ys{constructor(l,c,p,I){super(),this.repoInfo_=l,this.onDataUpdate_=c,this.authTokenProvider_=p,this.appCheckTokenProvider_=I,this.log_=po("p:rest:"),this.listens_={}}reportStats(l){throw new Error("Method not implemented.")}static getListenId_(l,c){return void 0!==c?"tag$"+c:((0,It.hu)(l._queryParams.isDefault(),"should have a tag if it's not a default query."),l._path.toString())}listen(l,c,p,I){const N=l._path.toString();this.log_("Listen called for "+N+" "+l._queryIdentifier);const j=Sl.getListenId_(l,p),ge={};this.listens_[j]=ge;const Re=aa(l._queryParams);this.restRequest_(N+".json",Re,(Ge,Mt)=>{let kt=Mt;if(404===Ge&&(kt=null,Ge=null),null===Ge&&this.onDataUpdate_(N,kt,!1,p),(0,It.DV)(this.listens_,j)===ge){let Wt;Wt=Ge?401===Ge?"permission_denied":"rest_error:"+Ge:"ok",I(Wt,null)}})}unlisten(l,c){const p=Sl.getListenId_(l,c);delete this.listens_[p]}get(l){const c=aa(l._queryParams),p=l._path.toString(),I=new It.BH;return this.restRequest_(p+".json",c,(N,j)=>{let ge=j;404===N&&(ge=null,N=null),null===N?(this.onDataUpdate_(p,ge,!1,null),I.resolve(ge)):I.reject(new Error(ge))}),I.promise}refreshAuthToken(l){}restRequest_(l,c={},p){return c.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([I,N])=>{I&&I.accessToken&&(c.auth=I.accessToken),N&&N.token&&(c.ac=N.token);const j=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+l+"?ns="+this.repoInfo_.namespace+(0,It.xO)(c);this.log_("Sending REST request for "+j);const ge=new XMLHttpRequest;ge.onreadystatechange=()=>{if(p&&4===ge.readyState){this.log_("REST Response for "+j+" received. status:",ge.status,"response:",ge.responseText);let Re=null;if(ge.status>=200&&ge.status<300){try{Re=(0,It.cI)(ge.responseText)}catch(Ge){Ri("Failed to parse JSON response for "+j+": "+ge.responseText)}p(null,Re)}else 401!==ge.status&&404!==ge.status&&Ri("Got unsuccessful REST response for "+j+" Status: "+ge.status),p(ge.status);p=null}},ge.open("GET",j,!0),ge.send()})}}class Nd{constructor(){this.rootNode_=Jn.EMPTY_NODE}getNode(l){return this.rootNode_.getChild(l)}updateSnapshot(l,c){this.rootNode_=this.rootNode_.updateChild(l,c)}}function Al(){return{value:null,children:new Map}}function $(d,l,c){if(ti(l))d.value=c,d.children.clear();else if(null!==d.value)d.value=d.value.updateChild(l,c);else{const p=Zn(l);d.children.has(p)||d.children.set(p,Al()),$(d.children.get(p),l=fi(l),c)}}function me(d,l,c){null!==d.value?c(l,d.value):function(d,l){d.children.forEach((c,p)=>{l(p,c)})}(d,(p,I)=>{me(I,new Et(l.toString()+"/"+p),c)})}class yt{constructor(l){this.collection_=l,this.last_=null}get(){const l=this.collection_.get(),c=Object.assign({},l);return this.last_&&ye(this.last_,(p,I)=>{c[p]=c[p]-I}),this.last_=l,c}}class gr{constructor(l,c){this.server_=c,this.statsToReport_={},this.statsListener_=new yt(l);const p=1e4+2e4*Math.random();ei(this.reportStats_.bind(this),Math.floor(p))}reportStats_(){const l=this.statsListener_.get(),c={};let p=!1;ye(l,(I,N)=>{N>0&&(0,It.r3)(this.statsToReport_,I)&&(c[I]=N,p=!0)}),p&&this.server_.reportStats(c),ei(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var lr=(()=>(function(d){d[d.OVERWRITE=0]="OVERWRITE",d[d.MERGE=1]="MERGE",d[d.ACK_USER_WRITE=2]="ACK_USER_WRITE",d[d.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(lr||(lr={})),lr))();function Is(d){return{fromUser:!1,fromServer:!0,queryId:d,tagged:!0}}class pi{constructor(l,c,p){this.path=l,this.affectedTree=c,this.revert=p,this.type=lr.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(l){if(ti(this.path)){if(null!=this.affectedTree.value)return(0,It.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const c=this.affectedTree.subtree(new Et(l));return new pi(Nt(),c,this.revert)}}return(0,It.hu)(Zn(this.path)===l,"operationForChild called for unrelated child."),new pi(fi(this.path),this.affectedTree,this.revert)}}class wo{constructor(l,c,p){this.source=l,this.path=c,this.snap=p,this.type=lr.OVERWRITE}operationForChild(l){return ti(this.path)?new wo(this.source,Nt(),this.snap.getImmediateChild(l)):new wo(this.source,fi(this.path),this.snap)}}class To{constructor(l,c,p){this.source=l,this.path=c,this.children=p,this.type=lr.MERGE}operationForChild(l){if(ti(this.path)){const c=this.children.subtree(new Et(l));return c.isEmpty()?null:c.value?new wo(this.source,Nt(),c.value):new To(this.source,Nt(),c)}return(0,It.hu)(Zn(this.path)===l,"Can't get a merge for a child not on the path of the operation"),new To(this.source,fi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Js{constructor(l,c,p){this.node_=l,this.fullyInitialized_=c,this.filtered_=p}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(l){if(ti(l))return this.isFullyInitialized()&&!this.filtered_;const c=Zn(l);return this.isCompleteForChild(c)}isCompleteForChild(l){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(l)}getNode(){return this.node_}}function Fo(d,l,c,p,I,N){const j=p.filter(ge=>ge.type===c);j.sort((ge,Re)=>function(d,l,c){if(null==l.childName||null==c.childName)throw(0,It.g5)("Should only compare child_ events.");const p=new zr(l.childName,l.snapshotNode),I=new zr(c.childName,c.snapshotNode);return d.index_.compare(p,I)}(d,ge,Re)),j.forEach(ge=>{const Re=function(d,l,c){return"value"===l.type||"child_removed"===l.type||(l.prevName=c.getPredecessorChildName(l.childName,l.snapshotNode,d.index_)),l}(d,ge,N);I.forEach(Ge=>{Ge.respondsTo(ge.type)&&l.push(Ge.createEvent(Re,d.query_))})})}function Ca(d,l){return{eventCache:d,serverCache:l}}function Oc(d,l,c,p){return Ca(new Js(l,c,p),d.serverCache)}function du(d,l,c,p){return Ca(d.eventCache,new Js(l,c,p))}function hc(d){return d.eventCache.isFullyInitialized()?d.eventCache.getNode():null}function la(d){return d.serverCache.isFullyInitialized()?d.serverCache.getNode():null}let Rl;class Oi{constructor(l,c=(()=>(Rl||(Rl=new B(Ds)),Rl))()){this.value=l,this.children=c}static fromObject(l){let c=new Oi(null);return ye(l,(p,I)=>{c=c.set(new Et(p),I)}),c}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(l,c){if(null!=this.value&&c(this.value))return{path:Nt(),value:this.value};if(ti(l))return null;{const p=Zn(l),I=this.children.get(p);if(null!==I){const N=I.findRootMostMatchingPathAndValue(fi(l),c);return null!=N?{path:Pi(new Et(p),N.path),value:N.value}:null}return null}}findRootMostValueAndPath(l){return this.findRootMostMatchingPathAndValue(l,()=>!0)}subtree(l){if(ti(l))return this;{const c=Zn(l),p=this.children.get(c);return null!==p?p.subtree(fi(l)):new Oi(null)}}set(l,c){if(ti(l))return new Oi(c,this.children);{const p=Zn(l),N=(this.children.get(p)||new Oi(null)).set(fi(l),c),j=this.children.insert(p,N);return new Oi(this.value,j)}}remove(l){if(ti(l))return this.children.isEmpty()?new Oi(null):new Oi(null,this.children);{const c=Zn(l),p=this.children.get(c);if(p){const I=p.remove(fi(l));let N;return N=I.isEmpty()?this.children.remove(c):this.children.insert(c,I),null===this.value&&N.isEmpty()?new Oi(null):new Oi(this.value,N)}return this}}get(l){if(ti(l))return this.value;{const c=Zn(l),p=this.children.get(c);return p?p.get(fi(l)):null}}setTree(l,c){if(ti(l))return c;{const p=Zn(l),N=(this.children.get(p)||new Oi(null)).setTree(fi(l),c);let j;return j=N.isEmpty()?this.children.remove(p):this.children.insert(p,N),new Oi(this.value,j)}}fold(l){return this.fold_(Nt(),l)}fold_(l,c){const p={};return this.children.inorderTraversal((I,N)=>{p[I]=N.fold_(Pi(l,I),c)}),c(l,this.value,p)}findOnPath(l,c){return this.findOnPath_(l,Nt(),c)}findOnPath_(l,c,p){const I=!!this.value&&p(c,this.value);if(I)return I;if(ti(l))return null;{const N=Zn(l),j=this.children.get(N);return j?j.findOnPath_(fi(l),Pi(c,N),p):null}}foreachOnPath(l,c){return this.foreachOnPath_(l,Nt(),c)}foreachOnPath_(l,c,p){if(ti(l))return this;{this.value&&p(c,this.value);const I=Zn(l),N=this.children.get(I);return N?N.foreachOnPath_(fi(l),Pi(c,I),p):new Oi(null)}}foreach(l){this.foreach_(Nt(),l)}foreach_(l,c){this.children.inorderTraversal((p,I)=>{I.foreach_(Pi(l,p),c)}),this.value&&c(l,this.value)}foreachChild(l){this.children.inorderTraversal((c,p)=>{p.value&&l(c,p.value)})}}class eo{constructor(l){this.writeTree_=l}static empty(){return new eo(new Oi(null))}}function Ml(d,l,c){if(ti(l))return new eo(new Oi(c));{const p=d.writeTree_.findRootMostValueAndPath(l);if(null!=p){const I=p.path;let N=p.value;const j=Us(I,l);return N=N.updateChild(j,c),new eo(d.writeTree_.set(I,N))}{const I=new Oi(c),N=d.writeTree_.setTree(l,I);return new eo(N)}}}function Nc(d,l,c){let p=d;return ye(c,(I,N)=>{p=Ml(p,Pi(l,I),N)}),p}function Pl(d,l){if(ti(l))return eo.empty();{const c=d.writeTree_.setTree(l,new Oi(null));return new eo(c)}}function Ps(d,l){return null!=Ja(d,l)}function Ja(d,l){const c=d.writeTree_.findRootMostValueAndPath(l);return null!=c?d.writeTree_.get(c.path).getChild(Us(c.path,l)):null}function Zl(d){const l=[],c=d.writeTree_.value;return null!=c?c.isLeafNode()||c.forEachChild(xr,(p,I)=>{l.push(new zr(p,I))}):d.writeTree_.children.inorderTraversal((p,I)=>{null!=I.value&&l.push(new zr(p,I.value))}),l}function el(d,l){if(ti(l))return d;{const c=Ja(d,l);return new eo(null!=c?new Oi(c):d.writeTree_.subtree(l))}}function Va(d){return d.writeTree_.isEmpty()}function wa(d,l){return hu(Nt(),d.writeTree_,l)}function hu(d,l,c){if(null!=l.value)return c.updateChild(d,l.value);{let p=null;return l.children.inorderTraversal((I,N)=>{".priority"===I?((0,It.hu)(null!==N.value,"Priority writes must always be leaf nodes"),p=N.value):c=hu(Pi(d,I),N,c)}),!c.getChild(d).isEmpty()&&null!==p&&(c=c.updateChild(Pi(d,".priority"),p)),c}}function Zu(d,l){return Vd(l,d)}function fu(d,l){if(d.snap)return ar(d.path,l);for(const c in d.children)if(d.children.hasOwnProperty(c)&&ar(Pi(d.path,c),l))return!0;return!1}function Qu(d){return d.visible}function pu(d,l,c){let p=eo.empty();for(let I=0;I<d.length;++I){const N=d[I];if(l(N)){const j=N.path;let ge;if(N.snap)ar(c,j)?(ge=Us(c,j),p=Ml(p,ge,N.snap)):ar(j,c)&&(ge=Us(j,c),p=Ml(p,Nt(),N.snap.getChild(ge)));else{if(!N.children)throw(0,It.g5)("WriteRecord should have .snap or .children");if(ar(c,j))ge=Us(c,j),p=Nc(p,ge,N.children);else if(ar(j,c))if(ge=Us(j,c),ti(ge))p=Nc(p,Nt(),N.children);else{const Re=(0,It.DV)(N.children,Zn(ge));if(Re){const Ge=Re.getChild(fi(ge));p=Ml(p,Nt(),Ge)}}}}}return p}function $a(d,l,c,p,I){if(p||I){const N=el(d.visibleWrites,l);return!I&&Va(N)?c:I||null!=c||Ps(N,Nt())?wa(pu(d.allWrites,function(Ge){return(Ge.visible||I)&&(!p||!~p.indexOf(Ge.writeId))&&(ar(Ge.path,l)||ar(l,Ge.path))},l),c||Jn.EMPTY_NODE):null}{const N=Ja(d.visibleWrites,l);if(null!=N)return N;{const j=el(d.visibleWrites,l);return Va(j)?c:null!=c||Ps(j,Nt())?wa(j,c||Jn.EMPTY_NODE):null}}}function Vc(d,l,c,p){return $a(d.writeTree,d.treePath,l,c,p)}function Xl(d,l){return function(d,l,c){let p=Jn.EMPTY_NODE;const I=Ja(d.visibleWrites,l);if(I)return I.isLeafNode()||I.forEachChild(xr,(N,j)=>{p=p.updateImmediateChild(N,j)}),p;if(c){const N=el(d.visibleWrites,l);return c.forEachChild(xr,(j,ge)=>{const Re=wa(el(N,new Et(j)),ge);p=p.updateImmediateChild(j,Re)}),Zl(N).forEach(j=>{p=p.updateImmediateChild(j.name,j.node)}),p}return Zl(el(d.visibleWrites,l)).forEach(j=>{p=p.updateImmediateChild(j.name,j.node)}),p}(d.writeTree,d.treePath,l)}function Jl(d,l,c,p){return function(d,l,c,p,I){(0,It.hu)(p||I,"Either existingEventSnap or existingServerSnap must exist");const N=Pi(l,c);if(Ps(d.visibleWrites,N))return null;{const j=el(d.visibleWrites,N);return Va(j)?I.getChild(c):wa(j,I.getChild(c))}}(d.writeTree,d.treePath,l,c,p)}function Xu(d,l){return function(d,l){return Ja(d.visibleWrites,l)}(d.writeTree,Pi(d.treePath,l))}function $c(d,l,c){return function(d,l,c,p){const I=Pi(l,c),N=Ja(d.visibleWrites,I);return null!=N?N:p.isCompleteForChild(c)?wa(el(d.visibleWrites,I),p.getNode().getImmediateChild(c)):null}(d.writeTree,d.treePath,l,c)}function gu(d,l){return Vd(Pi(d.treePath,l),d.writeTree)}function Vd(d,l){return{treePath:d,writeTree:l}}class tl{constructor(){this.changeMap=new Map}trackChildChange(l){const c=l.type,p=l.childName;(0,It.hu)("child_added"===c||"child_changed"===c||"child_removed"===c,"Only child changes supported for tracking"),(0,It.hu)(".priority"!==p,"Only non-priority child changes can be tracked.");const I=this.changeMap.get(p);if(I){const N=I.type;if("child_added"===c&&"child_removed"===N)this.changeMap.set(p,La(p,l.snapshotNode,I.snapshotNode));else if("child_removed"===c&&"child_added"===N)this.changeMap.delete(p);else if("child_removed"===c&&"child_changed"===N)this.changeMap.set(p,function(d,l){return{type:"child_removed",snapshotNode:l,childName:d}}(p,I.oldSnap));else if("child_changed"===c&&"child_added"===N)this.changeMap.set(p,function(d,l){return{type:"child_added",snapshotNode:l,childName:d}}(p,l.snapshotNode));else{if("child_changed"!==c||"child_changed"!==N)throw(0,It.g5)("Illegal combination of changes: "+l+" occurred after "+I);this.changeMap.set(p,La(p,l.snapshotNode,I.oldSnap))}}else this.changeMap.set(p,l)}getChanges(){return Array.from(this.changeMap.values())}}const $d=new class{getCompleteChild(l){return null}getChildAfterChild(l,c,p){return null}};class Ju{constructor(l,c,p=null){this.writes_=l,this.viewCache_=c,this.optCompleteServerCache_=p}getCompleteChild(l){const c=this.viewCache_.eventCache;if(c.isCompleteForChild(l))return c.getNode().getImmediateChild(l);{const p=null!=this.optCompleteServerCache_?new Js(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return $c(this.writes_,l,p)}}getChildAfterChild(l,c,p){const I=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:la(this.viewCache_),N=function(d,l,c,p,I,N){return function(d,l,c,p,I,N,j){let ge;const Re=el(d.visibleWrites,l),Ge=Ja(Re,Nt());if(null!=Ge)ge=Ge;else{if(null==c)return[];ge=wa(Re,c)}if(ge=ge.withIndex(j),ge.isEmpty()||ge.isLeafNode())return[];{const Mt=[],kt=j.getCompare(),Wt=N?ge.getReverseIteratorFrom(p,j):ge.getIteratorFrom(p,j);let Vn=Wt.getNext();for(;Vn&&Mt.length<I;)0!==kt(Vn,p)&&Mt.push(Vn),Vn=Wt.getNext();return Mt}}(d.writeTree,d.treePath,l,c,p,I,N)}(this.writes_,I,c,1,p,l);return 0===N.length?null:N[0]}}function ed(d,l,c,p,I,N){const j=l.eventCache;if(null!=Xu(p,c))return l;{let ge,Re;if(ti(c))if((0,It.hu)(l.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),l.serverCache.isFiltered()){const Ge=la(l),kt=Xl(p,Ge instanceof Jn?Ge:Jn.EMPTY_NODE);ge=d.filter.updateFullNode(l.eventCache.getNode(),kt,N)}else{const Ge=Vc(p,la(l));ge=d.filter.updateFullNode(l.eventCache.getNode(),Ge,N)}else{const Ge=Zn(c);if(".priority"===Ge){(0,It.hu)(1===Yo(c),"Can't have a priority with additional path components");const Mt=j.getNode();Re=l.serverCache.getNode();const kt=Jl(p,c,Mt,Re);ge=null!=kt?d.filter.updatePriority(Mt,kt):j.getNode()}else{const Mt=fi(c);let kt;if(j.isCompleteForChild(Ge)){Re=l.serverCache.getNode();const Wt=Jl(p,c,j.getNode(),Re);kt=null!=Wt?j.getNode().getImmediateChild(Ge).updateChild(Mt,Wt):j.getNode().getImmediateChild(Ge)}else kt=$c(p,Ge,l.serverCache);ge=null!=kt?d.filter.updateChild(j.getNode(),Ge,kt,Mt,I,N):j.getNode()}}return Oc(l,ge,j.isFullyInitialized()||ti(c),d.filter.filtersNodes())}}function kl(d,l,c,p,I,N,j,ge){const Re=l.serverCache;let Ge;const Mt=j?d.filter:d.filter.getIndexedFilter();if(ti(c))Ge=Mt.updateFullNode(Re.getNode(),p,null);else if(Mt.filtersNodes()&&!Re.isFiltered()){const Vn=Re.getNode().updateChild(c,p);Ge=Mt.updateFullNode(Re.getNode(),Vn,null)}else{const Vn=Zn(c);if(!Re.isCompleteForPath(c)&&Yo(c)>1)return l;const nr=fi(c),Ui=Re.getNode().getImmediateChild(Vn).updateChild(nr,p);Ge=".priority"===Vn?Mt.updatePriority(Re.getNode(),Ui):Mt.updateChild(Re.getNode(),Vn,Ui,nr,$d,null)}const kt=du(l,Ge,Re.isFullyInitialized()||ti(c),Mt.filtersNodes());return ed(d,kt,c,I,new Ju(I,kt,N),ge)}function mu(d,l,c,p,I,N,j){const ge=l.eventCache;let Re,Ge;const Mt=new Ju(I,l,N);if(ti(c))Ge=d.filter.updateFullNode(l.eventCache.getNode(),p,j),Re=Oc(l,Ge,!0,d.filter.filtersNodes());else{const kt=Zn(c);if(".priority"===kt)Ge=d.filter.updatePriority(l.eventCache.getNode(),p),Re=Oc(l,Ge,ge.isFullyInitialized(),ge.isFiltered());else{const Wt=fi(c),Vn=ge.getNode().getImmediateChild(kt);let nr;if(ti(Wt))nr=p;else{const ri=Mt.getCompleteChild(kt);nr=null!=ri?".priority"===Es(Wt)&&ri.getChild(cc(Wt)).isEmpty()?ri:ri.updateChild(Wt,p):Jn.EMPTY_NODE}Re=Vn.equals(nr)?l:Oc(l,d.filter.updateChild(ge.getNode(),kt,nr,Wt,Mt,j),ge.isFullyInitialized(),d.filter.filtersNodes())}}return Re}function td(d,l){return d.eventCache.isCompleteForChild(l)}function gi(d,l,c){return c.foreach((p,I)=>{l=l.updateChild(p,I)}),l}function nd(d,l,c,p,I,N,j,ge){if(l.serverCache.getNode().isEmpty()&&!l.serverCache.isFullyInitialized())return l;let Ge,Re=l;Ge=ti(c)?p:new Oi(null).setTree(c,p);const Mt=l.serverCache.getNode();return Ge.children.inorderTraversal((kt,Wt)=>{if(Mt.hasChild(kt)){const nr=gi(0,l.serverCache.getNode().getImmediateChild(kt),Wt);Re=kl(d,Re,new Et(kt),nr,I,N,j,ge)}}),Ge.children.inorderTraversal((kt,Wt)=>{const Vn=!l.serverCache.isCompleteForChild(kt)&&null===Wt.value;if(!Mt.hasChild(kt)&&!Vn){const ri=gi(0,l.serverCache.getNode().getImmediateChild(kt),Wt);Re=kl(d,Re,new Et(kt),ri,I,N,j,ge)}}),Re}function Ud(d,l){const c=la(d.viewCache_);return c&&(d.query._queryParams.loadsAllData()||!ti(l)&&!c.getImmediateChild(Zn(l)).isEmpty())?c.getChild(l):null}function id(d,l,c,p){l.type===lr.MERGE&&null!==l.source.queryId&&((0,It.hu)(la(d.viewCache_),"We should always have a full cache before handling merges"),(0,It.hu)(hc(d.viewCache_),"Missing event cache, even though we have a server cache"));const I=d.viewCache_,N=function(d,l,c,p,I){const N=new tl;let j,ge;if(c.type===lr.OVERWRITE){const Ge=c;Ge.source.fromUser?j=mu(d,l,Ge.path,Ge.snap,p,I,N):((0,It.hu)(Ge.source.fromServer,"Unknown source."),ge=Ge.source.tagged||l.serverCache.isFiltered()&&!ti(Ge.path),j=kl(d,l,Ge.path,Ge.snap,p,I,ge,N))}else if(c.type===lr.MERGE){const Ge=c;Ge.source.fromUser?j=function(d,l,c,p,I,N,j){let ge=l;return p.foreach((Re,Ge)=>{const Mt=Pi(c,Re);td(l,Zn(Mt))&&(ge=mu(d,ge,Mt,Ge,I,N,j))}),p.foreach((Re,Ge)=>{const Mt=Pi(c,Re);td(l,Zn(Mt))||(ge=mu(d,ge,Mt,Ge,I,N,j))}),ge}(d,l,Ge.path,Ge.children,p,I,N):((0,It.hu)(Ge.source.fromServer,"Unknown source."),ge=Ge.source.tagged||l.serverCache.isFiltered(),j=nd(d,l,Ge.path,Ge.children,p,I,ge,N))}else if(c.type===lr.ACK_USER_WRITE){const Ge=c;j=Ge.revert?function(d,l,c,p,I,N){let j;if(null!=Xu(p,c))return l;{const ge=new Ju(p,l,I),Re=l.eventCache.getNode();let Ge;if(ti(c)||".priority"===Zn(c)){let Mt;if(l.serverCache.isFullyInitialized())Mt=Vc(p,la(l));else{const kt=l.serverCache.getNode();(0,It.hu)(kt instanceof Jn,"serverChildren would be complete if leaf node"),Mt=Xl(p,kt)}Ge=d.filter.updateFullNode(Re,Mt,N)}else{const Mt=Zn(c);let kt=$c(p,Mt,l.serverCache);null==kt&&l.serverCache.isCompleteForChild(Mt)&&(kt=Re.getImmediateChild(Mt)),Ge=null!=kt?d.filter.updateChild(Re,Mt,kt,fi(c),ge,N):l.eventCache.getNode().hasChild(Mt)?d.filter.updateChild(Re,Mt,Jn.EMPTY_NODE,fi(c),ge,N):Re,Ge.isEmpty()&&l.serverCache.isFullyInitialized()&&(j=Vc(p,la(l)),j.isLeafNode()&&(Ge=d.filter.updateFullNode(Ge,j,N)))}return j=l.serverCache.isFullyInitialized()||null!=Xu(p,Nt()),Oc(l,Ge,j,d.filter.filtersNodes())}}(d,l,Ge.path,p,I,N):function(d,l,c,p,I,N,j){if(null!=Xu(I,c))return l;const ge=l.serverCache.isFiltered(),Re=l.serverCache;if(null!=p.value){if(ti(c)&&Re.isFullyInitialized()||Re.isCompleteForPath(c))return kl(d,l,c,Re.getNode().getChild(c),I,N,ge,j);if(ti(c)){let Ge=new Oi(null);return Re.getNode().forEachChild($i,(Mt,kt)=>{Ge=Ge.set(new Et(Mt),kt)}),nd(d,l,c,Ge,I,N,ge,j)}return l}{let Ge=new Oi(null);return p.foreach((Mt,kt)=>{const Wt=Pi(c,Mt);Re.isCompleteForPath(Wt)&&(Ge=Ge.set(Mt,Re.getNode().getChild(Wt)))}),nd(d,l,c,Ge,I,N,ge,j)}}(d,l,Ge.path,Ge.affectedTree,p,I,N)}else{if(c.type!==lr.LISTEN_COMPLETE)throw(0,It.g5)("Unknown operation type: "+c.type);j=function(d,l,c,p,I){const N=l.serverCache;return ed(d,du(l,N.getNode(),N.isFullyInitialized()||ti(c),N.isFiltered()),c,p,$d,I)}(d,l,c.path,p,N)}const Re=N.getChanges();return function(d,l,c){const p=l.eventCache;if(p.isFullyInitialized()){const I=p.getNode().isLeafNode()||p.getNode().isEmpty(),N=hc(d);(c.length>0||!d.eventCache.isFullyInitialized()||I&&!p.getNode().equals(N)||!p.getNode().getPriority().equals(N.getPriority()))&&c.push(function(d){return{type:"value",snapshotNode:d}}(hc(l)))}}(l,j,Re),{viewCache:j,changes:Re}}(d.processor_,I,l,c,p);return function(d,l){(0,It.hu)(l.eventCache.getNode().isIndexed(d.filter.getIndex()),"Event snap not indexed"),(0,It.hu)(l.serverCache.getNode().isIndexed(d.filter.getIndex()),"Server snap not indexed")}(d.processor_,N.viewCache),(0,It.hu)(N.viewCache.serverCache.isFullyInitialized()||!I.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),d.viewCache_=N.viewCache,function(d,l,c,p){return function(d,l,c,p){const I=[],N=[];return l.forEach(j=>{"child_changed"===j.type&&d.index_.indexedValueChanged(j.oldSnap,j.snapshotNode)&&N.push(function(d,l){return{type:"child_moved",snapshotNode:l,childName:d}}(j.childName,j.snapshotNode))}),Fo(d,I,"child_removed",l,p,c),Fo(d,I,"child_added",l,p,c),Fo(d,I,"child_moved",N,p,c),Fo(d,I,"child_changed",l,p,c),Fo(d,I,"value",l,p,c),I}(d.eventGenerator_,l,c,p?[p]:d.eventRegistrations_)}(d,N.changes,N.viewCache.eventCache.getNode(),null)}let jd,ca;function ee(d,l,c,p){const I=l.source.queryId;if(null!==I){const N=d.views.get(I);return(0,It.hu)(null!=N,"SyncTree gave us an op for an invalid query."),id(N,l,c,p)}{let N=[];for(const j of d.views.values())N=N.concat(id(j,l,c,p));return N}}function dn(d,l){let c=null;for(const p of d.views.values())c=c||Ud(p,l);return c}class ad{constructor(l){this.listenProvider_=l,this.syncPointTree_=new Oi(null),this.pendingWriteTree_={visibleWrites:eo.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ll(d,l,c,p,I){return function(d,l,c,p,I){(0,It.hu)(p>d.lastWriteId,"Stacking an older write on top of newer ones"),void 0===I&&(I=!0),d.allWrites.push({path:l,snap:c,writeId:p,visible:I}),I&&(d.visibleWrites=Ml(d.visibleWrites,l,c)),d.lastWriteId=p}(d.pendingWriteTree_,l,c,p,I),I?vu(d,new wo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},l,c)):[]}function vl(d,l,c=!1){const p=function(d,l){for(let c=0;c<d.allWrites.length;c++){const p=d.allWrites[c];if(p.writeId===l)return p}return null}(d.pendingWriteTree_,l);if(function(d,l){const c=d.allWrites.findIndex(ge=>ge.writeId===l);(0,It.hu)(c>=0,"removeWrite called with nonexistent writeId.");const p=d.allWrites[c];d.allWrites.splice(c,1);let I=p.visible,N=!1,j=d.allWrites.length-1;for(;I&&j>=0;){const ge=d.allWrites[j];ge.visible&&(j>=c&&fu(ge,p.path)?I=!1:ar(p.path,ge.path)&&(N=!0)),j--}return!!I&&(N?(function(d){d.visibleWrites=pu(d.allWrites,Qu,Nt()),d.lastWriteId=d.allWrites.length>0?d.allWrites[d.allWrites.length-1].writeId:-1}(d),!0):(p.snap?d.visibleWrites=Pl(d.visibleWrites,p.path):ye(p.children,Re=>{d.visibleWrites=Pl(d.visibleWrites,Pi(p.path,Re))}),!0))}(d.pendingWriteTree_,l)){let N=new Oi(null);return null!=p.snap?N=N.set(Nt(),!0):ye(p.children,j=>{N=N.set(new Et(j),!0)}),vu(d,new pi(p.path,N,c))}return[]}function gc(d,l,c){return vu(d,new wo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l,c))}function Hc(d,l,c){const I=d.pendingWriteTree_,N=d.syncPointTree_.findOnPath(l,(j,ge)=>{const Ge=dn(ge,Us(j,l));if(Ge)return Ge});return $a(I,l,N,c,!0)}function vu(d,l){return Hd(l,d.syncPointTree_,null,Zu(d.pendingWriteTree_,Nt()))}function Hd(d,l,c,p){if(ti(d.path))return wf(d,l,c,p);{const I=l.get(Nt());null==c&&null!=I&&(c=dn(I,Nt()));let N=[];const j=Zn(d.path),ge=d.operationForChild(j),Re=l.children.get(j);if(Re&&ge){const Ge=c?c.getImmediateChild(j):null,Mt=gu(p,j);N=N.concat(Hd(ge,Re,Ge,Mt))}return I&&(N=N.concat(ee(I,d,p,c))),N}}function wf(d,l,c,p){const I=l.get(Nt());null==c&&null!=I&&(c=dn(I,Nt()));let N=[];return l.children.inorderTraversal((j,ge)=>{const Re=c?c.getImmediateChild(j):null,Ge=gu(p,j),Mt=d.operationForChild(j);Mt&&(N=N.concat(wf(Mt,ge,Re,Ge)))}),I&&(N=N.concat(ee(I,d,p,c))),N}function Df(d,l){return d.tagToQueryMap.get(l)}function Wc(d){const l=d.indexOf("$");return(0,It.hu)(-1!==l&&l<d.length-1,"Bad queryKey."),{queryId:d.substr(l+1),path:new Et(d.substr(0,l))}}function Gc(d,l,c){const p=d.syncPointTree_.get(l);return(0,It.hu)(p,"Missing sync point for query tag that we're tracking"),ee(p,c,Zu(d.pendingWriteTree_,l),null)}class Ph{constructor(l){this.node_=l}getImmediateChild(l){const c=this.node_.getImmediateChild(l);return new Ph(c)}node(){return this.node_}}class Iu{constructor(l,c){this.syncTree_=l,this.path_=c}getImmediateChild(l){const c=Pi(this.path_,l);return new Iu(this.syncTree_,c)}node(){return Hc(this.syncTree_,this.path_)}}const Sf=function(d,l,c){return d&&"object"==typeof d?((0,It.hu)(".sv"in d,"Unexpected leaf node or priority contents"),"string"==typeof d[".sv"]?mc(d[".sv"],l,c):"object"==typeof d[".sv"]?Rp(d[".sv"],l):void(0,It.hu)(!1,"Unexpected server value: "+JSON.stringify(d,null,2))):d},mc=function(d,l,c){if("timestamp"===d)return c.timestamp;(0,It.hu)(!1,"Unexpected server value: "+d)},Rp=function(d,l,c){d.hasOwnProperty("increment")||(0,It.hu)(!1,"Unexpected server value: "+JSON.stringify(d,null,2));const p=d.increment;"number"!=typeof p&&(0,It.hu)(!1,"Unexpected increment value: "+p);const I=l.node();if((0,It.hu)(null!=I,"Expected ChildrenNode.EMPTY_NODE for nulls"),!I.isLeafNode())return p;const j=I.getValue();return"number"!=typeof j?p:j+p},Af=function(d,l,c){return xf(d,new Ph(l),c)};function xf(d,l,c){const p=d.getPriority().val(),I=Sf(p,l.getImmediateChild(".priority"),c);let N;if(d.isLeafNode()){const j=d,ge=Sf(j.getValue(),l,c);return ge!==j.getValue()||I!==j.getPriority().val()?new Yn(ge,ni(I)):d}{const j=d;return N=j,I!==j.getPriority().val()&&(N=N.updatePriority(new Yn(I))),j.forEachChild(xr,(ge,Re)=>{const Ge=xf(Re,l.getImmediateChild(ge),c);Ge!==Re&&(N=N.updateImmediateChild(ge,Ge))}),N}}class Rf{constructor(l="",c=null,p={children:{},childCount:0}){this.name=l,this.parent=c,this.node=p}}function bu(d,l){let c=l instanceof Et?l:new Et(l),p=d,I=Zn(c);for(;null!==I;){const N=(0,It.DV)(p.node.children,I)||{children:{},childCount:0};p=new Rf(I,p,N),c=fi(c),I=Zn(c)}return p}function $o(d){return d.node.value}function Oh(d,l){d.node.value=l,Mf(d)}function Pp(d){return d.node.childCount>0}function Gd(d,l){ye(d.node.children,(c,p)=>{l(new Rf(c,d,p))})}function Kg(d,l,c,p){c&&!p&&l(d),Gd(d,I=>{Kg(I,l,!0,p)}),c&&p&&l(d)}function zd(d){return new Et(null===d.parent?d.name:zd(d.parent)+"/"+d.name)}function Mf(d){null!==d.parent&&function(d,l,c){const p=function(d){return void 0===$o(d)&&!Pp(d)}(c),I=(0,It.r3)(d.node.children,l);p&&I?(delete d.node.children[l],d.node.childCount--,Mf(d)):!p&&!I&&(d.node.children[l]=c.node,d.node.childCount++,Mf(d))}(d.parent,d.name,d)}const Cu=/[\[\].#$\/\u0000-\u001F\u007F]/,tc=/[\[\].#$\u0000-\u001F\u007F]/,Pf=10485760,Nh=function(d){return"string"==typeof d&&0!==d.length&&!Cu.test(d)},yc=function(d,l,c){const p=c instanceof Et?new Ks(c,d):c;if(void 0===l)throw new Error(d+"contains undefined "+Zs(p));if("function"==typeof l)throw new Error(d+"contains a function "+Zs(p)+" with contents = "+l.toString());if(Vs(l))throw new Error(d+"contains "+l.toString()+" "+Zs(p));if("string"==typeof l&&l.length>Pf/3&&(0,It.ug)(l)>Pf)throw new Error(d+"contains a string greater than "+Pf+" utf8 bytes "+Zs(p)+" ('"+l.substring(0,50)+"...')");if(l&&"object"==typeof l){let I=!1,N=!1;if(ye(l,(j,ge)=>{if(".value"===j)I=!0;else if(".priority"!==j&&".sv"!==j&&(N=!0,!Nh(j)))throw new Error(d+" contains an invalid key ("+j+") "+Zs(p)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(d,l){d.parts_.length>0&&(d.byteLength_+=1),d.parts_.push(l),d.byteLength_+=(0,It.ug)(l),Er(d)})(p,j),yc(d,ge,p),function(d){const l=d.parts_.pop();d.byteLength_-=(0,It.ug)(l),d.parts_.length>0&&(d.byteLength_-=1)}(p)}),I&&N)throw new Error(d+' contains ".value" child '+Zs(p)+" in addition to actual children.")}},_c=function(d,l){const c=l.path.toString();if("string"!=typeof l.repoInfo.host||0===l.repoInfo.host.length||!Nh(l.repoInfo.namespace)&&"localhost"!==l.repoInfo.host.split(":")[0]||0!==c.length&&!function(d){return d&&(d=d.replace(/^\/*\.info(\/|$)/,"/")),function(d){return"string"==typeof d&&0!==d.length&&!tc.test(d)}(d)}(c))throw new Error((0,It.gK)(d,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class dd{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function da(d,l,c){(function(d,l){let c=null;for(let p=0;p<l.length;p++){const I=l[p],N=I.getPath();null!==c&&!Ma(N,c.path)&&(d.eventLists_.push(c),c=null),null===c&&(c={events:[],path:N}),c.events.push(I)}c&&d.eventLists_.push(c)})(d,c),function(d,l){d.recursionDepth_++;let c=!0;for(let p=0;p<d.eventLists_.length;p++){const I=d.eventLists_[p];I&&(l(I.path)?(Fh(d.eventLists_[p]),d.eventLists_[p]=null):c=!1)}c&&(d.eventLists_=[]),d.recursionDepth_--}(d,p=>ar(p,l)||ar(l,p))}function Fh(d){for(let l=0;l<d.events.length;l++){const c=d.events[l];if(null!==c){d.events[l]=null;const p=c.getEventRunner();ji&&Nr("event: "+c.toString()),pn(p)}}}class kp{constructor(l,c,p,I){this.repoInfo_=l,this.forceRestClient_=c,this.authTokenProvider_=p,this.appCheckProvider_=I,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new dd,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Al(),this.transactionQueueTree_=new Rf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Kd(d){const c=d.infoData_.getNode(new Et(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+c}function vc(d){return function(d){return(d=d||{}).timestamp=d.timestamp||(new Date).getTime(),d}({timestamp:Kd(d)})}function Ec(d,l,c,p,I){d.dataUpdateCount++;const N=new Et(l);c=d.interceptServerDataCallback_?d.interceptServerDataCallback_(l,c):c;let j=[];if(I)if(p){const Re=(0,It.UI)(c,Ge=>ni(Ge));j=function(d,l,c,p){const I=Df(d,p);if(I){const N=Wc(I),j=N.path,ge=N.queryId,Re=Us(j,l),Ge=Oi.fromObject(c);return Gc(d,j,new To(Is(ge),Re,Ge))}return[]}(d.serverSyncTree_,N,Re,I)}else{const Re=ni(c);j=function(d,l,c,p){const I=Df(d,p);if(null!=I){const N=Wc(I),j=N.path,ge=N.queryId,Re=Us(j,l);return Gc(d,j,new wo(Is(ge),Re,c))}return[]}(d.serverSyncTree_,N,Re,I)}else if(p){const Re=(0,It.UI)(c,Ge=>ni(Ge));j=function(d,l,c){const p=Oi.fromObject(c);return vu(d,new To({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l,p))}(d.serverSyncTree_,N,Re)}else{const Re=ni(c);j=gc(d.serverSyncTree_,N,Re)}let ge=N;j.length>0&&(ge=rc(d,N)),da(d.eventQueue_,ge,j)}function Lh(d,l){Zd(d,"connected",l),!1===l&&function(d){$l(d,"onDisconnectEvents");const l=vc(d),c=Al();me(d.onDisconnect_,Nt(),(I,N)=>{const j=function(d,l,c,p){return xf(l,new Iu(c,d),p)}(I,N,d.serverSyncTree_,l);$(c,I,j)});let p=[];me(c,Nt(),(I,N)=>{p=p.concat(gc(d.serverSyncTree_,I,N));const j=function(d,l){const c=zd(Tu(d,l)),p=bu(d.transactionQueueTree_,l);return function(d,l,c){let p=void 0?d:d.parent;for(;null!==p;){if(l(p))return!0;p=p.parent}}(p,I=>{Hh(d,I)}),Hh(d,p),Kg(p,I=>{Hh(d,I)}),c}(d,I);rc(d,j)}),d.onDisconnect_=Al(),da(d.eventQueue_,Nt(),p)}(d)}function Zd(d,l,c){const p=new Et("/.info/"+l),I=ni(c);d.infoData_.updateSnapshot(p,I);const N=gc(d.infoSyncTree_,p,I);da(d.eventQueue_,p,N)}function Vh(d){return d.nextWriteId_++}function $l(d,...l){let c="";d.persistentConnection_&&(c=d.persistentConnection_.id+":"),Nr(c,...l)}function wu(d,l,c){return Hc(d.serverSyncTree_,l,c)||Jn.EMPTY_NODE}function Uo(d,l=d.transactionQueueTree_){if(l||Xd(d,l),$o(l)){const c=Ic(d,l);(0,It.hu)(c.length>0,"Sending zero length transaction queue"),c.every(I=>0===I.status)&&function(d,l,c){const p=c.map(Ge=>Ge.currentWriteId),I=wu(d,l,p);let N=I;const j=I.hash();for(let Ge=0;Ge<c.length;Ge++){const Mt=c[Ge];(0,It.hu)(0===Mt.status,"tryToSendTransactionQueue_: items in queue should all be run."),Mt.status=1,Mt.retryCount++;const kt=Us(l,Mt.path);N=N.updateChild(kt,Mt.currentOutputSnapshotRaw)}const ge=N.val(!0),Re=l;d.server_.put(Re.toString(),ge,Ge=>{$l(d,"transaction put response",{path:Re.toString(),status:Ge});let Mt=[];if("ok"===Ge){const kt=[];for(let Wt=0;Wt<c.length;Wt++)c[Wt].status=2,Mt=Mt.concat(vl(d.serverSyncTree_,c[Wt].currentWriteId)),c[Wt].onComplete&&kt.push(()=>c[Wt].onComplete(null,!0,c[Wt].currentOutputSnapshotResolved)),c[Wt].unwatcher();Xd(d,bu(d.transactionQueueTree_,l)),Uo(d,d.transactionQueueTree_),da(d.eventQueue_,l,Mt);for(let Wt=0;Wt<kt.length;Wt++)pn(kt[Wt])}else{if("datastale"===Ge)for(let kt=0;kt<c.length;kt++)c[kt].status=3===c[kt].status?4:0;else{Ri("transaction at "+Re.toString()+" failed: "+Ge);for(let kt=0;kt<c.length;kt++)c[kt].status=4,c[kt].abortReason=Ge}rc(d,l)}},j)}(d,zd(l),c)}else Pp(l)&&Gd(l,c=>{Uo(d,c)})}function rc(d,l){const c=Tu(d,l),p=zd(c);return function(d,l,c){if(0===l.length)return;const p=[];let I=[];const j=l.filter(ge=>0===ge.status).map(ge=>ge.currentWriteId);for(let ge=0;ge<l.length;ge++){const Re=l[ge],Ge=Us(c,Re.path);let kt,Mt=!1;if((0,It.hu)(null!==Ge,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Re.status)Mt=!0,kt=Re.abortReason,I=I.concat(vl(d.serverSyncTree_,Re.currentWriteId,!0));else if(0===Re.status)if(Re.retryCount>=25)Mt=!0,kt="maxretry",I=I.concat(vl(d.serverSyncTree_,Re.currentWriteId,!0));else{const Wt=wu(d,Re.path,j);Re.currentInputSnapshot=Wt;const Vn=l[ge].update(Wt.val());if(void 0!==Vn){yc("transaction failed: Data returned ",Vn,Re.path);let nr=ni(Vn);"object"==typeof Vn&&null!=Vn&&(0,It.r3)(Vn,".priority")||(nr=nr.updatePriority(Wt.getPriority()));const Ui=Re.currentWriteId,Ho=vc(d),Wa=Af(nr,Wt,Ho);Re.currentOutputSnapshotRaw=nr,Re.currentOutputSnapshotResolved=Wa,Re.currentWriteId=Vh(d),j.splice(j.indexOf(Ui),1),I=I.concat(Ll(d.serverSyncTree_,Re.path,Wa,Re.currentWriteId,Re.applyLocally)),I=I.concat(vl(d.serverSyncTree_,Ui,!0))}else Mt=!0,kt="nodata",I=I.concat(vl(d.serverSyncTree_,Re.currentWriteId,!0))}da(d.eventQueue_,c,I),I=[],Mt&&(l[ge].status=2,setTimeout(l[ge].unwatcher,Math.floor(0)),l[ge].onComplete&&p.push("nodata"===kt?()=>l[ge].onComplete(null,!1,l[ge].currentInputSnapshot):()=>l[ge].onComplete(new Error(kt),!1,null)))}Xd(d,d.transactionQueueTree_);for(let ge=0;ge<p.length;ge++)pn(p[ge]);Uo(d,d.transactionQueueTree_)}(d,Ic(d,c),p),p}function Tu(d,l){let c,p=d.transactionQueueTree_;for(c=Zn(l);null!==c&&void 0===$o(p);)p=bu(p,c),c=Zn(l=fi(l));return p}function Ic(d,l){const c=[];return Kc(d,l,c),c.sort((p,I)=>p.order-I.order),c}function Kc(d,l,c){const p=$o(l);if(p)for(let I=0;I<p.length;I++)c.push(p[I]);Gd(l,I=>{Kc(d,I,c)})}function Xd(d,l){const c=$o(l);if(c){let p=0;for(let I=0;I<c.length;I++)2!==c[I].status&&(c[p]=c[I],p++);c.length=p,Oh(l,c.length>0?c:void 0)}Gd(l,p=>{Xd(d,p)})}function Hh(d,l){const c=$o(l);if(c){const p=[];let I=[],N=-1;for(let j=0;j<c.length;j++)3===c[j].status||(1===c[j].status?((0,It.hu)(N===j-1,"All SENT items should be at beginning of queue."),N=j,c[j].status=3,c[j].abortReason="set"):((0,It.hu)(0===c[j].status,"Unexpected transaction status in abort"),c[j].unwatcher(),I=I.concat(vl(d.serverSyncTree_,c[j].currentWriteId,!0)),c[j].onComplete&&p.push(c[j].onComplete.bind(null,new Error("set"),!1,null))));-1===N?Oh(l,void 0):c.length=N+1,da(d.eventQueue_,zd(l),I);for(let j=0;j<p.length;j++)pn(p[j])}}const Cc=function(d,l){const c=Bf(d),p=c.namespace;return"firebase.com"===c.domain&&Fi(c.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!p||"undefined"===p)&&"localhost"!==c.domain&&Fi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),c.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ri("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Jo(c.host,c.secure,p,"ws"===c.scheme||"wss"===c.scheme,l,"",p!==c.subdomain),path:new Et(c.pathString)}},Bf=function(d){let l="",c="",p="",I="",N="",j=!0,ge="https",Re=443;if("string"==typeof d){let Ge=d.indexOf("//");Ge>=0&&(ge=d.substring(0,Ge-1),d=d.substring(Ge+2));let Mt=d.indexOf("/");-1===Mt&&(Mt=d.length);let kt=d.indexOf("?");-1===kt&&(kt=d.length),l=d.substring(0,Math.min(Mt,kt)),Mt<kt&&(I=function(d){let l="";const c=d.split("/");for(let p=0;p<c.length;p++)if(c[p].length>0){let I=c[p];try{I=decodeURIComponent(I.replace(/\+/g," "))}catch(N){}l+="/"+I}return l}(d.substring(Mt,kt)));const Wt=function(d){const l={};"?"===d.charAt(0)&&(d=d.substring(1));for(const c of d.split("&")){if(0===c.length)continue;const p=c.split("=");2===p.length?l[decodeURIComponent(p[0])]=decodeURIComponent(p[1]):Ri(`Invalid query segment '${c}' in query '${d}'`)}return l}(d.substring(Math.min(d.length,kt)));Ge=l.indexOf(":"),Ge>=0?(j="https"===ge||"wss"===ge,Re=parseInt(l.substring(Ge+1),10)):Ge=l.length;const Vn=l.slice(0,Ge);if("localhost"===Vn.toLowerCase())c="localhost";else if(Vn.split(".").length<=2)c=Vn;else{const nr=l.indexOf(".");p=l.substring(0,nr).toLowerCase(),c=l.substring(nr+1),N=p}"ns"in Wt&&(N=Wt.ns)}return{host:l,port:Re,domain:c,subdomain:p,secure:j,scheme:ge,pathString:I,namespace:N}};class ps{constructor(l,c,p,I){this._repo=l,this._path=c,this._queryParams=p,this._orderByCalled=I}get key(){return ti(this._path)?null:Es(this._path)}get ref(){return new Bl(this._repo,this._path)}get _queryIdentifier(){const l=Kl(this._queryParams),c=fe(l);return"{}"===c?"default":c}get _queryObject(){return Kl(this._queryParams)}isEqual(l){if(!((l=(0,It.m9)(l))instanceof ps))return!1;const c=this._repo===l._repo,p=Ma(this._path,l._path);return c&&p&&this._queryIdentifier===l._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(d){let l="";for(let c=d.pieceNum_;c<d.pieces_.length;c++)""!==d.pieces_[c]&&(l+="/"+encodeURIComponent(String(d.pieces_[c])));return l||"/"}(this._path)}}class Bl extends ps{constructor(l,c){super(l,c,new ba,!1)}get parent(){const l=cc(this._path);return null===l?null:new Bl(this._repo,l)}get root(){let l=this;for(;null!==l.parent;)l=l.parent;return l}}(function(d){(0,It.hu)(!jd,"__referenceConstructor has already been defined"),jd=d})(Bl),function(d){(0,It.hu)(!ca,"__referenceConstructor has already been defined"),ca=d}(Bl);const Il={};class zf{constructor(l,c){this._repoInternal=l,this.app=c,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(d,l,c){if(d.stats_=Si(d.repoInfo_),d.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)d.server_=new Sl(d.repoInfo_,(p,I,N,j)=>{Ec(d,p,I,N,j)},d.authTokenProvider_,d.appCheckProvider_),setTimeout(()=>Lh(d,!0),0);else{if(null!=c){if("object"!=typeof c)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,It.Wl)(c)}catch(p){throw new Error("Invalid authOverride provided: "+p)}}d.persistentConnection_=new Qs(d.repoInfo_,l,(p,I,N,j)=>{Ec(d,p,I,N,j)},p=>{Lh(d,p)},p=>{!function(d,l){ye(l,(c,p)=>{Zd(d,c,p)})}(d,p)},d.authTokenProvider_,d.appCheckProvider_,c),d.server_=d.persistentConnection_}d.authTokenProvider_.addTokenChangeListener(p=>{d.server_.refreshAuthToken(p)}),d.appCheckProvider_.addTokenChangeListener(p=>{d.server_.refreshAppCheckToken(p.token)}),d.statsReporter_=function(d,l){const c=d.toString();return so[c]||(so[c]=l()),so[c]}(d.repoInfo_,()=>new gr(d.stats_,d.server_)),d.infoData_=new Nd,d.infoSyncTree_=new ad({startListening:(p,I,N,j)=>{let ge=[];const Re=d.infoData_.getNode(p._path);return Re.isEmpty()||(ge=gc(d.infoSyncTree_,p._path,Re),setTimeout(()=>{j("ok")},0)),ge},stopListening:()=>{}}),Zd(d,"connected",!1),d.serverSyncTree_=new ad({startListening:(p,I,N,j)=>(d.server_.listen(p,N,I,(ge,Re)=>{const Ge=j(ge,Re);da(d.eventQueue_,p._path,Ge)}),[]),stopListening:(p,I)=>{d.server_.unlisten(p,I)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Bl(this._repo,Nt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(d,l){const c=Il[l];(!c||c[d.key]!==d)&&Fi(`Database ${l}(${d.repoInfo_}) has already been deleted.`),function(d){d.persistentConnection_&&d.persistentConnection_.interrupt("repo_interrupt")}(d),delete c[d.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(l){null===this._rootInternal&&Fi("Cannot call "+l+" on a deleted database.")}}function Cy(d=(0,ms.getApp)(),l){const c=(0,ms._getProvider)(d,"database").getImmediate({identifier:l}),p=(0,It.P0)("database");return p&&function(d,l,c,p={}){(d=(0,It.m9)(d))._checkNotDeleted("useEmulator"),d._instanceStarted&&Fi("Cannot call useEmulator() after instance has already been initialized.");const I=d._repoInternal;let N;if(I.repoInfo_.nodeAdmin)p.mockUserToken&&Fi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),N=new Pr(Pr.OWNER);else if(p.mockUserToken){const j="string"==typeof p.mockUserToken?p.mockUserToken:(0,It.Sg)(p.mockUserToken,d.app.options.projectId);N=new Pr(j)}!function(d,l,c,p){d.repoInfo_=new Jo(`${l}:${c}`,!1,d.repoInfo_.namespace,d.repoInfo_.webSocketOnly,d.repoInfo_.nodeAdmin,d.repoInfo_.persistenceKey,d.repoInfo_.includeNamespaceInQueryParams),p&&(d.authTokenProvider_=p)}(I,l,c,N)}(c,...p),c}Qs.prototype.simpleListen=function(d,l){this.sendRequest("q",{p:d},l)},Qs.prototype.echo=function(d,l){this.sendRequest("echo",{d},l)},function(d){pa=d}(ms.SDK_VERSION),(0,ms._registerComponent)(new zo.wA("database",(l,{instanceIdentifier:c})=>function(d,l,c,p,I){let N=p||d.options.databaseURL;void 0===N&&(d.options.projectId||Fi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Nr("Using default host for project ",d.options.projectId),N=`${d.options.projectId}-default-rtdb.firebaseio.com`);let Re,Ge,j=Cc(N,I),ge=j.repoInfo;"undefined"!=typeof process&&process.env&&(Ge=process.env.FIREBASE_DATABASE_EMULATOR_HOST),Ge?(Re=!0,N=`http://${Ge}?ns=${ge.namespace}`,j=Cc(N,I),ge=j.repoInfo):Re=!j.repoInfo.secure;const Mt=I&&Re?new Pr(Pr.OWNER):new Ci(d.name,d.options,l);_c("Invalid Firebase Database URL",j),ti(j.path)||Fi("Database URL must point to the root of a Firebase Database (not including a child path).");const kt=function(d,l,c,p){let I=Il[l.name];I||(I={},Il[l.name]=I);let N=I[d.toURLString()];return N&&Fi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),N=new kp(d,!1,c,p),I[d.toURLString()]=N,N}(ge,d,Mt,new Li(d.name,c));return new zf(kt,d)}(l.getProvider("app").getImmediate(),l.getProvider("auth-internal"),l.getProvider("app-check-internal"),c),"PUBLIC").setMultipleInstances(!0)),(0,ms.registerVersion)(ho,"0.13.9",void 0),(0,ms.registerVersion)(ho,"0.13.9","esm2017");class Qh{constructor(l){return l}}const ch="database",Jc=new A.OlP("angularfire2.database-instances");function Id(d){return(l,c)=>{const p=l.runOutsideAngular(()=>d(c));return new Qh(p)}}const Xh={provide:class{constructor(){return(0,Zr.vb)(ch)}},deps:[[new A.FiY,Jc]]},Kf={provide:Qh,useFactory:function(d,l){const c=(0,Zr.JM)(ch,d,l);return c&&new Qh(c)},deps:[[new A.FiY,Jc],bi.Ot]};let bd=(()=>{class d{constructor(){(0,ki.KN)("angularfire",Zr.q4.full,"rtdb")}}return d.\u0275fac=function(c){return new(c||d)},d.\u0275mod=A.oAB({type:d}),d.\u0275inj=A.cJS({providers:[Kf,Xh]}),d})();function Jh(d,...l){return{ngModule:bd,providers:[{provide:Jc,useFactory:Id(d),multi:!0,deps:[A.R0b,A.zs3,Zr.HU,bi.z6,[new A.FiY,Kr.dh],[new A.FiY,is.nm],...l]}]}}const Kp=(0,Zr.u3)(Cy,!0);var tp=L(7545),sf=L(3792),np=L(6175);let rp=(()=>{class d{}return d.\u0275fac=function(c){return new(c||d)},d.\u0275mod=A.oAB({type:d}),d.\u0275inj=A.cJS({imports:[[_.ez,np.q,Vr.Pc,Dr.u5,Dr.UX]]}),d})();var sg=L(3637),ph=L(8891),Ta=L(4402),sc=L(5917),af=L(9761),wm=L(7393);function og(){return d=>d.lift(new Cd)}class Cd{call(l,c){return c.subscribe(new ag(l))}}class ag extends wm.L{constructor(l){super(l),this.hasPrev=!1}_next(l){let c;this.hasPrev?c=[this.prev,l]:this.hasPrev=!0,this.prev=l,c&&this.destination.next(c)}}var Sc=L(2145),Mu=L(7519),gh=L(5435),ll=L(8939),Tm=(L(4828),L(3394)),In=L(1304);function lf(d,l){if(void 0===l)return{merge:!1};if(void 0!==l.mergeFields&&void 0!==l.merge)throw new In.WA("invalid-argument",`Invalid options passed to function ${d}(): You cannot specify both "merge" and "mergeFields".`);return l}function cg(){if("undefined"==typeof Uint8Array)throw new In.WA("unimplemented","Uint8Arrays are not available in this environment.")}function yh(){if(!(0,In.Me)())throw new In.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class oc{constructor(l){this._delegate=l}static fromBase64String(l){return yh(),new oc(In.Jj.fromBase64String(l))}static fromUint8Array(l){return cg(),new oc(In.Jj.fromUint8Array(l))}toBase64(){return yh(),this._delegate.toBase64()}toUint8Array(){return cg(),this._delegate.toUint8Array()}isEqual(l){return this._delegate.isEqual(l._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function wd(d){return function(d,l){if("object"!=typeof d||null===d)return!1;const c=d;for(const p of["next","error","complete"])if(p in c&&"function"==typeof c[p])return!0;return!1}(d)}class sp{enableIndexedDbPersistence(l,c){return(0,In.ST)(l._delegate,{forceOwnership:c})}enableMultiTabIndexedDbPersistence(l){return(0,In.fH)(l._delegate)}clearIndexedDbPersistence(l){return(0,In.Fc)(l._delegate)}}class Pu{constructor(l,c,p){this._delegate=c,this._persistenceProvider=p,this.INTERNAL={delete:()=>this.terminate()},l instanceof In.l7||(this._appCompat=l)}get _databaseId(){return this._delegate._databaseId}settings(l){const c=this._delegate._getSettings();!l.merge&&c.host!==l.host&&(0,In.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),l.merge&&delete(l=Object.assign(Object.assign({},c),l)).merge,this._delegate._setSettings(l)}useEmulator(l,c,p={}){(0,In.at)(this._delegate,l,c,p)}enableNetwork(){return(0,In.Ix)(this._delegate)}disableNetwork(){return(0,In.TF)(this._delegate)}enablePersistence(l){let c=!1,p=!1;return l&&(c=!!l.synchronizeTabs,p=!!l.experimentalForceOwningTab,(0,In.Wi)("synchronizeTabs",c,"experimentalForceOwningTab",p)),c?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,p)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,In.Mx)(this._delegate)}onSnapshotsInSync(l){return(0,In.sc)(this._delegate,l)}get app(){if(!this._appCompat)throw new In.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(l){try{return new tu(this,(0,In.hJ)(this._delegate,l))}catch(c){throw ha(c,"collection()","Firestore.collection()")}}doc(l){try{return new Ha(this,(0,In.JU)(this._delegate,l))}catch(c){throw ha(c,"doc()","Firestore.doc()")}}collectionGroup(l){try{return new Do(this,(0,In.B$)(this._delegate,l))}catch(c){throw ha(c,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(l){return(0,In.i3)(this._delegate,c=>l(new cf(this,c)))}batch(){return(0,In.qY)(this._delegate),new Ou(new In.PU(this._delegate,l=>(0,In.GL)(this._delegate,l)))}loadBundle(l){return(0,In.Pb)(this._delegate,l)}namedQuery(l){return(0,In.L$)(this._delegate,l).then(c=>c?new Do(this,c):null)}}class Td extends In.u7{constructor(l){super(),this.firestore=l}convertBytes(l){return new oc(new In.Jj(l))}convertReference(l){const c=this.convertDocumentKey(l,this.firestore._databaseId);return Ha.forKey(c,this.firestore,null)}}class cf{constructor(l,c){this._firestore=l,this._delegate=c,this._userDataWriter=new Td(l)}get(l){const c=ku(l);return this._delegate.get(c).then(p=>new Dd(this._firestore,new In.xU(this._firestore._delegate,this._userDataWriter,p._key,p._document,p.metadata,c.converter)))}set(l,c,p){const I=ku(l);return p?(lf("Transaction.set",p),this._delegate.set(I,c,p)):this._delegate.set(I,c),this}update(l,c,p,...I){const N=ku(l);return 2===arguments.length?this._delegate.update(N,c):this._delegate.update(N,c,p,...I),this}delete(l){const c=ku(l);return this._delegate.delete(c),this}}class Ou{constructor(l){this._delegate=l}set(l,c,p){const I=ku(l);return p?(lf("WriteBatch.set",p),this._delegate.set(I,c,p)):this._delegate.set(I,c),this}update(l,c,p,...I){const N=ku(l);return 2===arguments.length?this._delegate.update(N,c):this._delegate.update(N,c,p,...I),this}delete(l){const c=ku(l);return this._delegate.delete(c),this}commit(){return this._delegate.commit()}}class Nu{constructor(l,c,p){this._firestore=l,this._userDataWriter=c,this._delegate=p}fromFirestore(l,c){const p=new In.$q(this._firestore._delegate,this._userDataWriter,l._key,l._document,l.metadata,null);return this._delegate.fromFirestore(new cl(this._firestore,p),null!=c?c:{})}toFirestore(l,c){return c?this._delegate.toFirestore(l,c):this._delegate.toFirestore(l)}static getInstance(l,c){const p=Nu.INSTANCES;let I=p.get(l);I||(I=new WeakMap,p.set(l,I));let N=I.get(c);return N||(N=new Nu(l,new Td(l),c),I.set(c,N)),N}}Nu.INSTANCES=new WeakMap;class Ha{constructor(l,c){this.firestore=l,this._delegate=c,this._userDataWriter=new Td(l)}static forPath(l,c,p){if(l.length%2!=0)throw new In.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${l.canonicalString()} has ${l.length}`);return new Ha(c,new In.my(c._delegate,p,new In.Ky(l)))}static forKey(l,c,p){return new Ha(c,new In.my(c._delegate,p,l))}get id(){return this._delegate.id}get parent(){return new tu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(l){try{return new tu(this.firestore,(0,In.hJ)(this._delegate,l))}catch(c){throw ha(c,"collection()","DocumentReference.collection()")}}isEqual(l){return(l=(0,It.m9)(l))instanceof In.my&&(0,In.Eo)(this._delegate,l)}set(l,c){c=lf("DocumentReference.set",c);try{return c?(0,In.pl)(this._delegate,l,c):(0,In.pl)(this._delegate,l)}catch(p){throw ha(p,"setDoc()","DocumentReference.set()")}}update(l,c,...p){try{return 1===arguments.length?(0,In.r7)(this._delegate,l):(0,In.r7)(this._delegate,l,c,...p)}catch(I){throw ha(I,"updateDoc()","DocumentReference.update()")}}delete(){return(0,In.oe)(this._delegate)}onSnapshot(...l){const c=es(l),p=bl(l,I=>new Dd(this.firestore,new In.xU(this.firestore._delegate,this._userDataWriter,I._key,I._document,I.metadata,this._delegate.converter)));return(0,In.cf)(this._delegate,c,p)}get(l){let c;return c="cache"===(null==l?void 0:l.source)?(0,In.kl)(this._delegate):"server"===(null==l?void 0:l.source)?(0,In.Xk)(this._delegate):(0,In.QT)(this._delegate),c.then(p=>new Dd(this.firestore,new In.xU(this.firestore._delegate,this._userDataWriter,p._key,p._document,p.metadata,this._delegate.converter)))}withConverter(l){return new Ha(this.firestore,this._delegate.withConverter(l?Nu.getInstance(this.firestore,l):null))}}function ha(d,l,c){return d.message=d.message.replace(l,c),d}function es(d){for(const l of d)if("object"==typeof l&&!wd(l))return l;return{}}function bl(d,l){var c,p;let I;return I=wd(d[0])?d[0]:wd(d[1])?d[1]:"function"==typeof d[0]?{next:d[0],error:d[1],complete:d[2]}:{next:d[1],error:d[2],complete:d[3]},{next:N=>{I.next&&I.next(l(N))},error:null===(c=I.error)||void 0===c?void 0:c.bind(I),complete:null===(p=I.complete)||void 0===p?void 0:p.bind(I)}}class Dd{constructor(l,c){this._firestore=l,this._delegate=c}get ref(){return new Ha(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(l){return this._delegate.data(l)}get(l,c){return this._delegate.get(l,c)}isEqual(l){return(0,In.qK)(this._delegate,l._delegate)}}class cl extends Dd{data(l){const c=this._delegate.data(l);return(0,In.K9)(void 0!==c,"Document in a QueryDocumentSnapshot should exist"),c}}class Do{constructor(l,c){this.firestore=l,this._delegate=c,this._userDataWriter=new Td(l)}where(l,c,p){try{return new Do(this.firestore,(0,In.IO)(this._delegate,(0,In.ar)(l,c,p)))}catch(I){throw ha(I,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(l,c){try{return new Do(this.firestore,(0,In.IO)(this._delegate,(0,In.Xo)(l,c)))}catch(p){throw ha(p,/(orderBy|where)\(\)/,"Query.$1()")}}limit(l){try{return new Do(this.firestore,(0,In.IO)(this._delegate,(0,In.b9)(l)))}catch(c){throw ha(c,"limit()","Query.limit()")}}limitToLast(l){try{return new Do(this.firestore,(0,In.IO)(this._delegate,(0,In.vh)(l)))}catch(c){throw ha(c,"limitToLast()","Query.limitToLast()")}}startAt(...l){try{return new Do(this.firestore,(0,In.IO)(this._delegate,(0,In.e0)(...l)))}catch(c){throw ha(c,"startAt()","Query.startAt()")}}startAfter(...l){try{return new Do(this.firestore,(0,In.IO)(this._delegate,(0,In.TQ)(...l)))}catch(c){throw ha(c,"startAfter()","Query.startAfter()")}}endBefore(...l){try{return new Do(this.firestore,(0,In.IO)(this._delegate,(0,In.Lx)(...l)))}catch(c){throw ha(c,"endBefore()","Query.endBefore()")}}endAt(...l){try{return new Do(this.firestore,(0,In.IO)(this._delegate,(0,In.Wu)(...l)))}catch(c){throw ha(c,"endAt()","Query.endAt()")}}isEqual(l){return(0,In.iE)(this._delegate,l._delegate)}get(l){let c;return c="cache"===(null==l?void 0:l.source)?(0,In.UQ)(this._delegate):"server"===(null==l?void 0:l.source)?(0,In.zN)(this._delegate):(0,In.PL)(this._delegate),c.then(p=>new ug(this.firestore,new In.W(this.firestore._delegate,this._userDataWriter,this._delegate,p._snapshot)))}onSnapshot(...l){const c=es(l),p=bl(l,I=>new ug(this.firestore,new In.W(this.firestore._delegate,this._userDataWriter,this._delegate,I._snapshot)));return(0,In.cf)(this._delegate,c,p)}withConverter(l){return new Do(this.firestore,this._delegate.withConverter(l?Nu.getInstance(this.firestore,l):null))}}class ap{constructor(l,c){this._firestore=l,this._delegate=c}get type(){return this._delegate.type}get doc(){return new cl(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ug{constructor(l,c){this._firestore=l,this._delegate=c}get query(){return new Do(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(l=>new cl(this._firestore,l))}docChanges(l){return this._delegate.docChanges(l).map(c=>new ap(this._firestore,c))}forEach(l,c){this._delegate.forEach(p=>{l.call(c,new cl(this._firestore,p))})}isEqual(l){return(0,In.qK)(this._delegate,l._delegate)}}class tu extends Do{constructor(l,c){super(l,c),this.firestore=l,this._delegate=c}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const l=this._delegate.parent;return l?new Ha(this.firestore,l):null}doc(l){try{return new Ha(this.firestore,void 0===l?(0,In.JU)(this._delegate):(0,In.JU)(this._delegate,l))}catch(c){throw ha(c,"doc()","CollectionReference.doc()")}}add(l){return(0,In.ET)(this._delegate,l).then(c=>new Ha(this.firestore,c))}isEqual(l){return(0,In.Eo)(this._delegate,l._delegate)}withConverter(l){return new tu(this.firestore,this._delegate.withConverter(l?Nu.getInstance(this.firestore,l):null))}}function ku(d){return(0,In.Cf)(d,In.my)}class Sd{constructor(...l){this._delegate=new In.Lz(...l)}static documentId(){return new Sd(In.Xb.keyField().canonicalString())}isEqual(l){return(l=(0,It.m9)(l))instanceof In.Lz&&this._delegate._internalPath.isEqual(l._internalPath)}}class nu{constructor(l){this._delegate=l}static serverTimestamp(){const l=(0,In.Bt)();return l._methodName="FieldValue.serverTimestamp",new nu(l)}static delete(){const l=(0,In.AK)();return l._methodName="FieldValue.delete",new nu(l)}static arrayUnion(...l){const c=(0,In.vr)(...l);return c._methodName="FieldValue.arrayUnion",new nu(c)}static arrayRemove(...l){const c=(0,In.Ab)(...l);return c._methodName="FieldValue.arrayRemove",new nu(c)}static increment(l){const c=(0,In.nP)(l);return c._methodName="FieldValue.increment",new nu(c)}isEqual(l){return this._delegate.isEqual(l._delegate)}}const uf={Firestore:Pu,GeoPoint:In.F8,Timestamp:In.EK,Blob:oc,Transaction:cf,WriteBatch:Ou,DocumentReference:Ha,DocumentSnapshot:Dd,Query:Do,QueryDocumentSnapshot:cl,QuerySnapshot:ug,CollectionReference:tu,FieldPath:Sd,FieldValue:nu,setLogLevel:function(d){(0,In.Ub)(d)},CACHE_SIZE_UNLIMITED:In.IX};!function(d){(function(d,l){d.INTERNAL.registerComponent(new zo.wA("firestore-compat",c=>((l,c)=>new Pu(l,c,new sp))(c.getProvider("app-compat").getImmediate(),c.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},uf)))})(d),d.registerVersion("@firebase/firestore-compat","0.2.1")}(Tm.Z);var cp=L(9765),Fu=L(6682),ru=L(309),Ac=L(3190),hg=L(7771),df=L(5319),fg=L(7971),up=L(8858);class dp extends cp.xQ{constructor(l=Number.POSITIVE_INFINITY,c=Number.POSITIVE_INFINITY,p){super(),this.scheduler=p,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=l<1?1:l,this._windowTime=c<1?1:c,c===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(l){if(!this.isStopped){const c=this._events;c.push(l),c.length>this._bufferSize&&c.shift()}super.next(l)}nextTimeWindow(l){this.isStopped||(this._events.push(new hp(this._getNow(),l)),this._trimBufferThenGetEvents()),super.next(l)}_subscribe(l){const c=this._infiniteTimeWindow,p=c?this._events:this._trimBufferThenGetEvents(),I=this.scheduler,N=p.length;let j;if(this.closed)throw new fg.N;if(this.isStopped||this.hasError?j=df.w.EMPTY:(this.observers.push(l),j=new up.W(this,l)),I&&l.add(l=new ru.ht(l,I)),c)for(let ge=0;ge<N&&!l.closed;ge++)l.next(p[ge]);else for(let ge=0;ge<N&&!l.closed;ge++)l.next(p[ge].value);return this.hasError?l.error(this.thrownError):this.isStopped&&l.complete(),j}_getNow(){return(this.scheduler||hg.c).now()}_trimBufferThenGetEvents(){const l=this._getNow(),c=this._bufferSize,p=this._windowTime,I=this._events,N=I.length;let j=0;for(;j<N&&!(l-I[j].time<p);)j++;return N>c&&(j=Math.max(j,N-c)),j>0&&I.splice(0,j),I}}class hp{constructor(l,c){this.time=l,this.value=c}}function pg(d,l,c){let p;return p=d&&"object"==typeof d?d:{bufferSize:d,windowTime:l,refCount:!1,scheduler:c},I=>I.lift(function({bufferSize:d=Number.POSITIVE_INFINITY,windowTime:l=Number.POSITIVE_INFINITY,refCount:c,scheduler:p}){let I,j,N=0,ge=!1,Re=!1;return function(Mt){let kt;N++,!I||ge?(ge=!1,I=new dp(d,l,p),kt=I.subscribe(this),j=Mt.subscribe({next(Wt){I.next(Wt)},error(Wt){ge=!0,I.error(Wt)},complete(){Re=!0,j=void 0,I.complete()}}),Re&&(j=void 0)):kt=I.subscribe(this),this.add(()=>{N--,kt.unsubscribe(),kt=void 0,j&&!Re&&c&&0===N&&(j.unsubscribe(),j=void 0,I=void 0)})}}(p))}var Sm=L(8049);function pp(d,l){return l?(0,Ac.w)(()=>d,l):(0,Ac.w)(()=>d)}var _h=L(3101),gp=L(7841);const gg=new A.OlP("angularfire2.auth.use-emulator"),vh=new A.OlP("angularfire2.auth.settings"),Eh=new A.OlP("angularfire2.auth.tenant-id"),mi=new A.OlP("angularfire2.auth.langugage-code"),hf=new A.OlP("angularfire2.auth.use-device-language"),mg=new A.OlP("angularfire.auth.persistence"),ul=(d,l,c,p,I,N,j,ge)=>(0,ll.cc)(`${d.name}.auth`,"AngularFireAuth",d.name,()=>{const Re=l.runOutsideAngular(()=>d.auth());if(c&&Re.useEmulator(...c),p&&(Re.tenantId=p),Re.languageCode=I,N&&Re.useDeviceLanguage(),j)for(const[Ge,Mt]of Object.entries(j))Re.settings[Ge]=Mt;return ge&&Re.setPersistence(ge),Re},[c,p,I,N,j,ge]);let Ih=(()=>{class d{constructor(c,p,I,N,j,ge,Re,Ge,Mt,kt,Wt,Vn){const nr=new cp.xQ,ri=(0,sc.of)(void 0).pipe((0,ru.QV)(j.outsideAngular),(0,Ac.w)(()=>N.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,4828)))),(0,kn.U)(()=>(0,ll.on)(c,N,p)),(0,kn.U)(Ui=>ul(Ui,N,ge,Ge,Mt,kt,Re,Wt)),pg({bufferSize:1,refCount:!1}));if((0,_.PM)(I))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,sc.of)(null);else{ri.pipe((0,Sm.P)()).subscribe();const Ho=ri.pipe((0,Ac.w)(bs=>bs.getRedirectResult().then(Wo=>Wo,()=>null)),Zr.iC,pg({bufferSize:1,refCount:!1})),Wa=ri.pipe((0,Ac.w)(bs=>new ph.y(Wo=>({unsubscribe:N.runOutsideAngular(()=>bs.onAuthStateChanged(ac=>Wo.next(ac),ac=>Wo.error(ac),()=>Wo.complete()))})))),dl=ri.pipe((0,Ac.w)(bs=>new ph.y(Wo=>({unsubscribe:N.runOutsideAngular(()=>bs.onIdTokenChanged(ac=>Wo.next(ac),ac=>Wo.error(ac),()=>Wo.complete()))}))));this.authState=Ho.pipe(pp(Wa),(0,_h.R)(j.outsideAngular),(0,ru.QV)(j.insideAngular)),this.user=Ho.pipe(pp(dl),(0,_h.R)(j.outsideAngular),(0,ru.QV)(j.insideAngular)),this.idToken=this.user.pipe((0,Ac.w)(bs=>bs?(0,Ta.D)(bs.getIdToken()):(0,sc.of)(null))),this.idTokenResult=this.user.pipe((0,Ac.w)(bs=>bs?(0,Ta.D)(bs.getIdTokenResult()):(0,sc.of)(null))),this.credential=(0,Fu.T)(Ho,nr,this.authState.pipe((0,gh.h)(bs=>!bs))).pipe((0,kn.U)(bs=>(null==bs?void 0:bs.user)?bs:null),(0,_h.R)(j.outsideAngular),(0,ru.QV)(j.insideAngular))}return(0,ll.pX)(this,ri,N,{spy:{apply:(Ui,Ho,Wa)=>{(Ui.startsWith("signIn")||Ui.startsWith("createUser"))&&Wa.then(dl=>nr.next(dl))}}})}}return d.\u0275fac=function(c){return new(c||d)(A.LFG(ll.Dh),A.LFG(ll.xv,8),A.LFG(A.Lbi),A.LFG(A.R0b),A.LFG(Zr.HU),A.LFG(gg,8),A.LFG(vh,8),A.LFG(Eh,8),A.LFG(mi,8),A.LFG(hf,8),A.LFG(mg,8),A.LFG(is.nm,8))},d.\u0275prov=A.Yz7({token:d,factory:d.\u0275fac,providedIn:"any"}),d})();function jo(d,l){return function(d,l=sg.z){return new ph.y(c=>{let p;return null!=l?l.schedule(()=>{p=d.onSnapshot({includeMetadataChanges:!0},c)}):p=d.onSnapshot({includeMetadataChanges:!0},c),()=>{null!=p&&p()}})}(d,l)}function ff(d,l){return jo(d,l).pipe((0,kn.U)(c=>({payload:c,type:"query"})))}function pf(d,l){return ff(d,l).pipe((0,af.O)(void 0),og(),(0,kn.U)(([c,p])=>{const I=p.payload.docChanges(),N=I.map(j=>({type:j.type,payload:j}));return c&&JSON.stringify(c.payload.metadata)!==JSON.stringify(p.payload.metadata)&&p.payload.docs.forEach((j,ge)=>{const Re=I.find(Mt=>Mt.doc.ref.isEqual(j.ref)),Ge=null==c?void 0:c.payload.docs.find(Mt=>Mt.ref.isEqual(j.ref));Re&&JSON.stringify(Re.doc.metadata)===JSON.stringify(j.metadata)||!Re&&Ge&&JSON.stringify(Ge.metadata)===JSON.stringify(j.metadata)||N.push({type:"modified",payload:{oldIndex:ge,newIndex:ge,type:"modified",doc:j}})}),N}))}function yg(d,l,c){return pf(d,c).pipe((0,Sc.R)((p,I)=>function(d,l,c){return l.forEach(p=>{c.indexOf(p.type)>-1&&(d=function(d,l){switch(l.type){case"added":if(!d[l.newIndex]||!d[l.newIndex].doc.ref.isEqual(l.doc.ref))return Lu(d,l.newIndex,0,l);break;case"modified":if(null==d[l.oldIndex]||d[l.oldIndex].doc.ref.isEqual(l.doc.ref)){if(l.oldIndex!==l.newIndex){const c=d.slice();return c.splice(l.oldIndex,1),c.splice(l.newIndex,0,l),c}return Lu(d,l.newIndex,1,l)}break;case"removed":if(d[l.oldIndex]&&d[l.oldIndex].doc.ref.isEqual(l.doc.ref))return Lu(d,l.oldIndex,1)}return d}(d,p))}),d}(p,I.map(N=>N.payload),l),[]),(0,Mu.x)(),(0,kn.U)(p=>p.map(I=>({type:I.type,payload:I}))))}function Lu(d,l,c,...p){const I=d.slice();return I.splice(l,c,...p),I}function Vu(d){return(!d||0===d.length)&&(d=["added","removed","modified"]),d}class Eg{constructor(l,c,p){this.ref=l,this.query=c,this.afs=p}stateChanges(l){let c=pf(this.query,this.afs.schedulers.outsideAngular);return l&&l.length>0&&(c=c.pipe((0,kn.U)(p=>p.filter(I=>l.indexOf(I.type)>-1)))),c.pipe((0,af.O)(void 0),og(),(0,gh.h)(([p,I])=>I.length>0||!p),(0,kn.U)(([p,I])=>I),Zr.iC)}auditTrail(l){return this.stateChanges(l).pipe((0,Sc.R)((c,p)=>[...c,...p],[]))}snapshotChanges(l){const c=Vu(l);return yg(this.query,c,this.afs.schedulers.outsideAngular).pipe(Zr.iC)}valueChanges(l={}){return ff(this.query,this.afs.schedulers.outsideAngular).pipe((0,kn.U)(c=>c.payload.docs.map(p=>l.idField?Object.assign(Object.assign({},p.data()),{[l.idField]:p.id}):p.data())),Zr.iC)}get(l){return(0,Ta.D)(this.query.get(l)).pipe(Zr.iC)}add(l){return this.ref.add(l)}doc(l){return new xm(this.ref.doc(l),this.afs)}}class xm{constructor(l,c){this.ref=l,this.afs=c}set(l,c){return this.ref.set(l,c)}update(l){return this.ref.update(l)}delete(){return this.ref.delete()}collection(l,c){const p=this.ref.collection(l),{ref:I,query:N}=iu(p,c);return new Eg(I,N,this.afs)}snapshotChanges(){return function(d,l){return jo(d,l).pipe((0,af.O)(void 0),og(),(0,kn.U)(([c,p])=>p.exists?(null==c?void 0:c.exists)?{payload:p,type:"modified"}:{payload:p,type:"added"}:{payload:p,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Zr.iC)}valueChanges(l={}){return this.snapshotChanges().pipe((0,kn.U)(({payload:c})=>l.idField?Object.assign(Object.assign({},c.data()),{[l.idField]:c.id}):c.data()))}get(l){return(0,Ta.D)(this.ref.get(l)).pipe(Zr.iC)}}class Rm{constructor(l,c){this.query=l,this.afs=c}stateChanges(l){return l&&0!==l.length?pf(this.query,this.afs.schedulers.outsideAngular).pipe((0,kn.U)(c=>c.filter(p=>l.indexOf(p.type)>-1)),(0,gh.h)(c=>c.length>0),Zr.iC):pf(this.query,this.afs.schedulers.outsideAngular).pipe(Zr.iC)}auditTrail(l){return this.stateChanges(l).pipe((0,Sc.R)((c,p)=>[...c,...p],[]))}snapshotChanges(l){const c=Vu(l);return yg(this.query,c,this.afs.schedulers.outsideAngular).pipe(Zr.iC)}valueChanges(l={}){return ff(this.query,this.afs.schedulers.outsideAngular).pipe((0,kn.U)(p=>p.payload.docs.map(I=>l.idField?Object.assign({[l.idField]:I.id},I.data()):I.data())),Zr.iC)}get(l){return(0,Ta.D)(this.query.get(l)).pipe(Zr.iC)}}const Ig=new A.OlP("angularfire2.enableFirestorePersistence"),bg=new A.OlP("angularfire2.firestore.persistenceSettings"),Mm=new A.OlP("angularfire2.firestore.settings"),gf=new A.OlP("angularfire2.firestore.use-emulator");function iu(d,l=(c=>c)){return{query:l(d),ref:d}}let mf=(()=>{class d{constructor(c,p,I,N,j,ge,Re,Ge,Mt,kt,Wt,Vn,nr,ri,Ui,Ho,Wa){this.schedulers=Re;const dl=(0,ll.on)(c,ge,p),bs=Mt;kt&&ul(dl,ge,Wt,nr,ri,Ui,Vn,Ho),[this.firestore,this.persistenceEnabled$]=(0,ll.cc)(`${dl.name}.firestore`,"AngularFirestore",dl.name,()=>{const Wo=ge.runOutsideAngular(()=>dl.firestore());if(N&&Wo.settings(N),bs&&Wo.useEmulator(...bs),I&&!(0,_.PM)(j)){const ac=()=>{try{return(0,Ta.D)(Wo.enablePersistence(Ge||void 0).then(()=>!0,()=>!1))}catch(Cg){return"undefined"!=typeof console&&console.warn(Cg),(0,sc.of)(!1)}};return[Wo,ge.runOutsideAngular(ac)]}return[Wo,(0,sc.of)(!1)]},[N,bs,I])}collection(c,p){let I;I="string"==typeof c?this.firestore.collection(c):c;const{ref:N,query:j}=iu(I,p),ge=this.schedulers.ngZone.run(()=>N);return new Eg(ge,j,this)}collectionGroup(c,p){const I=p||(j=>j),N=this.firestore.collectionGroup(c);return new Rm(I(N),this)}doc(c){let p;p="string"==typeof c?this.firestore.doc(c):c;const I=this.schedulers.ngZone.run(()=>p);return new xm(I,this)}createId(){return this.firestore.collection("_").doc().id}}return d.\u0275fac=function(c){return new(c||d)(A.LFG(ll.Dh),A.LFG(ll.xv,8),A.LFG(Ig,8),A.LFG(Mm,8),A.LFG(A.Lbi),A.LFG(A.R0b),A.LFG(Zr.HU),A.LFG(bg,8),A.LFG(gf,8),A.LFG(Ih,8),A.LFG(gg,8),A.LFG(vh,8),A.LFG(Eh,8),A.LFG(mi,8),A.LFG(hf,8),A.LFG(mg,8),A.LFG(is.nm,8))},d.\u0275prov=A.Yz7({token:d,factory:d.\u0275fac,providedIn:"any"}),d})(),Cl=(()=>{class d{constructor(){gp.Z.registerVersion("angularfire",Zr.q4.full,"fst-compat")}static enablePersistence(c){return{ngModule:d,providers:[{provide:Ig,useValue:!0},{provide:bg,useValue:c}]}}}return d.\u0275fac=function(c){return new(c||d)},d.\u0275mod=A.oAB({type:d}),d.\u0275inj=A.cJS({providers:[mf]}),d})(),$u=(()=>{class d{}return d.\u0275fac=function(c){return new(c||d)},d.\u0275mod=A.oAB({type:d,bootstrap:[Gi]}),d.\u0275inj=A.cJS({providers:[{provide:Or.wN,useClass:Vr.r4},ur.K,sf.O],imports:[[Pe,Vr.Pc.forRoot(),Wn,di.HomeModule,tp.LoginModule,Dr.UX,np.q,rp,Dr.u5,Cl,ll.hO.initializeApp(ws_firebase),(0,bi.hX)(()=>(0,bi.ZF)(ws_firebase)),(0,Kr.AR)(()=>(0,Kr.v0)()),Jh(()=>Kp()),(0,_i.Cm)(()=>{const l=(0,_i.ad)();return(0,_i.ST)(l),l})]]}),d})();Fe().bootstrapModule($u).catch(d=>console.error(d))},863:(Xt,it,L)=>{var _={"./ion-action-sheet.entry.js":[7321,8592,7321],"./ion-alert.entry.js":[6108,8592,6108],"./ion-app_8.entry.js":[1489,8592,1489],"./ion-avatar_3.entry.js":[305,8592,305],"./ion-back-button.entry.js":[5830,8592,5830],"./ion-backdrop.entry.js":[7757,7757],"./ion-button_2.entry.js":[392,8592,392],"./ion-card_5.entry.js":[6911,8592,6911],"./ion-checkbox.entry.js":[937,8592,937],"./ion-chip.entry.js":[8695,8592,8695],"./ion-col_3.entry.js":[6034,6034],"./ion-datetime_3.entry.js":[8837,8592,8837],"./ion-fab_3.entry.js":[4195,8592,4195],"./ion-img.entry.js":[1709,1709],"./ion-infinite-scroll_2.entry.js":[5931,8592,3087],"./ion-input.entry.js":[4513,8592,4513],"./ion-item-option_3.entry.js":[8056,8592,8056],"./ion-item_8.entry.js":[862,8592,862],"./ion-loading.entry.js":[7509,8592,7509],"./ion-menu_3.entry.js":[6272,8592,6030],"./ion-modal.entry.js":[1855,8592,1855],"./ion-nav_2.entry.js":[8708,8592,8708],"./ion-popover.entry.js":[3527,8592,3527],"./ion-progress-bar.entry.js":[4694,8592,4694],"./ion-radio_2.entry.js":[9222,8592,9222],"./ion-range.entry.js":[5277,8592,5277],"./ion-refresher_2.entry.js":[9921,8592,9921],"./ion-reorder_2.entry.js":[3122,8592,3122],"./ion-ripple-effect.entry.js":[1602,1602],"./ion-route_4.entry.js":[5174,8592,5174],"./ion-searchbar.entry.js":[7895,8592,7895],"./ion-segment_2.entry.js":[6164,8592,6164],"./ion-select_3.entry.js":[592,8592,592],"./ion-slide_2.entry.js":[7162,7162],"./ion-spinner.entry.js":[1374,8592,1374],"./ion-split-pane.entry.js":[7896,7896],"./ion-tab-bar_2.entry.js":[5043,8592,5043],"./ion-tab_2.entry.js":[7802,8592,7802],"./ion-text.entry.js":[9072,8592,9072],"./ion-textarea.entry.js":[2191,8592,2191],"./ion-toast.entry.js":[801,8592,801],"./ion-toggle.entry.js":[7110,8592,7110],"./ion-virtual-scroll.entry.js":[431,431]};function A(re){if(!L.o(_,re))return Promise.resolve().then(()=>{var _e=new Error("Cannot find module '"+re+"'");throw _e.code="MODULE_NOT_FOUND",_e});var Me=_[re],ce=Me[0];return Promise.all(Me.slice(1).map(L.e)).then(()=>L(ce))}A.keys=()=>Object.keys(_),A.id=863,Xt.exports=A},3394:(Xt,it,L)=>{"use strict";L.d(it,{Z:()=>at});var _=L(3854),A=L(3910),re=L(8026),Me=L(5422);class ce{constructor(Oe,Ye){this._delegate=Oe,this.firebase=Ye,(0,re._addComponent)(Oe,new A.wA("app-compat",()=>this,"PUBLIC")),this.container=Oe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Oe){this._delegate.automaticDataCollectionEnabled=Oe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Oe=>{this._delegate.checkDestroyed(),Oe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,re.deleteApp)(this._delegate)))}_getService(Oe,Ye=re._DEFAULT_ENTRY_NAME){var Ke;this._delegate.checkDestroyed();const $e=this._delegate.container.getProvider(Oe);return!$e.isInitialized()&&"EXPLICIT"===(null===(Ke=$e.getComponent())||void 0===Ke?void 0:Ke.instantiationMode)&&$e.initialize(),$e.getImmediate({identifier:Ye})}_removeServiceInstance(Oe,Ye=re._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Oe).clearInstance(Ye)}_addComponent(Oe){(0,re._addComponent)(this._delegate,Oe)}_addOrOverwriteComponent(Oe){(0,re._addOrOverwriteComponent)(this._delegate,Oe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ne=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ie=function Ie(){const xe=function(xe){const Oe={},Ye={__esModule:!0,initializeApp:function(E,We={}){const _t=re.initializeApp(E,We);if((0,_.r3)(Oe,_t.name))return Oe[_t.name];const Te=new xe(_t,Ye);return Oe[_t.name]=Te,Te},app:$e,registerVersion:re.registerVersion,setLogLevel:re.setLogLevel,onLog:re.onLog,apps:null,SDK_VERSION:re.SDK_VERSION,INTERNAL:{registerComponent:function(E){const We=E.name,_t=We.replace("-compat","");if(re._registerComponent(E)&&"PUBLIC"===E.type){const Te=(he=$e())=>{if("function"!=typeof he[_t])throw ne.create("invalid-app-argument",{appName:We});return he[_t]()};void 0!==E.serviceProps&&(0,_.ZB)(Te,E.serviceProps),Ye[_t]=Te,xe.prototype[_t]=function(...he){return this._getService.bind(this,We).apply(this,E.multipleInstances?he:[])}}return"PUBLIC"===E.type?Ye[_t]:null},removeApp:function(E){delete Oe[E]},useAsService:function(E,We){return"serverAuth"===We?null:We},modularAPIs:re}};function $e(E){if(!(0,_.r3)(Oe,E=E||re._DEFAULT_ENTRY_NAME))throw ne.create("no-app",{appName:E});return Oe[E]}return Ye.default=Ye,Object.defineProperty(Ye,"apps",{get:function(){return Object.keys(Oe).map(E=>Oe[E])}}),$e.App=xe,Ye}(ce);return xe.INTERNAL=Object.assign(Object.assign({},xe.INTERNAL),{createFirebaseNamespace:Ie,extendNamespace:function(Ye){(0,_.ZB)(xe,Ye)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),xe}(),ae=new Me.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==self.firebase){ae.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const xe=self.firebase.SDK_VERSION;xe&&xe.indexOf("LITE")>=0&&ae.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const at=ie;(0,re.registerVersion)("@firebase/app-compat","0.1.37",undefined)},8026:(Xt,it,L)=>{"use strict";L.r(it),L.d(it,{FirebaseError:()=>Me.ZR,SDK_VERSION:()=>br,_DEFAULT_ENTRY_NAME:()=>ze,_addComponent:()=>Ot,_addOrOverwriteComponent:()=>Yt,_apps:()=>st,_clearComponents:()=>rr,_components:()=>mt,_getProvider:()=>Ft,_registerComponent:()=>sn,_removeServiceInstance:()=>Cn,deleteApp:()=>jn,getApp:()=>wt,getApps:()=>an,initializeApp:()=>Qn,onLog:()=>Nn,registerVersion:()=>On,setLogLevel:()=>si});var _=L(8239),A=L(3910),re=L(5422),Me=L(3854),ce=L(2268);class _e{constructor(Lt){this.container=Lt}getPlatformInfoString(){return this.container.getProviders().map(Gt=>{if(function(mn){const Lt=mn.getComponent();return"VERSION"===(null==Lt?void 0:Lt.type)}(Gt)){const yn=Gt.getImmediate();return`${yn.library}/${yn.version}`}return null}).filter(Gt=>Gt).join(" ")}}const V="@firebase/app",ie=new re.Yd("@firebase/app"),ze="[DEFAULT]",nt={[V]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},st=new Map,mt=new Map;function Ot(mn,Lt){try{mn.container.addComponent(Lt)}catch(Gt){ie.debug(`Component ${Lt.name} failed to register with FirebaseApp ${mn.name}`,Gt)}}function Yt(mn,Lt){mn.container.addOrOverwriteComponent(Lt)}function sn(mn){const Lt=mn.name;if(mt.has(Lt))return ie.debug(`There were multiple attempts to register component ${Lt}.`),!1;mt.set(Lt,mn);for(const Gt of st.values())Ot(Gt,mn);return!0}function Ft(mn,Lt){const Gt=mn.container.getProvider("heartbeat").getImmediate({optional:!0});return Gt&&Gt.triggerHeartbeat(),mn.container.getProvider(Lt)}function Cn(mn,Lt,Gt=ze){Ft(mn,Lt).clearInstance(Gt)}function rr(){mt.clear()}const hn=new Me.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class dr{constructor(Lt,Gt,yn){this._isDeleted=!1,this._options=Object.assign({},Lt),this._config=Object.assign({},Gt),this._name=Gt.name,this._automaticDataCollectionEnabled=Gt.automaticDataCollectionEnabled,this._container=yn,this.container.addComponent(new A.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Lt){this.checkDestroyed(),this._automaticDataCollectionEnabled=Lt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Lt){this._isDeleted=Lt}checkDestroyed(){if(this.isDeleted)throw hn.create("app-deleted",{appName:this._name})}}const br="9.12.1";function Qn(mn,Lt={}){let Gt=mn;"object"!=typeof Lt&&(Lt={name:Lt});const yn=Object.assign({name:ze,automaticDataCollectionEnabled:!1},Lt),rn=yn.name;if("string"!=typeof rn||!rn)throw hn.create("bad-app-name",{appName:String(rn)});if(Gt||(Gt=(0,Me.aH)()),!Gt)throw hn.create("no-options");const un=st.get(rn);if(un){if((0,Me.vZ)(Gt,un.options)&&(0,Me.vZ)(yn,un.config))return un;throw hn.create("duplicate-app",{appName:rn})}const Ue=new A.H0(rn);for(const et of mt.values())Ue.addComponent(et);const ke=new dr(Gt,yn,Ue);return st.set(rn,ke),ke}function wt(mn=ze){const Lt=st.get(mn);if(!Lt&&mn===ze)return Qn();if(!Lt)throw hn.create("no-app",{appName:mn});return Lt}function an(){return Array.from(st.values())}function jn(mn){return tr.apply(this,arguments)}function tr(){return(tr=(0,_.Z)(function*(mn){const Lt=mn.name;st.has(Lt)&&(st.delete(Lt),yield Promise.all(mn.container.getProviders().map(Gt=>Gt.delete())),mn.isDeleted=!0)})).apply(this,arguments)}function On(mn,Lt,Gt){var yn;let rn=null!==(yn=nt[mn])&&void 0!==yn?yn:mn;Gt&&(rn+=`-${Gt}`);const un=rn.match(/\s|\//),Ue=Lt.match(/\s|\//);if(un||Ue){const ke=[`Unable to register library "${rn}" with version "${Lt}":`];return un&&ke.push(`library name "${rn}" contains illegal characters (whitespace or "/")`),un&&Ue&&ke.push("and"),Ue&&ke.push(`version name "${Lt}" contains illegal characters (whitespace or "/")`),void ie.warn(ke.join(" "))}sn(new A.wA(`${rn}-version`,()=>({library:rn,version:Lt}),"VERSION"))}function Nn(mn,Lt){if(null!==mn&&"function"!=typeof mn)throw hn.create("invalid-log-argument");(0,re.Am)(mn,Lt)}function si(mn){(0,re.Ub)(mn)}const Fr="firebase-heartbeat-store";let Yr=null;function Br(){return Yr||(Yr=(0,ce.X3)("firebase-heartbeat-database",1,{upgrade:(mn,Lt)=>{0===Lt&&mn.createObjectStore(Fr)}}).catch(mn=>{throw hn.create("idb-open",{originalErrorMessage:mn.message})})),Yr}function Kt(){return(Kt=(0,_.Z)(function*(mn){var Lt;try{return(yield Br()).transaction(Fr).objectStore(Fr).get(Tr(mn))}catch(Gt){if(Gt instanceof Me.ZR)ie.warn(Gt.message);else{const yn=hn.create("idb-get",{originalErrorMessage:null===(Lt=Gt)||void 0===Lt?void 0:Lt.message});ie.warn(yn.message)}}})).apply(this,arguments)}function ft(mn,Lt){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,_.Z)(function*(mn,Lt){var Gt;try{const rn=(yield Br()).transaction(Fr,"readwrite");return yield rn.objectStore(Fr).put(Lt,Tr(mn)),rn.done}catch(yn){if(yn instanceof Me.ZR)ie.warn(yn.message);else{const rn=hn.create("idb-set",{originalErrorMessage:null===(Gt=yn)||void 0===Gt?void 0:Gt.message});ie.warn(rn.message)}}})).apply(this,arguments)}function Tr(mn){return`${mn.name}!${mn.options.appId}`}class gn{constructor(Lt){this.container=Lt,this._heartbeatsCache=null;const Gt=this.container.getProvider("app").getImmediate();this._storage=new li(Gt),this._heartbeatsCachePromise=this._storage.read().then(yn=>(this._heartbeatsCache=yn,yn))}triggerHeartbeat(){var Lt=this;return(0,_.Z)(function*(){const yn=Lt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),rn=hr();if(null===Lt._heartbeatsCache&&(Lt._heartbeatsCache=yield Lt._heartbeatsCachePromise),Lt._heartbeatsCache.lastSentHeartbeatDate!==rn&&!Lt._heartbeatsCache.heartbeats.some(un=>un.date===rn))return Lt._heartbeatsCache.heartbeats.push({date:rn,agent:yn}),Lt._heartbeatsCache.heartbeats=Lt._heartbeatsCache.heartbeats.filter(un=>{const Ue=new Date(un.date).valueOf();return Date.now()-Ue<=2592e6}),Lt._storage.overwrite(Lt._heartbeatsCache)})()}getHeartbeatsHeader(){var Lt=this;return(0,_.Z)(function*(){if(null===Lt._heartbeatsCache&&(yield Lt._heartbeatsCachePromise),null===Lt._heartbeatsCache||0===Lt._heartbeatsCache.heartbeats.length)return"";const Gt=hr(),{heartbeatsToSend:yn,unsentEntries:rn}=function(mn,Lt=1024){const Gt=[];let yn=mn.slice();for(const rn of mn){const un=Gt.find(Ue=>Ue.agent===rn.agent);if(un){if(un.dates.push(rn.date),Dn(Gt)>Lt){un.dates.pop();break}}else if(Gt.push({agent:rn.agent,dates:[rn.date]}),Dn(Gt)>Lt){Gt.pop();break}yn=yn.slice(1)}return{heartbeatsToSend:Gt,unsentEntries:yn}}(Lt._heartbeatsCache.heartbeats),un=(0,Me.L)(JSON.stringify({version:2,heartbeats:yn}));return Lt._heartbeatsCache.lastSentHeartbeatDate=Gt,rn.length>0?(Lt._heartbeatsCache.heartbeats=rn,yield Lt._storage.overwrite(Lt._heartbeatsCache)):(Lt._heartbeatsCache.heartbeats=[],Lt._storage.overwrite(Lt._heartbeatsCache)),un})()}}function hr(){return(new Date).toISOString().substring(0,10)}class li{constructor(Lt){this.app=Lt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.Z)(function*(){return!!(0,Me.hl)()&&(0,Me.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Lt=this;return(0,_.Z)(function*(){return(yield Lt._canUseIndexedDBPromise)&&(yield function(mn){return Kt.apply(this,arguments)}(Lt.app))||{heartbeats:[]}})()}overwrite(Lt){var Gt=this;return(0,_.Z)(function*(){var yn;if(yield Gt._canUseIndexedDBPromise){const un=yield Gt.read();return ft(Gt.app,{lastSentHeartbeatDate:null!==(yn=Lt.lastSentHeartbeatDate)&&void 0!==yn?yn:un.lastSentHeartbeatDate,heartbeats:Lt.heartbeats})}})()}add(Lt){var Gt=this;return(0,_.Z)(function*(){var yn;if(yield Gt._canUseIndexedDBPromise){const un=yield Gt.read();return ft(Gt.app,{lastSentHeartbeatDate:null!==(yn=Lt.lastSentHeartbeatDate)&&void 0!==yn?yn:un.lastSentHeartbeatDate,heartbeats:[...un.heartbeats,...Lt.heartbeats]})}})()}}function Dn(mn){return(0,Me.L)(JSON.stringify({version:2,heartbeats:mn})).length}sn(new A.wA("platform-logger",Lt=>new _e(Lt),"PRIVATE")),sn(new A.wA("heartbeat",Lt=>new gn(Lt),"PRIVATE")),On(V,"0.8.2",""),On(V,"0.8.2","esm2017"),On("fire-js","")},3910:(Xt,it,L)=>{"use strict";L.d(it,{wA:()=>re,H0:()=>V});var _=L(8239),A=L(3854);class re{constructor(ie,ae,Ne){this.name=ie,this.instanceFactory=ae,this.type=Ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ie){return this.instantiationMode=ie,this}setMultipleInstances(ie){return this.multipleInstances=ie,this}setServiceProps(ie){return this.serviceProps=ie,this}setInstanceCreatedCallback(ie){return this.onInstanceCreated=ie,this}}const Me="[DEFAULT]";class ce{constructor(ie,ae){this.name=ie,this.container=ae,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ie){const ae=this.normalizeInstanceIdentifier(ie);if(!this.instancesDeferred.has(ae)){const Ne=new A.BH;if(this.instancesDeferred.set(ae,Ne),this.isInitialized(ae)||this.shouldAutoInitialize())try{const le=this.getOrInitializeService({instanceIdentifier:ae});le&&Ne.resolve(le)}catch(le){}}return this.instancesDeferred.get(ae).promise}getImmediate(ie){var ae;const Ne=this.normalizeInstanceIdentifier(null==ie?void 0:ie.identifier),le=null!==(ae=null==ie?void 0:ie.optional)&&void 0!==ae&&ae;if(!this.isInitialized(Ne)&&!this.shouldAutoInitialize()){if(le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ne})}catch(Ee){if(le)return null;throw Ee}}getComponent(){return this.component}setComponent(ie){if(ie.name!==this.name)throw Error(`Mismatching Component ${ie.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ie,this.shouldAutoInitialize()){if("EAGER"===ie.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:Me})}catch(ae){}for(const[ae,Ne]of this.instancesDeferred.entries()){const le=this.normalizeInstanceIdentifier(ae);try{const Ee=this.getOrInitializeService({instanceIdentifier:le});Ne.resolve(Ee)}catch(Ee){}}}}clearInstance(ie=Me){this.instancesDeferred.delete(ie),this.instancesOptions.delete(ie),this.instances.delete(ie)}delete(){var ie=this;return(0,_.Z)(function*(){const ae=Array.from(ie.instances.values());yield Promise.all([...ae.filter(Ne=>"INTERNAL"in Ne).map(Ne=>Ne.INTERNAL.delete()),...ae.filter(Ne=>"_delete"in Ne).map(Ne=>Ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ie=Me){return this.instances.has(ie)}getOptions(ie=Me){return this.instancesOptions.get(ie)||{}}initialize(ie={}){const{options:ae={}}=ie,Ne=this.normalizeInstanceIdentifier(ie.instanceIdentifier);if(this.isInitialized(Ne))throw Error(`${this.name}(${Ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const le=this.getOrInitializeService({instanceIdentifier:Ne,options:ae});for(const[Ee,at]of this.instancesDeferred.entries())Ne===this.normalizeInstanceIdentifier(Ee)&&at.resolve(le);return le}onInit(ie,ae){var Ne;const le=this.normalizeInstanceIdentifier(ae),Ee=null!==(Ne=this.onInitCallbacks.get(le))&&void 0!==Ne?Ne:new Set;Ee.add(ie),this.onInitCallbacks.set(le,Ee);const at=this.instances.get(le);return at&&ie(at,le),()=>{Ee.delete(ie)}}invokeOnInitCallbacks(ie,ae){const Ne=this.onInitCallbacks.get(ae);if(Ne)for(const le of Ne)try{le(ie,ae)}catch(Ee){}}getOrInitializeService({instanceIdentifier:ie,options:ae={}}){let Ne=this.instances.get(ie);if(!Ne&&this.component&&(Ne=this.component.instanceFactory(this.container,{instanceIdentifier:(Ie=ie,Ie===Me?void 0:Ie),options:ae}),this.instances.set(ie,Ne),this.instancesOptions.set(ie,ae),this.invokeOnInitCallbacks(Ne,ie),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ie,Ne)}catch(le){}var Ie;return Ne||null}normalizeInstanceIdentifier(ie=Me){return this.component?this.component.multipleInstances?ie:Me:ie}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class V{constructor(ie){this.name=ie,this.providers=new Map}addComponent(ie){const ae=this.getProvider(ie.name);if(ae.isComponentSet())throw new Error(`Component ${ie.name} has already been registered with ${this.name}`);ae.setComponent(ie)}addOrOverwriteComponent(ie){this.getProvider(ie.name).isComponentSet()&&this.providers.delete(ie.name),this.addComponent(ie)}getProvider(ie){if(this.providers.has(ie))return this.providers.get(ie);const ae=new ce(ie,this);return this.providers.set(ie,ae),ae}getProviders(){return Array.from(this.providers.values())}}},5422:(Xt,it,L)=>{"use strict";L.d(it,{in:()=>A,Yd:()=>ne,Ub:()=>V,Am:()=>Ie});const _=[];var A=(()=>{return(ie=A||(A={}))[ie.DEBUG=0]="DEBUG",ie[ie.VERBOSE=1]="VERBOSE",ie[ie.INFO=2]="INFO",ie[ie.WARN=3]="WARN",ie[ie.ERROR=4]="ERROR",ie[ie.SILENT=5]="SILENT",A;var ie})();const re={debug:A.DEBUG,verbose:A.VERBOSE,info:A.INFO,warn:A.WARN,error:A.ERROR,silent:A.SILENT},Me=A.INFO,ce={[A.DEBUG]:"log",[A.VERBOSE]:"log",[A.INFO]:"info",[A.WARN]:"warn",[A.ERROR]:"error"},_e=(ie,ae,...Ne)=>{if(ae<ie.logLevel)return;const le=(new Date).toISOString(),Ee=ce[ae];if(!Ee)throw new Error(`Attempted to log a message with an invalid logType (value: ${ae})`);console[Ee](`[${le}]  ${ie.name}:`,...Ne)};class ne{constructor(ae){this.name=ae,this._logLevel=Me,this._logHandler=_e,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(ae){if(!(ae in A))throw new TypeError(`Invalid value "${ae}" assigned to \`logLevel\``);this._logLevel=ae}setLogLevel(ae){this._logLevel="string"==typeof ae?re[ae]:ae}get logHandler(){return this._logHandler}set logHandler(ae){if("function"!=typeof ae)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ae}get userLogHandler(){return this._userLogHandler}set userLogHandler(ae){this._userLogHandler=ae}debug(...ae){this._userLogHandler&&this._userLogHandler(this,A.DEBUG,...ae),this._logHandler(this,A.DEBUG,...ae)}log(...ae){this._userLogHandler&&this._userLogHandler(this,A.VERBOSE,...ae),this._logHandler(this,A.VERBOSE,...ae)}info(...ae){this._userLogHandler&&this._userLogHandler(this,A.INFO,...ae),this._logHandler(this,A.INFO,...ae)}warn(...ae){this._userLogHandler&&this._userLogHandler(this,A.WARN,...ae),this._logHandler(this,A.WARN,...ae)}error(...ae){this._userLogHandler&&this._userLogHandler(this,A.ERROR,...ae),this._logHandler(this,A.ERROR,...ae)}}function V(ie){_.forEach(ae=>{ae.setLogLevel(ie)})}function Ie(ie,ae){for(const Ne of _){let le=null;ae&&ae.level&&(le=re[ae.level]),Ne.userLogHandler=null===ie?null:(Ee,at,...xe)=>{const Oe=xe.map(Ye=>{if(null==Ye)return null;if("string"==typeof Ye)return Ye;if("number"==typeof Ye||"boolean"==typeof Ye)return Ye.toString();if(Ye instanceof Error)return Ye.message;try{return JSON.stringify(Ye)}catch(Ke){return null}}).filter(Ye=>Ye).join(" ");at>=(null!=le?le:Ee.logLevel)&&ie({level:A[at].toLowerCase(),message:Oe,args:xe,type:Ee.name})}}}},2268:(Xt,it,L)=>{"use strict";L.d(it,{Lj:()=>He,X3:()=>$e});var _=L(8239);let re,Me;const ne=new WeakMap,V=new WeakMap,Ie=new WeakMap,ie=new WeakMap,ae=new WeakMap;let Ee={get(We,_t,Te){if(We instanceof IDBTransaction){if("done"===_t)return V.get(We);if("objectStoreNames"===_t)return We.objectStoreNames||Ie.get(We);if("store"===_t)return Te.objectStoreNames[1]?void 0:Te.objectStore(Te.objectStoreNames[0])}return Ye(We[_t])},set:(We,_t,Te)=>(We[_t]=Te,!0),has:(We,_t)=>We instanceof IDBTransaction&&("done"===_t||"store"===_t)||_t in We};function Oe(We){return"function"==typeof We?function(We){return We!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Me||(Me=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(We)?function(..._t){return We.apply(Ke(this),_t),Ye(ne.get(this))}:function(..._t){return Ye(We.apply(Ke(this),_t))}:function(_t,...Te){const he=We.call(Ke(this),_t,...Te);return Ie.set(he,_t.sort?_t.sort():[_t]),Ye(he)}}(We):(We instanceof IDBTransaction&&function(We){if(V.has(We))return;const _t=new Promise((Te,he)=>{const we=()=>{We.removeEventListener("complete",qe),We.removeEventListener("error",Ve),We.removeEventListener("abort",Ve)},qe=()=>{Te(),we()},Ve=()=>{he(We.error||new DOMException("AbortError","AbortError")),we()};We.addEventListener("complete",qe),We.addEventListener("error",Ve),We.addEventListener("abort",Ve)});V.set(We,_t)}(We),((We,_t)=>_t.some(Te=>We instanceof Te))(We,re||(re=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(We,Ee):We)}function Ye(We){if(We instanceof IDBRequest)return function(We){const _t=new Promise((Te,he)=>{const we=()=>{We.removeEventListener("success",qe),We.removeEventListener("error",Ve)},qe=()=>{Te(Ye(We.result)),we()},Ve=()=>{he(We.error),we()};We.addEventListener("success",qe),We.addEventListener("error",Ve)});return _t.then(Te=>{Te instanceof IDBCursor&&ne.set(Te,We)}).catch(()=>{}),ae.set(_t,We),_t}(We);if(ie.has(We))return ie.get(We);const _t=Oe(We);return _t!==We&&(ie.set(We,_t),ae.set(_t,We)),_t}const Ke=We=>ae.get(We);function $e(We,_t,{blocked:Te,upgrade:he,blocking:we,terminated:qe}={}){const Ve=indexedDB.open(We,_t),ot=Ye(Ve);return he&&Ve.addEventListener("upgradeneeded",je=>{he(Ye(Ve.result),je.oldVersion,je.newVersion,Ye(Ve.transaction))}),Te&&Ve.addEventListener("blocked",()=>Te()),ot.then(je=>{qe&&je.addEventListener("close",()=>qe()),we&&je.addEventListener("versionchange",()=>we())}).catch(()=>{}),ot}function He(We,{blocked:_t}={}){const Te=indexedDB.deleteDatabase(We);return _t&&Te.addEventListener("blocked",()=>_t()),Ye(Te).then(()=>{})}const gt=["get","getKey","getAll","getAllKeys","count"],ct=["put","add","delete","clear"],bt=new Map;function E(We,_t){if(!(We instanceof IDBDatabase)||_t in We||"string"!=typeof _t)return;if(bt.get(_t))return bt.get(_t);const Te=_t.replace(/FromIndex$/,""),he=_t!==Te,we=ct.includes(Te);if(!(Te in(he?IDBIndex:IDBObjectStore).prototype)||!we&&!gt.includes(Te))return;const qe=function(){var Ve=(0,_.Z)(function*(ot,...je){const Ae=this.transaction(ot,we?"readwrite":"readonly");let ze=Ae.store;return he&&(ze=ze.index(je.shift())),(yield Promise.all([ze[Te](...je),we&&Ae.done]))[0]});return function(je){return Ve.apply(this,arguments)}}();return bt.set(_t,qe),qe}var We;Ee=Hb(jb({},We=Ee),{get:(_t,Te,he)=>E(_t,Te)||We.get(_t,Te,he),has:(_t,Te)=>!!E(_t,Te)||We.has(_t,Te)})},8239:(Xt,it,L)=>{"use strict";function _(re,Me,ce,_e,ne,V,Ie){try{var ie=re[V](Ie),ae=ie.value}catch(Ne){return void ce(Ne)}ie.done?Me(ae):Promise.resolve(ae).then(_e,ne)}function A(re){return function(){var Me=this,ce=arguments;return new Promise(function(_e,ne){var V=re.apply(Me,ce);function Ie(ae){_(V,_e,ne,Ie,ie,"next",ae)}function ie(ae){_(V,_e,ne,Ie,ie,"throw",ae)}Ie(void 0)})}}L.d(it,{Z:()=>A})}},Xt=>{Xt(Xt.s=7073)}]);
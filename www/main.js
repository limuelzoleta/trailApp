var BA=Object.defineProperty,$A=Object.defineProperties,UA=Object.getOwnPropertyDescriptors,Fb=Object.getOwnPropertySymbols,jA=Object.prototype.hasOwnProperty,HA=Object.prototype.propertyIsEnumerable,Lb=(nn,ot,L)=>ot in nn?BA(nn,ot,{enumerable:!0,configurable:!0,writable:!0,value:L}):nn[ot]=L,Vb=(nn,ot)=>{for(var L in ot||(ot={}))jA.call(ot,L)&&Lb(nn,L,ot[L]);if(Fb)for(var L of Fb(ot))HA.call(ot,L)&&Lb(nn,L,ot[L]);return nn},Bb=(nn,ot)=>$A(nn,UA(ot));(self.webpackChunktrail_app=self.webpackChunktrail_app||[]).push([[179],{8255:nn=>{function ot(L){return Promise.resolve().then(()=>{var _=new Error("Cannot find module '"+L+"'");throw _.code="MODULE_NOT_FOUND",_})}ot.keys=()=>[],ot.resolve=ot,ot.id=8255,nn.exports=ot},3796:(nn,ot,L)=>{"use strict";L.d(ot,{Uw:()=>Ke,fo:()=>De});var _=L(8239);"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global&&global;var ne=(()=>{return(We=ne||(ne={})).Unimplemented="UNIMPLEMENTED",We.Unavailable="UNAVAILABLE",ne;var We})();class we extends Error{constructor(He,Ge,ht){super(He),this.message=He,this.code=Ge,this.data=ht}}const ge=We=>{var He,Ge,ht,vt,Ht;const Zt=We.CapacitorCustomPlatform||null,dt=We.Capacitor||{},Ct=dt.Plugins=dt.Plugins||{},st=We.CapacitorPlatforms,lt=(null===(He=null==st?void 0:st.currentPlatform)||void 0===He?void 0:He.getPlatform)||(()=>null!==Zt?Zt.name:(We=>{var He,Ge;return(null==We?void 0:We.androidBridge)?"android":(null===(Ge=null===(He=null==We?void 0:We.webkit)||void 0===He?void 0:He.messageHandlers)||void 0===Ge?void 0:Ge.bridge)?"ios":"web"})(We)),Bt=(null===(Ge=null==st?void 0:st.currentPlatform)||void 0===Ge?void 0:Ge.isNativePlatform)||(()=>"web"!==lt()),Pt=(null===(ht=null==st?void 0:st.currentPlatform)||void 0===ht?void 0:ht.isPluginAvailable)||(Ot=>{const En=Mn.get(Ot);return!(!(null==En?void 0:En.platforms.has(lt()))&&!kn(Ot))}),kn=(null===(vt=null==st?void 0:st.currentPlatform)||void 0===vt?void 0:vt.getPluginHeader)||(Ot=>{var En;return null===(En=dt.PluginHeaders)||void 0===En?void 0:En.find(Wn=>Wn.name===Ot)}),Mn=new Map,ur=(null===(Ht=null==st?void 0:st.currentPlatform)||void 0===Ht?void 0:Ht.registerPlugin)||((Ot,En={})=>{const Wn=Mn.get(Ot);if(Wn)return console.warn(`Capacitor plugin "${Ot}" already registered. Cannot register plugins twice.`),Wn.proxy;const tn=lt(),Un=kn(Ot);let jn;const Qn=function(){var Qt=(0,_.Z)(function*(){return!jn&&tn in En?jn=jn="function"==typeof En[tn]?yield En[tn]():En[tn]:null!==Zt&&!jn&&"web"in En&&(jn=jn="function"==typeof En.web?yield En.web():En.web),jn});return function(){return Qt.apply(this,arguments)}}(),Ar=Qt=>{let wt;const xr=(...Or)=>{const fn=Qn().then(Sn=>{const cr=((Qt,wt)=>{var xr,Or;if(!Un){if(Qt)return null===(Or=Qt[wt])||void 0===Or?void 0:Or.bind(Qt);throw new we(`"${Ot}" plugin is not implemented on ${tn}`,ne.Unimplemented)}{const fn=null==Un?void 0:Un.methods.find(Sn=>wt===Sn.name);if(fn)return"promise"===fn.rtype?Sn=>dt.nativePromise(Ot,wt.toString(),Sn):(Sn,cr)=>dt.nativeCallback(Ot,wt.toString(),Sn,cr);if(Qt)return null===(xr=Qt[wt])||void 0===xr?void 0:xr.bind(Qt)}})(Sn,Qt);if(cr){const dr=cr(...Or);return wt=null==dr?void 0:dr.remove,dr}throw new we(`"${Ot}.${Qt}()" is not implemented on ${tn}`,ne.Unimplemented)});return"addListener"===Qt&&(fn.remove=(0,_.Z)(function*(){return wt()})),fn};return xr.toString=()=>`${Qt.toString()}() { [capacitor code] }`,Object.defineProperty(xr,"name",{value:Qt,writable:!1,configurable:!1}),xr},Dr=Ar("addListener"),hr=Ar("removeListener"),ri=(Qt,wt)=>{const xr=Dr({eventName:Qt},wt),Or=function(){var Sn=(0,_.Z)(function*(){const cr=yield xr;hr({eventName:Qt,callbackId:cr},wt)});return function(){return Sn.apply(this,arguments)}}(),fn=new Promise(Sn=>xr.then(()=>Sn({remove:Or})));return fn.remove=(0,_.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield Or()}),fn},sr=new Proxy({},{get(Qt,wt){switch(wt){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return Un?ri:Dr;case"removeListener":return hr;default:return Ar(wt)}}});return Ct[Ot]=sr,Mn.set(Ot,{name:Ot,proxy:sr,platforms:new Set([...Object.keys(En),...Un?[tn]:[]])}),sr});return dt.convertFileSrc||(dt.convertFileSrc=Ot=>Ot),dt.getPlatform=lt,dt.handleError=Ot=>We.console.error(Ot),dt.isNativePlatform=Bt,dt.isPluginAvailable=Pt,dt.pluginMethodNoop=(Ot,En,Wn)=>Promise.reject(`${Wn} does not have an implementation of "${En}".`),dt.registerPlugin=ur,dt.Exception=we,dt.DEBUG=!!dt.DEBUG,dt.isLoggingEnabled=!!dt.isLoggingEnabled,dt.platform=dt.getPlatform(),dt.isNative=dt.isNativePlatform(),dt},_e=(We=>We.Capacitor=ge(We))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),De=_e.registerPlugin;class Ke{constructor(He){this.listeners={},this.windowListeners={},He&&(console.warn(`Capacitor WebPlugin "${He.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=He)}addListener(He,Ge){var ht=this;this.listeners[He]||(this.listeners[He]=[]),this.listeners[He].push(Ge);const Ht=this.windowListeners[He];Ht&&!Ht.registered&&this.addWindowListener(Ht);const Zt=function(){var Ct=(0,_.Z)(function*(){return ht.removeListener(He,Ge)});return function(){return Ct.apply(this,arguments)}}(),dt=Promise.resolve({remove:Zt});return Object.defineProperty(dt,"remove",{value:(Ct=(0,_.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield Zt()}),function(){return Ct.apply(this,arguments)})}),dt;var Ct}removeAllListeners(){var He=this;return(0,_.Z)(function*(){He.listeners={};for(const Ge in He.windowListeners)He.removeWindowListener(He.windowListeners[Ge]);He.windowListeners={}})()}notifyListeners(He,Ge){const ht=this.listeners[He];ht&&ht.forEach(vt=>vt(Ge))}hasListeners(He){return!!this.listeners[He].length}registerWindowListener(He,Ge){this.windowListeners[Ge]={registered:!1,windowEventName:He,pluginEventName:Ge,handler:ht=>{this.notifyListeners(Ge,ht)}}}unimplemented(He="not implemented"){return new _e.Exception(He,ne.Unimplemented)}unavailable(He="not available"){return new _e.Exception(He,ne.Unavailable)}removeListener(He,Ge){var ht=this;return(0,_.Z)(function*(){const vt=ht.listeners[He];if(!vt)return;const Ht=vt.indexOf(Ge);ht.listeners[He].splice(Ht,1),ht.listeners[He].length||ht.removeWindowListener(ht.windowListeners[He])})()}addWindowListener(He){window.addEventListener(He.windowEventName,He.handler),He.registered=!0}removeWindowListener(He){!He||(window.removeEventListener(He.windowEventName,He.handler),He.registered=!1)}}const qe=We=>encodeURIComponent(We).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);class Ie extends Ke{setCookie(He){return(0,_.Z)(function*(){try{const Ge=qe(He.key),ht=qe(He.value),vt=`; expires=${(He.expires||"").replace("expires=","")}`,Ht=(He.path||"/").replace("path=","");document.cookie=`${Ge}=${ht||""}${vt}; path=${Ht}`}catch(Ge){return Promise.reject(Ge)}})()}deleteCookie(He){return(0,_.Z)(function*(){try{document.cookie=`${He.key}=; Max-Age=0`}catch(Ge){return Promise.reject(Ge)}})()}clearCookies(){return(0,_.Z)(function*(){try{const He=document.cookie.split(";")||[];for(const Ge of He)document.cookie=Ge.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(He){return Promise.reject(He)}})()}clearAllCookies(){var He=this;return(0,_.Z)(function*(){try{yield He.clearCookies()}catch(Ge){return Promise.reject(Ge)}})()}}De("CapacitorCookies",{web:()=>new Ie});const ct=function(){var We=(0,_.Z)(function*(He){return new Promise((Ge,ht)=>{const vt=new FileReader;vt.onload=()=>{const Ht=vt.result;Ge(Ht.indexOf(",")>=0?Ht.split(",")[1]:Ht)},vt.onerror=Ht=>ht(Ht),vt.readAsDataURL(He)})});return function(Ge){return We.apply(this,arguments)}}();class Ye extends Ke{request(He){return(0,_.Z)(function*(){const Ge=((We,He={})=>{const Ge=Object.assign({method:We.method||"GET",headers:We.headers},He),vt=((We={})=>{const He=Object.keys(We);return Object.keys(We).map(vt=>vt.toLocaleLowerCase()).reduce((vt,Ht,Zt)=>(vt[Ht]=We[He[Zt]],vt),{})})(We.headers)["content-type"]||"";if("string"==typeof We.data)Ge.body=We.data;else if(vt.includes("application/x-www-form-urlencoded")){const Ht=new URLSearchParams;for(const[Zt,dt]of Object.entries(We.data||{}))Ht.set(Zt,dt);Ge.body=Ht.toString()}else if(vt.includes("multipart/form-data")){const Ht=new FormData;if(We.data instanceof FormData)We.data.forEach((dt,Ct)=>{Ht.append(Ct,dt)});else for(const dt of Object.keys(We.data))Ht.append(dt,We.data[dt]);Ge.body=Ht;const Zt=new Headers(Ge.headers);Zt.delete("content-type"),Ge.headers=Zt}else(vt.includes("application/json")||"object"==typeof We.data)&&(Ge.body=JSON.stringify(We.data));return Ge})(He,He.webFetchExtra),ht=((We,He=!0)=>We?Object.entries(We).reduce((ht,vt)=>{const[Ht,Zt]=vt;let dt,Ct;return Array.isArray(Zt)?(Ct="",Zt.forEach(st=>{dt=He?encodeURIComponent(st):st,Ct+=`${Ht}=${dt}&`}),Ct.slice(0,-1)):(dt=He?encodeURIComponent(Zt):Zt,Ct=`${Ht}=${dt}`),`${ht}&${Ct}`},"").substr(1):null)(He.params,He.shouldEncodeUrlParams),vt=ht?`${He.url}?${ht}`:He.url,Ht=yield fetch(vt,Ge),Zt=Ht.headers.get("content-type")||"";let Ct,st,{responseType:dt="text"}=Ht.ok?He:{};switch(Zt.includes("application/json")&&(dt="json"),dt){case"arraybuffer":case"blob":st=yield Ht.blob(),Ct=yield ct(st);break;case"json":Ct=yield Ht.json();break;default:Ct=yield Ht.text()}const Ue={};return Ht.headers.forEach((lt,Dt)=>{Ue[Dt]=lt}),{data:Ct,headers:Ue,status:Ht.status,url:Ht.url}})()}get(He){var Ge=this;return(0,_.Z)(function*(){return Ge.request(Object.assign(Object.assign({},He),{method:"GET"}))})()}post(He){var Ge=this;return(0,_.Z)(function*(){return Ge.request(Object.assign(Object.assign({},He),{method:"POST"}))})()}put(He){var Ge=this;return(0,_.Z)(function*(){return Ge.request(Object.assign(Object.assign({},He),{method:"PUT"}))})()}patch(He){var Ge=this;return(0,_.Z)(function*(){return Ge.request(Object.assign(Object.assign({},He),{method:"PATCH"}))})()}delete(He){var Ge=this;return(0,_.Z)(function*(){return Ge.request(Object.assign(Object.assign({},He),{method:"DELETE"}))})()}}De("CapacitorHttp",{web:()=>new Ye})},8583:(nn,ot,L)=>{"use strict";L.d(ot,{mr:()=>qe,ez:()=>Xs,K0:()=>Z,Do:()=>Me,V_:()=>se,Ye:()=>ct,S$:()=>Ke,mk:()=>Yi,sg:()=>Sr,O5:()=>z,b0:()=>Ie,lw:()=>ne,EM:()=>Zi,JF:()=>Qi,PM:()=>di,w_:()=>Q,bD:()=>is,q:()=>re,Mx:()=>Br,HT:()=>ae});var _=L(7716);let P=null;function re(){return P}function ae(G){P||(P=G)}class Q{}const Z=new _.OlP("DocumentToken");let ne=(()=>{class G{historyGo(K){throw new Error("Not implemented")}}return G.\u0275fac=function(K){return new(K||G)},G.\u0275prov=(0,_.Yz7)({factory:we,token:G,providedIn:"platform"}),G})();function we(){return(0,_.LFG)(ge)}const se=new _.OlP("Location Initialized");let ge=(()=>{class G extends ne{constructor(K){super(),this._doc=K,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return re().getBaseHref(this._doc)}onPopState(K){const Ce=re().getGlobalEventTarget(this._doc,"window");return Ce.addEventListener("popstate",K,!1),()=>Ce.removeEventListener("popstate",K)}onHashChange(K){const Ce=re().getGlobalEventTarget(this._doc,"window");return Ce.addEventListener("hashchange",K,!1),()=>Ce.removeEventListener("hashchange",K)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(K){this.location.pathname=K}pushState(K,Ce,ze){Ee()?this._history.pushState(K,Ce,ze):this.location.hash=ze}replaceState(K,Ce,ze){Ee()?this._history.replaceState(K,Ce,ze):this.location.hash=ze}forward(){this._history.forward()}back(){this._history.back()}historyGo(K=0){this._history.go(K)}getState(){return this._history.state}}return G.\u0275fac=function(K){return new(K||G)(_.LFG(Z))},G.\u0275prov=(0,_.Yz7)({factory:_e,token:G,providedIn:"platform"}),G})();function Ee(){return!!window.history.pushState}function _e(){return new ge((0,_.LFG)(Z))}function De(G,le){if(0==G.length)return le;if(0==le.length)return G;let K=0;return G.endsWith("/")&&K++,le.startsWith("/")&&K++,2==K?G+le.substring(1):1==K?G+le:G+"/"+le}function ut(G){const le=G.match(/#|\?|$/),K=le&&le.index||G.length;return G.slice(0,K-("/"===G[K-1]?1:0))+G.slice(K)}function Te(G){return G&&"?"!==G[0]?"?"+G:G}let Ke=(()=>{class G{historyGo(K){throw new Error("Not implemented")}}return G.\u0275fac=function(K){return new(K||G)},G.\u0275prov=(0,_.Yz7)({factory:$e,token:G,providedIn:"root"}),G})();function $e(G){const le=(0,_.LFG)(Z).location;return new Ie((0,_.LFG)(ne),le&&le.origin||"")}const qe=new _.OlP("appBaseHref");let Ie=(()=>{class G extends Ke{constructor(K,Ce){if(super(),this._platformLocation=K,this._removeListenerFns=[],null==Ce&&(Ce=this._platformLocation.getBaseHrefFromDOM()),null==Ce)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=Ce}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(K){this._removeListenerFns.push(this._platformLocation.onPopState(K),this._platformLocation.onHashChange(K))}getBaseHref(){return this._baseHref}prepareExternalUrl(K){return De(this._baseHref,K)}path(K=!1){const Ce=this._platformLocation.pathname+Te(this._platformLocation.search),ze=this._platformLocation.hash;return ze&&K?`${Ce}${ze}`:Ce}pushState(K,Ce,ze,kt){const an=this.prepareExternalUrl(ze+Te(kt));this._platformLocation.pushState(K,Ce,an)}replaceState(K,Ce,ze,kt){const an=this.prepareExternalUrl(ze+Te(kt));this._platformLocation.replaceState(K,Ce,an)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(K=0){var Ce,ze;null===(ze=(Ce=this._platformLocation).historyGo)||void 0===ze||ze.call(Ce,K)}}return G.\u0275fac=function(K){return new(K||G)(_.LFG(ne),_.LFG(qe,8))},G.\u0275prov=_.Yz7({token:G,factory:G.\u0275fac}),G})(),Me=(()=>{class G extends Ke{constructor(K,Ce){super(),this._platformLocation=K,this._baseHref="",this._removeListenerFns=[],null!=Ce&&(this._baseHref=Ce)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(K){this._removeListenerFns.push(this._platformLocation.onPopState(K),this._platformLocation.onHashChange(K))}getBaseHref(){return this._baseHref}path(K=!1){let Ce=this._platformLocation.hash;return null==Ce&&(Ce="#"),Ce.length>0?Ce.substring(1):Ce}prepareExternalUrl(K){const Ce=De(this._baseHref,K);return Ce.length>0?"#"+Ce:Ce}pushState(K,Ce,ze,kt){let an=this.prepareExternalUrl(ze+Te(kt));0==an.length&&(an=this._platformLocation.pathname),this._platformLocation.pushState(K,Ce,an)}replaceState(K,Ce,ze,kt){let an=this.prepareExternalUrl(ze+Te(kt));0==an.length&&(an=this._platformLocation.pathname),this._platformLocation.replaceState(K,Ce,an)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(K=0){var Ce,ze;null===(ze=(Ce=this._platformLocation).historyGo)||void 0===ze||ze.call(Ce,K)}}return G.\u0275fac=function(K){return new(K||G)(_.LFG(ne),_.LFG(qe,8))},G.\u0275prov=_.Yz7({token:G,factory:G.\u0275fac}),G})(),ct=(()=>{class G{constructor(K,Ce){this._subject=new _.vpe,this._urlChangeListeners=[],this._platformStrategy=K;const ze=this._platformStrategy.getBaseHref();this._platformLocation=Ce,this._baseHref=ut(E(ze)),this._platformStrategy.onPopState(kt=>{this._subject.emit({url:this.path(!0),pop:!0,state:kt.state,type:kt.type})})}path(K=!1){return this.normalize(this._platformStrategy.path(K))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(K,Ce=""){return this.path()==this.normalize(K+Te(Ce))}normalize(K){return G.stripTrailingSlash(function(G,le){return G&&le.startsWith(G)?le.substring(G.length):le}(this._baseHref,E(K)))}prepareExternalUrl(K){return K&&"/"!==K[0]&&(K="/"+K),this._platformStrategy.prepareExternalUrl(K)}go(K,Ce="",ze=null){this._platformStrategy.pushState(ze,"",K,Ce),this._notifyUrlChangeListeners(this.prepareExternalUrl(K+Te(Ce)),ze)}replaceState(K,Ce="",ze=null){this._platformStrategy.replaceState(ze,"",K,Ce),this._notifyUrlChangeListeners(this.prepareExternalUrl(K+Te(Ce)),ze)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(K=0){var Ce,ze;null===(ze=(Ce=this._platformStrategy).historyGo)||void 0===ze||ze.call(Ce,K)}onUrlChange(K){this._urlChangeListeners.push(K),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Ce=>{this._notifyUrlChangeListeners(Ce.url,Ce.state)}))}_notifyUrlChangeListeners(K="",Ce){this._urlChangeListeners.forEach(ze=>ze(K,Ce))}subscribe(K,Ce,ze){return this._subject.subscribe({next:K,error:Ce,complete:ze})}}return G.\u0275fac=function(K){return new(K||G)(_.LFG(Ke),_.LFG(ne))},G.normalizeQueryParams=Te,G.joinWithSlash=De,G.stripTrailingSlash=ut,G.\u0275prov=(0,_.Yz7)({factory:at,token:G,providedIn:"root"}),G})();function at(){return new ct((0,_.LFG)(Ke),(0,_.LFG)(ne))}function E(G){return G.replace(/\/index.html$/,"")}var We=(()=>((We=We||{})[We.Zero=0]="Zero",We[We.One=1]="One",We[We.Two=2]="Two",We[We.Few=3]="Few",We[We.Many=4]="Many",We[We.Other=5]="Other",We))();const ur=_.kL8;class Ur{}let Kr=(()=>{class G extends Ur{constructor(K){super(),this.locale=K}getPluralCategory(K,Ce){switch(ur(Ce||this.locale)(K)){case We.Zero:return"zero";case We.One:return"one";case We.Two:return"two";case We.Few:return"few";case We.Many:return"many";default:return"other"}}}return G.\u0275fac=function(K){return new(K||G)(_.LFG(_.soG))},G.\u0275prov=_.Yz7({token:G,factory:G.\u0275fac}),G})();function Br(G,le){le=encodeURIComponent(le);for(const K of G.split(";")){const Ce=K.indexOf("="),[ze,kt]=-1==Ce?[K,""]:[K.slice(0,Ce),K.slice(Ce+1)];if(ze.trim()===le)return decodeURIComponent(kt)}return null}let Yi=(()=>{class G{constructor(K,Ce,ze,kt){this._iterableDiffers=K,this._keyValueDiffers=Ce,this._ngEl=ze,this._renderer=kt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(K){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof K?K.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(K){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof K?K.split(/\s+/):K,this._rawClass&&((0,_.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const K=this._iterableDiffer.diff(this._rawClass);K&&this._applyIterableChanges(K)}else if(this._keyValueDiffer){const K=this._keyValueDiffer.diff(this._rawClass);K&&this._applyKeyValueChanges(K)}}_applyKeyValueChanges(K){K.forEachAddedItem(Ce=>this._toggleClass(Ce.key,Ce.currentValue)),K.forEachChangedItem(Ce=>this._toggleClass(Ce.key,Ce.currentValue)),K.forEachRemovedItem(Ce=>{Ce.previousValue&&this._toggleClass(Ce.key,!1)})}_applyIterableChanges(K){K.forEachAddedItem(Ce=>{if("string"!=typeof Ce.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,_.AaK)(Ce.item)}`);this._toggleClass(Ce.item,!0)}),K.forEachRemovedItem(Ce=>this._toggleClass(Ce.item,!1))}_applyClasses(K){K&&(Array.isArray(K)||K instanceof Set?K.forEach(Ce=>this._toggleClass(Ce,!0)):Object.keys(K).forEach(Ce=>this._toggleClass(Ce,!!K[Ce])))}_removeClasses(K){K&&(Array.isArray(K)||K instanceof Set?K.forEach(Ce=>this._toggleClass(Ce,!1)):Object.keys(K).forEach(Ce=>this._toggleClass(Ce,!1)))}_toggleClass(K,Ce){(K=K.trim())&&K.split(/\s+/g).forEach(ze=>{Ce?this._renderer.addClass(this._ngEl.nativeElement,ze):this._renderer.removeClass(this._ngEl.nativeElement,ze)})}}return G.\u0275fac=function(K){return new(K||G)(_.Y36(_.ZZ4),_.Y36(_.aQg),_.Y36(_.SBq),_.Y36(_.Qsj))},G.\u0275dir=_.lG2({type:G,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),G})();class pi{constructor(le,K,Ce,ze){this.$implicit=le,this.ngForOf=K,this.index=Ce,this.count=ze}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Sr=(()=>{class G{constructor(K,Ce,ze){this._viewContainer=K,this._template=Ce,this._differs=ze,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(K){this._ngForOf=K,this._ngForOfDirty=!0}set ngForTrackBy(K){this._trackByFn=K}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(K){K&&(this._template=K)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const K=this._ngForOf;if(!this._differ&&K)try{this._differ=this._differs.find(K).create(this.ngForTrackBy)}catch(Ce){throw new Error(`Cannot find a differ supporting object '${K}' of type '${function(G){return G.name||typeof G}(K)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const K=this._differ.diff(this._ngForOf);K&&this._applyChanges(K)}}_applyChanges(K){const Ce=[];K.forEachOperation((ze,kt,an)=>{if(null==ze.previousIndex){const H=this._viewContainer.createEmbeddedView(this._template,new pi(null,this._ngForOf,-1,-1),null===an?void 0:an),B=new xs(ze,H);Ce.push(B)}else if(null==an)this._viewContainer.remove(null===kt?void 0:kt);else if(null!==kt){const H=this._viewContainer.get(kt);this._viewContainer.move(H,an);const B=new xs(ze,H);Ce.push(B)}});for(let ze=0;ze<Ce.length;ze++)this._perViewChange(Ce[ze].view,Ce[ze].record);for(let ze=0,kt=this._viewContainer.length;ze<kt;ze++){const an=this._viewContainer.get(ze);an.context.index=ze,an.context.count=kt,an.context.ngForOf=this._ngForOf}K.forEachIdentityChange(ze=>{this._viewContainer.get(ze.currentIndex).context.$implicit=ze.item})}_perViewChange(K,Ce){K.context.$implicit=Ce.item}static ngTemplateContextGuard(K,Ce){return!0}}return G.\u0275fac=function(K){return new(K||G)(_.Y36(_.s_b),_.Y36(_.Rgc),_.Y36(_.ZZ4))},G.\u0275dir=_.lG2({type:G,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),G})();class xs{constructor(le,K){this.record=le,this.view=K}}let z=(()=>{class G{constructor(K,Ce){this._viewContainer=K,this._context=new j,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Ce}set ngIf(K){this._context.$implicit=this._context.ngIf=K,this._updateView()}set ngIfThen(K){ce("ngIfThen",K),this._thenTemplateRef=K,this._thenViewRef=null,this._updateView()}set ngIfElse(K){ce("ngIfElse",K),this._elseTemplateRef=K,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(K,Ce){return!0}}return G.\u0275fac=function(K){return new(K||G)(_.Y36(_.s_b),_.Y36(_.Rgc))},G.\u0275dir=_.lG2({type:G,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),G})();class j{constructor(){this.$implicit=null,this.ngIf=null}}function ce(G,le){if(le&&!le.createEmbeddedView)throw new Error(`${G} must be a TemplateRef, but received '${(0,_.AaK)(le)}'.`)}let Xs=(()=>{class G{}return G.\u0275fac=function(K){return new(K||G)},G.\u0275mod=_.oAB({type:G}),G.\u0275inj=_.cJS({providers:[{provide:Ur,useClass:Kr}]}),G})();const is="browser";function di(G){return"server"===G}let Zi=(()=>{class G{}return G.\u0275prov=(0,_.Yz7)({token:G,providedIn:"root",factory:()=>new zi((0,_.LFG)(Z),window)}),G})();class zi{constructor(le,K){this.document=le,this.window=K,this.offset=()=>[0,0]}setOffset(le){this.offset=Array.isArray(le)?()=>le:le}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(le){this.supportsScrolling()&&this.window.scrollTo(le[0],le[1])}scrollToAnchor(le){if(!this.supportsScrolling())return;const K=function(G,le){const K=G.getElementById(le)||G.getElementsByName(le)[0];if(K)return K;if("function"==typeof G.createTreeWalker&&G.body&&(G.body.createShadowRoot||G.body.attachShadow)){const Ce=G.createTreeWalker(G.body,NodeFilter.SHOW_ELEMENT);let ze=Ce.currentNode;for(;ze;){const kt=ze.shadowRoot;if(kt){const an=kt.getElementById(le)||kt.querySelector(`[name="${le}"]`);if(an)return an}ze=Ce.nextNode()}}return null}(this.document,le);K&&(this.scrollToElement(K),this.attemptFocus(K))}setHistoryScrollRestoration(le){if(this.supportScrollRestoration()){const K=this.window.history;K&&K.scrollRestoration&&(K.scrollRestoration=le)}}scrollToElement(le){const K=le.getBoundingClientRect(),Ce=K.left+this.window.pageXOffset,ze=K.top+this.window.pageYOffset,kt=this.offset();this.window.scrollTo(Ce-kt[0],ze-kt[1])}attemptFocus(le){return le.focus(),this.document.activeElement===le}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const le=Ms(this.window.history)||Ms(Object.getPrototypeOf(this.window.history));return!(!le||!le.writable&&!le.set)}catch(le){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(le){return!1}}}function Ms(G){return Object.getOwnPropertyDescriptor(G,"scrollRestoration")}class Qi{}},7716:(nn,ot,L)=>{"use strict";L.d(ot,{deG:()=>Di,tb:()=>YI,AFp:()=>GI,ip1:()=>Qv,CZH:()=>Yg,hGG:()=>jS,z2F:()=>dy,ahi:()=>$o,sBO:()=>Tw,Sil:()=>cy,_Vd:()=>$g,aQ5:()=>ii,EJc:()=>ZI,SBq:()=>dd,qLn:()=>Ys,vpe:()=>hd,L6J:()=>kD,gxx:()=>yc,tBr:()=>Da,XFs:()=>tn,OlP:()=>Ti,zs3:()=>ps,ZZ4:()=>E_,aQg:()=>I_,soG:()=>O_,YKP:()=>$E,v3s:()=>IS,h0i:()=>Dp,PXZ:()=>gS,R0b:()=>vu,FiY:()=>fa,r_U:()=>ND,Lbi:()=>qI,g9A:()=>zI,Qsj:()=>cw,FYo:()=>v_,JOm:()=>qa,Tiy:()=>wv,q3G:()=>rt,tp0:()=>Aa,EAV:()=>TS,Rgc:()=>Xm,dDg:()=>eb,DyG:()=>Ol,q4F:()=>Tv,GfV:()=>PE,i9L:()=>yo,s_b:()=>w_,ifc:()=>Qt,eFA:()=>sb,G48:()=>lS,Gpc:()=>ge,X6Q:()=>s0,_c5:()=>kS,VLi:()=>aS,c2e:()=>KI,zSh:()=>rd,wAp:()=>Vr,vHH:()=>ut,EiD:()=>x,mCW:()=>ru,qzn:()=>Pi,JVY:()=>Nc,pB0:()=>Cf,eBb:()=>kc,L6k:()=>uh,LAX:()=>tu,cg1:()=>gv,Tjo:()=>PS,kL8:()=>tE,yhl:()=>Au,dqk:()=>Sn,sIi:()=>_p,CqO:()=>Cp,QGY:()=>Lg,F4k:()=>jm,RDi:()=>Wo,AaK:()=>ne,z3N:()=>za,qOj:()=>Yt,TTD:()=>Xs,_Bn:()=>AE,xp6:()=>Pd,uIk:()=>Ag,ekj:()=>a,Suo:()=>CI,Xpm:()=>Oe,lG2:()=>Bn,Yz7:()=>Mt,cJS:()=>gn,oAB:()=>Pe,Yjl:()=>Dn,Y36:()=>bp,_UZ:()=>zy,qZA:()=>Fg,TgZ:()=>$m,EpF:()=>Um,n5z:()=>Wt,Ikx:()=>pv,LFG:()=>Ii,$8M:()=>$r,$Z:()=>Gy,NdJ:()=>gf,CRH:()=>wI,oxw:()=>Xy,Hsn:()=>wc,F$t:()=>Jy,Q6J:()=>Bm,s9C:()=>Hm,iGM:()=>II,CHM:()=>So,LSH:()=>vn,kYT:()=>bt,YNc:()=>Ss,_uU:()=>F0,Oqu:()=>fv,hij:()=>h_,Gf:()=>bI});var _=L(9765),P=L(5319),re=L(8891),ke=L(6682),ae=L(8819);function Q(t){for(let n in t)if(t[n]===Q)return n;throw Error("Could not find renamed property on target object.")}function Z(t,n){for(const i in n)n.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=n[i])}function ne(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(ne).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const i=n.indexOf("\n");return-1===i?n:n.substring(0,i)}function we(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const se=Q({__forward_ref__:Q});function ge(t){return t.__forward_ref__=ge,t.toString=function(){return ne(this())},t}function Ee(t){return _e(t)?t():t}function _e(t){return"function"==typeof t&&t.hasOwnProperty(se)&&t.__forward_ref__===ge}class ut extends Error{constructor(n,i){super(function(t,n){return`${t?`NG0${t}: `:""}${n}`}(n,i)),this.code=n}}function $e(t){return"string"==typeof t?t:null==t?"":String(t)}function qe(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():$e(t)}function at(t,n){const i=n?` in ${n}`:"";throw new ut("201",`No provider for ${qe(t)} found${i}`)}function st(t,n){null==t&&function(t,n,i,o){throw new Error(`ASSERTION ERROR: ${t}`+(null==o?"":` [Expected=> ${i} ${o} ${n} <=Actual]`))}(n,t,null,"!=")}function Mt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function gn(t){return{providers:t.providers||[],imports:t.imports||[]}}function kn(t){return Tn(t,ur)||Tn(t,En)}function Tn(t,n){return t.hasOwnProperty(n)?t[n]:null}function vr(t){return t&&(t.hasOwnProperty(Ot)||t.hasOwnProperty(Wn))?t[Ot]:null}const ur=Q({\u0275prov:Q}),Ot=Q({\u0275inj:Q}),En=Q({ngInjectableDef:Q}),Wn=Q({ngInjectorDef:Q});var tn=(()=>((tn=tn||{})[tn.Default=0]="Default",tn[tn.Host=1]="Host",tn[tn.Self=2]="Self",tn[tn.SkipSelf=4]="SkipSelf",tn[tn.Optional=8]="Optional",tn))();let Un;function Qn(t){const n=Un;return Un=t,n}function lr(t,n,i){const o=kn(t);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:i&tn.Optional?null:void 0!==n?n:void at(ne(t),"Injector")}function Dr(t){return{toString:t}.toString()}var hr=(()=>((hr=hr||{})[hr.OnPush=0]="OnPush",hr[hr.Default=1]="Default",hr))(),Qt=(()=>((Qt=Qt||{})[Qt.Emulated=0]="Emulated",Qt[Qt.None=2]="None",Qt[Qt.ShadowDom=3]="ShadowDom",Qt))();const wt="undefined"!=typeof globalThis&&globalThis,xr="undefined"!=typeof window&&window,Or="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Sn=wt||"undefined"!=typeof global&&global||xr||Or,Xn={},Yn=[],Kn=Q({\u0275cmp:Q}),Qr=Q({\u0275dir:Q}),dn=Q({\u0275pipe:Q}),Ze=Q({\u0275mod:Q}),oe=Q({\u0275loc:Q}),Ae=Q({\u0275fac:Q}),nt=Q({__NG_ELEMENT_ID__:Q});let It=0;function Oe(t){return Dr(()=>{const i={},o={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===hr.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Yn,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Qt.Emulated,id:"c",styles:t.styles||Yn,_:null,setInput:null,schemas:t.schemas||null,tView:null},c=t.directives,f=t.features,y=t.pipes;return o.id+=It++,o.inputs=Kt(t.inputs,i),o.outputs=Kt(t.outputs),f&&f.forEach(C=>C(o)),o.directiveDefs=c?()=>("function"==typeof c?c():c).map(it):null,o.pipeDefs=y?()=>("function"==typeof y?y():y).map(Ve):null,o})}function it(t){return Fn(t)||function(t){return t[Qr]||null}(t)}function Ve(t){return function(t){return t[dn]||null}(t)}const ve={};function Pe(t){return Dr(()=>{const n={type:t.type,bootstrap:t.bootstrap||Yn,declarations:t.declarations||Yn,imports:t.imports||Yn,exports:t.exports||Yn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(ve[t.id]=t.type),n})}function bt(t,n){return Dr(()=>{const i=mr(t,!0);i.declarations=n.declarations||Yn,i.imports=n.imports||Yn,i.exports=n.exports||Yn})}function Kt(t,n){if(null==t)return Xn;const i={};for(const o in t)if(t.hasOwnProperty(o)){let c=t[o],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),i[c]=o,n&&(n[c]=f)}return i}const Bn=Oe;function Dn(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Fn(t){return t[Kn]||null}function mr(t,n){const i=t[Ze]||null;if(!i&&!0===n)throw new Error(`Type ${ne(t)} does not have '\u0275mod' property.`);return i}function At(t){return Array.isArray(t)&&"object"==typeof t[1]}function Tt(t){return Array.isArray(t)&&!0===t[1]}function on(t){return 0!=(8&t.flags)}function On(t){return 2==(2&t.flags)}function Vn(t){return 1==(1&t.flags)}function qn(t){return null!==t.template}function Rr(t){return 0!=(512&t[2])}function $i(t,n){return t.hasOwnProperty(Ae)?t[Ae]:null}class cs{constructor(n,i,o){this.previousValue=n,this.currentValue=i,this.firstChange=o}isFirstChange(){return this.firstChange}}function Xs(){return is}function is(t){return t.type.prototype.ngOnChanges&&(t.setInput=Us),ki}function ki(){const t=Is(this),n=null==t?void 0:t.current;if(n){const i=t.previous;if(i===Xn)t.previous=n;else for(let o in n)i[o]=n[o];t.current=null,this.ngOnChanges(n)}}function Us(t,n,i,o){const c=Is(t)||function(t,n){return t[gi]=n}(t,{previous:Xn,current:null}),f=c.current||(c.current={}),y=c.previous,C=this.declaredInputs[i],R=y[C];f[C]=new cs(R&&R.currentValue,n,y===Xn),t[o]=n}Xs.ngInherit=!0;const gi="__ngSimpleChanges__";function Is(t){return t[gi]||null}let Ms;function Wo(t){Ms=t}function G(t){return!!t.listen}const K={createRenderer:(t,n)=>void 0!==Ms?Ms:"undefined"!=typeof document?document:void 0};function ze(t){for(;Array.isArray(t);)t=t[0];return t}function H(t,n){return ze(n[t])}function B(t,n){return ze(n[t.index])}function ue(t,n){return t.data[n]}function mn(t,n){const i=n[t];return At(i)?i:i[0]}function er(t){return 4==(4&t[2])}function Wr(t){return 128==(128&t[2])}function li(t,n){return null==n?null:t[n]}function oi(t){t[18]=0}function Gr(t,n){t[5]+=n;let i=t,o=t[3];for(;null!==o&&(1===n&&1===i[5]||-1===n&&0===i[5]);)o[5]+=n,i=o,o=o[3]}const tr={lFrame:oa(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Go(){return tr.bindingsEnabled}function rn(){return tr.lFrame.lView}function Cr(){return tr.lFrame.tView}function So(t){return tr.lFrame.contextLView=t,t[8]}function Ui(){let t=Js();for(;null!==t&&64===t.type;)t=t.parent;return t}function Js(){return tr.lFrame.currentTNode}function Os(t,n){const i=tr.lFrame;i.currentTNode=t,i.isParent=n}function so(){return tr.lFrame.isParent}function zo(){tr.lFrame.isParent=!1}function sa(){return tr.isInCheckNoChangesMode}function go(t){tr.isInCheckNoChangesMode=t}function Cs(){return tr.lFrame.bindingIndex++}function mo(t,n){const i=tr.lFrame;i.bindingIndex=i.bindingRootIndex=t,Ao(n)}function Ao(t){tr.lFrame.currentDirectiveIndex=t}function xo(){return tr.lFrame.currentQueryIndex}function to(t){tr.lFrame.currentQueryIndex=t}function Hs(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function Yo(t,n,i){if(i&tn.SkipSelf){let c=n,f=t;for(;!(c=c.parent,null!==c||i&tn.Host||(c=Hs(f),null===c||(f=f[15],10&c.type))););if(null===c)return!1;n=c,t=f}const o=tr.lFrame=no();return o.currentTNode=n,o.lView=t,!0}function Ci(t){const n=no(),i=t[1];tr.lFrame=n,n.currentTNode=i.firstChild,n.lView=t,n.tView=i,n.contextLView=t,n.bindingIndex=i.bindingStartIndex,n.inI18n=!1}function no(){const t=tr.lFrame,n=null===t?null:t.child;return null===n?oa(t):n}function oa(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function Ns(){const t=tr.lFrame;return tr.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const $a=Ns;function Ua(){const t=Ns();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function N(){return tr.lFrame.selectedIndex}function T(t){tr.lFrame.selectedIndex=t}function q(){const t=tr.lFrame;return ue(t.tView,t.selectedIndex)}function Nr(t,n){for(let i=n.directiveStart,o=n.directiveEnd;i<o;i++){const f=t.data[i].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:C,ngAfterViewInit:R,ngAfterViewChecked:U,ngOnDestroy:te}=f;y&&(t.contentHooks||(t.contentHooks=[])).push(-i,y),C&&((t.contentHooks||(t.contentHooks=[])).push(i,C),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(i,C)),R&&(t.viewHooks||(t.viewHooks=[])).push(-i,R),U&&((t.viewHooks||(t.viewHooks=[])).push(i,U),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(i,U)),null!=te&&(t.destroyHooks||(t.destroyHooks=[])).push(i,te)}}function wi(t,n,i){Ji(t,n,3,i)}function zt(t,n,i,o){(3&t[2])===i&&Ji(t,n,i,o)}function nr(t,n){let i=t[2];(3&i)===n&&(i&=2047,i+=1,t[2]=i)}function Ji(t,n,i,o){const f=null!=o?o:-1,y=n.length-1;let C=0;for(let R=void 0!==o?65535&t[18]:0;R<y;R++)if("number"==typeof n[R+1]){if(C=n[R],null!=o&&C>=o)break}else n[R]<0&&(t[18]+=65536),(C<f||-1==f)&&(ro(t,i,n,R),t[18]=(4294901760&t[18])+R+2),R++}function ro(t,n,i,o){const c=i[o]<0,f=i[o+1],C=t[c?-i[o]:i[o]];if(c){if(t[2]>>11<t[18]>>16&&(3&t[2])===n){t[2]+=2048;try{f.call(C)}finally{}}}else try{f.call(C)}finally{}}class $n{constructor(n,i,o){this.factory=n,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=o}}function pl(t,n,i){const o=G(t);let c=0;for(;c<i.length;){const f=i[c];if("number"==typeof f){if(0!==f)break;c++;const y=i[c++],C=i[c++],R=i[c++];o?t.setAttribute(n,C,R,y):n.setAttributeNS(y,C,R)}else{const y=f,C=i[++c];kr(y)?o&&t.setProperty(n,y,C):o?t.setAttribute(n,y,C):n.setAttribute(y,C),c++}}return c}function Bi(t){return 3===t||4===t||6===t}function kr(t){return 64===t.charCodeAt(0)}function ss(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let i=-1;for(let o=0;o<n.length;o++){const c=n[o];"number"==typeof c?i=c:0===i||Eu(t,i,c,null,-1===i||2===i?n[++o]:null)}}return t}function Eu(t,n,i,o,c){let f=0,y=t.length;if(-1===n)y=-1;else for(;f<t.length;){const C=t[f++];if("number"==typeof C){if(C===n){y=-1;break}if(C>n){y=f-1;break}}}for(;f<t.length;){const C=t[f];if("number"==typeof C)break;if(C===i){if(null===o)return void(null!==c&&(t[f+1]=c));if(o===t[f+1])return void(t[f+2]=c)}f++,null!==o&&f++,null!==c&&f++}-1!==y&&(t.splice(y,0,n),f=y+1),t.splice(f++,0,i),null!==o&&t.splice(f++,0,o),null!==c&&t.splice(f++,0,c)}function Ml(t){return-1!==t}function Fs(t){return 32767&t}function gr(t,n){let i=function(t){return t>>16}(t),o=n;for(;i>0;)o=o[15],i--;return o}let Bo=!0;function ao(t){const n=Bo;return Bo=t,n}let ei=0;function fi(t,n){const i=va(t,n);if(-1!==i)return i;const o=n[1];o.firstCreatePass&&(t.injectorIndex=n.length,An(o.data,t),An(n,null),An(o.blueprint,null));const c=Zo(t,n),f=t.injectorIndex;if(Ml(c)){const y=Fs(c),C=gr(c,n),R=C[1].data;for(let U=0;U<8;U++)n[f+U]=C[y+U]|R[y+U]}return n[f+8]=c,f}function An(t,n){t.push(0,0,0,0,0,0,0,0,n)}function va(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Zo(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let i=0,o=null,c=n;for(;null!==c;){const f=c[1],y=f.type;if(o=2===y?f.declTNode:1===y?c[6]:null,null===o)return-1;if(i++,c=c[15],-1!==o.injectorIndex)return o.injectorIndex|i<<16}return-1}function os(t,n,i){!function(t,n,i){let o;"string"==typeof i?o=i.charCodeAt(0)||0:i.hasOwnProperty(nt)&&(o=i[nt]),null==o&&(o=i[nt]=ei++);const c=255&o;n.data[t+(c>>5)]|=1<<c}(t,n,i)}function Qo(t,n,i){if(i&tn.Optional)return t;at(n,"NodeInjector")}function el(t,n,i,o){if(i&tn.Optional&&void 0===o&&(o=null),0==(i&(tn.Self|tn.Host))){const c=t[9],f=Qn(void 0);try{return c?c.get(n,o,i&tn.Optional):lr(n,o,i&tn.Optional)}finally{Qn(f)}}return Qo(o,n,i)}function Ea(t,n,i,o=tn.Default,c){if(null!==t){const f=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(nt)?t[nt]:void 0;return"number"==typeof n?n>=0?255&n:F:n}(i);if("function"==typeof f){if(!Yo(n,t,o))return o&tn.Host?Qo(c,i,o):el(n,i,o,c);try{const y=f(o);if(null!=y||o&tn.Optional)return y;at(i)}finally{$a()}}else if("number"==typeof f){let y=null,C=va(t,n),R=-1,U=o&tn.Host?n[16][6]:null;for((-1===C||o&tn.SkipSelf)&&(R=-1===C?Zo(t,n):n[C+8],-1!==R&&je(o,!1)?(y=n[1],C=Fs(R),n=gr(R,n)):C=-1);-1!==C;){const te=n[1];if(ye(f,C,te.data)){const Se=A(C,n,i,y,o,U);if(Se!==lo)return Se}R=n[C+8],-1!==R&&je(o,n[1].data[C+8]===U)&&ye(f,C,n)?(y=te,C=Fs(R),n=gr(R,n)):C=-1}}}return el(n,i,o,c)}const lo={};function F(){return new me(Ui(),rn())}function A(t,n,i,o,c,f){const y=n[1],C=y.data[t+8],te=S(C,y,i,null==o?On(C)&&Bo:o!=y&&0!=(3&C.type),c&tn.Host&&f===C);return null!==te?$(n,y,te,C):lo}function S(t,n,i,o,c){const f=t.providerIndexes,y=n.data,C=1048575&f,R=t.directiveStart,te=f>>20,Re=c?C+te:t.directiveEnd;for(let tt=o?C:C+te;tt<Re;tt++){const pt=y[tt];if(tt<R&&i===pt||tt>=R&&pt.type===i)return tt}if(c){const tt=y[R];if(tt&&qn(tt)&&tt.type===i)return R}return null}function $(t,n,i,o){let c=t[i];const f=n.data;if(function(t){return t instanceof $n}(c)){const y=c;y.resolving&&function(t,n){throw new ut("200",`Circular dependency in DI detected for ${t}`)}(qe(f[i]));const C=ao(y.canSeeViewProviders);y.resolving=!0;const R=y.injectImpl?Qn(y.injectImpl):null;Yo(t,o,tn.Default);try{c=t[i]=y.factory(void 0,f,t,o),n.firstCreatePass&&i>=o.directiveStart&&function(t,n,i){const{ngOnChanges:o,ngOnInit:c,ngDoCheck:f}=n.type.prototype;if(o){const y=is(n);(i.preOrderHooks||(i.preOrderHooks=[])).push(t,y),(i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(t,y)}c&&(i.preOrderHooks||(i.preOrderHooks=[])).push(0-t,c),f&&((i.preOrderHooks||(i.preOrderHooks=[])).push(t,f),(i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(t,f))}(i,f[i],n)}finally{null!==R&&Qn(R),ao(C),y.resolving=!1,$a()}}return c}function ye(t,n,i){return!!(i[n+(t>>5)]&1<<t)}function je(t,n){return!(t&tn.Self||t&tn.Host&&n)}class me{constructor(n,i){this._tNode=n,this._lView=i}get(n,i,o){return Ea(this._tNode,this._lView,n,o,i)}}function Wt(t){return Dr(()=>{const n=t.prototype.constructor,i=n[Ae]||xn(n),o=Object.prototype;let c=Object.getPrototypeOf(t.prototype).constructor;for(;c&&c!==o;){const f=c[Ae]||xn(c);if(f&&f!==i)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function xn(t){return _e(t)?()=>{const n=xn(Ee(t));return n&&n()}:$i(t)}function $r(t){return function(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const i=t.attrs;if(i){const o=i.length;let c=0;for(;c<o;){const f=i[c];if(Bi(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<o&&"string"==typeof i[c];)c++;else{if(f===n)return i[c+1];c+=2}}}return null}(Ui(),t)}const jr="__parameters__",wr="__prop__metadata__";function uo(t){return function(...i){if(t){const o=t(...i);for(const c in o)this[c]=o[c]}}}function Es(t,n,i){return Dr(()=>{const o=uo(n);function c(...f){if(this instanceof c)return o.apply(this,f),this;const y=new c(...f);return C.annotation=y,C;function C(R,U,te){const Se=R.hasOwnProperty(jr)?R[jr]:Object.defineProperty(R,jr,{value:[]})[jr];for(;Se.length<=te;)Se.push(null);return(Se[te]=Se[te]||[]).push(y),R}}return i&&(c.prototype=Object.create(i.prototype)),c.prototype.ngMetadataName=t,c.annotationCls=c,c})}function Jr(t,n,i,o){return Dr(()=>{const c=uo(n);function f(...y){if(this instanceof f)return c.apply(this,y),this;const C=new f(...y);return function(U,te){const Se=U.constructor,Re=Se.hasOwnProperty(wr)?Se[wr]:Object.defineProperty(Se,wr,{value:{}})[wr];Re[te]=Re.hasOwnProperty(te)&&Re[te]||[],Re[te].unshift(C),o&&o(U,te,...y)}}return i&&(f.prototype=Object.create(i.prototype)),f.prototype.ngMetadataName=t,f.annotationCls=f,f})}function as(){return Es("Attribute",t=>({attributeName:t,__NG_ELEMENT_ID__:()=>$r(t)}))}const $o=as();class Ti{constructor(n,i){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=Mt({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Di=new Ti("AnalyzeForEntryComponents");class rr{}const ii=Jr("ContentChild",(t,n={})=>Object.assign({selector:t,first:!0,isViewQuery:!1,descendants:!0},n),rr),yo=Jr("ViewChild",(t,n)=>Object.assign({selector:t,first:!0,isViewQuery:!0,descendants:!0},n),rr),Ol=Function;function ls(t,n){void 0===n&&(n=t);for(let i=0;i<t.length;i++){let o=t[i];Array.isArray(o)?(n===t&&(n=t.slice(0,i)),ls(o,n)):n!==t&&n.push(o)}return n}function ws(t,n){t.forEach(i=>Array.isArray(i)?ws(i,n):n(i))}function Uo(t,n,i){n>=t.length?t.push(i):t.splice(n,0,i)}function co(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function _o(t,n){const i=[];for(let o=0;o<t;o++)i.push(n);return i}function Gs(t,n,i){let o=Ca(t,n);return o>=0?t[1|o]=i:(o=~o,function(t,n,i,o){let c=t.length;if(c==n)t.push(i,o);else if(1===c)t.push(o,t[0]),t[0]=i;else{for(c--,t.push(t[c-1],t[c]);c>n;)t[c]=t[c-2],c--;t[n]=i,t[n+1]=o}}(t,o,n,i)),o}function ca(t,n){const i=Ca(t,n);if(i>=0)return t[1|i]}function Ca(t,n){return function(t,n,i){let o=0,c=t.length>>i;for(;c!==o;){const f=o+(c-o>>1),y=t[f<<i];if(n===y)return f<<i;y>n?c=f:o=f+1}return~(c<<i)}(t,n,1)}const pe={},Be="__NG_DI_FLAG__",Et="ngTempTokenPath",un=/\n/gm,or="__source",Mr=Q({provide:String,useValue:Q});let ar;function Oi(t){const n=ar;return ar=t,n}function ui(t,n=tn.Default){if(void 0===ar)throw new Error("inject() must be called from an injection context");return null===ar?lr(t,void 0,n):ar.get(t,n&tn.Optional?null:void 0,n)}function Ii(t,n=tn.Default){return(Un||ui)(Ee(t),n)}function ea(t){const n=[];for(let i=0;i<t.length;i++){const o=Ee(t[i]);if(Array.isArray(o)){if(0===o.length)throw new Error("Arguments array must have arguments.");let c,f=tn.Default;for(let y=0;y<o.length;y++){const C=o[y],R=Xl(C);"number"==typeof R?-1===R?c=C.token:f|=R:c=C}n.push(Ii(c,f))}else n.push(Ii(o))}return n}function ha(t,n){return t[Be]=n,t.prototype[Be]=n,t}function Xl(t){return t[Be]}function Ta(t,n,i,o){const c=t[Et];throw n[or]&&c.unshift(n[or]),t.message=function(t,n,i,o=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let c=ne(n);if(Array.isArray(n))c=n.map(ne).join(" -> ");else if("object"==typeof n){let f=[];for(let y in n)if(n.hasOwnProperty(y)){let C=n[y];f.push(y+":"+("string"==typeof C?JSON.stringify(C):ne(C)))}c=`{${f.join(", ")}}`}return`${i}${o?"("+o+")":""}[${c}]: ${t.replace(un,"\n  ")}`}("\n"+t.message,c,i,o),t.ngTokenPath=c,t[Et]=null,t}const Da=ha(Es("Inject",t=>({token:t})),-1),fa=ha(Es("Optional"),8),Aa=ha(Es("SkipSelf"),4);let Su;function Jl(t){var n;return(null===(n=function(){if(void 0===Su&&(Su=null,Sn.trustedTypes))try{Su=Sn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return Su}())||void 0===n?void 0:n.createHTML(t))||t}class _l{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class vl extends _l{getTypeName(){return"HTML"}}class eu extends _l{getTypeName(){return"Style"}}class gd extends _l{getTypeName(){return"Script"}}class $l extends _l{getTypeName(){return"URL"}}class bf extends _l{getTypeName(){return"ResourceURL"}}function za(t){return t instanceof _l?t.changingThisBreaksApplicationSecurity:t}function Pi(t,n){const i=Au(t);if(null!=i&&i!==n){if("ResourceURL"===i&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${i} (see https://g.co/ng/security#xss)`)}return i===n}function Au(t){return t instanceof _l&&t.getTypeName()||null}function Nc(t){return new vl(t)}function uh(t){return new eu(t)}function kc(t){return new gd(t)}function tu(t){return new $l(t)}function Cf(t){return new bf(t)}class xu{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const i=(new window.DOMParser).parseFromString(Jl(n),"text/html").body;return null===i?this.inertDocumentHelper.getInertBodyElement(n):(i.removeChild(i.firstChild),i)}catch(i){return null}}}class El{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const i=this.inertDocument.createElement("html");this.inertDocument.appendChild(i);const o=this.inertDocument.createElement("body");i.appendChild(o)}}getInertBodyElement(n){const i=this.inertDocument.createElement("template");if("content"in i)return i.innerHTML=Jl(n),i;const o=this.inertDocument.createElement("body");return o.innerHTML=Jl(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(o),o}stripCustomNsAttrs(n){const i=n.attributes;for(let c=i.length-1;0<c;c--){const y=i.item(c).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&n.removeAttribute(y)}let o=n.firstChild;for(;o;)o.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(o),o=o.nextSibling}}const Zu=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,nu=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ru(t){return(t=String(t)).match(Zu)||t.match(nu)?t:"unsafe:"+t}function Ai(t){const n={};for(const i of t.split(","))n[i]=!0;return n}function ti(...t){const n={};for(const i of t)for(const o in i)i.hasOwnProperty(o)&&(n[o]=!0);return n}const _d=Ai("area,br,col,hr,img,wbr"),Lc=Ai("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Il=Ai("rp,rt"),bl=ti(_d,ti(Lc,Ai("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ti(Il,Ai("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ti(Il,Lc)),Vc=Ai("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ga=Ai("srcset"),vd=ti(Vc,ga,Ai("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ai("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Xu=Ai("script,style,template");class zr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let i=n.firstChild,o=!0;for(;i;)if(i.nodeType===Node.ELEMENT_NODE?o=this.startElement(i):i.nodeType===Node.TEXT_NODE?this.chars(i.nodeValue):this.sanitizedSomething=!0,o&&i.firstChild)i=i.firstChild;else for(;i;){i.nodeType===Node.ELEMENT_NODE&&this.endElement(i);let c=this.checkClobberedElement(i,i.nextSibling);if(c){i=c;break}i=this.checkClobberedElement(i,i.parentNode)}return this.buf.join("")}startElement(n){const i=n.nodeName.toLowerCase();if(!bl.hasOwnProperty(i))return this.sanitizedSomething=!0,!Xu.hasOwnProperty(i);this.buf.push("<"),this.buf.push(i);const o=n.attributes;for(let c=0;c<o.length;c++){const f=o.item(c),y=f.name,C=y.toLowerCase();if(!vd.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let R=f.value;Vc[C]&&(R=ru(R)),ga[C]&&(t=R,R=(t=String(t)).split(",").map(n=>ru(n.trim())).join(", ")),this.buf.push(" ",y,'="',g(R),'"')}var t;return this.buf.push(">"),!0}endElement(n){const i=n.nodeName.toLowerCase();bl.hasOwnProperty(i)&&!_d.hasOwnProperty(i)&&(this.buf.push("</"),this.buf.push(i),this.buf.push(">"))}chars(n){this.buf.push(g(n))}checkClobberedElement(n,i){if(i&&(n.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return i}}const wf=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,D=/([^\#-~ |!])/g;function g(t){return t.replace(/&/g,"&amp;").replace(wf,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(D,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let v;function x(t,n){let i=null;try{v=v||function(t){const n=new El(t);return function(){try{return!!(new window.DOMParser).parseFromString(Jl(""),"text/html")}catch(t){return!1}}()?new xu(n):n}(t);let o=n?String(n):"";i=v.getInertBodyElement(o);let c=5,f=o;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,o=f,f=i.innerHTML,i=v.getInertBodyElement(o)}while(o!==f);return Jl((new zr).sanitizeChildren(ee(i)||i))}finally{if(i){const o=ee(i)||i;for(;o.firstChild;)o.removeChild(o.firstChild)}}}function ee(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var rt=(()=>((rt=rt||{})[rt.NONE=0]="NONE",rt[rt.HTML=1]="HTML",rt[rt.STYLE=2]="STYLE",rt[rt.SCRIPT=3]="SCRIPT",rt[rt.URL=4]="URL",rt[rt.RESOURCE_URL=5]="RESOURCE_URL",rt))();function vn(t){const n=function(){const t=rn();return t&&t[12]}();return n?n.sanitize(rt.URL,t)||"":Pi(t,"URL")?za(t):ru($e(t))}const tc="__ngContext__";function Ls(t,n){t[tc]=n}function su(t){const n=function(t){return t[tc]||null}(t);return n?Array.isArray(n)?n:n.lView:null}function _h(t){return t.ngOriginalError}function vh(t,...n){t.error(...n)}class Ys{constructor(){this._console=console}handleError(n){const i=this._findOriginalError(n),o=this._findContext(n),c=(t=n)&&t.ngErrorLogger||vh;var t;c(this._console,"ERROR",n),i&&c(this._console,"ORIGINAL ERROR",i),o&&c(this._console,"ERROR CONTEXT",o)}_findContext(n){return n?n.ngDebugContext||this._findContext(_h(n)):null}_findOriginalError(n){let i=n&&_h(n);for(;i&&_h(i);)i=_h(i);return i||null}}const Np=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Sn))();function ol(t){return t instanceof Function?t():t}var qa=(()=>((qa=qa||{})[qa.Important=1]="Important",qa[qa.DashCase=2]="DashCase",qa))();function wh(t,n){return undefined(t,n)}function fs(t){const n=t[3];return Tt(n)?n[3]:n}function ic(t){return sc(t[13])}function Ra(t){return sc(t[4])}function sc(t){for(;null!==t&&!Tt(t);)t=t[4];return t}function Oo(t,n,i,o,c){if(null!=o){let f,y=!1;Tt(o)?f=o:At(o)&&(y=!0,o=o[0]);const C=ze(o);0===t&&null!==i?null==c?Ah(n,i,C):cc(n,i,C,c||null,!0):1===t&&null!==i?cc(n,i,C,c||null,!0):2===t?function(t,n,i){const o=Gl(t,n);o&&function(t,n,i,o){G(t)?t.removeChild(n,i,o):n.removeChild(i)}(t,o,n,i)}(n,C,y):3===t&&n.destroyNode(C),null!=f&&function(t,n,i,o,c){const f=i[7];f!==ze(i)&&Oo(n,t,o,f,c);for(let C=10;C<i.length;C++){const R=i[C];qc(R[1],R,t,n,o,f)}}(n,t,f,i,c)}}function Wl(t,n,i){return G(t)?t.createElement(n,i):null===i?t.createElement(n):t.createElementNS(i,n)}function Bp(t,n){const i=t[9],o=i.indexOf(n),c=n[3];1024&n[2]&&(n[2]&=-1025,Gr(c,-1)),i.splice(o,1)}function Ad(t,n){if(t.length<=10)return;const i=10+n,o=t[i];if(o){const c=o[17];null!==c&&c!==t&&Bp(c,o),n>0&&(t[i-1][4]=o[4]);const f=co(t,10+n);!function(t,n){qc(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(o[1],o);const y=f[19];null!==y&&y.detachView(f[1]),o[3]=null,o[4]=null,o[2]&=-129}return o}function ac(t,n){if(!(256&n[2])){const i=n[11];G(i)&&i.destroyNode&&qc(t,n,i,3,null,null),function(t){let n=t[13];if(!n)return lc(t[1],t);for(;n;){let i=null;if(At(n))i=n[13];else{const o=n[10];o&&(i=o)}if(!i){for(;n&&!n[4]&&n!==t;)At(n)&&lc(n[1],n),n=n[3];null===n&&(n=t),At(n)&&lc(n[1],n),i=n&&n[4]}n=i}}(n)}}function lc(t,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function(t,n){let i;if(null!=t&&null!=(i=t.destroyHooks))for(let o=0;o<i.length;o+=2){const c=n[i[o]];if(!(c instanceof $n)){const f=i[o+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const C=c[f[y]],R=f[y+1];try{R.call(C)}finally{}}else try{f.call(c)}finally{}}}}(t,n),function(t,n){const i=t.cleanup,o=n[7];let c=-1;if(null!==i)for(let f=0;f<i.length-1;f+=2)if("string"==typeof i[f]){const y=i[f+1],C="function"==typeof y?y(n):ze(n[y]),R=o[c=i[f+2]],U=i[f+3];"boolean"==typeof U?C.removeEventListener(i[f],R,U):U>=0?o[c=U]():o[c=-U].unsubscribe(),f+=2}else{const y=o[c=i[f+1]];i[f].call(y)}if(null!==o){for(let f=c+1;f<o.length;f++)o[f]();n[7]=null}}(t,n),1===n[1].type&&G(n[11])&&n[11].destroy();const i=n[17];if(null!==i&&Tt(n[3])){i!==n[3]&&Bp(i,n);const o=n[19];null!==o&&o.detachView(t)}}}function Sh(t,n,i){return function(t,n,i){let o=n;for(;null!==o&&40&o.type;)o=(n=o).parent;if(null===o)return i[0];if(2&o.flags){const c=t.data[o.directiveStart].encapsulation;if(c===Qt.None||c===Qt.Emulated)return null}return B(o,i)}(t,n.parent,i)}function cc(t,n,i,o,c){G(t)?t.insertBefore(n,i,o,c):n.insertBefore(i,o,c)}function Ah(t,n,i){G(t)?t.appendChild(n,i):n.appendChild(i)}function $p(t,n,i,o,c){null!==o?cc(t,n,i,o,c):Ah(t,n,i)}function Gl(t,n){return G(t)?t.parentNode(n):n.parentNode}function Rf(t,n,i){return jp(t,n,i)}let jp=function(t,n,i){return 40&t.type?B(t,i):null};function xh(t,n,i,o){const c=Sh(t,o,n),f=n[11],C=Rf(o.parent||n[6],o,n);if(null!=c)if(Array.isArray(i))for(let R=0;R<i.length;R++)$p(f,c,i[R],C,!1);else $p(f,c,i,C,!1)}function zl(t,n){if(null!==n){const i=n.type;if(3&i)return B(n,t);if(4&i)return zc(-1,t[n.index]);if(8&i){const o=n.child;if(null!==o)return zl(t,o);{const c=t[n.index];return Tt(c)?zc(-1,c):ze(c)}}if(32&i)return wh(n,t)()||ze(t[n.index]);{const o=Ka(t,n);return null!==o?Array.isArray(o)?o[0]:zl(fs(t[16]),o):zl(t,n.next)}}return null}function Ka(t,n){return null!==n?t[16][6].projection[n.projection]:null}function zc(t,n){const i=10+t+1;if(i<n.length){const o=n[i],c=o[1].firstChild;if(null!==c)return zl(o,c)}return n[7]}function hc(t,n,i,o,c,f,y){for(;null!=i;){const C=o[i.index],R=i.type;if(y&&0===n&&(C&&Ls(ze(C),o),i.flags|=4),64!=(64&i.flags))if(8&R)hc(t,n,i.child,o,c,f,!1),Oo(n,t,c,C,f);else if(32&R){const U=wh(i,o);let te;for(;te=U();)Oo(n,t,c,te,f);Oo(n,t,c,C,f)}else 16&R?Mf(t,n,o,i,c,f):Oo(n,t,c,C,f);i=y?i.projectionNext:i.next}}function qc(t,n,i,o,c,f){hc(i,o,t.firstChild,n,c,f,!1)}function Mf(t,n,i,o,c,f){const y=i[16],R=y[6].projection[o.projection];if(Array.isArray(R))for(let U=0;U<R.length;U++)Oo(n,t,c,R[U],f);else hc(t,n,R,y[3],c,f,!0)}function Rh(t,n,i){G(t)?t.setAttribute(n,"style",i):n.style.cssText=i}function Za(t,n,i){G(t)?""===i?t.removeAttribute(n,"class"):t.setAttribute(n,"class",i):n.className=i}function lu(t,n,i){let o=t.length;for(;;){const c=t.indexOf(n,i);if(-1===c)return c;if(0===c||t.charCodeAt(c-1)<=32){const f=n.length;if(c+f===o||t.charCodeAt(c+f)<=32)return c}i=c+1}}const Pu="ng-template";function im(t,n,i){let o=0;for(;o<t.length;){let c=t[o++];if(i&&"class"===c){if(c=t[o],-1!==lu(c.toLowerCase(),n,0))return!0}else if(1===c){for(;o<t.length&&"string"==typeof(c=t[o++]);)if(c.toLowerCase()===n)return!0;return!1}}return!1}function uu(t){return 4===t.type&&t.value!==Pu}function Hp(t,n,i){return n===(4!==t.type||i?t.value:Pu)}function cu(t,n,i){let o=4;const c=t.attrs||[],f=function(t){for(let n=0;n<t.length;n++)if(Bi(t[n]))return n;return t.length}(c);let y=!1;for(let C=0;C<n.length;C++){const R=n[C];if("number"!=typeof R){if(!y)if(4&o){if(o=2|1&o,""!==R&&!Hp(t,R,i)||""===R&&1===n.length){if(Qa(o))return!1;y=!0}}else{const U=8&o?R:n[++C];if(8&o&&null!==t.attrs){if(!im(t.attrs,U,i)){if(Qa(o))return!1;y=!0}continue}const Se=Pf(8&o?"class":R,c,uu(t),i);if(-1===Se){if(Qa(o))return!1;y=!0;continue}if(""!==U){let Re;Re=Se>f?"":c[Se+1].toLowerCase();const tt=8&o?Re:null;if(tt&&-1!==lu(tt,U,0)||2&o&&U!==Re){if(Qa(o))return!1;y=!0}}}}else{if(!y&&!Qa(o)&&!Qa(R))return!1;if(y&&Qa(R))continue;y=!1,o=R|1&o}}return Qa(o)||y}function Qa(t){return 0==(1&t)}function Pf(t,n,i,o){if(null===n)return-1;let c=0;if(o||!i){let f=!1;for(;c<n.length;){const y=n[c];if(y===t)return c;if(3===y||6===y)f=!0;else{if(1===y||2===y){let C=n[++c];for(;"string"==typeof C;)C=n[++c];continue}if(4===y)break;if(0===y){c+=4;continue}}c+=f?1:2}return-1}return function(t,n){let i=t.indexOf(4);if(i>-1)for(i++;i<t.length;){const o=t[i];if("number"==typeof o)return-1;if(o===n)return i;i++}return-1}(n,t)}function Nf(t,n,i=!1){for(let o=0;o<n.length;o++)if(cu(t,n[o],i))return!0;return!1}function Od(t,n){e:for(let i=0;i<n.length;i++){const o=n[i];if(t.length===o.length){for(let c=0;c<t.length;c++)if(t[c]!==o[c])continue e;return!0}}return!1}function Xa(t,n){return t?":not("+n.trim()+")":n}function Nu(t){let n=t[0],i=1,o=2,c="",f=!1;for(;i<t.length;){let y=t[i];if("string"==typeof y)if(2&o){const C=t[++i];c+="["+y+(C.length>0?'="'+C+'"':"")+"]"}else 8&o?c+="."+y:4&o&&(c+=" "+y);else""!==c&&!Qa(y)&&(n+=Xa(f,c),c=""),o=y,f=f||!Qa(o);i++}return""!==c&&(n+=Xa(f,c)),n}const _r={};function Pd(t){Ff(Cr(),rn(),N()+t,sa())}function Ff(t,n,i,o){if(!o)if(3==(3&n[2])){const f=t.preOrderCheckHooks;null!==f&&wi(n,f,i)}else{const f=t.preOrderHooks;null!==f&&zt(n,f,0,i)}T(i)}function Nd(t,n){return t<<17|n<<2}function Ja(t){return t>>17&32767}function Vf(t){return 2|t}function Dl(t){return(131068&t)>>2}function Ds(t,n){return-131069&t|n<<2}function fc(t){return 1|t}function Lh(t,n){const i=t.contentQueries;if(null!==i)for(let o=0;o<i.length;o+=2){const c=i[o],f=i[o+1];if(-1!==f){const y=t.data[f];to(c),y.contentQueries(2,n[f],f)}}}function Zc(t,n,i,o,c,f,y,C,R,U){const te=n.blueprint.slice();return te[0]=c,te[2]=140|o,oi(te),te[3]=te[15]=t,te[8]=i,te[10]=y||t&&t[10],te[11]=C||t&&t[11],te[12]=R||t&&t[12]||null,te[9]=U||t&&t[9]||null,te[6]=f,te[16]=2==n.type?t[16]:te,te}function Qc(t,n,i,o,c){let f=t.data[n];if(null===f)f=function(t,n,i,o,c){const f=Js(),y=so(),R=t.data[n]=function(t,n,i,o,c,f){return{type:i,index:o,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,i,n,o,c);return null===t.firstChild&&(t.firstChild=R),null!==f&&(y?null==f.child&&null!==R.parent&&(f.child=R):null===f.next&&(f.next=R)),R}(t,n,i,o,c),tr.lFrame.inI18n&&(f.flags|=64);else if(64&f.type){f.type=i,f.value=o,f.attrs=c;const y=function(){const t=tr.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Os(f,!0),f}function Xc(t,n,i,o){if(0===i)return-1;const c=n.length;for(let f=0;f<i;f++)n.push(o),t.blueprint.push(o),t.data.push(null);return c}function Jc(t,n,i){Ci(n);try{const o=t.viewQuery;null!==o&&pg(1,o,i);const c=t.template;null!==c&&Vh(t,n,c,1,i),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Lh(t,n),t.staticViewQueries&&pg(2,t.viewQuery,i);const f=t.components;null!==f&&function(t,n){for(let i=0;i<n.length;i++)cg(t,n[i])}(n,f)}catch(o){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),o}finally{n[2]&=-5,Ua()}}function hu(t,n,i,o){const c=n[2];if(256==(256&c))return;Ci(n);const f=sa();try{oi(n),function(t){tr.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==i&&Vh(t,n,i,2,o);const y=3==(3&c);if(!f)if(y){const U=t.preOrderCheckHooks;null!==U&&wi(n,U,null)}else{const U=t.preOrderHooks;null!==U&&zt(n,U,0,null),nr(n,0)}if(function(t){for(let n=ic(t);null!==n;n=Ra(n)){if(!n[2])continue;const i=n[9];for(let o=0;o<i.length;o++){const c=i[o],f=c[3];0==(1024&c[2])&&Gr(f,1),c[2]|=1024}}}(n),function(t){for(let n=ic(t);null!==n;n=Ra(n))for(let i=10;i<n.length;i++){const o=n[i],c=o[1];Wr(o)&&hu(c,o,c.template,o[8])}}(n),null!==t.contentQueries&&Lh(t,n),!f)if(y){const U=t.contentCheckHooks;null!==U&&wi(n,U)}else{const U=t.contentHooks;null!==U&&zt(n,U,1),nr(n,1)}!function(t,n){const i=t.hostBindingOpCodes;if(null!==i)try{for(let o=0;o<i.length;o++){const c=i[o];if(c<0)T(~c);else{const f=c,y=i[++o],C=i[++o];mo(y,f),C(2,n[f])}}}finally{T(-1)}}(t,n);const C=t.components;null!==C&&function(t,n){for(let i=0;i<n.length;i++)mm(t,n[i])}(n,C);const R=t.viewQuery;if(null!==R&&pg(2,R,o),!f)if(y){const U=t.viewCheckHooks;null!==U&&wi(n,U)}else{const U=t.viewHooks;null!==U&&zt(n,U,2),nr(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),f||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,Gr(n[3],-1))}finally{Ua()}}function Hd(t,n,i,o){const c=n[10],f=!sa(),y=er(n);try{f&&!y&&c.begin&&c.begin(),y&&Jc(t,n,o),hu(t,n,i,o)}finally{f&&!y&&c.end&&c.end()}}function Vh(t,n,i,o,c){const f=N(),y=2&o;try{T(-1),y&&n.length>20&&Ff(t,n,20,sa()),i(o,c)}finally{T(f)}}function eg(t,n,i){!Go()||(function(t,n,i,o){const c=i.directiveStart,f=i.directiveEnd;t.firstCreatePass||fi(i,n),Ls(o,n);const y=i.initialInputs;for(let C=c;C<f;C++){const R=t.data[C],U=qn(R);U&&gm(n,i,R);const te=$(n,t,C,i);Ls(te,n),null!==y&&Dy(0,C-c,te,R,0,y),U&&(mn(i.index,n)[8]=te)}}(t,n,i,B(i,n)),128==(128&i.flags)&&function(t,n,i){const o=i.directiveStart,c=i.directiveEnd,y=i.index,C=tr.lFrame.currentDirectiveIndex;try{T(y);for(let R=o;R<c;R++){const U=t.data[R],te=n[R];Ao(R),(null!==U.hostBindings||0!==U.hostVars||null!==U.hostAttrs)&&Qf(U,te)}}finally{T(-1),Ao(C)}}(t,n,i))}function Wd(t,n,i=B){const o=n.localNames;if(null!==o){let c=n.index+1;for(let f=0;f<o.length;f+=2){const y=o[f+1],C=-1===y?i(n,t):t[y];t[c++]=C}}}function Yf(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Bh(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function Bh(t,n,i,o,c,f,y,C,R,U){const te=20+o,Se=te+c,Re=function(t,n){const i=[];for(let o=0;o<n;o++)i.push(o<t?null:_r);return i}(te,Se),tt="function"==typeof U?U():U;return Re[1]={type:t,blueprint:Re,template:i,queries:null,viewQuery:C,declTNode:n,data:Re.slice().fill(null,te),bindingStartIndex:te,expandoStartIndex:Se,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:R,consts:tt,incompleteFirstPass:!1}}function Uh(t,n,i,o){const c=ep(n);null===i?c.push(o):(c.push(i),t.firstCreatePass&&tp(t).push(o,c.length-1))}function jh(t,n,i){for(let o in t)if(t.hasOwnProperty(o)){const c=t[o];(i=null===i?{}:i).hasOwnProperty(o)?i[o].push(n,c):i[o]=[n,c]}return i}function Na(t,n,i,o,c,f,y,C){const R=B(n,i);let te,U=n.inputs;!C&&null!=U&&(te=U[o])?(qh(t,i,te,o,c),On(n)&&function(t,n){const i=mn(n,t);16&i[2]||(i[2]|=64)}(i,n.index)):3&n.type&&(o=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(o),c=null!=y?y(c,n.value||"",o):c,G(f)?f.setProperty(R,o,c):kr(o)||(R.setProperty?R.setProperty(o,c):R[o]=c))}function sg(t,n,i,o){let c=!1;if(Go()){const f=function(t,n,i){const o=t.directiveRegistry;let c=null;if(o)for(let f=0;f<o.length;f++){const y=o[f];Nf(i,y.selectors,!1)&&(c||(c=[]),os(fi(i,n),t,y.type),qn(y)?(nd(t,i),c.unshift(y)):c.push(y))}return c}(t,n,i),y=null===o?null:{"":-1};if(null!==f){c=!0,pm(i,t.data.length,f.length);for(let te=0;te<f.length;te++){const Se=f[te];Se.providersResolver&&Se.providersResolver(Se)}let C=!1,R=!1,U=Xc(t,n,f.length,null);for(let te=0;te<f.length;te++){const Se=f[te];i.mergedAttrs=ss(i.mergedAttrs,Se.hostAttrs),ag(t,i,n,U,Se),Ty(U,Se,y),null!==Se.contentQueries&&(i.flags|=8),(null!==Se.hostBindings||null!==Se.hostAttrs||0!==Se.hostVars)&&(i.flags|=128);const Re=Se.type.prototype;!C&&(Re.ngOnChanges||Re.ngOnInit||Re.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(i.index),C=!0),!R&&(Re.ngOnChanges||Re.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(i.index),R=!0),U++}!function(t,n){const o=n.directiveEnd,c=t.data,f=n.attrs,y=[];let C=null,R=null;for(let U=n.directiveStart;U<o;U++){const te=c[U],Se=te.inputs,Re=null===f||uu(n)?null:lg(Se,f);y.push(Re),C=jh(Se,U,C),R=jh(te.outputs,U,R)}null!==C&&(C.hasOwnProperty("class")&&(n.flags|=16),C.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=y,n.inputs=C,n.outputs=R}(t,i)}y&&function(t,n,i){if(n){const o=t.localNames=[];for(let c=0;c<n.length;c+=2){const f=i[n[c+1]];if(null==f)throw new ut("301",`Export of name '${n[c+1]}' not found!`);o.push(n[c],f)}}}(i,o,y)}return i.mergedAttrs=ss(i.mergedAttrs,i.attrs),c}function Kf(t,n,i,o,c,f){const y=f.hostBindings;if(y){let C=t.hostBindingOpCodes;null===C&&(C=t.hostBindingOpCodes=[]);const R=~n.index;(function(t){let n=t.length;for(;n>0;){const i=t[--n];if("number"==typeof i&&i<0)return i}return 0})(C)!=R&&C.push(R),C.push(o,c,y)}}function Qf(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function nd(t,n){n.flags|=2,(t.components||(t.components=[])).push(n.index)}function Ty(t,n,i){if(i){if(n.exportAs)for(let o=0;o<n.exportAs.length;o++)i[n.exportAs[o]]=t;qn(n)&&(i[""]=t)}}function pm(t,n,i){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+i,t.providerIndexes=n}function ag(t,n,i,o,c){t.data[o]=c;const f=c.factory||(c.factory=$i(c.type)),y=new $n(f,qn(c),null);t.blueprint[o]=y,i[o]=y,Kf(t,n,0,o,Xc(t,i,c.hostVars,_r),c)}function gm(t,n,i){const o=B(n,t),c=Yf(i),f=t[10],y=Fu(t,Zc(t,c,null,i.onPush?64:16,o,n,f,f.createRenderer(o,i),null,null));t[n.index]=y}function fu(t,n,i,o,c,f){const y=B(t,n);!function(t,n,i,o,c,f,y){if(null==f)G(t)?t.removeAttribute(n,c,i):n.removeAttribute(c);else{const C=null==y?$e(f):y(f,o||"",c);G(t)?t.setAttribute(n,c,C,i):i?n.setAttributeNS(i,c,C):n.setAttribute(c,C)}}(n[11],y,f,t.value,i,o,c)}function Dy(t,n,i,o,c,f){const y=f[n];if(null!==y){const C=o.setInput;for(let R=0;R<y.length;){const U=y[R++],te=y[R++],Se=y[R++];null!==C?o.setInput(i,Se,U,te):i[te]=Se}}}function lg(t,n){let i=null,o=0;for(;o<n.length;){const c=n[o];if(0!==c)if(5!==c){if("number"==typeof c)break;t.hasOwnProperty(c)&&(null===i&&(i=[]),i.push(c,t[c],n[o+1])),o+=2}else o+=2;else o+=4}return i}function Jf(t,n,i,o){return new Array(t,!0,!1,n,null,0,o,i,null,null)}function mm(t,n){const i=mn(n,t);if(Wr(i)){const o=i[1];80&i[2]?hu(o,i,o.template,i[8]):i[5]>0&&zh(i)}}function zh(t){for(let o=ic(t);null!==o;o=Ra(o))for(let c=10;c<o.length;c++){const f=o[c];if(1024&f[2]){const y=f[1];hu(y,f,y.template,f[8])}else f[5]>0&&zh(f)}const i=t[1].components;if(null!==i)for(let o=0;o<i.length;o++){const c=mn(i[o],t);Wr(c)&&c[5]>0&&zh(c)}}function cg(t,n){const i=mn(n,t),o=i[1];(function(t,n){for(let i=n.length;i<t.blueprint.length;i++)n.push(t.blueprint[i])})(o,i),Jc(o,i,i[8])}function Fu(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function pu(t){for(;t;){t[2]|=64;const n=fs(t);if(Rr(t)&&!n)return t;t=n}return null}function mc(t,n,i){const o=n[10];o.begin&&o.begin();try{hu(t,n,t.template,i)}catch(c){throw yg(n,c),c}finally{o.end&&o.end()}}function fg(t){!function(t){for(let n=0;n<t.components.length;n++){const i=t.components[n],o=su(i),c=o[1];Hd(c,o,c.template,i)}}(t[8])}function pg(t,n,i){to(0),n(t,i)}const gg=(()=>Promise.resolve(null))();function ep(t){return t[7]||(t[7]=[])}function tp(t){return t.cleanup||(t.cleanup=[])}function yg(t,n){const i=t[9],o=i?i.get(Ys,null):null;o&&o.handleError(n)}function qh(t,n,i,o,c){for(let f=0;f<i.length;){const y=i[f++],C=i[f++],R=n[y],U=t.data[y];null!==U.setInput?U.setInput(R,c,o,C):R[C]=c}}function Sl(t,n,i){const o=H(n,t);!function(t,n,i){G(t)?t.setValue(n,i):n.textContent=i}(t[11],o,i)}function zd(t,n,i){let o=i?t.styles:null,c=i?t.classes:null,f=0;if(null!==n)for(let y=0;y<n.length;y++){const C=n[y];"number"==typeof C?f=C:1==f?c=we(c,C):2==f&&(o=we(o,C+": "+n[++y]+";"))}i?t.styles=o:t.stylesWithoutHost=o,i?t.classes=c:t.classesWithoutHost=c}const yc=new Ti("INJECTOR",-1);class np{get(n,i=pe){if(i===pe){const o=new Error(`NullInjectorError: No provider for ${ne(n)}!`);throw o.name="NullInjectorError",o}return i}}const rd=new Ti("Set Injector scope."),qd={},vm={};let rp;function Eg(){return void 0===rp&&(rp=new np),rp}function Yh(t,n=null,i=null,o){return new sp(t,i,n||Eg(),o)}class sp{constructor(n,i,o,c=null){this.parent=o,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];i&&ws(i,C=>this.processProvider(C,n,i)),ws([n],C=>this.processInjectorType(C,[],f)),this.records.set(yc,vc(void 0,this));const y=this.records.get(rd);this.scope=null!=y?y.value:null,this.source=c||("object"==typeof n?null:ne(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,i=pe,o=tn.Default){this.assertNotDestroyed();const c=Oi(this),f=Qn(void 0);try{if(!(o&tn.SkipSelf)){let C=this.records.get(n);if(void 0===C){const R=("function"==typeof(t=n)||"object"==typeof t&&t instanceof Ti)&&kn(n);C=R&&this.injectableDefInScope(R)?vc(_c(n),qd):null,this.records.set(n,C)}if(null!=C)return this.hydrate(n,C)}return(o&tn.Self?Eg():this.parent).get(n,i=o&tn.Optional&&i===pe?null:i)}catch(y){if("NullInjectorError"===y.name){if((y[Et]=y[Et]||[]).unshift(ne(n)),c)throw y;return Ta(y,n,"R3InjectorError",this.source)}throw y}finally{Qn(f),Oi(c)}var t}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((o,c)=>n.push(ne(c))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(n,i,o){if(!(n=Ee(n)))return!1;let c=vr(n);const f=null==c&&n.ngModule||void 0,y=void 0===f?n:f,C=-1!==o.indexOf(y);if(void 0!==f&&(c=vr(f)),null==c)return!1;if(null!=c.imports&&!C){let te;o.push(y);try{ws(c.imports,Se=>{this.processInjectorType(Se,i,o)&&(void 0===te&&(te=[]),te.push(Se))})}finally{}if(void 0!==te)for(let Se=0;Se<te.length;Se++){const{ngModule:Re,providers:tt}=te[Se];ws(tt,pt=>this.processProvider(pt,Re,tt||Yn))}}this.injectorDefTypes.add(y);const R=$i(y)||(()=>new y);this.records.set(y,vc(R,qd));const U=c.providers;if(null!=U&&!C){const te=n;ws(U,Se=>this.processProvider(Se,te,U))}return void 0!==f&&void 0!==n.providers}processProvider(n,i,o){let c=Lu(n=Ee(n))?n:Ee(n&&n.provide);const f=(t=n,Zh(t)?vc(void 0,t.useValue):vc(Kh(t),qd));var t;if(Lu(n)||!0!==n.multi)this.records.get(c);else{let y=this.records.get(c);y||(y=vc(void 0,qd,!0),y.factory=()=>ea(y.multi),this.records.set(c,y)),c=n,y.multi.push(n)}this.records.set(c,f)}hydrate(n,i){return i.value===qd&&(i.value=vm,i.value=i.factory()),"object"==typeof i.value&&i.value&&null!==(t=i.value)&&"object"==typeof t&&"function"==typeof t.ngOnDestroy&&this.onDestroy.add(i.value),i.value;var t}injectableDefInScope(n){if(!n.providedIn)return!1;const i=Ee(n.providedIn);return"string"==typeof i?"any"===i||i===this.scope:this.injectorDefTypes.has(i)}}function _c(t){const n=kn(t),i=null!==n?n.factory:$i(t);if(null!==i)return i;if(t instanceof Ti)throw new Error(`Token ${ne(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const n=t.length;if(n>0){const o=_o(n,"?");throw new Error(`Can't resolve all parameters for ${ne(t)}: (${o.join(", ")}).`)}const i=function(t){const n=t&&(t[ur]||t[En]);if(n){const i=function(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${i}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${i}" class.`),n}return null}(t);return null!==i?()=>i.factory(t):()=>new t}(t);throw new Error("unreachable")}function Kh(t,n,i){let o;if(Lu(t)){const c=Ee(t);return $i(c)||_c(c)}if(Zh(t))o=()=>Ee(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))o=()=>t.useFactory(...ea(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))o=()=>Ii(Ee(t.useExisting));else{const c=Ee(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return $i(c)||_c(c);o=()=>new c(...ea(t.deps))}return o}function vc(t,n,i=!1){return{factory:t,value:n,multi:i?[]:void 0}}function Zh(t){return null!==t&&"object"==typeof t&&Mr in t}function Lu(t){return"function"==typeof t}const Qh=function(t,n,i){return function(t,n=null,i=null,o){const c=Yh(t,n,i,o);return c._resolveInjectorDefTypes(),c}({name:i},n,t,i)};let ps=(()=>{class t{static create(i,o){return Array.isArray(i)?Qh(i,o,""):Qh(i.providers,i.parent,i.name||"")}}return t.THROW_IF_NOT_FOUND=pe,t.NULL=new np,t.\u0275prov=Mt({token:t,providedIn:"any",factory:()=>Ii(yc)}),t.__NG_ELEMENT_ID__=-1,t})();function Je(t,n){Nr(su(t)[1],Ui())}function Yt(t){let n=function(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),i=!0;const o=[t];for(;n;){let c;if(qn(t))c=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Error("Directives cannot inherit Components");c=n.\u0275dir}if(c){if(i){o.push(c);const y=t;y.inputs=pr(t.inputs),y.declaredInputs=pr(t.declaredInputs),y.outputs=pr(t.outputs);const C=c.hostBindings;C&&ll(t,C);const R=c.viewQuery,U=c.contentQueries;if(R&&bi(t,R),U&&No(t,U),Z(t.inputs,c.inputs),Z(t.declaredInputs,c.declaredInputs),Z(t.outputs,c.outputs),qn(c)&&c.data.animation){const te=t.data;te.animation=(te.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let y=0;y<f.length;y++){const C=f[y];C&&C.ngInherit&&C(t),C===Yt&&(i=!1)}}n=Object.getPrototypeOf(n)}!function(t){let n=0,i=null;for(let o=t.length-1;o>=0;o--){const c=t[o];c.hostVars=n+=c.hostVars,c.hostAttrs=ss(c.hostAttrs,i=ss(i,c.hostAttrs))}}(o)}function pr(t){return t===Xn?{}:t===Yn?[]:t}function bi(t,n){const i=t.viewQuery;t.viewQuery=i?(o,c)=>{n(o,c),i(o,c)}:n}function No(t,n){const i=t.contentQueries;t.contentQueries=i?(o,c,f)=>{n(o,c,f),i(o,c,f)}:n}function ll(t,n){const i=t.hostBindings;t.hostBindings=i?(o,c)=>{n(o,c),i(o,c)}:n}let Am=null;function rf(){if(!Am){const t=Sn.Symbol;if(t&&t.iterator)Am=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let i=0;i<n.length;++i){const o=n[i];"entries"!==o&&"size"!==o&&Map.prototype[o]===Map.prototype.entries&&(Am=o)}}}return Am}function _p(t){return!!vp(t)&&(Array.isArray(t)||!(t instanceof Map)&&rf()in t)}function vp(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function na(t,n,i){return!Object.is(t[n],i)&&(t[n]=i,!0)}function Ag(t,n,i,o){const c=rn();return na(c,Cs(),n)&&(Cr(),fu(q(),c,t,n,i,o)),Ag}function od(t,n,i,o){return na(t,Cs(),i)?n+$e(i)+o:_r}function Ss(t,n,i,o,c,f,y,C){const R=rn(),U=Cr(),te=t+20,Se=U.firstCreatePass?function(t,n,i,o,c,f,y,C,R){const U=n.consts,te=Qc(n,t,4,y||null,li(U,C));sg(n,i,te,li(U,R)),Nr(n,te);const Se=te.tViews=Bh(2,te,o,c,f,n.directiveRegistry,n.pipeRegistry,null,n.schemas,U);return null!==n.queries&&(n.queries.template(n,te),Se.queries=n.queries.embeddedTView(te)),te}(te,U,R,n,i,o,c,f,y):U.data[te];Os(Se,!1);const Re=R[11].createComment("");xh(U,R,Re,Se),Ls(Re,R),Fu(R,R[te]=Jf(Re,R,Re,Se)),Vn(Se)&&eg(U,R,Se),null!=y&&Wd(R,Se,C)}function bp(t,n=tn.Default){const i=rn();return null===i?Ii(t,n):Ea(Ui(),i,Ee(t),n)}function Gy(){throw new Error("invalid")}function Bm(t,n,i){const o=rn();return na(o,Cs(),n)&&Na(Cr(),q(),o,t,n,o[11],i,!1),Bm}function kg(t,n,i,o,c){const y=c?"class":"style";qh(t,i,n.inputs[y],y,o)}function $m(t,n,i,o){const c=rn(),f=Cr(),y=20+t,C=c[11],R=c[y]=Wl(C,n,tr.lFrame.currentNamespace),U=f.firstCreatePass?function(t,n,i,o,c,f,y){const C=n.consts,U=Qc(n,t,2,c,li(C,f));return sg(n,i,U,li(C,y)),null!==U.attrs&&zd(U,U.attrs,!1),null!==U.mergedAttrs&&zd(U,U.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,U),U}(y,f,c,0,n,i,o):f.data[y];Os(U,!0);const te=U.mergedAttrs;null!==te&&pl(C,R,te);const Se=U.classes;null!==Se&&Za(C,R,Se);const Re=U.styles;null!==Re&&Rh(C,R,Re),64!=(64&U.flags)&&xh(f,c,R,U),0===tr.lFrame.elementDepthCount&&Ls(R,c),tr.lFrame.elementDepthCount++,Vn(U)&&(eg(f,c,U),function(t,n,i){if(on(n)){const c=n.directiveEnd;for(let f=n.directiveStart;f<c;f++){const y=t.data[f];y.contentQueries&&y.contentQueries(1,i[f],f)}}}(f,U,c)),null!==o&&Wd(c,U)}function Fg(){let t=Ui();so()?zo():(t=t.parent,Os(t,!1));const n=t;tr.lFrame.elementDepthCount--;const i=Cr();i.firstCreatePass&&(Nr(i,t),on(t)&&i.queries.elementEnd(t)),null!=n.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(n)&&kg(i,n,rn(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(n)&&kg(i,n,rn(),n.stylesWithoutHost,!1)}function zy(t,n,i,o){$m(t,n,i,o),Fg()}function Um(){return rn()}function Lg(t){return!!t&&"function"==typeof t.then}function jm(t){return!!t&&"function"==typeof t.subscribe}const Cp=jm;function gf(t,n,i,o){const c=rn(),f=Cr(),y=Ui();return function(t,n,i,o,c,f,y,C){const R=Vn(o),te=t.firstCreatePass&&tp(t),Se=n[8],Re=ep(n);let tt=!0;if(3&o.type||C){const St=B(o,n),Cn=C?C(St):St,sn=Re.length,Tr=C?qr=>C(ze(qr[o.index])):o.index;if(G(i)){let qr=null;if(!C&&R&&(qr=function(t,n,i,o){const c=t.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const y=c[f];if(y===i&&c[f+1]===o){const C=n[7],R=c[f+2];return C.length>R?C[R]:null}"string"==typeof y&&(f+=2)}return null}(t,n,c,o.index)),null!==qr)(qr.__ngLastListenerFn__||qr).__ngNextListenerFn__=f,qr.__ngLastListenerFn__=f,tt=!1;else{f=Cc(o,n,Se,f,!1);const Ri=i.listen(Cn,c,f);Re.push(f,Ri),te&&te.push(c,Tr,sn,sn+1)}}else f=Cc(o,n,Se,f,!0),Cn.addEventListener(c,f,y),Re.push(f),te&&te.push(c,Tr,sn,y)}else f=Cc(o,n,Se,f,!1);const pt=o.outputs;let jt;if(tt&&null!==pt&&(jt=pt[c])){const St=jt.length;if(St)for(let Cn=0;Cn<St;Cn+=2){const ma=n[jt[Cn]][jt[Cn+1]].subscribe(f),Hu=Re.length;Re.push(f,ma),te&&te.push(c,o.index,Hu,-(Hu+1))}}}(f,c,c[11],y,t,n,!!i,o),gf}function mf(t,n,i,o){try{return!1!==i(o)}catch(c){return yg(t,c),!1}}function Cc(t,n,i,o,c){return function f(y){if(y===Function)return o;const C=2&t.flags?mn(t.index,n):n;0==(32&n[2])&&pu(C);let R=mf(n,0,o,y),U=f.__ngNextListenerFn__;for(;U;)R=mf(n,0,U,y)&&R,U=U.__ngNextListenerFn__;return c&&!1===R&&(y.preventDefault(),y.returnValue=!1),R}}function Xy(t=1){return function(t){return(tr.lFrame.contextLView=function(t,n){for(;t>0;)n=n[15],t--;return n}(t,tr.lFrame.contextLView))[8]}(t)}function av(t,n){let i=null;const o=function(t){const n=t.attrs;if(null!=n){const i=n.indexOf(5);if(0==(1&i))return n[i+1]}return null}(t);for(let c=0;c<n.length;c++){const f=n[c];if("*"!==f){if(null===o?Nf(t,f,!0):Od(o,f))return c}else i=c}return i}function Jy(t){const n=rn()[16][6];if(!n.projection){const o=n.projection=_o(t?t.length:1,null),c=o.slice();let f=n.child;for(;null!==f;){const y=t?av(f,t):0;null!==y&&(c[y]?c[y].projectionNext=f:o[y]=f,c[y]=f),f=f.next}}}function wc(t,n=0,i){const o=rn(),c=Cr(),f=Qc(c,20+t,16,null,i||null);null===f.projection&&(f.projection=n),zo(),64!=(64&f.flags)&&function(t,n,i){Mf(n[11],0,n,i,Sh(t,i,n),Rf(i.parent||n[6],i,n))}(c,o,f)}function Hm(t,n,i){return Wm(t,"",n,"",i),Hm}function Wm(t,n,i,o,c){const f=rn(),y=od(f,n,i,o);return y!==_r&&Na(Cr(),q(),f,t,y,f[11],c,!1),Wm}function lv(t,n,i,o,c){const f=t[i+1],y=null===n;let C=o?Ja(f):Dl(f),R=!1;for(;0!==C&&(!1===R||y);){const te=t[C+1];P0(t[C],n)&&(R=!0,t[C+1]=o?fc(te):Vf(te)),C=o?Ja(te):Dl(te)}R&&(t[i+1]=o?Vf(f):fc(f))}function P0(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&Ca(t,n)>=0}function a(t,n){return function(t,n,i,o){const c=rn(),f=Cr(),y=function(t){const n=tr.lFrame,i=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,i}(2);f.firstUpdatePass&&function(t,n,i,o){const c=t.data;if(null===c[i+1]){const f=c[N()],y=function(t,n){return n>=t.expandoStartIndex}(t,i);(function(t,n){return 0!=(t.flags&(n?16:32))})(f,o)&&null===n&&!y&&(n=!1),n=function(t,n,i,o){const c=function(t){const n=tr.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let f=o?n.residualClasses:n.residualStyles;if(null===c)0===(o?n.classBindings:n.styleBindings)&&(i=xi(i=Jn(null,t,n,i,o),n.attrs,o),f=null);else{const y=n.directiveStylingLast;if(-1===y||t[y]!==c)if(i=Jn(c,t,n,i,o),null===f){let R=function(t,n,i){const o=i?n.classBindings:n.styleBindings;if(0!==Dl(o))return t[Ja(o)]}(t,n,o);void 0!==R&&Array.isArray(R)&&(R=Jn(null,t,n,R[1],o),R=xi(R,n.attrs,o),function(t,n,i,o){t[Ja(i?n.classBindings:n.styleBindings)]=o}(t,n,o,R))}else f=function(t,n,i){let o;const c=n.directiveEnd;for(let f=1+n.directiveStylingLast;f<c;f++)o=xi(o,t[f].hostAttrs,i);return xi(o,n.attrs,i)}(t,n,o)}return void 0!==f&&(o?n.residualClasses=f:n.residualStyles=f),i}(c,f,n,o),function(t,n,i,o,c,f){let y=f?n.classBindings:n.styleBindings,C=Ja(y),R=Dl(y);t[o]=i;let te,U=!1;if(Array.isArray(i)){const Se=i;te=Se[1],(null===te||Ca(Se,te)>0)&&(U=!0)}else te=i;if(c)if(0!==R){const Re=Ja(t[C+1]);t[o+1]=Nd(Re,C),0!==Re&&(t[Re+1]=Ds(t[Re+1],o)),t[C+1]=function(t,n){return 131071&t|n<<17}(t[C+1],o)}else t[o+1]=Nd(C,0),0!==C&&(t[C+1]=Ds(t[C+1],o)),C=o;else t[o+1]=Nd(R,0),0===C?C=o:t[R+1]=Ds(t[R+1],o),R=o;U&&(t[o+1]=Vf(t[o+1])),lv(t,te,o,!0),lv(t,te,o,!1),function(t,n,i,o,c){const f=c?t.residualClasses:t.residualStyles;null!=f&&"string"==typeof n&&Ca(f,n)>=0&&(i[o+1]=fc(i[o+1]))}(n,te,t,o,f),y=Nd(C,R),f?n.classBindings=y:n.styleBindings=y}(c,f,n,i,y,o)}}(f,t,y,o),n!==_r&&na(c,y,n)&&function(t,n,i,o,c,f,y,C){if(!(3&n.type))return;const R=t.data,U=R[C+1];ko(function(t){return 1==(1&t)}(U)?qi(R,n,i,c,Dl(U),y):void 0)||(ko(f)||function(t){return 2==(2&t)}(U)&&(f=qi(R,null,i,c,C,y)),function(t,n,i,o,c){const f=G(t);if(n)c?f?t.addClass(i,o):i.classList.add(o):f?t.removeClass(i,o):i.classList.remove(o);else{let y=-1===o.indexOf("-")?void 0:qa.DashCase;if(null==c)f?t.removeStyle(i,o,y):i.style.removeProperty(o);else{const C="string"==typeof c&&c.endsWith("!important");C&&(c=c.slice(0,-10),y|=qa.Important),f?t.setStyle(i,o,c,y):i.style.setProperty(o,c,C?"important":"")}}}(o,y,H(N(),i),c,f))}(f,f.data[N()],c,c[11],t,c[y+1]=function(t,n){return null==t||("string"==typeof n?t+=n:"object"==typeof t&&(t=ne(za(t)))),t}(n,i),o,y)}(t,n,null,!0),a}function Jn(t,n,i,o,c){let f=null;const y=i.directiveEnd;let C=i.directiveStylingLast;for(-1===C?C=i.directiveStart:C++;C<y&&(f=n[C],o=xi(o,f.hostAttrs,c),f!==t);)C++;return null!==t&&(i.directiveStylingLast=C),o}function xi(t,n,i){const o=i?1:2;let c=-1;if(null!==n)for(let f=0;f<n.length;f++){const y=n[f];"number"==typeof y?c=y:c===o&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Gs(t,y,!!i||n[++f]))}return void 0===t?null:t}function qi(t,n,i,o,c,f){const y=null===n;let C;for(;c>0;){const R=t[c],U=Array.isArray(R),te=U?R[1]:R,Se=null===te;let Re=i[c+1];Re===_r&&(Re=Se?Yn:void 0);let tt=Se?ca(Re,o):te===o?Re:void 0;if(U&&!ko(tt)&&(tt=ca(R,o)),ko(tt)&&(C=tt,y))return C;const pt=t[c+1];c=y?Ja(pt):Dl(pt)}if(null!==n){let R=f?n.residualClasses:n.residualStyles;null!=R&&(C=ca(R,o))}return C}function ko(t){return void 0!==t}function F0(t,n=""){const i=rn(),o=Cr(),c=t+20,f=o.firstCreatePass?Qc(o,c,1,n,null):o.data[c],y=i[c]=function(t,n){return G(t)?t.createText(n):t.createTextNode(n)}(i[11],n);xh(o,i,y,f),Os(f,!1)}function fv(t){return h_("",t,""),fv}function h_(t,n,i){const o=rn(),c=od(o,t,n,i);return c!==_r&&Sl(o,N(),c),h_}function pv(t,n,i){const o=rn();return na(o,Cs(),n)&&Na(Cr(),q(),o,t,n,o[11],i,!0),pv}const Tp=void 0;var oC=["en",[["a","p"],["AM","PM"],Tp],[["AM","PM"],Tp,Tp],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Tp,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Tp,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Tp,"{1} 'at' {0}",Tp],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const n=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===i?1:5}];let Vg={};function gv(t){const n=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let i=nE(n);if(i)return i;const o=n.split("-")[0];if(i=nE(o),i)return i;if("en"===o)return oC;throw new Error(`Missing locale data for the locale "${t}".`)}function tE(t){return gv(t)[Vr.PluralCase]}function nE(t){return t in Vg||(Vg[t]=Sn.ng&&Sn.ng.common&&Sn.ng.common.locales&&Sn.ng.common.locales[t]),Vg[t]}var Vr=(()=>((Vr=Vr||{})[Vr.LocaleId=0]="LocaleId",Vr[Vr.DayPeriodsFormat=1]="DayPeriodsFormat",Vr[Vr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Vr[Vr.DaysFormat=3]="DaysFormat",Vr[Vr.DaysStandalone=4]="DaysStandalone",Vr[Vr.MonthsFormat=5]="MonthsFormat",Vr[Vr.MonthsStandalone=6]="MonthsStandalone",Vr[Vr.Eras=7]="Eras",Vr[Vr.FirstDayOfWeek=8]="FirstDayOfWeek",Vr[Vr.WeekendRange=9]="WeekendRange",Vr[Vr.DateFormat=10]="DateFormat",Vr[Vr.TimeFormat=11]="TimeFormat",Vr[Vr.DateTimeFormat=12]="DateTimeFormat",Vr[Vr.NumberSymbols=13]="NumberSymbols",Vr[Vr.NumberFormats=14]="NumberFormats",Vr[Vr.CurrencyCode=15]="CurrencyCode",Vr[Vr.CurrencySymbol=16]="CurrencySymbol",Vr[Vr.CurrencyName=17]="CurrencyName",Vr[Vr.Currencies=18]="Currencies",Vr[Vr.Directionality=19]="Directionality",Vr[Vr.PluralCase=20]="PluralCase",Vr[Vr.ExtraData=21]="ExtraData",Vr))();const f_="en-US";let rE=f_;function mv(t){st(t,"Expected localeId to be defined"),"string"==typeof t&&(rE=t.toLowerCase().replace(/_/g,"-"))}function vv(t,n,i,o,c){if(t=Ee(t),Array.isArray(t))for(let f=0;f<t.length;f++)vv(t[f],n,i,o,c);else{const f=Cr(),y=rn();let C=Lu(t)?t:Ee(t.provide),R=Kh(t);const U=Ui(),te=1048575&U.providerIndexes,Se=U.directiveStart,Re=U.providerIndexes>>20;if(Lu(t)||!t.multi){const tt=new $n(R,c,bp),pt=Iv(C,n,c?te:te+Re,Se);-1===pt?(os(fi(U,y),f,C),Ev(f,t,n.length),n.push(C),U.directiveStart++,U.directiveEnd++,c&&(U.providerIndexes+=1048576),i.push(tt),y.push(tt)):(i[pt]=tt,y[pt]=tt)}else{const tt=Iv(C,n,te+Re,Se),pt=Iv(C,n,te,te+Re),jt=tt>=0&&i[tt],St=pt>=0&&i[pt];if(c&&!St||!c&&!jt){os(fi(U,y),f,C);const Cn=function(t,n,i,o,c){const f=new $n(t,i,bp);return f.multi=[],f.index=n,f.componentProviders=0,SE(f,c,o&&!i),f}(c?rw:nw,i.length,c,o,R);!c&&St&&(i[pt].providerFactory=Cn),Ev(f,t,n.length,0),n.push(C),U.directiveStart++,U.directiveEnd++,c&&(U.providerIndexes+=1048576),i.push(Cn),y.push(Cn)}else Ev(f,t,tt>-1?tt:pt,SE(i[c?pt:tt],R,!c&&o));!c&&o&&St&&i[pt].componentProviders++}}}function Ev(t,n,i,o){const c=Lu(n);if(c||function(t){return!!t.useClass}(n)){const y=(n.useClass||n).prototype.ngOnDestroy;if(y){const C=t.destroyHooks||(t.destroyHooks=[]);if(!c&&n.multi){const R=C.indexOf(i);-1===R?C.push(i,[o,y]):C[R+1].push(o,y)}else C.push(i,y)}}}function SE(t,n,i){return i&&t.componentProviders++,t.multi.push(n)-1}function Iv(t,n,i,o){for(let c=i;c<o;c++)if(n[c]===t)return c;return-1}function nw(t,n,i,o){return bv(this.multi,[])}function rw(t,n,i,o){const c=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,C=$(i,i[1],this.providerFactory.index,o);f=C.slice(0,y),bv(c,f);for(let R=y;R<C.length;R++)f.push(C[R])}else f=[],bv(c,f);return f}function bv(t,n){for(let i=0;i<t.length;i++)n.push((0,t[i])());return n}function AE(t,n=[]){return i=>{i.providersResolver=(o,c)=>function(t,n,i){const o=Cr();if(o.firstCreatePass){const c=qn(t);vv(i,o.data,o.blueprint,c,!0),vv(n,o.data,o.blueprint,c,!1)}}(o,c?c(t):t,n)}}class xE{}const ME="ngComponent";class ow{resolveComponentFactory(n){throw function(t){const n=Error(`No component factory found for ${ne(t)}. Did you add it to @NgModule.entryComponents?`);return n[ME]=t,n}(n)}}let $g=(()=>{class t{}return t.NULL=new ow,t})();function __(...t){}function Ug(t,n){return new dd(B(t,n))}const uw=function(){return Ug(Ui(),rn())};let dd=(()=>{class t{constructor(i){this.nativeElement=i}}return t.__NG_ELEMENT_ID__=uw,t})();function OE(t){return t instanceof dd?t.nativeElement:t}class v_{}let cw=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>hw(),t})();const hw=function(){const t=rn(),i=mn(Ui().index,t);return function(t){return t[11]}(At(i)?i:t)};let wv=(()=>{class t{}return t.\u0275prov=Mt({token:t,providedIn:"root",factory:()=>null}),t})();class PE{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const Tv=new PE("12.2.16");class NE{constructor(){}supports(n){return _p(n)}create(n){return new mw(n)}}const gw=(t,n)=>n;class mw{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||gw}forEachItem(n){let i;for(i=this._itHead;null!==i;i=i._next)n(i)}forEachOperation(n){let i=this._itHead,o=this._removalsHead,c=0,f=null;for(;i||o;){const y=!o||i&&i.currentIndex<FE(o,c,f)?i:o,C=FE(y,c,f),R=y.currentIndex;if(y===o)c--,o=o._nextRemoved;else if(i=i._next,null==y.previousIndex)c++;else{f||(f=[]);const U=C-c,te=R-c;if(U!=te){for(let Re=0;Re<U;Re++){const tt=Re<f.length?f[Re]:f[Re]=0,pt=tt+Re;te<=pt&&pt<U&&(f[Re]=tt+1)}f[y.previousIndex]=te-U}}C!==R&&n(y,C,R)}}forEachPreviousItem(n){let i;for(i=this._previousItHead;null!==i;i=i._nextPrevious)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachMovedItem(n){let i;for(i=this._movesHead;null!==i;i=i._nextMoved)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}forEachIdentityChange(n){let i;for(i=this._identityChangesHead;null!==i;i=i._nextIdentityChange)n(i)}diff(n){if(null==n&&(n=[]),!_p(n))throw new Error(`Error trying to diff '${ne(n)}'. Only arrays and iterables are allowed`);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let c,f,y,i=this._itHead,o=!1;if(Array.isArray(n)){this.length=n.length;for(let C=0;C<this.length;C++)f=n[C],y=this._trackByFn(C,f),null!==i&&Object.is(i.trackById,y)?(o&&(i=this._verifyReinsertion(i,f,y,C)),Object.is(i.item,f)||this._addIdentityChange(i,f)):(i=this._mismatch(i,f,y,C),o=!0),i=i._next}else c=0,function(t,n){if(Array.isArray(t))for(let i=0;i<t.length;i++)n(t[i]);else{const i=t[rf()]();let o;for(;!(o=i.next()).done;)n(o.value)}}(n,C=>{y=this._trackByFn(c,C),null!==i&&Object.is(i.trackById,y)?(o&&(i=this._verifyReinsertion(i,C,y,c)),Object.is(i.item,C)||this._addIdentityChange(i,C)):(i=this._mismatch(i,C,y,c),o=!0),i=i._next,c++}),this.length=c;return this._truncate(i),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,i,o,c){let f;return null===n?f=this._itTail:(f=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._reinsertAfter(n,f,c)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(o,c))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._moveAfter(n,f,c)):n=this._addAfter(new yw(i,o),f,c),n}_verifyReinsertion(n,i,o,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==f?n=this._reinsertAfter(f,n._prev,c):n.currentIndex!=c&&(n.currentIndex=c,this._addToMoves(n,c)),n}_truncate(n){for(;null!==n;){const i=n._next;this._addToRemovals(this._unlink(n)),n=i}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,i,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const c=n._prevRemoved,f=n._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(n,i,o),this._addToMoves(n,o),n}_moveAfter(n,i,o){return this._unlink(n),this._insertAfter(n,i,o),this._addToMoves(n,o),n}_addAfter(n,i,o){return this._insertAfter(n,i,o),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,i,o){const c=null===i?this._itHead:i._next;return n._next=c,n._prev=i,null===c?this._itTail=n:c._prev=n,null===i?this._itHead=n:i._next=n,null===this._linkedRecords&&(this._linkedRecords=new kE),this._linkedRecords.put(n),n.currentIndex=o,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const i=n._prev,o=n._next;return null===i?this._itHead=o:i._next=o,null===o?this._itTail=i:o._prev=i,n}_addToMoves(n,i){return n.previousIndex===i||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new kE),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,i){return n.item=i,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class yw{constructor(n,i){this.item=n,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class _w{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,i){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===i||i<=o.currentIndex)&&Object.is(o.trackById,n))return o;return null}remove(n){const i=n._prevDup,o=n._nextDup;return null===i?this._head=o:i._nextDup=o,null===o?this._tail=i:o._prevDup=i,null===this._head}}class kE{constructor(){this.map=new Map}put(n){const i=n.trackById;let o=this.map.get(i);o||(o=new _w,this.map.set(i,o)),o.add(n)}get(n,i){const c=this.map.get(n);return c?c.get(n,i):null}remove(n){const i=n.trackById;return this.map.get(i).remove(n)&&this.map.delete(i),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function FE(t,n,i){const o=t.previousIndex;if(null===o)return o;let c=0;return i&&o<i.length&&(c=i[o]),o+n+c}class LE{constructor(){}supports(n){return n instanceof Map||vp(n)}create(){return new vw}}class vw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let i;for(i=this._mapHead;null!==i;i=i._next)n(i)}forEachPreviousItem(n){let i;for(i=this._previousMapHead;null!==i;i=i._nextPrevious)n(i)}forEachChangedItem(n){let i;for(i=this._changesHead;null!==i;i=i._nextChanged)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}diff(n){if(n){if(!(n instanceof Map||vp(n)))throw new Error(`Error trying to diff '${ne(n)}'. Only maps and objects are allowed`)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(n,(o,c)=>{if(i&&i.key===c)this._maybeAddToChanges(i,o),this._appendAfter=i,i=i._next;else{const f=this._getOrCreateRecordForKey(c,o);i=this._insertBeforeOrAppend(i,f)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let o=i;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,i){if(n){const o=n._prev;return i._next=n,i._prev=o,n._prev=i,o&&(o._next=i),n===this._mapHead&&(this._mapHead=i),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(n,i){if(this._records.has(n)){const c=this._records.get(n);this._maybeAddToChanges(c,i);const f=c._prev,y=c._next;return f&&(f._next=y),y&&(y._prev=f),c._next=null,c._prev=null,c}const o=new Ew(n);return this._records.set(n,o),o.currentValue=i,this._addToAdditions(o),o}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,i){Object.is(i,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=i,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,i){n instanceof Map?n.forEach(i):Object.keys(n).forEach(o=>i(n[o],o))}}class Ew{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function VE(){return new E_([new NE])}let E_=(()=>{class t{constructor(i){this.factories=i}static create(i,o){if(null!=o){const c=o.factories.slice();i=i.concat(c)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||VE()),deps:[[t,new Aa,new fa]]}}find(i){const o=this.factories.find(c=>c.supports(i));if(null!=o)return o;throw new Error(`Cannot find a differ supporting object '${i}' of type '${function(t){return t.name||typeof t}(i)}'`)}}return t.\u0275prov=Mt({token:t,providedIn:"root",factory:VE}),t})();function BE(){return new I_([new LE])}let I_=(()=>{class t{constructor(i){this.factories=i}static create(i,o){if(o){const c=o.factories.slice();i=i.concat(c)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||BE()),deps:[[t,new Aa,new fa]]}}find(i){const o=this.factories.find(c=>c.supports(i));if(o)return o;throw new Error(`Cannot find a differ supporting object '${i}'`)}}return t.\u0275prov=Mt({token:t,providedIn:"root",factory:BE}),t})();function b_(t,n,i,o,c=!1){for(;null!==i;){const f=n[i.index];if(null!==f&&o.push(ze(f)),Tt(f))for(let C=10;C<f.length;C++){const R=f[C],U=R[1].firstChild;null!==U&&b_(R[1],R,U,o)}const y=i.type;if(8&y)b_(t,n,i.child,o);else if(32&y){const C=wh(i,n);let R;for(;R=C();)o.push(R)}else if(16&y){const C=Ka(n,i);if(Array.isArray(C))o.push(...C);else{const R=fs(n[16]);b_(R[1],R,C,o,!0)}}i=c?i.projectionNext:i.next}return o}class Qm{constructor(n,i){this._lView=n,this._cdRefInjectingView=i,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,i=n[1];return b_(i,n,i.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(Tt(n)){const i=n[8],o=i?i.indexOf(this):-1;o>-1&&(Ad(n,o),co(i,o))}this._attachedToViewContainer=!1}ac(this._lView[1],this._lView)}onDestroy(n){Uh(this._lView[1],this._lView,null,n)}markForCheck(){pu(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){mc(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,n,i){go(!0);try{mc(t,n,i)}finally{go(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var n;this._appRef=null,qc(this._lView[1],n=this._lView,n[11],2,null,null)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=n}}class bw extends Qm{constructor(n){super(n),this._view=n}detectChanges(){fg(this._view)}checkNoChanges(){!function(t){go(!0);try{fg(t)}finally{go(!1)}}(this._view)}get context(){return null}}const ww=function(t){return function(t,n,i){if(On(t)&&!i){const o=mn(t.index,n);return new Qm(o,o)}return 47&t.type?new Qm(n[16],n):null}(Ui(),rn(),16==(16&t))};let Tw=(()=>{class t{}return t.__NG_ELEMENT_ID__=ww,t})();const Aw=[new LE],Rw=new E_([new NE]),Mw=new I_(Aw),Pw=function(){return C_(Ui(),rn())};let Xm=(()=>{class t{}return t.__NG_ELEMENT_ID__=Pw,t})();const Nw=Xm,kw=class extends Nw{constructor(n,i,o){super(),this._declarationLView=n,this._declarationTContainer=i,this.elementRef=o}createEmbeddedView(n){const i=this._declarationTContainer.tViews,o=Zc(this._declarationLView,i,n,16,null,i.declTNode,null,null,null,null);o[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(o[19]=f.createEmbeddedView(i)),Jc(i,o,n),new Qm(o)}};function C_(t,n){return 4&t.type?new kw(n,t,Ug(t,n)):null}class Dp{}class $E{}const Vw=function(){return HE(Ui(),rn())};let w_=(()=>{class t{}return t.__NG_ELEMENT_ID__=Vw,t})();const $w=w_,UE=class extends $w{constructor(n,i,o){super(),this._lContainer=n,this._hostTNode=i,this._hostLView=o}get element(){return Ug(this._hostTNode,this._hostLView)}get injector(){return new me(this._hostTNode,this._hostLView)}get parentInjector(){const n=Zo(this._hostTNode,this._hostLView);if(Ml(n)){const i=gr(n,this._hostLView),o=Fs(n);return new me(i[1].data[o+8],i)}return new me(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const i=jE(this._lContainer);return null!==i&&i[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,i,o){const c=n.createEmbeddedView(i||{});return this.insert(c,o),c}createComponent(n,i,o,c,f){const y=o||this.parentInjector;if(!f&&null==n.ngModule&&y){const R=y.get(Dp,null);R&&(f=R)}const C=n.create(y,c,void 0,f);return this.insert(C.hostView,i),C}insert(n,i){const o=n._lView,c=o[1];if(Tt(o[3])){const te=this.indexOf(n);if(-1!==te)this.detach(te);else{const Se=o[3],Re=new UE(Se,Se[6],Se[3]);Re.detach(Re.indexOf(n))}}const f=this._adjustIndex(i),y=this._lContainer;!function(t,n,i,o){const c=10+o,f=i.length;o>0&&(i[c-1][4]=n),o<f-10?(n[4]=i[c],Uo(i,10+o,n)):(i.push(n),n[4]=null),n[3]=i;const y=n[17];null!==y&&i!==y&&function(t,n){const i=t[9];n[16]!==n[3][3][16]&&(t[2]=!0),null===i?t[9]=[n]:i.push(n)}(y,n);const C=n[19];null!==C&&C.insertView(t),n[2]|=128}(c,o,y,f);const C=zc(f,y),R=o[11],U=Gl(R,y[7]);return null!==U&&function(t,n,i,o,c,f){o[0]=c,o[6]=n,qc(t,o,i,1,c,f)}(c,y[6],R,o,U,C),n.attachToViewContainerRef(),Uo(Dv(y),f,n),n}move(n,i){return this.insert(n,i)}indexOf(n){const i=jE(this._lContainer);return null!==i?i.indexOf(n):-1}remove(n){const i=this._adjustIndex(n,-1),o=Ad(this._lContainer,i);o&&(co(Dv(this._lContainer),i),ac(o[1],o))}detach(n){const i=this._adjustIndex(n,-1),o=Ad(this._lContainer,i);return o&&null!=co(Dv(this._lContainer),i)?new Qm(o):null}_adjustIndex(n,i=0){return null==n?this.length+i:n}};function jE(t){return t[8]}function Dv(t){return t[8]||(t[8]=[])}function HE(t,n){let i;const o=n[t.index];if(Tt(o))i=o;else{let c;if(8&t.type)c=ze(o);else{const f=n[11];c=f.createComment("");const y=B(t,n);cc(f,Gl(f,y),c,function(t,n){return G(t)?t.nextSibling(n):n.nextSibling}(f,y),!1)}n[t.index]=i=Jf(o,n,c,t),Fu(n,i)}return new UE(i,t,n)}const Gg={};class uI extends $g{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const i=Fn(n);return new dI(i,this.ngModule)}}function cI(t){const n=[];for(let i in t)t.hasOwnProperty(i)&&n.push({propName:t[i],templateName:i});return n}const FT=new Ti("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Np});class dI extends xE{constructor(n,i){super(),this.componentDef=n,this.ngModule=i,this.componentType=n.type,this.selector=n.selectors.map(Nu).join(","),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!i}get inputs(){return cI(this.componentDef.inputs)}get outputs(){return cI(this.componentDef.outputs)}create(n,i,o,c){const f=(c=c||this.ngModule)?function(t,n){return{get:(i,o,c)=>{const f=t.get(i,Gg,c);return f!==Gg||o===Gg?f:n.get(i,o,c)}}}(n,c.injector):n,y=f.get(v_,K),C=f.get(wv,null),R=y.createRenderer(null,this.componentDef),U=this.componentDef.selectors[0][0]||"div",te=o?function(t,n,i){if(G(t))return t.selectRootElement(n,i===Qt.ShadowDom);let o="string"==typeof n?t.querySelector(n):n;return o.textContent="",o}(R,o,this.componentDef.encapsulation):Wl(y.createRenderer(null,this.componentDef),U,function(t){const n=t.toLowerCase();return"svg"===n?"http://www.w3.org/2000/svg":"math"===n?"http://www.w3.org/1998/MathML/":null}(U)),Se=this.componentDef.onPush?576:528,Re=function(t,n){return{components:[],scheduler:t||Np,clean:gg,playerHandler:n||null,flags:0}}(),tt=Bh(0,null,null,1,0,null,null,null,null,null),pt=Zc(null,tt,Re,Se,null,null,y,R,C,f);let jt,St;Ci(pt);try{const Cn=function(t,n,i,o,c,f){const y=i[1];i[20]=t;const R=Qc(y,20,2,"#host",null),U=R.mergedAttrs=n.hostAttrs;null!==U&&(zd(R,U,!0),null!==t&&(pl(c,t,U),null!==R.classes&&Za(c,t,R.classes),null!==R.styles&&Rh(c,t,R.styles)));const te=o.createRenderer(t,n),Se=Zc(i,Yf(n),null,n.onPush?64:16,i[20],R,o,te,f||null,null);return y.firstCreatePass&&(os(fi(R,i),y,n.type),nd(y,R),pm(R,i.length,1)),Fu(i,Se),i[20]=Se}(te,this.componentDef,pt,y,R);if(te)if(o)pl(R,te,["ng-version",Tv.full]);else{const{attrs:sn,classes:Tr}=function(t){const n=[],i=[];let o=1,c=2;for(;o<t.length;){let f=t[o];if("string"==typeof f)2===c?""!==f&&n.push(f,t[++o]):8===c&&i.push(f);else{if(!Qa(c))break;c=f}o++}return{attrs:n,classes:i}}(this.componentDef.selectors[0]);sn&&pl(R,te,sn),Tr&&Tr.length>0&&Za(R,te,Tr.join(" "))}if(St=ue(tt,20),void 0!==i){const sn=St.projection=[];for(let Tr=0;Tr<this.ngContentSelectors.length;Tr++){const qr=i[Tr];sn.push(null!=qr?Array.from(qr):null)}}jt=function(t,n,i,o,c){const f=i[1],y=function(t,n,i){const o=Ui();t.firstCreatePass&&(i.providersResolver&&i.providersResolver(i),ag(t,o,n,Xc(t,n,1,null),i));const c=$(n,t,o.directiveStart,o);Ls(c,n);const f=B(o,n);return f&&Ls(f,n),c}(f,i,n);if(o.components.push(y),t[8]=y,c&&c.forEach(R=>R(y,n)),n.contentQueries){const R=Ui();n.contentQueries(1,y,R.directiveStart)}const C=Ui();return!f.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(T(C.index),Kf(i[1],C,0,C.directiveStart,C.directiveEnd,n),Qf(n,y)),y}(Cn,this.componentDef,pt,Re,[Je]),Jc(tt,pt,null)}finally{Ua()}return new BT(this.componentType,jt,Ug(St,pt),pt,St)}}class BT extends class{}{constructor(n,i,o,c,f){super(),this.location=o,this._rootLView=c,this._tNode=f,this.instance=i,this.hostView=this.changeDetectorRef=new bw(c),this.componentType=n}get injector(){return new me(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}const zg=new Map;class jT extends Dp{constructor(n,i){super(),this._parent=i,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new uI(this);const o=mr(n),c=n[oe]||null;c&&mv(c),this._bootstrapComponents=ol(o.bootstrap),this._r3Injector=Yh(n,i,[{provide:Dp,useValue:this},{provide:$g,useValue:this.componentFactoryResolver}],ne(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,i=ps.THROW_IF_NOT_FOUND,o=tn.Default){return n===ps||n===Dp||n===yc?this:this._r3Injector.get(n,i,o)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Bv extends $E{constructor(n){super(),this.moduleType=n,null!==mr(n)&&function(t){const n=new Set;!function i(o){const c=mr(o,!0),f=c.id;null!==f&&(function(t,n,i){if(n&&n!==i)throw new Error(`Duplicate module registered for ${t} - ${ne(n)} vs ${ne(n.name)}`)}(f,zg.get(f),o),zg.set(f,o));const y=ol(c.imports);for(const C of y)n.has(C)||(n.add(C),i(C))}(t)}(n)}create(n){return new jT(this.moduleType,n)}}function $v(t){return n=>{setTimeout(t,void 0,n)}}const hd=class extends _.xQ{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,i,o){var c,f,y;let C=n,R=i||(()=>null),U=o;if(n&&"object"==typeof n){const Se=n;C=null===(c=Se.next)||void 0===c?void 0:c.bind(Se),R=null===(f=Se.error)||void 0===f?void 0:f.bind(Se),U=null===(y=Se.complete)||void 0===y?void 0:y.bind(Se)}this.__isAsync&&(R=$v(R),C&&(C=$v(C)),U&&(U=$v(U)));const te=super.subscribe({next:C,error:R,complete:U});return n instanceof P.w&&n.add(te),te}};function aD(){return this._results[rf()]()}class x_{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const i=rf(),o=x_.prototype;o[i]||(o[i]=aD)}get changes(){return this._changes||(this._changes=new hd)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,i){return this._results.reduce(n,i)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,i){const o=this;o.dirty=!1;const c=ls(n);(this._changesDetected=!function(t,n,i){if(t.length!==n.length)return!1;for(let o=0;o<t.length;o++){let c=t[o],f=n[o];if(i&&(c=i(c),f=i(f)),f!==c)return!1}return!0}(o._results,c,i))&&(o._results=c,o.length=c.length,o.last=c[this.length-1],o.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Uv{constructor(n){this.queryList=n,this.matches=null}clone(){return new Uv(this.queryList)}setDirty(){this.queryList.setDirty()}}class jv{constructor(n=[]){this.queries=n}createEmbeddedView(n){const i=n.queries;if(null!==i){const o=null!==n.contentQueries?n.contentQueries[0]:i.length,c=[];for(let f=0;f<o;f++){const y=i.getByIndex(f);c.push(this.queries[y.indexInDeclarationView].clone())}return new jv(c)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let i=0;i<this.queries.length;i++)null!==SI(n,i).matches&&this.queries[i].setDirty()}}class vI{constructor(n,i,o=null){this.predicate=n,this.flags=i,this.read=o}}class Hv{constructor(n=[]){this.queries=n}elementStart(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(n,i)}elementEnd(n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(n)}embeddedTView(n){let i=null;for(let o=0;o<this.length;o++){const c=null!==i?i.length:0,f=this.getByIndex(o).embeddedTView(n,c);f&&(f.indexInDeclarationView=o,null!==i?i.push(f):i=[f])}return null!==i?new Hv(i):null}template(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].template(n,i)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Wv{constructor(n,i=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(n,i){this.isApplyingToNode(i)&&this.matchTNode(n,i)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,i){this.elementStart(n,i)}embeddedTView(n,i){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,i),new Wv(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const i=this._declarationNodeIndex;let o=n.parent;for(;null!==o&&8&o.type&&o.index!==i;)o=o.parent;return i===(null!==o?o.index:-1)}return this._appliesToNextNode}matchTNode(n,i){const o=this.metadata.predicate;if(Array.isArray(o))for(let c=0;c<o.length;c++){const f=o[c];this.matchTNodeWithReadOption(n,i,cD(i,f)),this.matchTNodeWithReadOption(n,i,S(i,n,f,!1,!1))}else o===Xm?4&i.type&&this.matchTNodeWithReadOption(n,i,-1):this.matchTNodeWithReadOption(n,i,S(i,n,o,!1,!1))}matchTNodeWithReadOption(n,i,o){if(null!==o){const c=this.metadata.read;if(null!==c)if(c===dd||c===w_||c===Xm&&4&i.type)this.addMatch(i.index,-2);else{const f=S(i,n,c,!1,!1);null!==f&&this.addMatch(i.index,f)}else this.addMatch(i.index,o)}}addMatch(n,i){null===this.matches?this.matches=[n,i]:this.matches.push(n,i)}}function cD(t,n){const i=t.localNames;if(null!==i)for(let o=0;o<i.length;o+=2)if(i[o]===n)return i[o+1];return null}function hD(t,n,i,o){return-1===i?function(t,n){return 11&t.type?Ug(t,n):4&t.type?C_(t,n):null}(n,t):-2===i?function(t,n,i){return i===dd?Ug(n,t):i===Xm?C_(n,t):i===w_?HE(n,t):void 0}(t,n,o):$(t,t[1],i,n)}function EI(t,n,i,o){const c=n[19].queries[o];if(null===c.matches){const f=t.data,y=i.matches,C=[];for(let R=0;R<y.length;R+=2){const U=y[R];C.push(U<0?null:hD(n,f[U],y[R+1],i.metadata.read))}c.matches=C}return c.matches}function Gv(t,n,i,o){const c=t.queries.getByIndex(i),f=c.matches;if(null!==f){const y=EI(t,n,c,i);for(let C=0;C<f.length;C+=2){const R=f[C];if(R>0)o.push(y[C/2]);else{const U=f[C+1],te=n[-R];for(let Se=10;Se<te.length;Se++){const Re=te[Se];Re[17]===Re[3]&&Gv(Re[1],Re,U,o)}if(null!==te[9]){const Se=te[9];for(let Re=0;Re<Se.length;Re++){const tt=Se[Re];Gv(tt[1],tt,U,o)}}}}}return o}function II(t){const n=rn(),i=Cr(),o=xo();to(o+1);const c=SI(i,o);if(t.dirty&&er(n)===(2==(2&c.metadata.flags))){if(null===c.matches)t.reset([]);else{const f=c.crossesNgTemplate?Gv(i,n,o,[]):EI(i,n,c,o);t.reset(f,OE),t.notifyOnChanges()}return!0}return!1}function bI(t,n,i){const o=Cr();o.firstCreatePass&&(DI(o,new vI(t,n,i),-1),2==(2&n)&&(o.staticViewQueries=!0)),TI(o,rn(),n)}function CI(t,n,i,o){const c=Cr();if(c.firstCreatePass){const f=Ui();DI(c,new vI(n,i,o),f.index),function(t,n){const i=t.contentQueries||(t.contentQueries=[]);n!==(i.length?i[i.length-1]:-1)&&i.push(t.queries.length-1,n)}(c,t),2==(2&i)&&(c.staticContentQueries=!0)}TI(c,rn(),i)}function wI(){return t=rn(),n=xo(),t[19].queries[n].queryList;var t,n}function TI(t,n,i){const o=new x_(4==(4&i));Uh(t,n,o,o.destroy),null===n[19]&&(n[19]=new jv),n[19].queries.push(new Uv(o))}function DI(t,n,i){null===t.queries&&(t.queries=new Hv),t.queries.track(new Wv(n,i))}function SI(t,n){return t.queries.getByIndex(n)}const ND=Jr("Output",t=>({bindingPropertyName:t})),kD=Jr("HostListener",(t,n)=>({eventName:t,args:n})),Qv=new Ti("Application Initializer");let Yg=(()=>{class t{constructor(i){this.appInits=i,this.resolve=__,this.reject=__,this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,c)=>{this.resolve=o,this.reject=c})}runInitializers(){if(this.initialized)return;const i=[],o=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const f=this.appInits[c]();if(Lg(f))i.push(f);else if(Cp(f)){const y=new Promise((C,R)=>{f.subscribe({complete:C,error:R})});i.push(y)}}Promise.all(i).then(()=>{o()}).catch(c=>{this.reject(c)}),0===i.length&&o(),this.initialized=!0}}return t.\u0275fac=function(i){return new(i||t)(Ii(Qv,8))},t.\u0275prov=Mt({token:t,factory:t.\u0275fac}),t})();const GI=new Ti("AppId"),GD={provide:GI,useFactory:function(){return`${Xv()}${Xv()}${Xv()}`},deps:[]};function Xv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const zI=new Ti("Platform Initializer"),qI=new Ti("Platform ID"),YI=new Ti("appBootstrapListener");let KI=(()=>{class t{log(i){console.log(i)}warn(i){console.warn(i)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=Mt({token:t,factory:t.\u0275fac}),t})();const O_=new Ti("LocaleId"),ZI=new Ti("DefaultCurrencyCode");class qD{constructor(n,i){this.ngModuleFactory=n,this.componentFactories=i}}const Jv=function(t){return new Bv(t)},YD=Jv,KD=function(t){return Promise.resolve(Jv(t))},QI=function(t){const n=Jv(t),o=ol(mr(t).declarations).reduce((c,f)=>{const y=Fn(f);return y&&c.push(new dI(y)),c},[]);return new qD(n,o)},ZD=QI,QD=function(t){return Promise.resolve(QI(t))};let cy=(()=>{class t{constructor(){this.compileModuleSync=YD,this.compileModuleAsync=KD,this.compileModuleAndAllComponentsSync=ZD,this.compileModuleAndAllComponentsAsync=QD}clearCache(){}clearCacheFor(i){}getModuleId(i){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=Mt({token:t,factory:t.\u0275fac}),t})();const eS=(()=>Promise.resolve(0))();function e0(t){"undefined"==typeof Zone?eS.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class vu{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new hd(!1),this.onMicrotaskEmpty=new hd(!1),this.onStable=new hd(!1),this.onError=new hd(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!o&&i,c.shouldCoalesceRunChangeDetection=o,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function(){let t=Sn.requestAnimationFrame,n=Sn.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&n){const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i);const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function(t){const n=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Sn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,n0(t),t.isCheckStableRunning=!0,t0(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),n0(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,o,c,f,y,C)=>{try{return XI(t),i.invokeTask(c,f,y,C)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||t.shouldCoalesceRunChangeDetection)&&n(),JI(t)}},onInvoke:(i,o,c,f,y,C,R)=>{try{return XI(t),i.invoke(c,f,y,C,R)}finally{t.shouldCoalesceRunChangeDetection&&n(),JI(t)}},onHasTask:(i,o,c,f)=>{i.hasTask(c,f),o===c&&("microTask"==f.change?(t._hasPendingMicrotasks=f.microTask,n0(t),t0(t)):"macroTask"==f.change&&(t.hasPendingMacrotasks=f.macroTask))},onHandleError:(i,o,c,f)=>(i.handleError(c,f),t.runOutsideAngular(()=>t.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!vu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(vu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,i,o){return this._inner.run(n,i,o)}runTask(n,i,o,c){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+c,n,nS,__,__);try{return f.runTask(y,i,o)}finally{f.cancelTask(y)}}runGuarded(n,i,o){return this._inner.runGuarded(n,i,o)}runOutsideAngular(n){return this._outer.run(n)}}const nS={};function t0(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function n0(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function XI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function JI(t){t._nesting--,t0(t)}class sS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new hd,this.onMicrotaskEmpty=new hd,this.onStable=new hd,this.onError=new hd}run(n,i,o){return n.apply(i,o)}runGuarded(n,i,o){return n.apply(i,o)}runOutsideAngular(n){return n()}runTask(n,i,o,c){return n.apply(i,o)}}let eb=(()=>{class t{constructor(i){this._ngZone=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{vu.assertNotInAngularZone(),e0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())e0(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(i)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,o,c){let f=-1;o&&o>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),i(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:i,timeoutId:f,updateCb:c})}whenStable(i,o,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,o,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(i,o,c){return[]}}return t.\u0275fac=function(i){return new(i||t)(Ii(vu))},t.\u0275prov=Mt({token:t,factory:t.\u0275fac}),t})(),tb=(()=>{class t{constructor(){this._applications=new Map,r0.addToWindow(this)}registerApplication(i,o){this._applications.set(i,o)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,o=!0){return r0.findTestabilityInTree(this,i,o)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=Mt({token:t,factory:t.\u0275fac}),t})();class oS{addToWindow(n){}findTestabilityInTree(n,i,o){return null}}function aS(t){r0=t}let r0=new oS,nb=!0,rb=!1;function s0(){return rb=!0,nb}function lS(){if(rb)throw new Error("Cannot enable prod mode after platform setup.");nb=!1}let Sc;const ib=new Ti("AllowMultipleToken");class gS{constructor(n,i){this.name=n,this.token=i}}function sb(t,n,i=[]){const o=`Platform: ${n}`,c=new Ti(o);return(f=[])=>{let y=ob();if(!y||y.injector.get(ib,!1))if(t)t(i.concat(f).concat({provide:c,useValue:!0}));else{const C=i.concat(f).concat({provide:c,useValue:!0},{provide:rd,useValue:"platform"});!function(t){if(Sc&&!Sc.destroyed&&!Sc.injector.get(ib,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Sc=t.get(ab);const n=t.get(zI,null);n&&n.forEach(i=>i())}(ps.create({providers:C,name:o}))}return function(t){const n=ob();if(!n)throw new Error("No platform exists!");if(!n.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return n}(c)}}function ob(){return Sc&&!Sc.destroyed?Sc:null}let ab=(()=>{class t{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,o){const C=function(t,n){let i;return i="noop"===t?new sS:("zone.js"===t?void 0:t)||new vu({enableLongStackTrace:s0(),shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),i}(o?o.ngZone:void 0,{ngZoneEventCoalescing:o&&o.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:o&&o.ngZoneRunCoalescing||!1}),R=[{provide:vu,useValue:C}];return C.run(()=>{const U=ps.create({providers:R,parent:this.injector,name:i.moduleType.name}),te=i.create(U),Se=te.injector.get(Ys,null);if(!Se)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return C.runOutsideAngular(()=>{const Re=C.onError.subscribe({next:tt=>{Se.handleError(tt)}});te.onDestroy(()=>{o0(this._modules,te),Re.unsubscribe()})}),function(t,n,i){try{const o=i();return Lg(o)?o.catch(c=>{throw n.runOutsideAngular(()=>t.handleError(c)),c}):o}catch(o){throw n.runOutsideAngular(()=>t.handleError(o)),o}}(Se,C,()=>{const Re=te.injector.get(Yg);return Re.runInitializers(),Re.donePromise.then(()=>(mv(te.injector.get(O_,f_)||f_),this._moduleDoBootstrap(te),te))})})}bootstrapModule(i,o=[]){const c=lb({},o);return function(t,n,i){const o=new Bv(i);return Promise.resolve(o)}(0,0,i).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(i){const o=i.injector.get(dy);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(c=>o.bootstrap(c));else{if(!i.instance.ngDoBootstrap)throw new Error(`The module ${ne(i.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);i.instance.ngDoBootstrap(o)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(i){return new(i||t)(Ii(ps))},t.\u0275prov=Mt({token:t,factory:t.\u0275fac}),t})();function lb(t,n){return Array.isArray(n)?n.reduce(lb,t):Object.assign(Object.assign({},t),n)}let dy=(()=>{class t{constructor(i,o,c,f,y){this._zone=i,this._injector=o,this._exceptionHandler=c,this._componentFactoryResolver=f,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const C=new re.y(U=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{U.next(this._stable),U.complete()})}),R=new re.y(U=>{let te;this._zone.runOutsideAngular(()=>{te=this._zone.onStable.subscribe(()=>{vu.assertNotInAngularZone(),e0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,U.next(!0))})})});const Se=this._zone.onUnstable.subscribe(()=>{vu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{U.next(!1)}))});return()=>{te.unsubscribe(),Se.unsubscribe()}});this.isStable=(0,ke.T)(C,R.pipe((0,ae.B)()))}bootstrap(i,o){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let c;c=i instanceof xE?i:this._componentFactoryResolver.resolveComponentFactory(i),this.componentTypes.push(c.componentType);const f=function(t){return t.isBoundToModule}(c)?void 0:this._injector.get(Dp),C=c.create(ps.NULL,[],o||c.selector,f),R=C.location.nativeElement,U=C.injector.get(eb,null),te=U&&C.injector.get(tb);return U&&te&&te.registerApplication(R,U),C.onDestroy(()=>{this.detachView(C.hostView),o0(this.components,C),te&&te.unregisterApplication(R)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(i))}finally{this._runningTick=!1}}attachView(i){const o=i;this._views.push(o),o.attachToAppRef(this)}detachView(i){const o=i;o0(this._views,o),o.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i),this._injector.get(YI,[]).concat(this._bootstrapListeners).forEach(c=>c(i))}ngOnDestroy(){this._views.slice().forEach(i=>i.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(i){return new(i||t)(Ii(vu),Ii(ps),Ii(Ys),Ii($g),Ii(Yg))},t.\u0275prov=Mt({token:t,factory:t.\u0275fac}),t})();function o0(t,n){const i=t.indexOf(n);i>-1&&t.splice(i,1)}class IS{}class CS{}const wS={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let TS=(()=>{class t{constructor(i,o){this._compiler=i,this._config=o||wS}load(i){return this.loadAndCompile(i)}loadAndCompile(i){let[o,c]=i.split("#");return void 0===c&&(c="default"),L(8255)(o).then(f=>f[c]).then(f=>hb(f,o,c)).then(f=>this._compiler.compileModuleAsync(f))}loadFactory(i){let[o,c]=i.split("#"),f="NgFactory";return void 0===c&&(c="default",f=""),L(8255)(this._config.factoryPathPrefix+o+this._config.factoryPathSuffix).then(y=>y[c+f]).then(y=>hb(y,o,c))}}return t.\u0275fac=function(i){return new(i||t)(Ii(cy),Ii(CS,8))},t.\u0275prov=Mt({token:t,factory:t.\u0275fac}),t})();function hb(t,n,i){if(!t)throw new Error(`Cannot find '${i}' in '${n}'`);return t}const PS=function(t){return null},kS=sb(null,"core",[{provide:qI,useValue:"unknown"},{provide:ab,deps:[ps]},{provide:tb,deps:[]},{provide:KI,deps:[]}]),$S=[{provide:dy,useClass:dy,deps:[vu,ps,Ys,$g,Yg]},{provide:FT,deps:[vu],useFactory:function(t){let n=[];return t.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(i){n.push(i)}}},{provide:Yg,useClass:Yg,deps:[[new fa,Qv]]},{provide:cy,useClass:cy,deps:[]},GD,{provide:E_,useFactory:function(){return Rw},deps:[]},{provide:I_,useFactory:function(){return Mw},deps:[]},{provide:O_,useFactory:function(t){return mv(t=t||"undefined"!=typeof $localize&&$localize.locale||f_),t},deps:[[new Da(O_),new fa,new Aa]]},{provide:ZI,useValue:"USD"}];let jS=(()=>{class t{constructor(i){}}return t.\u0275fac=function(i){return new(i||t)(Ii(dy))},t.\u0275mod=Pe({type:t}),t.\u0275inj=gn({providers:$S}),t})()},841:(nn,ot,L)=>{"use strict";L.d(ot,{nm:()=>br});var _=L(2805),ae=(L(7716),L(127),L(2329),L(8239)),Q=L(8026),Z=L(3910),ne=L(3854),we=L(5422);const se=new Map,ge={activated:!1,tokenObservers:[]},Ee={initialized:!1,enabled:!1};function _e(mt){return se.get(mt)||ge}function De(mt,z){se.set(mt,z)}function ut(){return Ee}class ct{constructor(z,j,ce,be,Qe){if(this.operation=z,this.retryPolicy=j,this.getWaitDuration=ce,this.lowerBound=be,this.upperBound=Qe,this.pending=null,this.nextErrorWaitInterval=be,be>Qe)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(z){var j=this;return(0,ae.Z)(function*(){j.stop();try{j.pending=new ne.BH,yield(mt=j.getNextRun(z),new Promise(z=>{setTimeout(z,mt)})),j.pending.resolve(),yield j.pending.promise,j.pending=new ne.BH,yield j.operation(),j.pending.resolve(),yield j.pending.promise,j.process(!0).catch(()=>{})}catch(ce){j.retryPolicy(ce)?j.process(!1).catch(()=>{}):j.stop()}var mt})()}getNextRun(z){if(z)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const j=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),j}}}const E=new ne.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function gt(mt){if(!_e(mt).activated)throw E.create("use-before-activation",{appName:mt.name})}function Ge(mt,z){return ht.apply(this,arguments)}function ht(){return(ht=(0,ae.Z)(function*({url:mt,body:z},j){var ce,be;const Qe={"Content-Type":"application/json"},Xe=j.getImmediate({optional:!0});if(Xe){const qn=yield Xe.getHeartbeatsHeader();qn&&(Qe["X-Firebase-Client"]=qn)}const Rt={method:"POST",body:JSON.stringify(z),headers:Qe};let At,Tt;try{At=yield fetch(mt,Rt)}catch(qn){throw E.create("fetch-network-error",{originalErrorMessage:null===(ce=qn)||void 0===ce?void 0:ce.message})}if(200!==At.status)throw E.create("fetch-status-error",{httpStatus:At.status});try{Tt=yield At.json()}catch(qn){throw E.create("fetch-parse-error",{originalErrorMessage:null===(be=qn)||void 0===be?void 0:be.message})}const on=Tt.ttl.match(/^([\d.]+)(s)$/);if(!on||!on[2]||isNaN(Number(on[1])))throw E.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Tt.ttl}`});const On=1e3*Number(on[1]),Vn=Date.now();return{token:Tt.token,expireTimeMillis:Vn+On,issuedAtTimeMillis:Vn}})).apply(this,arguments)}function Zt(mt,z){const{projectId:j,appId:ce,apiKey:be}=mt.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${j}/apps/${ce}:exchangeDebugToken?key=${be}`,body:{debug_token:z}}}const st="firebase-app-check-store";let lt=null;function Dt(){return lt||(lt=new Promise((mt,z)=>{var j;try{const ce=indexedDB.open("firebase-app-check-database",1);ce.onsuccess=be=>{mt(be.target.result)},ce.onerror=be=>{var Qe;z(E.create("storage-open",{originalErrorMessage:null===(Qe=be.target.error)||void 0===Qe?void 0:Qe.message}))},ce.onupgradeneeded=be=>{0===be.oldVersion&&be.target.result.createObjectStore(st,{keyPath:"compositeKey"})}}catch(ce){z(E.create("storage-open",{originalErrorMessage:null===(j=ce)||void 0===j?void 0:j.message}))}}),lt)}function Tn(){return(Tn=(0,ae.Z)(function*(mt,z){const ce=(yield Dt()).transaction(st,"readwrite"),Qe=ce.objectStore(st).put({compositeKey:mt,value:z});return new Promise((Xe,Rt)=>{Qe.onsuccess=At=>{Xe()},ce.onerror=At=>{var Tt;Rt(E.create("storage-set",{originalErrorMessage:null===(Tt=At.target.error)||void 0===Tt?void 0:Tt.message}))}})})).apply(this,arguments)}const ur=new we.Yd("@firebase/app-check");function Wn(mt,z){return(0,ne.hl)()?function(mt,z){return function(mt,z){return Tn.apply(this,arguments)}(function(mt){return`${mt.options.appId}-${mt.name}`}(mt),z)}(mt,z).catch(j=>{ur.warn(`Failed to write token to IndexedDB. Error: ${j}`)}):Promise.resolve()}function jn(){return ut().enabled}function Qn(){return lr.apply(this,arguments)}function lr(){return(lr=(0,ae.Z)(function*(){const mt=ut();if(mt.enabled&&mt.token)return mt.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Dr={error:"UNKNOWN_ERROR"};function hr(mt){return ne.US.encodeString(JSON.stringify(mt),!1)}function ri(mt){return sr.apply(this,arguments)}function sr(){return(sr=(0,ae.Z)(function*(mt,z=!1){const j=mt.app;gt(j);const ce=_e(j);let Qe,be=ce.token;if(be&&!Sn(be)&&(De(j,Object.assign(Object.assign({},ce),{token:void 0})),be=void 0),!be){const At=yield ce.cachedTokenPromise;At&&(Sn(At)?be=At:yield Wn(j,void 0))}if(!z&&be&&Sn(be))return{token:be.token};let Rt,Xe=!1;if(jn()){ce.exchangeTokenPromise||(ce.exchangeTokenPromise=Ge(Zt(j,yield Qn()),mt.heartbeatServiceProvider).finally(()=>{ce.exchangeTokenPromise=void 0}),Xe=!0);const At=yield ce.exchangeTokenPromise;return yield Wn(j,At),De(j,Object.assign(Object.assign({},ce),{token:At})),{token:At.token}}try{ce.exchangeTokenPromise||(ce.exchangeTokenPromise=ce.provider.getToken().finally(()=>{ce.exchangeTokenPromise=void 0}),Xe=!0),be=yield ce.exchangeTokenPromise}catch(At){"appCheck/throttled"===At.code?ur.warn(At.message):ur.error(At),Qe=At}return be?Qe?Rt=Sn(be)?{token:be.token,internalError:Qe}:cr(Qe):(Rt={token:be.token},De(j,Object.assign(Object.assign({},ce),{token:be})),yield Wn(j,be)):Rt=cr(Qe),Xe&&fn(j,Rt),Rt})).apply(this,arguments)}function wt(mt,z){const j=_e(mt),ce=j.tokenObservers.filter(be=>be.next!==z);0===ce.length&&j.tokenRefresher&&j.tokenRefresher.isRunning()&&j.tokenRefresher.stop(),De(mt,Object.assign(Object.assign({},j),{tokenObservers:ce}))}function xr(mt){const{app:z}=mt,j=_e(z);let ce=j.tokenRefresher;ce||(ce=function(mt){const{app:z}=mt;return new ct((0,ae.Z)(function*(){let ce;if(ce=_e(z).token?yield ri(mt,!0):yield ri(mt),ce.error)throw ce.error;if(ce.internalError)throw ce.internalError}),()=>!0,()=>{const j=_e(z);if(j.token){let ce=j.token.issuedAtTimeMillis+.5*(j.token.expireTimeMillis-j.token.issuedAtTimeMillis)+3e5;return ce=Math.min(ce,j.token.expireTimeMillis-3e5),Math.max(0,ce-Date.now())}return 0},3e4,96e4)}(mt),De(z,Object.assign(Object.assign({},j),{tokenRefresher:ce}))),!ce.isRunning()&&j.isTokenAutoRefreshEnabled&&ce.start()}function fn(mt,z){const j=_e(mt).tokenObservers;for(const ce of j)try{"EXTERNAL"===ce.type&&null!=z.error?ce.error(z.error):ce.next(z)}catch(be){}}function Sn(mt){return mt.expireTimeMillis-Date.now()>0}function cr(mt){return{token:hr(Dr),error:mt}}class dr{constructor(z,j){this.app=z,this.heartbeatServiceProvider=j}_delete(){const{tokenObservers:z}=_e(this.app);for(const j of z)wt(this.app,j.next);return Promise.resolve()}}const bn="app-check-internal";(0,Q._registerComponent)(new Z.wA("app-check",mt=>function(mt,z){return new dr(mt,z)}(mt.getProvider("app").getImmediate(),mt.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((mt,z,j)=>{mt.getProvider(bn).initialize()})),(0,Q._registerComponent)(new Z.wA(bn,mt=>function(mt){return{getToken:z=>ri(mt,z),addTokenListener:z=>function(mt,z,j,ce){const{app:be}=mt,Qe=_e(be),Xe={next:j,error:ce,type:z};if(De(be,Object.assign(Object.assign({},Qe),{tokenObservers:[...Qe.tokenObservers,Xe]})),Qe.token&&Sn(Qe.token)){const Rt=Qe.token;Promise.resolve().then(()=>{j({token:Rt.token}),xr(mt)}).catch(()=>{})}Qe.cachedTokenPromise.then(()=>xr(mt))}(mt,"INTERNAL",z),removeTokenListener:z=>wt(mt.app,z)}}(mt.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Q.registerVersion)("@firebase/app-check","0.5.15");class br{constructor(){return(0,_.vb)("app-check")}}"undefined"!=typeof window&&window},127:(nn,ot,L)=>{"use strict";L.d(ot,{Ot:()=>ke,z6:()=>ae,ZF:()=>Ke,hX:()=>_e});var _=L(2329),P=L(7716),re=L(2805);class ke{constructor(ct){return ct}}class ae{constructor(){return(0,_.C6)()}}const ne=new P.OlP("angularfire2._apps"),we={provide:ke,useFactory:function(Me){return Me&&1===Me.length?Me[0]:new ke((0,_.Mq)())},deps:[[new P.FiY,ne]]},se={provide:ae,deps:[[new P.FiY,ne]]};function ge(Me){return(ct,at)=>{const Vt=ct.runOutsideAngular(()=>Me(at));return new ke(Vt)}}let Ee=(()=>{class Me{constructor(at){(0,_.KN)("angularfire",re.q4.full,"core"),(0,_.KN)("angularfire",re.q4.full,"app"),(0,_.KN)("angular",P.q4F.full,at.toString())}}return Me.\u0275fac=function(at){return new(at||Me)(P.LFG(P.Lbi))},Me.\u0275mod=P.oAB({type:Me}),Me.\u0275inj=P.cJS({providers:[we,se]}),Me})();function _e(Me,...ct){return{ngModule:Ee,providers:[{provide:ne,useFactory:ge(Me),multi:!0,deps:[P.R0b,P.zs3,re.HU,...ct]}]}}const Ke=(0,re.u3)(_.ZF,!0)},7910:(nn,ot,L)=>{"use strict";L.d(ot,{gx:()=>Te,dh:()=>Ke,Xb:()=>Zt,v0:()=>Ue,AR:()=>E,e5:()=>wt,w7:()=>cr,EA:()=>gt});var _=L(2805),P=L(7716),re=L(127),ke=L(2329),ae=L(841),Q=L(3607),ge=(L(3854),L(8026),L(5422),L(3910),L(8891));function _e(nt){return new ge.y(function(It){return{unsubscribe:(0,Q.q)(nt,It.next.bind(It),It.error.bind(It),It.complete.bind(It))}})}class Te{constructor(It){return It}}class Ke{constructor(){return(0,_.vb)("auth")}}const qe=new P.OlP("angularfire2.auth-instances");function Me(nt){return(It,Oe)=>{const Le=It.runOutsideAngular(()=>nt(Oe));return new Te(Le)}}const ct={provide:Ke,deps:[[new P.FiY,qe]]},at={provide:Te,useFactory:function(nt,It){const Oe=(0,_.JM)("auth",nt,It);return Oe&&new Te(Oe)},deps:[[new P.FiY,qe],re.Ot]};let Vt=(()=>{class nt{constructor(){(0,ke.KN)("angularfire",_.q4.full,"auth")}}return nt.\u0275fac=function(Oe){return new(Oe||nt)},nt.\u0275mod=P.oAB({type:nt}),nt.\u0275inj=P.cJS({providers:[at,ct]}),nt})();function E(nt,...It){return{ngModule:Vt,providers:[{provide:qe,useFactory:Me(nt),multi:!0,deps:[P.R0b,P.zs3,_.HU,re.z6,[new P.FiY,ae.nm],...It]}]}}const gt=(0,_.u3)(_e,!0),Zt=(0,_.u3)(Q.a5,!0),Ue=(0,_.u3)(Q.n,!0),wt=(0,_.u3)(Q.a6,!0),cr=(0,_.u3)(Q.y,!0)},8006:(nn,ot,L)=>{"use strict";L.d(ot,{zQ:()=>dt,rT:()=>ht,f7:()=>Ht,L6:()=>He,_Q:()=>Ge,lh:()=>vt,Qv:()=>We,nw:()=>Zt});var _=L(7716),P=L(9765),re=L(5917),ke=L(8891),ae=L(4402),Q=L(6682),Z=L(7771),ne=L(5319),we=L(309),se=L(7971),ge=L(8858);class Ee extends P.xQ{constructor(Ue=Number.POSITIVE_INFINITY,lt=Number.POSITIVE_INFINITY,Dt){super(),this.scheduler=Dt,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=Ue<1?1:Ue,this._windowTime=lt<1?1:lt,lt===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(Ue){if(!this.isStopped){const lt=this._events;lt.push(Ue),lt.length>this._bufferSize&&lt.shift()}super.next(Ue)}nextTimeWindow(Ue){this.isStopped||(this._events.push(new _e(this._getNow(),Ue)),this._trimBufferThenGetEvents()),super.next(Ue)}_subscribe(Ue){const lt=this._infiniteTimeWindow,Dt=lt?this._events:this._trimBufferThenGetEvents(),Bt=this.scheduler,Mt=Dt.length;let Pt;if(this.closed)throw new se.N;if(this.isStopped||this.hasError?Pt=ne.w.EMPTY:(this.observers.push(Ue),Pt=new ge.W(this,Ue)),Bt&&Ue.add(Ue=new we.ht(Ue,Bt)),lt)for(let gn=0;gn<Mt&&!Ue.closed;gn++)Ue.next(Dt[gn]);else for(let gn=0;gn<Mt&&!Ue.closed;gn++)Ue.next(Dt[gn].value);return this.hasError?Ue.error(this.thrownError):this.isStopped&&Ue.complete(),Pt}_getNow(){return(this.scheduler||Z.c).now()}_trimBufferThenGetEvents(){const Ue=this._getNow(),lt=this._bufferSize,Dt=this._windowTime,Bt=this._events,Mt=Bt.length;let Pt=0;for(;Pt<Mt&&!(Ue-Bt[Pt].time<Dt);)Pt++;return Mt>lt&&(Pt=Math.max(Pt,Mt-lt)),Pt>0&&Bt.splice(0,Pt),Bt}}class _e{constructor(Ue,lt){this.time=Ue,this.value=lt}}function De(st,Ue,lt){let Dt;return Dt=st&&"object"==typeof st?st:{bufferSize:st,windowTime:Ue,refCount:!1,scheduler:lt},Bt=>Bt.lift(function({bufferSize:st=Number.POSITIVE_INFINITY,windowTime:Ue=Number.POSITIVE_INFINITY,refCount:lt,scheduler:Dt}){let Bt,Pt,Mt=0,gn=!1,kn=!1;return function(_n){let Mn;Mt++,!Bt||gn?(gn=!1,Bt=new Ee(st,Ue,Dt),Mn=Bt.subscribe(this),Pt=_n.subscribe({next(vr){Bt.next(vr)},error(vr){gn=!0,Bt.error(vr)},complete(){kn=!0,Pt=void 0,Bt.complete()}}),kn&&(Pt=void 0)):Mn=Bt.subscribe(this),this.add(()=>{Mt--,Mn.unsubscribe(),Mn=void 0,Pt&&!kn&&lt&&0===Mt&&(Pt.unsubscribe(),Pt=void 0,Bt=void 0)})}}(Dt))}var Te=L(3190);function Ke(st,Ue){return Ue?(0,Te.w)(()=>st,Ue):(0,Te.w)(()=>st)}var $e=L(8002),qe=L(8049),Ie=L(3101),Me=L(5435),ct=L(2805),at=L(8939),Vt=L(8583),E=L(841);L(7841);const We=new _.OlP("angularfire2.auth.use-emulator"),He=new _.OlP("angularfire2.auth.settings"),Ge=new _.OlP("angularfire2.auth.tenant-id"),ht=new _.OlP("angularfire2.auth.langugage-code"),vt=new _.OlP("angularfire2.auth.use-device-language"),Ht=new _.OlP("angularfire.auth.persistence"),Zt=(st,Ue,lt,Dt,Bt,Mt,Pt,gn)=>(0,at.cc)(`${st.name}.auth`,"AngularFireAuth",st.name,()=>{const kn=Ue.runOutsideAngular(()=>st.auth());if(lt&&kn.useEmulator(...lt),Dt&&(kn.tenantId=Dt),kn.languageCode=Bt,Mt&&kn.useDeviceLanguage(),Pt)for(const[Tn,_n]of Object.entries(Pt))kn.settings[Tn]=_n;return gn&&kn.setPersistence(gn),kn},[lt,Dt,Bt,Mt,Pt,gn]);let dt=(()=>{class st{constructor(lt,Dt,Bt,Mt,Pt,gn,kn,Tn,_n,Mn,vr,ur){const Ot=new P.xQ,En=(0,re.of)(void 0).pipe((0,we.QV)(Pt.outsideAngular),(0,Te.w)(()=>Mt.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,4828)))),(0,$e.U)(()=>(0,at.on)(lt,Mt,Dt)),(0,$e.U)(Wn=>Zt(Wn,Mt,gn,Tn,_n,Mn,kn,vr)),De({bufferSize:1,refCount:!1}));if((0,Vt.PM)(Bt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,re.of)(null);else{En.pipe((0,qe.P)()).subscribe();const tn=En.pipe((0,Te.w)(Qn=>Qn.getRedirectResult().then(lr=>lr,()=>null)),ct.iC,De({bufferSize:1,refCount:!1})),Un=En.pipe((0,Te.w)(Qn=>new ke.y(lr=>({unsubscribe:Mt.runOutsideAngular(()=>Qn.onAuthStateChanged(Ar=>lr.next(Ar),Ar=>lr.error(Ar),()=>lr.complete()))})))),jn=En.pipe((0,Te.w)(Qn=>new ke.y(lr=>({unsubscribe:Mt.runOutsideAngular(()=>Qn.onIdTokenChanged(Ar=>lr.next(Ar),Ar=>lr.error(Ar),()=>lr.complete()))}))));this.authState=tn.pipe(Ke(Un),(0,Ie.R)(Pt.outsideAngular),(0,we.QV)(Pt.insideAngular)),this.user=tn.pipe(Ke(jn),(0,Ie.R)(Pt.outsideAngular),(0,we.QV)(Pt.insideAngular)),this.idToken=this.user.pipe((0,Te.w)(Qn=>Qn?(0,ae.D)(Qn.getIdToken()):(0,re.of)(null))),this.idTokenResult=this.user.pipe((0,Te.w)(Qn=>Qn?(0,ae.D)(Qn.getIdTokenResult()):(0,re.of)(null))),this.credential=(0,Q.T)(tn,Ot,this.authState.pipe((0,Me.h)(Qn=>!Qn))).pipe((0,$e.U)(Qn=>(null==Qn?void 0:Qn.user)?Qn:null),(0,Ie.R)(Pt.outsideAngular),(0,we.QV)(Pt.insideAngular))}return(0,at.pX)(this,En,Mt,{spy:{apply:(Wn,tn,Un)=>{(Wn.startsWith("signIn")||Wn.startsWith("createUser"))&&Un.then(jn=>Ot.next(jn))}}})}}return st.\u0275fac=function(lt){return new(lt||st)(_.LFG(at.Dh),_.LFG(at.xv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(ct.HU),_.LFG(We,8),_.LFG(He,8),_.LFG(Ge,8),_.LFG(ht,8),_.LFG(vt,8),_.LFG(Ht,8),_.LFG(E.nm,8))},st.\u0275prov=_.Yz7({token:st,factory:st.\u0275fac,providedIn:"any"}),st})()},9781:(nn,ot,L)=>{"use strict";L.d(ot,{ST:()=>Qr,yb:()=>dn});var _=L(7716),P=L(3637),re=L(8891),ke=L(4402),ae=L(5917),Q=L(2805),Z=L(7393);function ne(){return Ze=>Ze.lift(new we)}class we{call(oe,Ae){return Ae.subscribe(new se(oe))}}class se extends Z.L{constructor(oe){super(oe),this.hasPrev=!1}_next(oe){let Ae;this.hasPrev?Ae=[this.prev,oe]:this.hasPrev=!0,this.prev=oe,Ae&&this.destination.next(Ae)}}var ge=L(9761),Ee=L(8002),_e=L(2145),De=L(7519),ut=L(5435),Te=L(8939),Ke=L(8583),qe=(L(4828),L(3394)),Ie=L(1304),Me=L(3854),ct=L(3910);function E(Ze,oe){if(void 0===oe)return{merge:!1};if(void 0!==oe.mergeFields&&void 0!==oe.merge)throw new Ie.WA("invalid-argument",`Invalid options passed to function ${Ze}(): You cannot specify both "merge" and "mergeFields".`);return oe}function Ye(){if("undefined"==typeof Uint8Array)throw new Ie.WA("unimplemented","Uint8Arrays are not available in this environment.")}function gt(){if(!(0,Ie.Me)())throw new Ie.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class We{constructor(oe){this._delegate=oe}static fromBase64String(oe){return gt(),new We(Ie.Jj.fromBase64String(oe))}static fromUint8Array(oe){return Ye(),new We(Ie.Jj.fromUint8Array(oe))}toBase64(){return gt(),this._delegate.toBase64()}toUint8Array(){return Ye(),this._delegate.toUint8Array()}isEqual(oe){return this._delegate.isEqual(oe._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function He(Ze){return function(Ze,oe){if("object"!=typeof Ze||null===Ze)return!1;const Ae=Ze;for(const nt of["next","error","complete"])if(nt in Ae&&"function"==typeof Ae[nt])return!0;return!1}(Ze)}class ht{enableIndexedDbPersistence(oe,Ae){return(0,Ie.ST)(oe._delegate,{forceOwnership:Ae})}enableMultiTabIndexedDbPersistence(oe){return(0,Ie.fH)(oe._delegate)}clearIndexedDbPersistence(oe){return(0,Ie.Fc)(oe._delegate)}}class vt{constructor(oe,Ae,nt){this._delegate=Ae,this._persistenceProvider=nt,this.INTERNAL={delete:()=>this.terminate()},oe instanceof Ie.l7||(this._appCompat=oe)}get _databaseId(){return this._delegate._databaseId}settings(oe){const Ae=this._delegate._getSettings();!oe.merge&&Ae.host!==oe.host&&(0,Ie.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),oe.merge&&delete(oe=Object.assign(Object.assign({},Ae),oe)).merge,this._delegate._setSettings(oe)}useEmulator(oe,Ae,nt={}){(0,Ie.at)(this._delegate,oe,Ae,nt)}enableNetwork(){return(0,Ie.Ix)(this._delegate)}disableNetwork(){return(0,Ie.TF)(this._delegate)}enablePersistence(oe){let Ae=!1,nt=!1;return oe&&(Ae=!!oe.synchronizeTabs,nt=!!oe.experimentalForceOwningTab,(0,Ie.Wi)("synchronizeTabs",Ae,"experimentalForceOwningTab",nt)),Ae?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,nt)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,Ie.Mx)(this._delegate)}onSnapshotsInSync(oe){return(0,Ie.sc)(this._delegate,oe)}get app(){if(!this._appCompat)throw new Ie.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(oe){try{return new _n(this,(0,Ie.hJ)(this._delegate,oe))}catch(Ae){throw lt(Ae,"collection()","Firestore.collection()")}}doc(oe){try{return new Ue(this,(0,Ie.JU)(this._delegate,oe))}catch(Ae){throw lt(Ae,"doc()","Firestore.doc()")}}collectionGroup(oe){try{return new gn(this,(0,Ie.B$)(this._delegate,oe))}catch(Ae){throw lt(Ae,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(oe){return(0,Ie.i3)(this._delegate,Ae=>oe(new dt(this,Ae)))}batch(){return(0,Ie.qY)(this._delegate),new Ct(new Ie.PU(this._delegate,oe=>(0,Ie.GL)(this._delegate,oe)))}loadBundle(oe){return(0,Ie.Pb)(this._delegate,oe)}namedQuery(oe){return(0,Ie.L$)(this._delegate,oe).then(Ae=>Ae?new gn(this,Ae):null)}}class Ht extends Ie.u7{constructor(oe){super(),this.firestore=oe}convertBytes(oe){return new We(new Ie.Jj(oe))}convertReference(oe){const Ae=this.convertDocumentKey(oe,this.firestore._databaseId);return Ue.forKey(Ae,this.firestore,null)}}class dt{constructor(oe,Ae){this._firestore=oe,this._delegate=Ae,this._userDataWriter=new Ht(oe)}get(oe){const Ae=Mn(oe);return this._delegate.get(Ae).then(nt=>new Mt(this._firestore,new Ie.xU(this._firestore._delegate,this._userDataWriter,nt._key,nt._document,nt.metadata,Ae.converter)))}set(oe,Ae,nt){const It=Mn(oe);return nt?(E("Transaction.set",nt),this._delegate.set(It,Ae,nt)):this._delegate.set(It,Ae),this}update(oe,Ae,nt,...It){const Oe=Mn(oe);return 2===arguments.length?this._delegate.update(Oe,Ae):this._delegate.update(Oe,Ae,nt,...It),this}delete(oe){const Ae=Mn(oe);return this._delegate.delete(Ae),this}}class Ct{constructor(oe){this._delegate=oe}set(oe,Ae,nt){const It=Mn(oe);return nt?(E("WriteBatch.set",nt),this._delegate.set(It,Ae,nt)):this._delegate.set(It,Ae),this}update(oe,Ae,nt,...It){const Oe=Mn(oe);return 2===arguments.length?this._delegate.update(Oe,Ae):this._delegate.update(Oe,Ae,nt,...It),this}delete(oe){const Ae=Mn(oe);return this._delegate.delete(Ae),this}commit(){return this._delegate.commit()}}class st{constructor(oe,Ae,nt){this._firestore=oe,this._userDataWriter=Ae,this._delegate=nt}fromFirestore(oe,Ae){const nt=new Ie.$q(this._firestore._delegate,this._userDataWriter,oe._key,oe._document,oe.metadata,null);return this._delegate.fromFirestore(new Pt(this._firestore,nt),null!=Ae?Ae:{})}toFirestore(oe,Ae){return Ae?this._delegate.toFirestore(oe,Ae):this._delegate.toFirestore(oe)}static getInstance(oe,Ae){const nt=st.INSTANCES;let It=nt.get(oe);It||(It=new WeakMap,nt.set(oe,It));let Oe=It.get(Ae);return Oe||(Oe=new st(oe,new Ht(oe),Ae),It.set(Ae,Oe)),Oe}}st.INSTANCES=new WeakMap;class Ue{constructor(oe,Ae){this.firestore=oe,this._delegate=Ae,this._userDataWriter=new Ht(oe)}static forPath(oe,Ae,nt){if(oe.length%2!=0)throw new Ie.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${oe.canonicalString()} has ${oe.length}`);return new Ue(Ae,new Ie.my(Ae._delegate,nt,new Ie.Ky(oe)))}static forKey(oe,Ae,nt){return new Ue(Ae,new Ie.my(Ae._delegate,nt,oe))}get id(){return this._delegate.id}get parent(){return new _n(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(oe){try{return new _n(this.firestore,(0,Ie.hJ)(this._delegate,oe))}catch(Ae){throw lt(Ae,"collection()","DocumentReference.collection()")}}isEqual(oe){return(oe=(0,Me.m9)(oe))instanceof Ie.my&&(0,Ie.Eo)(this._delegate,oe)}set(oe,Ae){Ae=E("DocumentReference.set",Ae);try{return Ae?(0,Ie.pl)(this._delegate,oe,Ae):(0,Ie.pl)(this._delegate,oe)}catch(nt){throw lt(nt,"setDoc()","DocumentReference.set()")}}update(oe,Ae,...nt){try{return 1===arguments.length?(0,Ie.r7)(this._delegate,oe):(0,Ie.r7)(this._delegate,oe,Ae,...nt)}catch(It){throw lt(It,"updateDoc()","DocumentReference.update()")}}delete(){return(0,Ie.oe)(this._delegate)}onSnapshot(...oe){const Ae=Dt(oe),nt=Bt(oe,It=>new Mt(this.firestore,new Ie.xU(this.firestore._delegate,this._userDataWriter,It._key,It._document,It.metadata,this._delegate.converter)));return(0,Ie.cf)(this._delegate,Ae,nt)}get(oe){let Ae;return Ae="cache"===(null==oe?void 0:oe.source)?(0,Ie.kl)(this._delegate):"server"===(null==oe?void 0:oe.source)?(0,Ie.Xk)(this._delegate):(0,Ie.QT)(this._delegate),Ae.then(nt=>new Mt(this.firestore,new Ie.xU(this.firestore._delegate,this._userDataWriter,nt._key,nt._document,nt.metadata,this._delegate.converter)))}withConverter(oe){return new Ue(this.firestore,this._delegate.withConverter(oe?st.getInstance(this.firestore,oe):null))}}function lt(Ze,oe,Ae){return Ze.message=Ze.message.replace(oe,Ae),Ze}function Dt(Ze){for(const oe of Ze)if("object"==typeof oe&&!He(oe))return oe;return{}}function Bt(Ze,oe){var Ae,nt;let It;return It=He(Ze[0])?Ze[0]:He(Ze[1])?Ze[1]:"function"==typeof Ze[0]?{next:Ze[0],error:Ze[1],complete:Ze[2]}:{next:Ze[1],error:Ze[2],complete:Ze[3]},{next:Oe=>{It.next&&It.next(oe(Oe))},error:null===(Ae=It.error)||void 0===Ae?void 0:Ae.bind(It),complete:null===(nt=It.complete)||void 0===nt?void 0:nt.bind(It)}}class Mt{constructor(oe,Ae){this._firestore=oe,this._delegate=Ae}get ref(){return new Ue(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(oe){return this._delegate.data(oe)}get(oe,Ae){return this._delegate.get(oe,Ae)}isEqual(oe){return(0,Ie.qK)(this._delegate,oe._delegate)}}class Pt extends Mt{data(oe){const Ae=this._delegate.data(oe);return(0,Ie.K9)(void 0!==Ae,"Document in a QueryDocumentSnapshot should exist"),Ae}}class gn{constructor(oe,Ae){this.firestore=oe,this._delegate=Ae,this._userDataWriter=new Ht(oe)}where(oe,Ae,nt){try{return new gn(this.firestore,(0,Ie.IO)(this._delegate,(0,Ie.ar)(oe,Ae,nt)))}catch(It){throw lt(It,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(oe,Ae){try{return new gn(this.firestore,(0,Ie.IO)(this._delegate,(0,Ie.Xo)(oe,Ae)))}catch(nt){throw lt(nt,/(orderBy|where)\(\)/,"Query.$1()")}}limit(oe){try{return new gn(this.firestore,(0,Ie.IO)(this._delegate,(0,Ie.b9)(oe)))}catch(Ae){throw lt(Ae,"limit()","Query.limit()")}}limitToLast(oe){try{return new gn(this.firestore,(0,Ie.IO)(this._delegate,(0,Ie.vh)(oe)))}catch(Ae){throw lt(Ae,"limitToLast()","Query.limitToLast()")}}startAt(...oe){try{return new gn(this.firestore,(0,Ie.IO)(this._delegate,(0,Ie.e0)(...oe)))}catch(Ae){throw lt(Ae,"startAt()","Query.startAt()")}}startAfter(...oe){try{return new gn(this.firestore,(0,Ie.IO)(this._delegate,(0,Ie.TQ)(...oe)))}catch(Ae){throw lt(Ae,"startAfter()","Query.startAfter()")}}endBefore(...oe){try{return new gn(this.firestore,(0,Ie.IO)(this._delegate,(0,Ie.Lx)(...oe)))}catch(Ae){throw lt(Ae,"endBefore()","Query.endBefore()")}}endAt(...oe){try{return new gn(this.firestore,(0,Ie.IO)(this._delegate,(0,Ie.Wu)(...oe)))}catch(Ae){throw lt(Ae,"endAt()","Query.endAt()")}}isEqual(oe){return(0,Ie.iE)(this._delegate,oe._delegate)}get(oe){let Ae;return Ae="cache"===(null==oe?void 0:oe.source)?(0,Ie.UQ)(this._delegate):"server"===(null==oe?void 0:oe.source)?(0,Ie.zN)(this._delegate):(0,Ie.PL)(this._delegate),Ae.then(nt=>new Tn(this.firestore,new Ie.W(this.firestore._delegate,this._userDataWriter,this._delegate,nt._snapshot)))}onSnapshot(...oe){const Ae=Dt(oe),nt=Bt(oe,It=>new Tn(this.firestore,new Ie.W(this.firestore._delegate,this._userDataWriter,this._delegate,It._snapshot)));return(0,Ie.cf)(this._delegate,Ae,nt)}withConverter(oe){return new gn(this.firestore,this._delegate.withConverter(oe?st.getInstance(this.firestore,oe):null))}}class kn{constructor(oe,Ae){this._firestore=oe,this._delegate=Ae}get type(){return this._delegate.type}get doc(){return new Pt(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Tn{constructor(oe,Ae){this._firestore=oe,this._delegate=Ae}get query(){return new gn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(oe=>new Pt(this._firestore,oe))}docChanges(oe){return this._delegate.docChanges(oe).map(Ae=>new kn(this._firestore,Ae))}forEach(oe,Ae){this._delegate.forEach(nt=>{oe.call(Ae,new Pt(this._firestore,nt))})}isEqual(oe){return(0,Ie.qK)(this._delegate,oe._delegate)}}class _n extends gn{constructor(oe,Ae){super(oe,Ae),this.firestore=oe,this._delegate=Ae}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const oe=this._delegate.parent;return oe?new Ue(this.firestore,oe):null}doc(oe){try{return new Ue(this.firestore,void 0===oe?(0,Ie.JU)(this._delegate):(0,Ie.JU)(this._delegate,oe))}catch(Ae){throw lt(Ae,"doc()","CollectionReference.doc()")}}add(oe){return(0,Ie.ET)(this._delegate,oe).then(Ae=>new Ue(this.firestore,Ae))}isEqual(oe){return(0,Ie.Eo)(this._delegate,oe._delegate)}withConverter(oe){return new _n(this.firestore,this._delegate.withConverter(oe?st.getInstance(this.firestore,oe):null))}}function Mn(Ze){return(0,Ie.Cf)(Ze,Ie.my)}class vr{constructor(...oe){this._delegate=new Ie.Lz(...oe)}static documentId(){return new vr(Ie.Xb.keyField().canonicalString())}isEqual(oe){return(oe=(0,Me.m9)(oe))instanceof Ie.Lz&&this._delegate._internalPath.isEqual(oe._internalPath)}}class ur{constructor(oe){this._delegate=oe}static serverTimestamp(){const oe=(0,Ie.Bt)();return oe._methodName="FieldValue.serverTimestamp",new ur(oe)}static delete(){const oe=(0,Ie.AK)();return oe._methodName="FieldValue.delete",new ur(oe)}static arrayUnion(...oe){const Ae=(0,Ie.vr)(...oe);return Ae._methodName="FieldValue.arrayUnion",new ur(Ae)}static arrayRemove(...oe){const Ae=(0,Ie.Ab)(...oe);return Ae._methodName="FieldValue.arrayRemove",new ur(Ae)}static increment(oe){const Ae=(0,Ie.nP)(oe);return Ae._methodName="FieldValue.increment",new ur(Ae)}isEqual(oe){return this._delegate.isEqual(oe._delegate)}}const Ot={Firestore:vt,GeoPoint:Ie.F8,Timestamp:Ie.EK,Blob:We,Transaction:dt,WriteBatch:Ct,DocumentReference:Ue,DocumentSnapshot:Mt,Query:gn,QueryDocumentSnapshot:Pt,QuerySnapshot:Tn,CollectionReference:_n,FieldPath:vr,FieldValue:ur,setLogLevel:function(Ze){(0,Ie.Ub)(Ze)},CACHE_SIZE_UNLIMITED:Ie.IX};var Ze;(function(Ze,oe){Ze.INTERNAL.registerComponent(new ct.wA("firestore-compat",Ae=>((oe,Ae)=>new vt(oe,Ae,new ht))(Ae.getProvider("app-compat").getImmediate(),Ae.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},Ot)))})(Ze=qe.Z),Ze.registerVersion("@firebase/firestore-compat","0.2.1");var tn=L(8006),Un=L(841),jn=L(7841);function lr(Ze,oe){return function(Ze,oe=P.z){return new re.y(Ae=>{let nt;return null!=oe?oe.schedule(()=>{nt=Ze.onSnapshot({includeMetadataChanges:!0},Ae)}):nt=Ze.onSnapshot({includeMetadataChanges:!0},Ae),()=>{null!=nt&&nt()}})}(Ze,oe)}function Dr(Ze,oe){return lr(Ze,oe).pipe((0,Ee.U)(Ae=>({payload:Ae,type:"query"})))}function hr(Ze,oe){return Dr(Ze,oe).pipe((0,ge.O)(void 0),ne(),(0,Ee.U)(([Ae,nt])=>{const It=nt.payload.docChanges(),Oe=It.map(Le=>({type:Le.type,payload:Le}));return Ae&&JSON.stringify(Ae.payload.metadata)!==JSON.stringify(nt.payload.metadata)&&nt.payload.docs.forEach((Le,it)=>{const Ve=It.find(Pe=>Pe.doc.ref.isEqual(Le.ref)),ve=null==Ae?void 0:Ae.payload.docs.find(Pe=>Pe.ref.isEqual(Le.ref));Ve&&JSON.stringify(Ve.doc.metadata)===JSON.stringify(Le.metadata)||!Ve&&ve&&JSON.stringify(ve.metadata)===JSON.stringify(Le.metadata)||Oe.push({type:"modified",payload:{oldIndex:it,newIndex:it,type:"modified",doc:Le}})}),Oe}))}function ri(Ze,oe,Ae){return hr(Ze,Ae).pipe((0,_e.R)((nt,It)=>function(Ze,oe,Ae){return oe.forEach(nt=>{Ae.indexOf(nt.type)>-1&&(Ze=function(Ze,oe){switch(oe.type){case"added":if(!Ze[oe.newIndex]||!Ze[oe.newIndex].doc.ref.isEqual(oe.doc.ref))return Qt(Ze,oe.newIndex,0,oe);break;case"modified":if(null==Ze[oe.oldIndex]||Ze[oe.oldIndex].doc.ref.isEqual(oe.doc.ref)){if(oe.oldIndex!==oe.newIndex){const Ae=Ze.slice();return Ae.splice(oe.oldIndex,1),Ae.splice(oe.newIndex,0,oe),Ae}return Qt(Ze,oe.newIndex,1,oe)}break;case"removed":if(Ze[oe.oldIndex]&&Ze[oe.oldIndex].doc.ref.isEqual(oe.doc.ref))return Qt(Ze,oe.oldIndex,1)}return Ze}(Ze,nt))}),Ze}(nt,It.map(Oe=>Oe.payload),oe),[]),(0,De.x)(),(0,Ee.U)(nt=>nt.map(It=>({type:It.type,payload:It}))))}function Qt(Ze,oe,Ae,...nt){const It=Ze.slice();return It.splice(oe,Ae,...nt),It}function xr(Ze){return(!Ze||0===Ze.length)&&(Ze=["added","removed","modified"]),Ze}class Or{constructor(oe,Ae,nt){this.ref=oe,this.query=Ae,this.afs=nt}stateChanges(oe){let Ae=hr(this.query,this.afs.schedulers.outsideAngular);return oe&&oe.length>0&&(Ae=Ae.pipe((0,Ee.U)(nt=>nt.filter(It=>oe.indexOf(It.type)>-1)))),Ae.pipe((0,ge.O)(void 0),ne(),(0,ut.h)(([nt,It])=>It.length>0||!nt),(0,Ee.U)(([nt,It])=>It),Q.iC)}auditTrail(oe){return this.stateChanges(oe).pipe((0,_e.R)((Ae,nt)=>[...Ae,...nt],[]))}snapshotChanges(oe){const Ae=xr(oe);return ri(this.query,Ae,this.afs.schedulers.outsideAngular).pipe(Q.iC)}valueChanges(oe={}){return Dr(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ee.U)(Ae=>Ae.payload.docs.map(nt=>oe.idField?Object.assign(Object.assign({},nt.data()),{[oe.idField]:nt.id}):nt.data())),Q.iC)}get(oe){return(0,ke.D)(this.query.get(oe)).pipe(Q.iC)}add(oe){return this.ref.add(oe)}doc(oe){return new fn(this.ref.doc(oe),this.afs)}}class fn{constructor(oe,Ae){this.ref=oe,this.afs=Ae}set(oe,Ae){return this.ref.set(oe,Ae)}update(oe){return this.ref.update(oe)}delete(){return this.ref.delete()}collection(oe,Ae){const nt=this.ref.collection(oe),{ref:It,query:Oe}=Kn(nt,Ae);return new Or(It,Oe,this.afs)}snapshotChanges(){return function(Ze,oe){return lr(Ze,oe).pipe((0,ge.O)(void 0),ne(),(0,Ee.U)(([Ae,nt])=>nt.exists?(null==Ae?void 0:Ae.exists)?{payload:nt,type:"modified"}:{payload:nt,type:"added"}:{payload:nt,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Q.iC)}valueChanges(oe={}){return this.snapshotChanges().pipe((0,Ee.U)(({payload:Ae})=>oe.idField?Object.assign(Object.assign({},Ae.data()),{[oe.idField]:Ae.id}):Ae.data()))}get(oe){return(0,ke.D)(this.ref.get(oe)).pipe(Q.iC)}}class Sn{constructor(oe,Ae){this.query=oe,this.afs=Ae}stateChanges(oe){return oe&&0!==oe.length?hr(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ee.U)(Ae=>Ae.filter(nt=>oe.indexOf(nt.type)>-1)),(0,ut.h)(Ae=>Ae.length>0),Q.iC):hr(this.query,this.afs.schedulers.outsideAngular).pipe(Q.iC)}auditTrail(oe){return this.stateChanges(oe).pipe((0,_e.R)((Ae,nt)=>[...Ae,...nt],[]))}snapshotChanges(oe){const Ae=xr(oe);return ri(this.query,Ae,this.afs.schedulers.outsideAngular).pipe(Q.iC)}valueChanges(oe={}){return Dr(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ee.U)(nt=>nt.payload.docs.map(It=>oe.idField?Object.assign({[oe.idField]:It.id},It.data()):It.data())),Q.iC)}get(oe){return(0,ke.D)(this.query.get(oe)).pipe(Q.iC)}}const cr=new _.OlP("angularfire2.enableFirestorePersistence"),dr=new _.OlP("angularfire2.firestore.persistenceSettings"),Xn=new _.OlP("angularfire2.firestore.settings"),Yn=new _.OlP("angularfire2.firestore.use-emulator");function Kn(Ze,oe=(Ae=>Ae)){return{query:oe(Ze),ref:Ze}}let Qr=(()=>{class Ze{constructor(Ae,nt,It,Oe,Le,it,Ve,ve,Pe,bt,Kt,Bn,Dn,Fn,pn,In,mr){this.schedulers=Ve;const qt=(0,Te.on)(Ae,it,nt),Gt=Pe;bt&&(0,tn.nw)(qt,it,Kt,Dn,Fn,pn,Bn,In),[this.firestore,this.persistenceEnabled$]=(0,Te.cc)(`${qt.name}.firestore`,"AngularFirestore",qt.name,()=>{const $t=it.runOutsideAngular(()=>qt.firestore());if(Oe&&$t.settings(Oe),Gt&&$t.useEmulator(...Gt),It&&!(0,Ke.PM)(Le)){const bn=()=>{try{return(0,ke.D)($t.enablePersistence(ve||void 0).then(()=>!0,()=>!1))}catch(Rn){return"undefined"!=typeof console&&console.warn(Rn),(0,ae.of)(!1)}};return[$t,it.runOutsideAngular(bn)]}return[$t,(0,ae.of)(!1)]},[Oe,Gt,It])}collection(Ae,nt){let It;It="string"==typeof Ae?this.firestore.collection(Ae):Ae;const{ref:Oe,query:Le}=Kn(It,nt),it=this.schedulers.ngZone.run(()=>Oe);return new Or(it,Le,this)}collectionGroup(Ae,nt){const It=nt||(Le=>Le),Oe=this.firestore.collectionGroup(Ae);return new Sn(It(Oe),this)}doc(Ae){let nt;nt="string"==typeof Ae?this.firestore.doc(Ae):Ae;const It=this.schedulers.ngZone.run(()=>nt);return new fn(It,this)}createId(){return this.firestore.collection("_").doc().id}}return Ze.\u0275fac=function(Ae){return new(Ae||Ze)(_.LFG(Te.Dh),_.LFG(Te.xv,8),_.LFG(cr,8),_.LFG(Xn,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Q.HU),_.LFG(dr,8),_.LFG(Yn,8),_.LFG(tn.zQ,8),_.LFG(tn.Qv,8),_.LFG(tn.L6,8),_.LFG(tn._Q,8),_.LFG(tn.rT,8),_.LFG(tn.lh,8),_.LFG(tn.f7,8),_.LFG(Un.nm,8))},Ze.\u0275prov=_.Yz7({token:Ze,factory:Ze.\u0275fac,providedIn:"any"}),Ze})(),dn=(()=>{class Ze{constructor(){jn.Z.registerVersion("angularfire",Q.q4.full,"fst-compat")}static enablePersistence(Ae){return{ngModule:Ze,providers:[{provide:cr,useValue:!0},{provide:dr,useValue:Ae}]}}}return Ze.\u0275fac=function(Ae){return new(Ae||Ze)},Ze.\u0275mod=_.oAB({type:Ze}),Ze.\u0275inj=_.cJS({providers:[Qr]}),Ze})()},8939:(nn,ot,L)=>{"use strict";L.d(ot,{hO:()=>_e,xv:()=>we,Dh:()=>ne,GT:()=>Q,cc:()=>De,on:()=>se,pX:()=>ae});var _=L(7716),P=L(7841),re=L(2805);nn=L.hmd(nn);const ke=["ngOnDestroy"],ae=($e,qe,Ie,Me={})=>new Proxy($e,{get:(ct,at)=>Ie.runOutsideAngular(()=>{var Vt;if($e[at])return(null===(Vt=null==Me?void 0:Me.spy)||void 0===Vt?void 0:Vt.get)&&Me.spy.get(at,$e[at]),$e[at];if(ke.indexOf(at)>-1)return()=>{};const E=qe.toPromise().then(Ye=>{const gt=Ye&&Ye[at];return"function"==typeof gt?gt.bind(Ye):gt&&gt.then?gt.then(We=>Ie.run(()=>We)):Ie.run(()=>gt)});return new Proxy(()=>{},{get:(Ye,gt)=>E[gt],apply:(Ye,gt,We)=>E.then(He=>{var Ge;const ht=He&&He(...We);return(null===(Ge=null==Me?void 0:Me.spy)||void 0===Ge?void 0:Ge.apply)&&Me.spy.apply(at,We,ht),ht})})})}),Q=($e,qe)=>{qe.forEach(Ie=>{Object.getOwnPropertyNames(Ie.prototype||Ie).forEach(Me=>{Object.defineProperty($e.prototype,Me,Object.getOwnPropertyDescriptor(Ie.prototype||Ie,Me))})})};class Z{constructor(qe){return qe}}const ne=new _.OlP("angularfire2.app.options"),we=new _.OlP("angularfire2.app.name");function se($e,qe,Ie){const ct="object"==typeof Ie&&Ie||{};ct.name=ct.name||"string"==typeof Ie&&Ie||"[DEFAULT]";const Vt=P.Z.apps.filter(E=>E&&E.name===ct.name)[0]||qe.runOutsideAngular(()=>P.Z.initializeApp($e,ct));try{JSON.stringify($e)!==JSON.stringify(Vt.options)&&ge("error",`${Vt.name} Firebase App already initialized with different options${nn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(E){}return new Z(Vt)}const ge=($e,...qe)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[$e](...qe)},Ee={provide:Z,useFactory:se,deps:[ne,_.R0b,[new _.FiY,we]]};let _e=(()=>{class $e{constructor(Ie){P.Z.registerVersion("angularfire",re.q4.full,"core"),P.Z.registerVersion("angularfire",re.q4.full,"app-compat"),P.Z.registerVersion("angular",_.q4F.full,Ie.toString())}static initializeApp(Ie,Me){return{ngModule:$e,providers:[{provide:ne,useValue:Ie},{provide:we,useValue:Me}]}}}return $e.\u0275fac=function(Ie){return new(Ie||$e)(_.LFG(_.Lbi))},$e.\u0275mod=_.oAB({type:$e}),$e.\u0275inj=_.cJS({providers:[Ee]}),$e})();function De($e,qe,Ie,Me,ct){const[,at,Vt]=globalThis.\u0275AngularfireInstanceCache.find(E=>E[0]===$e)||[];if(at)return function($e,qe){try{return $e.toString()===qe.toString()}catch(Ie){return $e===qe}}(ct,Vt)||(Ke("error",`${qe} was already initialized on the ${Ie} Firebase App with different settings.${Te?" You may need to reload as Firebase is not HMR aware.":""}`),Ke("warn",{is:ct,was:Vt})),at;{const E=Me();return globalThis.\u0275AngularfireInstanceCache.push([$e,E,ct]),E}}const Te=!!nn.hot,Ke=($e,...qe)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[$e](...qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2502:(nn,ot,L)=>{"use strict";L.d(ot,{gg:()=>We,BS:()=>Pt,_1:()=>kn,ad:()=>dr,Xo:()=>nt,Cm:()=>Ue,IO:()=>It});var _=L(2805),P=L(7716),re=L(7910),ke=L(127),ae=L(2329),Q=L(841),Z=L(1304),ne=L(8891),we=L(8002),se={includeMetadataChanges:!1};function ge(qt,Gt){return void 0===Gt&&(Gt=se),new ne.y(function($t){return{unsubscribe:(0,Z.cf)(qt,Gt,{next:$t.next.bind($t),error:$t.error.bind($t),complete:$t.complete.bind($t)})}})}function _e(qt,Gt){return void 0===Gt&&(Gt={}),function(qt){return ge(qt,{includeMetadataChanges:!0})}(qt).pipe((0,we.U)(function($t){return De($t,Gt)}))}function De(qt,Gt){void 0===Gt&&(Gt={});var $t=qt.data();return!qt.exists()||"object"!=typeof $t||null===$t||Gt.idField&&($t[Gt.idField]=qt.id),$t}function gt(qt,Gt){return void 0===Gt&&(Gt={}),function(qt){return ge(qt,{includeMetadataChanges:!0}).pipe((0,we.U)(function(Gt){return Gt.docs}))}(qt).pipe((0,we.U)(function($t){return $t.map(function(bn){return De(bn,Gt)})}))}class We{constructor(Gt){return Gt}}const He="firestore",vt=new P.OlP("angularfire2.firestore-instances");function Zt(qt){return(Gt,$t)=>{const bn=Gt.runOutsideAngular(()=>qt($t));return new We(bn)}}const dt={provide:class{constructor(){return(0,_.vb)(He)}},deps:[[new P.FiY,vt]]},Ct={provide:We,useFactory:function(qt,Gt){const $t=(0,_.JM)(He,qt,Gt);return $t&&new We($t)},deps:[[new P.FiY,vt],ke.Ot]};let st=(()=>{class qt{constructor(){(0,ae.KN)("angularfire",_.q4.full,"fst")}}return qt.\u0275fac=function($t){return new($t||qt)},qt.\u0275mod=P.oAB({type:qt}),qt.\u0275inj=P.cJS({providers:[Ct,dt]}),qt})();function Ue(qt,...Gt){return{ngModule:st,providers:[{provide:vt,useFactory:Zt(qt),multi:!0,deps:[P.R0b,P.zs3,_.HU,ke.z6,[new P.FiY,re.dh],[new P.FiY,Q.nm],...Gt]}]}}const Pt=(0,_.u3)(gt,!0),kn=(0,_.u3)(_e,!0),dr=(0,_.u3)(Z.ad,!0),nt=(0,_.u3)(Z.Xo,!0),It=(0,_.u3)(Z.IO,!0)},2805:(nn,ot,L)=>{"use strict";L.d(ot,{q4:()=>ja,iC:()=>kl,HU:()=>Ca,vb:()=>fd,JM:()=>nl,u3:()=>rl});var _=L(7716),P=L(2329),re=L(8239),ke=L(8026),ae=L(3854),Q=L(3910),Z=L(5422),ne=L(2268);const we="@firebase/installations",se="0.5.15",Ee=`w:${se}`,_e="FIS_v2",qe=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ie(V){return V instanceof ae.ZR&&V.code.includes("request-failed")}function Me({projectId:V}){return`https://firebaseinstallations.googleapis.com/v1/projects/${V}/installations`}function ct(V){return{token:V.token,requestStatus:2,expiresIn:He(V.expiresIn),creationTime:Date.now()}}function at(V,Y){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,re.Z)(function*(V,Y){const Be=(yield Y.json()).error;return qe.create("request-failed",{requestName:V,serverCode:Be.code,serverMessage:Be.message,serverStatus:Be.status})})).apply(this,arguments)}function E({apiKey:V}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":V})}function Ye(V,{refreshToken:Y}){const pe=E(V);return pe.append("Authorization",function(V){return`${_e} ${V}`}(Y)),pe}function gt(V){return We.apply(this,arguments)}function We(){return(We=(0,re.Z)(function*(V){const Y=yield V();return Y.status>=500&&Y.status<600?V():Y})).apply(this,arguments)}function He(V){return Number(V.replace("s","000"))}function ht(V,Y){return vt.apply(this,arguments)}function vt(){return(vt=(0,re.Z)(function*({appConfig:V,heartbeatServiceProvider:Y},{fid:pe}){const Be=Me(V),Et=E(V),Lt=Y.getImmediate({optional:!0});if(Lt){const Pr=yield Lt.getHeartbeatsHeader();Pr&&Et.append("x-firebase-client",Pr)}const wn={method:"POST",headers:Et,body:JSON.stringify({fid:pe,authVersion:_e,appId:V.appId,sdkVersion:Ee})},or=yield gt(()=>fetch(Be,wn));if(or.ok){const Pr=yield or.json();return{fid:Pr.fid||pe,registrationStatus:2,refreshToken:Pr.refreshToken,authToken:ct(Pr.authToken)}}throw yield at("Create Installation",or)})).apply(this,arguments)}function Ht(V){return new Promise(Y=>{setTimeout(Y,V)})}const dt=/^[cdef][\w-]{21}$/;function st(){try{const V=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(V),V[0]=112+V[0]%16;const pe=function(V){return function(V){return btoa(String.fromCharCode(...V)).replace(/\+/g,"-").replace(/\//g,"_")}(V).substr(0,22)}(V);return dt.test(pe)?pe:""}catch(V){return""}}function lt(V){return`${V.appName}!${V.appId}`}const Dt=new Map;function Bt(V,Y){const pe=lt(V);gn(pe,Y),function(V,Y){const pe=(!Tn&&"BroadcastChannel"in self&&(Tn=new BroadcastChannel("[Firebase] FID Change"),Tn.onmessage=V=>{gn(V.data.key,V.data.fid)}),Tn);pe&&pe.postMessage({key:V,fid:Y}),0===Dt.size&&Tn&&(Tn.close(),Tn=null)}(pe,Y)}function gn(V,Y){const pe=Dt.get(V);if(pe)for(const Be of pe)Be(Y)}let Tn=null;const Ot="firebase-installations-store";let En=null;function Wn(){return En||(En=(0,ne.X3)("firebase-installations-database",1,{upgrade:(V,Y)=>{0===Y&&V.createObjectStore(Ot)}})),En}function tn(V,Y){return Un.apply(this,arguments)}function Un(){return(Un=(0,re.Z)(function*(V,Y){const pe=lt(V),Et=(yield Wn()).transaction(Ot,"readwrite"),Lt=Et.objectStore(Ot),un=yield Lt.get(pe);return yield Lt.put(Y,pe),yield Et.done,(!un||un.fid!==Y.fid)&&Bt(V,Y.fid),Y})).apply(this,arguments)}function jn(V){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,re.Z)(function*(V){const Y=lt(V),Be=(yield Wn()).transaction(Ot,"readwrite");yield Be.objectStore(Ot).delete(Y),yield Be.done})).apply(this,arguments)}function lr(V,Y){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,re.Z)(function*(V,Y){const pe=lt(V),Et=(yield Wn()).transaction(Ot,"readwrite"),Lt=Et.objectStore(Ot),un=yield Lt.get(pe),wn=Y(un);return void 0===wn?yield Lt.delete(pe):yield Lt.put(wn,pe),yield Et.done,wn&&(!un||un.fid!==wn.fid)&&Bt(V,wn.fid),wn})).apply(this,arguments)}function Dr(V){return hr.apply(this,arguments)}function hr(){return(hr=(0,re.Z)(function*(V){let Y;const pe=yield lr(V.appConfig,Be=>{const Et=ri(Be),Lt=sr(V,Et);return Y=Lt.registrationPromise,Lt.installationEntry});return""===pe.fid?{installationEntry:yield Y}:{installationEntry:pe,registrationPromise:Y}})).apply(this,arguments)}function ri(V){return Sn(V||{fid:st(),registrationStatus:0})}function sr(V,Y){if(0===Y.registrationStatus){if(!navigator.onLine)return{installationEntry:Y,registrationPromise:Promise.reject(qe.create("app-offline"))};const pe={fid:Y.fid,registrationStatus:1,registrationTime:Date.now()},Be=function(V,Y){return wt.apply(this,arguments)}(V,pe);return{installationEntry:pe,registrationPromise:Be}}return 1===Y.registrationStatus?{installationEntry:Y,registrationPromise:xr(V)}:{installationEntry:Y}}function wt(){return(wt=(0,re.Z)(function*(V,Y){try{const pe=yield ht(V,Y);return tn(V.appConfig,pe)}catch(pe){throw Ie(pe)&&409===pe.customData.serverCode?yield jn(V.appConfig):yield tn(V.appConfig,{fid:Y.fid,registrationStatus:0}),pe}})).apply(this,arguments)}function xr(V){return Or.apply(this,arguments)}function Or(){return(Or=(0,re.Z)(function*(V){let Y=yield fn(V.appConfig);for(;1===Y.registrationStatus;)yield Ht(100),Y=yield fn(V.appConfig);if(0===Y.registrationStatus){const{installationEntry:pe,registrationPromise:Be}=yield Dr(V);return Be||pe}return Y})).apply(this,arguments)}function fn(V){return lr(V,Y=>{if(!Y)throw qe.create("installation-not-found");return Sn(Y)})}function Sn(V){return function(V){return 1===V.registrationStatus&&V.registrationTime+1e4<Date.now()}(V)?{fid:V.fid,registrationStatus:0}:V}function dr(V,Y){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,re.Z)(function*({appConfig:V,heartbeatServiceProvider:Y},pe){const Be=Yn(V,pe),Et=Ye(V,pe),Lt=Y.getImmediate({optional:!0});if(Lt){const Pr=yield Lt.getHeartbeatsHeader();Pr&&Et.append("x-firebase-client",Pr)}const wn={method:"POST",headers:Et,body:JSON.stringify({installation:{sdkVersion:Ee,appId:V.appId}})},or=yield gt(()=>fetch(Be,wn));if(or.ok)return ct(yield or.json());throw yield at("Generate Auth Token",or)})).apply(this,arguments)}function Yn(V,{fid:Y}){return`${Me(V)}/${Y}/authTokens:generate`}function Kn(V){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,re.Z)(function*(V,Y=!1){let pe;const Be=yield lr(V.appConfig,Lt=>{if(!It(Lt))throw qe.create("not-registered");const un=Lt.authToken;if(!Y&&Oe(un))return Lt;if(1===un.requestStatus)return pe=dn(V,Y),Lt;{if(!navigator.onLine)throw qe.create("app-offline");const wn=it(Lt);return pe=Ae(V,wn),wn}});return pe?yield pe:Be.authToken})).apply(this,arguments)}function dn(V,Y){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,re.Z)(function*(V,Y){let pe=yield oe(V.appConfig);for(;1===pe.authToken.requestStatus;)yield Ht(100),pe=yield oe(V.appConfig);const Be=pe.authToken;return 0===Be.requestStatus?Kn(V,Y):Be})).apply(this,arguments)}function oe(V){return lr(V,Y=>{if(!It(Y))throw qe.create("not-registered");return function(V){return 1===V.requestStatus&&V.requestTime+1e4<Date.now()}(Y.authToken)?Object.assign(Object.assign({},Y),{authToken:{requestStatus:0}}):Y})}function Ae(V,Y){return nt.apply(this,arguments)}function nt(){return(nt=(0,re.Z)(function*(V,Y){try{const pe=yield dr(V,Y),Be=Object.assign(Object.assign({},Y),{authToken:pe});return yield tn(V.appConfig,Be),pe}catch(pe){if(!Ie(pe)||401!==pe.customData.serverCode&&404!==pe.customData.serverCode){const Be=Object.assign(Object.assign({},Y),{authToken:{requestStatus:0}});yield tn(V.appConfig,Be)}else yield jn(V.appConfig);throw pe}})).apply(this,arguments)}function It(V){return void 0!==V&&2===V.registrationStatus}function Oe(V){return 2===V.requestStatus&&!function(V){const Y=Date.now();return Y<V.creationTime||V.creationTime+V.expiresIn<Y+36e5}(V)}function it(V){const Y={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},V),{authToken:Y})}function Pe(){return(Pe=(0,re.Z)(function*(V){const Y=V,{installationEntry:pe,registrationPromise:Be}=yield Dr(Y);return Be?Be.catch(console.error):Kn(Y).catch(console.error),pe.fid})).apply(this,arguments)}function Kt(){return(Kt=(0,re.Z)(function*(V,Y=!1){const pe=V;return yield Bn(pe),(yield Kn(pe,Y)).token})).apply(this,arguments)}function Bn(V){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,re.Z)(function*(V){const{registrationPromise:Y}=yield Dr(V);Y&&(yield Y)})).apply(this,arguments)}function Rn(V){return qe.create("missing-app-config-values",{valueName:V})}const cn="installations";(0,ke._registerComponent)(new Q.wA(cn,V=>{const Y=V.getProvider("app").getImmediate(),pe=function(V){if(!V||!V.options)throw Rn("App Configuration");if(!V.name)throw Rn("App Name");const Y=["projectId","apiKey","appId"];for(const pe of Y)if(!V.options[pe])throw Rn(pe);return{appName:V.name,projectId:V.options.projectId,apiKey:V.options.apiKey,appId:V.options.appId}}(Y);return{app:Y,appConfig:pe,heartbeatServiceProvider:(0,ke._getProvider)(Y,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ke._registerComponent)(new Q.wA("installations-internal",V=>{const Y=V.getProvider("app").getImmediate(),pe=(0,ke._getProvider)(Y,cn).getImmediate();return{getId:()=>function(V){return Pe.apply(this,arguments)}(pe),getToken:Et=>function(V){return Kt.apply(this,arguments)}(pe,Et)}},"PRIVATE")),(0,ke.registerVersion)(we,se),(0,ke.registerVersion)(we,se,"esm2017");const Yr="@firebase/remote-config",Kr=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Vn{constructor(Y,pe,Be,Et){this.client=Y,this.storage=pe,this.storageCache=Be,this.logger=Et}isCachedDataFresh(Y,pe){if(!pe)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Be=Date.now()-pe,Et=Be<=Y;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Be}. Cache max age millis (minimumFetchIntervalMillis setting): ${Y}. Is cache hit: ${Et}.`),Et}fetch(Y){var pe=this;return(0,re.Z)(function*(){const[Be,Et]=yield Promise.all([pe.storage.getLastSuccessfulFetchTimestampMillis(),pe.storage.getLastSuccessfulFetchResponse()]);if(Et&&pe.isCachedDataFresh(Y.cacheMaxAgeMillis,Be))return Et;Y.eTag=Et&&Et.eTag;const Lt=yield pe.client.fetch(Y),un=[pe.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Lt.status&&un.push(pe.storage.setLastSuccessfulFetchResponse(Lt)),yield Promise.all(un),Lt})()}}function qn(V=navigator){return V.languages&&V.languages[0]||V.language}class Rr{constructor(Y,pe,Be,Et,Lt,un){this.firebaseInstallations=Y,this.sdkVersion=pe,this.namespace=Be,this.projectId=Et,this.apiKey=Lt,this.appId=un}fetch(Y){var pe=this;return(0,re.Z)(function*(){var Be,Et,Lt;const[un,wn]=yield Promise.all([pe.firebaseInstallations.getId(),pe.firebaseInstallations.getToken()]),Pr=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${pe.projectId}/namespaces/${pe.namespace}:fetch?key=${pe.apiKey}`,Mr={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":Y.eTag||"*"},ar={sdk_version:pe.sdkVersion,app_instance_id:un,app_instance_id_token:wn,app_id:pe.appId,language_code:qn()},Oi={method:"POST",headers:Mr,body:JSON.stringify(ar)},ui=fetch(Pr,Oi),Ii=new Promise((Ta,ta)=>{Y.signal.addEventListener(()=>{const Mo=new Error("The operation was aborted.");Mo.name="AbortError",ta(Mo)})});let vo;try{yield Promise.race([ui,Ii]),vo=yield ui}catch(Ta){let ta="fetch-client-network";throw"AbortError"===(null===(Be=Ta)||void 0===Be?void 0:Be.name)&&(ta="fetch-timeout"),Kr.create(ta,{originalErrorMessage:null===(Et=Ta)||void 0===Et?void 0:Et.message})}let Ql=vo.status;const ea=vo.headers.get("ETag")||void 0;let ha,Xl;if(200===vo.status){let Ta;try{Ta=yield vo.json()}catch(ta){throw Kr.create("fetch-client-parse",{originalErrorMessage:null===(Lt=ta)||void 0===Lt?void 0:Lt.message})}ha=Ta.entries,Xl=Ta.state}if("INSTANCE_STATE_UNSPECIFIED"===Xl?Ql=500:"NO_CHANGE"===Xl?Ql=304:("NO_TEMPLATE"===Xl||"EMPTY_CONFIG"===Xl)&&(ha={}),304!==Ql&&200!==Ql)throw Kr.create("fetch-status",{httpStatus:Ql});return{status:Ql,eTag:ea,config:ha}})()}}class Mi{constructor(Y,pe){this.client=Y,this.storage=pe}fetch(Y){var pe=this;return(0,re.Z)(function*(){const Be=(yield pe.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return pe.attemptFetch(Y,Be)})()}attemptFetch(Y,{throttleEndTimeMillis:pe,backoffCount:Be}){var Et=this;return(0,re.Z)(function*(){yield function(V,Y){return new Promise((pe,Be)=>{const Et=Math.max(Y-Date.now(),0),Lt=setTimeout(pe,Et);V.addEventListener(()=>{clearTimeout(Lt),Be(Kr.create("fetch-throttle",{throttleEndTimeMillis:Y}))})})}(Y.signal,pe);try{const Lt=yield Et.client.fetch(Y);return yield Et.storage.deleteThrottleMetadata(),Lt}catch(Lt){if(!function(V){if(!(V instanceof ae.ZR&&V.customData))return!1;const Y=Number(V.customData.httpStatus);return 429===Y||500===Y||503===Y||504===Y}(Lt))throw Lt;const un={throttleEndTimeMillis:Date.now()+(0,ae.$s)(Be),backoffCount:Be+1};return yield Et.storage.setThrottleMetadata(un),Et.attemptFetch(Y,un)}})()}}class rs{constructor(Y,pe,Be,Et,Lt){this.app=Y,this._client=pe,this._storageCache=Be,this._storage=Et,this._logger=Lt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function _s(V,Y){var pe;const Be=V.target.error||void 0;return Kr.create(Y,{originalErrorMessage:Be&&(null===(pe=Be)||void 0===pe?void 0:pe.message)})}const Ki="app_namespace_store";class Lo{constructor(Y,pe,Be,Et=function(){return new Promise((V,Y)=>{var pe;try{const Be=indexedDB.open("firebase_remote_config",1);Be.onerror=Et=>{Y(_s(Et,"storage-open"))},Be.onsuccess=Et=>{V(Et.target.result)},Be.onupgradeneeded=Et=>{0===Et.oldVersion&&Et.target.result.createObjectStore(Ki,{keyPath:"compositeKey"})}}catch(Be){Y(Kr.create("storage-open",{originalErrorMessage:null===(pe=Be)||void 0===pe?void 0:pe.message}))}})}()){this.appId=Y,this.appName=pe,this.namespace=Be,this.openDbPromise=Et}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(Y){return this.set("last_fetch_status",Y)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(Y){return this.set("last_successful_fetch_timestamp_millis",Y)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(Y){return this.set("last_successful_fetch_response",Y)}getActiveConfig(){return this.get("active_config")}setActiveConfig(Y){return this.set("active_config",Y)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(Y){return this.set("active_config_etag",Y)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(Y){return this.set("throttle_metadata",Y)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(Y){var pe=this;return(0,re.Z)(function*(){const Be=yield pe.openDbPromise;return new Promise((Et,Lt)=>{var un;const or=Be.transaction([Ki],"readonly").objectStore(Ki),Pr=pe.createCompositeKey(Y);try{const Mr=or.get(Pr);Mr.onerror=ar=>{Lt(_s(ar,"storage-get"))},Mr.onsuccess=ar=>{const Oi=ar.target.result;Et(Oi?Oi.value:void 0)}}catch(Mr){Lt(Kr.create("storage-get",{originalErrorMessage:null===(un=Mr)||void 0===un?void 0:un.message}))}})})()}set(Y,pe){var Be=this;return(0,re.Z)(function*(){const Et=yield Be.openDbPromise;return new Promise((Lt,un)=>{var wn;const Pr=Et.transaction([Ki],"readwrite").objectStore(Ki),Mr=Be.createCompositeKey(Y);try{const ar=Pr.put({compositeKey:Mr,value:pe});ar.onerror=Oi=>{un(_s(Oi,"storage-set"))},ar.onsuccess=()=>{Lt()}}catch(ar){un(Kr.create("storage-set",{originalErrorMessage:null===(wn=ar)||void 0===wn?void 0:wn.message}))}})})()}delete(Y){var pe=this;return(0,re.Z)(function*(){const Be=yield pe.openDbPromise;return new Promise((Et,Lt)=>{var un;const or=Be.transaction([Ki],"readwrite").objectStore(Ki),Pr=pe.createCompositeKey(Y);try{const Mr=or.delete(Pr);Mr.onerror=ar=>{Lt(_s(ar,"storage-delete"))},Mr.onsuccess=()=>{Et()}}catch(Mr){Lt(Kr.create("storage-delete",{originalErrorMessage:null===(un=Mr)||void 0===un?void 0:un.message}))}})})()}createCompositeKey(Y){return[this.appId,this.appName,this.namespace,Y].join()}}class To{constructor(Y){this.storage=Y}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var Y=this;return(0,re.Z)(function*(){const pe=Y.storage.getLastFetchStatus(),Be=Y.storage.getLastSuccessfulFetchTimestampMillis(),Et=Y.storage.getActiveConfig(),Lt=yield pe;Lt&&(Y.lastFetchStatus=Lt);const un=yield Be;un&&(Y.lastSuccessfulFetchTimestampMillis=un);const wn=yield Et;wn&&(Y.activeConfig=wn)})()}setLastFetchStatus(Y){return this.lastFetchStatus=Y,this.storage.setLastFetchStatus(Y)}setLastSuccessfulFetchTimestampMillis(Y){return this.lastSuccessfulFetchTimestampMillis=Y,this.storage.setLastSuccessfulFetchTimestampMillis(Y)}setActiveConfig(Y){return this.activeConfig=Y,this.storage.setActiveConfig(Y)}}function Bs(){return us.apply(this,arguments)}function us(){return(us=(0,re.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(V){return!1}})).apply(this,arguments)}(0,ke._registerComponent)(new Q.wA("remote-config",function(Y,{instanceIdentifier:pe}){const Be=Y.getProvider("app").getImmediate(),Et=Y.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Kr.create("registration-window");if(!(0,ae.hl)())throw Kr.create("indexed-db-unavailable");const{projectId:Lt,apiKey:un,appId:wn}=Be.options;if(!Lt)throw Kr.create("registration-project-id");if(!un)throw Kr.create("registration-api-key");if(!wn)throw Kr.create("registration-app-id");const or=new Lo(wn,Be.name,pe=pe||"firebase"),Pr=new To(or),Mr=new Z.Yd(Yr);Mr.logLevel=Z.in.ERROR;const ar=new Rr(Et,ke.SDK_VERSION,pe,Lt,un,wn),Oi=new Mi(ar,or),ui=new Vn(Oi,or,Pr,Mr),Ii=new rs(Be,ui,Pr,or,Mr);return function(V){const Y=(0,ae.m9)(V);Y._initializePromise||(Y._initializePromise=Y._storageCache.loadFromStorage().then(()=>{Y._isInitializationComplete=!0}))}(Ii),Ii},"PUBLIC").setMultipleInstances(!0)),(0,ke.registerVersion)(Yr,"0.3.14"),(0,ke.registerVersion)(Yr,"0.3.14","esm2017");const $s="/firebase-messaging-sw.js",Zs="/firebase-cloud-messaging-push-scope",Xr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",$i="google.c.a.c_id",cs="google.c.a.c_l",Xs="google.c.a.ts",is="google.c.a.e";var Us=(()=>{return(V=Us||(Us={})).PUSH_RECEIVED="push-received",V.NOTIFICATION_CLICKED="notification-clicked",Us;var V})();function gi(V){const Y=new Uint8Array(V);return btoa(String.fromCharCode(...Y)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Is(V){const pe=(V+"=".repeat((4-V.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Be=atob(pe),Et=new Uint8Array(Be.length);for(let Lt=0;Lt<Be.length;++Lt)Et[Lt]=Be.charCodeAt(Lt);return Et}const di="fcm_token_details_db",fo="fcm_token_object_Store";function Li(V){return Zi.apply(this,arguments)}function Zi(){return Zi=(0,re.Z)(function*(V){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Lt=>Lt.name).includes(di))return null;let Y=null;return(yield(0,ne.X3)(di,5,{upgrade:(Be=(0,re.Z)(function*(Et,Lt,un,wn){var or;if(Lt<2||!Et.objectStoreNames.contains(fo))return;const Pr=wn.objectStore(fo),Mr=yield Pr.index("fcmSenderId").get(V);if(yield Pr.clear(),Mr)if(2===Lt){const ar=Mr;if(!ar.auth||!ar.p256dh||!ar.endpoint)return;Y={token:ar.fcmToken,createTime:null!==(or=ar.createTime)&&void 0!==or?or:Date.now(),subscriptionOptions:{auth:ar.auth,p256dh:ar.p256dh,endpoint:ar.endpoint,swScope:ar.swScope,vapidKey:"string"==typeof ar.vapidKey?ar.vapidKey:gi(ar.vapidKey)}}}else if(3===Lt){const ar=Mr;Y={token:ar.fcmToken,createTime:ar.createTime,subscriptionOptions:{auth:gi(ar.auth),p256dh:gi(ar.p256dh),endpoint:ar.endpoint,swScope:ar.swScope,vapidKey:gi(ar.vapidKey)}}}else if(4===Lt){const ar=Mr;Y={token:ar.fcmToken,createTime:ar.createTime,subscriptionOptions:{auth:gi(ar.auth),p256dh:gi(ar.p256dh),endpoint:ar.endpoint,swScope:ar.swScope,vapidKey:gi(ar.vapidKey)}}}}),function(Lt,un,wn,or){return Be.apply(this,arguments)})})).close(),yield(0,ne.Lj)(di),yield(0,ne.Lj)("fcm_vapid_details_db"),yield(0,ne.Lj)("undefined"),zi(Y)?Y:null;var Be}),Zi.apply(this,arguments)}function zi(V){if(!V||!V.subscriptionOptions)return!1;const{subscriptionOptions:Y}=V;return"number"==typeof V.createTime&&V.createTime>0&&"string"==typeof V.token&&V.token.length>0&&"string"==typeof Y.auth&&Y.auth.length>0&&"string"==typeof Y.p256dh&&Y.p256dh.length>0&&"string"==typeof Y.endpoint&&Y.endpoint.length>0&&"string"==typeof Y.swScope&&Y.swScope.length>0&&"string"==typeof Y.vapidKey&&Y.vapidKey.length>0}const _i="firebase-messaging-store";let Qi=null;function G(){return Qi||(Qi=(0,ne.X3)("firebase-messaging-database",1,{upgrade:(V,Y)=>{0===Y&&V.createObjectStore(_i)}})),Qi}function le(V){return K.apply(this,arguments)}function K(){return(K=(0,re.Z)(function*(V){const Y=H(V),Be=yield(yield G()).transaction(_i).objectStore(_i).get(Y);if(Be)return Be;{const Et=yield Li(V.appConfig.senderId);if(Et)return yield Ce(V,Et),Et}})).apply(this,arguments)}function Ce(V,Y){return ze.apply(this,arguments)}function ze(){return(ze=(0,re.Z)(function*(V,Y){const pe=H(V),Et=(yield G()).transaction(_i,"readwrite");return yield Et.objectStore(_i).put(Y,pe),yield Et.done,Y})).apply(this,arguments)}function kt(V){return an.apply(this,arguments)}function an(){return(an=(0,re.Z)(function*(V){const Y=H(V),Be=(yield G()).transaction(_i,"readwrite");yield Be.objectStore(_i).delete(Y),yield Be.done})).apply(this,arguments)}function H({appConfig:V}){return V.appId}const k=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ue(V,Y){return _t.apply(this,arguments)}function _t(){return(_t=(0,re.Z)(function*(V,Y){var pe;const Be=yield oi(V),Et=tr(Y),Lt={method:"POST",headers:Be,body:JSON.stringify(Et)};let un;try{un=yield(yield fetch(li(V.appConfig),Lt)).json()}catch(wn){throw k.create("token-subscribe-failed",{errorInfo:null===(pe=wn)||void 0===pe?void 0:pe.toString()})}if(un.error)throw k.create("token-subscribe-failed",{errorInfo:un.error.message});if(!un.token)throw k.create("token-subscribe-no-token");return un.token})).apply(this,arguments)}function mn(V,Y){return er.apply(this,arguments)}function er(){return(er=(0,re.Z)(function*(V,Y){var pe;const Be=yield oi(V),Et=tr(Y.subscriptionOptions),Lt={method:"PATCH",headers:Be,body:JSON.stringify(Et)};let un;try{un=yield(yield fetch(`${li(V.appConfig)}/${Y.token}`,Lt)).json()}catch(wn){throw k.create("token-update-failed",{errorInfo:null===(pe=wn)||void 0===pe?void 0:pe.toString()})}if(un.error)throw k.create("token-update-failed",{errorInfo:un.error.message});if(!un.token)throw k.create("token-update-no-token");return un.token})).apply(this,arguments)}function Wr(V,Y){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,re.Z)(function*(V,Y){var pe;const Et={method:"DELETE",headers:yield oi(V)};try{const un=yield(yield fetch(`${li(V.appConfig)}/${Y}`,Et)).json();if(un.error)throw k.create("token-unsubscribe-failed",{errorInfo:un.error.message})}catch(Lt){throw k.create("token-unsubscribe-failed",{errorInfo:null===(pe=Lt)||void 0===pe?void 0:pe.toString()})}})).apply(this,arguments)}function li({projectId:V}){return`https://fcmregistrations.googleapis.com/v1/projects/${V}/registrations`}function oi(V){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,re.Z)(function*({appConfig:V,installations:Y}){const pe=yield Y.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":V.apiKey,"x-goog-firebase-installations-auth":`FIS ${pe}`})})).apply(this,arguments)}function tr({p256dh:V,auth:Y,endpoint:pe,vapidKey:Be}){const Et={web:{endpoint:pe,auth:Y,p256dh:V}};return Be!==Xr&&(Et.web.applicationPubKey=Be),Et}const ia=6048e5;function Do(V){return La.apply(this,arguments)}function La(){return(La=(0,re.Z)(function*(V){const Y=yield So(V.swRegistration,V.vapidKey),pe={vapidKey:V.vapidKey,swScope:V.swRegistration.scope,endpoint:Y.endpoint,auth:gi(Y.getKey("auth")),p256dh:gi(Y.getKey("p256dh"))},Be=yield le(V.firebaseDependencies);if(Be){if(Js(Be.subscriptionOptions,pe))return Date.now()>=Be.createTime+ia?ya(V,{token:Be.token,createTime:Date.now(),subscriptionOptions:pe}):Be.token;try{yield Wr(V.firebaseDependencies,Be.token)}catch(Et){console.warn(Et)}return rn(V.firebaseDependencies,pe)}return rn(V.firebaseDependencies,pe)})).apply(this,arguments)}function Va(V){return Go.apply(this,arguments)}function Go(){return(Go=(0,re.Z)(function*(V){const Y=yield le(V.firebaseDependencies);Y&&(yield Wr(V.firebaseDependencies,Y.token),yield kt(V.firebaseDependencies));const pe=yield V.swRegistration.pushManager.getSubscription();return!pe||pe.unsubscribe()})).apply(this,arguments)}function ya(V,Y){return po.apply(this,arguments)}function po(){return(po=(0,re.Z)(function*(V,Y){try{const pe=yield mn(V.firebaseDependencies,Y),Be=Object.assign(Object.assign({},Y),{token:pe,createTime:Date.now()});return yield Ce(V.firebaseDependencies,Be),pe}catch(pe){throw yield Va(V),pe}})).apply(this,arguments)}function rn(V,Y){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,re.Z)(function*(V,Y){const Be={token:yield ue(V,Y),createTime:Date.now(),subscriptionOptions:Y};return yield Ce(V,Be),Be.token})).apply(this,arguments)}function So(V,Y){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,re.Z)(function*(V,Y){return(yield V.pushManager.getSubscription())||V.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Is(Y)})})).apply(this,arguments)}function Js(V,Y){return Y.vapidKey===V.vapidKey&&Y.endpoint===V.endpoint&&Y.auth===V.auth&&Y.p256dh===V.p256dh}function bs(V){const Y={from:V.from,collapseKey:V.collapse_key,messageId:V.fcmMessageId};return function(V,Y){if(!Y.notification)return;V.notification={};const pe=Y.notification.title;pe&&(V.notification.title=pe);const Be=Y.notification.body;Be&&(V.notification.body=Be);const Et=Y.notification.image;Et&&(V.notification.image=Et)}(Y,V),function(V,Y){!Y.data||(V.data=Y.data)}(Y,V),function(V,Y){var pe,Be,Et,Lt,un;if(!Y.fcmOptions&&!(null===(pe=Y.notification)||void 0===pe?void 0:pe.click_action))return;V.fcmOptions={};const wn=null!==(Et=null===(Be=Y.fcmOptions)||void 0===Be?void 0:Be.link)&&void 0!==Et?Et:null===(Lt=Y.notification)||void 0===Lt?void 0:Lt.click_action;wn&&(V.fcmOptions.link=wn);const or=null===(un=Y.fcmOptions)||void 0===un?void 0:un.analytics_label;or&&(V.fcmOptions.analyticsLabel=or)}(Y,V),Y}function fl(V){return"object"==typeof V&&!!V&&$i in V}function eo(V,Y){const pe=[];for(let Be=0;Be<V.length;Be++)pe.push(V.charAt(Be)),Be<Y.length&&pe.push(Y.charAt(Be));return pe.join("")}function go(V){return k.create("missing-app-config-values",{valueName:V})}eo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),eo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Xi{constructor(Y,pe,Be){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Et=function(V){if(!V||!V.options)throw go("App Configuration Object");if(!V.name)throw go("App Name");const Y=["projectId","apiKey","appId","messagingSenderId"],{options:pe}=V;for(const Be of Y)if(!pe[Be])throw go(Be);return{appName:V.name,projectId:pe.projectId,apiKey:pe.apiKey,appId:pe.appId,senderId:pe.messagingSenderId}}(Y);this.firebaseDependencies={app:Y,appConfig:Et,installations:pe,analyticsProvider:Be}}_delete(){return Promise.resolve()}}function Ps(V){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,re.Z)(function*(V){var Y;try{V.swRegistration=yield navigator.serviceWorker.register($s,{scope:Zs}),V.swRegistration.update().catch(()=>{})}catch(pe){throw k.create("failed-service-worker-registration",{browserErrorMessage:null===(Y=pe)||void 0===Y?void 0:Y.message})}})).apply(this,arguments)}function Cs(V,Y){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,re.Z)(function*(V,Y){if(!Y&&!V.swRegistration&&(yield Ps(V)),Y||!V.swRegistration){if(!(Y instanceof ServiceWorkerRegistration))throw k.create("invalid-sw-registration");V.swRegistration=Y}})).apply(this,arguments)}function oo(V,Y){return ds.apply(this,arguments)}function ds(){return(ds=(0,re.Z)(function*(V,Y){Y?V.vapidKey=Y:V.vapidKey||(V.vapidKey=Xr)})).apply(this,arguments)}function js(){return(js=(0,re.Z)(function*(V,Y){if(!navigator)throw k.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw k.create("permission-blocked");return yield oo(V,null==Y?void 0:Y.vapidKey),yield Cs(V,null==Y?void 0:Y.serviceWorkerRegistration),Do(V)})).apply(this,arguments)}function Ao(V,Y,pe){return qo.apply(this,arguments)}function qo(){return(qo=(0,re.Z)(function*(V,Y,pe){const Be=xo(Y);(yield V.firebaseDependencies.analyticsProvider.get()).logEvent(Be,{message_id:pe[$i],message_name:pe[cs],message_time:pe[Xs],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function xo(V){switch(V){case Us.NOTIFICATION_CLICKED:return"notification_open";case Us.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Hs(){return(Hs=(0,re.Z)(function*(V,Y){const pe=Y.data;if(!pe.isFirebaseMessaging)return;V.onMessageHandler&&pe.messageType===Us.PUSH_RECEIVED&&("function"==typeof V.onMessageHandler?V.onMessageHandler(bs(pe)):V.onMessageHandler.next(bs(pe)));const Be=pe.data;fl(Be)&&"1"===Be[is]&&(yield Ao(V,pe.messageType,Be))})).apply(this,arguments)}const Yo="@firebase/messaging";function $a(){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,re.Z)(function*(){try{yield(0,ae.eu)()}catch(V){return!1}return"undefined"!=typeof window&&(0,ae.hl)()&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ke._registerComponent)(new Q.wA("messaging",V=>{const Y=new Xi(V.getProvider("app").getImmediate(),V.getProvider("installations-internal").getImmediate(),V.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",pe=>function(V,Y){return Hs.apply(this,arguments)}(Y,pe)),Y},"PUBLIC")),(0,ke._registerComponent)(new Q.wA("messaging-internal",V=>{const Y=V.getProvider("messaging").getImmediate();return{getToken:Be=>function(V,Y){return js.apply(this,arguments)}(Y,Be)}},"PRIVATE")),(0,ke.registerVersion)(Yo,"0.9.19"),(0,ke.registerVersion)(Yo,"0.9.19","esm2017");const yn="analytics",yr="firebase_id",wi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",zt="https://www.googletagmanager.com/gtag/js",nr=new Z.Yd("@firebase/analytics");function Ji(V){return Promise.all(V.map(Y=>Y.catch(pe=>pe)))}function ro(V,Y){const pe=document.createElement("script");pe.src=`${zt}?l=${V}&id=${Y}`,pe.async=!0,document.head.appendChild(pe)}function $n(V,Y,pe,Be,Et,Lt){return ai.apply(this,arguments)}function ai(){return(ai=(0,re.Z)(function*(V,Y,pe,Be,Et,Lt){const un=Be[Et];try{if(un)yield Y[un];else{const or=(yield Ji(pe)).find(Pr=>Pr.measurementId===Et);or&&(yield Y[or.appId])}}catch(wn){nr.error(wn)}V("config",Et,Lt)})).apply(this,arguments)}function ln(V,Y,pe,Be,Et){return ft.apply(this,arguments)}function ft(){return(ft=(0,re.Z)(function*(V,Y,pe,Be,Et){try{let Lt=[];if(Et&&Et.send_to){let un=Et.send_to;Array.isArray(un)||(un=[un]);const wn=yield Ji(pe);for(const or of un){const Pr=wn.find(ar=>ar.measurementId===or),Mr=Pr&&Y[Pr.appId];if(!Mr){Lt=[];break}Lt.push(Mr)}}0===Lt.length&&(Lt=Object.values(Y)),yield Promise.all(Lt),V("event",Be,Et||{})}catch(Lt){nr.error(Lt)}})).apply(this,arguments)}function Rl(V){const Y=window.document.getElementsByTagName("script");for(const pe of Object.values(Y))if(pe.src&&pe.src.includes(zt)&&pe.src.includes(V))return pe;return null}const ks=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ss=new class{constructor(Y={},pe=1e3){this.throttleMetadata=Y,this.intervalMillis=pe}getThrottleMetadata(Y){return this.throttleMetadata[Y]}setThrottleMetadata(Y,pe){this.throttleMetadata[Y]=pe}deleteThrottleMetadata(Y){delete this.throttleMetadata[Y]}};function Eu(V){return new Headers({Accept:"application/json","x-goog-api-key":V})}function Ml(V){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,re.Z)(function*(V){var Y;const{appId:pe,apiKey:Be}=V,Et={method:"GET",headers:Eu(Be)},Lt=wi.replace("{app-id}",pe),un=yield fetch(Lt,Et);if(200!==un.status&&304!==un.status){let wn="";try{const or=yield un.json();(null===(Y=or.error)||void 0===Y?void 0:Y.message)&&(wn=or.error.message)}catch(or){}throw ks.create("config-fetch-failed",{httpStatus:un.status,responseMessage:wn})}return un.json()})).apply(this,arguments)}function _a(V){return gr.apply(this,arguments)}function gr(){return(gr=(0,re.Z)(function*(V,Y=ss,pe){const{appId:Be,apiKey:Et,measurementId:Lt}=V.options;if(!Be)throw ks.create("no-app-id");if(!Et){if(Lt)return{measurementId:Lt,appId:Be};throw ks.create("no-api-key")}const un=Y.getThrottleMetadata(Be)||{backoffCount:0,throttleEndTimeMillis:Date.now()},wn=new Ko;return setTimeout((0,re.Z)(function*(){wn.abort()}),void 0!==pe?pe:6e4),Bo({appId:Be,apiKey:Et,measurementId:Lt},un,wn,Y)})).apply(this,arguments)}function Bo(V,Y,pe){return ao.apply(this,arguments)}function ao(){return(ao=(0,re.Z)(function*(V,{throttleEndTimeMillis:Y,backoffCount:pe},Be,Et=ss){var Lt,un;const{appId:wn,measurementId:or}=V;try{yield hi(Be,Y)}catch(Pr){if(or)return nr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${or} provided in the "measurementId" field in the local Firebase config. [${null===(Lt=Pr)||void 0===Lt?void 0:Lt.message}]`),{appId:wn,measurementId:or};throw Pr}try{const Pr=yield Ml(V);return Et.deleteThrottleMetadata(wn),Pr}catch(Pr){const Mr=Pr;if(!fr(Mr)){if(Et.deleteThrottleMetadata(wn),or)return nr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${or} provided in the "measurementId" field in the local Firebase config. [${null==Mr?void 0:Mr.message}]`),{appId:wn,measurementId:or};throw Pr}const ar=503===Number(null===(un=null==Mr?void 0:Mr.customData)||void 0===un?void 0:un.httpStatus)?(0,ae.$s)(pe,Et.intervalMillis,30):(0,ae.$s)(pe,Et.intervalMillis),Oi={throttleEndTimeMillis:Date.now()+ar,backoffCount:pe+1};return Et.setThrottleMetadata(wn,Oi),nr.debug(`Calling attemptFetch again in ${ar} millis`),Bo(V,Oi,Be,Et)}})).apply(this,arguments)}function hi(V,Y){return new Promise((pe,Be)=>{const Et=Math.max(Y-Date.now(),0),Lt=setTimeout(pe,Et);V.addEventListener(()=>{clearTimeout(Lt),Be(ks.create("fetch-throttle",{throttleEndTimeMillis:Y}))})})}function fr(V){if(!(V instanceof ae.ZR&&V.customData))return!1;const Y=Number(V.customData.httpStatus);return 429===Y||500===Y||503===Y||504===Y}class Ko{constructor(){this.listeners=[]}addEventListener(Y){this.listeners.push(Y)}abort(){this.listeners.forEach(Y=>Y())}}let ei,lo;function fi(){return(fi=(0,re.Z)(function*(V,Y,pe,Be,Et){if(Et&&Et.global)V("event",pe,Be);else{const Lt=yield Y;V("event",pe,Object.assign(Object.assign({},Be),{send_to:Lt}))}})).apply(this,arguments)}function F(V){lo=V}function A(V){ei=V}function S(){return $.apply(this,arguments)}function $(){return($=(0,re.Z)(function*(){var V;if(!(0,ae.hl)())return nr.warn(ks.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(Y){return nr.warn(ks.create("indexeddb-unavailable",{errorInfo:null===(V=Y)||void 0===V?void 0:V.toString()}).message),!1}return!0})).apply(this,arguments)}function ye(){return(ye=(0,re.Z)(function*(V,Y,pe,Be,Et,Lt,un){var wn;const or=_a(V);or.then(ui=>{pe[ui.measurementId]=ui.appId,V.options.measurementId&&ui.measurementId!==V.options.measurementId&&nr.warn(`The measurement ID in the local Firebase config (${V.options.measurementId}) does not match the measurement ID fetched from the server (${ui.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ui=>nr.error(ui)),Y.push(or);const Pr=S().then(ui=>{if(ui)return Be.getId()}),[Mr,ar]=yield Promise.all([or,Pr]);Rl(Lt)||ro(Lt,Mr.measurementId),lo&&(Et("consent","default",lo),F(void 0)),Et("js",new Date);const Oi=null!==(wn=null==un?void 0:un.config)&&void 0!==wn?wn:{};return Oi.origin="firebase",Oi.update=!0,null!=ar&&(Oi[yr]=ar),Et("config",Mr.measurementId,Oi),ei&&(Et("set",ei),A(void 0)),Mr.measurementId})).apply(this,arguments)}class je{constructor(Y){this.app=Y}_delete(){return delete me[this.app.options.appId],Promise.resolve()}}let me={},Wt=[];const xn={};let jr,wr,$r="dataLayer",hs=!1;function Jr(V,Y,pe){!function(){const V=[];if((0,ae.ru)()&&V.push("This is a browser extension environment."),(0,ae.zI)()||V.push("Cookies are not available."),V.length>0){const Y=V.map((Be,Et)=>`(${Et+1}) ${Be}`).join(" "),pe=ks.create("invalid-analytics-context",{errorInfo:Y});nr.warn(pe.message)}}();const Be=V.options.appId;if(!Be)throw ks.create("no-app-id");if(!V.options.apiKey){if(!V.options.measurementId)throw ks.create("no-api-key");nr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${V.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=me[Be])throw ks.create("already-exists",{id:Be});if(!hs){!function(V){let Y=[];Array.isArray(window[V])?Y=window[V]:window[V]=Y}($r);const{wrappedGtag:Lt,gtagCore:un}=function(V,Y,pe,Be,Et){let Lt=function(...un){window[Be].push(arguments)};return window[Et]&&"function"==typeof window[Et]&&(Lt=window[Et]),window[Et]=function(V,Y,pe,Be){function Lt(){return(Lt=(0,re.Z)(function*(un,wn,or){try{"event"===un?yield ln(V,Y,pe,wn,or):"config"===un?yield $n(V,Y,pe,Be,wn,or):"consent"===un?V("consent","update",or):V("set",wn)}catch(Pr){nr.error(Pr)}})).apply(this,arguments)}return function(un,wn,or){return Lt.apply(this,arguments)}}(Lt,V,Y,pe),{gtagCore:Lt,wrappedGtag:window[Et]}}(me,Wt,xn,$r,"gtag");wr=Lt,jr=un,hs=!0}return me[Be]=function(V,Y,pe,Be,Et,Lt,un){return ye.apply(this,arguments)}(V,Wt,xn,Y,jr,$r,pe),new je(V)}function Ia(){return $o.apply(this,arguments)}function $o(){return($o=(0,re.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(V){return!1}})).apply(this,arguments)}const ii="@firebase/analytics";(0,ke._registerComponent)(new Q.wA(yn,(Y,{options:pe})=>Jr(Y.getProvider("app").getImmediate(),Y.getProvider("installations-internal").getImmediate(),pe),"PUBLIC")),(0,ke._registerComponent)(new Q.wA("analytics-internal",function(Y){try{const pe=Y.getProvider(yn).getImmediate();return{logEvent:(Be,Et,Lt)=>function(V,Y,pe,Be){V=(0,ae.m9)(V),function(V,Y,pe,Be,Et){return fi.apply(this,arguments)}(wr,me[V.app.options.appId],Y,pe,Be).catch(Et=>nr.error(Et))}(pe,Be,Et,Lt)}}catch(pe){throw ks.create("interop-component-reg-failed",{reason:pe})}},"PRIVATE")),(0,ke.registerVersion)(ii,"0.8.3"),(0,ke.registerVersion)(ii,"0.8.3","esm2017");var Mc=L(7771),yo=L(3637),Si=L(8891),tl=L(3342),es=L(3101),Ol=L(309);const ja=new _.GfV("7.4.1"),Pl="__angularfire_symbol__analyticsIsSupportedValue",la="__angularfire_symbol__analyticsIsSupported",ls="__angularfire_symbol__remoteConfigIsSupportedValue",ws="__angularfire_symbol__remoteConfigIsSupported",Uo="__angularfire_symbol__messagingIsSupportedValue",co="__angularfire_symbol__messagingIsSupported";function nl(V,Y,pe){if(Y){if(1===Y.length)return Y[0];const Lt=Y.filter(un=>un.app===pe);if(1===Lt.length)return Lt[0]}return pe.container.getProvider(V).getImmediate({optional:!0})}globalThis[la]||(globalThis[la]=Ia().then(V=>globalThis[Pl]=V).catch(()=>globalThis[Pl]=!1)),globalThis[co]||(globalThis[co]=$a().then(V=>globalThis[Uo]=V).catch(()=>globalThis[Uo]=!1)),globalThis[ws]||(globalThis[ws]=Bs().then(V=>globalThis[ls]=V).catch(()=>globalThis[ls]=!1));const fd=(V,Y)=>{const pe=Y?[Y]:(0,P.C6)(),Be=[];return pe.forEach(Et=>{Et.container.getProvider(V).instances.forEach(un=>{Be.includes(un)||Be.push(un)})}),Be};function Xo(){}class Gs{constructor(Y,pe=Mc.N){this.zone=Y,this.delegate=pe}now(){return this.delegate.now()}schedule(Y,pe,Be){const Et=this.zone;return this.delegate.schedule(function(un){Et.runGuarded(()=>{Y.apply(this,[un])})},pe,Be)}}class ca{constructor(Y){this.zone=Y,this.task=null}call(Y,pe){const Be=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Xo,{},Xo,Xo)),pe.pipe((0,tl.b)({next:Be,complete:Be,error:Be})).subscribe(Y).add(Be)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ca=(()=>{class V{constructor(pe){this.ngZone=pe,this.outsideAngular=pe.runOutsideAngular(()=>new Gs(Zone.current)),this.insideAngular=pe.run(()=>new Gs(Zone.current,yo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return V.\u0275fac=function(pe){return new(pe||V)(_.LFG(_.R0b))},V.\u0275prov=_.Yz7({token:V,factory:V.\u0275fac,providedIn:"root"}),V})();function Jo(){const V=globalThis.\u0275AngularFireScheduler;if(!V)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return V}function Nl(V){return Jo().ngZone.runOutsideAngular(()=>V())}function da(V){return Jo().ngZone.run(()=>V())}function kl(V){return Jo(),function(V){return function(pe){return(pe=pe.lift(new ca(V.ngZone))).pipe((0,es.R)(V.outsideAngular),(0,Ol.QV)(V.insideAngular))}}(Jo())(V)}const wa=(V,Y)=>function(){const Be=arguments;return Y&&setTimeout(()=>{"scheduled"===Y.state&&Y.invoke()},10),da(()=>V.apply(void 0,Be))},rl=(V,Y)=>function(){let pe;const Be=arguments;for(let Lt=0;Lt<arguments.length;Lt++)"function"==typeof Be[Lt]&&(Y&&(pe||(pe=da(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Xo,{},Xo,Xo)))),Be[Lt]=wa(Be[Lt],pe));const Et=Nl(()=>V.apply(this,Be));if(!Y){if(Et instanceof Si.y){const Lt=Jo();return Et.pipe((0,es.R)(Lt.outsideAngular),(0,Ol.QV)(Lt.insideAngular))}return da(()=>Et)}return Et instanceof Si.y?Et.pipe(kl):Et instanceof Promise?da(()=>new Promise((Lt,un)=>Et.then(wn=>da(()=>Lt(wn)),wn=>da(()=>un(wn))))):"function"==typeof Et&&pe?function(){return setTimeout(()=>{pe&&"scheduled"===pe.state&&pe.invoke()},10),Et.apply(this,arguments)}:da(()=>Et)}},665:(nn,ot,L)=>{"use strict";L.d(ot,{qu:()=>kt,u:()=>Fe,sg:()=>ci,u5:()=>K,JU:()=>Ee,a5:()=>Wn,JJ:()=>Qn,JL:()=>lr,UX:()=>Ce,kI:()=>Vt,_Y:()=>j});var _=L(7716),P=L(8583),re=L(8891),ke=L(9796),ae=L(8002),Q=L(1555),Z=L(4402);function we(H,B){return new re.y(k=>{const ue=H.length;if(0===ue)return void k.complete();const _t=new Array(ue);let mn=0,er=0;for(let Wr=0;Wr<ue;Wr++){const Ei=(0,Z.D)(H[Wr]);let li=!1;k.add(Ei.subscribe({next:oi=>{li||(li=!0,er++),_t[Wr]=oi},error:oi=>k.error(oi),complete:()=>{mn++,(mn===ue||!li)&&(er===ue&&k.next(B?B.reduce((oi,Gr,tr)=>(oi[Gr]=_t[tr],oi),{}):_t),k.complete())}}))}})}let se=(()=>{class H{constructor(k,ue){this._renderer=k,this._elementRef=ue,this.onChange=_t=>{},this.onTouched=()=>{}}setProperty(k,ue){this._renderer.setProperty(this._elementRef.nativeElement,k,ue)}registerOnTouched(k){this.onTouched=k}registerOnChange(k){this.onChange=k}setDisabledState(k){this.setProperty("disabled",k)}}return H.\u0275fac=function(k){return new(k||H)(_.Y36(_.Qsj),_.Y36(_.SBq))},H.\u0275dir=_.lG2({type:H}),H})(),ge=(()=>{class H extends se{}return H.\u0275fac=function(){let B;return function(ue){return(B||(B=_.n5z(H)))(ue||H)}}(),H.\u0275dir=_.lG2({type:H,features:[_.qOj]}),H})();const Ee=new _.OlP("NgValueAccessor"),ut={provide:Ee,useExisting:(0,_.Gpc)(()=>$e),multi:!0},Ke=new _.OlP("CompositionEventMode");let $e=(()=>{class H extends se{constructor(k,ue,_t){super(k,ue),this._compositionMode=_t,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const H=(0,P.q)()?(0,P.q)().getUserAgent():"";return/android (\d+)/.test(H.toLowerCase())}())}writeValue(k){this.setProperty("value",null==k?"":k)}_handleInput(k){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(k)}_compositionStart(){this._composing=!0}_compositionEnd(k){this._composing=!1,this._compositionMode&&this.onChange(k)}}return H.\u0275fac=function(k){return new(k||H)(_.Y36(_.Qsj),_.Y36(_.SBq),_.Y36(Ke,8))},H.\u0275dir=_.lG2({type:H,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(k,ue){1&k&&_.NdJ("input",function(mn){return ue._handleInput(mn.target.value)})("blur",function(){return ue.onTouched()})("compositionstart",function(){return ue._compositionStart()})("compositionend",function(mn){return ue._compositionEnd(mn.target.value)})},features:[_._Bn([ut]),_.qOj]}),H})();function qe(H){return null==H||0===H.length}function Ie(H){return null!=H&&"number"==typeof H.length}const Me=new _.OlP("NgValidators"),ct=new _.OlP("NgAsyncValidators"),at=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Vt{static min(B){return H=B,B=>{if(qe(B.value)||qe(H))return null;const k=parseFloat(B.value);return!isNaN(k)&&k<H?{min:{min:H,actual:B.value}}:null};var H}static max(B){return H=B,B=>{if(qe(B.value)||qe(H))return null;const k=parseFloat(B.value);return!isNaN(k)&&k>H?{max:{max:H,actual:B.value}}:null};var H}static required(B){return qe(B.value)?{required:!0}:null}static requiredTrue(B){return!0===B.value?null:{required:!0}}static email(B){return qe((H=B).value)||at.test(H.value)?null:{email:!0};var H}static minLength(B){return H=B,B=>qe(B.value)||!Ie(B.value)?null:B.value.length<H?{minlength:{requiredLength:H,actualLength:B.value.length}}:null;var H}static maxLength(B){return H=B,B=>Ie(B.value)&&B.value.length>H?{maxlength:{requiredLength:H,actualLength:B.value.length}}:null;var H}static pattern(B){return function(H){if(!H)return Ht;let B,k;return"string"==typeof H?(k="","^"!==H.charAt(0)&&(k+="^"),k+=H,"$"!==H.charAt(H.length-1)&&(k+="$"),B=new RegExp(k)):(k=H.toString(),B=H),ue=>{if(qe(ue.value))return null;const _t=ue.value;return B.test(_t)?null:{pattern:{requiredPattern:k,actualValue:_t}}}}(B)}static nullValidator(B){return null}static compose(B){return Dt(B)}static composeAsync(B){return Mt(B)}}function Ht(H){return null}function Zt(H){return null!=H}function dt(H){const B=(0,_.QGY)(H)?(0,Z.D)(H):H;return(0,_.CqO)(B),B}function Ct(H){let B={};return H.forEach(k=>{B=null!=k?Object.assign(Object.assign({},B),k):B}),0===Object.keys(B).length?null:B}function st(H,B){return B.map(k=>k(H))}function lt(H){return H.map(B=>function(H){return!H.validate}(B)?B:k=>B.validate(k))}function Dt(H){if(!H)return null;const B=H.filter(Zt);return 0==B.length?null:function(k){return Ct(st(k,B))}}function Bt(H){return null!=H?Dt(lt(H)):null}function Mt(H){if(!H)return null;const B=H.filter(Zt);return 0==B.length?null:function(k){return function(...H){if(1===H.length){const B=H[0];if((0,ke.k)(B))return we(B,null);if((0,Q.K)(B)&&Object.getPrototypeOf(B)===Object.prototype){const k=Object.keys(B);return we(k.map(ue=>B[ue]),k)}}if("function"==typeof H[H.length-1]){const B=H.pop();return we(H=1===H.length&&(0,ke.k)(H[0])?H[0]:H,null).pipe((0,ae.U)(k=>B(...k)))}return we(H,null)}(st(k,B).map(dt)).pipe((0,ae.U)(Ct))}}function Pt(H){return null!=H?Mt(lt(H)):null}function gn(H,B){return null===H?[B]:Array.isArray(H)?[...H,B]:[H,B]}function kn(H){return H._rawValidators}function Tn(H){return H._rawAsyncValidators}function _n(H){return H?Array.isArray(H)?H:[H]:[]}function Mn(H,B){return Array.isArray(H)?H.includes(B):H===B}function vr(H,B){const k=_n(B);return _n(H).forEach(_t=>{Mn(k,_t)||k.push(_t)}),k}function ur(H,B){return _n(B).filter(k=>!Mn(H,k))}let Ot=(()=>{class H{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(k){this._rawValidators=k||[],this._composedValidatorFn=Bt(this._rawValidators)}_setAsyncValidators(k){this._rawAsyncValidators=k||[],this._composedAsyncValidatorFn=Pt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(k){this._onDestroyCallbacks.push(k)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(k=>k()),this._onDestroyCallbacks=[]}reset(k){this.control&&this.control.reset(k)}hasError(k,ue){return!!this.control&&this.control.hasError(k,ue)}getError(k,ue){return this.control?this.control.getError(k,ue):null}}return H.\u0275fac=function(k){return new(k||H)},H.\u0275dir=_.lG2({type:H}),H})(),En=(()=>{class H extends Ot{get formDirective(){return null}get path(){return null}}return H.\u0275fac=function(){let B;return function(ue){return(B||(B=_.n5z(H)))(ue||H)}}(),H.\u0275dir=_.lG2({type:H,features:[_.qOj]}),H})();class Wn extends Ot{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class tn{constructor(B){this._cd=B}is(B){var k,ue,_t;return"submitted"===B?!!(null===(k=this._cd)||void 0===k?void 0:k.submitted):!!(null===(_t=null===(ue=this._cd)||void 0===ue?void 0:ue.control)||void 0===_t?void 0:_t[B])}}let Qn=(()=>{class H extends tn{constructor(k){super(k)}}return H.\u0275fac=function(k){return new(k||H)(_.Y36(Wn,2))},H.\u0275dir=_.lG2({type:H,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(k,ue){2&k&&_.ekj("ng-untouched",ue.is("untouched"))("ng-touched",ue.is("touched"))("ng-pristine",ue.is("pristine"))("ng-dirty",ue.is("dirty"))("ng-valid",ue.is("valid"))("ng-invalid",ue.is("invalid"))("ng-pending",ue.is("pending"))},features:[_.qOj]}),H})(),lr=(()=>{class H extends tn{constructor(k){super(k)}}return H.\u0275fac=function(k){return new(k||H)(_.Y36(En,10))},H.\u0275dir=_.lG2({type:H,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(k,ue){2&k&&_.ekj("ng-untouched",ue.is("untouched"))("ng-touched",ue.is("touched"))("ng-pristine",ue.is("pristine"))("ng-dirty",ue.is("dirty"))("ng-valid",ue.is("valid"))("ng-invalid",ue.is("invalid"))("ng-pending",ue.is("pending"))("ng-submitted",ue.is("submitted"))},features:[_.qOj]}),H})();function Xn(H,B){dn(H,B),B.valueAccessor.writeValue(H.value),function(H,B){B.valueAccessor.registerOnChange(k=>{H._pendingValue=k,H._pendingChange=!0,H._pendingDirty=!0,"change"===H.updateOn&&nt(H,B)})}(H,B),function(H,B){const k=(ue,_t)=>{B.valueAccessor.writeValue(ue),_t&&B.viewToModelUpdate(ue)};H.registerOnChange(k),B._registerOnDestroy(()=>{H._unregisterOnChange(k)})}(H,B),function(H,B){B.valueAccessor.registerOnTouched(()=>{H._pendingTouched=!0,"blur"===H.updateOn&&H._pendingChange&&nt(H,B),"submit"!==H.updateOn&&H.markAsTouched()})}(H,B),function(H,B){if(B.valueAccessor.setDisabledState){const k=ue=>{B.valueAccessor.setDisabledState(ue)};H.registerOnDisabledChange(k),B._registerOnDestroy(()=>{H._unregisterOnDisabledChange(k)})}}(H,B)}function Yn(H,B,k=!0){const ue=()=>{};B.valueAccessor&&(B.valueAccessor.registerOnChange(ue),B.valueAccessor.registerOnTouched(ue)),Ze(H,B),H&&(B._invokeOnDestroyCallbacks(),H._registerOnCollectionChange(()=>{}))}function Kn(H,B){H.forEach(k=>{k.registerOnValidatorChange&&k.registerOnValidatorChange(B)})}function dn(H,B){const k=kn(H);null!==B.validator?H.setValidators(gn(k,B.validator)):"function"==typeof k&&H.setValidators([k]);const ue=Tn(H);null!==B.asyncValidator?H.setAsyncValidators(gn(ue,B.asyncValidator)):"function"==typeof ue&&H.setAsyncValidators([ue]);const _t=()=>H.updateValueAndValidity();Kn(B._rawValidators,_t),Kn(B._rawAsyncValidators,_t)}function Ze(H,B){let k=!1;if(null!==H){if(null!==B.validator){const _t=kn(H);if(Array.isArray(_t)&&_t.length>0){const mn=_t.filter(er=>er!==B.validator);mn.length!==_t.length&&(k=!0,H.setValidators(mn))}}if(null!==B.asyncValidator){const _t=Tn(H);if(Array.isArray(_t)&&_t.length>0){const mn=_t.filter(er=>er!==B.asyncValidator);mn.length!==_t.length&&(k=!0,H.setAsyncValidators(mn))}}}const ue=()=>{};return Kn(B._rawValidators,ue),Kn(B._rawAsyncValidators,ue),k}function nt(H,B){H._pendingDirty&&H.markAsDirty(),H.setValue(H._pendingValue,{emitModelToViewChange:!1}),B.viewToModelUpdate(H._pendingValue),H._pendingChange=!1}function Bn(H,B){const k=H.indexOf(B);k>-1&&H.splice(k,1)}const Fn="VALID",pn="INVALID",In="PENDING",mr="DISABLED";function Gt(H){return(cn(H)?H.validators:H)||null}function $t(H){return Array.isArray(H)?Bt(H):H||null}function bn(H,B){return(cn(B)?B.asyncValidators:H)||null}function Rn(H){return Array.isArray(H)?Pt(H):H||null}function cn(H){return null!=H&&!Array.isArray(H)&&"object"==typeof H}class Fr{constructor(B,k){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=B,this._rawAsyncValidators=k,this._composedValidatorFn=$t(this._rawValidators),this._composedAsyncValidatorFn=Rn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(B){this._rawValidators=this._composedValidatorFn=B}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(B){this._rawAsyncValidators=this._composedAsyncValidatorFn=B}get parent(){return this._parent}get valid(){return this.status===Fn}get invalid(){return this.status===pn}get pending(){return this.status==In}get disabled(){return this.status===mr}get enabled(){return this.status!==mr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(B){this._rawValidators=B,this._composedValidatorFn=$t(B)}setAsyncValidators(B){this._rawAsyncValidators=B,this._composedAsyncValidatorFn=Rn(B)}addValidators(B){this.setValidators(vr(B,this._rawValidators))}addAsyncValidators(B){this.setAsyncValidators(vr(B,this._rawAsyncValidators))}removeValidators(B){this.setValidators(ur(B,this._rawValidators))}removeAsyncValidators(B){this.setAsyncValidators(ur(B,this._rawAsyncValidators))}hasValidator(B){return Mn(this._rawValidators,B)}hasAsyncValidator(B){return Mn(this._rawAsyncValidators,B)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(B={}){this.touched=!0,this._parent&&!B.onlySelf&&this._parent.markAsTouched(B)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(B=>B.markAllAsTouched())}markAsUntouched(B={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(k=>{k.markAsUntouched({onlySelf:!0})}),this._parent&&!B.onlySelf&&this._parent._updateTouched(B)}markAsDirty(B={}){this.pristine=!1,this._parent&&!B.onlySelf&&this._parent.markAsDirty(B)}markAsPristine(B={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(k=>{k.markAsPristine({onlySelf:!0})}),this._parent&&!B.onlySelf&&this._parent._updatePristine(B)}markAsPending(B={}){this.status=In,!1!==B.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!B.onlySelf&&this._parent.markAsPending(B)}disable(B={}){const k=this._parentMarkedDirty(B.onlySelf);this.status=mr,this.errors=null,this._forEachChild(ue=>{ue.disable(Object.assign(Object.assign({},B),{onlySelf:!0}))}),this._updateValue(),!1!==B.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},B),{skipPristineCheck:k})),this._onDisabledChange.forEach(ue=>ue(!0))}enable(B={}){const k=this._parentMarkedDirty(B.onlySelf);this.status=Fn,this._forEachChild(ue=>{ue.enable(Object.assign(Object.assign({},B),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:B.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},B),{skipPristineCheck:k})),this._onDisabledChange.forEach(ue=>ue(!1))}_updateAncestors(B){this._parent&&!B.onlySelf&&(this._parent.updateValueAndValidity(B),B.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(B){this._parent=B}updateValueAndValidity(B={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fn||this.status===In)&&this._runAsyncValidator(B.emitEvent)),!1!==B.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!B.onlySelf&&this._parent.updateValueAndValidity(B)}_updateTreeValidity(B={emitEvent:!0}){this._forEachChild(k=>k._updateTreeValidity(B)),this.updateValueAndValidity({onlySelf:!0,emitEvent:B.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?mr:Fn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(B){if(this.asyncValidator){this.status=In,this._hasOwnPendingAsyncValidator=!0;const k=dt(this.asyncValidator(this));this._asyncValidationSubscription=k.subscribe(ue=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ue,{emitEvent:B})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(B,k={}){this.errors=B,this._updateControlsErrors(!1!==k.emitEvent)}get(B){return function(H,B,k){if(null==B||(Array.isArray(B)||(B=B.split(".")),Array.isArray(B)&&0===B.length))return null;let ue=H;return B.forEach(_t=>{ue=ue instanceof Lr?ue.controls.hasOwnProperty(_t)?ue.controls[_t]:null:ue instanceof Er&&ue.at(_t)||null}),ue}(this,B)}getError(B,k){const ue=k?this.get(k):this;return ue&&ue.errors?ue.errors[B]:null}hasError(B,k){return!!this.getError(B,k)}get root(){let B=this;for(;B._parent;)B=B._parent;return B}_updateControlsErrors(B){this.status=this._calculateStatus(),B&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(B)}_initObservables(){this.valueChanges=new _.vpe,this.statusChanges=new _.vpe}_calculateStatus(){return this._allControlsDisabled()?mr:this.errors?pn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(In)?In:this._anyControlsHaveStatus(pn)?pn:Fn}_anyControlsHaveStatus(B){return this._anyControls(k=>k.status===B)}_anyControlsDirty(){return this._anyControls(B=>B.dirty)}_anyControlsTouched(){return this._anyControls(B=>B.touched)}_updatePristine(B={}){this.pristine=!this._anyControlsDirty(),this._parent&&!B.onlySelf&&this._parent._updatePristine(B)}_updateTouched(B={}){this.touched=this._anyControlsTouched(),this._parent&&!B.onlySelf&&this._parent._updateTouched(B)}_isBoxedValue(B){return"object"==typeof B&&null!==B&&2===Object.keys(B).length&&"value"in B&&"disabled"in B}_registerOnCollectionChange(B){this._onCollectionChange=B}_setUpdateStrategy(B){cn(B)&&null!=B.updateOn&&(this._updateOn=B.updateOn)}_parentMarkedDirty(B){return!B&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class br extends Fr{constructor(B=null,k,ue){super(Gt(k),bn(ue,k)),this._onChange=[],this._applyFormState(B),this._setUpdateStrategy(k),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(B,k={}){this.value=this._pendingValue=B,this._onChange.length&&!1!==k.emitModelToViewChange&&this._onChange.forEach(ue=>ue(this.value,!1!==k.emitViewToModelChange)),this.updateValueAndValidity(k)}patchValue(B,k={}){this.setValue(B,k)}reset(B=null,k={}){this._applyFormState(B),this.markAsPristine(k),this.markAsUntouched(k),this.setValue(this.value,k),this._pendingChange=!1}_updateValue(){}_anyControls(B){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(B){this._onChange.push(B)}_unregisterOnChange(B){Bn(this._onChange,B)}registerOnDisabledChange(B){this._onDisabledChange.push(B)}_unregisterOnDisabledChange(B){Bn(this._onDisabledChange,B)}_forEachChild(B){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(B){this._isBoxedValue(B)?(this.value=this._pendingValue=B.value,B.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=B}}class Lr extends Fr{constructor(B,k,ue){super(Gt(k),bn(ue,k)),this.controls=B,this._initObservables(),this._setUpdateStrategy(k),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(B,k){return this.controls[B]?this.controls[B]:(this.controls[B]=k,k.setParent(this),k._registerOnCollectionChange(this._onCollectionChange),k)}addControl(B,k,ue={}){this.registerControl(B,k),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}removeControl(B,k={}){this.controls[B]&&this.controls[B]._registerOnCollectionChange(()=>{}),delete this.controls[B],this.updateValueAndValidity({emitEvent:k.emitEvent}),this._onCollectionChange()}setControl(B,k,ue={}){this.controls[B]&&this.controls[B]._registerOnCollectionChange(()=>{}),delete this.controls[B],k&&this.registerControl(B,k),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}contains(B){return this.controls.hasOwnProperty(B)&&this.controls[B].enabled}setValue(B,k={}){this._checkAllValuesPresent(B),Object.keys(B).forEach(ue=>{this._throwIfControlMissing(ue),this.controls[ue].setValue(B[ue],{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k)}patchValue(B,k={}){null!=B&&(Object.keys(B).forEach(ue=>{this.controls[ue]&&this.controls[ue].patchValue(B[ue],{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k))}reset(B={},k={}){this._forEachChild((ue,_t)=>{ue.reset(B[_t],{onlySelf:!0,emitEvent:k.emitEvent})}),this._updatePristine(k),this._updateTouched(k),this.updateValueAndValidity(k)}getRawValue(){return this._reduceChildren({},(B,k,ue)=>(B[ue]=k instanceof br?k.value:k.getRawValue(),B))}_syncPendingControls(){let B=this._reduceChildren(!1,(k,ue)=>!!ue._syncPendingControls()||k);return B&&this.updateValueAndValidity({onlySelf:!0}),B}_throwIfControlMissing(B){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[B])throw new Error(`Cannot find form control with name: ${B}.`)}_forEachChild(B){Object.keys(this.controls).forEach(k=>{const ue=this.controls[k];ue&&B(ue,k)})}_setUpControls(){this._forEachChild(B=>{B.setParent(this),B._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(B){for(const k of Object.keys(this.controls)){const ue=this.controls[k];if(this.contains(k)&&B(ue))return!0}return!1}_reduceValue(){return this._reduceChildren({},(B,k,ue)=>((k.enabled||this.disabled)&&(B[ue]=k.value),B))}_reduceChildren(B,k){let ue=B;return this._forEachChild((_t,mn)=>{ue=k(ue,_t,mn)}),ue}_allControlsDisabled(){for(const B of Object.keys(this.controls))if(this.controls[B].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(B){this._forEachChild((k,ue)=>{if(void 0===B[ue])throw new Error(`Must supply a value for form control with name: '${ue}'.`)})}}class Er extends Fr{constructor(B,k,ue){super(Gt(k),bn(ue,k)),this.controls=B,this._initObservables(),this._setUpdateStrategy(k),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(B){return this.controls[B]}push(B,k={}){this.controls.push(B),this._registerControl(B),this.updateValueAndValidity({emitEvent:k.emitEvent}),this._onCollectionChange()}insert(B,k,ue={}){this.controls.splice(B,0,k),this._registerControl(k),this.updateValueAndValidity({emitEvent:ue.emitEvent})}removeAt(B,k={}){this.controls[B]&&this.controls[B]._registerOnCollectionChange(()=>{}),this.controls.splice(B,1),this.updateValueAndValidity({emitEvent:k.emitEvent})}setControl(B,k,ue={}){this.controls[B]&&this.controls[B]._registerOnCollectionChange(()=>{}),this.controls.splice(B,1),k&&(this.controls.splice(B,0,k),this._registerControl(k)),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(B,k={}){this._checkAllValuesPresent(B),B.forEach((ue,_t)=>{this._throwIfControlMissing(_t),this.at(_t).setValue(ue,{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k)}patchValue(B,k={}){null!=B&&(B.forEach((ue,_t)=>{this.at(_t)&&this.at(_t).patchValue(ue,{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k))}reset(B=[],k={}){this._forEachChild((ue,_t)=>{ue.reset(B[_t],{onlySelf:!0,emitEvent:k.emitEvent})}),this._updatePristine(k),this._updateTouched(k),this.updateValueAndValidity(k)}getRawValue(){return this.controls.map(B=>B instanceof br?B.value:B.getRawValue())}clear(B={}){this.controls.length<1||(this._forEachChild(k=>k._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:B.emitEvent}))}_syncPendingControls(){let B=this.controls.reduce((k,ue)=>!!ue._syncPendingControls()||k,!1);return B&&this.updateValueAndValidity({onlySelf:!0}),B}_throwIfControlMissing(B){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(B))throw new Error(`Cannot find form control at index ${B}`)}_forEachChild(B){this.controls.forEach((k,ue)=>{B(k,ue)})}_updateValue(){this.value=this.controls.filter(B=>B.enabled||this.disabled).map(B=>B.value)}_anyControls(B){return this.controls.some(k=>k.enabled&&B(k))}_setUpControls(){this._forEachChild(B=>this._registerControl(B))}_checkAllValuesPresent(B){this._forEachChild((k,ue)=>{if(void 0===B[ue])throw new Error(`Must supply a value for form control at index: ${ue}.`)})}_allControlsDisabled(){for(const B of this.controls)if(B.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(B){B.setParent(this),B._registerOnCollectionChange(this._onCollectionChange)}}let j=(()=>{class H{}return H.\u0275fac=function(k){return new(k||H)},H.\u0275dir=_.lG2({type:H,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),H})(),Rt=(()=>{class H{}return H.\u0275fac=function(k){return new(k||H)},H.\u0275mod=_.oAB({type:H}),H.\u0275inj=_.cJS({}),H})();const Vn=new _.OlP("NgModelWithFormControlWarning"),Gi={provide:En,useExisting:(0,_.Gpc)(()=>ci)};let ci=(()=>{class H extends En{constructor(k,ue){super(),this.validators=k,this.asyncValidators=ue,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _.vpe,this._setValidators(k),this._setAsyncValidators(ue)}ngOnChanges(k){this._checkFormPresent(),k.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ze(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(k){const ue=this.form.get(k.path);return Xn(ue,k),ue.updateValueAndValidity({emitEvent:!1}),this.directives.push(k),ue}getControl(k){return this.form.get(k.path)}removeControl(k){Yn(k.control||null,k,!1),Bn(this.directives,k)}addFormGroup(k){this._setUpFormContainer(k)}removeFormGroup(k){this._cleanUpFormContainer(k)}getFormGroup(k){return this.form.get(k.path)}addFormArray(k){this._setUpFormContainer(k)}removeFormArray(k){this._cleanUpFormContainer(k)}getFormArray(k){return this.form.get(k.path)}updateModel(k,ue){this.form.get(k.path).setValue(ue)}onSubmit(k){return this.submitted=!0,function(H,B){H._syncPendingControls(),B.forEach(k=>{const ue=k.control;"submit"===ue.updateOn&&ue._pendingChange&&(k.viewToModelUpdate(ue._pendingValue),ue._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(k),!1}onReset(){this.resetForm()}resetForm(k){this.form.reset(k),this.submitted=!1}_updateDomValue(){this.directives.forEach(k=>{const ue=k.control,_t=this.form.get(k.path);ue!==_t&&(Yn(ue||null,k),_t instanceof br&&(Xn(_t,k),k.control=_t))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(k){const ue=this.form.get(k.path);(function(H,B){dn(H,B)})(ue,k),ue.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(k){if(this.form){const ue=this.form.get(k.path);ue&&function(H,B){return Ze(H,B)}(ue,k)&&ue.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){dn(this.form,this),this._oldForm&&Ze(this._oldForm,this)}_checkFormPresent(){}}return H.\u0275fac=function(k){return new(k||H)(_.Y36(Me,10),_.Y36(ct,10))},H.\u0275dir=_.lG2({type:H,selectors:[["","formGroup",""]],hostBindings:function(k,ue){1&k&&_.NdJ("submit",function(mn){return ue.onSubmit(mn)})("reset",function(){return ue.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_._Bn([Gi]),_.qOj,_.TTD]}),H})();const Ki={provide:Wn,useExisting:(0,_.Gpc)(()=>Fe)};let Fe=(()=>{class H extends Wn{constructor(k,ue,_t,mn,er){super(),this._ngModelWarningConfig=er,this._added=!1,this.update=new _.vpe,this._ngModelWarningSent=!1,this._parent=k,this._setValidators(ue),this._setAsyncValidators(_t),this.valueAccessor=function(H,B){if(!B)return null;let k,ue,_t;return Array.isArray(B),B.forEach(mn=>{mn.constructor===$e?k=mn:function(H){return Object.getPrototypeOf(H.constructor)===ge}(mn)?ue=mn:_t=mn}),_t||ue||k||null}(0,mn)}set isDisabled(k){}ngOnChanges(k){this._added||this._setUpControl(),function(H,B){if(!H.hasOwnProperty("model"))return!1;const k=H.model;return!!k.isFirstChange()||!Object.is(B,k.currentValue)}(k,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(k){this.viewModel=k,this.update.emit(k)}get path(){return function(H,B){return[...B.path,H]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return H.\u0275fac=function(k){return new(k||H)(_.Y36(En,13),_.Y36(Me,10),_.Y36(ct,10),_.Y36(Ee,10),_.Y36(Vn,8))},H.\u0275dir=_.lG2({type:H,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[_._Bn([Ki]),_.qOj,_.TTD]}),H._ngModelWarningSentOnce=!1,H})(),le=(()=>{class H{}return H.\u0275fac=function(k){return new(k||H)},H.\u0275mod=_.oAB({type:H}),H.\u0275inj=_.cJS({imports:[[Rt]]}),H})(),K=(()=>{class H{}return H.\u0275fac=function(k){return new(k||H)},H.\u0275mod=_.oAB({type:H}),H.\u0275inj=_.cJS({imports:[le]}),H})(),Ce=(()=>{class H{static withConfig(k){return{ngModule:H,providers:[{provide:Vn,useValue:k.warnOnNgModelWithFormControl}]}}}return H.\u0275fac=function(k){return new(k||H)},H.\u0275mod=_.oAB({type:H}),H.\u0275inj=_.cJS({imports:[le]}),H})(),kt=(()=>{class H{group(k,ue=null){const _t=this._reduceControls(k);let Wr,mn=null,er=null;return null!=ue&&(function(H){return void 0!==H.asyncValidators||void 0!==H.validators||void 0!==H.updateOn}(ue)?(mn=null!=ue.validators?ue.validators:null,er=null!=ue.asyncValidators?ue.asyncValidators:null,Wr=null!=ue.updateOn?ue.updateOn:void 0):(mn=null!=ue.validator?ue.validator:null,er=null!=ue.asyncValidator?ue.asyncValidator:null)),new Lr(_t,{asyncValidators:er,updateOn:Wr,validators:mn})}control(k,ue,_t){return new br(k,ue,_t)}array(k,ue,_t){const mn=k.map(er=>this._createControl(er));return new Er(mn,ue,_t)}_reduceControls(k){const ue={};return Object.keys(k).forEach(_t=>{ue[_t]=this._createControl(k[_t])}),ue}_createControl(k){return k instanceof br||k instanceof Lr||k instanceof Er?k:Array.isArray(k)?this.control(k[0],k.length>1?k[1]:null,k.length>2?k[2]:null):this.control(k)}}return H.\u0275fac=function(k){return new(k||H)},H.\u0275prov=(0,_.Yz7)({factory:function(){return new H},token:H,providedIn:Ce}),H})()},174:(nn,ot,L)=>{"use strict";L.d(ot,{gz:()=>Tt,y6:()=>Pn,OD:()=>En,eC:()=>fn,wm:()=>kr,wN:()=>q,F0:()=>$n,rH:()=>ft,Bz:()=>fr,Hx:()=>bn});var _=L(8583),P=L(7716),re=L(4869),ke=L(9796),ae=L(5197),Q=L(509),Z=L(6693);const ne={};class se{constructor(A){this.resultSelector=A}call(A,S){return S.subscribe(new ge(A,this.resultSelector))}}class ge extends ae.L{constructor(A,S){super(A),this.resultSelector=S,this.active=0,this.values=[],this.observables=[]}_next(A){this.values.push(ne),this.observables.push(A)}_complete(){const A=this.observables,S=A.length;if(0===S)this.destination.complete();else{this.active=S,this.toRespond=S;for(let $=0;$<S;$++)this.add((0,Q.D)(this,A[$],void 0,$))}}notifyComplete(A){0==(this.active-=1)&&this.destination.complete()}notifyNext(A,S,$){const J=this.values,je=this.toRespond?J[$]===ne?--this.toRespond:this.toRespond:0;J[$]=S,0===je&&(this.resultSelector?this._tryResultSelector(J):this.destination.next(J.slice()))}_tryResultSelector(A){let S;try{S=this.resultSelector.apply(this,A)}catch($){return void this.destination.error($)}this.destination.next(S)}}var Ee=L(8891),_e=L(4402),De=L(9193);function ut(F){return new Ee.y(A=>{let S;try{S=F()}catch(J){return void A.error(J)}return(S?(0,_e.D)(S):(0,De.c)()).subscribe(A)})}var Te=L(5917),Ke=L(6215),$e=L(3410),qe=L(8071),Ie=L(2441),Me=L(9765),ct=L(5345);function at(F){return function(S){const $=new Vt(F),J=S.lift($);return $.caught=J}}class Vt{constructor(A){this.selector=A}call(A,S){return S.subscribe(new E(A,this.selector,this.caught))}}class E extends ct.Ds{constructor(A,S,$){super(A),this.selector=S,this.caught=$}error(A){if(!this.isStopped){let S;try{S=this.selector(A,this.caught)}catch(ye){return void super.error(ye)}this._unsubscribeAndRecycle();const $=new ct.IY(this);this.add($);const J=(0,ct.ft)(S,$);J!==$&&this.add(J)}}}var Ye=L(9773);function gt(F,A){return(0,Ye.zg)(F,A,1)}var We=L(5435),He=L(7393),Ge=L(7108);function ht(F){return function(S){return 0===F?(0,De.c)():S.lift(new vt(F))}}class vt{constructor(A){if(this.total=A,this.total<0)throw new Ge.W}call(A,S){return S.subscribe(new Ht(A,this.total))}}class Ht extends He.L{constructor(A,S){super(A),this.total=S,this.ring=new Array,this.count=0}_next(A){const S=this.ring,$=this.total,J=this.count++;S.length<$?S.push(A):S[J%$]=A}_complete(){const A=this.destination;let S=this.count;if(S>0){const $=this.count>=this.total?this.total:this.count,J=this.ring;for(let ye=0;ye<$;ye++){const je=S++%$;A.next(J[je])}}A.complete()}}var Zt=L(4635),dt=L(5242),Ct=L(4487),Ue=L(5319);class Dt{constructor(A){this.callback=A}call(A,S){return S.subscribe(new Bt(A,this.callback))}}class Bt extends He.L{constructor(A,S){super(A),this.add(new Ue.w(S))}}var Mt=L(8002),Pt=L(3190),gn=L(5257),kn=L(9761),Tn=L(2145),_n=L(8049),Mn=L(3342),vr=L(1307),ur=L(3282);class Ot{constructor(A,S){this.id=A,this.url=S}}class En extends Ot{constructor(A,S,$="imperative",J=null){super(A,S),this.navigationTrigger=$,this.restoredState=J}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Wn extends Ot{constructor(A,S,$){super(A,S),this.urlAfterRedirects=$}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class tn extends Ot{constructor(A,S,$){super(A,S),this.reason=$}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Un extends Ot{constructor(A,S,$){super(A,S),this.error=$}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class jn extends Ot{constructor(A,S,$,J){super(A,S),this.urlAfterRedirects=$,this.state=J}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qn extends Ot{constructor(A,S,$,J){super(A,S),this.urlAfterRedirects=$,this.state=J}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lr extends Ot{constructor(A,S,$,J,ye){super(A,S),this.urlAfterRedirects=$,this.state=J,this.shouldActivate=ye}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ar extends Ot{constructor(A,S,$,J){super(A,S),this.urlAfterRedirects=$,this.state=J}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dr extends Ot{constructor(A,S,$,J){super(A,S),this.urlAfterRedirects=$,this.state=J}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hr{constructor(A){this.route=A}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ri{constructor(A){this.route=A}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class sr{constructor(A){this.snapshot=A}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qt{constructor(A){this.snapshot=A}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wt{constructor(A){this.snapshot=A}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xr{constructor(A){this.snapshot=A}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Or{constructor(A,S,$){this.routerEvent=A,this.position=S,this.anchor=$}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const fn="primary";class Sn{constructor(A){this.params=A||{}}has(A){return Object.prototype.hasOwnProperty.call(this.params,A)}get(A){if(this.has(A)){const S=this.params[A];return Array.isArray(S)?S[0]:S}return null}getAll(A){if(this.has(A)){const S=this.params[A];return Array.isArray(S)?S:[S]}return[]}get keys(){return Object.keys(this.params)}}function cr(F){return new Sn(F)}const dr="ngNavigationCancelingError";function Xn(F){const A=Error("NavigationCancelingError: "+F);return A[dr]=!0,A}function Kn(F,A,S){const $=S.path.split("/");if($.length>F.length||"full"===S.pathMatch&&(A.hasChildren()||$.length<F.length))return null;const J={};for(let ye=0;ye<$.length;ye++){const je=$[ye],me=F[ye];if(je.startsWith(":"))J[je.substring(1)]=me;else if(je!==me.path)return null}return{consumed:F.slice(0,$.length),posParams:J}}function dn(F,A){const S=F?Object.keys(F):void 0,$=A?Object.keys(A):void 0;if(!S||!$||S.length!=$.length)return!1;let J;for(let ye=0;ye<S.length;ye++)if(J=S[ye],!Ze(F[J],A[J]))return!1;return!0}function Ze(F,A){if(Array.isArray(F)&&Array.isArray(A)){if(F.length!==A.length)return!1;const S=[...F].sort(),$=[...A].sort();return S.every((J,ye)=>$[ye]===J)}return F===A}function oe(F){return Array.prototype.concat.apply([],F)}function Ae(F){return F.length>0?F[F.length-1]:null}function It(F,A){for(const S in F)F.hasOwnProperty(S)&&A(F[S],S)}function Oe(F){return(0,P.CqO)(F)?F:(0,P.QGY)(F)?(0,_e.D)(Promise.resolve(F)):(0,Te.of)(F)}const it={exact:function bt(F,A,S){if(!Gt(F.segments,A.segments)||!Fn(F.segments,A.segments,S)||F.numberOfChildren!==A.numberOfChildren)return!1;for(const $ in A.children)if(!F.children[$]||!bt(F.children[$],A.children[$],S))return!1;return!0},subset:Bn},Ve={exact:function(F,A){return dn(F,A)},subset:function(F,A){return Object.keys(A).length<=Object.keys(F).length&&Object.keys(A).every(S=>Ze(F[S],A[S]))},ignored:()=>!0};function ve(F,A,S){return it[S.paths](F.root,A.root,S.matrixParams)&&Ve[S.queryParams](F.queryParams,A.queryParams)&&!("exact"===S.fragment&&F.fragment!==A.fragment)}function Bn(F,A,S){return Dn(F,A,A.segments,S)}function Dn(F,A,S,$){if(F.segments.length>S.length){const J=F.segments.slice(0,S.length);return!(!Gt(J,S)||A.hasChildren()||!Fn(J,S,$))}if(F.segments.length===S.length){if(!Gt(F.segments,S)||!Fn(F.segments,S,$))return!1;for(const J in A.children)if(!F.children[J]||!Bn(F.children[J],A.children[J],$))return!1;return!0}{const J=S.slice(0,F.segments.length),ye=S.slice(F.segments.length);return!!(Gt(F.segments,J)&&Fn(F.segments,J,$)&&F.children[fn])&&Dn(F.children[fn],A,ye,$)}}function Fn(F,A,S){return A.every(($,J)=>Ve[S](F[J].parameters,$.parameters))}class pn{constructor(A,S,$){this.root=A,this.queryParams=S,this.fragment=$}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cr(this.queryParams)),this._queryParamMap}toString(){return cn.serialize(this)}}class In{constructor(A,S){this.segments=A,this.children=S,this.parent=null,It(S,($,J)=>$.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Fr(this)}}class mr{constructor(A,S){this.path=A,this.parameters=S}get parameterMap(){return this._parameterMap||(this._parameterMap=cr(this.parameters)),this._parameterMap}toString(){return yi(this)}}function Gt(F,A){return F.length===A.length&&F.every((S,$)=>S.path===A[$].path)}class bn{}class Rn{parse(A){const S=new mt(A);return new pn(S.parseRootSegment(),S.parseQueryParams(),S.parseFragment())}serialize(A){const S=`/${br(A.root,!0)}`,$=function(F){const A=Object.keys(F).map(S=>{const $=F[S];return Array.isArray($)?$.map(J=>`${Er(S)}=${Er(J)}`).join("&"):`${Er(S)}=${Er($)}`}).filter(S=>!!S);return A.length?`?${A.join("&")}`:""}(A.queryParams);var F;return`${S}${$}${"string"==typeof A.fragment?`#${F=A.fragment,encodeURI(F)}`:""}`}}const cn=new Rn;function Fr(F){return F.segments.map(A=>yi(A)).join("/")}function br(F,A){if(!F.hasChildren())return Fr(F);if(A){const S=F.children[fn]?br(F.children[fn],!1):"",$=[];return It(F.children,(J,ye)=>{ye!==fn&&$.push(`${ye}:${br(J,!1)}`)}),$.length>0?`${S}(${$.join("//")})`:S}{const S=function(F,A){let S=[];return It(F.children,($,J)=>{J===fn&&(S=S.concat(A($,J)))}),It(F.children,($,J)=>{J!==fn&&(S=S.concat(A($,J)))}),S}(F,($,J)=>J===fn?[br(F.children[fn],!1)]:[`${J}:${br($,!1)}`]);return 1===Object.keys(F.children).length&&null!=F.children[fn]?`${Fr(F)}/${S[0]}`:`${Fr(F)}/(${S.join("//")})`}}function Lr(F){return encodeURIComponent(F).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Er(F){return Lr(F).replace(/%3B/gi,";")}function ns(F){return Lr(F).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zn(F){return decodeURIComponent(F)}function Ur(F){return Zn(F.replace(/\+/g,"%20"))}function yi(F){return`${ns(F.path)}${function(F){return Object.keys(F).map(A=>`;${ns(A)}=${ns(F[A])}`).join("")}(F.parameters)}`}const Br=/^[^\/()?;=#]+/;function Yi(F){const A=F.match(Br);return A?A[0]:""}const Hr=/^[^=?&#]+/,Sr=/^[^?&#]+/;class mt{constructor(A){this.url=A,this.remaining=A}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new In([],{}):new In([],this.parseChildren())}parseQueryParams(){const A={};if(this.consumeOptional("?"))do{this.parseQueryParam(A)}while(this.consumeOptional("&"));return A}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const A=[];for(this.peekStartsWith("(")||A.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),A.push(this.parseSegment());let S={};this.peekStartsWith("/(")&&(this.capture("/"),S=this.parseParens(!0));let $={};return this.peekStartsWith("(")&&($=this.parseParens(!1)),(A.length>0||Object.keys(S).length>0)&&($[fn]=new In(A,S)),$}parseSegment(){const A=Yi(this.remaining);if(""===A&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(A),new mr(Zn(A),this.parseMatrixParams())}parseMatrixParams(){const A={};for(;this.consumeOptional(";");)this.parseParam(A);return A}parseParam(A){const S=Yi(this.remaining);if(!S)return;this.capture(S);let $="";if(this.consumeOptional("=")){const J=Yi(this.remaining);J&&($=J,this.capture($))}A[Zn(S)]=Zn($)}parseQueryParam(A){const S=function(F){const A=F.match(Hr);return A?A[0]:""}(this.remaining);if(!S)return;this.capture(S);let $="";if(this.consumeOptional("=")){const je=function(F){const A=F.match(Sr);return A?A[0]:""}(this.remaining);je&&($=je,this.capture($))}const J=Ur(S),ye=Ur($);if(A.hasOwnProperty(J)){let je=A[J];Array.isArray(je)||(je=[je],A[J]=je),je.push(ye)}else A[J]=ye}parseParens(A){const S={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const $=Yi(this.remaining),J=this.remaining[$.length];if("/"!==J&&")"!==J&&";"!==J)throw new Error(`Cannot parse url '${this.url}'`);let ye;$.indexOf(":")>-1?(ye=$.substr(0,$.indexOf(":")),this.capture(ye),this.capture(":")):A&&(ye=fn);const je=this.parseChildren();S[ye]=1===Object.keys(je).length?je[fn]:new In([],je),this.consumeOptional("//")}return S}peekStartsWith(A){return this.remaining.startsWith(A)}consumeOptional(A){return!!this.peekStartsWith(A)&&(this.remaining=this.remaining.substring(A.length),!0)}capture(A){if(!this.consumeOptional(A))throw new Error(`Expected "${A}".`)}}class z{constructor(A){this._root=A}get root(){return this._root.value}parent(A){const S=this.pathFromRoot(A);return S.length>1?S[S.length-2]:null}children(A){const S=j(A,this._root);return S?S.children.map($=>$.value):[]}firstChild(A){const S=j(A,this._root);return S&&S.children.length>0?S.children[0].value:null}siblings(A){const S=ce(A,this._root);return S.length<2?[]:S[S.length-2].children.map(J=>J.value).filter(J=>J!==A)}pathFromRoot(A){return ce(A,this._root).map(S=>S.value)}}function j(F,A){if(F===A.value)return A;for(const S of A.children){const $=j(F,S);if($)return $}return null}function ce(F,A){if(F===A.value)return[A];for(const S of A.children){const $=ce(F,S);if($.length)return $.unshift(A),$}return[]}class be{constructor(A,S){this.value=A,this.children=S}toString(){return`TreeNode(${this.value})`}}function Qe(F){const A={};return F&&F.children.forEach(S=>A[S.value.outlet]=S),A}class Xe extends z{constructor(A,S){super(A),this.snapshot=S,Rr(this,A)}toString(){return this.snapshot.toString()}}function Rt(F,A){const S=function(F,A){const je=new Vn([],{},{},"",{},fn,A,null,F.root,-1,{});return new qn("",new be(je,[]))}(F,A),$=new Ke.X([new mr("",{})]),J=new Ke.X({}),ye=new Ke.X({}),je=new Ke.X({}),me=new Ke.X(""),Wt=new Tt($,J,je,me,ye,fn,A,S.root);return Wt.snapshot=S.root,new Xe(new be(Wt,[]),S)}class Tt{constructor(A,S,$,J,ye,je,me,Wt){this.url=A,this.params=S,this.queryParams=$,this.fragment=J,this.data=ye,this.outlet=je,this.component=me,this._futureSnapshot=Wt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Mt.U)(A=>cr(A)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Mt.U)(A=>cr(A)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function on(F,A="emptyOnly"){const S=F.pathFromRoot;let $=0;if("always"!==A)for($=S.length-1;$>=1;){const J=S[$],ye=S[$-1];if(J.routeConfig&&""===J.routeConfig.path)$--;else{if(ye.component)break;$--}}return function(F){return F.reduce((A,S)=>({params:Object.assign(Object.assign({},A.params),S.params),data:Object.assign(Object.assign({},A.data),S.data),resolve:Object.assign(Object.assign({},A.resolve),S._resolvedData)}),{params:{},data:{},resolve:{}})}(S.slice($))}class Vn{constructor(A,S,$,J,ye,je,me,Wt,xn,$r,Gn){this.url=A,this.params=S,this.queryParams=$,this.fragment=J,this.data=ye,this.outlet=je,this.component=me,this.routeConfig=Wt,this._urlSegment=xn,this._lastPathIndex=$r,this._resolve=Gn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=cr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map($=>$.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class qn extends z{constructor(A,S){super(S),this.url=A,Rr(this,S)}toString(){return Gi(this._root)}}function Rr(F,A){A.value._routerState=F,A.children.forEach(S=>Rr(F,S))}function Gi(F){const A=F.children.length>0?` { ${F.children.map(Gi).join(", ")} } `:"";return`${F.value}${A}`}function ci(F){if(F.snapshot){const A=F.snapshot,S=F._futureSnapshot;F.snapshot=S,dn(A.queryParams,S.queryParams)||F.queryParams.next(S.queryParams),A.fragment!==S.fragment&&F.fragment.next(S.fragment),dn(A.params,S.params)||F.params.next(S.params),function(F,A){if(F.length!==A.length)return!1;for(let S=0;S<F.length;++S)if(!dn(F[S],A[S]))return!1;return!0}(A.url,S.url)||F.url.next(S.url),dn(A.data,S.data)||F.data.next(S.data)}else F.snapshot=F._futureSnapshot,F.data.next(F._futureSnapshot.data)}function Mi(F,A){const S=dn(F.params,A.params)&&function(F,A){return Gt(F,A)&&F.every((S,$)=>dn(S.parameters,A[$].parameters))}(F.url,A.url);return S&&!(!F.parent!=!A.parent)&&(!F.parent||Mi(F.parent,A.parent))}function Rs(F,A,S){if(S&&F.shouldReuseRoute(A.value,S.value.snapshot)){const $=S.value;$._futureSnapshot=A.value;const J=function(F,A,S){return A.children.map($=>{for(const J of S.children)if(F.shouldReuseRoute($.value,J.value.snapshot))return Rs(F,$,J);return Rs(F,$)})}(F,A,S);return new be($,J)}{if(F.shouldAttach(A.value)){const ye=F.retrieve(A.value);if(null!==ye){const je=ye.route;return rs(A,je),je}}const $=function(F){return new Tt(new Ke.X(F.url),new Ke.X(F.params),new Ke.X(F.queryParams),new Ke.X(F.fragment),new Ke.X(F.data),F.outlet,F.component,F)}(A.value),J=A.children.map(ye=>Rs(F,ye));return new be($,J)}}function rs(F,A){if(F.value.routeConfig!==A.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(F.children.length!==A.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");A.value._futureSnapshot=F.value;for(let S=0;S<F.children.length;++S)rs(F.children[S],A.children[S])}function Ks(F){return"object"==typeof F&&null!=F&&!F.outlets&&!F.segmentPath}function Vs(F){return"object"==typeof F&&null!=F&&F.outlets}function Lo(F,A,S,$,J){let ye={};return $&&It($,(je,me)=>{ye[me]=Array.isArray(je)?je.map(Wt=>`${Wt}`):`${je}`}),new pn(S.root===F?A:To(S.root,F,A),ye,J)}function To(F,A,S){const $={};return It(F.children,(J,ye)=>{$[ye]=J===A?S:To(J,A,S)}),new In(F.segments,$)}class Vo{constructor(A,S,$){if(this.isAbsolute=A,this.numberOfDoubleDots=S,this.commands=$,A&&$.length>0&&Ks($[0]))throw new Error("Root segment cannot have matrix parameters");const J=$.find(Vs);if(J&&J!==Ae($))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class vs{constructor(A,S,$){this.segmentGroup=A,this.processChildren=S,this.index=$}}function Zs(F,A,S){if(F||(F=new In([],{})),0===F.segments.length&&F.hasChildren())return Xr(F,A,S);const $=function(F,A,S){let $=0,J=A;const ye={match:!1,pathIndex:0,commandIndex:0};for(;J<F.segments.length;){if($>=S.length)return ye;const je=F.segments[J],me=S[$];if(Vs(me))break;const Wt=`${me}`,xn=$<S.length-1?S[$+1]:null;if(J>0&&void 0===Wt)break;if(Wt&&xn&&"object"==typeof xn&&void 0===xn.outlets){if(!is(Wt,xn,je))return ye;$+=2}else{if(!is(Wt,{},je))return ye;$++}J++}return{match:!0,pathIndex:J,commandIndex:$}}(F,A,S),J=S.slice($.commandIndex);if($.match&&$.pathIndex<F.segments.length){const ye=new In(F.segments.slice(0,$.pathIndex),{});return ye.children[fn]=new In(F.segments.slice($.pathIndex),F.children),Xr(ye,0,J)}return $.match&&0===J.length?new In(F.segments,{}):$.match&&!F.hasChildren()?$i(F,A,S):$.match?Xr(F,0,J):$i(F,A,S)}function Xr(F,A,S){if(0===S.length)return new In(F.segments,{});{const $=function(F){return Vs(F[0])?F[0].outlets:{[fn]:F}}(S),J={};return It($,(ye,je)=>{"string"==typeof ye&&(ye=[ye]),null!==ye&&(J[je]=Zs(F.children[je],A,ye))}),It(F.children,(ye,je)=>{void 0===$[je]&&(J[je]=ye)}),new In(F.segments,J)}}function $i(F,A,S){const $=F.segments.slice(0,A);let J=0;for(;J<S.length;){const ye=S[J];if(Vs(ye)){const Wt=cs(ye.outlets);return new In($,Wt)}if(0===J&&Ks(S[0])){$.push(new mr(F.segments[A].path,Xs(S[0]))),J++;continue}const je=Vs(ye)?ye.outlets[fn]:`${ye}`,me=J<S.length-1?S[J+1]:null;je&&me&&Ks(me)?($.push(new mr(je,Xs(me))),J+=2):($.push(new mr(je,{})),J++)}return new In($,{})}function cs(F){const A={};return It(F,(S,$)=>{"string"==typeof S&&(S=[S]),null!==S&&(A[$]=$i(new In([],{}),0,S))}),A}function Xs(F){const A={};return It(F,(S,$)=>A[$]=`${S}`),A}function is(F,A,S){return F==S.path&&dn(A,S.parameters)}class Us{constructor(A,S,$,J){this.routeReuseStrategy=A,this.futureState=S,this.currState=$,this.forwardEvent=J}activate(A){const S=this.futureState._root,$=this.currState?this.currState._root:null;this.deactivateChildRoutes(S,$,A),ci(this.futureState.root),this.activateChildRoutes(S,$,A)}deactivateChildRoutes(A,S,$){const J=Qe(S);A.children.forEach(ye=>{const je=ye.value.outlet;this.deactivateRoutes(ye,J[je],$),delete J[je]}),It(J,(ye,je)=>{this.deactivateRouteAndItsChildren(ye,$)})}deactivateRoutes(A,S,$){const J=A.value,ye=S?S.value:null;if(J===ye)if(J.component){const je=$.getContext(J.outlet);je&&this.deactivateChildRoutes(A,S,je.children)}else this.deactivateChildRoutes(A,S,$);else ye&&this.deactivateRouteAndItsChildren(S,$)}deactivateRouteAndItsChildren(A,S){this.routeReuseStrategy.shouldDetach(A.value.snapshot)?this.detachAndStoreRouteSubtree(A,S):this.deactivateRouteAndOutlet(A,S)}detachAndStoreRouteSubtree(A,S){const $=S.getContext(A.value.outlet);if($&&$.outlet){const J=$.outlet.detach(),ye=$.children.onOutletDeactivated();this.routeReuseStrategy.store(A.value.snapshot,{componentRef:J,route:A,contexts:ye})}}deactivateRouteAndOutlet(A,S){const $=S.getContext(A.value.outlet),J=$&&A.value.component?$.children:S,ye=Qe(A);for(const je of Object.keys(ye))this.deactivateRouteAndItsChildren(ye[je],J);$&&$.outlet&&($.outlet.deactivate(),$.children.onOutletDeactivated(),$.attachRef=null,$.resolver=null,$.route=null)}activateChildRoutes(A,S,$){const J=Qe(S);A.children.forEach(ye=>{this.activateRoutes(ye,J[ye.value.outlet],$),this.forwardEvent(new xr(ye.value.snapshot))}),A.children.length&&this.forwardEvent(new Qt(A.value.snapshot))}activateRoutes(A,S,$){const J=A.value,ye=S?S.value:null;if(ci(J),J===ye)if(J.component){const je=$.getOrCreateContext(J.outlet);this.activateChildRoutes(A,S,je.children)}else this.activateChildRoutes(A,S,$);else if(J.component){const je=$.getOrCreateContext(J.outlet);if(this.routeReuseStrategy.shouldAttach(J.snapshot)){const me=this.routeReuseStrategy.retrieve(J.snapshot);this.routeReuseStrategy.store(J.snapshot,null),je.children.onOutletReAttached(me.contexts),je.attachRef=me.componentRef,je.route=me.route.value,je.outlet&&je.outlet.attach(me.componentRef,me.route.value),gi(me.route)}else{const me=function(F){for(let A=F.parent;A;A=A.parent){const S=A.routeConfig;if(S&&S._loadedConfig)return S._loadedConfig;if(S&&S.component)return null}return null}(J.snapshot),Wt=me?me.module.componentFactoryResolver:null;je.attachRef=null,je.route=J,je.resolver=Wt,je.outlet&&je.outlet.activateWith(J,Wt),this.activateChildRoutes(A,null,je.children)}}else this.activateChildRoutes(A,null,$)}}function gi(F){ci(F.value),F.children.forEach(gi)}class di{constructor(A,S){this.routes=A,this.module=S}}function Fi(F){return"function"==typeof F}function Li(F){return F instanceof pn}const _i=Symbol("INITIAL_VALUE");function Qi(){return(0,Pt.w)(F=>function(...F){let A,S;return(0,re.K)(F[F.length-1])&&(S=F.pop()),"function"==typeof F[F.length-1]&&(A=F.pop()),1===F.length&&(0,ke.k)(F[0])&&(F=F[0]),(0,Z.n)(F,S).lift(new se(A))}(F.map(A=>A.pipe((0,gn.q)(1),(0,kn.O)(_i)))).pipe((0,Tn.R)((A,S)=>{let $=!1;return S.reduce((J,ye,je)=>J!==_i?J:(ye===_i&&($=!0),$||!1!==ye&&je!==S.length-1&&!Li(ye)?J:ye),A)},_i),(0,We.h)(A=>A!==_i),(0,Mt.U)(A=>Li(A)?A:!0===A),(0,gn.q)(1)))}let G=(()=>{class F{}return F.\u0275fac=function(S){return new(S||F)},F.\u0275cmp=P.Xpm({type:F,selectors:[["ng-component"]],decls:1,vars:0,template:function(S,$){1&S&&P._UZ(0,"router-outlet")},directives:function(){return[ks]},encapsulation:2}),F})();function le(F,A=""){for(let S=0;S<F.length;S++){const $=F[S];K($,Ce(A,$))}}function K(F,A){F.children&&le(F.children,A)}function Ce(F,A){return A?F||A.path?F&&!A.path?`${F}/`:!F&&A.path?A.path:`${F}/${A.path}`:"":F}function ze(F){const A=F.children&&F.children.map(ze),S=A?Object.assign(Object.assign({},F),{children:A}):Object.assign({},F);return!S.component&&(A||S.loadChildren)&&S.outlet&&S.outlet!==fn&&(S.component=G),S}function kt(F){return F.outlet||fn}function an(F,A){const S=F.filter($=>kt($)===A);return S.push(...F.filter($=>kt($)!==A)),S}const H={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function B(F,A,S){var $;if(""===A.path)return"full"===A.pathMatch&&(F.hasChildren()||S.length>0)?Object.assign({},H):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const ye=(A.matcher||Kn)(S,F,A);if(!ye)return Object.assign({},H);const je={};It(ye.posParams,(Wt,xn)=>{je[xn]=Wt.path});const me=ye.consumed.length>0?Object.assign(Object.assign({},je),ye.consumed[ye.consumed.length-1].parameters):je;return{matched:!0,consumedSegments:ye.consumed,lastChild:ye.consumed.length,parameters:me,positionalParamSegments:null!==($=ye.posParams)&&void 0!==$?$:{}}}function k(F,A,S,$,J="corrected"){if(S.length>0&&function(F,A,S){return S.some($=>Wr(F,A,$)&&kt($)!==fn)}(F,S,$)){const je=new In(A,function(F,A,S,$){const J={};J[fn]=$,$._sourceSegment=F,$._segmentIndexShift=A.length;for(const ye of S)if(""===ye.path&&kt(ye)!==fn){const je=new In([],{});je._sourceSegment=F,je._segmentIndexShift=A.length,J[kt(ye)]=je}return J}(F,A,$,new In(S,F.children)));return je._sourceSegment=F,je._segmentIndexShift=A.length,{segmentGroup:je,slicedSegments:[]}}if(0===S.length&&function(F,A,S){return S.some($=>Wr(F,A,$))}(F,S,$)){const je=new In(F.segments,function(F,A,S,$,J,ye){const je={};for(const me of $)if(Wr(F,S,me)&&!J[kt(me)]){const Wt=new In([],{});Wt._sourceSegment=F,Wt._segmentIndexShift="legacy"===ye?F.segments.length:A.length,je[kt(me)]=Wt}return Object.assign(Object.assign({},J),je)}(F,A,S,$,F.children,J));return je._sourceSegment=F,je._segmentIndexShift=A.length,{segmentGroup:je,slicedSegments:S}}const ye=new In(F.segments,F.children);return ye._sourceSegment=F,ye._segmentIndexShift=A.length,{segmentGroup:ye,slicedSegments:S}}function Wr(F,A,S){return(!(F.hasChildren()||A.length>0)||"full"!==S.pathMatch)&&""===S.path}function Ei(F,A,S,$){return!!(kt(F)===$||$!==fn&&Wr(A,S,F))&&("**"===F.path||B(A,F,S).matched)}function li(F,A,S){return 0===A.length&&!F.children[S]}class oi{constructor(A){this.segmentGroup=A||null}}class Gr{constructor(A){this.urlTree=A}}function tr(F){return new Ee.y(A=>A.error(new oi(F)))}function ia(F){return new Ee.y(A=>A.error(new Gr(F)))}function Do(F){return new Ee.y(A=>A.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${F}'`)))}class Go{constructor(A,S,$,J,ye){this.configLoader=S,this.urlSerializer=$,this.urlTree=J,this.config=ye,this.allowRedirects=!0,this.ngModule=A.get(P.h0i)}apply(){const A=k(this.urlTree.root,[],[],this.config).segmentGroup,S=new In(A.segments,A.children);return this.expandSegmentGroup(this.ngModule,this.config,S,fn).pipe((0,Mt.U)(ye=>this.createUrlTree(po(ye),this.urlTree.queryParams,this.urlTree.fragment))).pipe(at(ye=>{if(ye instanceof Gr)return this.allowRedirects=!1,this.match(ye.urlTree);throw ye instanceof oi?this.noMatchError(ye):ye}))}match(A){return this.expandSegmentGroup(this.ngModule,this.config,A.root,fn).pipe((0,Mt.U)(J=>this.createUrlTree(po(J),A.queryParams,A.fragment))).pipe(at(J=>{throw J instanceof oi?this.noMatchError(J):J}))}noMatchError(A){return new Error(`Cannot match any routes. URL Segment: '${A.segmentGroup}'`)}createUrlTree(A,S,$){const J=A.segments.length>0?new In([],{[fn]:A}):A;return new pn(J,S,$)}expandSegmentGroup(A,S,$,J){return 0===$.segments.length&&$.hasChildren()?this.expandChildren(A,S,$).pipe((0,Mt.U)(ye=>new In([],ye))):this.expandSegment(A,$,S,$.segments,J,!0)}expandChildren(A,S,$){const J=[];for(const ye of Object.keys($.children))"primary"===ye?J.unshift(ye):J.push(ye);return(0,_e.D)(J).pipe(gt(ye=>{const je=$.children[ye],me=an(S,ye);return this.expandSegmentGroup(A,me,je,ye).pipe((0,Mt.U)(Wt=>({segment:Wt,outlet:ye})))}),(0,Tn.R)((ye,je)=>(ye[je.outlet]=je.segment,ye),{}),function(F,A){const S=arguments.length>=2;return $=>$.pipe(F?(0,We.h)((J,ye)=>F(J,ye,$)):Ct.y,ht(1),S?(0,dt.d)(A):(0,Zt.T)(()=>new $e.K))}())}expandSegment(A,S,$,J,ye,je){return(0,_e.D)($).pipe(gt(me=>this.expandSegmentAgainstRoute(A,S,$,me,J,ye,je).pipe(at(xn=>{if(xn instanceof oi)return(0,Te.of)(null);throw xn}))),(0,_n.P)(me=>!!me),at((me,Wt)=>{if(me instanceof $e.K||"EmptyError"===me.name){if(li(S,J,ye))return(0,Te.of)(new In([],{}));throw new oi(S)}throw me}))}expandSegmentAgainstRoute(A,S,$,J,ye,je,me){return Ei(J,S,ye,je)?void 0===J.redirectTo?this.matchSegmentAgainstRoute(A,S,J,ye,je):me&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(A,S,$,J,ye,je):tr(S):tr(S)}expandSegmentAgainstRouteUsingRedirect(A,S,$,J,ye,je){return"**"===J.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(A,$,J,je):this.expandRegularSegmentAgainstRouteUsingRedirect(A,S,$,J,ye,je)}expandWildCardWithParamsAgainstRouteUsingRedirect(A,S,$,J){const ye=this.applyRedirectCommands([],$.redirectTo,{});return $.redirectTo.startsWith("/")?ia(ye):this.lineralizeSegments($,ye).pipe((0,Ye.zg)(je=>{const me=new In(je,{});return this.expandSegment(A,me,S,je,J,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(A,S,$,J,ye,je){const{matched:me,consumedSegments:Wt,lastChild:xn,positionalParamSegments:$r}=B(S,J,ye);if(!me)return tr(S);const Gn=this.applyRedirectCommands(Wt,J.redirectTo,$r);return J.redirectTo.startsWith("/")?ia(Gn):this.lineralizeSegments(J,Gn).pipe((0,Ye.zg)(jr=>this.expandSegment(A,S,$,jr.concat(ye.slice(xn)),je,!1)))}matchSegmentAgainstRoute(A,S,$,J,ye){if("**"===$.path)return $.loadChildren?($._loadedConfig?(0,Te.of)($._loadedConfig):this.configLoader.load(A.injector,$)).pipe((0,Mt.U)(jr=>($._loadedConfig=jr,new In(J,{})))):(0,Te.of)(new In(J,{}));const{matched:je,consumedSegments:me,lastChild:Wt}=B(S,$,J);if(!je)return tr(S);const xn=J.slice(Wt);return this.getChildConfig(A,$,J).pipe((0,Ye.zg)(Gn=>{const jr=Gn.module,wr=Gn.routes,{segmentGroup:hs,slicedSegments:uo}=k(S,me,xn,wr),Es=new In(hs.segments,hs.children);if(0===uo.length&&Es.hasChildren())return this.expandChildren(jr,wr,Es).pipe((0,Mt.U)(Ia=>new In(me,Ia)));if(0===wr.length&&0===uo.length)return(0,Te.of)(new In(me,{}));const Jr=kt($)===ye;return this.expandSegment(jr,Es,wr,uo,Jr?fn:ye,!0).pipe((0,Mt.U)(as=>new In(me.concat(as.segments),as.children)))}))}getChildConfig(A,S,$){return S.children?(0,Te.of)(new di(S.children,A)):S.loadChildren?void 0!==S._loadedConfig?(0,Te.of)(S._loadedConfig):this.runCanLoadGuards(A.injector,S,$).pipe((0,Ye.zg)(J=>{return J?this.configLoader.load(A.injector,S).pipe((0,Mt.U)(ye=>(S._loadedConfig=ye,ye))):(F=S,new Ee.y(A=>A.error(Xn(`Cannot load children because the guard of the route "path: '${F.path}'" returned false`))));var F})):(0,Te.of)(new di([],A))}runCanLoadGuards(A,S,$){const J=S.canLoad;if(!J||0===J.length)return(0,Te.of)(!0);const ye=J.map(je=>{const me=A.get(je);let Wt;if((F=me)&&Fi(F.canLoad))Wt=me.canLoad(S,$);else{if(!Fi(me))throw new Error("Invalid CanLoad guard");Wt=me(S,$)}var F;return Oe(Wt)});return(0,Te.of)(ye).pipe(Qi(),(0,Mn.b)(je=>{if(!Li(je))return;const me=Xn(`Redirecting to "${this.urlSerializer.serialize(je)}"`);throw me.url=je,me}),(0,Mt.U)(je=>!0===je))}lineralizeSegments(A,S){let $=[],J=S.root;for(;;){if($=$.concat(J.segments),0===J.numberOfChildren)return(0,Te.of)($);if(J.numberOfChildren>1||!J.children[fn])return Do(A.redirectTo);J=J.children[fn]}}applyRedirectCommands(A,S,$){return this.applyRedirectCreatreUrlTree(S,this.urlSerializer.parse(S),A,$)}applyRedirectCreatreUrlTree(A,S,$,J){const ye=this.createSegmentGroup(A,S.root,$,J);return new pn(ye,this.createQueryParams(S.queryParams,this.urlTree.queryParams),S.fragment)}createQueryParams(A,S){const $={};return It(A,(J,ye)=>{if("string"==typeof J&&J.startsWith(":")){const me=J.substring(1);$[ye]=S[me]}else $[ye]=J}),$}createSegmentGroup(A,S,$,J){const ye=this.createSegments(A,S.segments,$,J);let je={};return It(S.children,(me,Wt)=>{je[Wt]=this.createSegmentGroup(A,me,$,J)}),new In(ye,je)}createSegments(A,S,$,J){return S.map(ye=>ye.path.startsWith(":")?this.findPosParam(A,ye,J):this.findOrReturn(ye,$))}findPosParam(A,S,$){const J=$[S.path.substring(1)];if(!J)throw new Error(`Cannot redirect to '${A}'. Cannot find '${S.path}'.`);return J}findOrReturn(A,S){let $=0;for(const J of S){if(J.path===A.path)return S.splice($),J;$++}return A}}function po(F){const A={};for(const $ of Object.keys(F.children)){const ye=po(F.children[$]);(ye.segments.length>0||ye.hasChildren())&&(A[$]=ye)}return function(F){if(1===F.numberOfChildren&&F.children[fn]){const A=F.children[fn];return new In(F.segments.concat(A.segments),A.children)}return F}(new In(F.segments,A))}class Cr{constructor(A){this.path=A,this.route=this.path[this.path.length-1]}}class So{constructor(A,S){this.component=A,this.route=S}}function Ui(F,A,S){const $=F._root;return so($,A?A._root:null,S,[$.value])}function bs(F,A,S){const $=function(F){if(!F)return null;for(let A=F.parent;A;A=A.parent){const S=A.routeConfig;if(S&&S._loadedConfig)return S._loadedConfig}return null}(A);return($?$.module.injector:S).get(F)}function so(F,A,S,$,J={canDeactivateChecks:[],canActivateChecks:[]}){const ye=Qe(A);return F.children.forEach(je=>{(function(F,A,S,$,J={canDeactivateChecks:[],canActivateChecks:[]}){const ye=F.value,je=A?A.value:null,me=S?S.getContext(F.value.outlet):null;if(je&&ye.routeConfig===je.routeConfig){const Wt=function(F,A,S){if("function"==typeof S)return S(F,A);switch(S){case"pathParamsChange":return!Gt(F.url,A.url);case"pathParamsOrQueryParamsChange":return!Gt(F.url,A.url)||!dn(F.queryParams,A.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Mi(F,A)||!dn(F.queryParams,A.queryParams);default:return!Mi(F,A)}}(je,ye,ye.routeConfig.runGuardsAndResolvers);Wt?J.canActivateChecks.push(new Cr($)):(ye.data=je.data,ye._resolvedData=je._resolvedData),so(F,A,ye.component?me?me.children:null:S,$,J),Wt&&me&&me.outlet&&me.outlet.isActivated&&J.canDeactivateChecks.push(new So(me.outlet.component,je))}else je&&eo(A,me,J),J.canActivateChecks.push(new Cr($)),so(F,null,ye.component?me?me.children:null:S,$,J)})(je,ye[je.value.outlet],S,$.concat([je.value]),J),delete ye[je.value.outlet]}),It(ye,(je,me)=>eo(je,S.getContext(me),J)),J}function eo(F,A,S){const $=Qe(F),J=F.value;It($,(ye,je)=>{eo(ye,J.component?A?A.children.getContext(je):null:A,S)}),S.canDeactivateChecks.push(new So(J.component&&A&&A.outlet&&A.outlet.isActivated?A.outlet.component:null,J))}class ds{}function mo(F){return new Ee.y(A=>A.error(F))}class Ao{constructor(A,S,$,J,ye,je){this.rootComponentType=A,this.config=S,this.urlTree=$,this.url=J,this.paramsInheritanceStrategy=ye,this.relativeLinkResolution=je}recognize(){const A=k(this.urlTree.root,[],[],this.config.filter(je=>void 0===je.redirectTo),this.relativeLinkResolution).segmentGroup,S=this.processSegmentGroup(this.config,A,fn);if(null===S)return null;const $=new Vn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},fn,this.rootComponentType,null,this.urlTree.root,-1,{}),J=new be($,S),ye=new qn(this.url,J);return this.inheritParamsAndData(ye._root),ye}inheritParamsAndData(A){const S=A.value,$=on(S,this.paramsInheritanceStrategy);S.params=Object.freeze($.params),S.data=Object.freeze($.data),A.children.forEach(J=>this.inheritParamsAndData(J))}processSegmentGroup(A,S,$){return 0===S.segments.length&&S.hasChildren()?this.processChildren(A,S):this.processSegment(A,S,S.segments,$)}processChildren(A,S){const $=[];for(const ye of Object.keys(S.children)){const je=S.children[ye],me=an(A,ye),Wt=this.processSegmentGroup(me,je,ye);if(null===Wt)return null;$.push(...Wt)}const J=Hs($);return J.sort((A,S)=>A.value.outlet===fn?-1:S.value.outlet===fn?1:A.value.outlet.localeCompare(S.value.outlet)),J}processSegment(A,S,$,J){for(const ye of A){const je=this.processSegmentAgainstRoute(ye,S,$,J);if(null!==je)return je}return li(S,$,J)?[]:null}processSegmentAgainstRoute(A,S,$,J){if(A.redirectTo||!Ei(A,S,$,J))return null;let ye,je=[],me=[];if("**"===A.path){const wr=$.length>0?Ae($).parameters:{};ye=new Vn($,wr,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,oa(A),kt(A),A.component,A,Ci(S),no(S)+$.length,Ns(A))}else{const wr=B(S,A,$);if(!wr.matched)return null;je=wr.consumedSegments,me=$.slice(wr.lastChild),ye=new Vn(je,wr.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,oa(A),kt(A),A.component,A,Ci(S),no(S)+je.length,Ns(A))}const Wt=(F=A).children?F.children:F.loadChildren?F._loadedConfig.routes:[],{segmentGroup:xn,slicedSegments:$r}=k(S,je,me,Wt.filter(wr=>void 0===wr.redirectTo),this.relativeLinkResolution);var F;if(0===$r.length&&xn.hasChildren()){const wr=this.processChildren(Wt,xn);return null===wr?null:[new be(ye,wr)]}if(0===Wt.length&&0===$r.length)return[new be(ye,[])];const Gn=kt(A)===J,jr=this.processSegment(Wt,xn,$r,Gn?fn:J);return null===jr?null:[new be(ye,jr)]}}function to(F){const A=F.value.routeConfig;return A&&""===A.path&&void 0===A.redirectTo}function Hs(F){const A=[],S=new Set;for(const $ of F){if(!to($)){A.push($);continue}const J=A.find(ye=>$.value.routeConfig===ye.value.routeConfig);void 0!==J?(J.children.push(...$.children),S.add(J)):A.push($)}for(const $ of S){const J=Hs($.children);A.push(new be($.value,J))}return A.filter($=>!S.has($))}function Ci(F){let A=F;for(;A._sourceSegment;)A=A._sourceSegment;return A}function no(F){let A=F,S=A._segmentIndexShift?A._segmentIndexShift:0;for(;A._sourceSegment;)A=A._sourceSegment,S+=A._segmentIndexShift?A._segmentIndexShift:0;return S-1}function oa(F){return F.data||{}}function Ns(F){return F.resolve||{}}function T(F){return(0,Pt.w)(A=>{const S=F(A);return S?(0,_e.D)(S).pipe((0,Mt.U)(()=>A)):(0,Te.of)(A)})}class q{}class yt extends class{shouldDetach(A){return!1}store(A,S){}shouldAttach(A){return!1}retrieve(A){return null}shouldReuseRoute(A,S){return A.routeConfig===S.routeConfig}}{}const Xt=new P.OlP("ROUTES");class yn{constructor(A,S,$,J){this.loader=A,this.compiler=S,this.onLoadStartListener=$,this.onLoadEndListener=J}load(A,S){if(S._loader$)return S._loader$;this.onLoadStartListener&&this.onLoadStartListener(S);const J=this.loadModuleFactory(S.loadChildren).pipe((0,Mt.U)(ye=>{this.onLoadEndListener&&this.onLoadEndListener(S);const je=ye.create(A);return new di(oe(je.injector.get(Xt,void 0,P.XFs.Self|P.XFs.Optional)).map(ze),je)}),at(ye=>{throw S._loader$=void 0,ye}));return S._loader$=new Ie.c(J,()=>new Me.xQ).pipe((0,vr.x)()),S._loader$}loadModuleFactory(A){return"string"==typeof A?(0,_e.D)(this.loader.load(A)):Oe(A()).pipe((0,Ye.zg)(S=>S instanceof P.YKP?(0,Te.of)(S):(0,_e.D)(this.compiler.compileModuleAsync(S))))}}class yr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Pn,this.attachRef=null}}class Pn{constructor(){this.contexts=new Map}onChildOutletCreated(A,S){const $=this.getOrCreateContext(A);$.outlet=S,this.contexts.set(A,$)}onChildOutletDestroyed(A){const S=this.getContext(A);S&&(S.outlet=null,S.attachRef=null)}onOutletDeactivated(){const A=this.contexts;return this.contexts=new Map,A}onOutletReAttached(A){this.contexts=A}getOrCreateContext(A){let S=this.getContext(A);return S||(S=new yr,this.contexts.set(A,S)),S}getContext(A){return this.contexts.get(A)||null}}class wi{shouldProcessUrl(A){return!0}extract(A){return A}merge(A,S){return A}}function zt(F){throw F}function nr(F,A,S){return A.parse("/")}function Ji(F,A){return(0,Te.of)(null)}const ro={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ln={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let $n=(()=>{class F{constructor(S,$,J,ye,je,me,Wt,xn){this.rootComponentType=S,this.urlSerializer=$,this.rootContexts=J,this.location=ye,this.config=xn,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Me.xQ,this.errorHandler=zt,this.malformedUriErrorHandler=nr,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ji,afterPreactivation:Ji},this.urlHandlingStrategy=new wi,this.routeReuseStrategy=new yt,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=je.get(P.h0i),this.console=je.get(P.c2e);const jr=je.get(P.R0b);this.isNgZoneEnabled=jr instanceof P.R0b&&P.R0b.isInAngularZone(),this.resetConfig(xn),this.currentUrlTree=new pn(new In([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new yn(me,Wt,wr=>this.triggerEvent(new hr(wr)),wr=>this.triggerEvent(new ri(wr))),this.routerState=Rt(this.currentUrlTree,this.rootComponentType),this.transitions=new Ke.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var S;return null===(S=this.location.getState())||void 0===S?void 0:S.\u0275routerPageId}setupNavigations(S){const $=this.events;return S.pipe((0,We.h)(J=>0!==J.id),(0,Mt.U)(J=>Object.assign(Object.assign({},J),{extractedUrl:this.urlHandlingStrategy.extract(J.rawUrl)})),(0,Pt.w)(J=>{let ye=!1,je=!1;return(0,Te.of)(J).pipe((0,Mn.b)(me=>{this.currentNavigation={id:me.id,initialUrl:me.currentRawUrl,extractedUrl:me.extractedUrl,trigger:me.source,extras:me.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Pt.w)(me=>{const Wt=this.browserUrlTree.toString(),xn=!this.navigated||me.extractedUrl.toString()!==Wt||Wt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||xn)&&this.urlHandlingStrategy.shouldProcessUrl(me.rawUrl))return ln(me.source)&&(this.browserUrlTree=me.extractedUrl),(0,Te.of)(me).pipe((0,Pt.w)(Gn=>{const jr=this.transitions.getValue();return $.next(new En(Gn.id,this.serializeUrl(Gn.extractedUrl),Gn.source,Gn.restoredState)),jr!==this.transitions.getValue()?De.E:Promise.resolve(Gn)}),function(F,A,S,$){return(0,Pt.w)(J=>function(F,A,S,$,J){return new Go(F,A,S,$,J).apply()}(F,A,S,J.extractedUrl,$).pipe((0,Mt.U)(ye=>Object.assign(Object.assign({},J),{urlAfterRedirects:ye}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Mn.b)(Gn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Gn.urlAfterRedirects})}),function(F,A,S,$,J){return(0,Ye.zg)(ye=>function(F,A,S,$,J="emptyOnly",ye="legacy"){try{const je=new Ao(F,A,S,$,J,ye).recognize();return null===je?mo(new ds):(0,Te.of)(je)}catch(je){return mo(je)}}(F,A,ye.urlAfterRedirects,S(ye.urlAfterRedirects),$,J).pipe((0,Mt.U)(je=>Object.assign(Object.assign({},ye),{targetSnapshot:je}))))}(this.rootComponentType,this.config,Gn=>this.serializeUrl(Gn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Mn.b)(Gn=>{"eager"===this.urlUpdateStrategy&&(Gn.extras.skipLocationChange||this.setBrowserUrl(Gn.urlAfterRedirects,Gn),this.browserUrlTree=Gn.urlAfterRedirects);const jr=new jn(Gn.id,this.serializeUrl(Gn.extractedUrl),this.serializeUrl(Gn.urlAfterRedirects),Gn.targetSnapshot);$.next(jr)}));if(xn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:jr,extractedUrl:wr,source:hs,restoredState:uo,extras:Es}=me,Jr=new En(jr,this.serializeUrl(wr),hs,uo);$.next(Jr);const aa=Rt(wr,this.rootComponentType).snapshot;return(0,Te.of)(Object.assign(Object.assign({},me),{targetSnapshot:aa,urlAfterRedirects:wr,extras:Object.assign(Object.assign({},Es),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=me.rawUrl,this.browserUrlTree=me.urlAfterRedirects,me.resolve(null),De.E}),T(me=>{const{targetSnapshot:Wt,id:xn,extractedUrl:$r,rawUrl:Gn,extras:{skipLocationChange:jr,replaceUrl:wr}}=me;return this.hooks.beforePreactivation(Wt,{navigationId:xn,appliedUrlTree:$r,rawUrlTree:Gn,skipLocationChange:!!jr,replaceUrl:!!wr})}),(0,Mn.b)(me=>{const Wt=new Qn(me.id,this.serializeUrl(me.extractedUrl),this.serializeUrl(me.urlAfterRedirects),me.targetSnapshot);this.triggerEvent(Wt)}),(0,Mt.U)(me=>Object.assign(Object.assign({},me),{guards:Ui(me.targetSnapshot,me.currentSnapshot,this.rootContexts)})),function(F,A){return(0,Ye.zg)(S=>{const{targetSnapshot:$,currentSnapshot:J,guards:{canActivateChecks:ye,canDeactivateChecks:je}}=S;return 0===je.length&&0===ye.length?(0,Te.of)(Object.assign(Object.assign({},S),{guardsResult:!0})):function(F,A,S,$){return(0,_e.D)(F).pipe((0,Ye.zg)(J=>function(F,A,S,$,J){const ye=A&&A.routeConfig?A.routeConfig.canDeactivate:null;if(!ye||0===ye.length)return(0,Te.of)(!0);const je=ye.map(me=>{const Wt=bs(me,A,J);let xn;if(function(F){return F&&Fi(F.canDeactivate)}(Wt))xn=Oe(Wt.canDeactivate(F,A,S,$));else{if(!Fi(Wt))throw new Error("Invalid CanDeactivate guard");xn=Oe(Wt(F,A,S,$))}return xn.pipe((0,_n.P)())});return(0,Te.of)(je).pipe(Qi())}(J.component,J.route,S,A,$)),(0,_n.P)(J=>!0!==J,!0))}(je,$,J,F).pipe((0,Ye.zg)(me=>me&&function(F){return"boolean"==typeof F}(me)?function(F,A,S,$){return(0,_e.D)(A).pipe(gt(J=>(0,qe.z)(function(F,A){return null!==F&&A&&A(new sr(F)),(0,Te.of)(!0)}(J.route.parent,$),function(F,A){return null!==F&&A&&A(new wt(F)),(0,Te.of)(!0)}(J.route,$),function(F,A,S){const $=A[A.length-1],ye=A.slice(0,A.length-1).reverse().map(je=>function(F){const A=F.routeConfig?F.routeConfig.canActivateChild:null;return A&&0!==A.length?{node:F,guards:A}:null}(je)).filter(je=>null!==je).map(je=>ut(()=>{const me=je.guards.map(Wt=>{const xn=bs(Wt,je.node,S);let $r;if(function(F){return F&&Fi(F.canActivateChild)}(xn))$r=Oe(xn.canActivateChild($,F));else{if(!Fi(xn))throw new Error("Invalid CanActivateChild guard");$r=Oe(xn($,F))}return $r.pipe((0,_n.P)())});return(0,Te.of)(me).pipe(Qi())}));return(0,Te.of)(ye).pipe(Qi())}(F,J.path,S),function(F,A,S){const $=A.routeConfig?A.routeConfig.canActivate:null;if(!$||0===$.length)return(0,Te.of)(!0);const J=$.map(ye=>ut(()=>{const je=bs(ye,A,S);let me;if(function(F){return F&&Fi(F.canActivate)}(je))me=Oe(je.canActivate(A,F));else{if(!Fi(je))throw new Error("Invalid CanActivate guard");me=Oe(je(A,F))}return me.pipe((0,_n.P)())}));return(0,Te.of)(J).pipe(Qi())}(F,J.route,S))),(0,_n.P)(J=>!0!==J,!0))}($,ye,F,A):(0,Te.of)(me)),(0,Mt.U)(me=>Object.assign(Object.assign({},S),{guardsResult:me})))})}(this.ngModule.injector,me=>this.triggerEvent(me)),(0,Mn.b)(me=>{if(Li(me.guardsResult)){const xn=Xn(`Redirecting to "${this.serializeUrl(me.guardsResult)}"`);throw xn.url=me.guardsResult,xn}const Wt=new lr(me.id,this.serializeUrl(me.extractedUrl),this.serializeUrl(me.urlAfterRedirects),me.targetSnapshot,!!me.guardsResult);this.triggerEvent(Wt)}),(0,We.h)(me=>!!me.guardsResult||(this.restoreHistory(me),this.cancelNavigationTransition(me,""),!1)),T(me=>{if(me.guards.canActivateChecks.length)return(0,Te.of)(me).pipe((0,Mn.b)(Wt=>{const xn=new Ar(Wt.id,this.serializeUrl(Wt.extractedUrl),this.serializeUrl(Wt.urlAfterRedirects),Wt.targetSnapshot);this.triggerEvent(xn)}),(0,Pt.w)(Wt=>{let xn=!1;return(0,Te.of)(Wt).pipe(function(F,A){return(0,Ye.zg)(S=>{const{targetSnapshot:$,guards:{canActivateChecks:J}}=S;if(!J.length)return(0,Te.of)(S);let ye=0;return(0,_e.D)(J).pipe(gt(je=>function(F,A,S,$){return function(F,A,S,$){const J=Object.keys(F);if(0===J.length)return(0,Te.of)({});const ye={};return(0,_e.D)(J).pipe((0,Ye.zg)(je=>function(F,A,S,$){const J=bs(F,A,$);return Oe(J.resolve?J.resolve(A,S):J(A,S))}(F[je],A,S,$).pipe((0,Mn.b)(me=>{ye[je]=me}))),ht(1),(0,Ye.zg)(()=>Object.keys(ye).length===J.length?(0,Te.of)(ye):De.E))}(F._resolve,F,A,$).pipe((0,Mt.U)(ye=>(F._resolvedData=ye,F.data=Object.assign(Object.assign({},F.data),on(F,S).resolve),null)))}(je.route,$,F,A)),(0,Mn.b)(()=>ye++),ht(1),(0,Ye.zg)(je=>ye===J.length?(0,Te.of)(S):De.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Mn.b)({next:()=>xn=!0,complete:()=>{xn||(this.restoreHistory(Wt),this.cancelNavigationTransition(Wt,"At least one route resolver didn't emit any value."))}}))}),(0,Mn.b)(Wt=>{const xn=new Dr(Wt.id,this.serializeUrl(Wt.extractedUrl),this.serializeUrl(Wt.urlAfterRedirects),Wt.targetSnapshot);this.triggerEvent(xn)}))}),T(me=>{const{targetSnapshot:Wt,id:xn,extractedUrl:$r,rawUrl:Gn,extras:{skipLocationChange:jr,replaceUrl:wr}}=me;return this.hooks.afterPreactivation(Wt,{navigationId:xn,appliedUrlTree:$r,rawUrlTree:Gn,skipLocationChange:!!jr,replaceUrl:!!wr})}),(0,Mt.U)(me=>{const Wt=function(F,A,S){const $=Rs(F,A._root,S?S._root:void 0);return new Xe($,A)}(this.routeReuseStrategy,me.targetSnapshot,me.currentRouterState);return Object.assign(Object.assign({},me),{targetRouterState:Wt})}),(0,Mn.b)(me=>{this.currentUrlTree=me.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(me.urlAfterRedirects,me.rawUrl),this.routerState=me.targetRouterState,"deferred"===this.urlUpdateStrategy&&(me.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,me),this.browserUrlTree=me.urlAfterRedirects)}),((F,A,S)=>(0,Mt.U)($=>(new Us(A,$.targetRouterState,$.currentRouterState,S).activate(F),$)))(this.rootContexts,this.routeReuseStrategy,me=>this.triggerEvent(me)),(0,Mn.b)({next(){ye=!0},complete(){ye=!0}}),function(F){return A=>A.lift(new Dt(F))}(()=>{var me;if(!ye&&!je){const Wt=`Navigation ID ${J.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(J),this.cancelNavigationTransition(J,Wt)):this.cancelNavigationTransition(J,Wt)}(null===(me=this.currentNavigation)||void 0===me?void 0:me.id)===J.id&&(this.currentNavigation=null)}),at(me=>{if(je=!0,function(F){return F&&F[dr]}(me)){const Wt=Li(me.url);Wt||(this.navigated=!0,this.restoreHistory(J,!0));const xn=new tn(J.id,this.serializeUrl(J.extractedUrl),me.message);$.next(xn),Wt?setTimeout(()=>{const $r=this.urlHandlingStrategy.merge(me.url,this.rawUrlTree),Gn={skipLocationChange:J.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ln(J.source)};this.scheduleNavigation($r,"imperative",null,Gn,{resolve:J.resolve,reject:J.reject,promise:J.promise})},0):J.resolve(!1)}else{this.restoreHistory(J,!0);const Wt=new Un(J.id,this.serializeUrl(J.extractedUrl),me);$.next(Wt);try{J.resolve(this.errorHandler(me))}catch(xn){J.reject(xn)}}return De.E}))}))}resetRootComponentType(S){this.rootComponentType=S,this.routerState.root.component=this.rootComponentType}getTransition(){const S=this.transitions.value;return S.urlAfterRedirects=this.browserUrlTree,S}setTransition(S){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),S))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(S=>{const $=this.extractLocationChangeInfoFromEvent(S);this.shouldScheduleNavigation(this.lastLocationChangeInfo,$)&&setTimeout(()=>{const{source:J,state:ye,urlTree:je}=$,me={replaceUrl:!0};if(ye){const Wt=Object.assign({},ye);delete Wt.navigationId,delete Wt.\u0275routerPageId,0!==Object.keys(Wt).length&&(me.state=Wt)}this.scheduleNavigation(je,J,ye,me)},0),this.lastLocationChangeInfo=$}))}extractLocationChangeInfoFromEvent(S){var $;return{source:"popstate"===S.type?"popstate":"hashchange",urlTree:this.parseUrl(S.url),state:(null===($=S.state)||void 0===$?void 0:$.navigationId)?S.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(S,$){if(!S)return!0;const J=$.urlTree.toString()===S.urlTree.toString();return $.transitionId!==S.transitionId||!J||!("hashchange"===$.source&&"popstate"===S.source||"popstate"===$.source&&"hashchange"===S.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(S){this.events.next(S)}resetConfig(S){le(S),this.config=S.map(ze),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(S,$={}){const{relativeTo:J,queryParams:ye,fragment:je,queryParamsHandling:me,preserveFragment:Wt}=$,xn=J||this.routerState.root,$r=Wt?this.currentUrlTree.fragment:je;let Gn=null;switch(me){case"merge":Gn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),ye);break;case"preserve":Gn=this.currentUrlTree.queryParams;break;default:Gn=ye||null}return null!==Gn&&(Gn=this.removeEmptyProps(Gn)),function(F,A,S,$,J){if(0===S.length)return Lo(A.root,A.root,A,$,J);const ye=function(F){if("string"==typeof F[0]&&1===F.length&&"/"===F[0])return new Vo(!0,0,F);let A=0,S=!1;const $=F.reduce((J,ye,je)=>{if("object"==typeof ye&&null!=ye){if(ye.outlets){const me={};return It(ye.outlets,(Wt,xn)=>{me[xn]="string"==typeof Wt?Wt.split("/"):Wt}),[...J,{outlets:me}]}if(ye.segmentPath)return[...J,ye.segmentPath]}return"string"!=typeof ye?[...J,ye]:0===je?(ye.split("/").forEach((me,Wt)=>{0==Wt&&"."===me||(0==Wt&&""===me?S=!0:".."===me?A++:""!=me&&J.push(me))}),J):[...J,ye]},[]);return new Vo(S,A,$)}(S);if(ye.toRoot())return Lo(A.root,new In([],{}),A,$,J);const je=function(F,A,S){if(F.isAbsolute)return new vs(A.root,!0,0);if(-1===S.snapshot._lastPathIndex){const ye=S.snapshot._urlSegment;return new vs(ye,ye===A.root,0)}const $=Ks(F.commands[0])?0:1;return function(F,A,S){let $=F,J=A,ye=S;for(;ye>J;){if(ye-=J,$=$.parent,!$)throw new Error("Invalid number of '../'");J=$.segments.length}return new vs($,!1,J-ye)}(S.snapshot._urlSegment,S.snapshot._lastPathIndex+$,F.numberOfDoubleDots)}(ye,A,F),me=je.processChildren?Xr(je.segmentGroup,je.index,ye.commands):Zs(je.segmentGroup,je.index,ye.commands);return Lo(je.segmentGroup,me,A,$,J)}(xn,this.currentUrlTree,S,Gn,null!=$r?$r:null)}navigateByUrl(S,$={skipLocationChange:!1}){const J=Li(S)?S:this.parseUrl(S),ye=this.urlHandlingStrategy.merge(J,this.rawUrlTree);return this.scheduleNavigation(ye,"imperative",null,$)}navigate(S,$={skipLocationChange:!1}){return function(F){for(let A=0;A<F.length;A++){const S=F[A];if(null==S)throw new Error(`The requested path contains ${S} segment at index ${A}`)}}(S),this.navigateByUrl(this.createUrlTree(S,$),$)}serializeUrl(S){return this.urlSerializer.serialize(S)}parseUrl(S){let $;try{$=this.urlSerializer.parse(S)}catch(J){$=this.malformedUriErrorHandler(J,this.urlSerializer,S)}return $}isActive(S,$){let J;if(J=!0===$?Object.assign({},ro):!1===$?Object.assign({},Ln):$,Li(S))return ve(this.currentUrlTree,S,J);const ye=this.parseUrl(S);return ve(this.currentUrlTree,ye,J)}removeEmptyProps(S){return Object.keys(S).reduce(($,J)=>{const ye=S[J];return null!=ye&&($[J]=ye),$},{})}processNavigations(){this.navigations.subscribe(S=>{this.navigated=!0,this.lastSuccessfulId=S.id,this.currentPageId=S.targetPageId,this.events.next(new Wn(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,S.resolve(!0)},S=>{this.console.warn(`Unhandled Navigation Error: ${S}`)})}scheduleNavigation(S,$,J,ye,je){var me,Wt;if(this.disposed)return Promise.resolve(!1);const xn=this.getTransition(),$r=ln($)&&xn&&!ln(xn.source),wr=(this.lastSuccessfulId===xn.id||this.currentNavigation?xn.rawUrl:xn.urlAfterRedirects).toString()===S.toString();if($r&&wr)return Promise.resolve(!0);let hs,uo,Es;je?(hs=je.resolve,uo=je.reject,Es=je.promise):Es=new Promise((as,Ia)=>{hs=as,uo=Ia});const Jr=++this.navigationId;let aa;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(J=this.location.getState()),aa=J&&J.\u0275routerPageId?J.\u0275routerPageId:ye.replaceUrl||ye.skipLocationChange?null!==(me=this.browserPageId)&&void 0!==me?me:0:(null!==(Wt=this.browserPageId)&&void 0!==Wt?Wt:0)+1):aa=0,this.setTransition({id:Jr,targetPageId:aa,source:$,restoredState:J,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:S,extras:ye,resolve:hs,reject:uo,promise:Es,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Es.catch(as=>Promise.reject(as))}setBrowserUrl(S,$){const J=this.urlSerializer.serialize(S),ye=Object.assign(Object.assign({},$.extras.state),this.generateNgRouterState($.id,$.targetPageId));this.location.isCurrentPathEqualTo(J)||$.extras.replaceUrl?this.location.replaceState(J,"",ye):this.location.go(J,"",ye)}restoreHistory(S,$=!1){var J,ye;if("computed"===this.canceledNavigationResolution){const je=this.currentPageId-S.targetPageId;"popstate"!==S.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(J=this.currentNavigation)||void 0===J?void 0:J.finalUrl)||0===je?this.currentUrlTree===(null===(ye=this.currentNavigation)||void 0===ye?void 0:ye.finalUrl)&&0===je&&(this.resetState(S),this.browserUrlTree=S.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(je)}else"replace"===this.canceledNavigationResolution&&($&&this.resetState(S),this.resetUrlToCurrentUrlTree())}resetState(S){this.routerState=S.currentRouterState,this.currentUrlTree=S.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,S.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(S,$){const J=new tn(S.id,this.serializeUrl(S.extractedUrl),$);this.triggerEvent(J),S.resolve(!1)}generateNgRouterState(S,$){return"computed"===this.canceledNavigationResolution?{navigationId:S,\u0275routerPageId:$}:{navigationId:S}}}return F.\u0275fac=function(S){return new(S||F)(P.LFG(P.DyG),P.LFG(bn),P.LFG(Pn),P.LFG(_.Ye),P.LFG(P.zs3),P.LFG(P.v3s),P.LFG(P.Sil),P.LFG(void 0))},F.\u0275prov=P.Yz7({token:F,factory:F.\u0275fac}),F})();function ln(F){return"imperative"!==F}let ft=(()=>{class F{constructor(S,$,J,ye,je){this.router=S,this.route=$,this.commands=[],this.onChanges=new Me.xQ,null==J&&ye.setAttribute(je.nativeElement,"tabindex","0")}ngOnChanges(S){this.onChanges.next(this)}set routerLink(S){this.commands=null!=S?Array.isArray(S)?S:[S]:[]}onClick(){const S={skipLocationChange:Ir(this.skipLocationChange),replaceUrl:Ir(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,S),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ir(this.preserveFragment)})}}return F.\u0275fac=function(S){return new(S||F)(P.Y36($n),P.Y36(Tt),P.$8M("tabindex"),P.Y36(P.Qsj),P.Y36(P.SBq))},F.\u0275dir=P.lG2({type:F,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(S,$){1&S&&P.NdJ("click",function(){return $.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[P.TTD]}),F})();function Ir(F){return""===F||!!F}let ks=(()=>{class F{constructor(S,$,J,ye,je){this.parentContexts=S,this.location=$,this.resolver=J,this.changeDetector=je,this.activated=null,this._activatedRoute=null,this.activateEvents=new P.vpe,this.deactivateEvents=new P.vpe,this.name=ye||fn,S.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const S=this.parentContexts.getContext(this.name);S&&S.route&&(S.attachRef?this.attach(S.attachRef,S.route):this.activateWith(S.route,S.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const S=this.activated;return this.activated=null,this._activatedRoute=null,S}attach(S,$){this.activated=S,this._activatedRoute=$,this.location.insert(S.hostView)}deactivate(){if(this.activated){const S=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(S)}}activateWith(S,$){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=S;const je=($=$||this.resolver).resolveComponentFactory(S._futureSnapshot.routeConfig.component),me=this.parentContexts.getOrCreateContext(this.name).children,Wt=new pl(S,me,this.location.injector);this.activated=this.location.createComponent(je,this.location.length,Wt),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return F.\u0275fac=function(S){return new(S||F)(P.Y36(Pn),P.Y36(P.s_b),P.Y36(P._Vd),P.$8M("name"),P.Y36(P.sBO))},F.\u0275dir=P.lG2({type:F,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),F})();class pl{constructor(A,S,$){this.route=A,this.childContexts=S,this.parent=$}get(A,S){return A===Tt?this.route:A===Pn?this.childContexts:this.parent.get(A,S)}}class Bi{}class kr{preload(A,S){return S().pipe(at(()=>(0,Te.of)(null)))}}class ss{preload(A,S){return(0,Te.of)(null)}}let Eu=(()=>{class F{constructor(S,$,J,ye,je){this.router=S,this.injector=ye,this.preloadingStrategy=je,this.loader=new yn($,J,xn=>S.triggerEvent(new hr(xn)),xn=>S.triggerEvent(new ri(xn)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,We.h)(S=>S instanceof Wn),gt(()=>this.preload())).subscribe(()=>{})}preload(){const S=this.injector.get(P.h0i);return this.processRoutes(S,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(S,$){const J=[];for(const ye of $)if(ye.loadChildren&&!ye.canLoad&&ye._loadedConfig){const je=ye._loadedConfig;J.push(this.processRoutes(je.module,je.routes))}else ye.loadChildren&&!ye.canLoad?J.push(this.preloadConfig(S,ye)):ye.children&&J.push(this.processRoutes(S,ye.children));return(0,_e.D)(J).pipe((0,ur.J)(),(0,Mt.U)(ye=>{}))}preloadConfig(S,$){return this.preloadingStrategy.preload($,()=>($._loadedConfig?(0,Te.of)($._loadedConfig):this.loader.load(S.injector,$)).pipe((0,Ye.zg)(ye=>($._loadedConfig=ye,this.processRoutes(ye.module,ye.routes)))))}}return F.\u0275fac=function(S){return new(S||F)(P.LFG($n),P.LFG(P.v3s),P.LFG(P.Sil),P.LFG(P.zs3),P.LFG(Bi))},F.\u0275prov=P.Yz7({token:F,factory:F.\u0275fac}),F})(),Ml=(()=>{class F{constructor(S,$,J={}){this.router=S,this.viewportScroller=$,this.options=J,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},J.scrollPositionRestoration=J.scrollPositionRestoration||"disabled",J.anchorScrolling=J.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(S=>{S instanceof En?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=S.navigationTrigger,this.restoredId=S.restoredState?S.restoredState.navigationId:0):S instanceof Wn&&(this.lastId=S.id,this.scheduleScrollEvent(S,this.router.parseUrl(S.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(S=>{S instanceof Or&&(S.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(S.position):S.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(S.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(S,$){this.router.triggerEvent(new Or(S,"popstate"===this.lastSource?this.store[this.restoredId]:null,$))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return F.\u0275fac=function(S){return new(S||F)(P.LFG($n),P.LFG(_.EM),P.LFG(void 0))},F.\u0275prov=P.Yz7({token:F,factory:F.\u0275fac}),F})();const _a=new P.OlP("ROUTER_CONFIGURATION"),gr=new P.OlP("ROUTER_FORROOT_GUARD"),ao=[_.Ye,{provide:bn,useClass:Rn},{provide:$n,useFactory:function(F,A,S,$,J,ye,je,me={},Wt,xn){const $r=new $n(null,F,A,S,$,J,ye,oe(je));return Wt&&($r.urlHandlingStrategy=Wt),xn&&($r.routeReuseStrategy=xn),function(F,A){F.errorHandler&&(A.errorHandler=F.errorHandler),F.malformedUriErrorHandler&&(A.malformedUriErrorHandler=F.malformedUriErrorHandler),F.onSameUrlNavigation&&(A.onSameUrlNavigation=F.onSameUrlNavigation),F.paramsInheritanceStrategy&&(A.paramsInheritanceStrategy=F.paramsInheritanceStrategy),F.relativeLinkResolution&&(A.relativeLinkResolution=F.relativeLinkResolution),F.urlUpdateStrategy&&(A.urlUpdateStrategy=F.urlUpdateStrategy)}(me,$r),me.enableTracing&&$r.events.subscribe(Gn=>{var jr,wr;null===(jr=console.group)||void 0===jr||jr.call(console,`Router Event: ${Gn.constructor.name}`),console.log(Gn.toString()),console.log(Gn),null===(wr=console.groupEnd)||void 0===wr||wr.call(console)}),$r},deps:[bn,Pn,_.Ye,P.zs3,P.v3s,P.Sil,Xt,_a,[class{},new P.FiY],[q,new P.FiY]]},Pn,{provide:Tt,useFactory:function(F){return F.routerState.root},deps:[$n]},{provide:P.v3s,useClass:P.EAV},Eu,ss,kr,{provide:_a,useValue:{enableTracing:!1}}];function hi(){return new P.PXZ("Router",$n)}let fr=(()=>{class F{constructor(S,$){}static forRoot(S,$){return{ngModule:F,providers:[ao,fi(S),{provide:gr,useFactory:Iu,deps:[[$n,new P.FiY,new P.tp0]]},{provide:_a,useValue:$||{}},{provide:_.S$,useFactory:ei,deps:[_.lw,[new P.tBr(_.mr),new P.FiY],_a]},{provide:Ml,useFactory:Ko,deps:[$n,_.EM,_a]},{provide:Bi,useExisting:$&&$.preloadingStrategy?$.preloadingStrategy:ss},{provide:P.PXZ,multi:!0,useFactory:hi},[os,{provide:P.ip1,multi:!0,useFactory:Zr,deps:[os]},{provide:el,useFactory:Qo,deps:[os]},{provide:P.tb,multi:!0,useExisting:el}]]}}static forChild(S){return{ngModule:F,providers:[fi(S)]}}}return F.\u0275fac=function(S){return new(S||F)(P.LFG(gr,8),P.LFG($n,8))},F.\u0275mod=P.oAB({type:F}),F.\u0275inj=P.cJS({}),F})();function Ko(F,A,S){return S.scrollOffset&&A.setOffset(S.scrollOffset),new Ml(F,A,S)}function ei(F,A,S={}){return S.useHash?new _.Do(F,A):new _.b0(F,A)}function Iu(F){return"guarded"}function fi(F){return[{provide:P.deG,multi:!0,useValue:F},{provide:Xt,multi:!0,useValue:F}]}let os=(()=>{class F{constructor(S){this.injector=S,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Me.xQ}appInitializer(){return this.injector.get(_.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let $=null;const J=new Promise(me=>$=me),ye=this.injector.get($n),je=this.injector.get(_a);return"disabled"===je.initialNavigation?(ye.setUpLocationChangeListener(),$(!0)):"enabled"===je.initialNavigation||"enabledBlocking"===je.initialNavigation?(ye.hooks.afterPreactivation=()=>this.initNavigation?(0,Te.of)(null):(this.initNavigation=!0,$(!0),this.resultOfPreactivationDone),ye.initialNavigation()):$(!0),J})}bootstrapListener(S){const $=this.injector.get(_a),J=this.injector.get(Eu),ye=this.injector.get(Ml),je=this.injector.get($n),me=this.injector.get(P.z2F);S===me.components[0]&&(("enabledNonBlocking"===$.initialNavigation||void 0===$.initialNavigation)&&je.initialNavigation(),J.setUpPreloading(),ye.init(),je.resetRootComponentType(me.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return F.\u0275fac=function(S){return new(S||F)(P.LFG(P.zs3))},F.\u0275prov=P.Yz7({token:F,factory:F.\u0275fac}),F})();function Zr(F){return F.appInitializer.bind(F)}function Qo(F){return F.bootstrapListener.bind(F)}const el=new P.OlP("Router Initializer")},3607:(nn,ot,L)=>{"use strict";L.d(ot,{$:()=>Ba,A:()=>st,B:()=>Dt,G:()=>On,H:()=>ci,J:()=>gi,L:()=>Zn,M:()=>Ce,N:()=>H,P:()=>V,Q:()=>B,R:()=>Xo,T:()=>k,U:()=>an,V:()=>er,W:()=>Wr,X:()=>tr,Y:()=>so,Z:()=>fl,_:()=>sa,a:()=>A,a0:()=>mo,a1:()=>Ao,a2:()=>xo,a3:()=>Hs,a4:()=>Ci,a5:()=>oa,a6:()=>$a,a7:()=>Ua,a8:()=>w,a9:()=>N,aA:()=>lh,aB:()=>il,aC:()=>fa,aD:()=>Da,aE:()=>Tt,aI:()=>J,aL:()=>_t,aa:()=>yt,ab:()=>yn,ac:()=>Pn,af:()=>nr,ag:()=>ro,ah:()=>Ln,ak:()=>Go,al:()=>pl,an:()=>fr,ao:()=>va,ap:()=>z,aq:()=>Wn,ar:()=>mt,as:()=>pi,at:()=>Tn,au:()=>Qu,av:()=>Yu,aw:()=>_n,ax:()=>Ot,ay:()=>Un,az:()=>Ur,b:()=>lo,c:()=>Pr,d:()=>ui,e:()=>ar,f:()=>ml,g:()=>zu,h:()=>yl,i:()=>ii,j:()=>Ga,k:()=>Lc,l:()=>Nl,m:()=>pa,n:()=>wf,o:()=>Zt,q:()=>kr,r:()=>bu,s:()=>Ca,u:()=>wa,y:()=>_a});var _=L(8239),P=L(3854),re=L(8026),ke=L(5422);function ne(D,g){var v={};for(var x in D)Object.prototype.hasOwnProperty.call(D,x)&&g.indexOf(x)<0&&(v[x]=D[x]);if(null!=D&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(x=Object.getOwnPropertySymbols(D);ee<x.length;ee++)g.indexOf(x[ee])<0&&Object.prototype.propertyIsEnumerable.call(D,x[ee])&&(v[x[ee]]=D[x[ee]])}return v}var vt=L(3910);const Zt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},st={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Dt=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Bt=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Mt=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),gn=new ke.Yd("@firebase/auth");function kn(D,...g){gn.logLevel<=ke.in.ERROR&&gn.error(`Auth (${re.SDK_VERSION}): ${D}`,...g)}function Tn(D,...g){throw ur(D,...g)}function _n(D,...g){return ur(D,...g)}function Mn(D,g,v){const x=Object.assign(Object.assign({},Bt()),{[g]:v});return new P.LL("auth","Firebase",x).create(g,{appName:D.name})}function vr(D,g,v){if(!(g instanceof v))throw v.name!==g.constructor.name&&Tn(D,"argument-error"),Mn(D,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ur(D,...g){if("string"!=typeof D){const v=g[0],x=[...g.slice(1)];return x[0]&&(x[0].appName=D.name),D._errorFactory.create(v,...x)}return Mt.create(D,...g)}function Ot(D,g,...v){if(!D)throw ur(g,...v)}function En(D){const g="INTERNAL ASSERTION FAILED: "+D;throw kn(g),new Error(g)}function Wn(D,g){D||En(g)}const tn=new Map;function Un(D){Wn(D instanceof Function,"Expected a class definition");let g=tn.get(D);return g?(Wn(g instanceof D,"Instance stored in cache mismatched with class"),g):(g=new D,tn.set(D,g),g)}function lr(){var D;return"undefined"!=typeof self&&(null===(D=self.location)||void 0===D?void 0:D.href)||""}function Ar(){return"http:"===Dr()||"https:"===Dr()}function Dr(){var D;return"undefined"!=typeof self&&(null===(D=self.location)||void 0===D?void 0:D.protocol)||null}class sr{constructor(g,v){this.shortDelay=g,this.longDelay=v,Wn(v>g,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ar()||(0,P.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Qt(D,g){Wn(D.emulator,"Emulator should always be set here");const{url:v}=D.emulator;return g?`${v}${g.startsWith("/")?g.slice(1):g}`:v}class wt{static initialize(g,v,x){this.fetchImpl=g,v&&(this.headersImpl=v),x&&(this.responseImpl=x)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void En("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void En("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void En("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const xr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Or=new sr(3e4,6e4);function fn(D,g){return D.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:D.tenantId}):g}function Sn(D,g,v,x){return cr.apply(this,arguments)}function cr(){return(cr=(0,_.Z)(function*(D,g,v,x,ee={}){return dr(D,ee,(0,_.Z)(function*(){let he={},rt={};x&&("GET"===g?rt=x:he={body:JSON.stringify(x)});const Ut=(0,P.xO)(Object.assign({key:D.config.apiKey},rt)).slice(1),Nn=yield D._getAdditionalHeaders();return Nn["Content-Type"]="application/json",D.languageCode&&(Nn["X-Firebase-Locale"]=D.languageCode),wt.fetch()(Qr(D,D.config.apiHost,v,Ut),Object.assign({method:g,headers:Nn,referrerPolicy:"no-referrer"},he))}))})).apply(this,arguments)}function dr(D,g,v){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,_.Z)(function*(D,g,v){D._canInitEmulator=!1;const x=Object.assign(Object.assign({},xr),g);try{const ee=new dn(D),he=yield Promise.race([v(),ee.promise]);ee.clearNetworkTimeout();const rt=yield he.json();if("needConfirmation"in rt)throw Ze(D,"account-exists-with-different-credential",rt);if(he.ok&&!("errorMessage"in rt))return rt;{const Ut=he.ok?rt.errorMessage:rt.error.message,[Nn,vn]=Ut.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Nn)throw Ze(D,"credential-already-in-use",rt);if("EMAIL_EXISTS"===Nn)throw Ze(D,"email-already-in-use",rt);if("USER_DISABLED"===Nn)throw Ze(D,"user-disabled",rt);const ir=x[Nn]||Nn.toLowerCase().replace(/[_\s]+/g,"-");if(vn)throw Mn(D,ir,vn);Tn(D,ir)}}catch(ee){if(ee instanceof P.ZR)throw ee;Tn(D,"network-request-failed")}})).apply(this,arguments)}function Yn(D,g,v,x){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,_.Z)(function*(D,g,v,x,ee={}){const he=yield Sn(D,g,v,x,ee);return"mfaPendingCredential"in he&&Tn(D,"multi-factor-auth-required",{_serverResponse:he}),he})).apply(this,arguments)}function Qr(D,g,v,x){const ee=`${g}${v}?${x}`;return D.config.emulator?Qt(D.config,ee):`${D.config.apiScheme}://${ee}`}class dn{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((v,x)=>{this.timer=setTimeout(()=>x(_n(this.auth,"network-request-failed")),Or.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ze(D,g,v){const x={appName:D.name};v.email&&(x.email=v.email),v.phoneNumber&&(x.phoneNumber=v.phoneNumber);const ee=_n(D,g,x);return ee.customData._tokenResponse=v,ee}function Ae(){return(Ae=(0,_.Z)(function*(D,g){return Sn(D,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function nt(D,g){return It.apply(this,arguments)}function It(){return(It=(0,_.Z)(function*(D,g){return Sn(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Oe(D,g){return Le.apply(this,arguments)}function Le(){return(Le=(0,_.Z)(function*(D,g){return Sn(D,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function it(D){if(D)try{const g=new Date(Number(D));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function Pe(){return(Pe=(0,_.Z)(function*(D,g=!1){const v=(0,P.m9)(D),x=yield v.getIdToken(g),ee=Kt(x);Ot(ee&&ee.exp&&ee.auth_time&&ee.iat,v.auth,"internal-error");const he="object"==typeof ee.firebase?ee.firebase:void 0,rt=null==he?void 0:he.sign_in_provider;return{claims:ee,token:x,authTime:it(bt(ee.auth_time)),issuedAtTime:it(bt(ee.iat)),expirationTime:it(bt(ee.exp)),signInProvider:rt||null,signInSecondFactor:(null==he?void 0:he.sign_in_second_factor)||null}})).apply(this,arguments)}function bt(D){return 1e3*Number(D)}function Kt(D){var g;const[v,x,ee]=D.split(".");if(void 0===v||void 0===x||void 0===ee)return kn("JWT malformed, contained fewer than 3 sections"),null;try{const he=(0,P.tV)(x);return he?JSON.parse(he):(kn("Failed to decode base64 JWT payload"),null)}catch(he){return kn("Caught error parsing JWT payload as JSON",null===(g=he)||void 0===g?void 0:g.toString()),null}}function Dn(D,g){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,_.Z)(function*(D,g,v=!1){if(v)return g;try{return yield g}catch(x){throw x instanceof P.ZR&&pn(x)&&D.auth.currentUser===D&&(yield D.auth.signOut()),x}})).apply(this,arguments)}function pn({code:D}){return"auth/user-disabled"===D||"auth/user-token-expired"===D}class In{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var v;if(g){const x=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),x}{this.errorBackoff=3e4;const ee=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,ee)}}schedule(g=!1){var v=this;if(!this.isRunning)return;const x=this.getInterval(g);this.timerId=setTimeout((0,_.Z)(function*(){yield v.iteration()}),x)}iteration(){var g=this;return(0,_.Z)(function*(){var v;try{yield g.user.getIdToken(!0)}catch(x){return void("auth/network-request-failed"===(null===(v=x)||void 0===v?void 0:v.code)&&g.schedule(!0))}g.schedule()})()}}class mr{constructor(g,v){this.createdAt=g,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=it(this.lastLoginAt),this.creationTime=it(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function qt(D){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,_.Z)(function*(D){var g;const v=D.auth,x=yield D.getIdToken(),ee=yield Dn(D,Oe(v,{idToken:x}));Ot(null==ee?void 0:ee.users.length,v,"internal-error");const he=ee.users[0];D._notifyReloadListener(he);const rt=(null===(g=he.providerUserInfo)||void 0===g?void 0:g.length)?cn(he.providerUserInfo):[],Ut=Rn(D.providerData,rt),ir=!!D.isAnonymous&&!(D.email&&he.passwordHash||(null==Ut?void 0:Ut.length)),mi={uid:he.localId,displayName:he.displayName||null,photoURL:he.photoUrl||null,email:he.email||null,emailVerified:he.emailVerified||!1,phoneNumber:he.phoneNumber||null,tenantId:he.tenantId||null,providerData:Ut,metadata:new mr(he.createdAt,he.lastLoginAt),isAnonymous:ir};Object.assign(D,mi)})).apply(this,arguments)}function bn(){return(bn=(0,_.Z)(function*(D){const g=(0,P.m9)(D);yield qt(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Rn(D,g){return[...D.filter(x=>!g.some(ee=>ee.providerId===x.providerId)),...g]}function cn(D){return D.map(g=>{var{providerId:v}=g,x=ne(g,["providerId"]);return{providerId:v,uid:x.rawId||"",displayName:x.displayName||null,email:x.email||null,phoneNumber:x.phoneNumber||null,photoURL:x.photoUrl||null}})}function br(){return(br=(0,_.Z)(function*(D,g){const v=yield dr(D,{},(0,_.Z)(function*(){const x=(0,P.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:ee,apiKey:he}=D.config,rt=Qr(D,ee,"/v1/token",`key=${he}`),Ut=yield D._getAdditionalHeaders();return Ut["Content-Type"]="application/x-www-form-urlencoded",wt.fetch()(rt,{method:"POST",headers:Ut,body:x})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class Lr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Ot(g.idToken,"internal-error"),Ot(void 0!==g.idToken,"internal-error"),Ot(void 0!==g.refreshToken,"internal-error");const v="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function(D){const g=Kt(D);return Ot(g,"internal-error"),Ot(void 0!==g.exp,"internal-error"),Ot(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,v)}getToken(g,v=!1){var x=this;return(0,_.Z)(function*(){return Ot(!x.accessToken||x.refreshToken,g,"user-token-expired"),v||!x.accessToken||x.isExpired?x.refreshToken?(yield x.refresh(g,x.refreshToken),x.accessToken):null:x.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,v){var x=this;return(0,_.Z)(function*(){const{accessToken:ee,refreshToken:he,expiresIn:rt}=yield function(D,g){return br.apply(this,arguments)}(g,v);x.updateTokensAndExpiration(ee,he,Number(rt))})()}updateTokensAndExpiration(g,v,x){this.refreshToken=v||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*x}static fromJSON(g,v){const{refreshToken:x,accessToken:ee,expirationTime:he}=v,rt=new Lr;return x&&(Ot("string"==typeof x,"internal-error",{appName:g}),rt.refreshToken=x),ee&&(Ot("string"==typeof ee,"internal-error",{appName:g}),rt.accessToken=ee),he&&(Ot("number"==typeof he,"internal-error",{appName:g}),rt.expirationTime=he),rt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Lr,this.toJSON())}_performRefresh(){return En("not implemented")}}function Er(D,g){Ot("string"==typeof D||void 0===D,"internal-error",{appName:g})}class Yr{constructor(g){var{uid:v,auth:x,stsTokenManager:ee}=g,he=ne(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new In(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=x,this.stsTokenManager=ee,this.accessToken=ee.accessToken,this.displayName=he.displayName||null,this.email=he.email||null,this.emailVerified=he.emailVerified||!1,this.phoneNumber=he.phoneNumber||null,this.photoURL=he.photoURL||null,this.isAnonymous=he.isAnonymous||!1,this.tenantId=he.tenantId||null,this.providerData=he.providerData?[...he.providerData]:[],this.metadata=new mr(he.createdAt||void 0,he.lastLoginAt||void 0)}getIdToken(g){var v=this;return(0,_.Z)(function*(){const x=yield Dn(v,v.stsTokenManager.getToken(v.auth,g));return Ot(x,v.auth,"internal-error"),v.accessToken!==x&&(v.accessToken=x,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),x})()}getIdTokenResult(g){return function(D){return Pe.apply(this,arguments)}(this,g)}reload(){return function(D){return bn.apply(this,arguments)}(this)}_assign(g){this!==g&&(Ot(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(v=>Object.assign({},v)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Yr(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){Ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,v=!1){var x=this;return(0,_.Z)(function*(){let ee=!1;g.idToken&&g.idToken!==x.stsTokenManager.accessToken&&(x.stsTokenManager.updateFromServerResponse(g),ee=!0),v&&(yield qt(x)),yield x.auth._persistUserIfCurrent(x),ee&&x.auth._notifyListenersIfCurrent(x)})()}delete(){var g=this;return(0,_.Z)(function*(){const v=yield g.getIdToken();return yield Dn(g,function(D,g){return Ae.apply(this,arguments)}(g.auth,{idToken:v})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,v){var x,ee,he,rt,Ut,Nn,vn,ir;const mi=null!==(x=v.displayName)&&void 0!==x?x:void 0,Ni=null!==(ee=v.email)&&void 0!==ee?ee:void 0,io=null!==(he=v.phoneNumber)&&void 0!==he?he:void 0,Cl=null!==(rt=v.photoURL)&&void 0!==rt?rt:void 0,$c=null!==(Ut=v.tenantId)&&void 0!==Ut?Ut:void 0,qs=null!==(Nn=v._redirectEventId)&&void 0!==Nn?Nn:void 0,Ju=null!==(vn=v.createdAt)&&void 0!==vn?vn:void 0,iu=null!==(ir=v.lastLoginAt)&&void 0!==ir?ir:void 0,{uid:Wi,emailVerified:Io,isAnonymous:ec,providerData:tc,stsTokenManager:Ls}=v;Ot(Wi&&Ls,g,"internal-error");const wl=Lr.fromJSON(this.name,Ls);Ot("string"==typeof Wi,g,"internal-error"),Er(mi,g.name),Er(Ni,g.name),Ot("boolean"==typeof Io,g,"internal-error"),Ot("boolean"==typeof ec,g,"internal-error"),Er(io,g.name),Er(Cl,g.name),Er($c,g.name),Er(qs,g.name),Er(Ju,g.name),Er(iu,g.name);const su=new Yr({uid:Wi,auth:g,email:Ni,emailVerified:Io,displayName:mi,isAnonymous:ec,photoURL:Cl,phoneNumber:io,tenantId:$c,stsTokenManager:wl,createdAt:Ju,lastLoginAt:iu});return tc&&Array.isArray(tc)&&(su.providerData=tc.map(fh=>Object.assign({},fh))),qs&&(su._redirectEventId=qs),su}static _fromIdTokenResponse(g,v,x=!1){return(0,_.Z)(function*(){const ee=new Lr;ee.updateFromServerResponse(v);const he=new Yr({uid:v.localId,auth:g,stsTokenManager:ee,isAnonymous:x});return yield qt(he),he})()}}const Zn=(()=>{class D{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(v,x){var ee=this;return(0,_.Z)(function*(){ee.storage[v]=x})()}_get(v){var x=this;return(0,_.Z)(function*(){const ee=x.storage[v];return void 0===ee?null:ee})()}_remove(v){var x=this;return(0,_.Z)(function*(){delete x.storage[v]})()}_addListener(v,x){}_removeListener(v,x){}}return D.type="NONE",D})();function Ur(D,g,v){return`firebase:${D}:${g}:${v}`}class yi{constructor(g,v,x){this.persistence=g,this.auth=v,this.userKey=x;const{config:ee,name:he}=this.auth;this.fullUserKey=Ur(this.userKey,ee.apiKey,he),this.fullPersistenceKey=Ur("persistence",ee.apiKey,he),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,_.Z)(function*(){const v=yield g.persistence._get(g.fullUserKey);return v?Yr._fromJSON(g.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var v=this;return(0,_.Z)(function*(){if(v.persistence===g)return;const x=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=g,x?v.setCurrentUser(x):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,v,x="authUser"){return(0,_.Z)(function*(){if(!v.length)return new yi(Un(Zn),g,x);const ee=(yield Promise.all(v.map(function(){var vn=(0,_.Z)(function*(ir){if(yield ir._isAvailable())return ir});return function(ir){return vn.apply(this,arguments)}}()))).filter(vn=>vn);let he=ee[0]||Un(Zn);const rt=Ur(x,g.config.apiKey,g.name);let Ut=null;for(const vn of v)try{const ir=yield vn._get(rt);if(ir){const mi=Yr._fromJSON(g,ir);vn!==he&&(Ut=mi),he=vn;break}}catch(ir){}const Nn=ee.filter(vn=>vn._shouldAllowMigration);return he._shouldAllowMigration&&Nn.length?(he=Nn[0],Ut&&(yield he._set(rt,Ut.toJSON())),yield Promise.all(v.map(function(){var vn=(0,_.Z)(function*(ir){if(ir!==he)try{yield ir._remove(rt)}catch(mi){}});return function(ir){return vn.apply(this,arguments)}}())),new yi(he,g,x)):new yi(he,g,x)})()}}function Kr(D){const g=D.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Hr(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(ys(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Sr(g))return"Blackberry";if(xs(g))return"Webos";if(Br(g))return"Safari";if((g.includes("chrome/")||Yi(g))&&!g.includes("edge/"))return"Chrome";if(pi(g))return"Android";{const x=D.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==x?void 0:x.length))return x[1]}return"Other"}function ys(D=(0,P.z$)()){return/firefox\//i.test(D)}function Br(D=(0,P.z$)()){const g=D.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Yi(D=(0,P.z$)()){return/crios\//i.test(D)}function Hr(D=(0,P.z$)()){return/iemobile/i.test(D)}function pi(D=(0,P.z$)()){return/android/i.test(D)}function Sr(D=(0,P.z$)()){return/blackberry/i.test(D)}function xs(D=(0,P.z$)()){return/webos/i.test(D)}function mt(D=(0,P.z$)()){return/iphone|ipad|ipod/i.test(D)||/macintosh/i.test(D)&&/mobile/i.test(D)}function z(D=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(D)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(D)}function be(D=(0,P.z$)()){return mt(D)||pi(D)||xs(D)||Sr(D)||/windows phone/i.test(D)||Hr(D)}function Xe(D,g=[]){let v;switch(D){case"Browser":v=Kr((0,P.z$)());break;case"Worker":v=`${Kr((0,P.z$)())}-${D}`;break;default:v=D}const x=g.length?g.join(","):"FirebaseCore-web";return`${v}/JsCore/${re.SDK_VERSION}/${x}`}class Rt{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,v){const x=he=>new Promise((rt,Ut)=>{try{rt(g(he))}catch(Nn){Ut(Nn)}});x.onAbort=v,this.queue.push(x);const ee=this.queue.length-1;return()=>{this.queue[ee]=()=>Promise.resolve()}}runMiddleware(g){var v=this;return(0,_.Z)(function*(){var x;if(v.auth.currentUser===g)return;const ee=[];try{for(const he of v.queue)yield he(g),he.onAbort&&ee.push(he.onAbort)}catch(he){ee.reverse();for(const rt of ee)try{rt()}catch(Ut){}throw v.auth._errorFactory.create("login-blocked",{originalMessage:null===(x=he)||void 0===x?void 0:x.message})}})()}}class At{constructor(g,v,x){this.app=g,this.heartbeatServiceProvider=v,this.config=x,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new on(this),this.idTokenSubscription=new on(this),this.beforeStateQueue=new Rt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Mt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=x.sdkClientVersion}_initializeWithPersistence(g,v){var x=this;return v&&(this._popupRedirectResolver=Un(v)),this._initializationPromise=this.queue((0,_.Z)(function*(){var ee,he;if(!x._deleted&&(x.persistenceManager=yield yi.create(x,g),!x._deleted)){if(null===(ee=x._popupRedirectResolver)||void 0===ee?void 0:ee._shouldInitProactively)try{yield x._popupRedirectResolver._initialize(x)}catch(rt){}yield x.initializeCurrentUser(v),x.lastNotifiedUid=(null===(he=x.currentUser)||void 0===he?void 0:he.uid)||null,!x._deleted&&(x._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,_.Z)(function*(){if(g._deleted)return;const v=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||v){if(g.currentUser&&v&&g.currentUser.uid===v.uid)return g._currentUser._assign(v),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(v,!0)}})()}initializeCurrentUser(g){var v=this;return(0,_.Z)(function*(){var x;const ee=yield v.assertedPersistence.getCurrentUser();let he=ee,rt=!1;if(g&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const Ut=null===(x=v.redirectUser)||void 0===x?void 0:x._redirectEventId,Nn=null==he?void 0:he._redirectEventId,vn=yield v.tryRedirectSignIn(g);(!Ut||Ut===Nn)&&(null==vn?void 0:vn.user)&&(he=vn.user,rt=!0)}if(!he)return v.directlySetCurrentUser(null);if(!he._redirectEventId){if(rt)try{yield v.beforeStateQueue.runMiddleware(he)}catch(Ut){he=ee,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(Ut))}return he?v.reloadAndSetCurrentUserOrClear(he):v.directlySetCurrentUser(null)}return Ot(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===he._redirectEventId?v.directlySetCurrentUser(he):v.reloadAndSetCurrentUserOrClear(he)})()}tryRedirectSignIn(g){var v=this;return(0,_.Z)(function*(){let x=null;try{x=yield v._popupRedirectResolver._completeRedirectFn(v,g,!0)}catch(ee){yield v._setRedirectUser(null)}return x})()}reloadAndSetCurrentUserOrClear(g){var v=this;return(0,_.Z)(function*(){var x;try{yield qt(g)}catch(ee){if("auth/network-request-failed"!==(null===(x=ee)||void 0===x?void 0:x.code))return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const D=navigator;return D.languages&&D.languages[0]||D.language||null}()}_delete(){var g=this;return(0,_.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var v=this;return(0,_.Z)(function*(){const x=g?(0,P.m9)(g):null;return x&&Ot(x.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(x&&x._clone(v))})()}_updateCurrentUser(g,v=!1){var x=this;return(0,_.Z)(function*(){if(!x._deleted)return g&&Ot(x.tenantId===g.tenantId,x,"tenant-id-mismatch"),v||(yield x.beforeStateQueue.runMiddleware(g)),x.queue((0,_.Z)(function*(){yield x.directlySetCurrentUser(g),x.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,_.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var v=this;return this.queue((0,_.Z)(function*(){yield v.assertedPersistence.setPersistence(Un(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new P.LL("auth","Firebase",g())}onAuthStateChanged(g,v,x){return this.registerStateListener(this.authStateSubscription,g,v,x)}beforeAuthStateChanged(g,v){return this.beforeStateQueue.pushCallback(g,v)}onIdTokenChanged(g,v,x){return this.registerStateListener(this.idTokenSubscription,g,v,x)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,v){var x=this;return(0,_.Z)(function*(){const ee=yield x.getOrInitRedirectPersistenceManager(v);return null===g?ee.removeCurrentUser():ee.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var v=this;return(0,_.Z)(function*(){if(!v.redirectPersistenceManager){const x=g&&Un(g)||v._popupRedirectResolver;Ot(x,v,"argument-error"),v.redirectPersistenceManager=yield yi.create(v,[Un(x._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(g){var v=this;return(0,_.Z)(function*(){var x,ee;return v._isInitialized&&(yield v.queue((0,_.Z)(function*(){}))),(null===(x=v._currentUser)||void 0===x?void 0:x._redirectEventId)===g?v._currentUser:(null===(ee=v.redirectUser)||void 0===ee?void 0:ee._redirectEventId)===g?v.redirectUser:null})()}_persistUserIfCurrent(g){var v=this;return(0,_.Z)(function*(){if(g===v.currentUser)return v.queue((0,_.Z)(function*(){return v.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const x=null!==(v=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==x&&(this.lastNotifiedUid=x,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,v,x,ee){if(this._deleted)return()=>{};const he="function"==typeof v?v:v.next.bind(v),rt=this._isInitialized?Promise.resolve():this._initializationPromise;return Ot(rt,this,"internal-error"),rt.then(()=>he(this.currentUser)),"function"==typeof v?g.addObserver(v,x,ee):g.addObserver(v)}directlySetCurrentUser(g){var v=this;return(0,_.Z)(function*(){v.currentUser&&v.currentUser!==g&&v._currentUser._stopProactiveRefresh(),g&&v.isProactiveRefreshEnabled&&g._startProactiveRefresh(),v.currentUser=g,g?yield v.assertedPersistence.setCurrentUser(g):yield v.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return Ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Xe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,_.Z)(function*(){var v;const x={"X-Client-Version":g.clientVersion};g.app.options.appId&&(x["X-Firebase-gmpid"]=g.app.options.appId);const ee=yield null===(v=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();return ee&&(x["X-Firebase-Client"]=ee),x})()}}function Tt(D){return(0,P.m9)(D)}class on{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,P.ne)(v=>this.observer=v)}get next(){return Ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function On(D,g,v){const x=Tt(D);Ot(x._canInitEmulator,x,"emulator-config-failed"),Ot(/^https?:\/\//.test(g),x,"invalid-emulator-scheme");const ee=!!(null==v?void 0:v.disableWarnings),he=Vn(g),{host:rt,port:Ut}=function(D){const g=Vn(D),v=/(\/\/)?([^?#/]+)/.exec(D.substr(g.length));if(!v)return{host:"",port:null};const x=v[2].split("@").pop()||"",ee=/^(\[[^\]]+\])(:|$)/.exec(x);if(ee){const he=ee[1];return{host:he,port:Rr(x.substr(he.length+1))}}{const[he,rt]=x.split(":");return{host:he,port:Rr(rt)}}}(g);x.config.emulator={url:`${he}//${rt}${null===Ut?"":`:${Ut}`}/`},x.settings.appVerificationDisabledForTesting=!0,x.emulatorConfig=Object.freeze({host:rt,port:Ut,protocol:he.replace(":",""),options:Object.freeze({disableWarnings:ee})}),ee||function(){function D(){const g=document.createElement("p"),v=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",D):D())}()}function Vn(D){const g=D.indexOf(":");return g<0?"":D.substr(0,g+1)}function Rr(D){if(!D)return null;const g=Number(D);return isNaN(g)?null:g}class ci{constructor(g,v){this.providerId=g,this.signInMethod=v}toJSON(){return En("not implemented")}_getIdTokenResponse(g){return En("not implemented")}_linkToIdToken(g,v){return En("not implemented")}_getReauthenticationResolver(g){return En("not implemented")}}function Mi(D,g){return vi.apply(this,arguments)}function vi(){return(vi=(0,_.Z)(function*(D,g){return Sn(D,"POST","/v1/accounts:resetPassword",fn(D,g))})).apply(this,arguments)}function Rs(D,g){return rs.apply(this,arguments)}function rs(){return(rs=(0,_.Z)(function*(D,g){return Sn(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function _s(D,g){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,_.Z)(function*(D,g){return Sn(D,"POST","/v1/accounts:update",fn(D,g))})).apply(this,arguments)}function Ks(){return(Ks=(0,_.Z)(function*(D,g){return Yn(D,"POST","/v1/accounts:signInWithPassword",fn(D,g))})).apply(this,arguments)}function Vs(D,g){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,_.Z)(function*(D,g){return Sn(D,"POST","/v1/accounts:sendOobCode",fn(D,g))})).apply(this,arguments)}function To(D,g){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,_.Z)(function*(D,g){return Vs(D,g)})).apply(this,arguments)}function hl(D,g){return vs.apply(this,arguments)}function vs(){return(vs=(0,_.Z)(function*(D,g){return Vs(D,g)})).apply(this,arguments)}function Bs(D,g){return us.apply(this,arguments)}function us(){return(us=(0,_.Z)(function*(D,g){return Vs(D,g)})).apply(this,arguments)}function $s(D,g){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,_.Z)(function*(D,g){return Vs(D,g)})).apply(this,arguments)}function Qs(){return(Qs=(0,_.Z)(function*(D,g){return Yn(D,"POST","/v1/accounts:signInWithEmailLink",fn(D,g))})).apply(this,arguments)}function cs(){return(cs=(0,_.Z)(function*(D,g){return Yn(D,"POST","/v1/accounts:signInWithEmailLink",fn(D,g))})).apply(this,arguments)}class Xs extends ci{constructor(g,v,x,ee=null){super("password",x),this._email=g,this._password=v,this._tenantId=ee}static _fromEmailAndPassword(g,v){return new Xs(g,v,"password")}static _fromEmailAndCode(g,v,x=null){return new Xs(g,v,"emailLink",x)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g;if((null==v?void 0:v.email)&&(null==v?void 0:v.password)){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(g){var v=this;return(0,_.Z)(function*(){switch(v.signInMethod){case"password":return function(D,g){return Ks.apply(this,arguments)}(g,{returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function(D,g){return Qs.apply(this,arguments)}(g,{email:v._email,oobCode:v._password});default:Tn(g,"internal-error")}})()}_linkToIdToken(g,v){var x=this;return(0,_.Z)(function*(){switch(x.signInMethod){case"password":return Rs(g,{idToken:v,returnSecureToken:!0,email:x._email,password:x._password});case"emailLink":return function(D,g){return cs.apply(this,arguments)}(g,{idToken:v,email:x._email,oobCode:x._password});default:Tn(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function is(D,g){return ki.apply(this,arguments)}function ki(){return(ki=(0,_.Z)(function*(D,g){return Yn(D,"POST","/v1/accounts:signInWithIdp",fn(D,g))})).apply(this,arguments)}class gi extends ci{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const v=new gi(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(v.idToken=g.idToken),g.accessToken&&(v.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(v.nonce=g.nonce),g.pendingToken&&(v.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(v.accessToken=g.oauthToken,v.secret=g.oauthTokenSecret):Tn("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:x,signInMethod:ee}=v,he=ne(v,["providerId","signInMethod"]);if(!x||!ee)return null;const rt=new gi(x,ee);return rt.idToken=he.idToken||void 0,rt.accessToken=he.accessToken||void 0,rt.secret=he.secret,rt.nonce=he.nonce,rt.pendingToken=he.pendingToken||null,rt}_getIdTokenResponse(g){return is(g,this.buildRequest())}_linkToIdToken(g,v){const x=this.buildRequest();return x.idToken=v,is(g,x)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,is(g,v)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),g.postBody=(0,P.xO)(v)}return g}}function Is(D,g){return di.apply(this,arguments)}function di(){return(di=(0,_.Z)(function*(D,g){return Sn(D,"POST","/v1/accounts:sendVerificationCode",fn(D,g))})).apply(this,arguments)}function fo(){return(fo=(0,_.Z)(function*(D,g){return Yn(D,"POST","/v1/accounts:signInWithPhoneNumber",fn(D,g))})).apply(this,arguments)}function Zi(){return(Zi=(0,_.Z)(function*(D,g){const v=yield Yn(D,"POST","/v1/accounts:signInWithPhoneNumber",fn(D,g));if(v.temporaryProof)throw Ze(D,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const zi={USER_NOT_FOUND:"user-not-found"};function Wo(){return(Wo=(0,_.Z)(function*(D,g){return Yn(D,"POST","/v1/accounts:signInWithPhoneNumber",fn(D,Object.assign(Object.assign({},g),{operation:"REAUTH"})),zi)})).apply(this,arguments)}class _i extends ci{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,v){return new _i({verificationId:g,verificationCode:v})}static _fromTokenResponse(g,v){return new _i({phoneNumber:g,temporaryProof:v})}_getIdTokenResponse(g){return function(D,g){return fo.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,v){return function(D,g){return Zi.apply(this,arguments)}(g,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function(D,g){return Wo.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:v,verificationId:x,verificationCode:ee}=this.params;return g&&v?{temporaryProof:g,phoneNumber:v}:{sessionInfo:x,code:ee}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:v,verificationCode:x,phoneNumber:ee,temporaryProof:he}=g;return x||v||ee||he?new _i({verificationId:v,verificationCode:x,phoneNumber:ee,temporaryProof:he}):null}}class le{constructor(g){var v,x,ee,he,rt,Ut;const Nn=(0,P.zd)((0,P.pd)(g)),vn=null!==(v=Nn.apiKey)&&void 0!==v?v:null,ir=null!==(x=Nn.oobCode)&&void 0!==x?x:null,mi=function(D){switch(D){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(ee=Nn.mode)&&void 0!==ee?ee:null);Ot(vn&&ir&&mi,"argument-error"),this.apiKey=vn,this.operation=mi,this.code=ir,this.continueUrl=null!==(he=Nn.continueUrl)&&void 0!==he?he:null,this.languageCode=null!==(rt=Nn.languageCode)&&void 0!==rt?rt:null,this.tenantId=null!==(Ut=Nn.tenantId)&&void 0!==Ut?Ut:null}static parseLink(g){const v=function(D){const g=(0,P.zd)((0,P.pd)(D)).link,v=g?(0,P.zd)((0,P.pd)(g)).deep_link_id:null,x=(0,P.zd)((0,P.pd)(D)).deep_link_id;return(x?(0,P.zd)((0,P.pd)(x)).link:null)||x||v||g||D}(g);try{return new le(v)}catch(x){return null}}}let Ce=(()=>{class D{constructor(){this.providerId=D.PROVIDER_ID}static credential(v,x){return Xs._fromEmailAndPassword(v,x)}static credentialWithLink(v,x){const ee=le.parseLink(x);return Ot(ee,"argument-error"),Xs._fromEmailAndCode(v,ee.code,ee.tenantId)}}return D.PROVIDER_ID="password",D.EMAIL_PASSWORD_SIGN_IN_METHOD="password",D.EMAIL_LINK_SIGN_IN_METHOD="emailLink",D})();class ze{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class kt extends ze{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class an extends kt{static credentialFromJSON(g){const v="string"==typeof g?JSON.parse(g):g;return Ot("providerId"in v&&"signInMethod"in v,"argument-error"),gi._fromParams(v)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Ot(g.idToken||g.accessToken,"argument-error"),gi._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return an.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return an.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:x,oauthTokenSecret:ee,pendingToken:he,nonce:rt,providerId:Ut}=g;if(!x&&!ee&&!v&&!he||!Ut)return null;try{return new an(Ut)._credential({idToken:v,accessToken:x,nonce:rt,pendingToken:he})}catch(Nn){return null}}}let H=(()=>{class D extends kt{constructor(){super("facebook.com")}static credential(v){return gi._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return D.credential(v.oauthAccessToken)}catch(x){return null}}}return D.FACEBOOK_SIGN_IN_METHOD="facebook.com",D.PROVIDER_ID="facebook.com",D})(),B=(()=>{class D extends kt{constructor(){super("google.com"),this.addScope("profile")}static credential(v,x){return gi._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:x})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:x,oauthAccessToken:ee}=v;if(!x&&!ee)return null;try{return D.credential(x,ee)}catch(he){return null}}}return D.GOOGLE_SIGN_IN_METHOD="google.com",D.PROVIDER_ID="google.com",D})(),k=(()=>{class D extends kt{constructor(){super("github.com")}static credential(v){return gi._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return D.credential(v.oauthAccessToken)}catch(x){return null}}}return D.GITHUB_SIGN_IN_METHOD="github.com",D.PROVIDER_ID="github.com",D})();class _t extends ci{constructor(g,v){super(g,g),this.pendingToken=v}_getIdTokenResponse(g){return is(g,this.buildRequest())}_linkToIdToken(g,v){const x=this.buildRequest();return x.idToken=v,is(g,x)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,is(g,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:x,signInMethod:ee,pendingToken:he}=v;return x&&ee&&he&&x===ee?new _t(x,he):null}static _create(g,v){return new _t(g,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class er extends ze{constructor(g){Ot(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return er.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return er.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const v=_t.fromJSON(g);return Ot(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:v,providerId:x}=g;if(!v||!x)return null;try{return _t._create(x,v)}catch(ee){return null}}}let Wr=(()=>{class D extends kt{constructor(){super("twitter.com")}static credential(v,x){return gi._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:x})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:x,oauthTokenSecret:ee}=v;if(!x||!ee)return null;try{return D.credential(x,ee)}catch(he){return null}}}return D.TWITTER_SIGN_IN_METHOD="twitter.com",D.PROVIDER_ID="twitter.com",D})();function Ei(D,g){return li.apply(this,arguments)}function li(){return(li=(0,_.Z)(function*(D,g){return Yn(D,"POST","/v1/accounts:signUp",fn(D,g))})).apply(this,arguments)}class oi{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,v,x,ee=!1){return(0,_.Z)(function*(){const he=yield Yr._fromIdTokenResponse(g,x,ee),rt=Gr(x);return new oi({user:he,providerId:rt,_tokenResponse:x,operationType:v})})()}static _forOperation(g,v,x){return(0,_.Z)(function*(){yield g._updateTokensIfNecessary(x,!0);const ee=Gr(x);return new oi({user:g,providerId:ee,_tokenResponse:x,operationType:v})})()}}function Gr(D){return D.providerId?D.providerId:"phoneNumber"in D?"phone":null}function tr(D){return ia.apply(this,arguments)}function ia(){return(ia=(0,_.Z)(function*(D){var g;const v=Tt(D);if(yield v._initializationPromise,null===(g=v.currentUser)||void 0===g?void 0:g.isAnonymous)return new oi({user:v.currentUser,providerId:null,operationType:"signIn"});const x=yield Ei(v,{returnSecureToken:!0}),ee=yield oi._fromIdTokenResponse(v,"signIn",x,!0);return yield v._updateCurrentUser(ee.user),ee})).apply(this,arguments)}class Do extends P.ZR{constructor(g,v,x,ee){var he;super(v.code,v.message),this.operationType=x,this.user=ee,Object.setPrototypeOf(this,Do.prototype),this.customData={appName:g.name,tenantId:null!==(he=g.tenantId)&&void 0!==he?he:void 0,_serverResponse:v.customData._serverResponse,operationType:x}}static _fromErrorAndOperation(g,v,x,ee){return new Do(g,v,x,ee)}}function La(D,g,v,x){return("reauthenticate"===g?v._getReauthenticationResolver(D):v._getIdTokenResponse(D)).catch(he=>{throw"auth/multi-factor-auth-required"===he.code?Do._fromErrorAndOperation(D,he,g,x):he})}function Va(D){return new Set(D.map(({providerId:g})=>g).filter(g=>!!g))}function Go(D,g){return ya.apply(this,arguments)}function ya(){return(ya=(0,_.Z)(function*(D,g){const v=(0,P.m9)(D);yield Cr(!0,v,g);const{providerUserInfo:x}=yield nt(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[g]}),ee=Va(x||[]);return v.providerData=v.providerData.filter(he=>ee.has(he.providerId)),ee.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v})).apply(this,arguments)}function po(D,g){return rn.apply(this,arguments)}function rn(){return(rn=(0,_.Z)(function*(D,g,v=!1){const x=yield Dn(D,g._linkToIdToken(D.auth,yield D.getIdToken()),v);return oi._forOperation(D,"link",x)})).apply(this,arguments)}function Cr(D,g,v){return So.apply(this,arguments)}function So(){return(So=(0,_.Z)(function*(D,g,v){yield qt(g);const ee=!1===D?"provider-already-linked":"no-such-provider";Ot(Va(g.providerData).has(v)===D,g.auth,ee)})).apply(this,arguments)}function Ui(D,g){return Js.apply(this,arguments)}function Js(){return(Js=(0,_.Z)(function*(D,g,v=!1){var x;const{auth:ee}=D,he="reauthenticate";try{const rt=yield Dn(D,La(ee,he,g,D),v);Ot(rt.idToken,ee,"internal-error");const Ut=Kt(rt.idToken);Ot(Ut,ee,"internal-error");const{sub:Nn}=Ut;return Ot(D.uid===Nn,ee,"user-mismatch"),oi._forOperation(D,he,rt)}catch(rt){throw"auth/user-not-found"===(null===(x=rt)||void 0===x?void 0:x.code)&&Tn(ee,"user-mismatch"),rt}})).apply(this,arguments)}function bs(D,g){return Os.apply(this,arguments)}function Os(){return(Os=(0,_.Z)(function*(D,g,v=!1){const x="signIn",ee=yield La(D,x,g),he=yield oi._fromIdTokenResponse(D,x,ee);return v||(yield D._updateCurrentUser(he.user)),he})).apply(this,arguments)}function so(D,g){return zo.apply(this,arguments)}function zo(){return(zo=(0,_.Z)(function*(D,g){return bs(Tt(D),g)})).apply(this,arguments)}function fl(D,g){return eo.apply(this,arguments)}function eo(){return(eo=(0,_.Z)(function*(D,g){const v=(0,P.m9)(D);return yield Cr(!1,v,g.providerId),po(v,g)})).apply(this,arguments)}function sa(D,g){return go.apply(this,arguments)}function go(){return(go=(0,_.Z)(function*(D,g){return Ui((0,P.m9)(D),g)})).apply(this,arguments)}function Xi(D,g){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,_.Z)(function*(D,g){return Yn(D,"POST","/v1/accounts:signInWithCustomToken",fn(D,g))})).apply(this,arguments)}function Ba(D,g){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,_.Z)(function*(D,g){const v=Tt(D),x=yield Xi(v,{token:g,returnSecureToken:!0}),ee=yield oi._fromIdTokenResponse(v,"signIn",x);return yield v._updateCurrentUser(ee.user),ee})).apply(this,arguments)}class Vi{constructor(g,v){this.factorId=g,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(g,v){return"phoneInfo"in v?oo._fromServerResponse(g,v):Tn(g,"internal-error")}}class oo extends Vi{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,v){return new oo(v)}}function ds(D,g,v){var x;Ot((null===(x=v.url)||void 0===x?void 0:x.length)>0,D,"invalid-continue-uri"),Ot(void 0===v.dynamicLinkDomain||v.dynamicLinkDomain.length>0,D,"invalid-dynamic-link-domain"),g.continueUrl=v.url,g.dynamicLinkDomain=v.dynamicLinkDomain,g.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(Ot(v.iOS.bundleId.length>0,D,"missing-ios-bundle-id"),g.iOSBundleId=v.iOS.bundleId),v.android&&(Ot(v.android.packageName.length>0,D,"missing-android-pkg-name"),g.androidInstallApp=v.android.installApp,g.androidMinimumVersionCode=v.android.minimumVersion,g.androidPackageName=v.android.packageName)}function mo(D,g,v){return js.apply(this,arguments)}function js(){return(js=(0,_.Z)(function*(D,g,v){const x=(0,P.m9)(D),ee={requestType:"PASSWORD_RESET",email:g};v&&ds(x,ee,v),yield hl(x,ee)})).apply(this,arguments)}function Ao(D,g,v){return qo.apply(this,arguments)}function qo(){return(qo=(0,_.Z)(function*(D,g,v){yield Mi((0,P.m9)(D),{oobCode:g,newPassword:v})})).apply(this,arguments)}function xo(D,g){return to.apply(this,arguments)}function to(){return(to=(0,_.Z)(function*(D,g){yield _s((0,P.m9)(D),{oobCode:g})})).apply(this,arguments)}function Hs(D,g){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,_.Z)(function*(D,g){const v=(0,P.m9)(D),x=yield Mi(v,{oobCode:g}),ee=x.requestType;switch(Ot(ee,v,"internal-error"),ee){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ot(x.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ot(x.mfaInfo,v,"internal-error");default:Ot(x.email,v,"internal-error")}let he=null;return x.mfaInfo&&(he=Vi._fromServerResponse(Tt(v),x.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.newEmail:x.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.email:x.newEmail)||null,multiFactorInfo:he},operation:ee}})).apply(this,arguments)}function Ci(D,g){return no.apply(this,arguments)}function no(){return(no=(0,_.Z)(function*(D,g){const{data:v}=yield Hs((0,P.m9)(D),g);return v.email})).apply(this,arguments)}function oa(D,g,v){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,_.Z)(function*(D,g,v){const x=Tt(D),ee=yield Ei(x,{returnSecureToken:!0,email:g,password:v}),he=yield oi._fromIdTokenResponse(x,"signIn",ee);return yield x._updateCurrentUser(he.user),he})).apply(this,arguments)}function $a(D,g,v){return so((0,P.m9)(D),Ce.credential(g,v))}function Ua(D,g,v){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,_.Z)(function*(D,g,v){const x=(0,P.m9)(D),ee={requestType:"EMAIL_SIGNIN",email:g};Ot(v.handleCodeInApp,x,"argument-error"),v&&ds(x,ee,v),yield Bs(x,ee)})).apply(this,arguments)}function w(D,g){const v=le.parseLink(g);return"EMAIL_SIGNIN"===(null==v?void 0:v.operation)}function N(D,g,v){return T.apply(this,arguments)}function T(){return(T=(0,_.Z)(function*(D,g,v){const x=(0,P.m9)(D),ee=Ce.credentialWithLink(g,v||lr());return Ot(ee._tenantId===(x.tenantId||null),x,"tenant-id-mismatch"),so(x,ee)})).apply(this,arguments)}function q(D,g){return fe.apply(this,arguments)}function fe(){return(fe=(0,_.Z)(function*(D,g){return Sn(D,"POST","/v1/accounts:createAuthUri",fn(D,g))})).apply(this,arguments)}function yt(D,g){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,_.Z)(function*(D,g){const x={identifier:g,continueUri:Ar()?lr():"http://localhost"},{signinMethods:ee}=yield q((0,P.m9)(D),x);return ee||[]})).apply(this,arguments)}function yn(D,g){return yr.apply(this,arguments)}function yr(){return(yr=(0,_.Z)(function*(D,g){const v=(0,P.m9)(D),ee={requestType:"VERIFY_EMAIL",idToken:yield D.getIdToken()};g&&ds(v.auth,ee,g);const{email:he}=yield To(v.auth,ee);he!==D.email&&(yield D.reload())})).apply(this,arguments)}function Pn(D,g,v){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,_.Z)(function*(D,g,v){const x=(0,P.m9)(D),he={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield D.getIdToken(),newEmail:g};v&&ds(x.auth,he,v);const{email:rt}=yield $s(x.auth,he);rt!==D.email&&(yield D.reload())})).apply(this,arguments)}function wi(D,g){return zt.apply(this,arguments)}function zt(){return(zt=(0,_.Z)(function*(D,g){return Sn(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function nr(D,g){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,_.Z)(function*(D,{displayName:g,photoURL:v}){if(void 0===g&&void 0===v)return;const x=(0,P.m9)(D),he={idToken:yield x.getIdToken(),displayName:g,photoUrl:v,returnSecureToken:!0},rt=yield Dn(x,wi(x.auth,he));x.displayName=rt.displayName||null,x.photoURL=rt.photoUrl||null;const Ut=x.providerData.find(({providerId:Nn})=>"password"===Nn);Ut&&(Ut.displayName=x.displayName,Ut.photoURL=x.photoURL),yield x._updateTokensIfNecessary(rt)})).apply(this,arguments)}function ro(D,g){return $n((0,P.m9)(D),g,null)}function Ln(D,g){return $n((0,P.m9)(D),null,g)}function $n(D,g,v){return ai.apply(this,arguments)}function ai(){return(ai=(0,_.Z)(function*(D,g,v){const{auth:x}=D,he={idToken:yield D.getIdToken(),returnSecureToken:!0};g&&(he.email=g),v&&(he.password=v);const rt=yield Dn(D,Rs(x,he));yield D._updateTokensIfNecessary(rt,!0)})).apply(this,arguments)}class ft{constructor(g,v,x={}){this.isNewUser=g,this.providerId=v,this.profile=x}}class en extends ft{constructor(g,v,x,ee){super(g,v,x),this.username=ee}}class Ir extends ft{constructor(g,v){super(g,"facebook.com",v)}}class Rl extends en{constructor(g,v){super(g,"github.com",v,"string"==typeof(null==v?void 0:v.login)?null==v?void 0:v.login:null)}}class Rc extends ft{constructor(g,v){super(g,"google.com",v)}}class ks extends en{constructor(g,v,x){super(g,"twitter.com",v,x)}}function pl(D){const{user:g,_tokenResponse:v}=D;return g.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function(D){var g,v;if(!D)return null;const{providerId:x}=D,ee=D.rawUserInfo?JSON.parse(D.rawUserInfo):{},he=D.isNewUser||"identitytoolkit#SignupNewUserResponse"===D.kind;if(!x&&(null==D?void 0:D.idToken)){const rt=null===(v=null===(g=Kt(D.idToken))||void 0===g?void 0:g.firebase)||void 0===v?void 0:v.sign_in_provider;if(rt)return new ft(he,"anonymous"!==rt&&"custom"!==rt?rt:null)}if(!x)return null;switch(x){case"facebook.com":return new Ir(he,ee);case"github.com":return new Rl(he,ee);case"google.com":return new Rc(he,ee);case"twitter.com":return new ks(he,ee,D.screenName||null);case"custom":case"anonymous":return new ft(he,null);default:return new ft(he,x,ee)}}(v)}function kr(D,g,v,x){return(0,P.m9)(D).onIdTokenChanged(g,v,x)}function _a(D){return(0,P.m9)(D).signOut()}class ao{constructor(g,v,x){this.type=g,this.credential=v,this.auth=x}static _fromIdtoken(g,v){return new ao("enroll",g,v)}static _fromMfaPendingCredential(g){return new ao("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var v,x;if(null==g?void 0:g.multiFactorSession){if(null===(v=g.multiFactorSession)||void 0===v?void 0:v.pendingCredential)return ao._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(x=g.multiFactorSession)||void 0===x?void 0:x.idToken)return ao._fromIdtoken(g.multiFactorSession.idToken)}return null}}class hi{constructor(g,v,x){this.session=g,this.hints=v,this.signInResolver=x}static _fromError(g,v){const x=Tt(g),ee=v.customData._serverResponse,he=(ee.mfaInfo||[]).map(Ut=>Vi._fromServerResponse(x,Ut));Ot(ee.mfaPendingCredential,x,"internal-error");const rt=ao._fromMfaPendingCredential(ee.mfaPendingCredential);return new hi(rt,he,function(){var Ut=(0,_.Z)(function*(Nn){const vn=yield Nn._process(x,rt);delete ee.mfaInfo,delete ee.mfaPendingCredential;const ir=Object.assign(Object.assign({},ee),{idToken:vn.idToken,refreshToken:vn.refreshToken});switch(v.operationType){case"signIn":const mi=yield oi._fromIdTokenResponse(x,v.operationType,ir);return yield x._updateCurrentUser(mi.user),mi;case"reauthenticate":return Ot(v.user,x,"internal-error"),oi._forOperation(v.user,v.operationType,ir);default:Tn(x,"internal-error")}});return function(Nn){return Ut.apply(this,arguments)}}())}resolveSignIn(g){var v=this;return(0,_.Z)(function*(){return v.signInResolver(g)})()}}function fr(D,g){var v;const x=(0,P.m9)(D),ee=g;return Ot(g.customData.operationType,x,"argument-error"),Ot(null===(v=ee.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,x,"argument-error"),hi._fromError(x,ee)}function Ko(D,g){return Sn(D,"POST","/v2/accounts/mfaEnrollment:start",fn(D,g))}class fi{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(x=>Vi._fromServerResponse(g.auth,x)))})}static _fromUser(g){return new fi(g)}getSession(){var g=this;return(0,_.Z)(function*(){return ao._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,v){var x=this;return(0,_.Z)(function*(){const ee=g,he=yield x.getSession(),rt=yield Dn(x.user,ee._process(x.user.auth,he,v));return yield x.user._updateTokensIfNecessary(rt),x.user.reload()})()}unenroll(g){var v=this;return(0,_.Z)(function*(){var x;const ee="string"==typeof g?g:g.uid,he=yield v.user.getIdToken(),rt=yield Dn(v.user,function(D,g){return Sn(D,"POST","/v2/accounts/mfaEnrollment:withdraw",fn(D,g))}(v.user.auth,{idToken:he,mfaEnrollmentId:ee}));v.enrolledFactors=v.enrolledFactors.filter(({uid:Ut})=>Ut!==ee),yield v.user._updateTokensIfNecessary(rt);try{yield v.user.reload()}catch(Ut){if("auth/user-token-expired"!==(null===(x=Ut)||void 0===x?void 0:x.code))throw Ut}})()}}const An=new WeakMap;function va(D){const g=(0,P.m9)(D);return An.has(g)||An.set(g,fi._fromUser(g)),An.get(g)}const Zo="__sak";class os{constructor(g,v){this.storageRetriever=g,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(Zo,"1"),this.storage.removeItem(Zo),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,v){return this.storage.setItem(g,JSON.stringify(v)),Promise.resolve()}_get(g){const v=this.storage.getItem(g);return Promise.resolve(v?JSON.parse(v):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const lo=(()=>{class D extends os{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,x)=>this.onStorageEvent(v,x),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const D=(0,P.z$)();return Br(D)||mt(D)}()&&function(){try{return!(!window||window===window.top)}catch(D){return!1}}(),this.fallbackToPolling=be(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const x of Object.keys(this.listeners)){const ee=this.storage.getItem(x),he=this.localCache[x];ee!==he&&v(x,he,ee)}}onStorageEvent(v,x=!1){if(!v.key)return void this.forAllChangedKeys((Ut,Nn,vn)=>{this.notifyListeners(Ut,vn)});const ee=v.key;if(x?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ut=this.storage.getItem(ee);if(v.newValue!==Ut)null!==v.newValue?this.storage.setItem(ee,v.newValue):this.storage.removeItem(ee);else if(this.localCache[ee]===v.newValue&&!x)return}const he=()=>{const Ut=this.storage.getItem(ee);!x&&this.localCache[ee]===Ut||this.notifyListeners(ee,Ut)},rt=this.storage.getItem(ee);(0,P.w1)()&&10===document.documentMode&&rt!==v.newValue&&v.newValue!==v.oldValue?setTimeout(he,10):he()}notifyListeners(v,x){this.localCache[v]=x;const ee=this.listeners[v];if(ee)for(const he of Array.from(ee))he(x&&JSON.parse(x))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,x,ee)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:x,newValue:ee}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,x){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(x)}_removeListener(v,x){this.listeners[v]&&(this.listeners[v].delete(x),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,x){var ee=()=>super._set,he=this;return(0,_.Z)(function*(){yield ee().call(he,v,x),he.localCache[v]=JSON.stringify(x)})()}_get(v){var x=()=>super._get,ee=this;return(0,_.Z)(function*(){const he=yield x().call(ee,v);return ee.localCache[v]=JSON.stringify(he),he})()}_remove(v){var x=()=>super._remove,ee=this;return(0,_.Z)(function*(){yield x().call(ee,v),delete ee.localCache[v]})()}}return D.type="LOCAL",D})(),A=(()=>{class D extends os{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,x){}_removeListener(v,x){}}return D.type="SESSION",D})();let $=(()=>{class D{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const x=this.receivers.find(he=>he.isListeningto(v));if(x)return x;const ee=new D(v);return this.receivers.push(ee),ee}isListeningto(v){return this.eventTarget===v}handleEvent(v){var x=this;return(0,_.Z)(function*(){const ee=v,{eventId:he,eventType:rt,data:Ut}=ee.data,Nn=x.handlersMap[rt];if(!(null==Nn?void 0:Nn.size))return;ee.ports[0].postMessage({status:"ack",eventId:he,eventType:rt});const vn=Array.from(Nn).map(function(){var mi=(0,_.Z)(function*(Ni){return Ni(ee.origin,Ut)});return function(Ni){return mi.apply(this,arguments)}}()),ir=yield function(D){return Promise.all(D.map(function(){var g=(0,_.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(x){return{fulfilled:!1,reason:x}}});return function(v){return g.apply(this,arguments)}}()))}(vn);ee.ports[0].postMessage({status:"done",eventId:he,eventType:rt,response:ir})})()}_subscribe(v,x){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(x)}_unsubscribe(v,x){this.handlersMap[v]&&x&&this.handlersMap[v].delete(x),(!x||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return D.receivers=[],D})();function J(D="",g=10){let v="";for(let x=0;x<g;x++)v+=Math.floor(10*Math.random());return D+v}class ye{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,v,x=50){var ee=this;return(0,_.Z)(function*(){const he="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!he)throw new Error("connection_unavailable");let rt,Ut;return new Promise((Nn,vn)=>{const ir=J("",20);he.port1.start();const mi=setTimeout(()=>{vn(new Error("unsupported_event"))},x);Ut={messageChannel:he,onMessage(Ni){const io=Ni;if(io.data.eventId===ir)switch(io.data.status){case"ack":clearTimeout(mi),rt=setTimeout(()=>{vn(new Error("timeout"))},3e3);break;case"done":clearTimeout(rt),Nn(io.data.response);break;default:clearTimeout(mi),clearTimeout(rt),vn(new Error("invalid_response"))}}},ee.handlers.add(Ut),he.port1.addEventListener("message",Ut.onMessage),ee.target.postMessage({eventType:g,eventId:ir,data:v},[he.port2])}).finally(()=>{Ut&&ee.removeMessageHandler(Ut)})})()}}function je(){return window}function Wt(){return void 0!==je().WorkerGlobalScope&&"function"==typeof je().importScripts}function $r(){return($r=(0,_.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(D){return null}})).apply(this,arguments)}const wr="firebaseLocalStorageDb",uo="firebaseLocalStorage",Es="fbase_key";class Jr{constructor(g){this.request=g}toPromise(){return new Promise((g,v)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function aa(D,g){return D.transaction([uo],g?"readwrite":"readonly").objectStore(uo)}function Ia(){const D=indexedDB.open(wr,1);return new Promise((g,v)=>{D.addEventListener("error",()=>{v(D.error)}),D.addEventListener("upgradeneeded",()=>{const x=D.result;try{x.createObjectStore(uo,{keyPath:Es})}catch(ee){v(ee)}}),D.addEventListener("success",(0,_.Z)(function*(){const x=D.result;x.objectStoreNames.contains(uo)?g(x):(x.close(),yield function(){const D=indexedDB.deleteDatabase(wr);return new Jr(D).toPromise()}(),g(yield Ia()))}))})}function $o(D,g,v){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,_.Z)(function*(D,g,v){const x=aa(D,!0).put({[Es]:g,value:v});return new Jr(x).toPromise()})).apply(this,arguments)}function ba(){return(ba=(0,_.Z)(function*(D,g){const v=aa(D,!1).get(g),x=yield new Jr(v).toPromise();return void 0===x?null:x.value})).apply(this,arguments)}function rr(D,g){const v=aa(D,!0).delete(g);return new Jr(v).toPromise()}const ii=(()=>{class D{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,_.Z)(function*(){return v.db||(v.db=yield Ia()),v.db})()}_withRetries(v){var x=this;return(0,_.Z)(function*(){let ee=0;for(;;)try{const he=yield x._openDb();return yield v(he)}catch(he){if(ee++>3)throw he;x.db&&(x.db.close(),x.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,_.Z)(function*(){return Wt()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,_.Z)(function*(){v.receiver=$._getInstance(Wt()?self:null),v.receiver._subscribe("keyChanged",function(){var x=(0,_.Z)(function*(ee,he){return{keyProcessed:(yield v._poll()).includes(he.key)}});return function(ee,he){return x.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var x=(0,_.Z)(function*(ee,he){return["keyChanged"]});return function(ee,he){return x.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,_.Z)(function*(){var x,ee;if(v.activeServiceWorker=yield function(){return $r.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new ye(v.activeServiceWorker);const he=yield v.sender._send("ping",{},800);!he||(null===(x=he[0])||void 0===x?void 0:x.fulfilled)&&(null===(ee=he[0])||void 0===ee?void 0:ee.value.includes("keyChanged"))&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var x=this;return(0,_.Z)(function*(){if(x.sender&&x.activeServiceWorker&&function(){var D;return(null===(D=null==navigator?void 0:navigator.serviceWorker)||void 0===D?void 0:D.controller)||null}()===x.activeServiceWorker)try{yield x.sender._send("keyChanged",{key:v},x.serviceWorkerReceiverAvailable?800:50)}catch(ee){}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const v=yield Ia();return yield $o(v,Zo,"1"),yield rr(v,Zo),!0}catch(v){}return!1})()}_withPendingWrite(v){var x=this;return(0,_.Z)(function*(){x.pendingWrites++;try{yield v()}finally{x.pendingWrites--}})()}_set(v,x){var ee=this;return(0,_.Z)(function*(){return ee._withPendingWrite((0,_.Z)(function*(){return yield ee._withRetries(he=>$o(he,v,x)),ee.localCache[v]=x,ee.notifyServiceWorker(v)}))})()}_get(v){var x=this;return(0,_.Z)(function*(){const ee=yield x._withRetries(he=>function(D,g){return ba.apply(this,arguments)}(he,v));return x.localCache[v]=ee,ee})()}_remove(v){var x=this;return(0,_.Z)(function*(){return x._withPendingWrite((0,_.Z)(function*(){return yield x._withRetries(ee=>rr(ee,v)),delete x.localCache[v],x.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,_.Z)(function*(){const x=yield v._withRetries(rt=>{const Ut=aa(rt,!1).getAll();return new Jr(Ut).toPromise()});if(!x)return[];if(0!==v.pendingWrites)return[];const ee=[],he=new Set;for(const{fbase_key:rt,value:Ut}of x)he.add(rt),JSON.stringify(v.localCache[rt])!==JSON.stringify(Ut)&&(v.notifyListeners(rt,Ut),ee.push(rt));for(const rt of Object.keys(v.localCache))v.localCache[rt]&&!he.has(rt)&&(v.notifyListeners(rt,null),ee.push(rt));return ee})()}notifyListeners(v,x){this.localCache[v]=x;const ee=this.listeners[v];if(ee)for(const he of Array.from(ee))he(x)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,x){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(x)}_removeListener(v,x){this.listeners[v]&&(this.listeners[v].delete(x),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return D.type="LOCAL",D})();function Gu(D,g){return Sn(D,"POST","/v2/accounts/mfaSignIn:start",fn(D,g))}function yo(){return(yo=(0,_.Z)(function*(D){return(yield Sn(D,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function tl(D){return new Promise((g,v)=>{const x=document.createElement("script");x.setAttribute("src",D),x.onload=g,x.onerror=ee=>{const he=_n("internal-error");he.customData=ee,v(he)},x.type="text/javascript",x.charset="UTF-8",function(){var D,g;return null!==(g=null===(D=document.getElementsByTagName("head"))||void 0===D?void 0:D[0])&&void 0!==g?g:document}().appendChild(x)})}function es(D){return`__${D}${Math.floor(1e6*Math.random())}`}const Pl=1e12;class la{constructor(g){this.auth=g,this.counter=Pl,this._widgets=new Map}render(g,v){const x=this.counter;return this._widgets.set(x,new ls(g,this.auth.name,v||{})),this.counter++,x}reset(g){var v;const x=g||Pl;null===(v=this._widgets.get(x))||void 0===v||v.delete(),this._widgets.delete(x)}getResponse(g){var v;return(null===(v=this._widgets.get(g||Pl))||void 0===v?void 0:v.getResponse())||""}execute(g){var v=this;return(0,_.Z)(function*(){var x;return null===(x=v._widgets.get(g||Pl))||void 0===x||x.execute(),""})()}}class ls{constructor(g,v,x){this.params=x,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const ee="string"==typeof g?document.getElementById(g):g;Ot(ee,"argument-error",{appName:v}),this.container=ee,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(D){const g=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let x=0;x<50;x++)g.push(v.charAt(Math.floor(Math.random()*v.length)));return g.join("")}();const{callback:g,"expired-callback":v}=this.params;if(g)try{g(this.responseToken)}catch(x){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch(x){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Uo=es("rcb"),co=new sr(3e4,6e4);class ua{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(g=je().grecaptcha)||void 0===g?void 0:g.render)}load(g,v=""){return Ot((D=v).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(D),g,"argument-error"),this.shouldResolveImmediately(v)?Promise.resolve(je().grecaptcha):new Promise((x,ee)=>{const he=je().setTimeout(()=>{ee(_n(g,"network-request-failed"))},co.get());je()[Uo]=()=>{je().clearTimeout(he),delete je()[Uo];const Ut=je().grecaptcha;if(!Ut)return void ee(_n(g,"internal-error"));const Nn=Ut.render;Ut.render=(vn,ir)=>{const mi=Nn(vn,ir);return this.counter++,mi},this.hostLanguage=v,x(Ut)},tl(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:Uo,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(he),ee(_n(g,"internal-error"))})});var D}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var v;return!!(null===(v=je().grecaptcha)||void 0===v?void 0:v.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class gl{load(g){return(0,_.Z)(function*(){return new la(g)})()}clearedOneInstance(){}}const nl="recaptcha",fd={theme:"light",type:"image"};class Xo{constructor(g,v=Object.assign({},fd),x){this.parameters=v,this.type=nl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Tt(x),this.isInvisible="invisible"===this.parameters.size,Ot("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const ee="string"==typeof g?document.getElementById(g):g;Ot(ee,this.auth,"argument-error"),this.container=ee,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new gl:new ua,this.validateStartingState()}verify(){var g=this;return(0,_.Z)(function*(){g.assertNotDestroyed();const v=yield g.render(),x=g.getAssertedRecaptcha();return x.getResponse(v)||new Promise(he=>{const rt=Ut=>{!Ut||(g.tokenChangeListeners.delete(rt),he(Ut))};g.tokenChangeListeners.add(rt),g.isInvisible&&x.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){Ot(!this.parameters.sitekey,this.auth,"argument-error"),Ot(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ot("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return v=>{if(this.tokenChangeListeners.forEach(x=>x(v)),"function"==typeof g)g(v);else if("string"==typeof g){const x=je()[g];"function"==typeof x&&x(v)}}}assertNotDestroyed(){Ot(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,_.Z)(function*(){if(yield g.init(),!g.widgetId){let v=g.container;if(!g.isInvisible){const x=document.createElement("div");v.appendChild(x),v=x}g.widgetId=g.getAssertedRecaptcha().render(v,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,_.Z)(function*(){Ot(Ar()&&!Wt(),g.auth,"internal-error"),yield function(){let D=null;return new Promise(g=>{"complete"!==document.readyState?(D=()=>g(),window.addEventListener("load",D)):g()}).catch(g=>{throw D&&window.removeEventListener("load",D),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const v=yield function(D){return yo.apply(this,arguments)}(g.auth);Ot(v,g.auth,"internal-error"),g.parameters.sitekey=v})()}getAssertedRecaptcha(){return Ot(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ca{constructor(g,v){this.verificationId=g,this.onConfirmation=v}confirm(g){const v=_i._fromVerification(this.verificationId,g);return this.onConfirmation(v)}}function Ca(D,g,v){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,_.Z)(function*(D,g,v){const x=Tt(D),ee=yield kl(x,g,(0,P.m9)(v));return new ca(ee,he=>so(x,he))})).apply(this,arguments)}function Nl(D,g,v){return da.apply(this,arguments)}function da(){return(da=(0,_.Z)(function*(D,g,v){const x=(0,P.m9)(D);yield Cr(!1,x,"phone");const ee=yield kl(x.auth,g,(0,P.m9)(v));return new ca(ee,he=>fl(x,he))})).apply(this,arguments)}function bu(D,g,v){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,_.Z)(function*(D,g,v){const x=(0,P.m9)(D),ee=yield kl(x.auth,g,(0,P.m9)(v));return new ca(ee,he=>sa(x,he))})).apply(this,arguments)}function kl(D,g,v){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,_.Z)(function*(D,g,v){var x;const ee=yield v.verify();try{let he;if(Ot("string"==typeof ee,D,"argument-error"),Ot(v.type===nl,D,"argument-error"),he="string"==typeof g?{phoneNumber:g}:g,"session"in he){const rt=he.session;if("phoneNumber"in he)return Ot("enroll"===rt.type,D,"internal-error"),(yield Ko(D,{idToken:rt.credential,phoneEnrollmentInfo:{phoneNumber:he.phoneNumber,recaptchaToken:ee}})).phoneSessionInfo.sessionInfo;{Ot("signin"===rt.type,D,"internal-error");const Ut=(null===(x=he.multiFactorHint)||void 0===x?void 0:x.uid)||he.multiFactorUid;return Ot(Ut,D,"missing-multi-factor-info"),(yield Gu(D,{mfaPendingCredential:rt.credential,mfaEnrollmentId:Ut,phoneSignInInfo:{recaptchaToken:ee}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:rt}=yield Is(D,{phoneNumber:he.phoneNumber,recaptchaToken:ee});return rt}}finally{v._reset()}})).apply(this,arguments)}function wa(D,g){return rl.apply(this,arguments)}function rl(){return(rl=(0,_.Z)(function*(D,g){yield po((0,P.m9)(D),g)})).apply(this,arguments)}let V=(()=>{class D{constructor(v){this.providerId=D.PROVIDER_ID,this.auth=Tt(v)}verifyPhoneNumber(v,x){return kl(this.auth,v,(0,P.m9)(x))}static credential(v,x){return _i._fromVerification(v,x)}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:x,temporaryProof:ee}=v;return x&&ee?_i._fromTokenResponse(x,ee):null}}return D.PROVIDER_ID="phone",D.PHONE_SIGN_IN_METHOD="phone",D})();function Y(D,g){return g?Un(g):(Ot(D._popupRedirectResolver,D,"argument-error"),D._popupRedirectResolver)}class pe extends ci{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return is(g,this._buildIdpRequest())}_linkToIdToken(g,v){return is(g,this._buildIdpRequest(v))}_getReauthenticationResolver(g){return is(g,this._buildIdpRequest())}_buildIdpRequest(g){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(v.idToken=g),v}}function Be(D){return bs(D.auth,new pe(D),D.bypassAuthState)}function Et(D){const{auth:g,user:v}=D;return Ot(v,g,"internal-error"),Ui(v,new pe(D),D.bypassAuthState)}function Lt(D){return un.apply(this,arguments)}function un(){return(un=(0,_.Z)(function*(D){const{auth:g,user:v}=D;return Ot(v,g,"internal-error"),po(v,new pe(D),D.bypassAuthState)})).apply(this,arguments)}class wn{constructor(g,v,x,ee,he=!1){this.auth=g,this.resolver=x,this.user=ee,this.bypassAuthState=he,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var g=this;return new Promise(function(){var v=(0,_.Z)(function*(x,ee){g.pendingPromise={resolve:x,reject:ee};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(he){g.reject(he)}});return function(x,ee){return v.apply(this,arguments)}}())}onAuthEvent(g){var v=this;return(0,_.Z)(function*(){const{urlResponse:x,sessionId:ee,postBody:he,tenantId:rt,error:Ut,type:Nn}=g;if(Ut)return void v.reject(Ut);const vn={auth:v.auth,requestUri:x,sessionId:ee,tenantId:rt||void 0,postBody:he||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(Nn)(vn))}catch(ir){v.reject(ir)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Be;case"linkViaPopup":case"linkViaRedirect":return Lt;case"reauthViaPopup":case"reauthViaRedirect":return Et;default:Tn(this.auth,"internal-error")}}resolve(g){Wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const or=new sr(2e3,1e4);function Pr(D,g,v){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,_.Z)(function*(D,g,v){const x=Tt(D);vr(D,g,ze);const ee=Y(x,v);return new vo(x,"signInViaPopup",g,ee).executeNotNull()})).apply(this,arguments)}function ar(D,g,v){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,_.Z)(function*(D,g,v){const x=(0,P.m9)(D);vr(x.auth,g,ze);const ee=Y(x.auth,v);return new vo(x.auth,"reauthViaPopup",g,ee,x).executeNotNull()})).apply(this,arguments)}function ui(D,g,v){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,_.Z)(function*(D,g,v){const x=(0,P.m9)(D);vr(x.auth,g,ze);const ee=Y(x.auth,v);return new vo(x.auth,"linkViaPopup",g,ee,x).executeNotNull()})).apply(this,arguments)}let vo=(()=>{class D extends wn{constructor(v,x,ee,he,rt){super(v,x,he,rt),this.provider=ee,this.authWindow=null,this.pollId=null,D.currentPopupAction&&D.currentPopupAction.cancel(),D.currentPopupAction=this}executeNotNull(){var v=this;return(0,_.Z)(function*(){const x=yield v.execute();return Ot(x,v.auth,"internal-error"),x})()}onExecution(){var v=this;return(0,_.Z)(function*(){Wn(1===v.filter.length,"Popup operations only handle one event");const x=J();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],x),v.authWindow.associatedEvent=x,v.resolver._originValidation(v.auth).catch(ee=>{v.reject(ee)}),v.resolver._isIframeWebStorageSupported(v.auth,ee=>{ee||v.reject(_n(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(_n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,D.currentPopupAction=null}pollUserCancellation(){const v=()=>{var x,ee;this.pollId=(null===(ee=null===(x=this.authWindow)||void 0===x?void 0:x.window)||void 0===ee?void 0:ee.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(_n(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(v,or.get())};v()}}return D.currentPopupAction=null,D})();const ea=new Map;class ha extends wn{constructor(g,v,x=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,x),this.eventId=null}execute(){var g=()=>super.execute,v=this;return(0,_.Z)(function*(){let x=ea.get(v.auth._key());if(!x){try{const he=(yield function(D,g){return Ta.apply(this,arguments)}(v.resolver,v.auth))?yield g().call(v):null;x=()=>Promise.resolve(he)}catch(ee){x=()=>Promise.reject(ee)}ea.set(v.auth._key(),x)}return v.bypassAuthState||ea.set(v.auth._key(),()=>Promise.resolve(null)),x()})()}onAuthEvent(g){var v=()=>super.onAuthEvent,x=this;return(0,_.Z)(function*(){if("signInViaRedirect"===g.type)return v().call(x,g);if("unknown"!==g.type){if(g.eventId){const ee=yield x.auth._redirectUserForId(g.eventId);if(ee)return x.user=ee,v().call(x,g);x.resolve(null)}}else x.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function Ta(){return(Ta=(0,_.Z)(function*(D,g){const v=Aa(g),x=Sa(D);if(!(yield x._isAvailable()))return!1;const ee="true"===(yield x._get(v));return yield x._remove(v),ee})).apply(this,arguments)}function ta(D,g){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,_.Z)(function*(D,g){return Sa(D)._set(Aa(g),"true")})).apply(this,arguments)}function Da(){ea.clear()}function fa(D,g){ea.set(D._key(),g)}function Sa(D){return Un(D._redirectPersistence)}function Aa(D){return Ur("pendingRedirect",D.config.apiKey,D.name)}function ml(D,g,v){return function(D,g,v){return zs.apply(this,arguments)}(D,g,v)}function zs(){return(zs=(0,_.Z)(function*(D,g,v){const x=Tt(D);vr(D,g,ze);const ee=Y(x,v);return yield ta(ee,x),ee._openRedirect(x,g,"signInViaRedirect")})).apply(this,arguments)}function yl(D,g,v){return function(D,g,v){return wu.apply(this,arguments)}(D,g,v)}function wu(){return(wu=(0,_.Z)(function*(D,g,v){const x=(0,P.m9)(D);vr(x.auth,g,ze);const ee=Y(x.auth,v);yield ta(ee,x.auth);const he=yield Du(x);return ee._openRedirect(x.auth,g,"reauthViaRedirect",he)})).apply(this,arguments)}function zu(D,g,v){return function(D,g,v){return Ts.apply(this,arguments)}(D,g,v)}function Ts(){return(Ts=(0,_.Z)(function*(D,g,v){const x=(0,P.m9)(D);vr(x.auth,g,ze);const ee=Y(x.auth,v);yield Cr(!1,x,g.providerId),yield ta(ee,x.auth);const he=yield Du(x);return ee._openRedirect(x.auth,g,"linkViaRedirect",he)})).apply(this,arguments)}function Ga(D,g){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,_.Z)(function*(D,g){return yield Tt(D)._initializationPromise,il(D,g,!1)})).apply(this,arguments)}function il(D,g){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,_.Z)(function*(D,g,v=!1){const x=Tt(D),ee=Y(x,g),rt=yield new ha(x,ee,v).execute();return rt&&!v&&(delete rt.user._redirectEventId,yield x._persistUserIfCurrent(rt.user),yield x._setRedirectUser(null,g)),rt})).apply(this,arguments)}function Du(D){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,_.Z)(function*(D){const g=J(`${D.uid}:::`);return D._redirectEventId=g,yield D.auth._setRedirectUser(D),yield D.auth._persistUserIfCurrent(D),g})).apply(this,arguments)}class lh{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let v=!1;return this.consumers.forEach(x=>{this.isEventForConsumer(g,x)&&(v=!0,this.sendToConsumer(g,x),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function(D){switch(D.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qu(D);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=g,v=!0)),v}sendToConsumer(g,v){var x;if(g.error&&!qu(g)){const ee=(null===(x=g.error.code)||void 0===x?void 0:x.split("auth/")[1])||"internal-error";v.onError(_n(this.auth,ee))}else v.onAuthEvent(g)}isEventForConsumer(g,v){const x=null===v.eventId||!!g.eventId&&g.eventId===v.eventId;return v.filter.includes(g.type)&&x}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Su(g))}saveEventToCache(g){this.cachedEventUids.add(Su(g)),this.lastProcessedEventTime=Date.now()}}function Su(D){return[D.type,D.eventId,D.sessionId,D.tenantId].filter(g=>g).join("-")}function qu({type:D,error:g}){return"unknown"===D&&"auth/no-auth-event"===(null==g?void 0:g.code)}function Yu(D){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,_.Z)(function*(D,g={}){return Sn(D,"GET","/v1/projects",g)})).apply(this,arguments)}const If=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ku=/^https?/;function sl(){return(sl=(0,_.Z)(function*(D){if(D.config.emulator)return;const{authorizedDomains:g}=yield Yu(D);for(const v of g)try{if(pd(v))return}catch(x){}Tn(D,"unauthorized-domain")})).apply(this,arguments)}function pd(D){const g=lr(),{protocol:v,hostname:x}=new URL(g);if(D.startsWith("chrome-extension://")){const rt=new URL(D);return""===rt.hostname&&""===x?"chrome-extension:"===v&&D.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===v&&rt.hostname===x}if(!Ku.test(v))return!1;if(If.test(D))return x===D;const ee=D.replace(/\./g,"\\.");return new RegExp("^(.+\\."+ee+"|"+ee+")$","i").test(x)}const Bl=new sr(3e4,6e4);function _l(){const D=je().___jsl;if(null==D?void 0:D.H)for(const g of Object.keys(D.H))if(D.H[g].r=D.H[g].r||[],D.H[g].L=D.H[g].L||[],D.H[g].r=[...D.H[g].L],D.CP)for(let v=0;v<D.CP.length;v++)D.CP[v]=null}let eu=null;function gd(D){return eu=eu||function(D){return new Promise((g,v)=>{var x,ee,he;function rt(){_l(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{_l(),v(_n(D,"network-request-failed"))},timeout:Bl.get()})}if(null===(ee=null===(x=je().gapi)||void 0===x?void 0:x.iframes)||void 0===ee?void 0:ee.Iframe)g(gapi.iframes.getContext());else{if(!(null===(he=je().gapi)||void 0===he?void 0:he.load)){const Ut=es("iframefcb");return je()[Ut]=()=>{gapi.load?rt():v(_n(D,"network-request-failed"))},tl(`https://apis.google.com/js/api.js?onload=${Ut}`).catch(Nn=>v(Nn))}rt()}}).catch(g=>{throw eu=null,g})}(D),eu}const $l=new sr(5e3,15e3),Pi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Au=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Nc(D){const g=D.config;Ot(g.authDomain,D,"auth-domain-config-required");const v=g.emulator?Qt(g,"emulator/auth/iframe"):`https://${D.config.authDomain}/__/auth/iframe`,x={apiKey:g.apiKey,appName:D.name,v:re.SDK_VERSION},ee=Au.get(D.config.apiHost);ee&&(x.eid=ee);const he=D._getFrameworks();return he.length&&(x.fw=he.join(",")),`${v}?${(0,P.xO)(x).slice(1)}`}function kc(){return kc=(0,_.Z)(function*(D){const g=yield gd(D),v=je().gapi;return Ot(v,D,"internal-error"),g.open({where:document.body,url:Nc(D),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Pi,dontclear:!0},x=>new Promise(function(){var ee=(0,_.Z)(function*(he,rt){yield x.restyle({setHideOnLeave:!1});const Ut=_n(D,"network-request-failed"),Nn=je().setTimeout(()=>{rt(Ut)},$l.get());function vn(){je().clearTimeout(Nn),he(x)}x.ping(vn).then(vn,()=>{rt(Ut)})});return function(he,rt){return ee.apply(this,arguments)}}()))}),kc.apply(this,arguments)}const tu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Fc{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function Qu(D,g,v,x,ee,he){Ot(D.config.authDomain,D,"auth-domain-config-required"),Ot(D.config.apiKey,D,"invalid-api-key");const rt={apiKey:D.config.apiKey,appName:D.name,authType:v,redirectUrl:x,v:re.SDK_VERSION,eventId:ee};if(g instanceof ze){g.setDefaultLanguage(D.languageCode),rt.providerId=g.providerId||"",(0,P.xb)(g.getCustomParameters())||(rt.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Nn,vn]of Object.entries(he||{}))rt[Nn]=vn}if(g instanceof kt){const Nn=g.getScopes().filter(vn=>""!==vn);Nn.length>0&&(rt.scopes=Nn.join(","))}D.tenantId&&(rt.tid=D.tenantId);const Ut=rt;for(const Nn of Object.keys(Ut))void 0===Ut[Nn]&&delete Ut[Nn];return`${function({config:D}){return D.emulator?Qt(D,"emulator/auth/handler"):`https://${D.authDomain}/__/auth/handler`}(D)}?${(0,P.xO)(Ut).slice(1)}`}const ti="webStorageSupport",Lc=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=A,this._completeRedirectFn=il,this._overrideRedirectResult=fa}_openPopup(g,v,x,ee){var he=this;return(0,_.Z)(function*(){var rt;Wn(null===(rt=he.eventManagers[g._key()])||void 0===rt?void 0:rt.manager,"_initialize() not called before _openPopup()");const Ut=Qu(g,v,x,lr(),ee);return function(D,g,v,x=500,ee=600){const he=Math.max((window.screen.availHeight-ee)/2,0).toString(),rt=Math.max((window.screen.availWidth-x)/2,0).toString();let Ut="";const Nn=Object.assign(Object.assign({},tu),{width:x.toString(),height:ee.toString(),top:he,left:rt}),vn=(0,P.z$)().toLowerCase();v&&(Ut=Yi(vn)?"_blank":v),ys(vn)&&(g=g||"http://localhost",Nn.scrollbars="yes");const ir=Object.entries(Nn).reduce((Ni,[io,Cl])=>`${Ni}${io}=${Cl},`,"");if(function(D=(0,P.z$)()){var g;return mt(D)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(vn)&&"_self"!==Ut)return function(D,g){const v=document.createElement("a");v.href=D,v.target=g;const x=document.createEvent("MouseEvent");x.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(x)}(g||"",Ut),new Fc(null);const mi=window.open(g||"",Ut,ir);Ot(mi,D,"popup-blocked");try{mi.focus()}catch(Ni){}return new Fc(mi)}(g,Ut,J())})()}_openRedirect(g,v,x,ee){var he=this;return(0,_.Z)(function*(){return yield he._originValidation(g),D=Qu(g,v,x,lr(),ee),je().location.href=D,new Promise(()=>{});var D})()}_initialize(g){const v=g._key();if(this.eventManagers[v]){const{manager:ee,promise:he}=this.eventManagers[v];return ee?Promise.resolve(ee):(Wn(he,"If manager is not set, promise should be"),he)}const x=this.initAndGetManager(g);return this.eventManagers[v]={promise:x},x.catch(()=>{delete this.eventManagers[v]}),x}initAndGetManager(g){var v=this;return(0,_.Z)(function*(){const x=yield function(D){return kc.apply(this,arguments)}(g),ee=new lh(g);return x.register("authEvent",he=>(Ot(null==he?void 0:he.authEvent,g,"invalid-auth-event"),{status:ee.onEvent(he.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[g._key()]={manager:ee},v.iframes[g._key()]=x,ee})()}_isIframeWebStorageSupported(g,v){this.iframes[g._key()].send(ti,{type:ti},ee=>{var he;const rt=null===(he=null==ee?void 0:ee[0])||void 0===he?void 0:he[ti];void 0!==rt&&v(!!rt),Tn(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const v=g._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function(D){return sl.apply(this,arguments)}(g)),this.originValidationPromises[v]}get _shouldInitProactively(){return be()||Br()||mt()}};class ch extends class{constructor(g){this.factorId=g}_process(g,v,x){switch(v.type){case"enroll":return this._finalizeEnroll(g,v.credential,x);case"signin":return this._finalizeSignIn(g,v.credential);default:return En("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new ch(g)}_finalizeEnroll(g,v,x){return function(D,g){return Sn(D,"POST","/v2/accounts/mfaEnrollment:finalize",fn(D,g))}(g,{idToken:v,displayName:x,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,v){return function(D,g){return Sn(D,"POST","/v2/accounts/mfaSignIn:finalize",fn(D,g))}(g,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let pa=(()=>{class D{constructor(){}static assertion(v){return ch._fromCredential(v)}}return D.FACTOR_ID="phone",D})();var dh="@firebase/auth",bl="0.20.10";class Vc{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var v=this;return(0,_.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const v=this.auth.onIdTokenChanged(x=>{var ee;g((null===(ee=x)||void 0===ee?void 0:ee.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,v),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const v=this.internalListeners.get(g);!v||(this.internalListeners.delete(g),v(),this.updateProactiveRefresh())}assertAuthConfigured(){Ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const vd=(0,P.Pz)("authIdTokenMaxAge")||300;let Xu=null;const zr=D=>function(){var g=(0,_.Z)(function*(v){const x=v&&(yield v.getIdTokenResult()),ee=x&&((new Date).getTime()-Date.parse(x.issuedAtTime))/1e3;if(ee&&ee>vd)return;const he=null==x?void 0:x.token;Xu!==he&&(Xu=he,yield fetch(D,{method:he?"POST":"DELETE",headers:he?{Authorization:`Bearer ${he}`}:{}}))});return function(v){return g.apply(this,arguments)}}();function wf(D=(0,re.getApp)()){const g=(0,re._getProvider)(D,"auth");if(g.isInitialized())return g.getImmediate();const v=function(D,g){const v=(0,re._getProvider)(D,"auth");if(v.isInitialized()){const ee=v.getImmediate(),he=v.getOptions();if((0,P.vZ)(he,null!=g?g:{}))return ee;Tn(ee,"already-initialized")}return v.initialize({options:g})}(D,{popupRedirectResolver:Lc,persistence:[ii,lo,A]}),x=(0,P.Pz)("authTokenSyncURL");if(x){const he=zr(x);(function(D,g,v){(0,P.m9)(D).beforeAuthStateChanged(g,v)})(v,he,()=>he(v.currentUser)),kr(v,rt=>he(rt))}const ee=(0,P.q4)("auth");return ee&&On(v,`http://${ee}`),v}var D;D="Browser",(0,re._registerComponent)(new vt.wA("auth",(g,{options:v})=>{const x=g.getProvider("app").getImmediate(),ee=g.getProvider("heartbeat"),{apiKey:he,authDomain:rt}=x.options;return((Ut,Nn)=>{Ot(he&&!he.includes(":"),"invalid-api-key",{appName:Ut.name}),Ot(!(null==rt?void 0:rt.includes(":")),"argument-error",{appName:Ut.name});const vn={apiKey:he,authDomain:rt,clientPlatform:D,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xe(D)},ir=new At(Ut,Nn,vn);return function(D,g){const v=(null==g?void 0:g.persistence)||[],x=(Array.isArray(v)?v:[v]).map(Un);(null==g?void 0:g.errorMap)&&D._updateErrorMap(g.errorMap),D._initializeWithPersistence(x,null==g?void 0:g.popupRedirectResolver)}(ir,v),ir})(x,ee)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,v,x)=>{g.getProvider("auth-internal").initialize()})),(0,re._registerComponent)(new vt.wA("auth-internal",g=>{const v=Tt(g.getProvider("auth").getImmediate());return new Vc(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,re.registerVersion)(dh,bl,void 0),(0,re.registerVersion)(dh,bl,"esm2017")},1304:(nn,ot,L)=>{"use strict";L.d(ot,{u7:()=>Cp,Jj:()=>th,IX:()=>z_,my:()=>xt,xU:()=>ud,Lz:()=>nh,WA:()=>en,F8:()=>Rg,$q:()=>mf,W:()=>Cc,EK:()=>hi,PU:()=>zm,l7:()=>la,Ky:()=>An,Xb:()=>fi,Cf:()=>I,K9:()=>ai,Me:()=>Gu,yq:()=>Ji,Wi:()=>d,ET:()=>o_,Ab:()=>_f,vr:()=>c_,Fc:()=>K_,hJ:()=>Hn,B$:()=>pr,at:()=>Je,oe:()=>s_,AK:()=>cv,TF:()=>Q_,JU:()=>bi,ST:()=>S0,fH:()=>Y_,Ix:()=>Z_,Wu:()=>Ky,Lx:()=>Yy,qY:()=>ho,GL:()=>yf,QT:()=>Jy,kl:()=>Hm,Xk:()=>Wm,PL:()=>e_,UQ:()=>t_,zN:()=>n_,ad:()=>q_,nP:()=>dv,b9:()=>ov,vh:()=>$m,Pb:()=>X_,L$:()=>By,cf:()=>a_,sc:()=>O0,Xo:()=>Bm,IO:()=>sv,iE:()=>ll,Eo:()=>No,i3:()=>l_,Bt:()=>u_,pl:()=>r_,Ub:()=>wi,qK:()=>av,TQ:()=>M0,e0:()=>zy,r7:()=>i_,Mx:()=>Vy,ar:()=>bp});var ne,_=L(8239),P=L(8026),re=L(3910),ke=L(5422),ae=L(3854),Q="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Z={},we=we||{},se=Q||self;function ge(){}function Ee(s){var e=typeof s;return"array"==(e="object"!=e?e:s?Array.isArray(s)?"array":e:"null")||"object"==e&&"number"==typeof s.length}function _e(s){var e=typeof s;return"object"==e&&null!=s||"function"==e}var ut="closure_uid_"+(1e9*Math.random()>>>0),Te=0;function Ke(s,e,r){return s.call.apply(s.bind,arguments)}function $e(s,e,r){if(!s)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var h=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(h,a),s.apply(e,h)}}return function(){return s.apply(e,arguments)}}function qe(s,e,r){return(qe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ke:$e).apply(null,arguments)}function Ie(s,e){var r=Array.prototype.slice.call(arguments,1);return function(){var a=r.slice();return a.push.apply(a,arguments),s.apply(this,a)}}function Me(s,e){function r(){}r.prototype=e.prototype,s.X=e.prototype,s.prototype=new r,s.prototype.constructor=s,s.Wb=function(a,h,m){for(var b=Array(arguments.length-2),M=2;M<arguments.length;M++)b[M-2]=arguments[M];return e.prototype[h].apply(a,b)}}function ct(){this.s=this.s,this.o=this.o}var Vt={};ct.prototype.s=!1,ct.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var s=function(s){return Object.prototype.hasOwnProperty.call(s,ut)&&s[ut]||(s[ut]=++Te)}(this);delete Vt[s]}},ct.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const E=Array.prototype.indexOf?function(s,e){return Array.prototype.indexOf.call(s,e,void 0)}:function(s,e){if("string"==typeof s)return"string"!=typeof e||1!=e.length?-1:s.indexOf(e,0);for(let r=0;r<s.length;r++)if(r in s&&s[r]===e)return r;return-1};function Ye(s){const e=s.length;if(0<e){const r=Array(e);for(let a=0;a<e;a++)r[a]=s[a];return r}return[]}function gt(s,e){for(let r=1;r<arguments.length;r++){const a=arguments[r];if(Ee(a)){const h=s.length||0,m=a.length||0;s.length=h+m;for(let b=0;b<m;b++)s[h+b]=a[b]}else s.push(a)}}function We(s,e){this.type=s,this.g=this.target=e,this.defaultPrevented=!1}We.prototype.h=function(){this.defaultPrevented=!0};var He=function(){if(!se.addEventListener||!Object.defineProperty)return!1;var s=!1,e=Object.defineProperty({},"passive",{get:function(){s=!0}});try{se.addEventListener("test",ge,e),se.removeEventListener("test",ge,e)}catch(r){}return s}();function Ge(s){return/^[\s\xa0]*$/.test(s)}var ht=String.prototype.trim?function(s){return s.trim()}:function(s){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(s)[1]};function vt(s,e){return s<e?-1:s>e?1:0}function Ht(){var s=se.navigator;return s&&(s=s.userAgent)?s:""}function Zt(s){return-1!=Ht().indexOf(s)}function dt(s){return dt[" "](s),s}dt[" "]=ge;var gn,s,st=Zt("Opera"),Ue=Zt("Trident")||Zt("MSIE"),lt=Zt("Edge"),Dt=lt||Ue,Bt=Zt("Gecko")&&!(-1!=Ht().toLowerCase().indexOf("webkit")&&!Zt("Edge"))&&!(Zt("Trident")||Zt("MSIE"))&&!Zt("Edge"),Mt=-1!=Ht().toLowerCase().indexOf("webkit")&&!Zt("Edge");function Pt(){var s=se.document;return s?s.documentMode:void 0}e:{var kn="",Tn=(s=Ht(),Bt?/rv:([^\);]+)(\)|;)/.exec(s):lt?/Edge\/([\d\.]+)/.exec(s):Ue?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(s):Mt?/WebKit\/(\S+)/.exec(s):st?/(?:Version)[ \/]?(\S+)/.exec(s):void 0);if(Tn&&(kn=Tn?Tn[1]:""),Ue){var _n=Pt();if(null!=_n&&_n>parseFloat(kn)){gn=String(_n);break e}}gn=kn}var Mn={};function vr(){return e=Mn,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let s=0;const e=ht(String(gn)).split("."),r=ht("9").split("."),a=Math.max(e.length,r.length);for(let b=0;0==s&&b<a;b++){var h=e[b]||"",m=r[b]||"";do{if(h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],m=/(\d*)(\D*)(.*)/.exec(m)||["","","",""],0==h[0].length&&0==m[0].length)break;s=vt(0==h[1].length?0:parseInt(h[1],10),0==m[1].length?0:parseInt(m[1],10))||vt(0==h[2].length,0==m[2].length)||vt(h[2],m[2]),h=h[3],m=m[3]}while(0==s)}return 0<=s}();var e}var En=se.document&&Ue&&(Pt()||parseInt(gn,10))||void 0;function Wn(s,e){if(We.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var r=this.type=s.type,a=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=e,e=s.relatedTarget){if(Bt){e:{try{dt(e.nodeName);var h=!0;break e}catch(m){}h=!1}h||(e=null)}}else"mouseover"==r?e=s.fromElement:"mouseout"==r&&(e=s.toElement);this.relatedTarget=e,a?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType="string"==typeof s.pointerType?s.pointerType:tn[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&Wn.X.h.call(this)}}Me(Wn,We);var tn={2:"touch",3:"pen",4:"mouse"};Wn.prototype.h=function(){Wn.X.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var Un="closure_listenable_"+(1e6*Math.random()|0),jn=0;function Qn(s,e,r,a,h){this.listener=s,this.proxy=null,this.src=e,this.type=r,this.capture=!!a,this.ha=h,this.key=++jn,this.ba=this.ea=!1}function lr(s){s.ba=!0,s.listener=null,s.proxy=null,s.src=null,s.ha=null}function Ar(s,e,r){for(const a in s)e.call(r,s[a],a,s)}function Dr(s){const e={};for(const r in s)e[r]=s[r];return e}const hr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ri(s,e){let r,a;for(let h=1;h<arguments.length;h++){for(r in a=arguments[h],a)s[r]=a[r];for(let m=0;m<hr.length;m++)r=hr[m],Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}}function sr(s){this.src=s,this.g={},this.h=0}function Qt(s,e){var r=e.type;if(r in s.g){var m,a=s.g[r],h=E(a,e);(m=0<=h)&&Array.prototype.splice.call(a,h,1),m&&(lr(e),0==s.g[r].length&&(delete s.g[r],s.h--))}}function wt(s,e,r,a){for(var h=0;h<s.length;++h){var m=s[h];if(!m.ba&&m.listener==e&&m.capture==!!r&&m.ha==a)return h}return-1}sr.prototype.add=function(s,e,r,a,h){var m=s.toString();(s=this.g[m])||(s=this.g[m]=[],this.h++);var b=wt(s,e,a,h);return-1<b?(e=s[b],r||(e.ea=!1)):((e=new Qn(e,this.src,m,!!a,h)).ea=r,s.push(e)),e};var xr="closure_lm_"+(1e6*Math.random()|0),Or={};function fn(s,e,r,a,h){if(a&&a.once)return dr(s,e,r,a,h);if(Array.isArray(e)){for(var m=0;m<e.length;m++)fn(s,e[m],r,a,h);return null}return r=oe(r),s&&s[Un]?s.N(e,r,_e(a)?!!a.capture:!!a,h):Sn(s,e,r,!1,a,h)}function Sn(s,e,r,a,h,m){if(!e)throw Error("Invalid event type");var b=_e(h)?!!h.capture:!!h,M=dn(s);if(M||(s[xr]=M=new sr(s)),(r=M.add(e,r,a,b,m)).proxy)return r;if(a=function(){const e=Qr;return function s(r){return e.call(s.src,s.listener,r)}}(),r.proxy=a,a.src=s,a.listener=r,s.addEventListener)He||(h=b),void 0===h&&(h=!1),s.addEventListener(e.toString(),a,h);else if(s.attachEvent)s.attachEvent(Kn(e.toString()),a);else{if(!s.addListener||!s.removeListener)throw Error("addEventListener and attachEvent are unavailable.");s.addListener(a)}return r}function dr(s,e,r,a,h){if(Array.isArray(e)){for(var m=0;m<e.length;m++)dr(s,e[m],r,a,h);return null}return r=oe(r),s&&s[Un]?s.O(e,r,_e(a)?!!a.capture:!!a,h):Sn(s,e,r,!0,a,h)}function Xn(s,e,r,a,h){if(Array.isArray(e))for(var m=0;m<e.length;m++)Xn(s,e[m],r,a,h);else a=_e(a)?!!a.capture:!!a,r=oe(r),s&&s[Un]?(s=s.i,(e=String(e).toString())in s.g&&-1<(r=wt(m=s.g[e],r,a,h))&&(lr(m[r]),Array.prototype.splice.call(m,r,1),0==m.length&&(delete s.g[e],s.h--))):s&&(s=dn(s))&&(e=s.g[e.toString()],s=-1,e&&(s=wt(e,r,a,h)),(r=-1<s?e[s]:null)&&Yn(r))}function Yn(s){if("number"!=typeof s&&s&&!s.ba){var e=s.src;if(e&&e[Un])Qt(e.i,s);else{var r=s.type,a=s.proxy;e.removeEventListener?e.removeEventListener(r,a,s.capture):e.detachEvent?e.detachEvent(Kn(r),a):e.addListener&&e.removeListener&&e.removeListener(a),(r=dn(e))?(Qt(r,s),0==r.h&&(r.src=null,e[xr]=null)):lr(s)}}}function Kn(s){return s in Or?Or[s]:Or[s]="on"+s}function Qr(s,e){if(s.ba)s=!0;else{e=new Wn(e,this);var r=s.listener,a=s.ha||s.src;s.ea&&Yn(s),s=r.call(a,e)}return s}function dn(s){return(s=s[xr])instanceof sr?s:null}var Ze="__closure_events_fn_"+(1e9*Math.random()>>>0);function oe(s){return"function"==typeof s?s:(s[Ze]||(s[Ze]=function(e){return s.handleEvent(e)}),s[Ze])}function Ae(){ct.call(this),this.i=new sr(this),this.P=this,this.I=null}function nt(s,e){var r,a=s.I;if(a)for(r=[];a;a=a.I)r.push(a);if(s=s.P,a=e.type||e,"string"==typeof e)e=new We(e,s);else if(e instanceof We)e.target=e.target||s;else{var h=e;ri(e=new We(a,s),h)}if(h=!0,r)for(var m=r.length-1;0<=m;m--){var b=e.g=r[m];h=It(b,a,!0,e)&&h}if(h=It(b=e.g=s,a,!0,e)&&h,h=It(b,a,!1,e)&&h,r)for(m=0;m<r.length;m++)h=It(b=e.g=r[m],a,!1,e)&&h}function It(s,e,r,a){if(!(e=s.i.g[String(e)]))return!0;e=e.concat();for(var h=!0,m=0;m<e.length;++m){var b=e[m];if(b&&!b.ba&&b.capture==r){var M=b.listener,X=b.ha||b.src;b.ea&&Qt(s.i,b),h=!1!==M.call(X,a)&&h}}return h&&!a.defaultPrevented}Me(Ae,ct),Ae.prototype[Un]=!0,Ae.prototype.removeEventListener=function(s,e,r,a){Xn(this,s,e,r,a)},Ae.prototype.M=function(){if(Ae.X.M.call(this),this.i){var e,s=this.i;for(e in s.g){for(var r=s.g[e],a=0;a<r.length;a++)lr(r[a]);delete s.g[e],s.h--}}this.I=null},Ae.prototype.N=function(s,e,r,a){return this.i.add(String(s),e,!1,r,a)},Ae.prototype.O=function(s,e,r,a){return this.i.add(String(s),e,!0,r,a)};var Oe=se.JSON.stringify;function Le(){var s=Fn;let e=null;return s.g&&(e=s.g,s.g=s.g.next,s.g||(s.h=null),e.next=null),e}var Kt,Ve=new class{constructor(s,e){this.i=s,this.j=e,this.h=0,this.g=null}get(){let s;return 0<this.h?(this.h--,s=this.g,this.g=s.next,s.next=null):s=this.i(),s}}(()=>new ve,s=>s.reset());class ve{constructor(){this.next=this.g=this.h=null}set(e,r){this.h=e,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function Pe(s){se.setTimeout(()=>{throw s},0)}function bt(s,e){Kt||function(){var s=se.Promise.resolve(void 0);Kt=function(){s.then(pn)}}(),Dn||(Kt(),Dn=!0),Fn.add(s,e)}var Dn=!1,Fn=new class{constructor(){this.h=this.g=null}add(e,r){const a=Ve.get();a.set(e,r),this.h?this.h.next=a:this.g=a,this.h=a}};function pn(){for(var s;s=Le();){try{s.h.call(s.g)}catch(r){Pe(r)}var e=Ve;e.j(s),100>e.h&&(e.h++,s.next=e.g,e.g=s)}Dn=!1}function In(s,e){Ae.call(this),this.h=s||1,this.g=e||se,this.j=qe(this.lb,this),this.l=Date.now()}function mr(s){s.ca=!1,s.R&&(s.g.clearTimeout(s.R),s.R=null)}function qt(s,e,r){if("function"==typeof s)r&&(s=qe(s,r));else{if(!s||"function"!=typeof s.handleEvent)throw Error("Invalid listener argument");s=qe(s.handleEvent,s)}return 2147483647<Number(e)?-1:se.setTimeout(s,e||0)}function Gt(s){s.g=qt(()=>{s.g=null,s.i&&(s.i=!1,Gt(s))},s.j);const e=s.h;s.h=null,s.m.apply(null,e)}Me(In,Ae),(ne=In.prototype).ca=!1,ne.R=null,ne.lb=function(){if(this.ca){var s=Date.now()-this.l;0<s&&s<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-s):(this.R&&(this.g.clearTimeout(this.R),this.R=null),nt(this,"tick"),this.ca&&(mr(this),this.start()))}},ne.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ne.M=function(){In.X.M.call(this),mr(this),delete this.g};class $t extends ct{constructor(e,r){super(),this.m=e,this.j=r,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Gt(this)}M(){super.M(),this.g&&(se.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bn(s){ct.call(this),this.h=s,this.g={}}Me(bn,ct);var Rn=[];function cn(s,e,r,a){Array.isArray(r)||(r&&(Rn[0]=r.toString()),r=Rn);for(var h=0;h<r.length;h++){var m=fn(e,r[h],a||s.handleEvent,!1,s.h||s);if(!m)break;s.g[m.key]=m}}function Fr(s){Ar(s.g,function(e,r){this.g.hasOwnProperty(r)&&Yn(e)},s),s.g={}}function br(){this.g=!0}function Yr(s,e,r,a){s.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(s,e){if(!s.g)return e;if(!e)return null;try{var r=JSON.parse(e);if(r)for(s=0;s<r.length;s++)if(Array.isArray(r[s])){var a=r[s];if(!(2>a.length)){var h=a[1];if(Array.isArray(h)&&!(1>h.length)){var m=h[0];if("noop"!=m&&"stop"!=m&&"close"!=m)for(var b=1;b<h.length;b++)h[b]=""}}}return Oe(r)}catch(M){return e}}(s,r)+(a?" "+a:"")})}bn.prototype.M=function(){bn.X.M.call(this),Fr(this)},bn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},br.prototype.Aa=function(){this.g=!1},br.prototype.info=function(){};var Ur={},yi=null;function Kr(){return yi=yi||new Ae}function ys(s){We.call(this,Ur.Pa,s)}function Br(s){const e=Kr();nt(e,new ys(e,s))}function Yi(s,e){We.call(this,Ur.STAT_EVENT,s),this.stat=e}function Hr(s){const e=Kr();nt(e,new Yi(e,s))}function pi(s,e){We.call(this,Ur.Qa,s),this.size=e}function Sr(s,e){if("function"!=typeof s)throw Error("Fn must not be null and must be a function");return se.setTimeout(function(){s()},e)}Ur.Pa="serverreachability",Me(ys,We),Ur.STAT_EVENT="statevent",Me(Yi,We),Ur.Qa="timingevent",Me(pi,We);var xs={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},mt={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function z(){}function ce(){}z.prototype.h=null;var Rt,be={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Qe(){We.call(this,"d")}function Xe(){We.call(this,"c")}function At(){}function Tt(s,e,r,a){this.l=s,this.j=e,this.m=r,this.U=a||1,this.S=new bn(this),this.O=On,this.T=new In(s=Dt?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new on}function on(){this.i=null,this.g="",this.h=!1}Me(Qe,We),Me(Xe,We),Me(At,z),At.prototype.g=function(){return new XMLHttpRequest},At.prototype.i=function(){return{}},Rt=new At;var On=45e3,Vn={},qn={};function Rr(s,e,r){s.K=1,s.v=Qs(Bs(e)),s.s=r,s.P=!0,Gi(s,null)}function Gi(s,e){s.F=Date.now(),Rs(s),s.A=Bs(s.v);var r=s.A,a=s.U;Array.isArray(a)||(a=[String(a)]),Zi(r.i,"t",a),s.C=0,r=s.l.H,s.h=new on,s.g=to(s.l,r?e:null,!s.s),0<s.N&&(s.L=new $t(qe(s.La,s,s.g),s.N)),cn(s.S,s.g,"readystatechange",s.ib),e=s.H?Dr(s.H):{},s.s?(s.u||(s.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",s.g.da(s.A,s.u,s.s,e)):(s.u="GET",s.g.da(s.A,s.u,null,e)),Br(1),function(s,e,r,a,h,m){s.info(function(){if(s.g)if(m)for(var b="",M=m.split("&"),X=0;X<M.length;X++){var ie=M[X].split("=");if(1<ie.length){var xe=ie[0];ie=ie[1];var et=xe.split("_");b=2<=et.length&&"type"==et[1]?b+(xe+"=")+ie+"&":b+(xe+"=redacted&")}}else b=null;else b=m;return"XMLHTTP REQ ("+a+") [attempt "+h+"]: "+e+"\n"+r+"\n"+b})}(s.j,s.u,s.A,s.m,s.U,s.s)}function ci(s){return!!s.g&&"GET"==s.u&&2!=s.K&&s.l.Da}function Mi(s,e,r){let h,a=!0;for(;!s.I&&s.C<r.length;){if(h=vi(s,r),h==qn){4==e&&(s.o=4,Hr(14),a=!1),Yr(s.j,s.m,null,"[Incomplete Response]");break}if(h==Vn){s.o=4,Hr(15),Yr(s.j,s.m,r,"[Invalid Chunk]"),a=!1;break}Yr(s.j,s.m,h,null),Ks(s,h)}ci(s)&&h!=qn&&h!=Vn&&(s.h.g="",s.C=0),4!=e||0!=r.length||s.h.h||(s.o=1,Hr(16),a=!1),s.i=s.i&&a,a?0<r.length&&!s.$&&(s.$=!0,(e=s.l).g==s&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+r.length),Vi(e),e.K=!0,Hr(11))):(Yr(s.j,s.m,r,"[Invalid Chunked Response]"),Fe(s),Ki(s))}function vi(s,e){var r=s.C,a=e.indexOf("\n",r);return-1==a?qn:(r=Number(e.substring(r,a)),isNaN(r)?Vn:(a+=1)+r>e.length?qn:(e=e.substr(a,r),s.C=a+r,e))}function Rs(s){s.V=Date.now()+s.O,rs(s,s.O)}function rs(s,e){if(null!=s.B)throw Error("WatchDog timer not null");s.B=Sr(qe(s.gb,s),e)}function _s(s){s.B&&(se.clearTimeout(s.B),s.B=null)}function Ki(s){0==s.l.G||s.I||mo(s.l,s)}function Fe(s){_s(s);var e=s.L;e&&"function"==typeof e.na&&e.na(),s.L=null,mr(s.T),Fr(s.S),s.g&&(e=s.g,s.g=null,e.abort(),e.na())}function Ks(s,e){try{var r=s.l;if(0!=r.G&&(r.g==s||K(r.h,s)))if(!s.J&&K(r.h,s)&&3==r.G){try{var a=r.Fa.g.parse(e)}catch(ie){a=null}if(Array.isArray(a)&&3==a.length){var h=a;if(0==h[0])e:if(r.u)r.Ba=h[1],0<r.Ba-r.T&&37500>h[2]&&r.L&&0==r.A&&!r.v&&(r.v=Sr(qe(r.cb,r),6e3));else{if(r.g){if(!(r.g.F+3e3<s.F))break e;ds(r),zo(r)}Cs(r),Hr(18)}if(1>=le(r.h)&&r.ja){try{r.ja()}catch(ie){}r.ja=void 0}}else Ao(r,11)}else if((s.J||r.g==s)&&ds(r),!Ge(e))for(h=r.Fa.g.parse(e),e=0;e<h.length;e++){let ie=h[e];if(r.T=ie[0],ie=ie[1],2==r.G)if("c"==ie[0]){r.I=ie[1],r.ka=ie[2];const xe=ie[3];null!=xe&&(r.ma=xe,r.j.info("VER="+r.ma));const et=ie[4];null!=et&&(r.Ca=et,r.j.info("SVER="+r.Ca));const Nt=ie[5];null!=Nt&&"number"==typeof Nt&&0<Nt&&(r.J=a=1.5*Nt,r.j.info("backChannelRequestTimeoutMs_="+a)),a=r;const Jt=s.g;if(Jt){const hn=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hn){var m=a.h;m.g||-1==hn.indexOf("spdy")&&-1==hn.indexOf("quic")&&-1==hn.indexOf("h2")||(m.j=m.l,m.g=new Set,m.h&&(Ce(m,m.h),m.h=null))}if(a.D){const zn=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;zn&&(a.za=zn,Xr(a.F,a.D,zn))}}r.G=3,r.l&&r.l.xa(),r.$&&(r.P=Date.now()-s.F,r.j.info("Handshake RTT: "+r.P+"ms"));var b=s;if((a=r).sa=xo(a,a.H?a.ka:null,a.V),b.J){ze(a.h,b);var M=b,X=a.J;X&&M.setTimeout(X),M.B&&(_s(M),Rs(M)),a.g=b}else Ba(a);0<r.i.length&&eo(r)}else"stop"!=ie[0]&&"close"!=ie[0]||Ao(r,7);else 3==r.G&&("stop"==ie[0]||"close"==ie[0]?"stop"==ie[0]?Ao(r,7):so(r):"noop"!=ie[0]&&r.l&&r.l.wa(ie),r.A=0)}Br(4)}catch(ie){}}function To(s,e){if(s.forEach&&"function"==typeof s.forEach)s.forEach(e,void 0);else if(Ee(s)||"string"==typeof s)Array.prototype.forEach.call(s,e,void 0);else for(var r=function(s){if(s.oa&&"function"==typeof s.oa)return s.oa();if(!s.W||"function"!=typeof s.W){if("undefined"!=typeof Map&&s instanceof Map)return Array.from(s.keys());if(!("undefined"!=typeof Set&&s instanceof Set)){if(Ee(s)||"string"==typeof s){var e=[];s=s.length;for(var r=0;r<s;r++)e.push(r);return e}e=[],r=0;for(const a in s)e[r++]=a;return e}}}(s),a=function(s){if(s.W&&"function"==typeof s.W)return s.W();if("undefined"!=typeof Map&&s instanceof Map||"undefined"!=typeof Set&&s instanceof Set)return Array.from(s.values());if("string"==typeof s)return s.split("");if(Ee(s)){for(var e=[],r=s.length,a=0;a<r;a++)e.push(s[a]);return e}for(a in e=[],r=0,s)e[r++]=s[a];return e}(s),h=a.length,m=0;m<h;m++)e.call(void 0,a[m],r&&r[m],s)}(ne=Tt.prototype).setTimeout=function(s){this.O=s},ne.ib=function(s){s=s.target;const e=this.L;e&&3==Cr(s)?e.l():this.La(s)},ne.La=function(s){try{if(s==this.g)e:{const xe=Cr(this.g);var e=this.g.Ea();const et=this.g.aa();if(!(3>xe)&&(3!=xe||Dt||this.g&&(this.h.h||this.g.fa()||So(this.g)))){this.I||4!=xe||7==e||Br(8==e||0>=et?3:2),_s(this);var r=this.g.aa();this.Y=r;t:if(ci(this)){var a=So(this.g);s="";var h=a.length,m=4==Cr(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Fe(this),Ki(this);var b="";break t}this.h.i=new se.TextDecoder}for(e=0;e<h;e++)this.h.h=!0,s+=this.h.i.decode(a[e],{stream:m&&e==h-1});a.splice(0,h),this.h.g+=s,this.C=0,b=this.h.g}else b=this.g.fa();if(this.i=200==r,function(s,e,r,a,h,m,b){s.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+h+"]: "+e+"\n"+r+"\n"+m+" "+b})}(this.j,this.u,this.A,this.m,this.U,xe,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var M,X=this.g;if((M=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ge(M)){var ie=M;break t}}ie=null}if(!(r=ie)){this.i=!1,this.o=3,Hr(12),Fe(this),Ki(this);break e}Yr(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ks(this,r)}this.P?(Mi(this,xe,b),Dt&&this.i&&3==xe&&(cn(this.S,this.T,"tick",this.hb),this.T.start())):(Yr(this.j,this.m,b,null),Ks(this,b)),4==xe&&Fe(this),this.i&&!this.I&&(4==xe?mo(this.l,this):(this.i=!1,Rs(this)))}else 400==r&&0<b.indexOf("Unknown SID")?(this.o=3,Hr(12)):(this.o=0,Hr(13)),Fe(this),Ki(this)}}}catch(xe){}},ne.hb=function(){if(this.g){var s=Cr(this.g),e=this.g.fa();this.C<e.length&&(_s(this),Mi(this,s,e),this.i&&4!=s&&Rs(this))}},ne.cancel=function(){this.I=!0,Fe(this)},ne.gb=function(){this.B=null;const s=Date.now();0<=s-this.V?(function(s,e){s.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Br(3),Hr(17)),Fe(this),this.o=2,Ki(this)):rs(this,this.V-s)};var Vo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vs(s,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,s instanceof vs){this.h=void 0!==e?e:s.h,us(this,s.j),this.s=s.s,this.g=s.g,$s(this,s.m),this.l=s.l,e=s.i;var r=new di;r.i=e.i,e.g&&(r.g=new Map(e.g),r.h=e.h),Zs(this,r),this.o=s.o}else s&&(r=String(s).match(Vo))?(this.h=!!e,us(this,r[1]||"",!0),this.s=$i(r[2]||""),this.g=$i(r[3]||"",!0),$s(this,r[4]),this.l=$i(r[5]||"",!0),Zs(this,r[6]||"",!0),this.o=$i(r[7]||"")):(this.h=!!e,this.i=new di(null,this.h))}function Bs(s){return new vs(s)}function us(s,e,r){s.j=r?$i(e,!0):e,s.j&&(s.j=s.j.replace(/:$/,""))}function $s(s,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);s.m=e}else s.m=null}function Zs(s,e,r){e instanceof di?(s.i=e,function(s,e){e&&!s.j&&(Fi(s),s.i=null,s.g.forEach(function(r,a){var h=a.toLowerCase();a!=h&&(fo(this,a),Zi(this,h,r))},s)),s.j=e}(s.i,s.h)):(r||(e=cs(e,gi)),s.i=new di(e,s.h))}function Xr(s,e,r){s.i.set(e,r)}function Qs(s){return Xr(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function $i(s,e){return s?e?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function cs(s,e,r){return"string"==typeof s?(s=encodeURI(s).replace(e,Xs),r&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function Xs(s){return"%"+((s=s.charCodeAt(0))>>4&15).toString(16)+(15&s).toString(16)}vs.prototype.toString=function(){var s=[],e=this.j;e&&s.push(cs(e,is,!0),":");var r=this.g;return(r||"file"==e)&&(s.push("//"),(e=this.s)&&s.push(cs(e,is,!0),"@"),s.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&s.push(":",String(r))),(r=this.l)&&(this.g&&"/"!=r.charAt(0)&&s.push("/"),s.push(cs(r,"/"==r.charAt(0)?Us:ki,!0))),(r=this.i.toString())&&s.push("?",r),(r=this.o)&&s.push("#",cs(r,Is)),s.join("")};var is=/[#\/\?@]/g,ki=/[#\?:]/g,Us=/[#\?]/g,gi=/[#\?@]/g,Is=/#/g;function di(s,e){this.h=this.g=null,this.i=s||null,this.j=!!e}function Fi(s){s.g||(s.g=new Map,s.h=0,s.i&&function(s,e){if(s){s=s.split("&");for(var r=0;r<s.length;r++){var a=s[r].indexOf("="),h=null;if(0<=a){var m=s[r].substring(0,a);h=s[r].substring(a+1)}else m=s[r];e(m,h?decodeURIComponent(h.replace(/\+/g," ")):"")}}}(s.i,function(e,r){s.add(decodeURIComponent(e.replace(/\+/g," ")),r)}))}function fo(s,e){Fi(s),e=zi(s,e),s.g.has(e)&&(s.i=null,s.h-=s.g.get(e).length,s.g.delete(e))}function Li(s,e){return Fi(s),e=zi(s,e),s.g.has(e)}function Zi(s,e,r){fo(s,e),0<r.length&&(s.i=null,s.g.set(zi(s,e),Ye(r)),s.h+=r.length)}function zi(s,e){return e=String(e),s.j&&(e=e.toLowerCase()),e}function _i(s){this.l=s||Qi,s=se.PerformanceNavigationTiming?0<(s=se.performance.getEntriesByType("navigation")).length&&("hq"==s[0].nextHopProtocol||"h2"==s[0].nextHopProtocol):!!(se.g&&se.g.Ga&&se.g.Ga()&&se.g.Ga().$b),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ne=di.prototype).add=function(s,e){Fi(this),this.i=null,s=zi(this,s);var r=this.g.get(s);return r||this.g.set(s,r=[]),r.push(e),this.h+=1,this},ne.forEach=function(s,e){Fi(this),this.g.forEach(function(r,a){r.forEach(function(h){s.call(e,h,a,this)},this)},this)},ne.oa=function(){Fi(this);const s=Array.from(this.g.values()),e=Array.from(this.g.keys()),r=[];for(let a=0;a<e.length;a++){const h=s[a];for(let m=0;m<h.length;m++)r.push(e[a])}return r},ne.W=function(s){Fi(this);let e=[];if("string"==typeof s)Li(this,s)&&(e=e.concat(this.g.get(zi(this,s))));else{s=Array.from(this.g.values());for(let r=0;r<s.length;r++)e=e.concat(s[r])}return e},ne.set=function(s,e){return Fi(this),this.i=null,Li(this,s=zi(this,s))&&(this.h-=this.g.get(s).length),this.g.set(s,[e]),this.h+=1,this},ne.get=function(s,e){return s&&0<(s=this.W(s)).length?String(s[0]):e},ne.toString=function(){if(this.i)return this.i;if(!this.g)return"";const s=[],e=Array.from(this.g.keys());for(var r=0;r<e.length;r++){var a=e[r];const m=encodeURIComponent(String(a)),b=this.W(a);for(a=0;a<b.length;a++){var h=m;""!==b[a]&&(h+="="+encodeURIComponent(String(b[a]))),s.push(h)}}return this.i=s.join("&")};var Qi=10;function G(s){return!!s.h||!!s.g&&s.g.size>=s.j}function le(s){return s.h?1:s.g?s.g.size:0}function K(s,e){return s.h?s.h==e:!!s.g&&s.g.has(e)}function Ce(s,e){s.g?s.g.add(e):s.h=e}function ze(s,e){s.h&&s.h==e?s.h=null:s.g&&s.g.has(e)&&s.g.delete(e)}function kt(s){if(null!=s.h)return s.i.concat(s.h.D);if(null!=s.g&&0!==s.g.size){let e=s.i;for(const r of s.g.values())e=e.concat(r.D);return e}return Ye(s.i)}function an(){}function H(){this.g=new an}function B(s,e,r){const a=r||"";try{To(s,function(h,m){let b=h;_e(h)&&(b=Oe(h)),e.push(a+m+"="+encodeURIComponent(b))})}catch(h){throw e.push(a+"type="+encodeURIComponent("_badmap")),h}}function ue(s,e,r,a,h){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,h(a)}catch(m){}}function _t(s){this.l=s.ac||null,this.j=s.jb||!1}function mn(s,e){Ae.call(this),this.D=s,this.u=e,this.m=void 0,this.readyState=er,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}_i.prototype.cancel=function(){if(this.i=kt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const s of this.g.values())s.cancel();this.g.clear()}},an.prototype.stringify=function(s){return se.JSON.stringify(s,void 0)},an.prototype.parse=function(s){return se.JSON.parse(s,void 0)},Me(_t,z),_t.prototype.g=function(){return new mn(this.l,this.j)},_t.prototype.i=function(s){return function(){return s}}({}),Me(mn,Ae);var er=0;function Wr(s){s.j.read().then(s.Ta.bind(s)).catch(s.ga.bind(s))}function Ei(s){s.readyState=4,s.l=null,s.j=null,s.A=null,li(s)}function li(s){s.onreadystatechange&&s.onreadystatechange.call(s)}(ne=mn.prototype).open=function(s,e){if(this.readyState!=er)throw this.abort(),Error("Error reopening a connection");this.C=s,this.B=e,this.readyState=1,li(this)},ne.send=function(s){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};s&&(e.body=s),(this.D||se).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ne.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ei(this)),this.readyState=er},ne.Wa=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,li(this)),this.g&&(this.readyState=3,li(this),this.g)))if("arraybuffer"===this.responseType)s.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==se.ReadableStream&&"body"in s){if(this.j=s.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Wr(this)}else s.text().then(this.Va.bind(this),this.ga.bind(this))},ne.Ta=function(s){if(this.g){if(this.u&&s.value)this.response.push(s.value);else if(!this.u){var e=s.value?s.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!s.done}))&&(this.response=this.responseText+=e)}s.done?Ei(this):li(this),3==this.readyState&&Wr(this)}},ne.Va=function(s){this.g&&(this.response=this.responseText=s,Ei(this))},ne.Ua=function(s){this.g&&(this.response=s,Ei(this))},ne.ga=function(){this.g&&Ei(this)},ne.setRequestHeader=function(s,e){this.v.append(s,e)},ne.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},ne.getAllResponseHeaders=function(){if(!this.h)return"";const s=[],e=this.h.entries();for(var r=e.next();!r.done;)s.push((r=r.value)[0]+": "+r[1]),r=e.next();return s.join("\r\n")},Object.defineProperty(mn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(s){this.m=s?"include":"same-origin"}});var oi=se.JSON.parse;function Gr(s){Ae.call(this),this.headers=new Map,this.u=s||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=tr,this.K=this.L=!1}Me(Gr,Ae);var tr="",ia=/^https?$/i,Do=["POST","PUT"];function Va(s,e){s.h=!1,s.g&&(s.l=!0,s.g.abort(),s.l=!1),s.j=e,s.m=5,Go(s),po(s)}function Go(s){s.D||(s.D=!0,nt(s,"complete"),nt(s,"error"))}function ya(s){if(s.h&&void 0!==we&&(!s.C[1]||4!=Cr(s)||2!=s.aa()))if(s.v&&4==Cr(s))qt(s.Ha,0,s);else if(nt(s,"readystatechange"),4==Cr(s)){s.h=!1;try{const M=s.aa();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var r;if(!(r=e)){var a;if(a=0===M){var h=String(s.H).match(Vo)[1]||null;if(!h&&se.self&&se.self.location){var m=se.self.location.protocol;h=m.substr(0,m.length-1)}a=!ia.test(h?h.toLowerCase():"")}r=a}if(r)nt(s,"complete"),nt(s,"success");else{s.m=6;try{var b=2<Cr(s)?s.g.statusText:""}catch(X){b=""}s.j=b+" ["+s.aa()+"]",Go(s)}}finally{po(s)}}}function po(s,e){if(s.g){rn(s);const r=s.g,a=s.C[0]?ge:null;s.g=null,s.C=null,e||nt(s,"ready");try{r.onreadystatechange=a}catch(h){}}}function rn(s){s.g&&s.K&&(s.g.ontimeout=null),s.A&&(se.clearTimeout(s.A),s.A=null)}function Cr(s){return s.g?s.g.readyState:0}function So(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.J){case tr:case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ui(s){let e="";return Ar(s,function(r,a){e+=a,e+=":",e+=r,e+="\r\n"}),e}function Js(s,e,r){e:{for(a in r){var a=!1;break e}a=!0}a||(r=Ui(r),"string"==typeof s?null!=r&&encodeURIComponent(String(r)):Xr(s,e,r))}function bs(s,e,r){return r&&r.internalChannelParams&&r.internalChannelParams[s]||e}function Os(s){this.Ca=0,this.i=[],this.j=new br,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=bs("failFast",!1,s),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=bs("baseRetryDelayMs",5e3,s),this.bb=bs("retryDelaySeedMs",1e4,s),this.$a=bs("forwardChannelMaxRetries",2,s),this.ta=bs("forwardChannelRequestTimeoutMs",2e4,s),this.ra=s&&s.xmlHttpFactory||void 0,this.Da=s&&s.Zb||!1,this.J=void 0,this.H=s&&s.supportsCrossDomainXhr||!1,this.I="",this.h=new _i(s&&s.concurrentRequestLimit),this.Fa=new H,this.O=s&&s.fastHandshake||!1,this.N=s&&s.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=s&&s.Xb||!1,s&&s.Aa&&this.j.Aa(),s&&s.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&s&&s.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function so(s){if(fl(s),3==s.G){var e=s.U++,r=Bs(s.F);Xr(r,"SID",s.I),Xr(r,"RID",e),Xr(r,"TYPE","terminate"),Xi(s,r),(e=new Tt(s,s.j,e,void 0)).K=2,e.v=Qs(Bs(r)),r=!1,se.navigator&&se.navigator.sendBeacon&&(r=se.navigator.sendBeacon(e.v.toString(),"")),!r&&se.Image&&((new Image).src=e.v,r=!0),r||(e.g=to(e.l,null),e.g.da(e.v)),e.F=Date.now(),Rs(e)}qo(s)}function zo(s){s.g&&(Vi(s),s.g.cancel(),s.g=null)}function fl(s){zo(s),s.u&&(se.clearTimeout(s.u),s.u=null),ds(s),s.h.cancel(),s.m&&("number"==typeof s.m&&se.clearTimeout(s.m),s.m=null)}function eo(s){G(s.h)||s.m||(s.m=!0,bt(s.Ja,s),s.C=0)}function go(s,e){var r;r=e?e.m:s.U++;const a=Bs(s.F);Xr(a,"SID",s.I),Xr(a,"RID",r),Xr(a,"AID",s.T),Xi(s,a),s.o&&s.s&&Js(a,s.o,s.s),r=new Tt(s,s.j,r,s.C+1),null===s.o&&(r.H=s.s),e&&(s.i=e.D.concat(s.i)),e=Ps(s,r,1e3),r.setTimeout(Math.round(.5*s.ta)+Math.round(.5*s.ta*Math.random())),Ce(s.h,r),Rr(r,a,e)}function Xi(s,e){s.ia&&Ar(s.ia,function(r,a){Xr(e,a,r)}),s.l&&To({},function(r,a){Xr(e,a,r)})}function Ps(s,e,r){r=Math.min(s.i.length,r);var a=s.l?qe(s.l.Ra,s.l,s):null;e:{var h=s.i;let m=-1;for(;;){const b=["count="+r];-1==m?0<r?(m=h[0].h,b.push("ofs="+m)):m=0:b.push("ofs="+m);let M=!0;for(let X=0;X<r;X++){let ie=h[X].h;const xe=h[X].g;if(ie-=m,0>ie)m=Math.max(0,h[X].h-100),M=!1;else try{B(xe,b,"req"+ie+"_")}catch(et){a&&a(xe)}}if(M){a=b.join("&");break e}}}return s=s.i.splice(0,r),e.D=s,a}function Ba(s){s.g||s.u||(s.Z=1,bt(s.Ia,s),s.A=0)}function Cs(s){return!(s.g||s.u||3<=s.A||(s.Z++,s.u=Sr(qe(s.Ia,s),js(s,s.A)),s.A++,0))}function Vi(s){null!=s.B&&(se.clearTimeout(s.B),s.B=null)}function oo(s){s.g=new Tt(s,s.j,"rpc",s.Z),null===s.o&&(s.g.H=s.s),s.g.N=0;var e=Bs(s.sa);Xr(e,"RID","rpc"),Xr(e,"SID",s.I),Xr(e,"CI",s.L?"0":"1"),Xr(e,"AID",s.T),Xr(e,"TYPE","xmlhttp"),Xi(s,e),s.o&&s.s&&Js(e,s.o,s.s),s.J&&s.g.setTimeout(s.J);var r=s.g;s=s.ka,r.K=1,r.v=Qs(Bs(e)),r.s=null,r.P=!0,Gi(r,s)}function ds(s){null!=s.v&&(se.clearTimeout(s.v),s.v=null)}function mo(s,e){var r=null;if(s.g==e){ds(s),Vi(s),s.g=null;var a=2}else{if(!K(s.h,e))return;r=e.D,ze(s.h,e),a=1}if(0!=s.G)if(s.pa=e.Y,e.i)if(1==a){r=e.s?e.s.length:0,e=Date.now()-e.F;var h=s.C;nt(a=Kr(),new pi(a,r,e,h)),eo(s)}else Ba(s);else if(3==(h=e.o)||0==h&&0<s.pa||!(1==a&&function(s,e){return!(le(s.h)>=s.h.j-(s.m?1:0)||(s.m?(s.i=e.D.concat(s.i),0):1==s.G||2==s.G||s.C>=(s.Za?0:s.$a)||(s.m=Sr(qe(s.Ja,s,e),js(s,s.C)),s.C++,0)))}(s,e)||2==a&&Cs(s)))switch(r&&0<r.length&&(e=s.h,e.i=e.i.concat(r)),h){case 1:Ao(s,5);break;case 4:Ao(s,10);break;case 3:Ao(s,6);break;default:Ao(s,2)}}function js(s,e){let r=s.Xa+Math.floor(Math.random()*s.bb);return s.l||(r*=2),r*e}function Ao(s,e){if(s.j.info("Error code "+e),2==e){var r=null;s.l&&(r=null);var a=qe(s.kb,s);r||(r=new vs("//www.google.com/images/cleardot.gif"),se.location&&"http"==se.location.protocol||us(r,"https"),Qs(r)),function(s,e){const r=new br;if(se.Image){const a=new Image;a.onload=Ie(ue,r,a,"TestLoadImage: loaded",!0,e),a.onerror=Ie(ue,r,a,"TestLoadImage: error",!1,e),a.onabort=Ie(ue,r,a,"TestLoadImage: abort",!1,e),a.ontimeout=Ie(ue,r,a,"TestLoadImage: timeout",!1,e),se.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=s}else e(!1)}(r.toString(),a)}else Hr(2);s.G=0,s.l&&s.l.va(e),qo(s),fl(s)}function qo(s){if(s.G=0,s.la=[],s.l){const e=kt(s.h);(0!=e.length||0!=s.i.length)&&(gt(s.la,e),gt(s.la,s.i),s.h.i.length=0,Ye(s.i),s.i.length=0),s.l.ua()}}function xo(s,e,r){var a=r instanceof vs?Bs(r):new vs(r,void 0);if(""!=a.g)e&&(a.g=e+"."+a.g),$s(a,a.m);else{var h=se.location;a=h.protocol,e=e?e+"."+h.hostname:h.hostname,h=+h.port;var m=new vs(null,void 0);a&&us(m,a),e&&(m.g=e),h&&$s(m,h),r&&(m.l=r),a=m}return e=s.za,(r=s.D)&&e&&Xr(a,r,e),Xr(a,"VER",s.ma),Xi(s,a),a}function to(s,e,r){if(e&&!s.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Gr(r&&s.Da&&!s.ra?new _t({jb:!0}):s.ra)).Ka(s.H),e}function Hs(){}function Yo(){if(Ue&&!(10<=Number(En)))throw Error("Environmental error: no available transport.")}function Ci(s,e){Ae.call(this),this.g=new Os(e),this.l=s,this.h=e&&e.messageUrlParams||null,s=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.s=s,s=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(s?s["X-WebChannel-Content-Type"]=e.messageContentType:s={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(s?s["X-WebChannel-Client-Profile"]=e.ya:s={"X-WebChannel-Client-Profile":e.ya}),this.g.S=s,(s=e&&e.Yb)&&!Ge(s)&&(this.g.o=s),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ge(e)&&(this.g.D=e,null!==(s=this.h)&&e in s&&e in(s=this.h)&&delete s[e]),this.j=new Ns(this)}function no(s){Qe.call(this);var e=s.__sm__;if(e){e:{for(const r in e){s=r;break e}s=void 0}(this.i=s)&&(s=this.i,e=null!==e&&s in e?e[s]:void 0),this.data=e}else this.data=s}function oa(){Xe.call(this),this.status=1}function Ns(s){this.g=s}(ne=Gr.prototype).Ka=function(s){this.L=s},ne.da=function(s,e,r,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+s);e=e?e.toUpperCase():"GET",this.H=s,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Rt.g(),this.C=function(s){return s.h||(s.h=s.i())}(this.u?this.u:Rt),this.g.onreadystatechange=qe(this.Ha,this);try{this.F=!0,this.g.open(e,String(s),!0),this.F=!1}catch(m){return void Va(this,m)}if(s=r||"",r=new Map(this.headers),a)if(Object.getPrototypeOf(a)===Object.prototype)for(var h in a)r.set(h,a[h]);else{if("function"!=typeof a.keys||"function"!=typeof a.get)throw Error("Unknown input type for opt_headers: "+String(a));for(const m of a.keys())r.set(m,a.get(m))}a=Array.from(r.keys()).find(m=>"content-type"==m.toLowerCase()),h=se.FormData&&s instanceof se.FormData,!(0<=E(Do,e))||a||h||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[m,b]of r)this.g.setRequestHeader(m,b);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{rn(this),0<this.B&&((this.K=function(s){return Ue&&vr()&&"number"==typeof s.timeout&&void 0!==s.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=qe(this.qa,this)):this.A=qt(this.qa,this.B,this)),this.v=!0,this.g.send(s),this.v=!1}catch(m){Va(this,m)}},ne.qa=function(){void 0!==we&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,nt(this,"timeout"),this.abort(8))},ne.abort=function(s){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=s||7,nt(this,"complete"),nt(this,"abort"),po(this))},ne.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),po(this,!0)),Gr.X.M.call(this)},ne.Ha=function(){this.s||(this.F||this.v||this.l?ya(this):this.fb())},ne.fb=function(){ya(this)},ne.aa=function(){try{return 2<Cr(this)?this.g.status:-1}catch(s){return-1}},ne.fa=function(){try{return this.g?this.g.responseText:""}catch(s){return""}},ne.Sa=function(s){if(this.g){var e=this.g.responseText;return s&&0==e.indexOf(s)&&(e=e.substring(s.length)),oi(e)}},ne.Ea=function(){return this.m},ne.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ne=Os.prototype).ma=8,ne.G=1,ne.Ja=function(s){if(this.m)if(this.m=null,1==this.G){if(!s){this.U=Math.floor(1e5*Math.random()),s=this.U++;const h=new Tt(this,this.j,s,void 0);let m=this.s;if(this.S&&(m?(m=Dr(m),ri(m,this.S)):m=this.S),null!==this.o||this.N||(h.H=m,m=null),this.O)e:{for(var e=0,r=0;r<this.i.length;r++){var a=this.i[r];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(e+=a)){e=r;break e}if(4096===e||r===this.i.length-1){e=r+1;break e}}e=1e3}else e=1e3;e=Ps(this,h,e),Xr(r=Bs(this.F),"RID",s),Xr(r,"CVER",22),this.D&&Xr(r,"X-HTTP-Session-Id",this.D),Xi(this,r),m&&(this.N?e="headers="+encodeURIComponent(String(Ui(m)))+"&"+e:this.o&&Js(r,this.o,m)),Ce(this.h,h),this.Ya&&Xr(r,"TYPE","init"),this.O?(Xr(r,"$req",e),Xr(r,"SID","null"),h.Z=!0,Rr(h,r,null)):Rr(h,r,e),this.G=2}}else 3==this.G&&(s?go(this,s):0==this.i.length||G(this.h)||go(this))},ne.Ia=function(){if(this.u=null,oo(this),this.$&&!(this.K||null==this.g||0>=this.P)){var s=2*this.P;this.j.info("BP detection timer enabled: "+s),this.B=Sr(qe(this.eb,this),s)}},ne.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Hr(10),zo(this),oo(this))},ne.cb=function(){null!=this.v&&(this.v=null,zo(this),Cs(this),Hr(19))},ne.kb=function(s){s?(this.j.info("Successfully pinged google.com"),Hr(2)):(this.j.info("Failed to ping google.com"),Hr(1))},(ne=Hs.prototype).xa=function(){},ne.wa=function(){},ne.va=function(){},ne.ua=function(){},ne.Ra=function(){},Yo.prototype.g=function(s,e){return new Ci(s,e)},Me(Ci,Ae),Ci.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var s=this.g,e=this.l,r=this.h||void 0;Hr(0),s.V=e,s.ia=r||{},s.L=s.Y,s.F=xo(s,null,s.V),eo(s)},Ci.prototype.close=function(){so(this.g)},Ci.prototype.u=function(s){var e=this.g;if("string"==typeof s){var r={};r.__data__=s,s=r}else this.v&&((r={}).__data__=Oe(s),s=r);e.i.push(new class{constructor(s,e){this.h=s,this.g=e}}(e.ab++,s)),3==e.G&&eo(e)},Ci.prototype.M=function(){this.g.l=null,delete this.j,so(this.g),delete this.g,Ci.X.M.call(this)},Me(no,Qe),Me(oa,Xe),Me(Ns,Hs),Ns.prototype.xa=function(){nt(this.g,"a")},Ns.prototype.wa=function(s){nt(this.g,new no(s))},Ns.prototype.va=function(s){nt(this.g,new oa(s))},Ns.prototype.ua=function(){nt(this.g,"b")},Yo.prototype.createWebChannel=Yo.prototype.g,Ci.prototype.send=Ci.prototype.u,Ci.prototype.open=Ci.prototype.m,Ci.prototype.close=Ci.prototype.close,xs.NO_ERROR=0,xs.TIMEOUT=8,xs.HTTP_ERROR=6,mt.COMPLETE="complete",ce.EventType=be,be.OPEN="a",be.CLOSE="b",be.ERROR="c",be.MESSAGE="d",Ae.prototype.listen=Ae.prototype.N,Gr.prototype.listenOnce=Gr.prototype.O,Gr.prototype.getLastError=Gr.prototype.Oa,Gr.prototype.getLastErrorCode=Gr.prototype.Ea,Gr.prototype.getStatus=Gr.prototype.aa,Gr.prototype.getResponseJson=Gr.prototype.Sa,Gr.prototype.getResponseText=Gr.prototype.fa,Gr.prototype.send=Gr.prototype.da,Gr.prototype.setWithCredentials=Gr.prototype.Ka;var $a=Z.createWebChannelTransport=function(){return new Yo},Ua=Z.getStatEventTarget=function(){return Kr()},Ro=Z.ErrorCode=xs,w=Z.EventType=mt,N=Z.Event=Ur,T=Z.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},q=Z.FetchXmlHttpFactory=_t,fe=Z.WebChannel=ce,yt=Z.XhrIo=Gr;const Xt="@firebase/firestore";class yn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");let yr="9.12.1";const Pn=new ke.Yd("@firebase/firestore");function Nr(){return Pn.logLevel}function wi(s){Pn.setLogLevel(s)}function zt(s,...e){if(Pn.logLevel<=ke.in.DEBUG){const r=e.map(ro);Pn.debug(`Firestore (${yr}): ${s}`,...r)}}function nr(s,...e){if(Pn.logLevel<=ke.in.ERROR){const r=e.map(ro);Pn.error(`Firestore (${yr}): ${s}`,...r)}}function Ji(s,...e){if(Pn.logLevel<=ke.in.WARN){const r=e.map(ro);Pn.warn(`Firestore (${yr}): ${s}`,...r)}}function ro(s){if("string"==typeof s)return s;try{return JSON.stringify(s)}catch(r){return s}}function Ln(s="Unexpected state"){const e=`FIRESTORE (${yr}) INTERNAL ASSERTION FAILED: `+s;throw nr(e),new Error(e)}function $n(s,e){s||Ln()}function ai(s,e){s||Ln()}function ln(s,e){return s}const ft={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class en extends ae.ZR{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ir{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}class Rl{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Rc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(yn.UNAUTHENTICATED))}shutdown(){}}class ks{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class pl{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){var a=this;let h=this.i;const m=ie=>this.i!==h?(h=this.i,r(ie)):Promise.resolve();let b=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),b.resolve(),b=new Ir,e.enqueueRetryable(()=>m(this.currentUser))};const M=()=>{const ie=b;e.enqueueRetryable((0,_.Z)(function*(){yield ie.promise,yield m(a.currentUser)}))},X=ie=>{zt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=ie,this.auth.addAuthTokenListener(this.o),M()};this.t.onInit(ie=>X(ie)),setTimeout(()=>{if(!this.auth){const ie=this.t.getImmediate({optional:!0});ie?X(ie):(zt("FirebaseAuthCredentialsProvider","Auth not yet detected"),b.resolve(),b=new Ir)}},0),M()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(a=>this.i!==e?(zt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?($n("string"==typeof a.accessToken),new Rl(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return $n(null===e||"string"==typeof e),new yn(e)}}class Bi{constructor(e,r,a,h){this.h=e,this.l=r,this.m=a,this.g=h,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():($n(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class kr{constructor(e,r,a,h){this.h=e,this.l=r,this.m=a,this.g=h}getToken(){return Promise.resolve(new Bi(this.h,this.l,this.m,this.g))}start(e,r){e.enqueueRetryable(()=>r(yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ss{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Eu{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,r){const a=m=>{null!=m.error&&zt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const b=m.token!==this.A;return this.A=m.token,zt("FirebaseAppCheckTokenProvider",`Received ${b?"new":"existing"} token.`),b?r(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable(()=>a(m))};const h=m=>{zt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.appCheck.addTokenListener(this.o)};this.T.onInit(m=>h(m)),setTimeout(()=>{if(!this.appCheck){const m=this.T.getImmediate({optional:!0});m?h(m):zt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?($n("string"==typeof r.token),this.A=r.token,new ss(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Fs(s){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(s);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(r);else for(let a=0;a<s;a++)r[a]=Math.floor(256*Math.random());return r}class _a{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let a="";for(;a.length<20;){const h=Fs(40);for(let m=0;m<h.length;++m)a.length<20&&h[m]<r&&(a+=e.charAt(h[m]%e.length))}return a}}function gr(s,e){return s<e?-1:s>e?1:0}function Bo(s,e,r){return s.length===e.length&&s.every((a,h)=>r(a,e[h]))}function ao(s){return s+"\0"}class hi{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new en(ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new en(ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new en(ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new en(ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return hi.fromMillis(Date.now())}static fromDate(e){return hi.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),a=Math.floor(1e6*(e-1e3*r));return new hi(r,a)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?gr(this.nanoseconds,e.nanoseconds):gr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class fr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new fr(e)}static min(){return new fr(new hi(0,0))}static max(){return new fr(new hi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ko{constructor(e,r,a){void 0===r?r=0:r>e.length&&Ln(),void 0===a?a=e.length-r:a>e.length-r&&Ln(),this.segments=e,this.offset=r,this.len=a}get length(){return this.len}isEqual(e){return 0===Ko.comparator(this,e)}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Ko?e.forEach(a=>{r.push(a)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,a=this.limit();r<a;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const a=Math.min(e.length,r.length);for(let h=0;h<a;h++){const m=e.get(h),b=r.get(h);if(m<b)return-1;if(m>b)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class ei extends Ko{construct(e,r,a){return new ei(e,r,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const r=[];for(const a of e){if(a.indexOf("//")>=0)throw new en(ft.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);r.push(...a.split("/").filter(h=>h.length>0))}return new ei(r)}static emptyPath(){return new ei([])}}const Iu=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fi extends Ko{construct(e,r,a){return new fi(e,r,a)}static isValidIdentifier(e){return Iu.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new fi(["__name__"])}static fromServerFormat(e){const r=[];let a="",h=0;const m=()=>{if(0===a.length)throw new en(ft.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(a),a=""};let b=!1;for(;h<e.length;){const M=e[h];if("\\"===M){if(h+1===e.length)throw new en(ft.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const X=e[h+1];if("\\"!==X&&"."!==X&&"`"!==X)throw new en(ft.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=X,h+=2}else"`"===M?(b=!b,h++):"."!==M||b?(a+=M,h++):(m(),h++)}if(m(),b)throw new en(ft.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fi(r)}static emptyPath(){return new fi([])}}class An{constructor(e){this.path=e}static fromPath(e){return new An(ei.fromString(e))}static fromName(e){return new An(ei.fromString(e).popFirst(5))}static empty(){return new An(ei.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ei.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,r){return ei.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new An(new ei(e.slice()))}}class va{constructor(e,r,a,h){this.indexId=e,this.collectionGroup=r,this.fields=a,this.indexState=h}}function Zo(s){return s.fields.find(e=>2===e.kind)}function os(s){return s.fields.filter(e=>2!==e.kind)}va.UNKNOWN_ID=-1;class Qo{constructor(e,r){this.fieldPath=e,this.kind=r}}class Ea{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Ea(0,A.min())}}function lo(s,e){const r=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,h=fr.fromTimestamp(1e9===a?new hi(r+1,0):new hi(r,a));return new A(h,An.empty(),e)}function F(s){return new A(s.readTime,s.key,-1)}class A{constructor(e,r,a){this.readTime=e,this.documentKey=r,this.largestBatchId=a}static min(){return new A(fr.min(),An.empty(),-1)}static max(){return new A(fr.max(),An.empty(),-1)}}function S(s,e){let r=s.readTime.compareTo(e.readTime);return 0!==r?r:(r=An.comparator(s.documentKey,e.documentKey),0!==r?r:gr(s.largestBatchId,e.largestBatchId))}const $="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class J{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ye(s){return je.apply(this,arguments)}function je(){return je=(0,_.Z)(function*(s){if(s.code!==ft.FAILED_PRECONDITION||s.message!==$)throw s;zt("LocalStore","Unexpectedly lost primary lease")}),je.apply(this,arguments)}class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Ln(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new me((a,h)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(a,h)},this.catchCallback=m=>{this.wrapFailure(r,m).next(a,h)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof me?r:me.resolve(r)}catch(r){return me.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):me.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):me.reject(r)}static resolve(e){return new me((r,a)=>{r(e)})}static reject(e){return new me((r,a)=>{a(e)})}static waitFor(e){return new me((r,a)=>{let h=0,m=0,b=!1;e.forEach(M=>{++h,M.next(()=>{++m,b&&m===h&&r()},X=>a(X))}),b=!0,m===h&&r()})}static or(e){let r=me.resolve(!1);for(const a of e)r=r.next(h=>h?me.resolve(h):a());return r}static forEach(e,r){const a=[];return e.forEach((h,m)=>{a.push(r.call(this,h,m))}),this.waitFor(a)}static mapArray(e,r){return new me((a,h)=>{const m=e.length,b=new Array(m);let M=0;for(let X=0;X<m;X++){const ie=X;r(e[ie]).next(xe=>{b[ie]=xe,++M,M===m&&a(b)},xe=>h(xe))}})}static doWhile(e,r){return new me((a,h)=>{const m=()=>{!0===e()?r().next(()=>{m()},h):a()};m()})}}class Wt{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.P=new Ir,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{r.error?this.P.reject(new Gn(e,r.error)):this.P.resolve()},this.transaction.onerror=a=>{const h=Es(a.target.error);this.P.reject(new Gn(e,h))}}static open(e,r,a,h){try{return new Wt(r,e.transaction(h,a))}catch(m){throw new Gn(r,m)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(zt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const r=this.transaction.objectStore(e);return new wr(r)}}class xn{constructor(e,r,a){this.name=e,this.version=r,this.S=a,12.2===xn.D((0,ae.z$)())&&nr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return zt("SimpleDb","Removing database:",e),hs(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,ae.hl)())return!1;if(xn.N())return!0;const e=(0,ae.z$)(),r=xn.D(e),a=0<r&&r<10,h=xn.k(e),m=0<h&&h<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||a||m)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,r){return e.store(r)}static D(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(a)}static k(e){const r=e.match(/Android ([\d.]+)/i),a=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(a)}F(e){var r=this;return(0,_.Z)(function*(){return r.db||(zt("SimpleDb","Opening database:",r.name),r.db=yield new Promise((a,h)=>{const m=indexedDB.open(r.name,r.version);m.onsuccess=b=>{a(b.target.result)},m.onblocked=()=>{h(new Gn(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},m.onerror=b=>{const M=b.target.error;h("VersionError"===M.name?new en(ft.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===M.name?new en(ft.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+M):new Gn(e,M))},m.onupgradeneeded=b=>{zt("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',b.oldVersion),r.S.$(b.target.result,m.transaction,b.oldVersion,r.version).next(()=>{zt("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.B&&(r.db.onversionchange=a=>r.B(a)),r.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=r=>e(r))}runTransaction(e,r,a,h){var m=this;return(0,_.Z)(function*(){const b="readonly"===r;let M=0;for(;;){++M;try{m.db=yield m.F(e);const X=Wt.open(m.db,e,b?"readonly":"readwrite",a),ie=h(X).next(xe=>(X.V(),xe)).catch(xe=>(X.abort(xe),me.reject(xe))).toPromise();return ie.catch(()=>{}),yield X.v,ie}catch(X){const ie=X,xe="FirebaseError"!==ie.name&&M<3;if(zt("SimpleDb","Transaction failed with error:",ie.message,"Retrying:",xe),m.close(),!xe)return Promise.reject(ie)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class $r{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return hs(this.U.delete())}}class Gn extends en{constructor(e,r){super(ft.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function jr(s){return"IndexedDbTransactionError"===s.name}class wr{constructor(e){this.store=e}put(e,r){let a;return void 0!==r?(zt("SimpleDb","PUT",this.store.name,e,r),a=this.store.put(r,e)):(zt("SimpleDb","PUT",this.store.name,"<auto-key>",e),a=this.store.put(e)),hs(a)}add(e){return zt("SimpleDb","ADD",this.store.name,e,e),hs(this.store.add(e))}get(e){return hs(this.store.get(e)).next(r=>(void 0===r&&(r=null),zt("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return zt("SimpleDb","DELETE",this.store.name,e),hs(this.store.delete(e))}count(){return zt("SimpleDb","COUNT",this.store.name),hs(this.store.count())}W(e,r){const a=this.options(e,r);if(a.index||"function"!=typeof this.store.getAll){const h=this.cursor(a),m=[];return this.H(h,(b,M)=>{m.push(M)}).next(()=>m)}{const h=this.store.getAll(a.range);return new me((m,b)=>{h.onerror=M=>{b(M.target.error)},h.onsuccess=M=>{m(M.target.result)}})}}J(e,r){const a=this.store.getAll(e,null===r?void 0:r);return new me((h,m)=>{a.onerror=b=>{m(b.target.error)},a.onsuccess=b=>{h(b.target.result)}})}Y(e,r){zt("SimpleDb","DELETE ALL",this.store.name);const a=this.options(e,r);a.X=!1;const h=this.cursor(a);return this.H(h,(m,b,M)=>M.delete())}Z(e,r){let a;r?a=e:(a={},r=e);const h=this.cursor(a);return this.H(h,r)}tt(e){const r=this.cursor({});return new me((a,h)=>{r.onerror=m=>{const b=Es(m.target.error);h(b)},r.onsuccess=m=>{const b=m.target.result;b?e(b.primaryKey,b.value).next(M=>{M?b.continue():a()}):a()}})}H(e,r){const a=[];return new me((h,m)=>{e.onerror=b=>{m(b.target.error)},e.onsuccess=b=>{const M=b.target.result;if(!M)return void h();const X=new $r(M),ie=r(M.primaryKey,M.value,X);if(ie instanceof me){const xe=ie.catch(et=>(X.done(),me.reject(et)));a.push(xe)}X.isDone?h():null===X.G?M.continue():M.continue(X.G)}}).next(()=>me.waitFor(a))}options(e,r){let a;return void 0!==e&&("string"==typeof e?a=e:r=e),{index:a,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const a=this.store.index(e.index);return e.X?a.openKeyCursor(e.range,r):a.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function hs(s){return new me((e,r)=>{s.onsuccess=a=>{e(a.target.result)},s.onerror=a=>{const h=Es(a.target.error);r(h)}})}let uo=!1;function Es(s){const e=xn.D((0,ae.z$)());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(r)>=0){const a=new en("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return uo||(uo=!0,setTimeout(()=>{throw a},0)),a}}return s}class Jr{constructor(e,r){this.asyncQueue=e,this.et=r,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var r=this;zt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,_.Z)(function*(){r.task=null;try{zt("IndexBackiller",`Documents written: ${yield r.et.st()}`)}catch(a){jr(a)?zt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",a):yield ye(a)}yield r.nt(6e4)}))}}class aa{constructor(e,r){this.localStore=e,this.persistence=r}st(e=50){var r=this;return(0,_.Z)(function*(){return r.persistence.runTransaction("Backfill Indexes","readwrite-primary",a=>r.it(a,e))})()}it(e,r){const a=new Set;let h=r,m=!0;return me.doWhile(()=>!0===m&&h>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(b=>{if(null!==b&&!a.has(b))return zt("IndexBackiller",`Processing collection: ${b}`),this.rt(e,b,h).next(M=>{h-=M,a.add(b)});m=!1})).next(()=>r-h)}rt(e,r,a){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(h=>this.localStore.localDocuments.getNextDocuments(e,r,h,a).next(m=>{const b=m.changes;return this.localStore.indexManager.updateIndexEntries(e,b).next(()=>this.ot(h,m)).next(M=>(zt("IndexBackiller",`Updating offset: ${M}`),this.localStore.indexManager.updateCollectionGroup(e,r,M))).next(()=>b.size)}))}ot(e,r){let a=e;return r.changes.forEach((h,m)=>{const b=F(m);S(b,a)>0&&(a=b)}),new A(a.readTime,a.documentKey,Math.max(r.batchId,e.largestBatchId))}}class as{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=a=>this.ut(a),this.ct=a=>r.writeSequenceNumber(a))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Ia(s){let e=0;for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&e++;return e}function $o(s,e){for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&e(r,s[r])}function Ti(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}as.at=-1;class Di{constructor(e,r){this.comparator=e,this.root=r||rr.EMPTY}insert(e,r){return new Di(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,rr.BLACK,null,null))}remove(e){return new Di(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(0===a)return r.value;a<0?r=r.left:a>0&&(r=r.right)}return null}indexOf(e){let r=0,a=this.root;for(;!a.isEmpty();){const h=this.comparator(e,a.key);if(0===h)return r+a.left.size;h<0?a=a.left:(r+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,a)=>(e(r,a),!1))}toString(){const e=[];return this.inorderTraversal((r,a)=>(e.push(`${r}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ba(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ba(this.root,e,this.comparator,!1)}getReverseIterator(){return new ba(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ba(this.root,e,this.comparator,!0)}}class ba{constructor(e,r,a,h){this.isReverse=h,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=r?a(e.key,r):1,r&&h&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(0===m){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rr{constructor(e,r,a,h,m){this.key=e,this.value=r,this.color=null!=a?a:rr.RED,this.left=null!=h?h:rr.EMPTY,this.right=null!=m?m:rr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,a,h,m){return new rr(null!=e?e:this.key,null!=r?r:this.value,null!=a?a:this.color,null!=h?h:this.left,null!=m?m:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,a){let h=this;const m=a(e,h.key);return h=m<0?h.copy(null,null,null,h.left.insert(e,r,a),null):0===m?h.copy(null,r,null,null,null):h.copy(null,null,null,null,h.right.insert(e,r,a)),h.fixUp()}removeMin(){if(this.left.isEmpty())return rr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let a,h=this;if(r(e,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(e,r),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),0===r(e,h.key)){if(h.right.isEmpty())return rr.EMPTY;a=h.right.min(),h=h.copy(a.key,a.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(e,r))}return h.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ln();const e=this.left.check();if(e!==this.right.check())throw Ln();return e+(this.isRed()?0:1)}}rr.EMPTY=null,rr.RED=!0,rr.BLACK=!1,rr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ln()}get value(){throw Ln()}get color(){throw Ln()}get left(){throw Ln()}get right(){throw Ln()}copy(s,e,r,a,h){return this}insert(s,e,r){return new rr(s,e)}remove(s,e){return this}isEmpty(){return!0}inorderTraversal(s){return!1}reverseTraversal(s){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ji{constructor(e){this.comparator=e,this.data=new Di(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,a)=>(e(r),!1))}forEachInRange(e,r){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const h=a.getNext();if(this.comparator(h.key,e[1])>=0)return;r(h.key)}}forEachWhile(e,r){let a;for(a=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Zl(this.data.getIterator())}getIteratorFrom(e){return new Zl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(a=>{r=r.add(a)}),r}isEqual(e){if(!(e instanceof ji)||this.size!==e.size)return!1;const r=this.data.getIterator(),a=e.data.getIterator();for(;r.hasNext();){const h=r.getNext().key,m=a.getNext().key;if(0!==this.comparator(h,m))return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new ji(this.comparator);return r.data=e,r}}class Zl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Wu(s){return s.hasNext()?s.getNext():void 0}class ii{constructor(e){this.fields=e,e.sort(fi.comparator)}static empty(){return new ii([])}unionWith(e){let r=new ji(fi.comparator);for(const a of this.fields)r=r.add(a);for(const a of e)r=r.add(a);return new ii(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Bo(this.fields,e.fields,(r,a)=>r.isEqual(a))}}function Gu(){return"undefined"!=typeof atob}class Ws{constructor(e){this.binaryString=e}static fromBase64String(e){const r=atob(e);return new Ws(r)}static fromUint8Array(e){const r=function(a){let h="";for(let m=0;m<a.length;++m)h+=String.fromCharCode(a[m]);return h}(e);return new Ws(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let a=0;a<e.length;a++)r[a]=e.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return gr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ws.EMPTY_BYTE_STRING=new Ws("");const Mc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yo(s){if($n(!!s),"string"==typeof s){let e=0;const r=Mc.exec(s);if($n(!!r),r[1]){let h=r[1];h=(h+"000000000").substr(0,9),e=Number(h)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Si(s.seconds),nanos:Si(s.nanos)}}function Si(s){return"number"==typeof s?s:"string"==typeof s?Number(s):0}function tl(s){return"string"==typeof s?Ws.fromBase64String(s):Ws.fromUint8Array(s)}function es(s){var e,r;return"server_timestamp"===(null===(r=((null===(e=null==s?void 0:s.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function Ol(s){const e=s.mapValue.fields.__previous_value__;return es(e)?Ol(e):e}function ja(s){const e=yo(s.mapValue.fields.__local_write_time__.timestampValue);return new hi(e.seconds,e.nanos)}class Pl{constructor(e,r,a,h,m,b,M,X){this.databaseId=e,this.appId=r,this.persistenceKey=a,this.host=h,this.ssl=m,this.forceLongPolling=b,this.autoDetectLongPolling=M,this.useFetchStreams=X}}class la{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new la("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof la&&e.projectId===this.projectId&&e.database===this.database}}function ls(s){return null==s}function ws(s){return 0===s&&1/s==-1/0}function Uo(s){return"number"==typeof s&&Number.isInteger(s)&&!ws(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const co={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},_o={nullValue:"NULL_VALUE"};function ua(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?es(s)?4:kl(s)?9007199254740991:10:Ln()}function Ha(s,e){if(s===e)return!0;const r=ua(s);if(r!==ua(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return ja(s).isEqual(ja(e));case 3:return function(a,h){if("string"==typeof a.timestampValue&&"string"==typeof h.timestampValue&&a.timestampValue.length===h.timestampValue.length)return a.timestampValue===h.timestampValue;const m=yo(a.timestampValue),b=yo(h.timestampValue);return m.seconds===b.seconds&&m.nanos===b.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return h=e,tl(s.bytesValue).isEqual(tl(h.bytesValue));case 7:return s.referenceValue===e.referenceValue;case 8:return function(a,h){return Si(a.geoPointValue.latitude)===Si(h.geoPointValue.latitude)&&Si(a.geoPointValue.longitude)===Si(h.geoPointValue.longitude)}(s,e);case 2:return function(a,h){if("integerValue"in a&&"integerValue"in h)return Si(a.integerValue)===Si(h.integerValue);if("doubleValue"in a&&"doubleValue"in h){const m=Si(a.doubleValue),b=Si(h.doubleValue);return m===b?ws(m)===ws(b):isNaN(m)&&isNaN(b)}return!1}(s,e);case 9:return Bo(s.arrayValue.values||[],e.arrayValue.values||[],Ha);case 10:return function(a,h){const m=a.mapValue.fields||{},b=h.mapValue.fields||{};if(Ia(m)!==Ia(b))return!1;for(const M in m)if(m.hasOwnProperty(M)&&(void 0===b[M]||!Ha(m[M],b[M])))return!1;return!0}(s,e);default:return Ln()}var h}function gl(s,e){return void 0!==(s.values||[]).find(r=>Ha(r,e))}function nl(s,e){if(s===e)return 0;const r=ua(s),a=ua(e);if(r!==a)return gr(r,a);switch(r){case 0:case 9007199254740991:return 0;case 1:return gr(s.booleanValue,e.booleanValue);case 2:return function(h,m){const b=Si(h.integerValue||h.doubleValue),M=Si(m.integerValue||m.doubleValue);return b<M?-1:b>M?1:b===M?0:isNaN(b)?isNaN(M)?0:-1:1}(s,e);case 3:return fd(s.timestampValue,e.timestampValue);case 4:return fd(ja(s),ja(e));case 5:return gr(s.stringValue,e.stringValue);case 6:return function(h,m){const b=tl(h),M=tl(m);return b.compareTo(M)}(s.bytesValue,e.bytesValue);case 7:return function(h,m){const b=h.split("/"),M=m.split("/");for(let X=0;X<b.length&&X<M.length;X++){const ie=gr(b[X],M[X]);if(0!==ie)return ie}return gr(b.length,M.length)}(s.referenceValue,e.referenceValue);case 8:return function(h,m){const b=gr(Si(h.latitude),Si(m.latitude));return 0!==b?b:gr(Si(h.longitude),Si(m.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return function(h,m){const b=h.values||[],M=m.values||[];for(let X=0;X<b.length&&X<M.length;++X){const ie=nl(b[X],M[X]);if(ie)return ie}return gr(b.length,M.length)}(s.arrayValue,e.arrayValue);case 10:return function(h,m){if(h===co.mapValue&&m===co.mapValue)return 0;if(h===co.mapValue)return 1;if(m===co.mapValue)return-1;const b=h.fields||{},M=Object.keys(b),X=m.fields||{},ie=Object.keys(X);M.sort(),ie.sort();for(let xe=0;xe<M.length&&xe<ie.length;++xe){const et=gr(M[xe],ie[xe]);if(0!==et)return et;const Nt=nl(b[M[xe]],X[ie[xe]]);if(0!==Nt)return Nt}return gr(M.length,ie.length)}(s.mapValue,e.mapValue);default:throw Ln()}}function fd(s,e){if("string"==typeof s&&"string"==typeof e&&s.length===e.length)return gr(s,e);const r=yo(s),a=yo(e),h=gr(r.seconds,a.seconds);return 0!==h?h:gr(r.nanos,a.nanos)}function Xo(s){return Gs(s)}function Gs(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(a){const h=yo(a);return`time(${h.seconds},${h.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?tl(s.bytesValue).toBase64():"referenceValue"in s?An.fromName(s.referenceValue).toString():"geoPointValue"in s?`geo(${(e=s.geoPointValue).latitude},${e.longitude})`:"arrayValue"in s?function(a){let h="[",m=!0;for(const b of a.values||[])m?m=!1:h+=",",h+=Gs(b);return h+"]"}(s.arrayValue):"mapValue"in s?function(a){const h=Object.keys(a.fields||{}).sort();let m="{",b=!0;for(const M of h)b?b=!1:m+=",",m+=`${M}:${Gs(a.fields[M])}`;return m+"}"}(s.mapValue):Ln();var e}function ca(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Ca(s){return!!s&&"integerValue"in s}function Jo(s){return!!s&&"arrayValue"in s}function Nl(s){return!!s&&"nullValue"in s}function da(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function bu(s){return!!s&&"mapValue"in s}function Wa(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&"object"==typeof s.timestampValue)return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return $o(s.mapValue.fields,(r,a)=>e.mapValue.fields[r]=Wa(a)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(s.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Wa(s.arrayValue.values[r]);return e}return Object.assign({},s)}function kl(s){return"__max__"===(((s.mapValue||{}).fields||{}).__type__||{}).stringValue}function Fl(s){return"nullValue"in s?_o:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?ca(la.empty(),An.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?{mapValue:{}}:Ln()}function wa(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?ca(la.empty(),An.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?{mapValue:{}}:"mapValue"in s?co:Ln()}function rl(s,e){const r=nl(s.value,e.value);return 0!==r?r:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function V(s,e){const r=nl(s.value,e.value);return 0!==r?r:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}class Y{constructor(e){this.value=e}static empty(){return new Y({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let a=0;a<e.length-1;++a)if(r=(r.mapValue.fields||{})[e.get(a)],!bu(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wa(r)}setAll(e){let r=fi.emptyPath(),a={},h=[];e.forEach((b,M)=>{if(!r.isImmediateParentOf(M)){const X=this.getFieldsMap(r);this.applyChanges(X,a,h),a={},h=[],r=M.popLast()}b?a[M.lastSegment()]=Wa(b):h.push(M.lastSegment())});const m=this.getFieldsMap(r);this.applyChanges(m,a,h)}delete(e){const r=this.field(e.popLast());bu(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Ha(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let a=0;a<e.length;++a){let h=r.mapValue.fields[e.get(a)];bu(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},r.mapValue.fields[e.get(a)]=h),r=h}return r.mapValue.fields}applyChanges(e,r,a){$o(r,(h,m)=>e[h]=m);for(const h of a)delete e[h]}clone(){return new Y(Wa(this.value))}}function pe(s){const e=[];return $o(s.fields,(r,a)=>{const h=new fi([r]);if(bu(a)){const m=pe(a.mapValue).fields;if(0===m.length)e.push(h);else for(const b of m)e.push(h.child(b))}else e.push(h)}),new ii(e)}class Be{constructor(e,r,a,h,m,b){this.key=e,this.documentType=r,this.version=a,this.readTime=h,this.data=m,this.documentState=b}static newInvalidDocument(e){return new Be(e,0,fr.min(),fr.min(),Y.empty(),0)}static newFoundDocument(e,r,a){return new Be(e,1,r,fr.min(),a,0)}static newNoDocument(e,r){return new Be(e,2,r,fr.min(),Y.empty(),0)}static newUnknownDocument(e,r){return new Be(e,3,r,fr.min(),Y.empty(),2)}convertToFoundDocument(e,r){return this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Y.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Y.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Be&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Be(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Et{constructor(e,r=null,a=[],h=[],m=null,b=null,M=null){this.path=e,this.collectionGroup=r,this.orderBy=a,this.filters=h,this.limit=m,this.startAt=b,this.endAt=M,this.ht=null}}function Lt(s,e=null,r=[],a=[],h=null,m=null,b=null){return new Et(s,e,r,a,h,m,b)}function un(s){const e=ln(s);if(null===e.ht){let r=e.path.canonicalString();null!==e.collectionGroup&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(a=>{return(h=a).field.canonicalString()+h.op.toString()+Xo(h.value);var h}).join(","),r+="|ob:",r+=e.orderBy.map(a=>{return(h=a).field.canonicalString()+h.dir;var h}).join(","),ls(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(a=>Xo(a)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(a=>Xo(a)).join(",")),e.ht=r}return e.ht}function or(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let h=0;h<s.orderBy.length;h++)if(!fa(s.orderBy[h],e.orderBy[h]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let h=0;h<s.filters.length;h++)if((r=s.filters[h]).op!==(a=e.filters[h]).op||!r.field.isEqual(a.field)||!Ha(r.value,a.value))return!1;var r,a;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Aa(s.startAt,e.startAt)&&Aa(s.endAt,e.endAt)}function Pr(s){return An.isDocumentKey(s.path)&&null===s.collectionGroup&&0===s.filters.length}function Mr(s,e){return s.filters.filter(r=>r instanceof ui&&r.field.isEqual(e))}function ar(s,e,r){let a=_o,h=!0;for(const m of Mr(s,e)){let b=_o,M=!0;switch(m.op){case"<":case"<=":b=Fl(m.value);break;case"==":case"in":case">=":b=m.value;break;case">":b=m.value,M=!1;break;case"!=":case"not-in":b=_o}rl({value:a,inclusive:h},{value:b,inclusive:M})<0&&(a=b,h=M)}if(null!==r)for(let m=0;m<s.orderBy.length;++m)if(s.orderBy[m].field.isEqual(e)){const b=r.position[m];rl({value:a,inclusive:h},{value:b,inclusive:r.inclusive})<0&&(a=b,h=r.inclusive);break}return{value:a,inclusive:h}}function Oi(s,e,r){let a=co,h=!0;for(const m of Mr(s,e)){let b=co,M=!0;switch(m.op){case">=":case">":b=wa(m.value),M=!1;break;case"==":case"in":case"<=":b=m.value;break;case"<":b=m.value,M=!1;break;case"!=":case"not-in":b=co}V({value:a,inclusive:h},{value:b,inclusive:M})>0&&(a=b,h=M)}if(null!==r)for(let m=0;m<s.orderBy.length;++m)if(s.orderBy[m].field.isEqual(e)){const b=r.position[m];V({value:a,inclusive:h},{value:b,inclusive:r.inclusive})>0&&(a=b,h=r.inclusive);break}return{value:a,inclusive:h}}class ui extends class{}{constructor(e,r,a){super(),this.field=e,this.op=r,this.value=a}static create(e,r,a){return e.isKeyField()?"in"===r||"not-in"===r?this.lt(e,r,a):new Ii(e,r,a):"array-contains"===r?new ha(e,a):"in"===r?new Xl(e,a):"not-in"===r?new Ta(e,a):"array-contains-any"===r?new ta(e,a):new ui(e,r,a)}static lt(e,r,a){return"in"===r?new vo(e,a):new Ql(e,a)}matches(e){const r=e.data.field(this.field);return"!="===this.op?null!==r&&this.ft(nl(r,this.value)):null!==r&&ua(this.value)===ua(r)&&this.ft(nl(r,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ln()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Ii extends ui{constructor(e,r,a){super(e,r,a),this.key=An.fromName(a.referenceValue)}matches(e){const r=An.comparator(e.key,this.key);return this.ft(r)}}class vo extends ui{constructor(e,r){super(e,"in",r),this.keys=ea(0,r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class Ql extends ui{constructor(e,r){super(e,"not-in",r),this.keys=ea(0,r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function ea(s,e){var r;return((null===(r=e.arrayValue)||void 0===r?void 0:r.values)||[]).map(a=>An.fromName(a.referenceValue))}class ha extends ui{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Jo(r)&&gl(r.arrayValue,this.value)}}class Xl extends ui{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return null!==r&&gl(this.value.arrayValue,r)}}class Ta extends ui{constructor(e,r){super(e,"not-in",r)}matches(e){if(gl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return null!==r&&!gl(this.value.arrayValue,r)}}class ta extends ui{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Jo(r)||!r.arrayValue.values)&&r.arrayValue.values.some(a=>gl(this.value.arrayValue,a))}}class Mo{constructor(e,r){this.position=e,this.inclusive=r}}class Da{constructor(e,r="asc"){this.field=e,this.dir=r}}function fa(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}function Sa(s,e,r){let a=0;for(let h=0;h<s.position.length;h++){const m=e[h],b=s.position[h];if(a=m.field.isKeyField()?An.comparator(An.fromName(b.referenceValue),r.key):nl(b,r.data.field(m.field)),"desc"===m.dir&&(a*=-1),0!==a)break}return a}function Aa(s,e){if(null===s)return null===e;if(null===e||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let r=0;r<s.position.length;r++)if(!Ha(s.position[r],e.position[r]))return!1;return!0}class ml{constructor(e,r=null,a=[],h=[],m=null,b="F",M=null,X=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=a,this.filters=h,this.limit=m,this.limitType=b,this.startAt=M,this.endAt=X,this._t=null,this.wt=null}}function Hi(s,e,r,a,h,m,b,M){return new ml(s,e,r,a,h,m,b,M)}function zs(s){return new ml(s)}function yl(s){return 0===s.filters.length&&null===s.limit&&null==s.startAt&&null==s.endAt&&(0===s.explicitOrderBy.length||1===s.explicitOrderBy.length&&s.explicitOrderBy[0].field.isKeyField())}function Cu(s){return s.explicitOrderBy.length>0?s.explicitOrderBy[0].field:null}function wu(s){for(const e of s.filters)if(e.dt())return e.field;return null}function zu(s){return null!==s.collectionGroup}function Eo(s){const e=ln(s);if(null===e._t){e._t=[];const r=wu(e),a=Cu(e);if(null!==r&&null===a)r.isKeyField()||e._t.push(new Da(r)),e._t.push(new Da(fi.keyField(),"asc"));else{let h=!1;for(const m of e.explicitOrderBy)e._t.push(m),m.field.isKeyField()&&(h=!0);if(!h){const m=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Da(fi.keyField(),m))}}}return e._t}function Ts(s){const e=ln(s);if(!e.wt)if("F"===e.limitType)e.wt=Lt(e.path,e.collectionGroup,Eo(e),e.filters,e.limit,e.startAt,e.endAt);else{const r=[];for(const m of Eo(e))r.push(new Da(m.field,"desc"===m.dir?"asc":"desc"));const a=e.endAt?new Mo(e.endAt.position,e.endAt.inclusive):null,h=e.startAt?new Mo(e.startAt.position,e.startAt.inclusive):null;e.wt=Lt(e.path,e.collectionGroup,r,e.filters,e.limit,a,h)}return e.wt}function Ga(s,e,r){return new ml(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,r,s.startAt,s.endAt)}function Ll(s,e){return or(Ts(s),Ts(e))&&s.limitType===e.limitType}function il(s){return`${un(Ts(s))}|lt:${s.limitType}`}function Tu(s){return`Query(target=${function(s){let e=s.path.canonicalString();return null!==s.collectionGroup&&(e+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(e+=`, filters: [${s.filters.map(r=>{return`${(a=r).field.canonicalString()} ${a.op} ${Xo(a.value)}`;var a}).join(", ")}]`),ls(s.limit)||(e+=", limit: "+s.limit),s.orderBy.length>0&&(e+=`, orderBy: [${s.orderBy.map(r=>{return`${(a=r).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),s.startAt&&(e+=", startAt: ",e+=s.startAt.inclusive?"b:":"a:",e+=s.startAt.position.map(r=>Xo(r)).join(",")),s.endAt&&(e+=", endAt: ",e+=s.endAt.inclusive?"a:":"b:",e+=s.endAt.position.map(r=>Xo(r)).join(",")),`Target(${e})`}(Ts(s))}; limitType=${s.limitType})`}function Du(s,e){return e.isFoundDocument()&&function(r,a){const h=a.key.path;return null!==r.collectionGroup?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(h):An.isDocumentKey(r.path)?r.path.isEqual(h):r.path.isImmediateParentOf(h)}(s,e)&&function(r,a){for(const h of r.explicitOrderBy)if(!h.field.isKeyField()&&null===a.data.field(h.field))return!1;return!0}(s,e)&&function(r,a){for(const h of r.filters)if(!h.matches(a))return!1;return!0}(s,e)&&(a=e,!((r=s).startAt&&!function(h,m,b){const M=Sa(h,m,b);return h.inclusive?M<=0:M<0}(r.startAt,Eo(r),a)||r.endAt&&!function(h,m,b){const M=Sa(h,m,b);return h.inclusive?M>=0:M>0}(r.endAt,Eo(r),a)));var r,a}function Oc(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function ah(s){return(e,r)=>{let a=!1;for(const h of Eo(s)){const m=lh(h,e,r);if(0!==m)return m;a=a||h.field.isKeyField()}return 0}}function lh(s,e,r){const a=s.field.isKeyField()?An.comparator(e.key,r.key):function(h,m,b){const M=m.data.field(h),X=b.data.field(h);return null!==M&&null!==X?nl(M,X):Ln()}(s.field,e,r);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return Ln()}}function Su(s,e){if(s.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ws(e)?"-0":e}}function qu(s){return{integerValue:""+s}}function Jl(s,e){return Uo(e)?qu(e):Su(s,e)}class Yu{constructor(){this._=void 0}}function Pc(s,e,r){return s instanceof Vl?function(a,h){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return h&&(m.fields.__previous_value__=h),{mapValue:m}}(r,e):s instanceof sl?pd(s,e):s instanceof Bl?_l(s,e):function(a,h){const m=Ku(a,h),b=eu(m)+eu(a.yt);return Ca(m)&&Ca(a.yt)?qu(b):Su(a.It,b)}(s,e)}function If(s,e,r){return s instanceof sl?pd(s,e):s instanceof Bl?_l(s,e):r}function Ku(s,e){return s instanceof vl?Ca(r=e)||(a=r)&&"doubleValue"in a?e:{integerValue:0}:null;var a,r}class Vl extends Yu{}class sl extends Yu{constructor(e){super(),this.elements=e}}function pd(s,e){const r=gd(e);for(const a of s.elements)r.some(h=>Ha(h,a))||r.push(a);return{arrayValue:{values:r}}}class Bl extends Yu{constructor(e){super(),this.elements=e}}function _l(s,e){let r=gd(e);for(const a of s.elements)r=r.filter(h=>!Ha(h,a));return{arrayValue:{values:r}}}class vl extends Yu{constructor(e,r){super(),this.It=e,this.yt=r}}function eu(s){return Si(s.integerValue||s.doubleValue)}function gd(s){return Jo(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class $l{constructor(e,r){this.field=e,this.transform=r}}class za{constructor(e,r){this.version=e,this.transformResults=r}}class Pi{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Pi}static exists(e){return new Pi(void 0,e)}static updateTime(e){return new Pi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Au(s,e){return void 0!==s.updateTime?e.isFoundDocument()&&e.version.isEqual(s.updateTime):void 0===s.exists||s.exists===e.isFoundDocument()}class Nc{}function uh(s,e){if(!s.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return s.isNoDocument()?new nu(s.key,Pi.none()):new xu(s.key,s.data,Pi.none());{const r=s.data,a=Y.empty();let h=new ji(fi.comparator);for(let m of e.fields)if(!h.has(m)){let b=r.field(m);null===b&&m.length>1&&(m=m.popLast(),b=r.field(m)),null===b?a.delete(m):a.set(m,b),h=h.add(m)}return new El(s.key,a,new ii(h.toArray()),Pi.none())}}function kc(s,e,r){s instanceof xu?function(a,h,m){const b=a.value.clone(),M=Zu(a.fieldTransforms,h,m.transformResults);b.setAll(M),h.convertToFoundDocument(m.version,b).setHasCommittedMutations()}(s,e,r):s instanceof El?function(a,h,m){if(!Au(a.precondition,h))return void h.convertToUnknownDocument(m.version);const b=Zu(a.fieldTransforms,h,m.transformResults),M=h.data;M.setAll(Fc(a)),M.setAll(b),h.convertToFoundDocument(m.version,M).setHasCommittedMutations()}(s,e,r):e.convertToNoDocument(r.version).setHasCommittedMutations()}function tu(s,e,r,a){return s instanceof xu?function(h,m,b,M){if(!Au(h.precondition,m))return b;const X=h.value.clone(),ie=yd(h.fieldTransforms,M,m);return X.setAll(ie),m.convertToFoundDocument(m.version,X).setHasLocalMutations(),null}(s,e,r,a):s instanceof El?function(h,m,b,M){if(!Au(h.precondition,m))return b;const X=yd(h.fieldTransforms,M,m),ie=m.data;return ie.setAll(Fc(h)),ie.setAll(X),m.convertToFoundDocument(m.version,ie).setHasLocalMutations(),null===b?null:b.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(xe=>xe.field))}(s,e,r,a):(b=r,Au(s.precondition,m=e)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):b);var m,b}function Cf(s,e){let r=null;for(const a of s.fieldTransforms){const h=e.data.field(a.field),m=Ku(a.transform,h||null);null!=m&&(null===r&&(r=Y.empty()),r.set(a.field,m))}return r||null}function md(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&(a=e.fieldTransforms,!!(void 0===(r=s.fieldTransforms)&&void 0===a||r&&a&&Bo(r,a,(h,m)=>function(s,e){return s.field.isEqual(e.field)&&(a=e.transform,(r=s.transform)instanceof sl&&a instanceof sl||r instanceof Bl&&a instanceof Bl?Bo(r.elements,a.elements,Ha):r instanceof vl&&a instanceof vl?Ha(r.yt,a.yt):r instanceof Vl&&a instanceof Vl);var r,a}(h,m))))&&(0===s.type?s.value.isEqual(e.value):1!==s.type||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask));var r,a}class xu extends Nc{constructor(e,r,a,h=[]){super(),this.key=e,this.value=r,this.precondition=a,this.fieldTransforms=h,this.type=0}getFieldMask(){return null}}class El extends Nc{constructor(e,r,a,h,m=[]){super(),this.key=e,this.data=r,this.fieldMask=a,this.precondition=h,this.fieldTransforms=m,this.type=1}getFieldMask(){return this.fieldMask}}function Fc(s){const e=new Map;return s.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const a=s.data.field(r);e.set(r,a)}}),e}function Zu(s,e,r){const a=new Map;$n(s.length===r.length);for(let h=0;h<r.length;h++){const m=s[h],b=m.transform,M=e.data.field(m.field);a.set(m.field,If(b,M,r[h]))}return a}function yd(s,e,r){const a=new Map;for(const h of s){const m=h.transform,b=r.data.field(h.field);a.set(h.field,Pc(m,b,e))}return a}class nu extends Nc{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ru extends Nc{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Qu{constructor(e){this.count=e}}var Ai,ti;function _d(s){switch(s){default:return Ln();case ft.CANCELLED:case ft.UNKNOWN:case ft.DEADLINE_EXCEEDED:case ft.RESOURCE_EXHAUSTED:case ft.INTERNAL:case ft.UNAVAILABLE:case ft.UNAUTHENTICATED:return!1;case ft.INVALID_ARGUMENT:case ft.NOT_FOUND:case ft.ALREADY_EXISTS:case ft.PERMISSION_DENIED:case ft.FAILED_PRECONDITION:case ft.ABORTED:case ft.OUT_OF_RANGE:case ft.UNIMPLEMENTED:case ft.DATA_LOSS:return!0}}function Lc(s){if(void 0===s)return nr("GRPC error has no .code"),ft.UNKNOWN;switch(s){case Ai.OK:return ft.OK;case Ai.CANCELLED:return ft.CANCELLED;case Ai.UNKNOWN:return ft.UNKNOWN;case Ai.DEADLINE_EXCEEDED:return ft.DEADLINE_EXCEEDED;case Ai.RESOURCE_EXHAUSTED:return ft.RESOURCE_EXHAUSTED;case Ai.INTERNAL:return ft.INTERNAL;case Ai.UNAVAILABLE:return ft.UNAVAILABLE;case Ai.UNAUTHENTICATED:return ft.UNAUTHENTICATED;case Ai.INVALID_ARGUMENT:return ft.INVALID_ARGUMENT;case Ai.NOT_FOUND:return ft.NOT_FOUND;case Ai.ALREADY_EXISTS:return ft.ALREADY_EXISTS;case Ai.PERMISSION_DENIED:return ft.PERMISSION_DENIED;case Ai.FAILED_PRECONDITION:return ft.FAILED_PRECONDITION;case Ai.ABORTED:return ft.ABORTED;case Ai.OUT_OF_RANGE:return ft.OUT_OF_RANGE;case Ai.UNIMPLEMENTED:return ft.UNIMPLEMENTED;case Ai.DATA_LOSS:return ft.DATA_LOSS;default:return Ln()}}(ti=Ai||(Ai={}))[ti.OK=0]="OK",ti[ti.CANCELLED=1]="CANCELLED",ti[ti.UNKNOWN=2]="UNKNOWN",ti[ti.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ti[ti.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ti[ti.NOT_FOUND=5]="NOT_FOUND",ti[ti.ALREADY_EXISTS=6]="ALREADY_EXISTS",ti[ti.PERMISSION_DENIED=7]="PERMISSION_DENIED",ti[ti.UNAUTHENTICATED=16]="UNAUTHENTICATED",ti[ti.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ti[ti.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ti[ti.ABORTED=10]="ABORTED",ti[ti.OUT_OF_RANGE=11]="OUT_OF_RANGE",ti[ti.UNIMPLEMENTED=12]="UNIMPLEMENTED",ti[ti.INTERNAL=13]="INTERNAL",ti[ti.UNAVAILABLE=14]="UNAVAILABLE",ti[ti.DATA_LOSS=15]="DATA_LOSS";class Il{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),a=this.inner[r];if(void 0!==a)for(const[h,m]of a)if(this.equalsFn(h,e))return m}has(e){return void 0!==this.get(e)}set(e,r){const a=this.mapKeyFn(e),h=this.inner[a];if(void 0===h)return this.inner[a]=[[e,r]],void this.innerSize++;for(let m=0;m<h.length;m++)if(this.equalsFn(h[m][0],e))return void(h[m]=[e,r]);h.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),a=this.inner[r];if(void 0===a)return!1;for(let h=0;h<a.length;h++)if(this.equalsFn(a[h][0],e))return 1===a.length?delete this.inner[r]:a.splice(h,1),this.innerSize--,!0;return!1}forEach(e){$o(this.inner,(r,a)=>{for(const[h,m]of a)e(h,m)})}isEmpty(){return Ti(this.inner)}size(){return this.innerSize}}const ch=new Di(An.comparator);function pa(){return ch}const dh=new Di(An.comparator);function bl(...s){let e=dh;for(const r of s)e=e.insert(r.key,r);return e}function Vc(s){let e=dh;return s.forEach((r,a)=>e=e.insert(r,a.overlayedDocument)),e}function ga(){return Bc()}function hh(){return Bc()}function Bc(){return new Il(s=>s.toString(),(s,e)=>s.isEqual(e))}const vd=new Di(An.comparator),Xu=new ji(An.comparator);function zr(...s){let e=Xu;for(const r of s)e=e.add(r);return e}const wf=new ji(gr);function D(){return wf}class g{constructor(e,r,a,h,m){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=a,this.documentUpdates=h,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,r,a){const h=new Map;return h.set(e,v.createSynthesizedTargetChangeForCurrentChange(e,r,a)),new g(fr.min(),h,D(),pa(),zr())}}class v{constructor(e,r,a,h,m){this.resumeToken=e,this.current=r,this.addedDocuments=a,this.modifiedDocuments=h,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,r,a){return new v(a,r,zr(),zr(),zr())}}class x{constructor(e,r,a,h){this.Tt=e,this.removedTargetIds=r,this.key=a,this.Et=h}}class ee{constructor(e,r){this.targetId=e,this.At=r}}class he{constructor(e,r,a=Ws.EMPTY_BYTE_STRING,h=null){this.state=e,this.targetIds=r,this.resumeToken=a,this.cause=h}}class rt{constructor(){this.Rt=0,this.bt=vn(),this.Pt=Ws.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=zr(),r=zr(),a=zr();return this.bt.forEach((h,m)=>{switch(m){case 0:e=e.add(h);break;case 2:r=r.add(h);break;case 1:a=a.add(h);break;default:Ln()}}),new v(this.Pt,this.vt,e,r,a)}Nt(){this.Vt=!1,this.bt=vn()}kt(e,r){this.Vt=!0,this.bt=this.bt.insert(e,r)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Ut{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=pa(),this.qt=Nn(),this.Kt=new ji(gr)}Gt(e){for(const r of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(r,e.Et):this.jt(r,e.key,e.Et);for(const r of e.removedTargetIds)this.jt(r,e.key,e.Et)}Wt(e){this.forEachTarget(e,r=>{const a=this.zt(r);switch(e.state){case 0:this.Ht(r)&&a.Ct(e.resumeToken);break;case 1:a.Ft(),a.St||a.Nt(),a.Ct(e.resumeToken);break;case 2:a.Ft(),a.St||this.removeTarget(r);break;case 3:this.Ht(r)&&(a.$t(),a.Ct(e.resumeToken));break;case 4:this.Ht(r)&&(this.Jt(r),a.Ct(e.resumeToken));break;default:Ln()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Lt.forEach((a,h)=>{this.Ht(h)&&r(h)})}Yt(e){const r=e.targetId,a=e.At.count,h=this.Xt(r);if(h){const m=h.target;if(Pr(m))if(0===a){const b=new An(m.path);this.jt(r,b,Be.newNoDocument(b,fr.min()))}else $n(1===a);else this.Zt(r)!==a&&(this.Jt(r),this.Kt=this.Kt.add(r))}}te(e){const r=new Map;this.Lt.forEach((m,b)=>{const M=this.Xt(b);if(M){if(m.current&&Pr(M.target)){const X=new An(M.target.path);null!==this.Ut.get(X)||this.ee(b,X)||this.jt(b,X,Be.newNoDocument(X,e))}m.Dt&&(r.set(b,m.xt()),m.Nt())}});let a=zr();this.qt.forEach((m,b)=>{let M=!0;b.forEachWhile(X=>{const ie=this.Xt(X);return!ie||2===ie.purpose||(M=!1,!1)}),M&&(a=a.add(m))}),this.Ut.forEach((m,b)=>b.setReadTime(e));const h=new g(e,r,this.Kt,this.Ut,a);return this.Ut=pa(),this.qt=Nn(),this.Kt=new ji(gr),h}Qt(e,r){if(!this.Ht(e))return;const a=this.ee(e,r.key)?2:0;this.zt(e).kt(r.key,a),this.Ut=this.Ut.insert(r.key,r),this.qt=this.qt.insert(r.key,this.ne(r.key).add(e))}jt(e,r,a){if(!this.Ht(e))return;const h=this.zt(e);this.ee(e,r)?h.kt(r,1):h.Ot(r),this.qt=this.qt.insert(r,this.ne(r).delete(e)),a&&(this.Ut=this.Ut.insert(r,a))}removeTarget(e){this.Lt.delete(e)}Zt(e){const r=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let r=this.Lt.get(e);return r||(r=new rt,this.Lt.set(e,r)),r}ne(e){let r=this.qt.get(e);return r||(r=new ji(gr),this.qt=this.qt.insert(e,r)),r}Ht(e){const r=null!==this.Xt(e);return r||zt("WatchChangeAggregator","Detected inactive target",e),r}Xt(e){const r=this.Lt.get(e);return r&&r.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new rt),this.Bt.getRemoteKeysForTarget(e).forEach(r=>{this.jt(e,r,null)})}ee(e,r){return this.Bt.getRemoteKeysForTarget(e).has(r)}}function Nn(){return new Di(An.comparator)}function vn(){return new Di(An.comparator)}const ir={asc:"ASCENDING",desc:"DESCENDING"},mi={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Ni{constructor(e,r){this.databaseId=e,this.gt=r}}function io(s,e){return s.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cl(s,e){return s.gt?e.toBase64():e.toUint8Array()}function $c(s,e){return io(s,e.toTimestamp())}function qs(s){return $n(!!s),fr.fromTimestamp(function(e){const r=yo(e);return new hi(r.seconds,r.nanos)}(s))}function Ju(s,e){return(r=s,new ei(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function iu(s){const e=ei.fromString(s);return $n(vh(e)),e}function Wi(s,e){return Ju(s.databaseId,e.path)}function Io(s,e){const r=iu(e);if(r.get(1)!==s.databaseId.projectId)throw new en(ft.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+s.databaseId.projectId);if(r.get(3)!==s.databaseId.database)throw new en(ft.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+s.databaseId.database);return new An(wl(r))}function ec(s,e){return Ju(s.databaseId,e)}function tc(s){const e=iu(s);return 4===e.length?ei.emptyPath():wl(e)}function Ls(s){return new ei(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function wl(s){return $n(s.length>4&&"documents"===s.get(4)),s.popFirst(5)}function su(s,e,r){return{name:Wi(s,e),fields:r.value.mapValue.fields}}function fh(s,e,r){const a=Io(s,e.name),h=qs(e.updateTime),m=new Y({mapValue:{fields:e.fields}}),b=Be.newFoundDocument(a,h,m);return r&&b.setHasCommittedMutations(),r?b.setHasCommittedMutations():b}function Id(s,e){let r;if(e instanceof xu)r={update:su(s,e.key,e.value)};else if(e instanceof nu)r={delete:Wi(s,e.key)};else if(e instanceof El)r={update:su(s,e.key,e.data),updateMask:em(e.fieldMask)};else{if(!(e instanceof ru))return Ln();r={verify:Wi(s,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(a=>function(h,m){const b=m.transform;if(b instanceof Vl)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(b instanceof sl)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:b.elements}};if(b instanceof Bl)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:b.elements}};if(b instanceof vl)return{fieldPath:m.field.canonicalString(),increment:b.yt};throw Ln()}(0,a))),e.precondition.isNone||(r.currentDocument=void 0!==(h=e.precondition).updateTime?{updateTime:$c(s,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:Ln()),r;var h}function ou(s,e){const r=e.currentDocument?void 0!==(h=e.currentDocument).updateTime?Pi.updateTime(qs(h.updateTime)):void 0!==h.exists?Pi.exists(h.exists):Pi.none():Pi.none(),a=e.updateTransforms?e.updateTransforms.map(h=>function(m,b){let M=null;"setToServerValue"in b?($n("REQUEST_TIME"===b.setToServerValue),M=new Vl):"appendMissingElements"in b?M=new sl(b.appendMissingElements.values||[]):"removeAllFromArray"in b?M=new Bl(b.removeAllFromArray.values||[]):"increment"in b?M=new vl(m,b.increment):Ln();const X=fi.fromServerFormat(b.fieldPath);return new $l(X,M)}(s,h)):[];var h;if(e.update){const h=Io(s,e.update.name),m=new Y({mapValue:{fields:e.update.fields}});if(e.updateMask){const b=new ii((e.updateMask.fieldPaths||[]).map(ie=>fi.fromServerFormat(ie)));return new El(h,m,b,r,a)}return new xu(h,m,r,a)}if(e.delete){const h=Io(s,e.delete);return new nu(h,r)}if(e.verify){const h=Io(s,e.verify);return new ru(h,r)}return Ln()}function ph(s,e){return{documents:[ec(s,e.path)]}}function gh(s,e){const r={structuredQuery:{}},a=e.path;null!==e.collectionGroup?(r.parent=ec(s,a),r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r.parent=ec(s,a.popLast()),r.structuredQuery.from=[{collectionId:a.lastSegment()}]);const h=function(X){if(0===X.length)return;const ie=X.map(xe=>function(et){if("=="===et.op){if(da(et.value))return{unaryFilter:{field:jc(et.field),op:"IS_NAN"}};if(Nl(et.value))return{unaryFilter:{field:jc(et.field),op:"IS_NULL"}}}else if("!="===et.op){if(da(et.value))return{unaryFilter:{field:jc(et.field),op:"IS_NOT_NAN"}};if(Nl(et.value))return{unaryFilter:{field:jc(et.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jc(et.field),op:yh(et.op),value:et.value}}}(xe));return 1===ie.length?ie[0]:{compositeFilter:{op:"AND",filters:ie}}}(e.filters);h&&(r.structuredQuery.where=h);const m=function(X){if(0!==X.length)return X.map(ie=>{return{field:jc((xe=ie).field),direction:Cd(xe.dir)};var xe})}(e.orderBy);m&&(r.structuredQuery.orderBy=m);const b=(ie=e.limit,s.gt||ls(ie)?ie:{value:ie});var ie,M,X;return null!==b&&(r.structuredQuery.limit=b),e.startAt&&(r.structuredQuery.startAt={before:(M=e.startAt).inclusive,values:M.position}),e.endAt&&(r.structuredQuery.endAt={before:!(X=e.endAt).inclusive,values:X.position}),r}function Uc(s){let e=tc(s.parent);const r=s.structuredQuery,a=r.from?r.from.length:0;let h=null;if(a>0){$n(1===a);const xe=r.from[0];xe.allDescendants?h=xe.collectionId:e=e.child(xe.collectionId)}let m=[];r.where&&(m=bd(r.where));let b=[];r.orderBy&&(b=r.orderBy.map(xe=>{return new Da(au((et=xe).field),function(Nt){switch(Nt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(et.direction));var et}));let M=null;r.limit&&(M=function(xe){let et;return et="object"==typeof xe?xe.value:xe,ls(et)?null:et}(r.limit));let X=null;var xe;r.startAt&&(X=new Mo((xe=r.startAt).values||[],!!xe.before));let ie=null;return r.endAt&&(ie=function(xe){return new Mo(xe.values||[],!xe.before)}(r.endAt)),Hi(e,h,b,m,M,"F",X,ie)}function bd(s){return s?void 0!==s.unaryFilter?[_h(s)]:void 0!==s.fieldFilter?[Op(s)]:void 0!==s.compositeFilter?s.compositeFilter.filters.map(e=>bd(e)).reduce((e,r)=>e.concat(r)):Ln():[]}function Cd(s){return ir[s]}function yh(s){return mi[s]}function jc(s){return{fieldPath:s.canonicalString()}}function au(s){return fi.fromServerFormat(s.fieldPath)}function Op(s){return ui.create(au(s.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ln()}}(s.fieldFilter.op),s.fieldFilter.value)}function _h(s){switch(s.unaryFilter.op){case"IS_NAN":const e=au(s.unaryFilter.field);return ui.create(e,"==",{doubleValue:NaN});case"IS_NULL":const r=au(s.unaryFilter.field);return ui.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=au(s.unaryFilter.field);return ui.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=au(s.unaryFilter.field);return ui.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Ln()}}function em(s){const e=[];return s.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function vh(s){return s.length>=4&&"projects"===s.get(0)&&"databases"===s.get(2)}function Ys(s){let e="";for(let r=0;r<s.length;r++)e.length>0&&(e=Df(e)),e=tm(s.get(r),e);return Df(e)}function tm(s,e){let r=e;const a=s.length;for(let h=0;h<a;h++){const m=s.charAt(h);switch(m){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=m}}return r}function Df(s){return s+"\x01\x01"}function Ul(s){const e=s.length;if($n(e>=2),2===e)return $n("\x01"===s.charAt(0)&&"\x01"===s.charAt(1)),ei.emptyPath();const r=e-2,a=[];let h="";for(let m=0;m<e;){const b=s.indexOf("\x01",m);switch((b<0||b>r)&&Ln(),s.charAt(b+1)){case"\x01":const M=s.substring(m,b);let X;0===h.length?X=M:(h+=M,X=h,h=""),a.push(X);break;case"\x10":h+=s.substring(m,b),h+="\0";break;case"\x11":h+=s.substring(m,b+1);break;default:Ln()}m=b+2}return new ei(a)}const Pp=["userId","batchId"];function wd(s,e){return[s,Ys(e)]}function nc(s,e,r){return[s,Ys(e),r]}const xa={},Eh=["prefixPath","collectionGroup","readTime","documentId"],Ih=["prefixPath","collectionGroup","documentId"],rc=["collectionGroup","readTime","prefixPath","documentId"],bh=["canonicalId","targetId"],nm=["targetId","path"],Np=["path","targetId"],Ch=["collectionId","parent"],kp=["indexId","uid"],rm=["uid","sequenceNumber"],jl=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ol=["indexId","uid","orderedDocumentKey"],yy=["userId","collectionPath","documentId"],_y=["userId","collectionPath","largestBatchId"],Fp=["userId","collectionGroup","largestBatchId"],Sf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],qa=[...Sf,"documentOverlays"],Td=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],wh=Td,Dd=[...wh,"indexConfiguration","indexState","indexEntries"];class Ya extends J{constructor(e,r){super(),this.ie=e,this.currentSequenceNumber=r}}function fs(s,e){const r=ln(s);return xn.M(r.ie,e)}class Th{constructor(e,r,a,h){this.batchId=e,this.localWriteTime=r,this.baseMutations=a,this.mutations=h}applyToRemoteDocument(e,r){const a=r.mutationResults;for(let h=0;h<this.mutations.length;h++){const m=this.mutations[h];m.key.isEqual(e.key)&&kc(m,e,a[h])}}applyToLocalView(e,r){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(r=tu(a,e,r,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(r=tu(a,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const a=hh();return this.mutations.forEach(h=>{const m=e.get(h.key),b=m.overlayedDocument;let M=this.applyToLocalView(b,m.mutatedFields);M=r.has(h.key)?null:M;const X=uh(b,M);null!==X&&a.set(h.key,X),b.isValidDocument()||b.convertToNoDocument(fr.min())}),a}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),zr())}isEqual(e){return this.batchId===e.batchId&&Bo(this.mutations,e.mutations,(r,a)=>md(r,a))&&Bo(this.baseMutations,e.baseMutations,(r,a)=>md(r,a))}}class Sd{constructor(e,r,a,h){this.batch=e,this.commitVersion=r,this.mutationResults=a,this.docVersions=h}static from(e,r,a){$n(e.mutations.length===a.length);let h=vd;const m=e.mutations;for(let b=0;b<m.length;b++)h=h.insert(m[b].key,a[b].version);return new Sd(e,r,a,h)}}class ic{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ra{constructor(e,r,a,h,m=fr.min(),b=fr.min(),M=Ws.EMPTY_BYTE_STRING){this.target=e,this.targetId=r,this.purpose=a,this.sequenceNumber=h,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=b,this.resumeToken=M}withSequenceNumber(e){return new Ra(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,r){return new Ra(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ra(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class sc{constructor(e){this.re=e}}function Oo(s,e){const r=e.key,a={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:oc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())a.document={name:Wi(h=s.re,(m=e).key),fields:m.data.value.mapValue.fields,updateTime:io(h,m.version.toTimestamp())};else if(e.isNoDocument())a.noDocument={path:r.path.toArray(),readTime:Ru(e.version)};else{if(!e.isUnknownDocument())return Ln();a.unknownDocument={path:r.path.toArray(),version:Ru(e.version)}}var h,m;return a}function oc(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function Ru(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Hl(s){const e=new hi(s.seconds,s.nanoseconds);return fr.fromTimestamp(e)}function Wl(s,e){const r=(e.baseMutations||[]).map(m=>ou(s.re,m));for(let m=0;m<e.mutations.length-1;++m){const b=e.mutations[m];m+1<e.mutations.length&&void 0!==e.mutations[m+1].transform&&(b.updateTransforms=e.mutations[m+1].transform.fieldTransforms,e.mutations.splice(m+1,1),++m)}const a=e.mutations.map(m=>ou(s.re,m)),h=hi.fromMillis(e.localWriteTimeMs);return new Th(e.batchId,h,r,a)}function jo(s){const e=Hl(s.readTime),r=void 0!==s.lastLimboFreeSnapshotVersion?Hl(s.lastLimboFreeSnapshotVersion):fr.min();let a;var h;return void 0!==s.query.documents?($n(1===(h=s.query).documents.length),a=Ts(zs(tc(h.documents[0])))):a=Ts(Uc(s.query)),new Ra(a,s.targetId,0,s.lastListenSequenceNumber,e,r,Ws.fromBase64String(s.resumeToken))}function Af(s,e){const r=Ru(e.snapshotVersion),a=Ru(e.lastLimboFreeSnapshotVersion);let h;h=Pr(e.target)?ph(s.re,e.target):gh(s.re,e.target);const m=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:un(e.target),readTime:r,resumeToken:m,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:a,query:h}}function xf(s){const e=Uc({parent:s.parent,structuredQuery:s.structuredQuery});return"LAST"===s.limitType?Ga(e,e.limit,"L"):e}function Dh(s,e){return new ic(e.largestBatchId,ou(s.re,e.overlayMutation))}function Lp(s,e){const r=e.path.lastSegment();return[s,Ys(e.path.popLast()),r]}function Vp(s,e,r,a){return{indexId:s,uid:e.uid||"",sequenceNumber:r,readTime:Ru(a.readTime),documentKey:Ys(a.documentKey.path),largestBatchId:a.largestBatchId}}class Bp{getBundleMetadata(e,r){return Ad(e).get(r).next(a=>{if(a)return{id:(h=a).bundleId,createTime:Hl(h.createTime),version:h.version};var h})}saveBundleMetadata(e,r){return Ad(e).put({bundleId:(a=r).id,createTime:Ru(qs(a.createTime)),version:a.version});var a}getNamedQuery(e,r){return ac(e).get(r).next(a=>{if(a)return{name:(h=a).name,query:xf(h.bundledQuery),readTime:Hl(h.readTime)};var h})}saveNamedQuery(e,r){return ac(e).put({name:(a=r).name,readTime:Ru(qs(a.readTime)),bundledQuery:a.bundledQuery});var a}}function Ad(s){return fs(s,"bundles")}function ac(s){return fs(s,"namedQueries")}class lc{constructor(e,r){this.It=e,this.userId=r}static oe(e,r){return new lc(e,r.uid||"")}getOverlay(e,r){return Hc(e).get(Lp(this.userId,r)).next(a=>a?Dh(this.It,a):null)}getOverlays(e,r){const a=ga();return me.forEach(r,h=>this.getOverlay(e,h).next(m=>{null!==m&&a.set(h,m)})).next(()=>a)}saveOverlays(e,r,a){const h=[];return a.forEach((m,b)=>{const M=new ic(r,b);h.push(this.ue(e,M))}),me.waitFor(h)}removeOverlaysForBatchId(e,r,a){const h=new Set;r.forEach(b=>h.add(Ys(b.getCollectionPath())));const m=[];return h.forEach(b=>{const M=IDBKeyRange.bound([this.userId,b,a],[this.userId,b,a+1],!1,!0);m.push(Hc(e).Y("collectionPathOverlayIndex",M))}),me.waitFor(m)}getOverlaysForCollection(e,r,a){const h=ga(),m=Ys(r),b=IDBKeyRange.bound([this.userId,m,a],[this.userId,m,Number.POSITIVE_INFINITY],!0);return Hc(e).W("collectionPathOverlayIndex",b).next(M=>{for(const X of M){const ie=Dh(this.It,X);h.set(ie.getKey(),ie)}return h})}getOverlaysForCollectionGroup(e,r,a,h){const m=ga();let b;const M=IDBKeyRange.bound([this.userId,r,a],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Hc(e).Z({index:"collectionGroupOverlayIndex",range:M},(X,ie,xe)=>{const et=Dh(this.It,ie);m.size()<h||et.largestBatchId===b?(m.set(et.getKey(),et),b=et.largestBatchId):xe.done()}).next(()=>m)}ue(e,r){return Hc(e).put(function(a,h,m){const[b,M,X]=Lp(h,m.mutation.key);return{userId:h,collectionPath:M,documentId:X,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:Id(a.re,m.mutation)}}(this.It,this.userId,r))}}function Hc(s){return fs(s,"documentOverlays")}class uc{constructor(){}ce(e,r){this.ae(e,r),r.he()}ae(e,r){if("nullValue"in e)this.le(r,5);else if("booleanValue"in e)this.le(r,10),r.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(r,15),r.fe(Si(e.integerValue));else if("doubleValue"in e){const a=Si(e.doubleValue);isNaN(a)?this.le(r,13):(this.le(r,15),ws(a)?r.fe(0):r.fe(a))}else if("timestampValue"in e){const a=e.timestampValue;this.le(r,20),"string"==typeof a?r.de(a):(r.de(`${a.seconds||""}`),r.fe(a.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,r),this.we(r);else if("bytesValue"in e)this.le(r,30),r.me(tl(e.bytesValue)),this.we(r);else if("referenceValue"in e)this.ge(e.referenceValue,r);else if("geoPointValue"in e){const a=e.geoPointValue;this.le(r,45),r.fe(a.latitude||0),r.fe(a.longitude||0)}else"mapValue"in e?kl(e)?this.le(r,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,r),this.we(r)):"arrayValue"in e?(this.pe(e.arrayValue,r),this.we(r)):Ln()}_e(e,r){this.le(r,25),this.Ie(e,r)}Ie(e,r){r.de(e)}ye(e,r){const a=e.fields||{};this.le(r,55);for(const h of Object.keys(a))this._e(h,r),this.ae(a[h],r)}pe(e,r){const a=e.values||[];this.le(r,50);for(const h of a)this.ae(h,r)}ge(e,r){this.le(r,37),An.fromName(e).path.forEach(a=>{this.le(r,60),this.Ie(a,r)})}le(e,r){e.fe(r)}we(e){e.fe(2)}}function Sh(s){if(0===s)return 8;let e=0;return s>>4==0&&(e+=4,s<<=4),s>>6==0&&(e+=2,s<<=2),s>>7==0&&(e+=1),e}function Wc(s){const e=64-function(r){let a=0;for(let h=0;h<8;++h){const m=Sh(255&r[h]);if(a+=m,8!==m)break}return a}(s);return Math.ceil(e/8)}uc.Te=new uc;class cc{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const r=e[Symbol.iterator]();let a=r.next();for(;!a.done;)this.Ae(a.value),a=r.next();this.Re()}be(e){const r=e[Symbol.iterator]();let a=r.next();for(;!a.done;)this.Pe(a.value),a=r.next();this.ve()}Ve(e){for(const r of e){const a=r.charCodeAt(0);if(a<128)this.Ae(a);else if(a<2048)this.Ae(960|a>>>6),this.Ae(128|63&a);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a);else{const h=r.codePointAt(0);this.Ae(240|h>>>18),this.Ae(128|63&h>>>12),this.Ae(128|63&h>>>6),this.Ae(128|63&h)}}this.Re()}Se(e){for(const r of e){const a=r.charCodeAt(0);if(a<128)this.Pe(a);else if(a<2048)this.Pe(960|a>>>6),this.Pe(128|63&a);else if(r<"\ud800"||"\udbff"<r)this.Pe(480|a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a);else{const h=r.codePointAt(0);this.Pe(240|h>>>18),this.Pe(128|63&h>>>12),this.Pe(128|63&h>>>6),this.Pe(128|63&h)}}this.ve()}De(e){const r=this.Ce(e),a=Wc(r);this.xe(1+a),this.buffer[this.position++]=255&a;for(let h=r.length-a;h<r.length;++h)this.buffer[this.position++]=255&r[h]}Ne(e){const r=this.Ce(e),a=Wc(r);this.xe(1+a),this.buffer[this.position++]=~(255&a);for(let h=r.length-a;h<r.length;++h)this.buffer[this.position++]=~(255&r[h])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const r=function(h){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,h,!1),new Uint8Array(m.buffer)}(e),a=0!=(128&r[0]);r[0]^=a?255:128;for(let h=1;h<r.length;++h)r[h]^=a?255:0;return r}Ae(e){const r=255&e;0===r?(this.Oe(0),this.Oe(255)):255===r?(this.Oe(255),this.Oe(0)):this.Oe(r)}Pe(e){const r=255&e;0===r?(this.Fe(0),this.Fe(255)):255===r?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const r=e+this.position;if(r<=this.buffer.length)return;let a=2*this.buffer.length;a<r&&(a=r);const h=new Uint8Array(a);h.set(this.buffer),this.buffer=h}}class Ah{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class $p{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class xd{constructor(){this.Be=new cc,this.Le=new Ah(this.Be),this.Ue=new $p(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Gl{constructor(e,r,a,h){this.indexId=e,this.documentKey=r,this.arrayValue=a,this.directionalValue=h}Ke(){const e=this.directionalValue.length,r=0===e||255===this.directionalValue[e-1]?e+1:e,a=new Uint8Array(r);return a.set(this.directionalValue,0),r!==e?a.set([0],this.directionalValue.length):++a[a.length-1],new Gl(this.indexId,this.documentKey,this.arrayValue,a)}}function Mu(s,e){let r=s.indexId-e.indexId;return 0!==r?r:(r=Rf(s.arrayValue,e.arrayValue),0!==r?r:(r=Rf(s.directionalValue,e.directionalValue),0!==r?r:An.comparator(s.documentKey,e.documentKey)))}function Rf(s,e){for(let r=0;r<s.length&&r<e.length;++r){const a=s[r]-e[r];if(0!==a)return a}return s.length-e.length}class Up{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const r of e.filters){const a=r;a.dt()?this.je=a:this.Qe.push(a)}}We(e){const r=Zo(e);if(void 0!==r&&!this.ze(r))return!1;const a=os(e);let h=0,m=0;for(;h<a.length&&this.ze(a[h]);++h);if(h===a.length)return!0;if(void 0!==this.je){const b=a[h];if(!this.He(this.je,b)||!this.Je(this.Ge[m++],b))return!1;++h}for(;h<a.length;++h){const b=a[h];if(m>=this.Ge.length||!this.Je(this.Ge[m++],b))return!1}return!0}ze(e){for(const r of this.Qe)if(this.He(r,e))return!0;return!1}He(e,r){return!(void 0===e||!e.field.isEqual(r.fieldPath))&&2===r.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,r){return!!e.field.isEqual(r.fieldPath)&&(0===r.kind&&"asc"===e.dir||1===r.kind&&"desc"===e.dir)}}class jp{constructor(){this.Ye=new dc}addToCollectionParentIndex(e,r){return this.Ye.add(r),me.resolve()}getCollectionParents(e,r){return me.resolve(this.Ye.getEntries(r))}addFieldIndex(e,r){return me.resolve()}deleteFieldIndex(e,r){return me.resolve()}getDocumentsMatchingTarget(e,r){return me.resolve(null)}getIndexType(e,r){return me.resolve(0)}getFieldIndexes(e,r){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,r){return me.resolve(A.min())}getMinOffsetFromCollectionGroup(e,r){return me.resolve(A.min())}updateCollectionGroup(e,r,a){return me.resolve()}updateIndexEntries(e,r){return me.resolve()}}class dc{constructor(){this.index={}}add(e){const r=e.lastSegment(),a=e.popLast(),h=this.index[r]||new ji(ei.comparator),m=!h.has(a);return this.index[r]=h.add(a),m}has(e){const r=e.lastSegment(),a=e.popLast(),h=this.index[r];return h&&h.has(a)}getEntries(e){return(this.index[e]||new ji(ei.comparator)).toArray()}}const Gc=new Uint8Array(0);class xh{constructor(e,r){this.user=e,this.databaseId=r,this.Xe=new dc,this.Ze=new Il(a=>un(a),(a,h)=>or(a,h)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.Xe.has(r)){const a=r.lastSegment(),h=r.popLast();e.addOnCommittedListener(()=>{this.Xe.add(r)});const m={collectionId:a,parent:Ys(h)};return zl(e).put(m)}return me.resolve()}getCollectionParents(e,r){const a=[],h=IDBKeyRange.bound([r,""],[ao(r),""],!1,!0);return zl(e).W(h).next(m=>{for(const b of m){if(b.collectionId!==r)break;a.push(Ul(b.parent))}return a})}addFieldIndex(e,r){const a=zc(e),h={indexId:(b=r).indexId,collectionGroup:b.collectionGroup,fields:b.fields.map(M=>[M.fieldPath.canonicalString(),M.kind])};var b;delete h.indexId;const m=a.add(h);if(r.indexState){const b=Ou(e);return m.next(M=>{b.put(Vp(M,this.user,r.indexState.sequenceNumber,r.indexState.offset))})}return m.next()}deleteFieldIndex(e,r){const a=zc(e),h=Ou(e),m=Ka(e);return a.delete(r.indexId).next(()=>h.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>m.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,r){const a=Ka(e);let h=!0;const m=new Map;return me.forEach(this.tn(r),b=>this.en(e,b).next(M=>{h&&(h=!!M),m.set(b,M)})).next(()=>{if(h){let b=zr();const M=[];return me.forEach(m,(X,ie)=>{var xe;zt("IndexedDbIndexManager",`Using index ${xe=X,`id=${xe.indexId}|cg=${xe.collectionGroup}|f=${xe.fields.map(ts=>`${ts.fieldPath}:${ts.kind}`).join(",")}`} to execute ${un(r)}`);const et=function(ts,ra){const gs=Zo(ra);if(void 0===gs)return null;for(const qi of Mr(ts,gs.fieldPath))switch(qi.op){case"array-contains-any":return qi.value.arrayValue.values||[];case"array-contains":return[qi.value]}return null}(ie,X),Nt=function(ts,ra){const gs=new Map;for(const qi of os(ra))for(const ko of Mr(ts,qi.fieldPath))switch(ko.op){case"==":case"in":gs.set(qi.fieldPath.canonicalString(),ko.value);break;case"not-in":case"!=":return gs.set(qi.fieldPath.canonicalString(),ko.value),Array.from(gs.values())}return null}(ie,X),Jt=function(ts,ra){const gs=[];let qi=!0;for(const ko of os(ra)){const wp=0===ko.kind?ar(ts,ko.fieldPath,ts.startAt):Oi(ts,ko.fieldPath,ts.startAt);gs.push(wp.value),qi&&(qi=wp.inclusive)}return new Mo(gs,qi)}(ie,X),hn=function(ts,ra){const gs=[];let qi=!0;for(const ko of os(ra)){const wp=0===ko.kind?Oi(ts,ko.fieldPath,ts.endAt):ar(ts,ko.fieldPath,ts.endAt);gs.push(wp.value),qi&&(qi=wp.inclusive)}return new Mo(gs,qi)}(ie,X),zn=this.nn(X,ie,Jt),Jn=this.nn(X,ie,hn),xi=this.sn(X,ie,Nt),As=this.rn(X.indexId,et,zn,Jt.inclusive,Jn,hn.inclusive,xi);return me.forEach(As,ts=>a.J(ts,r.limit).next(ra=>{ra.forEach(gs=>{const qi=An.fromSegments(gs.documentKey);b.has(qi)||(b=b.add(qi),M.push(qi))})}))}).next(()=>M)}return me.resolve(null)})}tn(e){let r=this.Ze.get(e);return r||(r=[e],this.Ze.set(e,r),r)}rn(e,r,a,h,m,b,M){const X=(null!=r?r.length:1)*Math.max(a.length,m.length),ie=X/(null!=r?r.length:1),xe=[];for(let et=0;et<X;++et){const Nt=r?this.on(r[et/ie]):Gc,Jt=this.un(e,Nt,a[et%ie],h),hn=this.cn(e,Nt,m[et%ie],b),zn=M.map(Jn=>this.un(e,Nt,Jn,!0));xe.push(...this.createRange(Jt,hn,zn))}return xe}un(e,r,a,h){const m=new Gl(e,An.empty(),r,a);return h?m:m.Ke()}cn(e,r,a,h){const m=new Gl(e,An.empty(),r,a);return h?m.Ke():m}en(e,r){const a=new Up(r),h=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,h).next(m=>{let b=null;for(const M of m)a.We(M)&&(!b||M.fields.length>b.fields.length)&&(b=M);return b})}getIndexType(e,r){let a=2;return me.forEach(this.tn(r),h=>this.en(e,h).next(m=>{m?0!==a&&m.fields.length<function(b){let M=new ji(fi.comparator),X=!1;for(const ie of b.filters){const xe=ie;xe.field.isKeyField()||("array-contains"===xe.op||"array-contains-any"===xe.op?X=!0:M=M.add(xe.field))}for(const ie of b.orderBy)ie.field.isKeyField()||(M=M.add(ie.field));return M.size+(X?1:0)}(h)&&(a=1):a=0})).next(()=>a)}an(e,r){const a=new xd;for(const h of os(e)){const m=r.data.field(h.fieldPath);if(null==m)return null;const b=a.qe(h.kind);uc.Te.ce(m,b)}return a.$e()}on(e){const r=new xd;return uc.Te.ce(e,r.qe(0)),r.$e()}hn(e,r){const a=new xd;return uc.Te.ce(ca(this.databaseId,r),a.qe(function(h){const m=os(h);return 0===m.length?0:m[m.length-1].kind}(e))),a.$e()}sn(e,r,a){if(null===a)return[];let h=[];h.push(new xd);let m=0;for(const b of os(e)){const M=a[m++];for(const X of h)if(this.ln(r,b.fieldPath)&&Jo(M))h=this.fn(h,b,M);else{const ie=X.qe(b.kind);uc.Te.ce(M,ie)}}return this.dn(h)}nn(e,r,a){return this.sn(e,r,a.position)}dn(e){const r=[];for(let a=0;a<e.length;++a)r[a]=e[a].$e();return r}fn(e,r,a){const h=[...e],m=[];for(const b of a.arrayValue.values||[])for(const M of h){const X=new xd;X.seed(M.$e()),uc.Te.ce(b,X.qe(r.kind)),m.push(X)}return m}ln(e,r){return!!e.filters.find(a=>a instanceof ui&&a.field.isEqual(r)&&("in"===a.op||"not-in"===a.op))}getFieldIndexes(e,r){const a=zc(e),h=Ou(e);return(r?a.W("collectionGroupIndex",IDBKeyRange.bound(r,r)):a.W()).next(m=>{const b=[];return me.forEach(m,M=>h.get([M.indexId,this.uid]).next(X=>{b.push(function(ie,xe){const et=xe?new Ea(xe.sequenceNumber,new A(Hl(xe.readTime),new An(Ul(xe.documentKey)),xe.largestBatchId)):Ea.empty(),Nt=ie.fields.map(([Jt,hn])=>new Qo(fi.fromServerFormat(Jt),hn));return new va(ie.indexId,ie.collectionGroup,Nt,et)}(M,X))})).next(()=>b)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>0===r.length?null:(r.sort((a,h)=>{const m=a.indexState.sequenceNumber-h.indexState.sequenceNumber;return 0!==m?m:gr(a.collectionGroup,h.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,a){const h=zc(e),m=Ou(e);return this._n(e).next(b=>h.W("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(M=>me.forEach(M,X=>m.put(Vp(X.indexId,this.user,b,a)))))}updateIndexEntries(e,r){const a=new Map;return me.forEach(r,(h,m)=>{const b=a.get(h.collectionGroup);return(b?me.resolve(b):this.getFieldIndexes(e,h.collectionGroup)).next(M=>(a.set(h.collectionGroup,M),me.forEach(M,X=>this.wn(e,h,X).next(ie=>{const xe=this.mn(m,X);return ie.isEqual(xe)?me.resolve():this.gn(e,m,X,ie,xe)}))))})}yn(e,r,a,h){return Ka(e).put({indexId:h.indexId,uid:this.uid,arrayValue:h.arrayValue,directionalValue:h.directionalValue,orderedDocumentKey:this.hn(a,r.key),documentKey:r.key.path.toArray()})}pn(e,r,a,h){return Ka(e).delete([h.indexId,this.uid,h.arrayValue,h.directionalValue,this.hn(a,r.key),r.key.path.toArray()])}wn(e,r,a){const h=Ka(e);let m=new ji(Mu);return h.Z({index:"documentKeyIndex",range:IDBKeyRange.only([a.indexId,this.uid,this.hn(a,r)])},(b,M)=>{m=m.add(new Gl(a.indexId,r,M.arrayValue,M.directionalValue))}).next(()=>m)}mn(e,r){let a=new ji(Mu);const h=this.an(r,e);if(null==h)return a;const m=Zo(r);if(null!=m){const b=e.data.field(m.fieldPath);if(Jo(b))for(const M of b.arrayValue.values||[])a=a.add(new Gl(r.indexId,e.key,this.on(M),h))}else a=a.add(new Gl(r.indexId,e.key,Gc,h));return a}gn(e,r,a,h,m){zt("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const b=[];return function(M,X,ie,xe,et){const Nt=M.getIterator(),Jt=X.getIterator();let hn=Wu(Nt),zn=Wu(Jt);for(;hn||zn;){let Jn=!1,xi=!1;if(hn&&zn){const As=ie(hn,zn);As<0?xi=!0:As>0&&(Jn=!0)}else null!=hn?xi=!0:Jn=!0;Jn?(xe(zn),zn=Wu(Jt)):xi?(et(hn),hn=Wu(Nt)):(hn=Wu(Nt),zn=Wu(Jt))}}(h,m,Mu,M=>{b.push(this.yn(e,r,a,M))},M=>{b.push(this.pn(e,r,a,M))}),me.waitFor(b)}_n(e){let r=1;return Ou(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(a,h,m)=>{m.done(),r=h.sequenceNumber+1}).next(()=>r)}createRange(e,r,a){a=a.sort((b,M)=>Mu(b,M)).filter((b,M,X)=>!M||0!==Mu(b,X[M-1]));const h=[];h.push(e);for(const b of a){const M=Mu(b,e),X=Mu(b,r);if(0===M)h[0]=e.Ke();else if(M>0&&X<0)h.push(b),h.push(b.Ke());else if(X>0)break}h.push(r);const m=[];for(let b=0;b<h.length;b+=2)m.push(IDBKeyRange.bound([h[b].indexId,this.uid,h[b].arrayValue,h[b].directionalValue,Gc,[]],[h[b+1].indexId,this.uid,h[b+1].arrayValue,h[b+1].directionalValue,Gc,[]]));return m}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(hc)}getMinOffset(e,r){return me.mapArray(this.tn(r),a=>this.en(e,a).next(h=>h||Ln())).next(hc)}}function zl(s){return fs(s,"collectionParents")}function Ka(s){return fs(s,"indexEntries")}function zc(s){return fs(s,"indexConfiguration")}function Ou(s){return fs(s,"indexState")}function hc(s){$n(0!==s.length);let e=s[0].indexState.offset,r=e.largestBatchId;for(let a=1;a<s.length;a++){const h=s[a].indexState.offset;S(h,e)<0&&(e=h),r<h.largestBatchId&&(r=h.largestBatchId)}return new A(e.readTime,e.documentKey,r)}const qc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class bo{constructor(e,r,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=a}static withCacheSize(e){return new bo(e,bo.DEFAULT_COLLECTION_PERCENTILE,bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Mf(s,e,r){const a=s.store("mutations"),h=s.store("documentMutations"),m=[],b=IDBKeyRange.only(r.batchId);let M=0;const X=a.Z({range:b},(xe,et,Nt)=>(M++,Nt.delete()));m.push(X.next(()=>{$n(1===M)}));const ie=[];for(const xe of r.mutations){const et=nc(e,xe.key.path,r.batchId);m.push(h.delete(et)),ie.push(xe.key)}return me.waitFor(m).next(()=>ie)}function Rd(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw Ln();e=s.noDocument}return JSON.stringify(e).length}bo.DEFAULT_COLLECTION_PERCENTILE=10,bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bo.DEFAULT=new bo(41943040,bo.DEFAULT_COLLECTION_PERCENTILE,bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bo.DISABLED=new bo(-1,0,0);class Md{constructor(e,r,a,h){this.userId=e,this.It=r,this.indexManager=a,this.referenceDelegate=h,this.In={}}static oe(e,r,a,h){$n(""!==e.uid);const m=e.isAuthenticated()?e.uid:"";return new Md(m,r,a,h)}checkEmpty(e){let r=!0;const a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Za(e).Z({index:"userMutationsIndex",range:a},(h,m,b)=>{r=!1,b.done()}).next(()=>r)}addMutationBatch(e,r,a,h){const m=lu(e),b=Za(e);return b.add({}).next(M=>{$n("number"==typeof M);const X=new Th(M,r,a,h),ie=function(Nt,Jt,hn){const zn=hn.baseMutations.map(xi=>Id(Nt.re,xi)),Jn=hn.mutations.map(xi=>Id(Nt.re,xi));return{userId:Jt,batchId:hn.batchId,localWriteTimeMs:hn.localWriteTime.toMillis(),baseMutations:zn,mutations:Jn}}(this.It,this.userId,X),xe=[];let et=new ji((Nt,Jt)=>gr(Nt.canonicalString(),Jt.canonicalString()));for(const Nt of h){const Jt=nc(this.userId,Nt.key.path,M);et=et.add(Nt.key.path.popLast()),xe.push(b.put(ie)),xe.push(m.put(Jt,xa))}return et.forEach(Nt=>{xe.push(this.indexManager.addToCollectionParentIndex(e,Nt))}),e.addOnCommittedListener(()=>{this.In[M]=X.keys()}),me.waitFor(xe).next(()=>X)})}lookupMutationBatch(e,r){return Za(e).get(r).next(a=>a?($n(a.userId===this.userId),Wl(this.It,a)):null)}Tn(e,r){return this.In[r]?me.resolve(this.In[r]):this.lookupMutationBatch(e,r).next(a=>{if(a){const h=a.keys();return this.In[r]=h,h}return null})}getNextMutationBatchAfterBatchId(e,r){const a=r+1,h=IDBKeyRange.lowerBound([this.userId,a]);let m=null;return Za(e).Z({index:"userMutationsIndex",range:h},(b,M,X)=>{M.userId===this.userId&&($n(M.batchId>=a),m=Wl(this.It,M)),X.done()}).next(()=>m)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let a=-1;return Za(e).Z({index:"userMutationsIndex",range:r,reverse:!0},(h,m,b)=>{a=m.batchId,b.done()}).next(()=>a)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Za(e).W("userMutationsIndex",r).next(a=>a.map(h=>Wl(this.It,h)))}getAllMutationBatchesAffectingDocumentKey(e,r){const a=wd(this.userId,r.path),h=IDBKeyRange.lowerBound(a),m=[];return lu(e).Z({range:h},(b,M,X)=>{const[ie,xe,et]=b,Nt=Ul(xe);if(ie===this.userId&&r.path.isEqual(Nt))return Za(e).get(et).next(Jt=>{if(!Jt)throw Ln();$n(Jt.userId===this.userId),m.push(Wl(this.It,Jt))});X.done()}).next(()=>m)}getAllMutationBatchesAffectingDocumentKeys(e,r){let a=new ji(gr);const h=[];return r.forEach(m=>{const b=wd(this.userId,m.path),M=IDBKeyRange.lowerBound(b),X=lu(e).Z({range:M},(ie,xe,et)=>{const[Nt,Jt,hn]=ie,zn=Ul(Jt);Nt===this.userId&&m.path.isEqual(zn)?a=a.add(hn):et.done()});h.push(X)}),me.waitFor(h).next(()=>this.En(e,a))}getAllMutationBatchesAffectingQuery(e,r){const a=r.path,h=a.length+1,m=wd(this.userId,a),b=IDBKeyRange.lowerBound(m);let M=new ji(gr);return lu(e).Z({range:b},(X,ie,xe)=>{const[et,Nt,Jt]=X,hn=Ul(Nt);et===this.userId&&a.isPrefixOf(hn)?hn.length===h&&(M=M.add(Jt)):xe.done()}).next(()=>this.En(e,M))}En(e,r){const a=[],h=[];return r.forEach(m=>{h.push(Za(e).get(m).next(b=>{if(null===b)throw Ln();$n(b.userId===this.userId),a.push(Wl(this.It,b))}))}),me.waitFor(h).next(()=>a)}removeMutationBatch(e,r){return Mf(e.ie,this.userId,r).next(a=>(e.addOnCommittedListener(()=>{this.An(r.batchId)}),me.forEach(a,h=>this.referenceDelegate.markPotentiallyOrphaned(e,h))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return me.resolve();const a=IDBKeyRange.lowerBound([this.userId]),h=[];return lu(e).Z({range:a},(m,b,M)=>{if(m[0]===this.userId){const X=Ul(m[1]);h.push(X)}else M.done()}).next(()=>{$n(0===h.length)})})}containsKey(e,r){return Rh(e,this.userId,r)}Rn(e){return Of(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Rh(s,e,r){const a=wd(e,r.path),h=a[1],m=IDBKeyRange.lowerBound(a);let b=!1;return lu(s).Z({range:m,X:!0},(M,X,ie)=>{const[xe,et,Nt]=M;xe===e&&et===h&&(b=!0),ie.done()}).next(()=>b)}function Za(s){return fs(s,"mutations")}function lu(s){return fs(s,"documentMutations")}function Of(s){return fs(s,"mutationQueues")}class Pu{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Pu(0)}static vn(){return new Pu(-1)}}class im{constructor(e,r){this.referenceDelegate=e,this.It=r}allocateTargetId(e){return this.Vn(e).next(r=>{const a=new Pu(r.highestTargetId);return r.highestTargetId=a.next(),this.Sn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(r=>fr.fromTimestamp(new hi(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,a){return this.Vn(e).next(h=>(h.highestListenSequenceNumber=r,a&&(h.lastRemoteSnapshotVersion=a.toTimestamp()),r>h.highestListenSequenceNumber&&(h.highestListenSequenceNumber=r),this.Sn(e,h)))}addTargetData(e,r){return this.Dn(e,r).next(()=>this.Vn(e).next(a=>(a.targetCount+=1,this.Cn(r,a),this.Sn(e,a))))}updateTargetData(e,r){return this.Dn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>uu(e).delete(r.targetId)).next(()=>this.Vn(e)).next(a=>($n(a.targetCount>0),a.targetCount-=1,this.Sn(e,a)))}removeTargets(e,r,a){let h=0;const m=[];return uu(e).Z((b,M)=>{const X=jo(M);X.sequenceNumber<=r&&null===a.get(X.targetId)&&(h++,m.push(this.removeTargetData(e,X)))}).next(()=>me.waitFor(m)).next(()=>h)}forEachTarget(e,r){return uu(e).Z((a,h)=>{const m=jo(h);r(m)})}Vn(e){return Hp(e).get("targetGlobalKey").next(r=>($n(null!==r),r))}Sn(e,r){return Hp(e).put("targetGlobalKey",r)}Dn(e,r){return uu(e).put(Af(this.It,r))}Cn(e,r){let a=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,a=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,a=!0),a}getTargetCount(e){return this.Vn(e).next(r=>r.targetCount)}getTargetData(e,r){const a=un(r),h=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]);let m=null;return uu(e).Z({range:h,index:"queryTargetsIndex"},(b,M,X)=>{const ie=jo(M);or(r,ie.target)&&(m=ie,X.done())}).next(()=>m)}addMatchingKeys(e,r,a){const h=[],m=cu(e);return r.forEach(b=>{const M=Ys(b.path);h.push(m.put({targetId:a,path:M})),h.push(this.referenceDelegate.addReference(e,a,b))}),me.waitFor(h)}removeMatchingKeys(e,r,a){const h=cu(e);return me.forEach(r,m=>{const b=Ys(m.path);return me.waitFor([h.delete([a,b]),this.referenceDelegate.removeReference(e,a,m)])})}removeMatchingKeysForTargetId(e,r){const a=cu(e),h=IDBKeyRange.bound([r],[r+1],!1,!0);return a.delete(h)}getMatchingKeysForTargetId(e,r){const a=IDBKeyRange.bound([r],[r+1],!1,!0),h=cu(e);let m=zr();return h.Z({range:a,X:!0},(b,M,X)=>{const ie=Ul(b[1]),xe=new An(ie);m=m.add(xe)}).next(()=>m)}containsKey(e,r){const a=Ys(r.path),h=IDBKeyRange.bound([a],[ao(a)],!1,!0);let m=0;return cu(e).Z({index:"documentTargetsIndex",X:!0,range:h},([b,M],X,ie)=>{0!==b&&(m++,ie.done())}).next(()=>m>0)}se(e,r){return uu(e).get(r).next(a=>a?jo(a):null)}}function uu(s){return fs(s,"targets")}function Hp(s){return fs(s,"targetGlobal")}function cu(s){return fs(s,"targetDocuments")}function Qa([s,e],[r,a]){const h=gr(s,r);return 0===h?gr(e,a):h}class Pf{constructor(e){this.xn=e,this.buffer=new ji(Qa),this.Nn=0}kn(){return++this.Nn}On(e){const r=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(r);else{const a=this.buffer.last();Qa(r,a)<0&&(this.buffer=this.buffer.delete(a).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Nf{constructor(e,r,a){this.garbageCollector=e,this.asyncQueue=r,this.localStore=a,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var r=this;zt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,_.Z)(function*(){r.Mn=null;try{yield r.localStore.collectGarbage(r.garbageCollector)}catch(a){jr(a)?zt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield ye(a)}yield r.Fn(3e5)}))}}class Ma{constructor(e,r){this.$n=e,this.params=r}calculateTargetCount(e,r){return this.$n.Bn(e).next(a=>Math.floor(r/100*a))}nthSequenceNumber(e,r){if(0===r)return me.resolve(as.at);const a=new Pf(r);return this.$n.forEachTarget(e,h=>a.On(h.sequenceNumber)).next(()=>this.$n.Ln(e,h=>a.On(h))).next(()=>a.maxValue)}removeTargets(e,r,a){return this.$n.removeTargets(e,r,a)}removeOrphanedDocuments(e,r){return this.$n.removeOrphanedDocuments(e,r)}collect(e,r){return-1===this.params.cacheSizeCollectionThreshold?(zt("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(qc)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(zt("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qc):this.Un(e,r))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,r){let a,h,m,b,M,X,ie;const xe=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(et=>(et>this.params.maximumSequenceNumbersToCollect?(zt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${et}`),h=this.params.maximumSequenceNumbersToCollect):h=et,b=Date.now(),this.nthSequenceNumber(e,h))).next(et=>(a=et,M=Date.now(),this.removeTargets(e,a,r))).next(et=>(m=et,X=Date.now(),this.removeOrphanedDocuments(e,a))).next(et=>(ie=Date.now(),Nr()<=ke.in.DEBUG&&zt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${b-xe}ms\n\tDetermined least recently used ${h} in `+(M-b)+`ms\n\tRemoved ${m} targets in `+(X-M)+`ms\n\tRemoved ${et} documents in `+(ie-X)+`ms\nTotal Duration: ${ie-xe}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:m,documentsRemoved:et})))}}class Mh{constructor(e,r){this.db=e,this.garbageCollector=new Ma(this,r)}Bn(e){const r=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(a=>r.next(h=>a+h))}qn(e){let r=0;return this.Ln(e,a=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Ln(e,r){return this.Kn(e,(a,h)=>r(h))}addReference(e,r,a){return Tl(e,a)}removeReference(e,r,a){return Tl(e,a)}removeTargets(e,r,a){return this.db.getTargetCache().removeTargets(e,r,a)}markPotentiallyOrphaned(e,r){return Tl(e,r)}Gn(e,r){return function(a,h){let m=!1;return Of(a).tt(b=>Rh(a,b,h).next(M=>(M&&(m=!0),me.resolve(!M)))).next(()=>m)}(e,r)}removeOrphanedDocuments(e,r){const a=this.db.getRemoteDocumentCache().newChangeBuffer(),h=[];let m=0;return this.Kn(e,(b,M)=>{if(M<=r){const X=this.Gn(e,b).next(ie=>{if(!ie)return m++,a.getEntry(e,b).next(()=>(a.removeEntry(b,fr.min()),cu(e).delete([0,Ys(b.path)])))});h.push(X)}}).next(()=>me.waitFor(h)).next(()=>a.apply(e)).next(()=>m)}removeTarget(e,r){const a=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,a)}updateLimboDocument(e,r){return Tl(e,r)}Kn(e,r){const a=cu(e);let h,m=as.at;return a.Z({index:"documentTargetsIndex"},([b,M],{path:X,sequenceNumber:ie})=>{0===b?(m!==as.at&&r(new An(Ul(h)),m),m=ie,h=X):m=as.at}).next(()=>{m!==as.at&&r(new An(Ul(h)),m)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Tl(s,e){return cu(s).put((a=s.currentSequenceNumber,{targetId:0,path:Ys(e.path),sequenceNumber:a}));var a}class Od{constructor(){this.changes=new Il(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Be.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const a=this.changes.get(r);return void 0!==a?me.resolve(a):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Xa{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,a){return _r(e).put(a)}removeEntry(e,r,a){return _r(e).delete(function(h,m){const b=h.path.toArray();return[b.slice(0,b.length-2),b[b.length-2],oc(m),b[b.length-1]]}(r,a))}updateMetadata(e,r){return this.getMetadata(e).next(a=>(a.byteSize+=r,this.Qn(e,a)))}getEntry(e,r){let a=Be.newInvalidDocument(r);return _r(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Pd(r))},(h,m)=>{a=this.jn(r,m)}).next(()=>a)}Wn(e,r){let a={size:0,document:Be.newInvalidDocument(r)};return _r(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Pd(r))},(h,m)=>{a={document:this.jn(r,m),size:Rd(m)}}).next(()=>a)}getEntries(e,r){let a=pa();return this.zn(e,r,(h,m)=>{const b=this.jn(h,m);a=a.insert(h,b)}).next(()=>a)}Hn(e,r){let a=pa(),h=new Di(An.comparator);return this.zn(e,r,(m,b)=>{const M=this.jn(m,b);a=a.insert(m,M),h=h.insert(m,Rd(b))}).next(()=>({documents:a,Jn:h}))}zn(e,r,a){if(r.isEmpty())return me.resolve();let h=new ji(Nd);r.forEach(X=>h=h.add(X));const m=IDBKeyRange.bound(Pd(h.first()),Pd(h.last())),b=h.getIterator();let M=b.getNext();return _r(e).Z({index:"documentKeyIndex",range:m},(X,ie,xe)=>{const et=An.fromSegments([...ie.prefixPath,ie.collectionGroup,ie.documentId]);for(;M&&Nd(M,et)<0;)a(M,null),M=b.getNext();M&&M.isEqual(et)&&(a(M,ie),M=b.hasNext()?b.getNext():null),M?xe.j(Pd(M)):xe.done()}).next(()=>{for(;M;)a(M,null),M=b.hasNext()?b.getNext():null})}getAllFromCollection(e,r,a){const h=[r.popLast().toArray(),r.lastSegment(),oc(a.readTime),a.documentKey.path.isEmpty()?"":a.documentKey.path.lastSegment()],m=[r.popLast().toArray(),r.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _r(e).W(IDBKeyRange.bound(h,m,!0)).next(b=>{let M=pa();for(const X of b){const ie=this.jn(An.fromSegments(X.prefixPath.concat(X.collectionGroup,X.documentId)),X);M=M.insert(ie.key,ie)}return M})}getAllFromCollectionGroup(e,r,a,h){let m=pa();const b=Ff(r,a),M=Ff(r,A.max());return _r(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(b,M,!0)},(X,ie,xe)=>{const et=this.jn(An.fromSegments(ie.prefixPath.concat(ie.collectionGroup,ie.documentId)),ie);m=m.insert(et.key,et),m.size===h&&xe.done()}).next(()=>m)}newChangeBuffer(e){return new Wp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return kf(e).get("remoteDocumentGlobalKey").next(r=>($n(!!r),r))}Qn(e,r){return kf(e).put("remoteDocumentGlobalKey",r)}jn(e,r){if(r){const a=function(s,e){let r;if(e.document)r=fh(s.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const a=An.fromSegments(e.noDocument.path),h=Hl(e.noDocument.readTime);r=Be.newNoDocument(a,h),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ln();{const a=An.fromSegments(e.unknownDocument.path),h=Hl(e.unknownDocument.version);r=Be.newUnknownDocument(a,h)}}return e.readTime&&r.setReadTime(function(a){const h=new hi(a[0],a[1]);return fr.fromTimestamp(h)}(e.readTime)),r}(this.It,r);if(!a.isNoDocument()||!a.version.isEqual(fr.min()))return a}return Be.newInvalidDocument(e)}}function Nu(s){return new Xa(s)}class Wp extends Od{constructor(e,r){super(),this.Yn=e,this.trackRemovals=r,this.Xn=new Il(a=>a.toString(),(a,h)=>a.isEqual(h))}applyChanges(e){const r=[];let a=0,h=new ji((m,b)=>gr(m.canonicalString(),b.canonicalString()));return this.changes.forEach((m,b)=>{const M=this.Xn.get(m);if(r.push(this.Yn.removeEntry(e,m,M.readTime)),b.isValidDocument()){const X=Oo(this.Yn.It,b);h=h.add(m.path.popLast()),a+=Rd(X)-M.size,r.push(this.Yn.addEntry(e,m,X))}else if(a-=M.size,this.trackRemovals){const X=Oo(this.Yn.It,b.convertToNoDocument(fr.min()));r.push(this.Yn.addEntry(e,m,X))}}),h.forEach(m=>{r.push(this.Yn.indexManager.addToCollectionParentIndex(e,m))}),r.push(this.Yn.updateMetadata(e,a)),me.waitFor(r)}getFromCache(e,r){return this.Yn.Wn(e,r).next(a=>(this.Xn.set(r,{size:a.size,readTime:a.document.readTime}),a.document))}getAllFromCache(e,r){return this.Yn.Hn(e,r).next(({documents:a,Jn:h})=>(h.forEach((m,b)=>{this.Xn.set(m,{size:b,readTime:a.get(m).readTime})}),a))}}function kf(s){return fs(s,"remoteDocumentGlobal")}function _r(s){return fs(s,"remoteDocumentsV14")}function Pd(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ff(s,e){const r=e.documentKey.path.toArray();return[s,oc(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function Nd(s,e){const r=s.path.toArray(),a=e.path.toArray();let h=0;for(let m=0;m<r.length-2&&m<a.length-2;++m)if(h=gr(r[m],a[m]),h)return h;return h=gr(r.length,a.length),h||(h=gr(r[r.length-2],a[a.length-2]),h||gr(r[r.length-1],a[a.length-1]))}class Ja{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}class Lf{constructor(e,r,a,h){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=a,this.indexManager=h}getDocument(e,r){let a=null;return this.documentOverlayCache.getOverlay(e,r).next(h=>(a=h,this.getBaseDocument(e,r,a))).next(h=>(null!==a&&tu(a.mutation,h,ii.empty(),hi.now()),h))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(a=>this.getLocalViewOfDocuments(e,a,zr()).next(()=>a))}getLocalViewOfDocuments(e,r,a=zr()){const h=ga();return this.populateOverlays(e,h,r).next(()=>this.computeViews(e,r,h,a).next(m=>{let b=bl();return m.forEach((M,X)=>{b=b.insert(M,X.overlayedDocument)}),b}))}getOverlayedDocuments(e,r){const a=ga();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,zr()))}populateOverlays(e,r,a){const h=[];return a.forEach(m=>{r.has(m)||h.push(m)}),this.documentOverlayCache.getOverlays(e,h).next(m=>{m.forEach((b,M)=>{r.set(b,M)})})}computeViews(e,r,a,h){let m=pa();const b=Bc(),M=Bc();return r.forEach((X,ie)=>{const xe=a.get(ie.key);h.has(ie.key)&&(void 0===xe||xe.mutation instanceof El)?m=m.insert(ie.key,ie):void 0!==xe&&(b.set(ie.key,xe.mutation.getFieldMask()),tu(xe.mutation,ie,xe.mutation.getFieldMask(),hi.now()))}),this.recalculateAndSaveOverlays(e,m).next(X=>(X.forEach((ie,xe)=>b.set(ie,xe)),r.forEach((ie,xe)=>{var et;return M.set(ie,new Ja(xe,null!==(et=b.get(ie))&&void 0!==et?et:null))}),M))}recalculateAndSaveOverlays(e,r){const a=Bc();let h=new Di((b,M)=>b-M),m=zr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(b=>{for(const M of b)M.keys().forEach(X=>{const ie=r.get(X);if(null===ie)return;let xe=a.get(X)||ii.empty();xe=M.applyToLocalView(ie,xe),a.set(X,xe);const et=(h.get(M.batchId)||zr()).add(X);h=h.insert(M.batchId,et)})}).next(()=>{const b=[],M=h.getReverseIterator();for(;M.hasNext();){const X=M.getNext(),ie=X.key,xe=X.value,et=hh();xe.forEach(Nt=>{if(!m.has(Nt)){const Jt=uh(r.get(Nt),a.get(Nt));null!==Jt&&et.set(Nt,Jt),m=m.add(Nt)}}),b.push(this.documentOverlayCache.saveOverlays(e,ie,et))}return me.waitFor(b)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,r,a){return An.isDocumentKey((h=r).path)&&null===h.collectionGroup&&0===h.filters.length?this.getDocumentsMatchingDocumentQuery(e,r.path):zu(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,a):this.getDocumentsMatchingCollectionQuery(e,r,a);var h}getNextDocuments(e,r,a,h){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,a,h).next(m=>{const b=h-m.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,a.largestBatchId,h-m.size):me.resolve(ga());let M=-1,X=m;return b.next(ie=>me.forEach(ie,(xe,et)=>(M<et.largestBatchId&&(M=et.largestBatchId),m.get(xe)?me.resolve():this.getBaseDocument(e,xe,et).next(Nt=>{X=X.insert(xe,Nt)}))).next(()=>this.populateOverlays(e,ie,m)).next(()=>this.computeViews(e,X,ie,zr())).next(xe=>({batchId:M,changes:Vc(xe)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new An(r)).next(a=>{let h=bl();return a.isFoundDocument()&&(h=h.insert(a.key,a)),h})}getDocumentsMatchingCollectionGroupQuery(e,r,a){const h=r.collectionGroup;let m=bl();return this.indexManager.getCollectionParents(e,h).next(b=>me.forEach(b,M=>{const X=(ie=r,xe=M.child(h),new ml(xe,null,ie.explicitOrderBy.slice(),ie.filters.slice(),ie.limit,ie.limitType,ie.startAt,ie.endAt));var ie,xe;return this.getDocumentsMatchingCollectionQuery(e,X,a).next(ie=>{ie.forEach((xe,et)=>{m=m.insert(xe,et)})})}).next(()=>m))}getDocumentsMatchingCollectionQuery(e,r,a){let h;return this.remoteDocumentCache.getAllFromCollection(e,r.path,a).next(m=>(h=m,this.documentOverlayCache.getOverlaysForCollection(e,r.path,a.largestBatchId))).next(m=>{m.forEach((M,X)=>{const ie=X.getKey();null===h.get(ie)&&(h=h.insert(ie,Be.newInvalidDocument(ie)))});let b=bl();return h.forEach((M,X)=>{const ie=m.get(M);void 0!==ie&&tu(ie.mutation,X,ii.empty(),hi.now()),Du(r,X)&&(b=b.insert(M,X))}),b})}getBaseDocument(e,r,a){return null===a||1===a.mutation.type?this.remoteDocumentCache.getEntry(e,r):me.resolve(Be.newInvalidDocument(r))}}class sm{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,r){return me.resolve(this.Zn.get(r))}saveBundleMetadata(e,r){var a;return this.Zn.set(r.id,{id:(a=r).id,version:a.version,createTime:qs(a.createTime)}),me.resolve()}getNamedQuery(e,r){return me.resolve(this.ts.get(r))}saveNamedQuery(e,r){return this.ts.set(r.name,{name:(a=r).name,query:xf(a.bundledQuery),readTime:qs(a.readTime)}),me.resolve();var a}}class Vf{constructor(){this.overlays=new Di(An.comparator),this.es=new Map}getOverlay(e,r){return me.resolve(this.overlays.get(r))}getOverlays(e,r){const a=ga();return me.forEach(r,h=>this.getOverlay(e,h).next(m=>{null!==m&&a.set(h,m)})).next(()=>a)}saveOverlays(e,r,a){return a.forEach((h,m)=>{this.ue(e,r,m)}),me.resolve()}removeOverlaysForBatchId(e,r,a){const h=this.es.get(a);return void 0!==h&&(h.forEach(m=>this.overlays=this.overlays.remove(m)),this.es.delete(a)),me.resolve()}getOverlaysForCollection(e,r,a){const h=ga(),m=r.length+1,b=new An(r.child("")),M=this.overlays.getIteratorFrom(b);for(;M.hasNext();){const X=M.getNext().value,ie=X.getKey();if(!r.isPrefixOf(ie.path))break;ie.path.length===m&&X.largestBatchId>a&&h.set(X.getKey(),X)}return me.resolve(h)}getOverlaysForCollectionGroup(e,r,a,h){let m=new Di((ie,xe)=>ie-xe);const b=this.overlays.getIterator();for(;b.hasNext();){const ie=b.getNext().value;if(ie.getKey().getCollectionGroup()===r&&ie.largestBatchId>a){let xe=m.get(ie.largestBatchId);null===xe&&(xe=ga(),m=m.insert(ie.largestBatchId,xe)),xe.set(ie.getKey(),ie)}}const M=ga(),X=m.getIterator();for(;X.hasNext()&&(X.getNext().value.forEach((ie,xe)=>M.set(ie,xe)),!(M.size()>=h)););return me.resolve(M)}ue(e,r,a){const h=this.overlays.get(a.key);if(null!==h){const b=this.es.get(h.largestBatchId).delete(a.key);this.es.set(h.largestBatchId,b)}this.overlays=this.overlays.insert(a.key,new ic(r,a));let m=this.es.get(r);void 0===m&&(m=zr(),this.es.set(r,m)),this.es.set(r,m.add(a.key))}}class Dl{constructor(){this.ns=new ji(Ds.ss),this.rs=new ji(Ds.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,r){const a=new Ds(e,r);this.ns=this.ns.add(a),this.rs=this.rs.add(a)}us(e,r){e.forEach(a=>this.addReference(a,r))}removeReference(e,r){this.cs(new Ds(e,r))}hs(e,r){e.forEach(a=>this.removeReference(a,r))}ls(e){const r=new An(new ei([])),a=new Ds(r,e),h=new Ds(r,e+1),m=[];return this.rs.forEachInRange([a,h],b=>{this.cs(b),m.push(b.key)}),m}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const r=new An(new ei([])),a=new Ds(r,e),h=new Ds(r,e+1);let m=zr();return this.rs.forEachInRange([a,h],b=>{m=m.add(b.key)}),m}containsKey(e){const r=new Ds(e,0),a=this.ns.firstAfterOrEqual(r);return null!==a&&e.isEqual(a.key)}}class Ds{constructor(e,r){this.key=e,this._s=r}static ss(e,r){return An.comparator(e.key,r.key)||gr(e._s,r._s)}static os(e,r){return gr(e._s,r._s)||An.comparator(e.key,r.key)}}class kd{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.ws=1,this.gs=new ji(Ds.ss)}checkEmpty(e){return me.resolve(0===this.mutationQueue.length)}addMutationBatch(e,r,a,h){const m=this.ws;this.ws++;const b=new Th(m,r,a,h);this.mutationQueue.push(b);for(const M of h)this.gs=this.gs.add(new Ds(M.key,m)),this.indexManager.addToCollectionParentIndex(e,M.key.path.popLast());return me.resolve(b)}lookupMutationBatch(e,r){return me.resolve(this.ys(r))}getNextMutationBatchAfterBatchId(e,r){const h=this.ps(r+1),m=h<0?0:h;return me.resolve(this.mutationQueue.length>m?this.mutationQueue[m]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const a=new Ds(r,0),h=new Ds(r,Number.POSITIVE_INFINITY),m=[];return this.gs.forEachInRange([a,h],b=>{const M=this.ys(b._s);m.push(M)}),me.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,r){let a=new ji(gr);return r.forEach(h=>{const m=new Ds(h,0),b=new Ds(h,Number.POSITIVE_INFINITY);this.gs.forEachInRange([m,b],M=>{a=a.add(M._s)})}),me.resolve(this.Is(a))}getAllMutationBatchesAffectingQuery(e,r){const a=r.path,h=a.length+1;let m=a;An.isDocumentKey(m)||(m=m.child(""));const b=new Ds(new An(m),0);let M=new ji(gr);return this.gs.forEachWhile(X=>{const ie=X.key.path;return!!a.isPrefixOf(ie)&&(ie.length===h&&(M=M.add(X._s)),!0)},b),me.resolve(this.Is(M))}Is(e){const r=[];return e.forEach(a=>{const h=this.ys(a);null!==h&&r.push(h)}),r}removeMutationBatch(e,r){$n(0===this.Ts(r.batchId,"removed")),this.mutationQueue.shift();let a=this.gs;return me.forEach(r.mutations,h=>{const m=new Ds(h.key,r.batchId);return a=a.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,h.key)}).next(()=>{this.gs=a})}An(e){}containsKey(e,r){const a=new Ds(r,0),h=this.gs.firstAfterOrEqual(a);return me.resolve(r.isEqual(h&&h.key))}performConsistencyCheck(e){return me.resolve()}Ts(e,r){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const r=this.ps(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class fc{constructor(e){this.Es=e,this.docs=new Di(An.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const a=r.key,h=this.docs.get(a),m=h?h.size:0,b=this.Es(r);return this.docs=this.docs.insert(a,{document:r.mutableCopy(),size:b}),this.size+=b-m,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const a=this.docs.get(r);return me.resolve(a?a.document.mutableCopy():Be.newInvalidDocument(r))}getEntries(e,r){let a=pa();return r.forEach(h=>{const m=this.docs.get(h);a=a.insert(h,m?m.document.mutableCopy():Be.newInvalidDocument(h))}),me.resolve(a)}getAllFromCollection(e,r,a){let h=pa();const m=new An(r.child("")),b=this.docs.getIteratorFrom(m);for(;b.hasNext();){const{key:M,value:{document:X}}=b.getNext();if(!r.isPrefixOf(M.path))break;M.path.length>r.length+1||S(F(X),a)<=0||(h=h.insert(X.key,X.mutableCopy()))}return me.resolve(h)}getAllFromCollectionGroup(e,r,a,h){Ln()}As(e,r){return me.forEach(this.docs,a=>r(a))}newChangeBuffer(e){return new Gp(this)}getSize(e){return me.resolve(this.size)}}class Gp extends Od{constructor(e){super(),this.Yn=e}applyChanges(e){const r=[];return this.changes.forEach((a,h)=>{h.isValidDocument()?r.push(this.Yn.addEntry(e,h)):this.Yn.removeEntry(a)}),me.waitFor(r)}getFromCache(e,r){return this.Yn.getEntry(e,r)}getAllFromCache(e,r){return this.Yn.getEntries(e,r)}}class Bf{constructor(e){this.persistence=e,this.Rs=new Il(r=>un(r),or),this.lastRemoteSnapshotVersion=fr.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Dl,this.targetCount=0,this.vs=Pu.Pn()}forEachTarget(e,r){return this.Rs.forEach((a,h)=>r(h)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,r,a){return a&&(this.lastRemoteSnapshotVersion=a),r>this.bs&&(this.bs=r),me.resolve()}Dn(e){this.Rs.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.vs=new Pu(r),this.highestTargetId=r),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,r){return this.Dn(r),this.targetCount+=1,me.resolve()}updateTargetData(e,r){return this.Dn(r),me.resolve()}removeTargetData(e,r){return this.Rs.delete(r.target),this.Ps.ls(r.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,r,a){let h=0;const m=[];return this.Rs.forEach((b,M)=>{M.sequenceNumber<=r&&null===a.get(M.targetId)&&(this.Rs.delete(b),m.push(this.removeMatchingKeysForTargetId(e,M.targetId)),h++)}),me.waitFor(m).next(()=>h)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,r){const a=this.Rs.get(r)||null;return me.resolve(a)}addMatchingKeys(e,r,a){return this.Ps.us(r,a),me.resolve()}removeMatchingKeys(e,r,a){this.Ps.hs(r,a);const h=this.persistence.referenceDelegate,m=[];return h&&r.forEach(b=>{m.push(h.markPotentiallyOrphaned(e,b))}),me.waitFor(m)}removeMatchingKeysForTargetId(e,r){return this.Ps.ls(r),me.resolve()}getMatchingKeysForTargetId(e,r){const a=this.Ps.ds(r);return me.resolve(a)}containsKey(e,r){return me.resolve(this.Ps.containsKey(r))}}class zp{constructor(e,r){this.Vs={},this.overlays={},this.Ss=new as(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new Bf(this),this.indexManager=new jp,this.remoteDocumentCache=new fc(a=>this.referenceDelegate.xs(a)),this.It=new sc(r),this.Ns=new sm(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new Vf,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let a=this.Vs[e.toKey()];return a||(a=new kd(r,this.referenceDelegate),this.Vs[e.toKey()]=a),a}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,r,a){zt("MemoryPersistence","Starting transaction:",e);const h=new ql(this.Ss.next());return this.referenceDelegate.ks(),a(h).next(m=>this.referenceDelegate.Os(h).next(()=>m)).toPromise().then(m=>(h.raiseOnCommittedEvent(),m))}Ms(e,r){return me.or(Object.values(this.Vs).map(a=>()=>a.containsKey(e,r)))}}class ql extends J{constructor(e){super(),this.currentSequenceNumber=e}}class ku{constructor(e){this.persistence=e,this.Fs=new Dl,this.$s=null}static Bs(e){return new ku(e)}get Ls(){if(this.$s)return this.$s;throw Ln()}addReference(e,r,a){return this.Fs.addReference(a,r),this.Ls.delete(a.toString()),me.resolve()}removeReference(e,r,a){return this.Fs.removeReference(a,r),this.Ls.add(a.toString()),me.resolve()}markPotentiallyOrphaned(e,r){return this.Ls.add(r.toString()),me.resolve()}removeTarget(e,r){this.Fs.ls(r.targetId).forEach(h=>this.Ls.add(h.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,r.targetId).next(h=>{h.forEach(m=>this.Ls.add(m.toString()))}).next(()=>a.removeTargetData(e,r))}ks(){this.$s=new Set}Os(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Ls,a=>{const h=An.fromPath(a);return this.Us(e,h).next(m=>{m||r.removeEntry(h,fr.min())})}).next(()=>(this.$s=null,r.apply(e)))}updateLimboDocument(e,r){return this.Us(e,r).next(a=>{a?this.Ls.delete(r.toString()):this.Ls.add(r.toString())})}xs(e){return 0}Us(e,r){return me.or([()=>me.resolve(this.Fs.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ms(e,r)])}}class Fd{constructor(e){this.It=e}$(e,r,a,h){const m=new Wt("createOrUpgrade",r);var M;a<1&&h>=1&&(e.createObjectStore("owner"),(M=e).createObjectStore("mutationQueues",{keyPath:"userId"}),M.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Pp,{unique:!0}),M.createObjectStore("documentMutations"),Oa(e),function(M){M.createObjectStore("remoteDocuments")}(e));let b=me.resolve();return a<3&&h>=3&&(0!==a&&(function(M){M.deleteObjectStore("targetDocuments"),M.deleteObjectStore("targets"),M.deleteObjectStore("targetGlobal")}(e),Oa(e)),b=b.next(()=>function(M){const X=M.store("targetGlobal"),ie={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:fr.min().toTimestamp(),targetCount:0};return X.put("targetGlobalKey",ie)}(m))),a<4&&h>=4&&(0!==a&&(b=b.next(()=>function(M,X){return X.store("mutations").W().next(ie=>{M.deleteObjectStore("mutations"),M.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Pp,{unique:!0});const xe=X.store("mutations"),et=ie.map(Nt=>xe.put(Nt));return me.waitFor(et)})}(e,m))),b=b.next(()=>{!function(M){M.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),a<5&&h>=5&&(b=b.next(()=>this.qs(m))),a<6&&h>=6&&(b=b.next(()=>(function(M){M.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(m)))),a<7&&h>=7&&(b=b.next(()=>this.Gs(m))),a<8&&h>=8&&(b=b.next(()=>this.Qs(e,m))),a<9&&h>=9&&(b=b.next(()=>{!function(M){M.objectStoreNames.contains("remoteDocumentChanges")&&M.deleteObjectStore("remoteDocumentChanges")}(e)})),a<10&&h>=10&&(b=b.next(()=>this.js(m))),a<11&&h>=11&&(b=b.next(()=>{(function(M){M.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(M){M.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),a<12&&h>=12&&(b=b.next(()=>{!function(M){const X=M.createObjectStore("documentOverlays",{keyPath:yy});X.createIndex("collectionPathOverlayIndex",_y,{unique:!1}),X.createIndex("collectionGroupOverlayIndex",Fp,{unique:!1})}(e)})),a<13&&h>=13&&(b=b.next(()=>function(M){const X=M.createObjectStore("remoteDocumentsV14",{keyPath:Eh});X.createIndex("documentKeyIndex",Ih),X.createIndex("collectionGroupIndex",rc)}(e)).next(()=>this.Ws(e,m)).next(()=>e.deleteObjectStore("remoteDocuments"))),a<14&&h>=14&&(b=b.next(()=>this.zs(e,m))),a<15&&h>=15&&(b=b.next(()=>function(M){M.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),M.createObjectStore("indexState",{keyPath:kp}).createIndex("sequenceNumberIndex",rm,{unique:!1}),M.createObjectStore("indexEntries",{keyPath:jl}).createIndex("documentKeyIndex",ol,{unique:!1})}(e))),b}Ks(e){let r=0;return e.store("remoteDocuments").Z((a,h)=>{r+=Rd(h)}).next(()=>{const a={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",a)})}qs(e){const r=e.store("mutationQueues"),a=e.store("mutations");return r.W().next(h=>me.forEach(h,m=>{const b=IDBKeyRange.bound([m.userId,-1],[m.userId,m.lastAcknowledgedBatchId]);return a.W("userMutationsIndex",b).next(M=>me.forEach(M,X=>{$n(X.userId===m.userId);const ie=Wl(this.It,X);return Mf(e,m.userId,ie).next(()=>{})}))}))}Gs(e){const r=e.store("targetDocuments"),a=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(h=>{const m=[];return a.Z((b,M)=>{const X=new ei(b),ie=[0,Ys(X)];m.push(r.get(ie).next(xe=>xe?me.resolve():r.put({targetId:0,path:Ys(X),sequenceNumber:h.highestListenSequenceNumber})))}).next(()=>me.waitFor(m))})}Qs(e,r){e.createObjectStore("collectionParents",{keyPath:Ch});const a=r.store("collectionParents"),h=new dc,m=b=>{if(h.add(b)){const M=b.lastSegment(),X=b.popLast();return a.put({collectionId:M,parent:Ys(X)})}};return r.store("remoteDocuments").Z({X:!0},(b,M)=>{const X=new ei(b);return m(X.popLast())}).next(()=>r.store("documentMutations").Z({X:!0},([b,M,X],ie)=>{const xe=Ul(M);return m(xe.popLast())}))}js(e){const r=e.store("targets");return r.Z((a,h)=>{const m=jo(h),b=Af(this.It,m);return r.put(b)})}Ws(e,r){const a=r.store("remoteDocuments"),h=[];return a.Z((m,b)=>{const M=r.store("remoteDocumentsV14"),X=(ie=b,ie.document?new An(ei.fromString(ie.document.name).popFirst(5)):ie.noDocument?An.fromSegments(ie.noDocument.path):ie.unknownDocument?An.fromSegments(ie.unknownDocument.path):Ln()).path.toArray();var ie;const xe={prefixPath:X.slice(0,X.length-2),collectionGroup:X[X.length-2],documentId:X[X.length-1],readTime:b.readTime||[0,0],unknownDocument:b.unknownDocument,noDocument:b.noDocument,document:b.document,hasCommittedMutations:!!b.hasCommittedMutations};h.push(M.put(xe))}).next(()=>me.waitFor(h))}zs(e,r){const a=r.store("mutations"),h=Nu(this.It),m=new zp(ku.Bs,this.It.re);return a.W().next(b=>{const M=new Map;return b.forEach(X=>{var ie;let xe=null!==(ie=M.get(X.userId))&&void 0!==ie?ie:zr();Wl(this.It,X).keys().forEach(et=>xe=xe.add(et)),M.set(X.userId,xe)}),me.forEach(M,(X,ie)=>{const xe=new yn(ie),et=lc.oe(this.It,xe),Nt=m.getIndexManager(xe),Jt=Md.oe(xe,this.It,Nt,m.referenceDelegate);return new Lf(h,Jt,et,Nt).recalculateAndSaveOverlaysForDocumentKeys(new Ya(r,as.at),X).next()})})}}function Oa(s){s.createObjectStore("targetDocuments",{keyPath:nm}).createIndex("documentTargetsIndex",Np,{unique:!0}),s.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",bh,{unique:!0}),s.createObjectStore("targetGlobal")}const $f="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Uf{constructor(e,r,a,h,m,b,M,X,ie,xe,et=15){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=a,this.Hs=m,this.window=b,this.document=M,this.Js=ie,this.Ys=xe,this.Xs=et,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=Nt=>Promise.resolve(),!Uf.C())throw new en(ft.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Mh(this,h),this.ii=r+"main",this.It=new sc(X),this.ri=new xn(this.ii,this.Xs,new Fd(this.It)),this.Cs=new im(this.referenceDelegate,this.It),this.remoteDocumentCache=Nu(this.It),this.Ns=new Bp,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===xe&&nr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new en(ft.FAILED_PRECONDITION,$f);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new as(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var r=this;return this.si=function(){var a=(0,_.Z)(function*(h){if(r.started)return e(h)});return function(h){return a.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var r=(0,_.Z)(function*(a){null===a.newVersion&&(yield e())});return function(a){return r.apply(this,arguments)}}())}setNetworkEnabled(e){var r=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,_.Z)(function*(){r.started&&(yield r.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(r=>{r||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(r=>this.isPrimary&&!r?this._i(e).next(()=>!1):!!r&&this.wi(e).next(()=>!0))).catch(e=>{if(jr(e))return zt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return zt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Yc(e).get("owner").next(r=>me.resolve(this.mi(r)))}gi(e){return jf(e).delete(this.clientId)}yi(){var e=this;return(0,_.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const r=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",a=>{const h=fs(a,"clientMetadata");return h.W().next(m=>{const b=e.Ii(m,18e5),M=m.filter(X=>-1===b.indexOf(X));return me.forEach(M,X=>h.delete(X.clientId)).next(()=>M)})}).catch(()=>[]);if(e.oi)for(const a of r)e.oi.removeItem(e.Ti(a.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?me.resolve(!0):Yc(e).get("owner").next(r=>{if(null!==r&&this.pi(r.leaseTimestampMs,5e3)&&!this.Ei(r.ownerId)){if(this.mi(r)&&this.networkEnabled)return!0;if(!this.mi(r)){if(!r.allowTabSynchronization)throw new en(ft.FAILED_PRECONDITION,$f);return!1}}return!(!this.networkEnabled||!this.inForeground)||jf(e).W().next(a=>void 0===this.Ii(a,5e3).find(h=>{if(this.clientId!==h.clientId){const b=!this.inForeground&&h.inForeground,M=this.networkEnabled===h.networkEnabled;if(!this.networkEnabled&&h.networkEnabled||b&&M)return!0}return!1}))}).next(r=>(this.isPrimary!==r&&zt("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var e=this;return(0,_.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],r=>{const a=new Ya(r,as.at);return e._i(a).next(()=>e.gi(a))}),e.ri.close(),e.Pi()})()}Ii(e,r){return e.filter(a=>this.pi(a.updateTimeMs,r)&&!this.Ei(a.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>jf(e).W().next(r=>this.Ii(r,18e5).map(a=>a.clientId)))}get started(){return this.Ds}getMutationQueue(e,r){return Md.oe(e,this.It,r,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new xh(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return lc.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,r,a){zt("IndexedDbPersistence","Starting transaction:",e);const h="readonly"===r?"readonly":"readwrite",m=15===(b=this.Xs)?Dd:14===b?wh:13===b?Td:12===b?qa:11===b?Sf:void Ln();var b;let M;return this.ri.runTransaction(e,h,m,X=>(M=new Ya(X,this.Ss?this.Ss.next():as.at),"readwrite-primary"===r?this.fi(M).next(ie=>!!ie||this.di(M)).next(ie=>{if(!ie)throw nr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new en(ft.FAILED_PRECONDITION,$);return a(M)}).next(ie=>this.wi(M).next(()=>ie)):this.Vi(M).next(()=>a(M)))).then(X=>(M.raiseOnCommittedEvent(),X))}Vi(e){return Yc(e).get("owner").next(r=>{if(null!==r&&this.pi(r.leaseTimestampMs,5e3)&&!this.Ei(r.ownerId)&&!this.mi(r)&&!(this.Ys||this.allowTabSynchronization&&r.allowTabSynchronization))throw new en(ft.FAILED_PRECONDITION,$f)})}wi(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Yc(e).put("owner",r)}static C(){return xn.C()}_i(e){const r=Yc(e);return r.get("owner").next(a=>this.mi(a)?(zt("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):me.resolve())}pi(e,r){const a=Date.now();return!(e<a-r||e>a&&(nr(`Detected an update time that is in the future: ${e} > ${a}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,ae.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var r;try{const a=null!==(null===(r=this.oi)||void 0===r?void 0:r.getItem(this.Ti(e)));return zt("IndexedDbPersistence",`Client '${e}' ${a?"is":"is not"} zombied in LocalStorage`),a}catch(a){return nr("IndexedDbPersistence","Failed to get zombied client id.",a),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){nr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Yc(s){return fs(s,"owner")}function jf(s){return fs(s,"clientMetadata")}function Oh(s,e){let r=s.projectId;return s.isDefaultDatabase||(r+="."+s.database),"firestore/"+e+"/"+r+"/"}class qp{constructor(e,r,a,h){this.targetId=e,this.fromCache=r,this.Si=a,this.Di=h}static Ci(e,r){let a=zr(),h=zr();for(const m of r.docChanges)switch(m.type){case 0:a=a.add(m.doc.key);break;case 1:h=h.add(m.doc.key)}return new qp(e,r.fromCache,a,h)}}class Hf{constructor(){this.xi=!1}initialize(e,r){this.Ni=e,this.indexManager=r,this.xi=!0}getDocumentsMatchingQuery(e,r,a,h){return this.ki(e,r).next(m=>m||this.Oi(e,r,h,a)).next(m=>m||this.Mi(e,r))}ki(e,r){if(yl(r))return me.resolve(null);let a=Ts(r);return this.indexManager.getIndexType(e,a).next(h=>0===h?null:(null!==r.limit&&1===h&&(r=Ga(r,null,"F"),a=Ts(r)),this.indexManager.getDocumentsMatchingTarget(e,a).next(m=>{const b=zr(...m);return this.Ni.getDocuments(e,b).next(M=>this.indexManager.getMinOffset(e,a).next(X=>{const ie=this.Fi(r,M);return this.$i(r,ie,b,X.readTime)?this.ki(e,Ga(r,null,"F")):this.Bi(e,ie,r,X)}))})))}Oi(e,r,a,h){return yl(r)||h.isEqual(fr.min())?this.Mi(e,r):this.Ni.getDocuments(e,a).next(m=>{const b=this.Fi(r,m);return this.$i(r,b,a,h)?this.Mi(e,r):(Nr()<=ke.in.DEBUG&&zt("QueryEngine","Re-using previous result from %s to execute query: %s",h.toString(),Tu(r)),this.Bi(e,b,r,lo(h,-1)))})}Fi(e,r){let a=new ji(ah(e));return r.forEach((h,m)=>{Du(e,m)&&(a=a.add(m))}),a}$i(e,r,a,h){if(null===e.limit)return!1;if(a.size!==r.size)return!0;const m="F"===e.limitType?r.last():r.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(h)>0)}Mi(e,r){return Nr()<=ke.in.DEBUG&&zt("QueryEngine","Using full collection scan to execute query:",Tu(r)),this.Ni.getDocumentsMatchingQuery(e,r,A.min())}Bi(e,r,a,h){return this.Ni.getDocumentsMatchingQuery(e,a,h).next(m=>(r.forEach(b=>{m=m.insert(b.key,b)}),m))}}class Yp{constructor(e,r,a,h){this.persistence=e,this.Li=r,this.It=h,this.Ui=new Di(gr),this.qi=new Il(m=>un(m),or),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(a)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lf(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ui))}}function Kp(s,e,r,a){return new Yp(s,e,r,a)}function Ph(s,e){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,_.Z)(function*(s,e){const r=ln(s);return yield r.persistence.runTransaction("Handle user change","readonly",a=>{let h;return r.mutationQueue.getAllMutationBatches(a).next(m=>(h=m,r.Qi(e),r.mutationQueue.getAllMutationBatches(a))).next(m=>{const b=[],M=[];let X=zr();for(const ie of h){b.push(ie.batchId);for(const xe of ie.mutations)X=X.add(xe.key)}for(const ie of m){M.push(ie.batchId);for(const xe of ie.mutations)X=X.add(xe.key)}return r.localDocuments.getDocuments(a,X).next(ie=>({ji:ie,removedBatchIds:b,addedBatchIds:M}))})})}),Zp.apply(this,arguments)}function Ey(s,e){const r=ln(s);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const h=e.batch.keys(),m=r.Gi.newChangeBuffer({trackRemovals:!0});return function(b,M,X,ie){const xe=X.batch,et=xe.keys();let Nt=me.resolve();return et.forEach(Jt=>{Nt=Nt.next(()=>ie.getEntry(M,Jt)).next(hn=>{const zn=X.docVersions.get(Jt);$n(null!==zn),hn.version.compareTo(zn)<0&&(xe.applyToRemoteDocument(hn,X),hn.isValidDocument()&&(hn.setReadTime(X.commitVersion),ie.addEntry(hn)))})}),Nt.next(()=>b.mutationQueue.removeMutationBatch(M,xe))}(r,a,e,m).next(()=>m.apply(a)).next(()=>r.mutationQueue.performConsistencyCheck(a)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(a,h,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(b){let M=zr();for(let X=0;X<b.mutationResults.length;++X)b.mutationResults[X].transformResults.length>0&&(M=M.add(b.batch.mutations[X].key));return M}(e))).next(()=>r.localDocuments.getDocuments(a,h))})}function om(s){const e=ln(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Cs.getLastRemoteSnapshotVersion(r))}function Iy(s,e){const r=ln(s),a=e.snapshotVersion;let h=r.Ui;return r.persistence.runTransaction("Apply remote event","readwrite-primary",m=>{const b=r.Gi.newChangeBuffer({trackRemovals:!0});h=r.Ui;const M=[];e.targetChanges.forEach((xe,et)=>{const Nt=h.get(et);if(!Nt)return;M.push(r.Cs.removeMatchingKeys(m,xe.removedDocuments,et).next(()=>r.Cs.addMatchingKeys(m,xe.addedDocuments,et)));let Jt=Nt.withSequenceNumber(m.currentSequenceNumber);var hn,zn,Jn;e.targetMismatches.has(et)?Jt=Jt.withResumeToken(Ws.EMPTY_BYTE_STRING,fr.min()).withLastLimboFreeSnapshotVersion(fr.min()):xe.resumeToken.approximateByteSize()>0&&(Jt=Jt.withResumeToken(xe.resumeToken,a)),h=h.insert(et,Jt),zn=Jt,Jn=xe,(0===(hn=Nt).resumeToken.approximateByteSize()||zn.snapshotVersion.toMicroseconds()-hn.snapshotVersion.toMicroseconds()>=3e8||Jn.addedDocuments.size+Jn.modifiedDocuments.size+Jn.removedDocuments.size>0)&&M.push(r.Cs.updateTargetData(m,Jt))});let X=pa(),ie=zr();if(e.documentUpdates.forEach(xe=>{e.resolvedLimboDocuments.has(xe)&&M.push(r.persistence.referenceDelegate.updateLimboDocument(m,xe))}),M.push(am(m,b,e.documentUpdates).next(xe=>{X=xe.Wi,ie=xe.zi})),!a.isEqual(fr.min())){const xe=r.Cs.getLastRemoteSnapshotVersion(m).next(et=>r.Cs.setTargetsMetadata(m,m.currentSequenceNumber,a));M.push(xe)}return me.waitFor(M).next(()=>b.apply(m)).next(()=>r.localDocuments.getLocalViewOfDocuments(m,X,ie)).next(()=>X)}).then(m=>(r.Ui=h,m))}function am(s,e,r){let a=zr(),h=zr();return r.forEach(m=>a=a.add(m)),e.getEntries(s,a).next(m=>{let b=pa();return r.forEach((M,X)=>{const ie=m.get(M);X.isFoundDocument()!==ie.isFoundDocument()&&(h=h.add(M)),X.isNoDocument()&&X.version.isEqual(fr.min())?(e.removeEntry(M,X.readTime),b=b.insert(M,X)):!ie.isValidDocument()||X.version.compareTo(ie.version)>0||0===X.version.compareTo(ie.version)&&ie.hasPendingWrites?(e.addEntry(X),b=b.insert(M,X)):zt("LocalStore","Ignoring outdated watch update for ",M,". Current version:",ie.version," Watch version:",X.version)}),{Wi:b,zi:h}})}function by(s,e){const r=ln(s);return r.persistence.runTransaction("Get next mutation batch","readonly",a=>(void 0===e&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function Ld(s,e){const r=ln(s);return r.persistence.runTransaction("Allocate target","readwrite",a=>{let h;return r.Cs.getTargetData(a,e).next(m=>m?(h=m,me.resolve(h)):r.Cs.allocateTargetId(a).next(b=>(h=new Ra(e,b,0,a.currentSequenceNumber),r.Cs.addTargetData(a,h).next(()=>h))))}).then(a=>{const h=r.Ui.get(a.targetId);return(null===h||a.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(r.Ui=r.Ui.insert(a.targetId,a),r.qi.set(e,a.targetId)),a})}function Vd(s,e,r){return Qp.apply(this,arguments)}function Qp(){return Qp=(0,_.Z)(function*(s,e,r){const a=ln(s),h=a.Ui.get(e),m=r?"readwrite":"readwrite-primary";try{r||(yield a.persistence.runTransaction("Release target",m,b=>a.persistence.referenceDelegate.removeTarget(b,h)))}catch(b){if(!jr(b))throw b;zt("LocalStore",`Failed to update sequence numbers for target ${e}: ${b}`)}a.Ui=a.Ui.remove(e),a.qi.delete(h.target)}),Qp.apply(this,arguments)}function Wf(s,e,r){const a=ln(s);let h=fr.min(),m=zr();return a.persistence.runTransaction("Execute query","readonly",b=>function(M,X,ie){const xe=ln(M),et=xe.qi.get(ie);return void 0!==et?me.resolve(xe.Ui.get(et)):xe.Cs.getTargetData(X,ie)}(a,b,Ts(e)).next(M=>{if(M)return h=M.lastLimboFreeSnapshotVersion,a.Cs.getMatchingKeysForTargetId(b,M.targetId).next(X=>{m=X})}).next(()=>a.Li.getDocumentsMatchingQuery(b,e,r?h:fr.min(),r?m:zr())).next(M=>(Pa(a,Oc(e),M),{documents:M,Hi:m})))}function lm(s,e){const r=ln(s),a=ln(r.Cs),h=r.Ui.get(e);return h?Promise.resolve(h.target):r.persistence.runTransaction("Get target data","readonly",m=>a.se(m,e).next(b=>b?b.target:null))}function du(s,e){const r=ln(s),a=r.Ki.get(e)||fr.min();return r.persistence.runTransaction("Get new document changes","readonly",h=>r.Gi.getAllFromCollectionGroup(h,e,lo(a,-1),Number.MAX_SAFE_INTEGER)).then(h=>(Pa(r,e,h),h))}function Pa(s,e,r){let a=s.Ki.get(e)||fr.min();r.forEach((h,m)=>{m.readTime.compareTo(a)>0&&(a=m.readTime)}),s.Ki.set(e,a)}function Kc(){return Kc=(0,_.Z)(function*(s,e,r,a){const h=ln(s);let m=zr(),b=pa();for(const ie of r){const xe=e.Ji(ie.metadata.name);ie.document&&(m=m.add(xe));const et=e.Yi(ie);et.setReadTime(e.Xi(ie.metadata.readTime)),b=b.insert(xe,et)}const M=h.Gi.newChangeBuffer({trackRemovals:!0}),X=yield Ld(h,(ie=a,Ts(zs(ei.fromString(`__bundle__/docs/${ie}`)))));var ie;return h.persistence.runTransaction("Apply bundle documents","readwrite",ie=>am(ie,M,b).next(xe=>(M.apply(ie),xe)).next(xe=>h.Cs.removeMatchingKeysForTargetId(ie,X.targetId).next(()=>h.Cs.addMatchingKeys(ie,m,X.targetId)).next(()=>h.localDocuments.getLocalViewOfDocuments(ie,xe.Wi,xe.zi)).next(()=>xe.Wi)))}),Kc.apply(this,arguments)}function Nh(s,e){return kh.apply(this,arguments)}function kh(){return kh=(0,_.Z)(function*(s,e,r=zr()){const a=yield Ld(s,Ts(xf(e.bundledQuery))),h=ln(s);return h.persistence.runTransaction("Save named query","readwrite",m=>{const b=qs(e.readTime);if(a.snapshotVersion.compareTo(b)>=0)return h.Ns.saveNamedQuery(m,e);const M=a.withResumeToken(Ws.EMPTY_BYTE_STRING,b);return h.Ui=h.Ui.insert(M.targetId,M),h.Cs.updateTargetData(m,M).next(()=>h.Cs.removeMatchingKeysForTargetId(m,a.targetId)).next(()=>h.Cs.addMatchingKeys(m,r,a.targetId)).next(()=>h.Ns.saveNamedQuery(m,e))})}),kh.apply(this,arguments)}function Bd(s,e){return`firestore_clients_${s}_${e}`}function Xp(s,e,r){let a=`firestore_mutations_${s}_${r}`;return e.isAuthenticated()&&(a+=`_${e.uid}`),a}function Yl(s,e){return`firestore_targets_${s}_${e}`}class $d{constructor(e,r,a,h){this.user=e,this.batchId=r,this.state=a,this.error=h}static Zi(e,r,a){const h=JSON.parse(a);let m,b="object"==typeof h&&-1!==["pending","acknowledged","rejected"].indexOf(h.state)&&(void 0===h.error||"object"==typeof h.error);return b&&h.error&&(b="string"==typeof h.error.message&&"string"==typeof h.error.code,b&&(m=new en(h.error.code,h.error.message))),b?new $d(e,r,h.state,m):(nr("SharedClientState",`Failed to parse mutation state for ID '${r}': ${a}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ud{constructor(e,r,a){this.targetId=e,this.state=r,this.error=a}static Zi(e,r){const a=JSON.parse(r);let h,m="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return m&&a.error&&(m="string"==typeof a.error.message&&"string"==typeof a.error.code,m&&(h=new en(a.error.code,a.error.message))),m?new Ud(e,a.state,h):(nr("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Fh{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Zi(e,r){const a=JSON.parse(r);let h="object"==typeof a&&a.activeTargetIds instanceof Array,m=D();for(let b=0;h&&b<a.activeTargetIds.length;++b)h=Uo(a.activeTargetIds[b]),m=m.add(a.activeTargetIds[b]);return h?new Fh(e,m):(nr("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class jd{constructor(e,r){this.clientId=e,this.onlineState=r}static Zi(e){const r=JSON.parse(e);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new jd(r.clientId,r.onlineState):(nr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Gf{constructor(){this.activeTargetIds=D()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Lh{constructor(e,r,a,h,m){this.window=e,this.Hs=r,this.persistenceKey=a,this.sr=h,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Di(gr),this.started=!1,this.cr=[];const b=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=m,this.ar=Bd(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Gf),this.lr=new RegExp(`^firestore_clients_${b}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${b}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${b}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(M){return`firestore_bundle_loaded_v2_${M}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_.Z)(function*(){const r=yield e.syncEngine.vi();for(const h of r){if(h===e.sr)continue;const m=e.getItem(Bd(e.persistenceKey,h));if(m){const b=Fh.Zi(h,m);b&&(e.ur=e.ur.insert(b.clientId,b))}}e.gr();const a=e.storage.getItem(e.wr);if(a){const h=e.yr(a);h&&e.pr(h)}for(const h of e.cr)e.rr(h);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let r=!1;return this.ur.forEach((a,h)=>{h.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,r,a){this.Tr(e,r,a),this.Er(e)}addLocalQueryTarget(e){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Yl(this.persistenceKey,e));if(a){const h=Ud.Zi(e,a);h&&(r=h.state)}}return this.Ar.er(e),this.gr(),r}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Yl(this.persistenceKey,e))}updateQueryState(e,r,a){this.Rr(e,r,a)}handleUserChange(e,r,a){r.forEach(h=>{this.Er(h)}),this.currentUser=e,a.forEach(h=>{this.addPendingMutation(h)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return zt("SharedClientState","READ",e,r),r}setItem(e,r){zt("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){zt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var r=this;const a=e;if(a.storageArea===this.storage){if(zt("SharedClientState","EVENT",a.key,a.newValue),a.key===this.ar)return void nr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,_.Z)(function*(){if(r.started){if(null!==a.key)if(r.lr.test(a.key)){if(null==a.newValue){const h=r.vr(a.key);return r.Vr(h,null)}{const h=r.Sr(a.key,a.newValue);if(h)return r.Vr(h.clientId,h)}}else if(r.dr.test(a.key)){if(null!==a.newValue){const h=r.Dr(a.key,a.newValue);if(h)return r.Cr(h)}}else if(r._r.test(a.key)){if(null!==a.newValue){const h=r.Nr(a.key,a.newValue);if(h)return r.kr(h)}}else if(a.key===r.wr){if(null!==a.newValue){const h=r.yr(a.newValue);if(h)return r.pr(h)}}else if(a.key===r.hr){const h=function(m){let b=as.at;if(null!=m)try{const M=JSON.parse(m);$n("number"==typeof M),b=M}catch(M){nr("SharedClientState","Failed to read sequence number from WebStorage",M)}return b}(a.newValue);h!==as.at&&r.sequenceNumberHandler(h)}else if(a.key===r.mr){const h=r.Or(a.newValue);yield Promise.all(h.map(m=>r.syncEngine.Mr(m)))}}else r.cr.push(a)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,r,a){const h=new $d(this.currentUser,e,r,a),m=Xp(this.persistenceKey,this.currentUser,e);this.setItem(m,h.tr())}Er(e){const r=Xp(this.persistenceKey,this.currentUser,e);this.removeItem(r)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,r,a){const h=Yl(this.persistenceKey,e),m=new Ud(e,r,a);this.setItem(h,m.tr())}Pr(e){const r=JSON.stringify(Array.from(e));this.setItem(this.mr,r)}vr(e){const r=this.lr.exec(e);return r?r[1]:null}Sr(e,r){const a=this.vr(e);return Fh.Zi(a,r)}Dr(e,r){const a=this.dr.exec(e),h=Number(a[1]);return $d.Zi(new yn(void 0!==a[2]?a[2]:null),h,r)}Nr(e,r){const a=this._r.exec(e),h=Number(a[1]);return Ud.Zi(h,r)}yr(e){return jd.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var r=this;return(0,_.Z)(function*(){if(e.user.uid===r.currentUser.uid)return r.syncEngine.Fr(e.batchId,e.state,e.error);zt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,r){const a=r?this.ur.insert(e,r):this.ur.remove(e),h=this.Ir(this.ur),m=this.Ir(a),b=[],M=[];return m.forEach(X=>{h.has(X)||b.push(X)}),h.forEach(X=>{m.has(X)||M.push(X)}),this.syncEngine.Br(b,M).then(()=>{this.ur=a})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let r=D();return e.forEach((a,h)=>{r=r.unionWith(h.activeTargetIds)}),r}}class zf{constructor(){this.Lr=new Gf,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,a){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,r,a){this.Ur[e]=r}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Gf,Promise.resolve()}handleUserChange(e,r,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class cm{qr(e){}shutdown(){}}class Zc{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){zt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){zt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Qc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qf{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Xc extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,r,a,h,m){const b=this.ho(e,r);zt("RestConnection","Sending: ",b,a);const M={};return this.lo(M,h,m),this.fo(e,b,M,a).then(X=>(zt("RestConnection","Received: ",X),X),X=>{throw Ji("RestConnection",`${e} failed with error: `,X,"url: ",b,"request:",a),X})}_o(e,r,a,h,m,b){return this.ao(e,r,a,h,m)}lo(e,r,a){e["X-Goog-Api-Client"]="gl-js/ fire/"+yr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((h,m)=>e[m]=h),a&&a.headers.forEach((h,m)=>e[m]=h)}ho(e,r){return`${this.oo}/v1/${r}:${Qc[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,r,a,h){return new Promise((m,b)=>{const M=new yt;M.setWithCredentials(!0),M.listenOnce(w.COMPLETE,()=>{try{switch(M.getLastErrorCode()){case Ro.NO_ERROR:const ie=M.getResponseJson();zt("Connection","XHR received:",JSON.stringify(ie)),m(ie);break;case Ro.TIMEOUT:zt("Connection",'RPC "'+e+'" timed out'),b(new en(ft.DEADLINE_EXCEEDED,"Request time out"));break;case Ro.HTTP_ERROR:const xe=M.getStatus();if(zt("Connection",'RPC "'+e+'" failed with status:',xe,"response text:",M.getResponseText()),xe>0){const et=M.getResponseJson().error;if(et&&et.status&&et.message){const Nt=function(Jt){const hn=Jt.toLowerCase().replace(/_/g,"-");return Object.values(ft).indexOf(hn)>=0?hn:ft.UNKNOWN}(et.status);b(new en(Nt,et.message))}else b(new en(ft.UNKNOWN,"Server responded with status "+M.getStatus()))}else b(new en(ft.UNAVAILABLE,"Connection failed."));break;default:Ln()}}finally{zt("Connection",'RPC "'+e+'" completed.')}});const X=JSON.stringify(h);M.send(r,"POST",X,a,15)})}wo(e,r,a){const h=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=$a(),b=Ua(),M={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(M.xmlHttpFactory=new q({})),this.lo(M.initMessageHeaders,r,a),M.encodeInitMessageHeaders=!0;const X=h.join("");zt("Connection","Creating WebChannel: "+X,M);const ie=m.createWebChannel(X,M);let xe=!1,et=!1;const Nt=new qf({Hr:hn=>{et?zt("Connection","Not sending because WebChannel is closed:",hn):(xe||(zt("Connection","Opening WebChannel transport."),ie.open(),xe=!0),zt("Connection","WebChannel sending:",hn),ie.send(hn))},Jr:()=>ie.close()}),Jt=(hn,zn,Jn)=>{hn.listen(zn,xi=>{try{Jn(xi)}catch(As){setTimeout(()=>{throw As},0)}})};return Jt(ie,fe.EventType.OPEN,()=>{et||zt("Connection","WebChannel transport opened.")}),Jt(ie,fe.EventType.CLOSE,()=>{et||(et=!0,zt("Connection","WebChannel transport closed"),Nt.io())}),Jt(ie,fe.EventType.ERROR,hn=>{et||(et=!0,Ji("Connection","WebChannel transport errored:",hn),Nt.io(new en(ft.UNAVAILABLE,"The operation could not be completed")))}),Jt(ie,fe.EventType.MESSAGE,hn=>{var zn;if(!et){const Jn=hn.data[0];$n(!!Jn);const xi=Jn,As=xi.error||(null===(zn=xi[0])||void 0===zn?void 0:zn.error);if(As){zt("Connection","WebChannel received error:",As);const ts=As.status;let ra=function(qi){const ko=Ai[qi];if(void 0!==ko)return Lc(ko)}(ts),gs=As.message;void 0===ra&&(ra=ft.INTERNAL,gs="Unknown error status: "+ts+" with message "+As.message),et=!0,Nt.io(new en(ra,gs)),ie.close()}else zt("Connection","WebChannel received:",Jn),Nt.ro(Jn)}}),Jt(b,N.STAT_EVENT,hn=>{hn.stat===T.PROXY?zt("Connection","Detected buffering proxy"):hn.stat===T.NOPROXY&&zt("Connection","Detected no buffering proxy")}),setTimeout(()=>{Nt.so()},0),Nt}}function Jc(){return"undefined"!=typeof window?window:null}function hu(){return"undefined"!=typeof document?document:null}function Hd(s){return new Ni(s,!0)}class Vh{constructor(e,r,a=1e3,h=1.5,m=6e4){this.Hs=e,this.timerId=r,this.mo=a,this.yo=h,this.po=m,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const r=Math.floor(this.Io+this.bo()),a=Math.max(0,Date.now()-this.Eo),h=Math.max(0,r-a);h>0&&zt("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.Io} ms, delay with jitter: ${r} ms, last attempt: ${a} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,h,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Jp{constructor(e,r,a,h,m,b,M,X){this.Hs=e,this.vo=a,this.Vo=h,this.So=m,this.authCredentialsProvider=b,this.appCheckCredentialsProvider=M,this.listener=X,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Vh(e,r)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,_.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,_.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,r){var a=this;return(0,_.Z)(function*(){a.Uo(),a.qo(),a.No.cancel(),a.Do++,4!==e?a.No.reset():r&&r.code===ft.RESOURCE_EXHAUSTED?(nr(r.toString()),nr("Using maximum backoff delay to prevent overloading the backend."),a.No.Ao()):r&&r.code===ft.UNAUTHENTICATED&&3!==a.state&&(a.authCredentialsProvider.invalidateToken(),a.appCheckCredentialsProvider.invalidateToken()),null!==a.stream&&(a.Ko(),a.stream.close(),a.stream=null),a.state=e,yield a.listener.Zr(r)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),r=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,h])=>{this.Do===r&&this.Qo(a,h)},a=>{e(()=>{const h=new en(ft.UNKNOWN,"Fetching auth token failed: "+a.message);return this.jo(h)})})}Qo(e,r){const a=this.Go(this.Do);this.stream=this.Wo(e,r),this.stream.Yr(()=>{a(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(h=>{a(()=>this.jo(h))}),this.stream.onMessage(h=>{a(()=>this.onMessage(h))})}Mo(){var e=this;this.state=5,this.No.Ro((0,_.Z)(function*(){e.state=0,e.start()}))}jo(e){return zt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return r=>{this.Hs.enqueueAndForget(()=>this.Do===e?r():(zt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eg extends Jp{constructor(e,r,a,h,m,b){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,a,h,b),this.It=m}Wo(e,r){return this.So.wo("Listen",e,r)}onMessage(e){this.No.reset();const r=function(s,e){let r;if("targetChange"in e){const a="NO_CHANGE"===(X=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===X?1:"REMOVE"===X?2:"CURRENT"===X?3:"RESET"===X?4:Ln(),h=e.targetChange.targetIds||[],m=function(X,ie){return X.gt?($n(void 0===ie||"string"==typeof ie),Ws.fromBase64String(ie||"")):($n(void 0===ie||ie instanceof Uint8Array),Ws.fromUint8Array(ie||new Uint8Array))}(s,e.targetChange.resumeToken),b=e.targetChange.cause,M=b&&function(X){const ie=void 0===X.code?ft.UNKNOWN:Lc(X.code);return new en(ie,X.message||"")}(b);r=new he(a,h,m,M||null)}else if("documentChange"in e){const a=e.documentChange,h=Io(s,a.document.name),m=qs(a.document.updateTime),b=new Y({mapValue:{fields:a.document.fields}}),M=Be.newFoundDocument(h,m,b);r=new x(a.targetIds||[],a.removedTargetIds||[],M.key,M)}else if("documentDelete"in e){const a=e.documentDelete,h=Io(s,a.document),m=a.readTime?qs(a.readTime):fr.min(),b=Be.newNoDocument(h,m);r=new x([],a.removedTargetIds||[],b.key,b)}else if("documentRemove"in e){const a=e.documentRemove,h=Io(s,a.document);r=new x([],a.removedTargetIds||[],h,null)}else{if(!("filter"in e))return Ln();{const a=e.filter,m=new Qu(a.count||0);r=new ee(a.targetId,m)}}var X;return r}(this.It,e),a=function(h){if(!("targetChange"in h))return fr.min();const m=h.targetChange;return m.targetIds&&m.targetIds.length?fr.min():m.readTime?qs(m.readTime):fr.min()}(e);return this.listener.zo(r,a)}Ho(e){const r={};r.database=Ls(this.It),r.addTarget=function(h,m){let b;const M=m.target;return b=Pr(M)?{documents:ph(h,M)}:{query:gh(h,M)},b.targetId=m.targetId,m.resumeToken.approximateByteSize()>0?b.resumeToken=Cl(h,m.resumeToken):m.snapshotVersion.compareTo(fr.min())>0&&(b.readTime=io(h,m.snapshotVersion.toTimestamp())),b}(this.It,e);const a=function(s,e){const r=function(a,h){switch(h){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ln()}}(0,e.purpose);return null==r?null:{"goog-listen-tags":r}}(0,e);a&&(r.labels=a),this.Lo(r)}Jo(e){const r={};r.database=Ls(this.It),r.removeTarget=e,this.Lo(r)}}class Wd extends Jp{constructor(e,r,a,h,m,b){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,a,h,b),this.It=m,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,r){return this.So.wo("Write",e,r)}onMessage(e){if($n(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const r=function(s,e){return s&&s.length>0?($n(void 0!==e),s.map(r=>function(a,h){let m=qs(a.updateTime?a.updateTime:h);return m.isEqual(fr.min())&&(m=qs(h)),new za(m,a.transformResults||[])}(r,e))):[]}(e.writeResults,e.commitTime),a=qs(e.commitTime);return this.listener.tu(a,r)}return $n(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Ls(this.It),this.Lo(e)}Zo(e){const r={streamToken:this.lastStreamToken,writes:e.map(a=>Id(this.It,a))};this.Lo(r)}}class Yf extends class{}{constructor(e,r,a,h){super(),this.authCredentials=e,this.appCheckCredentials=r,this.So=a,this.It=h,this.su=!1}iu(){if(this.su)throw new en(ft.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,r,a){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.So.ao(e,r,a,h,m)).catch(h=>{throw"FirebaseError"===h.name?(h.code===ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new en(ft.UNKNOWN,h.toString())})}_o(e,r,a,h){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,b])=>this.So._o(e,r,a,m,b,h)).catch(m=>{throw"FirebaseError"===m.name?(m.code===ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new en(ft.UNKNOWN,m.toString())})}terminate(){this.su=!0}}class $h{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const r=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(nr(r),this.uu=!1):zt("OnlineStateTracker",r)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class Cy{constructor(e,r,a,h,m){var b=this;this.localStore=e,this.datastore=r,this.asyncQueue=a,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=m,this.gu.qr(M=>{a.enqueueAndForget((0,_.Z)(function*(){var X;pc(b)&&(zt("RemoteStore","Restarting streams for network reachability change."),yield(X=(0,_.Z)(function*(ie){const xe=ln(ie);xe.wu.add(4),yield td(xe),xe.yu.set("Unknown"),xe.wu.delete(4),yield ed(xe)}),function(ie){return X.apply(this,arguments)})(b))}))}),this.yu=new $h(a,h)}}function ed(s){return Uh.apply(this,arguments)}function Uh(){return Uh=(0,_.Z)(function*(s){if(pc(s))for(const e of s.mu)yield e(!0)}),Uh.apply(this,arguments)}function td(s){return jh.apply(this,arguments)}function jh(){return jh=(0,_.Z)(function*(s){for(const e of s.mu)yield e(!1)}),jh.apply(this,arguments)}function Hh(s,e){const r=ln(s);r._u.has(e.targetId)||(r._u.set(e.targetId,e),hm(r)?ng(r):Fu(r).Oo()&&Na(r,e))}function Wh(s,e){const r=ln(s),a=Fu(r);r._u.delete(e),a.Oo()&&dm(r,e),0===r._u.size&&(a.Oo()?a.$o():pc(r)&&r.yu.set("Unknown"))}function Na(s,e){s.pu.Mt(e.targetId),Fu(s).Ho(e)}function dm(s,e){s.pu.Mt(e),Fu(s).Jo(e)}function ng(s){s.pu=new Ut({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),se:e=>s._u.get(e)||null}),Fu(s).start(),s.yu.cu()}function hm(s){return pc(s)&&!Fu(s).ko()&&s._u.size>0}function pc(s){return 0===ln(s).wu.size}function rg(s){s.pu=void 0}function H_(s){return ig.apply(this,arguments)}function ig(){return ig=(0,_.Z)(function*(s){s._u.forEach((e,r)=>{Na(s,e)})}),ig.apply(this,arguments)}function sg(s,e){return Kf.apply(this,arguments)}function Kf(){return Kf=(0,_.Z)(function*(s,e){rg(s),hm(s)?(s.yu.lu(e),ng(s)):s.yu.set("Unknown")}),Kf.apply(this,arguments)}function wy(s,e,r){return og.apply(this,arguments)}function og(){return og=(0,_.Z)(function*(s,e,r){if(s.yu.set("Online"),e instanceof he&&2===e.state&&e.cause)try{yield(a=(0,_.Z)(function*(h,m){const b=m.cause;for(const M of m.targetIds)h._u.has(M)&&(yield h.remoteSyncer.rejectListen(M,b),h._u.delete(M),h.pu.removeTarget(M))}),function(h,m){return a.apply(this,arguments)})(s,e)}catch(a){zt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),a),yield Zf(s,a)}else if(e instanceof x?s.pu.Gt(e):e instanceof ee?s.pu.Yt(e):s.pu.Wt(e),!r.isEqual(fr.min()))try{const a=yield om(s.localStore);r.compareTo(a)>=0&&(yield function(h,m){const b=h.pu.te(m);return b.targetChanges.forEach((M,X)=>{if(M.resumeToken.approximateByteSize()>0){const ie=h._u.get(X);ie&&h._u.set(X,ie.withResumeToken(M.resumeToken,m))}}),b.targetMismatches.forEach(M=>{const X=h._u.get(M);if(!X)return;h._u.set(M,X.withResumeToken(Ws.EMPTY_BYTE_STRING,X.snapshotVersion)),dm(h,M);const ie=new Ra(X.target,M,1,X.sequenceNumber);Na(h,ie)}),h.remoteSyncer.applyRemoteEvent(b)}(s,r))}catch(a){zt("RemoteStore","Failed to raise snapshot:",a),yield Zf(s,a)}var a}),og.apply(this,arguments)}function Zf(s,e,r){return Qf.apply(this,arguments)}function Qf(){return Qf=(0,_.Z)(function*(s,e,r){if(!jr(e))throw e;s.wu.add(1),yield td(s),s.yu.set("Offline"),r||(r=()=>om(s.localStore)),s.asyncQueue.enqueueRetryable((0,_.Z)(function*(){zt("RemoteStore","Retrying IndexedDB access"),yield r(),s.wu.delete(1),yield ed(s)}))}),Qf.apply(this,arguments)}function fm(s,e){return e().catch(r=>Zf(s,r,e))}function nd(s){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,_.Z)(function*(s){const e=ln(s),r=pu(e);let a=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;Ty(e);)try{const h=yield by(e.localStore,a);if(null===h){0===e.du.length&&r.$o();break}a=h.batchId,pm(e,h)}catch(h){yield Zf(e,h)}ag(e)&&gm(e)}),Xf.apply(this,arguments)}function Ty(s){return pc(s)&&s.du.length<10}function pm(s,e){s.du.push(e);const r=pu(s);r.Oo()&&r.Xo&&r.Zo(e.mutations)}function ag(s){return pc(s)&&!pu(s).ko()&&s.du.length>0}function gm(s){pu(s).start()}function fu(s){return Gh.apply(this,arguments)}function Gh(){return Gh=(0,_.Z)(function*(s){pu(s).nu()}),Gh.apply(this,arguments)}function Dy(s){return lg.apply(this,arguments)}function lg(){return lg=(0,_.Z)(function*(s){const e=pu(s);for(const r of s.du)e.Zo(r.mutations)}),lg.apply(this,arguments)}function W_(s,e,r){return Jf.apply(this,arguments)}function Jf(){return Jf=(0,_.Z)(function*(s,e,r){const a=s.du.shift(),h=Sd.from(a,e,r);yield fm(s,()=>s.remoteSyncer.applySuccessfulWrite(h)),yield nd(s)}),Jf.apply(this,arguments)}function Sy(s,e){return ug.apply(this,arguments)}function ug(){return ug=(0,_.Z)(function*(s,e){var r;e&&pu(s).Xo&&(yield(r=(0,_.Z)(function*(a,h){if(_d(m=h.code)&&m!==ft.ABORTED){const b=a.du.shift();pu(a).Fo(),yield fm(a,()=>a.remoteSyncer.rejectFailedWrite(b.batchId,h)),yield nd(a)}var m}),function(a,h){return r.apply(this,arguments)})(s,e)),ag(s)&&gm(s)}),ug.apply(this,arguments)}function mm(s,e){return zh.apply(this,arguments)}function zh(){return zh=(0,_.Z)(function*(s,e){const r=ln(s);r.asyncQueue.verifyOperationInProgress(),zt("RemoteStore","RemoteStore received new credentials");const a=pc(r);r.wu.add(3),yield td(r),a&&r.yu.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(e),r.wu.delete(3),yield ed(r)}),zh.apply(this,arguments)}function cg(s,e){return dg.apply(this,arguments)}function dg(){return dg=(0,_.Z)(function*(s,e){const r=ln(s);e?(r.wu.delete(2),yield ed(r)):e||(r.wu.add(2),yield td(r),r.yu.set("Unknown"))}),dg.apply(this,arguments)}function Fu(s){return s.Iu||(s.Iu=function(e,r,a){const h=ln(e);return h.iu(),new eg(r,h.So,h.authCredentials,h.appCheckCredentials,h.It,a)}(s.datastore,s.asyncQueue,{Yr:H_.bind(null,s),Zr:sg.bind(null,s),zo:wy.bind(null,s)}),s.mu.push(function(){var e=(0,_.Z)(function*(r){r?(s.Iu.Fo(),hm(s)?ng(s):s.yu.set("Unknown")):(yield s.Iu.stop(),rg(s))});return function(r){return e.apply(this,arguments)}}())),s.Iu}function pu(s){return s.Tu||(s.Tu=function(e,r,a){const h=ln(e);return h.iu(),new Wd(r,h.So,h.authCredentials,h.appCheckCredentials,h.It,a)}(s.datastore,s.asyncQueue,{Yr:fu.bind(null,s),Zr:Sy.bind(null,s),eu:Dy.bind(null,s),tu:W_.bind(null,s)}),s.mu.push(function(){var e=(0,_.Z)(function*(r){r?(s.Tu.Fo(),yield nd(s)):(yield s.Tu.stop(),s.du.length>0&&(zt("RemoteStore",`Stopping write stream with ${s.du.length} pending writes`),s.du=[]))});return function(r){return e.apply(this,arguments)}}())),s.Tu}class hg{constructor(e,r,a,h,m){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=a,this.op=h,this.removalCallback=m,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(b=>{})}static createAndSchedule(e,r,a,h,m){const b=Date.now()+a,M=new hg(e,r,b,h,m);return M.start(a),M}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new en(ft.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gc(s,e){if(nr("AsyncQueue",`${e}: ${s}`),jr(s))return new en(ft.UNAVAILABLE,`${e}: ${s}`);throw s}class mc{constructor(e){this.comparator=e?(r,a)=>e(r,a)||An.comparator(r.key,a.key):(r,a)=>An.comparator(r.key,a.key),this.keyedMap=bl(),this.sortedSet=new Di(this.comparator)}static emptySet(e){return new mc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,a)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof mc)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;r.hasNext();){const h=r.getNext().key,m=a.getNext().key;if(!h.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,r){const a=new mc;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=r,a}}class fg{constructor(){this.Eu=new Di(An.comparator)}track(e){const r=e.doc.key,a=this.Eu.get(r);a?0!==e.type&&3===a.type?this.Eu=this.Eu.insert(r,e):3===e.type&&1!==a.type?this.Eu=this.Eu.insert(r,{type:a.type,doc:e.doc}):2===e.type&&2===a.type?this.Eu=this.Eu.insert(r,{type:2,doc:e.doc}):2===e.type&&0===a.type?this.Eu=this.Eu.insert(r,{type:0,doc:e.doc}):1===e.type&&0===a.type?this.Eu=this.Eu.remove(r):1===e.type&&2===a.type?this.Eu=this.Eu.insert(r,{type:1,doc:a.doc}):0===e.type&&1===a.type?this.Eu=this.Eu.insert(r,{type:2,doc:e.doc}):Ln():this.Eu=this.Eu.insert(r,e)}Au(){const e=[];return this.Eu.inorderTraversal((r,a)=>{e.push(a)}),e}}class Gd{constructor(e,r,a,h,m,b,M,X,ie){this.query=e,this.docs=r,this.oldDocs=a,this.docChanges=h,this.mutatedKeys=m,this.fromCache=b,this.syncStateChanged=M,this.excludesMetadataChanges=X,this.hasCachedResults=ie}static fromInitialDocuments(e,r,a,h,m){const b=[];return r.forEach(M=>{b.push({type:0,doc:M})}),new Gd(e,r,mc.emptySet(r),b,a,h,!0,!1,m)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ll(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,a=e.docChanges;if(r.length!==a.length)return!1;for(let h=0;h<r.length;h++)if(r[h].type!==a[h].type||!r[h].doc.isEqual(a[h].doc))return!1;return!0}}class Ay{constructor(){this.Ru=void 0,this.listeners=[]}}class pg{constructor(){this.queries=new Il(e=>il(e),Ll),this.onlineState="Unknown",this.bu=new Set}}function ym(s,e){return gg.apply(this,arguments)}function gg(){return gg=(0,_.Z)(function*(s,e){const r=ln(s),a=e.query;let h=!1,m=r.queries.get(a);if(m||(h=!0,m=new Ay),h)try{m.Ru=yield r.onListen(a)}catch(b){const M=gc(b,`Initialization of query '${Tu(e.query)}' failed`);return void e.onError(M)}r.queries.set(a,m),m.listeners.push(e),e.Pu(r.onlineState),m.Ru&&e.vu(m.Ru)&&qh(r)}),gg.apply(this,arguments)}function ep(s,e){return tp.apply(this,arguments)}function tp(){return tp=(0,_.Z)(function*(s,e){const r=ln(s),a=e.query;let h=!1;const m=r.queries.get(a);if(m){const b=m.listeners.indexOf(e);b>=0&&(m.listeners.splice(b,1),h=0===m.listeners.length)}if(h)return r.queries.delete(a),r.onUnlisten(a)}),tp.apply(this,arguments)}function mg(s,e){const r=ln(s);let a=!1;for(const h of e){const b=r.queries.get(h.query);if(b){for(const M of b.listeners)M.vu(h)&&(a=!0);b.Ru=h}}a&&qh(r)}function yg(s,e,r){const a=ln(s),h=a.queries.get(e);if(h)for(const m of h.listeners)m.onError(r);a.queries.delete(e)}function qh(s){s.bu.forEach(e=>{e.next()})}class Sl{constructor(e,r,a){this.query=e,this.Vu=r,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=a||{}}vu(e){if(!this.options.includeMetadataChanges){const a=[];for(const h of e.docChanges)3!==h.type&&a.push(h);e=new Gd(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),r=!0):this.xu(e,this.onlineState)&&(this.Nu(e),r=!0),this.Du=e,r}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let r=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),r=!0),r}xu(e,r){return!e.fromCache||(!this.options.ku||!("Offline"!==r))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===r)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Gd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class zd{constructor(e,r){this.payload=e,this.byteLength=r}Ou(){return"metadata"in this.payload}}class _g{constructor(e){this.It=e}Ji(e){return Io(this.It,e)}Yi(e){return e.metadata.exists?fh(this.It,e.document,!1):Be.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return qs(e)}}class _m{constructor(e,r,a){this.Mu=e,this.localStore=r,this.It=a,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=vg(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++r;const a=ei.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(a.get(a.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}$u(e){const r=new Map,a=new _g(this.It);for(const h of e)if(h.metadata.queries){const m=a.Ji(h.metadata.name);for(const b of h.metadata.queries){const M=(r.get(b)||zr()).add(m);r.set(b,M)}}return r}complete(){var e=this;return(0,_.Z)(function*(){const r=yield function(s,e,r,a){return Kc.apply(this,arguments)}(e.localStore,new _g(e.It),e.documents,e.Mu.id),a=e.$u(e.documents);for(const h of e.queries)yield Nh(e.localStore,h,a.get(h.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:r}})()}}function vg(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}class yc{constructor(e){this.key=e}}class np{constructor(e){this.key=e}}class rd{constructor(e,r){this.query=e,this.Uu=r,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=zr(),this.mutatedKeys=zr(),this.Gu=ah(e),this.Qu=new mc(this.Gu)}get ju(){return this.Uu}Wu(e,r){const a=r?r.zu:new fg,h=r?r.Qu:this.Qu;let m=r?r.mutatedKeys:this.mutatedKeys,b=h,M=!1;const X="F"===this.query.limitType&&h.size===this.query.limit?h.last():null,ie="L"===this.query.limitType&&h.size===this.query.limit?h.first():null;if(e.inorderTraversal((xe,et)=>{const Nt=h.get(xe),Jt=Du(this.query,et)?et:null,hn=!!Nt&&this.mutatedKeys.has(Nt.key),zn=!!Jt&&(Jt.hasLocalMutations||this.mutatedKeys.has(Jt.key)&&Jt.hasCommittedMutations);let Jn=!1;Nt&&Jt?Nt.data.isEqual(Jt.data)?hn!==zn&&(a.track({type:3,doc:Jt}),Jn=!0):this.Hu(Nt,Jt)||(a.track({type:2,doc:Jt}),Jn=!0,(X&&this.Gu(Jt,X)>0||ie&&this.Gu(Jt,ie)<0)&&(M=!0)):!Nt&&Jt?(a.track({type:0,doc:Jt}),Jn=!0):Nt&&!Jt&&(a.track({type:1,doc:Nt}),Jn=!0,(X||ie)&&(M=!0)),Jn&&(Jt?(b=b.add(Jt),m=zn?m.add(xe):m.delete(xe)):(b=b.delete(xe),m=m.delete(xe)))}),null!==this.query.limit)for(;b.size>this.query.limit;){const xe="F"===this.query.limitType?b.last():b.first();b=b.delete(xe.key),m=m.delete(xe.key),a.track({type:1,doc:xe})}return{Qu:b,zu:a,$i:M,mutatedKeys:m}}Hu(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,a){const h=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const m=e.zu.Au();m.sort((ie,xe)=>function(et,Nt){const Jt=hn=>{switch(hn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ln()}};return Jt(et)-Jt(Nt)}(ie.type,xe.type)||this.Gu(ie.doc,xe.doc)),this.Ju(a);const b=r?this.Yu():[],M=0===this.Ku.size&&this.current?1:0,X=M!==this.qu;return this.qu=M,0!==m.length||X?{snapshot:new Gd(this.query,e.Qu,h,m,e.mutatedKeys,0===M,X,!1,!!a&&a.resumeToken.approximateByteSize()>0),Xu:b}:{Xu:b}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new fg,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(r=>this.Uu=this.Uu.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Uu=this.Uu.delete(r)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=zr(),this.Qu.forEach(a=>{this.Zu(a.key)&&(this.Ku=this.Ku.add(a.key))});const r=[];return e.forEach(a=>{this.Ku.has(a)||r.push(new np(a))}),this.Ku.forEach(a=>{e.has(a)||r.push(new yc(a))}),r}tc(e){this.Uu=e.Hi,this.Ku=zr();const r=this.Wu(e.documents);return this.applyChanges(r,!0)}ec(){return Gd.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class qd{constructor(e,r,a){this.query=e,this.targetId=r,this.view=a}}class vm{constructor(e){this.key=e,this.nc=!1}}class rp{constructor(e,r,a,h,m,b){this.localStore=e,this.remoteStore=r,this.eventManager=a,this.sharedClientState=h,this.currentUser=m,this.maxConcurrentLimboResolutions=b,this.sc={},this.ic=new Il(M=>il(M),Ll),this.rc=new Map,this.oc=new Set,this.uc=new Di(An.comparator),this.cc=new Map,this.ac=new Dl,this.hc={},this.lc=new Map,this.fc=Pu.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function Eg(s,e){return ip.apply(this,arguments)}function ip(){return ip=(0,_.Z)(function*(s,e){const r=tf(s);let a,h;const m=r.ic.get(e);if(m)a=m.targetId,r.sharedClientState.addLocalQueryTarget(a),h=m.view.ec();else{const b=yield Ld(r.localStore,Ts(e));r.isPrimaryClient&&Hh(r.remoteStore,b);const M=r.sharedClientState.addLocalQueryTarget(b.targetId);a=b.targetId,h=yield Yh(r,e,a,"current"===M,b.resumeToken)}return h}),ip.apply(this,arguments)}function Yh(s,e,r,a,h){return sp.apply(this,arguments)}function sp(){return sp=(0,_.Z)(function*(s,e,r,a,h){s._c=(et,Nt,Jt)=>{return(hn=(0,_.Z)(function*(zn,Jn,xi,As){let ts=Jn.view.Wu(xi);ts.$i&&(ts=yield Wf(zn.localStore,Jn.query,!1).then(({documents:qi})=>Jn.view.Wu(qi,ts)));const ra=As&&As.targetChanges.get(Jn.targetId),gs=Jn.view.applyChanges(ts,zn.isPrimaryClient,ra);return Po(zn,Jn.targetId,gs.Xu),gs.snapshot}),function(zn,Jn,xi,As){return hn.apply(this,arguments)})(s,et,Nt,Jt);var hn};const m=yield Wf(s.localStore,e,!0),b=new rd(e,m.Hi),M=b.Wu(m.documents),X=v.createSynthesizedTargetChangeForCurrentChange(r,a&&"Offline"!==s.onlineState,h),ie=b.applyChanges(M,s.isPrimaryClient,X);Po(s,r,ie.Xu);const xe=new qd(e,r,b);return s.ic.set(e,xe),s.rc.has(r)?s.rc.get(r).push(e):s.rc.set(r,[e]),ie.snapshot}),sp.apply(this,arguments)}function _c(s,e){return Ig.apply(this,arguments)}function Ig(){return Ig=(0,_.Z)(function*(s,e){const r=ln(s),a=r.ic.get(e),h=r.rc.get(a.targetId);if(h.length>1)return r.rc.set(a.targetId,h.filter(m=>!Ll(m,e))),void r.ic.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||(yield Vd(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),Wh(r.remoteStore,a.targetId),Bu(r,a.targetId)}).catch(ye))):(Bu(r,a.targetId),yield Vd(r.localStore,a.targetId,!0))}),Ig.apply(this,arguments)}function Kh(){return Kh=(0,_.Z)(function*(s,e,r){const a=gp(s);try{const h=yield function(m,b){const M=ln(m),X=hi.now(),ie=b.reduce((Nt,Jt)=>Nt.add(Jt.key),zr());let xe,et;return M.persistence.runTransaction("Locally write mutations","readwrite",Nt=>{let Jt=pa(),hn=zr();return M.Gi.getEntries(Nt,ie).next(zn=>{Jt=zn,Jt.forEach((Jn,xi)=>{xi.isValidDocument()||(hn=hn.add(Jn))})}).next(()=>M.localDocuments.getOverlayedDocuments(Nt,Jt)).next(zn=>{xe=zn;const Jn=[];for(const xi of b){const As=Cf(xi,xe.get(xi.key).overlayedDocument);null!=As&&Jn.push(new El(xi.key,As,pe(As.value.mapValue),Pi.exists(!0)))}return M.mutationQueue.addMutationBatch(Nt,X,Jn,b)}).next(zn=>{et=zn;const Jn=zn.applyToLocalDocumentSet(xe,hn);return M.documentOverlayCache.saveOverlays(Nt,zn.batchId,Jn)})}).then(()=>({batchId:et.batchId,changes:Vc(xe)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(h.batchId),function(m,b,M){let X=m.hc[m.currentUser.toKey()];X||(X=new Di(gr)),X=X.insert(b,M),m.hc[m.currentUser.toKey()]=X}(a,h.batchId,r),yield $u(a,h.changes),yield nd(a.remoteStore)}catch(h){const m=gc(h,"Failed to persist write");r.reject(m)}}),Kh.apply(this,arguments)}function vc(s,e){return Zh.apply(this,arguments)}function Zh(){return Zh=(0,_.Z)(function*(s,e){const r=ln(s);try{const a=yield Iy(r.localStore,e);e.targetChanges.forEach((h,m)=>{const b=r.cc.get(m);b&&($n(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1),h.addedDocuments.size>0?b.nc=!0:h.modifiedDocuments.size>0?$n(b.nc):h.removedDocuments.size>0&&($n(b.nc),b.nc=!1))}),yield $u(r,a,e)}catch(a){yield ye(a)}}),Zh.apply(this,arguments)}function op(s,e,r){const a=ln(s);if(a.isPrimaryClient&&0===r||!a.isPrimaryClient&&1===r){const h=[];a.ic.forEach((m,b)=>{const M=b.view.Pu(e);M.snapshot&&h.push(M.snapshot)}),function(m,b){const M=ln(m);M.onlineState=b;let X=!1;M.queries.forEach((ie,xe)=>{for(const et of xe.listeners)et.Pu(b)&&(X=!0)}),X&&qh(M)}(a.eventManager,e),h.length&&a.sc.zo(h),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}function Im(s,e,r){return Lu.apply(this,arguments)}function Lu(){return Lu=(0,_.Z)(function*(s,e,r){const a=ln(s);a.sharedClientState.updateQueryState(e,"rejected",r);const h=a.cc.get(e),m=h&&h.key;if(m){let b=new Di(An.comparator);b=b.insert(m,Be.newNoDocument(m,fr.min()));const M=zr().add(m),X=new g(fr.min(),new Map,new ji(gr),b,M);yield vc(a,X),a.uc=a.uc.remove(m),a.cc.delete(e),Yd(a)}else yield Vd(a.localStore,e,!1).then(()=>Bu(a,e,r)).catch(ye)}),Lu.apply(this,arguments)}function bm(s,e){return ap.apply(this,arguments)}function ap(){return ap=(0,_.Z)(function*(s,e){const r=ln(s),a=e.batch.batchId;try{const h=yield Ey(r.localStore,e);ps(r,a,null),Qh(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),yield $u(r,h)}catch(h){yield ye(h)}}),ap.apply(this,arguments)}function Vu(s,e,r){return Co.apply(this,arguments)}function Co(){return Co=(0,_.Z)(function*(s,e,r){const a=ln(s);try{const h=yield function(m,b){const M=ln(m);return M.persistence.runTransaction("Reject batch","readwrite-primary",X=>{let ie;return M.mutationQueue.lookupMutationBatch(X,b).next(xe=>($n(null!==xe),ie=xe.keys(),M.mutationQueue.removeMutationBatch(X,xe))).next(()=>M.mutationQueue.performConsistencyCheck(X)).next(()=>M.documentOverlayCache.removeOverlaysForBatchId(X,ie,b)).next(()=>M.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(X,ie)).next(()=>M.localDocuments.getDocuments(X,ie))})}(a.localStore,e);ps(a,e,r),Qh(a,e),a.sharedClientState.updateMutationState(e,"rejected",r),yield $u(a,h)}catch(h){yield ye(h)}}),Co.apply(this,arguments)}function Ec(){return Ec=(0,_.Z)(function*(s,e){const r=ln(s);pc(r.remoteStore)||zt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const a=yield function(m){const b=ln(m);return b.persistence.runTransaction("Get highest unacknowledged batch id","readonly",M=>b.mutationQueue.getHighestUnacknowledgedBatchId(M))}(r.localStore);if(-1===a)return void e.resolve();const h=r.lc.get(a)||[];h.push(e),r.lc.set(a,h)}catch(a){const h=gc(a,"Initialization of waitForPendingWrites() operation failed");e.reject(h)}}),Ec.apply(this,arguments)}function Qh(s,e){(s.lc.get(e)||[]).forEach(r=>{r.resolve()}),s.lc.delete(e)}function ps(s,e,r){const a=ln(s);let h=a.hc[a.currentUser.toKey()];if(h){const m=h.get(e);m&&(r?m.reject(r):m.resolve(),h=h.remove(e)),a.hc[a.currentUser.toKey()]=h}}function Bu(s,e,r=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.rc.get(e))s.ic.delete(a),r&&s.sc.wc(a,r);s.rc.delete(e),s.isPrimaryClient&&s.ac.ls(e).forEach(a=>{s.ac.containsKey(a)||Cm(s,a)})}function Cm(s,e){s.oc.delete(e.path.canonicalString());const r=s.uc.get(e);null!==r&&(Wh(s.remoteStore,r),s.uc=s.uc.remove(e),s.cc.delete(r),Yd(s))}function Po(s,e,r){for(const a of r)a instanceof yc?(s.ac.addReference(a.key,e),lp(s,a)):a instanceof np?(zt("SyncEngine","Document no longer in limbo: "+a.key),s.ac.removeReference(a.key,e),s.ac.containsKey(a.key)||Cm(s,a.key)):Ln()}function lp(s,e){const r=e.key,a=r.path.canonicalString();s.uc.get(r)||s.oc.has(a)||(zt("SyncEngine","New document in limbo: "+r),s.oc.add(a),Yd(s))}function Yd(s){for(;s.oc.size>0&&s.uc.size<s.maxConcurrentLimboResolutions;){const e=s.oc.values().next().value;s.oc.delete(e);const r=new An(ei.fromString(e)),a=s.fc.next();s.cc.set(a,new vm(r)),s.uc=s.uc.insert(r,a),Hh(s.remoteStore,new Ra(Ts(zs(r.path)),a,2,as.at))}}function $u(s,e,r){return Xh.apply(this,arguments)}function Xh(){return Xh=(0,_.Z)(function*(s,e,r){const a=ln(s),h=[],m=[],b=[];var M;a.ic.isEmpty()||(a.ic.forEach((M,X)=>{b.push(a._c(X,e,r).then(ie=>{if((ie||r)&&a.isPrimaryClient&&a.sharedClientState.updateQueryState(X.targetId,(null==ie?void 0:ie.fromCache)?"not-current":"current"),ie){h.push(ie);const xe=qp.Ci(X.targetId,ie);m.push(xe)}}))}),yield Promise.all(b),a.sc.zo(h),yield(M=(0,_.Z)(function*(X,ie){const xe=ln(X);try{yield xe.persistence.runTransaction("notifyLocalViewChanges","readwrite",et=>me.forEach(ie,Nt=>me.forEach(Nt.Si,Jt=>xe.persistence.referenceDelegate.addReference(et,Nt.targetId,Jt)).next(()=>me.forEach(Nt.Di,Jt=>xe.persistence.referenceDelegate.removeReference(et,Nt.targetId,Jt)))))}catch(et){if(!jr(et))throw et;zt("LocalStore","Failed to update sequence numbers: "+et)}for(const et of ie){const Nt=et.targetId;if(!et.fromCache){const Jt=xe.Ui.get(Nt),zn=Jt.withLastLimboFreeSnapshotVersion(Jt.snapshotVersion);xe.Ui=xe.Ui.insert(Nt,zn)}}}),function(X,ie){return M.apply(this,arguments)})(a.localStore,m))}),Xh.apply(this,arguments)}function bg(s,e){return Kd.apply(this,arguments)}function Kd(){return Kd=(0,_.Z)(function*(s,e){const r=ln(s);if(!r.currentUser.isEqual(e)){zt("SyncEngine","User change. New user:",e.toKey());const a=yield Ph(r.localStore,e);r.currentUser=e,(h=r).lc.forEach(b=>{b.forEach(M=>{M.reject(new en(ft.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.lc.clear(),r.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),yield $u(r,a.ji)}var h}),Kd.apply(this,arguments)}function up(s,e){const r=ln(s),a=r.cc.get(e);if(a&&a.nc)return zr().add(a.key);{let h=zr();const m=r.rc.get(e);if(!m)return h;for(const b of m){const M=r.ic.get(b);h=h.unionWith(M.view.ju)}return h}}function id(s,e){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,_.Z)(function*(s,e){const r=ln(s),a=yield Wf(r.localStore,e.query,!0),h=e.view.tc(a);return r.isPrimaryClient&&Po(r,e.targetId,h.Xu),h}),Jh.apply(this,arguments)}function Cg(s,e){return cp.apply(this,arguments)}function cp(){return cp=(0,_.Z)(function*(s,e){const r=ln(s);return du(r.localStore,e).then(a=>$u(r,a))}),cp.apply(this,arguments)}function Zd(s,e,r,a){return sd.apply(this,arguments)}function sd(){return sd=(0,_.Z)(function*(s,e,r,a){const h=ln(s),m=yield function(b,M){const X=ln(b),ie=ln(X.mutationQueue);return X.persistence.runTransaction("Lookup mutation documents","readonly",xe=>ie.Tn(xe,M).next(et=>et?X.localDocuments.getDocuments(xe,et):me.resolve(null)))}(h.localStore,e);var M;null!==m?("pending"===r?yield nd(h.remoteStore):"acknowledged"===r||"rejected"===r?(ps(h,e,a||null),Qh(h,e),M=e,ln(ln(h.localStore).mutationQueue).An(M)):Ln(),yield $u(h,m)):zt("SyncEngine","Cannot apply mutation batch with id: "+e)}),sd.apply(this,arguments)}function Qd(){return Qd=(0,_.Z)(function*(s,e){const r=ln(s);if(tf(r),gp(r),!0===e&&!0!==r.dc){const a=r.sharedClientState.getAllActiveQueryTargets(),h=yield hp(r,a.toArray());r.dc=!0,yield cg(r.remoteStore,!0);for(const m of h)Hh(r.remoteStore,m)}else if(!1===e&&!1!==r.dc){const a=[];let h=Promise.resolve();r.rc.forEach((m,b)=>{r.sharedClientState.isLocalQueryTarget(b)?a.push(b):h=h.then(()=>(Bu(r,b),Vd(r.localStore,b,!0))),Wh(r.remoteStore,b)}),yield h,yield hp(r,a),function(m){const b=ln(m);b.cc.forEach((M,X)=>{Wh(b.remoteStore,X)}),b.ac.fs(),b.cc=new Map,b.uc=new Di(An.comparator)}(r),r.dc=!1,yield cg(r.remoteStore,!1)}}),Qd.apply(this,arguments)}function hp(s,e,r){return ef.apply(this,arguments)}function ef(){return ef=(0,_.Z)(function*(s,e,r){const a=ln(s),h=[],m=[];for(const b of e){let M;const X=a.rc.get(b);if(X&&0!==X.length){M=yield Ld(a.localStore,Ts(X[0]));for(const ie of X){const xe=a.ic.get(ie),et=yield id(a,xe);et.snapshot&&m.push(et.snapshot)}}else{const ie=yield lm(a.localStore,b);M=yield Ld(a.localStore,ie),yield Yh(a,wg(ie),b,!1,M.resumeToken)}h.push(M)}return a.sc.zo(m),h}),ef.apply(this,arguments)}function wg(s){return Hi(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function Tg(s){const e=ln(s);return ln(ln(e.localStore).persistence).vi()}function wm(s,e,r,a){return fp.apply(this,arguments)}function fp(){return fp=(0,_.Z)(function*(s,e,r,a){const h=ln(s);if(h.dc)return void zt("SyncEngine","Ignoring unexpected query state notification.");const m=h.rc.get(e);if(m&&m.length>0)switch(r){case"current":case"not-current":{const b=yield du(h.localStore,Oc(m[0])),M=g.createSynthesizedRemoteEventForCurrentChange(e,"current"===r,Ws.EMPTY_BYTE_STRING);yield $u(h,b,M);break}case"rejected":yield Vd(h.localStore,e,!0),Bu(h,e,a);break;default:Ln()}}),fp.apply(this,arguments)}function pp(s,e,r){return Dg.apply(this,arguments)}function Dg(){return Dg=(0,_.Z)(function*(s,e,r){const a=tf(s);if(a.dc){for(const h of e){if(a.rc.has(h)){zt("SyncEngine","Adding an already active target "+h);continue}const m=yield lm(a.localStore,h),b=yield Ld(a.localStore,m);yield Yh(a,wg(m),b.targetId,!1,b.resumeToken),Hh(a.remoteStore,b)}for(const h of r)a.rc.has(h)&&(yield Vd(a.localStore,h,!1).then(()=>{Wh(a.remoteStore,h),Bu(a,h)}).catch(ye))}}),Dg.apply(this,arguments)}function tf(s){const e=ln(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=vc.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=up.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Im.bind(null,e),e.sc.zo=mg.bind(null,e.eventManager),e.sc.wc=yg.bind(null,e.eventManager),e}function gp(s){const e=ln(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vu.bind(null,e),e}class Tm{constructor(){this.synchronizeTabs=!1}initialize(e){var r=this;return(0,_.Z)(function*(){r.It=Hd(e.databaseInfo.databaseId),r.sharedClientState=r.gc(e),r.persistence=r.yc(e),yield r.persistence.start(),r.localStore=r.Ic(e),r.gcScheduler=r.Tc(e,r.localStore),r.indexBackfillerScheduler=r.Ec(e,r.localStore)})()}Tc(e,r){return null}Ec(e,r){return null}Ic(e){return Kp(this.persistence,new Hf,e.initialUser,this.It)}yc(e){return new zp(ku.Bs,this.It)}gc(e){return new zf}terminate(){var e=this;return(0,_.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Dm extends Tm{constructor(e,r,a){super(),this.Ac=e,this.cacheSizeBytes=r,this.forceOwnership=a,this.synchronizeTabs=!1}initialize(e){var r=()=>super.initialize,a=this;return(0,_.Z)(function*(){yield r().call(a,e),yield a.Ac.initialize(a,e),yield gp(a.Ac.syncEngine),yield nd(a.Ac.remoteStore),yield a.persistence.li(()=>(a.gcScheduler&&!a.gcScheduler.started&&a.gcScheduler.start(),a.indexBackfillerScheduler&&!a.indexBackfillerScheduler.started&&a.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return Kp(this.persistence,new Hf,e.initialUser,this.It)}Tc(e,r){return new Nf(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,r)}Ec(e,r){const a=new aa(r,this.persistence);return new Jr(e.asyncQueue,a)}yc(e){const r=Oh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),a=void 0!==this.cacheSizeBytes?bo.withCacheSize(this.cacheSizeBytes):bo.DEFAULT;return new Uf(this.synchronizeTabs,r,e.clientId,a,e.asyncQueue,Jc(),hu(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new zf}}class mp extends Dm{constructor(e,r){super(e,r,!1),this.Ac=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(e){var r=()=>super.initialize,a=this;return(0,_.Z)(function*(){yield r().call(a,e);const h=a.Ac.syncEngine;a.sharedClientState instanceof Lh&&(a.sharedClientState.syncEngine={Fr:Zd.bind(null,h),$r:wm.bind(null,h),Br:pp.bind(null,h),vi:Tg.bind(null,h),Mr:Cg.bind(null,h)},yield a.sharedClientState.start()),yield a.persistence.li(function(){var m=(0,_.Z)(function*(b){yield function(s,e){return Qd.apply(this,arguments)}(a.Ac.syncEngine,b),a.gcScheduler&&(b&&!a.gcScheduler.started?a.gcScheduler.start():b||a.gcScheduler.stop()),a.indexBackfillerScheduler&&(b&&!a.indexBackfillerScheduler.started?a.indexBackfillerScheduler.start():b||a.indexBackfillerScheduler.stop())});return function(b){return m.apply(this,arguments)}}())})()}gc(e){const r=Jc();if(!Lh.C(r))throw new en(ft.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const a=Oh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Lh(r,e.asyncQueue,a,e.clientId,e.initialUser)}}class yp{initialize(e,r){var a=this;return(0,_.Z)(function*(){a.localStore||(a.localStore=e.localStore,a.sharedClientState=e.sharedClientState,a.datastore=a.createDatastore(r),a.remoteStore=a.createRemoteStore(r),a.eventManager=a.createEventManager(r),a.syncEngine=a.createSyncEngine(r,!e.synchronizeTabs),a.sharedClientState.onlineStateHandler=h=>op(a.syncEngine,h,1),a.remoteStore.remoteSyncer.handleCredentialChange=bg.bind(null,a.syncEngine),yield cg(a.remoteStore,a.syncEngine.isPrimaryClient))})()}createEventManager(e){return new pg}createDatastore(e){const r=Hd(e.databaseInfo.databaseId),a=new Xc(e.databaseInfo);return new Yf(e.authCredentials,e.appCheckCredentials,a,r)}createRemoteStore(e){return r=this.localStore,a=this.datastore,h=e.asyncQueue,m=M=>op(this.syncEngine,M,0),b=Zc.C()?new Zc:new cm,new Cy(r,a,h,m,b);var r,a,h,m,b}createSyncEngine(e,r){return function(a,h,m,b,M,X,ie){const xe=new rp(a,h,m,b,M,X);return ie&&(xe.dc=!0),xe}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}terminate(){return(e=(0,_.Z)(function*(r){const a=ln(r);zt("RemoteStore","RemoteStore shutting down."),a.wu.add(5),yield td(a),a.gu.shutdown(),a.yu.set("Unknown")}),function(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function nf(s,e,r){if(!r)throw new en(ft.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function d(s,e,r,a){if(!0===e&&!0===a)throw new en(ft.INVALID_ARGUMENT,`${s} and ${r} cannot be used together.`)}function u(s){if(!An.isDocumentKey(s))throw new en(ft.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function l(s){if(An.isDocumentKey(s))throw new en(ft.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function p(s){if(void 0===s)return"undefined";if(null===s)return"null";if("string"==typeof s)return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if("number"==typeof s||"boolean"==typeof s)return""+s;if("object"==typeof s){if(s instanceof Array)return"an array";{const e=(r=s).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof s?"a function":Ln()}function I(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new en(ft.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=p(s);throw new en(ft.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return s}function O(s,e){if(e<=0)throw new en(ft.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}const W=new Map;class de{constructor(e){var r;if(void 0===e.host){if(void 0!==e.ssl)throw new en(ft.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(r=e.ssl)||void 0===r||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new en(ft.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,d("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ne{constructor(e,r,a,h){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=a,this._app=h,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new de({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new en(ft.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new en(ft.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new de(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new Rc;switch(r.type){case"gapi":return new kr(r.client,r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new en(ft.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=W.get(e);r&&(zt("ComponentProvider","Removing Datastore"),W.delete(e),r.terminate())}(this),Promise.resolve()}}function Je(s,e,r,a={}){var h;const m=(s=I(s,Ne))._getSettings();if("firestore.googleapis.com"!==m.host&&m.host!==e&&Ji("Host has been set in both settings() and useEmulator(), emulator host will be used"),s._setSettings(Object.assign(Object.assign({},m),{host:`${e}:${r}`,ssl:!1})),a.mockUserToken){let b,M;if("string"==typeof a.mockUserToken)b=a.mockUserToken,M=yn.MOCK_USER;else{b=(0,ae.Sg)(a.mockUserToken,null===(h=s._app)||void 0===h?void 0:h.options.projectId);const X=a.mockUserToken.sub||a.mockUserToken.user_id;if(!X)throw new en(ft.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");M=new yn(X)}s._authCredentials=new ks(new Rl(b,M))}}class xt{constructor(e,r,a){this.converter=r,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yt(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}}class Ft{constructor(e,r,a){this.converter=r,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Ft(this.firestore,e,this._query)}}class Yt extends Ft{constructor(e,r,a){super(e,r,zs(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new An(e))}withConverter(e){return new Yt(this.firestore,e,this._path)}}function Hn(s,e,...r){if(s=(0,ae.m9)(s),nf("collection","path",e),s instanceof Ne){const a=ei.fromString(e,...r);return l(a),new Yt(s,null,a)}{if(!(s instanceof xt||s instanceof Yt))throw new en(ft.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(ei.fromString(e,...r));return l(a),new Yt(s.firestore,null,a)}}function pr(s,e){if(s=I(s,Ne),nf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new en(ft.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ft(s,null,(r=e,new ml(ei.emptyPath(),r)));var r}function bi(s,e,...r){if(s=(0,ae.m9)(s),1===arguments.length&&(e=_a.R()),nf("doc","path",e),s instanceof Ne){const a=ei.fromString(e,...r);return u(a),new xt(s,null,new An(a))}{if(!(s instanceof xt||s instanceof Yt))throw new en(ft.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(ei.fromString(e,...r));return u(a),new xt(s.firestore,s instanceof Yt?s.converter:null,new An(a))}}function No(s,e){return s=(0,ae.m9)(s),e=(0,ae.m9)(e),(s instanceof xt||s instanceof Yt)&&(e instanceof xt||e instanceof Yt)&&s.firestore===e.firestore&&s.path===e.path&&s.converter===e.converter}function ll(s,e){return s=(0,ae.m9)(s),e=(0,ae.m9)(e),s instanceof Ft&&e instanceof Ft&&s.firestore===e.firestore&&Ll(s._query,e._query)&&s.converter===e.converter}function Kl(s,e=10240){let r=0;return{read:()=>(0,_.Z)(function*(){if(r<s.byteLength){const a={value:s.slice(r,r+e),done:!1};return r+=e,a}return{done:!0}})(),cancel:()=>(0,_.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class gu{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):nr("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}class Sm{constructor(e,r){this.Pc=e,this.It=r,this.metadata=new Ir,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(a=>{a&&a.Ou()?this.metadata.resolve(a.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==a?void 0:a.payload)}`))},a=>this.metadata.reject(a))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,_.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,_.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,_.Z)(function*(){const r=yield e.Sc();if(null===r)return null;const a=e.vc.decode(r),h=Number(a);isNaN(h)&&e.Dc(`length string (${a}) is not valid number`);const m=yield e.Cc(h);return new zd(JSON.parse(m),r.length+h)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,_.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const r=e.xc();r<0&&e.Dc("Reached the end of bundle when a length string is expected.");const a=e.buffer.slice(0,r);return e.buffer=e.buffer.slice(r),a})()}Cc(e){var r=this;return(0,_.Z)(function*(){for(;r.buffer.length<e;)(yield r.Nc())&&r.Dc("Reached the end of bundle when more is expected.");const a=r.vc.decode(r.buffer.slice(0,e));return r.buffer=r.buffer.slice(e),a})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,_.Z)(function*(){const r=yield e.Pc.read();if(!r.done){const a=new Uint8Array(e.buffer.length+r.value.length);a.set(e.buffer),a.set(r.value,e.buffer.length),e.buffer=a}return r.done})()}}class mu{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var r=this;return(0,_.Z)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw new en(ft.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const a=yield(h=(0,_.Z)(function*(m,b){const M=ln(m),X=Ls(M.It)+"/documents",ie={documents:b.map(Jt=>Wi(M.It,Jt))},xe=yield M._o("BatchGetDocuments",X,ie,b.length),et=new Map;xe.forEach(Jt=>{const hn=function(s,e){return"found"in e?function(r,a){$n(!!a.found);const h=Io(r,a.found.name),m=qs(a.found.updateTime),b=new Y({mapValue:{fields:a.found.fields}});return Be.newFoundDocument(h,m,b)}(s,e):"missing"in e?function(r,a){$n(!!a.missing),$n(!!a.readTime);const h=Io(r,a.missing),m=qs(a.readTime);return Be.newNoDocument(h,m)}(s,e):Ln()}(M.It,Jt);et.set(hn.key.toString(),hn)});const Nt=[];return b.forEach(Jt=>{const hn=et.get(Jt.toString());$n(!!hn),Nt.push(hn)}),Nt}),function(m,b){return h.apply(this,arguments)})(r.datastore,e);var h;return a.forEach(h=>r.recordVersion(h)),a})()}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(a){this.lastWriteError=a}this.writtenDocs.add(e.toString())}delete(e){this.write(new nu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const r=e.readVersions;var a;e.mutations.forEach(a=>{r.delete(a.key.toString())}),r.forEach((a,h)=>{const m=An.fromPath(h);e.mutations.push(new ru(m,e.precondition(m)))}),yield(a=(0,_.Z)(function*(h,m){const b=ln(h),M=Ls(b.It)+"/documents",X={writes:m.map(ie=>Id(b.It,ie))};yield b.ao("Commit",M,X)}),function(h,m){return a.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Ln();r=fr.min()}const a=this.readVersions.get(e.key.toString());if(a){if(!r.isEqual(a))throw new en(ft.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(fr.min())?Pi.exists(!1):Pi.updateTime(r):Pi.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(fr.min()))throw new en(ft.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pi.updateTime(r)}return Pi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class _p{constructor(e,r,a,h,m){this.asyncQueue=e,this.datastore=r,this.options=a,this.updateFunction=h,this.deferred=m,this.kc=a.maxAttempts,this.No=new Vh(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,_.Z)(function*(){const r=new mu(e.datastore),a=e.Mc(r);a&&a.then(h=>{e.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{e.deferred.resolve(h)}).catch(m=>{e.Fc(m)}))}).catch(h=>{e.Fc(h)})}))}Mc(e){try{const r=this.updateFunction(e);return!ls(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const r=e.code;return"aborted"===r||"failed-precondition"===r||!_d(r)}return!1}}class G_{constructor(e,r,a,h){var m=this;this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=a,this.databaseInfo=h,this.user=yn.UNAUTHENTICATED,this.clientId=_a.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(a,function(){var b=(0,_.Z)(function*(M){zt("FirestoreClient","Received user=",M.uid),yield m.authCredentialListener(M),m.user=M});return function(M){return b.apply(this,arguments)}}()),this.appCheckCredentials.start(a,b=>(zt("FirestoreClient","Received new app check token=",b),this.appCheckCredentialListener(b,this.user)))}getConfiguration(){var e=this;return(0,_.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new en(ft.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const r=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),r.resolve()}catch(a){const h=gc(a,"Failed to shutdown persistence");r.reject(h)}})),r.promise}}function Ry(s,e){return vp.apply(this,arguments)}function vp(){return vp=(0,_.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress(),zt("FirestoreClient","Initializing OfflineComponentProvider");const r=yield s.getConfiguration();yield e.initialize(r);let a=r.initialUser;s.setCredentialChangeListener(function(){var h=(0,_.Z)(function*(m){a.isEqual(m)||(yield Ph(e.localStore,m),a=m)});return function(m){return h.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s.offlineComponents=e}),vp.apply(this,arguments)}function yu(s,e){return Xd.apply(this,arguments)}function Xd(){return Xd=(0,_.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress();const r=yield na(s);zt("FirestoreClient","Initializing OnlineComponentProvider");const a=yield s.getConfiguration();yield e.initialize(r,a),s.setCredentialChangeListener(h=>mm(e.remoteStore,h)),s.setAppCheckTokenChangeListener((h,m)=>mm(e.remoteStore,m)),s.onlineComponents=e}),Xd.apply(this,arguments)}function na(s){return Ic.apply(this,arguments)}function Ic(){return Ic=(0,_.Z)(function*(s){return s.offlineComponents||(zt("FirestoreClient","Using default OfflineComponentProvider"),yield Ry(s,new Tm)),s.offlineComponents}),Ic.apply(this,arguments)}function Jd(s){return ul.apply(this,arguments)}function ul(){return ul=(0,_.Z)(function*(s){return s.onlineComponents||(zt("FirestoreClient","Using default OnlineComponentProvider"),yield yu(s,new yp)),s.onlineComponents}),ul.apply(this,arguments)}function Ag(s){return na(s).then(e=>e.persistence)}function bc(s){return na(s).then(e=>e.localStore)}function od(s){return Jd(s).then(e=>e.remoteStore)}function ad(s){return Jd(s).then(e=>e.syncEngine)}function _u(s){return ld.apply(this,arguments)}function ld(){return ld=(0,_.Z)(function*(s){const e=yield Jd(s),r=e.eventManager;return r.onListen=Eg.bind(null,e.syncEngine),r.onUnlisten=_c.bind(null,e.syncEngine),r}),ld.apply(this,arguments)}function xm(s,e,r={}){const a=new Ir;return s.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function(h,m,b,M,X){const ie=new gu({next:et=>{m.enqueueAndForget(()=>ep(h,xe));const Nt=et.docs.has(b);!Nt&&et.fromCache?X.reject(new en(ft.UNAVAILABLE,"Failed to get document because the client is offline.")):Nt&&et.fromCache&&M&&"server"===M.source?X.reject(new en(ft.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):X.resolve(et)},error:et=>X.reject(et)}),xe=new Sl(zs(b.path),ie,{includeMetadataChanges:!0,ku:!0});return ym(h,xe)}(yield _u(s),s.asyncQueue,e,r,a)})),a.promise}function Rm(s,e,r={}){const a=new Ir;return s.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function(h,m,b,M,X){const ie=new gu({next:et=>{m.enqueueAndForget(()=>ep(h,xe)),et.fromCache&&"server"===M.source?X.reject(new en(ft.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):X.resolve(et)},error:et=>X.reject(et)}),xe=new Sl(b,ie,{includeMetadataChanges:!0,ku:!0});return ym(h,xe)}(yield _u(s),s.asyncQueue,e,r,a)})),a.promise}class ky{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new Vh(this,"async_queue_retry"),this.Wc=()=>{const r=hu();r&&zt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.No.Po()};const e=hu();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const r=hu();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const r=new Ir;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,_.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(r){if(!jr(r))throw r;zt("AsyncQueue","Operation failed with retryable error: "+r)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const r=this.Bc.then(()=>(this.Gc=!0,e().catch(a=>{throw this.Kc=a,this.Gc=!1,nr("INTERNAL UNHANDLED ERROR: ",function(m){let b=m.message||"";return m.stack&&(b=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),b}(a)),a}).then(a=>(this.Gc=!1,a))));return this.Bc=r,r}enqueueAfterDelay(e,r,a){this.zc(),this.jc.indexOf(e)>-1&&(r=0);const h=hg.createAndSchedule(this,e,r,a,m=>this.Yc(m));return this.qc.push(h),h}zc(){this.Kc&&Ln()}verifyOperationInProgress(){}Xc(){var e=this;return(0,_.Z)(function*(){let r;do{r=e.Bc,yield r}while(r!==e.Bc)})()}Zc(e){for(const r of this.qc)if(r.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((r,a)=>r.targetTimeMs-a.targetTimeMs);for(const r of this.qc)if(r.skipDelay(),"all"!==e&&r.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const r=this.qc.indexOf(e);this.qc.splice(r,1)}}function xg(s){return function(e,r){if("object"!=typeof e||null===e)return!1;const a=e;for(const h of["next","error","complete"])if(h in a&&"function"==typeof a[h])return!0;return!1}(s)}class Fy{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ir,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,a){this._progressObserver={next:e,error:r,complete:a}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const z_=-1;class Ss extends Ne{constructor(e,r,a,h){super(e,r,a,h),this.type="firestore",this._queue=new ky,this._persistenceKey=(null==h?void 0:h.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ly(this),this._firestoreClient.terminate()}}function q_(s,e){const r="object"==typeof s?s:(0,P.getApp)(),a="string"==typeof s?s:e||"(default)",h=(0,P._getProvider)(r,"firestore").getImmediate({identifier:a});if(!h._initialized){const m=(0,ae.P0)("firestore");m&&Je(h,...m)}return h}function ho(s){return s._firestoreClient||Ly(s),s._firestoreClient.verifyNotTerminated(),s._firestoreClient}function Ly(s){var e;const r=s._freezeSettings(),a=(m=(null===(e=s._app)||void 0===e?void 0:e.options.appId)||"",new Pl(s._databaseId,m,s._persistenceKey,(M=r).host,M.ssl,M.experimentalForceLongPolling,M.experimentalAutoDetectLongPolling,M.useFetchStreams));var m,M;s._firestoreClient=new G_(s._authCredentials,s._appCheckCredentials,s._queue,a)}function S0(s,e){J_(s=I(s,Ss));const r=ho(s),a=s._freezeSettings(),h=new yp;return Mm(r,h,new Dm(h,a.cacheSizeBytes,null==e?void 0:e.forceOwnership))}function Y_(s){J_(s=I(s,Ss));const e=ho(s),r=s._freezeSettings(),a=new yp;return Mm(e,a,new mp(a,r.cacheSizeBytes))}function Mm(s,e,r){const a=new Ir;return s.asyncQueue.enqueue((0,_.Z)(function*(){try{yield Ry(s,r),yield yu(s,e),a.resolve()}catch(h){const m=h;if(!("FirebaseError"===(b=m).name?b.code===ft.FAILED_PRECONDITION||b.code===ft.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&b instanceof DOMException)||22===b.code||20===b.code||11===b.code))throw m;Ji("Error enabling offline persistence. Falling back to persistence disabled: "+m),a.reject(m)}var b})).then(()=>a.promise)}function K_(s){if(s._initialized&&!s._terminated)throw new en(ft.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ir;return s._queue.enqueueAndForgetEvenWhileRestricted((0,_.Z)(function*(){try{yield(r=(0,_.Z)(function*(a){if(!xn.C())return Promise.resolve();const h=a+"main";yield xn.delete(h)}),function(a){return r.apply(this,arguments)})(Oh(s._databaseId,s._persistenceKey)),e.resolve()}catch(r){e.reject(r)}var r})),e.promise}function Vy(s){return function(e){const r=new Ir;return e.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function(s,e){return Ec.apply(this,arguments)}(yield ad(e),r)})),r.promise}(ho(s=I(s,Ss)))}function Z_(s){return function(s){return s.asyncQueue.enqueue((0,_.Z)(function*(){const e=yield Ag(s),r=yield od(s);return e.setNetworkEnabled(!0),function(a){const h=ln(a);return h.wu.delete(0),ed(h)}(r)}))}(ho(s=I(s,Ss)))}function Q_(s){return function(s){return s.asyncQueue.enqueue((0,_.Z)(function*(){const e=yield Ag(s),r=yield od(s);return e.setNetworkEnabled(!1),(a=(0,_.Z)(function*(h){const m=ln(h);m.wu.add(0),yield td(m),m.yu.set("Offline")}),function(h){return a.apply(this,arguments)})(r);var a}))}(ho(s=I(s,Ss)))}function X_(s,e){const r=ho(s=I(s,Ss)),a=new Fy;return function(s,e,r,a){const h=function(m,b){let M;return M="string"==typeof m?(new TextEncoder).encode(m):m,X=function(X,ie){if(X instanceof Uint8Array)return Kl(X,void 0);if(X instanceof ArrayBuffer)return Kl(new Uint8Array(X),void 0);if(X instanceof ReadableStream)return X.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(M),new Sm(X,b);var X}(r,Hd(e));s.asyncQueue.enqueueAndForget((0,_.Z)(function*(){!function(s,e,r){const a=ln(s);var h;(h=(0,_.Z)(function*(m,b,M){try{const X=yield b.getMetadata();if(yield function(Nt,Jt){const hn=ln(Nt),zn=qs(Jt.createTime);return hn.persistence.runTransaction("hasNewerBundle","readonly",Jn=>hn.Ns.getBundleMetadata(Jn,Jt.id)).then(Jn=>!!Jn&&Jn.createTime.compareTo(zn)>=0)}(m.localStore,X))return yield b.close(),M._completeWith({taskState:"Success",documentsLoaded:(Nt=X).totalDocuments,bytesLoaded:Nt.totalBytes,totalDocuments:Nt.totalDocuments,totalBytes:Nt.totalBytes}),Promise.resolve(new Set);M._updateProgress(vg(X));const ie=new _m(X,m.localStore,b.It);let xe=yield b.mc();for(;xe;){const Nt=yield ie.Fu(xe);Nt&&M._updateProgress(Nt),xe=yield b.mc()}const et=yield ie.complete();return yield $u(m,et.Lu,void 0),yield function(Nt,Jt){const hn=ln(Nt);return hn.persistence.runTransaction("Save bundle","readwrite",zn=>hn.Ns.saveBundleMetadata(zn,Jt))}(m.localStore,X),M._completeWith(et.progress),Promise.resolve(et.Bu)}catch(X){return Ji("SyncEngine",`Loading bundle failed with ${X}`),M._failWith(X),Promise.resolve(new Set)}var Nt}),function(m,b,M){return h.apply(this,arguments)})(a,e,r).then(h=>{a.sharedClientState.notifyBundleLoaded(h)})}(yield ad(s),h,a)}))}(r,s._databaseId,e,a),a}function By(s,e){return function(s,e){return s.asyncQueue.enqueue((0,_.Z)(function*(){return function(r,a){const h=ln(r);return h.persistence.runTransaction("Get named query","readonly",m=>h.Ns.getNamedQuery(m,a))}(yield bc(s),e)}))}(ho(s=I(s,Ss)),e).then(r=>r?new Ft(s,null,r.query):null)}function J_(s){if(s._initialized||s._terminated)throw new en(ft.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class th{constructor(e){this._byteString=e}static fromBase64String(e){try{return new th(Ws.fromBase64String(e))}catch(r){throw new en(ft.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new th(Ws.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class nh{constructor(...e){for(let r=0;r<e.length;++r)if(0===e[r].length)throw new en(ft.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class uf{constructor(e){this._methodName=e}}class Rg{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new en(ft.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new en(ft.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return gr(this._lat,e._lat)||gr(this._long,e._long)}}const ev=/^__.*__$/;class Om{constructor(e,r,a){this.data=e,this.fieldMask=r,this.fieldTransforms=a}toMutation(e,r){return null!==this.fieldMask?new El(e,this.data,this.fieldMask,r,this.fieldTransforms):new xu(e,this.data,r,this.fieldTransforms)}}class Mg{constructor(e,r,a){this.data=e,this.fieldMask=r,this.fieldTransforms=a}toMutation(e,r){return new El(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function $y(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ln()}}class Pm{constructor(e,r,a,h,m,b){this.settings=e,this.databaseId=r,this.It=a,this.ignoreUndefinedProperties=h,void 0===m&&this.na(),this.fieldTransforms=m||[],this.fieldMask=b||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Pm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var r;const a=null===(r=this.path)||void 0===r?void 0:r.child(e),h=this.ia({path:a,oa:!1});return h.ua(e),h}ca(e){var r;const a=null===(r=this.path)||void 0===r?void 0:r.child(e),h=this.ia({path:a,oa:!1});return h.na(),h}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Ip(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(r=>e.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>e.isPrefixOf(r.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if($y(this.sa)&&ev.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class x0{constructor(e,r,a){this.databaseId=e,this.ignoreUndefinedProperties=r,this.It=a||Hd(e)}da(e,r,a,h=!1){return new Pm({sa:e,methodName:r,fa:a,path:fi.emptyPath(),oa:!1,la:h},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function cf(s){const e=s._freezeSettings(),r=Hd(s._databaseId);return new x0(s._databaseId,!!e.ignoreUndefinedProperties,r)}function Og(s,e,r,a,h,m={}){const b=s.da(m.merge||m.mergeFields?2:0,e,r,h);Lm("Data must be an object, but it was:",b,a);const M=Fm(a,b);let X,ie;if(m.merge)X=new ii(b.fieldMask),ie=b.fieldTransforms;else if(m.mergeFields){const xe=[];for(const et of m.mergeFields){const Nt=Vm(e,et,r);if(!b.contains(Nt))throw new en(ft.INVALID_ARGUMENT,`Field '${Nt}' is specified in your field mask but missing from your input data.`);Hy(xe,Nt)||xe.push(Nt)}X=new ii(xe),ie=b.fieldTransforms.filter(et=>X.covers(et.field))}else X=null,ie=b.fieldTransforms;return new Om(new Y(M),X,ie)}class df extends uf{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof df}}function tv(s,e,r){return new Pm({sa:3,fa:e.settings.fa,methodName:s._methodName,oa:r},e.databaseId,e.It,e.ignoreUndefinedProperties)}class Nm extends uf{_toFieldTransform(e){return new $l(e.path,new Vl)}isEqual(e){return e instanceof Nm}}class hf extends uf{constructor(e,r){super(e),this._a=r}_toFieldTransform(e){const r=tv(this,e,!0),a=this._a.map(m=>rh(m,r)),h=new sl(a);return new $l(e.path,h)}isEqual(e){return this===e}}class nv extends uf{constructor(e,r){super(e),this._a=r}_toFieldTransform(e){const r=tv(this,e,!0),a=this._a.map(m=>rh(m,r)),h=new Bl(a);return new $l(e.path,h)}isEqual(e){return this===e}}class Uy extends uf{constructor(e,r){super(e),this.wa=r}_toFieldTransform(e){const r=new vl(e.It,Jl(e.It,this.wa));return new $l(e.path,r)}isEqual(e){return this===e}}function km(s,e,r,a){const h=s.da(1,e,r);Lm("Data must be an object, but it was:",h,a);const m=[],b=Y.empty();$o(a,(X,ie)=>{const xe=Ng(e,X,r);ie=(0,ae.m9)(ie);const et=h.ca(xe);if(ie instanceof df)m.push(xe);else{const Nt=rh(ie,et);null!=Nt&&(m.push(xe),b.set(xe,Nt))}});const M=new ii(m);return new Mg(b,M,h.fieldTransforms)}function Pg(s,e,r,a,h,m){const b=s.da(1,e,r),M=[Vm(e,a,r)],X=[h];if(m.length%2!=0)throw new en(ft.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Nt=0;Nt<m.length;Nt+=2)M.push(Vm(e,m[Nt])),X.push(m[Nt+1]);const ie=[],xe=Y.empty();for(let Nt=M.length-1;Nt>=0;--Nt)if(!Hy(ie,M[Nt])){const Jt=M[Nt];let hn=X[Nt];hn=(0,ae.m9)(hn);const zn=b.ca(Jt);if(hn instanceof df)ie.push(Jt);else{const Jn=rh(hn,zn);null!=Jn&&(ie.push(Jt),xe.set(Jt,Jn))}}const et=new ii(ie);return new Mg(xe,et,b.fieldTransforms)}function Ep(s,e,r,a=!1){return rh(r,s.da(a?4:3,e))}function rh(s,e){if(jy(s=(0,ae.m9)(s)))return Lm("Unsupported field value:",e,s),Fm(s,e);if(s instanceof uf)return function(r,a){if(!$y(a.sa))throw a.ha(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.ha(`${r._methodName}() is not currently supported inside arrays`);const h=r._toFieldTransform(a);h&&a.fieldTransforms.push(h)}(s,e),null;if(void 0===s&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(r,a){const h=[];let m=0;for(const b of r){let M=rh(b,a.aa(m));null==M&&(M={nullValue:"NULL_VALUE"}),h.push(M),m++}return{arrayValue:{values:h}}}(s,e)}return function(r,a){if(null===(r=(0,ae.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return Jl(a.It,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const h=hi.fromDate(r);return{timestampValue:io(a.It,h)}}if(r instanceof hi){const h=new hi(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:io(a.It,h)}}if(r instanceof Rg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof th)return{bytesValue:Cl(a.It,r._byteString)};if(r instanceof xt){const h=a.databaseId,m=r.firestore._databaseId;if(!m.isEqual(h))throw a.ha(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Ju(r.firestore._databaseId||a.databaseId,r._key.path)}}throw a.ha(`Unsupported field value: ${p(r)}`)}(s,e)}function Fm(s,e){const r={};return Ti(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$o(s,(a,h)=>{const m=rh(h,e.ra(a));null!=m&&(r[a]=m)}),{mapValue:{fields:r}}}function jy(s){return!("object"!=typeof s||null===s||s instanceof Array||s instanceof Date||s instanceof hi||s instanceof Rg||s instanceof th||s instanceof xt||s instanceof uf)}function Lm(s,e,r){if(!jy(r)||"object"!=typeof(a=r)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const a=p(r);throw e.ha("an object"===a?s+" a custom object":s+" "+a)}var a}function Vm(s,e,r){if((e=(0,ae.m9)(e))instanceof nh)return e._internalPath;if("string"==typeof e)return Ng(s,e);throw Ip("Field path arguments must be of type string or ",s,!1,void 0,r)}const rv=new RegExp("[~\\*/\\[\\]]");function Ng(s,e,r){if(e.search(rv)>=0)throw Ip(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,r);try{return new nh(...e.split("."))._internalPath}catch(a){throw Ip(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,r)}}function Ip(s,e,r,a,h){const m=a&&!a.isEmpty(),b=void 0!==h;let M=`Function ${e}() called with invalid data`;r&&(M+=" (via `toFirestore()`)"),M+=". ";let X="";return(m||b)&&(X+=" (found",m&&(X+=` in field ${a}`),b&&(X+=` in document ${h}`),X+=")"),new en(ft.INVALID_ARGUMENT,M+s+X)}function Hy(s,e){return s.some(r=>r.isEqual(e))}class ff{constructor(e,r,a,h,m){this._firestore=e,this._userDataWriter=r,this._key=a,this._document=h,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Wy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(pf("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r)}}}class Wy extends ff{data(){return super.data()}}function pf(s,e){return"string"==typeof e?Ng(s,e):e instanceof nh?e._internalPath:e._delegate._internalPath}function iv(s){if("L"===s.limitType&&0===s.explicitOrderBy.length)throw new en(ft.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ih{}function sv(s,...e){for(const r of e)s=r._apply(s);return s}class R0 extends ih{constructor(e,r,a){super(),this.ma=e,this.ga=r,this.ya=a,this.type="where"}_apply(e){const r=cf(e.firestore),a=function(h,m,b,M,X,ie,xe){let et;if(X.isKeyField()){if("array-contains"===ie||"array-contains-any"===ie)throw new en(ft.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ie}' queries on documentId().`);if("in"===ie||"not-in"===ie){Lg(xe,ie);const Jt=[];for(const hn of xe)Jt.push(Um(M,h,hn));et={arrayValue:{values:Jt}}}else et=Um(M,h,xe)}else"in"!==ie&&"not-in"!==ie&&"array-contains-any"!==ie||Lg(xe,ie),et=Ep(b,"where",xe,"in"===ie||"not-in"===ie);const Nt=ui.create(X,ie,et);return function(Jt,hn){if(hn.dt()){const Jn=wu(Jt);if(null!==Jn&&!Jn.isEqual(hn.field))throw new en(ft.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Jn.toString()}' and '${hn.field.toString()}'`);const xi=Cu(Jt);null!==xi&&jm(0,hn.field,xi)}const zn=function(Jn,xi){for(const As of Jn.filters)if(xi.indexOf(As.op)>=0)return As.op;return null}(Jt,function(Jn){switch(Jn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(hn.op));if(null!==zn)throw new en(ft.INVALID_ARGUMENT,zn===hn.op?`Invalid query. You cannot use more than one '${hn.op.toString()}' filter.`:`Invalid query. You cannot use '${hn.op.toString()}' filters with '${zn.toString()}' filters.`)}(h,Nt),Nt}(e._query,0,r,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Ft(e.firestore,e.converter,function(h,m){const b=h.filters.concat([m]);return new ml(h.path,h.collectionGroup,h.explicitOrderBy.slice(),b,h.limit,h.limitType,h.startAt,h.endAt)}(e._query,a))}}function bp(s,e,r){const a=e,h=pf("where",s);return new R0(h,a,r)}class Gy extends ih{constructor(e,r){super(),this.ma=e,this.pa=r,this.type="orderBy"}_apply(e){const r=function(a,h,m){if(null!==a.startAt)throw new en(ft.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new en(ft.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const b=new Da(h,m);return function(M,X){if(null===Cu(M)){const ie=wu(M);null!==ie&&jm(0,ie,X.field)}}(a,b),b}(e._query,this.ma,this.pa);return new Ft(e.firestore,e.converter,function(a,h){const m=a.explicitOrderBy.concat([h]);return new ml(a.path,a.collectionGroup,m,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}function Bm(s,e="asc"){const r=e,a=pf("orderBy",s);return new Gy(a,r)}class kg extends ih{constructor(e,r,a){super(),this.type=e,this.Ia=r,this.Ta=a}_apply(e){return new Ft(e.firestore,e.converter,Ga(e._query,this.Ia,this.Ta))}}function ov(s){return O("limit",s),new kg("limit",s,"F")}function $m(s){return O("limitToLast",s),new kg("limitToLast",s,"L")}class Fg extends ih{constructor(e,r,a){super(),this.type=e,this.Ea=r,this.Aa=a}_apply(e){const r=Zy(e,this.type,this.Ea,this.Aa);return new Ft(e.firestore,e.converter,(h=r,new ml((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,h,a.endAt)));var a,h}}function zy(...s){return new Fg("startAt",s,!0)}function M0(...s){return new Fg("startAfter",s,!1)}class qy extends ih{constructor(e,r,a){super(),this.type=e,this.Ea=r,this.Aa=a}_apply(e){const r=Zy(e,this.type,this.Ea,this.Aa);return new Ft(e.firestore,e.converter,(h=r,new ml((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,h)));var a,h}}function Yy(...s){return new qy("endBefore",s,!1)}function Ky(...s){return new qy("endAt",s,!0)}function Zy(s,e,r,a){if(r[0]=(0,ae.m9)(r[0]),r[0]instanceof ff)return function(h,m,b,M,X){if(!M)throw new en(ft.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${b}().`);const ie=[];for(const xe of Eo(h))if(xe.field.isKeyField())ie.push(ca(m,M.key));else{const et=M.data.field(xe.field);if(es(et))throw new en(ft.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+xe.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===et){const Nt=xe.field.canonicalString();throw new en(ft.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Nt}' (used as the orderBy) does not exist.`)}ie.push(et)}return new Mo(ie,X)}(s._query,s.firestore._databaseId,e,r[0]._document,a);{const h=cf(s.firestore);return function(m,b,M,X,ie,xe){const et=m.explicitOrderBy;if(ie.length>et.length)throw new en(ft.INVALID_ARGUMENT,`Too many arguments provided to ${X}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Nt=[];for(let Jt=0;Jt<ie.length;Jt++){const hn=ie[Jt];if(et[Jt].field.isKeyField()){if("string"!=typeof hn)throw new en(ft.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${X}(), but got a ${typeof hn}`);if(!zu(m)&&-1!==hn.indexOf("/"))throw new en(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${X}() must be a plain document ID, but '${hn}' contains a slash.`);const zn=m.path.child(ei.fromString(hn));if(!An.isDocumentKey(zn))throw new en(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${X}() must result in a valid document path, but '${zn}' is not because it contains an odd number of segments.`);const Jn=new An(zn);Nt.push(ca(b,Jn))}else{const zn=Ep(M,X,hn);Nt.push(zn)}}return new Mo(Nt,xe)}(s._query,s.firestore._databaseId,h,e,r,a)}}function Um(s,e,r){if("string"==typeof(r=(0,ae.m9)(r))){if(""===r)throw new en(ft.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zu(e)&&-1!==r.indexOf("/"))throw new en(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const a=e.path.child(ei.fromString(r));if(!An.isDocumentKey(a))throw new en(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return ca(s,new An(a))}if(r instanceof xt)return ca(s,r._key);throw new en(ft.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${p(r)}.`)}function Lg(s,e){if(!Array.isArray(s)||0===s.length)throw new en(ft.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(s.length>10)throw new en(ft.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function jm(s,e,r){if(!r.isEqual(e))throw new en(ft.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}class Cp{convertValue(e,r="none"){switch(ua(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Si(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(tl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw Ln()}}convertObject(e,r){const a={};return $o(e.fields,(h,m)=>{a[h]=this.convertValue(m,r)}),a}convertGeoPoint(e){return new Rg(Si(e.latitude),Si(e.longitude))}convertArray(e,r){return(e.values||[]).map(a=>this.convertValue(a,r))}convertServerTimestamp(e,r){switch(r){case"previous":const a=Ol(e);return null==a?null:this.convertValue(a,r);case"estimate":return this.convertTimestamp(ja(e));default:return null}}convertTimestamp(e){const r=yo(e);return new hi(r.seconds,r.nanos)}convertDocumentKey(e,r){const a=ei.fromString(e);$n(vh(a));const h=new la(a.get(1),a.get(3)),m=new An(a.popFirst(5));return h.isEqual(r)||nr(`Document ${m} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),m}}function gf(s,e,r){let a;return a=s?r&&(r.merge||r.mergeFields)?s.toFirestore(e,r):s.toFirestore(e):e,a}class Qy extends Cp{constructor(e){super(),this.firestore=e}convertBytes(e){return new th(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,r)}}class sh{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ud extends ff{constructor(e,r,a,h,m,b){super(e,r,a,h,b),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new mf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const a=this._document.data.field(pf("DocumentSnapshot.get",e));if(null!==a)return this._userDataWriter.convertValue(a,r.serverTimestamps)}}}class mf extends ud{data(e={}){return super.data(e)}}class Cc{constructor(e,r,a,h){this._firestore=e,this._userDataWriter=r,this._snapshot=h,this.metadata=new sh(h.hasPendingWrites,h.fromCache),this.query=a}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,r){this._snapshot.docs.forEach(a=>{e.call(r,new mf(this._firestore,this._userDataWriter,a.key,a,new sh(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new en(ft.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,h){if(a._snapshot.oldDocs.isEmpty()){let m=0;return a._snapshot.docChanges.map(b=>({type:"added",doc:new mf(a._firestore,a._userDataWriter,b.doc.key,b.doc,new sh(a._snapshot.mutatedKeys.has(b.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:m++}))}{let m=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(b=>h||3!==b.type).map(b=>{const M=new mf(a._firestore,a._userDataWriter,b.doc.key,b.doc,new sh(a._snapshot.mutatedKeys.has(b.doc.key),a._snapshot.fromCache),a.query.converter);let X=-1,ie=-1;return 0!==b.type&&(X=m.indexOf(b.doc.key),m=m.delete(b.doc.key)),1!==b.type&&(m=m.add(b.doc),ie=m.indexOf(b.doc.key)),{type:Xy(b.type),doc:M,oldIndex:X,newIndex:ie}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Xy(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ln()}}function av(s,e){return s instanceof ud&&e instanceof ud?s._firestore===e._firestore&&s._key.isEqual(e._key)&&(null===s._document?null===e._document:s._document.isEqual(e._document))&&s._converter===e._converter:s instanceof Cc&&e instanceof Cc&&s._firestore===e._firestore&&ll(s.query,e.query)&&s.metadata.isEqual(e.metadata)&&s._snapshot.isEqual(e._snapshot)}function Jy(s){s=I(s,xt);const e=I(s.firestore,Ss);return xm(ho(e),s._key).then(r=>Gm(e,s,r))}class wc extends Cp{constructor(e){super(),this.firestore=e}convertBytes(e){return new th(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,r)}}function Hm(s){s=I(s,xt);const e=I(s.firestore,Ss),r=ho(e),a=new wc(e);return function(s,e){const r=new Ir;return s.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return(a=(0,_.Z)(function*(h,m,b){try{const M=yield function(X,ie){const xe=ln(X);return xe.persistence.runTransaction("read document","readonly",et=>xe.localDocuments.getDocument(et,ie))}(h,m);M.isFoundDocument()?b.resolve(M):M.isNoDocument()?b.resolve(null):b.reject(new en(ft.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(M){const X=gc(M,`Failed to get document '${m} from cache`);b.reject(X)}}),function(h,m,b){return a.apply(this,arguments)})(yield bc(s),e,r);var a})),r.promise}(r,s._key).then(h=>new ud(e,a,s._key,h,new sh(null!==h&&h.hasLocalMutations,!0),s.converter))}function Wm(s){s=I(s,xt);const e=I(s.firestore,Ss);return xm(ho(e),s._key,{source:"server"}).then(r=>Gm(e,s,r))}function e_(s){s=I(s,Ft);const e=I(s.firestore,Ss),r=ho(e),a=new wc(e);return iv(s._query),Rm(r,s._query).then(h=>new Cc(e,a,s,h))}function t_(s){s=I(s,Ft);const e=I(s.firestore,Ss),r=ho(e),a=new wc(e);return function(s,e){const r=new Ir;return s.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return(a=(0,_.Z)(function*(h,m,b){try{const M=yield Wf(h,m,!0),X=new rd(m,M.Hi),ie=X.Wu(M.documents),xe=X.applyChanges(ie,!1);b.resolve(xe.snapshot)}catch(M){const X=gc(M,`Failed to execute query '${m} against cache`);b.reject(X)}}),function(h,m,b){return a.apply(this,arguments)})(yield bc(s),e,r);var a})),r.promise}(r,s._query).then(h=>new Cc(e,a,s,h))}function n_(s){s=I(s,Ft);const e=I(s.firestore,Ss),r=ho(e),a=new wc(e);return Rm(r,s._query,{source:"server"}).then(h=>new Cc(e,a,s,h))}function r_(s,e,r){s=I(s,xt);const a=I(s.firestore,Ss),h=gf(s.converter,e,r);return yf(a,[Og(cf(a),"setDoc",s._key,h,null!==s.converter,r).toMutation(s._key,Pi.none())])}function i_(s,e,r,...a){s=I(s,xt);const h=I(s.firestore,Ss),m=cf(h);let b;return b="string"==typeof(e=(0,ae.m9)(e))||e instanceof nh?Pg(m,"updateDoc",s._key,e,r,a):km(m,"updateDoc",s._key,e),yf(h,[b.toMutation(s._key,Pi.exists(!0))])}function s_(s){return yf(I(s.firestore,Ss),[new nu(s._key,Pi.none())])}function o_(s,e){const r=I(s.firestore,Ss),a=bi(s),h=gf(s.converter,e);return yf(r,[Og(cf(s.firestore),"addDoc",a._key,h,null!==s.converter,{}).toMutation(a._key,Pi.exists(!1))]).then(()=>a)}function a_(s,...e){var r,a,h;s=(0,ae.m9)(s);let m={includeMetadataChanges:!1},b=0;"object"!=typeof e[b]||xg(e[b])||(m=e[b],b++);const M={includeMetadataChanges:m.includeMetadataChanges};if(xg(e[b])){const et=e[b];e[b]=null===(r=et.next)||void 0===r?void 0:r.bind(et),e[b+1]=null===(a=et.error)||void 0===a?void 0:a.bind(et),e[b+2]=null===(h=et.complete)||void 0===h?void 0:h.bind(et)}let X,ie,xe;if(s instanceof xt)ie=I(s.firestore,Ss),xe=zs(s._key.path),X={next:et=>{e[b]&&e[b](Gm(ie,s,et))},error:e[b+1],complete:e[b+2]};else{const et=I(s,Ft);ie=I(et.firestore,Ss),xe=et._query;const Nt=new wc(ie);X={next:Jt=>{e[b]&&e[b](new Cc(ie,Nt,et,Jt))},error:e[b+1],complete:e[b+2]},iv(s._query)}return function(et,Nt,Jt,hn){const zn=new gu(hn),Jn=new Sl(Nt,zn,Jt);return et.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return ym(yield _u(et),Jn)})),()=>{zn.bc(),et.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return ep(yield _u(et),Jn)}))}}(ho(ie),xe,M,X)}function O0(s,e){return function(s,e){const r=new gu(e);return s.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return a=yield _u(s),h=r,ln(a).bu.add(h),void h.next();var a,h})),()=>{r.bc(),s.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return a=yield _u(s),h=r,void ln(a).bu.delete(h);var a,h}))}}(ho(s=I(s,Ss)),xg(e)?e:{next:e})}function yf(s,e){return function(r,a){const h=new Ir;return r.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function(s,e,r){return Kh.apply(this,arguments)}(yield ad(r),a,h)})),h.promise}(ho(s),e)}function Gm(s,e,r){const a=r.docs.get(e._key),h=new wc(s);return new ud(s,h,e._key,a,new sh(r.hasPendingWrites,r.fromCache),e.converter)}const Ho={maxAttempts:5};class zm{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=cf(e)}set(e,r,a){this._verifyNotCommitted();const h=cd(e,this._firestore),m=gf(h.converter,r,a),b=Og(this._dataReader,"WriteBatch.set",h._key,m,null!==h.converter,a);return this._mutations.push(b.toMutation(h._key,Pi.none())),this}update(e,r,a,...h){this._verifyNotCommitted();const m=cd(e,this._firestore);let b;return b="string"==typeof(r=(0,ae.m9)(r))||r instanceof nh?Pg(this._dataReader,"WriteBatch.update",m._key,r,a,h):km(this._dataReader,"WriteBatch.update",m._key,r),this._mutations.push(b.toMutation(m._key,Pi.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=cd(e,this._firestore);return this._mutations=this._mutations.concat(new nu(r._key,Pi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new en(ft.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function cd(s,e){if((s=(0,ae.m9)(s)).firestore!==e)throw new en(ft.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}class uv extends class{constructor(e,r){this._firestore=e,this._transaction=r,this._dataReader=cf(e)}get(e){const r=cd(e,this._firestore),a=new Qy(this._firestore);return this._transaction.lookup([r._key]).then(h=>{if(!h||1!==h.length)return Ln();const m=h[0];if(m.isFoundDocument())return new ff(this._firestore,a,m.key,m,r.converter);if(m.isNoDocument())return new ff(this._firestore,a,r._key,null,r.converter);throw Ln()})}set(e,r,a){const h=cd(e,this._firestore),m=gf(h.converter,r,a),b=Og(this._dataReader,"Transaction.set",h._key,m,null!==h.converter,a);return this._transaction.set(h._key,b),this}update(e,r,a,...h){const m=cd(e,this._firestore);let b;return b="string"==typeof(r=(0,ae.m9)(r))||r instanceof nh?Pg(this._dataReader,"Transaction.update",m._key,r,a,h):km(this._dataReader,"Transaction.update",m._key,r),this._transaction.update(m._key,b),this}delete(e){const r=cd(e,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=cd(e,this._firestore),a=new wc(this._firestore);return super.get(e).then(h=>new ud(this._firestore,a,r._key,h._document,new sh(!1,!1),r.converter))}}function l_(s,e,r){s=I(s,Ss);const a=Object.assign(Object.assign({},Ho),r);return function(h){if(h.maxAttempts<1)throw new en(ft.INVALID_ARGUMENT,"Max attempts must be at least 1")}(a),function(h,m,b){const M=new Ir;return h.asyncQueue.enqueueAndForget((0,_.Z)(function*(){const X=yield function(s){return Jd(s).then(e=>e.datastore)}(h);new _p(h.asyncQueue,X,b,m,M).run()})),M.promise}(ho(s),h=>e(new uv(s,h)),a)}function cv(){return new df("deleteField")}function u_(){return new Nm("serverTimestamp")}function c_(...s){return new hf("arrayUnion",s)}function _f(...s){return new nv("arrayRemove",s)}function dv(s){return new Uy("increment",s)}!function(s,e=!0){yr=P.SDK_VERSION,(0,P._registerComponent)(new re.wA("firestore",(r,{instanceIdentifier:a,options:h})=>{const m=r.getProvider("app").getImmediate(),b=new Ss(new pl(r.getProvider("auth-internal")),new Eu(r.getProvider("app-check-internal")),function(M,X){if(!Object.prototype.hasOwnProperty.apply(M.options,["projectId"]))throw new en(ft.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new la(M.options.projectId,X)}(m,a),m);return h=Object.assign({useFetchStreams:e},h),b._setSettings(h),b},"PUBLIC").setMultipleInstances(!0)),(0,P.registerVersion)(Xt,"3.7.1",s),(0,P.registerVersion)(Xt,"3.7.1","esm2017")}()},3854:(nn,ot,L)=>{"use strict";L.d(ot,{BH:()=>Ct,LL:()=>Dt,ZR:()=>lt,gQ:()=>Dr,zI:()=>Ye,hu:()=>P,g5:()=>re,US:()=>Q,tV:()=>we,h$:()=>Z,L:()=>ne,$s:()=>oe,r3:()=>ur,Sg:()=>st,ne:()=>hr,p$:()=>se,vZ:()=>tn,ZB:()=>ge,gK:()=>Or,pd:()=>Ar,aH:()=>Zt,q4:()=>vt,P0:()=>Ht,Pz:()=>dt,m9:()=>It,z$:()=>_e,GJ:()=>vr,jU:()=>Te,ru:()=>Ke,xb:()=>En,w1:()=>Ie,hl:()=>Vt,uI:()=>De,UG:()=>ut,Yr:()=>ct,b$:()=>$e,G6:()=>at,w9:()=>Mn,cI:()=>Pt,UI:()=>Wn,xO:()=>Qn,zd:()=>lr,DV:()=>Ot,ug:()=>Xn,dS:()=>dr,Wl:()=>gn,Dv:()=>xr,Wj:()=>Sn,lb:()=>cr,eu:()=>E});const P=function(Oe,Le){if(!Oe)throw re(Le)},re=function(Oe){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Oe)},ke=function(Oe){const Le=[];let it=0;for(let Ve=0;Ve<Oe.length;Ve++){let ve=Oe.charCodeAt(Ve);ve<128?Le[it++]=ve:ve<2048?(Le[it++]=ve>>6|192,Le[it++]=63&ve|128):55296==(64512&ve)&&Ve+1<Oe.length&&56320==(64512&Oe.charCodeAt(Ve+1))?(ve=65536+((1023&ve)<<10)+(1023&Oe.charCodeAt(++Ve)),Le[it++]=ve>>18|240,Le[it++]=ve>>12&63|128,Le[it++]=ve>>6&63|128,Le[it++]=63&ve|128):(Le[it++]=ve>>12|224,Le[it++]=ve>>6&63|128,Le[it++]=63&ve|128)}return Le},Q={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Oe,Le){if(!Array.isArray(Oe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const it=Le?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ve=[];for(let ve=0;ve<Oe.length;ve+=3){const Pe=Oe[ve],bt=ve+1<Oe.length,Kt=bt?Oe[ve+1]:0,Bn=ve+2<Oe.length,Dn=Bn?Oe[ve+2]:0;let In=(15&Kt)<<2|Dn>>6,mr=63&Dn;Bn||(mr=64,bt||(In=64)),Ve.push(it[Pe>>2],it[(3&Pe)<<4|Kt>>4],it[In],it[mr])}return Ve.join("")},encodeString(Oe,Le){return this.HAS_NATIVE_SUPPORT&&!Le?btoa(Oe):this.encodeByteArray(ke(Oe),Le)},decodeString(Oe,Le){return this.HAS_NATIVE_SUPPORT&&!Le?atob(Oe):function(Oe){const Le=[];let it=0,Ve=0;for(;it<Oe.length;){const ve=Oe[it++];if(ve<128)Le[Ve++]=String.fromCharCode(ve);else if(ve>191&&ve<224){const Pe=Oe[it++];Le[Ve++]=String.fromCharCode((31&ve)<<6|63&Pe)}else if(ve>239&&ve<365){const Bn=((7&ve)<<18|(63&Oe[it++])<<12|(63&Oe[it++])<<6|63&Oe[it++])-65536;Le[Ve++]=String.fromCharCode(55296+(Bn>>10)),Le[Ve++]=String.fromCharCode(56320+(1023&Bn))}else{const Pe=Oe[it++],bt=Oe[it++];Le[Ve++]=String.fromCharCode((15&ve)<<12|(63&Pe)<<6|63&bt)}}return Le.join("")}(this.decodeStringToByteArray(Oe,Le))},decodeStringToByteArray(Oe,Le){this.init_();const it=Le?this.charToByteMapWebSafe_:this.charToByteMap_,Ve=[];for(let ve=0;ve<Oe.length;){const Pe=it[Oe.charAt(ve++)],Kt=ve<Oe.length?it[Oe.charAt(ve)]:0;++ve;const Dn=ve<Oe.length?it[Oe.charAt(ve)]:64;++ve;const pn=ve<Oe.length?it[Oe.charAt(ve)]:64;if(++ve,null==Pe||null==Kt||null==Dn||null==pn)throw Error();Ve.push(Pe<<2|Kt>>4),64!==Dn&&(Ve.push(Kt<<4&240|Dn>>2),64!==pn&&Ve.push(Dn<<6&192|pn))}return Ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Oe=0;Oe<this.ENCODED_VALS.length;Oe++)this.byteToCharMap_[Oe]=this.ENCODED_VALS.charAt(Oe),this.charToByteMap_[this.byteToCharMap_[Oe]]=Oe,this.byteToCharMapWebSafe_[Oe]=this.ENCODED_VALS_WEBSAFE.charAt(Oe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Oe]]=Oe,Oe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Oe)]=Oe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Oe)]=Oe)}}},Z=function(Oe){const Le=ke(Oe);return Q.encodeByteArray(Le,!0)},ne=function(Oe){return Z(Oe).replace(/\./g,"")},we=function(Oe){try{return Q.decodeString(Oe,!0)}catch(Le){console.error("base64Decode failed: ",Le)}return null};function se(Oe){return ge(void 0,Oe)}function ge(Oe,Le){if(!(Le instanceof Object))return Le;switch(Le.constructor){case Date:return new Date(Le.getTime());case Object:void 0===Oe&&(Oe={});break;case Array:Oe=[];break;default:return Le}for(const it in Le)!Le.hasOwnProperty(it)||!Ee(it)||(Oe[it]=ge(Oe[it],Le[it]));return Oe}function Ee(Oe){return"__proto__"!==Oe}function _e(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function De(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_e())}function ut(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Oe){return!1}}function Te(){return"object"==typeof self&&self.self===self}function Ke(){const Oe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Oe&&void 0!==Oe.id}function $e(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ie(){const Oe=_e();return Oe.indexOf("MSIE ")>=0||Oe.indexOf("Trident/")>=0}function ct(){return!1}function at(){return!ut()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Vt(){return"object"==typeof indexedDB}function E(){return new Promise((Oe,Le)=>{try{let it=!0;const Ve="validate-browser-context-for-indexeddb-analytics-module",ve=self.indexedDB.open(Ve);ve.onsuccess=()=>{ve.result.close(),it||self.indexedDB.deleteDatabase(Ve),Oe(!0)},ve.onupgradeneeded=()=>{it=!1},ve.onerror=()=>{var Pe;Le((null===(Pe=ve.error)||void 0===Pe?void 0:Pe.message)||"")}}catch(it){Le(it)}})}function Ye(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const ht=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const Oe=process.env.__FIREBASE_DEFAULTS__;return Oe?JSON.parse(Oe):void 0})()||(()=>{if("undefined"==typeof document)return;let Oe;try{Oe=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(it){return}const Le=Oe&&we(Oe[1]);return Le&&JSON.parse(Le)})()}catch(Oe){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Oe}`)}},vt=Oe=>{var Le,it;return null===(it=null===(Le=ht())||void 0===Le?void 0:Le.emulatorHosts)||void 0===it?void 0:it[Oe]},Ht=Oe=>{const Le=vt(Oe);if(!Le)return;const it=Le.lastIndexOf(":");if(it<=0||it+1===Le.length)throw new Error(`Invalid host ${Le} with no separate hostname and port!`);const Ve=parseInt(Le.substring(it+1),10);return"["===Le[0]?[Le.substring(1,it-1),Ve]:[Le.substring(0,it),Ve]},Zt=()=>{var Oe;return null===(Oe=ht())||void 0===Oe?void 0:Oe.config},dt=Oe=>{var Le;return null===(Le=ht())||void 0===Le?void 0:Le[`_${Oe}`]};class Ct{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Le,it)=>{this.resolve=Le,this.reject=it})}wrapCallback(Le){return(it,Ve)=>{it?this.reject(it):this.resolve(Ve),"function"==typeof Le&&(this.promise.catch(()=>{}),1===Le.length?Le(it):Le(it,Ve))}}}function st(Oe,Le){if(Oe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ve=Le||"demo-project",ve=Oe.iat||0,Pe=Oe.sub||Oe.user_id;if(!Pe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const bt=Object.assign({iss:`https://securetoken.google.com/${Ve}`,aud:Ve,iat:ve,exp:ve+3600,auth_time:ve,sub:Pe,user_id:Pe,firebase:{sign_in_provider:"custom",identities:{}}},Oe);return[ne(JSON.stringify({alg:"none",type:"JWT"})),ne(JSON.stringify(bt)),""].join(".")}class lt extends Error{constructor(Le,it,Ve){super(it),this.code=Le,this.customData=Ve,this.name="FirebaseError",Object.setPrototypeOf(this,lt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dt.prototype.create)}}class Dt{constructor(Le,it,Ve){this.service=Le,this.serviceName=it,this.errors=Ve}create(Le,...it){const Ve=it[0]||{},ve=`${this.service}/${Le}`,Pe=this.errors[Le],bt=Pe?function(Oe,Le){return Oe.replace(Mt,(it,Ve)=>{const ve=Le[Ve];return null!=ve?String(ve):`<${Ve}?>`})}(Pe,Ve):"Error";return new lt(ve,`${this.serviceName}: ${bt} (${ve}).`,Ve)}}const Mt=/\{\$([^}]+)}/g;function Pt(Oe){return JSON.parse(Oe)}function gn(Oe){return JSON.stringify(Oe)}const kn=function(Oe){let Le={},it={},Ve={},ve="";try{const Pe=Oe.split(".");Le=Pt(we(Pe[0])||""),it=Pt(we(Pe[1])||""),ve=Pe[2],Ve=it.d||{},delete it.d}catch(Pe){}return{header:Le,claims:it,data:Ve,signature:ve}},Mn=function(Oe){const it=kn(Oe).claims;return!!it&&"object"==typeof it&&it.hasOwnProperty("iat")},vr=function(Oe){const Le=kn(Oe).claims;return"object"==typeof Le&&!0===Le.admin};function ur(Oe,Le){return Object.prototype.hasOwnProperty.call(Oe,Le)}function Ot(Oe,Le){if(Object.prototype.hasOwnProperty.call(Oe,Le))return Oe[Le]}function En(Oe){for(const Le in Oe)if(Object.prototype.hasOwnProperty.call(Oe,Le))return!1;return!0}function Wn(Oe,Le,it){const Ve={};for(const ve in Oe)Object.prototype.hasOwnProperty.call(Oe,ve)&&(Ve[ve]=Le.call(it,Oe[ve],ve,Oe));return Ve}function tn(Oe,Le){if(Oe===Le)return!0;const it=Object.keys(Oe),Ve=Object.keys(Le);for(const ve of it){if(!Ve.includes(ve))return!1;const Pe=Oe[ve],bt=Le[ve];if(Un(Pe)&&Un(bt)){if(!tn(Pe,bt))return!1}else if(Pe!==bt)return!1}for(const ve of Ve)if(!it.includes(ve))return!1;return!0}function Un(Oe){return null!==Oe&&"object"==typeof Oe}function Qn(Oe){const Le=[];for(const[it,Ve]of Object.entries(Oe))Array.isArray(Ve)?Ve.forEach(ve=>{Le.push(encodeURIComponent(it)+"="+encodeURIComponent(ve))}):Le.push(encodeURIComponent(it)+"="+encodeURIComponent(Ve));return Le.length?"&"+Le.join("&"):""}function lr(Oe){const Le={};return Oe.replace(/^\?/,"").split("&").forEach(Ve=>{if(Ve){const[ve,Pe]=Ve.split("=");Le[decodeURIComponent(ve)]=decodeURIComponent(Pe)}}),Le}function Ar(Oe){const Le=Oe.indexOf("?");if(!Le)return"";const it=Oe.indexOf("#",Le);return Oe.substring(Le,it>0?it:void 0)}class Dr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Le=1;Le<this.blockSize;++Le)this.pad_[Le]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Le,it){it||(it=0);const Ve=this.W_;if("string"==typeof Le)for(let pn=0;pn<16;pn++)Ve[pn]=Le.charCodeAt(it)<<24|Le.charCodeAt(it+1)<<16|Le.charCodeAt(it+2)<<8|Le.charCodeAt(it+3),it+=4;else for(let pn=0;pn<16;pn++)Ve[pn]=Le[it]<<24|Le[it+1]<<16|Le[it+2]<<8|Le[it+3],it+=4;for(let pn=16;pn<80;pn++){const In=Ve[pn-3]^Ve[pn-8]^Ve[pn-14]^Ve[pn-16];Ve[pn]=4294967295&(In<<1|In>>>31)}let Dn,Fn,ve=this.chain_[0],Pe=this.chain_[1],bt=this.chain_[2],Kt=this.chain_[3],Bn=this.chain_[4];for(let pn=0;pn<80;pn++){pn<40?pn<20?(Dn=Kt^Pe&(bt^Kt),Fn=1518500249):(Dn=Pe^bt^Kt,Fn=1859775393):pn<60?(Dn=Pe&bt|Kt&(Pe|bt),Fn=2400959708):(Dn=Pe^bt^Kt,Fn=3395469782);const In=(ve<<5|ve>>>27)+Dn+Bn+Fn+Ve[pn]&4294967295;Bn=Kt,Kt=bt,bt=4294967295&(Pe<<30|Pe>>>2),Pe=ve,ve=In}this.chain_[0]=this.chain_[0]+ve&4294967295,this.chain_[1]=this.chain_[1]+Pe&4294967295,this.chain_[2]=this.chain_[2]+bt&4294967295,this.chain_[3]=this.chain_[3]+Kt&4294967295,this.chain_[4]=this.chain_[4]+Bn&4294967295}update(Le,it){if(null==Le)return;void 0===it&&(it=Le.length);const Ve=it-this.blockSize;let ve=0;const Pe=this.buf_;let bt=this.inbuf_;for(;ve<it;){if(0===bt)for(;ve<=Ve;)this.compress_(Le,ve),ve+=this.blockSize;if("string"==typeof Le){for(;ve<it;)if(Pe[bt]=Le.charCodeAt(ve),++bt,++ve,bt===this.blockSize){this.compress_(Pe),bt=0;break}}else for(;ve<it;)if(Pe[bt]=Le[ve],++bt,++ve,bt===this.blockSize){this.compress_(Pe),bt=0;break}}this.inbuf_=bt,this.total_+=it}digest(){const Le=[];let it=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ve=this.blockSize-1;ve>=56;ve--)this.buf_[ve]=255&it,it/=256;this.compress_(this.buf_);let Ve=0;for(let ve=0;ve<5;ve++)for(let Pe=24;Pe>=0;Pe-=8)Le[Ve]=this.chain_[ve]>>Pe&255,++Ve;return Le}}function hr(Oe,Le){const it=new ri(Oe,Le);return it.subscribe.bind(it)}class ri{constructor(Le,it){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=it,this.task.then(()=>{Le(this)}).catch(Ve=>{this.error(Ve)})}next(Le){this.forEachObserver(it=>{it.next(Le)})}error(Le){this.forEachObserver(it=>{it.error(Le)}),this.close(Le)}complete(){this.forEachObserver(Le=>{Le.complete()}),this.close()}subscribe(Le,it,Ve){let ve;if(void 0===Le&&void 0===it&&void 0===Ve)throw new Error("Missing Observer.");ve=function(Oe,Le){if("object"!=typeof Oe||null===Oe)return!1;for(const it of["next","error","complete"])if(it in Oe&&"function"==typeof Oe[it])return!0;return!1}(Le)?Le:{next:Le,error:it,complete:Ve},void 0===ve.next&&(ve.next=wt),void 0===ve.error&&(ve.error=wt),void 0===ve.complete&&(ve.complete=wt);const Pe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ve.error(this.finalError):ve.complete()}catch(bt){}}),this.observers.push(ve),Pe}unsubscribeOne(Le){void 0===this.observers||void 0===this.observers[Le]||(delete this.observers[Le],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Le){if(!this.finalized)for(let it=0;it<this.observers.length;it++)this.sendOne(it,Le)}sendOne(Le,it){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Le])try{it(this.observers[Le])}catch(Ve){"undefined"!=typeof console&&console.error&&console.error(Ve)}})}close(Le){this.finalized||(this.finalized=!0,void 0!==Le&&(this.finalError=Le),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wt(){}const xr=function(Oe,Le,it,Ve){let ve;if(Ve<Le?ve="at least "+Le:Ve>it&&(ve=0===it?"none":"no more than "+it),ve)throw new Error(Oe+" failed: Was called with "+Ve+(1===Ve?" argument.":" arguments.")+" Expects "+ve+".")};function Or(Oe,Le){return`${Oe} failed: ${Le} argument `}function Sn(Oe,Le,it,Ve){if((!Ve||it)&&"function"!=typeof it)throw new Error(Or(Oe,Le)+"must be a valid function.")}function cr(Oe,Le,it,Ve){if((!Ve||it)&&("object"!=typeof it||null===it))throw new Error(Or(Oe,Le)+"must be a valid context object.")}const dr=function(Oe){const Le=[];let it=0;for(let Ve=0;Ve<Oe.length;Ve++){let ve=Oe.charCodeAt(Ve);if(ve>=55296&&ve<=56319){const Pe=ve-55296;Ve++,P(Ve<Oe.length,"Surrogate pair missing trail surrogate."),ve=65536+(Pe<<10)+(Oe.charCodeAt(Ve)-56320)}ve<128?Le[it++]=ve:ve<2048?(Le[it++]=ve>>6|192,Le[it++]=63&ve|128):ve<65536?(Le[it++]=ve>>12|224,Le[it++]=ve>>6&63|128,Le[it++]=63&ve|128):(Le[it++]=ve>>18|240,Le[it++]=ve>>12&63|128,Le[it++]=ve>>6&63|128,Le[it++]=63&ve|128)}return Le},Xn=function(Oe){let Le=0;for(let it=0;it<Oe.length;it++){const Ve=Oe.charCodeAt(it);Ve<128?Le++:Ve<2048?Le+=2:Ve>=55296&&Ve<=56319?(Le+=4,it++):Le+=3}return Le};function oe(Oe,Le=1e3,it=2){const Ve=Le*Math.pow(it,Oe),ve=Math.round(.5*Ve*(Math.random()-.5)*2);return Math.min(144e5,Ve+ve)}function It(Oe){return Oe&&Oe._delegate?Oe._delegate:Oe}},8945:(nn,ot,L)=>{"use strict";function ae(w,N,T,q){var Xt,fe=arguments.length,yt=fe<3?N:null===q?q=Object.getOwnPropertyDescriptor(N,T):q;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)yt=Reflect.decorate(w,N,T,q);else for(var yn=w.length-1;yn>=0;yn--)(Xt=w[yn])&&(yt=(fe<3?Xt(yt):fe>3?Xt(N,T,yt):Xt(N,T))||yt);return fe>3&&yt&&Object.defineProperty(N,T,yt),yt}function Q(w,N){return function(T,q){N(T,q,w)}}function ne(w,N,T,q){return new(T||(T=Promise))(function(yt,Xt){function yn(Nr){try{Pn(q.next(Nr))}catch(wi){Xt(wi)}}function yr(Nr){try{Pn(q.throw(Nr))}catch(wi){Xt(wi)}}function Pn(Nr){Nr.done?yt(Nr.value):function(yt){return yt instanceof T?yt:new T(function(Xt){Xt(yt)})}(Nr.value).then(yn,yr)}Pn((q=q.apply(w,N||[])).next())})}L.d(ot,{Br:()=>oo,dr:()=>Fr,YG:()=>ns,Sm:()=>Zn,W2:()=>Sr,Gu:()=>Qe,gu:()=>Xe,pK:()=>on,Ie:()=>On,u8:()=>Rr,IK:()=>Gi,td:()=>ci,q_:()=>vi,z0:()=>rs,fG:()=>_s,uN:()=>Vs,jP:()=>Js,PQ:()=>Is,g2:()=>Zi,wd:()=>Ms,sr:()=>_i,Pc:()=>Ro,r4:()=>oa,HT:()=>ds,t4:()=>bt,j9:()=>Pe});var E=L(7716),Ye=L(665),gt=L(8583),We=L(174),He=L(7235),vt=(L(7689),L(5392),L(7807)),Ht=L(9461),Zt=L(7585),dt=L(1567),Ct=L(4425),st=L(6951),Ue=L(3291),Dt=(L(960),L(3150)),Tn=L(8891),_n=L(9796),Mn=L(9105),vr=L(8002);function Ot(w,N,T,q){return(0,Mn.m)(T)&&(q=T,T=void 0),q?Ot(w,N,T).pipe((0,vr.U)(fe=>(0,_n.k)(fe)?q(...fe):q(fe))):new Tn.y(fe=>{En(w,N,function(Xt){fe.next(arguments.length>1?Array.prototype.slice.call(arguments):Xt)},fe,T)})}function En(w,N,T,q,fe){let yt;if(function(w){return w&&"function"==typeof w.addEventListener&&"function"==typeof w.removeEventListener}(w)){const Xt=w;w.addEventListener(N,T,fe),yt=()=>Xt.removeEventListener(N,T,fe)}else if(function(w){return w&&"function"==typeof w.on&&"function"==typeof w.off}(w)){const Xt=w;w.on(N,T),yt=()=>Xt.off(N,T)}else if(function(w){return w&&"function"==typeof w.addListener&&"function"==typeof w.removeListener}(w)){const Xt=w;w.addListener(N,T),yt=()=>Xt.removeListener(N,T)}else{if(!w||!w.length)throw new TypeError("Invalid event target");for(let Xt=0,yn=w.length;Xt<yn;Xt++)En(w[Xt],N,T,q,fe)}q.add(yt)}var jn=L(9765),Qn=L(6215),lr=L(5435),Ar=L(3190),Dr=L(7519);const ri=Zt.i,wt=["*"],Sn=w=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(w):"function"==typeof requestAnimationFrame?requestAnimationFrame(w):setTimeout(w);let cr=(()=>{class w{constructor(T,q){this.injector=T,this.el=q,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(T){this.el.nativeElement.value=this.lastValue=null==T?"":T,dr(this.el)}handleChangeEvent(T,q){T===this.el.nativeElement&&(q!==this.lastValue&&(this.lastValue=q,this.onChange(q)),dr(this.el))}_handleBlurEvent(T){T===this.el.nativeElement&&(this.onTouched(),dr(this.el))}registerOnChange(T){this.onChange=T}registerOnTouched(T){this.onTouched=T}setDisabledState(T){this.el.nativeElement.disabled=T}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let T;try{T=this.injector.get(Ye.a5)}catch(fe){}if(!T)return;T.statusChanges&&(this.statusChanges=T.statusChanges.subscribe(()=>dr(this.el)));const q=T.control;q&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(yt=>{if(q[yt]){const Xt=q[yt].bind(q);q[yt]=(...yn)=>{Xt(...yn),dr(this.el)}}})}}return w.\u0275fac=function(T){E.$Z()},w.\u0275dir=E.lG2({type:w,hostBindings:function(T,q){1&T&&E.NdJ("ionBlur",function(yt){return q._handleBlurEvent(yt.target)})}}),ae([(0,E.L6J)("ionBlur",["$event.target"])],w.prototype,"_handleBlurEvent",null),w})();const dr=w=>{Sn(()=>{const N=w.nativeElement,T=Xn(N);Kn(N,T);const q=N.closest("ion-item");q&&Kn(q,T)})},Xn=w=>{const N=w.classList,T=[];for(let q=0;q<N.length;q++){const fe=N.item(q);null!==fe&&dn(fe,"ng-")&&T.push(`ion-${fe.substr(3)}`)}return T},Kn=(w,N)=>{const T=w.classList;["ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"].forEach(q=>T.remove(q)),N.forEach(q=>T.add(q))},dn=(w,N)=>w.substr(0,N.length)===N;var oe;let Ae=oe=class extends cr{constructor(N,T){super(N,T)}writeValue(N){this.el.nativeElement.checked=this.lastValue=null!=N&&N,dr(this.el)}_handleIonChange(N){this.handleChangeEvent(N,N.checked)}};var nt;Ae.\u0275fac=function(N){return new(N||Ae)(E.Y36(E.zs3),E.Y36(E.SBq))},Ae.\u0275dir=E.lG2({type:Ae,selectors:[["ion-checkbox"],["ion-toggle"]],hostBindings:function(N,T){1&N&&E.NdJ("ionChange",function(fe){return T._handleIonChange(fe.target)})},features:[E._Bn([{provide:Ye.JU,useExisting:oe,multi:!0}]),E.qOj]}),Ae.ctorParameters=()=>[{type:E.zs3},{type:E.SBq}],ae([(0,E.L6J)("ionChange",["$event.target"])],Ae.prototype,"_handleIonChange",null);let It=nt=class extends cr{constructor(N,T){super(N,T)}_handleIonChange(N){this.handleChangeEvent(N,N.value)}registerOnChange(N){super.registerOnChange(T=>{N(""===T?null:parseFloat(T))})}};var Oe;It.\u0275fac=function(N){return new(N||It)(E.Y36(E.zs3),E.Y36(E.SBq))},It.\u0275dir=E.lG2({type:It,selectors:[["ion-input","type","number"]],hostBindings:function(N,T){1&N&&E.NdJ("ionChange",function(fe){return T._handleIonChange(fe.target)})},features:[E._Bn([{provide:Ye.JU,useExisting:nt,multi:!0}]),E.qOj]}),It.ctorParameters=()=>[{type:E.zs3},{type:E.SBq}],ae([(0,E.L6J)("ionChange",["$event.target"])],It.prototype,"_handleIonChange",null);let Le=Oe=class extends cr{constructor(N,T){super(N,T)}_handleIonSelect(N){this.handleChangeEvent(N,N.checked)}};var it;Le.\u0275fac=function(N){return new(N||Le)(E.Y36(E.zs3),E.Y36(E.SBq))},Le.\u0275dir=E.lG2({type:Le,selectors:[["ion-radio"]],hostBindings:function(N,T){1&N&&E.NdJ("ionSelect",function(fe){return T._handleIonSelect(fe.target)})},features:[E._Bn([{provide:Ye.JU,useExisting:Oe,multi:!0}]),E.qOj]}),Le.ctorParameters=()=>[{type:E.zs3},{type:E.SBq}],ae([(0,E.L6J)("ionSelect",["$event.target"])],Le.prototype,"_handleIonSelect",null);let Ve=it=class extends cr{constructor(N,T){super(N,T)}_handleChangeEvent(N){this.handleChangeEvent(N,N.value)}};var ve;Ve.\u0275fac=function(N){return new(N||Ve)(E.Y36(E.zs3),E.Y36(E.SBq))},Ve.\u0275dir=E.lG2({type:Ve,selectors:[["ion-range"],["ion-select"],["ion-radio-group"],["ion-segment"],["ion-datetime"]],hostBindings:function(N,T){1&N&&E.NdJ("ionChange",function(fe){return T._handleChangeEvent(fe.target)})},features:[E._Bn([{provide:Ye.JU,useExisting:it,multi:!0}]),E.qOj]}),Ve.ctorParameters=()=>[{type:E.zs3},{type:E.SBq}],ae([(0,E.L6J)("ionChange",["$event.target"])],Ve.prototype,"_handleChangeEvent",null);let Pe=ve=class extends cr{constructor(N,T){super(N,T)}_handleInputEvent(N){this.handleChangeEvent(N,N.value)}};Pe.\u0275fac=function(N){return new(N||Pe)(E.Y36(E.zs3),E.Y36(E.SBq))},Pe.\u0275dir=E.lG2({type:Pe,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(N,T){1&N&&E.NdJ("ionChange",function(fe){return T._handleInputEvent(fe.target)})},features:[E._Bn([{provide:Ye.JU,useExisting:ve,multi:!0}]),E.qOj]}),Pe.ctorParameters=()=>[{type:E.zs3},{type:E.SBq}],ae([(0,E.L6J)("ionChange",["$event.target"])],Pe.prototype,"_handleInputEvent",null);let bt=class{constructor(N,T){this.doc=N,this.backButton=new jn.xQ,this.keyboardDidShow=new jn.xQ,this.keyboardDidHide=new jn.xQ,this.pause=new jn.xQ,this.resume=new jn.xQ,this.resize=new jn.xQ,T.run(()=>{let q;this.win=N.defaultView,this.backButton.subscribeWithPriority=function(fe,yt){return this.subscribe(Xt=>Xt.register(fe,yn=>T.run(()=>yt(yn))))},Dn(this.pause,N,"pause"),Dn(this.resume,N,"resume"),Dn(this.backButton,N,"ionBackButton"),Dn(this.resize,this.win,"resize"),Dn(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),Dn(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(fe=>{q=fe}),this.win&&this.win.cordova?N.addEventListener("deviceready",()=>{q("cordova")},{once:!0}):q("dom")})}is(N){return(0,Zt.a)(this.win,N)}platforms(){return(0,Zt.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(N){return Kt(this.win.location.href,N)}isLandscape(){return!this.isPortrait()}isPortrait(){return this.win.matchMedia&&this.win.matchMedia("(orientation: portrait)").matches}testUserAgent(N){const T=this.win.navigator;return!!(T&&T.userAgent&&T.userAgent.indexOf(N)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}};bt.\u0275fac=function(N){return new(N||bt)(E.LFG(gt.K0),E.LFG(E.R0b))},bt.\u0275prov=E.Yz7({token:bt,factory:function(w){return bt.\u0275fac(w)},providedIn:"root"}),bt.ngInjectableDef=(0,E.Yz7)({factory:function(){return new bt((0,E.LFG)(gt.K0),(0,E.LFG)(E.R0b))},token:bt,providedIn:"root"}),bt=ae([Q(0,(0,E.tBr)(gt.K0))],bt);const Kt=(w,N)=>{N=N.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");const q=new RegExp("[\\?&]"+N+"=([^&#]*)").exec(w);return q?decodeURIComponent(q[1].replace(/\+/g," ")):null},Dn=(w,N,T)=>{N&&N.addEventListener(T,q=>{w.next(null!=q?q.detail:void 0)})};let pn=class{constructor(N,T,q,fe){this.location=T,this.serializer=q,this.router=fe,this.direction=qt,this.animated=Gt,this.guessDirection="forward",this.lastNavId=-1,fe&&fe.events.subscribe(yt=>{if(yt instanceof We.OD){const Xt=yt.restoredState?yt.restoredState.navigationId:yt.id;this.guessDirection=Xt<this.lastNavId?"back":"forward",this.guessAnimation=yt.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?yt.id:Xt}}),N.backButton.subscribeWithPriority(0,yt=>{this.pop(),yt()})}navigateForward(N,T={}){return this.setDirection("forward",T.animated,T.animationDirection,T.animation),this.navigate(N,T)}navigateBack(N,T={}){return this.setDirection("back",T.animated,T.animationDirection,T.animation),this.navigate(N,T)}navigateRoot(N,T={}){return this.setDirection("root",T.animated,T.animationDirection,T.animation),this.navigate(N,T)}back(N={animated:!0,animationDirection:"back"}){return this.setDirection("back",N.animated,N.animationDirection,N.animation),this.location.back()}pop(){return ne(this,void 0,void 0,function*(){let N=this.topOutlet;for(;N&&!(yield N.pop());)N=N.parentOutlet})}setDirection(N,T,q,fe){this.direction=N,this.animated=In(N,T,q),this.animationBuilder=fe}setTopOutlet(N){this.topOutlet=N}consumeTransition(){let T,N="root";const q=this.animationBuilder;return"auto"===this.direction?(N=this.guessDirection,T=this.guessAnimation):(T=this.animated,N=this.direction),this.direction=qt,this.animated=Gt,this.animationBuilder=void 0,{direction:N,animation:T,animationBuilder:q}}navigate(N,T){if(Array.isArray(N))return this.router.navigate(N,T);{const q=this.serializer.parse(N.toString());return void 0!==T.queryParams&&(q.queryParams=Object.assign({},T.queryParams)),void 0!==T.fragment&&(q.fragment=T.fragment),this.router.navigateByUrl(q,T)}}};pn.\u0275fac=function(N){return new(N||pn)(E.LFG(bt),E.LFG(gt.Ye),E.LFG(We.Hx),E.LFG(We.F0,8))},pn.\u0275prov=E.Yz7({token:pn,factory:function(w){return pn.\u0275fac(w)},providedIn:"root"}),pn.ngInjectableDef=(0,E.Yz7)({factory:function(){return new pn((0,E.LFG)(bt),(0,E.LFG)(gt.Ye),(0,E.LFG)(We.Hx),(0,E.LFG)(We.F0,8))},token:pn,providedIn:"root"}),pn=ae([Q(3,(0,E.FiY)())],pn);const In=(w,N,T)=>{if(!1!==N){if(void 0!==T)return T;if("forward"===w||"back"===w)return w;if("root"===w&&!0===N)return"forward"}},qt="auto",Gt=void 0,$t=(w,N)=>{const T=w.prototype;N.forEach(q=>{Object.defineProperty(T,q,{get(){return this.el[q]},set(fe){this.z.runOutsideAngular(()=>this.el[q]=fe)}})})},bn=(w,N)=>{const T=w.prototype;N.forEach(q=>{T[q]=function(){const fe=arguments;return this.z.runOutsideAngular(()=>this.el[q].apply(this.el,fe))}})},Rn=(w,N,T)=>{T.forEach(q=>w[q]=Ot(N,q))};function cn(w){return function(T){return w.inputs&&$t(T,w.inputs),w.methods&&bn(T,w.methods),T}}let Fr=(()=>{let w=class{constructor(T,q,fe){this.z=fe,T.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-app"]],ngContentSelectors:wt,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w})(),ns=(()=>{let w=class{constructor(T,q,fe){this.z=fe,T.detach(),this.el=q.nativeElement,Rn(this,this.el,["ionFocus","ionBlur"])}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:wt,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([cn({inputs:["buttonType","color","disabled","download","expand","fill","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],w),w})(),Zn=(()=>{let w=class{constructor(T,q,fe){this.z=fe,T.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},ngContentSelectors:wt,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([cn({inputs:["collapse"]})],w),w})(),Sr=(()=>{let w=class{constructor(T,q,fe){this.z=fe,T.detach(),this.el=q.nativeElement,Rn(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:wt,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([cn({inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],w),w})(),Qe=(()=>{let w=class{constructor(T,q,fe){this.z=fe,T.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:wt,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([cn({inputs:["collapse","mode","translucent"]})],w),w})(),Xe=(()=>{let w=class{constructor(T,q,fe){this.z=fe,T.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-icon"]],inputs:{ariaHidden:"ariaHidden",ariaLabel:"ariaLabel",color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:wt,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([cn({inputs:["ariaHidden","ariaLabel","color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],w),w})(),on=(()=>{let w=class{constructor(T,q,fe){this.z=fe,T.detach(),this.el=q.nativeElement,Rn(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:wt,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([cn({inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","debounce","disabled","enterkeyhint","inputmode","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],w),w})(),On=(()=>{let w=class{constructor(T,q,fe){this.z=fe,T.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-item"]],inputs:{button:"button",color:"color",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:wt,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([cn({inputs:["button","color","detail","detailIcon","disabled","download","href","lines","mode","rel","routerAnimation","routerDirection","target","type"]})],w),w})(),Rr=(()=>{let w=class{constructor(T,q,fe){this.z=fe,T.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-item-option"]],inputs:{color:"color",disabled:"disabled",download:"download",expandable:"expandable",href:"href",mode:"mode",rel:"rel",target:"target",type:"type"},ngContentSelectors:wt,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([cn({inputs:["color","disabled","download","expandable","href","mode","rel","target","type"]})],w),w})(),Gi=(()=>{let w=class{constructor(T,q,fe){this.z=fe,T.detach(),this.el=q.nativeElement,Rn(this,this.el,["ionSwipe"])}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-item-options"]],inputs:{side:"side"},ngContentSelectors:wt,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([cn({inputs:["side"]})],w),w})(),ci=(()=>{let w=class{constructor(T,q,fe){this.z=fe,T.detach(),this.el=q.nativeElement,Rn(this,this.el,["ionDrag"])}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-item-sliding"]],inputs:{disabled:"disabled"},ngContentSelectors:wt,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([cn({inputs:["disabled"],methods:["getOpenAmount","getSlidingRatio","open","close","closeOpened"]})],w),w})(),vi=(()=>{let w=class{constructor(T,q,fe){this.z=fe,T.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:wt,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([cn({inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],w),w})(),rs=(()=>{let w=class{constructor(T,q,fe){this.z=fe,T.detach(),this.el=q.nativeElement,Rn(this,this.el,["ionWillOpen","ionWillClose","ionDidOpen","ionDidClose"])}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-menu"]],inputs:{contentId:"contentId",disabled:"disabled",maxEdgeStart:"maxEdgeStart",menuId:"menuId",side:"side",swipeGesture:"swipeGesture",type:"type"},ngContentSelectors:wt,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([cn({inputs:["contentId","disabled","maxEdgeStart","menuId","side","swipeGesture","type"],methods:["isOpen","isActive","open","close","toggle","setOpen"]})],w),w})(),_s=(()=>{let w=class{constructor(T,q,fe){this.z=fe,T.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-menu-button"]],inputs:{autoHide:"autoHide",color:"color",disabled:"disabled",menu:"menu",mode:"mode",type:"type"},ngContentSelectors:wt,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([cn({inputs:["autoHide","color","disabled","menu","mode","type"]})],w),w})(),Vs=(()=>{let w=class{constructor(T,q,fe){this.z=fe,T.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-note"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:wt,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([cn({inputs:["color","mode"]})],w),w})(),Is=(()=>{let w=class{constructor(T,q,fe){this.z=fe,T.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-spinner"]],inputs:{color:"color",duration:"duration",name:"name",paused:"paused"},ngContentSelectors:wt,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([cn({inputs:["color","duration","name","paused"]})],w),w})(),Zi=(()=>{let w=class{constructor(T,q,fe){this.z=fe,T.detach(),this.el=q.nativeElement,Rn(this,this.el,["ionChange","ionInput","ionBlur","ionFocus"])}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-textarea"]],inputs:{autoGrow:"autoGrow",autocapitalize:"autocapitalize",autofocus:"autofocus",clearOnEdit:"clearOnEdit",color:"color",cols:"cols",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",maxlength:"maxlength",minlength:"minlength",mode:"mode",name:"name",placeholder:"placeholder",readonly:"readonly",required:"required",rows:"rows",spellcheck:"spellcheck",value:"value",wrap:"wrap"},ngContentSelectors:wt,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([cn({inputs:["autoGrow","autocapitalize","autofocus","clearOnEdit","color","cols","debounce","disabled","enterkeyhint","inputmode","maxlength","minlength","mode","name","placeholder","readonly","required","rows","spellcheck","value","wrap"],methods:["setFocus","getInputElement"]})],w),w})(),Ms=(()=>{let w=class{constructor(T,q,fe){this.z=fe,T.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:wt,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([cn({inputs:["color","size"]})],w),w})(),_i=(()=>{let w=class{constructor(T,q,fe){this.z=fe,T.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:wt,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([cn({inputs:["color","mode"]})],w),w})(),Qi=class{get(N,T){const q=le();return q?q.get(N,T):null}getBoolean(N,T){const q=le();return!!q&&q.getBoolean(N,T)}getNumber(N,T){const q=le();return q?q.getNumber(N,T):0}set(N,T){console.warn("[DEPRECATION][Config]: The Config.set() method is deprecated and will be removed in Ionic Framework 6.0. Please see https://ionicframework.com/docs/angular/config for alternatives.");const q=le();q&&q.set(N,T)}};Qi.\u0275fac=function(N){return new(N||Qi)},Qi.\u0275prov=E.Yz7({token:Qi,factory:function(w){return Qi.\u0275fac(w)},providedIn:"root"}),Qi.ngInjectableDef=(0,E.Yz7)({factory:function(){return new Qi},token:Qi,providedIn:"root"});const G=new E.OlP("USERCONFIG"),le=()=>{if("undefined"!=typeof window){const w=window.Ionic;if(w&&w.config)return w.config}return null};class Ce{constructor(N={}){this.data=N}get(N){return this.data[N]}}let ze=(()=>{let w=class{constructor(T,q){this.zone=T,this.appRef=q}create(T,q,fe){return new kt(T,q,fe,this.appRef,this.zone)}};return w.\u0275fac=function(T){return new(T||w)(E.LFG(E.R0b),E.LFG(E.z2F))},w.\u0275prov=E.Yz7({token:w,factory:function(N){return w.\u0275fac(N)}}),w})();class kt{constructor(N,T,q,fe,yt){this.resolver=N,this.injector=T,this.location=q,this.appRef=fe,this.zone=yt,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(N,T,q,fe){return this.zone.run(()=>new Promise(yt=>{yt(an(this.zone,this.resolver,this.injector,this.location,this.appRef,this.elRefMap,this.elEventsMap,N,T,q,fe))}))}removeViewFromDom(N,T){return this.zone.run(()=>new Promise(q=>{const fe=this.elRefMap.get(T);if(fe){fe.destroy(),this.elRefMap.delete(T);const yt=this.elEventsMap.get(T);yt&&(yt(),this.elEventsMap.delete(T))}q()}))}}const an=(w,N,T,q,fe,yt,Xt,yn,yr,Pn,Nr)=>{const wi=N.resolveComponentFactory(yr),zt=E.zs3.create({providers:ue(Pn),parent:T}),nr=q?q.createComponent(wi,q.length,zt):wi.create(zt),Ji=nr.instance,ro=nr.location.nativeElement;if(Pn&&Object.assign(Ji,Pn),Nr)for(const $n of Nr)ro.classList.add($n);const Ln=B(w,Ji,ro);return yn.appendChild(ro),q||fe.attachView(nr.hostView),nr.changeDetectorRef.reattach(),yt.set(ro,nr),Xt.set(ro,Ln),ro},H=[Ct.L,Ct.a,Ct.b,Ct.c,Ct.d],B=(w,N,T)=>w.run(()=>{const q=H.filter(fe=>"function"==typeof N[fe]).map(fe=>{const yt=Xt=>N[fe](Xt.detail);return T.addEventListener(fe,yt),()=>T.removeEventListener(fe,yt)});return()=>q.forEach(fe=>fe())}),k=new E.OlP("NavParamsToken"),ue=w=>[{provide:k,useValue:w},{provide:Ce,useFactory:mn,deps:[k]}],mn=w=>new Ce(w),Ei=(w,N)=>((w=w.filter(T=>T.stackId!==N.stackId)).push(N),w),Do=(w,N)=>{const T=w.createUrlTree(["."],{relativeTo:N});return w.serializeUrl(T)},Va=(w,N)=>{if(!w)return;const T=Go(N);for(let q=0;q<T.length;q++){if(q>=w.length)return T[q];if(T[q]!==w[q])return}},Go=w=>w.split("/").map(N=>N.trim()).filter(N=>""!==N),ya=w=>{w&&(w.ref.destroy(),w.unlistenEvents())};class po{constructor(N,T,q,fe,yt,Xt){this.containerEl=T,this.router=q,this.navCtrl=fe,this.zone=yt,this.location=Xt,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==N?Go(N):void 0}createView(N,T){const q=Do(this.router,T),fe=N&&N.location&&N.location.nativeElement,yt=B(this.zone,N.instance,fe);return{id:this.nextId++,stackId:Va(this.tabsPrefix,q),unlistenEvents:yt,element:fe,ref:N,url:q}}getExistingView(N){const T=Do(this.router,N),q=this.views.find(fe=>fe.url===T);return q&&q.ref.changeDetectorRef.reattach(),q}setActive(N){const T=this.navCtrl.consumeTransition();let{direction:q,animation:fe,animationBuilder:yt}=T;const Xt=this.activeView,yn=((w,N)=>!N||w.stackId!==N.stackId)(N,Xt);yn&&(q="back",fe=void 0);const yr=this.views.slice();let Pn;const Nr=this.router;Nr.getCurrentNavigation?Pn=Nr.getCurrentNavigation():Nr.navigations&&Nr.navigations.value&&(Pn=Nr.navigations.value),Pn&&Pn.extras&&Pn.extras.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const wi=this.views.includes(N),zt=this.insertView(N,q);wi||N.ref.changeDetectorRef.detectChanges();const nr=N.animationBuilder;return void 0===yt&&"back"===q&&!yn&&void 0!==nr&&(yt=nr),Xt&&(Xt.animationBuilder=yt),this.zone.runOutsideAngular(()=>this.wait(()=>(Xt&&Xt.ref.changeDetectorRef.detach(),N.ref.changeDetectorRef.reattach(),this.transition(N,Xt,fe,this.canGoBack(1),!1,yt).then(()=>rn(N,zt,yr,this.location)).then(()=>({enteringView:N,direction:q,animation:fe,tabSwitch:yn})))))}canGoBack(N,T=this.getActiveStackId()){return this.getStack(T).length>N}pop(N,T=this.getActiveStackId()){return this.zone.run(()=>{const q=this.getStack(T);if(q.length<=N)return Promise.resolve(!1);const fe=q[q.length-N-1];let yt=fe.url;const Xt=fe.savedData;if(Xt){const yr=Xt.get("primary");yr&&yr.route&&yr.route._routerState&&yr.route._routerState.snapshot&&yr.route._routerState.snapshot.url&&(yt=yr.route._routerState.snapshot.url)}const{animationBuilder:yn}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(yt,Object.assign({},fe.savedExtras,{animation:yn})).then(()=>!0)})}startBackTransition(){const N=this.activeView;if(N){const T=this.getStack(N.stackId),q=T[T.length-2],fe=q.animationBuilder;return this.wait(()=>this.transition(q,N,"back",this.canGoBack(2),!0,fe))}return Promise.resolve()}endBackTransition(N){N?(this.skipTransition=!0,this.pop(1)):this.activeView&&So(this.activeView,this.views,this.views,this.location)}getLastUrl(N){const T=this.getStack(N);return T.length>0?T[T.length-1]:void 0}getRootUrl(N){const T=this.getStack(N);return T.length>0?T[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(ya),this.activeView=void 0,this.views=[]}getStack(N){return this.views.filter(T=>T.stackId===N)}insertView(N,T){return this.activeView=N,this.views=((w,N,T)=>"root"===T?Ei(w,N):"forward"===T?((w,N)=>(w.indexOf(N)>=0?w=w.filter(q=>q.stackId!==N.stackId||q.id<=N.id):w.push(N),w))(w,N):((w,N)=>w.indexOf(N)>=0?w.filter(q=>q.stackId!==N.stackId||q.id<=N.id):Ei(w,N))(w,N))(this.views,N,T),this.views.slice()}transition(N,T,q,fe,yt,Xt){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(T===N)return Promise.resolve(!1);const yn=N?N.element:void 0,yr=T?T.element:void 0,Pn=this.containerEl;return yn&&yn!==yr&&(yn.classList.add("ion-page"),yn.classList.add("ion-page-invisible"),yn.parentElement!==Pn&&Pn.appendChild(yn),Pn.commit)?Pn.commit(yn,yr,{deepWait:!0,duration:void 0===q?0:void 0,direction:q,showGoBack:fe,progressAnimation:yt,animationBuilder:Xt}):Promise.resolve(!1)}wait(N){return ne(this,void 0,void 0,function*(){void 0!==this.runningTask&&(yield this.runningTask,this.runningTask=void 0);const T=this.runningTask=N();return T.finally(()=>this.runningTask=void 0),T})}}const rn=(w,N,T,q)=>"function"==typeof requestAnimationFrame?new Promise(fe=>{requestAnimationFrame(()=>{So(w,N,T,q),fe()})}):Promise.resolve(),So=(w,N,T,q)=>{T.filter(fe=>!N.includes(fe)).forEach(ya),N.forEach(fe=>{const Xt=q.path().split("?")[0].split("#")[0];if(fe!==w&&fe.url!==Xt){const yn=fe.element;yn.setAttribute("aria-hidden","true"),yn.classList.add("ion-page-hidden"),fe.ref.changeDetectorRef.detach()}})};let Js=(()=>{let w=class{constructor(T,q,fe,yt,Xt,yn,yr,Pn,Nr,wi,zt,nr,Ji){this.parentContexts=T,this.location=q,this.resolver=fe,this.config=yn,this.navCtrl=yr,this.parentOutlet=Ji,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new Qn.X(null),this.stackEvents=new E.vpe,this.activateEvents=new E.vpe,this.deactivateEvents=new E.vpe,this.nativeEl=Nr.nativeElement,this.name=yt||We.eC,this.tabsPrefix="true"===Xt?Do(wi,nr):void 0,this.stackCtrl=new po(this.tabsPrefix,this.nativeEl,wi,yr,zt,Pn),T.onChildOutletCreated(this.name,this)}set animation(T){this.nativeEl.animation=T}set animated(T){this.nativeEl.animated=T}set swipeGesture(T){this._swipeGesture=T,this.nativeEl.swipeHandler=T?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:q=>this.stackCtrl.endBackTransition(q)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){if(!this.activated){const T=this.getContext();T&&T.route&&this.activateWith(T.route,T.resolver||null)}new Promise(T=>(0,dt.c)(this.nativeEl,T)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(T,q){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const q=this.getContext();this.activatedView.savedData=new Map(q.children.contexts);const fe=this.activatedView.savedData.get("primary");if(fe&&q.route&&(fe.route=Object.assign({},q.route)),this.activatedView.savedExtras={},q.route){const yt=q.route.snapshot;this.activatedView.savedExtras.queryParams=yt.queryParams,this.activatedView.savedExtras.fragment=yt.fragment}}const T=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,q){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=T;let fe,yt=this.stackCtrl.getExistingView(T);if(yt){fe=this.activated=yt.ref;const Xt=yt.savedData;Xt&&(this.getContext().children.contexts=Xt),this.updateActivatedRouteProxy(fe.instance,T)}else{const yr=(q=q||this.resolver).resolveComponentFactory(T._futureSnapshot.routeConfig.component),Pn=this.parentContexts.getOrCreateContext(this.name).children,Nr=new Qn.X(null),wi=this.createActivatedRouteProxy(Nr,T),zt=new bs(wi,Pn,this.location.injector);fe=this.activated=this.location.createComponent(yr,this.location.length,zt),Nr.next(fe.instance),yt=this.stackCtrl.createView(this.activated,T),this.proxyMap.set(fe.instance,wi),this.currentActivatedRoute$.next({component:fe.instance,activatedRoute:T})}this.activatedView=yt,this.stackCtrl.setActive(yt).then(Xt=>{this.navCtrl.setTopOutlet(this),this.activateEvents.emit(fe.instance),this.stackEvents.emit(Xt)})}canGoBack(T=1,q){return this.stackCtrl.canGoBack(T,q)}pop(T=1,q){return this.stackCtrl.pop(T,q)}getLastUrl(T){const q=this.stackCtrl.getLastUrl(T);return q?q.url:void 0}getLastRouteView(T){return this.stackCtrl.getLastUrl(T)}getRootView(T){return this.stackCtrl.getRootUrl(T)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(T,q){const fe=new We.gz;return fe._futureSnapshot=q._futureSnapshot,fe._routerState=q._routerState,fe.snapshot=q.snapshot,fe.outlet=q.outlet,fe.component=q.component,fe._paramMap=this.proxyObservable(T,"paramMap"),fe._queryParamMap=this.proxyObservable(T,"queryParamMap"),fe.url=this.proxyObservable(T,"url"),fe.params=this.proxyObservable(T,"params"),fe.queryParams=this.proxyObservable(T,"queryParams"),fe.fragment=this.proxyObservable(T,"fragment"),fe.data=this.proxyObservable(T,"data"),fe}proxyObservable(T,q){return T.pipe((0,lr.h)(fe=>!!fe),(0,Ar.w)(fe=>this.currentActivatedRoute$.pipe((0,lr.h)(yt=>null!==yt&&yt.component===fe),(0,Ar.w)(yt=>yt&&yt.activatedRoute[q]),(0,Dr.x)())))}updateActivatedRouteProxy(T,q){const fe=this.proxyMap.get(T);if(!fe)throw new Error("Could not find activated route proxy for view");fe._futureSnapshot=q._futureSnapshot,fe._routerState=q._routerState,fe.snapshot=q.snapshot,fe.outlet=q.outlet,fe.component=q.component,this.currentActivatedRoute$.next({component:T,activatedRoute:q})}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(We.y6),E.Y36(E.s_b),E.Y36(E._Vd),E.$8M("name"),E.$8M("tabs"),E.Y36(Qi),E.Y36(pn),E.Y36(gt.Ye),E.Y36(E.SBq),E.Y36(We.F0),E.Y36(E.R0b),E.Y36(We.gz),E.Y36(w,12))},w.\u0275dir=E.lG2({type:w,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",swipeGesture:"swipeGesture"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),ae([(0,E.r_U)()],w.prototype,"stackEvents",void 0),ae([(0,E.r_U)("activate")],w.prototype,"activateEvents",void 0),ae([(0,E.r_U)("deactivate")],w.prototype,"deactivateEvents",void 0),w=ae([Q(3,(0,E.ahi)("name")),Q(4,(0,E.FiY)()),Q(4,(0,E.ahi)("tabs")),Q(12,(0,E.tp0)()),Q(12,(0,E.FiY)())],w),w})();class bs{constructor(N,T,q){this.route=N,this.childContexts=T,this.parent=q}get(N,T){return N===We.gz?this.route:N===We.y6?this.childContexts:this.parent.get(N,T)}}class Cs{constructor(N){this.ctrl=N}create(N){return this.ctrl.create(N||{})}dismiss(N,T,q){return this.ctrl.dismiss(N,T,q)}getTop(){return this.ctrl.getTop()}}let Vi=class extends Cs{constructor(){super(Ue.b)}};Vi.\u0275fac=function(N){return new(N||Vi)},Vi.\u0275prov=E.Yz7({token:Vi,factory:function(w){return Vi.\u0275fac(w)},providedIn:"root"}),Vi.ngInjectableDef=(0,E.Yz7)({factory:function(){return new Vi},token:Vi,providedIn:"root"});let oo=class extends Cs{constructor(){super(Ue.a)}};oo.\u0275fac=function(N){return new(N||oo)},oo.\u0275prov=E.Yz7({token:oo,factory:function(w){return oo.\u0275fac(w)},providedIn:"root"}),oo.ngInjectableDef=(0,E.Yz7)({factory:function(){return new oo},token:oo,providedIn:"root"});let ds=class extends Cs{constructor(){super(Ue.l)}};ds.\u0275fac=function(N){return new(N||ds)},ds.\u0275prov=E.Yz7({token:ds,factory:function(w){return ds.\u0275fac(w)},providedIn:"root"}),ds.ngInjectableDef=(0,E.Yz7)({factory:function(){return new ds},token:ds,providedIn:"root"});let mo=class{open(N){return st.m.open(N)}close(N){return st.m.close(N)}toggle(N){return st.m.toggle(N)}enable(N,T){return st.m.enable(N,T)}swipeGesture(N,T){return st.m.swipeGesture(N,T)}isOpen(N){return st.m.isOpen(N)}isEnabled(N){return st.m.isEnabled(N)}get(N){return st.m.get(N)}getOpen(){return st.m.getOpen()}getMenus(){return st.m.getMenus()}};mo.\u0275fac=function(N){return new(N||mo)},mo.\u0275prov=E.Yz7({token:mo,factory:function(w){return mo.\u0275fac(w)},providedIn:"root"}),mo.ngInjectableDef=(0,E.Yz7)({factory:function(){return new mo},token:mo,providedIn:"root"});let js=class extends Cs{constructor(){super(Ue.p)}};js.\u0275fac=function(N){return new(N||js)},js.\u0275prov=E.Yz7({token:js,factory:function(w){return js.\u0275fac(w)},providedIn:"root"}),js.ngInjectableDef=(0,E.Yz7)({factory:function(){return new js},token:js,providedIn:"root"});let Ao=(()=>{let w=class extends Cs{constructor(T,q,fe){super(Ue.m),this.angularDelegate=T,this.resolver=q,this.injector=fe}create(T){return super.create(Object.assign({},T,{delegate:this.angularDelegate.create(this.resolver,this.injector)}))}};return w.\u0275fac=function(T){return new(T||w)(E.LFG(ze),E.LFG(E._Vd),E.LFG(E.zs3))},w.\u0275prov=E.Yz7({token:w,factory:function(N){return w.\u0275fac(N)}}),w})(),qo=(()=>{let w=class extends Cs{constructor(T,q,fe){super(Ue.c),this.angularDelegate=T,this.resolver=q,this.injector=fe}create(T){return super.create(Object.assign({},T,{delegate:this.angularDelegate.create(this.resolver,this.injector)}))}};return w.\u0275fac=function(T){return new(T||w)(E.LFG(ze),E.LFG(E._Vd),E.LFG(E.zs3))},w.\u0275prov=E.Yz7({token:w,factory:function(N){return w.\u0275fac(N)}}),w})(),xo=class extends Cs{constructor(){super(Ue.t)}};xo.\u0275fac=function(N){return new(N||xo)},xo.\u0275prov=E.Yz7({token:xo,factory:function(w){return xo.\u0275fac(w)},providedIn:"root"}),xo.ngInjectableDef=(0,E.Yz7)({factory:function(){return new xo},token:xo,providedIn:"root"});let to=class{read(N){Hs().read(N)}write(N){Hs().write(N)}};to.\u0275fac=function(N){return new(N||to)},to.\u0275prov=E.Yz7({token:to,factory:function(w){return to.\u0275fac(w)},providedIn:"root"}),to.ngInjectableDef=(0,E.Yz7)({factory:function(){return new to},token:to,providedIn:"root"});const Hs=()=>{const w="undefined"!=typeof window?window:null;if(null!=w){const N=w.Ionic;return N&&N.queue?N.queue:{read:T=>w.requestAnimationFrame(T),write:T=>w.requestAnimationFrame(T)}}return{read:N=>N(),write:N=>N()}};let Ci=class{create(N){return(0,He.c)(N)}easingTime(N,T,q,fe,yt){return(0,vt.g)(N,T,q,fe,yt)}};Ci.\u0275fac=function(N){return new(N||Ci)},Ci.\u0275prov=E.Yz7({token:Ci,factory:function(w){return Ci.\u0275fac(w)},providedIn:"root"}),Ci.ngInjectableDef=(0,E.Yz7)({factory:function(){return new Ci},token:Ci,providedIn:"root"});let no=class{constructor(N){this.zone=N}create(N,T=!1){return T&&Object.getOwnPropertyNames(N).forEach(q=>{if("function"==typeof N[q]){const fe=N[q];N[q]=(...yt)=>this.zone.run(()=>fe(...yt))}}),(0,Ht.createGesture)(N)}};no.\u0275fac=function(N){return new(N||no)(E.LFG(E.R0b))},no.\u0275prov=E.Yz7({token:no,factory:function(w){return no.\u0275fac(w)},providedIn:"root"}),no.ngInjectableDef=(0,E.Yz7)({factory:function(){return new no((0,E.LFG)(E.R0b))},token:no,providedIn:"root"});class oa{shouldDetach(N){return!1}shouldAttach(N){return!1}store(N,T){}retrieve(N){return null}shouldReuseRoute(N,T){if(N.routeConfig!==T.routeConfig)return!1;const q=N.params,fe=T.params,yt=Object.keys(q),Xt=Object.keys(fe);if(yt.length!==Xt.length)return!1;for(const yn of yt)if(fe[yn]!==q[yn])return!1;return!0}}const Ns=(w,N,T)=>()=>{if(N.defaultView&&"undefined"!=typeof window){(w=>{const N=window,T=N.Ionic;T&&T.config&&"Object"!==T.config.constructor.name||(N.Ionic=N.Ionic||{},N.Ionic.config=Object.assign(Object.assign({},N.Ionic.config),w))})(Object.assign({},w,{_zoneGate:yt=>T.run(yt)}));const fe="__zone_symbol__addEventListener"in N.body?"__zone_symbol__addEventListener":"addEventListener";return function(){var w=[];if("undefined"!=typeof window){var N=window;(!N.customElements||N.Element&&(!N.Element.prototype.closest||!N.Element.prototype.matches||!N.Element.prototype.remove||!N.Element.prototype.getRootNode))&&w.push(L.e(6748).then(L.t.bind(L,5141,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||N.NodeList&&!N.NodeList.prototype.forEach||!N.fetch||!function(){try{var q=new URL("b","http://a");return q.pathname="c%20d","http://a/c%20d"===q.href&&q.searchParams}catch(fe){return!1}}()||"undefined"==typeof WeakMap)&&w.push(L.e(2214).then(L.t.bind(L,7656,23)))}return Promise.all(w)}().then(()=>((w,N)=>"undefined"==typeof window?Promise.resolve():(Dt.C&&Dt.C.supports&&Dt.C.supports("color","var(--c)")?(0,Dt.a)():L.e(1843).then(L.t.bind(L,5902,23)).then(()=>(Dt.p.$cssShim$=Dt.w.__cssshim)?Dt.p.$cssShim$.i():0)).then(()=>(ri(),(0,Dt.b)(JSON.parse('[["ion-select_3",[[2,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"options":[16]},[[0,"ionChange","onSelect"]]],[33,"ion-select",{"disabled":[4],"cancelText":[1,"cancel-text"],"okText":[1,"ok-text"],"placeholder":[1],"name":[1],"selectedText":[1,"selected-text"],"multiple":[4],"interface":[1],"interfaceOptions":[8,"interface-options"],"compareWith":[1,"compare-with"],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}]]],["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"activated":[32]}]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-modal",[[34,"ion-modal",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"swipeToClose":[4,"swipe-to-close"],"presentingElement":[16],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-popover",[[34,"ion-popover",{"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-app_8",[[0,"ion-app"],[34,"ion-buttons",{"collapse":[4]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"]]],[36,"ion-footer",{"translucent":[4]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-slide_2",[[0,"ion-slide"],[36,"ion-slides",{"options":[8],"pager":[4],"scrollbar":[4],"update":[64],"updateAutoHeight":[64],"slideTo":[64],"slideNext":[64],"slidePrev":[64],"getActiveIndex":[64],"getPreviousIndex":[64],"length":[64],"isEnd":[64],"isBeginning":[64],"startAutoplay":[64],"stopAutoplay":[64],"lockSwipeToNext":[64],"lockSwipeToPrev":[64],"lockSwipes":[64],"getSwiper":[64]}]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[1]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-input",[[34,"ion-input",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"inputmode":[1],"max":[1],"maxlength":[2],"min":[1],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"snaps":[4],"step":[2],"ticks":[4],"disabled":[4],"value":[1026],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-textarea",[[34,"ion-textarea",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[4,"auto-grow"],"value":[1025],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"activated":[32]}]]],["ion-virtual-scroll",[[0,"ion-virtual-scroll",{"approxItemHeight":[2,"approx-item-height"],"approxHeaderHeight":[2,"approx-header-height"],"approxFooterHeight":[2,"approx-footer-height"],"headerFn":[16],"footerFn":[16],"items":[16],"itemHeight":[16],"headerHeight":[16],"footerHeight":[16],"renderItem":[16],"renderHeader":[16],"renderFooter":[16],"nodeRender":[16],"domRender":[16],"totalHeight":[32],"positionForItem":[64],"checkRange":[64],"checkEnd":[64]},[[9,"resize","onResize"]]]]],["ion-datetime_3",[[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[33,"ion-datetime",{"name":[1],"disabled":[4],"readonly":[4],"min":[1025],"max":[1025],"displayFormat":[1,"display-format"],"displayTimezone":[1,"display-timezone"],"pickerFormat":[1,"picker-format"],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"monthNames":[1,"month-names"],"monthShortNames":[1,"month-short-names"],"dayNames":[1,"day-names"],"dayShortNames":[1,"day-short-names"],"pickerOptions":[16],"placeholder":[1],"value":[1025],"isExpanded":[32],"open":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ariaLabel":[1537,"aria-label"],"ariaHidden":[513,"aria-hidden"],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[33,"ion-note",{"color":[513]}],[1,"ion-skeleton-text",{"animated":[4]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"href":[1],"rel":[1],"lines":[1],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"multipleInputs":[32],"focusable":[32]},[[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}]]]]'),N))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:Sn,jmp:yt=>T.runOutsideAngular(yt),ael(yt,Xt,yn,yr){yt[fe](Xt,yn,yr)},rel(yt,Xt,yn,yr){yt.removeEventListener(Xt,yn,yr)}}))}};var $a;let Ro=$a=class{static forRoot(N){return{ngModule:$a,providers:[{provide:G,useValue:N},{provide:E.ip1,useFactory:Ns,multi:!0,deps:[G,gt.K0,E.R0b]}]}}};Ro.\u0275fac=function(N){return new(N||Ro)},Ro.\u0275mod=E.oAB({type:Ro}),Ro.\u0275inj=E.cJS({providers:[ze,Ao,qo],imports:[[gt.ez]]})},7235:(nn,ot,L)=>{"use strict";L.d(ot,{c:()=>ut});var _=L(1567);let P;const ke=Te=>Te.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ae=Te=>{if(void 0===P){const $e=void 0!==Te.style.webkitAnimationName;P=void 0===Te.style.animationName&&$e?"-webkit-":""}return P},Q=(Te,Ke,$e)=>{const qe=Ke.startsWith("animation")?ae(Te):"";Te.style.setProperty(qe+Ke,$e)},Z=(Te,Ke)=>{const $e=Ke.startsWith("animation")?ae(Te):"";Te.style.removeProperty($e+Ke)},se=[],De=(Te=[],Ke)=>{if(void 0!==Ke){const $e=Array.isArray(Ke)?Ke:[Ke];return[...Te,...$e]}return Te},ut=Te=>{let Ke,$e,qe,Ie,Me,ct,gt,dt,Ct,st,Ue,Mt,Pt,at=[],Vt=[],E=[],Ye=!1,We={},He=[],Ge=[],ht={},vt=0,Ht=!1,Zt=!1,lt=!0,Dt=!1,Bt=!0;const gn=Te,kn=[],Tn=[],_n=[],Mn=[],vr=[],ur=[],Ot=[],En=[],Wn=[],tn=[],Un="function"==typeof AnimationEffect||"function"==typeof window.AnimationEffect,jn="function"==typeof Element&&"function"==typeof Element.prototype.animate&&Un,ri=(j,ce)=>((ce&&ce.oneTimeCallback?Tn:kn).push({c:j,o:ce}),Pt),Qt=()=>{if(jn)tn.forEach(j=>{j.cancel()}),tn.length=0;else{const j=_n.slice();(0,_.r)(()=>{j.forEach(ce=>{Z(ce,"animation-name"),Z(ce,"animation-duration"),Z(ce,"animation-timing-function"),Z(ce,"animation-iteration-count"),Z(ce,"animation-delay"),Z(ce,"animation-play-state"),Z(ce,"animation-fill-mode"),Z(ce,"animation-direction")})})}},wt=()=>{vr.forEach(j=>{j&&j.parentNode&&j.parentNode.removeChild(j)}),vr.length=0},oe=()=>void 0!==Me?Me:gt?gt.getFill():"both",Ae=()=>void 0!==Ct?Ct:void 0!==ct?ct:gt?gt.getDirection():"normal",nt=()=>Ht?"linear":void 0!==qe?qe:gt?gt.getEasing():"linear",It=()=>Zt?0:void 0!==st?st:void 0!==$e?$e:gt?gt.getDuration():0,Oe=()=>void 0!==Ie?Ie:gt?gt.getIterations():1,Le=()=>void 0!==Ue?Ue:void 0!==Ke?Ke:gt?gt.getDelay():0,Gt=()=>{0!==vt&&(vt--,0===vt&&((()=>{Kr(),En.forEach(Xe=>Xe()),Wn.forEach(Xe=>Xe());const j=lt?1:0,ce=He,be=Ge,Qe=ht;_n.forEach(Xe=>{const Rt=Xe.classList;ce.forEach(At=>Rt.add(At)),be.forEach(At=>Rt.remove(At));for(const At in Qe)Qe.hasOwnProperty(At)&&Q(Xe,At,Qe[At])}),kn.forEach(Xe=>Xe.c(j,Pt)),Tn.forEach(Xe=>Xe.c(j,Pt)),Tn.length=0,Bt=!0,lt&&(Dt=!0),lt=!0})(),gt&&gt.animationFinish()))},Rn=(j=!0)=>{(()=>{ur.forEach(Qe=>Qe()),Ot.forEach(Qe=>Qe());const j=Vt,ce=E,be=We;_n.forEach(Qe=>{const Xe=Qe.classList;j.forEach(Rt=>Xe.add(Rt)),ce.forEach(Rt=>Xe.remove(Rt));for(const Rt in be)be.hasOwnProperty(Rt)&&Q(Qe,Rt,be[Rt])})})(),at.length>0&&(jn?(_n.forEach(j=>{const ce=j.animate(at,{id:gn,delay:Le(),duration:It(),easing:nt(),iterations:Oe(),fill:oe(),direction:Ae()});ce.pause(),tn.push(ce)}),tn.length>0&&(tn[0].onfinish=()=>{Gt()})):((j=!0)=>{wt();const ce=(Te=>(Te.forEach(Ke=>{for(const $e in Ke)if(Ke.hasOwnProperty($e)){const qe=Ke[$e];if("easing"===$e)Ke["animation-timing-function"]=qe,delete Ke[$e];else{const Ie=ke($e);Ie!==$e&&(Ke[Ie]=qe,delete Ke[$e])}}}),Te))(at);_n.forEach(be=>{if(ce.length>0){const Qe=((Te=[])=>Te.map(Ke=>{const $e=Ke.offset,qe=[];for(const Ie in Ke)Ke.hasOwnProperty(Ie)&&"offset"!==Ie&&qe.push(`${Ie}: ${Ke[Ie]};`);return`${100*$e}% { ${qe.join(" ")} }`}).join(" "))(ce);Mt=void 0!==Te?Te:(Te=>{let Ke=se.indexOf(Te);return Ke<0&&(Ke=se.push(Te)-1),`ion-animation-${Ke}`})(Qe);const Xe=((Te,Ke,$e)=>{const qe=(Te=>{const Ke=Te.getRootNode();return Ke.head||Ke})($e),Ie=ae($e),Me=qe.querySelector("#"+Te);if(Me)return Me;const ct=($e.ownerDocument||document).createElement("style");return ct.id=Te,ct.textContent=`@${Ie}keyframes ${Te} { ${Ke} } @${Ie}keyframes ${Te}-alt { ${Ke} }`,qe.appendChild(ct),ct})(Mt,Qe,be);vr.push(Xe),Q(be,"animation-duration",`${It()}ms`),Q(be,"animation-timing-function",nt()),Q(be,"animation-delay",`${Le()}ms`),Q(be,"animation-fill-mode",oe()),Q(be,"animation-direction",Ae());const Rt=Oe()===1/0?"infinite":Oe().toString();Q(be,"animation-iteration-count",Rt),Q(be,"animation-play-state","paused"),j&&Q(be,"animation-name",`${Xe.id}-alt`),(0,_.r)(()=>{Q(be,"animation-name",Xe.id||null)})}})})(j)),Ye=!0},cn=j=>{if(j=Math.min(Math.max(j,0),.9999),jn)tn.forEach(ce=>{ce.currentTime=ce.effect.getComputedTiming().delay+It()*j,ce.pause()});else{const ce=`-${It()*j}ms`;_n.forEach(be=>{at.length>0&&(Q(be,"animation-delay",ce),Q(be,"animation-play-state","paused"))})}},Fr=j=>{tn.forEach(ce=>{ce.effect.updateTiming({delay:Le(),duration:It(),easing:nt(),iterations:Oe(),fill:oe(),direction:Ae()})}),void 0!==j&&cn(j)},br=(j=!0,ce)=>{(0,_.r)(()=>{_n.forEach(be=>{Q(be,"animation-name",Mt||null),Q(be,"animation-duration",`${It()}ms`),Q(be,"animation-timing-function",nt()),Q(be,"animation-delay",void 0!==ce?`-${ce*It()}ms`:`${Le()}ms`),Q(be,"animation-fill-mode",oe()||null),Q(be,"animation-direction",Ae()||null);const Qe=Oe()===1/0?"infinite":Oe().toString();Q(be,"animation-iteration-count",Qe),j&&Q(be,"animation-name",`${Mt}-alt`),(0,_.r)(()=>{Q(be,"animation-name",Mt||null)})})})},Lr=(j=!1,ce=!0,be)=>(j&&Mn.forEach(Qe=>{Qe.update(j,ce,be)}),jn?Fr(be):br(ce,be),Pt),Zn=()=>{Ye&&(jn?tn.forEach(j=>{j.pause()}):_n.forEach(j=>{Q(j,"animation-play-state","paused")}))},yi=()=>{dt=void 0,Gt()},Kr=()=>{dt&&clearTimeout(dt)},pi=j=>new Promise(ce=>{j&&j.sync&&(Zt=!0,ri(()=>Zt=!1,{oneTimeCallback:!0})),Ye||Rn(),Dt&&(jn?(cn(0),Fr()):br(),Dt=!1),Bt&&(vt=Mn.length+1,Bt=!1),ri(()=>ce(),{oneTimeCallback:!0}),Mn.forEach(be=>{be.play()}),jn?(tn.forEach(j=>{j.play()}),(0===at.length||0===_n.length)&&Gt()):(()=>{if(Kr(),(0,_.r)(()=>{_n.forEach(j=>{at.length>0&&Q(j,"animation-play-state","running")})}),0===at.length||0===_n.length)Gt();else{const j=Le()||0,ce=It()||0,be=Oe()||1;isFinite(be)&&(dt=setTimeout(yi,j+ce*be+100)),((Te,Ke)=>{let $e;const qe={passive:!0},Me=ct=>{Te===ct.target&&($e&&$e(),Kr(),(0,_.r)(()=>{_n.forEach(j=>{Z(j,"animation-duration"),Z(j,"animation-delay"),Z(j,"animation-play-state")}),(0,_.r)(Gt)}))};Te&&(Te.addEventListener("webkitAnimationEnd",Me,qe),Te.addEventListener("animationend",Me,qe),$e=()=>{Te.removeEventListener("webkitAnimationEnd",Me,qe),Te.removeEventListener("animationend",Me,qe)})})(_n[0])}})()}),xs=(j,ce)=>{const be=at[0];return void 0===be||void 0!==be.offset&&0!==be.offset?at=[{offset:0,[j]:ce},...at]:be[j]=ce,Pt};return Pt={parentAnimation:gt,elements:_n,childAnimations:Mn,id:gn,animationFinish:Gt,from:xs,to:(j,ce)=>{const be=at[at.length-1];return void 0===be||void 0!==be.offset&&1!==be.offset?at=[...at,{offset:1,[j]:ce}]:be[j]=ce,Pt},fromTo:(j,ce,be)=>xs(j,ce).to(j,be),parent:j=>(gt=j,Pt),play:pi,pause:()=>(Mn.forEach(j=>{j.pause()}),Zn(),Pt),stop:()=>{Mn.forEach(j=>{j.stop()}),Ye&&(Qt(),Ye=!1),Ht=!1,Zt=!1,Bt=!0,Ct=void 0,st=void 0,Ue=void 0,vt=0,Dt=!1,lt=!0},destroy:j=>(Mn.forEach(ce=>{ce.destroy(j)}),(j=>{Qt(),j&&wt()})(j),_n.length=0,Mn.length=0,at.length=0,kn.length=0,Tn.length=0,Ye=!1,Bt=!0,Pt),keyframes:j=>(at=j,Pt),addAnimation:j=>{if(null!=j)if(Array.isArray(j))for(const ce of j)ce.parent(Pt),Mn.push(ce);else j.parent(Pt),Mn.push(j);return Pt},addElement:j=>{if(null!=j)if(1===j.nodeType)_n.push(j);else if(j.length>=0)for(let ce=0;ce<j.length;ce++)_n.push(j[ce]);else console.error("Invalid addElement value");return Pt},update:Lr,fill:j=>(Me=j,Lr(!0),Pt),direction:j=>(ct=j,Lr(!0),Pt),iterations:j=>(Ie=j,Lr(!0),Pt),duration:j=>(!jn&&0===j&&(j=1),$e=j,Lr(!0),Pt),easing:j=>(qe=j,Lr(!0),Pt),delay:j=>(Ke=j,Lr(!0),Pt),getWebAnimations:()=>tn,getKeyframes:()=>at,getFill:oe,getDirection:Ae,getDelay:Le,getIterations:Oe,getEasing:nt,getDuration:It,afterAddRead:j=>(En.push(j),Pt),afterAddWrite:j=>(Wn.push(j),Pt),afterClearStyles:(j=[])=>{for(const ce of j)ht[ce]="";return Pt},afterStyles:(j={})=>(ht=j,Pt),afterRemoveClass:j=>(Ge=De(Ge,j),Pt),afterAddClass:j=>(He=De(He,j),Pt),beforeAddRead:j=>(ur.push(j),Pt),beforeAddWrite:j=>(Ot.push(j),Pt),beforeClearStyles:(j=[])=>{for(const ce of j)We[ce]="";return Pt},beforeStyles:(j={})=>(We=j,Pt),beforeRemoveClass:j=>(E=De(E,j),Pt),beforeAddClass:j=>(Vt=De(Vt,j),Pt),onFinish:ri,progressStart:(j=!1,ce)=>(Mn.forEach(be=>{be.progressStart(j,ce)}),Zn(),Ht=j,Ye?Lr(!1,!0,ce):Rn(),Pt),progressStep:j=>(Mn.forEach(ce=>{ce.progressStep(j)}),cn(j),Pt),progressEnd:(j,ce,be)=>(Ht=!1,Mn.forEach(Qe=>{Qe.progressEnd(j,ce,be)}),void 0!==be&&(st=be),Dt=!1,lt=!0,0===j?(Ct="reverse"===Ae()?"normal":"reverse","reverse"===Ct&&(lt=!1),jn?(Lr(),cn(1-ce)):(Ue=(1-ce)*It()*-1,Lr(!1,!1))):1===j&&(jn?(Lr(),cn(ce)):(Ue=ce*It()*-1,Lr(!1,!1))),void 0!==j&&(ri(()=>{st=void 0,Ct=void 0,Ue=void 0},{oneTimeCallback:!0}),gt||pi()),Pt)}}},7807:(nn,ot,L)=>{"use strict";L.d(ot,{g:()=>_});const _=(Q,Z,ne,we,se)=>re(Q[1],Z[1],ne[1],we[1],se).map(ge=>P(Q[0],Z[0],ne[0],we[0],ge)),P=(Q,Z,ne,we,se)=>se*(3*Z*Math.pow(se-1,2)+se*(-3*ne*se+3*ne+we*se))-Q*Math.pow(se-1,3),re=(Q,Z,ne,we,se)=>ae((we-=se)-3*(ne-=se)+3*(Z-=se)-(Q-=se),3*ne-6*Z+3*Q,3*Z-3*Q,Q).filter(Ee=>Ee>=0&&Ee<=1),ae=(Q,Z,ne,we)=>{if(0===Q)return((Q,Z,ne)=>{const we=Z*Z-4*Q*ne;return we<0?[]:[(-Z+Math.sqrt(we))/(2*Q),(-Z-Math.sqrt(we))/(2*Q)]})(Z,ne,we);const se=(3*(ne/=Q)-(Z/=Q)*Z)/3,ge=(2*Z*Z*Z-9*Z*ne+27*(we/=Q))/27;if(0===se)return[Math.pow(-ge,1/3)];if(0===ge)return[Math.sqrt(-se),-Math.sqrt(-se)];const Ee=Math.pow(ge/2,2)+Math.pow(se/3,3);if(0===Ee)return[Math.pow(ge/2,.5)-Z/3];if(Ee>0)return[Math.pow(-ge/2+Math.sqrt(Ee),1/3)-Math.pow(ge/2+Math.sqrt(Ee),1/3)-Z/3];const _e=Math.sqrt(Math.pow(-se/3,3)),De=Math.acos(-ge/(2*Math.sqrt(Math.pow(-se/3,3)))),ut=2*Math.pow(_e,1/3);return[ut*Math.cos(De/3)-Z/3,ut*Math.cos((De+2*Math.PI)/3)-Z/3,ut*Math.cos((De+4*Math.PI)/3)-Z/3]}},960:(nn,ot,L)=>{"use strict";L.d(ot,{G:()=>ae});class P{constructor(Z,ne,we,se,ge){this.id=ne,this.name=we,this.disableScroll=ge,this.priority=1e6*se+ne,this.ctrl=Z}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const Z=this.ctrl.capture(this.name,this.id,this.priority);return Z&&this.disableScroll&&this.ctrl.disableScroll(this.id),Z}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class re{constructor(Z,ne,we,se){this.id=ne,this.disable=we,this.disableScroll=se,this.ctrl=Z}block(){if(this.ctrl){if(this.disable)for(const Z of this.disable)this.ctrl.disableGesture(Z,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const Z of this.disable)this.ctrl.enableGesture(Z,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const ke="backdrop-no-scroll",ae=new class{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(Z){return new P(this,this.newID(),Z.name,Z.priority||0,!!Z.disableScroll)}createBlocker(Z={}){return new re(this,this.newID(),Z.disable,!!Z.disableScroll)}start(Z,ne,we){return this.canStart(Z)?(this.requestedStart.set(ne,we),!0):(this.requestedStart.delete(ne),!1)}capture(Z,ne,we){if(!this.start(Z,ne,we))return!1;const se=this.requestedStart;let ge=-1e4;if(se.forEach(Ee=>{ge=Math.max(ge,Ee)}),ge===we){this.capturedId=ne,se.clear();const Ee=new CustomEvent("ionGestureCaptured",{detail:{gestureName:Z}});return document.dispatchEvent(Ee),!0}return se.delete(ne),!1}release(Z){this.requestedStart.delete(Z),this.capturedId===Z&&(this.capturedId=void 0)}disableGesture(Z,ne){let we=this.disabledGestures.get(Z);void 0===we&&(we=new Set,this.disabledGestures.set(Z,we)),we.add(ne)}enableGesture(Z,ne){const we=this.disabledGestures.get(Z);void 0!==we&&we.delete(ne)}disableScroll(Z){this.disabledScroll.add(Z),1===this.disabledScroll.size&&document.body.classList.add(ke)}enableScroll(Z){this.disabledScroll.delete(Z),0===this.disabledScroll.size&&document.body.classList.remove(ke)}canStart(Z){return!(void 0!==this.capturedId||this.isDisabled(Z))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(Z){const ne=this.disabledGestures.get(Z);return!!(ne&&ne.size>0)}newID(){return this.gestureId++,this.gestureId}}},3087:(nn,ot,L)=>{"use strict";L.r(ot),L.d(ot,{MENU_BACK_BUTTON_PRIORITY:()=>ae,OVERLAY_BACK_BUTTON_PRIORITY:()=>ke,blockHardwareBackButton:()=>P,startHardwareBackButton:()=>re});var _=L(8239);const P=()=>{document.addEventListener("backbutton",()=>{})},re=()=>{const Q=document;let Z=!1;Q.addEventListener("backbutton",()=>{if(Z)return;let ne=0,we=[];const se=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(_e,De){we.push({priority:_e,handler:De,id:ne++})}}});Q.dispatchEvent(se);const ge=function(){var _e=(0,_.Z)(function*(De){try{if(De&&De.handler){const ut=De.handler(Ee);null!=ut&&(yield ut)}}catch(ut){console.error(ut)}});return function(ut){return _e.apply(this,arguments)}}(),Ee=()=>{if(we.length>0){let _e={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};we.forEach(De=>{De.priority>=_e.priority&&(_e=De)}),Z=!0,we=we.filter(De=>De.id!==_e.id),ge(_e).then(()=>Z=!1)}};Ee()})},ke=100,ae=99},1567:(nn,ot,L)=>{"use strict";L.d(ot,{a:()=>ae,b:()=>Q,c:()=>_,d:()=>ge,e:()=>Ee,f:()=>$e,g:()=>Z,h:()=>P,i:()=>ke,j:()=>se,k:()=>_e,l:()=>we,m:()=>De,n:()=>Ke,o:()=>qe,p:()=>Te,q:()=>ut,r:()=>ne});const _=(Ie,Me)=>{Ie.componentOnReady?Ie.componentOnReady().then(ct=>Me(ct)):ne(()=>Me(Ie))},P=(Ie,Me=[])=>{const ct={};return Me.forEach(at=>{Ie.hasAttribute(at)&&(null!==Ie.getAttribute(at)&&(ct[at]=Ie.getAttribute(at)),Ie.removeAttribute(at))}),ct},re=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],ke=Ie=>P(Ie,re),ae=(Ie,Me,ct,at)=>{if("undefined"!=typeof window){const Vt=window,E=Vt&&Vt.Ionic&&Vt.Ionic.config;if(E){const Ye=E.get("_ael");if(Ye)return Ye(Ie,Me,ct,at);if(E._ael)return E._ael(Ie,Me,ct,at)}}return Ie.addEventListener(Me,ct,at)},Q=(Ie,Me,ct,at)=>{if("undefined"!=typeof window){const Vt=window,E=Vt&&Vt.Ionic&&Vt.Ionic.config;if(E){const Ye=E.get("_rel");if(Ye)return Ye(Ie,Me,ct,at);if(E._rel)return E._rel(Ie,Me,ct,at)}}return Ie.removeEventListener(Me,ct,at)},Z=(Ie,Me=Ie)=>Ie.shadowRoot||Me,ne=Ie=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Ie):"function"==typeof requestAnimationFrame?requestAnimationFrame(Ie):setTimeout(Ie),we=Ie=>!!Ie.shadowRoot&&!!Ie.attachShadow,se=Ie=>{const Me=Ie.closest("ion-item");return Me?Me.querySelector("ion-label"):null},ge=(Ie,Me)=>{let ct;const at=Ie.getAttribute("aria-labelledby"),Vt=Ie.id;let E=null!==at&&""!==at.trim()?at:Me+"-lbl",Ye=null!==at&&""!==at.trim()?document.getElementById(at):se(Ie);return Ye?(null===at&&(Ye.id=E),ct=Ye.textContent,Ye.setAttribute("aria-hidden","true")):""!==Vt.trim()&&(Ye=document.querySelector(`label[for="${Vt}"]`),Ye&&(""!==Ye.id?E=Ye.id:Ye.id=E=`${Vt}-lbl`,ct=Ye.textContent)),{label:Ye,labelId:E,labelText:ct}},Ee=(Ie,Me,ct,at,Vt)=>{if(Ie||we(Me)){let E=Me.querySelector("input.aux-input");E||(E=Me.ownerDocument.createElement("input"),E.type="hidden",E.classList.add("aux-input"),Me.appendChild(E)),E.disabled=Vt,E.name=ct,E.value=at||""}},_e=(Ie,Me,ct)=>Math.max(Ie,Math.min(Me,ct)),De=(Ie,Me)=>{if(!Ie){const ct="ASSERT: "+Me;throw console.error(ct),new Error(ct)}},ut=Ie=>Ie.timeStamp||Date.now(),Te=Ie=>{if(Ie){const Me=Ie.changedTouches;if(Me&&Me.length>0){const ct=Me[0];return{x:ct.clientX,y:ct.clientY}}if(void 0!==Ie.pageX)return{x:Ie.pageX,y:Ie.pageY}}return{x:0,y:0}},Ke=Ie=>{const Me="rtl"===document.dir;switch(Ie){case"start":return Me;case"end":return!Me;default:throw new Error(`"${Ie}" is not a valid value for [side]. Use "start" or "end" instead.`)}},$e=(Ie,Me)=>{const ct=Ie._original||Ie;return{_original:Ie,emit:qe(ct.emit.bind(ct),Me)}},qe=(Ie,Me=0)=>{let ct;return(...at)=>{clearTimeout(ct),ct=setTimeout(Ie,Me,...at)}}},6951:(nn,ot,L)=>{"use strict";L.d(ot,{m:()=>ge});var _=L(8239),P=L(3087),re=L(1567),ke=L(7585),ae=L(7235);const Q=Ee=>(0,ae.c)().duration(Ee?400:300),Z=Ee=>{let _e,De;const ut=Ee.width+8,Te=(0,ae.c)(),Ke=(0,ae.c)();Ee.isEndSide?(_e=ut+"px",De="0px"):(_e=-ut+"px",De="0px"),Te.addElement(Ee.menuInnerEl).fromTo("transform",`translateX(${_e})`,`translateX(${De})`);const qe="ios"===(0,ke.b)(Ee),Ie=qe?.2:.25;return Ke.addElement(Ee.backdropEl).fromTo("opacity",.01,Ie),Q(qe).addAnimation([Te,Ke])},ne=Ee=>{let _e,De;const ut=(0,ke.b)(Ee),Te=Ee.width;Ee.isEndSide?(_e=-Te+"px",De=Te+"px"):(_e=Te+"px",De=-Te+"px");const Ke=(0,ae.c)().addElement(Ee.menuInnerEl).fromTo("transform",`translateX(${De})`,"translateX(0px)"),$e=(0,ae.c)().addElement(Ee.contentEl).fromTo("transform","translateX(0px)",`translateX(${_e})`),qe=(0,ae.c)().addElement(Ee.backdropEl).fromTo("opacity",.01,.32);return Q("ios"===ut).addAnimation([Ke,$e,qe])},we=Ee=>{const _e=(0,ke.b)(Ee),De=Ee.width*(Ee.isEndSide?-1:1)+"px",ut=(0,ae.c)().addElement(Ee.contentEl).fromTo("transform","translateX(0px)",`translateX(${De})`);return Q("ios"===_e).addAnimation(ut)},ge=(()=>{const Ee=new Map,_e=[],De=function(){var Ct=(0,_.Z)(function*(st){const Ue=yield Me(st);return!!Ue&&Ue.open()});return function(Ue){return Ct.apply(this,arguments)}}(),ut=function(){var Ct=(0,_.Z)(function*(st){const Ue=yield void 0!==st?Me(st):ct();return void 0!==Ue&&Ue.close()});return function(Ue){return Ct.apply(this,arguments)}}(),Te=function(){var Ct=(0,_.Z)(function*(st){const Ue=yield Me(st);return!!Ue&&Ue.toggle()});return function(Ue){return Ct.apply(this,arguments)}}(),Ke=function(){var Ct=(0,_.Z)(function*(st,Ue){const lt=yield Me(Ue);return lt&&(lt.disabled=!st),lt});return function(Ue,lt){return Ct.apply(this,arguments)}}(),$e=function(){var Ct=(0,_.Z)(function*(st,Ue){const lt=yield Me(Ue);return lt&&(lt.swipeGesture=st),lt});return function(Ue,lt){return Ct.apply(this,arguments)}}(),qe=function(){var Ct=(0,_.Z)(function*(st){if(null!=st){const Ue=yield Me(st);return void 0!==Ue&&Ue.isOpen()}return void 0!==(yield ct())});return function(Ue){return Ct.apply(this,arguments)}}(),Ie=function(){var Ct=(0,_.Z)(function*(st){const Ue=yield Me(st);return!!Ue&&!Ue.disabled});return function(Ue){return Ct.apply(this,arguments)}}(),Me=function(){var Ct=(0,_.Z)(function*(st){return yield dt(),"start"===st||"end"===st?Zt(Dt=>Dt.side===st&&!Dt.disabled)||Zt(Dt=>Dt.side===st):null!=st?Zt(lt=>lt.menuId===st):Zt(lt=>!lt.disabled)||(_e.length>0?_e[0].el:void 0)});return function(Ue){return Ct.apply(this,arguments)}}(),ct=function(){var Ct=(0,_.Z)(function*(){return yield dt(),ht()});return function(){return Ct.apply(this,arguments)}}(),at=function(){var Ct=(0,_.Z)(function*(){return yield dt(),vt()});return function(){return Ct.apply(this,arguments)}}(),Vt=function(){var Ct=(0,_.Z)(function*(){return yield dt(),Ht()});return function(){return Ct.apply(this,arguments)}}(),E=(Ct,st)=>{Ee.set(Ct,st)},We=Ct=>{const st=Ct.side;_e.filter(Ue=>Ue.side===st&&Ue!==Ct).forEach(Ue=>Ue.disabled=!0)},He=function(){var Ct=(0,_.Z)(function*(st,Ue,lt){if(Ht())return!1;if(Ue){const Dt=yield ct();Dt&&st.el!==Dt&&(yield Dt.setOpen(!1,!1))}return st._setOpen(Ue,lt)});return function(Ue,lt,Dt){return Ct.apply(this,arguments)}}(),ht=()=>Zt(Ct=>Ct._isOpen),vt=()=>_e.map(Ct=>Ct.el),Ht=()=>_e.some(Ct=>Ct.isAnimating),Zt=Ct=>{const st=_e.find(Ct);if(void 0!==st)return st.el},dt=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(Ct=>new Promise(st=>(0,re.c)(Ct,st))));return E("reveal",we),E("push",ne),E("overlay",Z),"undefined"!=typeof document&&document.addEventListener("ionBackButton",Ct=>{const st=ht();st&&Ct.detail.register(P.MENU_BACK_BUTTON_PRIORITY,()=>st.close())}),{registerAnimation:E,get:Me,getMenus:at,getOpen:ct,isEnabled:Ie,swipeGesture:$e,isAnimating:Vt,isOpen:qe,enable:Ke,toggle:Te,close:ut,open:De,_getOpenSync:ht,_createAnimation:(Ct,st)=>{const Ue=Ee.get(Ct);if(!Ue)throw new Error("animation not registered");return Ue(st)},_register:Ct=>{_e.indexOf(Ct)<0&&(Ct.disabled||We(Ct),_e.push(Ct))},_unregister:Ct=>{const st=_e.indexOf(Ct);st>-1&&_e.splice(st,1)},_setOpen:He,_setActiveMenu:We}})()},9461:(nn,ot,L)=>{"use strict";L.r(ot),L.d(ot,{GESTURE_CONTROLLER:()=>_.G,createGesture:()=>we});var _=L(960);const P=(_e,De,ut,Te)=>{const Ke=re(_e)?{capture:!!Te.capture,passive:!!Te.passive}:!!Te.capture;let $e,qe;return _e.__zone_symbol__addEventListener?($e="__zone_symbol__addEventListener",qe="__zone_symbol__removeEventListener"):($e="addEventListener",qe="removeEventListener"),_e[$e](De,ut,Ke),()=>{_e[qe](De,ut,Ke)}},re=_e=>{if(void 0===ke)try{const De=Object.defineProperty({},"passive",{get:()=>{ke=!0}});_e.addEventListener("optsTest",()=>{},De)}catch(De){ke=!1}return!!ke};let ke;const Z=_e=>_e instanceof Document?_e:_e.ownerDocument,we=_e=>{let De=!1,ut=!1,Te=!0,Ke=!1;const $e=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},_e),qe=$e.canStart,Ie=$e.onWillStart,Me=$e.onStart,ct=$e.onEnd,at=$e.notCaptured,Vt=$e.onMove,E=$e.threshold,Ye=$e.passive,gt=$e.blurOnStart,We={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},He=((_e,De,ut)=>{const Te=ut*(Math.PI/180),Ke="x"===_e,$e=Math.cos(Te),qe=De*De;let Ie=0,Me=0,ct=!1,at=0;return{start(Vt,E){Ie=Vt,Me=E,at=0,ct=!0},detect(Vt,E){if(!ct)return!1;const Ye=Vt-Ie,gt=E-Me,We=Ye*Ye+gt*gt;if(We<qe)return!1;const He=Math.sqrt(We),Ge=(Ke?Ye:gt)/He;return at=Ge>$e?1:Ge<-$e?-1:0,ct=!1,!0},isGesture:()=>0!==at,getDirection:()=>at}})($e.direction,$e.threshold,$e.maxAngle),Ge=_.G.createGesture({name:_e.gestureName,priority:_e.gesturePriority,disableScroll:_e.disableScroll}),Ht=()=>{!De||(Ke=!1,Vt&&Vt(We))},Zt=()=>!(Ge&&!Ge.capture()||(De=!0,Te=!1,We.startX=We.currentX,We.startY=We.currentY,We.startTime=We.currentTime,Ie?Ie(We).then(Ct):Ct(),0)),Ct=()=>{gt&&(()=>{if("undefined"!=typeof document){const Bt=document.activeElement;null!==Bt&&Bt.blur&&Bt.blur()}})(),Me&&Me(We),Te=!0},st=()=>{De=!1,ut=!1,Ke=!1,Te=!0,Ge.release()},Ue=Bt=>{const Mt=De,Pt=Te;if(st(),Pt){if(se(We,Bt),Mt)return void(ct&&ct(We));at&&at(We)}},lt=((_e,De,ut,Te,Ke)=>{let $e,qe,Ie,Me,ct,at,Vt,E=0;const Ye=dt=>{E=Date.now()+2e3,De(dt)&&(!qe&&ut&&(qe=P(_e,"touchmove",ut,Ke)),Ie||(Ie=P(dt.target,"touchend",We,Ke)),Me||(Me=P(dt.target,"touchcancel",We,Ke)))},gt=dt=>{E>Date.now()||!De(dt)||(!at&&ut&&(at=P(Z(_e),"mousemove",ut,Ke)),Vt||(Vt=P(Z(_e),"mouseup",He,Ke)))},We=dt=>{Ge(),Te&&Te(dt)},He=dt=>{ht(),Te&&Te(dt)},Ge=()=>{qe&&qe(),Ie&&Ie(),Me&&Me(),qe=Ie=Me=void 0},ht=()=>{at&&at(),Vt&&Vt(),at=Vt=void 0},vt=()=>{Ge(),ht()},Ht=(dt=!0)=>{dt?($e||($e=P(_e,"touchstart",Ye,Ke)),ct||(ct=P(_e,"mousedown",gt,Ke))):($e&&$e(),ct&&ct(),$e=ct=void 0,vt())};return{enable:Ht,stop:vt,destroy:()=>{Ht(!1),Te=ut=De=void 0}}})($e.el,Bt=>{const Mt=Ee(Bt);return!(ut||!Te||(ge(Bt,We),We.startX=We.currentX,We.startY=We.currentY,We.startTime=We.currentTime=Mt,We.velocityX=We.velocityY=We.deltaX=We.deltaY=0,We.event=Bt,qe&&!1===qe(We))||(Ge.release(),!Ge.start()))&&(ut=!0,0===E?Zt():(He.start(We.startX,We.startY),!0))},Bt=>{De?!Ke&&Te&&(Ke=!0,se(We,Bt),requestAnimationFrame(Ht)):(se(We,Bt),He.detect(We.currentX,We.currentY)&&(!He.isGesture()||!Zt())&&Dt())},Ue,{capture:!1,passive:Ye}),Dt=()=>{st(),lt.stop(),at&&at(We)};return{enable(Bt=!0){Bt||(De&&Ue(void 0),st()),lt.enable(Bt)},destroy(){Ge.destroy(),lt.destroy()}}},se=(_e,De)=>{if(!De)return;const ut=_e.currentX,Te=_e.currentY,Ke=_e.currentTime;ge(De,_e);const $e=_e.currentX,qe=_e.currentY,Me=(_e.currentTime=Ee(De))-Ke;if(Me>0&&Me<100){const at=(qe-Te)/Me;_e.velocityX=($e-ut)/Me*.7+.3*_e.velocityX,_e.velocityY=.7*at+.3*_e.velocityY}_e.deltaX=$e-_e.startX,_e.deltaY=qe-_e.startY,_e.event=De},ge=(_e,De)=>{let ut=0,Te=0;if(_e){const Ke=_e.changedTouches;if(Ke&&Ke.length>0){const $e=Ke[0];ut=$e.clientX,Te=$e.clientY}else void 0!==_e.pageX&&(ut=_e.pageX,Te=_e.pageY)}De.currentX=ut,De.currentY=Te},Ee=_e=>_e.timeStamp||Date.now()},3150:(nn,ot,L)=>{"use strict";L.d(ot,{B:()=>mt,C:()=>Ee,H:()=>vr,a:()=>Te,b:()=>bn,c:()=>xs,e:()=>Kn,f:()=>Sr,g:()=>Bt,h:()=>_n,i:()=>Yn,j:()=>Oe,k:()=>Rn,p:()=>De,r:()=>br,s:()=>Dt,w:()=>ge});var _=L(8239);let re,ke,ae,Q=!1,Z=!1,ne=!1,we=!1,se=!1;const ge="undefined"!=typeof window?window:{},Ee=ge.CSS,_e=ge.document||{head:{}},De={$flags$:0,$resourcesUrl$:"",jmp:z=>z(),raf:z=>requestAnimationFrame(z),ael:(z,j,ce,be)=>z.addEventListener(j,ce,be),rel:(z,j,ce,be)=>z.removeEventListener(j,ce,be),ce:(z,j)=>new CustomEvent(z,j)},ut=(()=>(_e.head.attachShadow+"").indexOf("[native")>-1)(),Te=z=>Promise.resolve(z),Ke=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replace}catch(z){}return!1})(),$e=(z,j,ce,be)=>{ce&&ce.map(([Qe,Xe,Rt])=>{const At=Ie(z,Qe),Tt=qe(j,Rt),on=Me(Qe);De.ael(At,Xe,Tt,on),(j.$rmListeners$=j.$rmListeners$||[]).push(()=>De.rel(At,Xe,Tt,on))})},qe=(z,j)=>ce=>{try{256&z.$flags$?z.$lazyInstance$[j](ce):(z.$queuedListeners$=z.$queuedListeners$||[]).push([j,ce])}catch(be){Yr(be)}},Ie=(z,j)=>4&j?_e:8&j?ge:16&j?_e.body:z,Me=z=>0!=(2&z),Ye="s-id",gt="sty-id",Ge="http://www.w3.org/1999/xlink",Ht=new WeakMap,Zt=(z,j,ce)=>{let be=Ur.get(z);Ke&&ce?(be=be||new CSSStyleSheet,be.replace(j)):be=j,Ur.set(z,be)},dt=(z,j,ce,be)=>{let Qe=st(j,ce),Xe=Ur.get(Qe);if(z=11===z.nodeType?z:_e,Xe)if("string"==typeof Xe){let At,Rt=Ht.get(z=z.head||z);if(Rt||Ht.set(z,Rt=new Set),!Rt.has(Qe)){if(z.host&&(At=z.querySelector(`[${gt}="${Qe}"]`)))At.innerHTML=Xe;else{if(De.$cssShim$){At=De.$cssShim$.createHostStyle(be,Qe,Xe,!!(10&j.$flags$));const Tt=At["s-sc"];Tt&&(Qe=Tt,Rt=null)}else At=_e.createElement("style"),At.innerHTML=Xe;z.insertBefore(At,z.querySelector("link"))}Rt&&Rt.add(Qe)}}else z.adoptedStyleSheets.includes(Xe)||(z.adoptedStyleSheets=[...z.adoptedStyleSheets,Xe]);return Qe},st=(z,j)=>"sc-"+(j&&32&z.$flags$?z.$tagName$+"-"+j:z.$tagName$),Ue=z=>z.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),Dt=z=>yi.push(z),Bt=z=>Fr(z).$modeName$,Mt={},Tn=z=>"object"==(z=typeof z)||"function"===z,_n=(z,j,...ce)=>{let be=null,Qe=null,Xe=null,Rt=!1,At=!1,Tt=[];const on=Vn=>{for(let qn=0;qn<Vn.length;qn++)be=Vn[qn],Array.isArray(be)?on(be):null!=be&&"boolean"!=typeof be&&((Rt="function"!=typeof z&&!Tn(be))&&(be=String(be)),Rt&&At?Tt[Tt.length-1].$text$+=be:Tt.push(Rt?Mn(null,be):be),At=Rt)};if(on(ce),j){j.key&&(Qe=j.key),j.name&&(Xe=j.name);{const Vn=j.className||j.class;Vn&&(j.class="object"!=typeof Vn?Vn:Object.keys(Vn).filter(qn=>Vn[qn]).join(" "))}}if("function"==typeof z)return z(null===j?{}:j,Tt,Ot);const On=Mn(z,null);return On.$attrs$=j,Tt.length>0&&(On.$children$=Tt),On.$key$=Qe,On.$name$=Xe,On},Mn=(z,j)=>({$flags$:0,$tag$:z,$text$:j,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),vr={},Ot={forEach:(z,j)=>z.map(En).forEach(j),map:(z,j)=>z.map(En).map(j).map(Wn)},En=z=>({vattrs:z.$attrs$,vchildren:z.$children$,vkey:z.$key$,vname:z.$name$,vtag:z.$tag$,vtext:z.$text$}),Wn=z=>{if("function"==typeof z.vtag){const ce=Object.assign({},z.vattrs);return z.vkey&&(ce.key=z.vkey),z.vname&&(ce.name=z.vname),_n(z.vtag,ce,...z.vchildren||[])}const j=Mn(z.vtag,z.vtext);return j.$attrs$=z.vattrs,j.$children$=z.vchildren,j.$key$=z.vkey,j.$name$=z.vname,j},tn=(z,j,ce,be,Qe,Xe)=>{if(ce!==be){let Rt=Er(z,j),At=j.toLowerCase();if("class"===j){const Tt=z.classList,on=jn(ce),On=jn(be);Tt.remove(...on.filter(Vn=>Vn&&!On.includes(Vn))),Tt.add(...On.filter(Vn=>Vn&&!on.includes(Vn)))}else if("style"===j){for(const Tt in ce)(!be||null==be[Tt])&&(Tt.includes("-")?z.style.removeProperty(Tt):z.style[Tt]="");for(const Tt in be)(!ce||be[Tt]!==ce[Tt])&&(Tt.includes("-")?z.style.setProperty(Tt,be[Tt]):z.style[Tt]=be[Tt])}else if("key"!==j)if("ref"===j)be&&be(z);else if(Rt||"o"!==j[0]||"n"!==j[1]){const Tt=Tn(be);if((Rt||Tt&&null!==be)&&!Qe)try{if(z.tagName.includes("-"))z[j]=be;else{let On=null==be?"":be;"list"===j?Rt=!1:(null==ce||z[j]!=On)&&(z[j]=On)}}catch(On){}let on=!1;At!==(At=At.replace(/^xlink\:?/,""))&&(j=At,on=!0),null==be||!1===be?(!1!==be||""===z.getAttribute(j))&&(on?z.removeAttributeNS(Ge,j):z.removeAttribute(j)):(!Rt||4&Xe||Qe)&&!Tt&&(be=!0===be?"":be,on?z.setAttributeNS(Ge,j,be):z.setAttribute(j,be))}else j="-"===j[2]?j.slice(3):Er(ge,At)?At.slice(2):At[2]+j.slice(3),ce&&De.rel(z,j,ce,!1),be&&De.ael(z,j,be,!1)}},Un=/\s/,jn=z=>z?z.split(Un):[],Qn=(z,j,ce,be)=>{const Qe=11===j.$elm$.nodeType&&j.$elm$.host?j.$elm$.host:j.$elm$,Xe=z&&z.$attrs$||Mt,Rt=j.$attrs$||Mt;for(be in Xe)be in Rt||tn(Qe,be,Xe[be],void 0,ce,j.$flags$);for(be in Rt)tn(Qe,be,Xe[be],Rt[be],ce,j.$flags$)},lr=(z,j,ce,be)=>{let Rt,At,Tt,Qe=j.$children$[ce],Xe=0;if(Q||(ne=!0,"slot"===Qe.$tag$&&(re&&be.classList.add(re+"-s"),Qe.$flags$|=Qe.$children$?2:1)),null!==Qe.$text$)Rt=Qe.$elm$=_e.createTextNode(Qe.$text$);else if(1&Qe.$flags$)Rt=Qe.$elm$=_e.createTextNode("");else{if(we||(we="svg"===Qe.$tag$),Rt=Qe.$elm$=_e.createElementNS(we?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&Qe.$flags$?"slot-fb":Qe.$tag$),we&&"foreignObject"===Qe.$tag$&&(we=!1),Qn(null,Qe,we),(z=>null!=z)(re)&&Rt["s-si"]!==re&&Rt.classList.add(Rt["s-si"]=re),Qe.$children$)for(Xe=0;Xe<Qe.$children$.length;++Xe)At=lr(z,Qe,Xe,Rt),At&&Rt.appendChild(At);"svg"===Qe.$tag$?we=!1:"foreignObject"===Rt.tagName&&(we=!0)}return Rt["s-hn"]=ae,3&Qe.$flags$&&(Rt["s-sr"]=!0,Rt["s-cr"]=ke,Rt["s-sn"]=Qe.$name$||"",Tt=z&&z.$children$&&z.$children$[ce],Tt&&Tt.$tag$===Qe.$tag$&&z.$elm$&&Ar(z.$elm$,!1)),Rt},Ar=(z,j)=>{De.$flags$|=1;const ce=z.childNodes;for(let be=ce.length-1;be>=0;be--){const Qe=ce[be];Qe["s-hn"]!==ae&&Qe["s-ol"]&&(wt(Qe).insertBefore(Qe,Qt(Qe)),Qe["s-ol"].remove(),Qe["s-ol"]=void 0,ne=!0),j&&Ar(Qe,j)}De.$flags$&=-2},Dr=(z,j,ce,be,Qe,Xe)=>{let At,Rt=z["s-cr"]&&z["s-cr"].parentNode||z;for(Rt.shadowRoot&&Rt.tagName===ae&&(Rt=Rt.shadowRoot);Qe<=Xe;++Qe)be[Qe]&&(At=lr(null,ce,Qe,z),At&&(be[Qe].$elm$=At,Rt.insertBefore(At,Qt(j))))},hr=(z,j,ce,be,Qe)=>{for(;j<=ce;++j)(be=z[j])&&(Qe=be.$elm$,dr(be),Z=!0,Qe["s-ol"]?Qe["s-ol"].remove():Ar(Qe,!0),Qe.remove())},sr=(z,j)=>z.$tag$===j.$tag$&&("slot"===z.$tag$?z.$name$===j.$name$:z.$key$===j.$key$),Qt=z=>z&&z["s-ol"]||z,wt=z=>(z["s-ol"]?z["s-ol"]:z).parentNode,xr=(z,j)=>{const ce=j.$elm$=z.$elm$,be=z.$children$,Qe=j.$children$,Xe=j.$tag$,Rt=j.$text$;let At;null===Rt?(we="svg"===Xe||"foreignObject"!==Xe&&we,"slot"===Xe||Qn(z,j,we),null!==be&&null!==Qe?((z,j,ce,be)=>{let Gi,ci,Qe=0,Xe=0,Rt=0,At=0,Tt=j.length-1,on=j[0],On=j[Tt],Vn=be.length-1,qn=be[0],Rr=be[Vn];for(;Qe<=Tt&&Xe<=Vn;)if(null==on)on=j[++Qe];else if(null==On)On=j[--Tt];else if(null==qn)qn=be[++Xe];else if(null==Rr)Rr=be[--Vn];else if(sr(on,qn))xr(on,qn),on=j[++Qe],qn=be[++Xe];else if(sr(On,Rr))xr(On,Rr),On=j[--Tt],Rr=be[--Vn];else if(sr(on,Rr))("slot"===on.$tag$||"slot"===Rr.$tag$)&&Ar(on.$elm$.parentNode,!1),xr(on,Rr),z.insertBefore(on.$elm$,On.$elm$.nextSibling),on=j[++Qe],Rr=be[--Vn];else if(sr(On,qn))("slot"===on.$tag$||"slot"===Rr.$tag$)&&Ar(On.$elm$.parentNode,!1),xr(On,qn),z.insertBefore(On.$elm$,on.$elm$),On=j[--Tt],qn=be[++Xe];else{for(Rt=-1,At=Qe;At<=Tt;++At)if(j[At]&&null!==j[At].$key$&&j[At].$key$===qn.$key$){Rt=At;break}Rt>=0?(ci=j[Rt],ci.$tag$!==qn.$tag$?Gi=lr(j&&j[Xe],ce,Rt,z):(xr(ci,qn),j[Rt]=void 0,Gi=ci.$elm$),qn=be[++Xe]):(Gi=lr(j&&j[Xe],ce,Xe,z),qn=be[++Xe]),Gi&&wt(on.$elm$).insertBefore(Gi,Qt(on.$elm$))}Qe>Tt?Dr(z,null==be[Vn+1]?null:be[Vn+1].$elm$,ce,be,Xe,Vn):Xe>Vn&&hr(j,Qe,Tt)})(ce,be,j,Qe):null!==Qe?(null!==z.$text$&&(ce.textContent=""),Dr(ce,null,j,Qe,0,Qe.length-1)):null!==be&&hr(be,0,be.length-1),we&&"svg"===Xe&&(we=!1)):(At=ce["s-cr"])?At.parentNode.textContent=Rt:z.$text$!==Rt&&(ce.data=Rt)},Or=z=>{let ce,be,Qe,Xe,Rt,At,j=z.childNodes;for(be=0,Qe=j.length;be<Qe;be++)if(ce=j[be],1===ce.nodeType){if(ce["s-sr"])for(Rt=ce["s-sn"],ce.hidden=!1,Xe=0;Xe<Qe;Xe++)if(At=j[Xe].nodeType,j[Xe]["s-hn"]!==ce["s-hn"]||""!==Rt){if(1===At&&Rt===j[Xe].getAttribute("slot")){ce.hidden=!0;break}}else if(1===At||3===At&&""!==j[Xe].textContent.trim()){ce.hidden=!0;break}Or(ce)}},fn=[],Sn=z=>{let j,ce,be,Qe,Xe,Rt,At=0,Tt=z.childNodes,on=Tt.length;for(;At<on;At++){if(j=Tt[At],j["s-sr"]&&(ce=j["s-cr"])&&ce.parentNode)for(be=ce.parentNode.childNodes,Qe=j["s-sn"],Rt=be.length-1;Rt>=0;Rt--)ce=be[Rt],!ce["s-cn"]&&!ce["s-nr"]&&ce["s-hn"]!==j["s-hn"]&&(cr(ce,Qe)?(Xe=fn.find(On=>On.$nodeToRelocate$===ce),Z=!0,ce["s-sn"]=ce["s-sn"]||Qe,Xe?Xe.$slotRefNode$=j:fn.push({$slotRefNode$:j,$nodeToRelocate$:ce}),ce["s-sr"]&&fn.map(On=>{cr(On.$nodeToRelocate$,ce["s-sn"])&&(Xe=fn.find(Vn=>Vn.$nodeToRelocate$===ce),Xe&&!On.$slotRefNode$&&(On.$slotRefNode$=Xe.$slotRefNode$))})):fn.some(On=>On.$nodeToRelocate$===ce)||fn.push({$nodeToRelocate$:ce}));1===j.nodeType&&Sn(j)}},cr=(z,j)=>1===z.nodeType?null===z.getAttribute("slot")&&""===j||z.getAttribute("slot")===j:z["s-sn"]===j||""===j,dr=z=>{z.$attrs$&&z.$attrs$.ref&&z.$attrs$.ref(null),z.$children$&&z.$children$.map(dr)},Yn=z=>Fr(z).$hostElement$,Kn=(z,j,ce)=>{const be=Yn(z);return{emit:Qe=>Qr(be,j,{bubbles:!!(4&ce),composed:!!(2&ce),cancelable:!!(1&ce),detail:Qe})}},Qr=(z,j,ce)=>{const be=De.ce(j,ce);return z.dispatchEvent(be),be},dn=(z,j)=>{j&&!z.$onRenderResolve$&&j["s-p"]&&j["s-p"].push(new Promise(ce=>z.$onRenderResolve$=ce))},Ze=(z,j)=>{if(z.$flags$|=16,!(4&z.$flags$))return dn(z,z.$ancestorComponent$),xs(()=>oe(z,j));z.$flags$|=512},oe=(z,j)=>{const be=z.$lazyInstance$;let Qe;return j&&(z.$flags$|=256,z.$queuedListeners$&&(z.$queuedListeners$.map(([Xe,Rt])=>it(be,Xe,Rt)),z.$queuedListeners$=null),Qe=it(be,"componentWillLoad")),Qe=Ve(Qe,()=>it(be,"componentWillRender")),Ve(Qe,()=>Ae(z,be,j))},Ae=function(){var z=(0,_.Z)(function*(j,ce,be){const Qe=j.$hostElement$,Rt=Qe["s-rc"];be&&(z=>{const j=z.$cmpMeta$,ce=z.$hostElement$,be=j.$flags$,Xe=dt(ut&&ce.shadowRoot?ce.shadowRoot:ce.getRootNode(),j,z.$modeName$,ce);10&be&&(ce["s-sc"]=Xe,ce.classList.add(Xe+"-h"),2&be&&ce.classList.add(Xe+"-s"))})(j);nt(j,ce),De.$cssShim$&&De.$cssShim$.updateHost(Qe),Rt&&(Rt.map(Tt=>Tt()),Qe["s-rc"]=void 0);{const Tt=Qe["s-p"],on=()=>It(j);0===Tt.length?on():(Promise.all(Tt).then(on),j.$flags$|=4,Tt.length=0)}});return function(ce,be,Qe){return z.apply(this,arguments)}}(),nt=(z,j,ce)=>{try{j=j.render&&j.render(),z.$flags$&=-17,z.$flags$|=2,((z,j)=>{const ce=z.$hostElement$,be=z.$cmpMeta$,Qe=z.$vnode$||Mn(null,null),Xe=(z=>z&&z.$tag$===vr)(j)?j:_n(null,null,j);if(ae=ce.tagName,be.$attrsToReflect$&&(Xe.$attrs$=Xe.$attrs$||{},be.$attrsToReflect$.map(([Rt,At])=>Xe.$attrs$[At]=ce[Rt])),Xe.$tag$=null,Xe.$flags$|=4,z.$vnode$=Xe,Xe.$elm$=Qe.$elm$=ce.shadowRoot||ce,re=ce["s-sc"],ke=ce["s-cr"],Q=ut&&0!=(1&be.$flags$),Z=!1,xr(Qe,Xe),De.$flags$|=1,ne){Sn(Xe.$elm$);let Rt,At,Tt,on,On,Vn,qn=0;for(;qn<fn.length;qn++)Rt=fn[qn],At=Rt.$nodeToRelocate$,At["s-ol"]||(Tt=_e.createTextNode(""),Tt["s-nr"]=At,At.parentNode.insertBefore(At["s-ol"]=Tt,At));for(qn=0;qn<fn.length;qn++)if(Rt=fn[qn],At=Rt.$nodeToRelocate$,Rt.$slotRefNode$){for(on=Rt.$slotRefNode$.parentNode,On=Rt.$slotRefNode$.nextSibling,Tt=At["s-ol"];Tt=Tt.previousSibling;)if(Vn=Tt["s-nr"],Vn&&Vn["s-sn"]===At["s-sn"]&&on===Vn.parentNode&&(Vn=Vn.nextSibling,!Vn||!Vn["s-nr"])){On=Vn;break}(!On&&on!==At.parentNode||At.nextSibling!==On)&&At!==On&&(!At["s-hn"]&&At["s-ol"]&&(At["s-hn"]=At["s-ol"].parentNode.nodeName),on.insertBefore(At,On))}else 1===At.nodeType&&(At.hidden=!0)}Z&&Or(Xe.$elm$),De.$flags$&=-2,fn.length=0})(z,j)}catch(be){Yr(be,z.$hostElement$)}return null},It=z=>{const ce=z.$hostElement$,Qe=z.$lazyInstance$,Xe=z.$ancestorComponent$;64&z.$flags$?it(Qe,"componentDidUpdate"):(z.$flags$|=64,ve(ce),it(Qe,"componentDidLoad"),z.$onReadyResolve$(ce),Xe||Le()),z.$onInstanceResolve$(ce),z.$onRenderResolve$&&(z.$onRenderResolve$(),z.$onRenderResolve$=void 0),512&z.$flags$&&pi(()=>Ze(z,!1)),z.$flags$&=-517},Oe=z=>{{const j=Fr(z),ce=j.$hostElement$.isConnected;return ce&&2==(18&j.$flags$)&&Ze(j,!1),ce}},Le=z=>{ve(_e.documentElement),pi(()=>Qr(ge,"appload",{detail:{namespace:"ionic"}}))},it=(z,j,ce)=>{if(z&&z[j])try{return z[j](ce)}catch(be){Yr(be)}},Ve=(z,j)=>z&&z.then?z.then(j):j(),ve=z=>z.classList.add("hydrated"),bt=(z,j,ce,be,Qe,Xe,Rt)=>{let At,Tt,on,On;if(1===Xe.nodeType){for(At=Xe.getAttribute("c-id"),At&&(Tt=At.split("."),(Tt[0]===Rt||"0"===Tt[0])&&(on={$flags$:0,$hostId$:Tt[0],$nodeId$:Tt[1],$depth$:Tt[2],$index$:Tt[3],$tag$:Xe.tagName.toLowerCase(),$elm$:Xe,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},j.push(on),Xe.removeAttribute("c-id"),z.$children$||(z.$children$=[]),z.$children$[on.$index$]=on,z=on,be&&"0"===on.$depth$&&(be[on.$index$]=on.$elm$))),On=Xe.childNodes.length-1;On>=0;On--)bt(z,j,ce,be,Qe,Xe.childNodes[On],Rt);if(Xe.shadowRoot)for(On=Xe.shadowRoot.childNodes.length-1;On>=0;On--)bt(z,j,ce,be,Qe,Xe.shadowRoot.childNodes[On],Rt)}else if(8===Xe.nodeType)Tt=Xe.nodeValue.split("."),(Tt[1]===Rt||"0"===Tt[1])&&(At=Tt[0],on={$flags$:0,$hostId$:Tt[1],$nodeId$:Tt[2],$depth$:Tt[3],$index$:Tt[4],$elm$:Xe,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===At?(on.$elm$=Xe.nextSibling,on.$elm$&&3===on.$elm$.nodeType&&(on.$text$=on.$elm$.textContent,j.push(on),Xe.remove(),z.$children$||(z.$children$=[]),z.$children$[on.$index$]=on,be&&"0"===on.$depth$&&(be[on.$index$]=on.$elm$))):on.$hostId$===Rt&&("s"===At?(on.$tag$="slot",Xe["s-sn"]=Tt[5]?on.$name$=Tt[5]:"",Xe["s-sr"]=!0,be&&(on.$elm$=_e.createElement(on.$tag$),on.$name$&&on.$elm$.setAttribute("name",on.$name$),Xe.parentNode.insertBefore(on.$elm$,Xe),Xe.remove(),"0"===on.$depth$&&(be[on.$index$]=on.$elm$)),ce.push(on),z.$children$||(z.$children$=[]),z.$children$[on.$index$]=on):"r"===At&&(be?Xe.remove():(Qe["s-cr"]=Xe,Xe["s-cn"]=!0))));else if(z&&"style"===z.$tag$){const Vn=Mn(null,Xe.textContent);Vn.$elm$=Xe,Vn.$index$="0",z.$children$=[Vn]}},Kt=(z,j)=>{if(1===z.nodeType){let ce=0;for(;ce<z.childNodes.length;ce++)Kt(z.childNodes[ce],j);if(z.shadowRoot)for(ce=0;ce<z.shadowRoot.childNodes.length;ce++)Kt(z.shadowRoot.childNodes[ce],j)}else if(8===z.nodeType){const ce=z.nodeValue.split(".");"o"===ce[0]&&(j.set(ce[1]+"."+ce[2],z),z.nodeValue="",z["s-en"]=ce[3])}},pn=(z,j,ce)=>{if(j.$members$){z.watchers&&(j.$watchers$=z.watchers);const be=Object.entries(j.$members$),Qe=z.prototype;if(be.map(([Xe,[Rt]])=>{31&Rt||2&ce&&32&Rt?Object.defineProperty(Qe,Xe,{get(){return((z,j)=>Fr(this).$instanceValues$.get(j))(0,Xe)},set(At){((z,j,ce,be)=>{const Qe=Fr(z),Xe=Qe.$hostElement$,Rt=Qe.$instanceValues$.get(j),At=Qe.$flags$,Tt=Qe.$lazyInstance$;if(ce=((z,j)=>null==z||Tn(z)?z:4&j?"false"!==z&&(""===z||!!z):2&j?parseFloat(z):1&j?String(z):z)(ce,be.$members$[j][0]),(!(8&At)||void 0===Rt)&&ce!==Rt&&(Qe.$instanceValues$.set(j,ce),Tt)){if(be.$watchers$&&128&At){const on=be.$watchers$[j];on&&on.map(On=>{try{Tt[On](ce,Rt,j)}catch(Vn){Yr(Vn,Xe)}})}2==(18&At)&&Ze(Qe,!1)}})(this,Xe,At,j)},configurable:!0,enumerable:!0}):1&ce&&64&Rt&&Object.defineProperty(Qe,Xe,{value(...At){const Tt=Fr(this);return Tt.$onInstancePromise$.then(()=>Tt.$lazyInstance$[Xe](...At))}})}),1&ce){const Xe=new Map;Qe.attributeChangedCallback=function(Rt,At,Tt){De.jmp(()=>{const on=Xe.get(Rt);this[on]=(null!==Tt||"boolean"!=typeof this[on])&&Tt})},z.observedAttributes=be.filter(([Rt,At])=>15&At[0]).map(([Rt,At])=>{const Tt=At[1]||Rt;return Xe.set(Tt,Rt),512&At[0]&&j.$attrsToReflect$.push([Rt,Tt]),Tt})}}return z},In=function(){var z=(0,_.Z)(function*(j,ce,be,Qe,Xe){if(0==(32&ce.$flags$)){{if(ce.$flags$|=32,(Xe=Zn(be)).then){const on=()=>{};Xe=yield Xe,on()}Xe.isProxied||(be.$watchers$=Xe.watchers,pn(Xe,be,2),Xe.isProxied=!0);const Tt=()=>{};ce.$flags$|=8;try{new Xe(ce)}catch(on){Yr(on)}ce.$flags$&=-9,ce.$flags$|=128,Tt(),mr(ce.$lazyInstance$)}if(Xe.style){let Tt=Xe.style;"string"!=typeof Tt&&(Tt=Tt[ce.$modeName$=(z=>yi.map(j=>j(z)).find(j=>!!j))(j)]);const on=st(be,ce.$modeName$);if(!Ur.has(on)){const On=()=>{};8&be.$flags$&&(Tt=yield L.e(8810).then(L.bind(L,8810)).then(Vn=>Vn.scopeCss(Tt,on,!1))),Zt(on,Tt,!!(1&be.$flags$)),On()}}}const Rt=ce.$ancestorComponent$,At=()=>Ze(ce,!0);Rt&&Rt["s-rc"]?Rt["s-rc"].push(At):At()});return function(ce,be,Qe,Xe,Rt){return z.apply(this,arguments)}}(),mr=z=>{it(z,"connectedCallback")},Gt=z=>{const j=z["s-cr"]=_e.createComment("");j["s-cn"]=!0,z.insertBefore(j,z.firstChild)},bn=(z,j={})=>{const be=[],Qe=j.exclude||[],Xe=ge.customElements,Rt=_e.head,At=Rt.querySelector("meta[charset]"),Tt=_e.createElement("style"),on=[],On=_e.querySelectorAll(`[${gt}]`);let Vn,qn=!0,Rr=0;for(Object.assign(De,j),De.$resourcesUrl$=new URL(j.resourcesUrl||"./",_e.baseURI).href,De.$flags$|=2;Rr<On.length;Rr++)Zt(On[Rr].getAttribute(gt),Ue(On[Rr].innerHTML),!0);z.map(Gi=>Gi[1].map(ci=>{const Mi={$flags$:ci[0],$tagName$:ci[1],$members$:ci[2],$listeners$:ci[3]};Mi.$members$=ci[2],Mi.$listeners$=ci[3],Mi.$attrsToReflect$=[],Mi.$watchers$={},!ut&&1&Mi.$flags$&&(Mi.$flags$|=8);const vi=Mi.$tagName$,Rs=class extends HTMLElement{constructor(rs){super(rs),Lr(rs=this,Mi),1&Mi.$flags$&&(ut?rs.attachShadow({mode:"open",delegatesFocus:!!(16&Mi.$flags$)}):"shadowRoot"in rs||(rs.shadowRoot=rs))}connectedCallback(){Vn&&(clearTimeout(Vn),Vn=null),qn?on.push(this):De.jmp(()=>(z=>{if(0==(1&De.$flags$)){const j=Fr(z),ce=j.$cmpMeta$,be=()=>{};if(1&j.$flags$)$e(z,j,ce.$listeners$),mr(j.$lazyInstance$);else{let Qe;if(j.$flags$|=1,Qe=z.getAttribute(Ye),Qe){if(ut&&1&ce.$flags$){const Xe=dt(z.shadowRoot,ce,z.getAttribute("s-mode"));z.classList.remove(Xe+"-h",Xe+"-s")}((z,j,ce,be)=>{const Xe=z.shadowRoot,Rt=[],Tt=Xe?[]:null,on=be.$vnode$=Mn(j,null);De.$orgLocNodes$||Kt(_e.body,De.$orgLocNodes$=new Map),z[Ye]=ce,z.removeAttribute(Ye),bt(on,Rt,[],Tt,z,z,ce),Rt.map(On=>{const Vn=On.$hostId$+"."+On.$nodeId$,qn=De.$orgLocNodes$.get(Vn),Rr=On.$elm$;qn&&ut&&""===qn["s-en"]&&qn.parentNode.insertBefore(Rr,qn.nextSibling),Xe||(Rr["s-hn"]=j,qn&&(Rr["s-ol"]=qn,Rr["s-ol"]["s-nr"]=Rr)),De.$orgLocNodes$.delete(Vn)}),Xe&&Tt.map(On=>{On&&Xe.appendChild(On)})})(z,ce.$tagName$,Qe,j)}Qe||12&ce.$flags$&&Gt(z);{let Xe=z;for(;Xe=Xe.parentNode||Xe.host;)if(1===Xe.nodeType&&Xe.hasAttribute("s-id")&&Xe["s-p"]||Xe["s-p"]){dn(j,j.$ancestorComponent$=Xe);break}}ce.$members$&&Object.entries(ce.$members$).map(([Xe,[Rt]])=>{if(31&Rt&&z.hasOwnProperty(Xe)){const At=z[Xe];delete z[Xe],z[Xe]=At}}),pi(()=>In(z,j,ce))}be()}})(this))}disconnectedCallback(){De.jmp(()=>(z=>{if(0==(1&De.$flags$)){const j=Fr(z),ce=j.$lazyInstance$;j.$rmListeners$&&(j.$rmListeners$.map(be=>be()),j.$rmListeners$=void 0),De.$cssShim$&&De.$cssShim$.removeHost(z),it(ce,"disconnectedCallback")}})(this))}componentOnReady(){return Fr(this).$onReadyPromise$}};Mi.$lazyBundleId$=Gi[0],!Qe.includes(vi)&&!Xe.get(vi)&&(be.push(vi),Xe.define(vi,pn(Rs,Mi,1)))})),Tt.innerHTML=be+"{visibility:hidden}.hydrated{visibility:inherit}",Tt.setAttribute("data-styles",""),Rt.insertBefore(Tt,At?At.nextSibling:Rt.firstChild),qn=!1,on.length?on.map(Gi=>Gi.connectedCallback()):De.jmp(()=>Vn=setTimeout(Le,30))},Rn=z=>{const j=new URL(z,De.$resourcesUrl$);return j.origin!==ge.location.origin?j.href:j.pathname},cn=new WeakMap,Fr=z=>cn.get(z),br=(z,j)=>cn.set(j.$lazyInstance$=z,j),Lr=(z,j)=>{const ce={$flags$:0,$hostElement$:z,$cmpMeta$:j,$instanceValues$:new Map};return ce.$onInstancePromise$=new Promise(be=>ce.$onInstanceResolve$=be),ce.$onReadyPromise$=new Promise(be=>ce.$onReadyResolve$=be),z["s-p"]=[],z["s-rc"]=[],$e(z,ce,j.$listeners$),cn.set(z,ce)},Er=(z,j)=>j in z,Yr=(z,j)=>(0,console.error)(z,j),ns=new Map,Zn=(z,j,ce)=>{const be=z.$tagName$.replace(/-/g,"_"),Qe=z.$lazyBundleId$,Xe=ns.get(Qe);return Xe?Xe[be]:L(863)(`./${Qe}.entry.js`).then(Rt=>(ns.set(Qe,Rt),Rt[be]),Yr)},Ur=new Map,yi=[],Kr=[],ys=[],Br=(z,j)=>ce=>{z.push(ce),se||(se=!0,j&&4&De.$flags$?pi(Hr):De.raf(Hr))},Yi=z=>{for(let j=0;j<z.length;j++)try{z[j](performance.now())}catch(ce){Yr(ce)}z.length=0},Hr=()=>{Yi(Kr),Yi(ys),(se=Kr.length>0)&&De.raf(Hr)},pi=z=>Te().then(z),Sr=Br(Kr,!1),xs=Br(ys,!0),mt={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},4425:(nn,ot,L)=>{"use strict";L.d(ot,{L:()=>ke,a:()=>ae,b:()=>Q,c:()=>Z,d:()=>ne,e:()=>E,g:()=>We,l:()=>at,s:()=>Ye,t:()=>ge});var _=L(8239),P=L(3150),re=L(1567);const ke="ionViewWillEnter",ae="ionViewDidEnter",Q="ionViewWillLeave",Z="ionViewDidLeave",ne="ionViewWillUnload",ge=He=>new Promise((Ge,ht)=>{(0,P.c)(()=>{Ee(He),_e(He).then(vt=>{vt.animation&&vt.animation.destroy(),De(He),Ge(vt)},vt=>{De(He),ht(vt)})})}),Ee=He=>{const Ge=He.enteringEl,ht=He.leavingEl;gt(Ge,ht,He.direction),He.showGoBack?Ge.classList.add("can-go-back"):Ge.classList.remove("can-go-back"),Ye(Ge,!1),Ge.style.setProperty("pointer-events","none"),ht&&(Ye(ht,!1),ht.style.setProperty("pointer-events","none"))},_e=function(){var He=(0,_.Z)(function*(Ge){const ht=yield ut(Ge);return ht&&P.B.isBrowser?Te(ht,Ge):Ke(Ge)});return function(ht){return He.apply(this,arguments)}}(),De=He=>{const Ge=He.enteringEl,ht=He.leavingEl;Ge.classList.remove("ion-page-invisible"),Ge.style.removeProperty("pointer-events"),void 0!==ht&&(ht.classList.remove("ion-page-invisible"),ht.style.removeProperty("pointer-events"))},ut=function(){var He=(0,_.Z)(function*(Ge){return Ge.leavingEl&&Ge.animated&&0!==Ge.duration?Ge.animationBuilder?Ge.animationBuilder:"ios"===Ge.mode?(yield Promise.resolve().then(L.bind(L,7689))).iosTransitionAnimation:(yield Promise.resolve().then(L.bind(L,5392))).mdTransitionAnimation:void 0});return function(ht){return He.apply(this,arguments)}}(),Te=function(){var He=(0,_.Z)(function*(Ge,ht){yield $e(ht,!0);const vt=Ge(ht.baseEl,ht);Me(ht.enteringEl,ht.leavingEl);const Ht=yield Ie(vt,ht);return ht.progressCallback&&ht.progressCallback(void 0),Ht&&ct(ht.enteringEl,ht.leavingEl),{hasCompleted:Ht,animation:vt}});return function(ht,vt){return He.apply(this,arguments)}}(),Ke=function(){var He=(0,_.Z)(function*(Ge){const ht=Ge.enteringEl,vt=Ge.leavingEl;return yield $e(Ge,!1),Me(ht,vt),ct(ht,vt),{hasCompleted:!0}});return function(ht){return He.apply(this,arguments)}}(),$e=function(){var He=(0,_.Z)(function*(Ge,ht){const Ht=(void 0!==Ge.deepWait?Ge.deepWait:ht)?[E(Ge.enteringEl),E(Ge.leavingEl)]:[Vt(Ge.enteringEl),Vt(Ge.leavingEl)];yield Promise.all(Ht),yield qe(Ge.viewIsReady,Ge.enteringEl)});return function(ht,vt){return He.apply(this,arguments)}}(),qe=function(){var He=(0,_.Z)(function*(Ge,ht){Ge&&(yield Ge(ht))});return function(ht,vt){return He.apply(this,arguments)}}(),Ie=(He,Ge)=>{const ht=Ge.progressCallback,vt=new Promise(Ht=>{He.onFinish(Zt=>Ht(1===Zt))});return ht?(He.progressStart(!0),ht(He)):He.play(),vt},Me=(He,Ge)=>{at(Ge,Q),at(He,ke)},ct=(He,Ge)=>{at(He,ae),at(Ge,Z)},at=(He,Ge)=>{if(He){const ht=new CustomEvent(Ge,{bubbles:!1,cancelable:!1});He.dispatchEvent(ht)}},Vt=He=>He?new Promise(Ge=>(0,re.c)(He,Ge)):Promise.resolve(),E=function(){var He=(0,_.Z)(function*(Ge){const ht=Ge;if(ht){if(null!=ht.componentOnReady&&null!=(yield ht.componentOnReady()))return;yield Promise.all(Array.from(ht.children).map(E))}});return function(ht){return He.apply(this,arguments)}}(),Ye=(He,Ge)=>{Ge?(He.setAttribute("aria-hidden","true"),He.classList.add("ion-page-hidden")):(He.hidden=!1,He.removeAttribute("aria-hidden"),He.classList.remove("ion-page-hidden"))},gt=(He,Ge,ht)=>{void 0!==He&&(He.style.zIndex="back"===ht?"99":"101"),void 0!==Ge&&(Ge.style.zIndex="100")},We=He=>He.classList.contains("ion-page")?He:He.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||He},7585:(nn,ot,L)=>{"use strict";L.d(ot,{a:()=>re,b:()=>Ht,c:()=>E,g:()=>P,i:()=>Zt});var _=L(3150);const P=dt=>ke(dt),re=(dt,Ct)=>("string"==typeof dt&&(Ct=dt,dt=void 0),P(dt).includes(Ct)),ke=(dt=window)=>{if(void 0===dt)return[];dt.Ionic=dt.Ionic||{};let Ct=dt.Ionic.platforms;return null==Ct&&(Ct=dt.Ionic.platforms=ae(dt),Ct.forEach(st=>dt.document.documentElement.classList.add(`plt-${st}`))),Ct},ae=dt=>Object.keys(at).filter(Ct=>at[Ct](dt)),Z=dt=>!!(Me(dt,/iPad/i)||Me(dt,/Macintosh/i)&&De(dt)),se=dt=>Me(dt,/android|sink/i),De=dt=>ct(dt,"(any-pointer:coarse)"),Te=dt=>Ke(dt)||$e(dt),Ke=dt=>!!(dt.cordova||dt.phonegap||dt.PhoneGap),$e=dt=>{const Ct=dt.Capacitor;return!(!Ct||!Ct.isNative)},Me=(dt,Ct)=>Ct.test(dt.navigator.userAgent),ct=(dt,Ct)=>dt.matchMedia(Ct).matches,at={ipad:Z,iphone:dt=>Me(dt,/iPhone/i),ios:dt=>Me(dt,/iPhone|iPod/i)||Z(dt),android:se,phablet:dt=>{const Ct=dt.innerWidth,st=dt.innerHeight,Ue=Math.min(Ct,st),lt=Math.max(Ct,st);return Ue>390&&Ue<520&&lt>620&&lt<800},tablet:dt=>{const Ct=dt.innerWidth,st=dt.innerHeight,Ue=Math.min(Ct,st),lt=Math.max(Ct,st);return Z(dt)||(dt=>se(dt)&&!Me(dt,/mobile/i))(dt)||Ue>460&&Ue<820&&lt>780&&lt<1400},cordova:Ke,capacitor:$e,electron:dt=>Me(dt,/electron/i),pwa:dt=>!(!dt.matchMedia("(display-mode: standalone)").matches&&!dt.navigator.standalone),mobile:De,mobileweb:dt=>De(dt)&&!Te(dt),desktop:dt=>!De(dt),hybrid:Te};class Vt{constructor(){this.m=new Map}reset(Ct){this.m=new Map(Object.entries(Ct))}get(Ct,st){const Ue=this.m.get(Ct);return void 0!==Ue?Ue:st}getBoolean(Ct,st=!1){const Ue=this.m.get(Ct);return void 0===Ue?st:"string"==typeof Ue?"true"===Ue:!!Ue}getNumber(Ct,st){const Ue=parseFloat(this.m.get(Ct));return isNaN(Ue)?void 0!==st?st:NaN:Ue}set(Ct,st){this.m.set(Ct,st)}}const E=new Vt,ht="ionic-persist-config";let vt;const Ht=dt=>dt&&(0,_.g)(dt)||vt,Zt=(dt={})=>{if("undefined"==typeof window)return;const Ct=window.document,st=window,Ue=st.Ionic=st.Ionic||{};ke(st);const lt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(dt=>{try{const Ct=dt.sessionStorage.getItem(ht);return null!==Ct?JSON.parse(Ct):{}}catch(Ct){return{}}})(st)),{persistConfig:!1}),Ue.config),(dt=>{const Ct={};return dt.location.search.slice(1).split("&").map(st=>st.split("=")).map(([st,Ue])=>[decodeURIComponent(st),decodeURIComponent(Ue)]).filter(([st])=>((dt,Ct)=>dt.substr(0,Ct.length)===Ct)(st,"ionic:")).map(([st,Ue])=>[st.slice("ionic:".length),Ue]).forEach(([st,Ue])=>{Ct[st]=Ue}),Ct})(st)),dt);E.reset(lt),E.getBoolean("persistConfig")&&((dt,Ct)=>{try{dt.sessionStorage.setItem(ht,JSON.stringify(Ct))}catch(st){return}})(st,lt),Ue.config=E,Ue.mode=vt=E.get("mode",Ct.documentElement.getAttribute("mode")||(re(st,"ios")?"ios":"md")),E.set("mode",vt),Ct.documentElement.setAttribute("mode",vt),Ct.documentElement.classList.add(vt),E.getBoolean("_testing")&&E.set("animated",!1);const Dt=Mt=>Mt.tagName&&Mt.tagName.startsWith("ION-"),Bt=Mt=>["ios","md"].includes(Mt);(0,_.s)(Mt=>{for(;Mt;){const Pt=Mt.mode||Mt.getAttribute("mode");if(Pt){if(Bt(Pt))return Pt;Dt(Mt)&&console.warn('Invalid ionic mode: "'+Pt+'", expected: "ios" or "md"')}Mt=Mt.parentElement}return vt})}},7689:(nn,ot,L)=>{"use strict";L.r(ot),L.d(ot,{iosTransitionAnimation:()=>Ee,shadow:()=>Q});var _=L(7235),P=L(4425);L(3150);const ae=_e=>document.querySelector(`${_e}.ion-cloned-element`),Q=_e=>_e.shadowRoot||_e,Z=_e=>{const De="ION-TABS"===_e.tagName?_e:_e.querySelector("ion-tabs"),ut="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=De){const Te=De.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Te?Te.querySelector(ut):null}return _e.querySelector(ut)},ne=(_e,De)=>{const ut="ION-TABS"===_e.tagName?_e:_e.querySelector("ion-tabs");let Te=[];if(null!=ut){const Ke=ut.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=Ke&&(Te=Ke.querySelectorAll("ion-buttons"))}else Te=_e.querySelectorAll("ion-buttons");for(const Ke of Te){const $e=Ke.closest("ion-header"),qe=$e&&!$e.classList.contains("header-collapse-condense-inactive"),Ie=Ke.querySelector("ion-back-button"),Me=Ke.classList.contains("buttons-collapse"),ct="start"===Ke.slot||""===Ke.slot;if(null!==Ie&&ct&&(Me&&qe&&De||!Me))return Ie}return null},se=(_e,De,ut,Te,Ke,$e)=>{const qe=De?`calc(100% - ${$e.right+4}px)`:$e.left-4+"px",Ie=De?"7px":"-7px",Me=De?"-4px":"4px",ct=De?"-4px":"4px",at=De?"right":"left",Vt=De?"left":"right",gt=ut?[{offset:0,opacity:1,transform:`translate3d(${Me}, ${$e.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Ie}, ${Ke.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${Ie}, ${Ke.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${Me}, ${$e.top-46}px, 0) scale(1)`}],Ge=ut?[{offset:0,opacity:1,transform:`translate3d(${ct}, ${$e.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${ct}, ${$e.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${ct}, ${$e.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${ct}, ${$e.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${ct}, ${$e.top-46}px, 0) scale(1)`}],ht=(0,_.c)(),vt=(0,_.c)(),Ht=ae("ion-back-button"),Zt=Q(Ht).querySelector(".button-text"),dt=Q(Ht).querySelector("ion-icon");Ht.text=Te.text,Ht.mode=Te.mode,Ht.icon=Te.icon,Ht.color=Te.color,Ht.disabled=Te.disabled,Ht.style.setProperty("display","block"),Ht.style.setProperty("position","fixed"),vt.addElement(dt),ht.addElement(Zt),ht.beforeStyles({"transform-origin":`${at} center`}).beforeAddWrite(()=>{Te.style.setProperty("display","none"),Ht.style.setProperty(at,qe)}).afterAddWrite(()=>{Te.style.setProperty("display",""),Ht.style.setProperty("display","none"),Ht.style.removeProperty(at)}).keyframes(gt),vt.beforeStyles({"transform-origin":`${Vt} center`}).keyframes(Ge),_e.addAnimation([ht,vt])},ge=(_e,De,ut,Te,Ke,$e)=>{const qe=De?`calc(100% - ${Ke.right}px)`:`${Ke.left}px`,Ie=De?"-18px":"18px",Me=De?"right":"left",Vt=ut?[{offset:0,opacity:0,transform:`translate3d(${Ie}, ${$e.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${Ke.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${Ke.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Ie}, ${$e.top-4}px, 0) scale(0.5)`}],E=ae("ion-title"),Ye=(0,_.c)();E.innerText=Te.innerText,E.size=Te.size,E.color=Te.color,Ye.addElement(E),Ye.beforeStyles({"transform-origin":`${Me} center`,height:"46px",display:"",position:"relative",[Me]:qe}).beforeAddWrite(()=>{Te.style.setProperty("display","none")}).afterAddWrite(()=>{Te.style.setProperty("display",""),E.style.setProperty("display","none")}).keyframes(Vt),_e.addAnimation(Ye)},Ee=(_e,De)=>{try{const ut="cubic-bezier(0.32,0.72,0,1)",Te="opacity",Ke="transform",$e="0%",qe=.8,Ie="rtl"===_e.ownerDocument.dir,Me=Ie?"-99.5%":"99.5%",ct=Ie?"33%":"-33%",at=De.enteringEl,Vt=De.leavingEl,E="back"===De.direction,Ye=at.querySelector(":scope > ion-content"),gt=at.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),We=at.querySelectorAll(":scope > ion-header > ion-toolbar"),He=(0,_.c)(),Ge=(0,_.c)();if(He.addElement(at).duration(De.duration||540).easing(De.easing||ut).fill("both").beforeRemoveClass("ion-page-invisible"),Vt&&_e){const Zt=(0,_.c)();Zt.addElement(_e),He.addAnimation(Zt)}if(Ye||0!==We.length||0!==gt.length?(Ge.addElement(Ye),Ge.addElement(gt)):Ge.addElement(at.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),He.addAnimation(Ge),E?Ge.beforeClearStyles([Te]).fromTo("transform",`translateX(${ct})`,`translateX(${$e})`).fromTo(Te,qe,1):Ge.beforeClearStyles([Te]).fromTo("transform",`translateX(${Me})`,`translateX(${$e})`),Ye){const Zt=Q(Ye).querySelector(".transition-effect");if(Zt){const dt=Zt.querySelector(".transition-cover"),Ct=Zt.querySelector(".transition-shadow"),st=(0,_.c)(),Ue=(0,_.c)(),lt=(0,_.c)();st.addElement(Zt).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Ue.addElement(dt).beforeClearStyles([Te]).fromTo(Te,0,.1),lt.addElement(Ct).beforeClearStyles([Te]).fromTo(Te,.03,.7),st.addAnimation([Ue,lt]),Ge.addAnimation([st])}}const ht=at.querySelector("ion-header.header-collapse-condense"),{forward:vt,backward:Ht}=((_e,De,ut,Te,Ke)=>{const $e=ne(Te,ut),qe=Z(Ke),Ie=Z(Te),Me=ne(Ke,ut),ct=null!==$e&&null!==qe&&!ut,at=null!==Ie&&null!==Me&&ut;if(ct){const Vt=qe.getBoundingClientRect(),E=$e.getBoundingClientRect();ge(_e,De,ut,qe,Vt,E),se(_e,De,ut,$e,Vt,E)}else if(at){const Vt=Ie.getBoundingClientRect(),E=Me.getBoundingClientRect();ge(_e,De,ut,Ie,Vt,E),se(_e,De,ut,Me,Vt,E)}return{forward:ct,backward:at}})(He,Ie,E,at,Vt);if(We.forEach(Zt=>{const dt=(0,_.c)();dt.addElement(Zt),He.addAnimation(dt);const Ct=(0,_.c)();Ct.addElement(Zt.querySelector("ion-title"));const st=(0,_.c)(),Ue=Array.from(Zt.querySelectorAll("ion-buttons,[menuToggle]")),lt=Zt.closest("ion-header"),Dt=lt&&lt.classList.contains("header-collapse-condense-inactive");let Bt;Bt=Ue.filter(E?Tn=>{const _n=Tn.classList.contains("buttons-collapse");return _n&&!Dt||!_n}:Tn=>!Tn.classList.contains("buttons-collapse")),st.addElement(Bt);const Mt=(0,_.c)();Mt.addElement(Zt.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const Pt=(0,_.c)();Pt.addElement(Q(Zt).querySelector(".toolbar-background"));const gn=(0,_.c)(),kn=Zt.querySelector("ion-back-button");if(kn&&gn.addElement(kn),dt.addAnimation([Ct,st,Mt,Pt,gn]),st.fromTo(Te,.01,1),Mt.fromTo(Te,.01,1),E)Dt||Ct.fromTo("transform",`translateX(${ct})`,`translateX(${$e})`).fromTo(Te,.01,1),Mt.fromTo("transform",`translateX(${ct})`,`translateX(${$e})`),gn.fromTo(Te,.01,1);else if(ht||Ct.fromTo("transform",`translateX(${Me})`,`translateX(${$e})`).fromTo(Te,.01,1),Mt.fromTo("transform",`translateX(${Me})`,`translateX(${$e})`),Pt.beforeClearStyles([Te,"transform"]),(null==lt?void 0:lt.translucent)?Pt.fromTo("transform",Ie?"translateX(-100%)":"translateX(100%)","translateX(0px)"):Pt.fromTo(Te,.01,"var(--opacity)"),vt||gn.fromTo(Te,.01,1),kn&&!vt){const _n=(0,_.c)();_n.addElement(Q(kn).querySelector(".button-text")).fromTo("transform",Ie?"translateX(-100px)":"translateX(100px)","translateX(0px)"),dt.addAnimation(_n)}}),Vt){const Zt=(0,_.c)(),dt=Vt.querySelector(":scope > ion-content"),Ct=Vt.querySelectorAll(":scope > ion-header > ion-toolbar"),st=Vt.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(dt||0!==Ct.length||0!==st.length?(Zt.addElement(dt),Zt.addElement(st)):Zt.addElement(Vt.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),He.addAnimation(Zt),E){Zt.beforeClearStyles([Te]).fromTo("transform",`translateX(${$e})`,Ie?"translateX(-100%)":"translateX(100%)");const Ue=(0,P.g)(Vt);He.afterAddWrite(()=>{"normal"===He.getDirection()&&Ue.style.setProperty("display","none")})}else Zt.fromTo("transform",`translateX(${$e})`,`translateX(${ct})`).fromTo(Te,1,qe);if(dt){const Ue=Q(dt).querySelector(".transition-effect");if(Ue){const lt=Ue.querySelector(".transition-cover"),Dt=Ue.querySelector(".transition-shadow"),Bt=(0,_.c)(),Mt=(0,_.c)(),Pt=(0,_.c)();Bt.addElement(Ue).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Mt.addElement(lt).beforeClearStyles([Te]).fromTo(Te,.1,0),Pt.addElement(Dt).beforeClearStyles([Te]).fromTo(Te,.7,.03),Bt.addAnimation([Mt,Pt]),Zt.addAnimation([Bt])}}Ct.forEach(Ue=>{const lt=(0,_.c)();lt.addElement(Ue);const Dt=(0,_.c)();Dt.addElement(Ue.querySelector("ion-title"));const Bt=(0,_.c)(),Mt=Ue.querySelectorAll("ion-buttons,[menuToggle]"),Pt=Ue.closest("ion-header"),gn=Pt&&Pt.classList.contains("header-collapse-condense-inactive"),kn=Array.from(Mt).filter(Ot=>{const En=Ot.classList.contains("buttons-collapse");return En&&!gn||!En});Bt.addElement(kn);const Tn=(0,_.c)(),_n=Ue.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");_n.length>0&&Tn.addElement(_n);const Mn=(0,_.c)();Mn.addElement(Q(Ue).querySelector(".toolbar-background"));const vr=(0,_.c)(),ur=Ue.querySelector("ion-back-button");if(ur&&vr.addElement(ur),lt.addAnimation([Dt,Bt,Tn,vr,Mn]),He.addAnimation(lt),vr.fromTo(Te,.99,0),Bt.fromTo(Te,.99,0),Tn.fromTo(Te,.99,0),E){if(gn||Dt.fromTo("transform",`translateX(${$e})`,Ie?"translateX(-100%)":"translateX(100%)").fromTo(Te,.99,0),Tn.fromTo("transform",`translateX(${$e})`,Ie?"translateX(-100%)":"translateX(100%)"),Mn.beforeClearStyles([Te,"transform"]),(null==Pt?void 0:Pt.translucent)?Mn.fromTo("transform","translateX(0px)",Ie?"translateX(-100%)":"translateX(100%)"):Mn.fromTo(Te,"var(--opacity)",0),ur&&!Ht){const En=(0,_.c)();En.addElement(Q(ur).querySelector(".button-text")).fromTo("transform",`translateX(${$e})`,`translateX(${(Ie?-124:124)+"px"})`),lt.addAnimation(En)}}else gn||Dt.fromTo("transform",`translateX(${$e})`,`translateX(${ct})`).fromTo(Te,.99,0).afterClearStyles([Ke,Te]),Tn.fromTo("transform",`translateX(${$e})`,`translateX(${ct})`).afterClearStyles([Ke,Te]),vr.afterClearStyles([Te]),Dt.afterClearStyles([Te]),Bt.afterClearStyles([Te])})}return He}catch(ut){throw ut}}},5392:(nn,ot,L)=>{"use strict";L.r(ot),L.d(ot,{mdTransitionAnimation:()=>ke});var _=L(7235),P=L(4425);L(3150);const ke=(ae,Q)=>{const we="back"===Q.direction,ge=Q.leavingEl,Ee=(0,P.g)(Q.enteringEl),_e=Ee.querySelector("ion-toolbar"),De=(0,_.c)();if(De.addElement(Ee).fill("both").beforeRemoveClass("ion-page-invisible"),we?De.duration(Q.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):De.duration(Q.duration||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),_e){const ut=(0,_.c)();ut.addElement(_e),De.addAnimation(ut)}if(ge&&we){De.duration(Q.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const ut=(0,_.c)();ut.addElement((0,P.g)(ge)).onFinish(Te=>{1===Te&&ut.elements.length>0&&ut.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),De.addAnimation(ut)}return De}},3291:(nn,ot,L)=>{"use strict";L.d(ot,{B:()=>st,a:()=>ne,b:()=>we,c:()=>_e,d:()=>gt,e:()=>ut,f:()=>He,g:()=>vt,h:()=>Q,i:()=>Zt,l:()=>se,m:()=>ge,p:()=>Ee,s:()=>Ct,t:()=>De});var _=L(8239),P=L(7585),re=L(3087),ke=L(1567);let ae=0;const Q=new WeakMap,Z=Ue=>({create:lt=>Te(Ue,lt),dismiss:(lt,Dt,Bt)=>at(document,lt,Dt,Ue,Bt),getTop:()=>(0,_.Z)(function*(){return E(document,Ue)})()}),ne=Z("ion-alert"),we=Z("ion-action-sheet"),se=Z("ion-loading"),ge=Z("ion-modal"),Ee=Z("ion-picker"),_e=Z("ion-popover"),De=Z("ion-toast"),ut=Ue=>{"undefined"!=typeof document&&ct(document);const lt=ae++;Ue.overlayIndex=lt,Ue.hasAttribute("id")||(Ue.id=`ion-overlay-${lt}`)},Te=(Ue,lt)=>"undefined"!=typeof customElements?customElements.whenDefined(Ue).then(()=>{const Dt=document.createElement(Ue);return Dt.classList.add("overlay-hidden"),Object.assign(Dt,lt),Ge(document).appendChild(Dt),new Promise(Bt=>(0,ke.c)(Dt,Bt))}):Promise.resolve(),Ke='[tabindex]:not([tabindex^="-"]), input:not([type=hidden]):not([tabindex^="-"]), textarea:not([tabindex^="-"]), button:not([tabindex^="-"]), select:not([tabindex^="-"]), .ion-focusable:not([tabindex^="-"])',$e="input:not([type=hidden]), textarea, button, select",ct=Ue=>{0===ae&&(ae=1,Ue.addEventListener("focus",lt=>((Ue,lt)=>{const Dt=E(lt),Bt=Ue.target;if(Dt&&Bt)if(Dt===Bt)Dt.lastFocus=void 0;else{const Mt=(0,ke.g)(Dt);if(!Mt.contains(Bt))return;const Pt=Mt.querySelector(".ion-overlay-wrapper");if(!Pt)return;if(Pt.contains(Bt))Dt.lastFocus=Bt;else{const gn=Dt.lastFocus;((Ue,lt)=>{let Dt=Ue.querySelector(Ke);const Bt=Dt&&Dt.shadowRoot;Bt&&(Dt=Bt.querySelector($e)||Dt),Dt?Dt.focus():lt.focus()})(Pt,Dt),gn===lt.activeElement&&((Ue,lt)=>{const Dt=Array.from(Ue.querySelectorAll(Ke));let Bt=Dt.length>0?Dt[Dt.length-1]:null;const Mt=Bt&&Bt.shadowRoot;Mt&&(Bt=Mt.querySelector($e)||Bt),Bt?Bt.focus():lt.focus()})(Pt,Dt),Dt.lastFocus=lt.activeElement}}})(lt,Ue),!0),Ue.addEventListener("ionBackButton",lt=>{const Dt=E(Ue);Dt&&Dt.backdropDismiss&&lt.detail.register(re.OVERLAY_BACK_BUTTON_PRIORITY,()=>Dt.dismiss(void 0,st))}),Ue.addEventListener("keyup",lt=>{if("Escape"===lt.key){const Dt=E(Ue);Dt&&Dt.backdropDismiss&&Dt.dismiss(void 0,st)}}))},at=(Ue,lt,Dt,Bt,Mt)=>{const Pt=E(Ue,Bt,Mt);return Pt?Pt.dismiss(lt,Dt):Promise.reject("overlay does not exist")},E=(Ue,lt,Dt)=>{const Bt=((Ue,lt)=>(void 0===lt&&(lt="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(Ue.querySelectorAll(lt)).filter(Dt=>Dt.overlayIndex>0)))(Ue,lt);return void 0===Dt?Bt[Bt.length-1]:Bt.find(Mt=>Mt.id===Dt)},Ye=(Ue=!1)=>{const Dt=Ge(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");!Dt||(Ue?Dt.setAttribute("aria-hidden","true"):Dt.removeAttribute("aria-hidden"))},gt=function(){var Ue=(0,_.Z)(function*(lt,Dt,Bt,Mt,Pt){if(lt.presented)return;Ye(!0),lt.presented=!0,lt.willPresent.emit();const gn=(0,P.b)(lt),kn=lt.enterAnimation?lt.enterAnimation:P.c.get(Dt,"ios"===gn?Bt:Mt);(yield ht(lt,kn,lt.el,Pt))&&lt.didPresent.emit(),"ION-TOAST"!==lt.el.tagName&&We(lt.el),lt.keyboardClose&&lt.el.focus()});return function(Dt,Bt,Mt,Pt,gn){return Ue.apply(this,arguments)}}(),We=function(){var Ue=(0,_.Z)(function*(lt){let Dt=document.activeElement;if(!Dt)return;const Bt=Dt&&Dt.shadowRoot;Bt&&(Dt=Bt.querySelector($e)||Dt),yield lt.onDidDismiss(),Dt.focus()});return function(Dt){return Ue.apply(this,arguments)}}(),He=function(){var Ue=(0,_.Z)(function*(lt,Dt,Bt,Mt,Pt,gn,kn){if(!lt.presented)return!1;Ye(!1),lt.presented=!1;try{lt.el.style.setProperty("pointer-events","none"),lt.willDismiss.emit({data:Dt,role:Bt});const Tn=(0,P.b)(lt),_n=lt.leaveAnimation?lt.leaveAnimation:P.c.get(Mt,"ios"===Tn?Pt:gn);"gesture"!==Bt&&(yield ht(lt,_n,lt.el,kn)),lt.didDismiss.emit({data:Dt,role:Bt}),Q.delete(lt)}catch(Tn){console.error(Tn)}return lt.el.remove(),!0});return function(Dt,Bt,Mt,Pt,gn,kn,Tn){return Ue.apply(this,arguments)}}(),Ge=Ue=>Ue.querySelector("ion-app")||Ue.body,ht=function(){var Ue=(0,_.Z)(function*(lt,Dt,Bt,Mt){Bt.classList.remove("overlay-hidden");const gn=Dt(Bt.shadowRoot||lt.el,Mt);(!lt.animated||!P.c.getBoolean("animated",!0))&&gn.duration(0),lt.keyboardClose&&gn.beforeAddWrite(()=>{const Tn=Bt.ownerDocument.activeElement;Tn&&Tn.matches("input, ion-input, ion-textarea")&&Tn.blur()});const kn=Q.get(lt)||[];return Q.set(lt,[...kn,gn]),yield gn.play(),!0});return function(Dt,Bt,Mt,Pt){return Ue.apply(this,arguments)}}(),vt=(Ue,lt)=>{let Dt;const Bt=new Promise(Mt=>Dt=Mt);return Ht(Ue,lt,Mt=>{Dt(Mt.detail)}),Bt},Ht=(Ue,lt,Dt)=>{const Bt=Mt=>{(0,ke.b)(Ue,lt,Bt),Dt(Mt)};(0,ke.a)(Ue,lt,Bt)},Zt=Ue=>"cancel"===Ue||Ue===st,dt=Ue=>Ue(),Ct=(Ue,lt)=>{if("function"==typeof Ue)return P.c.get("_zoneGate",dt)(()=>{try{return Ue(lt)}catch(Bt){console.error(Bt)}})},st="backdrop"},2329:(nn,ot,L)=>{"use strict";L.d(ot,{Mq:()=>_.getApp,C6:()=>_.getApps,ZF:()=>_.initializeApp,KN:()=>_.registerVersion});var _=L(8026);(0,_.registerVersion)("firebase","9.12.1","app")},7841:(nn,ot,L)=>{"use strict";L.d(ot,{Z:()=>_.Z});var _=L(3394);_.Z.registerVersion("firebase","9.12.1","app-compat")},4828:(nn,ot,L)=>{"use strict";L.r(ot);var _=L(8239),P=L(3394),re=L(3607),ke=L(3854),Z=(L(8026),L(5422),L(3910));function ne(){return window}function ge(){return(ge=(0,_.Z)(function*(Ve,ve,Pe){var bt;const{BuildInfo:Kt}=ne();(0,re.aq)(ve.sessionId,"AuthEvent did not contain a session ID");const Bn=yield $e(ve.sessionId),Dn={};return(0,re.ar)()?Dn.ibi=Kt.packageName:(0,re.as)()?Dn.apn=Kt.packageName:(0,re.at)(Ve,"operation-not-supported-in-this-environment"),Kt.displayName&&(Dn.appDisplayName=Kt.displayName),Dn.sessionId=Bn,(0,re.au)(Ve,Pe,ve.type,void 0,null!==(bt=ve.eventId)&&void 0!==bt?bt:void 0,Dn)})).apply(this,arguments)}function _e(){return(_e=(0,_.Z)(function*(Ve){const{BuildInfo:ve}=ne(),Pe={};(0,re.ar)()?Pe.iosBundleId=ve.packageName:(0,re.as)()?Pe.androidPackageName=ve.packageName:(0,re.at)(Ve,"operation-not-supported-in-this-environment"),yield(0,re.av)(Ve,Pe)})).apply(this,arguments)}function Te(){return(Te=(0,_.Z)(function*(Ve,ve,Pe){const{cordova:bt}=ne();let Kt=()=>{};try{yield new Promise((Bn,Dn)=>{let Fn=null;function pn(){var qt;Bn();const Gt=null===(qt=bt.plugins.browsertab)||void 0===qt?void 0:qt.close;"function"==typeof Gt&&Gt(),"function"==typeof(null==Pe?void 0:Pe.close)&&Pe.close()}function In(){Fn||(Fn=window.setTimeout(()=>{Dn((0,re.aw)(Ve,"redirect-cancelled-by-user"))},2e3))}function mr(){"visible"===(null==document?void 0:document.visibilityState)&&In()}ve.addPassiveListener(pn),document.addEventListener("resume",In,!1),(0,re.as)()&&document.addEventListener("visibilitychange",mr,!1),Kt=()=>{ve.removePassiveListener(pn),document.removeEventListener("resume",In,!1),document.removeEventListener("visibilitychange",mr,!1),Fn&&window.clearTimeout(Fn)}})}finally{Kt()}})).apply(this,arguments)}function $e(Ve){return qe.apply(this,arguments)}function qe(){return(qe=(0,_.Z)(function*(Ve){const ve=Ie(Ve),Pe=yield crypto.subtle.digest("SHA-256",ve);return Array.from(new Uint8Array(Pe)).map(Kt=>Kt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ie(Ve){if((0,re.aq)(/[0-9a-zA-Z]+/.test(Ve),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(Ve);const ve=new ArrayBuffer(Ve.length),Pe=new Uint8Array(ve);for(let bt=0;bt<Ve.length;bt++)Pe[bt]=Ve.charCodeAt(bt);return Pe}class ct extends re.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(ve=>{this.resolveInialized=ve})}addPassiveListener(ve){this.passiveListeners.add(ve)}removePassiveListener(ve){this.passiveListeners.delete(ve)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(ve){return this.resolveInialized(),this.passiveListeners.forEach(Pe=>Pe(ve)),super.onEvent(ve)}initialized(){var ve=this;return(0,_.Z)(function*(){yield ve.initPromise})()}}function E(Ve){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,_.Z)(function*(Ve){const ve=yield He()._get(Ge(Ve));return ve&&(yield He()._remove(Ge(Ve))),ve})).apply(this,arguments)}function We(){const Ve=[],ve="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Pe=0;Pe<20;Pe++){const bt=Math.floor(Math.random()*ve.length);Ve.push(ve.charAt(bt))}return Ve.join("")}function He(){return(0,re.ay)(re.b)}function Ge(Ve){return(0,re.az)("authEvent",Ve.config.apiKey,Ve.name)}function Ht(Ve){if(!(null==Ve?void 0:Ve.includes("?")))return{};const[ve,...Pe]=Ve.split("?");return(0,ke.zd)(Pe.join("?"))}function st(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,re.aw)("no-auth-event")}}function Mt(){var Ve;return(null===(Ve=null==self?void 0:self.location)||void 0===Ve?void 0:Ve.protocol)||null}function gn(Ve=(0,ke.z$)()){return!("file:"!==Mt()&&"ionic:"!==Mt()&&"capacitor:"!==Mt()||!Ve.toLowerCase().match(/iphone|ipad|ipod|android/))}function vr(){try{const Ve=self.localStorage,ve=re.aI();if(Ve)return Ve.setItem(ve,"1"),Ve.removeItem(ve),!function(Ve=(0,ke.z$)()){return(0,ke.w1)()&&11===(null==document?void 0:document.documentMode)||function(Ve=(0,ke.z$)()){return/Edge\/\d+/.test(Ve)}(Ve)}()||(0,ke.hl)()}catch(Ve){return ur()&&(0,ke.hl)()}return!1}function ur(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ot(){return("http:"===Mt()||"https:"===Mt()||(0,ke.ru)()||gn())&&!((0,ke.b$)()||(0,ke.UG)())&&vr()&&!ur()}function En(){return gn()&&"undefined"!=typeof document}function tn(){return(tn=(0,_.Z)(function*(){return!!En()&&new Promise(Ve=>{const ve=setTimeout(()=>{Ve(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(ve),Ve(!0)})})})).apply(this,arguments)}const jn={LOCAL:"local",NONE:"none",SESSION:"session"},Qn=re.ax,lr="persistence";function Dr(Ve){return hr.apply(this,arguments)}function hr(){return(hr=(0,_.Z)(function*(Ve){yield Ve._initializationPromise;const ve=sr(),Pe=re.az(lr,Ve.config.apiKey,Ve.name);ve&&ve.setItem(Pe,Ve._getPersistence())})).apply(this,arguments)}function sr(){var Ve;try{return(null===(Ve="undefined"!=typeof window?window:null)||void 0===Ve?void 0:Ve.sessionStorage)||null}catch(ve){return null}}const Qt=re.ax;class wt{constructor(){this.browserResolver=re.ay(re.k),this.cordovaResolver=re.ay(class{constructor(){this._redirectPersistence=re.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=re.aB,this._overrideRedirectResult=re.aC}_initialize(ve){var Pe=this;return(0,_.Z)(function*(){const bt=ve._key();let Kt=Pe.eventManagers.get(bt);return Kt||(Kt=new ct(ve),Pe.eventManagers.set(bt,Kt),Pe.attachCallbackListeners(ve,Kt)),Kt})()}_openPopup(ve){(0,re.at)(ve,"operation-not-supported-in-this-environment")}_openRedirect(ve,Pe,bt,Kt){var Bn=this;return(0,_.Z)(function*(){!function(Ve){var ve,Pe,bt,Kt,Bn,Dn,Fn,pn,In,mr;const qt=ne();(0,re.ax)("function"==typeof(null===(ve=null==qt?void 0:qt.universalLinks)||void 0===ve?void 0:ve.subscribe),Ve,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,re.ax)(void 0!==(null===(Pe=null==qt?void 0:qt.BuildInfo)||void 0===Pe?void 0:Pe.packageName),Ve,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,re.ax)("function"==typeof(null===(Bn=null===(Kt=null===(bt=null==qt?void 0:qt.cordova)||void 0===bt?void 0:bt.plugins)||void 0===Kt?void 0:Kt.browsertab)||void 0===Bn?void 0:Bn.openUrl),Ve,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,re.ax)("function"==typeof(null===(pn=null===(Fn=null===(Dn=null==qt?void 0:qt.cordova)||void 0===Dn?void 0:Dn.plugins)||void 0===Fn?void 0:Fn.browsertab)||void 0===pn?void 0:pn.isAvailable),Ve,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,re.ax)("function"==typeof(null===(mr=null===(In=null==qt?void 0:qt.cordova)||void 0===In?void 0:In.InAppBrowser)||void 0===mr?void 0:mr.open),Ve,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(ve);const Dn=yield Bn._initialize(ve);yield Dn.initialized(),Dn.resetRedirect(),(0,re.aD)(),yield Bn._originValidation(ve);const Fn=function(Ve,ve,Pe=null){return{type:ve,eventId:Pe,urlResponse:null,sessionId:We(),postBody:null,tenantId:Ve.tenantId,error:(0,re.aw)(Ve,"no-auth-event")}}(ve,bt,Kt);yield function(Ve,ve){return He()._set(Ge(Ve),ve)}(ve,Fn);const pn=yield function(Ve,ve,Pe){return ge.apply(this,arguments)}(ve,Fn,Pe),In=yield function(Ve){const{cordova:ve}=ne();return new Promise(Pe=>{ve.plugins.browsertab.isAvailable(bt=>{let Kt=null;bt?ve.plugins.browsertab.openUrl(Ve):Kt=ve.InAppBrowser.open(Ve,(0,re.ap)()?"_blank":"_system","location=yes"),Pe(Kt)})})}(pn);return function(Ve,ve,Pe){return Te.apply(this,arguments)}(ve,Dn,In)})()}_isIframeWebStorageSupported(ve,Pe){throw new Error("Method not implemented.")}_originValidation(ve){const Pe=ve._key();return this.originValidationPromises[Pe]||(this.originValidationPromises[Pe]=function(Ve){return _e.apply(this,arguments)}(ve)),this.originValidationPromises[Pe]}attachCallbackListeners(ve,Pe){const{universalLinks:bt,handleOpenURL:Kt,BuildInfo:Bn}=ne(),Dn=setTimeout((0,_.Z)(function*(){yield E(ve),Pe.onEvent(st())}),500),Fn=function(){var mr=(0,_.Z)(function*(qt){clearTimeout(Dn);const Gt=yield E(ve);let $t=null;Gt&&(null==qt?void 0:qt.url)&&($t=function(Ve,ve){var Pe,bt;const Kt=function(Ve){const ve=Ht(Ve),Pe=ve.link?decodeURIComponent(ve.link):void 0,bt=Ht(Pe).link,Kt=ve.deep_link_id?decodeURIComponent(ve.deep_link_id):void 0;return Ht(Kt).link||Kt||bt||Pe||Ve}(ve);if(Kt.includes("/__/auth/callback")){const Bn=Ht(Kt),Dn=Bn.firebaseError?function(Ve){try{return JSON.parse(Ve)}catch(ve){return null}}(decodeURIComponent(Bn.firebaseError)):null,Fn=null===(bt=null===(Pe=null==Dn?void 0:Dn.code)||void 0===Pe?void 0:Pe.split("auth/"))||void 0===bt?void 0:bt[1],pn=Fn?(0,re.aw)(Fn):null;return pn?{type:Ve.type,eventId:Ve.eventId,tenantId:Ve.tenantId,error:pn,urlResponse:null,sessionId:null,postBody:null}:{type:Ve.type,eventId:Ve.eventId,tenantId:Ve.tenantId,sessionId:Ve.sessionId,urlResponse:Kt,postBody:null}}return null}(Gt,qt.url)),Pe.onEvent($t||st())});return function(Gt){return mr.apply(this,arguments)}}();void 0!==bt&&"function"==typeof bt.subscribe&&bt.subscribe(null,Fn);const pn=Kt,In=`${Bn.packageName.toLowerCase()}://`;ne().handleOpenURL=function(){var mr=(0,_.Z)(function*(qt){if(qt.toLowerCase().startsWith(In)&&Fn({url:qt}),"function"==typeof pn)try{pn(qt)}catch(Gt){console.error(Gt)}});return function(qt){return mr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=re.a,this._completeRedirectFn=re.aB,this._overrideRedirectResult=re.aC}_initialize(ve){var Pe=this;return(0,_.Z)(function*(){return yield Pe.selectUnderlyingResolver(),Pe.assertedUnderlyingResolver._initialize(ve)})()}_openPopup(ve,Pe,bt,Kt){var Bn=this;return(0,_.Z)(function*(){return yield Bn.selectUnderlyingResolver(),Bn.assertedUnderlyingResolver._openPopup(ve,Pe,bt,Kt)})()}_openRedirect(ve,Pe,bt,Kt){var Bn=this;return(0,_.Z)(function*(){return yield Bn.selectUnderlyingResolver(),Bn.assertedUnderlyingResolver._openRedirect(ve,Pe,bt,Kt)})()}_isIframeWebStorageSupported(ve,Pe){this.assertedUnderlyingResolver._isIframeWebStorageSupported(ve,Pe)}_originValidation(ve){return this.assertedUnderlyingResolver._originValidation(ve)}get _shouldInitProactively(){return En()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Qt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var ve=this;return(0,_.Z)(function*(){if(ve.underlyingResolver)return;const Pe=yield function(){return tn.apply(this,arguments)}();ve.underlyingResolver=Pe?ve.cordovaResolver:ve.browserResolver})()}}function xr(Ve){return Ve.unwrap()}function fn(Ve){return cr(Ve)}function cr(Ve){const{_tokenResponse:ve}=Ve instanceof ke.ZR?Ve.customData:Ve;if(!ve)return null;if(!(Ve instanceof ke.ZR)&&"temporaryProof"in ve&&"phoneNumber"in ve)return re.P.credentialFromResult(Ve);const Pe=ve.providerId;if(!Pe||Pe===re.o.PASSWORD)return null;let bt;switch(Pe){case re.o.GOOGLE:bt=re.Q;break;case re.o.FACEBOOK:bt=re.N;break;case re.o.GITHUB:bt=re.T;break;case re.o.TWITTER:bt=re.W;break;default:const{oauthIdToken:Kt,oauthAccessToken:Bn,oauthTokenSecret:Dn,pendingToken:Fn,nonce:pn}=ve;return Bn||Dn||Kt||Fn?Fn?Pe.startsWith("saml.")?re.aL._create(Pe,Fn):re.J._fromParams({providerId:Pe,signInMethod:Pe,pendingToken:Fn,idToken:Kt,accessToken:Bn}):new re.U(Pe).credential({idToken:Kt,accessToken:Bn,rawNonce:pn}):null}return Ve instanceof ke.ZR?bt.credentialFromError(Ve):bt.credentialFromResult(Ve)}function dr(Ve,ve){return ve.catch(Pe=>{throw Pe instanceof ke.ZR&&function(Ve,ve){var Pe,bt;const Kt=null===(Pe=ve.customData)||void 0===Pe?void 0:Pe._tokenResponse;if("auth/multi-factor-auth-required"===(null===(bt=ve)||void 0===bt?void 0:bt.code))ve.resolver=new Kn(Ve,re.an(Ve,ve));else if(Kt){const Bn=cr(ve),Dn=ve;Bn&&(Dn.credential=Bn,Dn.tenantId=Kt.tenantId||void 0,Dn.email=Kt.email||void 0,Dn.phoneNumber=Kt.phoneNumber||void 0)}}(Ve,Pe),Pe}).then(Pe=>{const Kt=Pe.user;return{operationType:Pe.operationType,credential:fn(Pe),additionalUserInfo:re.al(Pe),user:Qr.getOrCreate(Kt)}})}function Xn(Ve,ve){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,_.Z)(function*(Ve,ve){const Pe=yield ve;return{verificationId:Pe.verificationId,confirm:bt=>dr(Ve,Pe.confirm(bt))}})).apply(this,arguments)}class Kn{constructor(ve,Pe){this.resolver=Pe,this.auth=ve.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(ve){return dr(xr(this.auth),this.resolver.resolveSignIn(ve))}}class Qr{constructor(ve){this._delegate=ve,this.multiFactor=re.ao(ve)}static getOrCreate(ve){return Qr.USER_MAP.has(ve)||Qr.USER_MAP.set(ve,new Qr(ve)),Qr.USER_MAP.get(ve)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(ve){return this._delegate.getIdTokenResult(ve)}getIdToken(ve){return this._delegate.getIdToken(ve)}linkAndRetrieveDataWithCredential(ve){return this.linkWithCredential(ve)}linkWithCredential(ve){var Pe=this;return(0,_.Z)(function*(){return dr(Pe.auth,re.Z(Pe._delegate,ve))})()}linkWithPhoneNumber(ve,Pe){var bt=this;return(0,_.Z)(function*(){return Xn(bt.auth,re.l(bt._delegate,ve,Pe))})()}linkWithPopup(ve){var Pe=this;return(0,_.Z)(function*(){return dr(Pe.auth,re.d(Pe._delegate,ve,wt))})()}linkWithRedirect(ve){var Pe=this;return(0,_.Z)(function*(){return yield Dr(re.aE(Pe.auth)),re.g(Pe._delegate,ve,wt)})()}reauthenticateAndRetrieveDataWithCredential(ve){return this.reauthenticateWithCredential(ve)}reauthenticateWithCredential(ve){var Pe=this;return(0,_.Z)(function*(){return dr(Pe.auth,re._(Pe._delegate,ve))})()}reauthenticateWithPhoneNumber(ve,Pe){return Xn(this.auth,re.r(this._delegate,ve,Pe))}reauthenticateWithPopup(ve){return dr(this.auth,re.e(this._delegate,ve,wt))}reauthenticateWithRedirect(ve){var Pe=this;return(0,_.Z)(function*(){return yield Dr(re.aE(Pe.auth)),re.h(Pe._delegate,ve,wt)})()}sendEmailVerification(ve){return re.ab(this._delegate,ve)}unlink(ve){var Pe=this;return(0,_.Z)(function*(){return yield re.ak(Pe._delegate,ve),Pe})()}updateEmail(ve){return re.ag(this._delegate,ve)}updatePassword(ve){return re.ah(this._delegate,ve)}updatePhoneNumber(ve){return re.u(this._delegate,ve)}updateProfile(ve){return re.af(this._delegate,ve)}verifyBeforeUpdateEmail(ve,Pe){return re.ac(this._delegate,ve,Pe)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Qr.USER_MAP=new WeakMap;const dn=re.ax;let Ze=(()=>{class Ve{constructor(Pe,bt){if(this.app=Pe,bt.isInitialized())return this._delegate=bt.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Kt}=Pe.options;dn(Kt,"invalid-api-key",{appName:Pe.name}),dn(Kt,"invalid-api-key",{appName:Pe.name});const Bn="undefined"!=typeof window?wt:void 0;this._delegate=bt.initialize({options:{persistence:Ae(Kt,Pe.name),popupRedirectResolver:Bn}}),this._delegate._updateErrorMap(re.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Qr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Pe){this._delegate.languageCode=Pe}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Pe){this._delegate.tenantId=Pe}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Pe,bt){re.G(this._delegate,Pe,bt)}applyActionCode(Pe){return re.a2(this._delegate,Pe)}checkActionCode(Pe){return re.a3(this._delegate,Pe)}confirmPasswordReset(Pe,bt){return re.a1(this._delegate,Pe,bt)}createUserWithEmailAndPassword(Pe,bt){var Kt=this;return(0,_.Z)(function*(){return dr(Kt._delegate,re.a5(Kt._delegate,Pe,bt))})()}fetchProvidersForEmail(Pe){return this.fetchSignInMethodsForEmail(Pe)}fetchSignInMethodsForEmail(Pe){return re.aa(this._delegate,Pe)}isSignInWithEmailLink(Pe){return re.a8(this._delegate,Pe)}getRedirectResult(){var Pe=this;return(0,_.Z)(function*(){dn(Ot(),Pe._delegate,"operation-not-supported-in-this-environment");const bt=yield re.j(Pe._delegate,wt);return bt?dr(Pe._delegate,Promise.resolve(bt)):{credential:null,user:null}})()}addFrameworkForLogging(Pe){!function(Ve,ve){(0,re.aE)(Ve)._logFramework(ve)}(this._delegate,Pe)}onAuthStateChanged(Pe,bt,Kt){const{next:Bn,error:Dn,complete:Fn}=oe(Pe,bt,Kt);return this._delegate.onAuthStateChanged(Bn,Dn,Fn)}onIdTokenChanged(Pe,bt,Kt){const{next:Bn,error:Dn,complete:Fn}=oe(Pe,bt,Kt);return this._delegate.onIdTokenChanged(Bn,Dn,Fn)}sendSignInLinkToEmail(Pe,bt){return re.a7(this._delegate,Pe,bt)}sendPasswordResetEmail(Pe,bt){return re.a0(this._delegate,Pe,bt||void 0)}setPersistence(Pe){var bt=this;return(0,_.Z)(function*(){let Kt;switch(function(Ve,ve){Qn(Object.values(jn).includes(ve),Ve,"invalid-persistence-type"),(0,ke.b$)()?Qn(ve!==jn.SESSION,Ve,"unsupported-persistence-type"):(0,ke.UG)()?Qn(ve===jn.NONE,Ve,"unsupported-persistence-type"):ur()?Qn(ve===jn.NONE||ve===jn.LOCAL&&(0,ke.hl)(),Ve,"unsupported-persistence-type"):Qn(ve===jn.NONE||vr(),Ve,"unsupported-persistence-type")}(bt._delegate,Pe),Pe){case jn.SESSION:Kt=re.a;break;case jn.LOCAL:Kt=(yield re.ay(re.i)._isAvailable())?re.i:re.b;break;case jn.NONE:Kt=re.L;break;default:return re.at("argument-error",{appName:bt._delegate.name})}return bt._delegate.setPersistence(Kt)})()}signInAndRetrieveDataWithCredential(Pe){return this.signInWithCredential(Pe)}signInAnonymously(){return dr(this._delegate,re.X(this._delegate))}signInWithCredential(Pe){return dr(this._delegate,re.Y(this._delegate,Pe))}signInWithCustomToken(Pe){return dr(this._delegate,re.$(this._delegate,Pe))}signInWithEmailAndPassword(Pe,bt){return dr(this._delegate,re.a6(this._delegate,Pe,bt))}signInWithEmailLink(Pe,bt){return dr(this._delegate,re.a9(this._delegate,Pe,bt))}signInWithPhoneNumber(Pe,bt){return Xn(this._delegate,re.s(this._delegate,Pe,bt))}signInWithPopup(Pe){var bt=this;return(0,_.Z)(function*(){return dn(Ot(),bt._delegate,"operation-not-supported-in-this-environment"),dr(bt._delegate,re.c(bt._delegate,Pe,wt))})()}signInWithRedirect(Pe){var bt=this;return(0,_.Z)(function*(){return dn(Ot(),bt._delegate,"operation-not-supported-in-this-environment"),yield Dr(bt._delegate),re.f(bt._delegate,Pe,wt)})()}updateCurrentUser(Pe){return this._delegate.updateCurrentUser(Pe)}verifyPasswordResetCode(Pe){return re.a4(this._delegate,Pe)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Ve.Persistence=jn,Ve})();function oe(Ve,ve,Pe){let bt=Ve;"function"!=typeof Ve&&({next:bt,error:ve,complete:Pe}=Ve);const Kt=bt;return{next:Dn=>Kt(Dn&&Qr.getOrCreate(Dn)),error:ve,complete:Pe}}function Ae(Ve,ve){const Pe=function(Ve,ve){const Pe=sr();if(!Pe)return[];const bt=re.az(lr,Ve,ve);switch(Pe.getItem(bt)){case jn.NONE:return[re.L];case jn.LOCAL:return[re.i,re.a];case jn.SESSION:return[re.a];default:return[]}}(Ve,ve);if("undefined"!=typeof self&&!Pe.includes(re.i)&&Pe.push(re.i),"undefined"!=typeof window)for(const bt of[re.b,re.a])Pe.includes(bt)||Pe.push(bt);return Pe.includes(re.L)||Pe.push(re.L),Pe}class nt{constructor(){this.providerId="phone",this._delegate=new re.P(xr(P.Z.auth()))}static credential(ve,Pe){return re.P.credential(ve,Pe)}verifyPhoneNumber(ve,Pe){return this._delegate.verifyPhoneNumber(ve,Pe)}unwrap(){return this._delegate}}nt.PHONE_SIGN_IN_METHOD=re.P.PHONE_SIGN_IN_METHOD,nt.PROVIDER_ID=re.P.PROVIDER_ID;const It=re.ax;var Ve;(Ve=P.Z).INTERNAL.registerComponent(new Z.wA("auth-compat",ve=>{const Pe=ve.getProvider("app-compat").getImmediate(),bt=ve.getProvider("auth");return new Ze(Pe,bt)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:re.A.EMAIL_SIGNIN,PASSWORD_RESET:re.A.PASSWORD_RESET,RECOVER_EMAIL:re.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:re.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:re.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:re.A.VERIFY_EMAIL}},EmailAuthProvider:re.M,FacebookAuthProvider:re.N,GithubAuthProvider:re.T,GoogleAuthProvider:re.Q,OAuthProvider:re.U,SAMLAuthProvider:re.V,PhoneAuthProvider:nt,PhoneMultiFactorGenerator:re.m,RecaptchaVerifier:class{constructor(ve,Pe,bt=P.Z.app()){var Kt;It(null===(Kt=bt.options)||void 0===Kt?void 0:Kt.apiKey,"invalid-api-key",{appName:bt.name}),this._delegate=new re.R(ve,Pe,bt.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:re.W,Auth:Ze,AuthCredential:re.H,Error:ke.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Ve.registerVersion("@firebase/auth-compat","0.2.23")},6215:(nn,ot,L)=>{"use strict";L.d(ot,{X:()=>re});var _=L(9765),P=L(7971);class re extends _.xQ{constructor(ae){super(),this._value=ae}get value(){return this.getValue()}_subscribe(ae){const Q=super._subscribe(ae);return Q&&!Q.closed&&ae.next(this._value),Q}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new P.N;return this._value}next(ae){super.next(this._value=ae)}}},8891:(nn,ot,L)=>{"use strict";L.d(ot,{y:()=>we});var _=L(7393),re=L(9181),ke=L(6490),Q=L(6554),Z=L(4022),ne=L(2494);let we=(()=>{class ge{constructor(_e){this._isScalar=!1,_e&&(this._subscribe=_e)}lift(_e){const De=new ge;return De.source=this,De.operator=_e,De}subscribe(_e,De,ut){const{operator:Te}=this,Ke=function(ge,Ee,_e){if(ge){if(ge instanceof _.L)return ge;if(ge[re.b])return ge[re.b]()}return ge||Ee||_e?new _.L(ge,Ee,_e):new _.L(ke.c)}(_e,De,ut);if(Ke.add(Te?Te.call(Ke,this.source):this.source||ne.v.useDeprecatedSynchronousErrorHandling&&!Ke.syncErrorThrowable?this._subscribe(Ke):this._trySubscribe(Ke)),ne.v.useDeprecatedSynchronousErrorHandling&&Ke.syncErrorThrowable&&(Ke.syncErrorThrowable=!1,Ke.syncErrorThrown))throw Ke.syncErrorValue;return Ke}_trySubscribe(_e){try{return this._subscribe(_e)}catch(De){ne.v.useDeprecatedSynchronousErrorHandling&&(_e.syncErrorThrown=!0,_e.syncErrorValue=De),function(ge){for(;ge;){const{closed:Ee,destination:_e,isStopped:De}=ge;if(Ee||De)return!1;ge=_e&&_e instanceof _.L?_e:null}return!0}(_e)?_e.error(De):console.warn(De)}}forEach(_e,De){return new(De=se(De))((ut,Te)=>{let Ke;Ke=this.subscribe($e=>{try{_e($e)}catch(qe){Te(qe),Ke&&Ke.unsubscribe()}},Te,ut)})}_subscribe(_e){const{source:De}=this;return De&&De.subscribe(_e)}[Q.L](){return this}pipe(..._e){return 0===_e.length?this:(0,Z.U)(_e)(this)}toPromise(_e){return new(_e=se(_e))((De,ut)=>{let Te;this.subscribe(Ke=>Te=Ke,Ke=>ut(Ke),()=>De(Te))})}}return ge.create=Ee=>new ge(Ee),ge})();function se(ge){if(ge||(ge=ne.v.Promise||Promise),!ge)throw new Error("no Promise impl found");return ge}},6490:(nn,ot,L)=>{"use strict";L.d(ot,{c:()=>re});var _=L(2494),P=L(4449);const re={closed:!0,next(ke){},error(ke){if(_.v.useDeprecatedSynchronousErrorHandling)throw ke;(0,P.z)(ke)},complete(){}}},5197:(nn,ot,L)=>{"use strict";L.d(ot,{L:()=>P});var _=L(7393);class P extends _.L{notifyNext(ke,ae,Q,Z,ne){this.destination.next(ae)}notifyError(ke,ae){this.destination.error(ke)}notifyComplete(ke){this.destination.complete()}}},9765:(nn,ot,L)=>{"use strict";L.d(ot,{Yc:()=>Z,xQ:()=>ne});var _=L(8891),P=L(7393),re=L(5319),ke=L(7971),ae=L(8858),Q=L(9181);class Z extends P.L{constructor(ge){super(ge),this.destination=ge}}let ne=(()=>{class se extends _.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Q.b](){return new Z(this)}lift(Ee){const _e=new we(this,this);return _e.operator=Ee,_e}next(Ee){if(this.closed)throw new ke.N;if(!this.isStopped){const{observers:_e}=this,De=_e.length,ut=_e.slice();for(let Te=0;Te<De;Te++)ut[Te].next(Ee)}}error(Ee){if(this.closed)throw new ke.N;this.hasError=!0,this.thrownError=Ee,this.isStopped=!0;const{observers:_e}=this,De=_e.length,ut=_e.slice();for(let Te=0;Te<De;Te++)ut[Te].error(Ee);this.observers.length=0}complete(){if(this.closed)throw new ke.N;this.isStopped=!0;const{observers:Ee}=this,_e=Ee.length,De=Ee.slice();for(let ut=0;ut<_e;ut++)De[ut].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(Ee){if(this.closed)throw new ke.N;return super._trySubscribe(Ee)}_subscribe(Ee){if(this.closed)throw new ke.N;return this.hasError?(Ee.error(this.thrownError),re.w.EMPTY):this.isStopped?(Ee.complete(),re.w.EMPTY):(this.observers.push(Ee),new ae.W(this,Ee))}asObservable(){const Ee=new _.y;return Ee.source=this,Ee}}return se.create=(ge,Ee)=>new we(ge,Ee),se})();class we extends ne{constructor(ge,Ee){super(),this.destination=ge,this.source=Ee}next(ge){const{destination:Ee}=this;Ee&&Ee.next&&Ee.next(ge)}error(ge){const{destination:Ee}=this;Ee&&Ee.error&&this.destination.error(ge)}complete(){const{destination:ge}=this;ge&&ge.complete&&this.destination.complete()}_subscribe(ge){const{source:Ee}=this;return Ee?this.source.subscribe(ge):re.w.EMPTY}}},8858:(nn,ot,L)=>{"use strict";L.d(ot,{W:()=>P});var _=L(5319);class P extends _.w{constructor(ke,ae){super(),this.subject=ke,this.subscriber=ae,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ke=this.subject,ae=ke.observers;if(this.subject=null,!ae||0===ae.length||ke.isStopped||ke.closed)return;const Q=ae.indexOf(this.subscriber);-1!==Q&&ae.splice(Q,1)}}},7393:(nn,ot,L)=>{"use strict";L.d(ot,{L:()=>Z});var _=L(9105),P=L(6490),re=L(5319),ke=L(9181),ae=L(2494),Q=L(4449);class Z extends re.w{constructor(se,ge,Ee){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=P.c;break;case 1:if(!se){this.destination=P.c;break}if("object"==typeof se){se instanceof Z?(this.syncErrorThrowable=se.syncErrorThrowable,this.destination=se,se.add(this)):(this.syncErrorThrowable=!0,this.destination=new ne(this,se));break}default:this.syncErrorThrowable=!0,this.destination=new ne(this,se,ge,Ee)}}[ke.b](){return this}static create(se,ge,Ee){const _e=new Z(se,ge,Ee);return _e.syncErrorThrowable=!1,_e}next(se){this.isStopped||this._next(se)}error(se){this.isStopped||(this.isStopped=!0,this._error(se))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(se){this.destination.next(se)}_error(se){this.destination.error(se),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:se}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=se,this}}class ne extends Z{constructor(se,ge,Ee,_e){super(),this._parentSubscriber=se;let De,ut=this;(0,_.m)(ge)?De=ge:ge&&(De=ge.next,Ee=ge.error,_e=ge.complete,ge!==P.c&&(ut=Object.create(ge),(0,_.m)(ut.unsubscribe)&&this.add(ut.unsubscribe.bind(ut)),ut.unsubscribe=this.unsubscribe.bind(this))),this._context=ut,this._next=De,this._error=Ee,this._complete=_e}next(se){if(!this.isStopped&&this._next){const{_parentSubscriber:ge}=this;ae.v.useDeprecatedSynchronousErrorHandling&&ge.syncErrorThrowable?this.__tryOrSetError(ge,this._next,se)&&this.unsubscribe():this.__tryOrUnsub(this._next,se)}}error(se){if(!this.isStopped){const{_parentSubscriber:ge}=this,{useDeprecatedSynchronousErrorHandling:Ee}=ae.v;if(this._error)Ee&&ge.syncErrorThrowable?(this.__tryOrSetError(ge,this._error,se),this.unsubscribe()):(this.__tryOrUnsub(this._error,se),this.unsubscribe());else if(ge.syncErrorThrowable)Ee?(ge.syncErrorValue=se,ge.syncErrorThrown=!0):(0,Q.z)(se),this.unsubscribe();else{if(this.unsubscribe(),Ee)throw se;(0,Q.z)(se)}}}complete(){if(!this.isStopped){const{_parentSubscriber:se}=this;if(this._complete){const ge=()=>this._complete.call(this._context);ae.v.useDeprecatedSynchronousErrorHandling&&se.syncErrorThrowable?(this.__tryOrSetError(se,ge),this.unsubscribe()):(this.__tryOrUnsub(ge),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(se,ge){try{se.call(this._context,ge)}catch(Ee){if(this.unsubscribe(),ae.v.useDeprecatedSynchronousErrorHandling)throw Ee;(0,Q.z)(Ee)}}__tryOrSetError(se,ge,Ee){if(!ae.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{ge.call(this._context,Ee)}catch(_e){return ae.v.useDeprecatedSynchronousErrorHandling?(se.syncErrorValue=_e,se.syncErrorThrown=!0,!0):((0,Q.z)(_e),!0)}return!1}_unsubscribe(){const{_parentSubscriber:se}=this;this._context=null,this._parentSubscriber=null,se.unsubscribe()}}},5319:(nn,ot,L)=>{"use strict";L.d(ot,{w:()=>Q});var _=L(9796),P=L(1555),re=L(9105);const ae=(()=>{function ne(we){return Error.call(this),this.message=we?`${we.length} errors occurred during unsubscription:\n${we.map((se,ge)=>`${ge+1}) ${se.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=we,this}return ne.prototype=Object.create(Error.prototype),ne})();class Q{constructor(we){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,we&&(this._ctorUnsubscribe=!0,this._unsubscribe=we)}unsubscribe(){let we;if(this.closed)return;let{_parentOrParents:se,_ctorUnsubscribe:ge,_unsubscribe:Ee,_subscriptions:_e}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,se instanceof Q)se.remove(this);else if(null!==se)for(let De=0;De<se.length;++De)se[De].remove(this);if((0,re.m)(Ee)){ge&&(this._unsubscribe=void 0);try{Ee.call(this)}catch(De){we=De instanceof ae?Z(De.errors):[De]}}if((0,_.k)(_e)){let De=-1,ut=_e.length;for(;++De<ut;){const Te=_e[De];if((0,P.K)(Te))try{Te.unsubscribe()}catch(Ke){we=we||[],Ke instanceof ae?we=we.concat(Z(Ke.errors)):we.push(Ke)}}}if(we)throw new ae(we)}add(we){let se=we;if(!we)return Q.EMPTY;switch(typeof we){case"function":se=new Q(we);case"object":if(se===this||se.closed||"function"!=typeof se.unsubscribe)return se;if(this.closed)return se.unsubscribe(),se;if(!(se instanceof Q)){const _e=se;se=new Q,se._subscriptions=[_e]}break;default:throw new Error("unrecognized teardown "+we+" added to Subscription.")}let{_parentOrParents:ge}=se;if(null===ge)se._parentOrParents=this;else if(ge instanceof Q){if(ge===this)return se;se._parentOrParents=[ge,this]}else{if(-1!==ge.indexOf(this))return se;ge.push(this)}const Ee=this._subscriptions;return null===Ee?this._subscriptions=[se]:Ee.push(se),se}remove(we){const se=this._subscriptions;if(se){const ge=se.indexOf(we);-1!==ge&&se.splice(ge,1)}}}var ne;function Z(ne){return ne.reduce((we,se)=>we.concat(se instanceof ae?se.errors:se),[])}Q.EMPTY=((ne=new Q).closed=!0,ne)},2494:(nn,ot,L)=>{"use strict";L.d(ot,{v:()=>P});let _=!1;const P={Promise:void 0,set useDeprecatedSynchronousErrorHandling(re){if(re){const ke=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ke.stack)}else _&&console.log("RxJS: Back to a better error behavior. Thank you. <3");_=re},get useDeprecatedSynchronousErrorHandling(){return _}}},5345:(nn,ot,L)=>{"use strict";L.d(ot,{IY:()=>ke,Ds:()=>Q,ft:()=>ne});var _=L(7393),P=L(8891),re=L(7444);class ke extends _.L{constructor(se){super(),this.parent=se}_next(se){this.parent.notifyNext(se)}_error(se){this.parent.notifyError(se),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Q extends _.L{notifyNext(se){this.destination.next(se)}notifyError(se){this.destination.error(se)}notifyComplete(){this.destination.complete()}}function ne(we,se){if(se.closed)return;if(we instanceof P.y)return we.subscribe(se);let ge;try{ge=(0,re.s)(we)(se)}catch(Ee){se.error(Ee)}return ge}},2441:(nn,ot,L)=>{"use strict";L.d(ot,{c:()=>ae,N:()=>Q});var _=L(9765),P=L(8891),re=L(5319),ke=L(1307);class ae extends P.y{constructor(ge,Ee){super(),this.source=ge,this.subjectFactory=Ee,this._refCount=0,this._isComplete=!1}_subscribe(ge){return this.getSubject().subscribe(ge)}getSubject(){const ge=this._subject;return(!ge||ge.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let ge=this._connection;return ge||(this._isComplete=!1,ge=this._connection=new re.w,ge.add(this.source.subscribe(new Z(this.getSubject(),this))),ge.closed&&(this._connection=null,ge=re.w.EMPTY)),ge}refCount(){return(0,ke.x)()(this)}}const Q=(()=>{const se=ae.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:se._subscribe},_isComplete:{value:se._isComplete,writable:!0},getSubject:{value:se.getSubject},connect:{value:se.connect},refCount:{value:se.refCount}}})();class Z extends _.Yc{constructor(ge,Ee){super(ge),this.connectable=Ee}_error(ge){this._unsubscribe(),super._error(ge)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const ge=this.connectable;if(ge){this.connectable=null;const Ee=ge._connection;ge._refCount=0,ge._subject=null,ge._connection=null,Ee&&Ee.unsubscribe()}}}},8071:(nn,ot,L)=>{"use strict";L.d(ot,{z:()=>ke});var _=L(5917),P=L(3282);function ke(...ae){return(0,P.J)(1)((0,_.of)(...ae))}},9193:(nn,ot,L)=>{"use strict";L.d(ot,{E:()=>P,c:()=>re});var _=L(8891);const P=new _.y(ae=>ae.complete());function re(ae){return ae?function(ae){return new _.y(Q=>ae.schedule(()=>Q.complete()))}(ae):P}},4402:(nn,ot,L)=>{"use strict";L.d(ot,{D:()=>ut});var _=L(8891),P=L(7444),re=L(5319),ke=L(6554),Z=L(4087),ne=L(377),ge=L(4072),Ee=L(9489);function ut(Te,Ke){return Ke?function(Te,Ke){if(null!=Te){if(function(Te){return Te&&"function"==typeof Te[ke.L]}(Te))return function(Te,Ke){return new _.y($e=>{const qe=new re.w;return qe.add(Ke.schedule(()=>{const Ie=Te[ke.L]();qe.add(Ie.subscribe({next(Me){qe.add(Ke.schedule(()=>$e.next(Me)))},error(Me){qe.add(Ke.schedule(()=>$e.error(Me)))},complete(){qe.add(Ke.schedule(()=>$e.complete()))}}))})),qe})}(Te,Ke);if((0,ge.t)(Te))return function(Te,Ke){return new _.y($e=>{const qe=new re.w;return qe.add(Ke.schedule(()=>Te.then(Ie=>{qe.add(Ke.schedule(()=>{$e.next(Ie),qe.add(Ke.schedule(()=>$e.complete()))}))},Ie=>{qe.add(Ke.schedule(()=>$e.error(Ie)))}))),qe})}(Te,Ke);if((0,Ee.z)(Te))return(0,Z.r)(Te,Ke);if(function(Te){return Te&&"function"==typeof Te[ne.hZ]}(Te)||"string"==typeof Te)return function(Te,Ke){if(!Te)throw new Error("Iterable cannot be null");return new _.y($e=>{const qe=new re.w;let Ie;return qe.add(()=>{Ie&&"function"==typeof Ie.return&&Ie.return()}),qe.add(Ke.schedule(()=>{Ie=Te[ne.hZ](),qe.add(Ke.schedule(function(){if($e.closed)return;let Me,ct;try{const at=Ie.next();Me=at.value,ct=at.done}catch(at){return void $e.error(at)}ct?$e.complete():($e.next(Me),this.schedule())}))})),qe})}(Te,Ke)}throw new TypeError((null!==Te&&typeof Te||Te)+" is not observable")}(Te,Ke):Te instanceof _.y?Te:new _.y((0,P.s)(Te))}},6693:(nn,ot,L)=>{"use strict";L.d(ot,{n:()=>ke});var _=L(8891),P=L(5015),re=L(4087);function ke(ae,Q){return Q?(0,re.r)(ae,Q):new _.y((0,P.V)(ae))}},6682:(nn,ot,L)=>{"use strict";L.d(ot,{T:()=>ae});var _=L(8891),P=L(4869),re=L(3282),ke=L(6693);function ae(...Q){let Z=Number.POSITIVE_INFINITY,ne=null,we=Q[Q.length-1];return(0,P.K)(we)?(ne=Q.pop(),Q.length>1&&"number"==typeof Q[Q.length-1]&&(Z=Q.pop())):"number"==typeof we&&(Z=Q.pop()),null===ne&&1===Q.length&&Q[0]instanceof _.y?Q[0]:(0,re.J)(Z)((0,ke.n)(Q,ne))}},5917:(nn,ot,L)=>{"use strict";L.d(ot,{of:()=>ke});var _=L(4869),P=L(6693),re=L(4087);function ke(...ae){let Q=ae[ae.length-1];return(0,_.K)(Q)?(ae.pop(),(0,re.r)(ae,Q)):(0,P.n)(ae)}},5242:(nn,ot,L)=>{"use strict";L.d(ot,{d:()=>P});var _=L(7393);function P(ae=null){return Q=>Q.lift(new re(ae))}class re{constructor(Q){this.defaultValue=Q}call(Q,Z){return Z.subscribe(new ke(Q,this.defaultValue))}}class ke extends _.L{constructor(Q,Z){super(Q),this.defaultValue=Z,this.isEmpty=!0}_next(Q){this.isEmpty=!1,this.destination.next(Q)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},7519:(nn,ot,L)=>{"use strict";L.d(ot,{x:()=>P});var _=L(7393);function P(ae,Q){return Z=>Z.lift(new re(ae,Q))}class re{constructor(Q,Z){this.compare=Q,this.keySelector=Z}call(Q,Z){return Z.subscribe(new ke(Q,this.compare,this.keySelector))}}class ke extends _.L{constructor(Q,Z,ne){super(Q),this.keySelector=ne,this.hasKey=!1,"function"==typeof Z&&(this.compare=Z)}compare(Q,Z){return Q===Z}_next(Q){let Z;try{const{keySelector:we}=this;Z=we?we(Q):Q}catch(we){return this.destination.error(we)}let ne=!1;if(this.hasKey)try{const{compare:we}=this;ne=we(this.key,Z)}catch(we){return this.destination.error(we)}else this.hasKey=!0;ne||(this.key=Z,this.destination.next(Q))}}},5435:(nn,ot,L)=>{"use strict";L.d(ot,{h:()=>P});var _=L(7393);function P(ae,Q){return function(ne){return ne.lift(new re(ae,Q))}}class re{constructor(Q,Z){this.predicate=Q,this.thisArg=Z}call(Q,Z){return Z.subscribe(new ke(Q,this.predicate,this.thisArg))}}class ke extends _.L{constructor(Q,Z,ne){super(Q),this.predicate=Z,this.thisArg=ne,this.count=0}_next(Q){let Z;try{Z=this.predicate.call(this.thisArg,Q,this.count++)}catch(ne){return void this.destination.error(ne)}Z&&this.destination.next(Q)}}},8049:(nn,ot,L)=>{"use strict";L.d(ot,{P:()=>Z});var _=L(3410),P=L(5435),re=L(5257),ke=L(5242),ae=L(4635),Q=L(4487);function Z(ne,we){const se=arguments.length>=2;return ge=>ge.pipe(ne?(0,P.h)((Ee,_e)=>ne(Ee,_e,ge)):Q.y,(0,re.q)(1),se?(0,ke.d)(we):(0,ae.T)(()=>new _.K))}},8002:(nn,ot,L)=>{"use strict";L.d(ot,{U:()=>P});var _=L(7393);function P(ae,Q){return function(ne){if("function"!=typeof ae)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return ne.lift(new re(ae,Q))}}class re{constructor(Q,Z){this.project=Q,this.thisArg=Z}call(Q,Z){return Z.subscribe(new ke(Q,this.project,this.thisArg))}}class ke extends _.L{constructor(Q,Z,ne){super(Q),this.project=Z,this.count=0,this.thisArg=ne||this}_next(Q){let Z;try{Z=this.project.call(this.thisArg,Q,this.count++)}catch(ne){return void this.destination.error(ne)}this.destination.next(Z)}}},3282:(nn,ot,L)=>{"use strict";L.d(ot,{J:()=>re});var _=L(9773),P=L(4487);function re(ke=Number.POSITIVE_INFINITY){return(0,_.zg)(P.y,ke)}},9773:(nn,ot,L)=>{"use strict";L.d(ot,{zg:()=>ke});var _=L(8002),P=L(4402),re=L(5345);function ke(ne,we,se=Number.POSITIVE_INFINITY){return"function"==typeof we?ge=>ge.pipe(ke((Ee,_e)=>(0,P.D)(ne(Ee,_e)).pipe((0,_.U)((De,ut)=>we(Ee,De,_e,ut))),se)):("number"==typeof we&&(se=we),ge=>ge.lift(new ae(ne,se)))}class ae{constructor(we,se=Number.POSITIVE_INFINITY){this.project=we,this.concurrent=se}call(we,se){return se.subscribe(new Q(we,this.project,this.concurrent))}}class Q extends re.Ds{constructor(we,se,ge=Number.POSITIVE_INFINITY){super(we),this.project=se,this.concurrent=ge,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(we){this.active<this.concurrent?this._tryNext(we):this.buffer.push(we)}_tryNext(we){let se;const ge=this.index++;try{se=this.project(we,ge)}catch(Ee){return void this.destination.error(Ee)}this.active++,this._innerSub(se)}_innerSub(we){const se=new re.IY(this),ge=this.destination;ge.add(se);const Ee=(0,re.ft)(we,se);Ee!==se&&ge.add(Ee)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(we){this.destination.next(we)}notifyComplete(){const we=this.buffer;this.active--,we.length>0?this._next(we.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(nn,ot,L)=>{"use strict";L.d(ot,{ht:()=>ge,QV:()=>we});var _=L(7393),P=L(9193),re=L(5917),ke=L(8891);class ne{constructor(De,ut,Te){this.kind=De,this.value=ut,this.error=Te,this.hasValue="N"===De}observe(De){switch(this.kind){case"N":return De.next&&De.next(this.value);case"E":return De.error&&De.error(this.error);case"C":return De.complete&&De.complete()}}do(De,ut,Te){switch(this.kind){case"N":return De&&De(this.value);case"E":return ut&&ut(this.error);case"C":return Te&&Te()}}accept(De,ut,Te){return De&&"function"==typeof De.next?this.observe(De):this.do(De,ut,Te)}toObservable(){switch(this.kind){case"N":return(0,re.of)(this.value);case"E":return _e=this.error,new ke.y(ut=>ut.error(_e));case"C":return(0,P.c)()}var _e;throw new Error("unexpected notification kind value")}static createNext(De){return void 0!==De?new ne("N",De):ne.undefinedValueNotification}static createError(De){return new ne("E",void 0,De)}static createComplete(){return ne.completeNotification}}function we(_e,De=0){return function(Te){return Te.lift(new se(_e,De))}}ne.completeNotification=new ne("C"),ne.undefinedValueNotification=new ne("N",void 0);class se{constructor(De,ut=0){this.scheduler=De,this.delay=ut}call(De,ut){return ut.subscribe(new ge(De,this.scheduler,this.delay))}}class ge extends _.L{constructor(De,ut,Te=0){super(De),this.scheduler=ut,this.delay=Te}static dispatch(De){const{notification:ut,destination:Te}=De;ut.observe(Te),this.unsubscribe()}scheduleMessage(De){this.destination.add(this.scheduler.schedule(ge.dispatch,this.delay,new Ee(De,this.destination)))}_next(De){this.scheduleMessage(ne.createNext(De))}_error(De){this.scheduleMessage(ne.createError(De)),this.unsubscribe()}_complete(){this.scheduleMessage(ne.createComplete()),this.unsubscribe()}}class Ee{constructor(De,ut){this.notification=De,this.destination=ut}}},1307:(nn,ot,L)=>{"use strict";L.d(ot,{x:()=>P});var _=L(7393);function P(){return function(Q){return Q.lift(new re(Q))}}class re{constructor(Q){this.connectable=Q}call(Q,Z){const{connectable:ne}=this;ne._refCount++;const we=new ke(Q,ne),se=Z.subscribe(we);return we.closed||(we.connection=ne.connect()),se}}class ke extends _.L{constructor(Q,Z){super(Q),this.connectable=Z}_unsubscribe(){const{connectable:Q}=this;if(!Q)return void(this.connection=null);this.connectable=null;const Z=Q._refCount;if(Z<=0)return void(this.connection=null);if(Q._refCount=Z-1,Z>1)return void(this.connection=null);const{connection:ne}=this,we=Q._connection;this.connection=null,we&&(!ne||we===ne)&&we.unsubscribe()}}},2145:(nn,ot,L)=>{"use strict";L.d(ot,{R:()=>P});var _=L(7393);function P(ae,Q){let Z=!1;return arguments.length>=2&&(Z=!0),function(we){return we.lift(new re(ae,Q,Z))}}class re{constructor(Q,Z,ne=!1){this.accumulator=Q,this.seed=Z,this.hasSeed=ne}call(Q,Z){return Z.subscribe(new ke(Q,this.accumulator,this.seed,this.hasSeed))}}class ke extends _.L{constructor(Q,Z,ne,we){super(Q),this.accumulator=Z,this._seed=ne,this.hasSeed=we,this.index=0}get seed(){return this._seed}set seed(Q){this.hasSeed=!0,this._seed=Q}_next(Q){if(this.hasSeed)return this._tryNext(Q);this.seed=Q,this.destination.next(Q)}_tryNext(Q){const Z=this.index++;let ne;try{ne=this.accumulator(this.seed,Q,Z)}catch(we){this.destination.error(we)}this.seed=ne,this.destination.next(ne)}}},8819:(nn,ot,L)=>{"use strict";L.d(ot,{B:()=>Z});var _=L(2441);var ke=L(1307),ae=L(9765);function Q(){return new ae.xQ}function Z(){return ne=>(0,ke.x)()(function(ne,we){return function(ge){let Ee;Ee="function"==typeof ne?ne:function(){return ne};const _e=Object.create(ge,_.N);return _e.source=ge,_e.subjectFactory=Ee,_e}}(Q)(ne))}},9761:(nn,ot,L)=>{"use strict";L.d(ot,{O:()=>re});var _=L(8071),P=L(4869);function re(...ke){const ae=ke[ke.length-1];return(0,P.K)(ae)?(ke.pop(),Q=>(0,_.z)(ke,Q,ae)):Q=>(0,_.z)(ke,Q)}},3101:(nn,ot,L)=>{"use strict";L.d(ot,{R:()=>Ke});var _=L(8891);let P=1;const re=Promise.resolve(),ke={};function ae(qe){return qe in ke&&(delete ke[qe],!0)}const Q={setImmediate(qe){const Ie=P++;return ke[Ie]=!0,re.then(()=>ae(Ie)&&qe()),Ie},clearImmediate(qe){ae(qe)}};var ne=L(6465),se=L(6102);const _e=new class extends se.v{flush(Ie){this.active=!0,this.scheduled=void 0;const{actions:Me}=this;let ct,at=-1,Vt=Me.length;Ie=Ie||Me.shift();do{if(ct=Ie.execute(Ie.state,Ie.delay))break}while(++at<Vt&&(Ie=Me.shift()));if(this.active=!1,ct){for(;++at<Vt&&(Ie=Me.shift());)Ie.unsubscribe();throw ct}}}(class extends ne.o{constructor(Ie,Me){super(Ie,Me),this.scheduler=Ie,this.work=Me}requestAsyncId(Ie,Me,ct=0){return null!==ct&&ct>0?super.requestAsyncId(Ie,Me,ct):(Ie.actions.push(this),Ie.scheduled||(Ie.scheduled=Q.setImmediate(Ie.flush.bind(Ie,null))))}recycleAsyncId(Ie,Me,ct=0){if(null!==ct&&ct>0||null===ct&&this.delay>0)return super.recycleAsyncId(Ie,Me,ct);0===Ie.actions.length&&(Q.clearImmediate(Me),Ie.scheduled=void 0)}});var De=L(9796);class Te extends _.y{constructor(Ie,Me=0,ct=_e){var qe;super(),this.source=Ie,this.delayTime=Me,this.scheduler=ct,(!(!(0,De.k)(qe=Me)&&qe-parseFloat(qe)+1>=0)||Me<0)&&(this.delayTime=0),(!ct||"function"!=typeof ct.schedule)&&(this.scheduler=_e)}static create(Ie,Me=0,ct=_e){return new Te(Ie,Me,ct)}static dispatch(Ie){const{source:Me,subscriber:ct}=Ie;return this.add(Me.subscribe(ct))}_subscribe(Ie){return this.scheduler.schedule(Te.dispatch,this.delayTime,{source:this.source,subscriber:Ie})}}function Ke(qe,Ie=0){return function(ct){return ct.lift(new $e(qe,Ie))}}class $e{constructor(Ie,Me){this.scheduler=Ie,this.delay=Me}call(Ie,Me){return new Te(Me,this.delay,this.scheduler).subscribe(Ie)}}},3190:(nn,ot,L)=>{"use strict";L.d(ot,{w:()=>ke});var _=L(8002),P=L(4402),re=L(5345);function ke(Z,ne){return"function"==typeof ne?we=>we.pipe(ke((se,ge)=>(0,P.D)(Z(se,ge)).pipe((0,_.U)((Ee,_e)=>ne(se,Ee,ge,_e))))):we=>we.lift(new ae(Z))}class ae{constructor(ne){this.project=ne}call(ne,we){return we.subscribe(new Q(ne,this.project))}}class Q extends re.Ds{constructor(ne,we){super(ne),this.project=we,this.index=0}_next(ne){let we;const se=this.index++;try{we=this.project(ne,se)}catch(ge){return void this.destination.error(ge)}this._innerSub(we)}_innerSub(ne){const we=this.innerSubscription;we&&we.unsubscribe();const se=new re.IY(this),ge=this.destination;ge.add(se),this.innerSubscription=(0,re.ft)(ne,se),this.innerSubscription!==se&&ge.add(this.innerSubscription)}_complete(){const{innerSubscription:ne}=this;(!ne||ne.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(ne){this.destination.next(ne)}}},5257:(nn,ot,L)=>{"use strict";L.d(ot,{q:()=>ke});var _=L(7393),P=L(7108),re=L(9193);function ke(Z){return ne=>0===Z?(0,re.c)():ne.lift(new ae(Z))}class ae{constructor(ne){if(this.total=ne,this.total<0)throw new P.W}call(ne,we){return we.subscribe(new Q(ne,this.total))}}class Q extends _.L{constructor(ne,we){super(ne),this.total=we,this.count=0}_next(ne){const we=this.total,se=++this.count;se<=we&&(this.destination.next(ne),se===we&&(this.destination.complete(),this.unsubscribe()))}}},3342:(nn,ot,L)=>{"use strict";L.d(ot,{b:()=>ke});var _=L(7393);function P(){}var re=L(9105);function ke(Z,ne,we){return function(ge){return ge.lift(new ae(Z,ne,we))}}class ae{constructor(ne,we,se){this.nextOrObserver=ne,this.error=we,this.complete=se}call(ne,we){return we.subscribe(new Q(ne,this.nextOrObserver,this.error,this.complete))}}class Q extends _.L{constructor(ne,we,se,ge){super(ne),this._tapNext=P,this._tapError=P,this._tapComplete=P,this._tapError=se||P,this._tapComplete=ge||P,(0,re.m)(we)?(this._context=this,this._tapNext=we):we&&(this._context=we,this._tapNext=we.next||P,this._tapError=we.error||P,this._tapComplete=we.complete||P)}_next(ne){try{this._tapNext.call(this._context,ne)}catch(we){return void this.destination.error(we)}this.destination.next(ne)}_error(ne){try{this._tapError.call(this._context,ne)}catch(we){return void this.destination.error(we)}this.destination.error(ne)}_complete(){try{this._tapComplete.call(this._context)}catch(ne){return void this.destination.error(ne)}return this.destination.complete()}}},4635:(nn,ot,L)=>{"use strict";L.d(ot,{T:()=>re});var _=L(3410),P=L(7393);function re(Z=Q){return ne=>ne.lift(new ke(Z))}class ke{constructor(ne){this.errorFactory=ne}call(ne,we){return we.subscribe(new ae(ne,this.errorFactory))}}class ae extends P.L{constructor(ne,we){super(ne),this.errorFactory=we,this.hasValue=!1}_next(ne){this.hasValue=!0,this.destination.next(ne)}_complete(){if(this.hasValue)return this.destination.complete();{let ne;try{ne=this.errorFactory()}catch(we){ne=we}this.destination.error(ne)}}}function Q(){return new _.K}},4087:(nn,ot,L)=>{"use strict";L.d(ot,{r:()=>re});var _=L(8891),P=L(5319);function re(ke,ae){return new _.y(Q=>{const Z=new P.w;let ne=0;return Z.add(ae.schedule(function(){ne!==ke.length?(Q.next(ke[ne++]),Q.closed||Z.add(this.schedule())):Q.complete()})),Z})}},6465:(nn,ot,L)=>{"use strict";L.d(ot,{o:()=>re});var _=L(5319);class P extends _.w{constructor(ae,Q){super()}schedule(ae,Q=0){return this}}class re extends P{constructor(ae,Q){super(ae,Q),this.scheduler=ae,this.work=Q,this.pending=!1}schedule(ae,Q=0){if(this.closed)return this;this.state=ae;const Z=this.id,ne=this.scheduler;return null!=Z&&(this.id=this.recycleAsyncId(ne,Z,Q)),this.pending=!0,this.delay=Q,this.id=this.id||this.requestAsyncId(ne,this.id,Q),this}requestAsyncId(ae,Q,Z=0){return setInterval(ae.flush.bind(ae,this),Z)}recycleAsyncId(ae,Q,Z=0){if(null!==Z&&this.delay===Z&&!1===this.pending)return Q;clearInterval(Q)}execute(ae,Q){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Z=this._execute(ae,Q);if(Z)return Z;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ae,Q){let ne,Z=!1;try{this.work(ae)}catch(we){Z=!0,ne=!!we&&we||new Error(we)}if(Z)return this.unsubscribe(),ne}_unsubscribe(){const ae=this.id,Q=this.scheduler,Z=Q.actions,ne=Z.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==ne&&Z.splice(ne,1),null!=ae&&(this.id=this.recycleAsyncId(Q,ae,null)),this.delay=null}}},6102:(nn,ot,L)=>{"use strict";L.d(ot,{v:()=>P});let _=(()=>{class re{constructor(ae,Q=re.now){this.SchedulerAction=ae,this.now=Q}schedule(ae,Q=0,Z){return new this.SchedulerAction(this,ae).schedule(Z,Q)}}return re.now=()=>Date.now(),re})();class P extends _{constructor(ke,ae=_.now){super(ke,()=>P.delegate&&P.delegate!==this?P.delegate.now():ae()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ke,ae=0,Q){return P.delegate&&P.delegate!==this?P.delegate.schedule(ke,ae,Q):super.schedule(ke,ae,Q)}flush(ke){const{actions:ae}=this;if(this.active)return void ae.push(ke);let Q;this.active=!0;do{if(Q=ke.execute(ke.state,ke.delay))break}while(ke=ae.shift());if(this.active=!1,Q){for(;ke=ae.shift();)ke.unsubscribe();throw Q}}}},3637:(nn,ot,L)=>{"use strict";L.d(ot,{z:()=>re});var _=L(6465);const re=new(L(6102).v)(_.o)},7771:(nn,ot,L)=>{"use strict";L.d(ot,{c:()=>Q,N:()=>ae});var _=L(6465),re=L(6102);const ae=new class extends re.v{}(class extends _.o{constructor(ne,we){super(ne,we),this.scheduler=ne,this.work=we}schedule(ne,we=0){return we>0?super.schedule(ne,we):(this.delay=we,this.state=ne,this.scheduler.flush(this),this)}execute(ne,we){return we>0||this.closed?super.execute(ne,we):this._execute(ne,we)}requestAsyncId(ne,we,se=0){return null!==se&&se>0||null===se&&this.delay>0?super.requestAsyncId(ne,we,se):ne.flush(this)}}),Q=ae},377:(nn,ot,L)=>{"use strict";L.d(ot,{hZ:()=>P});const P="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(nn,ot,L)=>{"use strict";L.d(ot,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(nn,ot,L)=>{"use strict";L.d(ot,{b:()=>_});const _="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7108:(nn,ot,L)=>{"use strict";L.d(ot,{W:()=>P});const P=(()=>{function re(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return re.prototype=Object.create(Error.prototype),re})()},3410:(nn,ot,L)=>{"use strict";L.d(ot,{K:()=>P});const P=(()=>{function re(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return re.prototype=Object.create(Error.prototype),re})()},7971:(nn,ot,L)=>{"use strict";L.d(ot,{N:()=>P});const P=(()=>{function re(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return re.prototype=Object.create(Error.prototype),re})()},4449:(nn,ot,L)=>{"use strict";function _(P){setTimeout(()=>{throw P},0)}L.d(ot,{z:()=>_})},4487:(nn,ot,L)=>{"use strict";function _(P){return P}L.d(ot,{y:()=>_})},9796:(nn,ot,L)=>{"use strict";L.d(ot,{k:()=>_});const _=Array.isArray||(P=>P&&"number"==typeof P.length)},9489:(nn,ot,L)=>{"use strict";L.d(ot,{z:()=>_});const _=P=>P&&"number"==typeof P.length&&"function"!=typeof P},9105:(nn,ot,L)=>{"use strict";function _(P){return"function"==typeof P}L.d(ot,{m:()=>_})},1555:(nn,ot,L)=>{"use strict";function _(P){return null!==P&&"object"==typeof P}L.d(ot,{K:()=>_})},4072:(nn,ot,L)=>{"use strict";function _(P){return!!P&&"function"!=typeof P.subscribe&&"function"==typeof P.then}L.d(ot,{t:()=>_})},4869:(nn,ot,L)=>{"use strict";function _(P){return P&&"function"==typeof P.schedule}L.d(ot,{K:()=>_})},4022:(nn,ot,L)=>{"use strict";L.d(ot,{z:()=>P,U:()=>re});var _=L(4487);function P(...ke){return re(ke)}function re(ke){return 0===ke.length?_.y:1===ke.length?ke[0]:function(Q){return ke.reduce((Z,ne)=>ne(Z),Q)}}},7444:(nn,ot,L)=>{"use strict";L.d(ot,{s:()=>ge});var _=L(5015),P=L(4449),ke=L(377),Q=L(6554),ne=L(9489),we=L(4072),se=L(1555);const ge=Ee=>{if(Ee&&"function"==typeof Ee[Q.L])return(Ee=>_e=>{const De=Ee[Q.L]();if("function"!=typeof De.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return De.subscribe(_e)})(Ee);if((0,ne.z)(Ee))return(0,_.V)(Ee);if((0,we.t)(Ee))return(Ee=>_e=>(Ee.then(De=>{_e.closed||(_e.next(De),_e.complete())},De=>_e.error(De)).then(null,P.z),_e))(Ee);if(Ee&&"function"==typeof Ee[ke.hZ])return(Ee=>_e=>{const De=Ee[ke.hZ]();for(;;){let ut;try{ut=De.next()}catch(Te){return _e.error(Te),_e}if(ut.done){_e.complete();break}if(_e.next(ut.value),_e.closed)break}return"function"==typeof De.return&&_e.add(()=>{De.return&&De.return()}),_e})(Ee);{const De=`You provided ${(0,se.K)(Ee)?"an invalid object":`'${Ee}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(De)}}},5015:(nn,ot,L)=>{"use strict";L.d(ot,{V:()=>_});const _=P=>re=>{for(let ke=0,ae=P.length;ke<ae&&!re.closed;ke++)re.next(P[ke]);re.complete()}},509:(nn,ot,L)=>{"use strict";L.d(ot,{D:()=>ae});var _=L(7393);class P extends _.L{constructor(Z,ne,we){super(),this.parent=Z,this.outerValue=ne,this.outerIndex=we,this.index=0}_next(Z){this.parent.notifyNext(this.outerValue,Z,this.outerIndex,this.index++,this)}_error(Z){this.parent.notifyError(Z,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var re=L(7444),ke=L(8891);function ae(Q,Z,ne,we,se=new P(Q,ne,we)){if(!se.closed)return Z instanceof ke.y?Z.subscribe(se):(0,re.s)(Z)(se)}},6812:(nn,ot,L)=>{"use strict";L.r(ot),L.d(ot,{HomeModule:()=>ct});var _=L(8583),P=L(8945),re=L(174),ke=L(8239);const Q=(0,L(3796).fo)("TextToSpeech",{web:()=>L.e(322).then(L.bind(L,322)).then(at=>new at.TextToSpeechWeb)});"speechSynthesis"in window&&(window,console.log("using window.speechSynthesis"));var Z=L(7716),ne=L(3792),we=L(7556),se=L(3071);function ge(at,Vt){1&at&&Z._UZ(0,"ion-icon",3)}let Ee=(()=>{class at{constructor(E,Ye){this.commentService=E,this.userService=Ye}ngOnInit(){this.comment.speak&&this.speakMessage()}getTimeStamp(){if(null==this.comment.createdTime)return"Saving...";let E=this.comment.createdTime.seconds,Ye="";this.comment.updatedTime&&this.comment.textEdited&&(Ye="Edited ",E=this.comment.updatedTime.seconds);const gt=new Date(1e3*E),We=gt.getDate(),He=gt.getMonth();return`${Ye}${gt.getFullYear()}-${We}-${He+1} ${gt.getHours()}:${gt.getMinutes()}`}speakMessage(){var E=this;return(0,ke.Z)(function*(){try{console.log("using library"),yield Q.speak({text:E.comment.content,lang:"en-US",rate:1,pitch:1,volume:1,category:"ambient"});const Ye=E.userService.getUserDataFromLocalStorage(),gt=Object.assign({},E.comment);delete gt.id,E.commentService.updateComment(Ye.id,E.comment.id,Object.assign(Object.assign({},gt),{speak:!1}),!1)}catch(Ye){console.log(Ye)}})()}}return at.\u0275fac=function(E){return new(E||at)(Z.Y36(ne.O),Z.Y36(se.K))},at.\u0275cmp=Z.Xpm({type:at,selectors:[["app-comment"]],inputs:{comment:"comment",commentId:"commentId",textToSpeechAvailable:"textToSpeechAvailable"},decls:6,vars:4,consts:[[3,"ngClass"],[1,"metadata"],["name","volume-medium-outline",4,"ngIf"],["name","volume-medium-outline"]],template:function(E,Ye){1&E&&(Z.TgZ(0,"div",0),Z._uU(1),Z.TgZ(2,"div",1),Z.YNc(3,ge,1,0,"ion-icon",2),Z.TgZ(4,"p"),Z._uU(5),Z.qZA(),Z.qZA(),Z.qZA()),2&E&&(Z.Q6J("ngClass",Ye.comment.speak?"comment-item speak":"comment-item"),Z.xp6(1),Z.hij(" ",Ye.comment.content," "),Z.xp6(2),Z.Q6J("ngIf",Ye.comment.speak),Z.xp6(2),Z.Oqu(Ye.getTimeStamp()))},directives:[_.mk,_.O5,P.gu],styles:[".comment-item[_ngcontent-%COMP%]{width:100%;background:#f1f1f1;padding:1rem 1em .5em;font-size:1em;border-radius:14px;white-space:pre-wrap}.comment-item.speak[_ngcontent-%COMP%]{background:#d3f2f5}.comment-item[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]{font-size:.75em;display:flex;align-items:center;justify-content:space-between;padding:0;margin:.5rem 0}.comment-item[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{justify-self:flex-end;flex-grow:1;text-align:right;margin:0}@media (prefers-color-scheme: dark){.comment-item[_ngcontent-%COMP%]{background:#3b3b3b}.comment-item.speak[_ngcontent-%COMP%]{background-color:#3160ab}}"]}),at})();const _e=["scrollContent"];function De(at,Vt){1&at&&(Z.TgZ(0,"ion-item",23),Z._UZ(1,"ion-spinner"),Z.qZA())}function ut(at,Vt){1&at&&(Z.TgZ(0,"ion-item"),Z._uU(1,"You don't have any comments yet "),Z.qZA())}function Te(at,Vt){if(1&at){const E=Z.EpF();Z.TgZ(0,"ion-item-sliding",24),Z.TgZ(1,"ion-item",24),Z._UZ(2,"app-comment",25),Z.qZA(),Z.TgZ(3,"ion-item-options",26),Z.TgZ(4,"ion-item-option",27),Z.NdJ("click",function(){const We=Z.CHM(E).$implicit;return Z.oxw().editComment(We)}),Z._UZ(5,"ion-icon",28),Z.qZA(),Z.qZA(),Z.qZA()}if(2&at){const E=Vt.$implicit,Ye=Z.oxw();Z.xp6(2),Z.Q6J("textToSpeechAvailable",Ye.textToSpeechSupport)("commentId",E.id)("comment",E)}}function Ke(at,Vt){if(1&at){const E=Z.EpF();Z.TgZ(0,"div",29),Z.TgZ(1,"ion-button",30),Z.NdJ("click",function(){return Z.CHM(E),Z.oxw().saveComment()}),Z._UZ(2,"ion-icon",31),Z.qZA(),Z.TgZ(3,"ion-button",30),Z.NdJ("click",function(){return Z.CHM(E),Z.oxw().saveComment(!0)}),Z._UZ(4,"ion-icon",32),Z.qZA(),Z.qZA()}}function $e(at,Vt){if(1&at){const E=Z.EpF();Z.TgZ(0,"div",29),Z.TgZ(1,"ion-button",33),Z.NdJ("click",function(){return Z.CHM(E),Z.oxw().saveComment()}),Z._uU(2," Save "),Z.qZA(),Z.TgZ(3,"ion-button",33),Z.NdJ("click",function(){return Z.CHM(E),Z.oxw().cancelEdit()}),Z._uU(4," Cancel "),Z.qZA(),Z.qZA()}}const Ie=[{path:"",component:(()=>{class at{constructor(E,Ye,gt,We){this.cmtSvc=E,this.auth=Ye,this.userSvc=gt,this.router=We,this.showEditButtons=!1,this.showSpinner=!0,this.textToSpeechSupport=!1}ngOnInit(){this.user=this.userSvc.getUserDataFromLocalStorage(),this.user.displayName||(this.user.displayName="",this.userSvc.getUserInfo(this.user.id).subscribe(E=>{this.user.displayName=E.displayName,this.userSvc.saveUserToLocalStorage(this.user)})),this.preload(),this.cmtSvc.getComments(this.user.id).subscribe(E=>{console.log(E),this.comments=E,this.showSpinner=!1,this.scrollToBottomOnInit()})}preload(){return(0,ke.Z)(function*(){setTimeout((0,ke.Z)(function*(){console.log(yield Q.getSupportedVoices())}),1e3)})()}scrollToBottomOnInit(){const E=setTimeout(()=>{this.scrollContent.scrollToBottom(500),clearTimeout(E)},300)}logout(){this.auth.logout().then(()=>{this.router.navigateByUrl("/login",{replaceUrl:!0})})}saveComment(E=!1){if(console.log(Q.getSystemVolume()),null!==this.commentText&&""!==this.commentText){const Ye={content:this.commentText,speak:E};this.commentId&&null!==this.commentText?this.cmtSvc.updateComment(this.user.id,this.commentId,Ye,!0):this.cmtSvc.addComment(this.user.id,Ye),this.commentText="",this.commentId=null,this.showEditButtons=!1}}handleChange(E){this.commentText=E.target.innerHTML,console.log(E.target.innerHTML)}editComment(E){this.commentId=E.id,this.commentText=E.content,this.showEditButtons=!0,this.slidingList.closeSlidingItems()}trackByFn(E,Ye){return Ye.id}cancelEdit(){this.commentId=null,this.commentText="",this.showEditButtons=!1}}return at.\u0275fac=function(E){return new(E||at)(Z.Y36(ne.O),Z.Y36(we.e),Z.Y36(se.K),Z.Y36(re.F0))},at.\u0275cmp=Z.Xpm({type:at,selectors:[["app-home"]],viewQuery:function(E,Ye){if(1&E&&(Z.Gf(P.q_,5),Z.Gf(_e,5)),2&E){let gt;Z.iGM(gt=Z.CRH())&&(Ye.slidingList=gt.first),Z.iGM(gt=Z.CRH())&&(Ye.scrollContent=gt.first)}},decls:38,vars:11,consts:[["color","primary"],["slot","start"],["name","person-circle-outline","size","large"],["side","start","menuId","first","contentId","main"],[1,"nav-content"],[1,"user-container"],[1,"avatar"],["name","person-circle-outline",1,"avatar-alt"],[1,"user-info"],[1,"display-name"],[1,"email"],["color","danger",3,"click"],["id","main",3,"scrollEvents","fullscreen"],["scrollContent",""],["slidingList",""],["class","ion-no-padding","lines","none",4,"ngIf"],[4,"ngIf"],["lines","none",4,"ngFor","ngForOf","ngForTrackBy"],["lines","none",1,"comment-spacer"],[1,"form-container"],[1,"form-row"],["placeholder","Enter more information here...",3,"value","change"],["class","edit-btn-container",4,"ngIf"],["lines","none",1,"ion-no-padding"],["lines","none"],[3,"textToSpeechAvailable","commentId","comment"],["side","end"],[3,"click"],["slot","icon-only","name","pencil-outline"],[1,"edit-btn-container"],["shape","circle",3,"click"],["name","add-outline","size","large"],["name","volume-medium-outline"],["size","small",3,"click"]],template:function(E,Ye){1&E&&(Z.TgZ(0,"ion-header"),Z.TgZ(1,"ion-toolbar",0),Z.TgZ(2,"ion-buttons",1),Z.TgZ(3,"ion-menu-button"),Z._UZ(4,"ion-icon",2),Z.qZA(),Z.qZA(),Z.TgZ(5,"ion-title"),Z._uU(6,"TrailApp"),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(7,"ion-menu",3),Z.TgZ(8,"ion-header"),Z.TgZ(9,"ion-toolbar",0),Z.TgZ(10,"ion-title"),Z._uU(11,"User Information"),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(12,"ion-content"),Z.TgZ(13,"div",4),Z.TgZ(14,"div",5),Z.TgZ(15,"div",6),Z._UZ(16,"ion-icon",7),Z.qZA(),Z.TgZ(17,"div",8),Z.TgZ(18,"div",9),Z._uU(19),Z.qZA(),Z.TgZ(20,"div",10),Z._uU(21),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(22,"ion-button",11),Z.NdJ("click",function(){return Ye.logout()}),Z._uU(23,"Logout"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(24,"ion-content",12,13),Z.TgZ(26,"ion-list",null,14),Z.YNc(28,De,2,0,"ion-item",15),Z.YNc(29,ut,2,0,"ion-item",16),Z.YNc(30,Te,6,3,"ion-item-sliding",17),Z._UZ(31,"ion-item",18),Z.qZA(),Z.TgZ(32,"div",19),Z.TgZ(33,"form"),Z.TgZ(34,"div",20),Z.TgZ(35,"ion-textarea",21),Z.NdJ("change",function(We){return Ye.handleChange(We)}),Z.qZA(),Z.YNc(36,Ke,5,0,"div",22),Z.YNc(37,$e,5,0,"div",22),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA()),2&E&&(Z.xp6(19),Z.Oqu(Ye.user.displayName),Z.xp6(2),Z.Oqu(Ye.user.email),Z.xp6(3),Z.Q6J("scrollEvents",!0)("fullscreen",!0),Z.xp6(4),Z.Q6J("ngIf",Ye.showSpinner),Z.xp6(1),Z.Q6J("ngIf",!(Ye.comments&&0!=Ye.comments.length||Ye.showSpinner)),Z.xp6(1),Z.Q6J("ngForOf",Ye.comments)("ngForTrackBy",Ye.trackByFn),Z.xp6(5),Z.s9C("value",Ye.commentText),Z.xp6(1),Z.Q6J("ngIf",!Ye.showEditButtons),Z.xp6(1),Z.Q6J("ngIf",Ye.showEditButtons))},directives:[P.Gu,P.sr,P.Sm,P.fG,P.gu,P.wd,P.z0,P.W2,P.YG,P.q_,_.O5,_.sg,P.Ie,P.g2,P.j9,P.PQ,P.td,Ee,P.IK,P.u8],styles:[".nav-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:calc(100vh - 60px);align-items:center}.nav-content[_ngcontent-%COMP%]   .user-container[_ngcontent-%COMP%]{padding:3rem 1rem;text-align:center}.nav-content[_ngcontent-%COMP%]   .user-container[_ngcontent-%COMP%]   .avatar-alt[_ngcontent-%COMP%]{font-size:5em}.nav-content[_ngcontent-%COMP%]   .user-container[_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%]{font-weight:500;font-size:1.5em}.nav-content[_ngcontent-%COMP%]   .user-container[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{color:var(--ion-color-secondary)}.nav-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:75%;margin-bottom:3rem}.form-row[_ngcontent-%COMP%]{position:fixed;display:flex;padding:1.5em 1em;align-items:center;width:100%;bottom:0;background-color:#fff;z-index:999}.form-row[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-weight:500}ion-button[shape=circle][_ngcontent-%COMP%]{--border-radius: 50%;width:56px;height:56px}app-comment[_ngcontent-%COMP%]{width:100%}ion-list[_ngcontent-%COMP%]{margin-top:1em}.scroll-container[_ngcontent-%COMP%]{height:calc(100vh - 220px);overflow-y:scroll}.edit-btn-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}ion-spinner[_ngcontent-%COMP%]{margin:2rem auto}ion-item-sliding[_ngcontent-%COMP%]{margin-bottom:1rem}ion-textarea[_ngcontent-%COMP%]{align-self:flex-start}.comment-spacer[_ngcontent-%COMP%]{height:220px}@media (prefers-color-scheme: dark){.form-row[_ngcontent-%COMP%]{background:#3b3b3b}}"]}),at})()}];let Me=(()=>{class at{}return at.\u0275fac=function(E){return new(E||at)},at.\u0275mod=Z.oAB({type:at}),at.\u0275inj=Z.cJS({imports:[[re.Bz.forChild(Ie)],re.Bz]}),at})(),ct=(()=>{class at{}return at.\u0275fac=function(E){return new(E||at)},at.\u0275mod=Z.oAB({type:at}),at.\u0275inj=Z.cJS({imports:[[_.ez,P.Pc,Me]]}),at})()},7545:(nn,ot,L)=>{"use strict";L.r(ot),L.d(ot,{LoginModule:()=>$e});var _=L(8583),P=L(8945),re=L(665),ke=L(174),ae=L(8239),Q=L(7716),Z=L(7556);function ne(qe,Ie){1&qe&&(Q.TgZ(0,"ion-note",10),Q._uU(1,"Email is invalid"),Q.qZA())}function we(qe,Ie){1&qe&&(Q.TgZ(0,"ion-note",10),Q._uU(1,"Password needs to be 6 characters"),Q.qZA())}function se(qe,Ie){if(1&qe){const Me=Q.EpF();Q.TgZ(0,"form",3),Q.NdJ("ngSubmit",function(){return Q.CHM(Me),Q.oxw().login()}),Q.TgZ(1,"ion-item",4),Q._UZ(2,"ion-input",5),Q.YNc(3,ne,2,0,"ion-note",6),Q.qZA(),Q.TgZ(4,"ion-item",4),Q._UZ(5,"ion-input",7),Q.YNc(6,we,2,0,"ion-note",6),Q.qZA(),Q.TgZ(7,"ion-button",8),Q._uU(8," Log in "),Q.qZA(),Q.TgZ(9,"ion-button",9),Q.NdJ("click",function(){return Q.CHM(Me),Q.oxw().createUser()}),Q._uU(10,"Create account "),Q.qZA(),Q.qZA()}if(2&qe){const Me=Q.oxw();Q.Q6J("formGroup",Me.credentials),Q.xp6(3),Q.Q6J("ngIf",(Me.email.dirty||Me.email.touched)&&Me.email.errors),Q.xp6(3),Q.Q6J("ngIf",(Me.password.dirty||Me.password.touched)&&Me.password.errors)}}function ge(qe,Ie){1&qe&&(Q.TgZ(0,"ion-note",10),Q._uU(1,"Name is required"),Q.qZA())}function Ee(qe,Ie){1&qe&&(Q.TgZ(0,"ion-note",10),Q._uU(1,"Email is invalid"),Q.qZA())}function _e(qe,Ie){1&qe&&(Q.TgZ(0,"ion-note",10),Q._uU(1,"Password needs to be 6 characters"),Q.qZA())}function De(qe,Ie){if(1&qe){const Me=Q.EpF();Q.TgZ(0,"form",3),Q.NdJ("ngSubmit",function(){return Q.CHM(Me),Q.oxw().register()}),Q.TgZ(1,"ion-item",4),Q._UZ(2,"ion-input",11),Q.YNc(3,ge,2,0,"ion-note",6),Q.qZA(),Q.TgZ(4,"ion-item",4),Q._UZ(5,"ion-input",5),Q.YNc(6,Ee,2,0,"ion-note",6),Q.qZA(),Q.TgZ(7,"ion-item",4),Q._UZ(8,"ion-input",7),Q.YNc(9,_e,2,0,"ion-note",6),Q.qZA(),Q.TgZ(10,"ion-button",8),Q._uU(11," Register "),Q.qZA(),Q.TgZ(12,"ion-button",12),Q.NdJ("click",function(){return Q.CHM(Me),Q.oxw().cancelRegister()}),Q._uU(13," Cancel "),Q.qZA(),Q.qZA()}if(2&qe){const Me=Q.oxw();Q.Q6J("formGroup",Me.userRegistration),Q.xp6(3),Q.Q6J("ngIf",(Me.name.dirty||Me.name.touched)&&Me.name.errors),Q.xp6(3),Q.Q6J("ngIf",(Me.email.dirty||Me.email.touched)&&Me.email.errors),Q.xp6(3),Q.Q6J("ngIf",(Me.password.dirty||Me.password.touched)&&Me.password.errors)}}const Te=[{path:"",component:(()=>{class qe{constructor(Me,ct,at,Vt,E){this.fb=Me,this.loadingController=ct,this.alertController=at,this.authService=Vt,this.router=E,this.showRegister=!1}ngOnInit(){this.credentials=this.fb.group({email:["",[re.kI.required,re.kI.email]],password:["",[re.kI.required,re.kI.minLength(6)]]}),this.userRegistration=this.fb.group({name:["",[re.kI.required]],email:["",[re.kI.required,re.kI.email]],password:["",[re.kI.required,re.kI.minLength(6)]]})}get email(){return this.credentials.get("email")}get password(){return this.credentials.get("password")}get regEmail(){return this.userRegistration.get("email")}get regPassword(){return this.userRegistration.get("password")}get name(){return this.userRegistration.get("name")}login(){var Me=this;return(0,ae.Z)(function*(){const ct=yield Me.loadingController.create();yield ct.present();const at=yield Me.authService.login(Me.credentials.value);yield ct.dismiss(),at?Me.router.navigateByUrl("/home",{replaceUrl:!0}):Me.showAlert("Login failed","Please try again!")})()}register(){var Me=this;return(0,ae.Z)(function*(){const ct=yield Me.loadingController.create();yield ct.present();const at=yield Me.authService.register(Me.userRegistration.value);yield ct.dismiss(),at?Me.router.navigateByUrl("/home",{replaceUrl:!0}):Me.showAlert("Registration failed","Please try again!")})()}createUser(){this.showRegister=!0}showAlert(Me,ct){var at=this;return(0,ae.Z)(function*(){yield(yield at.alertController.create({header:Me,message:ct,buttons:["OK"]})).present()})()}cancelRegister(){this.userRegistration.reset(),this.showRegister=!1}}return qe.\u0275fac=function(Me){return new(Me||qe)(Q.Y36(re.qu),Q.Y36(P.HT),Q.Y36(P.Br),Q.Y36(Z.e),Q.Y36(ke.F0))},qe.\u0275cmp=Q.Xpm({type:qe,selectors:[["app-login"]],decls:7,vars:2,consts:[["color","primary"],[1,"ion-padding"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],["fill","solid",1,"ion-margin-bottom"],["type","email","placeholder","Email","formControlName","email"],["slot","error",4,"ngIf"],["type","password","placeholder","Password","formControlName","password"],["size","medium","shape","round","color","primary","type","submit","expand","block",1,"ion-margin-bottom"],["size","medium","shape","round","type","button","expand","block","color","light",3,"click"],["slot","error"],["type","text","placeholder","Name","formControlName","name"],["size","medium","shape","round","color","primary","type","button","expand","block",1,"ion-margin-bottom",3,"click"]],template:function(Me,ct){1&Me&&(Q.TgZ(0,"ion-header"),Q.TgZ(1,"ion-toolbar",0),Q.TgZ(2,"ion-title"),Q._uU(3," Login "),Q.qZA(),Q.qZA(),Q.qZA(),Q.TgZ(4,"ion-content",1),Q.YNc(5,se,11,3,"form",2),Q.YNc(6,De,14,4,"form",2),Q.qZA()),2&Me&&(Q.xp6(5),Q.Q6J("ngIf",!ct.showRegister),Q.xp6(1),Q.Q6J("ngIf",ct.showRegister))},directives:[P.Gu,P.sr,P.wd,P.W2,_.O5,re._Y,re.JL,re.sg,P.Ie,P.pK,P.j9,re.JJ,re.u,P.YG,P.uN],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]}),qe})()}];let Ke=(()=>{class qe{}return qe.\u0275fac=function(Me){return new(Me||qe)},qe.\u0275mod=Q.oAB({type:qe}),qe.\u0275inj=Q.cJS({imports:[[ke.Bz.forChild(Te)],ke.Bz]}),qe})(),$e=(()=>{class qe{}return qe.\u0275fac=function(Me){return new(Me||qe)},qe.\u0275mod=Q.oAB({type:qe}),qe.\u0275inj=Q.cJS({providers:[],imports:[[_.ez,re.u5,re.UX,P.Pc,Ke]]}),qe})()},7556:(nn,ot,L)=>{"use strict";L.d(ot,{e:()=>ae});var _=L(8239),P=L(7910),re=L(7716),ke=L(3071);let ae=(()=>{class Q{constructor(ne,we){this.auth=ne,this.userSvc=we}register({email:ne,password:we,name:se}){var ge=this;return(0,_.Z)(function*(){try{const Ee=yield(0,P.Xb)(ge.auth,ne,we);return ge.userSvc.addUserInfo(Ee.user.uid,{displayName:se}),ge.userSvc.saveUserToLocalStorage({id:Ee.user.uid,email:Ee.user.email,displayName:se}),Ee}catch(Ee){return null}})()}login({email:ne,password:we}){var se=this;return(0,_.Z)(function*(){try{const ge=yield(0,P.e5)(se.auth,ne,we);return se.userSvc.saveUserToLocalStorage({id:ge.user.uid,email:ge.user.email}),ge}catch(ge){return null}})()}logout(){return this.userSvc.clearStorage(),(0,P.w7)(this.auth)}}return Q.\u0275fac=function(ne){return new(ne||Q)(re.LFG(P.gx),re.LFG(ke.K))},Q.\u0275prov=re.Yz7({token:Q,factory:Q.\u0275fac,providedIn:"root"}),Q})()},3792:(nn,ot,L)=>{"use strict";L.d(ot,{O:()=>ae});var _=L(2502),P=L(1304),re=L(7716),ke=L(9781);let ae=(()=>{class Q{constructor(ne,we){this.firestore=ne,this.afs=we,this.COMMENTS_COLLECTION="comments/comment"}getComments(ne){const we=(0,P.hJ)(this.firestore,`${ne}/${this.COMMENTS_COLLECTION}`),se=(0,_.IO)(we,(0,_.Xo)("createdTime","asc"));return(0,_.BS)(se,{idField:"id"})}addComment(ne,we){const se=(0,P.hJ)(this.firestore,`${ne}/${this.COMMENTS_COLLECTION}`);return(0,P.ET)(se,Object.assign(Object.assign({},we),{createdTime:P.EK.fromDate(new Date)}))}updateComment(ne,we,se,ge=!1){const Ee=(0,P.JU)(this.firestore,`${ne}/${this.COMMENTS_COLLECTION}/${we}`);console.log(se.createdTime?"has created time":"have not"),(0,P.r7)(Ee,Object.assign(Object.assign({},se),{textEdited:ge,updatedTime:P.EK.fromDate(new Date)}))}}return Q.\u0275fac=function(ne){return new(ne||Q)(re.LFG(_.gg),re.LFG(ke.ST))},Q.\u0275prov=re.Yz7({token:Q,factory:Q.\u0275fac,providedIn:"root"}),Q})()},3071:(nn,ot,L)=>{"use strict";L.d(ot,{K:()=>ke});var _=L(2502),P=L(1304),re=L(7716);let ke=(()=>{class ae{constructor(Z){this.firestore=Z,this.USER_INFO_PATH="user_info"}getUserInfo(Z){const ne=(0,P.JU)(this.firestore,`${Z}/${this.USER_INFO_PATH}`);return(0,_._1)(ne)}addUserInfo(Z,ne){const we=(0,P.JU)(this.firestore,`${Z}/${this.USER_INFO_PATH}`);return(0,P.pl)(we,ne)}updateUserInfo(Z,ne){const we=(0,P.JU)(this.firestore,`${Z}/${this.USER_INFO_PATH}`);return(0,P.pl)(we,ne)}saveUserToLocalStorage(Z){localStorage.setItem("userData",JSON.stringify(Z))}getUserDataFromLocalStorage(){return JSON.parse(localStorage.getItem("userData")||"{}")}clearStorage(){localStorage.clear()}}return ae.\u0275fac=function(Z){return new(Z||ae)(re.LFG(_.gg))},ae.\u0275prov=re.Yz7({token:ae,factory:ae.\u0275fac,providedIn:"root"}),ae})()},8470:(nn,ot,L)=>{"use strict";var _=L(8583),P=L(7716);class re extends _.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ke extends re{static makeCurrent(){(0,_.HT)(new ke)}onAndCancel(u,l,p){return u.addEventListener(l,p,!1),()=>{u.removeEventListener(l,p,!1)}}dispatchEvent(u,l){u.dispatchEvent(l)}remove(u){u.parentNode&&u.parentNode.removeChild(u)}createElement(u,l){return(l=l||this.getDefaultDocument()).createElement(u)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(u){return u.nodeType===Node.ELEMENT_NODE}isShadowRoot(u){return u instanceof DocumentFragment}getGlobalEventTarget(u,l){return"window"===l?window:"document"===l?u:"body"===l?u.body:null}getBaseHref(u){const l=(ae=ae||document.querySelector("base"),ae?ae.getAttribute("href"):null);return null==l?null:function(d){Z=Z||document.createElement("a"),Z.setAttribute("href",d);const u=Z.pathname;return"/"===u.charAt(0)?u:`/${u}`}(l)}resetBaseElement(){ae=null}getUserAgent(){return window.navigator.userAgent}getCookie(u){return(0,_.Mx)(document.cookie,u)}}let Z,ae=null;const we=new P.OlP("TRANSITION_ID"),ge=[{provide:P.ip1,useFactory:function(d,u,l){return()=>{l.get(P.CZH).donePromise.then(()=>{const p=(0,_.q)(),I=u.querySelectorAll(`style[ng-transition="${d}"]`);for(let O=0;O<I.length;O++)p.remove(I[O])})}},deps:[we,_.K0,P.zs3],multi:!0}];class Ee{static init(){(0,P.VLi)(new Ee)}addToWindow(u){P.dqk.getAngularTestability=(p,I=!0)=>{const O=u.findTestabilityInTree(p,I);if(null==O)throw new Error("Could not find testability for element.");return O},P.dqk.getAllAngularTestabilities=()=>u.getAllTestabilities(),P.dqk.getAllAngularRootElements=()=>u.getAllRootElements(),P.dqk.frameworkStabilizers||(P.dqk.frameworkStabilizers=[]),P.dqk.frameworkStabilizers.push(p=>{const I=P.dqk.getAllAngularTestabilities();let O=I.length,W=!1;const de=function(Ne){W=W||Ne,O--,0==O&&p(W)};I.forEach(function(Ne){Ne.whenStable(de)})})}findTestabilityInTree(u,l,p){if(null==l)return null;const I=u.getTestability(l);return null!=I?I:p?(0,_.q)().isShadowRoot(l)?this.findTestabilityInTree(u,l.host,!0):this.findTestabilityInTree(u,l.parentElement,!0):null}}let _e=(()=>{class d{build(){return new XMLHttpRequest}}return d.\u0275fac=function(l){return new(l||d)},d.\u0275prov=P.Yz7({token:d,factory:d.\u0275fac}),d})();const He=new P.OlP("EventManagerPlugins");let Ge=(()=>{class d{constructor(l,p){this._zone=p,this._eventNameToPlugin=new Map,l.forEach(I=>I.manager=this),this._plugins=l.slice().reverse()}addEventListener(l,p,I){return this._findPluginFor(p).addEventListener(l,p,I)}addGlobalEventListener(l,p,I){return this._findPluginFor(p).addGlobalEventListener(l,p,I)}getZone(){return this._zone}_findPluginFor(l){const p=this._eventNameToPlugin.get(l);if(p)return p;const I=this._plugins;for(let O=0;O<I.length;O++){const W=I[O];if(W.supports(l))return this._eventNameToPlugin.set(l,W),W}throw new Error(`No event manager plugin found for event ${l}`)}}return d.\u0275fac=function(l){return new(l||d)(P.LFG(He),P.LFG(P.R0b))},d.\u0275prov=P.Yz7({token:d,factory:d.\u0275fac}),d})();class ht{constructor(u){this._doc=u}addGlobalEventListener(u,l,p){const I=(0,_.q)().getGlobalEventTarget(this._doc,u);if(!I)throw new Error(`Unsupported event target ${I} for event ${l}`);return this.addEventListener(I,l,p)}}let vt=(()=>{class d{constructor(){this._stylesSet=new Set}addStyles(l){const p=new Set;l.forEach(I=>{this._stylesSet.has(I)||(this._stylesSet.add(I),p.add(I))}),this.onStylesAdded(p)}onStylesAdded(l){}getAllStyles(){return Array.from(this._stylesSet)}}return d.\u0275fac=function(l){return new(l||d)},d.\u0275prov=P.Yz7({token:d,factory:d.\u0275fac}),d})(),Ht=(()=>{class d extends vt{constructor(l){super(),this._doc=l,this._hostNodes=new Map,this._hostNodes.set(l.head,[])}_addStylesToHost(l,p,I){l.forEach(O=>{const W=this._doc.createElement("style");W.textContent=O,I.push(p.appendChild(W))})}addHost(l){const p=[];this._addStylesToHost(this._stylesSet,l,p),this._hostNodes.set(l,p)}removeHost(l){const p=this._hostNodes.get(l);p&&p.forEach(Zt),this._hostNodes.delete(l)}onStylesAdded(l){this._hostNodes.forEach((p,I)=>{this._addStylesToHost(l,I,p)})}ngOnDestroy(){this._hostNodes.forEach(l=>l.forEach(Zt))}}return d.\u0275fac=function(l){return new(l||d)(P.LFG(_.K0))},d.\u0275prov=P.Yz7({token:d,factory:d.\u0275fac}),d})();function Zt(d){(0,_.q)().remove(d)}const dt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ct=/%COMP%/g;function Pt(d,u,l){for(let p=0;p<u.length;p++){let I=u[p];Array.isArray(I)?Pt(d,I,l):(I=I.replace(Ct,d),l.push(I))}return l}function gn(d){return u=>{if("__ngUnwrap__"===u)return d;!1===d(u)&&(u.preventDefault(),u.returnValue=!1)}}let Tn=(()=>{class d{constructor(l,p,I){this.eventManager=l,this.sharedStylesHost=p,this.appId=I,this.rendererByCompId=new Map,this.defaultRenderer=new _n(l)}createRenderer(l,p){if(!l||!p)return this.defaultRenderer;switch(p.encapsulation){case P.ifc.Emulated:{let I=this.rendererByCompId.get(p.id);return I||(I=new Ot(this.eventManager,this.sharedStylesHost,p,this.appId),this.rendererByCompId.set(p.id,I)),I.applyToHost(l),I}case 1:case P.ifc.ShadowDom:return new En(this.eventManager,this.sharedStylesHost,l,p);default:if(!this.rendererByCompId.has(p.id)){const I=Pt(p.id,p.styles,[]);this.sharedStylesHost.addStyles(I),this.rendererByCompId.set(p.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return d.\u0275fac=function(l){return new(l||d)(P.LFG(Ge),P.LFG(Ht),P.LFG(P.AFp))},d.\u0275prov=P.Yz7({token:d,factory:d.\u0275fac}),d})();class _n{constructor(u){this.eventManager=u,this.data=Object.create(null)}destroy(){}createElement(u,l){return l?document.createElementNS(dt[l]||l,u):document.createElement(u)}createComment(u){return document.createComment(u)}createText(u){return document.createTextNode(u)}appendChild(u,l){u.appendChild(l)}insertBefore(u,l,p){u&&u.insertBefore(l,p)}removeChild(u,l){u&&u.removeChild(l)}selectRootElement(u,l){let p="string"==typeof u?document.querySelector(u):u;if(!p)throw new Error(`The selector "${u}" did not match any elements`);return l||(p.textContent=""),p}parentNode(u){return u.parentNode}nextSibling(u){return u.nextSibling}setAttribute(u,l,p,I){if(I){l=I+":"+l;const O=dt[I];O?u.setAttributeNS(O,l,p):u.setAttribute(l,p)}else u.setAttribute(l,p)}removeAttribute(u,l,p){if(p){const I=dt[p];I?u.removeAttributeNS(I,l):u.removeAttribute(`${p}:${l}`)}else u.removeAttribute(l)}addClass(u,l){u.classList.add(l)}removeClass(u,l){u.classList.remove(l)}setStyle(u,l,p,I){I&(P.JOm.DashCase|P.JOm.Important)?u.style.setProperty(l,p,I&P.JOm.Important?"important":""):u.style[l]=p}removeStyle(u,l,p){p&P.JOm.DashCase?u.style.removeProperty(l):u.style[l]=""}setProperty(u,l,p){u[l]=p}setValue(u,l){u.nodeValue=l}listen(u,l,p){return"string"==typeof u?this.eventManager.addGlobalEventListener(u,l,gn(p)):this.eventManager.addEventListener(u,l,gn(p))}}class Ot extends _n{constructor(u,l,p,I){super(u),this.component=p;const O=Pt(I+"-"+p.id,p.styles,[]);l.addStyles(O),this.contentAttr="_ngcontent-%COMP%".replace(Ct,I+"-"+p.id),this.hostAttr="_nghost-%COMP%".replace(Ct,I+"-"+p.id)}applyToHost(u){super.setAttribute(u,this.hostAttr,"")}createElement(u,l){const p=super.createElement(u,l);return super.setAttribute(p,this.contentAttr,""),p}}class En extends _n{constructor(u,l,p,I){super(u),this.sharedStylesHost=l,this.hostEl=p,this.shadowRoot=p.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const O=Pt(I.id,I.styles,[]);for(let W=0;W<O.length;W++){const de=document.createElement("style");de.textContent=O[W],this.shadowRoot.appendChild(de)}}nodeOrShadowRoot(u){return u===this.hostEl?this.shadowRoot:u}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(u,l){return super.appendChild(this.nodeOrShadowRoot(u),l)}insertBefore(u,l,p){return super.insertBefore(this.nodeOrShadowRoot(u),l,p)}removeChild(u,l){return super.removeChild(this.nodeOrShadowRoot(u),l)}parentNode(u){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(u)))}}let Wn=(()=>{class d extends ht{constructor(l){super(l)}supports(l){return!0}addEventListener(l,p,I){return l.addEventListener(p,I,!1),()=>this.removeEventListener(l,p,I)}removeEventListener(l,p,I){return l.removeEventListener(p,I)}}return d.\u0275fac=function(l){return new(l||d)(P.LFG(_.K0))},d.\u0275prov=P.Yz7({token:d,factory:d.\u0275fac}),d})();const sr=["alt","control","meta","shift"],wt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},dr={alt:d=>d.altKey,control:d=>d.ctrlKey,meta:d=>d.metaKey,shift:d=>d.shiftKey};let Xn=(()=>{class d extends ht{constructor(l){super(l)}supports(l){return null!=d.parseEventName(l)}addEventListener(l,p,I){const O=d.parseEventName(p),W=d.eventCallback(O.fullKey,I,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,_.q)().onAndCancel(l,O.domEventName,W))}static parseEventName(l){const p=l.toLowerCase().split("."),I=p.shift();if(0===p.length||"keydown"!==I&&"keyup"!==I)return null;const O=d._normalizeKey(p.pop());let W="";if(sr.forEach(Ne=>{const Je=p.indexOf(Ne);Je>-1&&(p.splice(Je,1),W+=Ne+".")}),W+=O,0!=p.length||0===O.length)return null;const de={};return de.domEventName=I,de.fullKey=W,de}static getEventFullKey(l){let p="",I=function(d){let u=d.key;if(null==u){if(u=d.keyIdentifier,null==u)return"Unidentified";u.startsWith("U+")&&(u=String.fromCharCode(parseInt(u.substring(2),16)),3===d.location&&xr.hasOwnProperty(u)&&(u=xr[u]))}return wt[u]||u}(l);return I=I.toLowerCase()," "===I?I="space":"."===I&&(I="dot"),sr.forEach(O=>{O!=I&&dr[O](l)&&(p+=O+".")}),p+=I,p}static eventCallback(l,p,I){return O=>{d.getEventFullKey(O)===l&&I.runGuarded(()=>p(O))}}static _normalizeKey(l){return"esc"===l?"escape":l}}return d.\u0275fac=function(l){return new(l||d)(P.LFG(_.K0))},d.\u0275prov=P.Yz7({token:d,factory:d.\u0275fac}),d})();const Ve=(0,P.eFA)(P._c5,"browser",[{provide:P.Lbi,useValue:_.bD},{provide:P.g9A,useValue:function(){ke.makeCurrent(),Ee.init()},multi:!0},{provide:_.K0,useFactory:function(){return(0,P.RDi)(document),document},deps:[]}]),ve=[[],{provide:P.zSh,useValue:"root"},{provide:P.qLn,useFactory:function(){return new P.qLn},deps:[]},{provide:He,useClass:Wn,multi:!0,deps:[_.K0,P.R0b,P.Lbi]},{provide:He,useClass:Xn,multi:!0,deps:[_.K0]},[],{provide:Tn,useClass:Tn,deps:[Ge,Ht,P.AFp]},{provide:P.FYo,useExisting:Tn},{provide:vt,useExisting:Ht},{provide:Ht,useClass:Ht,deps:[_.K0]},{provide:P.dDg,useClass:P.dDg,deps:[P.R0b]},{provide:Ge,useClass:Ge,deps:[He,P.R0b]},{provide:_.JF,useClass:_e,deps:[]},[]];let Pe=(()=>{class d{constructor(l){if(l)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(l){return{ngModule:d,providers:[{provide:P.AFp,useValue:l.appId},{provide:we,useExisting:P.AFp},ge]}}}return d.\u0275fac=function(l){return new(l||d)(P.LFG(d,12))},d.\u0275mod=P.oAB({type:d}),d.\u0275inj=P.cJS({providers:ve,imports:[_.ez,P.hGG]}),d})();"undefined"!=typeof window&&window;var Ur=L(174),yi=L(665),Kr=L(8945),ys=L(4022),Br=L(8002),Yi=L(5257),Hr=L(7910),pi=L(2329);const Sr=(0,Br.U)(d=>!!d);let xs=(()=>{class d{constructor(l,p){this.router=l,this.auth=p,this.canActivate=(I,O)=>{const W=I.data.authGuardPipe||(()=>Sr);return(0,Hr.EA)(this.auth).pipe((0,Yi.q)(1),W(I,O),(0,Br.U)(de=>"boolean"==typeof de?de:Array.isArray(de)?this.router.createUrlTree(de):this.router.parseUrl(de)))}}}return d.\u0275fac=function(l){return new(l||d)(P.LFG(Ur.F0),P.LFG(Hr.gx))},d.\u0275prov=P.Yz7({token:d,factory:d.\u0275fac,providedIn:"any"}),d})();const mt=d=>({canActivate:[xs],data:{authGuardPipe:d}}),On=[Object.assign({path:"",loadChildren:()=>Promise.resolve().then(L.bind(L,7545)).then(d=>d.LoginModule)},mt(()=>{return d=["home"],(0,ys.z)(Sr,(0,Br.U)(u=>u&&d||!0));var d})),Object.assign({path:"home",loadChildren:()=>Promise.resolve().then(L.bind(L,6812)).then(d=>d.HomeModule)},mt(()=>{return d=[""],(0,ys.z)(Sr,(0,Br.U)(u=>u||d));var d})),{path:"**",redirectTo:"",pathMatch:"full"}];let Vn=(()=>{class d{}return d.\u0275fac=function(l){return new(l||d)},d.\u0275mod=P.oAB({type:d}),d.\u0275inj=P.cJS({imports:[[Ur.Bz.forRoot(On,{preloadingStrategy:Ur.wm})],Ur.Bz]}),d})(),qn=(()=>{class d{constructor(l){this.platform=l,this.title="trailApp",this.initializeApp()}initializeApp(){this.platform.ready().then(()=>{console.log("ready")})}}return d.\u0275fac=function(l){return new(l||d)(P.Y36(Kr.t4))},d.\u0275cmp=P.Xpm({type:d,selectors:[["app-root"]],decls:2,vars:0,template:function(l,p){1&l&&(P.TgZ(0,"ion-app"),P._UZ(1,"ion-router-outlet"),P.qZA())},directives:[Kr.dr,Kr.jP],styles:[""]}),d})();var Rr=L(6812),Gi=L(127),ci=L(2502);const Mi_firebase={projectId:"trail-app-aa3ab",appId:"1:274367012522:web:30b70ab84769c87aca3ad3",databaseURL:"https://trail-app-aa3ab-default-rtdb.firebaseio.com",storageBucket:"trail-app-aa3ab.appspot.com",apiKey:"AIzaSyBVh_gUX8-vRECj9rPbevw38_FAyV6e12s",authDomain:"trail-app-aa3ab.firebaseapp.com",messagingSenderId:"274367012522"};var vi=L(2805),Rs=L(841),rs=L(8239),_s=L(8026),Ki=L(3910),Fe=L(3854),Ks=L(5422);const Vs="@firebase/database";let To="";function Vo(d){To=d}class hl{constructor(u){this.domStorage_=u,this.prefix_="firebase:"}set(u,l){null==l?this.domStorage_.removeItem(this.prefixedName_(u)):this.domStorage_.setItem(this.prefixedName_(u),(0,Fe.Wl)(l))}get(u){const l=this.domStorage_.getItem(this.prefixedName_(u));return null==l?null:(0,Fe.cI)(l)}remove(u){this.domStorage_.removeItem(this.prefixedName_(u))}prefixedName_(u){return this.prefix_+u}toString(){return this.domStorage_.toString()}}class vs{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(u,l){null==l?delete this.cache_[u]:this.cache_[u]=l}get(u){return(0,Fe.r3)(this.cache_,u)?this.cache_[u]:null}remove(u){delete this.cache_[u]}}const Bs=function(d){try{if("undefined"!=typeof window&&void 0!==window[d]){const u=window[d];return u.setItem("firebase:sentinel","cache"),u.removeItem("firebase:sentinel"),new hl(u)}}catch(u){}return new vs},us=Bs("localStorage"),$s=Bs("sessionStorage"),Zs=new Ks.Yd("@firebase/database"),Xr=function(){let d=1;return function(){return d++}}(),Qs=function(d){const u=(0,Fe.dS)(d),l=new Fe.gQ;l.update(u);const p=l.digest();return Fe.US.encodeByteArray(p)},$i=function(...d){let u="";for(let l=0;l<d.length;l++){const p=d[l];Array.isArray(p)||p&&"object"==typeof p&&"number"==typeof p.length?u+=$i.apply(null,p):u+="object"==typeof p?(0,Fe.Wl)(p):p,u+=" "}return u};let cs=null,Xs=!0;const is=function(d,u){(0,Fe.hu)(!u||!0===d||!1===d,"Can't turn on custom loggers persistently."),!0===d?(Zs.logLevel=Ks.in.VERBOSE,cs=Zs.log.bind(Zs),u&&$s.set("logging_enabled",!0)):"function"==typeof d?cs=d:(cs=null,$s.remove("logging_enabled"))},ki=function(...d){if(!0===Xs&&(Xs=!1,null===cs&&!0===$s.get("logging_enabled")&&is(!0)),cs){const u=$i.apply(null,d);cs(u)}},Us=function(d){return function(...u){ki(d,...u)}},gi=function(...d){const u="FIREBASE INTERNAL ERROR: "+$i(...d);Zs.error(u)},Is=function(...d){const u=`FIREBASE FATAL ERROR: ${$i(...d)}`;throw Zs.error(u),new Error(u)},di=function(...d){const u="FIREBASE WARNING: "+$i(...d);Zs.warn(u)},fo=function(d){return"number"==typeof d&&(d!=d||d===Number.POSITIVE_INFINITY||d===Number.NEGATIVE_INFINITY)},Zi="[MIN_NAME]",zi="[MAX_NAME]",Ms=function(d,u){if(d===u)return 0;if(d===Zi||u===zi)return-1;if(u===Zi||d===zi)return 1;{const l=k(d),p=k(u);return null!==l?null!==p?l-p==0?d.length-u.length:l-p:-1:null!==p?1:d<u?-1:1}},Wo=function(d,u){return d===u?0:d<u?-1:1},_i=function(d,u){if(u&&d in u)return u[d];throw new Error("Missing required key ("+d+") in object: "+(0,Fe.Wl)(u))},Qi=function(d){if("object"!=typeof d||null===d)return(0,Fe.Wl)(d);const u=[];for(const p in d)u.push(p);u.sort();let l="{";for(let p=0;p<u.length;p++)0!==p&&(l+=","),l+=(0,Fe.Wl)(u[p]),l+=":",l+=Qi(d[u[p]]);return l+="}",l},G=function(d,u){const l=d.length;if(l<=u)return[d];const p=[];for(let I=0;I<l;I+=u)p.push(d.substring(I,I+u>l?l:I+u));return p};function le(d,u){for(const l in d)d.hasOwnProperty(l)&&u(l,d[l])}const K=function(d){(0,Fe.hu)(!fo(d),"Invalid JSON number");const p=1023;let I,O,W,de,Ne;0===d?(O=0,W=0,I=1/d==-1/0?1:0):(I=d<0,(d=Math.abs(d))>=Math.pow(2,1-p)?(de=Math.min(Math.floor(Math.log(d)/Math.LN2),p),O=de+p,W=Math.round(d*Math.pow(2,52-de)-Math.pow(2,52))):(O=0,W=Math.round(d/Math.pow(2,-1074))));const Je=[];for(Ne=52;Ne;Ne-=1)Je.push(W%2?1:0),W=Math.floor(W/2);for(Ne=11;Ne;Ne-=1)Je.push(O%2?1:0),O=Math.floor(O/2);Je.push(I?1:0),Je.reverse();const xt=Je.join("");let Ft="";for(Ne=0;Ne<64;Ne+=8){let Yt=parseInt(xt.substr(Ne,8),2).toString(16);1===Yt.length&&(Yt="0"+Yt),Ft+=Yt}return Ft.toLowerCase()},an=new RegExp("^-?(0*)\\d{1,10}$"),H=-2147483648,B=2147483647,k=function(d){if(an.test(d)){const u=Number(d);if(u>=H&&u<=B)return u}return null},ue=function(d){try{d()}catch(u){setTimeout(()=>{throw di("Exception was thrown by user callback.",u.stack||""),u},Math.floor(0))}},mn=function(d,u){const l=setTimeout(d,u);return"number"==typeof l&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(l):"object"==typeof l&&l.unref&&l.unref(),l};class er{constructor(u,l){this.appName_=u,this.appCheckProvider=l,this.appCheck=null==l?void 0:l.getImmediate({optional:!0}),this.appCheck||null==l||l.get().then(p=>this.appCheck=p)}getToken(u){return this.appCheck?this.appCheck.getToken(u):new Promise((l,p)=>{setTimeout(()=>{this.appCheck?this.getToken(u).then(l,p):l(null)},0)})}addTokenChangeListener(u){var l;null===(l=this.appCheckProvider)||void 0===l||l.get().then(p=>p.addTokenListener(u))}notifyForInvalidToken(){di(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Wr{constructor(u,l,p){this.appName_=u,this.firebaseOptions_=l,this.authProvider_=p,this.auth_=null,this.auth_=p.getImmediate({optional:!0}),this.auth_||p.onInit(I=>this.auth_=I)}getToken(u){return this.auth_?this.auth_.getToken(u).catch(l=>l&&"auth/token-not-initialized"===l.code?(ki("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(l)):new Promise((l,p)=>{setTimeout(()=>{this.auth_?this.getToken(u).then(l,p):l(null)},0)})}addTokenChangeListener(u){this.auth_?this.auth_.addAuthTokenListener(u):this.authProvider_.get().then(l=>l.addAuthTokenListener(u))}removeTokenChangeListener(u){this.authProvider_.get().then(l=>l.removeAuthTokenListener(u))}notifyForInvalidToken(){let u='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';u+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',di(u)}}let Ei=(()=>{class d{constructor(l){this.accessToken=l}getToken(l){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(l){l(this.accessToken)}removeTokenChangeListener(l){}notifyForInvalidToken(){}}return d.OWNER="owner",d})();const Do=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ya="websocket",po="long_polling";class rn{constructor(u,l,p,I,O=!1,W="",de=!1){this.secure=l,this.namespace=p,this.webSocketOnly=I,this.nodeAdmin=O,this.persistenceKey=W,this.includeNamespaceInQueryParams=de,this._host=u.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=us.get("host:"+u)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(u){u!==this.internalHost&&(this.internalHost=u,this.isCacheableHost()&&us.set("host:"+this._host,this.internalHost))}toString(){let u=this.toURLString();return this.persistenceKey&&(u+="<"+this.persistenceKey+">"),u}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function So(d,u,l){let p;if((0,Fe.hu)("string"==typeof u,"typeof type must == string"),(0,Fe.hu)("object"==typeof l,"typeof params must == object"),u===ya)p=(d.secure?"wss://":"ws://")+d.internalHost+"/.ws?";else{if(u!==po)throw new Error("Unknown connection type: "+u);p=(d.secure?"https://":"http://")+d.internalHost+"/.lp?"}(function(d){return d.host!==d.internalHost||d.isCustomHost()||d.includeNamespaceInQueryParams})(d)&&(l.ns=d.namespace);const I=[];return le(l,(O,W)=>{I.push(O+"="+W)}),p+I.join("&")}class Ui{constructor(){this.counters_={}}incrementCounter(u,l=1){(0,Fe.r3)(this.counters_,u)||(this.counters_[u]=0),this.counters_[u]+=l}get(){return(0,Fe.p$)(this.counters_)}}const Js={},bs={};function Os(d){const u=d.toString();return Js[u]||(Js[u]=new Ui),Js[u]}class zo{constructor(u){this.onMessage_=u,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(u,l){this.closeAfterResponse=u,this.onClose=l,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(u,l){for(this.pendingResponses[u]=l;this.pendingResponses[this.currentResponseNum];){const p=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let I=0;I<p.length;++I)p[I]&&ue(()=>{this.onMessage_(p[I])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Hs{constructor(u,l,p,I,O,W,de){this.connId=u,this.repoInfo=l,this.applicationId=p,this.appCheckToken=I,this.authToken=O,this.transportSessionId=W,this.lastSessionId=de,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Us(u),this.stats_=Os(l),this.urlFn=Ne=>(this.appCheckToken&&(Ne.ac=this.appCheckToken),So(l,po,Ne))}open(u,l){this.curSegmentNum=0,this.onDisconnect_=l,this.myPacketOrderer=new zo(u),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(d){if((0,Fe.Yr)()||"complete"===document.readyState)d();else{let u=!1;const l=function(){document.body?u||(u=!0,d()):setTimeout(l,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&l()}),window.attachEvent("onload",l))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Yo((...O)=>{const[W,de,Ne,Je,xt]=O;if(this.incrementIncomingBytes_(O),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===W)this.id=de,this.password=Ne;else{if("close"!==W)throw new Error("Unrecognized command received: "+W);de?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(de,()=>{this.onClosed_()})):this.onClosed_()}},(...O)=>{const[W,de]=O;this.incrementIncomingBytes_(O),this.myPacketOrderer.handleResponse(W,de)},()=>{this.onClosed_()},this.urlFn);const p={start:"t"};p.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(p.cb=this.scriptTagHolder.uniqueCallbackIdentifier),p.v="5",this.transportSessionId&&(p.s=this.transportSessionId),this.lastSessionId&&(p.ls=this.lastSessionId),this.applicationId&&(p.p=this.applicationId),this.appCheckToken&&(p.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Do.test(location.hostname)&&(p.r="f");const I=this.urlFn(p);this.log_("Connecting via long-poll to "+I),this.scriptTagHolder.addTag(I,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Hs.forceAllow_=!0}static forceDisallow(){Hs.forceDisallow_=!0}static isAvailable(){return!((0,Fe.Yr)()||!Hs.forceAllow_&&(Hs.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(u){const l=(0,Fe.Wl)(u);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const p=(0,Fe.h$)(l),I=G(p,1840);for(let O=0;O<I.length;O++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,I.length,I[O]),this.curSegmentNum++}addDisconnectPingFrame(u,l){if((0,Fe.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const p={dframe:"t"};p.id=u,p.pw=l,this.myDisconnFrame.src=this.urlFn(p),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(u){const l=(0,Fe.Wl)(u).length;this.bytesReceived+=l,this.stats_.incrementCounter("bytes_received",l)}}class Yo{constructor(u,l,p,I){if(this.onDisconnect=p,this.urlFn=I,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Fe.Yr)())this.commandCB=u,this.onMessageCB=l;else{this.uniqueCallbackIdentifier=Xr(),window["pLPCommand"+this.uniqueCallbackIdentifier]=u,window["pRTLPCB"+this.uniqueCallbackIdentifier]=l,this.myIFrame=Yo.createIFrame_();let O="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(O='<script>document.domain="'+document.domain+'";<\/script>');const W="<html><body>"+O+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(W),this.myIFrame.doc.close()}catch(de){ki("frame writing exception"),de.stack&&ki(de.stack),ki(de)}}}static createIFrame_(){const u=document.createElement("iframe");if(u.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(u);try{u.contentWindow.document||ki("No IE domain setting required")}catch(l){const p=document.domain;u.src="javascript:void((function(){document.open();document.domain='"+p+"';document.close();})())"}return u.contentDocument?u.doc=u.contentDocument:u.contentWindow?u.doc=u.contentWindow.document:u.document&&(u.doc=u.document),u}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const u=this.onDisconnect;u&&(this.onDisconnect=null,u())}startLongPoll(u,l){for(this.myID=u,this.myPW=l,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const u={};u.id=this.myID,u.pw=this.myPW,u.ser=this.currentSerial;let l=this.urlFn(u),p="",I=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+p.length<=1870;){const W=this.pendingSegs.shift();p=p+"&seg"+I+"="+W.seg+"&ts"+I+"="+W.ts+"&d"+I+"="+W.d,I++}return l+=p,this.addLongPollTag_(l,this.currentSerial),!0}return!1}enqueueSegment(u,l,p){this.pendingSegs.push({seg:u,ts:l,d:p}),this.alive&&this.newRequest_()}addLongPollTag_(u,l){this.outstandingRequests.add(l);const p=()=>{this.outstandingRequests.delete(l),this.newRequest_()},I=setTimeout(p,Math.floor(25e3));this.addTag(u,()=>{clearTimeout(I),p()})}addTag(u,l){(0,Fe.Yr)()?this.doNodeLongPoll(u,l):setTimeout(()=>{try{if(!this.sendNewPolls)return;const p=this.myIFrame.doc.createElement("script");p.type="text/javascript",p.async=!0,p.src=u,p.onload=p.onreadystatechange=function(){const I=p.readyState;(!I||"loaded"===I||"complete"===I)&&(p.onload=p.onreadystatechange=null,p.parentNode&&p.parentNode.removeChild(p),l())},p.onerror=()=>{ki("Long-poll script failed to load: "+u),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(p)}catch(p){}},Math.floor(1))}}let oa=null;"undefined"!=typeof MozWebSocket?oa=MozWebSocket:"undefined"!=typeof WebSocket&&(oa=WebSocket);let Ns=(()=>{class d{constructor(l,p,I,O,W,de,Ne){this.connId=l,this.applicationId=I,this.appCheckToken=O,this.authToken=W,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Us(this.connId),this.stats_=Os(p),this.connURL=d.connectionURL_(p,de,Ne,O,I),this.nodeAdmin=p.nodeAdmin}static connectionURL_(l,p,I,O,W){const de={v:"5"};return!(0,Fe.Yr)()&&"undefined"!=typeof location&&location.hostname&&Do.test(location.hostname)&&(de.r="f"),p&&(de.s=p),I&&(de.ls=I),O&&(de.ac=O),W&&(de.p=W),So(l,ya,de)}open(l,p){this.onDisconnect=p,this.onMessage=l,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,us.set("previous_websocket_failure",!0);try{let I;if((0,Fe.Yr)()){I={headers:{"User-Agent":`Firebase/5/${To}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(I.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(I.headers["X-Firebase-AppCheck"]=this.appCheckToken);const W=process.env,de=0===this.connURL.indexOf("wss://")?W.HTTPS_PROXY||W.https_proxy:W.HTTP_PROXY||W.http_proxy;de&&(I.proxy={origin:de})}this.mySock=new oa(this.connURL,[],I)}catch(I){this.log_("Error instantiating WebSocket.");const O=I.message||I.data;return O&&this.log_(O),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=I=>{this.handleIncomingFrame(I)},this.mySock.onerror=I=>{this.log_("WebSocket error.  Closing connection.");const O=I.message||I.data;O&&this.log_(O),this.onClosed_()}}start(){}static forceDisallow(){d.forceDisallow_=!0}static isAvailable(){let l=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const I=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);I&&I.length>1&&parseFloat(I[1])<4.4&&(l=!0)}return!l&&null!==oa&&!d.forceDisallow_}static previouslyFailed(){return us.isInMemoryStorage||!0===us.get("previous_websocket_failure")}markConnectionHealthy(){us.remove("previous_websocket_failure")}appendFrame_(l){if(this.frames.push(l),this.frames.length===this.totalFrames){const p=this.frames.join("");this.frames=null;const I=(0,Fe.cI)(p);this.onMessage(I)}}handleNewFrameCount_(l){this.totalFrames=l,this.frames=[]}extractFrameCount_(l){if((0,Fe.hu)(null===this.frames,"We already have a frame buffer"),l.length<=6){const p=Number(l);if(!isNaN(p))return this.handleNewFrameCount_(p),null}return this.handleNewFrameCount_(1),l}handleIncomingFrame(l){if(null===this.mySock)return;const p=l.data;if(this.bytesReceived+=p.length,this.stats_.incrementCounter("bytes_received",p.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(p);else{const I=this.extractFrameCount_(p);null!==I&&this.appendFrame_(I)}}send(l){this.resetKeepAlive();const p=(0,Fe.Wl)(l);this.bytesSent+=p.length,this.stats_.incrementCounter("bytes_sent",p.length);const I=G(p,16384);I.length>1&&this.sendString_(String(I.length));for(let O=0;O<I.length;O++)this.sendString_(I[O])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(l){try{this.mySock.send(l)}catch(p){this.log_("Exception thrown from WebSocket.send():",p.message||p.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return d.responsesRequiredToBeHealthy=2,d.healthyTimeout=3e4,d})(),$a=(()=>{class d{constructor(l){this.initTransports_(l)}static get ALL_TRANSPORTS(){return[Hs,Ns]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(l){const p=Ns&&Ns.isAvailable();let I=p&&!Ns.previouslyFailed();if(l.webSocketOnly&&(p||di("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),I=!0),I)this.transports_=[Ns];else{const O=this.transports_=[];for(const W of d.ALL_TRANSPORTS)W&&W.isAvailable()&&O.push(W);d.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return d.globalTransportInitialized_=!1,d})();class zt{constructor(u,l,p,I,O,W,de,Ne,Je,xt){this.id=u,this.repoInfo_=l,this.applicationId_=p,this.appCheckToken_=I,this.authToken_=O,this.onMessage_=W,this.onReady_=de,this.onDisconnect_=Ne,this.onKill_=Je,this.lastSessionId=xt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Us("c:"+this.id+":"),this.transportManager_=new $a(l),this.log_("Connection created"),this.start_()}start_(){const u=this.transportManager_.initialTransport();this.conn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.conn_),p=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(l,p)},Math.floor(0));const I=u.healthyTimeout||0;I>0&&(this.healthyTimeout_=mn(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(I)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(u){return l=>{u===this.conn_?this.onConnectionLost_(l):u===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(u){return l=>{2!==this.state_&&(u===this.rx_?this.onPrimaryMessageReceived_(l):u===this.secondaryConn_?this.onSecondaryMessageReceived_(l):this.log_("message on old connection"))}}sendRequest(u){this.sendData_({t:"d",d:u})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(u){if("t"in u){const l=u.t;"a"===l?this.upgradeIfSecondaryHealthy_():"r"===l?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===l&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(u){const l=_i("t",u),p=_i("d",u);if("c"===l)this.onSecondaryControl_(p);else{if("d"!==l)throw new Error("Unknown protocol layer: "+l);this.pendingDataMessages.push(p)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(u){const l=_i("t",u),p=_i("d",u);"c"===l?this.onControl_(p):"d"===l&&this.onDataMessage_(p)}onDataMessage_(u){this.onPrimaryResponse_(),this.onMessage_(u)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(u){const l=_i("t",u);if("d"in u){const p=u.d;if("h"===l)this.onHandshake_(p);else if("n"===l){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let I=0;I<this.pendingDataMessages.length;++I)this.onDataMessage_(this.pendingDataMessages[I]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===l?this.onConnectionShutdown_(p):"r"===l?this.onReset_(p):"e"===l?gi("Server Error: "+p):"o"===l?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):gi("Unknown control packet command: "+l)}}onHandshake_(u){const l=u.ts,p=u.v,I=u.h;this.sessionId=u.s,this.repoInfo_.host=I,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,l),"5"!==p&&di("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const u=this.transportManager_.upgradeTransport();u&&this.startUpgrade_(u)}startUpgrade_(u){this.secondaryConn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.secondaryConn_),p=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(l,p),mn(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(u){this.log_("Reset packet received.  New host: "+u),this.repoInfo_.host=u,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(u,l){this.log_("Realtime connection established."),this.conn_=u,this.state_=1,this.onReady_&&(this.onReady_(l,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):mn(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const u=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===u||this.rx_===u)&&this.close()}onConnectionLost_(u){this.conn_=null,u||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(us.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(u){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(u),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(u){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(u)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class nr{put(u,l,p,I){}merge(u,l,p,I){}refreshAuthToken(u){}refreshAppCheckToken(u){}onDisconnectPut(u,l,p){}onDisconnectMerge(u,l,p){}onDisconnectCancel(u,l){}reportStats(u){}}class Ji{constructor(u){this.allowedEvents_=u,this.listeners_={},(0,Fe.hu)(Array.isArray(u)&&u.length>0,"Requires a non-empty array")}trigger(u,...l){if(Array.isArray(this.listeners_[u])){const p=[...this.listeners_[u]];for(let I=0;I<p.length;I++)p[I].callback.apply(p[I].context,l)}}on(u,l,p){this.validateEventType_(u),this.listeners_[u]=this.listeners_[u]||[],this.listeners_[u].push({callback:l,context:p});const I=this.getInitialEvent(u);I&&l.apply(p,I)}off(u,l,p){this.validateEventType_(u);const I=this.listeners_[u]||[];for(let O=0;O<I.length;O++)if(I[O].callback===l&&(!p||p===I[O].context))return void I.splice(O,1)}validateEventType_(u){(0,Fe.hu)(this.allowedEvents_.find(l=>l===u),"Unknown event: "+u)}}class ro extends Ji{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,Fe.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ro}getInitialEvent(u){return(0,Fe.hu)("online"===u,"Unknown event type: "+u),[this.online_]}currentlyOnline(){return this.online_}}class ai{constructor(u,l){if(void 0===l){this.pieces_=u.split("/");let p=0;for(let I=0;I<this.pieces_.length;I++)this.pieces_[I].length>0&&(this.pieces_[p]=this.pieces_[I],p++);this.pieces_.length=p,this.pieceNum_=0}else this.pieces_=u,this.pieceNum_=l}toString(){let u="";for(let l=this.pieceNum_;l<this.pieces_.length;l++)""!==this.pieces_[l]&&(u+="/"+this.pieces_[l]);return u||"/"}}function ln(){return new ai("")}function ft(d){return d.pieceNum_>=d.pieces_.length?null:d.pieces_[d.pieceNum_]}function en(d){return d.pieces_.length-d.pieceNum_}function Ir(d){let u=d.pieceNum_;return u<d.pieces_.length&&u++,new ai(d.pieces_,u)}function Rl(d){return d.pieceNum_<d.pieces_.length?d.pieces_[d.pieces_.length-1]:null}function ks(d,u=0){return d.pieces_.slice(d.pieceNum_+u)}function pl(d){if(d.pieceNum_>=d.pieces_.length)return null;const u=[];for(let l=d.pieceNum_;l<d.pieces_.length-1;l++)u.push(d.pieces_[l]);return new ai(u,0)}function Bi(d,u){const l=[];for(let p=d.pieceNum_;p<d.pieces_.length;p++)l.push(d.pieces_[p]);if(u instanceof ai)for(let p=u.pieceNum_;p<u.pieces_.length;p++)l.push(u.pieces_[p]);else{const p=u.split("/");for(let I=0;I<p.length;I++)p[I].length>0&&l.push(p[I])}return new ai(l,0)}function kr(d){return d.pieceNum_>=d.pieces_.length}function ss(d,u){const l=ft(d),p=ft(u);if(null===l)return u;if(l===p)return ss(Ir(d),Ir(u));throw new Error("INTERNAL ERROR: innerPath ("+u+") is not within outerPath ("+d+")")}function Eu(d,u){const l=ks(d,0),p=ks(u,0);for(let I=0;I<l.length&&I<p.length;I++){const O=Ms(l[I],p[I]);if(0!==O)return O}return l.length===p.length?0:l.length<p.length?-1:1}function Ml(d,u){if(en(d)!==en(u))return!1;for(let l=d.pieceNum_,p=u.pieceNum_;l<=d.pieces_.length;l++,p++)if(d.pieces_[l]!==u.pieces_[p])return!1;return!0}function Fs(d,u){let l=d.pieceNum_,p=u.pieceNum_;if(en(d)>en(u))return!1;for(;l<d.pieces_.length;){if(d.pieces_[l]!==u.pieces_[p])return!1;++l,++p}return!0}class _a{constructor(u,l){this.errorPrefix_=l,this.parts_=ks(u,0),this.byteLength_=Math.max(1,this.parts_.length);for(let p=0;p<this.parts_.length;p++)this.byteLength_+=(0,Fe.ug)(this.parts_[p]);ao(this)}}function ao(d){if(d.byteLength_>768)throw new Error(d.errorPrefix_+"has a key path longer than 768 bytes ("+d.byteLength_+").");if(d.parts_.length>32)throw new Error(d.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+hi(d))}function hi(d){return 0===d.parts_.length?"":"in property '"+d.parts_.join(".")+"'"}class fr extends Ji{constructor(){let u,l;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(l="visibilitychange",u="hidden"):void 0!==document.mozHidden?(l="mozvisibilitychange",u="mozHidden"):void 0!==document.msHidden?(l="msvisibilitychange",u="msHidden"):void 0!==document.webkitHidden&&(l="webkitvisibilitychange",u="webkitHidden")),this.visible_=!0,l&&document.addEventListener(l,()=>{const p=!document[u];p!==this.visible_&&(this.visible_=p,this.trigger("visible",p))},!1)}static getInstance(){return new fr}getInitialEvent(u){return(0,Fe.hu)("visible"===u,"Unknown event type: "+u),[this.visible_]}}const Ko=1e3;let el,os=(()=>{class d extends nr{constructor(l,p,I,O,W,de,Ne,Je){if(super(),this.repoInfo_=l,this.applicationId_=p,this.onDataUpdate_=I,this.onConnectStatus_=O,this.onServerInfoUpdate_=W,this.authTokenProvider_=de,this.appCheckTokenProvider_=Ne,this.authOverride_=Je,this.id=d.nextPersistentConnectionId_++,this.log_=Us("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ko,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Je&&!(0,Fe.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");fr.getInstance().on("visible",this.onVisible_,this),-1===l.host.indexOf("fblocal")&&ro.getInstance().on("online",this.onOnline_,this)}sendRequest(l,p,I){const O=++this.requestNumber_,W={r:O,a:l,b:p};this.log_((0,Fe.Wl)(W)),(0,Fe.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(W),I&&(this.requestCBHash_[O]=I)}get(l){this.initConnection_();const p=new Fe.BH,I={p:l._path.toString(),q:l._queryObject};return this.outstandingGets_.push({action:"g",request:I,onComplete:de=>{const Ne=de.d;"ok"===de.s?p.resolve(Ne):p.reject(Ne)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),p.promise}listen(l,p,I,O){this.initConnection_();const W=l._queryIdentifier,de=l._path.toString();this.log_("Listen called for "+de+" "+W),this.listens.has(de)||this.listens.set(de,new Map),(0,Fe.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Fe.hu)(!this.listens.get(de).has(W),"listen() called twice for same path/queryId.");const Ne={onComplete:O,hashFn:p,query:l,tag:I};this.listens.get(de).set(W,Ne),this.connected_&&this.sendListen_(Ne)}sendGet_(l){const p=this.outstandingGets_[l];this.sendRequest("g",p.request,I=>{delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),p.onComplete&&p.onComplete(I)})}sendListen_(l){const p=l.query,I=p._path.toString(),O=p._queryIdentifier;this.log_("Listen on "+I+" for "+O);const W={p:I};l.tag&&(W.q=p._queryObject,W.t=l.tag),W.h=l.hashFn(),this.sendRequest("q",W,Ne=>{const Je=Ne.d,xt=Ne.s;d.warnOnListenWarnings_(Je,p),(this.listens.get(I)&&this.listens.get(I).get(O))===l&&(this.log_("listen response",Ne),"ok"!==xt&&this.removeListen_(I,O),l.onComplete&&l.onComplete(xt,Je))})}static warnOnListenWarnings_(l,p){if(l&&"object"==typeof l&&(0,Fe.r3)(l,"w")){const I=(0,Fe.DV)(l,"w");if(Array.isArray(I)&&~I.indexOf("no_index")){const O='".indexOn": "'+p._queryParams.getIndex().toString()+'"',W=p._path.toString();di(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${O} at ${W} to your security rules for better performance.`)}}}refreshAuthToken(l){this.authToken_=l,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(l)}reduceReconnectDelayIfAdminCredential_(l){(l&&40===l.length||(0,Fe.GJ)(l))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(l){this.appCheckToken_=l,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const l=this.authToken_,p=(0,Fe.w9)(l)?"auth":"gauth",I={cred:l};null===this.authOverride_?I.noauth=!0:"object"==typeof this.authOverride_&&(I.authvar=this.authOverride_),this.sendRequest(p,I,O=>{const W=O.s,de=O.d||"error";this.authToken_===l&&("ok"===W?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(W,de))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},l=>{const p=l.s,I=l.d||"error";"ok"===p?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(p,I)})}unlisten(l,p){const I=l._path.toString(),O=l._queryIdentifier;this.log_("Unlisten called for "+I+" "+O),(0,Fe.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(I,O)&&this.connected_&&this.sendUnlisten_(I,O,l._queryObject,p)}sendUnlisten_(l,p,I,O){this.log_("Unlisten on "+l+" for "+p);const W={p:l};O&&(W.q=I,W.t=O),this.sendRequest("n",W)}onDisconnectPut(l,p,I){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",l,p,I):this.onDisconnectRequestQueue_.push({pathString:l,action:"o",data:p,onComplete:I})}onDisconnectMerge(l,p,I){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",l,p,I):this.onDisconnectRequestQueue_.push({pathString:l,action:"om",data:p,onComplete:I})}onDisconnectCancel(l,p){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",l,null,p):this.onDisconnectRequestQueue_.push({pathString:l,action:"oc",data:null,onComplete:p})}sendOnDisconnect_(l,p,I,O){const W={p,d:I};this.log_("onDisconnect "+l,W),this.sendRequest(l,W,de=>{O&&setTimeout(()=>{O(de.s,de.d)},Math.floor(0))})}put(l,p,I,O){this.putInternal("p",l,p,I,O)}merge(l,p,I,O){this.putInternal("m",l,p,I,O)}putInternal(l,p,I,O,W){this.initConnection_();const de={p,d:I};void 0!==W&&(de.h=W),this.outstandingPuts_.push({action:l,request:de,onComplete:O}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+p)}sendPut_(l){const p=this.outstandingPuts_[l].action,I=this.outstandingPuts_[l].request,O=this.outstandingPuts_[l].onComplete;this.outstandingPuts_[l].queued=this.connected_,this.sendRequest(p,I,W=>{this.log_(p+" response",W),delete this.outstandingPuts_[l],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),O&&O(W.s,W.d)})}reportStats(l){if(this.connected_){const p={c:l};this.log_("reportStats",p),this.sendRequest("s",p,I=>{"ok"!==I.s&&this.log_("reportStats","Error sending stats: "+I.d)})}}onDataMessage_(l){if("r"in l){this.log_("from server: "+(0,Fe.Wl)(l));const p=l.r,I=this.requestCBHash_[p];I&&(delete this.requestCBHash_[p],I(l.b))}else{if("error"in l)throw"A server-side error has occurred: "+l.error;"a"in l&&this.onDataPush_(l.a,l.b)}}onDataPush_(l,p){this.log_("handleServerMessage",l,p),"d"===l?this.onDataUpdate_(p.p,p.d,!1,p.t):"m"===l?this.onDataUpdate_(p.p,p.d,!0,p.t):"c"===l?this.onListenRevoked_(p.p,p.q):"ac"===l?this.onAuthRevoked_(p.s,p.d):"apc"===l?this.onAppCheckRevoked_(p.s,p.d):"sd"===l?this.onSecurityDebugPacket_(p):gi("Unrecognized action received from server: "+(0,Fe.Wl)(l)+"\nAre you using the latest client?")}onReady_(l,p){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(l),this.lastSessionId=p,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(l){(0,Fe.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(l))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(l){l&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ko,this.realtime_||this.scheduleConnect_(0)),this.visible_=l}onOnline_(l){l?(this.log_("Browser went online."),this.reconnectDelay_=Ko,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ko),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const l=(new Date).getTime()-this.lastConnectionAttemptTime_;let p=Math.max(0,this.reconnectDelay_-l);p=Math.random()*p,this.log_("Trying to reconnect in "+p+"ms"),this.scheduleConnect_(p),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var l=this;return(0,rs.Z)(function*(){if(l.shouldReconnect_()){l.log_("Making a connection attempt"),l.lastConnectionAttemptTime_=(new Date).getTime(),l.lastConnectionEstablishedTime_=null;const p=l.onDataMessage_.bind(l),I=l.onReady_.bind(l),O=l.onRealtimeDisconnect_.bind(l),W=l.id+":"+d.nextConnectionId_++,de=l.lastSessionId;let Ne=!1,Je=null;const xt=function(){Je?Je.close():(Ne=!0,O())};l.realtime_={close:xt,sendRequest:function(Hn){(0,Fe.hu)(Je,"sendRequest call when we're not connected not allowed."),Je.sendRequest(Hn)}};const Yt=l.forceTokenRefresh_;l.forceTokenRefresh_=!1;try{const[Hn,pr]=yield Promise.all([l.authTokenProvider_.getToken(Yt),l.appCheckTokenProvider_.getToken(Yt)]);Ne?ki("getToken() completed but was canceled"):(ki("getToken() completed. Creating connection."),l.authToken_=Hn&&Hn.accessToken,l.appCheckToken_=pr&&pr.token,Je=new zt(W,l.repoInfo_,l.applicationId_,l.appCheckToken_,l.authToken_,p,I,O,bi=>{di(bi+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")},de))}catch(Hn){l.log_("Failed to get token: "+Hn),Ne||(l.repoInfo_.nodeAdmin&&di(Hn),xt())}}})()}interrupt(l){ki("Interrupting connection for reason: "+l),this.interruptReasons_[l]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(l){ki("Resuming connection for reason: "+l),delete this.interruptReasons_[l],(0,Fe.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Ko,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(l){const p=l-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:p})}cancelSentTransactions_(){for(let l=0;l<this.outstandingPuts_.length;l++){const p=this.outstandingPuts_[l];p&&"h"in p.request&&p.queued&&(p.onComplete&&p.onComplete("disconnect"),delete this.outstandingPuts_[l],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(l,p){let I;I=p?p.map(W=>Qi(W)).join("$"):"default";const O=this.removeListen_(l,I);O&&O.onComplete&&O.onComplete("permission_denied")}removeListen_(l,p){const I=new ai(l).toString();let O;if(this.listens.has(I)){const W=this.listens.get(I);O=W.get(p),W.delete(p),0===W.size&&this.listens.delete(I)}else O=void 0;return O}onAuthRevoked_(l,p){ki("Auth token revoked: "+l+"/"+p),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===l||"permission_denied"===l)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(l,p){ki("App check token revoked: "+l+"/"+p),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===l||"permission_denied"===l)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(l){this.securityDebugCallback_?this.securityDebugCallback_(l):"msg"in l&&console.log("FIREBASE: "+l.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const l of this.listens.values())for(const p of l.values())this.sendListen_(p);for(let l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){const l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(let l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)}sendConnectStats_(){const l={};let p="js";(0,Fe.Yr)()&&(p=this.repoInfo_.nodeAdmin?"admin_node":"node"),l["sdk."+p+"."+To.replace(/\./g,"-")]=1,(0,Fe.uI)()?l["framework.cordova"]=1:(0,Fe.b$)()&&(l["framework.reactnative"]=1),this.reportStats(l)}shouldReconnect_(){const l=ro.getInstance().currentlyOnline();return(0,Fe.xb)(this.interruptReasons_)&&l}}return d.nextPersistentConnectionId_=0,d.nextConnectionId_=0,d})();class Zr{constructor(u,l){this.name=u,this.node=l}static Wrap(u,l){return new Zr(u,l)}}class Qo{getCompare(){return this.compare.bind(this)}indexedValueChanged(u,l){const p=new Zr(Zi,u),I=new Zr(Zi,l);return 0!==this.compare(p,I)}minPost(){return Zr.MIN}}class Ea extends Qo{static get __EMPTY_NODE(){return el}static set __EMPTY_NODE(u){el=u}compare(u,l){return Ms(u.name,l.name)}isDefinedOn(u){throw(0,Fe.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(u,l){return!1}minPost(){return Zr.MIN}maxPost(){return new Zr(zi,el)}makePost(u,l){return(0,Fe.hu)("string"==typeof u,"KeyIndex indexValue must always be a string."),new Zr(u,el)}toString(){return".key"}}const lo=new Ea;class F{constructor(u,l,p,I,O=null){this.isReverse_=I,this.resultGenerator_=O,this.nodeStack_=[];let W=1;for(;!u.isEmpty();)if(W=l?p(u.key,l):1,I&&(W*=-1),W<0)u=this.isReverse_?u.left:u.right;else{if(0===W){this.nodeStack_.push(u);break}this.nodeStack_.push(u),u=this.isReverse_?u.right:u.left}}getNext(){if(0===this.nodeStack_.length)return null;let l,u=this.nodeStack_.pop();if(l=this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value},this.isReverse_)for(u=u.left;!u.isEmpty();)this.nodeStack_.push(u),u=u.right;else for(u=u.right;!u.isEmpty();)this.nodeStack_.push(u),u=u.left;return l}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const u=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value}}}let je,A=(()=>{class d{constructor(l,p,I,O,W){this.key=l,this.value=p,this.color=null!=I?I:d.RED,this.left=null!=O?O:$.EMPTY_NODE,this.right=null!=W?W:$.EMPTY_NODE}copy(l,p,I,O,W){return new d(null!=l?l:this.key,null!=p?p:this.value,null!=I?I:this.color,null!=O?O:this.left,null!=W?W:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(l){return this.left.inorderTraversal(l)||!!l(this.key,this.value)||this.right.inorderTraversal(l)}reverseTraversal(l){return this.right.reverseTraversal(l)||l(this.key,this.value)||this.left.reverseTraversal(l)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(l,p,I){let O=this;const W=I(l,O.key);return O=W<0?O.copy(null,null,null,O.left.insert(l,p,I),null):0===W?O.copy(null,p,null,null,null):O.copy(null,null,null,null,O.right.insert(l,p,I)),O.fixUp_()}removeMin_(){if(this.left.isEmpty())return $.EMPTY_NODE;let l=this;return!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.removeMin_(),null),l.fixUp_()}remove(l,p){let I,O;if(I=this,p(l,I.key)<0)!I.left.isEmpty()&&!I.left.isRed_()&&!I.left.left.isRed_()&&(I=I.moveRedLeft_()),I=I.copy(null,null,null,I.left.remove(l,p),null);else{if(I.left.isRed_()&&(I=I.rotateRight_()),!I.right.isEmpty()&&!I.right.isRed_()&&!I.right.left.isRed_()&&(I=I.moveRedRight_()),0===p(l,I.key)){if(I.right.isEmpty())return $.EMPTY_NODE;O=I.right.min_(),I=I.copy(O.key,O.value,null,null,I.right.removeMin_())}I=I.copy(null,null,null,null,I.right.remove(l,p))}return I.fixUp_()}isRed_(){return this.color}fixUp_(){let l=this;return l.right.isRed_()&&!l.left.isRed_()&&(l=l.rotateLeft_()),l.left.isRed_()&&l.left.left.isRed_()&&(l=l.rotateRight_()),l.left.isRed_()&&l.right.isRed_()&&(l=l.colorFlip_()),l}moveRedLeft_(){let l=this.colorFlip_();return l.right.left.isRed_()&&(l=l.copy(null,null,null,null,l.right.rotateRight_()),l=l.rotateLeft_(),l=l.colorFlip_()),l}moveRedRight_(){let l=this.colorFlip_();return l.left.left.isRed_()&&(l=l.rotateRight_(),l=l.colorFlip_()),l}rotateLeft_(){const l=this.copy(null,null,d.RED,null,this.right.left);return this.right.copy(null,null,this.color,l,null)}rotateRight_(){const l=this.copy(null,null,d.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,l)}colorFlip_(){const l=this.left.copy(null,null,!this.left.color,null,null),p=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,l,p)}checkMaxDepth_(){const l=this.check_();return Math.pow(2,l)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const l=this.left.check_();if(l!==this.right.check_())throw new Error("Black depths differ");return l+(this.isRed_()?0:1)}}return d.RED=!0,d.BLACK=!1,d})();class ${constructor(u,l=$.EMPTY_NODE){this.comparator_=u,this.root_=l}insert(u,l){return new $(this.comparator_,this.root_.insert(u,l,this.comparator_).copy(null,null,A.BLACK,null,null))}remove(u){return new $(this.comparator_,this.root_.remove(u,this.comparator_).copy(null,null,A.BLACK,null,null))}get(u){let l,p=this.root_;for(;!p.isEmpty();){if(l=this.comparator_(u,p.key),0===l)return p.value;l<0?p=p.left:l>0&&(p=p.right)}return null}getPredecessorKey(u){let l,p=this.root_,I=null;for(;!p.isEmpty();){if(l=this.comparator_(u,p.key),0===l){if(p.left.isEmpty())return I?I.key:null;for(p=p.left;!p.right.isEmpty();)p=p.right;return p.key}l<0?p=p.left:l>0&&(I=p,p=p.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(u){return this.root_.inorderTraversal(u)}reverseTraversal(u){return this.root_.reverseTraversal(u)}getIterator(u){return new F(this.root_,null,this.comparator_,!1,u)}getIteratorFrom(u,l){return new F(this.root_,u,this.comparator_,!1,l)}getReverseIteratorFrom(u,l){return new F(this.root_,u,this.comparator_,!0,l)}getReverseIterator(u){return new F(this.root_,null,this.comparator_,!0,u)}}function J(d,u){return Ms(d.name,u.name)}function ye(d,u){return Ms(d,u)}$.EMPTY_NODE=new class{copy(u,l,p,I,O){return this}insert(u,l,p){return new A(u,l,null)}remove(u,l){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(u){return!1}reverseTraversal(u){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Wt=function(d){return"number"==typeof d?"number:"+K(d):"string:"+d},xn=function(d){if(d.isLeafNode()){const u=d.val();(0,Fe.hu)("string"==typeof u||"number"==typeof u||"object"==typeof u&&(0,Fe.r3)(u,".sv"),"Priority must be a string or number.")}else(0,Fe.hu)(d===je||d.isEmpty(),"priority of unexpected type.");(0,Fe.hu)(d===je||d.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let $r,jr,wr,Gn=(()=>{class d{constructor(l,p=d.__childrenNodeConstructor.EMPTY_NODE){this.value_=l,this.priorityNode_=p,this.lazyHash_=null,(0,Fe.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),xn(this.priorityNode_)}static set __childrenNodeConstructor(l){$r=l}static get __childrenNodeConstructor(){return $r}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(l){return new d(this.value_,l)}getImmediateChild(l){return".priority"===l?this.priorityNode_:d.__childrenNodeConstructor.EMPTY_NODE}getChild(l){return kr(l)?this:".priority"===ft(l)?this.priorityNode_:d.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(l,p){return null}updateImmediateChild(l,p){return".priority"===l?this.updatePriority(p):p.isEmpty()&&".priority"!==l?this:d.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(l,p).updatePriority(this.priorityNode_)}updateChild(l,p){const I=ft(l);return null===I?p:p.isEmpty()&&".priority"!==I?this:((0,Fe.hu)(".priority"!==I||1===en(l),".priority must be the last token in a path"),this.updateImmediateChild(I,d.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ir(l),p)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(l,p){return!1}val(l){return l&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let l="";this.priorityNode_.isEmpty()||(l+="priority:"+Wt(this.priorityNode_.val())+":");const p=typeof this.value_;l+=p+":",l+="number"===p?K(this.value_):this.value_,this.lazyHash_=Qs(l)}return this.lazyHash_}getValue(){return this.value_}compareTo(l){return l===d.__childrenNodeConstructor.EMPTY_NODE?1:l instanceof d.__childrenNodeConstructor?-1:((0,Fe.hu)(l.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(l))}compareToLeafNode_(l){const p=typeof l.value_,I=typeof this.value_,O=d.VALUE_TYPE_ORDER.indexOf(p),W=d.VALUE_TYPE_ORDER.indexOf(I);return(0,Fe.hu)(O>=0,"Unknown leaf type: "+p),(0,Fe.hu)(W>=0,"Unknown leaf type: "+I),O===W?"object"===I?0:this.value_<l.value_?-1:this.value_===l.value_?0:1:W-O}withIndex(){return this}isIndexed(){return!0}equals(l){if(l===this)return!0;if(l.isLeafNode()){const p=l;return this.value_===p.value_&&this.priorityNode_.equals(p.priorityNode_)}return!1}}return d.VALUE_TYPE_ORDER=["object","boolean","number","string"],d})();const Jr=new class extends Qo{compare(u,l){const p=u.node.getPriority(),I=l.node.getPriority(),O=p.compareTo(I);return 0===O?Ms(u.name,l.name):O}isDefinedOn(u){return!u.getPriority().isEmpty()}indexedValueChanged(u,l){return!u.getPriority().equals(l.getPriority())}minPost(){return Zr.MIN}maxPost(){return new Zr(zi,new Gn("[PRIORITY-POST]",wr))}makePost(u,l){const p=jr(u);return new Zr(l,new Gn("[PRIORITY-POST]",p))}toString(){return".priority"}},aa=Math.log(2);class as{constructor(u){this.count=parseInt(Math.log(u+1)/aa,10),this.current_=this.count-1;const I=(O=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=u+1&I}nextBitIsOne(){const u=!(this.bits_&1<<this.current_);return this.current_--,u}}const Ia=function(d,u,l,p){d.sort(u);const I=function(Ne,Je){const xt=Je-Ne;let Ft,Yt;if(0===xt)return null;if(1===xt)return Ft=d[Ne],Yt=l?l(Ft):Ft,new A(Yt,Ft.node,A.BLACK,null,null);{const Hn=parseInt(xt/2,10)+Ne,pr=I(Ne,Hn),bi=I(Hn+1,Je);return Ft=d[Hn],Yt=l?l(Ft):Ft,new A(Yt,Ft.node,A.BLACK,pr,bi)}},de=function(Ne){let Je=null,xt=null,Ft=d.length;const Yt=function(pr,bi){const No=Ft-pr,ll=Ft;Ft-=pr;const Kl=I(No+1,ll),gu=d[No],Sm=l?l(gu):gu;Hn(new A(Sm,gu.node,bi,null,Kl))},Hn=function(pr){Je?(Je.left=pr,Je=pr):(xt=pr,Je=pr)};for(let pr=0;pr<Ne.count;++pr){const bi=Ne.nextBitIsOne(),No=Math.pow(2,Ne.count-(pr+1));bi?Yt(No,A.BLACK):(Yt(No,A.BLACK),Yt(No,A.RED))}return xt}(new as(d.length));return new $(p||u,de)};let $o;const Ti={};class Di{constructor(u,l){this.indexes_=u,this.indexSet_=l}static get Default(){return(0,Fe.hu)(Ti&&Jr,"ChildrenNode.ts has not been loaded"),$o=$o||new Di({".priority":Ti},{".priority":Jr}),$o}get(u){const l=(0,Fe.DV)(this.indexes_,u);if(!l)throw new Error("No index defined for "+u);return l instanceof $?l:null}hasIndex(u){return(0,Fe.r3)(this.indexSet_,u.toString())}addIndex(u,l){(0,Fe.hu)(u!==lo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const p=[];let I=!1;const O=l.getIterator(Zr.Wrap);let de,W=O.getNext();for(;W;)I=I||u.isDefinedOn(W.node),p.push(W),W=O.getNext();de=I?Ia(p,u.getCompare()):Ti;const Ne=u.toString(),Je=Object.assign({},this.indexSet_);Je[Ne]=u;const xt=Object.assign({},this.indexes_);return xt[Ne]=de,new Di(xt,Je)}addToIndexes(u,l){const p=(0,Fe.UI)(this.indexes_,(I,O)=>{const W=(0,Fe.DV)(this.indexSet_,O);if((0,Fe.hu)(W,"Missing index implementation for "+O),I===Ti){if(W.isDefinedOn(u.node)){const de=[],Ne=l.getIterator(Zr.Wrap);let Je=Ne.getNext();for(;Je;)Je.name!==u.name&&de.push(Je),Je=Ne.getNext();return de.push(u),Ia(de,W.getCompare())}return Ti}{const de=l.get(u.name);let Ne=I;return de&&(Ne=Ne.remove(new Zr(u.name,de))),Ne.insert(u,u.node)}});return new Di(p,this.indexSet_)}removeFromIndexes(u,l){const p=(0,Fe.UI)(this.indexes_,I=>{if(I===Ti)return I;{const O=l.get(u.name);return O?I.remove(new Zr(u.name,O)):I}});return new Di(p,this.indexSet_)}}let ba,rr=(()=>{class d{constructor(l,p,I){this.children_=l,this.priorityNode_=p,this.indexMap_=I,this.lazyHash_=null,this.priorityNode_&&xn(this.priorityNode_),this.children_.isEmpty()&&(0,Fe.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ba||(ba=new d(new $(ye),null,Di.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ba}updatePriority(l){return this.children_.isEmpty()?this:new d(this.children_,l,this.indexMap_)}getImmediateChild(l){if(".priority"===l)return this.getPriority();{const p=this.children_.get(l);return null===p?ba:p}}getChild(l){const p=ft(l);return null===p?this:this.getImmediateChild(p).getChild(Ir(l))}hasChild(l){return null!==this.children_.get(l)}updateImmediateChild(l,p){if((0,Fe.hu)(p,"We should always be passing snapshot nodes"),".priority"===l)return this.updatePriority(p);{const I=new Zr(l,p);let O,W;p.isEmpty()?(O=this.children_.remove(l),W=this.indexMap_.removeFromIndexes(I,this.children_)):(O=this.children_.insert(l,p),W=this.indexMap_.addToIndexes(I,this.children_));const de=O.isEmpty()?ba:this.priorityNode_;return new d(O,de,W)}}updateChild(l,p){const I=ft(l);if(null===I)return p;{(0,Fe.hu)(".priority"!==ft(l)||1===en(l),".priority must be the last token in a path");const O=this.getImmediateChild(I).updateChild(Ir(l),p);return this.updateImmediateChild(I,O)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(l){if(this.isEmpty())return null;const p={};let I=0,O=0,W=!0;if(this.forEachChild(Jr,(de,Ne)=>{p[de]=Ne.val(l),I++,W&&d.INTEGER_REGEXP_.test(de)?O=Math.max(O,Number(de)):W=!1}),!l&&W&&O<2*I){const de=[];for(const Ne in p)de[Ne]=p[Ne];return de}return l&&!this.getPriority().isEmpty()&&(p[".priority"]=this.getPriority().val()),p}hash(){if(null===this.lazyHash_){let l="";this.getPriority().isEmpty()||(l+="priority:"+Wt(this.getPriority().val())+":"),this.forEachChild(Jr,(p,I)=>{const O=I.hash();""!==O&&(l+=":"+p+":"+O)}),this.lazyHash_=""===l?"":Qs(l)}return this.lazyHash_}getPredecessorChildName(l,p,I){const O=this.resolveIndex_(I);if(O){const W=O.getPredecessorKey(new Zr(l,p));return W?W.name:null}return this.children_.getPredecessorKey(l)}getFirstChildName(l){const p=this.resolveIndex_(l);if(p){const I=p.minKey();return I&&I.name}return this.children_.minKey()}getFirstChild(l){const p=this.getFirstChildName(l);return p?new Zr(p,this.children_.get(p)):null}getLastChildName(l){const p=this.resolveIndex_(l);if(p){const I=p.maxKey();return I&&I.name}return this.children_.maxKey()}getLastChild(l){const p=this.getLastChildName(l);return p?new Zr(p,this.children_.get(p)):null}forEachChild(l,p){const I=this.resolveIndex_(l);return I?I.inorderTraversal(O=>p(O.name,O.node)):this.children_.inorderTraversal(p)}getIterator(l){return this.getIteratorFrom(l.minPost(),l)}getIteratorFrom(l,p){const I=this.resolveIndex_(p);if(I)return I.getIteratorFrom(l,O=>O);{const O=this.children_.getIteratorFrom(l.name,Zr.Wrap);let W=O.peek();for(;null!=W&&p.compare(W,l)<0;)O.getNext(),W=O.peek();return O}}getReverseIterator(l){return this.getReverseIteratorFrom(l.maxPost(),l)}getReverseIteratorFrom(l,p){const I=this.resolveIndex_(p);if(I)return I.getReverseIteratorFrom(l,O=>O);{const O=this.children_.getReverseIteratorFrom(l.name,Zr.Wrap);let W=O.peek();for(;null!=W&&p.compare(W,l)>0;)O.getNext(),W=O.peek();return O}}compareTo(l){return this.isEmpty()?l.isEmpty()?0:-1:l.isLeafNode()||l.isEmpty()?1:l===Zl?-1:0}withIndex(l){if(l===lo||this.indexMap_.hasIndex(l))return this;{const p=this.indexMap_.addIndex(l,this.children_);return new d(this.children_,this.priorityNode_,p)}}isIndexed(l){return l===lo||this.indexMap_.hasIndex(l)}equals(l){if(l===this)return!0;if(l.isLeafNode())return!1;{const p=l;if(this.getPriority().equals(p.getPriority())){if(this.children_.count()===p.children_.count()){const I=this.getIterator(Jr),O=p.getIterator(Jr);let W=I.getNext(),de=O.getNext();for(;W&&de;){if(W.name!==de.name||!W.node.equals(de.node))return!1;W=I.getNext(),de=O.getNext()}return null===W&&null===de}return!1}return!1}}resolveIndex_(l){return l===lo?null:this.indexMap_.get(l.toString())}}return d.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,d})();const Zl=new class extends rr{constructor(){super(new $(ye),rr.EMPTY_NODE,Di.Default)}compareTo(u){return u===this?0:1}equals(u){return u===this}getPriority(){return this}getImmediateChild(u){return rr.EMPTY_NODE}isEmpty(){return!1}};function ii(d,u=null){if(null===d)return rr.EMPTY_NODE;if("object"==typeof d&&".priority"in d&&(u=d[".priority"]),(0,Fe.hu)(null===u||"string"==typeof u||"number"==typeof u||"object"==typeof u&&".sv"in u,"Invalid priority type found: "+typeof u),"object"==typeof d&&".value"in d&&null!==d[".value"]&&(d=d[".value"]),"object"!=typeof d||".sv"in d)return new Gn(d,ii(u));if(d instanceof Array){let l=rr.EMPTY_NODE;return le(d,(p,I)=>{if((0,Fe.r3)(d,p)&&"."!==p.substring(0,1)){const O=ii(I);(O.isLeafNode()||!O.isEmpty())&&(l=l.updateImmediateChild(p,O))}}),l.updatePriority(ii(u))}{const l=[];let p=!1;if(le(d,(W,de)=>{if("."!==W.substring(0,1)){const Ne=ii(de);Ne.isEmpty()||(p=p||!Ne.getPriority().isEmpty(),l.push(new Zr(W,Ne)))}}),0===l.length)return rr.EMPTY_NODE;const O=Ia(l,J,W=>W.name,ye);if(p){const W=Ia(l,Jr.getCompare());return new rr(O,ii(u),new Di({".priority":W},{".priority":Jr}))}return new rr(O,ii(u),Di.Default)}}Object.defineProperties(Zr,{MIN:{value:new Zr(Zi,rr.EMPTY_NODE)},MAX:{value:new Zr(zi,Zl)}}),Ea.__EMPTY_NODE=rr.EMPTY_NODE,Gn.__childrenNodeConstructor=rr,je=Zl,wr=Zl,function(d){jr=d}(ii);class Gu extends Qo{constructor(u){super(),this.indexPath_=u,(0,Fe.hu)(!kr(u)&&".priority"!==ft(u),"Can't create PathIndex with empty path or .priority key")}extractChild(u){return u.getChild(this.indexPath_)}isDefinedOn(u){return!u.getChild(this.indexPath_).isEmpty()}compare(u,l){const p=this.extractChild(u.node),I=this.extractChild(l.node),O=p.compareTo(I);return 0===O?Ms(u.name,l.name):O}makePost(u,l){const p=ii(u),I=rr.EMPTY_NODE.updateChild(this.indexPath_,p);return new Zr(l,I)}maxPost(){const u=rr.EMPTY_NODE.updateChild(this.indexPath_,Zl);return new Zr(zi,u)}toString(){return ks(this.indexPath_,0).join("/")}}const Mc=new class extends Qo{compare(u,l){const p=u.node.compareTo(l.node);return 0===p?Ms(u.name,l.name):p}isDefinedOn(u){return!0}indexedValueChanged(u,l){return!u.equals(l)}minPost(){return Zr.MIN}maxPost(){return Zr.MAX}makePost(u,l){const p=ii(u);return new Zr(l,p)}toString(){return".value"}},yo="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ol=function(){let d=0;const u=[];return function(l){const p=l===d;let I;d=l;const O=new Array(8);for(I=7;I>=0;I--)O[I]=yo.charAt(l%64),l=Math.floor(l/64);(0,Fe.hu)(0===l,"Cannot push at time == 0");let W=O.join("");if(p){for(I=11;I>=0&&63===u[I];I--)u[I]=0;u[I]++}else for(I=0;I<12;I++)u[I]=Math.floor(64*Math.random());for(I=0;I<12;I++)W+=yo.charAt(u[I]);return(0,Fe.hu)(20===W.length,"nextPushId: Length should be 20."),W}}(),ja=function(d){if(d===""+B)return"-";const u=k(d);if(null!=u)return""+(u+1);const l=new Array(d.length);for(let W=0;W<l.length;W++)l[W]=d.charAt(W);if(l.length<786)return l.push("-"),l.join("");let p=l.length-1;for(;p>=0&&"z"===l[p];)p--;if(-1===p)return zi;const O=yo.charAt(yo.indexOf(l[p])+1);return l[p]=O,l.slice(0,p+1).join("")},Pl=function(d){if(d===""+H)return Zi;const u=k(d);if(null!=u)return""+(u-1);const l=new Array(d.length);for(let p=0;p<l.length;p++)l[p]=d.charAt(p);return"-"===l[l.length-1]?1===l.length?""+B:(delete l[l.length-1],l.join("")):(l[l.length-1]=yo.charAt(yo.indexOf(l[l.length-1])-1),l.join("")+"z".repeat(786-l.length))};function la(d){return{type:"value",snapshotNode:d}}function ls(d,u){return{type:"child_added",snapshotNode:u,childName:d}}function ws(d,u){return{type:"child_removed",snapshotNode:u,childName:d}}function Uo(d,u,l){return{type:"child_changed",snapshotNode:u,childName:d,oldSnap:l}}class _o{constructor(u){this.index_=u}updateChild(u,l,p,I,O,W){(0,Fe.hu)(u.isIndexed(this.index_),"A node must be indexed if only a child is updated");const de=u.getImmediateChild(l);return de.getChild(I).equals(p.getChild(I))&&de.isEmpty()===p.isEmpty()||(null!=W&&(p.isEmpty()?u.hasChild(l)?W.trackChildChange(ws(l,de)):(0,Fe.hu)(u.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):de.isEmpty()?W.trackChildChange(ls(l,p)):W.trackChildChange(Uo(l,p,de))),u.isLeafNode()&&p.isEmpty())?u:u.updateImmediateChild(l,p).withIndex(this.index_)}updateFullNode(u,l,p){return null!=p&&(u.isLeafNode()||u.forEachChild(Jr,(I,O)=>{l.hasChild(I)||p.trackChildChange(ws(I,O))}),l.isLeafNode()||l.forEachChild(Jr,(I,O)=>{if(u.hasChild(I)){const W=u.getImmediateChild(I);W.equals(O)||p.trackChildChange(Uo(I,O,W))}else p.trackChildChange(ls(I,O))})),l.withIndex(this.index_)}updatePriority(u,l){return u.isEmpty()?rr.EMPTY_NODE:u.updatePriority(l)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ua{constructor(u){this.indexedFilter_=new _o(u.getIndex()),this.index_=u.getIndex(),this.startPost_=ua.getStartPost_(u),this.endPost_=ua.getEndPost_(u)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(u){return this.index_.compare(this.getStartPost(),u)<=0&&this.index_.compare(u,this.getEndPost())<=0}updateChild(u,l,p,I,O,W){return this.matches(new Zr(l,p))||(p=rr.EMPTY_NODE),this.indexedFilter_.updateChild(u,l,p,I,O,W)}updateFullNode(u,l,p){l.isLeafNode()&&(l=rr.EMPTY_NODE);let I=l.withIndex(this.index_);I=I.updatePriority(rr.EMPTY_NODE);const O=this;return l.forEachChild(Jr,(W,de)=>{O.matches(new Zr(W,de))||(I=I.updateImmediateChild(W,rr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(u,I,p)}updatePriority(u,l){return u}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(u){if(u.hasStart()){const l=u.getIndexStartName();return u.getIndex().makePost(u.getIndexStartValue(),l)}return u.getIndex().minPost()}static getEndPost_(u){if(u.hasEnd()){const l=u.getIndexEndName();return u.getIndex().makePost(u.getIndexEndValue(),l)}return u.getIndex().maxPost()}}class Ha{constructor(u){this.rangedFilter_=new ua(u),this.index_=u.getIndex(),this.limit_=u.getLimit(),this.reverse_=!u.isViewFromLeft()}updateChild(u,l,p,I,O,W){return this.rangedFilter_.matches(new Zr(l,p))||(p=rr.EMPTY_NODE),u.getImmediateChild(l).equals(p)?u:u.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(u,l,p,I,O,W):this.fullLimitUpdateChild_(u,l,p,O,W)}updateFullNode(u,l,p){let I;if(l.isLeafNode()||l.isEmpty())I=rr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<l.numChildren()&&l.isIndexed(this.index_)){let O;I=rr.EMPTY_NODE.withIndex(this.index_),O=this.reverse_?l.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let W=0;for(;O.hasNext()&&W<this.limit_;){const de=O.getNext();let Ne;if(Ne=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),de)<=0:this.index_.compare(de,this.rangedFilter_.getEndPost())<=0,!Ne)break;I=I.updateImmediateChild(de.name,de.node),W++}}else{let O,W,de,Ne;if(I=l.withIndex(this.index_),I=I.updatePriority(rr.EMPTY_NODE),this.reverse_){Ne=I.getReverseIterator(this.index_),O=this.rangedFilter_.getEndPost(),W=this.rangedFilter_.getStartPost();const Ft=this.index_.getCompare();de=(Yt,Hn)=>Ft(Hn,Yt)}else Ne=I.getIterator(this.index_),O=this.rangedFilter_.getStartPost(),W=this.rangedFilter_.getEndPost(),de=this.index_.getCompare();let Je=0,xt=!1;for(;Ne.hasNext();){const Ft=Ne.getNext();!xt&&de(O,Ft)<=0&&(xt=!0),xt&&Je<this.limit_&&de(Ft,W)<=0?Je++:I=I.updateImmediateChild(Ft.name,rr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(u,I,p)}updatePriority(u,l){return u}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(u,l,p,I,O){let W;if(this.reverse_){const Ft=this.index_.getCompare();W=(Yt,Hn)=>Ft(Hn,Yt)}else W=this.index_.getCompare();const de=u;(0,Fe.hu)(de.numChildren()===this.limit_,"");const Ne=new Zr(l,p),Je=this.reverse_?de.getFirstChild(this.index_):de.getLastChild(this.index_),xt=this.rangedFilter_.matches(Ne);if(de.hasChild(l)){const Ft=de.getImmediateChild(l);let Yt=I.getChildAfterChild(this.index_,Je,this.reverse_);for(;null!=Yt&&(Yt.name===l||de.hasChild(Yt.name));)Yt=I.getChildAfterChild(this.index_,Yt,this.reverse_);const Hn=null==Yt?1:W(Yt,Ne);if(xt&&!p.isEmpty()&&Hn>=0)return null!=O&&O.trackChildChange(Uo(l,p,Ft)),de.updateImmediateChild(l,p);{null!=O&&O.trackChildChange(ws(l,Ft));const bi=de.updateImmediateChild(l,rr.EMPTY_NODE);return null!=Yt&&this.rangedFilter_.matches(Yt)?(null!=O&&O.trackChildChange(ls(Yt.name,Yt.node)),bi.updateImmediateChild(Yt.name,Yt.node)):bi}}return p.isEmpty()?u:xt&&W(Je,Ne)>=0?(null!=O&&(O.trackChildChange(ws(Je.name,Je.node)),O.trackChildChange(ls(l,p))),de.updateImmediateChild(l,p).updateImmediateChild(Je.name,rr.EMPTY_NODE)):u}}class gl{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Fe.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Fe.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Zi}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Fe.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Fe.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:zi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Fe.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Jr}copy(){const u=new gl;return u.limitSet_=this.limitSet_,u.limit_=this.limit_,u.startSet_=this.startSet_,u.indexStartValue_=this.indexStartValue_,u.startNameSet_=this.startNameSet_,u.indexStartName_=this.indexStartName_,u.endSet_=this.endSet_,u.indexEndValue_=this.indexEndValue_,u.endNameSet_=this.endNameSet_,u.indexEndName_=this.indexEndName_,u.index_=this.index_,u.viewFrom_=this.viewFrom_,u}}function Gs(d,u,l){const p=d.copy();return p.startSet_=!0,void 0===u&&(u=null),p.indexStartValue_=u,null!=l?(p.startNameSet_=!0,p.indexStartName_=l):(p.startNameSet_=!1,p.indexStartName_=""),p}function Ca(d,u,l){const p=d.copy();return p.endSet_=!0,void 0===u&&(u=null),p.indexEndValue_=u,void 0!==l?(p.endNameSet_=!0,p.indexEndName_=l):(p.endNameSet_=!1,p.indexEndName_=""),p}function Nl(d,u){const l=d.copy();return l.index_=u,l}function da(d){const u={};if(d.isDefault())return u;let l;return d.index_===Jr?l="$priority":d.index_===Mc?l="$value":d.index_===lo?l="$key":((0,Fe.hu)(d.index_ instanceof Gu,"Unrecognized index type!"),l=d.index_.toString()),u.orderBy=(0,Fe.Wl)(l),d.startSet_&&(u.startAt=(0,Fe.Wl)(d.indexStartValue_),d.startNameSet_&&(u.startAt+=","+(0,Fe.Wl)(d.indexStartName_))),d.endSet_&&(u.endAt=(0,Fe.Wl)(d.indexEndValue_),d.endNameSet_&&(u.endAt+=","+(0,Fe.Wl)(d.indexEndName_))),d.limitSet_&&(d.isViewFromLeft()?u.limitToFirst=d.limit_:u.limitToLast=d.limit_),u}function bu(d){const u={};if(d.startSet_&&(u.sp=d.indexStartValue_,d.startNameSet_&&(u.sn=d.indexStartName_)),d.endSet_&&(u.ep=d.indexEndValue_,d.endNameSet_&&(u.en=d.indexEndName_)),d.limitSet_){u.l=d.limit_;let l=d.viewFrom_;""===l&&(l=d.isViewFromLeft()?"l":"r"),u.vf=l}return d.index_!==Jr&&(u.i=d.index_.toString()),u}class Wa extends nr{constructor(u,l,p,I){super(),this.repoInfo_=u,this.onDataUpdate_=l,this.authTokenProvider_=p,this.appCheckTokenProvider_=I,this.log_=Us("p:rest:"),this.listens_={}}reportStats(u){throw new Error("Method not implemented.")}static getListenId_(u,l){return void 0!==l?"tag$"+l:((0,Fe.hu)(u._queryParams.isDefault(),"should have a tag if it's not a default query."),u._path.toString())}listen(u,l,p,I){const O=u._path.toString();this.log_("Listen called for "+O+" "+u._queryIdentifier);const W=Wa.getListenId_(u,p),de={};this.listens_[W]=de;const Ne=da(u._queryParams);this.restRequest_(O+".json",Ne,(Je,xt)=>{let Ft=xt;if(404===Je&&(Ft=null,Je=null),null===Je&&this.onDataUpdate_(O,Ft,!1,p),(0,Fe.DV)(this.listens_,W)===de){let Yt;Yt=Je?401===Je?"permission_denied":"rest_error:"+Je:"ok",I(Yt,null)}})}unlisten(u,l){const p=Wa.getListenId_(u,l);delete this.listens_[p]}get(u){const l=da(u._queryParams),p=u._path.toString(),I=new Fe.BH;return this.restRequest_(p+".json",l,(O,W)=>{let de=W;404===O&&(de=null,O=null),null===O?(this.onDataUpdate_(p,de,!1,null),I.resolve(de)):I.reject(new Error(de))}),I.promise}refreshAuthToken(u){}restRequest_(u,l={},p){return l.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([I,O])=>{I&&I.accessToken&&(l.auth=I.accessToken),O&&O.token&&(l.ac=O.token);const W=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+u+"?ns="+this.repoInfo_.namespace+(0,Fe.xO)(l);this.log_("Sending REST request for "+W);const de=new XMLHttpRequest;de.onreadystatechange=()=>{if(p&&4===de.readyState){this.log_("REST Response for "+W+" received. status:",de.status,"response:",de.responseText);let Ne=null;if(de.status>=200&&de.status<300){try{Ne=(0,Fe.cI)(de.responseText)}catch(Je){di("Failed to parse JSON response for "+W+": "+de.responseText)}p(null,Ne)}else 401!==de.status&&404!==de.status&&di("Got unsuccessful REST response for "+W+" Status: "+de.status),p(de.status);p=null}},de.open("GET",W,!0),de.send()})}}class kl{constructor(){this.rootNode_=rr.EMPTY_NODE}getNode(u){return this.rootNode_.getChild(u)}updateSnapshot(u,l){this.rootNode_=this.rootNode_.updateChild(u,l)}}function Fl(){return{value:null,children:new Map}}function wa(d,u,l){if(kr(u))d.value=l,d.children.clear();else if(null!==d.value)d.value=d.value.updateChild(u,l);else{const p=ft(u);d.children.has(p)||d.children.set(p,Fl()),wa(d.children.get(p),u=Ir(u),l)}}function rl(d,u){if(kr(u))return d.value=null,d.children.clear(),!0;if(null!==d.value){if(d.value.isLeafNode())return!1;{const l=d.value;return d.value=null,l.forEachChild(Jr,(p,I)=>{wa(d,new ai(p),I)}),rl(d,u)}}if(d.children.size>0){const l=ft(u);return u=Ir(u),d.children.has(l)&&rl(d.children.get(l),u)&&d.children.delete(l),0===d.children.size}return!0}function V(d,u,l){null!==d.value?l(u,d.value):function(d,u){d.children.forEach((l,p)=>{u(p,l)})}(d,(p,I)=>{V(I,new ai(u.toString()+"/"+p),l)})}class pe{constructor(u){this.collection_=u,this.last_=null}get(){const u=this.collection_.get(),l=Object.assign({},u);return this.last_&&le(this.last_,(p,I)=>{l[p]=l[p]-I}),this.last_=u,l}}class un{constructor(u,l){this.server_=l,this.statsToReport_={},this.statsListener_=new pe(u);const p=1e4+2e4*Math.random();mn(this.reportStats_.bind(this),Math.floor(p))}reportStats_(){const u=this.statsListener_.get(),l={};let p=!1;le(u,(I,O)=>{O>0&&(0,Fe.r3)(this.statsToReport_,I)&&(l[I]=O,p=!0)}),p&&this.server_.reportStats(l),mn(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var wn=(()=>(function(d){d[d.OVERWRITE=0]="OVERWRITE",d[d.MERGE=1]="MERGE",d[d.ACK_USER_WRITE=2]="ACK_USER_WRITE",d[d.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(wn||(wn={})),wn))();function Mr(d){return{fromUser:!1,fromServer:!0,queryId:d,tagged:!0}}class ar{constructor(u,l,p){this.path=u,this.affectedTree=l,this.revert=p,this.type=wn.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(u){if(kr(this.path)){if(null!=this.affectedTree.value)return(0,Fe.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const l=this.affectedTree.subtree(new ai(u));return new ar(ln(),l,this.revert)}}return(0,Fe.hu)(ft(this.path)===u,"operationForChild called for unrelated child."),new ar(Ir(this.path),this.affectedTree,this.revert)}}class Oi{constructor(u,l){this.source=u,this.path=l,this.type=wn.LISTEN_COMPLETE}operationForChild(u){return kr(this.path)?new Oi(this.source,ln()):new Oi(this.source,Ir(this.path))}}class ui{constructor(u,l,p){this.source=u,this.path=l,this.snap=p,this.type=wn.OVERWRITE}operationForChild(u){return kr(this.path)?new ui(this.source,ln(),this.snap.getImmediateChild(u)):new ui(this.source,Ir(this.path),this.snap)}}class Ii{constructor(u,l,p){this.source=u,this.path=l,this.children=p,this.type=wn.MERGE}operationForChild(u){if(kr(this.path)){const l=this.children.subtree(new ai(u));return l.isEmpty()?null:l.value?new ui(this.source,ln(),l.value):new Ii(this.source,ln(),l)}return(0,Fe.hu)(ft(this.path)===u,"Can't get a merge for a child not on the path of the operation"),new Ii(this.source,Ir(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class vo{constructor(u,l,p){this.node_=u,this.fullyInitialized_=l,this.filtered_=p}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(u){if(kr(u))return this.isFullyInitialized()&&!this.filtered_;const l=ft(u);return this.isCompleteForChild(l)}isCompleteForChild(u){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(u)}getNode(){return this.node_}}class Ql{constructor(u){this.query_=u,this.index_=this.query_._queryParams.getIndex()}}function ha(d,u,l,p,I,O){const W=p.filter(de=>de.type===l);W.sort((de,Ne)=>function(d,u,l){if(null==u.childName||null==l.childName)throw(0,Fe.g5)("Should only compare child_ events.");const p=new Zr(u.childName,u.snapshotNode),I=new Zr(l.childName,l.snapshotNode);return d.index_.compare(p,I)}(d,de,Ne)),W.forEach(de=>{const Ne=function(d,u,l){return"value"===u.type||"child_removed"===u.type||(u.prevName=l.getPredecessorChildName(u.childName,u.snapshotNode,d.index_)),u}(d,de,O);I.forEach(Je=>{Je.respondsTo(de.type)&&u.push(Je.createEvent(Ne,d.query_))})})}function ta(d,u){return{eventCache:d,serverCache:u}}function Mo(d,u,l,p){return ta(new vo(u,l,p),d.serverCache)}function Da(d,u,l,p){return ta(d.eventCache,new vo(u,l,p))}function fa(d){return d.eventCache.isFullyInitialized()?d.eventCache.getNode():null}function Sa(d){return d.serverCache.isFullyInitialized()?d.serverCache.getNode():null}let Aa;class Hi{constructor(u,l=(()=>(Aa||(Aa=new $(Wo)),Aa))()){this.value=u,this.children=l}static fromObject(u){let l=new Hi(null);return le(u,(p,I)=>{l=l.set(new ai(p),I)}),l}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(u,l){if(null!=this.value&&l(this.value))return{path:ln(),value:this.value};if(kr(u))return null;{const p=ft(u),I=this.children.get(p);if(null!==I){const O=I.findRootMostMatchingPathAndValue(Ir(u),l);return null!=O?{path:Bi(new ai(p),O.path),value:O.value}:null}return null}}findRootMostValueAndPath(u){return this.findRootMostMatchingPathAndValue(u,()=>!0)}subtree(u){if(kr(u))return this;{const l=ft(u),p=this.children.get(l);return null!==p?p.subtree(Ir(u)):new Hi(null)}}set(u,l){if(kr(u))return new Hi(l,this.children);{const p=ft(u),O=(this.children.get(p)||new Hi(null)).set(Ir(u),l),W=this.children.insert(p,O);return new Hi(this.value,W)}}remove(u){if(kr(u))return this.children.isEmpty()?new Hi(null):new Hi(null,this.children);{const l=ft(u),p=this.children.get(l);if(p){const I=p.remove(Ir(u));let O;return O=I.isEmpty()?this.children.remove(l):this.children.insert(l,I),null===this.value&&O.isEmpty()?new Hi(null):new Hi(this.value,O)}return this}}get(u){if(kr(u))return this.value;{const l=ft(u),p=this.children.get(l);return p?p.get(Ir(u)):null}}setTree(u,l){if(kr(u))return l;{const p=ft(u),O=(this.children.get(p)||new Hi(null)).setTree(Ir(u),l);let W;return W=O.isEmpty()?this.children.remove(p):this.children.insert(p,O),new Hi(this.value,W)}}fold(u){return this.fold_(ln(),u)}fold_(u,l){const p={};return this.children.inorderTraversal((I,O)=>{p[I]=O.fold_(Bi(u,I),l)}),l(u,this.value,p)}findOnPath(u,l){return this.findOnPath_(u,ln(),l)}findOnPath_(u,l,p){const I=!!this.value&&p(l,this.value);if(I)return I;if(kr(u))return null;{const O=ft(u),W=this.children.get(O);return W?W.findOnPath_(Ir(u),Bi(l,O),p):null}}foreachOnPath(u,l){return this.foreachOnPath_(u,ln(),l)}foreachOnPath_(u,l,p){if(kr(u))return this;{this.value&&p(l,this.value);const I=ft(u),O=this.children.get(I);return O?O.foreachOnPath_(Ir(u),Bi(l,I),p):new Hi(null)}}foreach(u){this.foreach_(ln(),u)}foreach_(u,l){this.children.inorderTraversal((p,I)=>{I.foreach_(Bi(u,p),l)}),this.value&&l(u,this.value)}foreachChild(u){this.children.inorderTraversal((l,p)=>{p.value&&u(l,p.value)})}}class zs{constructor(u){this.writeTree_=u}static empty(){return new zs(new Hi(null))}}function yl(d,u,l){if(kr(u))return new zs(new Hi(l));{const p=d.writeTree_.findRootMostValueAndPath(u);if(null!=p){const I=p.path;let O=p.value;const W=ss(I,u);return O=O.updateChild(W,l),new zs(d.writeTree_.set(I,O))}{const I=new Hi(l),O=d.writeTree_.setTree(u,I);return new zs(O)}}}function Cu(d,u,l){let p=d;return le(l,(I,O)=>{p=yl(p,Bi(u,I),O)}),p}function wu(d,u){if(kr(u))return zs.empty();{const l=d.writeTree_.setTree(u,new Hi(null));return new zs(l)}}function zu(d,u){return null!=Eo(d,u)}function Eo(d,u){const l=d.writeTree_.findRootMostValueAndPath(u);return null!=l?d.writeTree_.get(l.path).getChild(ss(l.path,u)):null}function Ts(d){const u=[],l=d.writeTree_.value;return null!=l?l.isLeafNode()||l.forEachChild(Jr,(p,I)=>{u.push(new Zr(p,I))}):d.writeTree_.children.inorderTraversal((p,I)=>{null!=I.value&&u.push(new Zr(p,I.value))}),u}function Ga(d,u){if(kr(u))return d;{const l=Eo(d,u);return new zs(null!=l?new Hi(l):d.writeTree_.subtree(u))}}function Ll(d){return d.writeTree_.isEmpty()}function il(d,u){return Tu(ln(),d.writeTree_,u)}function Tu(d,u,l){if(null!=u.value)return l.updateChild(d,u.value);{let p=null;return u.children.inorderTraversal((I,O)=>{".priority"===I?((0,Fe.hu)(null!==O.value,"Priority writes must always be leaf nodes"),p=O.value):l=Tu(Bi(d,I),O,l)}),!l.getChild(d).isEmpty()&&null!==p&&(l=l.updateChild(Bi(d,".priority"),p)),l}}function Du(d,u){return Au(u,d)}function qu(d,u){if(d.snap)return Fs(d.path,u);for(const l in d.children)if(d.children.hasOwnProperty(l)&&Fs(Bi(d.path,l),u))return!0;return!1}function Yu(d){return d.visible}function Pc(d,u,l){let p=zs.empty();for(let I=0;I<d.length;++I){const O=d[I];if(u(O)){const W=O.path;let de;if(O.snap)Fs(l,W)?(de=ss(l,W),p=yl(p,de,O.snap)):Fs(W,l)&&(de=ss(W,l),p=yl(p,ln(),O.snap.getChild(de)));else{if(!O.children)throw(0,Fe.g5)("WriteRecord should have .snap or .children");if(Fs(l,W))de=ss(l,W),p=Cu(p,de,O.children);else if(Fs(W,l))if(de=ss(W,l),kr(de))p=Cu(p,ln(),O.children);else{const Ne=(0,Fe.DV)(O.children,ft(de));if(Ne){const Je=Ne.getChild(Ir(de));p=yl(p,ln(),Je)}}}}}return p}function If(d,u,l,p,I){if(p||I){const O=Ga(d.visibleWrites,u);return!I&&Ll(O)?l:I||null!=l||zu(O,ln())?il(Pc(d.allWrites,function(Je){return(Je.visible||I)&&(!p||!~p.indexOf(Je.writeId))&&(Fs(Je.path,u)||Fs(u,Je.path))},u),l||rr.EMPTY_NODE):null}{const O=Eo(d.visibleWrites,u);if(null!=O)return O;{const W=Ga(d.visibleWrites,u);return Ll(W)?l:null!=l||zu(W,ln())?il(W,l||rr.EMPTY_NODE):null}}}function vl(d,u,l,p){return If(d.writeTree,d.treePath,u,l,p)}function eu(d,u){return function(d,u,l){let p=rr.EMPTY_NODE;const I=Eo(d.visibleWrites,u);if(I)return I.isLeafNode()||I.forEachChild(Jr,(O,W)=>{p=p.updateImmediateChild(O,W)}),p;if(l){const O=Ga(d.visibleWrites,u);return l.forEachChild(Jr,(W,de)=>{const Ne=il(Ga(O,new ai(W)),de);p=p.updateImmediateChild(W,Ne)}),Ts(O).forEach(W=>{p=p.updateImmediateChild(W.name,W.node)}),p}return Ts(Ga(d.visibleWrites,u)).forEach(W=>{p=p.updateImmediateChild(W.name,W.node)}),p}(d.writeTree,d.treePath,u)}function gd(d,u,l,p){return function(d,u,l,p,I){(0,Fe.hu)(p||I,"Either existingEventSnap or existingServerSnap must exist");const O=Bi(u,l);if(zu(d.visibleWrites,O))return null;{const W=Ga(d.visibleWrites,O);return Ll(W)?I.getChild(l):il(W,I.getChild(l))}}(d.writeTree,d.treePath,u,l,p)}function $l(d,u){return function(d,u){return Eo(d.visibleWrites,u)}(d.writeTree,Bi(d.treePath,u))}function za(d,u,l){return function(d,u,l,p){const I=Bi(u,l),O=Eo(d.visibleWrites,I);return null!=O?O:p.isCompleteForChild(l)?il(Ga(d.visibleWrites,I),p.getNode().getImmediateChild(l)):null}(d.writeTree,d.treePath,u,l)}function Pi(d,u){return Au(Bi(d.treePath,u),d.writeTree)}function Au(d,u){return{treePath:d,writeTree:u}}class Nc{constructor(){this.changeMap=new Map}trackChildChange(u){const l=u.type,p=u.childName;(0,Fe.hu)("child_added"===l||"child_changed"===l||"child_removed"===l,"Only child changes supported for tracking"),(0,Fe.hu)(".priority"!==p,"Only non-priority child changes can be tracked.");const I=this.changeMap.get(p);if(I){const O=I.type;if("child_added"===l&&"child_removed"===O)this.changeMap.set(p,Uo(p,u.snapshotNode,I.snapshotNode));else if("child_removed"===l&&"child_added"===O)this.changeMap.delete(p);else if("child_removed"===l&&"child_changed"===O)this.changeMap.set(p,ws(p,I.oldSnap));else if("child_changed"===l&&"child_added"===O)this.changeMap.set(p,ls(p,u.snapshotNode));else{if("child_changed"!==l||"child_changed"!==O)throw(0,Fe.g5)("Illegal combination of changes: "+u+" occurred after "+I);this.changeMap.set(p,Uo(p,u.snapshotNode,I.oldSnap))}}else this.changeMap.set(p,u)}getChanges(){return Array.from(this.changeMap.values())}}const kc=new class{getCompleteChild(u){return null}getChildAfterChild(u,l,p){return null}};class tu{constructor(u,l,p=null){this.writes_=u,this.viewCache_=l,this.optCompleteServerCache_=p}getCompleteChild(u){const l=this.viewCache_.eventCache;if(l.isCompleteForChild(u))return l.getNode().getImmediateChild(u);{const p=null!=this.optCompleteServerCache_?new vo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return za(this.writes_,u,p)}}getChildAfterChild(u,l,p){const I=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Sa(this.viewCache_),O=function(d,u,l,p,I,O){return function(d,u,l,p,I,O,W){let de;const Ne=Ga(d.visibleWrites,u),Je=Eo(Ne,ln());if(null!=Je)de=Je;else{if(null==l)return[];de=il(Ne,l)}if(de=de.withIndex(W),de.isEmpty()||de.isLeafNode())return[];{const xt=[],Ft=W.getCompare(),Yt=O?de.getReverseIteratorFrom(p,W):de.getIteratorFrom(p,W);let Hn=Yt.getNext();for(;Hn&&xt.length<I;)0!==Ft(Hn,p)&&xt.push(Hn),Hn=Yt.getNext();return xt}}(d.writeTree,d.treePath,u,l,p,I,O)}(this.writes_,I,l,1,p,u);return 0===O.length?null:O[0]}}function Fc(d,u,l,p,I,O){const W=u.eventCache;if(null!=$l(p,l))return u;{let de,Ne;if(kr(l))if((0,Fe.hu)(u.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),u.serverCache.isFiltered()){const Je=Sa(u),Ft=eu(p,Je instanceof rr?Je:rr.EMPTY_NODE);de=d.filter.updateFullNode(u.eventCache.getNode(),Ft,O)}else{const Je=vl(p,Sa(u));de=d.filter.updateFullNode(u.eventCache.getNode(),Je,O)}else{const Je=ft(l);if(".priority"===Je){(0,Fe.hu)(1===en(l),"Can't have a priority with additional path components");const xt=W.getNode();Ne=u.serverCache.getNode();const Ft=gd(p,l,xt,Ne);de=null!=Ft?d.filter.updatePriority(xt,Ft):W.getNode()}else{const xt=Ir(l);let Ft;if(W.isCompleteForChild(Je)){Ne=u.serverCache.getNode();const Yt=gd(p,l,W.getNode(),Ne);Ft=null!=Yt?W.getNode().getImmediateChild(Je).updateChild(xt,Yt):W.getNode().getImmediateChild(Je)}else Ft=za(p,Je,u.serverCache);de=null!=Ft?d.filter.updateChild(W.getNode(),Je,Ft,xt,I,O):W.getNode()}}return Mo(u,de,W.isFullyInitialized()||kr(l),d.filter.filtersNodes())}}function Zu(d,u,l,p,I,O,W,de){const Ne=u.serverCache;let Je;const xt=W?d.filter:d.filter.getIndexedFilter();if(kr(l))Je=xt.updateFullNode(Ne.getNode(),p,null);else if(xt.filtersNodes()&&!Ne.isFiltered()){const Hn=Ne.getNode().updateChild(l,p);Je=xt.updateFullNode(Ne.getNode(),Hn,null)}else{const Hn=ft(l);if(!Ne.isCompleteForPath(l)&&en(l)>1)return u;const pr=Ir(l),No=Ne.getNode().getImmediateChild(Hn).updateChild(pr,p);Je=".priority"===Hn?xt.updatePriority(Ne.getNode(),No):xt.updateChild(Ne.getNode(),Hn,No,pr,kc,null)}const Ft=Da(u,Je,Ne.isFullyInitialized()||kr(l),xt.filtersNodes());return Fc(d,Ft,l,I,new tu(I,Ft,O),de)}function yd(d,u,l,p,I,O,W){const de=u.eventCache;let Ne,Je;const xt=new tu(I,u,O);if(kr(l))Je=d.filter.updateFullNode(u.eventCache.getNode(),p,W),Ne=Mo(u,Je,!0,d.filter.filtersNodes());else{const Ft=ft(l);if(".priority"===Ft)Je=d.filter.updatePriority(u.eventCache.getNode(),p),Ne=Mo(u,Je,de.isFullyInitialized(),de.isFiltered());else{const Yt=Ir(l),Hn=de.getNode().getImmediateChild(Ft);let pr;if(kr(Yt))pr=p;else{const bi=xt.getCompleteChild(Ft);pr=null!=bi?".priority"===Rl(Yt)&&bi.getChild(pl(Yt)).isEmpty()?bi:bi.updateChild(Yt,p):rr.EMPTY_NODE}Ne=Hn.equals(pr)?u:Mo(u,d.filter.updateChild(de.getNode(),Ft,pr,Yt,xt,W),de.isFullyInitialized(),d.filter.filtersNodes())}}return Ne}function nu(d,u){return d.eventCache.isCompleteForChild(u)}function Qu(d,u,l){return l.foreach((p,I)=>{u=u.updateChild(p,I)}),u}function Ai(d,u,l,p,I,O,W,de){if(u.serverCache.getNode().isEmpty()&&!u.serverCache.isFullyInitialized())return u;let Je,Ne=u;Je=kr(l)?p:new Hi(null).setTree(l,p);const xt=u.serverCache.getNode();return Je.children.inorderTraversal((Ft,Yt)=>{if(xt.hasChild(Ft)){const pr=Qu(0,u.serverCache.getNode().getImmediateChild(Ft),Yt);Ne=Zu(d,Ne,new ai(Ft),pr,I,O,W,de)}}),Je.children.inorderTraversal((Ft,Yt)=>{const Hn=!u.serverCache.isCompleteForChild(Ft)&&null===Yt.value;if(!xt.hasChild(Ft)&&!Hn){const bi=Qu(0,u.serverCache.getNode().getImmediateChild(Ft),Yt);Ne=Zu(d,Ne,new ai(Ft),bi,I,O,W,de)}}),Ne}class Il{constructor(u,l){this.query_=u,this.eventRegistrations_=[];const p=this.query_._queryParams,I=new _o(p.getIndex()),O=function(d){return d.loadsAllData()?new _o(d.getIndex()):d.hasLimit()?new Ha(d):new ua(d)}(p);this.processor_=function(d){return{filter:d}}(O);const W=l.serverCache,de=l.eventCache,Ne=I.updateFullNode(rr.EMPTY_NODE,W.getNode(),null),Je=O.updateFullNode(rr.EMPTY_NODE,de.getNode(),null),xt=new vo(Ne,W.isFullyInitialized(),I.filtersNodes()),Ft=new vo(Je,de.isFullyInitialized(),O.filtersNodes());this.viewCache_=ta(Ft,xt),this.eventGenerator_=new Ql(this.query_)}get query(){return this.query_}}function dh(d,u){const l=Sa(d.viewCache_);return l&&(d.query._queryParams.loadsAllData()||!kr(u)&&!l.getImmediateChild(ft(u)).isEmpty())?l.getChild(u):null}function bl(d){return 0===d.eventRegistrations_.length}function ga(d,u,l){const p=[];if(l){(0,Fe.hu)(null==u,"A cancel should cancel all event registrations.");const I=d.query._path;d.eventRegistrations_.forEach(O=>{const W=O.createCancelEvent(l,I);W&&p.push(W)})}if(u){let I=[];for(let O=0;O<d.eventRegistrations_.length;++O){const W=d.eventRegistrations_[O];if(W.matches(u)){if(u.hasAnyCallback()){I=I.concat(d.eventRegistrations_.slice(O+1));break}}else I.push(W)}d.eventRegistrations_=I}else d.eventRegistrations_=[];return p}function hh(d,u,l,p){u.type===wn.MERGE&&null!==u.source.queryId&&((0,Fe.hu)(Sa(d.viewCache_),"We should always have a full cache before handling merges"),(0,Fe.hu)(fa(d.viewCache_),"Missing event cache, even though we have a server cache"));const I=d.viewCache_,O=function(d,u,l,p,I){const O=new Nc;let W,de;if(l.type===wn.OVERWRITE){const Je=l;Je.source.fromUser?W=yd(d,u,Je.path,Je.snap,p,I,O):((0,Fe.hu)(Je.source.fromServer,"Unknown source."),de=Je.source.tagged||u.serverCache.isFiltered()&&!kr(Je.path),W=Zu(d,u,Je.path,Je.snap,p,I,de,O))}else if(l.type===wn.MERGE){const Je=l;Je.source.fromUser?W=function(d,u,l,p,I,O,W){let de=u;return p.foreach((Ne,Je)=>{const xt=Bi(l,Ne);nu(u,ft(xt))&&(de=yd(d,de,xt,Je,I,O,W))}),p.foreach((Ne,Je)=>{const xt=Bi(l,Ne);nu(u,ft(xt))||(de=yd(d,de,xt,Je,I,O,W))}),de}(d,u,Je.path,Je.children,p,I,O):((0,Fe.hu)(Je.source.fromServer,"Unknown source."),de=Je.source.tagged||u.serverCache.isFiltered(),W=Ai(d,u,Je.path,Je.children,p,I,de,O))}else if(l.type===wn.ACK_USER_WRITE){const Je=l;W=Je.revert?function(d,u,l,p,I,O){let W;if(null!=$l(p,l))return u;{const de=new tu(p,u,I),Ne=u.eventCache.getNode();let Je;if(kr(l)||".priority"===ft(l)){let xt;if(u.serverCache.isFullyInitialized())xt=vl(p,Sa(u));else{const Ft=u.serverCache.getNode();(0,Fe.hu)(Ft instanceof rr,"serverChildren would be complete if leaf node"),xt=eu(p,Ft)}Je=d.filter.updateFullNode(Ne,xt,O)}else{const xt=ft(l);let Ft=za(p,xt,u.serverCache);null==Ft&&u.serverCache.isCompleteForChild(xt)&&(Ft=Ne.getImmediateChild(xt)),Je=null!=Ft?d.filter.updateChild(Ne,xt,Ft,Ir(l),de,O):u.eventCache.getNode().hasChild(xt)?d.filter.updateChild(Ne,xt,rr.EMPTY_NODE,Ir(l),de,O):Ne,Je.isEmpty()&&u.serverCache.isFullyInitialized()&&(W=vl(p,Sa(u)),W.isLeafNode()&&(Je=d.filter.updateFullNode(Je,W,O)))}return W=u.serverCache.isFullyInitialized()||null!=$l(p,ln()),Mo(u,Je,W,d.filter.filtersNodes())}}(d,u,Je.path,p,I,O):function(d,u,l,p,I,O,W){if(null!=$l(I,l))return u;const de=u.serverCache.isFiltered(),Ne=u.serverCache;if(null!=p.value){if(kr(l)&&Ne.isFullyInitialized()||Ne.isCompleteForPath(l))return Zu(d,u,l,Ne.getNode().getChild(l),I,O,de,W);if(kr(l)){let Je=new Hi(null);return Ne.getNode().forEachChild(lo,(xt,Ft)=>{Je=Je.set(new ai(xt),Ft)}),Ai(d,u,l,Je,I,O,de,W)}return u}{let Je=new Hi(null);return p.foreach((xt,Ft)=>{const Yt=Bi(l,xt);Ne.isCompleteForPath(Yt)&&(Je=Je.set(xt,Ne.getNode().getChild(Yt)))}),Ai(d,u,l,Je,I,O,de,W)}}(d,u,Je.path,Je.affectedTree,p,I,O)}else{if(l.type!==wn.LISTEN_COMPLETE)throw(0,Fe.g5)("Unknown operation type: "+l.type);W=function(d,u,l,p,I){const O=u.serverCache;return Fc(d,Da(u,O.getNode(),O.isFullyInitialized()||kr(l),O.isFiltered()),l,p,kc,I)}(d,u,l.path,p,O)}const Ne=O.getChanges();return function(d,u,l){const p=u.eventCache;if(p.isFullyInitialized()){const I=p.getNode().isLeafNode()||p.getNode().isEmpty(),O=fa(d);(l.length>0||!d.eventCache.isFullyInitialized()||I&&!p.getNode().equals(O)||!p.getNode().getPriority().equals(O.getPriority()))&&l.push(la(fa(u)))}}(u,W,Ne),{viewCache:W,changes:Ne}}(d.processor_,I,u,l,p);return function(d,u){(0,Fe.hu)(u.eventCache.getNode().isIndexed(d.filter.getIndex()),"Event snap not indexed"),(0,Fe.hu)(u.serverCache.getNode().isIndexed(d.filter.getIndex()),"Server snap not indexed")}(d.processor_,O.viewCache),(0,Fe.hu)(O.viewCache.serverCache.isFullyInitialized()||!I.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),d.viewCache_=O.viewCache,vd(d,O.changes,O.viewCache.eventCache.getNode(),null)}function vd(d,u,l,p){return function(d,u,l,p){const I=[],O=[];return u.forEach(W=>{"child_changed"===W.type&&d.index_.indexedValueChanged(W.oldSnap,W.snapshotNode)&&O.push(function(d,u){return{type:"child_moved",snapshotNode:u,childName:d}}(W.childName,W.snapshotNode))}),ha(d,I,"child_removed",u,p,l),ha(d,I,"child_added",u,p,l),ha(d,I,"child_moved",O,p,l),ha(d,I,"child_changed",u,p,l),ha(d,I,"value",u,p,l),I}(d.eventGenerator_,u,l,p?[p]:d.eventRegistrations_)}let Xu,Ni;class zr{constructor(){this.views=new Map}}function v(d,u,l,p){const I=u.source.queryId;if(null!==I){const O=d.views.get(I);return(0,Fe.hu)(null!=O,"SyncTree gave us an op for an invalid query."),hh(O,u,l,p)}{let O=[];for(const W of d.views.values())O=O.concat(hh(W,u,l,p));return O}}function x(d,u,l,p,I){const W=d.views.get(u._queryIdentifier);if(!W){let de=vl(l,I?p:null),Ne=!1;de?Ne=!0:p instanceof rr?(de=eu(l,p),Ne=!1):(de=rr.EMPTY_NODE,Ne=!1);const Je=ta(new vo(de,Ne,!1),new vo(p,I,!1));return new Il(u,Je)}return W}function rt(d){const u=[];for(const l of d.views.values())l.query._queryParams.loadsAllData()||u.push(l);return u}function Ut(d,u){let l=null;for(const p of d.views.values())l=l||dh(p,u);return l}function Nn(d,u){return u._queryParams.loadsAllData()?mi(d):d.views.get(u._queryIdentifier)}function vn(d,u){return null!=Nn(d,u)}function ir(d){return null!=mi(d)}function mi(d){for(const u of d.views.values())if(u.query._queryParams.loadsAllData())return u;return null}let $c=1;class qs{constructor(u){this.listenProvider_=u,this.syncPointTree_=new Hi(null),this.pendingWriteTree_={visibleWrites:zs.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ju(d,u,l,p,I){return function(d,u,l,p,I){(0,Fe.hu)(p>d.lastWriteId,"Stacking an older write on top of newer ones"),void 0===I&&(I=!0),d.allWrites.push({path:u,snap:l,writeId:p,visible:I}),I&&(d.visibleWrites=yl(d.visibleWrites,u,l)),d.lastWriteId=p}(d.pendingWriteTree_,u,l,p,I),I?ou(d,new ui({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,l)):[]}function Wi(d,u,l=!1){const p=function(d,u){for(let l=0;l<d.allWrites.length;l++){const p=d.allWrites[l];if(p.writeId===u)return p}return null}(d.pendingWriteTree_,u);if(function(d,u){const l=d.allWrites.findIndex(de=>de.writeId===u);(0,Fe.hu)(l>=0,"removeWrite called with nonexistent writeId.");const p=d.allWrites[l];d.allWrites.splice(l,1);let I=p.visible,O=!1,W=d.allWrites.length-1;for(;I&&W>=0;){const de=d.allWrites[W];de.visible&&(W>=l&&qu(de,p.path)?I=!1:Fs(p.path,de.path)&&(O=!0)),W--}return!!I&&(O?(function(d){d.visibleWrites=Pc(d.allWrites,Yu,ln()),d.lastWriteId=d.allWrites.length>0?d.allWrites[d.allWrites.length-1].writeId:-1}(d),!0):(p.snap?d.visibleWrites=wu(d.visibleWrites,p.path):le(p.children,Ne=>{d.visibleWrites=wu(d.visibleWrites,Bi(p.path,Ne))}),!0))}(d.pendingWriteTree_,u)){let O=new Hi(null);return null!=p.snap?O=O.set(ln(),!0):le(p.children,W=>{O=O.set(new ai(W),!0)}),ou(d,new ar(p.path,O,l))}return[]}function Io(d,u,l){return ou(d,new ui({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,l))}function wl(d,u,l,p,I=!1){const O=u._path,W=d.syncPointTree_.get(O);let de=[];if(W&&("default"===u._queryIdentifier||vn(W,u))){const Ne=function(d,u,l,p){const I=u._queryIdentifier,O=[];let W=[];const de=ir(d);if("default"===I)for(const[Ne,Je]of d.views.entries())W=W.concat(ga(Je,l,p)),bl(Je)&&(d.views.delete(Ne),Je.query._queryParams.loadsAllData()||O.push(Je.query));else{const Ne=d.views.get(I);Ne&&(W=W.concat(ga(Ne,l,p)),bl(Ne)&&(d.views.delete(I),Ne.query._queryParams.loadsAllData()||O.push(Ne.query)))}return de&&!ir(d)&&O.push(new((0,Fe.hu)(Xu,"Reference.ts has not been loaded"),Xu)(u._repo,u._path)),{removed:O,events:W}}(W,u,l,p);(function(d){return 0===d.views.size})(W)&&(d.syncPointTree_=d.syncPointTree_.remove(O));const Je=Ne.removed;if(de=Ne.events,!I){const xt=-1!==Je.findIndex(Yt=>Yt._queryParams.loadsAllData()),Ft=d.syncPointTree_.findOnPath(O,(Yt,Hn)=>ir(Hn));if(xt&&!Ft){const Yt=d.syncPointTree_.subtree(O);if(!Yt.isEmpty()){const Hn=function(d){return d.fold((u,l,p)=>{if(l&&ir(l))return[mi(l)];{let I=[];return l&&(I=rt(l)),le(p,(O,W)=>{I=I.concat(W)}),I}})}(Yt);for(let pr=0;pr<Hn.length;++pr){const bi=Hn[pr],No=bi.query,ll=gh(d,bi);d.listenProvider_.startListening(au(No),Uc(d,No),ll.hashFn,ll.onComplete)}}}if(!Ft&&Je.length>0&&!p)if(xt){const Yt=null;d.listenProvider_.stopListening(au(u),Yt)}else Je.forEach(Yt=>{const Hn=d.queryToTagMap.get(mh(Yt));d.listenProvider_.stopListening(au(Yt),Hn)})}!function(d,u){for(let l=0;l<u.length;++l){const p=u[l];if(!p._queryParams.loadsAllData()){const I=mh(p),O=d.queryToTagMap.get(I);d.queryToTagMap.delete(I),d.tagToQueryMap.delete(O)}}}(d,Je)}return de}function su(d,u,l,p){const I=bd(d,p);if(null!=I){const O=Cd(I),W=O.path,de=O.queryId,Ne=ss(W,u);return yh(d,W,new ui(Mr(de),Ne,l))}return[]}function Tf(d,u,l,p=!1){const I=u._path;let O=null,W=!1;d.syncPointTree_.foreachOnPath(I,(Yt,Hn)=>{const pr=ss(Yt,I);O=O||Ut(Hn,pr),W=W||ir(Hn)});let Ne,de=d.syncPointTree_.get(I);de?(W=W||ir(de),O=O||Ut(de,ln())):(de=new zr,d.syncPointTree_=d.syncPointTree_.set(I,de)),null!=O?Ne=!0:(Ne=!1,O=rr.EMPTY_NODE,d.syncPointTree_.subtree(I).foreachChild((Hn,pr)=>{const bi=Ut(pr,ln());bi&&(O=O.updateImmediateChild(Hn,bi))}));const Je=vn(de,u);if(!Je&&!u._queryParams.loadsAllData()){const Yt=mh(u);(0,Fe.hu)(!d.queryToTagMap.has(Yt),"View does not exist, but we have a tag");const Hn=$c++;d.queryToTagMap.set(Yt,Hn),d.tagToQueryMap.set(Hn,Yt)}let Ft=function(d,u,l,p,I,O){const W=x(d,u,p,I,O);return d.views.has(u._queryIdentifier)||d.views.set(u._queryIdentifier,W),function(d,u){d.eventRegistrations_.push(u)}(W,l),function(d,u){const l=d.viewCache_.eventCache,p=[];return l.getNode().isLeafNode()||l.getNode().forEachChild(Jr,(O,W)=>{p.push(ls(O,W))}),l.isFullyInitialized()&&p.push(la(l.getNode())),vd(d,p,l.getNode(),u)}(W,l)}(de,u,l,Du(d.pendingWriteTree_,I),O,Ne);if(!Je&&!W&&!p){const Yt=Nn(de,u);Ft=Ft.concat(function(d,u,l){const p=u._path,I=Uc(d,u),O=gh(d,l),W=d.listenProvider_.startListening(au(u),I,O.hashFn,O.onComplete),de=d.syncPointTree_.subtree(p);if(I)(0,Fe.hu)(!ir(de.value),"If we're adding a query, it shouldn't be shadowed");else{const Ne=de.fold((Je,xt,Ft)=>{if(!kr(Je)&&xt&&ir(xt))return[mi(xt).query];{let Yt=[];return xt&&(Yt=Yt.concat(rt(xt).map(Hn=>Hn.query))),le(Ft,(Hn,pr)=>{Yt=Yt.concat(pr)}),Yt}});for(let Je=0;Je<Ne.length;++Je){const xt=Ne[Je];d.listenProvider_.stopListening(au(xt),Uc(d,xt))}}return W}(d,u,Yt))}return Ft}function Ed(d,u,l){const I=d.pendingWriteTree_,O=d.syncPointTree_.findOnPath(u,(W,de)=>{const Je=Ut(de,ss(W,u));if(Je)return Je});return If(I,u,O,l,!0)}function ou(d,u){return Mp(u,d.syncPointTree_,null,Du(d.pendingWriteTree_,ln()))}function Mp(d,u,l,p){if(kr(d.path))return ph(d,u,l,p);{const I=u.get(ln());null==l&&null!=I&&(l=Ut(I,ln()));let O=[];const W=ft(d.path),de=d.operationForChild(W),Ne=u.children.get(W);if(Ne&&de){const Je=l?l.getImmediateChild(W):null,xt=Pi(p,W);O=O.concat(Mp(de,Ne,Je,xt))}return I&&(O=O.concat(v(I,d,p,l))),O}}function ph(d,u,l,p){const I=u.get(ln());null==l&&null!=I&&(l=Ut(I,ln()));let O=[];return u.children.inorderTraversal((W,de)=>{const Ne=l?l.getImmediateChild(W):null,Je=Pi(p,W),xt=d.operationForChild(W);xt&&(O=O.concat(ph(xt,de,Ne,Je)))}),I&&(O=O.concat(v(I,d,p,l))),O}function gh(d,u){const l=u.query,p=Uc(d,l);return{hashFn:()=>(function(d){return d.viewCache_.serverCache.getNode()}(u)||rr.EMPTY_NODE).hash(),onComplete:I=>{if("ok"===I)return p?function(d,u,l){const p=bd(d,l);if(p){const I=Cd(p),O=I.path,W=I.queryId,de=ss(O,u);return yh(d,O,new Oi(Mr(W),de))}return[]}(d,l._path,p):function(d,u){return ou(d,new Oi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u))}(d,l._path);{const O=function(d,u){let l="Unknown Error";"too_big"===d?l="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===d?l="Client doesn't have permission to access the desired data.":"unavailable"===d&&(l="The service is unavailable");const p=new Error(d+" at "+u._path.toString()+": "+l);return p.code=d.toUpperCase(),p}(I,l);return wl(d,l,null,O)}}}}function Uc(d,u){const l=mh(u);return d.queryToTagMap.get(l)}function mh(d){return d._path.toString()+"$"+d._queryIdentifier}function bd(d,u){return d.tagToQueryMap.get(u)}function Cd(d){const u=d.indexOf("$");return(0,Fe.hu)(-1!==u&&u<d.length-1,"Bad queryKey."),{queryId:d.substr(u+1),path:new ai(d.substr(0,u))}}function yh(d,u,l){const p=d.syncPointTree_.get(u);return(0,Fe.hu)(p,"Missing sync point for query tag that we're tracking"),v(p,l,Du(d.pendingWriteTree_,u),null)}function au(d){return d._queryParams.loadsAllData()&&!d._queryParams.isDefault()?new((0,Fe.hu)(Ni,"Reference.ts has not been loaded"),Ni)(d._repo,d._path):d}class vh{constructor(u){this.node_=u}getImmediateChild(u){const l=this.node_.getImmediateChild(u);return new vh(l)}node(){return this.node_}}class Ys{constructor(u,l){this.syncTree_=u,this.path_=l}getImmediateChild(u){const l=Bi(this.path_,u);return new Ys(this.syncTree_,l)}node(){return Ed(this.syncTree_,this.path_)}}const Df=function(d,u,l){return d&&"object"==typeof d?((0,Fe.hu)(".sv"in d,"Unexpected leaf node or priority contents"),"string"==typeof d[".sv"]?Ul(d[".sv"],u,l):"object"==typeof d[".sv"]?Pp(d[".sv"],u):void(0,Fe.hu)(!1,"Unexpected server value: "+JSON.stringify(d,null,2))):d},Ul=function(d,u,l){if("timestamp"===d)return l.timestamp;(0,Fe.hu)(!1,"Unexpected server value: "+d)},Pp=function(d,u,l){d.hasOwnProperty("increment")||(0,Fe.hu)(!1,"Unexpected server value: "+JSON.stringify(d,null,2));const p=d.increment;"number"!=typeof p&&(0,Fe.hu)(!1,"Unexpected increment value: "+p);const I=u.node();if((0,Fe.hu)(null!=I,"Expected ChildrenNode.EMPTY_NODE for nulls"),!I.isLeafNode())return p;const W=I.getValue();return"number"!=typeof W?p:W+p},wd=function(d,u,l,p){return xa(u,new Ys(l,d),p)},nc=function(d,u,l){return xa(d,new vh(u),l)};function xa(d,u,l){const p=d.getPriority().val(),I=Df(p,u.getImmediateChild(".priority"),l);let O;if(d.isLeafNode()){const W=d,de=Df(W.getValue(),u,l);return de!==W.getValue()||I!==W.getPriority().val()?new Gn(de,ii(I)):d}{const W=d;return O=W,I!==W.getPriority().val()&&(O=O.updatePriority(new Gn(I))),W.forEachChild(Jr,(de,Ne)=>{const Je=xa(Ne,u.getImmediateChild(de),l);Je!==Ne&&(O=O.updateImmediateChild(de,Je))}),O}}class Eh{constructor(u="",l=null,p={children:{},childCount:0}){this.name=u,this.parent=l,this.node=p}}function Ih(d,u){let l=u instanceof ai?u:new ai(u),p=d,I=ft(l);for(;null!==I;){const O=(0,Fe.DV)(p.node.children,I)||{children:{},childCount:0};p=new Eh(I,p,O),l=Ir(l),I=ft(l)}return p}function rc(d){return d.node.value}function bh(d,u){d.node.value=u,ol(d)}function nm(d){return d.node.childCount>0}function Ch(d,u){le(d.node.children,(l,p)=>{u(new Eh(l,d,p))})}function kp(d,u,l,p){l&&!p&&u(d),Ch(d,I=>{kp(I,u,!0,p)}),l&&p&&u(d)}function jl(d){return new ai(null===d.parent?d.name:jl(d.parent)+"/"+d.name)}function ol(d){null!==d.parent&&function(d,u,l){const p=function(d){return void 0===rc(d)&&!nm(d)}(l),I=(0,Fe.r3)(d.node.children,u);p&&I?(delete d.node.children[u],d.node.childCount--,ol(d)):!p&&!I&&(d.node.children[u]=l.node,d.node.childCount++,ol(d))}(d.parent,d.name,d)}const _y=/[\[\].#$\/\u0000-\u001F\u007F]/,Fp=/[\[\].#$\u0000-\u001F\u007F]/,Sf=10485760,qa=function(d){return"string"==typeof d&&0!==d.length&&!_y.test(d)},Td=function(d){return"string"==typeof d&&0!==d.length&&!Fp.test(d)},Dd=function(d){return null===d||"string"==typeof d||"number"==typeof d&&!fo(d)||d&&"object"==typeof d&&(0,Fe.r3)(d,".sv")},Ya=function(d,u,l,p){p&&void 0===u||fs((0,Fe.gK)(d,"value"),u,l)},fs=function(d,u,l){const p=l instanceof ai?new _a(l,d):l;if(void 0===u)throw new Error(d+"contains undefined "+hi(p));if("function"==typeof u)throw new Error(d+"contains a function "+hi(p)+" with contents = "+u.toString());if(fo(u))throw new Error(d+"contains "+u.toString()+" "+hi(p));if("string"==typeof u&&u.length>Sf/3&&(0,Fe.ug)(u)>Sf)throw new Error(d+"contains a string greater than "+Sf+" utf8 bytes "+hi(p)+" ('"+u.substring(0,50)+"...')");if(u&&"object"==typeof u){let I=!1,O=!1;if(le(u,(W,de)=>{if(".value"===W)I=!0;else if(".priority"!==W&&".sv"!==W&&(O=!0,!qa(W)))throw new Error(d+" contains an invalid key ("+W+") "+hi(p)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(d,u){d.parts_.length>0&&(d.byteLength_+=1),d.parts_.push(u),d.byteLength_+=(0,Fe.ug)(u),ao(d)})(p,W),fs(d,de,p),function(d){const u=d.parts_.pop();d.byteLength_-=(0,Fe.ug)(u),d.parts_.length>0&&(d.byteLength_-=1)}(p)}),I&&O)throw new Error(d+' contains ".value" child '+hi(p)+" in addition to actual children.")}},Sd=function(d,u,l,p){if(p&&void 0===u)return;const I=(0,Fe.gK)(d,"values");if(!u||"object"!=typeof u||Array.isArray(u))throw new Error(I+" must be an object containing the children to replace.");const O=[];le(u,(W,de)=>{const Ne=new ai(W);if(fs(I,de,Bi(l,Ne)),".priority"===Rl(Ne)&&!Dd(de))throw new Error(I+"contains an invalid value for '"+Ne.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");O.push(Ne)}),function(d,u){let l,p;for(l=0;l<u.length;l++){p=u[l];const O=ks(p);for(let W=0;W<O.length;W++)if((".priority"!==O[W]||W!==O.length-1)&&!qa(O[W]))throw new Error(d+"contains an invalid key ("+O[W]+") in path "+p.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}u.sort(Eu);let I=null;for(l=0;l<u.length;l++){if(p=u[l],null!==I&&Fs(I,p))throw new Error(d+"contains a path "+I.toString()+" that is ancestor of another path "+p.toString());I=p}}(I,O)},ic=function(d,u,l){if(!l||void 0!==u){if(fo(u))throw new Error((0,Fe.gK)(d,"priority")+"is "+u.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Dd(u))throw new Error((0,Fe.gK)(d,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ra=function(d,u,l,p){if(!(p&&void 0===l||qa(l)))throw new Error((0,Fe.gK)(d,u)+'was an invalid key = "'+l+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},sc=function(d,u,l,p){if(!(p&&void 0===l||Td(l)))throw new Error((0,Fe.gK)(d,u)+'was an invalid path = "'+l+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Oo=function(d,u){if(".info"===ft(u))throw new Error(d+" failed = Can't modify data under /.info/")},oc=function(d,u){const l=u.path.toString();if("string"!=typeof u.repoInfo.host||0===u.repoInfo.host.length||!qa(u.repoInfo.namespace)&&"localhost"!==u.repoInfo.host.split(":")[0]||0!==l.length&&!function(d){return d&&(d=d.replace(/^\/*\.info(\/|$)/,"/")),Td(d)}(l))throw new Error((0,Fe.gK)(d,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Ru{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Hl(d,u){let l=null;for(let p=0;p<u.length;p++){const I=u[p],O=I.getPath();null!==l&&!Ml(O,l.path)&&(d.eventLists_.push(l),l=null),null===l&&(l={events:[],path:O}),l.events.push(I)}l&&d.eventLists_.push(l)}function Wl(d,u,l){Hl(d,l),Af(d,p=>Ml(p,u))}function jo(d,u,l){Hl(d,l),Af(d,p=>Fs(p,u)||Fs(u,p))}function Af(d,u){d.recursionDepth_++;let l=!0;for(let p=0;p<d.eventLists_.length;p++){const I=d.eventLists_[p];I&&(u(I.path)?(xf(d.eventLists_[p]),d.eventLists_[p]=null):l=!1)}l&&(d.eventLists_=[]),d.recursionDepth_--}function xf(d){for(let u=0;u<d.events.length;u++){const l=d.events[u];if(null!==l){d.events[u]=null;const p=l.getEventRunner();cs&&ki("event: "+l.toString()),ue(p)}}}const Dh="repo_interrupt";class Vp{constructor(u,l,p,I){this.repoInfo_=u,this.forceRestClient_=l,this.authTokenProvider_=p,this.appCheckProvider_=I,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ru,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Fl(),this.transactionQueueTree_=new Eh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Ad(d){const l=d.infoData_.getNode(new ai(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+l}function ac(d){return function(d){return(d=d||{}).timestamp=d.timestamp||(new Date).getTime(),d}({timestamp:Ad(d)})}function lc(d,u,l,p,I){d.dataUpdateCount++;const O=new ai(u);l=d.interceptServerDataCallback_?d.interceptServerDataCallback_(u,l):l;let W=[];if(I)if(p){const Ne=(0,Fe.UI)(l,Je=>ii(Je));W=function(d,u,l,p){const I=bd(d,p);if(I){const O=Cd(I),W=O.path,de=O.queryId,Ne=ss(W,u),Je=Hi.fromObject(l);return yh(d,W,new Ii(Mr(de),Ne,Je))}return[]}(d.serverSyncTree_,O,Ne,I)}else{const Ne=ii(l);W=su(d.serverSyncTree_,O,Ne,I)}else if(p){const Ne=(0,Fe.UI)(l,Je=>ii(Je));W=function(d,u,l){const p=Hi.fromObject(l);return ou(d,new Ii({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,p))}(d.serverSyncTree_,O,Ne)}else{const Ne=ii(l);W=Io(d.serverSyncTree_,O,Ne)}let de=O;W.length>0&&(de=bo(d,O)),jo(d.eventQueue_,de,W)}function Hc(d,u){Sh(d,"connected",u),!1===u&&function(d){zl(d,"onDisconnectEvents");const u=ac(d),l=Fl();V(d.onDisconnect_,ln(),(I,O)=>{const W=wd(I,O,d.serverSyncTree_,u);wa(l,I,W)});let p=[];V(l,ln(),(I,O)=>{p=p.concat(Io(d.serverSyncTree_,I,O));const W=lu(d,I);bo(d,W)}),d.onDisconnect_=Fl(),jo(d.eventQueue_,ln(),p)}(d)}function Sh(d,u,l){const p=new ai("/.info/"+u),I=ii(l);d.infoData_.updateSnapshot(p,I);const O=Io(d.infoSyncTree_,p,I);jo(d.eventQueue_,p,O)}function Wc(d){return d.nextWriteId_++}function Ah(d,u,l,p,I){zl(d,"set",{path:u.toString(),value:l,priority:p});const O=ac(d),W=ii(l,p),de=Ed(d.serverSyncTree_,u),Ne=nc(W,de,O),Je=Wc(d),xt=Ju(d.serverSyncTree_,u,Ne,Je,!0);Hl(d.eventQueue_,xt),d.server_.put(u.toString(),W.val(!0),(Yt,Hn)=>{const pr="ok"===Yt;pr||di("set at "+u+" failed: "+Yt);const bi=Wi(d.serverSyncTree_,Je,!pr);jo(d.eventQueue_,u,bi),Ka(0,I,Yt,Hn)});const Ft=lu(d,u);bo(d,Ft),jo(d.eventQueue_,Ft,[])}function Gl(d,u,l){d.server_.onDisconnectCancel(u.toString(),(p,I)=>{"ok"===p&&rl(d.onDisconnect_,u),Ka(0,l,p,I)})}function Mu(d,u,l,p){const I=ii(l);d.server_.onDisconnectPut(u.toString(),I.val(!0),(O,W)=>{"ok"===O&&wa(d.onDisconnect_,u,I),Ka(0,p,O,W)})}function dc(d,u,l){let p;p=".info"===ft(u._path)?wl(d.infoSyncTree_,u,l):wl(d.serverSyncTree_,u,l),Wl(d.eventQueue_,u._path,p)}function Gc(d){d.persistentConnection_&&d.persistentConnection_.interrupt(Dh)}function zl(d,...u){let l="";d.persistentConnection_&&(l=d.persistentConnection_.id+":"),ki(l,...u)}function Ka(d,u,l,p){u&&ue(()=>{if("ok"===l)u(null);else{const I=(l||"error").toUpperCase();let O=I;p&&(O+=": "+p);const W=new Error(O);W.code=I,u(W)}})}function Ou(d,u,l){return Ed(d.serverSyncTree_,u,l)||rr.EMPTY_NODE}function hc(d,u=d.transactionQueueTree_){if(u||Za(d,u),rc(u)){const l=Md(d,u);(0,Fe.hu)(l.length>0,"Sending zero length transaction queue"),l.every(I=>0===I.status)&&function(d,u,l){const p=l.map(Je=>Je.currentWriteId),I=Ou(d,u,p);let O=I;const W=I.hash();for(let Je=0;Je<l.length;Je++){const xt=l[Je];(0,Fe.hu)(0===xt.status,"tryToSendTransactionQueue_: items in queue should all be run."),xt.status=1,xt.retryCount++;const Ft=ss(u,xt.path);O=O.updateChild(Ft,xt.currentOutputSnapshotRaw)}const de=O.val(!0),Ne=u;d.server_.put(Ne.toString(),de,Je=>{zl(d,"transaction put response",{path:Ne.toString(),status:Je});let xt=[];if("ok"===Je){const Ft=[];for(let Yt=0;Yt<l.length;Yt++)l[Yt].status=2,xt=xt.concat(Wi(d.serverSyncTree_,l[Yt].currentWriteId)),l[Yt].onComplete&&Ft.push(()=>l[Yt].onComplete(null,!0,l[Yt].currentOutputSnapshotResolved)),l[Yt].unwatcher();Za(d,Ih(d.transactionQueueTree_,u)),hc(d,d.transactionQueueTree_),jo(d.eventQueue_,u,xt);for(let Yt=0;Yt<Ft.length;Yt++)ue(Ft[Yt])}else{if("datastale"===Je)for(let Ft=0;Ft<l.length;Ft++)l[Ft].status=3===l[Ft].status?4:0;else{di("transaction at "+Ne.toString()+" failed: "+Je);for(let Ft=0;Ft<l.length;Ft++)l[Ft].status=4,l[Ft].abortReason=Je}bo(d,u)}},W)}(d,jl(u),l)}else nm(u)&&Ch(u,l=>{hc(d,l)})}function bo(d,u){const l=Rd(d,u),p=jl(l);return function(d,u,l){if(0===u.length)return;const p=[];let I=[];const W=u.filter(de=>0===de.status).map(de=>de.currentWriteId);for(let de=0;de<u.length;de++){const Ne=u[de],Je=ss(l,Ne.path);let Ft,xt=!1;if((0,Fe.hu)(null!==Je,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Ne.status)xt=!0,Ft=Ne.abortReason,I=I.concat(Wi(d.serverSyncTree_,Ne.currentWriteId,!0));else if(0===Ne.status)if(Ne.retryCount>=25)xt=!0,Ft="maxretry",I=I.concat(Wi(d.serverSyncTree_,Ne.currentWriteId,!0));else{const Yt=Ou(d,Ne.path,W);Ne.currentInputSnapshot=Yt;const Hn=u[de].update(Yt.val());if(void 0!==Hn){fs("transaction failed: Data returned ",Hn,Ne.path);let pr=ii(Hn);"object"==typeof Hn&&null!=Hn&&(0,Fe.r3)(Hn,".priority")||(pr=pr.updatePriority(Yt.getPriority()));const No=Ne.currentWriteId,ll=ac(d),Kl=nc(pr,Yt,ll);Ne.currentOutputSnapshotRaw=pr,Ne.currentOutputSnapshotResolved=Kl,Ne.currentWriteId=Wc(d),W.splice(W.indexOf(No),1),I=I.concat(Ju(d.serverSyncTree_,Ne.path,Kl,Ne.currentWriteId,Ne.applyLocally)),I=I.concat(Wi(d.serverSyncTree_,No,!0))}else xt=!0,Ft="nodata",I=I.concat(Wi(d.serverSyncTree_,Ne.currentWriteId,!0))}jo(d.eventQueue_,l,I),I=[],xt&&(u[de].status=2,setTimeout(u[de].unwatcher,Math.floor(0)),u[de].onComplete&&p.push("nodata"===Ft?()=>u[de].onComplete(null,!1,u[de].currentInputSnapshot):()=>u[de].onComplete(new Error(Ft),!1,null)))}Za(d,d.transactionQueueTree_);for(let de=0;de<p.length;de++)ue(p[de]);hc(d,d.transactionQueueTree_)}(d,Md(d,l),p),p}function Rd(d,u){let l,p=d.transactionQueueTree_;for(l=ft(u);null!==l&&void 0===rc(p);)p=Ih(p,l),l=ft(u=Ir(u));return p}function Md(d,u){const l=[];return Rh(d,u,l),l.sort((p,I)=>p.order-I.order),l}function Rh(d,u,l){const p=rc(u);if(p)for(let I=0;I<p.length;I++)l.push(p[I]);Ch(u,I=>{Rh(d,I,l)})}function Za(d,u){const l=rc(u);if(l){let p=0;for(let I=0;I<l.length;I++)2!==l[I].status&&(l[p]=l[I],p++);l.length=p,bh(u,l.length>0?l:void 0)}Ch(u,p=>{Za(d,p)})}function lu(d,u){const l=jl(Rd(d,u)),p=Ih(d.transactionQueueTree_,u);return function(d,u,l){let p=d.parent;for(;null!==p;){if(u(p))return!0;p=p.parent}}(p,I=>{Of(d,I)}),Of(d,p),kp(p,I=>{Of(d,I)}),l}function Of(d,u){const l=rc(u);if(l){const p=[];let I=[],O=-1;for(let W=0;W<l.length;W++)3===l[W].status||(1===l[W].status?((0,Fe.hu)(O===W-1,"All SENT items should be at beginning of queue."),O=W,l[W].status=3,l[W].abortReason="set"):((0,Fe.hu)(0===l[W].status,"Unexpected transaction status in abort"),l[W].unwatcher(),I=I.concat(Wi(d.serverSyncTree_,l[W].currentWriteId,!0)),l[W].onComplete&&p.push(l[W].onComplete.bind(null,new Error("set"),!1,null))));-1===O?bh(u,void 0):l.length=O+1,jo(d.eventQueue_,jl(u),I);for(let W=0;W<p.length;W++)ue(p[W])}}const uu=function(d,u){const l=Hp(d),p=l.namespace;return"firebase.com"===l.domain&&Is(l.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!p||"undefined"===p)&&"localhost"!==l.domain&&Is("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),l.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&di("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new rn(l.host,l.secure,p,"ws"===l.scheme||"wss"===l.scheme,u,"",p!==l.subdomain),path:new ai(l.pathString)}},Hp=function(d){let u="",l="",p="",I="",O="",W=!0,de="https",Ne=443;if("string"==typeof d){let Je=d.indexOf("//");Je>=0&&(de=d.substring(0,Je-1),d=d.substring(Je+2));let xt=d.indexOf("/");-1===xt&&(xt=d.length);let Ft=d.indexOf("?");-1===Ft&&(Ft=d.length),u=d.substring(0,Math.min(xt,Ft)),xt<Ft&&(I=function(d){let u="";const l=d.split("/");for(let p=0;p<l.length;p++)if(l[p].length>0){let I=l[p];try{I=decodeURIComponent(I.replace(/\+/g," "))}catch(O){}u+="/"+I}return u}(d.substring(xt,Ft)));const Yt=function(d){const u={};"?"===d.charAt(0)&&(d=d.substring(1));for(const l of d.split("&")){if(0===l.length)continue;const p=l.split("=");2===p.length?u[decodeURIComponent(p[0])]=decodeURIComponent(p[1]):di(`Invalid query segment '${l}' in query '${d}'`)}return u}(d.substring(Math.min(d.length,Ft)));Je=u.indexOf(":"),Je>=0?(W="https"===de||"wss"===de,Ne=parseInt(u.substring(Je+1),10)):Je=u.length;const Hn=u.slice(0,Je);if("localhost"===Hn.toLowerCase())l="localhost";else if(Hn.split(".").length<=2)l=Hn;else{const pr=u.indexOf(".");p=u.substring(0,pr).toLowerCase(),l=u.substring(pr+1),O=p}"ns"in Yt&&(O=Yt.ns)}return{host:u,port:Ne,domain:l,subdomain:p,secure:W,scheme:de,pathString:I,namespace:O}};class cu{constructor(u,l,p,I){this.eventType=u,this.eventRegistration=l,this.snapshot=p,this.prevName=I}getPath(){const u=this.snapshot.ref;return"value"===this.eventType?u._path:u.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,Fe.Wl)(this.snapshot.exportVal())}}class Qa{constructor(u,l,p){this.eventRegistration=u,this.error=l,this.path=p}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Pf{constructor(u,l){this.snapshotCallback=u,this.cancelCallback=l}onValue(u,l){this.snapshotCallback.call(null,u,l)}onCancel(u){return(0,Fe.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,u)}get hasCancelCallback(){return!!this.cancelCallback}matches(u){return this.snapshotCallback===u.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===u.snapshotCallback.userCallback&&this.snapshotCallback.context===u.snapshotCallback.context}}class Nf{constructor(u,l){this._repo=u,this._path=l}cancel(){const u=new Fe.BH;return Gl(this._repo,this._path,u.wrapCallback(()=>{})),u.promise}remove(){Oo("OnDisconnect.remove",this._path);const u=new Fe.BH;return Mu(this._repo,this._path,null,u.wrapCallback(()=>{})),u.promise}set(u){Oo("OnDisconnect.set",this._path),Ya("OnDisconnect.set",u,this._path,!1);const l=new Fe.BH;return Mu(this._repo,this._path,u,l.wrapCallback(()=>{})),l.promise}setWithPriority(u,l){Oo("OnDisconnect.setWithPriority",this._path),Ya("OnDisconnect.setWithPriority",u,this._path,!1),ic("OnDisconnect.setWithPriority",l,!1);const p=new Fe.BH;return function(d,u,l,p,I){const O=ii(l,p);d.server_.onDisconnectPut(u.toString(),O.val(!0),(W,de)=>{"ok"===W&&wa(d.onDisconnect_,u,O),Ka(0,I,W,de)})}(this._repo,this._path,u,l,p.wrapCallback(()=>{})),p.promise}update(u){Oo("OnDisconnect.update",this._path),Sd("OnDisconnect.update",u,this._path,!1);const l=new Fe.BH;return function(d,u,l,p){if((0,Fe.xb)(l))return ki("onDisconnect().update() called with empty data.  Don't do anything."),void Ka(0,p,"ok",void 0);d.server_.onDisconnectMerge(u.toString(),l,(I,O)=>{"ok"===I&&le(l,(W,de)=>{const Ne=ii(de);wa(d.onDisconnect_,Bi(u,W),Ne)}),Ka(0,p,I,O)})}(this._repo,this._path,u,l.wrapCallback(()=>{})),l.promise}}class Ma{constructor(u,l,p,I){this._repo=u,this._path=l,this._queryParams=p,this._orderByCalled=I}get key(){return kr(this._path)?null:Rl(this._path)}get ref(){return new Xa(this._repo,this._path)}get _queryIdentifier(){const u=bu(this._queryParams),l=Qi(u);return"{}"===l?"default":l}get _queryObject(){return bu(this._queryParams)}isEqual(u){if(!((u=(0,Fe.m9)(u))instanceof Ma))return!1;const l=this._repo===u._repo,p=Ml(this._path,u._path);return l&&p&&this._queryIdentifier===u._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(d){let u="";for(let l=d.pieceNum_;l<d.pieces_.length;l++)""!==d.pieces_[l]&&(u+="/"+encodeURIComponent(String(d.pieces_[l])));return u||"/"}(this._path)}}function Mh(d,u){if(!0===d._orderByCalled)throw new Error(u+": You can't combine multiple orderBy calls.")}function Tl(d){let u=null,l=null;if(d.hasStart()&&(u=d.getIndexStartValue()),d.hasEnd()&&(l=d.getIndexEndValue()),d.getIndex()===lo){const p="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",I="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(d.hasStart()){if(d.getIndexStartName()!==Zi)throw new Error(p);if("string"!=typeof u)throw new Error(I)}if(d.hasEnd()){if(d.getIndexEndName()!==zi)throw new Error(p);if("string"!=typeof l)throw new Error(I)}}else if(d.getIndex()===Jr){if(null!=u&&!Dd(u)||null!=l&&!Dd(l))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,Fe.hu)(d.getIndex()instanceof Gu||d.getIndex()===Mc,"unknown index type."),null!=u&&"object"==typeof u||null!=l&&"object"==typeof l)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Od(d){if(d.hasStart()&&d.hasEnd()&&d.hasLimit()&&!d.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Xa extends Ma{constructor(u,l){super(u,l,new gl,!1)}get parent(){const u=pl(this._path);return null===u?null:new Xa(this._repo,u)}get root(){let u=this;for(;null!==u.parent;)u=u.parent;return u}}class Nu{constructor(u,l,p){this._node=u,this.ref=l,this._index=p}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(u){const l=new ai(u),p=_r(this.ref,u);return new Nu(this._node.getChild(l),p,Jr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(u){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(p,I)=>u(new Nu(I,_r(this.ref,p),Jr)))}hasChild(u){const l=new ai(u);return!this._node.getChild(l).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Wp(d,u){return(d=(0,Fe.m9)(d))._checkNotDeleted("ref"),void 0!==u?_r(d._root,u):d._root}function kf(d,u){(d=(0,Fe.m9)(d))._checkNotDeleted("refFromURL");const l=uu(u,d._repo.repoInfo_.nodeAdmin);oc("refFromURL",l);const p=l.repoInfo;return!d._repo.repoInfo_.isCustomHost()&&p.host!==d._repo.repoInfo_.host&&Is("refFromURL: Host name does not match the current database: (found "+p.host+" but expected "+d._repo.repoInfo_.host+")"),Wp(d,l.path.toString())}function _r(d,u){return null===ft((d=(0,Fe.m9)(d))._path)?(l=u,l&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),sc("child","path",l,!1)):sc("child","path",u,!1),new Xa(d._repo,Bi(d._path,u));var l}function Ja(d,u){d=(0,Fe.m9)(d),Oo("set",d._path),Ya("set",u,d._path,!1);const l=new Fe.BH;return Ah(d._repo,d._path,u,null,l.wrapCallback(()=>{})),l.promise}function Vf(d,u){Sd("update",u,d._path,!1);const l=new Fe.BH;return function(d,u,l,p){zl(d,"update",{path:u.toString(),value:l});let I=!0;const O=ac(d),W={};if(le(l,(de,Ne)=>{I=!1,W[de]=wd(Bi(u,de),ii(Ne),d.serverSyncTree_,O)}),I)ki("update() called with empty data.  Don't do anything."),Ka(0,p,"ok",void 0);else{const de=Wc(d),Ne=function(d,u,l,p){!function(d,u,l,p){(0,Fe.hu)(p>d.lastWriteId,"Stacking an older merge on top of newer ones"),d.allWrites.push({path:u,children:l,writeId:p,visible:!0}),d.visibleWrites=Cu(d.visibleWrites,u,l),d.lastWriteId=p}(d.pendingWriteTree_,u,l,p);const I=Hi.fromObject(l);return ou(d,new Ii({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,I))}(d.serverSyncTree_,u,W,de);Hl(d.eventQueue_,Ne),d.server_.merge(u.toString(),l,(Je,xt)=>{const Ft="ok"===Je;Ft||di("update at "+u+" failed: "+Je);const Yt=Wi(d.serverSyncTree_,de,!Ft),Hn=Yt.length>0?bo(d,u):u;jo(d.eventQueue_,Hn,Yt),Ka(0,p,Je,xt)}),le(l,Je=>{const xt=lu(d,Bi(u,Je));bo(d,xt)}),jo(d.eventQueue_,u,[])}}(d._repo,d._path,u,l.wrapCallback(()=>{})),l.promise}function Dl(d){d=(0,Fe.m9)(d);const u=new Pf(()=>{}),l=new Ds(u);return function(d,u,l){const p=function(d,u){const l=u._path;let p=null;d.syncPointTree_.foreachOnPath(l,(Je,xt)=>{const Ft=ss(Je,l);p=p||Ut(xt,Ft)});let I=d.syncPointTree_.get(l);I?p=p||Ut(I,ln()):(I=new zr,d.syncPointTree_=d.syncPointTree_.set(l,I));const O=null!=p,W=O?new vo(p,!0,!1):null;return function(d){return fa(d.viewCache_)}(x(I,u,Du(d.pendingWriteTree_,u._path),O?W.getNode():rr.EMPTY_NODE,O))}(d.serverSyncTree_,u);return null!=p?Promise.resolve(p):d.server_.get(u).then(I=>{const O=ii(I).withIndex(u._queryParams.getIndex());let W;if(Tf(d.serverSyncTree_,u,l,!0),u._queryParams.loadsAllData())W=Io(d.serverSyncTree_,u._path,O);else{const de=Uc(d.serverSyncTree_,u);W=su(d.serverSyncTree_,u._path,O,de)}return jo(d.eventQueue_,u._path,W),wl(d.serverSyncTree_,u,l,null,!0),O},I=>(zl(d,"get for query "+(0,Fe.Wl)(u)+" failed: "+I),Promise.reject(new Error(I))))}(d._repo,d,l).then(p=>new Nu(p,new Xa(d._repo,d._path),d._queryParams.getIndex()))}class Ds{constructor(u){this.callbackContext=u}respondsTo(u){return"value"===u}createEvent(u,l){const p=l._queryParams.getIndex();return new cu("value",this,new Nu(u.snapshotNode,new Xa(l._repo,l._path),p))}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,null)}createCancelEvent(u,l){return this.callbackContext.hasCancelCallback?new Qa(this,u,l):null}matches(u){return u instanceof Ds&&(!u.callbackContext||!this.callbackContext||u.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class kd{constructor(u,l){this.eventType=u,this.callbackContext=l}respondsTo(u){let l="children_added"===u?"child_added":u;return l="children_removed"===l?"child_removed":l,this.eventType===l}createCancelEvent(u,l){return this.callbackContext.hasCancelCallback?new Qa(this,u,l):null}createEvent(u,l){(0,Fe.hu)(null!=u.childName,"Child events should have a childName.");const p=_r(new Xa(l._repo,l._path),u.childName),I=l._queryParams.getIndex();return new cu(u.type,this,new Nu(u.snapshotNode,p,I),u.prevName)}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,u.prevName)}matches(u){return u instanceof kd&&this.eventType===u.eventType&&(!this.callbackContext||!u.callbackContext||this.callbackContext.matches(u.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function fc(d,u,l,p,I){let O;if("object"==typeof p&&(O=void 0,I=p),"function"==typeof p&&(O=p),I&&I.onlyOnce){const Ne=l,Je=(xt,Ft)=>{dc(d._repo,d,de),Ne(xt,Ft)};Je.userCallback=l.userCallback,Je.context=l.context,l=Je}const W=new Pf(l,O||void 0),de="value"===u?new Ds(W):new kd(u,W);return function(d,u,l){let p;p=".info"===ft(u._path)?Tf(d.infoSyncTree_,u,l):Tf(d.serverSyncTree_,u,l),Wl(d.eventQueue_,u._path,p)}(d._repo,d,de),()=>dc(d._repo,d,de)}function Gp(d,u,l,p){return fc(d,"value",u,l,p)}function Bf(d,u,l,p){return fc(d,"child_added",u,l,p)}function zp(d,u,l,p){return fc(d,"child_changed",u,l,p)}function ql(d,u,l,p){return fc(d,"child_moved",u,l,p)}function ku(d,u,l,p){return fc(d,"child_removed",u,l,p)}function Fd(d,u,l){let p=null;const I=l?new Pf(l):null;"value"===u?p=new Ds(I):u&&(p=new kd(u,I)),dc(d._repo,d,p)}class Oa{}class $f extends Oa{constructor(u,l){super(),this._value=u,this._key=l}_apply(u){Ya("endAt",this._value,u._path,!0);const l=Ca(u._queryParams,this._value,this._key);if(Od(l),Tl(l),u._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ma(u._repo,u._path,l,u._orderByCalled)}}class Yc extends Oa{constructor(u,l){super(),this._value=u,this._key=l}_apply(u){Ya("endBefore",this._value,u._path,!1);const l=function(d,u,l){let p,I;return d.index_===lo?("string"==typeof u&&(u=Pl(u)),I=Ca(d,u,l)):(p=null==l?Zi:Pl(l),I=Ca(d,u,p)),I.endBeforeSet_=!0,I}(u._queryParams,this._value,this._key);if(Od(l),Tl(l),u._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ma(u._repo,u._path,l,u._orderByCalled)}}class Oh extends Oa{constructor(u,l){super(),this._value=u,this._key=l}_apply(u){Ya("startAt",this._value,u._path,!0);const l=Gs(u._queryParams,this._value,this._key);if(Od(l),Tl(l),u._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ma(u._repo,u._path,l,u._orderByCalled)}}class Hf extends Oa{constructor(u,l){super(),this._value=u,this._key=l}_apply(u){Ya("startAfter",this._value,u._path,!1);const l=function(d,u,l){let p;if(d.index_===lo)"string"==typeof u&&(u=ja(u)),p=Gs(d,u,l);else{let I;I=null==l?zi:ja(l),p=Gs(d,u,I)}return p.startAfterSet_=!0,p}(u._queryParams,this._value,this._key);if(Od(l),Tl(l),u._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ma(u._repo,u._path,l,u._orderByCalled)}}class Kp extends Oa{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ma(u._repo,u._path,function(d,u){const l=d.copy();return l.limitSet_=!0,l.limit_=u,l.viewFrom_="l",l}(u._queryParams,this._limit),u._orderByCalled)}}class Zp extends Oa{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ma(u._repo,u._path,function(d,u){const l=d.copy();return l.limitSet_=!0,l.limit_=u,l.viewFrom_="r",l}(u._queryParams,this._limit),u._orderByCalled)}}class om extends Oa{constructor(u){super(),this._path=u}_apply(u){Mh(u,"orderByChild");const l=new ai(this._path);if(kr(l))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const p=new Gu(l),I=Nl(u._queryParams,p);return Tl(I),new Ma(u._repo,u._path,I,!0)}}class am extends Oa{_apply(u){Mh(u,"orderByKey");const l=Nl(u._queryParams,lo);return Tl(l),new Ma(u._repo,u._path,l,!0)}}class Ld extends Oa{_apply(u){Mh(u,"orderByPriority");const l=Nl(u._queryParams,Jr);return Tl(l),new Ma(u._repo,u._path,l,!0)}}class Qp extends Oa{_apply(u){Mh(u,"orderByValue");const l=Nl(u._queryParams,Mc);return Tl(l),new Ma(u._repo,u._path,l,!0)}}class lm extends Oa{constructor(u,l){super(),this._value=u,this._key=l}_apply(u){if(Ya("equalTo",this._value,u._path,!1),u._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(u._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new $f(this._value,this._key)._apply(new Oh(this._value,this._key)._apply(u))}}function Pa(d,...u){let l=(0,Fe.m9)(d);for(const p of u)l=p._apply(l);return l}(function(d){(0,Fe.hu)(!Xu,"__referenceConstructor has already been defined"),Xu=d})(Xa),function(d){(0,Fe.hu)(!Ni,"__referenceConstructor has already been defined"),Ni=d}(Xa);const Kc={};function Bd(d,u,l,p,I){let O=p||d.options.databaseURL;void 0===O&&(d.options.projectId||Is("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ki("Using default host for project ",d.options.projectId),O=`${d.options.projectId}-default-rtdb.firebaseio.com`);let Ne,Je,W=uu(O,I),de=W.repoInfo;"undefined"!=typeof process&&process.env&&(Je=process.env.FIREBASE_DATABASE_EMULATOR_HOST),Je?(Ne=!0,O=`http://${Je}?ns=${de.namespace}`,W=uu(O,I),de=W.repoInfo):Ne=!W.repoInfo.secure;const xt=I&&Ne?new Ei(Ei.OWNER):new Wr(d.name,d.options,u);oc("Invalid Firebase Database URL",W),kr(W.path)||Is("Database URL must point to the root of a Firebase Database (not including a child path).");const Ft=function(d,u,l,p){let I=Kc[u.name];I||(I={},Kc[u.name]=I);let O=I[d.toURLString()];return O&&Is("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),O=new Vp(d,false,l,p),I[d.toURLString()]=O,O}(de,d,xt,new er(d.name,l));return new Ud(Ft,d)}class Ud{constructor(u,l){this._repoInternal=u,this.app=l,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(d,u,l){if(d.stats_=Os(d.repoInfo_),d.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)d.server_=new Wa(d.repoInfo_,(p,I,O,W)=>{lc(d,p,I,O,W)},d.authTokenProvider_,d.appCheckProvider_),setTimeout(()=>Hc(d,!0),0);else{if(null!=l){if("object"!=typeof l)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Fe.Wl)(l)}catch(p){throw new Error("Invalid authOverride provided: "+p)}}d.persistentConnection_=new os(d.repoInfo_,u,(p,I,O,W)=>{lc(d,p,I,O,W)},p=>{Hc(d,p)},p=>{!function(d,u){le(u,(l,p)=>{Sh(d,l,p)})}(d,p)},d.authTokenProvider_,d.appCheckProvider_,l),d.server_=d.persistentConnection_}d.authTokenProvider_.addTokenChangeListener(p=>{d.server_.refreshAuthToken(p)}),d.appCheckProvider_.addTokenChangeListener(p=>{d.server_.refreshAppCheckToken(p.token)}),d.statsReporter_=function(d,u){const l=d.toString();return bs[l]||(bs[l]=u()),bs[l]}(d.repoInfo_,()=>new un(d.stats_,d.server_)),d.infoData_=new kl,d.infoSyncTree_=new qs({startListening:(p,I,O,W)=>{let de=[];const Ne=d.infoData_.getNode(p._path);return Ne.isEmpty()||(de=Io(d.infoSyncTree_,p._path,Ne),setTimeout(()=>{W("ok")},0)),de},stopListening:()=>{}}),Sh(d,"connected",!1),d.serverSyncTree_=new qs({startListening:(p,I,O,W)=>(d.server_.listen(p,O,I,(de,Ne)=>{const Je=W(de,Ne);jo(d.eventQueue_,p._path,Je)}),[]),stopListening:(p,I)=>{d.server_.unlisten(p,I)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Xa(this._repo,ln())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(d,u){const l=Kc[u];(!l||l[d.key]!==d)&&Is(`Database ${u}(${d.repoInfo_}) has already been deleted.`),Gc(d),delete l[d.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(u){null===this._rootInternal&&Is("Cannot call "+u+" on a deleted database.")}}function Fh(){$a.IS_TRANSPORT_INITIALIZED&&di("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function jd(){Fh(),Hs.forceDisallow()}function Gf(){Fh(),Ns.forceDisallow(),Hs.forceAllow()}function Lh(d=(0,_s.getApp)(),u){const l=(0,_s._getProvider)(d,"database").getImmediate({identifier:u}),p=(0,Fe.P0)("database");return p&&zf(l,...p),l}function zf(d,u,l,p={}){(d=(0,Fe.m9)(d))._checkNotDeleted("useEmulator"),d._instanceStarted&&Is("Cannot call useEmulator() after instance has already been initialized.");const I=d._repoInternal;let O;if(I.repoInfo_.nodeAdmin)p.mockUserToken&&Is('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),O=new Ei(Ei.OWNER);else if(p.mockUserToken){const W="string"==typeof p.mockUserToken?p.mockUserToken:(0,Fe.Sg)(p.mockUserToken,d.app.options.projectId);O=new Ei(W)}!function(d,u,l,p){d.repoInfo_=new rn(`${u}:${l}`,!1,d.repoInfo_.namespace,d.repoInfo_.webSocketOnly,d.repoInfo_.nodeAdmin,d.repoInfo_.persistenceKey,d.repoInfo_.includeNamespaceInQueryParams),p&&(d.authTokenProvider_=p)}(I,u,l,O)}function Qc(d,u){is(d,u)}class Hd{constructor(u,l){this.committed=u,this.snapshot=l}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}os.prototype.simpleListen=function(d,u){this.sendRequest("q",{p:d},u)},os.prototype.echo=function(d,u){this.sendRequest("echo",{d},u)},Vo(_s.SDK_VERSION),(0,_s._registerComponent)(new Ki.wA("database",(u,{instanceIdentifier:l})=>Bd(u.getProvider("app").getImmediate(),u.getProvider("auth-internal"),u.getProvider("app-check-internal"),l),"PUBLIC").setMultipleInstances(!0)),(0,_s.registerVersion)(Vs,"0.13.9",void 0),(0,_s.registerVersion)(Vs,"0.13.9","esm2017");class Wd{constructor(u){return u}}const Yf="database",$h=new P.OlP("angularfire2.database-instances");function ed(d){return(u,l)=>{const p=u.runOutsideAngular(()=>d(l));return new Wd(p)}}const Uh={provide:class{constructor(){return(0,vi.vb)(Yf)}},deps:[[new P.FiY,$h]]},td={provide:Wd,useFactory:function(d,u){const l=(0,vi.JM)(Yf,d,u);return l&&new Wd(l)},deps:[[new P.FiY,$h],Gi.Ot]};let jh=(()=>{class d{constructor(){(0,pi.KN)("angularfire",vi.q4.full,"rtdb")}}return d.\u0275fac=function(l){return new(l||d)},d.\u0275mod=P.oAB({type:d}),d.\u0275inj=P.cJS({providers:[td,Uh]}),d})();function Hh(d,...u){return{ngModule:jh,providers:[{provide:$h,useFactory:ed(d),multi:!0,deps:[P.R0b,P.zs3,vi.HU,Gi.z6,[new P.FiY,Hr.dh],[new P.FiY,Rs.nm],...u]}]}}const Xf=(0,vi.u3)(Lh,!0);var mg=L(7545),yg=L(3637),qh=L(8891),Sl=L(5917),zd=L(6682),_g=L(8819),_m=L(3190),vg=L(2145),yc=L(7519),np=L(5197),rd=L(509);class vm{constructor(u,l){this.observables=u,this.project=l}call(u,l){return l.subscribe(new rp(u,this.observables,this.project))}}class rp extends np.L{constructor(u,l,p){super(u),this.observables=l,this.project=p,this.toRespond=[];const I=l.length;this.values=new Array(I);for(let O=0;O<I;O++)this.toRespond.push(O);for(let O=0;O<I;O++)this.add((0,rd.D)(this,l[O],void 0,O))}notifyNext(u,l,p){this.values[p]=l;const I=this.toRespond;if(I.length>0){const O=I.indexOf(p);-1!==O&&I.splice(O,1)}}notifyComplete(){}_next(u){if(0===this.toRespond.length){const l=[u,...this.values];this.project?this._tryProject(l):this.destination.next(l)}}_tryProject(u){let l;try{l=this.project.apply(this,u)}catch(p){return void this.destination.error(p)}this.destination.next(l)}}var Eg=L(7393);class Yh{constructor(u){this.predicate=u}call(u,l){return l.subscribe(new sp(u,this.predicate))}}class sp extends Eg.L{constructor(u,l){super(u),this.predicate=l,this.skipping=!0,this.index=0}_next(u){const l=this.destination;this.skipping&&this.tryCallPredicate(u),this.skipping||l.next(u)}tryCallPredicate(u){try{const l=this.predicate(u,this.index++);this.skipping=Boolean(l)}catch(l){this.destination.error(l)}}}var _c=L(8939),Em=(L(4828),L(3394));const Zh=new Ks.Yd("@firebase/database-compat"),op=function(d){Zh.warn("FIREBASE WARNING: "+d)};class bm{constructor(u){this._delegate=u}cancel(u){(0,Fe.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,Fe.Wj)("OnDisconnect.cancel","onComplete",u,!0);const l=this._delegate.cancel();return u&&l.then(()=>u(null),p=>u(p)),l}remove(u){(0,Fe.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,Fe.Wj)("OnDisconnect.remove","onComplete",u,!0);const l=this._delegate.remove();return u&&l.then(()=>u(null),p=>u(p)),l}set(u,l){(0,Fe.Dv)("OnDisconnect.set",1,2,arguments.length),(0,Fe.Wj)("OnDisconnect.set","onComplete",l,!0);const p=this._delegate.set(u);return l&&p.then(()=>l(null),I=>l(I)),p}setWithPriority(u,l,p){(0,Fe.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,Fe.Wj)("OnDisconnect.setWithPriority","onComplete",p,!0);const I=this._delegate.setWithPriority(u,l);return p&&I.then(()=>p(null),O=>p(O)),I}update(u,l){if((0,Fe.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(u)){const I={};for(let O=0;O<u.length;++O)I[""+O]=u[O];u=I,op("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,Fe.Wj)("OnDisconnect.update","onComplete",l,!0);const p=this._delegate.update(u);return l&&p.then(()=>l(null),I=>l(I)),p}}class ap{constructor(u,l){this.committed=u,this.snapshot=l}toJSON(){return(0,Fe.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Vu{constructor(u,l){this._database=u,this._delegate=l}val(){return(0,Fe.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,Fe.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,Fe.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,Fe.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(u){return(0,Fe.Dv)("DataSnapshot.child",0,1,arguments.length),u=String(u),sc("DataSnapshot.child","path",u,!1),new Vu(this._database,this._delegate.child(u))}hasChild(u){return(0,Fe.Dv)("DataSnapshot.hasChild",1,1,arguments.length),sc("DataSnapshot.hasChild","path",u,!1),this._delegate.hasChild(u)}getPriority(){return(0,Fe.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(u){return(0,Fe.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,Fe.Wj)("DataSnapshot.forEach","action",u,!1),this._delegate.forEach(l=>u(new Vu(this._database,l)))}hasChildren(){return(0,Fe.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,Fe.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,Fe.Dv)("DataSnapshot.ref",0,0,arguments.length),new al(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Co{constructor(u,l){this.database=u,this._delegate=l}on(u,l,p,I){var O;(0,Fe.Dv)("Query.on",2,4,arguments.length),(0,Fe.Wj)("Query.on","callback",l,!1);const W=Co.getCancelAndContextArgs_("Query.on",p,I),de=(Je,xt)=>{l.call(W.context,new Vu(this.database,Je),xt)};de.userCallback=l,de.context=W.context;const Ne=null===(O=W.cancel)||void 0===O?void 0:O.bind(W.context);switch(u){case"value":return Gp(this._delegate,de,Ne),l;case"child_added":return Bf(this._delegate,de,Ne),l;case"child_removed":return ku(this._delegate,de,Ne),l;case"child_changed":return zp(this._delegate,de,Ne),l;case"child_moved":return ql(this._delegate,de,Ne),l;default:throw new Error((0,Fe.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(u,l,p){if((0,Fe.Dv)("Query.off",0,3,arguments.length),function(d,u,l){if(void 0!==u)switch(u){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,Fe.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,u),(0,Fe.Wj)("Query.off","callback",l,!0),(0,Fe.lb)("Query.off","context",p,!0),l){const I=()=>{};I.userCallback=l,I.context=p,Fd(this._delegate,u,I)}else Fd(this._delegate,u)}get(){return Dl(this._delegate).then(u=>new Vu(this.database,u))}once(u,l,p,I){(0,Fe.Dv)("Query.once",1,4,arguments.length),(0,Fe.Wj)("Query.once","callback",l,!0);const O=Co.getCancelAndContextArgs_("Query.once",p,I),W=new Fe.BH,de=(Je,xt)=>{const Ft=new Vu(this.database,Je);l&&l.call(O.context,Ft,xt),W.resolve(Ft)};de.userCallback=l,de.context=O.context;const Ne=Je=>{O.cancel&&O.cancel.call(O.context,Je),W.reject(Je)};switch(u){case"value":Gp(this._delegate,de,Ne,{onlyOnce:!0});break;case"child_added":Bf(this._delegate,de,Ne,{onlyOnce:!0});break;case"child_removed":ku(this._delegate,de,Ne,{onlyOnce:!0});break;case"child_changed":zp(this._delegate,de,Ne,{onlyOnce:!0});break;case"child_moved":ql(this._delegate,de,Ne,{onlyOnce:!0});break;default:throw new Error((0,Fe.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return W.promise}limitToFirst(u){return(0,Fe.Dv)("Query.limitToFirst",1,1,arguments.length),new Co(this.database,Pa(this._delegate,function(d){if("number"!=typeof d||Math.floor(d)!==d||d<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Kp(d)}(u)))}limitToLast(u){return(0,Fe.Dv)("Query.limitToLast",1,1,arguments.length),new Co(this.database,Pa(this._delegate,function(d){if("number"!=typeof d||Math.floor(d)!==d||d<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Zp(d)}(u)))}orderByChild(u){return(0,Fe.Dv)("Query.orderByChild",1,1,arguments.length),new Co(this.database,Pa(this._delegate,function(d){if("$key"===d)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===d)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===d)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return sc("orderByChild","path",d,!1),new om(d)}(u)))}orderByKey(){return(0,Fe.Dv)("Query.orderByKey",0,0,arguments.length),new Co(this.database,Pa(this._delegate,new am))}orderByPriority(){return(0,Fe.Dv)("Query.orderByPriority",0,0,arguments.length),new Co(this.database,Pa(this._delegate,new Ld))}orderByValue(){return(0,Fe.Dv)("Query.orderByValue",0,0,arguments.length),new Co(this.database,Pa(this._delegate,new Qp))}startAt(u=null,l){return(0,Fe.Dv)("Query.startAt",0,2,arguments.length),new Co(this.database,Pa(this._delegate,function(d=null,u){return Ra("startAt","key",u,!0),new Oh(d,u)}(u,l)))}startAfter(u=null,l){return(0,Fe.Dv)("Query.startAfter",0,2,arguments.length),new Co(this.database,Pa(this._delegate,function(d,u){return Ra("startAfter","key",u,!0),new Hf(d,u)}(u,l)))}endAt(u=null,l){return(0,Fe.Dv)("Query.endAt",0,2,arguments.length),new Co(this.database,Pa(this._delegate,function(d,u){return Ra("endAt","key",u,!0),new $f(d,u)}(u,l)))}endBefore(u=null,l){return(0,Fe.Dv)("Query.endBefore",0,2,arguments.length),new Co(this.database,Pa(this._delegate,function(d,u){return Ra("endBefore","key",u,!0),new Yc(d,u)}(u,l)))}equalTo(u,l){return(0,Fe.Dv)("Query.equalTo",1,2,arguments.length),new Co(this.database,Pa(this._delegate,function(d,u){return Ra("equalTo","key",u,!0),new lm(d,u)}(u,l)))}toString(){return(0,Fe.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,Fe.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(u){if((0,Fe.Dv)("Query.isEqual",1,1,arguments.length),!(u instanceof Co))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(u._delegate)}static getCancelAndContextArgs_(u,l,p){const I={cancel:void 0,context:void 0};if(l&&p)I.cancel=l,(0,Fe.Wj)(u,"cancel",I.cancel,!0),I.context=p,(0,Fe.lb)(u,"context",I.context,!0);else if(l)if("object"==typeof l&&null!==l)I.context=l;else{if("function"!=typeof l)throw new Error((0,Fe.gK)(u,"cancelOrContext")+" must either be a cancel callback or a context object.");I.cancel=l}return I}get ref(){return new al(this.database,new Xa(this._delegate._repo,this._delegate._path))}}class al extends Co{constructor(u,l){super(u,new Ma(l._repo,l._path,new gl,!1)),this.database=u,this._delegate=l}getKey(){return(0,Fe.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(u){return(0,Fe.Dv)("Reference.child",1,1,arguments.length),"number"==typeof u&&(u=String(u)),new al(this.database,_r(this._delegate,u))}getParent(){(0,Fe.Dv)("Reference.parent",0,0,arguments.length);const u=this._delegate.parent;return u?new al(this.database,u):null}getRoot(){return(0,Fe.Dv)("Reference.root",0,0,arguments.length),new al(this.database,this._delegate.root)}set(u,l){(0,Fe.Dv)("Reference.set",1,2,arguments.length),(0,Fe.Wj)("Reference.set","onComplete",l,!0);const p=Ja(this._delegate,u);return l&&p.then(()=>l(null),I=>l(I)),p}update(u,l){if((0,Fe.Dv)("Reference.update",1,2,arguments.length),Array.isArray(u)){const I={};for(let O=0;O<u.length;++O)I[""+O]=u[O];u=I,op("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Oo("Reference.update",this._delegate._path),(0,Fe.Wj)("Reference.update","onComplete",l,!0);const p=Vf(this._delegate,u);return l&&p.then(()=>l(null),I=>l(I)),p}setWithPriority(u,l,p){(0,Fe.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,Fe.Wj)("Reference.setWithPriority","onComplete",p,!0);const I=function(d,u,l){if(Oo("setWithPriority",d._path),Ya("setWithPriority",u,d._path,!1),ic("setWithPriority",l,!1),".length"===d.key||".keys"===d.key)throw"setWithPriority failed: "+d.key+" is a read-only object.";const p=new Fe.BH;return Ah(d._repo,d._path,u,l,p.wrapCallback(()=>{})),p.promise}(this._delegate,u,l);return p&&I.then(()=>p(null),O=>p(O)),I}remove(u){(0,Fe.Dv)("Reference.remove",0,1,arguments.length),(0,Fe.Wj)("Reference.remove","onComplete",u,!0);const l=function(d){return Oo("remove",d._path),Ja(d,null)}(this._delegate);return u&&l.then(()=>u(null),p=>u(p)),l}transaction(u,l,p){(0,Fe.Dv)("Reference.transaction",1,3,arguments.length),(0,Fe.Wj)("Reference.transaction","transactionUpdate",u,!1),(0,Fe.Wj)("Reference.transaction","onComplete",l,!0),function(d,u,l,p){if(void 0!==l&&"boolean"!=typeof l)throw new Error((0,Fe.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,p);const I=function(d,u,l){var p;if(d=(0,Fe.m9)(d),Oo("Reference.transaction",d._path),".length"===d.key||".keys"===d.key)throw"Reference.transaction failed: "+d.key+" is a read-only object.";const I=null===(p=null==l?void 0:l.applyLocally)||void 0===p||p,O=new Fe.BH,de=Gp(d,()=>{});return function(d,u,l,p,I,O){zl(d,"transaction on "+u);const W={path:u,update:l,onComplete:p,status:null,order:Xr(),applyLocally:O,retryCount:0,unwatcher:I,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},de=Ou(d,u,void 0);W.currentInputSnapshot=de;const Ne=W.update(de.val());if(void 0===Ne)W.unwatcher(),W.currentOutputSnapshotRaw=null,W.currentOutputSnapshotResolved=null,W.onComplete&&W.onComplete(null,!1,W.currentInputSnapshot);else{fs("transaction failed: Data returned ",Ne,W.path),W.status=0;const Je=Ih(d.transactionQueueTree_,u),xt=rc(Je)||[];let Ft;xt.push(W),bh(Je,xt),"object"==typeof Ne&&null!==Ne&&(0,Fe.r3)(Ne,".priority")?(Ft=(0,Fe.DV)(Ne,".priority"),(0,Fe.hu)(Dd(Ft),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Ft=(Ed(d.serverSyncTree_,u)||rr.EMPTY_NODE).getPriority().val();const Yt=ac(d),Hn=ii(Ne,Ft),pr=nc(Hn,de,Yt);W.currentOutputSnapshotRaw=Hn,W.currentOutputSnapshotResolved=pr,W.currentWriteId=Wc(d);const bi=Ju(d.serverSyncTree_,u,pr,W.currentWriteId,W.applyLocally);jo(d.eventQueue_,u,bi),hc(d,d.transactionQueueTree_)}}(d._repo,d._path,u,(Ne,Je,xt)=>{let Ft=null;Ne?O.reject(Ne):(Ft=new Nu(xt,new Xa(d._repo,d._path),Jr),O.resolve(new Hd(Je,Ft)))},de,I),O.promise}(this._delegate,u,{applyLocally:p}).then(O=>new ap(O.committed,new Vu(this.database,O.snapshot)));return l&&I.then(O=>l(null,O.committed,O.snapshot),O=>l(O,!1,null)),I}setPriority(u,l){(0,Fe.Dv)("Reference.setPriority",1,2,arguments.length),(0,Fe.Wj)("Reference.setPriority","onComplete",l,!0);const p=function(d,u){d=(0,Fe.m9)(d),Oo("setPriority",d._path),ic("setPriority",u,!1);const l=new Fe.BH;return Ah(d._repo,Bi(d._path,".priority"),u,null,l.wrapCallback(()=>{})),l.promise}(this._delegate,u);return l&&p.then(()=>l(null),I=>l(I)),p}push(u,l){(0,Fe.Dv)("Reference.push",0,2,arguments.length),(0,Fe.Wj)("Reference.push","onComplete",l,!0);const p=function(d,u){d=(0,Fe.m9)(d),Oo("push",d._path),Ya("push",u,d._path,!0);const l=Ad(d._repo),p=Ol(l),I=_r(d,p),O=_r(d,p);let W;return W=null!=u?Ja(O,u).then(()=>O):Promise.resolve(O),I.then=W.then.bind(W),I.catch=W.then.bind(W,void 0),I}(this._delegate,u),I=p.then(W=>new al(this.database,W));l&&I.then(()=>l(null),W=>l(W));const O=new al(this.database,p);return O.then=I.then.bind(I),O.catch=I.catch.bind(I,void 0),O}onDisconnect(){return Oo("Reference.onDisconnect",this._delegate._path),new bm(new Nf(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Ec{constructor(u,l){this._delegate=u,this.app=l,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:jd,forceLongPolling:Gf}}useEmulator(u,l,p={}){zf(this._delegate,u,l,p)}ref(u){if((0,Fe.Dv)("database.ref",0,1,arguments.length),u instanceof al){const l=kf(this._delegate,u.toString());return new al(this,l)}{const l=Wp(this._delegate,u);return new al(this,l)}}refFromURL(u){(0,Fe.Dv)("database.refFromURL",1,1,arguments.length);const p=kf(this._delegate,u);return new al(this,p)}goOffline(){return(0,Fe.Dv)("database.goOffline",0,0,arguments.length),function(d){(d=(0,Fe.m9)(d))._checkNotDeleted("goOffline"),Gc(d._repo)}(this._delegate)}goOnline(){return(0,Fe.Dv)("database.goOnline",0,0,arguments.length),function(d){(d=(0,Fe.m9)(d))._checkNotDeleted("goOnline"),function(d){d.persistentConnection_&&d.persistentConnection_.resume(Dh)}(d._repo)}(this._delegate)}}Ec.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:d=>function(d){return{".sv":{increment:d}}}(d)};var ps=Object.freeze({__proto__:null,initStandalone:function({app:d,url:u,version:l,customAuthImpl:p,namespace:I,nodeAdmin:O=!1}){Vo(l);const W=new Ki.zt("auth-internal",new Ki.H0("database-standalone"));return W.setComponent(new Ki.wA("auth-internal",()=>p,"PRIVATE")),{instance:new Ec(Bd(d,W,void 0,u,O),d),namespace:I}}});const Bu=Ec.ServerValue;!function(d){d.INTERNAL.registerComponent(new Ki.wA("database-compat",(u,{instanceIdentifier:l})=>{const p=u.getProvider("app-compat").getImmediate(),I=u.getProvider("database").getImmediate({identifier:l});return new Ec(I,p)},"PUBLIC").setServiceProps({Reference:al,Query:Co,Database:Ec,DataSnapshot:Vu,enableLogging:Qc,INTERNAL:ps,ServerValue:Bu}).setMultipleInstances(!0)),d.registerVersion("@firebase/database-compat","0.2.9")}(Em.Z);var Po=L(8006),lp=L(7841);function Xh(d){return null==d}function bg(d){return"function"==typeof d.set}function Kd(d,u){return bg(u)?u:d.ref(u)}function up(d,u){if(function(d){return"string"==typeof d}(d))return u.stringCase();if(bg(d))return u.firebaseCase();if(function(d){return"function"==typeof d.exportVal}(d))return u.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof d)}function id(d,u,l="on",p=yg.z){return new qh.y(I=>{let O=null;return O=d[l](u,(W,de)=>{p.schedule(()=>{I.next({snapshot:W,prevKey:de})}),"once"===l&&p.schedule(()=>I.complete())},W=>{p.schedule(()=>I.error(W))}),"on"===l?{unsubscribe(){null!=O&&d.off(u,O)}}:{unsubscribe(){}}}).pipe((0,Br.U)(I=>{const{snapshot:O,prevKey:W}=I;let de=null;return O.exists()&&(de=O.key),{type:u,payload:O,prevKey:W,key:de}}),(0,_g.B)())}function Cg(d,u){const l=d.length;for(let p=0;p<l;p++)if(d[p].payload.key===u)return p;return-1}function Zd(d,u){const{payload:l,prevKey:p,key:I}=u,O=Cg(d,I),W=function(d,u){if(Xh(u))return 0;{const l=Cg(d,u);return-1===l?d.length:l+1}}(d,p);switch(u.type){case"value":if(u.payload&&u.payload.exists()){let de=null;u.payload.forEach(Ne=>{const Je={payload:Ne,type:"value",prevKey:de,key:Ne.key};return de=Ne.key,d=[...d,Je],!1})}return d;case"child_added":if(O>-1){const de=d[O-1];(de&&de.key||null)!==p&&(d=d.filter(Ne=>Ne.payload.key!==l.key)).splice(W,0,u)}else{if(null==p)return[u,...d];(d=d.slice()).splice(W,0,u)}return d;case"child_removed":return d.filter(de=>de.payload.key!==l.key);case"child_changed":return d.map(de=>de.payload.key===I?u:de);case"child_moved":if(O>-1){const de=d.splice(O,1)[0];return(d=d.slice()).splice(W,0,de),d}return d;default:return d}}function sd(d){return(Xh(d)||0===d.length)&&(d=["child_added","child_removed","child_changed","child_moved"]),d}function dp(d,u,l){return function(d,u,l){return id(d,"value","once",l).pipe((0,_m.w)(p=>{const I=[(0,Sl.of)(p)];return u.forEach(O=>I.push(id(d,O,"on",l))),(0,zd.T)(...I).pipe((0,vg.R)(Zd,[]))}),(0,yc.x)())}(d,u=sd(u),l)}function Qd(d,u,l){const p=(u=sd(u)).map(I=>id(d,I,"on",l));return(0,zd.T)(...p)}function Tg(d,u){return function(p,I){return up(p,{stringCase:()=>d.child(p)[u](I),firebaseCase:()=>p[u](I),snapshotCase:()=>p.ref[u](I)})}}function wm(d){return function(l){return l?up(l,{stringCase:()=>d.child(l).remove(),firebaseCase:()=>l.remove(),snapshotCase:()=>l.ref.remove()}):d.remove()}}function pp(d,u){return function(){return id(d,"value","on",u)}}const tf=new P.OlP("angularfire2.realtimeDatabaseURL"),gp=new P.OlP("angularfire2.database.use-emulator");let Sg=(()=>{class d{constructor(l,p,I,O,W,de,Ne,Je,xt,Ft,Yt,Hn,pr,bi,No){this.schedulers=de;const ll=Ne,Kl=(0,_c.on)(l,W,p);Je&&(0,Po.nw)(Kl,W,xt,Yt,Hn,pr,Ft,bi),this.database=(0,_c.cc)(`${Kl.name}.database.${I}`,"AngularFireDatabase",Kl.name,()=>{const gu=W.runOutsideAngular(()=>Kl.database(I||void 0));return ll&&gu.useEmulator(...ll),gu},[ll])}list(l,p){const I=this.schedulers.ngZone.runOutsideAngular(()=>Kd(this.database,l));let O=I;return p&&(O=p(I)),function(d,u){const l=u.schedulers.outsideAngular,p=u.schedulers.ngZone.run(()=>d.ref);return{query:d,update:Tg(p,"update"),set:Tg(p,"set"),push:I=>p.push(I),remove:wm(p),snapshotChanges:I=>dp(d,I,l).pipe(vi.iC),stateChanges:I=>Qd(d,I,l).pipe(vi.iC),auditTrail:I=>function(d,u,l){return function(d,u,l){return function(d,u){return id(d,"value","on",u).pipe((0,Br.U)(l=>{let p;return l.payload.forEach(I=>(p=I.key,!1)),{data:l,lastKeyToLoad:p}}))}(d,l).pipe(function(...d){return u=>{let l;return"function"==typeof d[d.length-1]&&(l=d.pop()),u.lift(new vm(d,l))}}(u),(0,Br.U)(([I,O])=>{const W=I.lastKeyToLoad,de=O.map(Ne=>Ne.key);return{actions:O,lastKeyToLoad:W,loadedKeys:de}}),function(d){return u=>u.lift(new Yh(d))}(I=>-1===I.loadedKeys.indexOf(I.lastKeyToLoad)),(0,Br.U)(I=>I.actions))}(d,Qd(d,u).pipe((0,vg.R)((I,O)=>[...I,O],[])),l)}(d,I,l).pipe(vi.iC),valueChanges:(I,O)=>dp(d,I,l).pipe((0,Br.U)(de=>de.map(Ne=>O&&O.idField?Object.assign(Object.assign({},Ne.payload.val()),{[O.idField]:Ne.key}):Ne.payload.val())),vi.iC)}}(O,this)}object(l){return function(d,u){return{query:d,snapshotChanges:()=>pp(d,u.schedulers.outsideAngular)().pipe(vi.iC),update:l=>d.ref.update(l),set:l=>d.ref.set(l),remove:()=>d.ref.remove(),valueChanges:()=>pp(d,u.schedulers.outsideAngular)().pipe(vi.iC,(0,Br.U)(p=>p.payload.exists()?p.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Kd(this.database,l)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return d.\u0275fac=function(l){return new(l||d)(P.LFG(_c.Dh),P.LFG(_c.xv,8),P.LFG(tf,8),P.LFG(P.Lbi),P.LFG(P.R0b),P.LFG(vi.HU),P.LFG(gp,8),P.LFG(Po.zQ,8),P.LFG(Po.Qv,8),P.LFG(Po.L6,8),P.LFG(Po._Q,8),P.LFG(Po.rT,8),P.LFG(Po.lh,8),P.LFG(Po.f7,8),P.LFG(Rs.nm,8))},d.\u0275prov=P.Yz7({token:d,factory:d.\u0275fac,providedIn:"any"}),d})(),Tm=(()=>{class d{constructor(){lp.Z.registerVersion("angularfire",vi.q4.full,"rtdb-compat")}}return d.\u0275fac=function(l){return new(l||d)},d.\u0275mod=P.oAB({type:d}),d.\u0275inj=P.cJS({providers:[Sg]}),d})();var Dm=L(3792),mp=L(3071),yp=L(9781);let nf=(()=>{class d{}return d.\u0275fac=function(l){return new(l||d)},d.\u0275mod=P.oAB({type:d,bootstrap:[qn]}),d.\u0275inj=P.cJS({providers:[{provide:Ur.wN,useClass:Kr.r4},mp.K,Dm.O,Sg],imports:[[Pe,Kr.Pc.forRoot(),Vn,Rr.HomeModule,mg.LoginModule,yi.UX,yi.u5,Tm,yp.yb.enablePersistence(),_c.hO.initializeApp(Mi_firebase),(0,Gi.hX)(()=>(0,Gi.ZF)(Mi_firebase)),(0,Hr.AR)(()=>(0,Hr.v0)()),Hh(()=>Xf()),(0,ci.Cm)(()=>(0,ci.ad)())]]}),d})();Ve().bootstrapModule(nf).catch(d=>console.error(d))},863:(nn,ot,L)=>{var _={"./ion-action-sheet.entry.js":[7321,8592,7321],"./ion-alert.entry.js":[6108,8592,6108],"./ion-app_8.entry.js":[1489,8592,1489],"./ion-avatar_3.entry.js":[305,8592,305],"./ion-back-button.entry.js":[5830,8592,5830],"./ion-backdrop.entry.js":[7757,7757],"./ion-button_2.entry.js":[392,8592,392],"./ion-card_5.entry.js":[6911,8592,6911],"./ion-checkbox.entry.js":[937,8592,937],"./ion-chip.entry.js":[8695,8592,8695],"./ion-col_3.entry.js":[6034,6034],"./ion-datetime_3.entry.js":[8837,8592,8837],"./ion-fab_3.entry.js":[4195,8592,4195],"./ion-img.entry.js":[1709,1709],"./ion-infinite-scroll_2.entry.js":[5931,8592,3087],"./ion-input.entry.js":[4513,8592,4513],"./ion-item-option_3.entry.js":[8056,8592,8056],"./ion-item_8.entry.js":[862,8592,862],"./ion-loading.entry.js":[7509,8592,7509],"./ion-menu_3.entry.js":[6272,8592,6030],"./ion-modal.entry.js":[1855,8592,1855],"./ion-nav_2.entry.js":[8708,8592,8708],"./ion-popover.entry.js":[3527,8592,3527],"./ion-progress-bar.entry.js":[4694,8592,4694],"./ion-radio_2.entry.js":[9222,8592,9222],"./ion-range.entry.js":[5277,8592,5277],"./ion-refresher_2.entry.js":[9921,8592,9921],"./ion-reorder_2.entry.js":[3122,8592,3122],"./ion-ripple-effect.entry.js":[1602,1602],"./ion-route_4.entry.js":[5174,8592,5174],"./ion-searchbar.entry.js":[7895,8592,7895],"./ion-segment_2.entry.js":[6164,8592,6164],"./ion-select_3.entry.js":[592,8592,592],"./ion-slide_2.entry.js":[7162,7162],"./ion-spinner.entry.js":[1374,8592,1374],"./ion-split-pane.entry.js":[7896,7896],"./ion-tab-bar_2.entry.js":[5043,8592,5043],"./ion-tab_2.entry.js":[7802,8592,7802],"./ion-text.entry.js":[9072,8592,9072],"./ion-textarea.entry.js":[2191,8592,2191],"./ion-toast.entry.js":[801,8592,801],"./ion-toggle.entry.js":[7110,8592,7110],"./ion-virtual-scroll.entry.js":[431,431]};function P(re){if(!L.o(_,re))return Promise.resolve().then(()=>{var Q=new Error("Cannot find module '"+re+"'");throw Q.code="MODULE_NOT_FOUND",Q});var ke=_[re],ae=ke[0];return Promise.all(ke.slice(1).map(L.e)).then(()=>L(ae))}P.keys=()=>Object.keys(_),P.id=863,nn.exports=P},3394:(nn,ot,L)=>{"use strict";L.d(ot,{Z:()=>ut});var _=L(3854),P=L(3910),re=L(8026),ke=L(5422);class ae{constructor(Ke,$e){this._delegate=Ke,this.firebase=$e,(0,re._addComponent)(Ke,new P.wA("app-compat",()=>this,"PUBLIC")),this.container=Ke.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ke){this._delegate.automaticDataCollectionEnabled=Ke}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ke=>{this._delegate.checkDestroyed(),Ke()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,re.deleteApp)(this._delegate)))}_getService(Ke,$e=re._DEFAULT_ENTRY_NAME){var qe;this._delegate.checkDestroyed();const Ie=this._delegate.container.getProvider(Ke);return!Ie.isInitialized()&&"EXPLICIT"===(null===(qe=Ie.getComponent())||void 0===qe?void 0:qe.instantiationMode)&&Ie.initialize(),Ie.getImmediate({identifier:$e})}_removeServiceInstance(Ke,$e=re._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ke).clearInstance($e)}_addComponent(Ke){(0,re._addComponent)(this._delegate,Ke)}_addOrOverwriteComponent(Ke){(0,re._addOrOverwriteComponent)(this._delegate,Ke)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Z=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),se=function we(){const Te=function(Te){const Ke={},$e={__esModule:!0,initializeApp:function(E,Ye={}){const gt=re.initializeApp(E,Ye);if((0,_.r3)(Ke,gt.name))return Ke[gt.name];const We=new Te(gt,$e);return Ke[gt.name]=We,We},app:Ie,registerVersion:re.registerVersion,setLogLevel:re.setLogLevel,onLog:re.onLog,apps:null,SDK_VERSION:re.SDK_VERSION,INTERNAL:{registerComponent:function(E){const Ye=E.name,gt=Ye.replace("-compat","");if(re._registerComponent(E)&&"PUBLIC"===E.type){const We=(He=Ie())=>{if("function"!=typeof He[gt])throw Z.create("invalid-app-argument",{appName:Ye});return He[gt]()};void 0!==E.serviceProps&&(0,_.ZB)(We,E.serviceProps),$e[gt]=We,Te.prototype[gt]=function(...He){return this._getService.bind(this,Ye).apply(this,E.multipleInstances?He:[])}}return"PUBLIC"===E.type?$e[gt]:null},removeApp:function(E){delete Ke[E]},useAsService:function(E,Ye){return"serverAuth"===Ye?null:Ye},modularAPIs:re}};function Ie(E){if(!(0,_.r3)(Ke,E=E||re._DEFAULT_ENTRY_NAME))throw Z.create("no-app",{appName:E});return Ke[E]}return $e.default=$e,Object.defineProperty($e,"apps",{get:function(){return Object.keys(Ke).map(E=>Ke[E])}}),Ie.App=Te,$e}(ae);return Te.INTERNAL=Object.assign(Object.assign({},Te.INTERNAL),{createFirebaseNamespace:we,extendNamespace:function($e){(0,_.ZB)(Te,$e)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),Te}(),ge=new ke.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==self.firebase){ge.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Te=self.firebase.SDK_VERSION;Te&&Te.indexOf("LITE")>=0&&ge.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ut=se;(0,re.registerVersion)("@firebase/app-compat","0.1.37",undefined)},8026:(nn,ot,L)=>{"use strict";L.r(ot),L.d(ot,{FirebaseError:()=>ke.ZR,SDK_VERSION:()=>vr,_DEFAULT_ENTRY_NAME:()=>Ct,_addComponent:()=>Dt,_addOrOverwriteComponent:()=>Bt,_apps:()=>Ue,_clearComponents:()=>kn,_components:()=>lt,_getProvider:()=>Pt,_registerComponent:()=>Mt,_removeServiceInstance:()=>gn,deleteApp:()=>Wn,getApp:()=>Ot,getApps:()=>En,initializeApp:()=>ur,onLog:()=>jn,registerVersion:()=>Un,setLogLevel:()=>Qn});var _=L(8239),P=L(3910),re=L(5422),ke=L(3854),ae=L(2268);class Q{constructor(Ze){this.container=Ze}getPlatformInfoString(){return this.container.getProviders().map(oe=>{if(function(dn){const Ze=dn.getComponent();return"VERSION"===(null==Ze?void 0:Ze.type)}(oe)){const Ae=oe.getImmediate();return`${Ae.library}/${Ae.version}`}return null}).filter(oe=>oe).join(" ")}}const ne="@firebase/app",se=new re.Yd("@firebase/app"),Ct="[DEFAULT]",st={[ne]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ue=new Map,lt=new Map;function Dt(dn,Ze){try{dn.container.addComponent(Ze)}catch(oe){se.debug(`Component ${Ze.name} failed to register with FirebaseApp ${dn.name}`,oe)}}function Bt(dn,Ze){dn.container.addOrOverwriteComponent(Ze)}function Mt(dn){const Ze=dn.name;if(lt.has(Ze))return se.debug(`There were multiple attempts to register component ${Ze}.`),!1;lt.set(Ze,dn);for(const oe of Ue.values())Dt(oe,dn);return!0}function Pt(dn,Ze){const oe=dn.container.getProvider("heartbeat").getImmediate({optional:!0});return oe&&oe.triggerHeartbeat(),dn.container.getProvider(Ze)}function gn(dn,Ze,oe=Ct){Pt(dn,Ze).clearInstance(oe)}function kn(){lt.clear()}const _n=new ke.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Mn{constructor(Ze,oe,Ae){this._isDeleted=!1,this._options=Object.assign({},Ze),this._config=Object.assign({},oe),this._name=oe.name,this._automaticDataCollectionEnabled=oe.automaticDataCollectionEnabled,this._container=Ae,this.container.addComponent(new P.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ze){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ze}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ze){this._isDeleted=Ze}checkDestroyed(){if(this.isDeleted)throw _n.create("app-deleted",{appName:this._name})}}const vr="9.12.1";function ur(dn,Ze={}){let oe=dn;"object"!=typeof Ze&&(Ze={name:Ze});const Ae=Object.assign({name:Ct,automaticDataCollectionEnabled:!1},Ze),nt=Ae.name;if("string"!=typeof nt||!nt)throw _n.create("bad-app-name",{appName:String(nt)});if(oe||(oe=(0,ke.aH)()),!oe)throw _n.create("no-options");const It=Ue.get(nt);if(It){if((0,ke.vZ)(oe,It.options)&&(0,ke.vZ)(Ae,It.config))return It;throw _n.create("duplicate-app",{appName:nt})}const Oe=new P.H0(nt);for(const it of lt.values())Oe.addComponent(it);const Le=new Mn(oe,Ae,Oe);return Ue.set(nt,Le),Le}function Ot(dn=Ct){const Ze=Ue.get(dn);if(!Ze&&dn===Ct)return ur();if(!Ze)throw _n.create("no-app",{appName:dn});return Ze}function En(){return Array.from(Ue.values())}function Wn(dn){return tn.apply(this,arguments)}function tn(){return(tn=(0,_.Z)(function*(dn){const Ze=dn.name;Ue.has(Ze)&&(Ue.delete(Ze),yield Promise.all(dn.container.getProviders().map(oe=>oe.delete())),dn.isDeleted=!0)})).apply(this,arguments)}function Un(dn,Ze,oe){var Ae;let nt=null!==(Ae=st[dn])&&void 0!==Ae?Ae:dn;oe&&(nt+=`-${oe}`);const It=nt.match(/\s|\//),Oe=Ze.match(/\s|\//);if(It||Oe){const Le=[`Unable to register library "${nt}" with version "${Ze}":`];return It&&Le.push(`library name "${nt}" contains illegal characters (whitespace or "/")`),It&&Oe&&Le.push("and"),Oe&&Le.push(`version name "${Ze}" contains illegal characters (whitespace or "/")`),void se.warn(Le.join(" "))}Mt(new P.wA(`${nt}-version`,()=>({library:nt,version:Ze}),"VERSION"))}function jn(dn,Ze){if(null!==dn&&"function"!=typeof dn)throw _n.create("invalid-log-argument");(0,re.Am)(dn,Ze)}function Qn(dn){(0,re.Ub)(dn)}const Dr="firebase-heartbeat-store";let hr=null;function ri(){return hr||(hr=(0,ae.X3)("firebase-heartbeat-database",1,{upgrade:(dn,Ze)=>{0===Ze&&dn.createObjectStore(Dr)}}).catch(dn=>{throw _n.create("idb-open",{originalErrorMessage:dn.message})})),hr}function Qt(){return(Qt=(0,_.Z)(function*(dn){var Ze;try{return(yield ri()).transaction(Dr).objectStore(Dr).get(Or(dn))}catch(oe){if(oe instanceof ke.ZR)se.warn(oe.message);else{const Ae=_n.create("idb-get",{originalErrorMessage:null===(Ze=oe)||void 0===Ze?void 0:Ze.message});se.warn(Ae.message)}}})).apply(this,arguments)}function wt(dn,Ze){return xr.apply(this,arguments)}function xr(){return(xr=(0,_.Z)(function*(dn,Ze){var oe;try{const nt=(yield ri()).transaction(Dr,"readwrite");return yield nt.objectStore(Dr).put(Ze,Or(dn)),nt.done}catch(Ae){if(Ae instanceof ke.ZR)se.warn(Ae.message);else{const nt=_n.create("idb-set",{originalErrorMessage:null===(oe=Ae)||void 0===oe?void 0:oe.message});se.warn(nt.message)}}})).apply(this,arguments)}function Or(dn){return`${dn.name}!${dn.options.appId}`}class cr{constructor(Ze){this.container=Ze,this._heartbeatsCache=null;const oe=this.container.getProvider("app").getImmediate();this._storage=new Yn(oe),this._heartbeatsCachePromise=this._storage.read().then(Ae=>(this._heartbeatsCache=Ae,Ae))}triggerHeartbeat(){var Ze=this;return(0,_.Z)(function*(){const Ae=Ze.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),nt=dr();if(null===Ze._heartbeatsCache&&(Ze._heartbeatsCache=yield Ze._heartbeatsCachePromise),Ze._heartbeatsCache.lastSentHeartbeatDate!==nt&&!Ze._heartbeatsCache.heartbeats.some(It=>It.date===nt))return Ze._heartbeatsCache.heartbeats.push({date:nt,agent:Ae}),Ze._heartbeatsCache.heartbeats=Ze._heartbeatsCache.heartbeats.filter(It=>{const Oe=new Date(It.date).valueOf();return Date.now()-Oe<=2592e6}),Ze._storage.overwrite(Ze._heartbeatsCache)})()}getHeartbeatsHeader(){var Ze=this;return(0,_.Z)(function*(){if(null===Ze._heartbeatsCache&&(yield Ze._heartbeatsCachePromise),null===Ze._heartbeatsCache||0===Ze._heartbeatsCache.heartbeats.length)return"";const oe=dr(),{heartbeatsToSend:Ae,unsentEntries:nt}=function(dn,Ze=1024){const oe=[];let Ae=dn.slice();for(const nt of dn){const It=oe.find(Oe=>Oe.agent===nt.agent);if(It){if(It.dates.push(nt.date),Kn(oe)>Ze){It.dates.pop();break}}else if(oe.push({agent:nt.agent,dates:[nt.date]}),Kn(oe)>Ze){oe.pop();break}Ae=Ae.slice(1)}return{heartbeatsToSend:oe,unsentEntries:Ae}}(Ze._heartbeatsCache.heartbeats),It=(0,ke.L)(JSON.stringify({version:2,heartbeats:Ae}));return Ze._heartbeatsCache.lastSentHeartbeatDate=oe,nt.length>0?(Ze._heartbeatsCache.heartbeats=nt,yield Ze._storage.overwrite(Ze._heartbeatsCache)):(Ze._heartbeatsCache.heartbeats=[],Ze._storage.overwrite(Ze._heartbeatsCache)),It})()}}function dr(){return(new Date).toISOString().substring(0,10)}class Yn{constructor(Ze){this.app=Ze,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.Z)(function*(){return!!(0,ke.hl)()&&(0,ke.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ze=this;return(0,_.Z)(function*(){return(yield Ze._canUseIndexedDBPromise)&&(yield function(dn){return Qt.apply(this,arguments)}(Ze.app))||{heartbeats:[]}})()}overwrite(Ze){var oe=this;return(0,_.Z)(function*(){var Ae;if(yield oe._canUseIndexedDBPromise){const It=yield oe.read();return wt(oe.app,{lastSentHeartbeatDate:null!==(Ae=Ze.lastSentHeartbeatDate)&&void 0!==Ae?Ae:It.lastSentHeartbeatDate,heartbeats:Ze.heartbeats})}})()}add(Ze){var oe=this;return(0,_.Z)(function*(){var Ae;if(yield oe._canUseIndexedDBPromise){const It=yield oe.read();return wt(oe.app,{lastSentHeartbeatDate:null!==(Ae=Ze.lastSentHeartbeatDate)&&void 0!==Ae?Ae:It.lastSentHeartbeatDate,heartbeats:[...It.heartbeats,...Ze.heartbeats]})}})()}}function Kn(dn){return(0,ke.L)(JSON.stringify({version:2,heartbeats:dn})).length}Mt(new P.wA("platform-logger",Ze=>new Q(Ze),"PRIVATE")),Mt(new P.wA("heartbeat",Ze=>new cr(Ze),"PRIVATE")),Un(ne,"0.8.2",""),Un(ne,"0.8.2","esm2017"),Un("fire-js","")},3910:(nn,ot,L)=>{"use strict";L.d(ot,{wA:()=>re,H0:()=>ne,zt:()=>ae});var _=L(8239),P=L(3854);class re{constructor(se,ge,Ee){this.name=se,this.instanceFactory=ge,this.type=Ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(se){return this.instantiationMode=se,this}setMultipleInstances(se){return this.multipleInstances=se,this}setServiceProps(se){return this.serviceProps=se,this}setInstanceCreatedCallback(se){return this.onInstanceCreated=se,this}}const ke="[DEFAULT]";class ae{constructor(se,ge){this.name=se,this.container=ge,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(se){const ge=this.normalizeInstanceIdentifier(se);if(!this.instancesDeferred.has(ge)){const Ee=new P.BH;if(this.instancesDeferred.set(ge,Ee),this.isInitialized(ge)||this.shouldAutoInitialize())try{const _e=this.getOrInitializeService({instanceIdentifier:ge});_e&&Ee.resolve(_e)}catch(_e){}}return this.instancesDeferred.get(ge).promise}getImmediate(se){var ge;const Ee=this.normalizeInstanceIdentifier(null==se?void 0:se.identifier),_e=null!==(ge=null==se?void 0:se.optional)&&void 0!==ge&&ge;if(!this.isInitialized(Ee)&&!this.shouldAutoInitialize()){if(_e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ee})}catch(De){if(_e)return null;throw De}}getComponent(){return this.component}setComponent(se){if(se.name!==this.name)throw Error(`Mismatching Component ${se.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=se,this.shouldAutoInitialize()){if("EAGER"===se.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ke})}catch(ge){}for(const[ge,Ee]of this.instancesDeferred.entries()){const _e=this.normalizeInstanceIdentifier(ge);try{const De=this.getOrInitializeService({instanceIdentifier:_e});Ee.resolve(De)}catch(De){}}}}clearInstance(se=ke){this.instancesDeferred.delete(se),this.instancesOptions.delete(se),this.instances.delete(se)}delete(){var se=this;return(0,_.Z)(function*(){const ge=Array.from(se.instances.values());yield Promise.all([...ge.filter(Ee=>"INTERNAL"in Ee).map(Ee=>Ee.INTERNAL.delete()),...ge.filter(Ee=>"_delete"in Ee).map(Ee=>Ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(se=ke){return this.instances.has(se)}getOptions(se=ke){return this.instancesOptions.get(se)||{}}initialize(se={}){const{options:ge={}}=se,Ee=this.normalizeInstanceIdentifier(se.instanceIdentifier);if(this.isInitialized(Ee))throw Error(`${this.name}(${Ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const _e=this.getOrInitializeService({instanceIdentifier:Ee,options:ge});for(const[De,ut]of this.instancesDeferred.entries())Ee===this.normalizeInstanceIdentifier(De)&&ut.resolve(_e);return _e}onInit(se,ge){var Ee;const _e=this.normalizeInstanceIdentifier(ge),De=null!==(Ee=this.onInitCallbacks.get(_e))&&void 0!==Ee?Ee:new Set;De.add(se),this.onInitCallbacks.set(_e,De);const ut=this.instances.get(_e);return ut&&se(ut,_e),()=>{De.delete(se)}}invokeOnInitCallbacks(se,ge){const Ee=this.onInitCallbacks.get(ge);if(Ee)for(const _e of Ee)try{_e(se,ge)}catch(De){}}getOrInitializeService({instanceIdentifier:se,options:ge={}}){let Ee=this.instances.get(se);if(!Ee&&this.component&&(Ee=this.component.instanceFactory(this.container,{instanceIdentifier:(we=se,we===ke?void 0:we),options:ge}),this.instances.set(se,Ee),this.instancesOptions.set(se,ge),this.invokeOnInitCallbacks(Ee,se),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,se,Ee)}catch(_e){}var we;return Ee||null}normalizeInstanceIdentifier(se=ke){return this.component?this.component.multipleInstances?se:ke:se}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ne{constructor(se){this.name=se,this.providers=new Map}addComponent(se){const ge=this.getProvider(se.name);if(ge.isComponentSet())throw new Error(`Component ${se.name} has already been registered with ${this.name}`);ge.setComponent(se)}addOrOverwriteComponent(se){this.getProvider(se.name).isComponentSet()&&this.providers.delete(se.name),this.addComponent(se)}getProvider(se){if(this.providers.has(se))return this.providers.get(se);const ge=new ae(se,this);return this.providers.set(se,ge),ge}getProviders(){return Array.from(this.providers.values())}}},5422:(nn,ot,L)=>{"use strict";L.d(ot,{in:()=>P,Yd:()=>Z,Ub:()=>ne,Am:()=>we});const _=[];var P=(()=>{return(se=P||(P={}))[se.DEBUG=0]="DEBUG",se[se.VERBOSE=1]="VERBOSE",se[se.INFO=2]="INFO",se[se.WARN=3]="WARN",se[se.ERROR=4]="ERROR",se[se.SILENT=5]="SILENT",P;var se})();const re={debug:P.DEBUG,verbose:P.VERBOSE,info:P.INFO,warn:P.WARN,error:P.ERROR,silent:P.SILENT},ke=P.INFO,ae={[P.DEBUG]:"log",[P.VERBOSE]:"log",[P.INFO]:"info",[P.WARN]:"warn",[P.ERROR]:"error"},Q=(se,ge,...Ee)=>{if(ge<se.logLevel)return;const _e=(new Date).toISOString(),De=ae[ge];if(!De)throw new Error(`Attempted to log a message with an invalid logType (value: ${ge})`);console[De](`[${_e}]  ${se.name}:`,...Ee)};class Z{constructor(ge){this.name=ge,this._logLevel=ke,this._logHandler=Q,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(ge){if(!(ge in P))throw new TypeError(`Invalid value "${ge}" assigned to \`logLevel\``);this._logLevel=ge}setLogLevel(ge){this._logLevel="string"==typeof ge?re[ge]:ge}get logHandler(){return this._logHandler}set logHandler(ge){if("function"!=typeof ge)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ge}get userLogHandler(){return this._userLogHandler}set userLogHandler(ge){this._userLogHandler=ge}debug(...ge){this._userLogHandler&&this._userLogHandler(this,P.DEBUG,...ge),this._logHandler(this,P.DEBUG,...ge)}log(...ge){this._userLogHandler&&this._userLogHandler(this,P.VERBOSE,...ge),this._logHandler(this,P.VERBOSE,...ge)}info(...ge){this._userLogHandler&&this._userLogHandler(this,P.INFO,...ge),this._logHandler(this,P.INFO,...ge)}warn(...ge){this._userLogHandler&&this._userLogHandler(this,P.WARN,...ge),this._logHandler(this,P.WARN,...ge)}error(...ge){this._userLogHandler&&this._userLogHandler(this,P.ERROR,...ge),this._logHandler(this,P.ERROR,...ge)}}function ne(se){_.forEach(ge=>{ge.setLogLevel(se)})}function we(se,ge){for(const Ee of _){let _e=null;ge&&ge.level&&(_e=re[ge.level]),Ee.userLogHandler=null===se?null:(De,ut,...Te)=>{const Ke=Te.map($e=>{if(null==$e)return null;if("string"==typeof $e)return $e;if("number"==typeof $e||"boolean"==typeof $e)return $e.toString();if($e instanceof Error)return $e.message;try{return JSON.stringify($e)}catch(qe){return null}}).filter($e=>$e).join(" ");ut>=(null!=_e?_e:De.logLevel)&&se({level:P[ut].toLowerCase(),message:Ke,args:Te,type:De.name})}}}},2268:(nn,ot,L)=>{"use strict";L.d(ot,{Lj:()=>Me,X3:()=>Ie});var _=L(8239);let re,ke;const Z=new WeakMap,ne=new WeakMap,we=new WeakMap,se=new WeakMap,ge=new WeakMap;let De={get(Ye,gt,We){if(Ye instanceof IDBTransaction){if("done"===gt)return ne.get(Ye);if("objectStoreNames"===gt)return Ye.objectStoreNames||we.get(Ye);if("store"===gt)return We.objectStoreNames[1]?void 0:We.objectStore(We.objectStoreNames[0])}return $e(Ye[gt])},set:(Ye,gt,We)=>(Ye[gt]=We,!0),has:(Ye,gt)=>Ye instanceof IDBTransaction&&("done"===gt||"store"===gt)||gt in Ye};function Ke(Ye){return"function"==typeof Ye?function(Ye){return Ye!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ke||(ke=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(Ye)?function(...gt){return Ye.apply(qe(this),gt),$e(Z.get(this))}:function(...gt){return $e(Ye.apply(qe(this),gt))}:function(gt,...We){const He=Ye.call(qe(this),gt,...We);return we.set(He,gt.sort?gt.sort():[gt]),$e(He)}}(Ye):(Ye instanceof IDBTransaction&&function(Ye){if(ne.has(Ye))return;const gt=new Promise((We,He)=>{const Ge=()=>{Ye.removeEventListener("complete",ht),Ye.removeEventListener("error",vt),Ye.removeEventListener("abort",vt)},ht=()=>{We(),Ge()},vt=()=>{He(Ye.error||new DOMException("AbortError","AbortError")),Ge()};Ye.addEventListener("complete",ht),Ye.addEventListener("error",vt),Ye.addEventListener("abort",vt)});ne.set(Ye,gt)}(Ye),((Ye,gt)=>gt.some(We=>Ye instanceof We))(Ye,re||(re=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(Ye,De):Ye)}function $e(Ye){if(Ye instanceof IDBRequest)return function(Ye){const gt=new Promise((We,He)=>{const Ge=()=>{Ye.removeEventListener("success",ht),Ye.removeEventListener("error",vt)},ht=()=>{We($e(Ye.result)),Ge()},vt=()=>{He(Ye.error),Ge()};Ye.addEventListener("success",ht),Ye.addEventListener("error",vt)});return gt.then(We=>{We instanceof IDBCursor&&Z.set(We,Ye)}).catch(()=>{}),ge.set(gt,Ye),gt}(Ye);if(se.has(Ye))return se.get(Ye);const gt=Ke(Ye);return gt!==Ye&&(se.set(Ye,gt),ge.set(gt,Ye)),gt}const qe=Ye=>ge.get(Ye);function Ie(Ye,gt,{blocked:We,upgrade:He,blocking:Ge,terminated:ht}={}){const vt=indexedDB.open(Ye,gt),Ht=$e(vt);return He&&vt.addEventListener("upgradeneeded",Zt=>{He($e(vt.result),Zt.oldVersion,Zt.newVersion,$e(vt.transaction))}),We&&vt.addEventListener("blocked",()=>We()),Ht.then(Zt=>{ht&&Zt.addEventListener("close",()=>ht()),Ge&&Zt.addEventListener("versionchange",()=>Ge())}).catch(()=>{}),Ht}function Me(Ye,{blocked:gt}={}){const We=indexedDB.deleteDatabase(Ye);return gt&&We.addEventListener("blocked",()=>gt()),$e(We).then(()=>{})}const ct=["get","getKey","getAll","getAllKeys","count"],at=["put","add","delete","clear"],Vt=new Map;function E(Ye,gt){if(!(Ye instanceof IDBDatabase)||gt in Ye||"string"!=typeof gt)return;if(Vt.get(gt))return Vt.get(gt);const We=gt.replace(/FromIndex$/,""),He=gt!==We,Ge=at.includes(We);if(!(We in(He?IDBIndex:IDBObjectStore).prototype)||!Ge&&!ct.includes(We))return;const ht=function(){var vt=(0,_.Z)(function*(Ht,...Zt){const dt=this.transaction(Ht,Ge?"readwrite":"readonly");let Ct=dt.store;return He&&(Ct=Ct.index(Zt.shift())),(yield Promise.all([Ct[We](...Zt),Ge&&dt.done]))[0]});return function(Zt){return vt.apply(this,arguments)}}();return Vt.set(gt,ht),ht}var Ye;De=Bb(Vb({},Ye=De),{get:(gt,We,He)=>E(gt,We)||Ye.get(gt,We,He),has:(gt,We)=>!!E(gt,We)||Ye.has(gt,We)})},8239:(nn,ot,L)=>{"use strict";function _(re,ke,ae,Q,Z,ne,we){try{var se=re[ne](we),ge=se.value}catch(Ee){return void ae(Ee)}se.done?ke(ge):Promise.resolve(ge).then(Q,Z)}function P(re){return function(){var ke=this,ae=arguments;return new Promise(function(Q,Z){var ne=re.apply(ke,ae);function we(ge){_(ne,Q,Z,we,se,"next",ge)}function se(ge){_(ne,Q,Z,we,se,"throw",ge)}we(void 0)})}}L.d(ot,{Z:()=>P})}},nn=>{nn(nn.s=8470)}]);
var BA=Object.defineProperty,$A=Object.defineProperties,UA=Object.getOwnPropertyDescriptors,Lb=Object.getOwnPropertySymbols,jA=Object.prototype.hasOwnProperty,HA=Object.prototype.propertyIsEnumerable,Vb=(tn,Ze,B)=>Ze in tn?BA(tn,Ze,{enumerable:!0,configurable:!0,writable:!0,value:B}):tn[Ze]=B,Bb=(tn,Ze)=>{for(var B in Ze||(Ze={}))jA.call(Ze,B)&&Vb(tn,B,Ze[B]);if(Lb)for(var B of Lb(Ze))HA.call(Ze,B)&&Vb(tn,B,Ze[B]);return tn},$b=(tn,Ze)=>$A(tn,UA(Ze));(self.webpackChunktrail_app=self.webpackChunktrail_app||[]).push([[179],{8255:tn=>{function Ze(B){return Promise.resolve().then(()=>{var E=new Error("Cannot find module '"+B+"'");throw E.code="MODULE_NOT_FOUND",E})}Ze.keys=()=>[],Ze.resolve=Ze,Ze.id=8255,tn.exports=Ze},8583:(tn,Ze,B)=>{"use strict";B.d(Ze,{mr:()=>$e,ez:()=>ro,K0:()=>ve,Do:()=>Me,V_:()=>ie,Ye:()=>Je,S$:()=>je,sg:()=>Ir,O5:()=>z,b0:()=>Fe,lw:()=>re,EM:()=>Qi,JF:()=>Xi,PM:()=>fi,w_:()=>Q,bD:()=>os,q:()=>ne,Mx:()=>or,HT:()=>ae});var E=B(7716);let O=null;function ne(){return O}function ae(G){O||(O=G)}class Q{}const ve=new E.OlP("DocumentToken");let re=(()=>{class G{historyGo(K){throw new Error("Not implemented")}}return G.\u0275fac=function(K){return new(K||G)},G.\u0275prov=(0,E.Yz7)({factory:Te,token:G,providedIn:"platform"}),G})();function Te(){return(0,E.LFG)(me)}const ie=new E.OlP("Location Initialized");let me=(()=>{class G extends re{constructor(K){super(),this._doc=K,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ne().getBaseHref(this._doc)}onPopState(K){const be=ne().getGlobalEventTarget(this._doc,"window");return be.addEventListener("popstate",K,!1),()=>be.removeEventListener("popstate",K)}onHashChange(K){const be=ne().getGlobalEventTarget(this._doc,"window");return be.addEventListener("hashchange",K,!1),()=>be.removeEventListener("hashchange",K)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(K){this.location.pathname=K}pushState(K,be,Ue){Ce()?this._history.pushState(K,be,Ue):this.location.hash=Ue}replaceState(K,be,Ue){Ce()?this._history.replaceState(K,be,Ue):this.location.hash=Ue}forward(){this._history.forward()}back(){this._history.back()}historyGo(K=0){this._history.go(K)}getState(){return this._history.state}}return G.\u0275fac=function(K){return new(K||G)(E.LFG(ve))},G.\u0275prov=(0,E.Yz7)({factory:_e,token:G,providedIn:"platform"}),G})();function Ce(){return!!window.history.pushState}function _e(){return new me((0,E.LFG)(ve))}function De(G,le){if(0==G.length)return le;if(0==le.length)return G;let K=0;return G.endsWith("/")&&K++,le.startsWith("/")&&K++,2==K?G+le.substring(1):1==K?G+le:G+"/"+le}function Xe(G){const le=G.match(/#|\?|$/),K=le&&le.index||G.length;return G.slice(0,K-("/"===G[K-1]?1:0))+G.slice(K)}function Ee(G){return G&&"?"!==G[0]?"?"+G:G}let je=(()=>{class G{historyGo(K){throw new Error("Not implemented")}}return G.\u0275fac=function(K){return new(K||G)},G.\u0275prov=(0,E.Yz7)({factory:Ae,token:G,providedIn:"root"}),G})();function Ae(G){const le=(0,E.LFG)(ve).location;return new Fe((0,E.LFG)(re),le&&le.origin||"")}const $e=new E.OlP("appBaseHref");let Fe=(()=>{class G extends je{constructor(K,be){if(super(),this._platformLocation=K,this._removeListenerFns=[],null==be&&(be=this._platformLocation.getBaseHrefFromDOM()),null==be)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=be}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(K){this._removeListenerFns.push(this._platformLocation.onPopState(K),this._platformLocation.onHashChange(K))}getBaseHref(){return this._baseHref}prepareExternalUrl(K){return De(this._baseHref,K)}path(K=!1){const be=this._platformLocation.pathname+Ee(this._platformLocation.search),Ue=this._platformLocation.hash;return Ue&&K?`${be}${Ue}`:be}pushState(K,be,Ue,wt){const Xt=this.prepareExternalUrl(Ue+Ee(wt));this._platformLocation.pushState(K,be,Xt)}replaceState(K,be,Ue,wt){const Xt=this.prepareExternalUrl(Ue+Ee(wt));this._platformLocation.replaceState(K,be,Xt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(K=0){var be,Ue;null===(Ue=(be=this._platformLocation).historyGo)||void 0===Ue||Ue.call(be,K)}}return G.\u0275fac=function(K){return new(K||G)(E.LFG(re),E.LFG($e,8))},G.\u0275prov=E.Yz7({token:G,factory:G.\u0275fac}),G})(),Me=(()=>{class G extends je{constructor(K,be){super(),this._platformLocation=K,this._baseHref="",this._removeListenerFns=[],null!=be&&(this._baseHref=be)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(K){this._removeListenerFns.push(this._platformLocation.onPopState(K),this._platformLocation.onHashChange(K))}getBaseHref(){return this._baseHref}path(K=!1){let be=this._platformLocation.hash;return null==be&&(be="#"),be.length>0?be.substring(1):be}prepareExternalUrl(K){const be=De(this._baseHref,K);return be.length>0?"#"+be:be}pushState(K,be,Ue,wt){let Xt=this.prepareExternalUrl(Ue+Ee(wt));0==Xt.length&&(Xt=this._platformLocation.pathname),this._platformLocation.pushState(K,be,Xt)}replaceState(K,be,Ue,wt){let Xt=this.prepareExternalUrl(Ue+Ee(wt));0==Xt.length&&(Xt=this._platformLocation.pathname),this._platformLocation.replaceState(K,be,Xt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(K=0){var be,Ue;null===(Ue=(be=this._platformLocation).historyGo)||void 0===Ue||Ue.call(be,K)}}return G.\u0275fac=function(K){return new(K||G)(E.LFG(re),E.LFG($e,8))},G.\u0275prov=E.Yz7({token:G,factory:G.\u0275fac}),G})(),Je=(()=>{class G{constructor(K,be){this._subject=new E.vpe,this._urlChangeListeners=[],this._platformStrategy=K;const Ue=this._platformStrategy.getBaseHref();this._platformLocation=be,this._baseHref=Xe(I(Ue)),this._platformStrategy.onPopState(wt=>{this._subject.emit({url:this.path(!0),pop:!0,state:wt.state,type:wt.type})})}path(K=!1){return this.normalize(this._platformStrategy.path(K))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(K,be=""){return this.path()==this.normalize(K+Ee(be))}normalize(K){return G.stripTrailingSlash(function(G,le){return G&&le.startsWith(G)?le.substring(G.length):le}(this._baseHref,I(K)))}prepareExternalUrl(K){return K&&"/"!==K[0]&&(K="/"+K),this._platformStrategy.prepareExternalUrl(K)}go(K,be="",Ue=null){this._platformStrategy.pushState(Ue,"",K,be),this._notifyUrlChangeListeners(this.prepareExternalUrl(K+Ee(be)),Ue)}replaceState(K,be="",Ue=null){this._platformStrategy.replaceState(Ue,"",K,be),this._notifyUrlChangeListeners(this.prepareExternalUrl(K+Ee(be)),Ue)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(K=0){var be,Ue;null===(Ue=(be=this._platformStrategy).historyGo)||void 0===Ue||Ue.call(be,K)}onUrlChange(K){this._urlChangeListeners.push(K),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(be=>{this._notifyUrlChangeListeners(be.url,be.state)}))}_notifyUrlChangeListeners(K="",be){this._urlChangeListeners.forEach(Ue=>Ue(K,be))}subscribe(K,be,Ue){return this._subject.subscribe({next:K,error:be,complete:Ue})}}return G.\u0275fac=function(K){return new(K||G)(E.LFG(je),E.LFG(re))},G.normalizeQueryParams=Ee,G.joinWithSlash=De,G.stripTrailingSlash=Xe,G.\u0275prov=(0,E.Yz7)({factory:ct,token:G,providedIn:"root"}),G})();function ct(){return new Je((0,E.LFG)(je),(0,E.LFG)(re))}function I(G){return G.replace(/\/index.html$/,"")}var st=(()=>((st=st||{})[st.Zero=0]="Zero",st[st.One=1]="One",st[st.Two=2]="Two",st[st.Few=3]="Few",st[st.Many=4]="Many",st[st.Other=5]="Other",st))();const Tr=E.kL8;class Vr{}let Yr=(()=>{class G extends Vr{constructor(K){super(),this.locale=K}getPluralCategory(K,be){switch(Tr(be||this.locale)(K)){case st.Zero:return"zero";case st.One:return"one";case st.Two:return"two";case st.Few:return"few";case st.Many:return"many";default:return"other"}}}return G.\u0275fac=function(K){return new(K||G)(E.LFG(E.soG))},G.\u0275prov=E.Yz7({token:G,factory:G.\u0275fac}),G})();function or(G,le){le=encodeURIComponent(le);for(const K of G.split(";")){const be=K.indexOf("="),[Ue,wt]=-1==be?[K,""]:[K.slice(0,be),K.slice(be+1)];if(Ue.trim()===le)return decodeURIComponent(wt)}return null}class yi{constructor(le,K,be,Ue){this.$implicit=le,this.ngForOf=K,this.index=be,this.count=Ue}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ir=(()=>{class G{constructor(K,be,Ue){this._viewContainer=K,this._template=be,this._differs=Ue,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(K){this._ngForOf=K,this._ngForOfDirty=!0}set ngForTrackBy(K){this._trackByFn=K}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(K){K&&(this._template=K)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const K=this._ngForOf;if(!this._differ&&K)try{this._differ=this._differs.find(K).create(this.ngForTrackBy)}catch(be){throw new Error(`Cannot find a differ supporting object '${K}' of type '${function(G){return G.name||typeof G}(K)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const K=this._differ.diff(this._ngForOf);K&&this._applyChanges(K)}}_applyChanges(K){const be=[];K.forEachOperation((Ue,wt,Xt)=>{if(null==Ue.previousIndex){const W=this._viewContainer.createEmbeddedView(this._template,new yi(null,this._ngForOf,-1,-1),null===Xt?void 0:Xt),$=new Ns(Ue,W);be.push($)}else if(null==Xt)this._viewContainer.remove(null===wt?void 0:wt);else if(null!==wt){const W=this._viewContainer.get(wt);this._viewContainer.move(W,Xt);const $=new Ns(Ue,W);be.push($)}});for(let Ue=0;Ue<be.length;Ue++)this._perViewChange(be[Ue].view,be[Ue].record);for(let Ue=0,wt=this._viewContainer.length;Ue<wt;Ue++){const Xt=this._viewContainer.get(Ue);Xt.context.index=Ue,Xt.context.count=wt,Xt.context.ngForOf=this._ngForOf}K.forEachIdentityChange(Ue=>{this._viewContainer.get(Ue.currentIndex).context.$implicit=Ue.item})}_perViewChange(K,be){K.context.$implicit=be.item}static ngTemplateContextGuard(K,be){return!0}}return G.\u0275fac=function(K){return new(K||G)(E.Y36(E.s_b),E.Y36(E.Rgc),E.Y36(E.ZZ4))},G.\u0275dir=E.lG2({type:G,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),G})();class Ns{constructor(le,K){this.record=le,this.view=K}}let z=(()=>{class G{constructor(K,be){this._viewContainer=K,this._context=new H,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=be}set ngIf(K){this._context.$implicit=this._context.ngIf=K,this._updateView()}set ngIfThen(K){ce("ngIfThen",K),this._thenTemplateRef=K,this._thenViewRef=null,this._updateView()}set ngIfElse(K){ce("ngIfElse",K),this._elseTemplateRef=K,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(K,be){return!0}}return G.\u0275fac=function(K){return new(K||G)(E.Y36(E.s_b),E.Y36(E.Rgc))},G.\u0275dir=E.lG2({type:G,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),G})();class H{constructor(){this.$implicit=null,this.ngIf=null}}function ce(G,le){if(le&&!le.createEmbeddedView)throw new Error(`${G} must be a TemplateRef, but received '${(0,E.AaK)(le)}'.`)}let ro=(()=>{class G{}return G.\u0275fac=function(K){return new(K||G)},G.\u0275mod=E.oAB({type:G}),G.\u0275inj=E.cJS({providers:[{provide:Vr,useClass:Yr}]}),G})();const os="browser";function fi(G){return"server"===G}let Qi=(()=>{class G{}return G.\u0275prov=(0,E.Yz7)({token:G,providedIn:"root",factory:()=>new Ki((0,E.LFG)(ve),window)}),G})();class Ki{constructor(le,K){this.document=le,this.window=K,this.offset=()=>[0,0]}setOffset(le){this.offset=Array.isArray(le)?()=>le:le}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(le){this.supportsScrolling()&&this.window.scrollTo(le[0],le[1])}scrollToAnchor(le){if(!this.supportsScrolling())return;const K=function(G,le){const K=G.getElementById(le)||G.getElementsByName(le)[0];if(K)return K;if("function"==typeof G.createTreeWalker&&G.body&&(G.body.createShadowRoot||G.body.attachShadow)){const be=G.createTreeWalker(G.body,NodeFilter.SHOW_ELEMENT);let Ue=be.currentNode;for(;Ue;){const wt=Ue.shadowRoot;if(wt){const Xt=wt.getElementById(le)||wt.querySelector(`[name="${le}"]`);if(Xt)return Xt}Ue=be.nextNode()}}return null}(this.document,le);K&&(this.scrollToElement(K),this.attemptFocus(K))}setHistoryScrollRestoration(le){if(this.supportScrollRestoration()){const K=this.window.history;K&&K.scrollRestoration&&(K.scrollRestoration=le)}}scrollToElement(le){const K=le.getBoundingClientRect(),be=K.left+this.window.pageXOffset,Ue=K.top+this.window.pageYOffset,wt=this.offset();this.window.scrollTo(be-wt[0],Ue-wt[1])}attemptFocus(le){return le.focus(),this.document.activeElement===le}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const le=ks(this.window.history)||ks(Object.getPrototypeOf(this.window.history));return!(!le||!le.writable&&!le.set)}catch(le){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(le){return!1}}}function ks(G){return Object.getOwnPropertyDescriptor(G,"scrollRestoration")}class Xi{}},7716:(tn,Ze,B)=>{"use strict";B.d(Ze,{deG:()=>Ai,tb:()=>KI,AFp:()=>zI,ip1:()=>n0,CZH:()=>Am,hGG:()=>jS,z2F:()=>$y,ahi:()=>Yo,sBO:()=>Dw,Sil:()=>By,_Vd:()=>Em,aQ5:()=>ni,EJc:()=>QI,SBq:()=>qd,qLn:()=>Xs,vpe:()=>Yd,L6J:()=>kT,gxx:()=>ic,tBr:()=>Ba,XFs:()=>gn,OlP:()=>Si,zs3:()=>_s,ZZ4:()=>V_,aQg:()=>B_,soG:()=>Z_,YKP:()=>UE,v3s:()=>IS,h0i:()=>ug,PXZ:()=>gS,R0b:()=>$u,FiY:()=>Da,r_U:()=>PT,Lbi:()=>YI,g9A:()=>qI,Qsj:()=>cw,FYo:()=>L_,JOm:()=>ll,Tiy:()=>xv,q3G:()=>Ye,tp0:()=>Ua,EAV:()=>DS,Rgc:()=>Sy,dDg:()=>tb,DyG:()=>Xl,q4F:()=>Rv,GfV:()=>PE,i9L:()=>Co,s_b:()=>j_,ifc:()=>dn,eFA:()=>ob,G48:()=>lS,Gpc:()=>me,X6Q:()=>c0,_c5:()=>kS,VLi:()=>aS,c2e:()=>ZI,zSh:()=>Fd,wAp:()=>Pr,vHH:()=>Xe,EiD:()=>x,mCW:()=>Du,qzn:()=>ki,JVY:()=>hd,pB0:()=>ip,eBb:()=>fd,L6k:()=>jh,LAX:()=>Cu,cg1:()=>Ev,Tjo:()=>NS,kL8:()=>nE,yhl:()=>Ku,dqk:()=>Vn,sIi:()=>Ph,CqO:()=>og,QGY:()=>ym,F4k:()=>yy,RDi:()=>ta,AaK:()=>re,z3N:()=>al,qOj:()=>Sl,TTD:()=>ro,_Bn:()=>xE,xp6:()=>gh,uIk:()=>Wf,ekj:()=>a,Suo:()=>wI,Xpm:()=>Be,lG2:()=>Ln,Yz7:()=>Lt,cJS:()=>Bn,oAB:()=>Oe,Yjl:()=>Tn,Y36:()=>sg,_UZ:()=>c_,qZA:()=>mm,TgZ:()=>gy,EpF:()=>my,n5z:()=>Pt,Ikx:()=>vv,LFG:()=>wi,$8M:()=>Lr,$Z:()=>u_,NdJ:()=>Zf,CRH:()=>DI,oxw:()=>m_,Hsn:()=>nd,F$t:()=>y_,Q6J:()=>py,s9C:()=>_y,iGM:()=>bI,CHM:()=>Fo,LSH:()=>fn,kYT:()=>ut,YNc:()=>vs,_uU:()=>L0,Oqu:()=>_v,hij:()=>R_,Gf:()=>CI});var E=B(9765),O=B(5319),ne=B(8891),oe=B(6682),ae=B(8819);function Q(t){for(let n in t)if(t[n]===Q)return n;throw Error("Could not find renamed property on target object.")}function ve(t,n){for(const i in n)n.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=n[i])}function re(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(re).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const i=n.indexOf("\n");return-1===i?n:n.substring(0,i)}function Te(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const ie=Q({__forward_ref__:Q});function me(t){return t.__forward_ref__=me,t.toString=function(){return re(this())},t}function Ce(t){return _e(t)?t():t}function _e(t){return"function"==typeof t&&t.hasOwnProperty(ie)&&t.__forward_ref__===me}class Xe extends Error{constructor(n,i){super(function(t,n){return`${t?`NG0${t}: `:""}${n}`}(n,i)),this.code=n}}function Ae(t){return"string"==typeof t?t:null==t?"":String(t)}function $e(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ae(t)}function ct(t,n){const i=n?` in ${n}`:"";throw new Xe("201",`No provider for ${$e(t)} found${i}`)}function ht(t,n){null==t&&function(t,n,i,o){throw new Error(`ASSERTION ERROR: ${t}`+(null==o?"":` [Expected=> ${i} ${o} ${n} <=Actual]`))}(n,t,null,"!=")}function Lt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Bn(t){return{providers:t.providers||[],imports:t.imports||[]}}function ir(t){return Nn(t,Tr)||Nn(t,Wn)}function Nn(t,n){return t.hasOwnProperty(n)?t[n]:null}function Gr(t){return t&&(t.hasOwnProperty(Ft)||t.hasOwnProperty(cr))?t[Ft]:null}const Tr=Q({\u0275prov:Q}),Ft=Q({\u0275inj:Q}),Wn=Q({ngInjectableDef:Q}),cr=Q({ngInjectorDef:Q});var gn=(()=>((gn=gn||{})[gn.Default=0]="Default",gn[gn.Host=1]="Host",gn[gn.Self=2]="Self",gn[gn.SkipSelf=4]="SkipSelf",gn[gn.Optional=8]="Optional",gn))();let sr;function zr(t){const n=sr;return sr=t,n}function kr(t,n,i){const o=ir(t);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:i&gn.Optional?null:void 0!==n?n:void ct(re(t),"Injector")}function Fr(t){return{toString:t}.toString()}var Dr=(()=>((Dr=Dr||{})[Dr.OnPush=0]="OnPush",Dr[Dr.Default=1]="Default",Dr))(),dn=(()=>((dn=dn||{})[dn.Emulated=0]="Emulated",dn[dn.None=2]="None",dn[dn.ShadowDom=3]="ShadowDom",dn))();const Ct="undefined"!=typeof globalThis&&globalThis,ci="undefined"!=typeof window&&window,di="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Vn=Ct||"undefined"!=typeof global&&global||ci||di,Xn={},Gn=[],Yn=Q({\u0275cmp:Q}),ii=Q({\u0275dir:Q}),on=Q({\u0275pipe:Q}),Ot=Q({\u0275mod:Q}),mn=Q({\u0275loc:Q}),cn=Q({\u0275fac:Q}),rn=Q({__NG_ELEMENT_ID__:Q});let qt=0;function Be(t){return Fr(()=>{const i={},o={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Dr.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Gn,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||dn.Emulated,id:"c",styles:t.styles||Gn,_:null,setInput:null,schemas:t.schemas||null,tView:null},c=t.directives,f=t.features,y=t.pipes;return o.id+=qt++,o.inputs=Ut(t.inputs,i),o.outputs=Ut(t.outputs),f&&f.forEach(C=>C(o)),o.directiveDefs=c?()=>("function"==typeof c?c():c).map(Qe):null,o.pipeDefs=y?()=>("function"==typeof y?y():y).map(ke):null,o})}function Qe(t){return kn(t)||function(t){return t[ii]||null}(t)}function ke(t){return function(t){return t[on]||null}(t)}const ye={};function Oe(t){return Fr(()=>{const n={type:t.type,bootstrap:t.bootstrap||Gn,declarations:t.declarations||Gn,imports:t.imports||Gn,exports:t.exports||Gn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(ye[t.id]=t.type),n})}function ut(t,n){return Fr(()=>{const i=pr(t,!0);i.declarations=n.declarations||Gn,i.imports=n.imports||Gn,i.exports=n.exports||Gn})}function Ut(t,n){if(null==t)return Xn;const i={};for(const o in t)if(t.hasOwnProperty(o)){let c=t[o],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),i[c]=o,n&&(n[c]=f)}return i}const Ln=Be;function Tn(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function kn(t){return t[Yn]||null}function pr(t,n){const i=t[Ot]||null;if(!i&&!0===n)throw new Error(`Type ${re(t)} does not have '\u0275mod' property.`);return i}function yt(t){return Array.isArray(t)&&"object"==typeof t[1]}function ft(t){return Array.isArray(t)&&!0===t[1]}function Qt(t){return 0!=(8&t.flags)}function An(t){return 2==(2&t.flags)}function Pn(t){return 1==(1&t.flags)}function jn(t){return null!==t.template}function Cr(t){return 0!=(512&t[2])}function ji(t,n){return t.hasOwnProperty(cn)?t[cn]:null}class ps{constructor(n,i,o){this.previousValue=n,this.currentValue=i,this.firstChange=o}isFirstChange(){return this.firstChange}}function ro(){return os}function os(t){return t.type.prototype.ngOnChanges&&(t.setInput=Gs),Li}function Li(){const t=Ps(this),n=null==t?void 0:t.current;if(n){const i=t.previous;if(i===Xn)t.previous=n;else for(let o in n)i[o]=n[o];t.current=null,this.ngOnChanges(n)}}function Gs(t,n,i,o){const c=Ps(t)||function(t,n){return t[_i]=n}(t,{previous:Xn,current:null}),f=c.current||(c.current={}),y=c.previous,C=this.declaredInputs[i],M=y[C];f[C]=new ps(M&&M.currentValue,n,y===Xn),t[o]=n}ro.ngInherit=!0;const _i="__ngSimpleChanges__";function Ps(t){return t[_i]||null}let ks;function ta(t){ks=t}function G(t){return!!t.listen}const K={createRenderer:(t,n)=>void 0!==ks?ks:"undefined"!=typeof document?document:void 0};function Ue(t){for(;Array.isArray(t);)t=t[0];return t}function W(t,n){return Ue(n[t])}function $(t,n){return Ue(n[t.index])}function ue(t,n){return t.data[n]}function an(t,n){const i=n[t];return yt(i)?i:i[0]}function Zn(t){return 4==(4&t[2])}function Ur(t){return 128==(128&t[2])}function li(t,n){return null==n?null:t[n]}function si(t){t[18]=0}function jr(t,n){t[5]+=n;let i=t,o=t[3];for(;null!==o&&(1===n&&1===i[5]||-1===n&&0===i[5]);)o[5]+=n,i=o,o=o[3]}const Qn={lFrame:_a(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function na(){return Qn.bindingsEnabled}function Yt(){return Qn.lFrame.lView}function _r(){return Qn.lFrame.tView}function Fo(t){return Qn.lFrame.contextLView=t,t[8]}function Hi(){let t=io();for(;null!==t&&64===t.type;)t=t.parent;return t}function io(){return Qn.lFrame.currentTNode}function Fs(t,n){const i=Qn.lFrame;i.currentTNode=t,i.isParent=n}function ho(){return Qn.lFrame.isParent}function ra(){Qn.lFrame.isParent=!1}function ya(){return Qn.isInCheckNoChangesMode}function Io(t){Qn.isInCheckNoChangesMode=t}function As(){return Qn.lFrame.bindingIndex++}function bo(t,n){const i=Qn.lFrame;i.bindingIndex=i.bindingRootIndex=t,Lo(n)}function Lo(t){Qn.lFrame.currentDirectiveIndex=t}function Vo(){return Qn.lFrame.currentQueryIndex}function oo(t){Qn.lFrame.currentQueryIndex=t}function qs(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function sa(t,n,i){if(i&gn.SkipSelf){let c=n,f=t;for(;!(c=c.parent,null!==c||i&gn.Host||(c=qs(f),null===c||(f=f[15],10&c.type))););if(null===c)return!1;n=c,t=f}const o=Qn.lFrame=ao();return o.currentTNode=n,o.lView=t,!0}function Di(t){const n=ao(),i=t[1];Qn.lFrame=n,n.currentTNode=i.firstChild,n.lView=t,n.tView=i,n.contextLView=t,n.bindingIndex=i.bindingStartIndex,n.inI18n=!1}function ao(){const t=Qn.lFrame,n=null===t?null:t.child;return null===n?_a(t):n}function _a(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function Vs(){const t=Qn.lFrame;return Qn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const tl=Vs;function nl(){const t=Vs();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function P(){return Qn.lFrame.selectedIndex}function D(t){Qn.lFrame.selectedIndex=t}function q(){const t=Qn.lFrame;return ue(t.tView,t.selectedIndex)}function Rr(t,n){for(let i=n.directiveStart,o=n.directiveEnd;i<o;i++){const f=t.data[i].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:C,ngAfterViewInit:M,ngAfterViewChecked:j,ngOnDestroy:ee}=f;y&&(t.contentHooks||(t.contentHooks=[])).push(-i,y),C&&((t.contentHooks||(t.contentHooks=[])).push(i,C),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(i,C)),M&&(t.viewHooks||(t.viewHooks=[])).push(-i,M),j&&((t.viewHooks||(t.viewHooks=[])).push(i,j),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(i,j)),null!=ee&&(t.destroyHooks||(t.destroyHooks=[])).push(i,ee)}}function Ti(t,n,i){es(t,n,3,i)}function kt(t,n,i,o){(3&t[2])===i&&es(t,n,i,o)}function Jn(t,n){let i=t[2];(3&i)===n&&(i&=2047,i+=1,t[2]=i)}function es(t,n,i,o){const f=null!=o?o:-1,y=n.length-1;let C=0;for(let M=void 0!==o?65535&t[18]:0;M<y;M++)if("number"==typeof n[M+1]){if(C=n[M],null!=o&&C>=o)break}else n[M]<0&&(t[18]+=65536),(C<f||-1==f)&&(lo(t,i,n,M),t[18]=(4294901760&t[18])+M+2),M++}function lo(t,n,i,o){const c=i[o]<0,f=i[o+1],C=t[c?-i[o]:i[o]];if(c){if(t[2]>>11<t[18]>>16&&(3&t[2])===n){t[2]+=2048;try{f.call(C)}finally{}}}else try{f.call(C)}finally{}}class Fn{constructor(n,i,o){this.factory=n,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=o}}function Nl(t,n,i){const o=G(t);let c=0;for(;c<i.length;){const f=i[c];if("number"==typeof f){if(0!==f)break;c++;const y=i[c++],C=i[c++],M=i[c++];o?t.setAttribute(n,C,M,y):n.setAttributeNS(y,C,M)}else{const y=f,C=i[++c];Mr(y)?o&&t.setProperty(n,y,C):o?t.setAttribute(n,y,C):n.setAttribute(y,C),c++}}return c}function Ui(t){return 3===t||4===t||6===t}function Mr(t){return 64===t.charCodeAt(0)}function as(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let i=-1;for(let o=0;o<n.length;o++){const c=n[o];"number"==typeof c?i=c:0===i||Uu(t,i,c,null,-1===i||2===i?n[++o]:null)}}return t}function Uu(t,n,i,o,c){let f=0,y=t.length;if(-1===n)y=-1;else for(;f<t.length;){const C=t[f++];if("number"==typeof C){if(C===n){y=-1;break}if(C>n){y=f-1;break}}}for(;f<t.length;){const C=t[f];if("number"==typeof C)break;if(C===i){if(null===o)return void(null!==c&&(t[f+1]=c));if(o===t[f+1])return void(t[f+2]=c)}f++,null!==o&&f++,null!==c&&f++}-1!==y&&(t.splice(y,0,n),f=y+1),t.splice(f++,0,i),null!==o&&t.splice(f++,0,o),null!==c&&t.splice(f++,0,c)}function Ql(t){return-1!==t}function $s(t){return 32767&t}function ur(t,n){let i=function(t){return t>>16}(t),o=n;for(;i>0;)o=o[15],i--;return o}let qo=!0;function po(t){const n=qo;return qo=t,n}let Jr=0;function gi(t,n){const i=Oa(t,n);if(-1!==i)return i;const o=n[1];o.firstCreatePass&&(t.injectorIndex=n.length,bn(o.data,t),bn(n,null),bn(o.blueprint,null));const c=aa(t,n),f=t.injectorIndex;if(Ql(c)){const y=$s(c),C=ur(c,n),M=C[1].data;for(let j=0;j<8;j++)n[f+j]=C[y+j]|M[y+j]}return n[f+8]=c,f}function bn(t,n){t.push(0,0,0,0,0,0,0,0,n)}function Oa(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function aa(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let i=0,o=null,c=n;for(;null!==c;){const f=c[1],y=f.type;if(o=2===y?f.declTNode:1===y?c[6]:null,null===o)return-1;if(i++,c=c[15],-1!==o.injectorIndex)return o.injectorIndex|i<<16}return-1}function ls(t,n,i){!function(t,n,i){let o;"string"==typeof i?o=i.charCodeAt(0)||0:i.hasOwnProperty(rn)&&(o=i[rn]),null==o&&(o=i[rn]=Jr++);const c=255&o;n.data[t+(c>>5)]|=1<<c}(t,n,i)}function la(t,n,i){if(i&gn.Optional)return t;ct(n,"NodeInjector")}function _l(t,n,i,o){if(i&gn.Optional&&void 0===o&&(o=null),0==(i&(gn.Self|gn.Host))){const c=t[9],f=zr(void 0);try{return c?c.get(n,o,i&gn.Optional):kr(n,o,i&gn.Optional)}finally{zr(f)}}return la(o,n,i)}function Na(t,n,i,o=gn.Default,c){if(null!==t){const f=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(rn)?t[rn]:void 0;return"number"==typeof n?n>=0?255&n:F:n}(i);if("function"==typeof f){if(!sa(n,t,o))return o&gn.Host?la(c,i,o):_l(n,i,o,c);try{const y=f(o);if(null!=y||o&gn.Optional)return y;ct(i)}finally{tl()}}else if("number"==typeof f){let y=null,C=Oa(t,n),M=-1,j=o&gn.Host?n[16][6]:null;for((-1===C||o&gn.SkipSelf)&&(M=-1===C?aa(t,n):n[C+8],-1!==M&&Le(o,!1)?(y=n[1],C=$s(M),n=ur(M,n)):C=-1);-1!==C;){const ee=n[1];if(ge(f,C,ee.data)){const we=A(C,n,i,y,o,j);if(we!==go)return we}M=n[C+8],-1!==M&&Le(o,n[1].data[C+8]===j)&&ge(f,C,n)?(y=ee,C=$s(M),n=ur(M,n)):C=-1}}}return _l(n,i,o,c)}const go={};function F(){return new pe(Hi(),Yt())}function A(t,n,i,o,c,f){const y=n[1],C=y.data[t+8],ee=S(C,y,i,null==o?An(C)&&qo:o!=y&&0!=(3&C.type),c&gn.Host&&f===C);return null!==ee?U(n,y,ee,C):go}function S(t,n,i,o,c){const f=t.providerIndexes,y=n.data,C=1048575&f,M=t.directiveStart,ee=f>>20,Re=c?C+ee:t.directiveEnd;for(let qe=o?C:C+ee;qe<Re;qe++){const tt=y[qe];if(qe<M&&i===tt||qe>=M&&tt.type===i)return qe}if(c){const qe=y[M];if(qe&&jn(qe)&&qe.type===i)return M}return null}function U(t,n,i,o){let c=t[i];const f=n.data;if(function(t){return t instanceof Fn}(c)){const y=c;y.resolving&&function(t,n){throw new Xe("200",`Circular dependency in DI detected for ${t}`)}($e(f[i]));const C=po(y.canSeeViewProviders);y.resolving=!0;const M=y.injectImpl?zr(y.injectImpl):null;sa(t,o,gn.Default);try{c=t[i]=y.factory(void 0,f,t,o),n.firstCreatePass&&i>=o.directiveStart&&function(t,n,i){const{ngOnChanges:o,ngOnInit:c,ngDoCheck:f}=n.type.prototype;if(o){const y=os(n);(i.preOrderHooks||(i.preOrderHooks=[])).push(t,y),(i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(t,y)}c&&(i.preOrderHooks||(i.preOrderHooks=[])).push(0-t,c),f&&((i.preOrderHooks||(i.preOrderHooks=[])).push(t,f),(i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(t,f))}(i,f[i],n)}finally{null!==M&&zr(M),po(C),y.resolving=!1,tl()}}return c}function ge(t,n,i){return!!(i[n+(t>>5)]&1<<t)}function Le(t,n){return!(t&gn.Self||t&gn.Host&&n)}class pe{constructor(n,i){this._tNode=n,this._lView=i}get(n,i,o){return Na(this._tNode,this._lView,n,o,i)}}function Pt(t){return Fr(()=>{const n=t.prototype.constructor,i=n[cn]||Cn(n),o=Object.prototype;let c=Object.getPrototypeOf(t.prototype).constructor;for(;c&&c!==o;){const f=c[cn]||Cn(c);if(f&&f!==i)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function Cn(t){return _e(t)?()=>{const n=Cn(Ce(t));return n&&n()}:ji(t)}function Lr(t){return function(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const i=t.attrs;if(i){const o=i.length;let c=0;for(;c<o;){const f=i[c];if(Ui(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<o&&"string"==typeof i[c];)c++;else{if(f===n)return i[c+1];c+=2}}}return null}(Hi(),t)}const Br="__parameters__",vr="__prop__metadata__";function mo(t){return function(...i){if(t){const o=t(...i);for(const c in o)this[c]=o[c]}}}function Ts(t,n,i){return Fr(()=>{const o=mo(n);function c(...f){if(this instanceof c)return o.apply(this,f),this;const y=new c(...f);return C.annotation=y,C;function C(M,j,ee){const we=M.hasOwnProperty(Br)?M[Br]:Object.defineProperty(M,Br,{value:[]})[Br];for(;we.length<=ee;)we.push(null);return(we[ee]=we[ee]||[]).push(y),M}}return i&&(c.prototype=Object.create(i.prototype)),c.prototype.ngMetadataName=t,c.annotationCls=c,c})}function Qr(t,n,i,o){return Fr(()=>{const c=mo(n);function f(...y){if(this instanceof f)return c.apply(this,y),this;const C=new f(...y);return function(j,ee){const we=j.constructor,Re=we.hasOwnProperty(vr)?we[vr]:Object.defineProperty(we,vr,{value:{}})[vr];Re[ee]=Re.hasOwnProperty(ee)&&Re[ee]||[],Re[ee].unshift(C),o&&o(j,ee,...y)}}return i&&(f.prototype=Object.create(i.prototype)),f.prototype.ngMetadataName=t,f.annotationCls=f,f})}function us(){return Ts("Attribute",t=>({attributeName:t,__NG_ELEMENT_ID__:()=>Lr(t)}))}const Yo=us();class Si{constructor(n,i){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=Lt({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ai=new Si("AnalyzeForEntryComponents");class er{}const ni=Qr("ContentChild",(t,n={})=>Object.assign({selector:t,first:!0,isViewQuery:!1,descendants:!0},n),er),Co=Qr("ViewChild",(t,n)=>Object.assign({selector:t,first:!0,isViewQuery:!0,descendants:!0},n),er),Xl=Function;function cs(t,n){void 0===n&&(n=t);for(let i=0;i<t.length;i++){let o=t[i];Array.isArray(o)?(n===t&&(n=t.slice(0,i)),cs(o,n)):n!==t&&n.push(o)}return n}function xs(t,n){t.forEach(i=>Array.isArray(i)?xs(i,n):n(i))}function Ko(t,n,i){n>=t.length?t.push(i):t.splice(n,0,i)}function yo(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function wo(t,n){const i=[];for(let o=0;o<t;o++)i.push(n);return i}function Ks(t,n,i){let o=Fa(t,n);return o>=0?t[1|o]=i:(o=~o,function(t,n,i,o){let c=t.length;if(c==n)t.push(i,o);else if(1===c)t.push(o,t[0]),t[0]=i;else{for(c--,t.push(t[c-1],t[c]);c>n;)t[c]=t[c-2],c--;t[n]=i,t[n+1]=o}}(t,o,n,i)),o}function ba(t,n){const i=Fa(t,n);if(i>=0)return t[1|i]}function Fa(t,n){return function(t,n,i){let o=0,c=t.length>>i;for(;c!==o;){const f=o+(c-o>>1),y=t[f<<i];if(n===y)return f<<i;y>n?c=f:o=f+1}return~(c<<i)}(t,n,1)}const fe={},Pe="__NG_DI_FLAG__",at="ngTempTokenPath",en=/\n/gm,nr="__source",wr=Q({provide:String,useValue:Q});let rr;function Pi(t){const n=rr;return rr=t,n}function ui(t,n=gn.Default){if(void 0===rr)throw new Error("inject() must be called from an injection context");return null===rr?kr(t,void 0,n):rr.get(t,n&gn.Optional?null:void 0,n)}function wi(t,n=gn.Default){return(sr||ui)(Ce(t),n)}function da(t){const n=[];for(let i=0;i<t.length;i++){const o=Ce(t[i]);if(Array.isArray(o)){if(0===o.length)throw new Error("Arguments array must have arguments.");let c,f=gn.Default;for(let y=0;y<o.length;y++){const C=o[y],M=Eu(C);"number"==typeof M?-1===M?c=C.token:f|=M:c=C}n.push(wi(c,f))}else n.push(wi(o))}return n}function wa(t,n){return t[Pe]=n,t.prototype[Pe]=n,t}function Eu(t){return t[Pe]}function Va(t,n,i,o){const c=t[at];throw n[nr]&&c.unshift(n[nr]),t.message=function(t,n,i,o=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let c=re(n);if(Array.isArray(n))c=n.map(re).join(" -> ");else if("object"==typeof n){let f=[];for(let y in n)if(n.hasOwnProperty(y)){let C=n[y];f.push(y+":"+("string"==typeof C?JSON.stringify(C):re(C)))}c=`{${f.join(", ")}}`}return`${i}${o?"("+o+")":""}[${c}]: ${t.replace(en,"\n  ")}`}("\n"+t.message,c,i,o),t.ngTokenPath=c,t[at]=null,t}const Ba=wa(Ts("Inject",t=>({token:t})),-1),Da=wa(Ts("Optional"),8),Ua=wa(Ts("SkipSelf"),4);let Yu;function Iu(t){var n;return(null===(n=function(){if(void 0===Yu&&(Yu=null,Vn.trustedTypes))try{Yu=Vn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return Yu}())||void 0===n?void 0:n.createHTML(t))||t}class Ll{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Vl extends Ll{getTypeName(){return"HTML"}}class bu extends Ll{getTypeName(){return"Style"}}class Qd extends Ll{getTypeName(){return"Script"}}class ou extends Ll{getTypeName(){return"URL"}}class rp extends Ll{getTypeName(){return"ResourceURL"}}function al(t){return t instanceof Ll?t.changingThisBreaksApplicationSecurity:t}function ki(t,n){const i=Ku(t);if(null!=i&&i!==n){if("ResourceURL"===i&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${i} (see https://g.co/ng/security#xss)`)}return i===n}function Ku(t){return t instanceof Ll&&t.getTypeName()||null}function hd(t){return new Vl(t)}function jh(t){return new bu(t)}function fd(t){return new Qd(t)}function Cu(t){return new ou(t)}function ip(t){return new rp(t)}class Zu{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const i=(new window.DOMParser).parseFromString(Iu(n),"text/html").body;return null===i?this.inertDocumentHelper.getInertBodyElement(n):(i.removeChild(i.firstChild),i)}catch(i){return null}}}class Bl{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const i=this.inertDocument.createElement("html");this.inertDocument.appendChild(i);const o=this.inertDocument.createElement("body");i.appendChild(o)}}getInertBodyElement(n){const i=this.inertDocument.createElement("template");if("content"in i)return i.innerHTML=Iu(n),i;const o=this.inertDocument.createElement("body");return o.innerHTML=Iu(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(o),o}stripCustomNsAttrs(n){const i=n.attributes;for(let c=i.length-1;0<c;c--){const y=i.item(c).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&n.removeAttribute(y)}let o=n.firstChild;for(;o;)o.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(o),o=o.nextSibling}}const Dc=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,wu=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Du(t){return(t=String(t)).match(Dc)||t.match(wu)?t:"unsafe:"+t}function Ri(t){const n={};for(const i of t.split(","))n[i]=!0;return n}function ei(...t){const n={};for(const i of t)for(const o in i)i.hasOwnProperty(o)&&(n[o]=!0);return n}const eh=Ri("area,br,col,hr,img,wbr"),gd=Ri("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),$l=Ri("rp,rt"),Ul=ei(eh,ei(gd,Ri("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ei($l,Ri("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ei($l,gd)),md=Ri("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Sa=Ri("srcset"),th=ei(md,Sa,Ri("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ri("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Sc=Ri("script,style,template");class Hr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let i=n.firstChild,o=!0;for(;i;)if(i.nodeType===Node.ELEMENT_NODE?o=this.startElement(i):i.nodeType===Node.TEXT_NODE?this.chars(i.nodeValue):this.sanitizedSomething=!0,o&&i.firstChild)i=i.firstChild;else for(;i;){i.nodeType===Node.ELEMENT_NODE&&this.endElement(i);let c=this.checkClobberedElement(i,i.nextSibling);if(c){i=c;break}i=this.checkClobberedElement(i,i.parentNode)}return this.buf.join("")}startElement(n){const i=n.nodeName.toLowerCase();if(!Ul.hasOwnProperty(i))return this.sanitizedSomething=!0,!Sc.hasOwnProperty(i);this.buf.push("<"),this.buf.push(i);const o=n.attributes;for(let c=0;c<o.length;c++){const f=o.item(c),y=f.name,C=y.toLowerCase();if(!th.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let M=f.value;md[C]&&(M=Du(M)),Sa[C]&&(t=M,M=(t=String(t)).split(",").map(n=>Du(n.trim())).join(", ")),this.buf.push(" ",y,'="',g(M),'"')}var t;return this.buf.push(">"),!0}endElement(n){const i=n.nodeName.toLowerCase();Ul.hasOwnProperty(i)&&!eh.hasOwnProperty(i)&&(this.buf.push("</"),this.buf.push(i),this.buf.push(">"))}chars(n){this.buf.push(g(n))}checkClobberedElement(n,i){if(i&&(n.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return i}}const sp=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,T=/([^\#-~ |!])/g;function g(t){return t.replace(/&/g,"&amp;").replace(sp,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(T,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let _;function x(t,n){let i=null;try{_=_||function(t){const n=new Bl(t);return function(){try{return!!(new window.DOMParser).parseFromString(Iu(""),"text/html")}catch(t){return!1}}()?new Zu(n):n}(t);let o=n?String(n):"";i=_.getInertBodyElement(o);let c=5,f=o;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,o=f,f=i.innerHTML,i=_.getInertBodyElement(o)}while(o!==f);return Iu((new Hr).sanitizeChildren(J(i)||i))}finally{if(i){const o=J(i)||i;for(;o.firstChild;)o.removeChild(o.firstChild)}}}function J(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Ye=(()=>((Ye=Ye||{})[Ye.NONE=0]="NONE",Ye[Ye.HTML=1]="HTML",Ye[Ye.STYLE=2]="STYLE",Ye[Ye.SCRIPT=3]="SCRIPT",Ye[Ye.URL=4]="URL",Ye[Ye.RESOURCE_URL=5]="RESOURCE_URL",Ye))();function fn(t){const n=function(){const t=Yt();return t&&t[12]}();return n?n.sanitize(Ye.URL,t)||"":ki(t,"URL")?al(t):Du(Ae(t))}const Rc="__ngContext__";function Us(t,n){t[Rc]=n}function Su(t){const n=function(t){return t[Rc]||null}(t);return n?Array.isArray(n)?n:n.lView:null}function Qh(t){return t.ngOriginalError}function Xh(t,...n){t.error(...n)}class Xs{constructor(){this._console=console}handleError(n){const i=this._findOriginalError(n),o=this._findContext(n),c=(t=n)&&t.ngErrorLogger||Xh;var t;c(this._console,"ERROR",n),i&&c(this._console,"ORIGINAL ERROR",i),o&&c(this._console,"ERROR CONTEXT",o)}_findContext(n){return n?n.ngDebugContext||this._findContext(Qh(n)):null}_findOriginalError(n){let i=n&&Qh(n);for(;i&&Qh(i);)i=Qh(i);return i||null}}const yg=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Vn))();function wl(t){return t instanceof Function?t():t}var ll=(()=>((ll=ll||{})[ll.Important=1]="Important",ll[ll.DashCase=2]="DashCase",ll))();function rf(t,n){return undefined(t,n)}function ys(t){const n=t[3];return ft(n)?n[3]:n}function Nc(t){return Pc(t[13])}function Ha(t){return Pc(t[4])}function Pc(t){for(;null!==t&&!ft(t);)t=t[4];return t}function Uo(t,n,i,o,c){if(null!=o){let f,y=!1;ft(o)?f=o:yt(o)&&(y=!0,o=o[0]);const C=Ue(o);0===t&&null!==i?null==c?uf(n,i,C):Bc(n,i,C,c||null,!0):1===t&&null!==i?Bc(n,i,C,c||null,!0):2===t?function(t,n,i){const o=du(t,n);o&&function(t,n,i,o){G(t)?t.removeChild(n,i,o):n.removeChild(i)}(t,o,n,i)}(n,C,y):3===t&&n.destroyNode(C),null!=f&&function(t,n,i,o,c){const f=i[7];f!==Ue(i)&&Uo(n,t,o,f,c);for(let C=10;C<i.length;C++){const M=i[C];Dd(M[1],M,t,n,o,f)}}(n,t,f,i,c)}}function cu(t,n,i){return G(t)?t.createElement(n,i):null===i?t.createElement(n):t.createElementNS(i,n)}function bg(t,n){const i=t[9],o=i.indexOf(n),c=n[3];1024&n[2]&&(n[2]&=-1025,jr(c,-1)),i.splice(o,1)}function ch(t,n){if(t.length<=10)return;const i=10+n,o=t[i];if(o){const c=o[17];null!==c&&c!==t&&bg(c,o),n>0&&(t[i-1][4]=o[4]);const f=yo(t,10+n);!function(t,n){Dd(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(o[1],o);const y=f[19];null!==y&&y.detachView(f[1]),o[3]=null,o[4]=null,o[2]&=-129}return o}function Fc(t,n){if(!(256&n[2])){const i=n[11];G(i)&&i.destroyNode&&Dd(t,n,i,3,null,null),function(t){let n=t[13];if(!n)return Lc(t[1],t);for(;n;){let i=null;if(yt(n))i=n[13];else{const o=n[10];o&&(i=o)}if(!i){for(;n&&!n[4]&&n!==t;)yt(n)&&Lc(n[1],n),n=n[3];null===n&&(n=t),yt(n)&&Lc(n[1],n),i=n&&n[4]}n=i}}(n)}}function Lc(t,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function(t,n){let i;if(null!=t&&null!=(i=t.destroyHooks))for(let o=0;o<i.length;o+=2){const c=n[i[o]];if(!(c instanceof Fn)){const f=i[o+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const C=c[f[y]],M=f[y+1];try{M.call(C)}finally{}}else try{f.call(c)}finally{}}}}(t,n),function(t,n){const i=t.cleanup,o=n[7];let c=-1;if(null!==i)for(let f=0;f<i.length-1;f+=2)if("string"==typeof i[f]){const y=i[f+1],C="function"==typeof y?y(n):Ue(n[y]),M=o[c=i[f+2]],j=i[f+3];"boolean"==typeof j?C.removeEventListener(i[f],M,j):j>=0?o[c=j]():o[c=-j].unsubscribe(),f+=2}else{const y=o[c=i[f+1]];i[f].call(y)}if(null!==o){for(let f=c+1;f<o.length;f++)o[f]();n[7]=null}}(t,n),1===n[1].type&&G(n[11])&&n[11].destroy();const i=n[17];if(null!==i&&ft(n[3])){i!==n[3]&&bg(i,n);const o=n[19];null!==o&&o.detachView(t)}}}function lf(t,n,i){return function(t,n,i){let o=n;for(;null!==o&&40&o.type;)o=(n=o).parent;if(null===o)return i[0];if(2&o.flags){const c=t.data[o.directiveStart].encapsulation;if(c===dn.None||c===dn.Emulated)return null}return $(o,i)}(t,n.parent,i)}function Bc(t,n,i,o,c){G(t)?t.insertBefore(n,i,o,c):n.insertBefore(i,o,c)}function uf(t,n,i){G(t)?t.appendChild(n,i):n.appendChild(i)}function Cg(t,n,i,o,c){null!==o?Bc(t,n,i,o,c):uf(t,n,i)}function du(t,n){return G(t)?t.parentNode(n):n.parentNode}function dp(t,n,i){return Dg(t,n,i)}let Dg=function(t,n,i){return 40&t.type?$(t,i):null};function cf(t,n,i,o){const c=lf(t,o,n),f=n[11],C=dp(o.parent||n[6],o,n);if(null!=c)if(Array.isArray(i))for(let M=0;M<i.length;M++)Cg(f,c,i[M],C,!1);else Cg(f,c,i,C,!1)}function hu(t,n){if(null!==n){const i=n.type;if(3&i)return $(n,t);if(4&i)return wd(-1,t[n.index]);if(8&i){const o=n.child;if(null!==o)return hu(t,o);{const c=t[n.index];return ft(c)?wd(-1,c):Ue(c)}}if(32&i)return rf(n,t)()||Ue(t[n.index]);{const o=cl(t,n);return null!==o?Array.isArray(o)?o[0]:hu(ys(t[16]),o):hu(t,n.next)}}return null}function cl(t,n){return null!==n?t[16][6].projection[n.projection]:null}function wd(t,n){const i=10+t+1;if(i<n.length){const o=n[i],c=o[1].firstChild;if(null!==c)return hu(o,c)}return n[7]}function Uc(t,n,i,o,c,f,y){for(;null!=i;){const C=o[i.index],M=i.type;if(y&&0===n&&(C&&Us(Ue(C),o),i.flags|=4),64!=(64&i.flags))if(8&M)Uc(t,n,i.child,o,c,f,!1),Uo(n,t,c,C,f);else if(32&M){const j=rf(i,o);let ee;for(;ee=j();)Uo(n,t,c,ee,f);Uo(n,t,c,C,f)}else 16&M?hp(t,n,o,i,c,f):Uo(n,t,c,C,f);i=y?i.projectionNext:i.next}}function Dd(t,n,i,o,c,f){Uc(i,o,t.firstChild,n,c,f,!1)}function hp(t,n,i,o,c,f){const y=i[16],M=y[6].projection[o.projection];if(Array.isArray(M))for(let j=0;j<M.length;j++)Uo(n,t,c,M[j],f);else Uc(t,n,M,y[3],c,f,!0)}function df(t,n,i){G(t)?t.setAttribute(n,"style",i):n.style.cssText=i}function dl(t,n,i){G(t)?""===i?t.removeAttribute(n,"class"):t.setAttribute(n,"class",i):n.className=i}function Ru(t,n,i){let o=t.length;for(;;){const c=t.indexOf(n,i);if(-1===c)return c;if(0===c||t.charCodeAt(c-1)<=32){const f=n.length;if(c+f===o||t.charCodeAt(c+f)<=32)return c}i=c+1}}const ec="ng-template";function Vm(t,n,i){let o=0;for(;o<t.length;){let c=t[o++];if(i&&"class"===c){if(c=t[o],-1!==Ru(c.toLowerCase(),n,0))return!0}else if(1===c){for(;o<t.length&&"string"==typeof(c=t[o++]);)if(c.toLowerCase()===n)return!0;return!1}}return!1}function Mu(t){return 4===t.type&&t.value!==ec}function Tg(t,n,i){return n===(4!==t.type||i?t.value:ec)}function Ou(t,n,i){let o=4;const c=t.attrs||[],f=function(t){for(let n=0;n<t.length;n++)if(Ui(t[n]))return n;return t.length}(c);let y=!1;for(let C=0;C<n.length;C++){const M=n[C];if("number"!=typeof M){if(!y)if(4&o){if(o=2|1&o,""!==M&&!Tg(t,M,i)||""===M&&1===n.length){if(hl(o))return!1;y=!0}}else{const j=8&o?M:n[++C];if(8&o&&null!==t.attrs){if(!Vm(t.attrs,j,i)){if(hl(o))return!1;y=!0}continue}const we=pp(8&o?"class":M,c,Mu(t),i);if(-1===we){if(hl(o))return!1;y=!0;continue}if(""!==j){let Re;Re=we>f?"":c[we+1].toLowerCase();const qe=8&o?Re:null;if(qe&&-1!==Ru(qe,j,0)||2&o&&j!==Re){if(hl(o))return!1;y=!0}}}}else{if(!y&&!hl(o)&&!hl(M))return!1;if(y&&hl(M))continue;y=!1,o=M|1&o}}return hl(o)||y}function hl(t){return 0==(1&t)}function pp(t,n,i,o){if(null===n)return-1;let c=0;if(o||!i){let f=!1;for(;c<n.length;){const y=n[c];if(y===t)return c;if(3===y||6===y)f=!0;else{if(1===y||2===y){let C=n[++c];for(;"string"==typeof C;)C=n[++c];continue}if(4===y)break;if(0===y){c+=4;continue}}c+=f?1:2}return-1}return function(t,n){let i=t.indexOf(4);if(i>-1)for(i++;i<t.length;){const o=t[i];if("number"==typeof o)return-1;if(o===n)return i;i++}return-1}(n,t)}function gp(t,n,i=!1){for(let o=0;o<n.length;o++)if(Ou(t,n[o],i))return!0;return!1}function ph(t,n){e:for(let i=0;i<n.length;i++){const o=n[i];if(t.length===o.length){for(let c=0;c<t.length;c++)if(t[c]!==o[c])continue e;return!0}}return!1}function fl(t,n){return t?":not("+n.trim()+")":n}function tc(t){let n=t[0],i=1,o=2,c="",f=!1;for(;i<t.length;){let y=t[i];if("string"==typeof y)if(2&o){const C=t[++i];c+="["+y+(C.length>0?'="'+C+'"':"")+"]"}else 8&o?c+="."+y:4&o&&(c+=" "+y);else""!==c&&!hl(y)&&(n+=fl(f,c),c=""),o=y,f=f||!hl(o);i++}return""!==c&&(n+=fl(f,c)),n}const fr={};function gh(t){yp(_r(),Yt(),P()+t,ya())}function yp(t,n,i,o){if(!o)if(3==(3&n[2])){const f=t.preOrderCheckHooks;null!==f&&Ti(n,f,i)}else{const f=t.preOrderHooks;null!==f&&kt(n,f,0,i)}D(i)}function mh(t,n){return t<<17|n<<2}function pl(t){return t>>17&32767}function vp(t){return 2|t}function Gl(t){return(131068&t)>>2}function Ms(t,n){return-131069&t|n<<2}function jc(t){return 1|t}function _f(t,n){const i=t.contentQueries;if(null!==i)for(let o=0;o<i.length;o+=2){const c=i[o],f=i[o+1];if(-1!==f){const y=t.data[f];oo(c),y.contentQueries(2,n[f],f)}}}function Ad(t,n,i,o,c,f,y,C,M,j){const ee=n.blueprint.slice();return ee[0]=c,ee[2]=140|o,si(ee),ee[3]=ee[15]=t,ee[8]=i,ee[10]=y||t&&t[10],ee[11]=C||t&&t[11],ee[12]=M||t&&t[12]||null,ee[9]=j||t&&t[9]||null,ee[6]=f,ee[16]=2==n.type?t[16]:ee,ee}function xd(t,n,i,o,c){let f=t.data[n];if(null===f)f=function(t,n,i,o,c){const f=io(),y=ho(),M=t.data[n]=function(t,n,i,o,c,f){return{type:i,index:o,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,i,n,o,c);return null===t.firstChild&&(t.firstChild=M),null!==f&&(y?null==f.child&&null!==M.parent&&(f.child=M):null===f.next&&(f.next=M)),M}(t,n,i,o,c),Qn.lFrame.inI18n&&(f.flags|=64);else if(64&f.type){f.type=i,f.value=o,f.attrs=c;const y=function(){const t=Qn.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Fs(f,!0),f}function Rd(t,n,i,o){if(0===i)return-1;const c=n.length;for(let f=0;f<i;f++)n.push(o),t.blueprint.push(o),t.data.push(null);return c}function Md(t,n,i){Di(n);try{const o=t.viewQuery;null!==o&&Qg(1,o,i);const c=t.template;null!==c&&vf(t,n,c,1,i),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&_f(t,n),t.staticViewQueries&&Qg(2,t.viewQuery,i);const f=t.components;null!==f&&function(t,n){for(let i=0;i<n.length;i++)qg(t,n[i])}(n,f)}catch(o){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),o}finally{n[2]&=-5,nl()}}function Pu(t,n,i,o){const c=n[2];if(256==(256&c))return;Di(n);const f=ya();try{si(n),function(t){Qn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==i&&vf(t,n,i,2,o);const y=3==(3&c);if(!f)if(y){const j=t.preOrderCheckHooks;null!==j&&Ti(n,j,null)}else{const j=t.preOrderHooks;null!==j&&kt(n,j,0,null),Jn(n,0)}if(function(t){for(let n=Nc(t);null!==n;n=Ha(n)){if(!n[2])continue;const i=n[9];for(let o=0;o<i.length;o++){const c=i[o],f=c[3];0==(1024&c[2])&&jr(f,1),c[2]|=1024}}}(n),function(t){for(let n=Nc(t);null!==n;n=Ha(n))for(let i=10;i<n.length;i++){const o=n[i],c=o[1];Ur(o)&&Pu(c,o,c.template,o[8])}}(n),null!==t.contentQueries&&_f(t,n),!f)if(y){const j=t.contentCheckHooks;null!==j&&Ti(n,j)}else{const j=t.contentHooks;null!==j&&kt(n,j,1),Jn(n,1)}!function(t,n){const i=t.hostBindingOpCodes;if(null!==i)try{for(let o=0;o<i.length;o++){const c=i[o];if(c<0)D(~c);else{const f=c,y=i[++o],C=i[++o];bo(y,f),C(2,n[f])}}}finally{D(-1)}}(t,n);const C=t.components;null!==C&&function(t,n){for(let i=0;i<n.length;i++)Zm(t,n[i])}(n,C);const M=t.viewQuery;if(null!==M&&Qg(2,M,o),!f)if(y){const j=t.viewCheckHooks;null!==j&&Ti(n,j)}else{const j=t.viewHooks;null!==j&&kt(n,j,2),Jn(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),f||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,jr(n[3],-1))}finally{nl()}}function Dh(t,n,i,o){const c=n[10],f=!ya(),y=Zn(n);try{f&&!y&&c.begin&&c.begin(),y&&Md(t,n,o),Pu(t,n,i,o)}finally{f&&!y&&c.end&&c.end()}}function vf(t,n,i,o,c){const f=P(),y=2&o;try{D(-1),y&&n.length>20&&yp(t,n,20,ya()),i(o,c)}finally{D(f)}}function Lg(t,n,i){!na()||(function(t,n,i,o){const c=i.directiveStart,f=i.directiveEnd;t.firstCreatePass||gi(i,n),Us(o,n);const y=i.initialInputs;for(let C=c;C<f;C++){const M=t.data[C],j=jn(M);j&&Km(n,i,M);const ee=U(n,t,C,i);Us(ee,n),null!==y&&t_(0,C-c,ee,M,0,y),j&&(an(i.index,n)[8]=ee)}}(t,n,i,$(i,n)),128==(128&i.flags)&&function(t,n,i){const o=i.directiveStart,c=i.directiveEnd,y=i.index,C=Qn.lFrame.currentDirectiveIndex;try{D(y);for(let M=o;M<c;M++){const j=t.data[M],ee=n[M];Lo(M),(null!==j.hostBindings||0!==j.hostVars||null!==j.hostAttrs)&&Op(j,ee)}}finally{D(-1),Lo(C)}}(t,n,i))}function Th(t,n,i=$){const o=n.localNames;if(null!==o){let c=n.index+1;for(let f=0;f<o.length;f+=2){const y=o[f+1],C=-1===y?i(n,t):t[y];t[c++]=C}}}function xp(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Ef(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function Ef(t,n,i,o,c,f,y,C,M,j){const ee=20+o,we=ee+c,Re=function(t,n){const i=[];for(let o=0;o<n;o++)i.push(o<t?null:fr);return i}(ee,we),qe="function"==typeof j?j():j;return Re[1]={type:t,blueprint:Re,template:i,queries:null,viewQuery:C,declTNode:n,data:Re.slice().fill(null,ee),bindingStartIndex:ee,expandoStartIndex:we,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:M,consts:qe,incompleteFirstPass:!1}}function bf(t,n,i,o){const c=kp(n);null===i?c.push(o):(c.push(i),t.firstCreatePass&&Fp(t).push(o,c.length-1))}function Cf(t,n,i){for(let o in t)if(t.hasOwnProperty(o)){const c=t[o];(i=null===i?{}:i).hasOwnProperty(o)?i[o].push(n,c):i[o]=[n,c]}return i}function qa(t,n,i,o,c,f,y,C){const M=$(n,i);let ee,j=n.inputs;!C&&null!=j&&(ee=j[o])?(zc(t,i,ee,o,c),An(n)&&function(t,n){const i=an(n,t);16&i[2]||(i[2]|=64)}(i,n.index)):3&n.type&&(o=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(o),c=null!=y?y(c,n.value||"",o):c,G(f)?f.setProperty(M,o,c):Mr(o)||(M.setProperty?M.setProperty(o,c):M[o]=c))}function jg(t,n,i,o){let c=!1;if(na()){const f=function(t,n,i){const o=t.directiveRegistry;let c=null;if(o)for(let f=0;f<o.length;f++){const y=o[f];gp(i,y.selectors,!1)&&(c||(c=[]),ls(gi(i,n),t,y.type),jn(y)?(Pd(t,i),c.unshift(y)):c.push(y))}return c}(t,n,i),y=null===o?null:{"":-1};if(null!==f){c=!0,Ym(i,t.data.length,f.length);for(let ee=0;ee<f.length;ee++){const we=f[ee];we.providersResolver&&we.providersResolver(we)}let C=!1,M=!1,j=Rd(t,n,f.length,null);for(let ee=0;ee<f.length;ee++){const we=f[ee];i.mergedAttrs=as(i.mergedAttrs,we.hostAttrs),Wg(t,i,n,j,we),e_(j,we,y),null!==we.contentQueries&&(i.flags|=8),(null!==we.hostBindings||null!==we.hostAttrs||0!==we.hostVars)&&(i.flags|=128);const Re=we.type.prototype;!C&&(Re.ngOnChanges||Re.ngOnInit||Re.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(i.index),C=!0),!M&&(Re.ngOnChanges||Re.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(i.index),M=!0),j++}!function(t,n){const o=n.directiveEnd,c=t.data,f=n.attrs,y=[];let C=null,M=null;for(let j=n.directiveStart;j<o;j++){const ee=c[j],we=ee.inputs,Re=null===f||Mu(n)?null:Gg(we,f);y.push(Re),C=Cf(we,j,C),M=Cf(ee.outputs,j,M)}null!==C&&(C.hasOwnProperty("class")&&(n.flags|=16),C.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=y,n.inputs=C,n.outputs=M}(t,i)}y&&function(t,n,i){if(n){const o=t.localNames=[];for(let c=0;c<n.length;c+=2){const f=i[n[c+1]];if(null==f)throw new Xe("301",`Export of name '${n[c+1]}' not found!`);o.push(n[c],f)}}}(i,o,y)}return i.mergedAttrs=as(i.mergedAttrs,i.attrs),c}function Rp(t,n,i,o,c,f){const y=f.hostBindings;if(y){let C=t.hostBindingOpCodes;null===C&&(C=t.hostBindingOpCodes=[]);const M=~n.index;(function(t){let n=t.length;for(;n>0;){const i=t[--n];if("number"==typeof i&&i<0)return i}return 0})(C)!=M&&C.push(M),C.push(o,c,y)}}function Op(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function Pd(t,n){n.flags|=2,(t.components||(t.components=[])).push(n.index)}function e_(t,n,i){if(i){if(n.exportAs)for(let o=0;o<n.exportAs.length;o++)i[n.exportAs[o]]=t;jn(n)&&(i[""]=t)}}function Ym(t,n,i){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+i,t.providerIndexes=n}function Wg(t,n,i,o,c){t.data[o]=c;const f=c.factory||(c.factory=ji(c.type)),y=new Fn(f,jn(c),null);t.blueprint[o]=y,i[o]=y,Rp(t,n,0,o,Rd(t,i,c.hostVars,fr),c)}function Km(t,n,i){const o=$(n,t),c=xp(i),f=t[10],y=rc(t,Ad(t,c,null,i.onPush?64:16,o,n,f,f.createRenderer(o,i),null,null));t[n.index]=y}function ku(t,n,i,o,c,f){const y=$(t,n);!function(t,n,i,o,c,f,y){if(null==f)G(t)?t.removeAttribute(n,c,i):n.removeAttribute(c);else{const C=null==y?Ae(f):y(f,o||"",c);G(t)?t.setAttribute(n,c,C,i):i?n.setAttributeNS(i,c,C):n.setAttribute(c,C)}}(n[11],y,f,t.value,i,o,c)}function t_(t,n,i,o,c,f){const y=f[n];if(null!==y){const C=o.setInput;for(let M=0;M<y.length;){const j=y[M++],ee=y[M++],we=y[M++];null!==C?o.setInput(i,we,j,ee):i[ee]=we}}}function Gg(t,n){let i=null,o=0;for(;o<n.length;){const c=n[o];if(0!==c)if(5!==c){if("number"==typeof c)break;t.hasOwnProperty(c)&&(null===i&&(i=[]),i.push(c,t[c],n[o+1])),o+=2}else o+=2;else o+=4}return i}function Pp(t,n,i,o){return new Array(t,!0,!1,n,null,0,o,i,null,null)}function Zm(t,n){const i=an(n,t);if(Ur(i)){const o=i[1];80&i[2]?Pu(o,i,o.template,i[8]):i[5]>0&&Sf(i)}}function Sf(t){for(let o=Nc(t);null!==o;o=Ha(o))for(let c=10;c<o.length;c++){const f=o[c];if(1024&f[2]){const y=f[1];Pu(y,f,y.template,f[8])}else f[5]>0&&Sf(f)}const i=t[1].components;if(null!==i)for(let o=0;o<i.length;o++){const c=an(i[o],t);Ur(c)&&c[5]>0&&Sf(c)}}function qg(t,n){const i=an(n,t),o=i[1];(function(t,n){for(let i=n.length;i<t.blueprint.length;i++)n.push(t.blueprint[i])})(o,i),Md(o,i,i[8])}function rc(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function Fu(t){for(;t;){t[2]|=64;const n=ys(t);if(Cr(t)&&!n)return t;t=n}return null}function Gc(t,n,i){const o=n[10];o.begin&&o.begin();try{Pu(t,n,t.template,i)}catch(c){throw Lp(n,c),c}finally{o.end&&o.end()}}function Zg(t){!function(t){for(let n=0;n<t.components.length;n++){const i=t.components[n],o=Su(i),c=o[1];Dh(c,o,c.template,i)}}(t[8])}function Qg(t,n,i){oo(0),n(t,i)}const Xg=(()=>Promise.resolve(null))();function kp(t){return t[7]||(t[7]=[])}function Fp(t){return t.cleanup||(t.cleanup=[])}function Lp(t,n){const i=t[9],o=i?i.get(Xs,null):null;o&&o.handleError(n)}function zc(t,n,i,o,c){for(let f=0;f<i.length;){const y=i[f++],C=i[f++],M=n[y],j=t.data[y];null!==j.setInput?j.setInput(M,c,o,C):M[C]=c}}function Qo(t,n,i){const o=W(n,t);!function(t,n,i){G(t)?t.setValue(n,i):n.textContent=i}(t[11],o,i)}function kd(t,n,i){let o=i?t.styles:null,c=i?t.classes:null,f=0;if(null!==n)for(let y=0;y<n.length;y++){const C=n[y];"number"==typeof C?f=C:1==f?c=Te(c,C):2==f&&(o=Te(o,C+": "+n[++y]+";"))}i?t.styles=o:t.stylesWithoutHost=o,i?t.classes=c:t.classesWithoutHost=c}const ic=new Si("INJECTOR",-1);class Vp{get(n,i=fe){if(i===fe){const o=new Error(`NullInjectorError: No provider for ${re(n)}!`);throw o.name="NullInjectorError",o}return i}}const Fd=new Si("Set Injector scope."),xh={},Xm={};let Bp;function $p(){return void 0===Bp&&(Bp=new Vp),Bp}function Af(t,n=null,i=null,o){return new jp(t,i,n||$p(),o)}class jp{constructor(n,i,o,c=null){this.parent=o,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];i&&xs(i,C=>this.processProvider(C,n,i)),xs([n],C=>this.processInjectorType(C,[],f)),this.records.set(ic,qc(void 0,this));const y=this.records.get(Fd);this.scope=null!=y?y.value:null,this.source=c||("object"==typeof n?null:re(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,i=fe,o=gn.Default){this.assertNotDestroyed();const c=Pi(this),f=zr(void 0);try{if(!(o&gn.SkipSelf)){let C=this.records.get(n);if(void 0===C){const M=("function"==typeof(t=n)||"object"==typeof t&&t instanceof Si)&&ir(n);C=M&&this.injectableDefInScope(M)?qc(Xo(n),xh):null,this.records.set(n,C)}if(null!=C)return this.hydrate(n,C)}return(o&gn.Self?$p():this.parent).get(n,i=o&gn.Optional&&i===fe?null:i)}catch(y){if("NullInjectorError"===y.name){if((y[at]=y[at]||[]).unshift(re(n)),c)throw y;return Va(y,n,"R3InjectorError",this.source)}throw y}finally{zr(f),Pi(c)}var t}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((o,c)=>n.push(re(c))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(n,i,o){if(!(n=Ce(n)))return!1;let c=Gr(n);const f=null==c&&n.ngModule||void 0,y=void 0===f?n:f,C=-1!==o.indexOf(y);if(void 0!==f&&(c=Gr(f)),null==c)return!1;if(null!=c.imports&&!C){let ee;o.push(y);try{xs(c.imports,we=>{this.processInjectorType(we,i,o)&&(void 0===ee&&(ee=[]),ee.push(we))})}finally{}if(void 0!==ee)for(let we=0;we<ee.length;we++){const{ngModule:Re,providers:qe}=ee[we];xs(qe,tt=>this.processProvider(tt,Re,qe||Gn))}}this.injectorDefTypes.add(y);const M=ji(y)||(()=>new y);this.records.set(y,qc(M,xh));const j=c.providers;if(null!=j&&!C){const ee=n;xs(j,we=>this.processProvider(we,ee,j))}return void 0!==f&&void 0!==n.providers}processProvider(n,i,o){let c=sc(n=Ce(n))?n:Ce(n&&n.provide);const f=(t=n,Rf(t)?qc(void 0,t.useValue):qc(xf(t),xh));var t;if(sc(n)||!0!==n.multi)this.records.get(c);else{let y=this.records.get(c);y||(y=qc(void 0,xh,!0),y.factory=()=>da(y.multi),this.records.set(c,y)),c=n,y.multi.push(n)}this.records.set(c,f)}hydrate(n,i){return i.value===xh&&(i.value=Xm,i.value=i.factory()),"object"==typeof i.value&&i.value&&null!==(t=i.value)&&"object"==typeof t&&"function"==typeof t.ngOnDestroy&&this.onDestroy.add(i.value),i.value;var t}injectableDefInScope(n){if(!n.providedIn)return!1;const i=Ce(n.providedIn);return"string"==typeof i?"any"===i||i===this.scope:this.injectorDefTypes.has(i)}}function Xo(t){const n=ir(t),i=null!==n?n.factory:ji(t);if(null!==i)return i;if(t instanceof Si)throw new Error(`Token ${re(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const n=t.length;if(n>0){const o=wo(n,"?");throw new Error(`Can't resolve all parameters for ${re(t)}: (${o.join(", ")}).`)}const i=function(t){const n=t&&(t[Tr]||t[Wn]);if(n){const i=function(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${i}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${i}" class.`),n}return null}(t);return null!==i?()=>i.factory(t):()=>new t}(t);throw new Error("unreachable")}function xf(t,n,i){let o;if(sc(t)){const c=Ce(t);return ji(c)||Xo(c)}if(Rf(t))o=()=>Ce(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))o=()=>t.useFactory(...da(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))o=()=>wi(Ce(t.useExisting));else{const c=Ce(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return ji(c)||Xo(c);o=()=>new c(...da(t.deps))}return o}function qc(t,n,i=!1){return{factory:t,value:n,multi:i?[]:void 0}}function Rf(t){return null!==t&&"object"==typeof t&&wr in t}function sc(t){return"function"==typeof t}const Mf=function(t,n,i){return function(t,n=null,i=null,o){const c=Af(t,n,i,o);return c._resolveInjectorDefTypes(),c}({name:i},n,t,i)};let _s=(()=>{class t{static create(i,o){return Array.isArray(i)?Mf(i,o,""):Mf(i.providers,i.parent,i.name||"")}}return t.THROW_IF_NOT_FOUND=fe,t.NULL=new Vp,t.\u0275prov=Lt({token:t,providedIn:"any",factory:()=>wi(ic)}),t.__NG_ELEMENT_ID__=-1,t})();function lm(t,n){Rr(Su(t)[1],Hi())}function Sl(t){let n=function(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),i=!0;const o=[t];for(;n;){let c;if(jn(t))c=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Error("Directives cannot inherit Components");c=n.\u0275dir}if(c){if(i){o.push(c);const y=t;y.inputs=Uf(t.inputs),y.declaredInputs=Uf(t.declaredInputs),y.outputs=Uf(t.outputs);const C=c.hostBindings;C&&Qp(t,C);const M=c.viewQuery,j=c.contentQueries;if(M&&um(t,M),j&&ly(t,j),ve(t.inputs,c.inputs),ve(t.declaredInputs,c.declaredInputs),ve(t.outputs,c.outputs),jn(c)&&c.data.animation){const ee=t.data;ee.animation=(ee.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let y=0;y<f.length;y++){const C=f[y];C&&C.ngInherit&&C(t),C===Sl&&(i=!1)}}n=Object.getPrototypeOf(n)}!function(t){let n=0,i=null;for(let o=t.length-1;o>=0;o--){const c=t[o];c.hostVars=n+=c.hostVars,c.hostAttrs=as(c.hostAttrs,i=as(i,c.hostAttrs))}}(o)}function Uf(t){return t===Xn?{}:t===Gn?[]:t}function um(t,n){const i=t.viewQuery;t.viewQuery=i?(o,c)=>{n(o,c),i(o,c)}:n}function ly(t,n){const i=t.contentQueries;t.contentQueries=i?(o,c,f)=>{n(o,c,f),i(o,c,f)}:n}function Qp(t,n){const i=t.hostBindings;t.hostBindings=i?(o,c)=>{n(o,c),i(o,c)}:n}let Jp=null;function cc(){if(!Jp){const t=Vn.Symbol;if(t&&t.iterator)Jp=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let i=0;i<n.length;++i){const o=n[i];"entries"!==o&&"size"!==o&&Map.prototype[o]===Map.prototype.entries&&(Jp=o)}}}return Jp}function Ph(t){return!!kh(t)&&(Array.isArray(t)||!(t instanceof Map)&&cc()in t)}function kh(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ro(t,n,i){return!Object.is(t[n],i)&&(t[n]=i,!0)}function Wf(t,n,i,o){const c=Yt();return Ro(c,As(),n)&&(_r(),ku(q(),c,t,n,i,o)),Wf}function ql(t,n,i,o){return Ro(t,As(),i)?n+Ae(i)+o:fr}function vs(t,n,i,o,c,f,y,C){const M=Yt(),j=_r(),ee=t+20,we=j.firstCreatePass?function(t,n,i,o,c,f,y,C,M){const j=n.consts,ee=xd(n,t,4,y||null,li(j,C));jg(n,i,ee,li(j,M)),Rr(n,ee);const we=ee.tViews=Ef(2,ee,o,c,f,n.directiveRegistry,n.pipeRegistry,null,n.schemas,j);return null!==n.queries&&(n.queries.template(n,ee),we.queries=n.queries.embeddedTView(ee)),ee}(ee,j,M,n,i,o,c,f,y):j.data[ee];Fs(we,!1);const Re=M[11].createComment("");cf(j,M,Re,we),Us(Re,M),rc(M,M[ee]=Pp(Re,M,Re,we)),Pn(we)&&Lg(j,M,we),null!=y&&Th(M,we,C)}function sg(t,n=gn.Default){const i=Yt();return null===i?wi(t,n):Na(Hi(),i,Ce(t),n)}function u_(){throw new Error("invalid")}function py(t,n,i){const o=Yt();return Ro(o,As(),n)&&qa(_r(),q(),o,t,n,o[11],i,!1),py}function gm(t,n,i,o,c){const y=c?"class":"style";zc(t,i,n.inputs[y],y,o)}function gy(t,n,i,o){const c=Yt(),f=_r(),y=20+t,C=c[11],M=c[y]=cu(C,n,Qn.lFrame.currentNamespace),j=f.firstCreatePass?function(t,n,i,o,c,f,y){const C=n.consts,j=xd(n,t,2,c,li(C,f));return jg(n,i,j,li(C,y)),null!==j.attrs&&kd(j,j.attrs,!1),null!==j.mergedAttrs&&kd(j,j.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,j),j}(y,f,c,0,n,i,o):f.data[y];Fs(j,!0);const ee=j.mergedAttrs;null!==ee&&Nl(C,M,ee);const we=j.classes;null!==we&&dl(C,M,we);const Re=j.styles;null!==Re&&df(C,M,Re),64!=(64&j.flags)&&cf(f,c,M,j),0===Qn.lFrame.elementDepthCount&&Us(M,c),Qn.lFrame.elementDepthCount++,Pn(j)&&(Lg(f,c,j),function(t,n,i){if(Qt(n)){const c=n.directiveEnd;for(let f=n.directiveStart;f<c;f++){const y=t.data[f];y.contentQueries&&y.contentQueries(1,i[f],f)}}}(f,j,c)),null!==o&&Th(c,j)}function mm(){let t=Hi();ho()?ra():(t=t.parent,Fs(t,!1));const n=t;Qn.lFrame.elementDepthCount--;const i=_r();i.firstCreatePass&&(Rr(i,t),Qt(t)&&i.queries.elementEnd(t)),null!=n.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(n)&&gm(i,n,Yt(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(n)&&gm(i,n,Yt(),n.stylesWithoutHost,!1)}function c_(t,n,i,o){gy(t,n,i,o),mm()}function my(){return Yt()}function ym(t){return!!t&&"function"==typeof t.then}function yy(t){return!!t&&"function"==typeof t.subscribe}const og=yy;function Zf(t,n,i,o){const c=Yt(),f=_r(),y=Hi();return function(t,n,i,o,c,f,y,C){const M=Pn(o),ee=t.firstCreatePass&&Fp(t),we=n[8],Re=kp(n);let qe=!0;if(3&o.type||C){const gt=$(o,n),En=C?C(gt):gt,Kt=Re.length,Er=C?Wr=>C(Ue(Wr[o.index])):o.index;if(G(i)){let Wr=null;if(!C&&M&&(Wr=function(t,n,i,o){const c=t.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const y=c[f];if(y===i&&c[f+1]===o){const C=n[7],M=c[f+2];return C.length>M?C[M]:null}"string"==typeof y&&(f+=2)}return null}(t,n,c,o.index)),null!==Wr)(Wr.__ngLastListenerFn__||Wr).__ngNextListenerFn__=f,Wr.__ngLastListenerFn__=f,qe=!1;else{f=td(o,n,we,f,!1);const Oi=i.listen(En,c,f);Re.push(f,Oi),ee&&ee.push(c,Er,Kt,Kt+1)}}else f=td(o,n,we,f,!0),En.addEventListener(c,f,y),Re.push(f),ee&&ee.push(c,Er,Kt,y)}else f=td(o,n,we,f,!1);const tt=o.outputs;let Mt;if(qe&&null!==tt&&(Mt=tt[c])){const gt=Mt.length;if(gt)for(let En=0;En<gt;En+=2){const xa=n[Mt[En]][Mt[En+1]].subscribe(f),_c=Re.length;Re.push(f,xa),ee&&ee.push(c,o.index,_c,-(_c+1))}}}(f,c,c[11],y,t,n,!!i,o),Zf}function Qf(t,n,i,o){try{return!1!==i(o)}catch(c){return Lp(t,c),!1}}function td(t,n,i,o,c){return function f(y){if(y===Function)return o;const C=2&t.flags?an(t.index,n):n;0==(32&n[2])&&Fu(C);let M=Qf(n,0,o,y),j=f.__ngNextListenerFn__;for(;j;)M=Qf(n,0,j,y)&&M,j=j.__ngNextListenerFn__;return c&&!1===M&&(y.preventDefault(),y.returnValue=!1),M}}function m_(t=1){return function(t){return(Qn.lFrame.contextLView=function(t,n){for(;t>0;)n=n[15],t--;return n}(t,Qn.lFrame.contextLView))[8]}(t)}function hv(t,n){let i=null;const o=function(t){const n=t.attrs;if(null!=n){const i=n.indexOf(5);if(0==(1&i))return n[i+1]}return null}(t);for(let c=0;c<n.length;c++){const f=n[c];if("*"!==f){if(null===o?gp(t,f,!0):ph(o,f))return c}else i=c}return i}function y_(t){const n=Yt()[16][6];if(!n.projection){const o=n.projection=wo(t?t.length:1,null),c=o.slice();let f=n.child;for(;null!==f;){const y=t?hv(f,t):0;null!==y&&(c[y]?c[y].projectionNext=f:o[y]=f,c[y]=f),f=f.next}}}function nd(t,n=0,i){const o=Yt(),c=_r(),f=xd(c,20+t,16,null,i||null);null===f.projection&&(f.projection=n),ra(),64!=(64&f.flags)&&function(t,n,i){hp(n[11],0,n,i,lf(t,i,n),dp(i.parent||n[6],i,n))}(c,o,f)}function _y(t,n,i){return vy(t,"",n,"",i),_y}function vy(t,n,i,o,c){const f=Yt(),y=ql(f,n,i,o);return y!==fr&&qa(_r(),q(),f,t,y,f[11],c,!1),vy}function fv(t,n,i,o,c){const f=t[i+1],y=null===n;let C=o?pl(f):Gl(f),M=!1;for(;0!==C&&(!1===M||y);){const ee=t[C+1];P0(t[C],n)&&(M=!0,t[C+1]=o?jc(ee):vp(ee)),C=o?pl(ee):Gl(ee)}M&&(t[i+1]=o?vp(f):jc(f))}function P0(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&Fa(t,n)>=0}function a(t,n){return function(t,n,i,o){const c=Yt(),f=_r(),y=function(t){const n=Qn.lFrame,i=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,i}(2);f.firstUpdatePass&&function(t,n,i,o){const c=t.data;if(null===c[i+1]){const f=c[P()],y=function(t,n){return n>=t.expandoStartIndex}(t,i);(function(t,n){return 0!=(t.flags&(n?16:32))})(f,o)&&null===n&&!y&&(n=!1),n=function(t,n,i,o){const c=function(t){const n=Qn.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let f=o?n.residualClasses:n.residualStyles;if(null===c)0===(o?n.classBindings:n.styleBindings)&&(i=Mi(i=Kn(null,t,n,i,o),n.attrs,o),f=null);else{const y=n.directiveStylingLast;if(-1===y||t[y]!==c)if(i=Kn(c,t,n,i,o),null===f){let M=function(t,n,i){const o=i?n.classBindings:n.styleBindings;if(0!==Gl(o))return t[pl(o)]}(t,n,o);void 0!==M&&Array.isArray(M)&&(M=Kn(null,t,n,M[1],o),M=Mi(M,n.attrs,o),function(t,n,i,o){t[pl(i?n.classBindings:n.styleBindings)]=o}(t,n,o,M))}else f=function(t,n,i){let o;const c=n.directiveEnd;for(let f=1+n.directiveStylingLast;f<c;f++)o=Mi(o,t[f].hostAttrs,i);return Mi(o,n.attrs,i)}(t,n,o)}return void 0!==f&&(o?n.residualClasses=f:n.residualStyles=f),i}(c,f,n,o),function(t,n,i,o,c,f){let y=f?n.classBindings:n.styleBindings,C=pl(y),M=Gl(y);t[o]=i;let ee,j=!1;if(Array.isArray(i)){const we=i;ee=we[1],(null===ee||Fa(we,ee)>0)&&(j=!0)}else ee=i;if(c)if(0!==M){const Re=pl(t[C+1]);t[o+1]=mh(Re,C),0!==Re&&(t[Re+1]=Ms(t[Re+1],o)),t[C+1]=function(t,n){return 131071&t|n<<17}(t[C+1],o)}else t[o+1]=mh(C,0),0!==C&&(t[C+1]=Ms(t[C+1],o)),C=o;else t[o+1]=mh(M,0),0===C?C=o:t[M+1]=Ms(t[M+1],o),M=o;j&&(t[o+1]=vp(t[o+1])),fv(t,ee,o,!0),fv(t,ee,o,!1),function(t,n,i,o,c){const f=c?t.residualClasses:t.residualStyles;null!=f&&"string"==typeof n&&Fa(f,n)>=0&&(i[o+1]=jc(i[o+1]))}(n,ee,t,o,f),y=mh(C,M),f?n.classBindings=y:n.styleBindings=y}(c,f,n,i,y,o)}}(f,t,y,o),n!==fr&&Ro(c,y,n)&&function(t,n,i,o,c,f,y,C){if(!(3&n.type))return;const M=t.data,j=M[C+1];Ho(function(t){return 1==(1&t)}(j)?Zi(M,n,i,c,Gl(j),y):void 0)||(Ho(f)||function(t){return 2==(2&t)}(j)&&(f=Zi(M,null,i,c,C,y)),function(t,n,i,o,c){const f=G(t);if(n)c?f?t.addClass(i,o):i.classList.add(o):f?t.removeClass(i,o):i.classList.remove(o);else{let y=-1===o.indexOf("-")?void 0:ll.DashCase;if(null==c)f?t.removeStyle(i,o,y):i.style.removeProperty(o);else{const C="string"==typeof c&&c.endsWith("!important");C&&(c=c.slice(0,-10),y|=ll.Important),f?t.setStyle(i,o,c,y):i.style.setProperty(o,c,C?"important":"")}}}(o,y,W(P(),i),c,f))}(f,f.data[P()],c,c[11],t,c[y+1]=function(t,n){return null==t||("string"==typeof n?t+=n:"object"==typeof t&&(t=re(al(t)))),t}(n,i),o,y)}(t,n,null,!0),a}function Kn(t,n,i,o,c){let f=null;const y=i.directiveEnd;let C=i.directiveStylingLast;for(-1===C?C=i.directiveStart:C++;C<y&&(f=n[C],o=Mi(o,f.hostAttrs,c),f!==t);)C++;return null!==t&&(i.directiveStylingLast=C),o}function Mi(t,n,i){const o=i?1:2;let c=-1;if(null!==n)for(let f=0;f<n.length;f++){const y=n[f];"number"==typeof y?c=y:c===o&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Ks(t,y,!!i||n[++f]))}return void 0===t?null:t}function Zi(t,n,i,o,c,f){const y=null===n;let C;for(;c>0;){const M=t[c],j=Array.isArray(M),ee=j?M[1]:M,we=null===ee;let Re=i[c+1];Re===fr&&(Re=we?Gn:void 0);let qe=we?ba(Re,o):ee===o?Re:void 0;if(j&&!Ho(qe)&&(qe=ba(M,o)),Ho(qe)&&(C=qe,y))return C;const tt=t[c+1];c=y?pl(tt):Gl(tt)}if(null!==n){let M=f?n.residualClasses:n.residualStyles;null!=M&&(C=ba(M,o))}return C}function Ho(t){return void 0!==t}function L0(t,n=""){const i=Yt(),o=_r(),c=t+20,f=o.firstCreatePass?xd(o,c,1,n,null):o.data[c],y=i[c]=function(t,n){return G(t)?t.createText(n):t.createTextNode(n)}(i[11],n);cf(o,i,y,f),Fs(f,!1)}function _v(t){return R_("",t,""),_v}function R_(t,n,i){const o=Yt(),c=ql(o,t,n,i);return c!==fr&&Qo(o,P(),c),R_}function vv(t,n,i){const o=Yt();return Ro(o,As(),n)&&qa(_r(),q(),o,t,n,o[11],i,!0),vv}const lg=void 0;var oC=["en",[["a","p"],["AM","PM"],lg],[["AM","PM"],lg,lg],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],lg,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],lg,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",lg,"{1} 'at' {0}",lg],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const n=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===i?1:5}];let _m={};function Ev(t){const n=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let i=rE(n);if(i)return i;const o=n.split("-")[0];if(i=rE(o),i)return i;if("en"===o)return oC;throw new Error(`Missing locale data for the locale "${t}".`)}function nE(t){return Ev(t)[Pr.PluralCase]}function rE(t){return t in _m||(_m[t]=Vn.ng&&Vn.ng.common&&Vn.ng.common.locales&&Vn.ng.common.locales[t]),_m[t]}var Pr=(()=>((Pr=Pr||{})[Pr.LocaleId=0]="LocaleId",Pr[Pr.DayPeriodsFormat=1]="DayPeriodsFormat",Pr[Pr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Pr[Pr.DaysFormat=3]="DaysFormat",Pr[Pr.DaysStandalone=4]="DaysStandalone",Pr[Pr.MonthsFormat=5]="MonthsFormat",Pr[Pr.MonthsStandalone=6]="MonthsStandalone",Pr[Pr.Eras=7]="Eras",Pr[Pr.FirstDayOfWeek=8]="FirstDayOfWeek",Pr[Pr.WeekendRange=9]="WeekendRange",Pr[Pr.DateFormat=10]="DateFormat",Pr[Pr.TimeFormat=11]="TimeFormat",Pr[Pr.DateTimeFormat=12]="DateTimeFormat",Pr[Pr.NumberSymbols=13]="NumberSymbols",Pr[Pr.NumberFormats=14]="NumberFormats",Pr[Pr.CurrencyCode=15]="CurrencyCode",Pr[Pr.CurrencySymbol=16]="CurrencySymbol",Pr[Pr.CurrencyName=17]="CurrencyName",Pr[Pr.Currencies=18]="Currencies",Pr[Pr.Directionality=19]="Directionality",Pr[Pr.PluralCase=20]="PluralCase",Pr[Pr.ExtraData=21]="ExtraData",Pr))();const M_="en-US";let iE=M_;function Iv(t){ht(t,"Expected localeId to be defined"),"string"==typeof t&&(iE=t.toLowerCase().replace(/_/g,"-"))}function wv(t,n,i,o,c){if(t=Ce(t),Array.isArray(t))for(let f=0;f<t.length;f++)wv(t[f],n,i,o,c);else{const f=_r(),y=Yt();let C=sc(t)?t:Ce(t.provide),M=xf(t);const j=Hi(),ee=1048575&j.providerIndexes,we=j.directiveStart,Re=j.providerIndexes>>20;if(sc(t)||!t.multi){const qe=new Fn(M,c,sg),tt=Tv(C,n,c?ee:ee+Re,we);-1===tt?(ls(gi(j,y),f,C),Dv(f,t,n.length),n.push(C),j.directiveStart++,j.directiveEnd++,c&&(j.providerIndexes+=1048576),i.push(qe),y.push(qe)):(i[tt]=qe,y[tt]=qe)}else{const qe=Tv(C,n,ee+Re,we),tt=Tv(C,n,ee,ee+Re),Mt=qe>=0&&i[qe],gt=tt>=0&&i[tt];if(c&&!gt||!c&&!Mt){ls(gi(j,y),f,C);const En=function(t,n,i,o,c){const f=new Fn(t,i,sg);return f.multi=[],f.index=n,f.componentProviders=0,AE(f,c,o&&!i),f}(c?rw:nw,i.length,c,o,M);!c&&gt&&(i[tt].providerFactory=En),Dv(f,t,n.length,0),n.push(C),j.directiveStart++,j.directiveEnd++,c&&(j.providerIndexes+=1048576),i.push(En),y.push(En)}else Dv(f,t,qe>-1?qe:tt,AE(i[c?tt:qe],M,!c&&o));!c&&o&&gt&&i[tt].componentProviders++}}}function Dv(t,n,i,o){const c=sc(n);if(c||function(t){return!!t.useClass}(n)){const y=(n.useClass||n).prototype.ngOnDestroy;if(y){const C=t.destroyHooks||(t.destroyHooks=[]);if(!c&&n.multi){const M=C.indexOf(i);-1===M?C.push(i,[o,y]):C[M+1].push(o,y)}else C.push(i,y)}}}function AE(t,n,i){return i&&t.componentProviders++,t.multi.push(n)-1}function Tv(t,n,i,o){for(let c=i;c<o;c++)if(n[c]===t)return c;return-1}function nw(t,n,i,o){return Sv(this.multi,[])}function rw(t,n,i,o){const c=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,C=U(i,i[1],this.providerFactory.index,o);f=C.slice(0,y),Sv(c,f);for(let M=y;M<C.length;M++)f.push(C[M])}else f=[],Sv(c,f);return f}function Sv(t,n){for(let i=0;i<t.length;i++)n.push((0,t[i])());return n}function xE(t,n=[]){return i=>{i.providersResolver=(o,c)=>function(t,n,i){const o=_r();if(o.firstCreatePass){const c=jn(t);wv(i,o.data,o.blueprint,c,!0),wv(n,o.data,o.blueprint,c,!1)}}(o,c?c(t):t,n)}}class RE{}const OE="ngComponent";class ow{resolveComponentFactory(n){throw function(t){const n=Error(`No component factory found for ${re(t)}. Did you add it to @NgModule.entryComponents?`);return n[OE]=t,n}(n)}}let Em=(()=>{class t{}return t.NULL=new ow,t})();function F_(...t){}function Im(t,n){return new qd($(t,n))}const uw=function(){return Im(Hi(),Yt())};let qd=(()=>{class t{constructor(i){this.nativeElement=i}}return t.__NG_ELEMENT_ID__=uw,t})();function NE(t){return t instanceof qd?t.nativeElement:t}class L_{}let cw=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>hw(),t})();const hw=function(){const t=Yt(),i=an(Hi().index,t);return function(t){return t[11]}(yt(i)?i:t)};let xv=(()=>{class t{}return t.\u0275prov=Lt({token:t,providedIn:"root",factory:()=>null}),t})();class PE{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const Rv=new PE("12.2.16");class kE{constructor(){}supports(n){return Ph(n)}create(n){return new mw(n)}}const gw=(t,n)=>n;class mw{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||gw}forEachItem(n){let i;for(i=this._itHead;null!==i;i=i._next)n(i)}forEachOperation(n){let i=this._itHead,o=this._removalsHead,c=0,f=null;for(;i||o;){const y=!o||i&&i.currentIndex<LE(o,c,f)?i:o,C=LE(y,c,f),M=y.currentIndex;if(y===o)c--,o=o._nextRemoved;else if(i=i._next,null==y.previousIndex)c++;else{f||(f=[]);const j=C-c,ee=M-c;if(j!=ee){for(let Re=0;Re<j;Re++){const qe=Re<f.length?f[Re]:f[Re]=0,tt=qe+Re;ee<=tt&&tt<j&&(f[Re]=qe+1)}f[y.previousIndex]=ee-j}}C!==M&&n(y,C,M)}}forEachPreviousItem(n){let i;for(i=this._previousItHead;null!==i;i=i._nextPrevious)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachMovedItem(n){let i;for(i=this._movesHead;null!==i;i=i._nextMoved)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}forEachIdentityChange(n){let i;for(i=this._identityChangesHead;null!==i;i=i._nextIdentityChange)n(i)}diff(n){if(null==n&&(n=[]),!Ph(n))throw new Error(`Error trying to diff '${re(n)}'. Only arrays and iterables are allowed`);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let c,f,y,i=this._itHead,o=!1;if(Array.isArray(n)){this.length=n.length;for(let C=0;C<this.length;C++)f=n[C],y=this._trackByFn(C,f),null!==i&&Object.is(i.trackById,y)?(o&&(i=this._verifyReinsertion(i,f,y,C)),Object.is(i.item,f)||this._addIdentityChange(i,f)):(i=this._mismatch(i,f,y,C),o=!0),i=i._next}else c=0,function(t,n){if(Array.isArray(t))for(let i=0;i<t.length;i++)n(t[i]);else{const i=t[cc()]();let o;for(;!(o=i.next()).done;)n(o.value)}}(n,C=>{y=this._trackByFn(c,C),null!==i&&Object.is(i.trackById,y)?(o&&(i=this._verifyReinsertion(i,C,y,c)),Object.is(i.item,C)||this._addIdentityChange(i,C)):(i=this._mismatch(i,C,y,c),o=!0),i=i._next,c++}),this.length=c;return this._truncate(i),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,i,o,c){let f;return null===n?f=this._itTail:(f=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._reinsertAfter(n,f,c)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(o,c))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._moveAfter(n,f,c)):n=this._addAfter(new yw(i,o),f,c),n}_verifyReinsertion(n,i,o,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==f?n=this._reinsertAfter(f,n._prev,c):n.currentIndex!=c&&(n.currentIndex=c,this._addToMoves(n,c)),n}_truncate(n){for(;null!==n;){const i=n._next;this._addToRemovals(this._unlink(n)),n=i}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,i,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const c=n._prevRemoved,f=n._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(n,i,o),this._addToMoves(n,o),n}_moveAfter(n,i,o){return this._unlink(n),this._insertAfter(n,i,o),this._addToMoves(n,o),n}_addAfter(n,i,o){return this._insertAfter(n,i,o),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,i,o){const c=null===i?this._itHead:i._next;return n._next=c,n._prev=i,null===c?this._itTail=n:c._prev=n,null===i?this._itHead=n:i._next=n,null===this._linkedRecords&&(this._linkedRecords=new FE),this._linkedRecords.put(n),n.currentIndex=o,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const i=n._prev,o=n._next;return null===i?this._itHead=o:i._next=o,null===o?this._itTail=i:o._prev=i,n}_addToMoves(n,i){return n.previousIndex===i||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new FE),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,i){return n.item=i,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class yw{constructor(n,i){this.item=n,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class _w{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,i){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===i||i<=o.currentIndex)&&Object.is(o.trackById,n))return o;return null}remove(n){const i=n._prevDup,o=n._nextDup;return null===i?this._head=o:i._nextDup=o,null===o?this._tail=i:o._prevDup=i,null===this._head}}class FE{constructor(){this.map=new Map}put(n){const i=n.trackById;let o=this.map.get(i);o||(o=new _w,this.map.set(i,o)),o.add(n)}get(n,i){const c=this.map.get(n);return c?c.get(n,i):null}remove(n){const i=n.trackById;return this.map.get(i).remove(n)&&this.map.delete(i),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function LE(t,n,i){const o=t.previousIndex;if(null===o)return o;let c=0;return i&&o<i.length&&(c=i[o]),o+n+c}class VE{constructor(){}supports(n){return n instanceof Map||kh(n)}create(){return new vw}}class vw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let i;for(i=this._mapHead;null!==i;i=i._next)n(i)}forEachPreviousItem(n){let i;for(i=this._previousMapHead;null!==i;i=i._nextPrevious)n(i)}forEachChangedItem(n){let i;for(i=this._changesHead;null!==i;i=i._nextChanged)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}diff(n){if(n){if(!(n instanceof Map||kh(n)))throw new Error(`Error trying to diff '${re(n)}'. Only maps and objects are allowed`)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(n,(o,c)=>{if(i&&i.key===c)this._maybeAddToChanges(i,o),this._appendAfter=i,i=i._next;else{const f=this._getOrCreateRecordForKey(c,o);i=this._insertBeforeOrAppend(i,f)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let o=i;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,i){if(n){const o=n._prev;return i._next=n,i._prev=o,n._prev=i,o&&(o._next=i),n===this._mapHead&&(this._mapHead=i),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(n,i){if(this._records.has(n)){const c=this._records.get(n);this._maybeAddToChanges(c,i);const f=c._prev,y=c._next;return f&&(f._next=y),y&&(y._prev=f),c._next=null,c._prev=null,c}const o=new Ew(n);return this._records.set(n,o),o.currentValue=i,this._addToAdditions(o),o}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,i){Object.is(i,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=i,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,i){n instanceof Map?n.forEach(i):Object.keys(n).forEach(o=>i(n[o],o))}}class Ew{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function BE(){return new V_([new kE])}let V_=(()=>{class t{constructor(i){this.factories=i}static create(i,o){if(null!=o){const c=o.factories.slice();i=i.concat(c)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||BE()),deps:[[t,new Ua,new Da]]}}find(i){const o=this.factories.find(c=>c.supports(i));if(null!=o)return o;throw new Error(`Cannot find a differ supporting object '${i}' of type '${function(t){return t.name||typeof t}(i)}'`)}}return t.\u0275prov=Lt({token:t,providedIn:"root",factory:BE}),t})();function $E(){return new B_([new VE])}let B_=(()=>{class t{constructor(i){this.factories=i}static create(i,o){if(o){const c=o.factories.slice();i=i.concat(c)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||$E()),deps:[[t,new Ua,new Da]]}}find(i){const o=this.factories.find(c=>c.supports(i));if(o)return o;throw new Error(`Cannot find a differ supporting object '${i}'`)}}return t.\u0275prov=Lt({token:t,providedIn:"root",factory:$E}),t})();function $_(t,n,i,o,c=!1){for(;null!==i;){const f=n[i.index];if(null!==f&&o.push(Ue(f)),ft(f))for(let C=10;C<f.length;C++){const M=f[C],j=M[1].firstChild;null!==j&&$_(M[1],M,j,o)}const y=i.type;if(8&y)$_(t,n,i.child,o);else if(32&y){const C=rf(i,n);let M;for(;M=C();)o.push(M)}else if(16&y){const C=cl(n,i);if(Array.isArray(C))o.push(...C);else{const M=ys(n[16]);$_(M[1],M,C,o,!0)}}i=c?i.projectionNext:i.next}return o}class Ty{constructor(n,i){this._lView=n,this._cdRefInjectingView=i,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,i=n[1];return $_(i,n,i.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(ft(n)){const i=n[8],o=i?i.indexOf(this):-1;o>-1&&(ch(n,o),yo(i,o))}this._attachedToViewContainer=!1}Fc(this._lView[1],this._lView)}onDestroy(n){bf(this._lView[1],this._lView,null,n)}markForCheck(){Fu(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Gc(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,n,i){Io(!0);try{Gc(t,n,i)}finally{Io(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var n;this._appRef=null,Dd(this._lView[1],n=this._lView,n[11],2,null,null)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=n}}class bw extends Ty{constructor(n){super(n),this._view=n}detectChanges(){Zg(this._view)}checkNoChanges(){!function(t){Io(!0);try{Zg(t)}finally{Io(!1)}}(this._view)}get context(){return null}}const ww=function(t){return function(t,n,i){if(An(t)&&!i){const o=an(t.index,n);return new Ty(o,o)}return 47&t.type?new Ty(n[16],n):null}(Hi(),Yt(),16==(16&t))};let Dw=(()=>{class t{}return t.__NG_ELEMENT_ID__=ww,t})();const Aw=[new VE],Rw=new V_([new kE]),Mw=new B_(Aw),Nw=function(){return U_(Hi(),Yt())};let Sy=(()=>{class t{}return t.__NG_ELEMENT_ID__=Nw,t})();const Pw=Sy,kw=class extends Pw{constructor(n,i,o){super(),this._declarationLView=n,this._declarationTContainer=i,this.elementRef=o}createEmbeddedView(n){const i=this._declarationTContainer.tViews,o=Ad(this._declarationLView,i,n,16,null,i.declTNode,null,null,null,null);o[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(o[19]=f.createEmbeddedView(i)),Md(i,o,n),new Ty(o)}};function U_(t,n){return 4&t.type?new kw(n,t,Im(t,n)):null}class ug{}class UE{}const Vw=function(){return WE(Hi(),Yt())};let j_=(()=>{class t{}return t.__NG_ELEMENT_ID__=Vw,t})();const $w=j_,jE=class extends $w{constructor(n,i,o){super(),this._lContainer=n,this._hostTNode=i,this._hostLView=o}get element(){return Im(this._hostTNode,this._hostLView)}get injector(){return new pe(this._hostTNode,this._hostLView)}get parentInjector(){const n=aa(this._hostTNode,this._hostLView);if(Ql(n)){const i=ur(n,this._hostLView),o=$s(n);return new pe(i[1].data[o+8],i)}return new pe(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const i=HE(this._lContainer);return null!==i&&i[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,i,o){const c=n.createEmbeddedView(i||{});return this.insert(c,o),c}createComponent(n,i,o,c,f){const y=o||this.parentInjector;if(!f&&null==n.ngModule&&y){const M=y.get(ug,null);M&&(f=M)}const C=n.create(y,c,void 0,f);return this.insert(C.hostView,i),C}insert(n,i){const o=n._lView,c=o[1];if(ft(o[3])){const ee=this.indexOf(n);if(-1!==ee)this.detach(ee);else{const we=o[3],Re=new jE(we,we[6],we[3]);Re.detach(Re.indexOf(n))}}const f=this._adjustIndex(i),y=this._lContainer;!function(t,n,i,o){const c=10+o,f=i.length;o>0&&(i[c-1][4]=n),o<f-10?(n[4]=i[c],Ko(i,10+o,n)):(i.push(n),n[4]=null),n[3]=i;const y=n[17];null!==y&&i!==y&&function(t,n){const i=t[9];n[16]!==n[3][3][16]&&(t[2]=!0),null===i?t[9]=[n]:i.push(n)}(y,n);const C=n[19];null!==C&&C.insertView(t),n[2]|=128}(c,o,y,f);const C=wd(f,y),M=o[11],j=du(M,y[7]);return null!==j&&function(t,n,i,o,c,f){o[0]=c,o[6]=n,Dd(t,o,i,1,c,f)}(c,y[6],M,o,j,C),n.attachToViewContainerRef(),Ko(Mv(y),f,n),n}move(n,i){return this.insert(n,i)}indexOf(n){const i=HE(this._lContainer);return null!==i?i.indexOf(n):-1}remove(n){const i=this._adjustIndex(n,-1),o=ch(this._lContainer,i);o&&(yo(Mv(this._lContainer),i),Fc(o[1],o))}detach(n){const i=this._adjustIndex(n,-1),o=ch(this._lContainer,i);return o&&null!=yo(Mv(this._lContainer),i)?new Ty(o):null}_adjustIndex(n,i=0){return null==n?this.length+i:n}};function HE(t){return t[8]}function Mv(t){return t[8]||(t[8]=[])}function WE(t,n){let i;const o=n[t.index];if(ft(o))i=o;else{let c;if(8&t.type)c=Ue(o);else{const f=n[11];c=f.createComment("");const y=$(t,n);Bc(f,du(f,y),c,function(t,n){return G(t)?t.nextSibling(n):n.nextSibling}(f,y),!1)}n[t.index]=i=Pp(o,n,c,t),rc(n,i)}return new jE(i,t,n)}const Dm={};class cI extends Em{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const i=kn(n);return new hI(i,this.ngModule)}}function dI(t){const n=[];for(let i in t)t.hasOwnProperty(i)&&n.push({propName:t[i],templateName:i});return n}const FD=new Si("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>yg});class hI extends RE{constructor(n,i){super(),this.componentDef=n,this.ngModule=i,this.componentType=n.type,this.selector=n.selectors.map(tc).join(","),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!i}get inputs(){return dI(this.componentDef.inputs)}get outputs(){return dI(this.componentDef.outputs)}create(n,i,o,c){const f=(c=c||this.ngModule)?function(t,n){return{get:(i,o,c)=>{const f=t.get(i,Dm,c);return f!==Dm||o===Dm?f:n.get(i,o,c)}}}(n,c.injector):n,y=f.get(L_,K),C=f.get(xv,null),M=y.createRenderer(null,this.componentDef),j=this.componentDef.selectors[0][0]||"div",ee=o?function(t,n,i){if(G(t))return t.selectRootElement(n,i===dn.ShadowDom);let o="string"==typeof n?t.querySelector(n):n;return o.textContent="",o}(M,o,this.componentDef.encapsulation):cu(y.createRenderer(null,this.componentDef),j,function(t){const n=t.toLowerCase();return"svg"===n?"http://www.w3.org/2000/svg":"math"===n?"http://www.w3.org/1998/MathML/":null}(j)),we=this.componentDef.onPush?576:528,Re=function(t,n){return{components:[],scheduler:t||yg,clean:Xg,playerHandler:n||null,flags:0}}(),qe=Ef(0,null,null,1,0,null,null,null,null,null),tt=Ad(null,qe,Re,we,null,null,y,M,C,f);let Mt,gt;Di(tt);try{const En=function(t,n,i,o,c,f){const y=i[1];i[20]=t;const M=xd(y,20,2,"#host",null),j=M.mergedAttrs=n.hostAttrs;null!==j&&(kd(M,j,!0),null!==t&&(Nl(c,t,j),null!==M.classes&&dl(c,t,M.classes),null!==M.styles&&df(c,t,M.styles)));const ee=o.createRenderer(t,n),we=Ad(i,xp(n),null,n.onPush?64:16,i[20],M,o,ee,f||null,null);return y.firstCreatePass&&(ls(gi(M,i),y,n.type),Pd(y,M),Ym(M,i.length,1)),rc(i,we),i[20]=we}(ee,this.componentDef,tt,y,M);if(ee)if(o)Nl(M,ee,["ng-version",Rv.full]);else{const{attrs:Kt,classes:Er}=function(t){const n=[],i=[];let o=1,c=2;for(;o<t.length;){let f=t[o];if("string"==typeof f)2===c?""!==f&&n.push(f,t[++o]):8===c&&i.push(f);else{if(!hl(c))break;c=f}o++}return{attrs:n,classes:i}}(this.componentDef.selectors[0]);Kt&&Nl(M,ee,Kt),Er&&Er.length>0&&dl(M,ee,Er.join(" "))}if(gt=ue(qe,20),void 0!==i){const Kt=gt.projection=[];for(let Er=0;Er<this.ngContentSelectors.length;Er++){const Wr=i[Er];Kt.push(null!=Wr?Array.from(Wr):null)}}Mt=function(t,n,i,o,c){const f=i[1],y=function(t,n,i){const o=Hi();t.firstCreatePass&&(i.providersResolver&&i.providersResolver(i),Wg(t,o,n,Rd(t,n,1,null),i));const c=U(n,t,o.directiveStart,o);Us(c,n);const f=$(o,n);return f&&Us(f,n),c}(f,i,n);if(o.components.push(y),t[8]=y,c&&c.forEach(M=>M(y,n)),n.contentQueries){const M=Hi();n.contentQueries(1,y,M.directiveStart)}const C=Hi();return!f.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(D(C.index),Rp(i[1],C,0,C.directiveStart,C.directiveEnd,n),Op(n,y)),y}(En,this.componentDef,tt,Re,[lm]),Md(qe,tt,null)}finally{nl()}return new BD(this.componentType,Mt,Im(gt,tt),tt,gt)}}class BD extends class{}{constructor(n,i,o,c,f){super(),this.location=o,this._rootLView=c,this._tNode=f,this.instance=i,this.hostView=this.changeDetectorRef=new bw(c),this.componentType=n}get injector(){return new pe(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}const Tm=new Map;class jD extends ug{constructor(n,i){super(),this._parent=i,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new cI(this);const o=pr(n),c=n[mn]||null;c&&Iv(c),this._bootstrapComponents=wl(o.bootstrap),this._r3Injector=Af(n,i,[{provide:ug,useValue:this},{provide:Em,useValue:this.componentFactoryResolver}],re(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,i=_s.THROW_IF_NOT_FOUND,o=gn.Default){return n===_s||n===ug||n===ic?this:this._r3Injector.get(n,i,o)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Wv extends UE{constructor(n){super(),this.moduleType=n,null!==pr(n)&&function(t){const n=new Set;!function i(o){const c=pr(o,!0),f=c.id;null!==f&&(function(t,n,i){if(n&&n!==i)throw new Error(`Duplicate module registered for ${t} - ${re(n)} vs ${re(n.name)}`)}(f,Tm.get(f),o),Tm.set(f,o));const y=wl(c.imports);for(const C of y)n.has(C)||(n.add(C),i(C))}(t)}(n)}create(n){return new jD(this.moduleType,n)}}function Gv(t){return n=>{setTimeout(t,void 0,n)}}const Yd=class extends E.xQ{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,i,o){var c,f,y;let C=n,M=i||(()=>null),j=o;if(n&&"object"==typeof n){const we=n;C=null===(c=we.next)||void 0===c?void 0:c.bind(we),M=null===(f=we.error)||void 0===f?void 0:f.bind(we),j=null===(y=we.complete)||void 0===y?void 0:y.bind(we)}this.__isAsync&&(M=Gv(M),C&&(C=Gv(C)),j&&(j=Gv(j)));const ee=super.subscribe({next:C,error:M,complete:j});return n instanceof O.w&&n.add(ee),ee}};function aT(){return this._results[cc()]()}class q_{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const i=cc(),o=q_.prototype;o[i]||(o[i]=aT)}get changes(){return this._changes||(this._changes=new Yd)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,i){return this._results.reduce(n,i)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,i){const o=this;o.dirty=!1;const c=cs(n);(this._changesDetected=!function(t,n,i){if(t.length!==n.length)return!1;for(let o=0;o<t.length;o++){let c=t[o],f=n[o];if(i&&(c=i(c),f=i(f)),f!==c)return!1}return!0}(o._results,c,i))&&(o._results=c,o.length=c.length,o.last=c[this.length-1],o.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class zv{constructor(n){this.queryList=n,this.matches=null}clone(){return new zv(this.queryList)}setDirty(){this.queryList.setDirty()}}class qv{constructor(n=[]){this.queries=n}createEmbeddedView(n){const i=n.queries;if(null!==i){const o=null!==n.contentQueries?n.contentQueries[0]:i.length,c=[];for(let f=0;f<o;f++){const y=i.getByIndex(f);c.push(this.queries[y.indexInDeclarationView].clone())}return new qv(c)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let i=0;i<this.queries.length;i++)null!==AI(n,i).matches&&this.queries[i].setDirty()}}class EI{constructor(n,i,o=null){this.predicate=n,this.flags=i,this.read=o}}class Yv{constructor(n=[]){this.queries=n}elementStart(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(n,i)}elementEnd(n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(n)}embeddedTView(n){let i=null;for(let o=0;o<this.length;o++){const c=null!==i?i.length:0,f=this.getByIndex(o).embeddedTView(n,c);f&&(f.indexInDeclarationView=o,null!==i?i.push(f):i=[f])}return null!==i?new Yv(i):null}template(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].template(n,i)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Kv{constructor(n,i=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(n,i){this.isApplyingToNode(i)&&this.matchTNode(n,i)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,i){this.elementStart(n,i)}embeddedTView(n,i){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,i),new Kv(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const i=this._declarationNodeIndex;let o=n.parent;for(;null!==o&&8&o.type&&o.index!==i;)o=o.parent;return i===(null!==o?o.index:-1)}return this._appliesToNextNode}matchTNode(n,i){const o=this.metadata.predicate;if(Array.isArray(o))for(let c=0;c<o.length;c++){const f=o[c];this.matchTNodeWithReadOption(n,i,cT(i,f)),this.matchTNodeWithReadOption(n,i,S(i,n,f,!1,!1))}else o===Sy?4&i.type&&this.matchTNodeWithReadOption(n,i,-1):this.matchTNodeWithReadOption(n,i,S(i,n,o,!1,!1))}matchTNodeWithReadOption(n,i,o){if(null!==o){const c=this.metadata.read;if(null!==c)if(c===qd||c===j_||c===Sy&&4&i.type)this.addMatch(i.index,-2);else{const f=S(i,n,c,!1,!1);null!==f&&this.addMatch(i.index,f)}else this.addMatch(i.index,o)}}addMatch(n,i){null===this.matches?this.matches=[n,i]:this.matches.push(n,i)}}function cT(t,n){const i=t.localNames;if(null!==i)for(let o=0;o<i.length;o+=2)if(i[o]===n)return i[o+1];return null}function hT(t,n,i,o){return-1===i?function(t,n){return 11&t.type?Im(t,n):4&t.type?U_(t,n):null}(n,t):-2===i?function(t,n,i){return i===qd?Im(n,t):i===Sy?U_(n,t):i===j_?WE(n,t):void 0}(t,n,o):U(t,t[1],i,n)}function II(t,n,i,o){const c=n[19].queries[o];if(null===c.matches){const f=t.data,y=i.matches,C=[];for(let M=0;M<y.length;M+=2){const j=y[M];C.push(j<0?null:hT(n,f[j],y[M+1],i.metadata.read))}c.matches=C}return c.matches}function Zv(t,n,i,o){const c=t.queries.getByIndex(i),f=c.matches;if(null!==f){const y=II(t,n,c,i);for(let C=0;C<f.length;C+=2){const M=f[C];if(M>0)o.push(y[C/2]);else{const j=f[C+1],ee=n[-M];for(let we=10;we<ee.length;we++){const Re=ee[we];Re[17]===Re[3]&&Zv(Re[1],Re,j,o)}if(null!==ee[9]){const we=ee[9];for(let Re=0;Re<we.length;Re++){const qe=we[Re];Zv(qe[1],qe,j,o)}}}}}return o}function bI(t){const n=Yt(),i=_r(),o=Vo();oo(o+1);const c=AI(i,o);if(t.dirty&&Zn(n)===(2==(2&c.metadata.flags))){if(null===c.matches)t.reset([]);else{const f=c.crossesNgTemplate?Zv(i,n,o,[]):II(i,n,c,o);t.reset(f,NE),t.notifyOnChanges()}return!0}return!1}function CI(t,n,i){const o=_r();o.firstCreatePass&&(SI(o,new EI(t,n,i),-1),2==(2&n)&&(o.staticViewQueries=!0)),TI(o,Yt(),n)}function wI(t,n,i,o){const c=_r();if(c.firstCreatePass){const f=Hi();SI(c,new EI(n,i,o),f.index),function(t,n){const i=t.contentQueries||(t.contentQueries=[]);n!==(i.length?i[i.length-1]:-1)&&i.push(t.queries.length-1,n)}(c,t),2==(2&i)&&(c.staticContentQueries=!0)}TI(c,Yt(),i)}function DI(){return t=Yt(),n=Vo(),t[19].queries[n].queryList;var t,n}function TI(t,n,i){const o=new q_(4==(4&i));bf(t,n,o,o.destroy),null===n[19]&&(n[19]=new qv),n[19].queries.push(new zv(o))}function SI(t,n,i){null===t.queries&&(t.queries=new Yv),t.queries.track(new Kv(n,i))}function AI(t,n){return t.queries.getByIndex(n)}const PT=Qr("Output",t=>({bindingPropertyName:t})),kT=Qr("HostListener",(t,n)=>({eventName:t,args:n})),n0=new Si("Application Initializer");let Am=(()=>{class t{constructor(i){this.appInits=i,this.resolve=F_,this.reject=F_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,c)=>{this.resolve=o,this.reject=c})}runInitializers(){if(this.initialized)return;const i=[],o=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const f=this.appInits[c]();if(ym(f))i.push(f);else if(og(f)){const y=new Promise((C,M)=>{f.subscribe({complete:C,error:M})});i.push(y)}}Promise.all(i).then(()=>{o()}).catch(c=>{this.reject(c)}),0===i.length&&o(),this.initialized=!0}}return t.\u0275fac=function(i){return new(i||t)(wi(n0,8))},t.\u0275prov=Lt({token:t,factory:t.\u0275fac}),t})();const zI=new Si("AppId"),GT={provide:zI,useFactory:function(){return`${r0()}${r0()}${r0()}`},deps:[]};function r0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const qI=new Si("Platform Initializer"),YI=new Si("Platform ID"),KI=new Si("appBootstrapListener");let ZI=(()=>{class t{log(i){console.log(i)}warn(i){console.warn(i)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=Lt({token:t,factory:t.\u0275fac}),t})();const Z_=new Si("LocaleId"),QI=new Si("DefaultCurrencyCode");class qT{constructor(n,i){this.ngModuleFactory=n,this.componentFactories=i}}const s0=function(t){return new Wv(t)},YT=s0,KT=function(t){return Promise.resolve(s0(t))},XI=function(t){const n=s0(t),o=wl(pr(t).declarations).reduce((c,f)=>{const y=kn(f);return y&&c.push(new hI(y)),c},[]);return new qT(n,o)},ZT=XI,QT=function(t){return Promise.resolve(XI(t))};let By=(()=>{class t{constructor(){this.compileModuleSync=YT,this.compileModuleAsync=KT,this.compileModuleAndAllComponentsSync=ZT,this.compileModuleAndAllComponentsAsync=QT}clearCache(){}clearCacheFor(i){}getModuleId(i){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=Lt({token:t,factory:t.\u0275fac}),t})();const eS=(()=>Promise.resolve(0))();function o0(t){"undefined"==typeof Zone?eS.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class $u{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Yd(!1),this.onMicrotaskEmpty=new Yd(!1),this.onStable=new Yd(!1),this.onError=new Yd(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!o&&i,c.shouldCoalesceRunChangeDetection=o,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function(){let t=Vn.requestAnimationFrame,n=Vn.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&n){const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i);const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function(t){const n=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Vn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,l0(t),t.isCheckStableRunning=!0,a0(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),l0(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,o,c,f,y,C)=>{try{return JI(t),i.invokeTask(c,f,y,C)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||t.shouldCoalesceRunChangeDetection)&&n(),eb(t)}},onInvoke:(i,o,c,f,y,C,M)=>{try{return JI(t),i.invoke(c,f,y,C,M)}finally{t.shouldCoalesceRunChangeDetection&&n(),eb(t)}},onHasTask:(i,o,c,f)=>{i.hasTask(c,f),o===c&&("microTask"==f.change?(t._hasPendingMicrotasks=f.microTask,l0(t),a0(t)):"macroTask"==f.change&&(t.hasPendingMacrotasks=f.macroTask))},onHandleError:(i,o,c,f)=>(i.handleError(c,f),t.runOutsideAngular(()=>t.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!$u.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if($u.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,i,o){return this._inner.run(n,i,o)}runTask(n,i,o,c){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+c,n,nS,F_,F_);try{return f.runTask(y,i,o)}finally{f.cancelTask(y)}}runGuarded(n,i,o){return this._inner.runGuarded(n,i,o)}runOutsideAngular(n){return this._outer.run(n)}}const nS={};function a0(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function l0(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function JI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function eb(t){t._nesting--,a0(t)}class sS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Yd,this.onMicrotaskEmpty=new Yd,this.onStable=new Yd,this.onError=new Yd}run(n,i,o){return n.apply(i,o)}runGuarded(n,i,o){return n.apply(i,o)}runOutsideAngular(n){return n()}runTask(n,i,o,c){return n.apply(i,o)}}let tb=(()=>{class t{constructor(i){this._ngZone=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{$u.assertNotInAngularZone(),o0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())o0(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(i)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,o,c){let f=-1;o&&o>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),i(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:i,timeoutId:f,updateCb:c})}whenStable(i,o,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,o,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(i,o,c){return[]}}return t.\u0275fac=function(i){return new(i||t)(wi($u))},t.\u0275prov=Lt({token:t,factory:t.\u0275fac}),t})(),nb=(()=>{class t{constructor(){this._applications=new Map,u0.addToWindow(this)}registerApplication(i,o){this._applications.set(i,o)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,o=!0){return u0.findTestabilityInTree(this,i,o)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=Lt({token:t,factory:t.\u0275fac}),t})();class oS{addToWindow(n){}findTestabilityInTree(n,i,o){return null}}function aS(t){u0=t}let u0=new oS,rb=!0,ib=!1;function c0(){return ib=!0,rb}function lS(){if(ib)throw new Error("Cannot enable prod mode after platform setup.");rb=!1}let sd;const sb=new Si("AllowMultipleToken");class gS{constructor(n,i){this.name=n,this.token=i}}function ob(t,n,i=[]){const o=`Platform: ${n}`,c=new Si(o);return(f=[])=>{let y=ab();if(!y||y.injector.get(sb,!1))if(t)t(i.concat(f).concat({provide:c,useValue:!0}));else{const C=i.concat(f).concat({provide:c,useValue:!0},{provide:Fd,useValue:"platform"});!function(t){if(sd&&!sd.destroyed&&!sd.injector.get(sb,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");sd=t.get(lb);const n=t.get(qI,null);n&&n.forEach(i=>i())}(_s.create({providers:C,name:o}))}return function(t){const n=ab();if(!n)throw new Error("No platform exists!");if(!n.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return n}(c)}}function ab(){return sd&&!sd.destroyed?sd:null}let lb=(()=>{class t{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,o){const C=function(t,n){let i;return i="noop"===t?new sS:("zone.js"===t?void 0:t)||new $u({enableLongStackTrace:c0(),shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),i}(o?o.ngZone:void 0,{ngZoneEventCoalescing:o&&o.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:o&&o.ngZoneRunCoalescing||!1}),M=[{provide:$u,useValue:C}];return C.run(()=>{const j=_s.create({providers:M,parent:this.injector,name:i.moduleType.name}),ee=i.create(j),we=ee.injector.get(Xs,null);if(!we)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return C.runOutsideAngular(()=>{const Re=C.onError.subscribe({next:qe=>{we.handleError(qe)}});ee.onDestroy(()=>{d0(this._modules,ee),Re.unsubscribe()})}),function(t,n,i){try{const o=i();return ym(o)?o.catch(c=>{throw n.runOutsideAngular(()=>t.handleError(c)),c}):o}catch(o){throw n.runOutsideAngular(()=>t.handleError(o)),o}}(we,C,()=>{const Re=ee.injector.get(Am);return Re.runInitializers(),Re.donePromise.then(()=>(Iv(ee.injector.get(Z_,M_)||M_),this._moduleDoBootstrap(ee),ee))})})}bootstrapModule(i,o=[]){const c=ub({},o);return function(t,n,i){const o=new Wv(i);return Promise.resolve(o)}(0,0,i).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(i){const o=i.injector.get($y);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(c=>o.bootstrap(c));else{if(!i.instance.ngDoBootstrap)throw new Error(`The module ${re(i.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);i.instance.ngDoBootstrap(o)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(i){return new(i||t)(wi(_s))},t.\u0275prov=Lt({token:t,factory:t.\u0275fac}),t})();function ub(t,n){return Array.isArray(n)?n.reduce(ub,t):Object.assign(Object.assign({},t),n)}let $y=(()=>{class t{constructor(i,o,c,f,y){this._zone=i,this._injector=o,this._exceptionHandler=c,this._componentFactoryResolver=f,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const C=new ne.y(j=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{j.next(this._stable),j.complete()})}),M=new ne.y(j=>{let ee;this._zone.runOutsideAngular(()=>{ee=this._zone.onStable.subscribe(()=>{$u.assertNotInAngularZone(),o0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,j.next(!0))})})});const we=this._zone.onUnstable.subscribe(()=>{$u.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{j.next(!1)}))});return()=>{ee.unsubscribe(),we.unsubscribe()}});this.isStable=(0,oe.T)(C,M.pipe((0,ae.B)()))}bootstrap(i,o){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let c;c=i instanceof RE?i:this._componentFactoryResolver.resolveComponentFactory(i),this.componentTypes.push(c.componentType);const f=function(t){return t.isBoundToModule}(c)?void 0:this._injector.get(ug),C=c.create(_s.NULL,[],o||c.selector,f),M=C.location.nativeElement,j=C.injector.get(tb,null),ee=j&&C.injector.get(nb);return j&&ee&&ee.registerApplication(M,j),C.onDestroy(()=>{this.detachView(C.hostView),d0(this.components,C),ee&&ee.unregisterApplication(M)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(i))}finally{this._runningTick=!1}}attachView(i){const o=i;this._views.push(o),o.attachToAppRef(this)}detachView(i){const o=i;d0(this._views,o),o.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i),this._injector.get(KI,[]).concat(this._bootstrapListeners).forEach(c=>c(i))}ngOnDestroy(){this._views.slice().forEach(i=>i.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(i){return new(i||t)(wi($u),wi(_s),wi(Xs),wi(Em),wi(Am))},t.\u0275prov=Lt({token:t,factory:t.\u0275fac}),t})();function d0(t,n){const i=t.indexOf(n);i>-1&&t.splice(i,1)}class IS{}class CS{}const wS={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let DS=(()=>{class t{constructor(i,o){this._compiler=i,this._config=o||wS}load(i){return this.loadAndCompile(i)}loadAndCompile(i){let[o,c]=i.split("#");return void 0===c&&(c="default"),B(8255)(o).then(f=>f[c]).then(f=>fb(f,o,c)).then(f=>this._compiler.compileModuleAsync(f))}loadFactory(i){let[o,c]=i.split("#"),f="NgFactory";return void 0===c&&(c="default",f=""),B(8255)(this._config.factoryPathPrefix+o+this._config.factoryPathSuffix).then(y=>y[c+f]).then(y=>fb(y,o,c))}}return t.\u0275fac=function(i){return new(i||t)(wi(By),wi(CS,8))},t.\u0275prov=Lt({token:t,factory:t.\u0275fac}),t})();function fb(t,n,i){if(!t)throw new Error(`Cannot find '${i}' in '${n}'`);return t}const NS=function(t){return null},kS=ob(null,"core",[{provide:YI,useValue:"unknown"},{provide:lb,deps:[_s]},{provide:nb,deps:[]},{provide:ZI,deps:[]}]),$S=[{provide:$y,useClass:$y,deps:[$u,_s,Xs,Em,Am]},{provide:FD,deps:[$u],useFactory:function(t){let n=[];return t.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(i){n.push(i)}}},{provide:Am,useClass:Am,deps:[[new Da,n0]]},{provide:By,useClass:By,deps:[]},GT,{provide:V_,useFactory:function(){return Rw},deps:[]},{provide:B_,useFactory:function(){return Mw},deps:[]},{provide:Z_,useFactory:function(t){return Iv(t=t||"undefined"!=typeof $localize&&$localize.locale||M_),t},deps:[[new Ba(Z_),new Da,new Ua]]},{provide:QI,useValue:"USD"}];let jS=(()=>{class t{constructor(i){}}return t.\u0275fac=function(i){return new(i||t)(wi($y))},t.\u0275mod=Oe({type:t}),t.\u0275inj=Bn({providers:$S}),t})()},841:(tn,Ze,B)=>{"use strict";B.d(Ze,{nm:()=>yr});var E=B(2805),ae=(B(7716),B(127),B(2329),B(8239)),Q=B(8026),ve=B(3910),re=B(3854),Te=B(5422);const ie=new Map,me={activated:!1,tokenObservers:[]},Ce={initialized:!1,enabled:!1};function _e(nt){return ie.get(nt)||me}function De(nt,z){ie.set(nt,z)}function Xe(){return Ce}class Je{constructor(z,H,ce,Ie,We){if(this.operation=z,this.retryPolicy=H,this.getWaitDuration=ce,this.lowerBound=Ie,this.upperBound=We,this.pending=null,this.nextErrorWaitInterval=Ie,Ie>We)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(z){var H=this;return(0,ae.Z)(function*(){H.stop();try{H.pending=new re.BH,yield(nt=H.getNextRun(z),new Promise(z=>{setTimeout(z,nt)})),H.pending.resolve(),yield H.pending.promise,H.pending=new re.BH,yield H.operation(),H.pending.resolve(),yield H.pending.promise,H.process(!0).catch(()=>{})}catch(ce){H.retryPolicy(ce)?H.process(!1).catch(()=>{}):H.stop()}var nt})()}getNextRun(z){if(z)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const H=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),H}}}const I=new re.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function pt(nt){if(!_e(nt).activated)throw I.create("use-before-activation",{appName:nt.name})}function lt(nt,z){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,ae.Z)(function*({url:nt,body:z},H){var ce,Ie;const We={"Content-Type":"application/json"},Ge=H.getImmediate({optional:!0});if(Ge){const jn=yield Ge.getHeartbeatsHeader();jn&&(We["X-Firebase-Client"]=jn)}const _t={method:"POST",body:JSON.stringify(z),headers:We};let yt,ft;try{yt=yield fetch(nt,_t)}catch(jn){throw I.create("fetch-network-error",{originalErrorMessage:null===(ce=jn)||void 0===ce?void 0:ce.message})}if(200!==yt.status)throw I.create("fetch-status-error",{httpStatus:yt.status});try{ft=yield yt.json()}catch(jn){throw I.create("fetch-parse-error",{originalErrorMessage:null===(Ie=jn)||void 0===Ie?void 0:Ie.message})}const Qt=ft.ttl.match(/^([\d.]+)(s)$/);if(!Qt||!Qt[2]||isNaN(Number(Qt[1])))throw I.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${ft.ttl}`});const An=1e3*Number(Qt[1]),Pn=Date.now();return{token:ft.token,expireTimeMillis:Pn+An,issuedAtTimeMillis:Pn}})).apply(this,arguments)}function pn(nt,z){const{projectId:H,appId:ce,apiKey:Ie}=nt.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${H}/apps/${ce}:exchangeDebugToken?key=${Ie}`,body:{debug_token:z}}}const ht="firebase-app-check-store";let dt=null;function Rt(){return dt||(dt=new Promise((nt,z)=>{var H;try{const ce=indexedDB.open("firebase-app-check-database",1);ce.onsuccess=Ie=>{nt(Ie.target.result)},ce.onerror=Ie=>{var We;z(I.create("storage-open",{originalErrorMessage:null===(We=Ie.target.error)||void 0===We?void 0:We.message}))},ce.onupgradeneeded=Ie=>{0===Ie.oldVersion&&Ie.target.result.createObjectStore(ht,{keyPath:"compositeKey"})}}catch(ce){z(I.create("storage-open",{originalErrorMessage:null===(H=ce)||void 0===H?void 0:H.message}))}}),dt)}function Nn(){return(Nn=(0,ae.Z)(function*(nt,z){const ce=(yield Rt()).transaction(ht,"readwrite"),We=ce.objectStore(ht).put({compositeKey:nt,value:z});return new Promise((Ge,_t)=>{We.onsuccess=yt=>{Ge()},ce.onerror=yt=>{var ft;_t(I.create("storage-set",{originalErrorMessage:null===(ft=yt.target.error)||void 0===ft?void 0:ft.message}))}})})).apply(this,arguments)}const Tr=new Te.Yd("@firebase/app-check");function cr(nt,z){return(0,re.hl)()?function(nt,z){return function(nt,z){return Nn.apply(this,arguments)}(function(nt){return`${nt.options.appId}-${nt.name}`}(nt),z)}(nt,z).catch(H=>{Tr.warn(`Failed to write token to IndexedDB. Error: ${H}`)}):Promise.resolve()}function lr(){return Xe().enabled}function zr(){return kr.apply(this,arguments)}function kr(){return(kr=(0,ae.Z)(function*(){const nt=Xe();if(nt.enabled&&nt.token)return nt.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Fr={error:"UNKNOWN_ERROR"};function Dr(nt){return re.US.encodeString(JSON.stringify(nt),!1)}function mi(nt){return dr.apply(this,arguments)}function dr(){return(dr=(0,ae.Z)(function*(nt,z=!1){const H=nt.app;pt(H);const ce=_e(H);let We,Ie=ce.token;if(Ie&&!Vn(Ie)&&(De(H,Object.assign(Object.assign({},ce),{token:void 0})),Ie=void 0),!Ie){const yt=yield ce.cachedTokenPromise;yt&&(Vn(yt)?Ie=yt:yield cr(H,void 0))}if(!z&&Ie&&Vn(Ie))return{token:Ie.token};let _t,Ge=!1;if(lr()){ce.exchangeTokenPromise||(ce.exchangeTokenPromise=lt(pn(H,yield zr()),nt.heartbeatServiceProvider).finally(()=>{ce.exchangeTokenPromise=void 0}),Ge=!0);const yt=yield ce.exchangeTokenPromise;return yield cr(H,yt),De(H,Object.assign(Object.assign({},ce),{token:yt})),{token:yt.token}}try{ce.exchangeTokenPromise||(ce.exchangeTokenPromise=ce.provider.getToken().finally(()=>{ce.exchangeTokenPromise=void 0}),Ge=!0),Ie=yield ce.exchangeTokenPromise}catch(yt){"appCheck/throttled"===yt.code?Tr.warn(yt.message):Tr.error(yt),We=yt}return Ie?We?_t=Vn(Ie)?{token:Ie.token,internalError:We}:Sr(We):(_t={token:Ie.token},De(H,Object.assign(Object.assign({},ce),{token:Ie})),yield cr(H,Ie)):_t=Sr(We),Ge&&hn(H,_t),_t})).apply(this,arguments)}function Ct(nt,z){const H=_e(nt),ce=H.tokenObservers.filter(Ie=>Ie.next!==z);0===ce.length&&H.tokenRefresher&&H.tokenRefresher.isRunning()&&H.tokenRefresher.stop(),De(nt,Object.assign(Object.assign({},H),{tokenObservers:ce}))}function ci(nt){const{app:z}=nt,H=_e(z);let ce=H.tokenRefresher;ce||(ce=function(nt){const{app:z}=nt;return new Je((0,ae.Z)(function*(){let ce;if(ce=_e(z).token?yield mi(nt,!0):yield mi(nt),ce.error)throw ce.error;if(ce.internalError)throw ce.internalError}),()=>!0,()=>{const H=_e(z);if(H.token){let ce=H.token.issuedAtTimeMillis+.5*(H.token.expireTimeMillis-H.token.issuedAtTimeMillis)+3e5;return ce=Math.min(ce,H.token.expireTimeMillis-3e5),Math.max(0,ce-Date.now())}return 0},3e4,96e4)}(nt),De(z,Object.assign(Object.assign({},H),{tokenRefresher:ce}))),!ce.isRunning()&&H.isTokenAutoRefreshEnabled&&ce.start()}function hn(nt,z){const H=_e(nt).tokenObservers;for(const ce of H)try{"EXTERNAL"===ce.type&&null!=z.error?ce.error(z.error):ce.next(z)}catch(Ie){}}function Vn(nt){return nt.expireTimeMillis-Date.now()>0}function Sr(nt){return{token:Dr(Fr),error:nt}}class br{constructor(z,H){this.app=z,this.heartbeatServiceProvider=H}_delete(){const{tokenObservers:z}=_e(this.app);for(const H of z)Ct(this.app,H.next);return Promise.resolve()}}const _n="app-check-internal";(0,Q._registerComponent)(new ve.wA("app-check",nt=>function(nt,z){return new br(nt,z)}(nt.getProvider("app").getImmediate(),nt.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((nt,z,H)=>{nt.getProvider(_n).initialize()})),(0,Q._registerComponent)(new ve.wA(_n,nt=>function(nt){return{getToken:z=>mi(nt,z),addTokenListener:z=>function(nt,z,H,ce){const{app:Ie}=nt,We=_e(Ie),Ge={next:H,error:ce,type:z};if(De(Ie,Object.assign(Object.assign({},We),{tokenObservers:[...We.tokenObservers,Ge]})),We.token&&Vn(We.token)){const _t=We.token;Promise.resolve().then(()=>{H({token:_t.token}),ci(nt)}).catch(()=>{})}We.cachedTokenPromise.then(()=>ci(nt))}(nt,"INTERNAL",z),removeTokenListener:z=>Ct(nt.app,z)}}(nt.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Q.registerVersion)("@firebase/app-check","0.5.15");class yr{constructor(){return(0,E.vb)("app-check")}}"undefined"!=typeof window&&window},127:(tn,Ze,B)=>{"use strict";B.d(Ze,{Ot:()=>oe,z6:()=>ae,ZF:()=>je,hX:()=>_e});var E=B(2329),O=B(7716),ne=B(2805);class oe{constructor(Je){return Je}}class ae{constructor(){return(0,E.C6)()}}const re=new O.OlP("angularfire2._apps"),Te={provide:oe,useFactory:function(Me){return Me&&1===Me.length?Me[0]:new oe((0,E.Mq)())},deps:[[new O.FiY,re]]},ie={provide:ae,deps:[[new O.FiY,re]]};function me(Me){return(Je,ct)=>{const jt=Je.runOutsideAngular(()=>Me(ct));return new oe(jt)}}let Ce=(()=>{class Me{constructor(ct){(0,E.KN)("angularfire",ne.q4.full,"core"),(0,E.KN)("angularfire",ne.q4.full,"app"),(0,E.KN)("angular",O.q4F.full,ct.toString())}}return Me.\u0275fac=function(ct){return new(ct||Me)(O.LFG(O.Lbi))},Me.\u0275mod=O.oAB({type:Me}),Me.\u0275inj=O.cJS({providers:[Te,ie]}),Me})();function _e(Me,...Je){return{ngModule:Ce,providers:[{provide:re,useFactory:me(Me),multi:!0,deps:[O.R0b,O.zs3,ne.HU,...Je]}]}}const je=(0,ne.u3)(E.ZF,!0)},7910:(tn,Ze,B)=>{"use strict";B.d(Ze,{gx:()=>Ee,dh:()=>je,Xb:()=>pn,v0:()=>Ke,AR:()=>I,e5:()=>Ct,w7:()=>Sr,EA:()=>pt});var E=B(2805),O=B(7716),ne=B(127),oe=B(2329),ae=B(841),Q=B(3607),me=(B(3854),B(8026),B(5422),B(3910),B(8891));function _e(rn){return new me.y(function(qt){return{unsubscribe:(0,Q.q)(rn,qt.next.bind(qt),qt.error.bind(qt),qt.complete.bind(qt))}})}class Ee{constructor(qt){return qt}}class je{constructor(){return(0,E.vb)("auth")}}const $e=new O.OlP("angularfire2.auth-instances");function Me(rn){return(qt,Be)=>{const Ve=qt.runOutsideAngular(()=>rn(Be));return new Ee(Ve)}}const Je={provide:je,deps:[[new O.FiY,$e]]},ct={provide:Ee,useFactory:function(rn,qt){const Be=(0,E.JM)("auth",rn,qt);return Be&&new Ee(Be)},deps:[[new O.FiY,$e],ne.Ot]};let jt=(()=>{class rn{constructor(){(0,oe.KN)("angularfire",E.q4.full,"auth")}}return rn.\u0275fac=function(Be){return new(Be||rn)},rn.\u0275mod=O.oAB({type:rn}),rn.\u0275inj=O.cJS({providers:[ct,Je]}),rn})();function I(rn,...qt){return{ngModule:jt,providers:[{provide:$e,useFactory:Me(rn),multi:!0,deps:[O.R0b,O.zs3,E.HU,ne.z6,[new O.FiY,ae.nm],...qt]}]}}const pt=(0,E.u3)(_e,!0),pn=(0,E.u3)(Q.a5,!0),Ke=(0,E.u3)(Q.n,!0),Ct=(0,E.u3)(Q.a6,!0),Sr=(0,E.u3)(Q.y,!0)},8939:(tn,Ze,B)=>{"use strict";B.d(Ze,{hO:()=>_e,xv:()=>Te,Dh:()=>re,GT:()=>Q,cc:()=>De,on:()=>ie,pX:()=>ae});var E=B(7716),O=B(7841),ne=B(2805);tn=B.hmd(tn);const oe=["ngOnDestroy"],ae=(Ae,$e,Fe,Me={})=>new Proxy(Ae,{get:(Je,ct)=>Fe.runOutsideAngular(()=>{var jt;if(Ae[ct])return(null===(jt=null==Me?void 0:Me.spy)||void 0===jt?void 0:jt.get)&&Me.spy.get(ct,Ae[ct]),Ae[ct];if(oe.indexOf(ct)>-1)return()=>{};const I=$e.toPromise().then(rt=>{const pt=rt&&rt[ct];return"function"==typeof pt?pt.bind(rt):pt&&pt.then?pt.then(st=>Fe.run(()=>st)):Fe.run(()=>pt)});return new Proxy(()=>{},{get:(rt,pt)=>I[pt],apply:(rt,pt,st)=>I.then(mt=>{var lt;const Dt=mt&&mt(...st);return(null===(lt=null==Me?void 0:Me.spy)||void 0===lt?void 0:lt.apply)&&Me.spy.apply(ct,st,Dt),Dt})})})}),Q=(Ae,$e)=>{$e.forEach(Fe=>{Object.getOwnPropertyNames(Fe.prototype||Fe).forEach(Me=>{Object.defineProperty(Ae.prototype,Me,Object.getOwnPropertyDescriptor(Fe.prototype||Fe,Me))})})};class ve{constructor($e){return $e}}const re=new E.OlP("angularfire2.app.options"),Te=new E.OlP("angularfire2.app.name");function ie(Ae,$e,Fe){const Je="object"==typeof Fe&&Fe||{};Je.name=Je.name||"string"==typeof Fe&&Fe||"[DEFAULT]";const jt=O.Z.apps.filter(I=>I&&I.name===Je.name)[0]||$e.runOutsideAngular(()=>O.Z.initializeApp(Ae,Je));try{JSON.stringify(Ae)!==JSON.stringify(jt.options)&&me("error",`${jt.name} Firebase App already initialized with different options${tn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(I){}return new ve(jt)}const me=(Ae,...$e)=>{(0,E.X6Q)()&&"undefined"!=typeof console&&console[Ae](...$e)},Ce={provide:ve,useFactory:ie,deps:[re,E.R0b,[new E.FiY,Te]]};let _e=(()=>{class Ae{constructor(Fe){O.Z.registerVersion("angularfire",ne.q4.full,"core"),O.Z.registerVersion("angularfire",ne.q4.full,"app-compat"),O.Z.registerVersion("angular",E.q4F.full,Fe.toString())}static initializeApp(Fe,Me){return{ngModule:Ae,providers:[{provide:re,useValue:Fe},{provide:Te,useValue:Me}]}}}return Ae.\u0275fac=function(Fe){return new(Fe||Ae)(E.LFG(E.Lbi))},Ae.\u0275mod=E.oAB({type:Ae}),Ae.\u0275inj=E.cJS({providers:[Ce]}),Ae})();function De(Ae,$e,Fe,Me,Je){const[,ct,jt]=globalThis.\u0275AngularfireInstanceCache.find(I=>I[0]===Ae)||[];if(ct)return function(Ae,$e){try{return Ae.toString()===$e.toString()}catch(Fe){return Ae===$e}}(Je,jt)||(je("error",`${$e} was already initialized on the ${Fe} Firebase App with different settings.${Ee?" You may need to reload as Firebase is not HMR aware.":""}`),je("warn",{is:Je,was:jt})),ct;{const I=Me();return globalThis.\u0275AngularfireInstanceCache.push([Ae,I,Je]),I}}const Ee=!!tn.hot,je=(Ae,...$e)=>{(0,E.X6Q)()&&"undefined"!=typeof console&&console[Ae](...$e)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2502:(tn,Ze,B)=>{"use strict";B.d(Ze,{gg:()=>st,BS:()=>Gt,_1:()=>ir,ad:()=>br,Xo:()=>rn,Cm:()=>Ke,IO:()=>qt,Bt:()=>ke});var E=B(2805),O=B(7716),ne=B(7910),oe=B(127),ae=B(2329),Q=B(841),ve=B(1304),re=B(8891),Te=B(8002),ie={includeMetadataChanges:!1};function me($t,Vt){return void 0===Vt&&(Vt=ie),new re.y(function(Nt){return{unsubscribe:(0,ve.cf)($t,Vt,{next:Nt.next.bind(Nt),error:Nt.error.bind(Nt),complete:Nt.complete.bind(Nt)})}})}function _e($t,Vt){return void 0===Vt&&(Vt={}),function($t){return me($t,{includeMetadataChanges:!0})}($t).pipe((0,Te.U)(function(Nt){return De(Nt,Vt)}))}function De($t,Vt){void 0===Vt&&(Vt={});var Nt=$t.data();return!$t.exists()||"object"!=typeof Nt||null===Nt||Vt.idField&&(Nt[Vt.idField]=$t.id),Nt}function pt($t,Vt){return void 0===Vt&&(Vt={}),function($t){return me($t,{includeMetadataChanges:!0}).pipe((0,Te.U)(function(Vt){return Vt.docs}))}($t).pipe((0,Te.U)(function(Nt){return Nt.map(function(_n){return De(_n,Vt)})}))}class st{constructor(Vt){return Vt}}const mt="firestore",At=new O.OlP("angularfire2.firestore-instances");function pn($t){return(Vt,Nt)=>{const _n=Vt.runOutsideAngular(()=>$t(Nt));return new st(_n)}}const bt={provide:class{constructor(){return(0,E.vb)(mt)}},deps:[[new O.FiY,At]]},vt={provide:st,useFactory:function($t,Vt){const Nt=(0,E.JM)(mt,$t,Vt);return Nt&&new st(Nt)},deps:[[new O.FiY,At],oe.Ot]};let ht=(()=>{class $t{constructor(){(0,ae.KN)("angularfire",E.q4.full,"fst")}}return $t.\u0275fac=function(Nt){return new(Nt||$t)},$t.\u0275mod=O.oAB({type:$t}),$t.\u0275inj=O.cJS({providers:[vt,bt]}),$t})();function Ke($t,...Vt){return{ngModule:ht,providers:[{provide:At,useFactory:pn($t),multi:!0,deps:[O.R0b,O.zs3,E.HU,oe.z6,[new O.FiY,ne.dh],[new O.FiY,Q.nm],...Vt]}]}}const Gt=(0,E.u3)(pt,!0),ir=(0,E.u3)(_e,!0),br=(0,E.u3)(ve.ad,!0),rn=(0,E.u3)(ve.Xo,!0),qt=(0,E.u3)(ve.IO,!0),ke=(0,E.u3)(ve.Bt,!0)},2805:(tn,Ze,B)=>{"use strict";B.d(Ze,{q4:()=>rl,iC:()=>tu,HU:()=>Fa,vb:()=>Kd,JM:()=>El,u3:()=>Il});var E=B(7716),O=B(2329),ne=B(8239),oe=B(8026),ae=B(3854),Q=B(3910),ve=B(5422),re=B(2268);const Te="@firebase/installations",ie="0.5.15",Ce=`w:${ie}`,_e="FIS_v2",$e=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Fe(L){return L instanceof ae.ZR&&L.code.includes("request-failed")}function Me({projectId:L}){return`https://firebaseinstallations.googleapis.com/v1/projects/${L}/installations`}function Je(L){return{token:L.token,requestStatus:2,expiresIn:mt(L.expiresIn),creationTime:Date.now()}}function ct(L,Y){return jt.apply(this,arguments)}function jt(){return(jt=(0,ne.Z)(function*(L,Y){const Pe=(yield Y.json()).error;return $e.create("request-failed",{requestName:L,serverCode:Pe.code,serverMessage:Pe.message,serverStatus:Pe.status})})).apply(this,arguments)}function I({apiKey:L}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":L})}function rt(L,{refreshToken:Y}){const fe=I(L);return fe.append("Authorization",function(L){return`${_e} ${L}`}(Y)),fe}function pt(L){return st.apply(this,arguments)}function st(){return(st=(0,ne.Z)(function*(L){const Y=yield L();return Y.status>=500&&Y.status<600?L():Y})).apply(this,arguments)}function mt(L){return Number(L.replace("s","000"))}function Dt(L,Y){return At.apply(this,arguments)}function At(){return(At=(0,ne.Z)(function*({appConfig:L,heartbeatServiceProvider:Y},{fid:fe}){const Pe=Me(L),at=I(L),Tt=Y.getImmediate({optional:!0});if(Tt){const Ar=yield Tt.getHeartbeatsHeader();Ar&&at.append("x-firebase-client",Ar)}const In={method:"POST",headers:at,body:JSON.stringify({fid:fe,authVersion:_e,appId:L.appId,sdkVersion:Ce})},nr=yield pt(()=>fetch(Pe,In));if(nr.ok){const Ar=yield nr.json();return{fid:Ar.fid||fe,registrationStatus:2,refreshToken:Ar.refreshToken,authToken:Je(Ar.authToken)}}throw yield ct("Create Installation",nr)})).apply(this,arguments)}function wn(L){return new Promise(Y=>{setTimeout(Y,L)})}const bt=/^[cdef][\w-]{21}$/;function ht(){try{const L=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(L),L[0]=112+L[0]%16;const fe=function(L){return function(L){return btoa(String.fromCharCode(...L)).replace(/\+/g,"-").replace(/\//g,"_")}(L).substr(0,22)}(L);return bt.test(fe)?fe:""}catch(L){return""}}function dt(L){return`${L.appName}!${L.appId}`}const Rt=new Map;function Zt(L,Y){const fe=dt(L);Bn(fe,Y),function(L,Y){const fe=(!Nn&&"BroadcastChannel"in self&&(Nn=new BroadcastChannel("[Firebase] FID Change"),Nn.onmessage=L=>{Bn(L.data.key,L.data.fid)}),Nn);fe&&fe.postMessage({key:L,fid:Y}),0===Rt.size&&Nn&&(Nn.close(),Nn=null)}(fe,Y)}function Bn(L,Y){const fe=Rt.get(L);if(fe)for(const Pe of fe)Pe(Y)}let Nn=null;const Ft="firebase-installations-store";let Wn=null;function cr(){return Wn||(Wn=(0,re.X3)("firebase-installations-database",1,{upgrade:(L,Y)=>{0===Y&&L.createObjectStore(Ft)}})),Wn}function gn(L,Y){return sr.apply(this,arguments)}function sr(){return(sr=(0,ne.Z)(function*(L,Y){const fe=dt(L),at=(yield cr()).transaction(Ft,"readwrite"),Tt=at.objectStore(Ft),en=yield Tt.get(fe);return yield Tt.put(Y,fe),yield at.done,(!en||en.fid!==Y.fid)&&Zt(L,Y.fid),Y})).apply(this,arguments)}function lr(L){return zr.apply(this,arguments)}function zr(){return(zr=(0,ne.Z)(function*(L){const Y=dt(L),Pe=(yield cr()).transaction(Ft,"readwrite");yield Pe.objectStore(Ft).delete(Y),yield Pe.done})).apply(this,arguments)}function kr(L,Y){return ai.apply(this,arguments)}function ai(){return(ai=(0,ne.Z)(function*(L,Y){const fe=dt(L),at=(yield cr()).transaction(Ft,"readwrite"),Tt=at.objectStore(Ft),en=yield Tt.get(fe),In=Y(en);return void 0===In?yield Tt.delete(fe):yield Tt.put(In,fe),yield at.done,In&&(!en||en.fid!==In.fid)&&Zt(L,In.fid),In})).apply(this,arguments)}function Fr(L){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,ne.Z)(function*(L){let Y;const fe=yield kr(L.appConfig,Pe=>{const at=mi(Pe),Tt=dr(L,at);return Y=Tt.registrationPromise,Tt.installationEntry});return""===fe.fid?{installationEntry:yield Y}:{installationEntry:fe,registrationPromise:Y}})).apply(this,arguments)}function mi(L){return Vn(L||{fid:ht(),registrationStatus:0})}function dr(L,Y){if(0===Y.registrationStatus){if(!navigator.onLine)return{installationEntry:Y,registrationPromise:Promise.reject($e.create("app-offline"))};const fe={fid:Y.fid,registrationStatus:1,registrationTime:Date.now()},Pe=function(L,Y){return Ct.apply(this,arguments)}(L,fe);return{installationEntry:fe,registrationPromise:Pe}}return 1===Y.registrationStatus?{installationEntry:Y,registrationPromise:ci(L)}:{installationEntry:Y}}function Ct(){return(Ct=(0,ne.Z)(function*(L,Y){try{const fe=yield Dt(L,Y);return gn(L.appConfig,fe)}catch(fe){throw Fe(fe)&&409===fe.customData.serverCode?yield lr(L.appConfig):yield gn(L.appConfig,{fid:Y.fid,registrationStatus:0}),fe}})).apply(this,arguments)}function ci(L){return di.apply(this,arguments)}function di(){return(di=(0,ne.Z)(function*(L){let Y=yield hn(L.appConfig);for(;1===Y.registrationStatus;)yield wn(100),Y=yield hn(L.appConfig);if(0===Y.registrationStatus){const{installationEntry:fe,registrationPromise:Pe}=yield Fr(L);return Pe||fe}return Y})).apply(this,arguments)}function hn(L){return kr(L,Y=>{if(!Y)throw $e.create("installation-not-found");return Vn(Y)})}function Vn(L){return function(L){return 1===L.registrationStatus&&L.registrationTime+1e4<Date.now()}(L)?{fid:L.fid,registrationStatus:0}:L}function br(L,Y){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,ne.Z)(function*({appConfig:L,heartbeatServiceProvider:Y},fe){const Pe=Gn(L,fe),at=rt(L,fe),Tt=Y.getImmediate({optional:!0});if(Tt){const Ar=yield Tt.getHeartbeatsHeader();Ar&&at.append("x-firebase-client",Ar)}const In={method:"POST",headers:at,body:JSON.stringify({installation:{sdkVersion:Ce,appId:L.appId}})},nr=yield pt(()=>fetch(Pe,In));if(nr.ok)return Je(yield nr.json());throw yield ct("Generate Auth Token",nr)})).apply(this,arguments)}function Gn(L,{fid:Y}){return`${Me(L)}/${Y}/authTokens:generate`}function Yn(L){return ii.apply(this,arguments)}function ii(){return(ii=(0,ne.Z)(function*(L,Y=!1){let fe;const Pe=yield kr(L.appConfig,Tt=>{if(!qt(Tt))throw $e.create("not-registered");const en=Tt.authToken;if(!Y&&Be(en))return Tt;if(1===en.requestStatus)return fe=on(L,Y),Tt;{if(!navigator.onLine)throw $e.create("app-offline");const In=Qe(Tt);return fe=cn(L,In),In}});return fe?yield fe:Pe.authToken})).apply(this,arguments)}function on(L,Y){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,ne.Z)(function*(L,Y){let fe=yield mn(L.appConfig);for(;1===fe.authToken.requestStatus;)yield wn(100),fe=yield mn(L.appConfig);const Pe=fe.authToken;return 0===Pe.requestStatus?Yn(L,Y):Pe})).apply(this,arguments)}function mn(L){return kr(L,Y=>{if(!qt(Y))throw $e.create("not-registered");return function(L){return 1===L.requestStatus&&L.requestTime+1e4<Date.now()}(Y.authToken)?Object.assign(Object.assign({},Y),{authToken:{requestStatus:0}}):Y})}function cn(L,Y){return rn.apply(this,arguments)}function rn(){return(rn=(0,ne.Z)(function*(L,Y){try{const fe=yield br(L,Y),Pe=Object.assign(Object.assign({},Y),{authToken:fe});return yield gn(L.appConfig,Pe),fe}catch(fe){if(!Fe(fe)||401!==fe.customData.serverCode&&404!==fe.customData.serverCode){const Pe=Object.assign(Object.assign({},Y),{authToken:{requestStatus:0}});yield gn(L.appConfig,Pe)}else yield lr(L.appConfig);throw fe}})).apply(this,arguments)}function qt(L){return void 0!==L&&2===L.registrationStatus}function Be(L){return 2===L.requestStatus&&!function(L){const Y=Date.now();return Y<L.creationTime||L.creationTime+L.expiresIn<Y+36e5}(L)}function Qe(L){const Y={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},L),{authToken:Y})}function Oe(){return(Oe=(0,ne.Z)(function*(L){const Y=L,{installationEntry:fe,registrationPromise:Pe}=yield Fr(Y);return Pe?Pe.catch(console.error):Yn(Y).catch(console.error),fe.fid})).apply(this,arguments)}function Ut(){return(Ut=(0,ne.Z)(function*(L,Y=!1){const fe=L;return yield Ln(fe),(yield Yn(fe,Y)).token})).apply(this,arguments)}function Ln(L){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,ne.Z)(function*(L){const{registrationPromise:Y}=yield Fr(L);Y&&(yield Y)})).apply(this,arguments)}function Sn(L){return $e.create("missing-app-config-values",{valueName:L})}const nn="installations";(0,oe._registerComponent)(new Q.wA(nn,L=>{const Y=L.getProvider("app").getImmediate(),fe=function(L){if(!L||!L.options)throw Sn("App Configuration");if(!L.name)throw Sn("App Name");const Y=["projectId","apiKey","appId"];for(const fe of Y)if(!L.options[fe])throw Sn(fe);return{appName:L.name,projectId:L.options.projectId,apiKey:L.options.apiKey,appId:L.options.appId}}(Y);return{app:Y,appConfig:fe,heartbeatServiceProvider:(0,oe._getProvider)(Y,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,oe._registerComponent)(new Q.wA("installations-internal",L=>{const Y=L.getProvider("app").getImmediate(),fe=(0,oe._getProvider)(Y,nn).getImmediate();return{getId:()=>function(L){return Oe.apply(this,arguments)}(fe),getToken:at=>function(L){return Ut.apply(this,arguments)}(fe,at)}},"PRIVATE")),(0,oe.registerVersion)(Te,ie),(0,oe.registerVersion)(Te,ie,"esm2017");const qr="@firebase/remote-config",Yr=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Pn{constructor(Y,fe,Pe,at){this.client=Y,this.storage=fe,this.storageCache=Pe,this.logger=at}isCachedDataFresh(Y,fe){if(!fe)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Pe=Date.now()-fe,at=Pe<=Y;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Pe}. Cache max age millis (minimumFetchIntervalMillis setting): ${Y}. Is cache hit: ${at}.`),at}fetch(Y){var fe=this;return(0,ne.Z)(function*(){const[Pe,at]=yield Promise.all([fe.storage.getLastSuccessfulFetchTimestampMillis(),fe.storage.getLastSuccessfulFetchResponse()]);if(at&&fe.isCachedDataFresh(Y.cacheMaxAgeMillis,Pe))return at;Y.eTag=at&&at.eTag;const Tt=yield fe.client.fetch(Y),en=[fe.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Tt.status&&en.push(fe.storage.setLastSuccessfulFetchResponse(Tt)),yield Promise.all(en),Tt})()}}function jn(L=navigator){return L.languages&&L.languages[0]||L.language}class Cr{constructor(Y,fe,Pe,at,Tt,en){this.firebaseInstallations=Y,this.sdkVersion=fe,this.namespace=Pe,this.projectId=at,this.apiKey=Tt,this.appId=en}fetch(Y){var fe=this;return(0,ne.Z)(function*(){var Pe,at,Tt;const[en,In]=yield Promise.all([fe.firebaseInstallations.getId(),fe.firebaseInstallations.getToken()]),Ar=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${fe.projectId}/namespaces/${fe.namespace}:fetch?key=${fe.apiKey}`,wr={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":Y.eTag||"*"},rr={sdk_version:fe.sdkVersion,app_instance_id:en,app_instance_id_token:In,app_id:fe.appId,language_code:jn()},Pi={method:"POST",headers:wr,body:JSON.stringify(rr)},ui=fetch(Ar,Pi),wi=new Promise((Va,ha)=>{Y.signal.addEventListener(()=>{const $o=new Error("The operation was aborted.");$o.name="AbortError",ha($o)})});let Do;try{yield Promise.race([ui,wi]),Do=yield ui}catch(Va){let ha="fetch-client-network";throw"AbortError"===(null===(Pe=Va)||void 0===Pe?void 0:Pe.name)&&(ha="fetch-timeout"),Yr.create(ha,{originalErrorMessage:null===(at=Va)||void 0===at?void 0:at.message})}let vu=Do.status;const da=Do.headers.get("ETag")||void 0;let wa,Eu;if(200===Do.status){let Va;try{Va=yield Do.json()}catch(ha){throw Yr.create("fetch-client-parse",{originalErrorMessage:null===(Tt=ha)||void 0===Tt?void 0:Tt.message})}wa=Va.entries,Eu=Va.state}if("INSTANCE_STATE_UNSPECIFIED"===Eu?vu=500:"NO_CHANGE"===Eu?vu=304:("NO_TEMPLATE"===Eu||"EMPTY_CONFIG"===Eu)&&(wa={}),304!==vu&&200!==vu)throw Yr.create("fetch-status",{httpStatus:vu});return{status:vu,eTag:da,config:wa}})()}}class Ni{constructor(Y,fe){this.client=Y,this.storage=fe}fetch(Y){var fe=this;return(0,ne.Z)(function*(){const Pe=(yield fe.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return fe.attemptFetch(Y,Pe)})()}attemptFetch(Y,{throttleEndTimeMillis:fe,backoffCount:Pe}){var at=this;return(0,ne.Z)(function*(){yield function(L,Y){return new Promise((fe,Pe)=>{const at=Math.max(Y-Date.now(),0),Tt=setTimeout(fe,at);L.addEventListener(()=>{clearTimeout(Tt),Pe(Yr.create("fetch-throttle",{throttleEndTimeMillis:Y}))})})}(Y.signal,fe);try{const Tt=yield at.client.fetch(Y);return yield at.storage.deleteThrottleMetadata(),Tt}catch(Tt){if(!function(L){if(!(L instanceof ae.ZR&&L.customData))return!1;const Y=Number(L.customData.httpStatus);return 429===Y||500===Y||503===Y||504===Y}(Tt))throw Tt;const en={throttleEndTimeMillis:Date.now()+(0,ae.$s)(Pe),backoffCount:Pe+1};return yield at.storage.setThrottleMetadata(en),at.attemptFetch(Y,en)}})()}}class ss{constructor(Y,fe,Pe,at,Tt){this.app=Y,this._client=fe,this._storageCache=Pe,this._storage=at,this._logger=Tt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ws(L,Y){var fe;const Pe=L.target.error||void 0;return Yr.create(Y,{originalErrorMessage:Pe&&(null===(fe=Pe)||void 0===fe?void 0:fe.message)})}const Yi="app_namespace_store";class Go{constructor(Y,fe,Pe,at=function(){return new Promise((L,Y)=>{var fe;try{const Pe=indexedDB.open("firebase_remote_config",1);Pe.onerror=at=>{Y(ws(at,"storage-open"))},Pe.onsuccess=at=>{L(at.target.result)},Pe.onupgradeneeded=at=>{0===at.oldVersion&&at.target.result.createObjectStore(Yi,{keyPath:"compositeKey"})}}catch(Pe){Y(Yr.create("storage-open",{originalErrorMessage:null===(fe=Pe)||void 0===fe?void 0:fe.message}))}})}()){this.appId=Y,this.appName=fe,this.namespace=Pe,this.openDbPromise=at}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(Y){return this.set("last_fetch_status",Y)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(Y){return this.set("last_successful_fetch_timestamp_millis",Y)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(Y){return this.set("last_successful_fetch_response",Y)}getActiveConfig(){return this.get("active_config")}setActiveConfig(Y){return this.set("active_config",Y)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(Y){return this.set("active_config_etag",Y)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(Y){return this.set("throttle_metadata",Y)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(Y){var fe=this;return(0,ne.Z)(function*(){const Pe=yield fe.openDbPromise;return new Promise((at,Tt)=>{var en;const nr=Pe.transaction([Yi],"readonly").objectStore(Yi),Ar=fe.createCompositeKey(Y);try{const wr=nr.get(Ar);wr.onerror=rr=>{Tt(ws(rr,"storage-get"))},wr.onsuccess=rr=>{const Pi=rr.target.result;at(Pi?Pi.value:void 0)}}catch(wr){Tt(Yr.create("storage-get",{originalErrorMessage:null===(en=wr)||void 0===en?void 0:en.message}))}})})()}set(Y,fe){var Pe=this;return(0,ne.Z)(function*(){const at=yield Pe.openDbPromise;return new Promise((Tt,en)=>{var In;const Ar=at.transaction([Yi],"readwrite").objectStore(Yi),wr=Pe.createCompositeKey(Y);try{const rr=Ar.put({compositeKey:wr,value:fe});rr.onerror=Pi=>{en(ws(Pi,"storage-set"))},rr.onsuccess=()=>{Tt()}}catch(rr){en(Yr.create("storage-set",{originalErrorMessage:null===(In=rr)||void 0===In?void 0:In.message}))}})})()}delete(Y){var fe=this;return(0,ne.Z)(function*(){const Pe=yield fe.openDbPromise;return new Promise((at,Tt)=>{var en;const nr=Pe.transaction([Yi],"readwrite").objectStore(Yi),Ar=fe.createCompositeKey(Y);try{const wr=nr.delete(Ar);wr.onerror=rr=>{Tt(ws(rr,"storage-delete"))},wr.onsuccess=()=>{at()}}catch(wr){Tt(Yr.create("storage-delete",{originalErrorMessage:null===(en=wr)||void 0===en?void 0:en.message}))}})})()}createCompositeKey(Y){return[this.appId,this.appName,this.namespace,Y].join()}}class Po{constructor(Y){this.storage=Y}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var Y=this;return(0,ne.Z)(function*(){const fe=Y.storage.getLastFetchStatus(),Pe=Y.storage.getLastSuccessfulFetchTimestampMillis(),at=Y.storage.getActiveConfig(),Tt=yield fe;Tt&&(Y.lastFetchStatus=Tt);const en=yield Pe;en&&(Y.lastSuccessfulFetchTimestampMillis=en);const In=yield at;In&&(Y.activeConfig=In)})()}setLastFetchStatus(Y){return this.lastFetchStatus=Y,this.storage.setLastFetchStatus(Y)}setLastSuccessfulFetchTimestampMillis(Y){return this.lastSuccessfulFetchTimestampMillis=Y,this.storage.setLastSuccessfulFetchTimestampMillis(Y)}setActiveConfig(Y){return this.activeConfig=Y,this.storage.setActiveConfig(Y)}}function Hs(){return fs.apply(this,arguments)}function fs(){return(fs=(0,ne.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(L){return!1}})).apply(this,arguments)}(0,oe._registerComponent)(new Q.wA("remote-config",function(Y,{instanceIdentifier:fe}){const Pe=Y.getProvider("app").getImmediate(),at=Y.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Yr.create("registration-window");if(!(0,ae.hl)())throw Yr.create("indexed-db-unavailable");const{projectId:Tt,apiKey:en,appId:In}=Pe.options;if(!Tt)throw Yr.create("registration-project-id");if(!en)throw Yr.create("registration-api-key");if(!In)throw Yr.create("registration-app-id");const nr=new Go(In,Pe.name,fe=fe||"firebase"),Ar=new Po(nr),wr=new ve.Yd(qr);wr.logLevel=ve.in.ERROR;const rr=new Cr(at,oe.SDK_VERSION,fe,Tt,en,In),Pi=new Ni(rr,nr),ui=new Pn(Pi,nr,Ar,wr),wi=new ss(Pe,ui,Ar,nr,wr);return function(L){const Y=(0,ae.m9)(L);Y._initializePromise||(Y._initializePromise=Y._storageCache.loadFromStorage().then(()=>{Y._isInitializationComplete=!0}))}(wi),wi},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(qr,"0.3.14"),(0,oe.registerVersion)(qr,"0.3.14","esm2017");const Ws="/firebase-messaging-sw.js",to="/firebase-cloud-messaging-push-scope",Zr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ji="google.c.a.c_id",ps="google.c.a.c_l",ro="google.c.a.ts",os="google.c.a.e";var Gs=(()=>{return(L=Gs||(Gs={})).PUSH_RECEIVED="push-received",L.NOTIFICATION_CLICKED="notification-clicked",Gs;var L})();function _i(L){const Y=new Uint8Array(L);return btoa(String.fromCharCode(...Y)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ps(L){const fe=(L+"=".repeat((4-L.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Pe=atob(fe),at=new Uint8Array(Pe.length);for(let Tt=0;Tt<Pe.length;++Tt)at[Tt]=Pe.charCodeAt(Tt);return at}const fi="fcm_token_details_db",vo="fcm_token_object_Store";function Bi(L){return Qi.apply(this,arguments)}function Qi(){return Qi=(0,ne.Z)(function*(L){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Tt=>Tt.name).includes(fi))return null;let Y=null;return(yield(0,re.X3)(fi,5,{upgrade:(Pe=(0,ne.Z)(function*(at,Tt,en,In){var nr;if(Tt<2||!at.objectStoreNames.contains(vo))return;const Ar=In.objectStore(vo),wr=yield Ar.index("fcmSenderId").get(L);if(yield Ar.clear(),wr)if(2===Tt){const rr=wr;if(!rr.auth||!rr.p256dh||!rr.endpoint)return;Y={token:rr.fcmToken,createTime:null!==(nr=rr.createTime)&&void 0!==nr?nr:Date.now(),subscriptionOptions:{auth:rr.auth,p256dh:rr.p256dh,endpoint:rr.endpoint,swScope:rr.swScope,vapidKey:"string"==typeof rr.vapidKey?rr.vapidKey:_i(rr.vapidKey)}}}else if(3===Tt){const rr=wr;Y={token:rr.fcmToken,createTime:rr.createTime,subscriptionOptions:{auth:_i(rr.auth),p256dh:_i(rr.p256dh),endpoint:rr.endpoint,swScope:rr.swScope,vapidKey:_i(rr.vapidKey)}}}else if(4===Tt){const rr=wr;Y={token:rr.fcmToken,createTime:rr.createTime,subscriptionOptions:{auth:_i(rr.auth),p256dh:_i(rr.p256dh),endpoint:rr.endpoint,swScope:rr.swScope,vapidKey:_i(rr.vapidKey)}}}}),function(Tt,en,In,nr){return Pe.apply(this,arguments)})})).close(),yield(0,re.Lj)(fi),yield(0,re.Lj)("fcm_vapid_details_db"),yield(0,re.Lj)("undefined"),Ki(Y)?Y:null;var Pe}),Qi.apply(this,arguments)}function Ki(L){if(!L||!L.subscriptionOptions)return!1;const{subscriptionOptions:Y}=L;return"number"==typeof L.createTime&&L.createTime>0&&"string"==typeof L.token&&L.token.length>0&&"string"==typeof Y.auth&&Y.auth.length>0&&"string"==typeof Y.p256dh&&Y.p256dh.length>0&&"string"==typeof Y.endpoint&&Y.endpoint.length>0&&"string"==typeof Y.swScope&&Y.swScope.length>0&&"string"==typeof Y.vapidKey&&Y.vapidKey.length>0}const Ii="firebase-messaging-store";let Xi=null;function G(){return Xi||(Xi=(0,re.X3)("firebase-messaging-database",1,{upgrade:(L,Y)=>{0===Y&&L.createObjectStore(Ii)}})),Xi}function le(L){return K.apply(this,arguments)}function K(){return(K=(0,ne.Z)(function*(L){const Y=W(L),Pe=yield(yield G()).transaction(Ii).objectStore(Ii).get(Y);if(Pe)return Pe;{const at=yield Bi(L.appConfig.senderId);if(at)return yield be(L,at),at}})).apply(this,arguments)}function be(L,Y){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,ne.Z)(function*(L,Y){const fe=W(L),at=(yield G()).transaction(Ii,"readwrite");return yield at.objectStore(Ii).put(Y,fe),yield at.done,Y})).apply(this,arguments)}function wt(L){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,ne.Z)(function*(L){const Y=W(L),Pe=(yield G()).transaction(Ii,"readwrite");yield Pe.objectStore(Ii).delete(Y),yield Pe.done})).apply(this,arguments)}function W({appConfig:L}){return L.appId}const k=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ue(L,Y){return ot.apply(this,arguments)}function ot(){return(ot=(0,ne.Z)(function*(L,Y){var fe;const Pe=yield si(L),at=Qn(Y),Tt={method:"POST",headers:Pe,body:JSON.stringify(at)};let en;try{en=yield(yield fetch(li(L.appConfig),Tt)).json()}catch(In){throw k.create("token-subscribe-failed",{errorInfo:null===(fe=In)||void 0===fe?void 0:fe.toString()})}if(en.error)throw k.create("token-subscribe-failed",{errorInfo:en.error.message});if(!en.token)throw k.create("token-subscribe-no-token");return en.token})).apply(this,arguments)}function an(L,Y){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,ne.Z)(function*(L,Y){var fe;const Pe=yield si(L),at=Qn(Y.subscriptionOptions),Tt={method:"PATCH",headers:Pe,body:JSON.stringify(at)};let en;try{en=yield(yield fetch(`${li(L.appConfig)}/${Y.token}`,Tt)).json()}catch(In){throw k.create("token-update-failed",{errorInfo:null===(fe=In)||void 0===fe?void 0:fe.toString()})}if(en.error)throw k.create("token-update-failed",{errorInfo:en.error.message});if(!en.token)throw k.create("token-update-no-token");return en.token})).apply(this,arguments)}function Ur(L,Y){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,ne.Z)(function*(L,Y){var fe;const at={method:"DELETE",headers:yield si(L)};try{const en=yield(yield fetch(`${li(L.appConfig)}/${Y}`,at)).json();if(en.error)throw k.create("token-unsubscribe-failed",{errorInfo:en.error.message})}catch(Tt){throw k.create("token-unsubscribe-failed",{errorInfo:null===(fe=Tt)||void 0===fe?void 0:fe.toString()})}})).apply(this,arguments)}function li({projectId:L}){return`https://fcmregistrations.googleapis.com/v1/projects/${L}/registrations`}function si(L){return jr.apply(this,arguments)}function jr(){return(jr=(0,ne.Z)(function*({appConfig:L,installations:Y}){const fe=yield Y.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":L.apiKey,"x-goog-firebase-installations-auth":`FIS ${fe}`})})).apply(this,arguments)}function Qn({p256dh:L,auth:Y,endpoint:fe,vapidKey:Pe}){const at={web:{endpoint:fe,auth:Y,p256dh:L}};return Pe!==Zr&&(at.web.applicationPubKey=Pe),at}const ma=6048e5;function ko(L){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,ne.Z)(function*(L){const Y=yield Fo(L.swRegistration,L.vapidKey),fe={vapidKey:L.vapidKey,swScope:L.swRegistration.scope,endpoint:Y.endpoint,auth:_i(Y.getKey("auth")),p256dh:_i(Y.getKey("p256dh"))},Pe=yield le(L.firebaseDependencies);if(Pe){if(io(Pe.subscriptionOptions,fe))return Date.now()>=Pe.createTime+ma?Ra(L,{token:Pe.token,createTime:Date.now(),subscriptionOptions:fe}):Pe.token;try{yield Ur(L.firebaseDependencies,Pe.token)}catch(at){console.warn(at)}return Yt(L.firebaseDependencies,fe)}return Yt(L.firebaseDependencies,fe)})).apply(this,arguments)}function Ja(L){return na.apply(this,arguments)}function na(){return(na=(0,ne.Z)(function*(L){const Y=yield le(L.firebaseDependencies);Y&&(yield Ur(L.firebaseDependencies,Y.token),yield wt(L.firebaseDependencies));const fe=yield L.swRegistration.pushManager.getSubscription();return!fe||fe.unsubscribe()})).apply(this,arguments)}function Ra(L,Y){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,ne.Z)(function*(L,Y){try{const fe=yield an(L.firebaseDependencies,Y),Pe=Object.assign(Object.assign({},Y),{token:fe,createTime:Date.now()});return yield be(L.firebaseDependencies,Pe),fe}catch(fe){throw yield Ja(L),fe}})).apply(this,arguments)}function Yt(L,Y){return _r.apply(this,arguments)}function _r(){return(_r=(0,ne.Z)(function*(L,Y){const Pe={token:yield ue(L,Y),createTime:Date.now(),subscriptionOptions:Y};return yield be(L,Pe),Pe.token})).apply(this,arguments)}function Fo(L,Y){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,ne.Z)(function*(L,Y){return(yield L.pushManager.getSubscription())||L.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ps(Y)})})).apply(this,arguments)}function io(L,Y){return Y.vapidKey===L.vapidKey&&Y.endpoint===L.endpoint&&Y.auth===L.auth&&Y.p256dh===L.p256dh}function Ss(L){const Y={from:L.from,collapseKey:L.collapse_key,messageId:L.fcmMessageId};return function(L,Y){if(!Y.notification)return;L.notification={};const fe=Y.notification.title;fe&&(L.notification.title=fe);const Pe=Y.notification.body;Pe&&(L.notification.body=Pe);const at=Y.notification.image;at&&(L.notification.image=at)}(Y,L),function(L,Y){!Y.data||(L.data=Y.data)}(Y,L),function(L,Y){var fe,Pe,at,Tt,en;if(!Y.fcmOptions&&!(null===(fe=Y.notification)||void 0===fe?void 0:fe.click_action))return;L.fcmOptions={};const In=null!==(at=null===(Pe=Y.fcmOptions)||void 0===Pe?void 0:Pe.link)&&void 0!==at?at:null===(Tt=Y.notification)||void 0===Tt?void 0:Tt.click_action;In&&(L.fcmOptions.link=In);const nr=null===(en=Y.fcmOptions)||void 0===en?void 0:en.analytics_label;nr&&(L.fcmOptions.analyticsLabel=nr)}(Y,L),Y}function Ol(L){return"object"==typeof L&&!!L&&ji in L}function so(L,Y){const fe=[];for(let Pe=0;Pe<L.length;Pe++)fe.push(L.charAt(Pe)),Pe<Y.length&&fe.push(Y.charAt(Pe));return fe.join("")}function Io(L){return k.create("missing-app-config-values",{valueName:L})}so("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),so("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ji{constructor(Y,fe,Pe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const at=function(L){if(!L||!L.options)throw Io("App Configuration Object");if(!L.name)throw Io("App Name");const Y=["projectId","apiKey","appId","messagingSenderId"],{options:fe}=L;for(const Pe of Y)if(!fe[Pe])throw Io(Pe);return{appName:L.name,projectId:fe.projectId,apiKey:fe.apiKey,appId:fe.appId,senderId:fe.messagingSenderId}}(Y);this.firebaseDependencies={app:Y,appConfig:at,installations:fe,analyticsProvider:Pe}}_delete(){return Promise.resolve()}}function Ls(L){return el.apply(this,arguments)}function el(){return(el=(0,ne.Z)(function*(L){var Y;try{L.swRegistration=yield navigator.serviceWorker.register(Ws,{scope:to}),L.swRegistration.update().catch(()=>{})}catch(fe){throw k.create("failed-service-worker-registration",{browserErrorMessage:null===(Y=fe)||void 0===Y?void 0:Y.message})}})).apply(this,arguments)}function As(L,Y){return $i.apply(this,arguments)}function $i(){return($i=(0,ne.Z)(function*(L,Y){if(!Y&&!L.swRegistration&&(yield Ls(L)),Y||!L.swRegistration){if(!(Y instanceof ServiceWorkerRegistration))throw k.create("invalid-sw-registration");L.swRegistration=Y}})).apply(this,arguments)}function fo(L,Y){return gs.apply(this,arguments)}function gs(){return(gs=(0,ne.Z)(function*(L,Y){Y?L.vapidKey=Y:L.vapidKey||(L.vapidKey=Zr)})).apply(this,arguments)}function zs(){return(zs=(0,ne.Z)(function*(L,Y){if(!navigator)throw k.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw k.create("permission-blocked");return yield fo(L,null==Y?void 0:Y.vapidKey),yield As(L,null==Y?void 0:Y.serviceWorkerRegistration),ko(L)})).apply(this,arguments)}function Lo(L,Y,fe){return ia.apply(this,arguments)}function ia(){return(ia=(0,ne.Z)(function*(L,Y,fe){const Pe=Vo(Y);(yield L.firebaseDependencies.analyticsProvider.get()).logEvent(Pe,{message_id:fe[ji],message_name:fe[ps],message_time:fe[ro],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Vo(L){switch(L){case Gs.NOTIFICATION_CLICKED:return"notification_open";case Gs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function qs(){return(qs=(0,ne.Z)(function*(L,Y){const fe=Y.data;if(!fe.isFirebaseMessaging)return;L.onMessageHandler&&fe.messageType===Gs.PUSH_RECEIVED&&("function"==typeof L.onMessageHandler?L.onMessageHandler(Ss(fe)):L.onMessageHandler.next(Ss(fe)));const Pe=fe.data;Ol(Pe)&&"1"===Pe[os]&&(yield Lo(L,fe.messageType,Pe))})).apply(this,arguments)}const sa="@firebase/messaging";function tl(){return nl.apply(this,arguments)}function nl(){return(nl=(0,ne.Z)(function*(){try{yield(0,ae.eu)()}catch(L){return!1}return"undefined"!=typeof window&&(0,ae.hl)()&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,oe._registerComponent)(new Q.wA("messaging",L=>{const Y=new Ji(L.getProvider("app").getImmediate(),L.getProvider("installations-internal").getImmediate(),L.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",fe=>function(L,Y){return qs.apply(this,arguments)}(Y,fe)),Y},"PUBLIC")),(0,oe._registerComponent)(new Q.wA("messaging-internal",L=>{const Y=L.getProvider("messaging").getImmediate();return{getToken:Pe=>function(L,Y){return zs.apply(this,arguments)}(Y,Pe)}},"PRIVATE")),(0,oe.registerVersion)(sa,"0.9.19"),(0,oe.registerVersion)(sa,"0.9.19","esm2017");const un="analytics",hr="firebase_id",Ti="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",kt="https://www.googletagmanager.com/gtag/js",Jn=new ve.Yd("@firebase/analytics");function es(L){return Promise.all(L.map(Y=>Y.catch(fe=>fe)))}function lo(L,Y){const fe=document.createElement("script");fe.src=`${kt}?l=${L}&id=${Y}`,fe.async=!0,document.head.appendChild(fe)}function Fn(L,Y,fe,Pe,at,Tt){return oi.apply(this,arguments)}function oi(){return(oi=(0,ne.Z)(function*(L,Y,fe,Pe,at,Tt){const en=Pe[at];try{if(en)yield Y[en];else{const nr=(yield es(fe)).find(Ar=>Ar.measurementId===at);nr&&(yield Y[nr.appId])}}catch(In){Jn.error(In)}L("config",at,Tt)})).apply(this,arguments)}function Jt(L,Y,fe,Pe,at){return et.apply(this,arguments)}function et(){return(et=(0,ne.Z)(function*(L,Y,fe,Pe,at){try{let Tt=[];if(at&&at.send_to){let en=at.send_to;Array.isArray(en)||(en=[en]);const In=yield es(fe);for(const nr of en){const Ar=In.find(rr=>rr.measurementId===nr),wr=Ar&&Y[Ar.appId];if(!wr){Tt=[];break}Tt.push(wr)}}0===Tt.length&&(Tt=Object.values(Y)),yield Promise.all(Tt),L("event",Pe,at||{})}catch(Tt){Jn.error(Tt)}})).apply(this,arguments)}function Zl(L){const Y=window.document.getElementsByTagName("script");for(const fe of Object.values(Y))if(fe.src&&fe.src.includes(kt)&&fe.src.includes(L))return fe;return null}const Bs=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),as=new class{constructor(Y={},fe=1e3){this.throttleMetadata=Y,this.intervalMillis=fe}getThrottleMetadata(Y){return this.throttleMetadata[Y]}setThrottleMetadata(Y,fe){this.throttleMetadata[Y]=fe}deleteThrottleMetadata(Y){delete this.throttleMetadata[Y]}};function Uu(L){return new Headers({Accept:"application/json","x-goog-api-key":L})}function Ql(L){return $s.apply(this,arguments)}function $s(){return($s=(0,ne.Z)(function*(L){var Y;const{appId:fe,apiKey:Pe}=L,at={method:"GET",headers:Uu(Pe)},Tt=Ti.replace("{app-id}",fe),en=yield fetch(Tt,at);if(200!==en.status&&304!==en.status){let In="";try{const nr=yield en.json();(null===(Y=nr.error)||void 0===Y?void 0:Y.message)&&(In=nr.error.message)}catch(nr){}throw Bs.create("config-fetch-failed",{httpStatus:en.status,responseMessage:In})}return en.json()})).apply(this,arguments)}function Ma(L){return ur.apply(this,arguments)}function ur(){return(ur=(0,ne.Z)(function*(L,Y=as,fe){const{appId:Pe,apiKey:at,measurementId:Tt}=L.options;if(!Pe)throw Bs.create("no-app-id");if(!at){if(Tt)return{measurementId:Tt,appId:Pe};throw Bs.create("no-api-key")}const en=Y.getThrottleMetadata(Pe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},In=new oa;return setTimeout((0,ne.Z)(function*(){In.abort()}),void 0!==fe?fe:6e4),qo({appId:Pe,apiKey:at,measurementId:Tt},en,In,Y)})).apply(this,arguments)}function qo(L,Y,fe){return po.apply(this,arguments)}function po(){return(po=(0,ne.Z)(function*(L,{throttleEndTimeMillis:Y,backoffCount:fe},Pe,at=as){var Tt,en;const{appId:In,measurementId:nr}=L;try{yield pi(Pe,Y)}catch(Ar){if(nr)return Jn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${nr} provided in the "measurementId" field in the local Firebase config. [${null===(Tt=Ar)||void 0===Tt?void 0:Tt.message}]`),{appId:In,measurementId:nr};throw Ar}try{const Ar=yield Ql(L);return at.deleteThrottleMetadata(In),Ar}catch(Ar){const wr=Ar;if(!ar(wr)){if(at.deleteThrottleMetadata(In),nr)return Jn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${nr} provided in the "measurementId" field in the local Firebase config. [${null==wr?void 0:wr.message}]`),{appId:In,measurementId:nr};throw Ar}const rr=503===Number(null===(en=null==wr?void 0:wr.customData)||void 0===en?void 0:en.httpStatus)?(0,ae.$s)(fe,at.intervalMillis,30):(0,ae.$s)(fe,at.intervalMillis),Pi={throttleEndTimeMillis:Date.now()+rr,backoffCount:fe+1};return at.setThrottleMetadata(In,Pi),Jn.debug(`Calling attemptFetch again in ${rr} millis`),qo(L,Pi,Pe,at)}})).apply(this,arguments)}function pi(L,Y){return new Promise((fe,Pe)=>{const at=Math.max(Y-Date.now(),0),Tt=setTimeout(fe,at);L.addEventListener(()=>{clearTimeout(Tt),Pe(Bs.create("fetch-throttle",{throttleEndTimeMillis:Y}))})})}function ar(L){if(!(L instanceof ae.ZR&&L.customData))return!1;const Y=Number(L.customData.httpStatus);return 429===Y||500===Y||503===Y||504===Y}class oa{constructor(){this.listeners=[]}addEventListener(Y){this.listeners.push(Y)}abort(){this.listeners.forEach(Y=>Y())}}let Jr,go;function gi(){return(gi=(0,ne.Z)(function*(L,Y,fe,Pe,at){if(at&&at.global)L("event",fe,Pe);else{const Tt=yield Y;L("event",fe,Object.assign(Object.assign({},Pe),{send_to:Tt}))}})).apply(this,arguments)}function F(L){go=L}function A(L){Jr=L}function S(){return U.apply(this,arguments)}function U(){return(U=(0,ne.Z)(function*(){var L;if(!(0,ae.hl)())return Jn.warn(Bs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(Y){return Jn.warn(Bs.create("indexeddb-unavailable",{errorInfo:null===(L=Y)||void 0===L?void 0:L.toString()}).message),!1}return!0})).apply(this,arguments)}function ge(){return(ge=(0,ne.Z)(function*(L,Y,fe,Pe,at,Tt,en){var In;const nr=Ma(L);nr.then(ui=>{fe[ui.measurementId]=ui.appId,L.options.measurementId&&ui.measurementId!==L.options.measurementId&&Jn.warn(`The measurement ID in the local Firebase config (${L.options.measurementId}) does not match the measurement ID fetched from the server (${ui.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ui=>Jn.error(ui)),Y.push(nr);const Ar=S().then(ui=>{if(ui)return Pe.getId()}),[wr,rr]=yield Promise.all([nr,Ar]);Zl(Tt)||lo(Tt,wr.measurementId),go&&(at("consent","default",go),F(void 0)),at("js",new Date);const Pi=null!==(In=null==en?void 0:en.config)&&void 0!==In?In:{};return Pi.origin="firebase",Pi.update=!0,null!=rr&&(Pi[hr]=rr),at("config",wr.measurementId,Pi),Jr&&(at("set",Jr),A(void 0)),wr.measurementId})).apply(this,arguments)}class Le{constructor(Y){this.app=Y}_delete(){return delete pe[this.app.options.appId],Promise.resolve()}}let pe={},Pt=[];const Cn={};let Br,vr,Lr="dataLayer",ms=!1;function Qr(L,Y,fe){!function(){const L=[];if((0,ae.ru)()&&L.push("This is a browser extension environment."),(0,ae.zI)()||L.push("Cookies are not available."),L.length>0){const Y=L.map((Pe,at)=>`(${at+1}) ${Pe}`).join(" "),fe=Bs.create("invalid-analytics-context",{errorInfo:Y});Jn.warn(fe.message)}}();const Pe=L.options.appId;if(!Pe)throw Bs.create("no-app-id");if(!L.options.apiKey){if(!L.options.measurementId)throw Bs.create("no-api-key");Jn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${L.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=pe[Pe])throw Bs.create("already-exists",{id:Pe});if(!ms){!function(L){let Y=[];Array.isArray(window[L])?Y=window[L]:window[L]=Y}(Lr);const{wrappedGtag:Tt,gtagCore:en}=function(L,Y,fe,Pe,at){let Tt=function(...en){window[Pe].push(arguments)};return window[at]&&"function"==typeof window[at]&&(Tt=window[at]),window[at]=function(L,Y,fe,Pe){function Tt(){return(Tt=(0,ne.Z)(function*(en,In,nr){try{"event"===en?yield Jt(L,Y,fe,In,nr):"config"===en?yield Fn(L,Y,fe,Pe,In,nr):"consent"===en?L("consent","update",nr):L("set",In)}catch(Ar){Jn.error(Ar)}})).apply(this,arguments)}return function(en,In,nr){return Tt.apply(this,arguments)}}(Tt,L,Y,fe),{gtagCore:Tt,wrappedGtag:window[at]}}(pe,Pt,Cn,Lr,"gtag");vr=Tt,Br=en,ms=!0}return pe[Pe]=function(L,Y,fe,Pe,at,Tt,en){return ge.apply(this,arguments)}(L,Pt,Cn,Y,Br,Lr,fe),new Le(L)}function Pa(){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,ne.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(L){return!1}})).apply(this,arguments)}const ni="@firebase/analytics";(0,oe._registerComponent)(new Q.wA(un,(Y,{options:fe})=>Qr(Y.getProvider("app").getImmediate(),Y.getProvider("installations-internal").getImmediate(),fe),"PUBLIC")),(0,oe._registerComponent)(new Q.wA("analytics-internal",function(Y){try{const fe=Y.getProvider(un).getImmediate();return{logEvent:(Pe,at,Tt)=>function(L,Y,fe,Pe){L=(0,ae.m9)(L),function(L,Y,fe,Pe,at){return gi.apply(this,arguments)}(vr,pe[L.app.options.appId],Y,fe,Pe).catch(at=>Jn.error(at))}(fe,Pe,at,Tt)}}catch(fe){throw Bs.create("interop-component-reg-failed",{reason:fe})}},"PRIVATE")),(0,oe.registerVersion)(ni,"0.8.3"),(0,oe.registerVersion)(ni,"0.8.3","esm2017");var ud=B(7771),Co=B(3637),xi=B(8891),vl=B(3342),ts=B(3101),Xl=B(309);const rl=new E.GfV("7.4.1"),Jl="__angularfire_symbol__analyticsIsSupportedValue",Ea="__angularfire_symbol__analyticsIsSupported",cs="__angularfire_symbol__remoteConfigIsSupportedValue",xs="__angularfire_symbol__remoteConfigIsSupported",Ko="__angularfire_symbol__messagingIsSupportedValue",yo="__angularfire_symbol__messagingIsSupported";function El(L,Y,fe){if(Y){if(1===Y.length)return Y[0];const Tt=Y.filter(en=>en.app===fe);if(1===Tt.length)return Tt[0]}return fe.container.getProvider(L).getImmediate({optional:!0})}globalThis[Ea]||(globalThis[Ea]=Pa().then(L=>globalThis[Jl]=L).catch(()=>globalThis[Jl]=!1)),globalThis[yo]||(globalThis[yo]=tl().then(L=>globalThis[Ko]=L).catch(()=>globalThis[Ko]=!1)),globalThis[xs]||(globalThis[xs]=Hs().then(L=>globalThis[cs]=L).catch(()=>globalThis[cs]=!1));const Kd=(L,Y)=>{const fe=Y?[Y]:(0,O.C6)(),Pe=[];return fe.forEach(at=>{at.container.getProvider(L).instances.forEach(en=>{Pe.includes(en)||Pe.push(en)})}),Pe};function ua(){}class Ks{constructor(Y,fe=ud.N){this.zone=Y,this.delegate=fe}now(){return this.delegate.now()}schedule(Y,fe,Pe){const at=this.zone;return this.delegate.schedule(function(en){at.runGuarded(()=>{Y.apply(this,[en])})},fe,Pe)}}class ba{constructor(Y){this.zone=Y,this.task=null}call(Y,fe){const Pe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ua,{},ua,ua)),fe.pipe((0,vl.b)({next:Pe,complete:Pe,error:Pe})).subscribe(Y).add(Pe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Fa=(()=>{class L{constructor(fe){this.ngZone=fe,this.outsideAngular=fe.runOutsideAngular(()=>new Ks(Zone.current)),this.insideAngular=fe.run(()=>new Ks(Zone.current,Co.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return L.\u0275fac=function(fe){return new(fe||L)(E.LFG(E.R0b))},L.\u0275prov=E.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})();function ca(){const L=globalThis.\u0275AngularFireScheduler;if(!L)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return L}function eu(L){return ca().ngZone.runOutsideAngular(()=>L())}function Ca(L){return ca().ngZone.run(()=>L())}function tu(L){return ca(),function(L){return function(fe){return(fe=fe.lift(new ba(L.ngZone))).pipe((0,ts.R)(L.outsideAngular),(0,Xl.QV)(L.insideAngular))}}(ca())(L)}const La=(L,Y)=>function(){const Pe=arguments;return Y&&setTimeout(()=>{"scheduled"===Y.state&&Y.invoke()},10),Ca(()=>L.apply(void 0,Pe))},Il=(L,Y)=>function(){let fe;const Pe=arguments;for(let Tt=0;Tt<arguments.length;Tt++)"function"==typeof Pe[Tt]&&(Y&&(fe||(fe=Ca(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ua,{},ua,ua)))),Pe[Tt]=La(Pe[Tt],fe));const at=eu(()=>L.apply(this,Pe));if(!Y){if(at instanceof xi.y){const Tt=ca();return at.pipe((0,ts.R)(Tt.outsideAngular),(0,Xl.QV)(Tt.insideAngular))}return Ca(()=>at)}return at instanceof xi.y?at.pipe(tu):at instanceof Promise?Ca(()=>new Promise((Tt,en)=>at.then(In=>Ca(()=>Tt(In)),In=>Ca(()=>en(In))))):"function"==typeof at&&fe?function(){return setTimeout(()=>{fe&&"scheduled"===fe.state&&fe.invoke()},10),at.apply(this,arguments)}:Ca(()=>at)}},665:(tn,Ze,B)=>{"use strict";B.d(Ze,{qu:()=>wt,u:()=>Ne,sg:()=>hi,u5:()=>K,JU:()=>Ce,a5:()=>cr,JJ:()=>zr,JL:()=>kr,UX:()=>be,kI:()=>jt,_Y:()=>H});var E=B(7716),O=B(8583),ne=B(8891),oe=B(9796),ae=B(8002),Q=B(1555),ve=B(4402);function Te(W,$){return new ne.y(k=>{const ue=W.length;if(0===ue)return void k.complete();const ot=new Array(ue);let an=0,Zn=0;for(let Ur=0;Ur<ue;Ur++){const Ci=(0,ve.D)(W[Ur]);let li=!1;k.add(Ci.subscribe({next:si=>{li||(li=!0,Zn++),ot[Ur]=si},error:si=>k.error(si),complete:()=>{an++,(an===ue||!li)&&(Zn===ue&&k.next($?$.reduce((si,jr,Qn)=>(si[jr]=ot[Qn],si),{}):ot),k.complete())}}))}})}let ie=(()=>{class W{constructor(k,ue){this._renderer=k,this._elementRef=ue,this.onChange=ot=>{},this.onTouched=()=>{}}setProperty(k,ue){this._renderer.setProperty(this._elementRef.nativeElement,k,ue)}registerOnTouched(k){this.onTouched=k}registerOnChange(k){this.onChange=k}setDisabledState(k){this.setProperty("disabled",k)}}return W.\u0275fac=function(k){return new(k||W)(E.Y36(E.Qsj),E.Y36(E.SBq))},W.\u0275dir=E.lG2({type:W}),W})(),me=(()=>{class W extends ie{}return W.\u0275fac=function(){let $;return function(ue){return($||($=E.n5z(W)))(ue||W)}}(),W.\u0275dir=E.lG2({type:W,features:[E.qOj]}),W})();const Ce=new E.OlP("NgValueAccessor"),Xe={provide:Ce,useExisting:(0,E.Gpc)(()=>Ae),multi:!0},je=new E.OlP("CompositionEventMode");let Ae=(()=>{class W extends ie{constructor(k,ue,ot){super(k,ue),this._compositionMode=ot,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const W=(0,O.q)()?(0,O.q)().getUserAgent():"";return/android (\d+)/.test(W.toLowerCase())}())}writeValue(k){this.setProperty("value",null==k?"":k)}_handleInput(k){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(k)}_compositionStart(){this._composing=!0}_compositionEnd(k){this._composing=!1,this._compositionMode&&this.onChange(k)}}return W.\u0275fac=function(k){return new(k||W)(E.Y36(E.Qsj),E.Y36(E.SBq),E.Y36(je,8))},W.\u0275dir=E.lG2({type:W,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(k,ue){1&k&&E.NdJ("input",function(an){return ue._handleInput(an.target.value)})("blur",function(){return ue.onTouched()})("compositionstart",function(){return ue._compositionStart()})("compositionend",function(an){return ue._compositionEnd(an.target.value)})},features:[E._Bn([Xe]),E.qOj]}),W})();function $e(W){return null==W||0===W.length}function Fe(W){return null!=W&&"number"==typeof W.length}const Me=new E.OlP("NgValidators"),Je=new E.OlP("NgAsyncValidators"),ct=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class jt{static min($){return W=$,$=>{if($e($.value)||$e(W))return null;const k=parseFloat($.value);return!isNaN(k)&&k<W?{min:{min:W,actual:$.value}}:null};var W}static max($){return W=$,$=>{if($e($.value)||$e(W))return null;const k=parseFloat($.value);return!isNaN(k)&&k>W?{max:{max:W,actual:$.value}}:null};var W}static required($){return $e($.value)?{required:!0}:null}static requiredTrue($){return!0===$.value?null:{required:!0}}static email($){return $e((W=$).value)||ct.test(W.value)?null:{email:!0};var W}static minLength($){return W=$,$=>$e($.value)||!Fe($.value)?null:$.value.length<W?{minlength:{requiredLength:W,actualLength:$.value.length}}:null;var W}static maxLength($){return W=$,$=>Fe($.value)&&$.value.length>W?{maxlength:{requiredLength:W,actualLength:$.value.length}}:null;var W}static pattern($){return function(W){if(!W)return wn;let $,k;return"string"==typeof W?(k="","^"!==W.charAt(0)&&(k+="^"),k+=W,"$"!==W.charAt(W.length-1)&&(k+="$"),$=new RegExp(k)):(k=W.toString(),$=W),ue=>{if($e(ue.value))return null;const ot=ue.value;return $.test(ot)?null:{pattern:{requiredPattern:k,actualValue:ot}}}}($)}static nullValidator($){return null}static compose($){return Rt($)}static composeAsync($){return Lt($)}}function wn(W){return null}function pn(W){return null!=W}function bt(W){const $=(0,E.QGY)(W)?(0,ve.D)(W):W;return(0,E.CqO)($),$}function vt(W){let $={};return W.forEach(k=>{$=null!=k?Object.assign(Object.assign({},$),k):$}),0===Object.keys($).length?null:$}function ht(W,$){return $.map(k=>k(W))}function dt(W){return W.map($=>function(W){return!W.validate}($)?$:k=>$.validate(k))}function Rt(W){if(!W)return null;const $=W.filter(pn);return 0==$.length?null:function(k){return vt(ht(k,$))}}function Zt(W){return null!=W?Rt(dt(W)):null}function Lt(W){if(!W)return null;const $=W.filter(pn);return 0==$.length?null:function(k){return function(...W){if(1===W.length){const $=W[0];if((0,oe.k)($))return Te($,null);if((0,Q.K)($)&&Object.getPrototypeOf($)===Object.prototype){const k=Object.keys($);return Te(k.map(ue=>$[ue]),k)}}if("function"==typeof W[W.length-1]){const $=W.pop();return Te(W=1===W.length&&(0,oe.k)(W[0])?W[0]:W,null).pipe((0,ae.U)(k=>$(...k)))}return Te(W,null)}(ht(k,$).map(bt)).pipe((0,ae.U)(vt))}}function Gt(W){return null!=W?Lt(dt(W)):null}function Bn(W,$){return null===W?[$]:Array.isArray(W)?[...W,$]:[W,$]}function ir(W){return W._rawValidators}function Nn(W){return W._rawAsyncValidators}function Dn(W){return W?Array.isArray(W)?W:[W]:[]}function qn(W,$){return Array.isArray(W)?W.includes($):W===$}function Gr(W,$){const k=Dn($);return Dn(W).forEach(ot=>{qn(k,ot)||k.push(ot)}),k}function Tr(W,$){return Dn($).filter(k=>!qn(W,k))}let Ft=(()=>{class W{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(k){this._rawValidators=k||[],this._composedValidatorFn=Zt(this._rawValidators)}_setAsyncValidators(k){this._rawAsyncValidators=k||[],this._composedAsyncValidatorFn=Gt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(k){this._onDestroyCallbacks.push(k)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(k=>k()),this._onDestroyCallbacks=[]}reset(k){this.control&&this.control.reset(k)}hasError(k,ue){return!!this.control&&this.control.hasError(k,ue)}getError(k,ue){return this.control?this.control.getError(k,ue):null}}return W.\u0275fac=function(k){return new(k||W)},W.\u0275dir=E.lG2({type:W}),W})(),Wn=(()=>{class W extends Ft{get formDirective(){return null}get path(){return null}}return W.\u0275fac=function(){let $;return function(ue){return($||($=E.n5z(W)))(ue||W)}}(),W.\u0275dir=E.lG2({type:W,features:[E.qOj]}),W})();class cr extends Ft{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class gn{constructor($){this._cd=$}is($){var k,ue,ot;return"submitted"===$?!!(null===(k=this._cd)||void 0===k?void 0:k.submitted):!!(null===(ot=null===(ue=this._cd)||void 0===ue?void 0:ue.control)||void 0===ot?void 0:ot[$])}}let zr=(()=>{class W extends gn{constructor(k){super(k)}}return W.\u0275fac=function(k){return new(k||W)(E.Y36(cr,2))},W.\u0275dir=E.lG2({type:W,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(k,ue){2&k&&E.ekj("ng-untouched",ue.is("untouched"))("ng-touched",ue.is("touched"))("ng-pristine",ue.is("pristine"))("ng-dirty",ue.is("dirty"))("ng-valid",ue.is("valid"))("ng-invalid",ue.is("invalid"))("ng-pending",ue.is("pending"))},features:[E.qOj]}),W})(),kr=(()=>{class W extends gn{constructor(k){super(k)}}return W.\u0275fac=function(k){return new(k||W)(E.Y36(Wn,10))},W.\u0275dir=E.lG2({type:W,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(k,ue){2&k&&E.ekj("ng-untouched",ue.is("untouched"))("ng-touched",ue.is("touched"))("ng-pristine",ue.is("pristine"))("ng-dirty",ue.is("dirty"))("ng-valid",ue.is("valid"))("ng-invalid",ue.is("invalid"))("ng-pending",ue.is("pending"))("ng-submitted",ue.is("submitted"))},features:[E.qOj]}),W})();function Xn(W,$){on(W,$),$.valueAccessor.writeValue(W.value),function(W,$){$.valueAccessor.registerOnChange(k=>{W._pendingValue=k,W._pendingChange=!0,W._pendingDirty=!0,"change"===W.updateOn&&rn(W,$)})}(W,$),function(W,$){const k=(ue,ot)=>{$.valueAccessor.writeValue(ue),ot&&$.viewToModelUpdate(ue)};W.registerOnChange(k),$._registerOnDestroy(()=>{W._unregisterOnChange(k)})}(W,$),function(W,$){$.valueAccessor.registerOnTouched(()=>{W._pendingTouched=!0,"blur"===W.updateOn&&W._pendingChange&&rn(W,$),"submit"!==W.updateOn&&W.markAsTouched()})}(W,$),function(W,$){if($.valueAccessor.setDisabledState){const k=ue=>{$.valueAccessor.setDisabledState(ue)};W.registerOnDisabledChange(k),$._registerOnDestroy(()=>{W._unregisterOnDisabledChange(k)})}}(W,$)}function Gn(W,$,k=!0){const ue=()=>{};$.valueAccessor&&($.valueAccessor.registerOnChange(ue),$.valueAccessor.registerOnTouched(ue)),Ot(W,$),W&&($._invokeOnDestroyCallbacks(),W._registerOnCollectionChange(()=>{}))}function Yn(W,$){W.forEach(k=>{k.registerOnValidatorChange&&k.registerOnValidatorChange($)})}function on(W,$){const k=ir(W);null!==$.validator?W.setValidators(Bn(k,$.validator)):"function"==typeof k&&W.setValidators([k]);const ue=Nn(W);null!==$.asyncValidator?W.setAsyncValidators(Bn(ue,$.asyncValidator)):"function"==typeof ue&&W.setAsyncValidators([ue]);const ot=()=>W.updateValueAndValidity();Yn($._rawValidators,ot),Yn($._rawAsyncValidators,ot)}function Ot(W,$){let k=!1;if(null!==W){if(null!==$.validator){const ot=ir(W);if(Array.isArray(ot)&&ot.length>0){const an=ot.filter(Zn=>Zn!==$.validator);an.length!==ot.length&&(k=!0,W.setValidators(an))}}if(null!==$.asyncValidator){const ot=Nn(W);if(Array.isArray(ot)&&ot.length>0){const an=ot.filter(Zn=>Zn!==$.asyncValidator);an.length!==ot.length&&(k=!0,W.setAsyncValidators(an))}}}const ue=()=>{};return Yn($._rawValidators,ue),Yn($._rawAsyncValidators,ue),k}function rn(W,$){W._pendingDirty&&W.markAsDirty(),W.setValue(W._pendingValue,{emitModelToViewChange:!1}),$.viewToModelUpdate(W._pendingValue),W._pendingChange=!1}function Ln(W,$){const k=W.indexOf($);k>-1&&W.splice(k,1)}const kn="VALID",ln="INVALID",yn="PENDING",pr="DISABLED";function Vt(W){return(nn(W)?W.validators:W)||null}function Nt(W){return Array.isArray(W)?Zt(W):W||null}function _n(W,$){return(nn($)?$.asyncValidators:W)||null}function Sn(W){return Array.isArray(W)?Gt(W):W||null}function nn(W){return null!=W&&!Array.isArray(W)&&"object"==typeof W}class Or{constructor($,k){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=$,this._rawAsyncValidators=k,this._composedValidatorFn=Nt(this._rawValidators),this._composedAsyncValidatorFn=Sn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator($){this._rawValidators=this._composedValidatorFn=$}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator($){this._rawAsyncValidators=this._composedAsyncValidatorFn=$}get parent(){return this._parent}get valid(){return this.status===kn}get invalid(){return this.status===ln}get pending(){return this.status==yn}get disabled(){return this.status===pr}get enabled(){return this.status!==pr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators($){this._rawValidators=$,this._composedValidatorFn=Nt($)}setAsyncValidators($){this._rawAsyncValidators=$,this._composedAsyncValidatorFn=Sn($)}addValidators($){this.setValidators(Gr($,this._rawValidators))}addAsyncValidators($){this.setAsyncValidators(Gr($,this._rawAsyncValidators))}removeValidators($){this.setValidators(Tr($,this._rawValidators))}removeAsyncValidators($){this.setAsyncValidators(Tr($,this._rawAsyncValidators))}hasValidator($){return qn(this._rawValidators,$)}hasAsyncValidator($){return qn(this._rawAsyncValidators,$)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched($={}){this.touched=!0,this._parent&&!$.onlySelf&&this._parent.markAsTouched($)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild($=>$.markAllAsTouched())}markAsUntouched($={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(k=>{k.markAsUntouched({onlySelf:!0})}),this._parent&&!$.onlySelf&&this._parent._updateTouched($)}markAsDirty($={}){this.pristine=!1,this._parent&&!$.onlySelf&&this._parent.markAsDirty($)}markAsPristine($={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(k=>{k.markAsPristine({onlySelf:!0})}),this._parent&&!$.onlySelf&&this._parent._updatePristine($)}markAsPending($={}){this.status=yn,!1!==$.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!$.onlySelf&&this._parent.markAsPending($)}disable($={}){const k=this._parentMarkedDirty($.onlySelf);this.status=pr,this.errors=null,this._forEachChild(ue=>{ue.disable(Object.assign(Object.assign({},$),{onlySelf:!0}))}),this._updateValue(),!1!==$.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},$),{skipPristineCheck:k})),this._onDisabledChange.forEach(ue=>ue(!0))}enable($={}){const k=this._parentMarkedDirty($.onlySelf);this.status=kn,this._forEachChild(ue=>{ue.enable(Object.assign(Object.assign({},$),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:$.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},$),{skipPristineCheck:k})),this._onDisabledChange.forEach(ue=>ue(!1))}_updateAncestors($){this._parent&&!$.onlySelf&&(this._parent.updateValueAndValidity($),$.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent($){this._parent=$}updateValueAndValidity($={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===kn||this.status===yn)&&this._runAsyncValidator($.emitEvent)),!1!==$.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!$.onlySelf&&this._parent.updateValueAndValidity($)}_updateTreeValidity($={emitEvent:!0}){this._forEachChild(k=>k._updateTreeValidity($)),this.updateValueAndValidity({onlySelf:!0,emitEvent:$.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?pr:kn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator($){if(this.asyncValidator){this.status=yn,this._hasOwnPendingAsyncValidator=!0;const k=bt(this.asyncValidator(this));this._asyncValidationSubscription=k.subscribe(ue=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ue,{emitEvent:$})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors($,k={}){this.errors=$,this._updateControlsErrors(!1!==k.emitEvent)}get($){return function(W,$,k){if(null==$||(Array.isArray($)||($=$.split(".")),Array.isArray($)&&0===$.length))return null;let ue=W;return $.forEach(ot=>{ue=ue instanceof Nr?ue.controls.hasOwnProperty(ot)?ue.controls[ot]:null:ue instanceof gr&&ue.at(ot)||null}),ue}(this,$)}getError($,k){const ue=k?this.get(k):this;return ue&&ue.errors?ue.errors[$]:null}hasError($,k){return!!this.getError($,k)}get root(){let $=this;for(;$._parent;)$=$._parent;return $}_updateControlsErrors($){this.status=this._calculateStatus(),$&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors($)}_initObservables(){this.valueChanges=new E.vpe,this.statusChanges=new E.vpe}_calculateStatus(){return this._allControlsDisabled()?pr:this.errors?ln:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(yn)?yn:this._anyControlsHaveStatus(ln)?ln:kn}_anyControlsHaveStatus($){return this._anyControls(k=>k.status===$)}_anyControlsDirty(){return this._anyControls($=>$.dirty)}_anyControlsTouched(){return this._anyControls($=>$.touched)}_updatePristine($={}){this.pristine=!this._anyControlsDirty(),this._parent&&!$.onlySelf&&this._parent._updatePristine($)}_updateTouched($={}){this.touched=this._anyControlsTouched(),this._parent&&!$.onlySelf&&this._parent._updateTouched($)}_isBoxedValue($){return"object"==typeof $&&null!==$&&2===Object.keys($).length&&"value"in $&&"disabled"in $}_registerOnCollectionChange($){this._onCollectionChange=$}_setUpdateStrategy($){nn($)&&null!=$.updateOn&&(this._updateOn=$.updateOn)}_parentMarkedDirty($){return!$&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class yr extends Or{constructor($=null,k,ue){super(Vt(k),_n(ue,k)),this._onChange=[],this._applyFormState($),this._setUpdateStrategy(k),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue($,k={}){this.value=this._pendingValue=$,this._onChange.length&&!1!==k.emitModelToViewChange&&this._onChange.forEach(ue=>ue(this.value,!1!==k.emitViewToModelChange)),this.updateValueAndValidity(k)}patchValue($,k={}){this.setValue($,k)}reset($=null,k={}){this._applyFormState($),this.markAsPristine(k),this.markAsUntouched(k),this.setValue(this.value,k),this._pendingChange=!1}_updateValue(){}_anyControls($){return!1}_allControlsDisabled(){return this.disabled}registerOnChange($){this._onChange.push($)}_unregisterOnChange($){Ln(this._onChange,$)}registerOnDisabledChange($){this._onDisabledChange.push($)}_unregisterOnDisabledChange($){Ln(this._onDisabledChange,$)}_forEachChild($){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState($){this._isBoxedValue($)?(this.value=this._pendingValue=$.value,$.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=$}}class Nr extends Or{constructor($,k,ue){super(Vt(k),_n(ue,k)),this.controls=$,this._initObservables(),this._setUpdateStrategy(k),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl($,k){return this.controls[$]?this.controls[$]:(this.controls[$]=k,k.setParent(this),k._registerOnCollectionChange(this._onCollectionChange),k)}addControl($,k,ue={}){this.registerControl($,k),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}removeControl($,k={}){this.controls[$]&&this.controls[$]._registerOnCollectionChange(()=>{}),delete this.controls[$],this.updateValueAndValidity({emitEvent:k.emitEvent}),this._onCollectionChange()}setControl($,k,ue={}){this.controls[$]&&this.controls[$]._registerOnCollectionChange(()=>{}),delete this.controls[$],k&&this.registerControl($,k),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}contains($){return this.controls.hasOwnProperty($)&&this.controls[$].enabled}setValue($,k={}){this._checkAllValuesPresent($),Object.keys($).forEach(ue=>{this._throwIfControlMissing(ue),this.controls[ue].setValue($[ue],{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k)}patchValue($,k={}){null!=$&&(Object.keys($).forEach(ue=>{this.controls[ue]&&this.controls[ue].patchValue($[ue],{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k))}reset($={},k={}){this._forEachChild((ue,ot)=>{ue.reset($[ot],{onlySelf:!0,emitEvent:k.emitEvent})}),this._updatePristine(k),this._updateTouched(k),this.updateValueAndValidity(k)}getRawValue(){return this._reduceChildren({},($,k,ue)=>($[ue]=k instanceof yr?k.value:k.getRawValue(),$))}_syncPendingControls(){let $=this._reduceChildren(!1,(k,ue)=>!!ue._syncPendingControls()||k);return $&&this.updateValueAndValidity({onlySelf:!0}),$}_throwIfControlMissing($){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[$])throw new Error(`Cannot find form control with name: ${$}.`)}_forEachChild($){Object.keys(this.controls).forEach(k=>{const ue=this.controls[k];ue&&$(ue,k)})}_setUpControls(){this._forEachChild($=>{$.setParent(this),$._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls($){for(const k of Object.keys(this.controls)){const ue=this.controls[k];if(this.contains(k)&&$(ue))return!0}return!1}_reduceValue(){return this._reduceChildren({},($,k,ue)=>((k.enabled||this.disabled)&&($[ue]=k.value),$))}_reduceChildren($,k){let ue=$;return this._forEachChild((ot,an)=>{ue=k(ue,ot,an)}),ue}_allControlsDisabled(){for(const $ of Object.keys(this.controls))if(this.controls[$].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent($){this._forEachChild((k,ue)=>{if(void 0===$[ue])throw new Error(`Must supply a value for form control with name: '${ue}'.`)})}}class gr extends Or{constructor($,k,ue){super(Vt(k),_n(ue,k)),this.controls=$,this._initObservables(),this._setUpdateStrategy(k),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at($){return this.controls[$]}push($,k={}){this.controls.push($),this._registerControl($),this.updateValueAndValidity({emitEvent:k.emitEvent}),this._onCollectionChange()}insert($,k,ue={}){this.controls.splice($,0,k),this._registerControl(k),this.updateValueAndValidity({emitEvent:ue.emitEvent})}removeAt($,k={}){this.controls[$]&&this.controls[$]._registerOnCollectionChange(()=>{}),this.controls.splice($,1),this.updateValueAndValidity({emitEvent:k.emitEvent})}setControl($,k,ue={}){this.controls[$]&&this.controls[$]._registerOnCollectionChange(()=>{}),this.controls.splice($,1),k&&(this.controls.splice($,0,k),this._registerControl(k)),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue($,k={}){this._checkAllValuesPresent($),$.forEach((ue,ot)=>{this._throwIfControlMissing(ot),this.at(ot).setValue(ue,{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k)}patchValue($,k={}){null!=$&&($.forEach((ue,ot)=>{this.at(ot)&&this.at(ot).patchValue(ue,{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k))}reset($=[],k={}){this._forEachChild((ue,ot)=>{ue.reset($[ot],{onlySelf:!0,emitEvent:k.emitEvent})}),this._updatePristine(k),this._updateTouched(k),this.updateValueAndValidity(k)}getRawValue(){return this.controls.map($=>$ instanceof yr?$.value:$.getRawValue())}clear($={}){this.controls.length<1||(this._forEachChild(k=>k._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:$.emitEvent}))}_syncPendingControls(){let $=this.controls.reduce((k,ue)=>!!ue._syncPendingControls()||k,!1);return $&&this.updateValueAndValidity({onlySelf:!0}),$}_throwIfControlMissing($){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at($))throw new Error(`Cannot find form control at index ${$}`)}_forEachChild($){this.controls.forEach((k,ue)=>{$(k,ue)})}_updateValue(){this.value=this.controls.filter($=>$.enabled||this.disabled).map($=>$.value)}_anyControls($){return this.controls.some(k=>k.enabled&&$(k))}_setUpControls(){this._forEachChild($=>this._registerControl($))}_checkAllValuesPresent($){this._forEachChild((k,ue)=>{if(void 0===$[ue])throw new Error(`Must supply a value for form control at index: ${ue}.`)})}_allControlsDisabled(){for(const $ of this.controls)if($.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl($){$.setParent(this),$._registerOnCollectionChange(this._onCollectionChange)}}let H=(()=>{class W{}return W.\u0275fac=function(k){return new(k||W)},W.\u0275dir=E.lG2({type:W,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),W})(),_t=(()=>{class W{}return W.\u0275fac=function(k){return new(k||W)},W.\u0275mod=E.oAB({type:W}),W.\u0275inj=E.cJS({}),W})();const Pn=new E.OlP("NgModelWithFormControlWarning"),qi={provide:Wn,useExisting:(0,E.Gpc)(()=>hi)};let hi=(()=>{class W extends Wn{constructor(k,ue){super(),this.validators=k,this.asyncValidators=ue,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new E.vpe,this._setValidators(k),this._setAsyncValidators(ue)}ngOnChanges(k){this._checkFormPresent(),k.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ot(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(k){const ue=this.form.get(k.path);return Xn(ue,k),ue.updateValueAndValidity({emitEvent:!1}),this.directives.push(k),ue}getControl(k){return this.form.get(k.path)}removeControl(k){Gn(k.control||null,k,!1),Ln(this.directives,k)}addFormGroup(k){this._setUpFormContainer(k)}removeFormGroup(k){this._cleanUpFormContainer(k)}getFormGroup(k){return this.form.get(k.path)}addFormArray(k){this._setUpFormContainer(k)}removeFormArray(k){this._cleanUpFormContainer(k)}getFormArray(k){return this.form.get(k.path)}updateModel(k,ue){this.form.get(k.path).setValue(ue)}onSubmit(k){return this.submitted=!0,function(W,$){W._syncPendingControls(),$.forEach(k=>{const ue=k.control;"submit"===ue.updateOn&&ue._pendingChange&&(k.viewToModelUpdate(ue._pendingValue),ue._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(k),!1}onReset(){this.resetForm()}resetForm(k){this.form.reset(k),this.submitted=!1}_updateDomValue(){this.directives.forEach(k=>{const ue=k.control,ot=this.form.get(k.path);ue!==ot&&(Gn(ue||null,k),ot instanceof yr&&(Xn(ot,k),k.control=ot))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(k){const ue=this.form.get(k.path);(function(W,$){on(W,$)})(ue,k),ue.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(k){if(this.form){const ue=this.form.get(k.path);ue&&function(W,$){return Ot(W,$)}(ue,k)&&ue.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){on(this.form,this),this._oldForm&&Ot(this._oldForm,this)}_checkFormPresent(){}}return W.\u0275fac=function(k){return new(k||W)(E.Y36(Me,10),E.Y36(Je,10))},W.\u0275dir=E.lG2({type:W,selectors:[["","formGroup",""]],hostBindings:function(k,ue){1&k&&E.NdJ("submit",function(an){return ue.onSubmit(an)})("reset",function(){return ue.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[E._Bn([qi]),E.qOj,E.TTD]}),W})();const Yi={provide:cr,useExisting:(0,E.Gpc)(()=>Ne)};let Ne=(()=>{class W extends cr{constructor(k,ue,ot,an,Zn){super(),this._ngModelWarningConfig=Zn,this._added=!1,this.update=new E.vpe,this._ngModelWarningSent=!1,this._parent=k,this._setValidators(ue),this._setAsyncValidators(ot),this.valueAccessor=function(W,$){if(!$)return null;let k,ue,ot;return Array.isArray($),$.forEach(an=>{an.constructor===Ae?k=an:function(W){return Object.getPrototypeOf(W.constructor)===me}(an)?ue=an:ot=an}),ot||ue||k||null}(0,an)}set isDisabled(k){}ngOnChanges(k){this._added||this._setUpControl(),function(W,$){if(!W.hasOwnProperty("model"))return!1;const k=W.model;return!!k.isFirstChange()||!Object.is($,k.currentValue)}(k,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(k){this.viewModel=k,this.update.emit(k)}get path(){return function(W,$){return[...$.path,W]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return W.\u0275fac=function(k){return new(k||W)(E.Y36(Wn,13),E.Y36(Me,10),E.Y36(Je,10),E.Y36(Ce,10),E.Y36(Pn,8))},W.\u0275dir=E.lG2({type:W,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[E._Bn([Yi]),E.qOj,E.TTD]}),W._ngModelWarningSentOnce=!1,W})(),le=(()=>{class W{}return W.\u0275fac=function(k){return new(k||W)},W.\u0275mod=E.oAB({type:W}),W.\u0275inj=E.cJS({imports:[[_t]]}),W})(),K=(()=>{class W{}return W.\u0275fac=function(k){return new(k||W)},W.\u0275mod=E.oAB({type:W}),W.\u0275inj=E.cJS({imports:[le]}),W})(),be=(()=>{class W{static withConfig(k){return{ngModule:W,providers:[{provide:Pn,useValue:k.warnOnNgModelWithFormControl}]}}}return W.\u0275fac=function(k){return new(k||W)},W.\u0275mod=E.oAB({type:W}),W.\u0275inj=E.cJS({imports:[le]}),W})(),wt=(()=>{class W{group(k,ue=null){const ot=this._reduceControls(k);let Ur,an=null,Zn=null;return null!=ue&&(function(W){return void 0!==W.asyncValidators||void 0!==W.validators||void 0!==W.updateOn}(ue)?(an=null!=ue.validators?ue.validators:null,Zn=null!=ue.asyncValidators?ue.asyncValidators:null,Ur=null!=ue.updateOn?ue.updateOn:void 0):(an=null!=ue.validator?ue.validator:null,Zn=null!=ue.asyncValidator?ue.asyncValidator:null)),new Nr(ot,{asyncValidators:Zn,updateOn:Ur,validators:an})}control(k,ue,ot){return new yr(k,ue,ot)}array(k,ue,ot){const an=k.map(Zn=>this._createControl(Zn));return new gr(an,ue,ot)}_reduceControls(k){const ue={};return Object.keys(k).forEach(ot=>{ue[ot]=this._createControl(k[ot])}),ue}_createControl(k){return k instanceof yr||k instanceof Nr||k instanceof gr?k:Array.isArray(k)?this.control(k[0],k.length>1?k[1]:null,k.length>2?k[2]:null):this.control(k)}}return W.\u0275fac=function(k){return new(k||W)},W.\u0275prov=(0,E.Yz7)({factory:function(){return new W},token:W,providedIn:be}),W})()},174:(tn,Ze,B)=>{"use strict";B.d(Ze,{gz:()=>ft,y6:()=>xn,OD:()=>Wn,eC:()=>hn,wm:()=>Mr,wN:()=>q,F0:()=>Fn,rH:()=>et,Bz:()=>ar,Hx:()=>_n});var E=B(8583),O=B(7716),ne=B(4869),oe=B(9796),ae=B(5197),Q=B(509),ve=B(6693);const re={};class ie{constructor(A){this.resultSelector=A}call(A,S){return S.subscribe(new me(A,this.resultSelector))}}class me extends ae.L{constructor(A,S){super(A),this.resultSelector=S,this.active=0,this.values=[],this.observables=[]}_next(A){this.values.push(re),this.observables.push(A)}_complete(){const A=this.observables,S=A.length;if(0===S)this.destination.complete();else{this.active=S,this.toRespond=S;for(let U=0;U<S;U++)this.add((0,Q.D)(this,A[U],void 0,U))}}notifyComplete(A){0==(this.active-=1)&&this.destination.complete()}notifyNext(A,S,U){const X=this.values,Le=this.toRespond?X[U]===re?--this.toRespond:this.toRespond:0;X[U]=S,0===Le&&(this.resultSelector?this._tryResultSelector(X):this.destination.next(X.slice()))}_tryResultSelector(A){let S;try{S=this.resultSelector.apply(this,A)}catch(U){return void this.destination.error(U)}this.destination.next(S)}}var Ce=B(8891),_e=B(4402),De=B(9193);function Xe(F){return new Ce.y(A=>{let S;try{S=F()}catch(X){return void A.error(X)}return(S?(0,_e.D)(S):(0,De.c)()).subscribe(A)})}var Ee=B(5917),je=B(6215),Ae=B(3410),$e=B(8071),Fe=B(2441),Me=B(9765),Je=B(5345);function ct(F){return function(S){const U=new jt(F),X=S.lift(U);return U.caught=X}}class jt{constructor(A){this.selector=A}call(A,S){return S.subscribe(new I(A,this.selector,this.caught))}}class I extends Je.Ds{constructor(A,S,U){super(A),this.selector=S,this.caught=U}error(A){if(!this.isStopped){let S;try{S=this.selector(A,this.caught)}catch(ge){return void super.error(ge)}this._unsubscribeAndRecycle();const U=new Je.IY(this);this.add(U);const X=(0,Je.ft)(S,U);X!==U&&this.add(X)}}}var rt=B(9773);function pt(F,A){return(0,rt.zg)(F,A,1)}var st=B(5435),mt=B(7393),lt=B(7108);function Dt(F){return function(S){return 0===F?(0,De.c)():S.lift(new At(F))}}class At{constructor(A){if(this.total=A,this.total<0)throw new lt.W}call(A,S){return S.subscribe(new wn(A,this.total))}}class wn extends mt.L{constructor(A,S){super(A),this.total=S,this.ring=new Array,this.count=0}_next(A){const S=this.ring,U=this.total,X=this.count++;S.length<U?S.push(A):S[X%U]=A}_complete(){const A=this.destination;let S=this.count;if(S>0){const U=this.count>=this.total?this.total:this.count,X=this.ring;for(let ge=0;ge<U;ge++){const Le=S++%U;A.next(X[Le])}}A.complete()}}var pn=B(4635),bt=B(5242),vt=B(4487),Ke=B(5319);class Rt{constructor(A){this.callback=A}call(A,S){return S.subscribe(new Zt(A,this.callback))}}class Zt extends mt.L{constructor(A,S){super(A),this.add(new Ke.w(S))}}var Lt=B(8002),Gt=B(3190),Bn=B(5257),ir=B(9761),Nn=B(2145),Dn=B(8049),qn=B(3342),Gr=B(1307),Tr=B(3282);class Ft{constructor(A,S){this.id=A,this.url=S}}class Wn extends Ft{constructor(A,S,U="imperative",X=null){super(A,S),this.navigationTrigger=U,this.restoredState=X}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class cr extends Ft{constructor(A,S,U){super(A,S),this.urlAfterRedirects=U}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class gn extends Ft{constructor(A,S,U){super(A,S),this.reason=U}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class sr extends Ft{constructor(A,S,U){super(A,S),this.error=U}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class lr extends Ft{constructor(A,S,U,X){super(A,S),this.urlAfterRedirects=U,this.state=X}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zr extends Ft{constructor(A,S,U,X){super(A,S),this.urlAfterRedirects=U,this.state=X}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kr extends Ft{constructor(A,S,U,X,ge){super(A,S),this.urlAfterRedirects=U,this.state=X,this.shouldActivate=ge}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ai extends Ft{constructor(A,S,U,X){super(A,S),this.urlAfterRedirects=U,this.state=X}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fr extends Ft{constructor(A,S,U,X){super(A,S),this.urlAfterRedirects=U,this.state=X}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dr{constructor(A){this.route=A}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class mi{constructor(A){this.route=A}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class dr{constructor(A){this.snapshot=A}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dn{constructor(A){this.snapshot=A}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ct{constructor(A){this.snapshot=A}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ci{constructor(A){this.snapshot=A}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class di{constructor(A,S,U){this.routerEvent=A,this.position=S,this.anchor=U}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const hn="primary";class Vn{constructor(A){this.params=A||{}}has(A){return Object.prototype.hasOwnProperty.call(this.params,A)}get(A){if(this.has(A)){const S=this.params[A];return Array.isArray(S)?S[0]:S}return null}getAll(A){if(this.has(A)){const S=this.params[A];return Array.isArray(S)?S:[S]}return[]}get keys(){return Object.keys(this.params)}}function Sr(F){return new Vn(F)}const br="ngNavigationCancelingError";function Xn(F){const A=Error("NavigationCancelingError: "+F);return A[br]=!0,A}function Yn(F,A,S){const U=S.path.split("/");if(U.length>F.length||"full"===S.pathMatch&&(A.hasChildren()||U.length<F.length))return null;const X={};for(let ge=0;ge<U.length;ge++){const Le=U[ge],pe=F[ge];if(Le.startsWith(":"))X[Le.substring(1)]=pe;else if(Le!==pe.path)return null}return{consumed:F.slice(0,U.length),posParams:X}}function on(F,A){const S=F?Object.keys(F):void 0,U=A?Object.keys(A):void 0;if(!S||!U||S.length!=U.length)return!1;let X;for(let ge=0;ge<S.length;ge++)if(X=S[ge],!Ot(F[X],A[X]))return!1;return!0}function Ot(F,A){if(Array.isArray(F)&&Array.isArray(A)){if(F.length!==A.length)return!1;const S=[...F].sort(),U=[...A].sort();return S.every((X,ge)=>U[ge]===X)}return F===A}function mn(F){return Array.prototype.concat.apply([],F)}function cn(F){return F.length>0?F[F.length-1]:null}function qt(F,A){for(const S in F)F.hasOwnProperty(S)&&A(F[S],S)}function Be(F){return(0,O.CqO)(F)?F:(0,O.QGY)(F)?(0,_e.D)(Promise.resolve(F)):(0,Ee.of)(F)}const Qe={exact:function ut(F,A,S){if(!Vt(F.segments,A.segments)||!kn(F.segments,A.segments,S)||F.numberOfChildren!==A.numberOfChildren)return!1;for(const U in A.children)if(!F.children[U]||!ut(F.children[U],A.children[U],S))return!1;return!0},subset:Ln},ke={exact:function(F,A){return on(F,A)},subset:function(F,A){return Object.keys(A).length<=Object.keys(F).length&&Object.keys(A).every(S=>Ot(F[S],A[S]))},ignored:()=>!0};function ye(F,A,S){return Qe[S.paths](F.root,A.root,S.matrixParams)&&ke[S.queryParams](F.queryParams,A.queryParams)&&!("exact"===S.fragment&&F.fragment!==A.fragment)}function Ln(F,A,S){return Tn(F,A,A.segments,S)}function Tn(F,A,S,U){if(F.segments.length>S.length){const X=F.segments.slice(0,S.length);return!(!Vt(X,S)||A.hasChildren()||!kn(X,S,U))}if(F.segments.length===S.length){if(!Vt(F.segments,S)||!kn(F.segments,S,U))return!1;for(const X in A.children)if(!F.children[X]||!Ln(F.children[X],A.children[X],U))return!1;return!0}{const X=S.slice(0,F.segments.length),ge=S.slice(F.segments.length);return!!(Vt(F.segments,X)&&kn(F.segments,X,U)&&F.children[hn])&&Tn(F.children[hn],A,ge,U)}}function kn(F,A,S){return A.every((U,X)=>ke[S](F[X].parameters,U.parameters))}class ln{constructor(A,S,U){this.root=A,this.queryParams=S,this.fragment=U}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Sr(this.queryParams)),this._queryParamMap}toString(){return nn.serialize(this)}}class yn{constructor(A,S){this.segments=A,this.children=S,this.parent=null,qt(S,(U,X)=>U.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Or(this)}}class pr{constructor(A,S){this.path=A,this.parameters=S}get parameterMap(){return this._parameterMap||(this._parameterMap=Sr(this.parameters)),this._parameterMap}toString(){return Ei(this)}}function Vt(F,A){return F.length===A.length&&F.every((S,U)=>S.path===A[U].path)}class _n{}class Sn{parse(A){const S=new nt(A);return new ln(S.parseRootSegment(),S.parseQueryParams(),S.parseFragment())}serialize(A){const S=`/${yr(A.root,!0)}`,U=function(F){const A=Object.keys(F).map(S=>{const U=F[S];return Array.isArray(U)?U.map(X=>`${gr(S)}=${gr(X)}`).join("&"):`${gr(S)}=${gr(U)}`}).filter(S=>!!S);return A.length?`?${A.join("&")}`:""}(A.queryParams);var F;return`${S}${U}${"string"==typeof A.fragment?`#${F=A.fragment,encodeURI(F)}`:""}`}}const nn=new Sn;function Or(F){return F.segments.map(A=>Ei(A)).join("/")}function yr(F,A){if(!F.hasChildren())return Or(F);if(A){const S=F.children[hn]?yr(F.children[hn],!1):"",U=[];return qt(F.children,(X,ge)=>{ge!==hn&&U.push(`${ge}:${yr(X,!1)}`)}),U.length>0?`${S}(${U.join("//")})`:S}{const S=function(F,A){let S=[];return qt(F.children,(U,X)=>{X===hn&&(S=S.concat(A(U,X)))}),qt(F.children,(U,X)=>{X!==hn&&(S=S.concat(A(U,X)))}),S}(F,(U,X)=>X===hn?[yr(F.children[hn],!1)]:[`${X}:${yr(U,!1)}`]);return 1===Object.keys(F.children).length&&null!=F.children[hn]?`${Or(F)}/${S[0]}`:`${Or(F)}/(${S.join("//")})`}}function Nr(F){return encodeURIComponent(F).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gr(F){return Nr(F).replace(/%3B/gi,";")}function rs(F){return Nr(F).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Hn(F){return decodeURIComponent(F)}function Vr(F){return Hn(F.replace(/\+/g,"%20"))}function Ei(F){return`${rs(F.path)}${function(F){return Object.keys(F).map(A=>`;${rs(A)}=${rs(F[A])}`).join("")}(F.parameters)}`}const or=/^[^\/()?;=#]+/;function is(F){const A=F.match(or);return A?A[0]:""}const $r=/^[^=?&#]+/,Ir=/^[^?&#]+/;class nt{constructor(A){this.url=A,this.remaining=A}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new yn([],{}):new yn([],this.parseChildren())}parseQueryParams(){const A={};if(this.consumeOptional("?"))do{this.parseQueryParam(A)}while(this.consumeOptional("&"));return A}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const A=[];for(this.peekStartsWith("(")||A.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),A.push(this.parseSegment());let S={};this.peekStartsWith("/(")&&(this.capture("/"),S=this.parseParens(!0));let U={};return this.peekStartsWith("(")&&(U=this.parseParens(!1)),(A.length>0||Object.keys(S).length>0)&&(U[hn]=new yn(A,S)),U}parseSegment(){const A=is(this.remaining);if(""===A&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(A),new pr(Hn(A),this.parseMatrixParams())}parseMatrixParams(){const A={};for(;this.consumeOptional(";");)this.parseParam(A);return A}parseParam(A){const S=is(this.remaining);if(!S)return;this.capture(S);let U="";if(this.consumeOptional("=")){const X=is(this.remaining);X&&(U=X,this.capture(U))}A[Hn(S)]=Hn(U)}parseQueryParam(A){const S=function(F){const A=F.match($r);return A?A[0]:""}(this.remaining);if(!S)return;this.capture(S);let U="";if(this.consumeOptional("=")){const Le=function(F){const A=F.match(Ir);return A?A[0]:""}(this.remaining);Le&&(U=Le,this.capture(U))}const X=Vr(S),ge=Vr(U);if(A.hasOwnProperty(X)){let Le=A[X];Array.isArray(Le)||(Le=[Le],A[X]=Le),Le.push(ge)}else A[X]=ge}parseParens(A){const S={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const U=is(this.remaining),X=this.remaining[U.length];if("/"!==X&&")"!==X&&";"!==X)throw new Error(`Cannot parse url '${this.url}'`);let ge;U.indexOf(":")>-1?(ge=U.substr(0,U.indexOf(":")),this.capture(ge),this.capture(":")):A&&(ge=hn);const Le=this.parseChildren();S[ge]=1===Object.keys(Le).length?Le[hn]:new yn([],Le),this.consumeOptional("//")}return S}peekStartsWith(A){return this.remaining.startsWith(A)}consumeOptional(A){return!!this.peekStartsWith(A)&&(this.remaining=this.remaining.substring(A.length),!0)}capture(A){if(!this.consumeOptional(A))throw new Error(`Expected "${A}".`)}}class z{constructor(A){this._root=A}get root(){return this._root.value}parent(A){const S=this.pathFromRoot(A);return S.length>1?S[S.length-2]:null}children(A){const S=H(A,this._root);return S?S.children.map(U=>U.value):[]}firstChild(A){const S=H(A,this._root);return S&&S.children.length>0?S.children[0].value:null}siblings(A){const S=ce(A,this._root);return S.length<2?[]:S[S.length-2].children.map(X=>X.value).filter(X=>X!==A)}pathFromRoot(A){return ce(A,this._root).map(S=>S.value)}}function H(F,A){if(F===A.value)return A;for(const S of A.children){const U=H(F,S);if(U)return U}return null}function ce(F,A){if(F===A.value)return[A];for(const S of A.children){const U=ce(F,S);if(U.length)return U.unshift(A),U}return[]}class Ie{constructor(A,S){this.value=A,this.children=S}toString(){return`TreeNode(${this.value})`}}function We(F){const A={};return F&&F.children.forEach(S=>A[S.value.outlet]=S),A}class Ge extends z{constructor(A,S){super(A),this.snapshot=S,Cr(this,A)}toString(){return this.snapshot.toString()}}function _t(F,A){const S=function(F,A){const Le=new Pn([],{},{},"",{},hn,A,null,F.root,-1,{});return new jn("",new Ie(Le,[]))}(F,A),U=new je.X([new pr("",{})]),X=new je.X({}),ge=new je.X({}),Le=new je.X({}),pe=new je.X(""),Pt=new ft(U,X,Le,pe,ge,hn,A,S.root);return Pt.snapshot=S.root,new Ge(new Ie(Pt,[]),S)}class ft{constructor(A,S,U,X,ge,Le,pe,Pt){this.url=A,this.params=S,this.queryParams=U,this.fragment=X,this.data=ge,this.outlet=Le,this.component=pe,this._futureSnapshot=Pt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Lt.U)(A=>Sr(A)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Lt.U)(A=>Sr(A)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Qt(F,A="emptyOnly"){const S=F.pathFromRoot;let U=0;if("always"!==A)for(U=S.length-1;U>=1;){const X=S[U],ge=S[U-1];if(X.routeConfig&&""===X.routeConfig.path)U--;else{if(ge.component)break;U--}}return function(F){return F.reduce((A,S)=>({params:Object.assign(Object.assign({},A.params),S.params),data:Object.assign(Object.assign({},A.data),S.data),resolve:Object.assign(Object.assign({},A.resolve),S._resolvedData)}),{params:{},data:{},resolve:{}})}(S.slice(U))}class Pn{constructor(A,S,U,X,ge,Le,pe,Pt,Cn,Lr,$n){this.url=A,this.params=S,this.queryParams=U,this.fragment=X,this.data=ge,this.outlet=Le,this.component=pe,this.routeConfig=Pt,this._urlSegment=Cn,this._lastPathIndex=Lr,this._resolve=$n}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Sr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Sr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(U=>U.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class jn extends z{constructor(A,S){super(S),this.url=A,Cr(this,S)}toString(){return qi(this._root)}}function Cr(F,A){A.value._routerState=F,A.children.forEach(S=>Cr(F,S))}function qi(F){const A=F.children.length>0?` { ${F.children.map(qi).join(", ")} } `:"";return`${F.value}${A}`}function hi(F){if(F.snapshot){const A=F.snapshot,S=F._futureSnapshot;F.snapshot=S,on(A.queryParams,S.queryParams)||F.queryParams.next(S.queryParams),A.fragment!==S.fragment&&F.fragment.next(S.fragment),on(A.params,S.params)||F.params.next(S.params),function(F,A){if(F.length!==A.length)return!1;for(let S=0;S<F.length;++S)if(!on(F[S],A[S]))return!1;return!0}(A.url,S.url)||F.url.next(S.url),on(A.data,S.data)||F.data.next(S.data)}else F.snapshot=F._futureSnapshot,F.data.next(F._futureSnapshot.data)}function Ni(F,A){const S=on(F.params,A.params)&&function(F,A){return Vt(F,A)&&F.every((S,U)=>on(S.parameters,A[U].parameters))}(F.url,A.url);return S&&!(!F.parent!=!A.parent)&&(!F.parent||Ni(F.parent,A.parent))}function Cs(F,A,S){if(S&&F.shouldReuseRoute(A.value,S.value.snapshot)){const U=S.value;U._futureSnapshot=A.value;const X=function(F,A,S){return A.children.map(U=>{for(const X of S.children)if(F.shouldReuseRoute(U.value,X.value.snapshot))return Cs(F,U,X);return Cs(F,U)})}(F,A,S);return new Ie(U,X)}{if(F.shouldAttach(A.value)){const ge=F.retrieve(A.value);if(null!==ge){const Le=ge.route;return ss(A,Le),Le}}const U=function(F){return new ft(new je.X(F.url),new je.X(F.params),new je.X(F.queryParams),new je.X(F.fragment),new je.X(F.data),F.outlet,F.component,F)}(A.value),X=A.children.map(ge=>Cs(F,ge));return new Ie(U,X)}}function ss(F,A){if(F.value.routeConfig!==A.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(F.children.length!==A.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");A.value._futureSnapshot=F.value;for(let S=0;S<F.children.length;++S)ss(F.children[S],A.children[S])}function eo(F){return"object"==typeof F&&null!=F&&!F.outlets&&!F.segmentPath}function js(F){return"object"==typeof F&&null!=F&&F.outlets}function Go(F,A,S,U,X){let ge={};return U&&qt(U,(Le,pe)=>{ge[pe]=Array.isArray(Le)?Le.map(Pt=>`${Pt}`):`${Le}`}),new ln(S.root===F?A:Po(S.root,F,A),ge,X)}function Po(F,A,S){const U={};return qt(F.children,(X,ge)=>{U[ge]=X===A?S:Po(X,A,S)}),new yn(F.segments,U)}class zo{constructor(A,S,U){if(this.isAbsolute=A,this.numberOfDoubleDots=S,this.commands=U,A&&U.length>0&&eo(U[0]))throw new Error("Root segment cannot have matrix parameters");const X=U.find(js);if(X&&X!==cn(U))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ds{constructor(A,S,U){this.segmentGroup=A,this.processChildren=S,this.index=U}}function to(F,A,S){if(F||(F=new yn([],{})),0===F.segments.length&&F.hasChildren())return Zr(F,A,S);const U=function(F,A,S){let U=0,X=A;const ge={match:!1,pathIndex:0,commandIndex:0};for(;X<F.segments.length;){if(U>=S.length)return ge;const Le=F.segments[X],pe=S[U];if(js(pe))break;const Pt=`${pe}`,Cn=U<S.length-1?S[U+1]:null;if(X>0&&void 0===Pt)break;if(Pt&&Cn&&"object"==typeof Cn&&void 0===Cn.outlets){if(!os(Pt,Cn,Le))return ge;U+=2}else{if(!os(Pt,{},Le))return ge;U++}X++}return{match:!0,pathIndex:X,commandIndex:U}}(F,A,S),X=S.slice(U.commandIndex);if(U.match&&U.pathIndex<F.segments.length){const ge=new yn(F.segments.slice(0,U.pathIndex),{});return ge.children[hn]=new yn(F.segments.slice(U.pathIndex),F.children),Zr(ge,0,X)}return U.match&&0===X.length?new yn(F.segments,{}):U.match&&!F.hasChildren()?ji(F,A,S):U.match?Zr(F,0,X):ji(F,A,S)}function Zr(F,A,S){if(0===S.length)return new yn(F.segments,{});{const U=function(F){return js(F[0])?F[0].outlets:{[hn]:F}}(S),X={};return qt(U,(ge,Le)=>{"string"==typeof ge&&(ge=[ge]),null!==ge&&(X[Le]=to(F.children[Le],A,ge))}),qt(F.children,(ge,Le)=>{void 0===U[Le]&&(X[Le]=ge)}),new yn(F.segments,X)}}function ji(F,A,S){const U=F.segments.slice(0,A);let X=0;for(;X<S.length;){const ge=S[X];if(js(ge)){const Pt=ps(ge.outlets);return new yn(U,Pt)}if(0===X&&eo(S[0])){U.push(new pr(F.segments[A].path,ro(S[0]))),X++;continue}const Le=js(ge)?ge.outlets[hn]:`${ge}`,pe=X<S.length-1?S[X+1]:null;Le&&pe&&eo(pe)?(U.push(new pr(Le,ro(pe))),X+=2):(U.push(new pr(Le,{})),X++)}return new yn(U,{})}function ps(F){const A={};return qt(F,(S,U)=>{"string"==typeof S&&(S=[S]),null!==S&&(A[U]=ji(new yn([],{}),0,S))}),A}function ro(F){const A={};return qt(F,(S,U)=>A[U]=`${S}`),A}function os(F,A,S){return F==S.path&&on(A,S.parameters)}class Gs{constructor(A,S,U,X){this.routeReuseStrategy=A,this.futureState=S,this.currState=U,this.forwardEvent=X}activate(A){const S=this.futureState._root,U=this.currState?this.currState._root:null;this.deactivateChildRoutes(S,U,A),hi(this.futureState.root),this.activateChildRoutes(S,U,A)}deactivateChildRoutes(A,S,U){const X=We(S);A.children.forEach(ge=>{const Le=ge.value.outlet;this.deactivateRoutes(ge,X[Le],U),delete X[Le]}),qt(X,(ge,Le)=>{this.deactivateRouteAndItsChildren(ge,U)})}deactivateRoutes(A,S,U){const X=A.value,ge=S?S.value:null;if(X===ge)if(X.component){const Le=U.getContext(X.outlet);Le&&this.deactivateChildRoutes(A,S,Le.children)}else this.deactivateChildRoutes(A,S,U);else ge&&this.deactivateRouteAndItsChildren(S,U)}deactivateRouteAndItsChildren(A,S){this.routeReuseStrategy.shouldDetach(A.value.snapshot)?this.detachAndStoreRouteSubtree(A,S):this.deactivateRouteAndOutlet(A,S)}detachAndStoreRouteSubtree(A,S){const U=S.getContext(A.value.outlet);if(U&&U.outlet){const X=U.outlet.detach(),ge=U.children.onOutletDeactivated();this.routeReuseStrategy.store(A.value.snapshot,{componentRef:X,route:A,contexts:ge})}}deactivateRouteAndOutlet(A,S){const U=S.getContext(A.value.outlet),X=U&&A.value.component?U.children:S,ge=We(A);for(const Le of Object.keys(ge))this.deactivateRouteAndItsChildren(ge[Le],X);U&&U.outlet&&(U.outlet.deactivate(),U.children.onOutletDeactivated(),U.attachRef=null,U.resolver=null,U.route=null)}activateChildRoutes(A,S,U){const X=We(S);A.children.forEach(ge=>{this.activateRoutes(ge,X[ge.value.outlet],U),this.forwardEvent(new ci(ge.value.snapshot))}),A.children.length&&this.forwardEvent(new dn(A.value.snapshot))}activateRoutes(A,S,U){const X=A.value,ge=S?S.value:null;if(hi(X),X===ge)if(X.component){const Le=U.getOrCreateContext(X.outlet);this.activateChildRoutes(A,S,Le.children)}else this.activateChildRoutes(A,S,U);else if(X.component){const Le=U.getOrCreateContext(X.outlet);if(this.routeReuseStrategy.shouldAttach(X.snapshot)){const pe=this.routeReuseStrategy.retrieve(X.snapshot);this.routeReuseStrategy.store(X.snapshot,null),Le.children.onOutletReAttached(pe.contexts),Le.attachRef=pe.componentRef,Le.route=pe.route.value,Le.outlet&&Le.outlet.attach(pe.componentRef,pe.route.value),_i(pe.route)}else{const pe=function(F){for(let A=F.parent;A;A=A.parent){const S=A.routeConfig;if(S&&S._loadedConfig)return S._loadedConfig;if(S&&S.component)return null}return null}(X.snapshot),Pt=pe?pe.module.componentFactoryResolver:null;Le.attachRef=null,Le.route=X,Le.resolver=Pt,Le.outlet&&Le.outlet.activateWith(X,Pt),this.activateChildRoutes(A,null,Le.children)}}else this.activateChildRoutes(A,null,U)}}function _i(F){hi(F.value),F.children.forEach(_i)}class fi{constructor(A,S){this.routes=A,this.module=S}}function Vi(F){return"function"==typeof F}function Bi(F){return F instanceof ln}const Ii=Symbol("INITIAL_VALUE");function Xi(){return(0,Gt.w)(F=>function(...F){let A,S;return(0,ne.K)(F[F.length-1])&&(S=F.pop()),"function"==typeof F[F.length-1]&&(A=F.pop()),1===F.length&&(0,oe.k)(F[0])&&(F=F[0]),(0,ve.n)(F,S).lift(new ie(A))}(F.map(A=>A.pipe((0,Bn.q)(1),(0,ir.O)(Ii)))).pipe((0,Nn.R)((A,S)=>{let U=!1;return S.reduce((X,ge,Le)=>X!==Ii?X:(ge===Ii&&(U=!0),U||!1!==ge&&Le!==S.length-1&&!Bi(ge)?X:ge),A)},Ii),(0,st.h)(A=>A!==Ii),(0,Lt.U)(A=>Bi(A)?A:!0===A),(0,Bn.q)(1)))}let G=(()=>{class F{}return F.\u0275fac=function(S){return new(S||F)},F.\u0275cmp=O.Xpm({type:F,selectors:[["ng-component"]],decls:1,vars:0,template:function(S,U){1&S&&O._UZ(0,"router-outlet")},directives:function(){return[Bs]},encapsulation:2}),F})();function le(F,A=""){for(let S=0;S<F.length;S++){const U=F[S];K(U,be(A,U))}}function K(F,A){F.children&&le(F.children,A)}function be(F,A){return A?F||A.path?F&&!A.path?`${F}/`:!F&&A.path?A.path:`${F}/${A.path}`:"":F}function Ue(F){const A=F.children&&F.children.map(Ue),S=A?Object.assign(Object.assign({},F),{children:A}):Object.assign({},F);return!S.component&&(A||S.loadChildren)&&S.outlet&&S.outlet!==hn&&(S.component=G),S}function wt(F){return F.outlet||hn}function Xt(F,A){const S=F.filter(U=>wt(U)===A);return S.push(...F.filter(U=>wt(U)!==A)),S}const W={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function $(F,A,S){var U;if(""===A.path)return"full"===A.pathMatch&&(F.hasChildren()||S.length>0)?Object.assign({},W):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const ge=(A.matcher||Yn)(S,F,A);if(!ge)return Object.assign({},W);const Le={};qt(ge.posParams,(Pt,Cn)=>{Le[Cn]=Pt.path});const pe=ge.consumed.length>0?Object.assign(Object.assign({},Le),ge.consumed[ge.consumed.length-1].parameters):Le;return{matched:!0,consumedSegments:ge.consumed,lastChild:ge.consumed.length,parameters:pe,positionalParamSegments:null!==(U=ge.posParams)&&void 0!==U?U:{}}}function k(F,A,S,U,X="corrected"){if(S.length>0&&function(F,A,S){return S.some(U=>Ur(F,A,U)&&wt(U)!==hn)}(F,S,U)){const Le=new yn(A,function(F,A,S,U){const X={};X[hn]=U,U._sourceSegment=F,U._segmentIndexShift=A.length;for(const ge of S)if(""===ge.path&&wt(ge)!==hn){const Le=new yn([],{});Le._sourceSegment=F,Le._segmentIndexShift=A.length,X[wt(ge)]=Le}return X}(F,A,U,new yn(S,F.children)));return Le._sourceSegment=F,Le._segmentIndexShift=A.length,{segmentGroup:Le,slicedSegments:[]}}if(0===S.length&&function(F,A,S){return S.some(U=>Ur(F,A,U))}(F,S,U)){const Le=new yn(F.segments,function(F,A,S,U,X,ge){const Le={};for(const pe of U)if(Ur(F,S,pe)&&!X[wt(pe)]){const Pt=new yn([],{});Pt._sourceSegment=F,Pt._segmentIndexShift="legacy"===ge?F.segments.length:A.length,Le[wt(pe)]=Pt}return Object.assign(Object.assign({},X),Le)}(F,A,S,U,F.children,X));return Le._sourceSegment=F,Le._segmentIndexShift=A.length,{segmentGroup:Le,slicedSegments:S}}const ge=new yn(F.segments,F.children);return ge._sourceSegment=F,ge._segmentIndexShift=A.length,{segmentGroup:ge,slicedSegments:S}}function Ur(F,A,S){return(!(F.hasChildren()||A.length>0)||"full"!==S.pathMatch)&&""===S.path}function Ci(F,A,S,U){return!!(wt(F)===U||U!==hn&&Ur(A,S,F))&&("**"===F.path||$(A,F,S).matched)}function li(F,A,S){return 0===A.length&&!F.children[S]}class si{constructor(A){this.segmentGroup=A||null}}class jr{constructor(A){this.urlTree=A}}function Qn(F){return new Ce.y(A=>A.error(new si(F)))}function ma(F){return new Ce.y(A=>A.error(new jr(F)))}function ko(F){return new Ce.y(A=>A.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${F}'`)))}class na{constructor(A,S,U,X,ge){this.configLoader=S,this.urlSerializer=U,this.urlTree=X,this.config=ge,this.allowRedirects=!0,this.ngModule=A.get(O.h0i)}apply(){const A=k(this.urlTree.root,[],[],this.config).segmentGroup,S=new yn(A.segments,A.children);return this.expandSegmentGroup(this.ngModule,this.config,S,hn).pipe((0,Lt.U)(ge=>this.createUrlTree(Eo(ge),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ct(ge=>{if(ge instanceof jr)return this.allowRedirects=!1,this.match(ge.urlTree);throw ge instanceof si?this.noMatchError(ge):ge}))}match(A){return this.expandSegmentGroup(this.ngModule,this.config,A.root,hn).pipe((0,Lt.U)(X=>this.createUrlTree(Eo(X),A.queryParams,A.fragment))).pipe(ct(X=>{throw X instanceof si?this.noMatchError(X):X}))}noMatchError(A){return new Error(`Cannot match any routes. URL Segment: '${A.segmentGroup}'`)}createUrlTree(A,S,U){const X=A.segments.length>0?new yn([],{[hn]:A}):A;return new ln(X,S,U)}expandSegmentGroup(A,S,U,X){return 0===U.segments.length&&U.hasChildren()?this.expandChildren(A,S,U).pipe((0,Lt.U)(ge=>new yn([],ge))):this.expandSegment(A,U,S,U.segments,X,!0)}expandChildren(A,S,U){const X=[];for(const ge of Object.keys(U.children))"primary"===ge?X.unshift(ge):X.push(ge);return(0,_e.D)(X).pipe(pt(ge=>{const Le=U.children[ge],pe=Xt(S,ge);return this.expandSegmentGroup(A,pe,Le,ge).pipe((0,Lt.U)(Pt=>({segment:Pt,outlet:ge})))}),(0,Nn.R)((ge,Le)=>(ge[Le.outlet]=Le.segment,ge),{}),function(F,A){const S=arguments.length>=2;return U=>U.pipe(F?(0,st.h)((X,ge)=>F(X,ge,U)):vt.y,Dt(1),S?(0,bt.d)(A):(0,pn.T)(()=>new Ae.K))}())}expandSegment(A,S,U,X,ge,Le){return(0,_e.D)(U).pipe(pt(pe=>this.expandSegmentAgainstRoute(A,S,U,pe,X,ge,Le).pipe(ct(Cn=>{if(Cn instanceof si)return(0,Ee.of)(null);throw Cn}))),(0,Dn.P)(pe=>!!pe),ct((pe,Pt)=>{if(pe instanceof Ae.K||"EmptyError"===pe.name){if(li(S,X,ge))return(0,Ee.of)(new yn([],{}));throw new si(S)}throw pe}))}expandSegmentAgainstRoute(A,S,U,X,ge,Le,pe){return Ci(X,S,ge,Le)?void 0===X.redirectTo?this.matchSegmentAgainstRoute(A,S,X,ge,Le):pe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(A,S,U,X,ge,Le):Qn(S):Qn(S)}expandSegmentAgainstRouteUsingRedirect(A,S,U,X,ge,Le){return"**"===X.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(A,U,X,Le):this.expandRegularSegmentAgainstRouteUsingRedirect(A,S,U,X,ge,Le)}expandWildCardWithParamsAgainstRouteUsingRedirect(A,S,U,X){const ge=this.applyRedirectCommands([],U.redirectTo,{});return U.redirectTo.startsWith("/")?ma(ge):this.lineralizeSegments(U,ge).pipe((0,rt.zg)(Le=>{const pe=new yn(Le,{});return this.expandSegment(A,pe,S,Le,X,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(A,S,U,X,ge,Le){const{matched:pe,consumedSegments:Pt,lastChild:Cn,positionalParamSegments:Lr}=$(S,X,ge);if(!pe)return Qn(S);const $n=this.applyRedirectCommands(Pt,X.redirectTo,Lr);return X.redirectTo.startsWith("/")?ma($n):this.lineralizeSegments(X,$n).pipe((0,rt.zg)(Br=>this.expandSegment(A,S,U,Br.concat(ge.slice(Cn)),Le,!1)))}matchSegmentAgainstRoute(A,S,U,X,ge){if("**"===U.path)return U.loadChildren?(U._loadedConfig?(0,Ee.of)(U._loadedConfig):this.configLoader.load(A.injector,U)).pipe((0,Lt.U)(Br=>(U._loadedConfig=Br,new yn(X,{})))):(0,Ee.of)(new yn(X,{}));const{matched:Le,consumedSegments:pe,lastChild:Pt}=$(S,U,X);if(!Le)return Qn(S);const Cn=X.slice(Pt);return this.getChildConfig(A,U,X).pipe((0,rt.zg)($n=>{const Br=$n.module,vr=$n.routes,{segmentGroup:ms,slicedSegments:mo}=k(S,pe,Cn,vr),Ts=new yn(ms.segments,ms.children);if(0===mo.length&&Ts.hasChildren())return this.expandChildren(Br,vr,Ts).pipe((0,Lt.U)(Pa=>new yn(pe,Pa)));if(0===vr.length&&0===mo.length)return(0,Ee.of)(new yn(pe,{}));const Qr=wt(U)===ge;return this.expandSegment(Br,Ts,vr,mo,Qr?hn:ge,!0).pipe((0,Lt.U)(us=>new yn(pe.concat(us.segments),us.children)))}))}getChildConfig(A,S,U){return S.children?(0,Ee.of)(new fi(S.children,A)):S.loadChildren?void 0!==S._loadedConfig?(0,Ee.of)(S._loadedConfig):this.runCanLoadGuards(A.injector,S,U).pipe((0,rt.zg)(X=>{return X?this.configLoader.load(A.injector,S).pipe((0,Lt.U)(ge=>(S._loadedConfig=ge,ge))):(F=S,new Ce.y(A=>A.error(Xn(`Cannot load children because the guard of the route "path: '${F.path}'" returned false`))));var F})):(0,Ee.of)(new fi([],A))}runCanLoadGuards(A,S,U){const X=S.canLoad;if(!X||0===X.length)return(0,Ee.of)(!0);const ge=X.map(Le=>{const pe=A.get(Le);let Pt;if((F=pe)&&Vi(F.canLoad))Pt=pe.canLoad(S,U);else{if(!Vi(pe))throw new Error("Invalid CanLoad guard");Pt=pe(S,U)}var F;return Be(Pt)});return(0,Ee.of)(ge).pipe(Xi(),(0,qn.b)(Le=>{if(!Bi(Le))return;const pe=Xn(`Redirecting to "${this.urlSerializer.serialize(Le)}"`);throw pe.url=Le,pe}),(0,Lt.U)(Le=>!0===Le))}lineralizeSegments(A,S){let U=[],X=S.root;for(;;){if(U=U.concat(X.segments),0===X.numberOfChildren)return(0,Ee.of)(U);if(X.numberOfChildren>1||!X.children[hn])return ko(A.redirectTo);X=X.children[hn]}}applyRedirectCommands(A,S,U){return this.applyRedirectCreatreUrlTree(S,this.urlSerializer.parse(S),A,U)}applyRedirectCreatreUrlTree(A,S,U,X){const ge=this.createSegmentGroup(A,S.root,U,X);return new ln(ge,this.createQueryParams(S.queryParams,this.urlTree.queryParams),S.fragment)}createQueryParams(A,S){const U={};return qt(A,(X,ge)=>{if("string"==typeof X&&X.startsWith(":")){const pe=X.substring(1);U[ge]=S[pe]}else U[ge]=X}),U}createSegmentGroup(A,S,U,X){const ge=this.createSegments(A,S.segments,U,X);let Le={};return qt(S.children,(pe,Pt)=>{Le[Pt]=this.createSegmentGroup(A,pe,U,X)}),new yn(ge,Le)}createSegments(A,S,U,X){return S.map(ge=>ge.path.startsWith(":")?this.findPosParam(A,ge,X):this.findOrReturn(ge,U))}findPosParam(A,S,U){const X=U[S.path.substring(1)];if(!X)throw new Error(`Cannot redirect to '${A}'. Cannot find '${S.path}'.`);return X}findOrReturn(A,S){let U=0;for(const X of S){if(X.path===A.path)return S.splice(U),X;U++}return A}}function Eo(F){const A={};for(const U of Object.keys(F.children)){const ge=Eo(F.children[U]);(ge.segments.length>0||ge.hasChildren())&&(A[U]=ge)}return function(F){if(1===F.numberOfChildren&&F.children[hn]){const A=F.children[hn];return new yn(F.segments.concat(A.segments),A.children)}return F}(new yn(F.segments,A))}class _r{constructor(A){this.path=A,this.route=this.path[this.path.length-1]}}class Fo{constructor(A,S){this.component=A,this.route=S}}function Hi(F,A,S){const U=F._root;return ho(U,A?A._root:null,S,[U.value])}function Ss(F,A,S){const U=function(F){if(!F)return null;for(let A=F.parent;A;A=A.parent){const S=A.routeConfig;if(S&&S._loadedConfig)return S._loadedConfig}return null}(A);return(U?U.module.injector:S).get(F)}function ho(F,A,S,U,X={canDeactivateChecks:[],canActivateChecks:[]}){const ge=We(A);return F.children.forEach(Le=>{(function(F,A,S,U,X={canDeactivateChecks:[],canActivateChecks:[]}){const ge=F.value,Le=A?A.value:null,pe=S?S.getContext(F.value.outlet):null;if(Le&&ge.routeConfig===Le.routeConfig){const Pt=function(F,A,S){if("function"==typeof S)return S(F,A);switch(S){case"pathParamsChange":return!Vt(F.url,A.url);case"pathParamsOrQueryParamsChange":return!Vt(F.url,A.url)||!on(F.queryParams,A.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ni(F,A)||!on(F.queryParams,A.queryParams);default:return!Ni(F,A)}}(Le,ge,ge.routeConfig.runGuardsAndResolvers);Pt?X.canActivateChecks.push(new _r(U)):(ge.data=Le.data,ge._resolvedData=Le._resolvedData),ho(F,A,ge.component?pe?pe.children:null:S,U,X),Pt&&pe&&pe.outlet&&pe.outlet.isActivated&&X.canDeactivateChecks.push(new Fo(pe.outlet.component,Le))}else Le&&so(A,pe,X),X.canActivateChecks.push(new _r(U)),ho(F,null,ge.component?pe?pe.children:null:S,U,X)})(Le,ge[Le.value.outlet],S,U.concat([Le.value]),X),delete ge[Le.value.outlet]}),qt(ge,(Le,pe)=>so(Le,S.getContext(pe),X)),X}function so(F,A,S){const U=We(F),X=F.value;qt(U,(ge,Le)=>{so(ge,X.component?A?A.children.getContext(Le):null:A,S)}),S.canDeactivateChecks.push(new Fo(X.component&&A&&A.outlet&&A.outlet.isActivated?A.outlet.component:null,X))}class gs{}function bo(F){return new Ce.y(A=>A.error(F))}class Lo{constructor(A,S,U,X,ge,Le){this.rootComponentType=A,this.config=S,this.urlTree=U,this.url=X,this.paramsInheritanceStrategy=ge,this.relativeLinkResolution=Le}recognize(){const A=k(this.urlTree.root,[],[],this.config.filter(Le=>void 0===Le.redirectTo),this.relativeLinkResolution).segmentGroup,S=this.processSegmentGroup(this.config,A,hn);if(null===S)return null;const U=new Pn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},hn,this.rootComponentType,null,this.urlTree.root,-1,{}),X=new Ie(U,S),ge=new jn(this.url,X);return this.inheritParamsAndData(ge._root),ge}inheritParamsAndData(A){const S=A.value,U=Qt(S,this.paramsInheritanceStrategy);S.params=Object.freeze(U.params),S.data=Object.freeze(U.data),A.children.forEach(X=>this.inheritParamsAndData(X))}processSegmentGroup(A,S,U){return 0===S.segments.length&&S.hasChildren()?this.processChildren(A,S):this.processSegment(A,S,S.segments,U)}processChildren(A,S){const U=[];for(const ge of Object.keys(S.children)){const Le=S.children[ge],pe=Xt(A,ge),Pt=this.processSegmentGroup(pe,Le,ge);if(null===Pt)return null;U.push(...Pt)}const X=qs(U);return X.sort((A,S)=>A.value.outlet===hn?-1:S.value.outlet===hn?1:A.value.outlet.localeCompare(S.value.outlet)),X}processSegment(A,S,U,X){for(const ge of A){const Le=this.processSegmentAgainstRoute(ge,S,U,X);if(null!==Le)return Le}return li(S,U,X)?[]:null}processSegmentAgainstRoute(A,S,U,X){if(A.redirectTo||!Ci(A,S,U,X))return null;let ge,Le=[],pe=[];if("**"===A.path){const vr=U.length>0?cn(U).parameters:{};ge=new Pn(U,vr,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,_a(A),wt(A),A.component,A,Di(S),ao(S)+U.length,Vs(A))}else{const vr=$(S,A,U);if(!vr.matched)return null;Le=vr.consumedSegments,pe=U.slice(vr.lastChild),ge=new Pn(Le,vr.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,_a(A),wt(A),A.component,A,Di(S),ao(S)+Le.length,Vs(A))}const Pt=(F=A).children?F.children:F.loadChildren?F._loadedConfig.routes:[],{segmentGroup:Cn,slicedSegments:Lr}=k(S,Le,pe,Pt.filter(vr=>void 0===vr.redirectTo),this.relativeLinkResolution);var F;if(0===Lr.length&&Cn.hasChildren()){const vr=this.processChildren(Pt,Cn);return null===vr?null:[new Ie(ge,vr)]}if(0===Pt.length&&0===Lr.length)return[new Ie(ge,[])];const $n=wt(A)===X,Br=this.processSegment(Pt,Cn,Lr,$n?hn:X);return null===Br?null:[new Ie(ge,Br)]}}function oo(F){const A=F.value.routeConfig;return A&&""===A.path&&void 0===A.redirectTo}function qs(F){const A=[],S=new Set;for(const U of F){if(!oo(U)){A.push(U);continue}const X=A.find(ge=>U.value.routeConfig===ge.value.routeConfig);void 0!==X?(X.children.push(...U.children),S.add(X)):A.push(U)}for(const U of S){const X=qs(U.children);A.push(new Ie(U.value,X))}return A.filter(U=>!S.has(U))}function Di(F){let A=F;for(;A._sourceSegment;)A=A._sourceSegment;return A}function ao(F){let A=F,S=A._segmentIndexShift?A._segmentIndexShift:0;for(;A._sourceSegment;)A=A._sourceSegment,S+=A._segmentIndexShift?A._segmentIndexShift:0;return S-1}function _a(F){return F.data||{}}function Vs(F){return F.resolve||{}}function D(F){return(0,Gt.w)(A=>{const S=F(A);return S?(0,_e.D)(S).pipe((0,Lt.U)(()=>A)):(0,Ee.of)(A)})}class q{}class it extends class{shouldDetach(A){return!1}store(A,S){}shouldAttach(A){return!1}retrieve(A){return null}shouldReuseRoute(A,S){return A.routeConfig===S.routeConfig}}{}const Ht=new O.OlP("ROUTES");class un{constructor(A,S,U,X){this.loader=A,this.compiler=S,this.onLoadStartListener=U,this.onLoadEndListener=X}load(A,S){if(S._loader$)return S._loader$;this.onLoadStartListener&&this.onLoadStartListener(S);const X=this.loadModuleFactory(S.loadChildren).pipe((0,Lt.U)(ge=>{this.onLoadEndListener&&this.onLoadEndListener(S);const Le=ge.create(A);return new fi(mn(Le.injector.get(Ht,void 0,O.XFs.Self|O.XFs.Optional)).map(Ue),Le)}),ct(ge=>{throw S._loader$=void 0,ge}));return S._loader$=new Fe.c(X,()=>new Me.xQ).pipe((0,Gr.x)()),S._loader$}loadModuleFactory(A){return"string"==typeof A?(0,_e.D)(this.loader.load(A)):Be(A()).pipe((0,rt.zg)(S=>S instanceof O.YKP?(0,Ee.of)(S):(0,_e.D)(this.compiler.compileModuleAsync(S))))}}class hr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new xn,this.attachRef=null}}class xn{constructor(){this.contexts=new Map}onChildOutletCreated(A,S){const U=this.getOrCreateContext(A);U.outlet=S,this.contexts.set(A,U)}onChildOutletDestroyed(A){const S=this.getContext(A);S&&(S.outlet=null,S.attachRef=null)}onOutletDeactivated(){const A=this.contexts;return this.contexts=new Map,A}onOutletReAttached(A){this.contexts=A}getOrCreateContext(A){let S=this.getContext(A);return S||(S=new hr,this.contexts.set(A,S)),S}getContext(A){return this.contexts.get(A)||null}}class Ti{shouldProcessUrl(A){return!0}extract(A){return A}merge(A,S){return A}}function kt(F){throw F}function Jn(F,A,S){return A.parse("/")}function es(F,A){return(0,Ee.of)(null)}const lo={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Mn={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Fn=(()=>{class F{constructor(S,U,X,ge,Le,pe,Pt,Cn){this.rootComponentType=S,this.urlSerializer=U,this.rootContexts=X,this.location=ge,this.config=Cn,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Me.xQ,this.errorHandler=kt,this.malformedUriErrorHandler=Jn,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:es,afterPreactivation:es},this.urlHandlingStrategy=new Ti,this.routeReuseStrategy=new it,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Le.get(O.h0i),this.console=Le.get(O.c2e);const Br=Le.get(O.R0b);this.isNgZoneEnabled=Br instanceof O.R0b&&O.R0b.isInAngularZone(),this.resetConfig(Cn),this.currentUrlTree=new ln(new yn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new un(pe,Pt,vr=>this.triggerEvent(new Dr(vr)),vr=>this.triggerEvent(new mi(vr))),this.routerState=_t(this.currentUrlTree,this.rootComponentType),this.transitions=new je.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var S;return null===(S=this.location.getState())||void 0===S?void 0:S.\u0275routerPageId}setupNavigations(S){const U=this.events;return S.pipe((0,st.h)(X=>0!==X.id),(0,Lt.U)(X=>Object.assign(Object.assign({},X),{extractedUrl:this.urlHandlingStrategy.extract(X.rawUrl)})),(0,Gt.w)(X=>{let ge=!1,Le=!1;return(0,Ee.of)(X).pipe((0,qn.b)(pe=>{this.currentNavigation={id:pe.id,initialUrl:pe.currentRawUrl,extractedUrl:pe.extractedUrl,trigger:pe.source,extras:pe.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Gt.w)(pe=>{const Pt=this.browserUrlTree.toString(),Cn=!this.navigated||pe.extractedUrl.toString()!==Pt||Pt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Cn)&&this.urlHandlingStrategy.shouldProcessUrl(pe.rawUrl))return Jt(pe.source)&&(this.browserUrlTree=pe.extractedUrl),(0,Ee.of)(pe).pipe((0,Gt.w)($n=>{const Br=this.transitions.getValue();return U.next(new Wn($n.id,this.serializeUrl($n.extractedUrl),$n.source,$n.restoredState)),Br!==this.transitions.getValue()?De.E:Promise.resolve($n)}),function(F,A,S,U){return(0,Gt.w)(X=>function(F,A,S,U,X){return new na(F,A,S,U,X).apply()}(F,A,S,X.extractedUrl,U).pipe((0,Lt.U)(ge=>Object.assign(Object.assign({},X),{urlAfterRedirects:ge}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,qn.b)($n=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:$n.urlAfterRedirects})}),function(F,A,S,U,X){return(0,rt.zg)(ge=>function(F,A,S,U,X="emptyOnly",ge="legacy"){try{const Le=new Lo(F,A,S,U,X,ge).recognize();return null===Le?bo(new gs):(0,Ee.of)(Le)}catch(Le){return bo(Le)}}(F,A,ge.urlAfterRedirects,S(ge.urlAfterRedirects),U,X).pipe((0,Lt.U)(Le=>Object.assign(Object.assign({},ge),{targetSnapshot:Le}))))}(this.rootComponentType,this.config,$n=>this.serializeUrl($n),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,qn.b)($n=>{"eager"===this.urlUpdateStrategy&&($n.extras.skipLocationChange||this.setBrowserUrl($n.urlAfterRedirects,$n),this.browserUrlTree=$n.urlAfterRedirects);const Br=new lr($n.id,this.serializeUrl($n.extractedUrl),this.serializeUrl($n.urlAfterRedirects),$n.targetSnapshot);U.next(Br)}));if(Cn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Br,extractedUrl:vr,source:ms,restoredState:mo,extras:Ts}=pe,Qr=new Wn(Br,this.serializeUrl(vr),ms,mo);U.next(Qr);const va=_t(vr,this.rootComponentType).snapshot;return(0,Ee.of)(Object.assign(Object.assign({},pe),{targetSnapshot:va,urlAfterRedirects:vr,extras:Object.assign(Object.assign({},Ts),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=pe.rawUrl,this.browserUrlTree=pe.urlAfterRedirects,pe.resolve(null),De.E}),D(pe=>{const{targetSnapshot:Pt,id:Cn,extractedUrl:Lr,rawUrl:$n,extras:{skipLocationChange:Br,replaceUrl:vr}}=pe;return this.hooks.beforePreactivation(Pt,{navigationId:Cn,appliedUrlTree:Lr,rawUrlTree:$n,skipLocationChange:!!Br,replaceUrl:!!vr})}),(0,qn.b)(pe=>{const Pt=new zr(pe.id,this.serializeUrl(pe.extractedUrl),this.serializeUrl(pe.urlAfterRedirects),pe.targetSnapshot);this.triggerEvent(Pt)}),(0,Lt.U)(pe=>Object.assign(Object.assign({},pe),{guards:Hi(pe.targetSnapshot,pe.currentSnapshot,this.rootContexts)})),function(F,A){return(0,rt.zg)(S=>{const{targetSnapshot:U,currentSnapshot:X,guards:{canActivateChecks:ge,canDeactivateChecks:Le}}=S;return 0===Le.length&&0===ge.length?(0,Ee.of)(Object.assign(Object.assign({},S),{guardsResult:!0})):function(F,A,S,U){return(0,_e.D)(F).pipe((0,rt.zg)(X=>function(F,A,S,U,X){const ge=A&&A.routeConfig?A.routeConfig.canDeactivate:null;if(!ge||0===ge.length)return(0,Ee.of)(!0);const Le=ge.map(pe=>{const Pt=Ss(pe,A,X);let Cn;if(function(F){return F&&Vi(F.canDeactivate)}(Pt))Cn=Be(Pt.canDeactivate(F,A,S,U));else{if(!Vi(Pt))throw new Error("Invalid CanDeactivate guard");Cn=Be(Pt(F,A,S,U))}return Cn.pipe((0,Dn.P)())});return(0,Ee.of)(Le).pipe(Xi())}(X.component,X.route,S,A,U)),(0,Dn.P)(X=>!0!==X,!0))}(Le,U,X,F).pipe((0,rt.zg)(pe=>pe&&function(F){return"boolean"==typeof F}(pe)?function(F,A,S,U){return(0,_e.D)(A).pipe(pt(X=>(0,$e.z)(function(F,A){return null!==F&&A&&A(new dr(F)),(0,Ee.of)(!0)}(X.route.parent,U),function(F,A){return null!==F&&A&&A(new Ct(F)),(0,Ee.of)(!0)}(X.route,U),function(F,A,S){const U=A[A.length-1],ge=A.slice(0,A.length-1).reverse().map(Le=>function(F){const A=F.routeConfig?F.routeConfig.canActivateChild:null;return A&&0!==A.length?{node:F,guards:A}:null}(Le)).filter(Le=>null!==Le).map(Le=>Xe(()=>{const pe=Le.guards.map(Pt=>{const Cn=Ss(Pt,Le.node,S);let Lr;if(function(F){return F&&Vi(F.canActivateChild)}(Cn))Lr=Be(Cn.canActivateChild(U,F));else{if(!Vi(Cn))throw new Error("Invalid CanActivateChild guard");Lr=Be(Cn(U,F))}return Lr.pipe((0,Dn.P)())});return(0,Ee.of)(pe).pipe(Xi())}));return(0,Ee.of)(ge).pipe(Xi())}(F,X.path,S),function(F,A,S){const U=A.routeConfig?A.routeConfig.canActivate:null;if(!U||0===U.length)return(0,Ee.of)(!0);const X=U.map(ge=>Xe(()=>{const Le=Ss(ge,A,S);let pe;if(function(F){return F&&Vi(F.canActivate)}(Le))pe=Be(Le.canActivate(A,F));else{if(!Vi(Le))throw new Error("Invalid CanActivate guard");pe=Be(Le(A,F))}return pe.pipe((0,Dn.P)())}));return(0,Ee.of)(X).pipe(Xi())}(F,X.route,S))),(0,Dn.P)(X=>!0!==X,!0))}(U,ge,F,A):(0,Ee.of)(pe)),(0,Lt.U)(pe=>Object.assign(Object.assign({},S),{guardsResult:pe})))})}(this.ngModule.injector,pe=>this.triggerEvent(pe)),(0,qn.b)(pe=>{if(Bi(pe.guardsResult)){const Cn=Xn(`Redirecting to "${this.serializeUrl(pe.guardsResult)}"`);throw Cn.url=pe.guardsResult,Cn}const Pt=new kr(pe.id,this.serializeUrl(pe.extractedUrl),this.serializeUrl(pe.urlAfterRedirects),pe.targetSnapshot,!!pe.guardsResult);this.triggerEvent(Pt)}),(0,st.h)(pe=>!!pe.guardsResult||(this.restoreHistory(pe),this.cancelNavigationTransition(pe,""),!1)),D(pe=>{if(pe.guards.canActivateChecks.length)return(0,Ee.of)(pe).pipe((0,qn.b)(Pt=>{const Cn=new ai(Pt.id,this.serializeUrl(Pt.extractedUrl),this.serializeUrl(Pt.urlAfterRedirects),Pt.targetSnapshot);this.triggerEvent(Cn)}),(0,Gt.w)(Pt=>{let Cn=!1;return(0,Ee.of)(Pt).pipe(function(F,A){return(0,rt.zg)(S=>{const{targetSnapshot:U,guards:{canActivateChecks:X}}=S;if(!X.length)return(0,Ee.of)(S);let ge=0;return(0,_e.D)(X).pipe(pt(Le=>function(F,A,S,U){return function(F,A,S,U){const X=Object.keys(F);if(0===X.length)return(0,Ee.of)({});const ge={};return(0,_e.D)(X).pipe((0,rt.zg)(Le=>function(F,A,S,U){const X=Ss(F,A,U);return Be(X.resolve?X.resolve(A,S):X(A,S))}(F[Le],A,S,U).pipe((0,qn.b)(pe=>{ge[Le]=pe}))),Dt(1),(0,rt.zg)(()=>Object.keys(ge).length===X.length?(0,Ee.of)(ge):De.E))}(F._resolve,F,A,U).pipe((0,Lt.U)(ge=>(F._resolvedData=ge,F.data=Object.assign(Object.assign({},F.data),Qt(F,S).resolve),null)))}(Le.route,U,F,A)),(0,qn.b)(()=>ge++),Dt(1),(0,rt.zg)(Le=>ge===X.length?(0,Ee.of)(S):De.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,qn.b)({next:()=>Cn=!0,complete:()=>{Cn||(this.restoreHistory(Pt),this.cancelNavigationTransition(Pt,"At least one route resolver didn't emit any value."))}}))}),(0,qn.b)(Pt=>{const Cn=new Fr(Pt.id,this.serializeUrl(Pt.extractedUrl),this.serializeUrl(Pt.urlAfterRedirects),Pt.targetSnapshot);this.triggerEvent(Cn)}))}),D(pe=>{const{targetSnapshot:Pt,id:Cn,extractedUrl:Lr,rawUrl:$n,extras:{skipLocationChange:Br,replaceUrl:vr}}=pe;return this.hooks.afterPreactivation(Pt,{navigationId:Cn,appliedUrlTree:Lr,rawUrlTree:$n,skipLocationChange:!!Br,replaceUrl:!!vr})}),(0,Lt.U)(pe=>{const Pt=function(F,A,S){const U=Cs(F,A._root,S?S._root:void 0);return new Ge(U,A)}(this.routeReuseStrategy,pe.targetSnapshot,pe.currentRouterState);return Object.assign(Object.assign({},pe),{targetRouterState:Pt})}),(0,qn.b)(pe=>{this.currentUrlTree=pe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(pe.urlAfterRedirects,pe.rawUrl),this.routerState=pe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(pe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,pe),this.browserUrlTree=pe.urlAfterRedirects)}),((F,A,S)=>(0,Lt.U)(U=>(new Gs(A,U.targetRouterState,U.currentRouterState,S).activate(F),U)))(this.rootContexts,this.routeReuseStrategy,pe=>this.triggerEvent(pe)),(0,qn.b)({next(){ge=!0},complete(){ge=!0}}),function(F){return A=>A.lift(new Rt(F))}(()=>{var pe;if(!ge&&!Le){const Pt=`Navigation ID ${X.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(X),this.cancelNavigationTransition(X,Pt)):this.cancelNavigationTransition(X,Pt)}(null===(pe=this.currentNavigation)||void 0===pe?void 0:pe.id)===X.id&&(this.currentNavigation=null)}),ct(pe=>{if(Le=!0,function(F){return F&&F[br]}(pe)){const Pt=Bi(pe.url);Pt||(this.navigated=!0,this.restoreHistory(X,!0));const Cn=new gn(X.id,this.serializeUrl(X.extractedUrl),pe.message);U.next(Cn),Pt?setTimeout(()=>{const Lr=this.urlHandlingStrategy.merge(pe.url,this.rawUrlTree),$n={skipLocationChange:X.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Jt(X.source)};this.scheduleNavigation(Lr,"imperative",null,$n,{resolve:X.resolve,reject:X.reject,promise:X.promise})},0):X.resolve(!1)}else{this.restoreHistory(X,!0);const Pt=new sr(X.id,this.serializeUrl(X.extractedUrl),pe);U.next(Pt);try{X.resolve(this.errorHandler(pe))}catch(Cn){X.reject(Cn)}}return De.E}))}))}resetRootComponentType(S){this.rootComponentType=S,this.routerState.root.component=this.rootComponentType}getTransition(){const S=this.transitions.value;return S.urlAfterRedirects=this.browserUrlTree,S}setTransition(S){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),S))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(S=>{const U=this.extractLocationChangeInfoFromEvent(S);this.shouldScheduleNavigation(this.lastLocationChangeInfo,U)&&setTimeout(()=>{const{source:X,state:ge,urlTree:Le}=U,pe={replaceUrl:!0};if(ge){const Pt=Object.assign({},ge);delete Pt.navigationId,delete Pt.\u0275routerPageId,0!==Object.keys(Pt).length&&(pe.state=Pt)}this.scheduleNavigation(Le,X,ge,pe)},0),this.lastLocationChangeInfo=U}))}extractLocationChangeInfoFromEvent(S){var U;return{source:"popstate"===S.type?"popstate":"hashchange",urlTree:this.parseUrl(S.url),state:(null===(U=S.state)||void 0===U?void 0:U.navigationId)?S.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(S,U){if(!S)return!0;const X=U.urlTree.toString()===S.urlTree.toString();return U.transitionId!==S.transitionId||!X||!("hashchange"===U.source&&"popstate"===S.source||"popstate"===U.source&&"hashchange"===S.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(S){this.events.next(S)}resetConfig(S){le(S),this.config=S.map(Ue),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(S,U={}){const{relativeTo:X,queryParams:ge,fragment:Le,queryParamsHandling:pe,preserveFragment:Pt}=U,Cn=X||this.routerState.root,Lr=Pt?this.currentUrlTree.fragment:Le;let $n=null;switch(pe){case"merge":$n=Object.assign(Object.assign({},this.currentUrlTree.queryParams),ge);break;case"preserve":$n=this.currentUrlTree.queryParams;break;default:$n=ge||null}return null!==$n&&($n=this.removeEmptyProps($n)),function(F,A,S,U,X){if(0===S.length)return Go(A.root,A.root,A,U,X);const ge=function(F){if("string"==typeof F[0]&&1===F.length&&"/"===F[0])return new zo(!0,0,F);let A=0,S=!1;const U=F.reduce((X,ge,Le)=>{if("object"==typeof ge&&null!=ge){if(ge.outlets){const pe={};return qt(ge.outlets,(Pt,Cn)=>{pe[Cn]="string"==typeof Pt?Pt.split("/"):Pt}),[...X,{outlets:pe}]}if(ge.segmentPath)return[...X,ge.segmentPath]}return"string"!=typeof ge?[...X,ge]:0===Le?(ge.split("/").forEach((pe,Pt)=>{0==Pt&&"."===pe||(0==Pt&&""===pe?S=!0:".."===pe?A++:""!=pe&&X.push(pe))}),X):[...X,ge]},[]);return new zo(S,A,U)}(S);if(ge.toRoot())return Go(A.root,new yn([],{}),A,U,X);const Le=function(F,A,S){if(F.isAbsolute)return new Ds(A.root,!0,0);if(-1===S.snapshot._lastPathIndex){const ge=S.snapshot._urlSegment;return new Ds(ge,ge===A.root,0)}const U=eo(F.commands[0])?0:1;return function(F,A,S){let U=F,X=A,ge=S;for(;ge>X;){if(ge-=X,U=U.parent,!U)throw new Error("Invalid number of '../'");X=U.segments.length}return new Ds(U,!1,X-ge)}(S.snapshot._urlSegment,S.snapshot._lastPathIndex+U,F.numberOfDoubleDots)}(ge,A,F),pe=Le.processChildren?Zr(Le.segmentGroup,Le.index,ge.commands):to(Le.segmentGroup,Le.index,ge.commands);return Go(Le.segmentGroup,pe,A,U,X)}(Cn,this.currentUrlTree,S,$n,null!=Lr?Lr:null)}navigateByUrl(S,U={skipLocationChange:!1}){const X=Bi(S)?S:this.parseUrl(S),ge=this.urlHandlingStrategy.merge(X,this.rawUrlTree);return this.scheduleNavigation(ge,"imperative",null,U)}navigate(S,U={skipLocationChange:!1}){return function(F){for(let A=0;A<F.length;A++){const S=F[A];if(null==S)throw new Error(`The requested path contains ${S} segment at index ${A}`)}}(S),this.navigateByUrl(this.createUrlTree(S,U),U)}serializeUrl(S){return this.urlSerializer.serialize(S)}parseUrl(S){let U;try{U=this.urlSerializer.parse(S)}catch(X){U=this.malformedUriErrorHandler(X,this.urlSerializer,S)}return U}isActive(S,U){let X;if(X=!0===U?Object.assign({},lo):!1===U?Object.assign({},Mn):U,Bi(S))return ye(this.currentUrlTree,S,X);const ge=this.parseUrl(S);return ye(this.currentUrlTree,ge,X)}removeEmptyProps(S){return Object.keys(S).reduce((U,X)=>{const ge=S[X];return null!=ge&&(U[X]=ge),U},{})}processNavigations(){this.navigations.subscribe(S=>{this.navigated=!0,this.lastSuccessfulId=S.id,this.currentPageId=S.targetPageId,this.events.next(new cr(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,S.resolve(!0)},S=>{this.console.warn(`Unhandled Navigation Error: ${S}`)})}scheduleNavigation(S,U,X,ge,Le){var pe,Pt;if(this.disposed)return Promise.resolve(!1);const Cn=this.getTransition(),Lr=Jt(U)&&Cn&&!Jt(Cn.source),vr=(this.lastSuccessfulId===Cn.id||this.currentNavigation?Cn.rawUrl:Cn.urlAfterRedirects).toString()===S.toString();if(Lr&&vr)return Promise.resolve(!0);let ms,mo,Ts;Le?(ms=Le.resolve,mo=Le.reject,Ts=Le.promise):Ts=new Promise((us,Pa)=>{ms=us,mo=Pa});const Qr=++this.navigationId;let va;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(X=this.location.getState()),va=X&&X.\u0275routerPageId?X.\u0275routerPageId:ge.replaceUrl||ge.skipLocationChange?null!==(pe=this.browserPageId)&&void 0!==pe?pe:0:(null!==(Pt=this.browserPageId)&&void 0!==Pt?Pt:0)+1):va=0,this.setTransition({id:Qr,targetPageId:va,source:U,restoredState:X,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:S,extras:ge,resolve:ms,reject:mo,promise:Ts,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ts.catch(us=>Promise.reject(us))}setBrowserUrl(S,U){const X=this.urlSerializer.serialize(S),ge=Object.assign(Object.assign({},U.extras.state),this.generateNgRouterState(U.id,U.targetPageId));this.location.isCurrentPathEqualTo(X)||U.extras.replaceUrl?this.location.replaceState(X,"",ge):this.location.go(X,"",ge)}restoreHistory(S,U=!1){var X,ge;if("computed"===this.canceledNavigationResolution){const Le=this.currentPageId-S.targetPageId;"popstate"!==S.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(X=this.currentNavigation)||void 0===X?void 0:X.finalUrl)||0===Le?this.currentUrlTree===(null===(ge=this.currentNavigation)||void 0===ge?void 0:ge.finalUrl)&&0===Le&&(this.resetState(S),this.browserUrlTree=S.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Le)}else"replace"===this.canceledNavigationResolution&&(U&&this.resetState(S),this.resetUrlToCurrentUrlTree())}resetState(S){this.routerState=S.currentRouterState,this.currentUrlTree=S.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,S.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(S,U){const X=new gn(S.id,this.serializeUrl(S.extractedUrl),U);this.triggerEvent(X),S.resolve(!1)}generateNgRouterState(S,U){return"computed"===this.canceledNavigationResolution?{navigationId:S,\u0275routerPageId:U}:{navigationId:S}}}return F.\u0275fac=function(S){return new(S||F)(O.LFG(O.DyG),O.LFG(_n),O.LFG(xn),O.LFG(E.Ye),O.LFG(O.zs3),O.LFG(O.v3s),O.LFG(O.Sil),O.LFG(void 0))},F.\u0275prov=O.Yz7({token:F,factory:F.\u0275fac}),F})();function Jt(F){return"imperative"!==F}let et=(()=>{class F{constructor(S,U,X,ge,Le){this.router=S,this.route=U,this.commands=[],this.onChanges=new Me.xQ,null==X&&ge.setAttribute(Le.nativeElement,"tabindex","0")}ngOnChanges(S){this.onChanges.next(this)}set routerLink(S){this.commands=null!=S?Array.isArray(S)?S:[S]:[]}onClick(){const S={skipLocationChange:mr(this.skipLocationChange),replaceUrl:mr(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,S),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:mr(this.preserveFragment)})}}return F.\u0275fac=function(S){return new(S||F)(O.Y36(Fn),O.Y36(ft),O.$8M("tabindex"),O.Y36(O.Qsj),O.Y36(O.SBq))},F.\u0275dir=O.lG2({type:F,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(S,U){1&S&&O.NdJ("click",function(){return U.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[O.TTD]}),F})();function mr(F){return""===F||!!F}let Bs=(()=>{class F{constructor(S,U,X,ge,Le){this.parentContexts=S,this.location=U,this.resolver=X,this.changeDetector=Le,this.activated=null,this._activatedRoute=null,this.activateEvents=new O.vpe,this.deactivateEvents=new O.vpe,this.name=ge||hn,S.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const S=this.parentContexts.getContext(this.name);S&&S.route&&(S.attachRef?this.attach(S.attachRef,S.route):this.activateWith(S.route,S.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const S=this.activated;return this.activated=null,this._activatedRoute=null,S}attach(S,U){this.activated=S,this._activatedRoute=U,this.location.insert(S.hostView)}deactivate(){if(this.activated){const S=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(S)}}activateWith(S,U){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=S;const Le=(U=U||this.resolver).resolveComponentFactory(S._futureSnapshot.routeConfig.component),pe=this.parentContexts.getOrCreateContext(this.name).children,Pt=new Nl(S,pe,this.location.injector);this.activated=this.location.createComponent(Le,this.location.length,Pt),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return F.\u0275fac=function(S){return new(S||F)(O.Y36(xn),O.Y36(O.s_b),O.Y36(O._Vd),O.$8M("name"),O.Y36(O.sBO))},F.\u0275dir=O.lG2({type:F,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),F})();class Nl{constructor(A,S,U){this.route=A,this.childContexts=S,this.parent=U}get(A,S){return A===ft?this.route:A===xn?this.childContexts:this.parent.get(A,S)}}class Ui{}class Mr{preload(A,S){return S().pipe(ct(()=>(0,Ee.of)(null)))}}class as{preload(A,S){return(0,Ee.of)(null)}}let Uu=(()=>{class F{constructor(S,U,X,ge,Le){this.router=S,this.injector=ge,this.preloadingStrategy=Le,this.loader=new un(U,X,Cn=>S.triggerEvent(new Dr(Cn)),Cn=>S.triggerEvent(new mi(Cn)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,st.h)(S=>S instanceof cr),pt(()=>this.preload())).subscribe(()=>{})}preload(){const S=this.injector.get(O.h0i);return this.processRoutes(S,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(S,U){const X=[];for(const ge of U)if(ge.loadChildren&&!ge.canLoad&&ge._loadedConfig){const Le=ge._loadedConfig;X.push(this.processRoutes(Le.module,Le.routes))}else ge.loadChildren&&!ge.canLoad?X.push(this.preloadConfig(S,ge)):ge.children&&X.push(this.processRoutes(S,ge.children));return(0,_e.D)(X).pipe((0,Tr.J)(),(0,Lt.U)(ge=>{}))}preloadConfig(S,U){return this.preloadingStrategy.preload(U,()=>(U._loadedConfig?(0,Ee.of)(U._loadedConfig):this.loader.load(S.injector,U)).pipe((0,rt.zg)(ge=>(U._loadedConfig=ge,this.processRoutes(ge.module,ge.routes)))))}}return F.\u0275fac=function(S){return new(S||F)(O.LFG(Fn),O.LFG(O.v3s),O.LFG(O.Sil),O.LFG(O.zs3),O.LFG(Ui))},F.\u0275prov=O.Yz7({token:F,factory:F.\u0275fac}),F})(),Ql=(()=>{class F{constructor(S,U,X={}){this.router=S,this.viewportScroller=U,this.options=X,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},X.scrollPositionRestoration=X.scrollPositionRestoration||"disabled",X.anchorScrolling=X.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(S=>{S instanceof Wn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=S.navigationTrigger,this.restoredId=S.restoredState?S.restoredState.navigationId:0):S instanceof cr&&(this.lastId=S.id,this.scheduleScrollEvent(S,this.router.parseUrl(S.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(S=>{S instanceof di&&(S.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(S.position):S.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(S.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(S,U){this.router.triggerEvent(new di(S,"popstate"===this.lastSource?this.store[this.restoredId]:null,U))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return F.\u0275fac=function(S){return new(S||F)(O.LFG(Fn),O.LFG(E.EM),O.LFG(void 0))},F.\u0275prov=O.Yz7({token:F,factory:F.\u0275fac}),F})();const Ma=new O.OlP("ROUTER_CONFIGURATION"),ur=new O.OlP("ROUTER_FORROOT_GUARD"),po=[E.Ye,{provide:_n,useClass:Sn},{provide:Fn,useFactory:function(F,A,S,U,X,ge,Le,pe={},Pt,Cn){const Lr=new Fn(null,F,A,S,U,X,ge,mn(Le));return Pt&&(Lr.urlHandlingStrategy=Pt),Cn&&(Lr.routeReuseStrategy=Cn),function(F,A){F.errorHandler&&(A.errorHandler=F.errorHandler),F.malformedUriErrorHandler&&(A.malformedUriErrorHandler=F.malformedUriErrorHandler),F.onSameUrlNavigation&&(A.onSameUrlNavigation=F.onSameUrlNavigation),F.paramsInheritanceStrategy&&(A.paramsInheritanceStrategy=F.paramsInheritanceStrategy),F.relativeLinkResolution&&(A.relativeLinkResolution=F.relativeLinkResolution),F.urlUpdateStrategy&&(A.urlUpdateStrategy=F.urlUpdateStrategy)}(pe,Lr),pe.enableTracing&&Lr.events.subscribe($n=>{var Br,vr;null===(Br=console.group)||void 0===Br||Br.call(console,`Router Event: ${$n.constructor.name}`),console.log($n.toString()),console.log($n),null===(vr=console.groupEnd)||void 0===vr||vr.call(console)}),Lr},deps:[_n,xn,E.Ye,O.zs3,O.v3s,O.Sil,Ht,Ma,[class{},new O.FiY],[q,new O.FiY]]},xn,{provide:ft,useFactory:function(F){return F.routerState.root},deps:[Fn]},{provide:O.v3s,useClass:O.EAV},Uu,as,Mr,{provide:Ma,useValue:{enableTracing:!1}}];function pi(){return new O.PXZ("Router",Fn)}let ar=(()=>{class F{constructor(S,U){}static forRoot(S,U){return{ngModule:F,providers:[po,gi(S),{provide:ur,useFactory:ju,deps:[[Fn,new O.FiY,new O.tp0]]},{provide:Ma,useValue:U||{}},{provide:E.S$,useFactory:Jr,deps:[E.lw,[new O.tBr(E.mr),new O.FiY],Ma]},{provide:Ql,useFactory:oa,deps:[Fn,E.EM,Ma]},{provide:Ui,useExisting:U&&U.preloadingStrategy?U.preloadingStrategy:as},{provide:O.PXZ,multi:!0,useFactory:pi},[ls,{provide:O.ip1,multi:!0,useFactory:Kr,deps:[ls]},{provide:_l,useFactory:la,deps:[ls]},{provide:O.tb,multi:!0,useExisting:_l}]]}}static forChild(S){return{ngModule:F,providers:[gi(S)]}}}return F.\u0275fac=function(S){return new(S||F)(O.LFG(ur,8),O.LFG(Fn,8))},F.\u0275mod=O.oAB({type:F}),F.\u0275inj=O.cJS({}),F})();function oa(F,A,S){return S.scrollOffset&&A.setOffset(S.scrollOffset),new Ql(F,A,S)}function Jr(F,A,S={}){return S.useHash?new E.Do(F,A):new E.b0(F,A)}function ju(F){return"guarded"}function gi(F){return[{provide:O.deG,multi:!0,useValue:F},{provide:Ht,multi:!0,useValue:F}]}let ls=(()=>{class F{constructor(S){this.injector=S,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Me.xQ}appInitializer(){return this.injector.get(E.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let U=null;const X=new Promise(pe=>U=pe),ge=this.injector.get(Fn),Le=this.injector.get(Ma);return"disabled"===Le.initialNavigation?(ge.setUpLocationChangeListener(),U(!0)):"enabled"===Le.initialNavigation||"enabledBlocking"===Le.initialNavigation?(ge.hooks.afterPreactivation=()=>this.initNavigation?(0,Ee.of)(null):(this.initNavigation=!0,U(!0),this.resultOfPreactivationDone),ge.initialNavigation()):U(!0),X})}bootstrapListener(S){const U=this.injector.get(Ma),X=this.injector.get(Uu),ge=this.injector.get(Ql),Le=this.injector.get(Fn),pe=this.injector.get(O.z2F);S===pe.components[0]&&(("enabledNonBlocking"===U.initialNavigation||void 0===U.initialNavigation)&&Le.initialNavigation(),X.setUpPreloading(),ge.init(),Le.resetRootComponentType(pe.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return F.\u0275fac=function(S){return new(S||F)(O.LFG(O.zs3))},F.\u0275prov=O.Yz7({token:F,factory:F.\u0275fac}),F})();function Kr(F){return F.appInitializer.bind(F)}function la(F){return F.bootstrapListener.bind(F)}const _l=new O.OlP("Router Initializer")},3607:(tn,Ze,B)=>{"use strict";B.d(Ze,{$:()=>el,A:()=>ht,B:()=>Rt,G:()=>An,H:()=>hi,J:()=>_i,L:()=>Hn,M:()=>be,N:()=>W,P:()=>L,Q:()=>$,R:()=>ua,T:()=>k,U:()=>Xt,V:()=>Zn,W:()=>Ur,X:()=>Qn,Y:()=>ho,Z:()=>Ol,_:()=>ya,a:()=>A,a0:()=>bo,a1:()=>Lo,a2:()=>Vo,a3:()=>qs,a4:()=>Di,a5:()=>_a,a6:()=>tl,a7:()=>nl,a8:()=>w,a9:()=>P,aA:()=>Uh,aB:()=>bl,aC:()=>Da,aD:()=>Ba,aE:()=>ft,aI:()=>X,aL:()=>ot,aa:()=>it,ab:()=>un,ac:()=>xn,af:()=>Jn,ag:()=>lo,ah:()=>Mn,ak:()=>na,al:()=>Nl,an:()=>ar,ao:()=>Oa,ap:()=>z,aq:()=>cr,ar:()=>nt,as:()=>yi,at:()=>Nn,au:()=>Tc,av:()=>Cc,aw:()=>Dn,ax:()=>Ft,ay:()=>sr,az:()=>Vr,b:()=>go,c:()=>Ar,d:()=>ui,e:()=>rr,f:()=>kl,g:()=>Ic,h:()=>Fl,i:()=>ni,j:()=>ol,k:()=>gd,l:()=>eu,m:()=>Ta,n:()=>sp,o:()=>pn,q:()=>Mr,r:()=>Hu,s:()=>Fa,u:()=>La,y:()=>Ma});var E=B(8239),O=B(3854),ne=B(8026),oe=B(5422);function re(T,g){var _={};for(var x in T)Object.prototype.hasOwnProperty.call(T,x)&&g.indexOf(x)<0&&(_[x]=T[x]);if(null!=T&&"function"==typeof Object.getOwnPropertySymbols){var J=0;for(x=Object.getOwnPropertySymbols(T);J<x.length;J++)g.indexOf(x[J])<0&&Object.prototype.propertyIsEnumerable.call(T,x[J])&&(_[x[J]]=T[x[J]])}return _}var At=B(3910);const pn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ht={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Rt=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Zt=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Lt=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Bn=new oe.Yd("@firebase/auth");function ir(T,...g){Bn.logLevel<=oe.in.ERROR&&Bn.error(`Auth (${ne.SDK_VERSION}): ${T}`,...g)}function Nn(T,...g){throw Tr(T,...g)}function Dn(T,...g){return Tr(T,...g)}function qn(T,g,_){const x=Object.assign(Object.assign({},Zt()),{[g]:_});return new O.LL("auth","Firebase",x).create(g,{appName:T.name})}function Gr(T,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&Nn(T,"argument-error"),qn(T,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Tr(T,...g){if("string"!=typeof T){const _=g[0],x=[...g.slice(1)];return x[0]&&(x[0].appName=T.name),T._errorFactory.create(_,...x)}return Lt.create(T,...g)}function Ft(T,g,..._){if(!T)throw Tr(g,..._)}function Wn(T){const g="INTERNAL ASSERTION FAILED: "+T;throw ir(g),new Error(g)}function cr(T,g){T||Wn(g)}const gn=new Map;function sr(T){cr(T instanceof Function,"Expected a class definition");let g=gn.get(T);return g?(cr(g instanceof T,"Instance stored in cache mismatched with class"),g):(g=new T,gn.set(T,g),g)}function kr(){var T;return"undefined"!=typeof self&&(null===(T=self.location)||void 0===T?void 0:T.href)||""}function ai(){return"http:"===Fr()||"https:"===Fr()}function Fr(){var T;return"undefined"!=typeof self&&(null===(T=self.location)||void 0===T?void 0:T.protocol)||null}class dr{constructor(g,_){this.shortDelay=g,this.longDelay=_,cr(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ai()||(0,O.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function dn(T,g){cr(T.emulator,"Emulator should always be set here");const{url:_}=T.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class Ct{static initialize(g,_,x){this.fetchImpl=g,_&&(this.headersImpl=_),x&&(this.responseImpl=x)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Wn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Wn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Wn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ci={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},di=new dr(3e4,6e4);function hn(T,g){return T.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:T.tenantId}):g}function Vn(T,g,_,x){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,E.Z)(function*(T,g,_,x,J={}){return br(T,J,(0,E.Z)(function*(){let de={},Ye={};x&&("GET"===g?Ye=x:de={body:JSON.stringify(x)});const xt=(0,O.xO)(Object.assign({key:T.config.apiKey},Ye)).slice(1),Rn=yield T._getAdditionalHeaders();return Rn["Content-Type"]="application/json",T.languageCode&&(Rn["X-Firebase-Locale"]=T.languageCode),Ct.fetch()(ii(T,T.config.apiHost,_,xt),Object.assign({method:g,headers:Rn,referrerPolicy:"no-referrer"},de))}))})).apply(this,arguments)}function br(T,g,_){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,E.Z)(function*(T,g,_){T._canInitEmulator=!1;const x=Object.assign(Object.assign({},ci),g);try{const J=new on(T),de=yield Promise.race([_(),J.promise]);J.clearNetworkTimeout();const Ye=yield de.json();if("needConfirmation"in Ye)throw Ot(T,"account-exists-with-different-credential",Ye);if(de.ok&&!("errorMessage"in Ye))return Ye;{const xt=de.ok?Ye.errorMessage:Ye.error.message,[Rn,fn]=xt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Rn)throw Ot(T,"credential-already-in-use",Ye);if("EMAIL_EXISTS"===Rn)throw Ot(T,"email-already-in-use",Ye);if("USER_DISABLED"===Rn)throw Ot(T,"user-disabled",Ye);const tr=x[Rn]||Rn.toLowerCase().replace(/[_\s]+/g,"-");if(fn)throw qn(T,tr,fn);Nn(T,tr)}}catch(J){if(J instanceof O.ZR)throw J;Nn(T,"network-request-failed")}})).apply(this,arguments)}function Gn(T,g,_,x){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,E.Z)(function*(T,g,_,x,J={}){const de=yield Vn(T,g,_,x,J);return"mfaPendingCredential"in de&&Nn(T,"multi-factor-auth-required",{_serverResponse:de}),de})).apply(this,arguments)}function ii(T,g,_,x){const J=`${g}${_}?${x}`;return T.config.emulator?dn(T.config,J):`${T.config.apiScheme}://${J}`}class on{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,x)=>{this.timer=setTimeout(()=>x(Dn(this.auth,"network-request-failed")),di.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ot(T,g,_){const x={appName:T.name};_.email&&(x.email=_.email),_.phoneNumber&&(x.phoneNumber=_.phoneNumber);const J=Dn(T,g,x);return J.customData._tokenResponse=_,J}function cn(){return(cn=(0,E.Z)(function*(T,g){return Vn(T,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function rn(T,g){return qt.apply(this,arguments)}function qt(){return(qt=(0,E.Z)(function*(T,g){return Vn(T,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Be(T,g){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,E.Z)(function*(T,g){return Vn(T,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Qe(T){if(T)try{const g=new Date(Number(T));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function Oe(){return(Oe=(0,E.Z)(function*(T,g=!1){const _=(0,O.m9)(T),x=yield _.getIdToken(g),J=Ut(x);Ft(J&&J.exp&&J.auth_time&&J.iat,_.auth,"internal-error");const de="object"==typeof J.firebase?J.firebase:void 0,Ye=null==de?void 0:de.sign_in_provider;return{claims:J,token:x,authTime:Qe(ut(J.auth_time)),issuedAtTime:Qe(ut(J.iat)),expirationTime:Qe(ut(J.exp)),signInProvider:Ye||null,signInSecondFactor:(null==de?void 0:de.sign_in_second_factor)||null}})).apply(this,arguments)}function ut(T){return 1e3*Number(T)}function Ut(T){var g;const[_,x,J]=T.split(".");if(void 0===_||void 0===x||void 0===J)return ir("JWT malformed, contained fewer than 3 sections"),null;try{const de=(0,O.tV)(x);return de?JSON.parse(de):(ir("Failed to decode base64 JWT payload"),null)}catch(de){return ir("Caught error parsing JWT payload as JSON",null===(g=de)||void 0===g?void 0:g.toString()),null}}function Tn(T,g){return kn.apply(this,arguments)}function kn(){return(kn=(0,E.Z)(function*(T,g,_=!1){if(_)return g;try{return yield g}catch(x){throw x instanceof O.ZR&&ln(x)&&T.auth.currentUser===T&&(yield T.auth.signOut()),x}})).apply(this,arguments)}function ln({code:T}){return"auth/user-disabled"===T||"auth/user-token-expired"===T}class yn{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const x=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),x}{this.errorBackoff=3e4;const J=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,J)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const x=this.getInterval(g);this.timerId=setTimeout((0,E.Z)(function*(){yield _.iteration()}),x)}iteration(){var g=this;return(0,E.Z)(function*(){var _;try{yield g.user.getIdToken(!0)}catch(x){return void("auth/network-request-failed"===(null===(_=x)||void 0===_?void 0:_.code)&&g.schedule(!0))}g.schedule()})()}}class pr{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qe(this.lastLoginAt),this.creationTime=Qe(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function $t(T){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,E.Z)(function*(T){var g;const _=T.auth,x=yield T.getIdToken(),J=yield Tn(T,Be(_,{idToken:x}));Ft(null==J?void 0:J.users.length,_,"internal-error");const de=J.users[0];T._notifyReloadListener(de);const Ye=(null===(g=de.providerUserInfo)||void 0===g?void 0:g.length)?nn(de.providerUserInfo):[],xt=Sn(T.providerData,Ye),tr=!!T.isAnonymous&&!(T.email&&de.passwordHash||(null==xt?void 0:xt.length)),vi={uid:de.localId,displayName:de.displayName||null,photoURL:de.photoUrl||null,email:de.email||null,emailVerified:de.emailVerified||!1,phoneNumber:de.phoneNumber||null,tenantId:de.tenantId||null,providerData:xt,metadata:new pr(de.createdAt,de.lastLoginAt),isAnonymous:tr};Object.assign(T,vi)})).apply(this,arguments)}function _n(){return(_n=(0,E.Z)(function*(T){const g=(0,O.m9)(T);yield $t(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Sn(T,g){return[...T.filter(x=>!g.some(J=>J.providerId===x.providerId)),...g]}function nn(T){return T.map(g=>{var{providerId:_}=g,x=re(g,["providerId"]);return{providerId:_,uid:x.rawId||"",displayName:x.displayName||null,email:x.email||null,phoneNumber:x.phoneNumber||null,photoURL:x.photoUrl||null}})}function yr(){return(yr=(0,E.Z)(function*(T,g){const _=yield br(T,{},(0,E.Z)(function*(){const x=(0,O.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:J,apiKey:de}=T.config,Ye=ii(T,J,"/v1/token",`key=${de}`),xt=yield T._getAdditionalHeaders();return xt["Content-Type"]="application/x-www-form-urlencoded",Ct.fetch()(Ye,{method:"POST",headers:xt,body:x})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Nr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Ft(g.idToken,"internal-error"),Ft(void 0!==g.idToken,"internal-error"),Ft(void 0!==g.refreshToken,"internal-error");const _="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function(T){const g=Ut(T);return Ft(g,"internal-error"),Ft(void 0!==g.exp,"internal-error"),Ft(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var x=this;return(0,E.Z)(function*(){return Ft(!x.accessToken||x.refreshToken,g,"user-token-expired"),_||!x.accessToken||x.isExpired?x.refreshToken?(yield x.refresh(g,x.refreshToken),x.accessToken):null:x.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var x=this;return(0,E.Z)(function*(){const{accessToken:J,refreshToken:de,expiresIn:Ye}=yield function(T,g){return yr.apply(this,arguments)}(g,_);x.updateTokensAndExpiration(J,de,Number(Ye))})()}updateTokensAndExpiration(g,_,x){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*x}static fromJSON(g,_){const{refreshToken:x,accessToken:J,expirationTime:de}=_,Ye=new Nr;return x&&(Ft("string"==typeof x,"internal-error",{appName:g}),Ye.refreshToken=x),J&&(Ft("string"==typeof J,"internal-error",{appName:g}),Ye.accessToken=J),de&&(Ft("number"==typeof de,"internal-error",{appName:g}),Ye.expirationTime=de),Ye}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Nr,this.toJSON())}_performRefresh(){return Wn("not implemented")}}function gr(T,g){Ft("string"==typeof T||void 0===T,"internal-error",{appName:g})}class qr{constructor(g){var{uid:_,auth:x,stsTokenManager:J}=g,de=re(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=x,this.stsTokenManager=J,this.accessToken=J.accessToken,this.displayName=de.displayName||null,this.email=de.email||null,this.emailVerified=de.emailVerified||!1,this.phoneNumber=de.phoneNumber||null,this.photoURL=de.photoURL||null,this.isAnonymous=de.isAnonymous||!1,this.tenantId=de.tenantId||null,this.providerData=de.providerData?[...de.providerData]:[],this.metadata=new pr(de.createdAt||void 0,de.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,E.Z)(function*(){const x=yield Tn(_,_.stsTokenManager.getToken(_.auth,g));return Ft(x,_.auth,"internal-error"),_.accessToken!==x&&(_.accessToken=x,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),x})()}getIdTokenResult(g){return function(T){return Oe.apply(this,arguments)}(this,g)}reload(){return function(T){return _n.apply(this,arguments)}(this)}_assign(g){this!==g&&(Ft(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new qr(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){Ft(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var x=this;return(0,E.Z)(function*(){let J=!1;g.idToken&&g.idToken!==x.stsTokenManager.accessToken&&(x.stsTokenManager.updateFromServerResponse(g),J=!0),_&&(yield $t(x)),yield x.auth._persistUserIfCurrent(x),J&&x.auth._notifyListenersIfCurrent(x)})()}delete(){var g=this;return(0,E.Z)(function*(){const _=yield g.getIdToken();return yield Tn(g,function(T,g){return cn.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var x,J,de,Ye,xt,Rn,fn,tr;const vi=null!==(x=_.displayName)&&void 0!==x?x:void 0,Fi=null!==(J=_.email)&&void 0!==J?J:void 0,uo=null!==(de=_.phoneNumber)&&void 0!==de?de:void 0,jl=null!==(Ye=_.photoURL)&&void 0!==Ye?Ye:void 0,_d=null!==(xt=_.tenantId)&&void 0!==xt?xt:void 0,Qs=null!==(Rn=_._redirectEventId)&&void 0!==Rn?Rn:void 0,Ac=null!==(fn=_.createdAt)&&void 0!==fn?fn:void 0,Tu=null!==(tr=_.lastLoginAt)&&void 0!==tr?tr:void 0,{uid:zi,emailVerified:So,isAnonymous:xc,providerData:Rc,stsTokenManager:Us}=_;Ft(zi&&Us,g,"internal-error");const Hl=Nr.fromJSON(this.name,Us);Ft("string"==typeof zi,g,"internal-error"),gr(vi,g.name),gr(Fi,g.name),Ft("boolean"==typeof So,g,"internal-error"),Ft("boolean"==typeof xc,g,"internal-error"),gr(uo,g.name),gr(jl,g.name),gr(_d,g.name),gr(Qs,g.name),gr(Ac,g.name),gr(Tu,g.name);const Su=new qr({uid:zi,auth:g,email:Fi,emailVerified:So,displayName:vi,isAnonymous:xc,photoURL:jl,phoneNumber:uo,tenantId:_d,stsTokenManager:Hl,createdAt:Ac,lastLoginAt:Tu});return Rc&&Array.isArray(Rc)&&(Su.providerData=Rc.map(zh=>Object.assign({},zh))),Qs&&(Su._redirectEventId=Qs),Su}static _fromIdTokenResponse(g,_,x=!1){return(0,E.Z)(function*(){const J=new Nr;J.updateFromServerResponse(_);const de=new qr({uid:_.localId,auth:g,stsTokenManager:J,isAnonymous:x});return yield $t(de),de})()}}const Hn=(()=>{class T{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,E.Z)(function*(){return!0})()}_set(_,x){var J=this;return(0,E.Z)(function*(){J.storage[_]=x})()}_get(_){var x=this;return(0,E.Z)(function*(){const J=x.storage[_];return void 0===J?null:J})()}_remove(_){var x=this;return(0,E.Z)(function*(){delete x.storage[_]})()}_addListener(_,x){}_removeListener(_,x){}}return T.type="NONE",T})();function Vr(T,g,_){return`firebase:${T}:${g}:${_}`}class Ei{constructor(g,_,x){this.persistence=g,this.auth=_,this.userKey=x;const{config:J,name:de}=this.auth;this.fullUserKey=Vr(this.userKey,J.apiKey,de),this.fullPersistenceKey=Vr("persistence",J.apiKey,de),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,E.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?qr._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,E.Z)(function*(){if(_.persistence===g)return;const x=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,x?_.setCurrentUser(x):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,x="authUser"){return(0,E.Z)(function*(){if(!_.length)return new Ei(sr(Hn),g,x);const J=(yield Promise.all(_.map(function(){var fn=(0,E.Z)(function*(tr){if(yield tr._isAvailable())return tr});return function(tr){return fn.apply(this,arguments)}}()))).filter(fn=>fn);let de=J[0]||sr(Hn);const Ye=Vr(x,g.config.apiKey,g.name);let xt=null;for(const fn of _)try{const tr=yield fn._get(Ye);if(tr){const vi=qr._fromJSON(g,tr);fn!==de&&(xt=vi),de=fn;break}}catch(tr){}const Rn=J.filter(fn=>fn._shouldAllowMigration);return de._shouldAllowMigration&&Rn.length?(de=Rn[0],xt&&(yield de._set(Ye,xt.toJSON())),yield Promise.all(_.map(function(){var fn=(0,E.Z)(function*(tr){if(tr!==de)try{yield tr._remove(Ye)}catch(vi){}});return function(tr){return fn.apply(this,arguments)}}())),new Ei(de,g,x)):new Ei(de,g,x)})()}}function Yr(T){const g=T.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if($r(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(bs(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Ir(g))return"Blackberry";if(Ns(g))return"Webos";if(or(g))return"Safari";if((g.includes("chrome/")||is(g))&&!g.includes("edge/"))return"Chrome";if(yi(g))return"Android";{const x=T.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==x?void 0:x.length))return x[1]}return"Other"}function bs(T=(0,O.z$)()){return/firefox\//i.test(T)}function or(T=(0,O.z$)()){const g=T.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function is(T=(0,O.z$)()){return/crios\//i.test(T)}function $r(T=(0,O.z$)()){return/iemobile/i.test(T)}function yi(T=(0,O.z$)()){return/android/i.test(T)}function Ir(T=(0,O.z$)()){return/blackberry/i.test(T)}function Ns(T=(0,O.z$)()){return/webos/i.test(T)}function nt(T=(0,O.z$)()){return/iphone|ipad|ipod/i.test(T)||/macintosh/i.test(T)&&/mobile/i.test(T)}function z(T=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(T)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(T)}function Ie(T=(0,O.z$)()){return nt(T)||yi(T)||Ns(T)||Ir(T)||/windows phone/i.test(T)||$r(T)}function Ge(T,g=[]){let _;switch(T){case"Browser":_=Yr((0,O.z$)());break;case"Worker":_=`${Yr((0,O.z$)())}-${T}`;break;default:_=T}const x=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${ne.SDK_VERSION}/${x}`}class _t{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const x=de=>new Promise((Ye,xt)=>{try{Ye(g(de))}catch(Rn){xt(Rn)}});x.onAbort=_,this.queue.push(x);const J=this.queue.length-1;return()=>{this.queue[J]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,E.Z)(function*(){var x;if(_.auth.currentUser===g)return;const J=[];try{for(const de of _.queue)yield de(g),de.onAbort&&J.push(de.onAbort)}catch(de){J.reverse();for(const Ye of J)try{Ye()}catch(xt){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(x=de)||void 0===x?void 0:x.message})}})()}}class yt{constructor(g,_,x){this.app=g,this.heartbeatServiceProvider=_,this.config=x,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qt(this),this.idTokenSubscription=new Qt(this),this.beforeStateQueue=new _t(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Lt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=x.sdkClientVersion}_initializeWithPersistence(g,_){var x=this;return _&&(this._popupRedirectResolver=sr(_)),this._initializationPromise=this.queue((0,E.Z)(function*(){var J,de;if(!x._deleted&&(x.persistenceManager=yield Ei.create(x,g),!x._deleted)){if(null===(J=x._popupRedirectResolver)||void 0===J?void 0:J._shouldInitProactively)try{yield x._popupRedirectResolver._initialize(x)}catch(Ye){}yield x.initializeCurrentUser(_),x.lastNotifiedUid=(null===(de=x.currentUser)||void 0===de?void 0:de.uid)||null,!x._deleted&&(x._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,E.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,E.Z)(function*(){var x;const J=yield _.assertedPersistence.getCurrentUser();let de=J,Ye=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const xt=null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId,Rn=null==de?void 0:de._redirectEventId,fn=yield _.tryRedirectSignIn(g);(!xt||xt===Rn)&&(null==fn?void 0:fn.user)&&(de=fn.user,Ye=!0)}if(!de)return _.directlySetCurrentUser(null);if(!de._redirectEventId){if(Ye)try{yield _.beforeStateQueue.runMiddleware(de)}catch(xt){de=J,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(xt))}return de?_.reloadAndSetCurrentUserOrClear(de):_.directlySetCurrentUser(null)}return Ft(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===de._redirectEventId?_.directlySetCurrentUser(de):_.reloadAndSetCurrentUserOrClear(de)})()}tryRedirectSignIn(g){var _=this;return(0,E.Z)(function*(){let x=null;try{x=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch(J){yield _._setRedirectUser(null)}return x})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,E.Z)(function*(){var x;try{yield $t(g)}catch(J){if("auth/network-request-failed"!==(null===(x=J)||void 0===x?void 0:x.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const T=navigator;return T.languages&&T.languages[0]||T.language||null}()}_delete(){var g=this;return(0,E.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,E.Z)(function*(){const x=g?(0,O.m9)(g):null;return x&&Ft(x.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(x&&x._clone(_))})()}_updateCurrentUser(g,_=!1){var x=this;return(0,E.Z)(function*(){if(!x._deleted)return g&&Ft(x.tenantId===g.tenantId,x,"tenant-id-mismatch"),_||(yield x.beforeStateQueue.runMiddleware(g)),x.queue((0,E.Z)(function*(){yield x.directlySetCurrentUser(g),x.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,E.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,E.Z)(function*(){yield _.assertedPersistence.setPersistence(sr(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new O.LL("auth","Firebase",g())}onAuthStateChanged(g,_,x){return this.registerStateListener(this.authStateSubscription,g,_,x)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,x){return this.registerStateListener(this.idTokenSubscription,g,_,x)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var x=this;return(0,E.Z)(function*(){const J=yield x.getOrInitRedirectPersistenceManager(_);return null===g?J.removeCurrentUser():J.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,E.Z)(function*(){if(!_.redirectPersistenceManager){const x=g&&sr(g)||_._popupRedirectResolver;Ft(x,_,"argument-error"),_.redirectPersistenceManager=yield Ei.create(_,[sr(x._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,E.Z)(function*(){var x,J;return _._isInitialized&&(yield _.queue((0,E.Z)(function*(){}))),(null===(x=_._currentUser)||void 0===x?void 0:x._redirectEventId)===g?_._currentUser:(null===(J=_.redirectUser)||void 0===J?void 0:J._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,E.Z)(function*(){if(g===_.currentUser)return _.queue((0,E.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const x=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==x&&(this.lastNotifiedUid=x,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,x,J){if(this._deleted)return()=>{};const de="function"==typeof _?_:_.next.bind(_),Ye=this._isInitialized?Promise.resolve():this._initializationPromise;return Ft(Ye,this,"internal-error"),Ye.then(()=>de(this.currentUser)),"function"==typeof _?g.addObserver(_,x,J):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,E.Z)(function*(){_.currentUser&&_.currentUser!==g&&_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh(),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return Ft(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Ge(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,E.Z)(function*(){var _;const x={"X-Client-Version":g.clientVersion};g.app.options.appId&&(x["X-Firebase-gmpid"]=g.app.options.appId);const J=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return J&&(x["X-Firebase-Client"]=J),x})()}}function ft(T){return(0,O.m9)(T)}class Qt{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,O.ne)(_=>this.observer=_)}get next(){return Ft(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function An(T,g,_){const x=ft(T);Ft(x._canInitEmulator,x,"emulator-config-failed"),Ft(/^https?:\/\//.test(g),x,"invalid-emulator-scheme");const J=!!(null==_?void 0:_.disableWarnings),de=Pn(g),{host:Ye,port:xt}=function(T){const g=Pn(T),_=/(\/\/)?([^?#/]+)/.exec(T.substr(g.length));if(!_)return{host:"",port:null};const x=_[2].split("@").pop()||"",J=/^(\[[^\]]+\])(:|$)/.exec(x);if(J){const de=J[1];return{host:de,port:Cr(x.substr(de.length+1))}}{const[de,Ye]=x.split(":");return{host:de,port:Cr(Ye)}}}(g);x.config.emulator={url:`${de}//${Ye}${null===xt?"":`:${xt}`}/`},x.settings.appVerificationDisabledForTesting=!0,x.emulatorConfig=Object.freeze({host:Ye,port:xt,protocol:de.replace(":",""),options:Object.freeze({disableWarnings:J})}),J||function(){function T(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",T):T())}()}function Pn(T){const g=T.indexOf(":");return g<0?"":T.substr(0,g+1)}function Cr(T){if(!T)return null;const g=Number(T);return isNaN(g)?null:g}class hi{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return Wn("not implemented")}_getIdTokenResponse(g){return Wn("not implemented")}_linkToIdToken(g,_){return Wn("not implemented")}_getReauthenticationResolver(g){return Wn("not implemented")}}function Ni(T,g){return xr.apply(this,arguments)}function xr(){return(xr=(0,E.Z)(function*(T,g){return Vn(T,"POST","/v1/accounts:resetPassword",hn(T,g))})).apply(this,arguments)}function Cs(T,g){return ss.apply(this,arguments)}function ss(){return(ss=(0,E.Z)(function*(T,g){return Vn(T,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ws(T,g){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,E.Z)(function*(T,g){return Vn(T,"POST","/v1/accounts:update",hn(T,g))})).apply(this,arguments)}function eo(){return(eo=(0,E.Z)(function*(T,g){return Gn(T,"POST","/v1/accounts:signInWithPassword",hn(T,g))})).apply(this,arguments)}function js(T,g){return Go.apply(this,arguments)}function Go(){return(Go=(0,E.Z)(function*(T,g){return Vn(T,"POST","/v1/accounts:sendOobCode",hn(T,g))})).apply(this,arguments)}function Po(T,g){return zo.apply(this,arguments)}function zo(){return(zo=(0,E.Z)(function*(T,g){return js(T,g)})).apply(this,arguments)}function Ml(T,g){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,E.Z)(function*(T,g){return js(T,g)})).apply(this,arguments)}function Hs(T,g){return fs.apply(this,arguments)}function fs(){return(fs=(0,E.Z)(function*(T,g){return js(T,g)})).apply(this,arguments)}function Ws(T,g){return to.apply(this,arguments)}function to(){return(to=(0,E.Z)(function*(T,g){return js(T,g)})).apply(this,arguments)}function no(){return(no=(0,E.Z)(function*(T,g){return Gn(T,"POST","/v1/accounts:signInWithEmailLink",hn(T,g))})).apply(this,arguments)}function ps(){return(ps=(0,E.Z)(function*(T,g){return Gn(T,"POST","/v1/accounts:signInWithEmailLink",hn(T,g))})).apply(this,arguments)}class ro extends hi{constructor(g,_,x,J=null){super("password",x),this._email=g,this._password=_,this._tenantId=J}static _fromEmailAndPassword(g,_){return new ro(g,_,"password")}static _fromEmailAndCode(g,_,x=null){return new ro(g,_,"emailLink",x)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,E.Z)(function*(){switch(_.signInMethod){case"password":return function(T,g){return eo.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function(T,g){return no.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:Nn(g,"internal-error")}})()}_linkToIdToken(g,_){var x=this;return(0,E.Z)(function*(){switch(x.signInMethod){case"password":return Cs(g,{idToken:_,returnSecureToken:!0,email:x._email,password:x._password});case"emailLink":return function(T,g){return ps.apply(this,arguments)}(g,{idToken:_,email:x._email,oobCode:x._password});default:Nn(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function os(T,g){return Li.apply(this,arguments)}function Li(){return(Li=(0,E.Z)(function*(T,g){return Gn(T,"POST","/v1/accounts:signInWithIdp",hn(T,g))})).apply(this,arguments)}class _i extends hi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new _i(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):Nn("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:x,signInMethod:J}=_,de=re(_,["providerId","signInMethod"]);if(!x||!J)return null;const Ye=new _i(x,J);return Ye.idToken=de.idToken||void 0,Ye.accessToken=de.accessToken||void 0,Ye.secret=de.secret,Ye.nonce=de.nonce,Ye.pendingToken=de.pendingToken||null,Ye}_getIdTokenResponse(g){return os(g,this.buildRequest())}_linkToIdToken(g,_){const x=this.buildRequest();return x.idToken=_,os(g,x)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,os(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,O.xO)(_)}return g}}function Ps(T,g){return fi.apply(this,arguments)}function fi(){return(fi=(0,E.Z)(function*(T,g){return Vn(T,"POST","/v1/accounts:sendVerificationCode",hn(T,g))})).apply(this,arguments)}function vo(){return(vo=(0,E.Z)(function*(T,g){return Gn(T,"POST","/v1/accounts:signInWithPhoneNumber",hn(T,g))})).apply(this,arguments)}function Qi(){return(Qi=(0,E.Z)(function*(T,g){const _=yield Gn(T,"POST","/v1/accounts:signInWithPhoneNumber",hn(T,g));if(_.temporaryProof)throw Ot(T,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Ki={USER_NOT_FOUND:"user-not-found"};function ta(){return(ta=(0,E.Z)(function*(T,g){return Gn(T,"POST","/v1/accounts:signInWithPhoneNumber",hn(T,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Ki)})).apply(this,arguments)}class Ii extends hi{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new Ii({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new Ii({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function(T,g){return vo.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function(T,g){return Qi.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function(T,g){return ta.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:x,verificationCode:J}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:x,code:J}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:x,phoneNumber:J,temporaryProof:de}=g;return x||_||J||de?new Ii({verificationId:_,verificationCode:x,phoneNumber:J,temporaryProof:de}):null}}class le{constructor(g){var _,x,J,de,Ye,xt;const Rn=(0,O.zd)((0,O.pd)(g)),fn=null!==(_=Rn.apiKey)&&void 0!==_?_:null,tr=null!==(x=Rn.oobCode)&&void 0!==x?x:null,vi=function(T){switch(T){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(J=Rn.mode)&&void 0!==J?J:null);Ft(fn&&tr&&vi,"argument-error"),this.apiKey=fn,this.operation=vi,this.code=tr,this.continueUrl=null!==(de=Rn.continueUrl)&&void 0!==de?de:null,this.languageCode=null!==(Ye=Rn.languageCode)&&void 0!==Ye?Ye:null,this.tenantId=null!==(xt=Rn.tenantId)&&void 0!==xt?xt:null}static parseLink(g){const _=function(T){const g=(0,O.zd)((0,O.pd)(T)).link,_=g?(0,O.zd)((0,O.pd)(g)).deep_link_id:null,x=(0,O.zd)((0,O.pd)(T)).deep_link_id;return(x?(0,O.zd)((0,O.pd)(x)).link:null)||x||_||g||T}(g);try{return new le(_)}catch(x){return null}}}let be=(()=>{class T{constructor(){this.providerId=T.PROVIDER_ID}static credential(_,x){return ro._fromEmailAndPassword(_,x)}static credentialWithLink(_,x){const J=le.parseLink(x);return Ft(J,"argument-error"),ro._fromEmailAndCode(_,J.code,J.tenantId)}}return T.PROVIDER_ID="password",T.EMAIL_PASSWORD_SIGN_IN_METHOD="password",T.EMAIL_LINK_SIGN_IN_METHOD="emailLink",T})();class Ue{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class wt extends Ue{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Xt extends wt{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return Ft("providerId"in _&&"signInMethod"in _,"argument-error"),_i._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Ft(g.idToken||g.accessToken,"argument-error"),_i._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Xt.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Xt.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:x,oauthTokenSecret:J,pendingToken:de,nonce:Ye,providerId:xt}=g;if(!x&&!J&&!_&&!de||!xt)return null;try{return new Xt(xt)._credential({idToken:_,accessToken:x,nonce:Ye,pendingToken:de})}catch(Rn){return null}}}let W=(()=>{class T extends wt{constructor(){super("facebook.com")}static credential(_){return _i._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return T.credentialFromTaggedObject(_)}static credentialFromError(_){return T.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return T.credential(_.oauthAccessToken)}catch(x){return null}}}return T.FACEBOOK_SIGN_IN_METHOD="facebook.com",T.PROVIDER_ID="facebook.com",T})(),$=(()=>{class T extends wt{constructor(){super("google.com"),this.addScope("profile")}static credential(_,x){return _i._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:x})}static credentialFromResult(_){return T.credentialFromTaggedObject(_)}static credentialFromError(_){return T.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:x,oauthAccessToken:J}=_;if(!x&&!J)return null;try{return T.credential(x,J)}catch(de){return null}}}return T.GOOGLE_SIGN_IN_METHOD="google.com",T.PROVIDER_ID="google.com",T})(),k=(()=>{class T extends wt{constructor(){super("github.com")}static credential(_){return _i._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return T.credentialFromTaggedObject(_)}static credentialFromError(_){return T.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return T.credential(_.oauthAccessToken)}catch(x){return null}}}return T.GITHUB_SIGN_IN_METHOD="github.com",T.PROVIDER_ID="github.com",T})();class ot extends hi{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return os(g,this.buildRequest())}_linkToIdToken(g,_){const x=this.buildRequest();return x.idToken=_,os(g,x)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,os(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:x,signInMethod:J,pendingToken:de}=_;return x&&J&&de&&x===J?new ot(x,de):null}static _create(g,_){return new ot(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Zn extends Ue{constructor(g){Ft(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Zn.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Zn.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=ot.fromJSON(g);return Ft(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:x}=g;if(!_||!x)return null;try{return ot._create(x,_)}catch(J){return null}}}let Ur=(()=>{class T extends wt{constructor(){super("twitter.com")}static credential(_,x){return _i._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:x})}static credentialFromResult(_){return T.credentialFromTaggedObject(_)}static credentialFromError(_){return T.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:x,oauthTokenSecret:J}=_;if(!x||!J)return null;try{return T.credential(x,J)}catch(de){return null}}}return T.TWITTER_SIGN_IN_METHOD="twitter.com",T.PROVIDER_ID="twitter.com",T})();function Ci(T,g){return li.apply(this,arguments)}function li(){return(li=(0,E.Z)(function*(T,g){return Gn(T,"POST","/v1/accounts:signUp",hn(T,g))})).apply(this,arguments)}class si{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,x,J=!1){return(0,E.Z)(function*(){const de=yield qr._fromIdTokenResponse(g,x,J),Ye=jr(x);return new si({user:de,providerId:Ye,_tokenResponse:x,operationType:_})})()}static _forOperation(g,_,x){return(0,E.Z)(function*(){yield g._updateTokensIfNecessary(x,!0);const J=jr(x);return new si({user:g,providerId:J,_tokenResponse:x,operationType:_})})()}}function jr(T){return T.providerId?T.providerId:"phoneNumber"in T?"phone":null}function Qn(T){return ma.apply(this,arguments)}function ma(){return(ma=(0,E.Z)(function*(T){var g;const _=ft(T);if(yield _._initializationPromise,null===(g=_.currentUser)||void 0===g?void 0:g.isAnonymous)return new si({user:_.currentUser,providerId:null,operationType:"signIn"});const x=yield Ci(_,{returnSecureToken:!0}),J=yield si._fromIdTokenResponse(_,"signIn",x,!0);return yield _._updateCurrentUser(J.user),J})).apply(this,arguments)}class ko extends O.ZR{constructor(g,_,x,J){var de;super(_.code,_.message),this.operationType=x,this.user=J,Object.setPrototypeOf(this,ko.prototype),this.customData={appName:g.name,tenantId:null!==(de=g.tenantId)&&void 0!==de?de:void 0,_serverResponse:_.customData._serverResponse,operationType:x}}static _fromErrorAndOperation(g,_,x,J){return new ko(g,_,x,J)}}function Xa(T,g,_,x){return("reauthenticate"===g?_._getReauthenticationResolver(T):_._getIdTokenResponse(T)).catch(de=>{throw"auth/multi-factor-auth-required"===de.code?ko._fromErrorAndOperation(T,de,g,x):de})}function Ja(T){return new Set(T.map(({providerId:g})=>g).filter(g=>!!g))}function na(T,g){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,E.Z)(function*(T,g){const _=(0,O.m9)(T);yield _r(!0,_,g);const{providerUserInfo:x}=yield rn(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),J=Ja(x||[]);return _.providerData=_.providerData.filter(de=>J.has(de.providerId)),J.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Eo(T,g){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,E.Z)(function*(T,g,_=!1){const x=yield Tn(T,g._linkToIdToken(T.auth,yield T.getIdToken()),_);return si._forOperation(T,"link",x)})).apply(this,arguments)}function _r(T,g,_){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,E.Z)(function*(T,g,_){yield $t(g);const J=!1===T?"provider-already-linked":"no-such-provider";Ft(Ja(g.providerData).has(_)===T,g.auth,J)})).apply(this,arguments)}function Hi(T,g){return io.apply(this,arguments)}function io(){return(io=(0,E.Z)(function*(T,g,_=!1){var x;const{auth:J}=T,de="reauthenticate";try{const Ye=yield Tn(T,Xa(J,de,g,T),_);Ft(Ye.idToken,J,"internal-error");const xt=Ut(Ye.idToken);Ft(xt,J,"internal-error");const{sub:Rn}=xt;return Ft(T.uid===Rn,J,"user-mismatch"),si._forOperation(T,de,Ye)}catch(Ye){throw"auth/user-not-found"===(null===(x=Ye)||void 0===x?void 0:x.code)&&Nn(J,"user-mismatch"),Ye}})).apply(this,arguments)}function Ss(T,g){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,E.Z)(function*(T,g,_=!1){const x="signIn",J=yield Xa(T,x,g),de=yield si._fromIdTokenResponse(T,x,J);return _||(yield T._updateCurrentUser(de.user)),de})).apply(this,arguments)}function ho(T,g){return ra.apply(this,arguments)}function ra(){return(ra=(0,E.Z)(function*(T,g){return Ss(ft(T),g)})).apply(this,arguments)}function Ol(T,g){return so.apply(this,arguments)}function so(){return(so=(0,E.Z)(function*(T,g){const _=(0,O.m9)(T);return yield _r(!1,_,g.providerId),Eo(_,g)})).apply(this,arguments)}function ya(T,g){return Io.apply(this,arguments)}function Io(){return(Io=(0,E.Z)(function*(T,g){return Hi((0,O.m9)(T),g)})).apply(this,arguments)}function Ji(T,g){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,E.Z)(function*(T,g){return Gn(T,"POST","/v1/accounts:signInWithCustomToken",hn(T,g))})).apply(this,arguments)}function el(T,g){return As.apply(this,arguments)}function As(){return(As=(0,E.Z)(function*(T,g){const _=ft(T),x=yield Ji(_,{token:g,returnSecureToken:!0}),J=yield si._fromIdTokenResponse(_,"signIn",x);return yield _._updateCurrentUser(J.user),J})).apply(this,arguments)}class $i{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?fo._fromServerResponse(g,_):Nn(g,"internal-error")}}class fo extends $i{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new fo(_)}}function gs(T,g,_){var x;Ft((null===(x=_.url)||void 0===x?void 0:x.length)>0,T,"invalid-continue-uri"),Ft(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,T,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(Ft(_.iOS.bundleId.length>0,T,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(Ft(_.android.packageName.length>0,T,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function bo(T,g,_){return zs.apply(this,arguments)}function zs(){return(zs=(0,E.Z)(function*(T,g,_){const x=(0,O.m9)(T),J={requestType:"PASSWORD_RESET",email:g};_&&gs(x,J,_),yield Ml(x,J)})).apply(this,arguments)}function Lo(T,g,_){return ia.apply(this,arguments)}function ia(){return(ia=(0,E.Z)(function*(T,g,_){yield Ni((0,O.m9)(T),{oobCode:g,newPassword:_})})).apply(this,arguments)}function Vo(T,g){return oo.apply(this,arguments)}function oo(){return(oo=(0,E.Z)(function*(T,g){yield ws((0,O.m9)(T),{oobCode:g})})).apply(this,arguments)}function qs(T,g){return sa.apply(this,arguments)}function sa(){return(sa=(0,E.Z)(function*(T,g){const _=(0,O.m9)(T),x=yield Ni(_,{oobCode:g}),J=x.requestType;switch(Ft(J,_,"internal-error"),J){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ft(x.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ft(x.mfaInfo,_,"internal-error");default:Ft(x.email,_,"internal-error")}let de=null;return x.mfaInfo&&(de=$i._fromServerResponse(ft(_),x.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.newEmail:x.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.email:x.newEmail)||null,multiFactorInfo:de},operation:J}})).apply(this,arguments)}function Di(T,g){return ao.apply(this,arguments)}function ao(){return(ao=(0,E.Z)(function*(T,g){const{data:_}=yield qs((0,O.m9)(T),g);return _.email})).apply(this,arguments)}function _a(T,g,_){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,E.Z)(function*(T,g,_){const x=ft(T),J=yield Ci(x,{returnSecureToken:!0,email:g,password:_}),de=yield si._fromIdTokenResponse(x,"signIn",J);return yield x._updateCurrentUser(de.user),de})).apply(this,arguments)}function tl(T,g,_){return ho((0,O.m9)(T),be.credential(g,_))}function nl(T,g,_){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,E.Z)(function*(T,g,_){const x=(0,O.m9)(T),J={requestType:"EMAIL_SIGNIN",email:g};Ft(_.handleCodeInApp,x,"argument-error"),_&&gs(x,J,_),yield Hs(x,J)})).apply(this,arguments)}function w(T,g){const _=le.parseLink(g);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}function P(T,g,_){return D.apply(this,arguments)}function D(){return(D=(0,E.Z)(function*(T,g,_){const x=(0,O.m9)(T),J=be.credentialWithLink(g,_||kr());return Ft(J._tenantId===(x.tenantId||null),x,"tenant-id-mismatch"),ho(x,J)})).apply(this,arguments)}function q(T,g){return he.apply(this,arguments)}function he(){return(he=(0,E.Z)(function*(T,g){return Vn(T,"POST","/v1/accounts:createAuthUri",hn(T,g))})).apply(this,arguments)}function it(T,g){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,E.Z)(function*(T,g){const x={identifier:g,continueUri:ai()?kr():"http://localhost"},{signinMethods:J}=yield q((0,O.m9)(T),x);return J||[]})).apply(this,arguments)}function un(T,g){return hr.apply(this,arguments)}function hr(){return(hr=(0,E.Z)(function*(T,g){const _=(0,O.m9)(T),J={requestType:"VERIFY_EMAIL",idToken:yield T.getIdToken()};g&&gs(_.auth,J,g);const{email:de}=yield Po(_.auth,J);de!==T.email&&(yield T.reload())})).apply(this,arguments)}function xn(T,g,_){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,E.Z)(function*(T,g,_){const x=(0,O.m9)(T),de={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield T.getIdToken(),newEmail:g};_&&gs(x.auth,de,_);const{email:Ye}=yield Ws(x.auth,de);Ye!==T.email&&(yield T.reload())})).apply(this,arguments)}function Ti(T,g){return kt.apply(this,arguments)}function kt(){return(kt=(0,E.Z)(function*(T,g){return Vn(T,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Jn(T,g){return es.apply(this,arguments)}function es(){return(es=(0,E.Z)(function*(T,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const x=(0,O.m9)(T),de={idToken:yield x.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},Ye=yield Tn(x,Ti(x.auth,de));x.displayName=Ye.displayName||null,x.photoURL=Ye.photoUrl||null;const xt=x.providerData.find(({providerId:Rn})=>"password"===Rn);xt&&(xt.displayName=x.displayName,xt.photoURL=x.photoURL),yield x._updateTokensIfNecessary(Ye)})).apply(this,arguments)}function lo(T,g){return Fn((0,O.m9)(T),g,null)}function Mn(T,g){return Fn((0,O.m9)(T),null,g)}function Fn(T,g,_){return oi.apply(this,arguments)}function oi(){return(oi=(0,E.Z)(function*(T,g,_){const{auth:x}=T,de={idToken:yield T.getIdToken(),returnSecureToken:!0};g&&(de.email=g),_&&(de.password=_);const Ye=yield Tn(T,Cs(x,de));yield T._updateTokensIfNecessary(Ye,!0)})).apply(this,arguments)}class et{constructor(g,_,x={}){this.isNewUser=g,this.providerId=_,this.profile=x}}class zt extends et{constructor(g,_,x,J){super(g,_,x),this.username=J}}class mr extends et{constructor(g,_){super(g,"facebook.com",_)}}class Zl extends zt{constructor(g,_){super(g,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class ld extends et{constructor(g,_){super(g,"google.com",_)}}class Bs extends zt{constructor(g,_,x){super(g,"twitter.com",_,x)}}function Nl(T){const{user:g,_tokenResponse:_}=T;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function(T){var g,_;if(!T)return null;const{providerId:x}=T,J=T.rawUserInfo?JSON.parse(T.rawUserInfo):{},de=T.isNewUser||"identitytoolkit#SignupNewUserResponse"===T.kind;if(!x&&(null==T?void 0:T.idToken)){const Ye=null===(_=null===(g=Ut(T.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(Ye)return new et(de,"anonymous"!==Ye&&"custom"!==Ye?Ye:null)}if(!x)return null;switch(x){case"facebook.com":return new mr(de,J);case"github.com":return new Zl(de,J);case"google.com":return new ld(de,J);case"twitter.com":return new Bs(de,J,T.screenName||null);case"custom":case"anonymous":return new et(de,null);default:return new et(de,x,J)}}(_)}function Mr(T,g,_,x){return(0,O.m9)(T).onIdTokenChanged(g,_,x)}function Ma(T){return(0,O.m9)(T).signOut()}class po{constructor(g,_,x){this.type=g,this.credential=_,this.auth=x}static _fromIdtoken(g,_){return new po("enroll",g,_)}static _fromMfaPendingCredential(g){return new po("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,x;if(null==g?void 0:g.multiFactorSession){if(null===(_=g.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return po._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(x=g.multiFactorSession)||void 0===x?void 0:x.idToken)return po._fromIdtoken(g.multiFactorSession.idToken)}return null}}class pi{constructor(g,_,x){this.session=g,this.hints=_,this.signInResolver=x}static _fromError(g,_){const x=ft(g),J=_.customData._serverResponse,de=(J.mfaInfo||[]).map(xt=>$i._fromServerResponse(x,xt));Ft(J.mfaPendingCredential,x,"internal-error");const Ye=po._fromMfaPendingCredential(J.mfaPendingCredential);return new pi(Ye,de,function(){var xt=(0,E.Z)(function*(Rn){const fn=yield Rn._process(x,Ye);delete J.mfaInfo,delete J.mfaPendingCredential;const tr=Object.assign(Object.assign({},J),{idToken:fn.idToken,refreshToken:fn.refreshToken});switch(_.operationType){case"signIn":const vi=yield si._fromIdTokenResponse(x,_.operationType,tr);return yield x._updateCurrentUser(vi.user),vi;case"reauthenticate":return Ft(_.user,x,"internal-error"),si._forOperation(_.user,_.operationType,tr);default:Nn(x,"internal-error")}});return function(Rn){return xt.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,E.Z)(function*(){return _.signInResolver(g)})()}}function ar(T,g){var _;const x=(0,O.m9)(T),J=g;return Ft(g.customData.operationType,x,"argument-error"),Ft(null===(_=J.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,x,"argument-error"),pi._fromError(x,J)}function oa(T,g){return Vn(T,"POST","/v2/accounts/mfaEnrollment:start",hn(T,g))}class gi{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(x=>$i._fromServerResponse(g.auth,x)))})}static _fromUser(g){return new gi(g)}getSession(){var g=this;return(0,E.Z)(function*(){return po._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,_){var x=this;return(0,E.Z)(function*(){const J=g,de=yield x.getSession(),Ye=yield Tn(x.user,J._process(x.user.auth,de,_));return yield x.user._updateTokensIfNecessary(Ye),x.user.reload()})()}unenroll(g){var _=this;return(0,E.Z)(function*(){var x;const J="string"==typeof g?g:g.uid,de=yield _.user.getIdToken(),Ye=yield Tn(_.user,function(T,g){return Vn(T,"POST","/v2/accounts/mfaEnrollment:withdraw",hn(T,g))}(_.user.auth,{idToken:de,mfaEnrollmentId:J}));_.enrolledFactors=_.enrolledFactors.filter(({uid:xt})=>xt!==J),yield _.user._updateTokensIfNecessary(Ye);try{yield _.user.reload()}catch(xt){if("auth/user-token-expired"!==(null===(x=xt)||void 0===x?void 0:x.code))throw xt}})()}}const bn=new WeakMap;function Oa(T){const g=(0,O.m9)(T);return bn.has(g)||bn.set(g,gi._fromUser(g)),bn.get(g)}const aa="__sak";class ls{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(aa,"1"),this.storage.removeItem(aa),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const go=(()=>{class T extends ls{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,x)=>this.onStorageEvent(_,x),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const T=(0,O.z$)();return or(T)||nt(T)}()&&function(){try{return!(!window||window===window.top)}catch(T){return!1}}(),this.fallbackToPolling=Ie(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const x of Object.keys(this.listeners)){const J=this.storage.getItem(x),de=this.localCache[x];J!==de&&_(x,de,J)}}onStorageEvent(_,x=!1){if(!_.key)return void this.forAllChangedKeys((xt,Rn,fn)=>{this.notifyListeners(xt,fn)});const J=_.key;if(x?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const xt=this.storage.getItem(J);if(_.newValue!==xt)null!==_.newValue?this.storage.setItem(J,_.newValue):this.storage.removeItem(J);else if(this.localCache[J]===_.newValue&&!x)return}const de=()=>{const xt=this.storage.getItem(J);!x&&this.localCache[J]===xt||this.notifyListeners(J,xt)},Ye=this.storage.getItem(J);(0,O.w1)()&&10===document.documentMode&&Ye!==_.newValue&&_.newValue!==_.oldValue?setTimeout(de,10):de()}notifyListeners(_,x){this.localCache[_]=x;const J=this.listeners[_];if(J)for(const de of Array.from(J))de(x&&JSON.parse(x))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,x,J)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:x,newValue:J}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,x){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(x)}_removeListener(_,x){this.listeners[_]&&(this.listeners[_].delete(x),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,x){var J=()=>super._set,de=this;return(0,E.Z)(function*(){yield J().call(de,_,x),de.localCache[_]=JSON.stringify(x)})()}_get(_){var x=()=>super._get,J=this;return(0,E.Z)(function*(){const de=yield x().call(J,_);return J.localCache[_]=JSON.stringify(de),de})()}_remove(_){var x=()=>super._remove,J=this;return(0,E.Z)(function*(){yield x().call(J,_),delete J.localCache[_]})()}}return T.type="LOCAL",T})(),A=(()=>{class T extends ls{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,x){}_removeListener(_,x){}}return T.type="SESSION",T})();let U=(()=>{class T{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const x=this.receivers.find(de=>de.isListeningto(_));if(x)return x;const J=new T(_);return this.receivers.push(J),J}isListeningto(_){return this.eventTarget===_}handleEvent(_){var x=this;return(0,E.Z)(function*(){const J=_,{eventId:de,eventType:Ye,data:xt}=J.data,Rn=x.handlersMap[Ye];if(!(null==Rn?void 0:Rn.size))return;J.ports[0].postMessage({status:"ack",eventId:de,eventType:Ye});const fn=Array.from(Rn).map(function(){var vi=(0,E.Z)(function*(Fi){return Fi(J.origin,xt)});return function(Fi){return vi.apply(this,arguments)}}()),tr=yield function(T){return Promise.all(T.map(function(){var g=(0,E.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(x){return{fulfilled:!1,reason:x}}});return function(_){return g.apply(this,arguments)}}()))}(fn);J.ports[0].postMessage({status:"done",eventId:de,eventType:Ye,response:tr})})()}_subscribe(_,x){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(x)}_unsubscribe(_,x){this.handlersMap[_]&&x&&this.handlersMap[_].delete(x),(!x||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return T.receivers=[],T})();function X(T="",g=10){let _="";for(let x=0;x<g;x++)_+=Math.floor(10*Math.random());return T+_}class ge{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,x=50){var J=this;return(0,E.Z)(function*(){const de="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!de)throw new Error("connection_unavailable");let Ye,xt;return new Promise((Rn,fn)=>{const tr=X("",20);de.port1.start();const vi=setTimeout(()=>{fn(new Error("unsupported_event"))},x);xt={messageChannel:de,onMessage(Fi){const uo=Fi;if(uo.data.eventId===tr)switch(uo.data.status){case"ack":clearTimeout(vi),Ye=setTimeout(()=>{fn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ye),Rn(uo.data.response);break;default:clearTimeout(vi),clearTimeout(Ye),fn(new Error("invalid_response"))}}},J.handlers.add(xt),de.port1.addEventListener("message",xt.onMessage),J.target.postMessage({eventType:g,eventId:tr,data:_},[de.port2])}).finally(()=>{xt&&J.removeMessageHandler(xt)})})()}}function Le(){return window}function Pt(){return void 0!==Le().WorkerGlobalScope&&"function"==typeof Le().importScripts}function Lr(){return(Lr=(0,E.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(T){return null}})).apply(this,arguments)}const vr="firebaseLocalStorageDb",mo="firebaseLocalStorage",Ts="fbase_key";class Qr{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function va(T,g){return T.transaction([mo],g?"readwrite":"readonly").objectStore(mo)}function Pa(){const T=indexedDB.open(vr,1);return new Promise((g,_)=>{T.addEventListener("error",()=>{_(T.error)}),T.addEventListener("upgradeneeded",()=>{const x=T.result;try{x.createObjectStore(mo,{keyPath:Ts})}catch(J){_(J)}}),T.addEventListener("success",(0,E.Z)(function*(){const x=T.result;x.objectStoreNames.contains(mo)?g(x):(x.close(),yield function(){const T=indexedDB.deleteDatabase(vr);return new Qr(T).toPromise()}(),g(yield Pa()))}))})}function Yo(T,g,_){return Si.apply(this,arguments)}function Si(){return(Si=(0,E.Z)(function*(T,g,_){const x=va(T,!0).put({[Ts]:g,value:_});return new Qr(x).toPromise()})).apply(this,arguments)}function ka(){return(ka=(0,E.Z)(function*(T,g){const _=va(T,!1).get(g),x=yield new Qr(_).toPromise();return void 0===x?null:x.value})).apply(this,arguments)}function er(T,g){const _=va(T,!0).delete(g);return new Qr(_).toPromise()}const ni=(()=>{class T{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,E.Z)(function*(){return _.db||(_.db=yield Pa()),_.db})()}_withRetries(_){var x=this;return(0,E.Z)(function*(){let J=0;for(;;)try{const de=yield x._openDb();return yield _(de)}catch(de){if(J++>3)throw de;x.db&&(x.db.close(),x.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,E.Z)(function*(){return Pt()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,E.Z)(function*(){_.receiver=U._getInstance(Pt()?self:null),_.receiver._subscribe("keyChanged",function(){var x=(0,E.Z)(function*(J,de){return{keyProcessed:(yield _._poll()).includes(de.key)}});return function(J,de){return x.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var x=(0,E.Z)(function*(J,de){return["keyChanged"]});return function(J,de){return x.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,E.Z)(function*(){var x,J;if(_.activeServiceWorker=yield function(){return Lr.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new ge(_.activeServiceWorker);const de=yield _.sender._send("ping",{},800);!de||(null===(x=de[0])||void 0===x?void 0:x.fulfilled)&&(null===(J=de[0])||void 0===J?void 0:J.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var x=this;return(0,E.Z)(function*(){if(x.sender&&x.activeServiceWorker&&function(){var T;return(null===(T=null==navigator?void 0:navigator.serviceWorker)||void 0===T?void 0:T.controller)||null}()===x.activeServiceWorker)try{yield x.sender._send("keyChanged",{key:_},x.serviceWorkerReceiverAvailable?800:50)}catch(J){}})()}_isAvailable(){return(0,E.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Pa();return yield Yo(_,aa,"1"),yield er(_,aa),!0}catch(_){}return!1})()}_withPendingWrite(_){var x=this;return(0,E.Z)(function*(){x.pendingWrites++;try{yield _()}finally{x.pendingWrites--}})()}_set(_,x){var J=this;return(0,E.Z)(function*(){return J._withPendingWrite((0,E.Z)(function*(){return yield J._withRetries(de=>Yo(de,_,x)),J.localCache[_]=x,J.notifyServiceWorker(_)}))})()}_get(_){var x=this;return(0,E.Z)(function*(){const J=yield x._withRetries(de=>function(T,g){return ka.apply(this,arguments)}(de,_));return x.localCache[_]=J,J})()}_remove(_){var x=this;return(0,E.Z)(function*(){return x._withPendingWrite((0,E.Z)(function*(){return yield x._withRetries(J=>er(J,_)),delete x.localCache[_],x.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,E.Z)(function*(){const x=yield _._withRetries(Ye=>{const xt=va(Ye,!1).getAll();return new Qr(xt).toPromise()});if(!x)return[];if(0!==_.pendingWrites)return[];const J=[],de=new Set;for(const{fbase_key:Ye,value:xt}of x)de.add(Ye),JSON.stringify(_.localCache[Ye])!==JSON.stringify(xt)&&(_.notifyListeners(Ye,xt),J.push(Ye));for(const Ye of Object.keys(_.localCache))_.localCache[Ye]&&!de.has(Ye)&&(_.notifyListeners(Ye,null),J.push(Ye));return J})()}notifyListeners(_,x){this.localCache[_]=x;const J=this.listeners[_];if(J)for(const de of Array.from(J))de(x)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,E.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,x){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(x)}_removeListener(_,x){this.listeners[_]&&(this.listeners[_].delete(x),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return T.type="LOCAL",T})();function Ec(T,g){return Vn(T,"POST","/v2/accounts/mfaSignIn:start",hn(T,g))}function Co(){return(Co=(0,E.Z)(function*(T){return(yield Vn(T,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function vl(T){return new Promise((g,_)=>{const x=document.createElement("script");x.setAttribute("src",T),x.onload=g,x.onerror=J=>{const de=Dn("internal-error");de.customData=J,_(de)},x.type="text/javascript",x.charset="UTF-8",function(){var T,g;return null!==(g=null===(T=document.getElementsByTagName("head"))||void 0===T?void 0:T[0])&&void 0!==g?g:document}().appendChild(x)})}function ts(T){return`__${T}${Math.floor(1e6*Math.random())}`}const Jl=1e12;class Ea{constructor(g){this.auth=g,this.counter=Jl,this._widgets=new Map}render(g,_){const x=this.counter;return this._widgets.set(x,new cs(g,this.auth.name,_||{})),this.counter++,x}reset(g){var _;const x=g||Jl;null===(_=this._widgets.get(x))||void 0===_||_.delete(),this._widgets.delete(x)}getResponse(g){var _;return(null===(_=this._widgets.get(g||Jl))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,E.Z)(function*(){var x;return null===(x=_._widgets.get(g||Jl))||void 0===x||x.execute(),""})()}}class cs{constructor(g,_,x){this.params=x,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const J="string"==typeof g?document.getElementById(g):g;Ft(J,"argument-error",{appName:_}),this.container=J,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(T){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let x=0;x<50;x++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}();const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch(x){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(x){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ko=ts("rcb"),yo=new dr(3e4,6e4);class Ia{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(g=Le().grecaptcha)||void 0===g?void 0:g.render)}load(g,_=""){return Ft((T=_).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(T),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Le().grecaptcha):new Promise((x,J)=>{const de=Le().setTimeout(()=>{J(Dn(g,"network-request-failed"))},yo.get());Le()[Ko]=()=>{Le().clearTimeout(de),delete Le()[Ko];const xt=Le().grecaptcha;if(!xt)return void J(Dn(g,"internal-error"));const Rn=xt.render;xt.render=(fn,tr)=>{const vi=Rn(fn,tr);return this.counter++,vi},this.hostLanguage=_,x(xt)},vl(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Ko,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(de),J(Dn(g,"internal-error"))})});var T}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!!(null===(_=Le().grecaptcha)||void 0===_?void 0:_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Pl{load(g){return(0,E.Z)(function*(){return new Ea(g)})()}clearedOneInstance(){}}const El="recaptcha",Kd={theme:"light",type:"image"};class ua{constructor(g,_=Object.assign({},Kd),x){this.parameters=_,this.type=El,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ft(x),this.isInvisible="invisible"===this.parameters.size,Ft("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const J="string"==typeof g?document.getElementById(g):g;Ft(J,this.auth,"argument-error"),this.container=J,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Pl:new Ia,this.validateStartingState()}verify(){var g=this;return(0,E.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),x=g.getAssertedRecaptcha();return x.getResponse(_)||new Promise(de=>{const Ye=xt=>{!xt||(g.tokenChangeListeners.delete(Ye),de(xt))};g.tokenChangeListeners.add(Ye),g.isInvisible&&x.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){Ft(!this.parameters.sitekey,this.auth,"argument-error"),Ft(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ft("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(x=>x(_)),"function"==typeof g)g(_);else if("string"==typeof g){const x=Le()[g];"function"==typeof x&&x(_)}}}assertNotDestroyed(){Ft(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,E.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const x=document.createElement("div");_.appendChild(x),_=x}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,E.Z)(function*(){Ft(ai()&&!Pt(),g.auth,"internal-error"),yield function(){let T=null;return new Promise(g=>{"complete"!==document.readyState?(T=()=>g(),window.addEventListener("load",T)):g()}).catch(g=>{throw T&&window.removeEventListener("load",T),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function(T){return Co.apply(this,arguments)}(g.auth);Ft(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return Ft(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ba{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=Ii._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function Fa(T,g,_){return ca.apply(this,arguments)}function ca(){return(ca=(0,E.Z)(function*(T,g,_){const x=ft(T),J=yield tu(x,g,(0,O.m9)(_));return new ba(J,de=>ho(x,de))})).apply(this,arguments)}function eu(T,g,_){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,E.Z)(function*(T,g,_){const x=(0,O.m9)(T);yield _r(!1,x,"phone");const J=yield tu(x.auth,g,(0,O.m9)(_));return new ba(J,de=>Ol(x,de))})).apply(this,arguments)}function Hu(T,g,_){return sl.apply(this,arguments)}function sl(){return(sl=(0,E.Z)(function*(T,g,_){const x=(0,O.m9)(T),J=yield tu(x.auth,g,(0,O.m9)(_));return new ba(J,de=>ya(x,de))})).apply(this,arguments)}function tu(T,g,_){return nu.apply(this,arguments)}function nu(){return(nu=(0,E.Z)(function*(T,g,_){var x;const J=yield _.verify();try{let de;if(Ft("string"==typeof J,T,"argument-error"),Ft(_.type===El,T,"argument-error"),de="string"==typeof g?{phoneNumber:g}:g,"session"in de){const Ye=de.session;if("phoneNumber"in de)return Ft("enroll"===Ye.type,T,"internal-error"),(yield oa(T,{idToken:Ye.credential,phoneEnrollmentInfo:{phoneNumber:de.phoneNumber,recaptchaToken:J}})).phoneSessionInfo.sessionInfo;{Ft("signin"===Ye.type,T,"internal-error");const xt=(null===(x=de.multiFactorHint)||void 0===x?void 0:x.uid)||de.multiFactorUid;return Ft(xt,T,"missing-multi-factor-info"),(yield Ec(T,{mfaPendingCredential:Ye.credential,mfaEnrollmentId:xt,phoneSignInInfo:{recaptchaToken:J}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ye}=yield Ps(T,{phoneNumber:de.phoneNumber,recaptchaToken:J});return Ye}}finally{_._reset()}})).apply(this,arguments)}function La(T,g){return Il.apply(this,arguments)}function Il(){return(Il=(0,E.Z)(function*(T,g){yield Eo((0,O.m9)(T),g)})).apply(this,arguments)}let L=(()=>{class T{constructor(_){this.providerId=T.PROVIDER_ID,this.auth=ft(_)}verifyPhoneNumber(_,x){return tu(this.auth,_,(0,O.m9)(x))}static credential(_,x){return Ii._fromVerification(_,x)}static credentialFromResult(_){return T.credentialFromTaggedObject(_)}static credentialFromError(_){return T.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:x,temporaryProof:J}=_;return x&&J?Ii._fromTokenResponse(x,J):null}}return T.PROVIDER_ID="phone",T.PHONE_SIGN_IN_METHOD="phone",T})();function Y(T,g){return g?sr(g):(Ft(T._popupRedirectResolver,T,"argument-error"),T._popupRedirectResolver)}class fe extends hi{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return os(g,this._buildIdpRequest())}_linkToIdToken(g,_){return os(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return os(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function Pe(T){return Ss(T.auth,new fe(T),T.bypassAuthState)}function at(T){const{auth:g,user:_}=T;return Ft(_,g,"internal-error"),Hi(_,new fe(T),T.bypassAuthState)}function Tt(T){return en.apply(this,arguments)}function en(){return(en=(0,E.Z)(function*(T){const{auth:g,user:_}=T;return Ft(_,g,"internal-error"),Eo(_,new fe(T),T.bypassAuthState)})).apply(this,arguments)}class In{constructor(g,_,x,J,de=!1){this.auth=g,this.resolver=x,this.user=J,this.bypassAuthState=de,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,E.Z)(function*(x,J){g.pendingPromise={resolve:x,reject:J};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(de){g.reject(de)}});return function(x,J){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,E.Z)(function*(){const{urlResponse:x,sessionId:J,postBody:de,tenantId:Ye,error:xt,type:Rn}=g;if(xt)return void _.reject(xt);const fn={auth:_.auth,requestUri:x,sessionId:J,tenantId:Ye||void 0,postBody:de||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Rn)(fn))}catch(tr){_.reject(tr)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Pe;case"linkViaPopup":case"linkViaRedirect":return Tt;case"reauthViaPopup":case"reauthViaRedirect":return at;default:Nn(this.auth,"internal-error")}}resolve(g){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const nr=new dr(2e3,1e4);function Ar(T,g,_){return wr.apply(this,arguments)}function wr(){return(wr=(0,E.Z)(function*(T,g,_){const x=ft(T);Gr(T,g,Ue);const J=Y(x,_);return new Do(x,"signInViaPopup",g,J).executeNotNull()})).apply(this,arguments)}function rr(T,g,_){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,E.Z)(function*(T,g,_){const x=(0,O.m9)(T);Gr(x.auth,g,Ue);const J=Y(x.auth,_);return new Do(x.auth,"reauthViaPopup",g,J,x).executeNotNull()})).apply(this,arguments)}function ui(T,g,_){return wi.apply(this,arguments)}function wi(){return(wi=(0,E.Z)(function*(T,g,_){const x=(0,O.m9)(T);Gr(x.auth,g,Ue);const J=Y(x.auth,_);return new Do(x.auth,"linkViaPopup",g,J,x).executeNotNull()})).apply(this,arguments)}let Do=(()=>{class T extends In{constructor(_,x,J,de,Ye){super(_,x,de,Ye),this.provider=J,this.authWindow=null,this.pollId=null,T.currentPopupAction&&T.currentPopupAction.cancel(),T.currentPopupAction=this}executeNotNull(){var _=this;return(0,E.Z)(function*(){const x=yield _.execute();return Ft(x,_.auth,"internal-error"),x})()}onExecution(){var _=this;return(0,E.Z)(function*(){cr(1===_.filter.length,"Popup operations only handle one event");const x=X();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],x),_.authWindow.associatedEvent=x,_.resolver._originValidation(_.auth).catch(J=>{_.reject(J)}),_.resolver._isIframeWebStorageSupported(_.auth,J=>{J||_.reject(Dn(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,T.currentPopupAction=null}pollUserCancellation(){const _=()=>{var x,J;this.pollId=(null===(J=null===(x=this.authWindow)||void 0===x?void 0:x.window)||void 0===J?void 0:J.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Dn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,nr.get())};_()}}return T.currentPopupAction=null,T})();const da=new Map;class wa extends In{constructor(g,_,x=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,x),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,E.Z)(function*(){let x=da.get(_.auth._key());if(!x){try{const de=(yield function(T,g){return Va.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;x=()=>Promise.resolve(de)}catch(J){x=()=>Promise.reject(J)}da.set(_.auth._key(),x)}return _.bypassAuthState||da.set(_.auth._key(),()=>Promise.resolve(null)),x()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,x=this;return(0,E.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(x,g);if("unknown"!==g.type){if(g.eventId){const J=yield x.auth._redirectUserForId(g.eventId);if(J)return x.user=J,_().call(x,g);x.resolve(null)}}else x.resolve(null)})()}onExecution(){return(0,E.Z)(function*(){})()}cleanUp(){}}function Va(){return(Va=(0,E.Z)(function*(T,g){const _=Ua(g),x=$a(T);if(!(yield x._isAvailable()))return!1;const J="true"===(yield x._get(_));return yield x._remove(_),J})).apply(this,arguments)}function ha(T,g){return $o.apply(this,arguments)}function $o(){return($o=(0,E.Z)(function*(T,g){return $a(T)._set(Ua(g),"true")})).apply(this,arguments)}function Ba(){da.clear()}function Da(T,g){da.set(T._key(),g)}function $a(T){return sr(T._redirectPersistence)}function Ua(T){return Vr("pendingRedirect",T.config.apiKey,T.name)}function kl(T,g,_){return function(T,g,_){return Zs.apply(this,arguments)}(T,g,_)}function Zs(){return(Zs=(0,E.Z)(function*(T,g,_){const x=ft(T);Gr(T,g,Ue);const J=Y(x,_);return yield ha(J,x),J._openRedirect(x,g,"signInViaRedirect")})).apply(this,arguments)}function Fl(T,g,_){return function(T,g,_){return Gu.apply(this,arguments)}(T,g,_)}function Gu(){return(Gu=(0,E.Z)(function*(T,g,_){const x=(0,O.m9)(T);Gr(x.auth,g,Ue);const J=Y(x.auth,_);yield ha(J,x.auth);const de=yield qu(x);return J._openRedirect(x.auth,g,"reauthViaRedirect",de)})).apply(this,arguments)}function Ic(T,g,_){return function(T,g,_){return Rs.apply(this,arguments)}(T,g,_)}function Rs(){return(Rs=(0,E.Z)(function*(T,g,_){const x=(0,O.m9)(T);Gr(x.auth,g,Ue);const J=Y(x.auth,_);yield _r(!1,x,g.providerId),yield ha(J,x.auth);const de=yield qu(x);return J._openRedirect(x.auth,g,"linkViaRedirect",de)})).apply(this,arguments)}function ol(T,g){return ru.apply(this,arguments)}function ru(){return(ru=(0,E.Z)(function*(T,g){return yield ft(T)._initializationPromise,bl(T,g,!1)})).apply(this,arguments)}function bl(T,g){return zu.apply(this,arguments)}function zu(){return(zu=(0,E.Z)(function*(T,g,_=!1){const x=ft(T),J=Y(x,g),Ye=yield new wa(x,J,_).execute();return Ye&&!_&&(delete Ye.user._redirectEventId,yield x._persistUserIfCurrent(Ye.user),yield x._setRedirectUser(null,g)),Ye})).apply(this,arguments)}function qu(T){return cd.apply(this,arguments)}function cd(){return(cd=(0,E.Z)(function*(T){const g=X(`${T.uid}:::`);return T._redirectEventId=g,yield T.auth._setRedirectUser(T),yield T.auth._persistUserIfCurrent(T),g})).apply(this,arguments)}class Uh{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(x=>{this.isEventForConsumer(g,x)&&(_=!0,this.sendToConsumer(g,x),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function(T){switch(T.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bc(T);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var x;if(g.error&&!bc(g)){const J=(null===(x=g.error.code)||void 0===x?void 0:x.split("auth/")[1])||"internal-error";_.onError(Dn(this.auth,J))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const x=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&x}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yu(g))}saveEventToCache(g){this.cachedEventUids.add(Yu(g)),this.lastProcessedEventTime=Date.now()}}function Yu(T){return[T.type,T.eventId,T.sessionId,T.tenantId].filter(g=>g).join("-")}function bc({type:T,error:g}){return"unknown"===T&&"auth/no-auth-event"===(null==g?void 0:g.code)}function Cc(T){return dd.apply(this,arguments)}function dd(){return(dd=(0,E.Z)(function*(T,g={}){return Vn(T,"GET","/v1/projects",g)})).apply(this,arguments)}const np=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wc=/^https?/;function Cl(){return(Cl=(0,E.Z)(function*(T){if(T.config.emulator)return;const{authorizedDomains:g}=yield Cc(T);for(const _ of g)try{if(Zd(_))return}catch(x){}Nn(T,"unauthorized-domain")})).apply(this,arguments)}function Zd(T){const g=kr(),{protocol:_,hostname:x}=new URL(g);if(T.startsWith("chrome-extension://")){const Ye=new URL(T);return""===Ye.hostname&&""===x?"chrome-extension:"===_&&T.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&Ye.hostname===x}if(!wc.test(_))return!1;if(np.test(T))return x===T;const J=T.replace(/\./g,"\\.");return new RegExp("^(.+\\."+J+"|"+J+")$","i").test(x)}const su=new dr(3e4,6e4);function Ll(){const T=Le().___jsl;if(null==T?void 0:T.H)for(const g of Object.keys(T.H))if(T.H[g].r=T.H[g].r||[],T.H[g].L=T.H[g].L||[],T.H[g].r=[...T.H[g].L],T.CP)for(let _=0;_<T.CP.length;_++)T.CP[_]=null}let bu=null;function Qd(T){return bu=bu||function(T){return new Promise((g,_)=>{var x,J,de;function Ye(){Ll(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Ll(),_(Dn(T,"network-request-failed"))},timeout:su.get()})}if(null===(J=null===(x=Le().gapi)||void 0===x?void 0:x.iframes)||void 0===J?void 0:J.Iframe)g(gapi.iframes.getContext());else{if(!(null===(de=Le().gapi)||void 0===de?void 0:de.load)){const xt=ts("iframefcb");return Le()[xt]=()=>{gapi.load?Ye():_(Dn(T,"network-request-failed"))},vl(`https://apis.google.com/js/api.js?onload=${xt}`).catch(Rn=>_(Rn))}Ye()}}).catch(g=>{throw bu=null,g})}(T),bu}const ou=new dr(5e3,15e3),ki={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ku=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hd(T){const g=T.config;Ft(g.authDomain,T,"auth-domain-config-required");const _=g.emulator?dn(g,"emulator/auth/iframe"):`https://${T.config.authDomain}/__/auth/iframe`,x={apiKey:g.apiKey,appName:T.name,v:ne.SDK_VERSION},J=Ku.get(T.config.apiHost);J&&(x.eid=J);const de=T._getFrameworks();return de.length&&(x.fw=de.join(",")),`${_}?${(0,O.xO)(x).slice(1)}`}function fd(){return fd=(0,E.Z)(function*(T){const g=yield Qd(T),_=Le().gapi;return Ft(_,T,"internal-error"),g.open({where:document.body,url:hd(T),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ki,dontclear:!0},x=>new Promise(function(){var J=(0,E.Z)(function*(de,Ye){yield x.restyle({setHideOnLeave:!1});const xt=Dn(T,"network-request-failed"),Rn=Le().setTimeout(()=>{Ye(xt)},ou.get());function fn(){Le().clearTimeout(Rn),de(x)}x.ping(fn).then(fn,()=>{Ye(xt)})});return function(de,Ye){return J.apply(this,arguments)}}()))}),fd.apply(this,arguments)}const Cu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class pd{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function Tc(T,g,_,x,J,de){Ft(T.config.authDomain,T,"auth-domain-config-required"),Ft(T.config.apiKey,T,"invalid-api-key");const Ye={apiKey:T.config.apiKey,appName:T.name,authType:_,redirectUrl:x,v:ne.SDK_VERSION,eventId:J};if(g instanceof Ue){g.setDefaultLanguage(T.languageCode),Ye.providerId=g.providerId||"",(0,O.xb)(g.getCustomParameters())||(Ye.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Rn,fn]of Object.entries(de||{}))Ye[Rn]=fn}if(g instanceof wt){const Rn=g.getScopes().filter(fn=>""!==fn);Rn.length>0&&(Ye.scopes=Rn.join(","))}T.tenantId&&(Ye.tid=T.tenantId);const xt=Ye;for(const Rn of Object.keys(xt))void 0===xt[Rn]&&delete xt[Rn];return`${function({config:T}){return T.emulator?dn(T,"emulator/auth/handler"):`https://${T.authDomain}/__/auth/handler`}(T)}?${(0,O.xO)(xt).slice(1)}`}const ei="webStorageSupport",gd=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=A,this._completeRedirectFn=bl,this._overrideRedirectResult=Da}_openPopup(g,_,x,J){var de=this;return(0,E.Z)(function*(){var Ye;cr(null===(Ye=de.eventManagers[g._key()])||void 0===Ye?void 0:Ye.manager,"_initialize() not called before _openPopup()");const xt=Tc(g,_,x,kr(),J);return function(T,g,_,x=500,J=600){const de=Math.max((window.screen.availHeight-J)/2,0).toString(),Ye=Math.max((window.screen.availWidth-x)/2,0).toString();let xt="";const Rn=Object.assign(Object.assign({},Cu),{width:x.toString(),height:J.toString(),top:de,left:Ye}),fn=(0,O.z$)().toLowerCase();_&&(xt=is(fn)?"_blank":_),bs(fn)&&(g=g||"http://localhost",Rn.scrollbars="yes");const tr=Object.entries(Rn).reduce((Fi,[uo,jl])=>`${Fi}${uo}=${jl},`,"");if(function(T=(0,O.z$)()){var g;return nt(T)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(fn)&&"_self"!==xt)return function(T,g){const _=document.createElement("a");_.href=T,_.target=g;const x=document.createEvent("MouseEvent");x.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(x)}(g||"",xt),new pd(null);const vi=window.open(g||"",xt,tr);Ft(vi,T,"popup-blocked");try{vi.focus()}catch(Fi){}return new pd(vi)}(g,xt,X())})()}_openRedirect(g,_,x,J){var de=this;return(0,E.Z)(function*(){return yield de._originValidation(g),T=Tc(g,_,x,kr(),J),Le().location.href=T,new Promise(()=>{});var T})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:J,promise:de}=this.eventManagers[_];return J?Promise.resolve(J):(cr(de,"If manager is not set, promise should be"),de)}const x=this.initAndGetManager(g);return this.eventManagers[_]={promise:x},x.catch(()=>{delete this.eventManagers[_]}),x}initAndGetManager(g){var _=this;return(0,E.Z)(function*(){const x=yield function(T){return fd.apply(this,arguments)}(g),J=new Uh(g);return x.register("authEvent",de=>(Ft(null==de?void 0:de.authEvent,g,"invalid-auth-event"),{status:J.onEvent(de.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:J},_.iframes[g._key()]=x,J})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(ei,{type:ei},J=>{var de;const Ye=null===(de=null==J?void 0:J[0])||void 0===de?void 0:de[ei];void 0!==Ye&&_(!!Ye),Nn(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function(T){return Cl.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return Ie()||or()||nt()}};class Hh extends class{constructor(g){this.factorId=g}_process(g,_,x){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,x);case"signin":return this._finalizeSignIn(g,_.credential);default:return Wn("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Hh(g)}_finalizeEnroll(g,_,x){return function(T,g){return Vn(T,"POST","/v2/accounts/mfaEnrollment:finalize",hn(T,g))}(g,{idToken:_,displayName:x,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function(T,g){return Vn(T,"POST","/v2/accounts/mfaSignIn:finalize",hn(T,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ta=(()=>{class T{constructor(){}static assertion(_){return Hh._fromCredential(_)}}return T.FACTOR_ID="phone",T})();var Wh="@firebase/auth",Ul="0.20.10";class md{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,E.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(x=>{var J;g((null===(J=x)||void 0===J?void 0:J.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){Ft(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const th=(0,O.Pz)("authIdTokenMaxAge")||300;let Sc=null;const Hr=T=>function(){var g=(0,E.Z)(function*(_){const x=_&&(yield _.getIdTokenResult()),J=x&&((new Date).getTime()-Date.parse(x.issuedAtTime))/1e3;if(J&&J>th)return;const de=null==x?void 0:x.token;Sc!==de&&(Sc=de,yield fetch(T,{method:de?"POST":"DELETE",headers:de?{Authorization:`Bearer ${de}`}:{}}))});return function(_){return g.apply(this,arguments)}}();function sp(T=(0,ne.getApp)()){const g=(0,ne._getProvider)(T,"auth");if(g.isInitialized())return g.getImmediate();const _=function(T,g){const _=(0,ne._getProvider)(T,"auth");if(_.isInitialized()){const J=_.getImmediate(),de=_.getOptions();if((0,O.vZ)(de,null!=g?g:{}))return J;Nn(J,"already-initialized")}return _.initialize({options:g})}(T,{popupRedirectResolver:gd,persistence:[ni,go,A]}),x=(0,O.Pz)("authTokenSyncURL");if(x){const de=Hr(x);(function(T,g,_){(0,O.m9)(T).beforeAuthStateChanged(g,_)})(_,de,()=>de(_.currentUser)),Mr(_,Ye=>de(Ye))}const J=(0,O.q4)("auth");return J&&An(_,`http://${J}`),_}var T;T="Browser",(0,ne._registerComponent)(new At.wA("auth",(g,{options:_})=>{const x=g.getProvider("app").getImmediate(),J=g.getProvider("heartbeat"),{apiKey:de,authDomain:Ye}=x.options;return((xt,Rn)=>{Ft(de&&!de.includes(":"),"invalid-api-key",{appName:xt.name}),Ft(!(null==Ye?void 0:Ye.includes(":")),"argument-error",{appName:xt.name});const fn={apiKey:de,authDomain:Ye,clientPlatform:T,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ge(T)},tr=new yt(xt,Rn,fn);return function(T,g){const _=(null==g?void 0:g.persistence)||[],x=(Array.isArray(_)?_:[_]).map(sr);(null==g?void 0:g.errorMap)&&T._updateErrorMap(g.errorMap),T._initializeWithPersistence(x,null==g?void 0:g.popupRedirectResolver)}(tr,_),tr})(x,J)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,x)=>{g.getProvider("auth-internal").initialize()})),(0,ne._registerComponent)(new At.wA("auth-internal",g=>{const _=ft(g.getProvider("auth").getImmediate());return new md(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ne.registerVersion)(Wh,Ul,void 0),(0,ne.registerVersion)(Wh,Ul,"esm2017")},1304:(tn,Ze,B)=>{"use strict";B.d(Ze,{u7:()=>og,Jj:()=>pc,IX:()=>ed,my:()=>co,xU:()=>Gd,Lz:()=>gc,WA:()=>zt,F8:()=>Fh,$q:()=>Qf,W:()=>td,EK:()=>pi,PU:()=>Iy,l7:()=>Ea,Ky:()=>bn,Xb:()=>gi,Cf:()=>bi,K9:()=>oi,Me:()=>Ec,yq:()=>es,Wi:()=>Zc,ET:()=>w_,Ab:()=>Jf,vr:()=>A_,Fc:()=>hm,hJ:()=>ay,B$:()=>Uf,at:()=>lm,oe:()=>C_,AK:()=>gv,TF:()=>dy,JU:()=>um,ST:()=>s_,fH:()=>tg,Ix:()=>ng,Wu:()=>f_,Lx:()=>h_,qY:()=>Js,GL:()=>Xf,QT:()=>y_,kl:()=>_y,Xk:()=>vy,PL:()=>__,UQ:()=>v_,zN:()=>E_,ad:()=>cy,nP:()=>mv,b9:()=>dv,vh:()=>gy,Pb:()=>pm,L$:()=>rg,cf:()=>D_,sc:()=>N0,Xo:()=>py,IO:()=>cv,iE:()=>Qp,Eo:()=>ly,i3:()=>T_,Bt:()=>S_,pl:()=>I_,Ub:()=>Ti,qK:()=>hv,TQ:()=>O0,e0:()=>c_,r7:()=>b_,Mx:()=>fm,ar:()=>sg});var re,E=B(8239),O=B(8026),ne=B(3910),oe=B(5422),ae=B(3854),Q="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ve={},Te=Te||{},ie=Q||self;function me(){}function Ce(s){var e=typeof s;return"array"==(e="object"!=e?e:s?Array.isArray(s)?"array":e:"null")||"object"==e&&"number"==typeof s.length}function _e(s){var e=typeof s;return"object"==e&&null!=s||"function"==e}var Xe="closure_uid_"+(1e9*Math.random()>>>0),Ee=0;function je(s,e,r){return s.call.apply(s.bind,arguments)}function Ae(s,e,r){if(!s)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var h=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(h,a),s.apply(e,h)}}return function(){return s.apply(e,arguments)}}function $e(s,e,r){return($e=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?je:Ae).apply(null,arguments)}function Fe(s,e){var r=Array.prototype.slice.call(arguments,1);return function(){var a=r.slice();return a.push.apply(a,arguments),s.apply(this,a)}}function Me(s,e){function r(){}r.prototype=e.prototype,s.X=e.prototype,s.prototype=new r,s.prototype.constructor=s,s.Wb=function(a,h,m){for(var b=Array(arguments.length-2),N=2;N<arguments.length;N++)b[N-2]=arguments[N];return e.prototype[h].apply(a,b)}}function Je(){this.s=this.s,this.o=this.o}var jt={};Je.prototype.s=!1,Je.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var s=function(s){return Object.prototype.hasOwnProperty.call(s,Xe)&&s[Xe]||(s[Xe]=++Ee)}(this);delete jt[s]}},Je.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const I=Array.prototype.indexOf?function(s,e){return Array.prototype.indexOf.call(s,e,void 0)}:function(s,e){if("string"==typeof s)return"string"!=typeof e||1!=e.length?-1:s.indexOf(e,0);for(let r=0;r<s.length;r++)if(r in s&&s[r]===e)return r;return-1};function rt(s){const e=s.length;if(0<e){const r=Array(e);for(let a=0;a<e;a++)r[a]=s[a];return r}return[]}function pt(s,e){for(let r=1;r<arguments.length;r++){const a=arguments[r];if(Ce(a)){const h=s.length||0,m=a.length||0;s.length=h+m;for(let b=0;b<m;b++)s[h+b]=a[b]}else s.push(a)}}function st(s,e){this.type=s,this.g=this.target=e,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var mt=function(){if(!ie.addEventListener||!Object.defineProperty)return!1;var s=!1,e=Object.defineProperty({},"passive",{get:function(){s=!0}});try{ie.addEventListener("test",me,e),ie.removeEventListener("test",me,e)}catch(r){}return s}();function lt(s){return/^[\s\xa0]*$/.test(s)}var Dt=String.prototype.trim?function(s){return s.trim()}:function(s){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(s)[1]};function At(s,e){return s<e?-1:s>e?1:0}function wn(){var s=ie.navigator;return s&&(s=s.userAgent)?s:""}function pn(s){return-1!=wn().indexOf(s)}function bt(s){return bt[" "](s),s}bt[" "]=me;var Bn,s,ht=pn("Opera"),Ke=pn("Trident")||pn("MSIE"),dt=pn("Edge"),Rt=dt||Ke,Zt=pn("Gecko")&&!(-1!=wn().toLowerCase().indexOf("webkit")&&!pn("Edge"))&&!(pn("Trident")||pn("MSIE"))&&!pn("Edge"),Lt=-1!=wn().toLowerCase().indexOf("webkit")&&!pn("Edge");function Gt(){var s=ie.document;return s?s.documentMode:void 0}e:{var ir="",Nn=(s=wn(),Zt?/rv:([^\);]+)(\)|;)/.exec(s):dt?/Edge\/([\d\.]+)/.exec(s):Ke?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(s):Lt?/WebKit\/(\S+)/.exec(s):ht?/(?:Version)[ \/]?(\S+)/.exec(s):void 0);if(Nn&&(ir=Nn?Nn[1]:""),Ke){var Dn=Gt();if(null!=Dn&&Dn>parseFloat(ir)){Bn=String(Dn);break e}}Bn=ir}var qn={};function Gr(){return e=qn,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let s=0;const e=Dt(String(Bn)).split("."),r=Dt("9").split("."),a=Math.max(e.length,r.length);for(let b=0;0==s&&b<a;b++){var h=e[b]||"",m=r[b]||"";do{if(h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],m=/(\d*)(\D*)(.*)/.exec(m)||["","","",""],0==h[0].length&&0==m[0].length)break;s=At(0==h[1].length?0:parseInt(h[1],10),0==m[1].length?0:parseInt(m[1],10))||At(0==h[2].length,0==m[2].length)||At(h[2],m[2]),h=h[3],m=m[3]}while(0==s)}return 0<=s}();var e}var Wn=ie.document&&Ke&&(Gt()||parseInt(Bn,10))||void 0;function cr(s,e){if(st.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var r=this.type=s.type,a=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=e,e=s.relatedTarget){if(Zt){e:{try{bt(e.nodeName);var h=!0;break e}catch(m){}h=!1}h||(e=null)}}else"mouseover"==r?e=s.fromElement:"mouseout"==r&&(e=s.toElement);this.relatedTarget=e,a?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType="string"==typeof s.pointerType?s.pointerType:gn[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&cr.X.h.call(this)}}Me(cr,st);var gn={2:"touch",3:"pen",4:"mouse"};cr.prototype.h=function(){cr.X.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var sr="closure_listenable_"+(1e6*Math.random()|0),lr=0;function zr(s,e,r,a,h){this.listener=s,this.proxy=null,this.src=e,this.type=r,this.capture=!!a,this.ha=h,this.key=++lr,this.ba=this.ea=!1}function kr(s){s.ba=!0,s.listener=null,s.proxy=null,s.src=null,s.ha=null}function ai(s,e,r){for(const a in s)e.call(r,s[a],a,s)}function Fr(s){const e={};for(const r in s)e[r]=s[r];return e}const Dr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mi(s,e){let r,a;for(let h=1;h<arguments.length;h++){for(r in a=arguments[h],a)s[r]=a[r];for(let m=0;m<Dr.length;m++)r=Dr[m],Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}}function dr(s){this.src=s,this.g={},this.h=0}function dn(s,e){var r=e.type;if(r in s.g){var m,a=s.g[r],h=I(a,e);(m=0<=h)&&Array.prototype.splice.call(a,h,1),m&&(kr(e),0==s.g[r].length&&(delete s.g[r],s.h--))}}function Ct(s,e,r,a){for(var h=0;h<s.length;++h){var m=s[h];if(!m.ba&&m.listener==e&&m.capture==!!r&&m.ha==a)return h}return-1}dr.prototype.add=function(s,e,r,a,h){var m=s.toString();(s=this.g[m])||(s=this.g[m]=[],this.h++);var b=Ct(s,e,a,h);return-1<b?(e=s[b],r||(e.ea=!1)):((e=new zr(e,this.src,m,!!a,h)).ea=r,s.push(e)),e};var ci="closure_lm_"+(1e6*Math.random()|0),di={};function hn(s,e,r,a,h){if(a&&a.once)return br(s,e,r,a,h);if(Array.isArray(e)){for(var m=0;m<e.length;m++)hn(s,e[m],r,a,h);return null}return r=mn(r),s&&s[sr]?s.N(e,r,_e(a)?!!a.capture:!!a,h):Vn(s,e,r,!1,a,h)}function Vn(s,e,r,a,h,m){if(!e)throw Error("Invalid event type");var b=_e(h)?!!h.capture:!!h,N=on(s);if(N||(s[ci]=N=new dr(s)),(r=N.add(e,r,a,b,m)).proxy)return r;if(a=function(){const e=ii;return function s(r){return e.call(s.src,s.listener,r)}}(),r.proxy=a,a.src=s,a.listener=r,s.addEventListener)mt||(h=b),void 0===h&&(h=!1),s.addEventListener(e.toString(),a,h);else if(s.attachEvent)s.attachEvent(Yn(e.toString()),a);else{if(!s.addListener||!s.removeListener)throw Error("addEventListener and attachEvent are unavailable.");s.addListener(a)}return r}function br(s,e,r,a,h){if(Array.isArray(e)){for(var m=0;m<e.length;m++)br(s,e[m],r,a,h);return null}return r=mn(r),s&&s[sr]?s.O(e,r,_e(a)?!!a.capture:!!a,h):Vn(s,e,r,!0,a,h)}function Xn(s,e,r,a,h){if(Array.isArray(e))for(var m=0;m<e.length;m++)Xn(s,e[m],r,a,h);else a=_e(a)?!!a.capture:!!a,r=mn(r),s&&s[sr]?(s=s.i,(e=String(e).toString())in s.g&&-1<(r=Ct(m=s.g[e],r,a,h))&&(kr(m[r]),Array.prototype.splice.call(m,r,1),0==m.length&&(delete s.g[e],s.h--))):s&&(s=on(s))&&(e=s.g[e.toString()],s=-1,e&&(s=Ct(e,r,a,h)),(r=-1<s?e[s]:null)&&Gn(r))}function Gn(s){if("number"!=typeof s&&s&&!s.ba){var e=s.src;if(e&&e[sr])dn(e.i,s);else{var r=s.type,a=s.proxy;e.removeEventListener?e.removeEventListener(r,a,s.capture):e.detachEvent?e.detachEvent(Yn(r),a):e.addListener&&e.removeListener&&e.removeListener(a),(r=on(e))?(dn(r,s),0==r.h&&(r.src=null,e[ci]=null)):kr(s)}}}function Yn(s){return s in di?di[s]:di[s]="on"+s}function ii(s,e){if(s.ba)s=!0;else{e=new cr(e,this);var r=s.listener,a=s.ha||s.src;s.ea&&Gn(s),s=r.call(a,e)}return s}function on(s){return(s=s[ci])instanceof dr?s:null}var Ot="__closure_events_fn_"+(1e9*Math.random()>>>0);function mn(s){return"function"==typeof s?s:(s[Ot]||(s[Ot]=function(e){return s.handleEvent(e)}),s[Ot])}function cn(){Je.call(this),this.i=new dr(this),this.P=this,this.I=null}function rn(s,e){var r,a=s.I;if(a)for(r=[];a;a=a.I)r.push(a);if(s=s.P,a=e.type||e,"string"==typeof e)e=new st(e,s);else if(e instanceof st)e.target=e.target||s;else{var h=e;mi(e=new st(a,s),h)}if(h=!0,r)for(var m=r.length-1;0<=m;m--){var b=e.g=r[m];h=qt(b,a,!0,e)&&h}if(h=qt(b=e.g=s,a,!0,e)&&h,h=qt(b,a,!1,e)&&h,r)for(m=0;m<r.length;m++)h=qt(b=e.g=r[m],a,!1,e)&&h}function qt(s,e,r,a){if(!(e=s.i.g[String(e)]))return!0;e=e.concat();for(var h=!0,m=0;m<e.length;++m){var b=e[m];if(b&&!b.ba&&b.capture==r){var N=b.listener,Z=b.ha||b.src;b.ea&&dn(s.i,b),h=!1!==N.call(Z,a)&&h}}return h&&!a.defaultPrevented}Me(cn,Je),cn.prototype[sr]=!0,cn.prototype.removeEventListener=function(s,e,r,a){Xn(this,s,e,r,a)},cn.prototype.M=function(){if(cn.X.M.call(this),this.i){var e,s=this.i;for(e in s.g){for(var r=s.g[e],a=0;a<r.length;a++)kr(r[a]);delete s.g[e],s.h--}}this.I=null},cn.prototype.N=function(s,e,r,a){return this.i.add(String(s),e,!1,r,a)},cn.prototype.O=function(s,e,r,a){return this.i.add(String(s),e,!0,r,a)};var Be=ie.JSON.stringify;function Ve(){var s=kn;let e=null;return s.g&&(e=s.g,s.g=s.g.next,s.g||(s.h=null),e.next=null),e}var Ut,ke=new class{constructor(s,e){this.i=s,this.j=e,this.h=0,this.g=null}get(){let s;return 0<this.h?(this.h--,s=this.g,this.g=s.next,s.next=null):s=this.i(),s}}(()=>new ye,s=>s.reset());class ye{constructor(){this.next=this.g=this.h=null}set(e,r){this.h=e,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function Oe(s){ie.setTimeout(()=>{throw s},0)}function ut(s,e){Ut||function(){var s=ie.Promise.resolve(void 0);Ut=function(){s.then(ln)}}(),Tn||(Ut(),Tn=!0),kn.add(s,e)}var Tn=!1,kn=new class{constructor(){this.h=this.g=null}add(e,r){const a=ke.get();a.set(e,r),this.h?this.h.next=a:this.g=a,this.h=a}};function ln(){for(var s;s=Ve();){try{s.h.call(s.g)}catch(r){Oe(r)}var e=ke;e.j(s),100>e.h&&(e.h++,s.next=e.g,e.g=s)}Tn=!1}function yn(s,e){cn.call(this),this.h=s||1,this.g=e||ie,this.j=$e(this.lb,this),this.l=Date.now()}function pr(s){s.ca=!1,s.R&&(s.g.clearTimeout(s.R),s.R=null)}function $t(s,e,r){if("function"==typeof s)r&&(s=$e(s,r));else{if(!s||"function"!=typeof s.handleEvent)throw Error("Invalid listener argument");s=$e(s.handleEvent,s)}return 2147483647<Number(e)?-1:ie.setTimeout(s,e||0)}function Vt(s){s.g=$t(()=>{s.g=null,s.i&&(s.i=!1,Vt(s))},s.j);const e=s.h;s.h=null,s.m.apply(null,e)}Me(yn,cn),(re=yn.prototype).ca=!1,re.R=null,re.lb=function(){if(this.ca){var s=Date.now()-this.l;0<s&&s<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-s):(this.R&&(this.g.clearTimeout(this.R),this.R=null),rn(this,"tick"),this.ca&&(pr(this),this.start()))}},re.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},re.M=function(){yn.X.M.call(this),pr(this),delete this.g};class Nt extends Je{constructor(e,r){super(),this.m=e,this.j=r,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Vt(this)}M(){super.M(),this.g&&(ie.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _n(s){Je.call(this),this.h=s,this.g={}}Me(_n,Je);var Sn=[];function nn(s,e,r,a){Array.isArray(r)||(r&&(Sn[0]=r.toString()),r=Sn);for(var h=0;h<r.length;h++){var m=hn(e,r[h],a||s.handleEvent,!1,s.h||s);if(!m)break;s.g[m.key]=m}}function Or(s){ai(s.g,function(e,r){this.g.hasOwnProperty(r)&&Gn(e)},s),s.g={}}function yr(){this.g=!0}function qr(s,e,r,a){s.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(s,e){if(!s.g)return e;if(!e)return null;try{var r=JSON.parse(e);if(r)for(s=0;s<r.length;s++)if(Array.isArray(r[s])){var a=r[s];if(!(2>a.length)){var h=a[1];if(Array.isArray(h)&&!(1>h.length)){var m=h[0];if("noop"!=m&&"stop"!=m&&"close"!=m)for(var b=1;b<h.length;b++)h[b]=""}}}return Be(r)}catch(N){return e}}(s,r)+(a?" "+a:"")})}_n.prototype.M=function(){_n.X.M.call(this),Or(this)},_n.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},yr.prototype.Aa=function(){this.g=!1},yr.prototype.info=function(){};var Vr={},Ei=null;function Yr(){return Ei=Ei||new cn}function bs(s){st.call(this,Vr.Pa,s)}function or(s){const e=Yr();rn(e,new bs(e,s))}function is(s,e){st.call(this,Vr.STAT_EVENT,s),this.stat=e}function $r(s){const e=Yr();rn(e,new is(e,s))}function yi(s,e){st.call(this,Vr.Qa,s),this.size=e}function Ir(s,e){if("function"!=typeof s)throw Error("Fn must not be null and must be a function");return ie.setTimeout(function(){s()},e)}Vr.Pa="serverreachability",Me(bs,st),Vr.STAT_EVENT="statevent",Me(is,st),Vr.Qa="timingevent",Me(yi,st);var Ns={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},nt={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function z(){}function ce(){}z.prototype.h=null;var _t,Ie={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function We(){st.call(this,"d")}function Ge(){st.call(this,"c")}function yt(){}function ft(s,e,r,a){this.l=s,this.j=e,this.m=r,this.U=a||1,this.S=new _n(this),this.O=An,this.T=new yn(s=Rt?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Qt}function Qt(){this.i=null,this.g="",this.h=!1}Me(We,st),Me(Ge,st),Me(yt,z),yt.prototype.g=function(){return new XMLHttpRequest},yt.prototype.i=function(){return{}},_t=new yt;var An=45e3,Pn={},jn={};function Cr(s,e,r){s.K=1,s.v=no(Hs(e)),s.s=r,s.P=!0,qi(s,null)}function qi(s,e){s.F=Date.now(),Cs(s),s.A=Hs(s.v);var r=s.A,a=s.U;Array.isArray(a)||(a=[String(a)]),Qi(r.i,"t",a),s.C=0,r=s.l.H,s.h=new Qt,s.g=oo(s.l,r?e:null,!s.s),0<s.N&&(s.L=new Nt($e(s.La,s,s.g),s.N)),nn(s.S,s.g,"readystatechange",s.ib),e=s.H?Fr(s.H):{},s.s?(s.u||(s.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",s.g.da(s.A,s.u,s.s,e)):(s.u="GET",s.g.da(s.A,s.u,null,e)),or(1),function(s,e,r,a,h,m){s.info(function(){if(s.g)if(m)for(var b="",N=m.split("&"),Z=0;Z<N.length;Z++){var te=N[Z].split("=");if(1<te.length){var xe=te[0];te=te[1];var ze=xe.split("_");b=2<=ze.length&&"type"==ze[1]?b+(xe+"=")+te+"&":b+(xe+"=redacted&")}}else b=null;else b=m;return"XMLHTTP REQ ("+a+") [attempt "+h+"]: "+e+"\n"+r+"\n"+b})}(s.j,s.u,s.A,s.m,s.U,s.s)}function hi(s){return!!s.g&&"GET"==s.u&&2!=s.K&&s.l.Da}function Ni(s,e,r){let h,a=!0;for(;!s.I&&s.C<r.length;){if(h=xr(s,r),h==jn){4==e&&(s.o=4,$r(14),a=!1),qr(s.j,s.m,null,"[Incomplete Response]");break}if(h==Pn){s.o=4,$r(15),qr(s.j,s.m,r,"[Invalid Chunk]"),a=!1;break}qr(s.j,s.m,h,null),eo(s,h)}hi(s)&&h!=jn&&h!=Pn&&(s.h.g="",s.C=0),4!=e||0!=r.length||s.h.h||(s.o=1,$r(16),a=!1),s.i=s.i&&a,a?0<r.length&&!s.$&&(s.$=!0,(e=s.l).g==s&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+r.length),$i(e),e.K=!0,$r(11))):(qr(s.j,s.m,r,"[Invalid Chunked Response]"),Ne(s),Yi(s))}function xr(s,e){var r=s.C,a=e.indexOf("\n",r);return-1==a?jn:(r=Number(e.substring(r,a)),isNaN(r)?Pn:(a+=1)+r>e.length?jn:(e=e.substr(a,r),s.C=a+r,e))}function Cs(s){s.V=Date.now()+s.O,ss(s,s.O)}function ss(s,e){if(null!=s.B)throw Error("WatchDog timer not null");s.B=Ir($e(s.gb,s),e)}function ws(s){s.B&&(ie.clearTimeout(s.B),s.B=null)}function Yi(s){0==s.l.G||s.I||bo(s.l,s)}function Ne(s){ws(s);var e=s.L;e&&"function"==typeof e.na&&e.na(),s.L=null,pr(s.T),Or(s.S),s.g&&(e=s.g,s.g=null,e.abort(),e.na())}function eo(s,e){try{var r=s.l;if(0!=r.G&&(r.g==s||K(r.h,s)))if(!s.J&&K(r.h,s)&&3==r.G){try{var a=r.Fa.g.parse(e)}catch(te){a=null}if(Array.isArray(a)&&3==a.length){var h=a;if(0==h[0])e:if(r.u)r.Ba=h[1],0<r.Ba-r.T&&37500>h[2]&&r.L&&0==r.A&&!r.v&&(r.v=Ir($e(r.cb,r),6e3));else{if(r.g){if(!(r.g.F+3e3<s.F))break e;gs(r),ra(r)}As(r),$r(18)}if(1>=le(r.h)&&r.ja){try{r.ja()}catch(te){}r.ja=void 0}}else Lo(r,11)}else if((s.J||r.g==s)&&gs(r),!lt(e))for(h=r.Fa.g.parse(e),e=0;e<h.length;e++){let te=h[e];if(r.T=te[0],te=te[1],2==r.G)if("c"==te[0]){r.I=te[1],r.ka=te[2];const xe=te[3];null!=xe&&(r.ma=xe,r.j.info("VER="+r.ma));const ze=te[4];null!=ze&&(r.Ca=ze,r.j.info("SVER="+r.Ca));const Et=te[5];null!=Et&&"number"==typeof Et&&0<Et&&(r.J=a=1.5*Et,r.j.info("backChannelRequestTimeoutMs_="+a)),a=r;const Wt=s.g;if(Wt){const sn=Wt.g?Wt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sn){var m=a.h;m.g||-1==sn.indexOf("spdy")&&-1==sn.indexOf("quic")&&-1==sn.indexOf("h2")||(m.j=m.l,m.g=new Set,m.h&&(be(m,m.h),m.h=null))}if(a.D){const Un=Wt.g?Wt.g.getResponseHeader("X-HTTP-Session-Id"):null;Un&&(a.za=Un,Zr(a.F,a.D,Un))}}r.G=3,r.l&&r.l.xa(),r.$&&(r.P=Date.now()-s.F,r.j.info("Handshake RTT: "+r.P+"ms"));var b=s;if((a=r).sa=Vo(a,a.H?a.ka:null,a.V),b.J){Ue(a.h,b);var N=b,Z=a.J;Z&&N.setTimeout(Z),N.B&&(ws(N),Cs(N)),a.g=b}else el(a);0<r.i.length&&so(r)}else"stop"!=te[0]&&"close"!=te[0]||Lo(r,7);else 3==r.G&&("stop"==te[0]||"close"==te[0]?"stop"==te[0]?Lo(r,7):ho(r):"noop"!=te[0]&&r.l&&r.l.wa(te),r.A=0)}or(4)}catch(te){}}function Po(s,e){if(s.forEach&&"function"==typeof s.forEach)s.forEach(e,void 0);else if(Ce(s)||"string"==typeof s)Array.prototype.forEach.call(s,e,void 0);else for(var r=function(s){if(s.oa&&"function"==typeof s.oa)return s.oa();if(!s.W||"function"!=typeof s.W){if("undefined"!=typeof Map&&s instanceof Map)return Array.from(s.keys());if(!("undefined"!=typeof Set&&s instanceof Set)){if(Ce(s)||"string"==typeof s){var e=[];s=s.length;for(var r=0;r<s;r++)e.push(r);return e}e=[],r=0;for(const a in s)e[r++]=a;return e}}}(s),a=function(s){if(s.W&&"function"==typeof s.W)return s.W();if("undefined"!=typeof Map&&s instanceof Map||"undefined"!=typeof Set&&s instanceof Set)return Array.from(s.values());if("string"==typeof s)return s.split("");if(Ce(s)){for(var e=[],r=s.length,a=0;a<r;a++)e.push(s[a]);return e}for(a in e=[],r=0,s)e[r++]=s[a];return e}(s),h=a.length,m=0;m<h;m++)e.call(void 0,a[m],r&&r[m],s)}(re=ft.prototype).setTimeout=function(s){this.O=s},re.ib=function(s){s=s.target;const e=this.L;e&&3==_r(s)?e.l():this.La(s)},re.La=function(s){try{if(s==this.g)e:{const xe=_r(this.g);var e=this.g.Ea();const ze=this.g.aa();if(!(3>xe)&&(3!=xe||Rt||this.g&&(this.h.h||this.g.fa()||Fo(this.g)))){this.I||4!=xe||7==e||or(8==e||0>=ze?3:2),ws(this);var r=this.g.aa();this.Y=r;t:if(hi(this)){var a=Fo(this.g);s="";var h=a.length,m=4==_r(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ne(this),Yi(this);var b="";break t}this.h.i=new ie.TextDecoder}for(e=0;e<h;e++)this.h.h=!0,s+=this.h.i.decode(a[e],{stream:m&&e==h-1});a.splice(0,h),this.h.g+=s,this.C=0,b=this.h.g}else b=this.g.fa();if(this.i=200==r,function(s,e,r,a,h,m,b){s.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+h+"]: "+e+"\n"+r+"\n"+m+" "+b})}(this.j,this.u,this.A,this.m,this.U,xe,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var N,Z=this.g;if((N=Z.g?Z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!lt(N)){var te=N;break t}}te=null}if(!(r=te)){this.i=!1,this.o=3,$r(12),Ne(this),Yi(this);break e}qr(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,eo(this,r)}this.P?(Ni(this,xe,b),Rt&&this.i&&3==xe&&(nn(this.S,this.T,"tick",this.hb),this.T.start())):(qr(this.j,this.m,b,null),eo(this,b)),4==xe&&Ne(this),this.i&&!this.I&&(4==xe?bo(this.l,this):(this.i=!1,Cs(this)))}else 400==r&&0<b.indexOf("Unknown SID")?(this.o=3,$r(12)):(this.o=0,$r(13)),Ne(this),Yi(this)}}}catch(xe){}},re.hb=function(){if(this.g){var s=_r(this.g),e=this.g.fa();this.C<e.length&&(ws(this),Ni(this,s,e),this.i&&4!=s&&Cs(this))}},re.cancel=function(){this.I=!0,Ne(this)},re.gb=function(){this.B=null;const s=Date.now();0<=s-this.V?(function(s,e){s.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(or(3),$r(17)),Ne(this),this.o=2,Yi(this)):ss(this,this.V-s)};var zo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ds(s,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,s instanceof Ds){this.h=void 0!==e?e:s.h,fs(this,s.j),this.s=s.s,this.g=s.g,Ws(this,s.m),this.l=s.l,e=s.i;var r=new fi;r.i=e.i,e.g&&(r.g=new Map(e.g),r.h=e.h),to(this,r),this.o=s.o}else s&&(r=String(s).match(zo))?(this.h=!!e,fs(this,r[1]||"",!0),this.s=ji(r[2]||""),this.g=ji(r[3]||"",!0),Ws(this,r[4]),this.l=ji(r[5]||"",!0),to(this,r[6]||"",!0),this.o=ji(r[7]||"")):(this.h=!!e,this.i=new fi(null,this.h))}function Hs(s){return new Ds(s)}function fs(s,e,r){s.j=r?ji(e,!0):e,s.j&&(s.j=s.j.replace(/:$/,""))}function Ws(s,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);s.m=e}else s.m=null}function to(s,e,r){e instanceof fi?(s.i=e,function(s,e){e&&!s.j&&(Vi(s),s.i=null,s.g.forEach(function(r,a){var h=a.toLowerCase();a!=h&&(vo(this,a),Qi(this,h,r))},s)),s.j=e}(s.i,s.h)):(r||(e=ps(e,_i)),s.i=new fi(e,s.h))}function Zr(s,e,r){s.i.set(e,r)}function no(s){return Zr(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function ji(s,e){return s?e?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function ps(s,e,r){return"string"==typeof s?(s=encodeURI(s).replace(e,ro),r&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function ro(s){return"%"+((s=s.charCodeAt(0))>>4&15).toString(16)+(15&s).toString(16)}Ds.prototype.toString=function(){var s=[],e=this.j;e&&s.push(ps(e,os,!0),":");var r=this.g;return(r||"file"==e)&&(s.push("//"),(e=this.s)&&s.push(ps(e,os,!0),"@"),s.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&s.push(":",String(r))),(r=this.l)&&(this.g&&"/"!=r.charAt(0)&&s.push("/"),s.push(ps(r,"/"==r.charAt(0)?Gs:Li,!0))),(r=this.i.toString())&&s.push("?",r),(r=this.o)&&s.push("#",ps(r,Ps)),s.join("")};var os=/[#\/\?@]/g,Li=/[#\?:]/g,Gs=/[#\?]/g,_i=/[#\?@]/g,Ps=/#/g;function fi(s,e){this.h=this.g=null,this.i=s||null,this.j=!!e}function Vi(s){s.g||(s.g=new Map,s.h=0,s.i&&function(s,e){if(s){s=s.split("&");for(var r=0;r<s.length;r++){var a=s[r].indexOf("="),h=null;if(0<=a){var m=s[r].substring(0,a);h=s[r].substring(a+1)}else m=s[r];e(m,h?decodeURIComponent(h.replace(/\+/g," ")):"")}}}(s.i,function(e,r){s.add(decodeURIComponent(e.replace(/\+/g," ")),r)}))}function vo(s,e){Vi(s),e=Ki(s,e),s.g.has(e)&&(s.i=null,s.h-=s.g.get(e).length,s.g.delete(e))}function Bi(s,e){return Vi(s),e=Ki(s,e),s.g.has(e)}function Qi(s,e,r){vo(s,e),0<r.length&&(s.i=null,s.g.set(Ki(s,e),rt(r)),s.h+=r.length)}function Ki(s,e){return e=String(e),s.j&&(e=e.toLowerCase()),e}function Ii(s){this.l=s||Xi,s=ie.PerformanceNavigationTiming?0<(s=ie.performance.getEntriesByType("navigation")).length&&("hq"==s[0].nextHopProtocol||"h2"==s[0].nextHopProtocol):!!(ie.g&&ie.g.Ga&&ie.g.Ga()&&ie.g.Ga().$b),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(re=fi.prototype).add=function(s,e){Vi(this),this.i=null,s=Ki(this,s);var r=this.g.get(s);return r||this.g.set(s,r=[]),r.push(e),this.h+=1,this},re.forEach=function(s,e){Vi(this),this.g.forEach(function(r,a){r.forEach(function(h){s.call(e,h,a,this)},this)},this)},re.oa=function(){Vi(this);const s=Array.from(this.g.values()),e=Array.from(this.g.keys()),r=[];for(let a=0;a<e.length;a++){const h=s[a];for(let m=0;m<h.length;m++)r.push(e[a])}return r},re.W=function(s){Vi(this);let e=[];if("string"==typeof s)Bi(this,s)&&(e=e.concat(this.g.get(Ki(this,s))));else{s=Array.from(this.g.values());for(let r=0;r<s.length;r++)e=e.concat(s[r])}return e},re.set=function(s,e){return Vi(this),this.i=null,Bi(this,s=Ki(this,s))&&(this.h-=this.g.get(s).length),this.g.set(s,[e]),this.h+=1,this},re.get=function(s,e){return s&&0<(s=this.W(s)).length?String(s[0]):e},re.toString=function(){if(this.i)return this.i;if(!this.g)return"";const s=[],e=Array.from(this.g.keys());for(var r=0;r<e.length;r++){var a=e[r];const m=encodeURIComponent(String(a)),b=this.W(a);for(a=0;a<b.length;a++){var h=m;""!==b[a]&&(h+="="+encodeURIComponent(String(b[a]))),s.push(h)}}return this.i=s.join("&")};var Xi=10;function G(s){return!!s.h||!!s.g&&s.g.size>=s.j}function le(s){return s.h?1:s.g?s.g.size:0}function K(s,e){return s.h?s.h==e:!!s.g&&s.g.has(e)}function be(s,e){s.g?s.g.add(e):s.h=e}function Ue(s,e){s.h&&s.h==e?s.h=null:s.g&&s.g.has(e)&&s.g.delete(e)}function wt(s){if(null!=s.h)return s.i.concat(s.h.D);if(null!=s.g&&0!==s.g.size){let e=s.i;for(const r of s.g.values())e=e.concat(r.D);return e}return rt(s.i)}function Xt(){}function W(){this.g=new Xt}function $(s,e,r){const a=r||"";try{Po(s,function(h,m){let b=h;_e(h)&&(b=Be(h)),e.push(a+m+"="+encodeURIComponent(b))})}catch(h){throw e.push(a+"type="+encodeURIComponent("_badmap")),h}}function ue(s,e,r,a,h){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,h(a)}catch(m){}}function ot(s){this.l=s.ac||null,this.j=s.jb||!1}function an(s,e){cn.call(this),this.D=s,this.u=e,this.m=void 0,this.readyState=Zn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ii.prototype.cancel=function(){if(this.i=wt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const s of this.g.values())s.cancel();this.g.clear()}},Xt.prototype.stringify=function(s){return ie.JSON.stringify(s,void 0)},Xt.prototype.parse=function(s){return ie.JSON.parse(s,void 0)},Me(ot,z),ot.prototype.g=function(){return new an(this.l,this.j)},ot.prototype.i=function(s){return function(){return s}}({}),Me(an,cn);var Zn=0;function Ur(s){s.j.read().then(s.Ta.bind(s)).catch(s.ga.bind(s))}function Ci(s){s.readyState=4,s.l=null,s.j=null,s.A=null,li(s)}function li(s){s.onreadystatechange&&s.onreadystatechange.call(s)}(re=an.prototype).open=function(s,e){if(this.readyState!=Zn)throw this.abort(),Error("Error reopening a connection");this.C=s,this.B=e,this.readyState=1,li(this)},re.send=function(s){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};s&&(e.body=s),(this.D||ie).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},re.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ci(this)),this.readyState=Zn},re.Wa=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,li(this)),this.g&&(this.readyState=3,li(this),this.g)))if("arraybuffer"===this.responseType)s.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==ie.ReadableStream&&"body"in s){if(this.j=s.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ur(this)}else s.text().then(this.Va.bind(this),this.ga.bind(this))},re.Ta=function(s){if(this.g){if(this.u&&s.value)this.response.push(s.value);else if(!this.u){var e=s.value?s.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!s.done}))&&(this.response=this.responseText+=e)}s.done?Ci(this):li(this),3==this.readyState&&Ur(this)}},re.Va=function(s){this.g&&(this.response=this.responseText=s,Ci(this))},re.Ua=function(s){this.g&&(this.response=s,Ci(this))},re.ga=function(){this.g&&Ci(this)},re.setRequestHeader=function(s,e){this.v.append(s,e)},re.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},re.getAllResponseHeaders=function(){if(!this.h)return"";const s=[],e=this.h.entries();for(var r=e.next();!r.done;)s.push((r=r.value)[0]+": "+r[1]),r=e.next();return s.join("\r\n")},Object.defineProperty(an.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(s){this.m=s?"include":"same-origin"}});var si=ie.JSON.parse;function jr(s){cn.call(this),this.headers=new Map,this.u=s||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Qn,this.K=this.L=!1}Me(jr,cn);var Qn="",ma=/^https?$/i,ko=["POST","PUT"];function Ja(s,e){s.h=!1,s.g&&(s.l=!0,s.g.abort(),s.l=!1),s.j=e,s.m=5,na(s),Eo(s)}function na(s){s.D||(s.D=!0,rn(s,"complete"),rn(s,"error"))}function Ra(s){if(s.h&&void 0!==Te&&(!s.C[1]||4!=_r(s)||2!=s.aa()))if(s.v&&4==_r(s))$t(s.Ha,0,s);else if(rn(s,"readystatechange"),4==_r(s)){s.h=!1;try{const N=s.aa();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var r;if(!(r=e)){var a;if(a=0===N){var h=String(s.H).match(zo)[1]||null;if(!h&&ie.self&&ie.self.location){var m=ie.self.location.protocol;h=m.substr(0,m.length-1)}a=!ma.test(h?h.toLowerCase():"")}r=a}if(r)rn(s,"complete"),rn(s,"success");else{s.m=6;try{var b=2<_r(s)?s.g.statusText:""}catch(Z){b=""}s.j=b+" ["+s.aa()+"]",na(s)}}finally{Eo(s)}}}function Eo(s,e){if(s.g){Yt(s);const r=s.g,a=s.C[0]?me:null;s.g=null,s.C=null,e||rn(s,"ready");try{r.onreadystatechange=a}catch(h){}}}function Yt(s){s.g&&s.K&&(s.g.ontimeout=null),s.A&&(ie.clearTimeout(s.A),s.A=null)}function _r(s){return s.g?s.g.readyState:0}function Fo(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.J){case Qn:case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Hi(s){let e="";return ai(s,function(r,a){e+=a,e+=":",e+=r,e+="\r\n"}),e}function io(s,e,r){e:{for(a in r){var a=!1;break e}a=!0}a||(r=Hi(r),"string"==typeof s?null!=r&&encodeURIComponent(String(r)):Zr(s,e,r))}function Ss(s,e,r){return r&&r.internalChannelParams&&r.internalChannelParams[s]||e}function Fs(s){this.Ca=0,this.i=[],this.j=new yr,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Ss("failFast",!1,s),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Ss("baseRetryDelayMs",5e3,s),this.bb=Ss("retryDelaySeedMs",1e4,s),this.$a=Ss("forwardChannelMaxRetries",2,s),this.ta=Ss("forwardChannelRequestTimeoutMs",2e4,s),this.ra=s&&s.xmlHttpFactory||void 0,this.Da=s&&s.Zb||!1,this.J=void 0,this.H=s&&s.supportsCrossDomainXhr||!1,this.I="",this.h=new Ii(s&&s.concurrentRequestLimit),this.Fa=new W,this.O=s&&s.fastHandshake||!1,this.N=s&&s.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=s&&s.Xb||!1,s&&s.Aa&&this.j.Aa(),s&&s.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&s&&s.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function ho(s){if(Ol(s),3==s.G){var e=s.U++,r=Hs(s.F);Zr(r,"SID",s.I),Zr(r,"RID",e),Zr(r,"TYPE","terminate"),Ji(s,r),(e=new ft(s,s.j,e,void 0)).K=2,e.v=no(Hs(r)),r=!1,ie.navigator&&ie.navigator.sendBeacon&&(r=ie.navigator.sendBeacon(e.v.toString(),"")),!r&&ie.Image&&((new Image).src=e.v,r=!0),r||(e.g=oo(e.l,null),e.g.da(e.v)),e.F=Date.now(),Cs(e)}ia(s)}function ra(s){s.g&&($i(s),s.g.cancel(),s.g=null)}function Ol(s){ra(s),s.u&&(ie.clearTimeout(s.u),s.u=null),gs(s),s.h.cancel(),s.m&&("number"==typeof s.m&&ie.clearTimeout(s.m),s.m=null)}function so(s){G(s.h)||s.m||(s.m=!0,ut(s.Ja,s),s.C=0)}function Io(s,e){var r;r=e?e.m:s.U++;const a=Hs(s.F);Zr(a,"SID",s.I),Zr(a,"RID",r),Zr(a,"AID",s.T),Ji(s,a),s.o&&s.s&&io(a,s.o,s.s),r=new ft(s,s.j,r,s.C+1),null===s.o&&(r.H=s.s),e&&(s.i=e.D.concat(s.i)),e=Ls(s,r,1e3),r.setTimeout(Math.round(.5*s.ta)+Math.round(.5*s.ta*Math.random())),be(s.h,r),Cr(r,a,e)}function Ji(s,e){s.ia&&ai(s.ia,function(r,a){Zr(e,a,r)}),s.l&&Po({},function(r,a){Zr(e,a,r)})}function Ls(s,e,r){r=Math.min(s.i.length,r);var a=s.l?$e(s.l.Ra,s.l,s):null;e:{var h=s.i;let m=-1;for(;;){const b=["count="+r];-1==m?0<r?(m=h[0].h,b.push("ofs="+m)):m=0:b.push("ofs="+m);let N=!0;for(let Z=0;Z<r;Z++){let te=h[Z].h;const xe=h[Z].g;if(te-=m,0>te)m=Math.max(0,h[Z].h-100),N=!1;else try{$(xe,b,"req"+te+"_")}catch(ze){a&&a(xe)}}if(N){a=b.join("&");break e}}}return s=s.i.splice(0,r),e.D=s,a}function el(s){s.g||s.u||(s.Z=1,ut(s.Ia,s),s.A=0)}function As(s){return!(s.g||s.u||3<=s.A||(s.Z++,s.u=Ir($e(s.Ia,s),zs(s,s.A)),s.A++,0))}function $i(s){null!=s.B&&(ie.clearTimeout(s.B),s.B=null)}function fo(s){s.g=new ft(s,s.j,"rpc",s.Z),null===s.o&&(s.g.H=s.s),s.g.N=0;var e=Hs(s.sa);Zr(e,"RID","rpc"),Zr(e,"SID",s.I),Zr(e,"CI",s.L?"0":"1"),Zr(e,"AID",s.T),Zr(e,"TYPE","xmlhttp"),Ji(s,e),s.o&&s.s&&io(e,s.o,s.s),s.J&&s.g.setTimeout(s.J);var r=s.g;s=s.ka,r.K=1,r.v=no(Hs(e)),r.s=null,r.P=!0,qi(r,s)}function gs(s){null!=s.v&&(ie.clearTimeout(s.v),s.v=null)}function bo(s,e){var r=null;if(s.g==e){gs(s),$i(s),s.g=null;var a=2}else{if(!K(s.h,e))return;r=e.D,Ue(s.h,e),a=1}if(0!=s.G)if(s.pa=e.Y,e.i)if(1==a){r=e.s?e.s.length:0,e=Date.now()-e.F;var h=s.C;rn(a=Yr(),new yi(a,r,e,h)),so(s)}else el(s);else if(3==(h=e.o)||0==h&&0<s.pa||!(1==a&&function(s,e){return!(le(s.h)>=s.h.j-(s.m?1:0)||(s.m?(s.i=e.D.concat(s.i),0):1==s.G||2==s.G||s.C>=(s.Za?0:s.$a)||(s.m=Ir($e(s.Ja,s,e),zs(s,s.C)),s.C++,0)))}(s,e)||2==a&&As(s)))switch(r&&0<r.length&&(e=s.h,e.i=e.i.concat(r)),h){case 1:Lo(s,5);break;case 4:Lo(s,10);break;case 3:Lo(s,6);break;default:Lo(s,2)}}function zs(s,e){let r=s.Xa+Math.floor(Math.random()*s.bb);return s.l||(r*=2),r*e}function Lo(s,e){if(s.j.info("Error code "+e),2==e){var r=null;s.l&&(r=null);var a=$e(s.kb,s);r||(r=new Ds("//www.google.com/images/cleardot.gif"),ie.location&&"http"==ie.location.protocol||fs(r,"https"),no(r)),function(s,e){const r=new yr;if(ie.Image){const a=new Image;a.onload=Fe(ue,r,a,"TestLoadImage: loaded",!0,e),a.onerror=Fe(ue,r,a,"TestLoadImage: error",!1,e),a.onabort=Fe(ue,r,a,"TestLoadImage: abort",!1,e),a.ontimeout=Fe(ue,r,a,"TestLoadImage: timeout",!1,e),ie.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=s}else e(!1)}(r.toString(),a)}else $r(2);s.G=0,s.l&&s.l.va(e),ia(s),Ol(s)}function ia(s){if(s.G=0,s.la=[],s.l){const e=wt(s.h);(0!=e.length||0!=s.i.length)&&(pt(s.la,e),pt(s.la,s.i),s.h.i.length=0,rt(s.i),s.i.length=0),s.l.ua()}}function Vo(s,e,r){var a=r instanceof Ds?Hs(r):new Ds(r,void 0);if(""!=a.g)e&&(a.g=e+"."+a.g),Ws(a,a.m);else{var h=ie.location;a=h.protocol,e=e?e+"."+h.hostname:h.hostname,h=+h.port;var m=new Ds(null,void 0);a&&fs(m,a),e&&(m.g=e),h&&Ws(m,h),r&&(m.l=r),a=m}return e=s.za,(r=s.D)&&e&&Zr(a,r,e),Zr(a,"VER",s.ma),Ji(s,a),a}function oo(s,e,r){if(e&&!s.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new jr(r&&s.Da&&!s.ra?new ot({jb:!0}):s.ra)).Ka(s.H),e}function qs(){}function sa(){if(Ke&&!(10<=Number(Wn)))throw Error("Environmental error: no available transport.")}function Di(s,e){cn.call(this),this.g=new Fs(e),this.l=s,this.h=e&&e.messageUrlParams||null,s=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.s=s,s=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(s?s["X-WebChannel-Content-Type"]=e.messageContentType:s={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(s?s["X-WebChannel-Client-Profile"]=e.ya:s={"X-WebChannel-Client-Profile":e.ya}),this.g.S=s,(s=e&&e.Yb)&&!lt(s)&&(this.g.o=s),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!lt(e)&&(this.g.D=e,null!==(s=this.h)&&e in s&&e in(s=this.h)&&delete s[e]),this.j=new Vs(this)}function ao(s){We.call(this);var e=s.__sm__;if(e){e:{for(const r in e){s=r;break e}s=void 0}(this.i=s)&&(s=this.i,e=null!==e&&s in e?e[s]:void 0),this.data=e}else this.data=s}function _a(){Ge.call(this),this.status=1}function Vs(s){this.g=s}(re=jr.prototype).Ka=function(s){this.L=s},re.da=function(s,e,r,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+s);e=e?e.toUpperCase():"GET",this.H=s,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():_t.g(),this.C=function(s){return s.h||(s.h=s.i())}(this.u?this.u:_t),this.g.onreadystatechange=$e(this.Ha,this);try{this.F=!0,this.g.open(e,String(s),!0),this.F=!1}catch(m){return void Ja(this,m)}if(s=r||"",r=new Map(this.headers),a)if(Object.getPrototypeOf(a)===Object.prototype)for(var h in a)r.set(h,a[h]);else{if("function"!=typeof a.keys||"function"!=typeof a.get)throw Error("Unknown input type for opt_headers: "+String(a));for(const m of a.keys())r.set(m,a.get(m))}a=Array.from(r.keys()).find(m=>"content-type"==m.toLowerCase()),h=ie.FormData&&s instanceof ie.FormData,!(0<=I(ko,e))||a||h||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[m,b]of r)this.g.setRequestHeader(m,b);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Yt(this),0<this.B&&((this.K=function(s){return Ke&&Gr()&&"number"==typeof s.timeout&&void 0!==s.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$e(this.qa,this)):this.A=$t(this.qa,this.B,this)),this.v=!0,this.g.send(s),this.v=!1}catch(m){Ja(this,m)}},re.qa=function(){void 0!==Te&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,rn(this,"timeout"),this.abort(8))},re.abort=function(s){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=s||7,rn(this,"complete"),rn(this,"abort"),Eo(this))},re.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Eo(this,!0)),jr.X.M.call(this)},re.Ha=function(){this.s||(this.F||this.v||this.l?Ra(this):this.fb())},re.fb=function(){Ra(this)},re.aa=function(){try{return 2<_r(this)?this.g.status:-1}catch(s){return-1}},re.fa=function(){try{return this.g?this.g.responseText:""}catch(s){return""}},re.Sa=function(s){if(this.g){var e=this.g.responseText;return s&&0==e.indexOf(s)&&(e=e.substring(s.length)),si(e)}},re.Ea=function(){return this.m},re.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(re=Fs.prototype).ma=8,re.G=1,re.Ja=function(s){if(this.m)if(this.m=null,1==this.G){if(!s){this.U=Math.floor(1e5*Math.random()),s=this.U++;const h=new ft(this,this.j,s,void 0);let m=this.s;if(this.S&&(m?(m=Fr(m),mi(m,this.S)):m=this.S),null!==this.o||this.N||(h.H=m,m=null),this.O)e:{for(var e=0,r=0;r<this.i.length;r++){var a=this.i[r];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(e+=a)){e=r;break e}if(4096===e||r===this.i.length-1){e=r+1;break e}}e=1e3}else e=1e3;e=Ls(this,h,e),Zr(r=Hs(this.F),"RID",s),Zr(r,"CVER",22),this.D&&Zr(r,"X-HTTP-Session-Id",this.D),Ji(this,r),m&&(this.N?e="headers="+encodeURIComponent(String(Hi(m)))+"&"+e:this.o&&io(r,this.o,m)),be(this.h,h),this.Ya&&Zr(r,"TYPE","init"),this.O?(Zr(r,"$req",e),Zr(r,"SID","null"),h.Z=!0,Cr(h,r,null)):Cr(h,r,e),this.G=2}}else 3==this.G&&(s?Io(this,s):0==this.i.length||G(this.h)||Io(this))},re.Ia=function(){if(this.u=null,fo(this),this.$&&!(this.K||null==this.g||0>=this.P)){var s=2*this.P;this.j.info("BP detection timer enabled: "+s),this.B=Ir($e(this.eb,this),s)}},re.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,$r(10),ra(this),fo(this))},re.cb=function(){null!=this.v&&(this.v=null,ra(this),As(this),$r(19))},re.kb=function(s){s?(this.j.info("Successfully pinged google.com"),$r(2)):(this.j.info("Failed to ping google.com"),$r(1))},(re=qs.prototype).xa=function(){},re.wa=function(){},re.va=function(){},re.ua=function(){},re.Ra=function(){},sa.prototype.g=function(s,e){return new Di(s,e)},Me(Di,cn),Di.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var s=this.g,e=this.l,r=this.h||void 0;$r(0),s.V=e,s.ia=r||{},s.L=s.Y,s.F=Vo(s,null,s.V),so(s)},Di.prototype.close=function(){ho(this.g)},Di.prototype.u=function(s){var e=this.g;if("string"==typeof s){var r={};r.__data__=s,s=r}else this.v&&((r={}).__data__=Be(s),s=r);e.i.push(new class{constructor(s,e){this.h=s,this.g=e}}(e.ab++,s)),3==e.G&&so(e)},Di.prototype.M=function(){this.g.l=null,delete this.j,ho(this.g),delete this.g,Di.X.M.call(this)},Me(ao,We),Me(_a,Ge),Me(Vs,qs),Vs.prototype.xa=function(){rn(this.g,"a")},Vs.prototype.wa=function(s){rn(this.g,new ao(s))},Vs.prototype.va=function(s){rn(this.g,new _a(s))},Vs.prototype.ua=function(){rn(this.g,"b")},sa.prototype.createWebChannel=sa.prototype.g,Di.prototype.send=Di.prototype.u,Di.prototype.open=Di.prototype.m,Di.prototype.close=Di.prototype.close,Ns.NO_ERROR=0,Ns.TIMEOUT=8,Ns.HTTP_ERROR=6,nt.COMPLETE="complete",ce.EventType=Ie,Ie.OPEN="a",Ie.CLOSE="b",Ie.ERROR="c",Ie.MESSAGE="d",cn.prototype.listen=cn.prototype.N,jr.prototype.listenOnce=jr.prototype.O,jr.prototype.getLastError=jr.prototype.Oa,jr.prototype.getLastErrorCode=jr.prototype.Ea,jr.prototype.getStatus=jr.prototype.aa,jr.prototype.getResponseJson=jr.prototype.Sa,jr.prototype.getResponseText=jr.prototype.fa,jr.prototype.send=jr.prototype.da,jr.prototype.setWithCredentials=jr.prototype.Ka;var tl=ve.createWebChannelTransport=function(){return new sa},nl=ve.getStatEventTarget=function(){return Yr()},Bo=ve.ErrorCode=Ns,w=ve.EventType=nt,P=ve.Event=Vr,D=ve.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},q=ve.FetchXmlHttpFactory=ot,he=ve.WebChannel=ce,it=ve.XhrIo=jr;const Ht="@firebase/firestore";class un{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");let hr="9.12.1";const xn=new oe.Yd("@firebase/firestore");function Rr(){return xn.logLevel}function Ti(s){xn.setLogLevel(s)}function kt(s,...e){if(xn.logLevel<=oe.in.DEBUG){const r=e.map(lo);xn.debug(`Firestore (${hr}): ${s}`,...r)}}function Jn(s,...e){if(xn.logLevel<=oe.in.ERROR){const r=e.map(lo);xn.error(`Firestore (${hr}): ${s}`,...r)}}function es(s,...e){if(xn.logLevel<=oe.in.WARN){const r=e.map(lo);xn.warn(`Firestore (${hr}): ${s}`,...r)}}function lo(s){if("string"==typeof s)return s;try{return JSON.stringify(s)}catch(r){return s}}function Mn(s="Unexpected state"){const e=`FIRESTORE (${hr}) INTERNAL ASSERTION FAILED: `+s;throw Jn(e),new Error(e)}function Fn(s,e){s||Mn()}function oi(s,e){s||Mn()}function Jt(s,e){return s}const et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class zt extends ae.ZR{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class mr{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}class Zl{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ld{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(un.UNAUTHENTICATED))}shutdown(){}}class Bs{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class Nl{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){var a=this;let h=this.i;const m=te=>this.i!==h?(h=this.i,r(te)):Promise.resolve();let b=new mr;this.o=()=>{this.i++,this.currentUser=this.u(),b.resolve(),b=new mr,e.enqueueRetryable(()=>m(this.currentUser))};const N=()=>{const te=b;e.enqueueRetryable((0,E.Z)(function*(){yield te.promise,yield m(a.currentUser)}))},Z=te=>{kt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=te,this.auth.addAuthTokenListener(this.o),N()};this.t.onInit(te=>Z(te)),setTimeout(()=>{if(!this.auth){const te=this.t.getImmediate({optional:!0});te?Z(te):(kt("FirebaseAuthCredentialsProvider","Auth not yet detected"),b.resolve(),b=new mr)}},0),N()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(a=>this.i!==e?(kt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Fn("string"==typeof a.accessToken),new Zl(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Fn(null===e||"string"==typeof e),new un(e)}}class Ui{constructor(e,r,a,h){this.h=e,this.l=r,this.m=a,this.g=h,this.type="FirstParty",this.user=un.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Fn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Mr{constructor(e,r,a,h){this.h=e,this.l=r,this.m=a,this.g=h}getToken(){return Promise.resolve(new Ui(this.h,this.l,this.m,this.g))}start(e,r){e.enqueueRetryable(()=>r(un.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class as{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Uu{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,r){const a=m=>{null!=m.error&&kt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const b=m.token!==this.A;return this.A=m.token,kt("FirebaseAppCheckTokenProvider",`Received ${b?"new":"existing"} token.`),b?r(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable(()=>a(m))};const h=m=>{kt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.appCheck.addTokenListener(this.o)};this.T.onInit(m=>h(m)),setTimeout(()=>{if(!this.appCheck){const m=this.T.getImmediate({optional:!0});m?h(m):kt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Fn("string"==typeof r.token),this.A=r.token,new as(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function $s(s){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(s);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(r);else for(let a=0;a<s;a++)r[a]=Math.floor(256*Math.random());return r}class Ma{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let a="";for(;a.length<20;){const h=$s(40);for(let m=0;m<h.length;++m)a.length<20&&h[m]<r&&(a+=e.charAt(h[m]%e.length))}return a}}function ur(s,e){return s<e?-1:s>e?1:0}function qo(s,e,r){return s.length===e.length&&s.every((a,h)=>r(a,e[h]))}function po(s){return s+"\0"}class pi{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new zt(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new zt(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new zt(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new zt(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pi.fromMillis(Date.now())}static fromDate(e){return pi.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),a=Math.floor(1e6*(e-1e3*r));return new pi(r,a)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ur(this.nanoseconds,e.nanoseconds):ur(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ar{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ar(e)}static min(){return new ar(new pi(0,0))}static max(){return new ar(new pi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class oa{constructor(e,r,a){void 0===r?r=0:r>e.length&&Mn(),void 0===a?a=e.length-r:a>e.length-r&&Mn(),this.segments=e,this.offset=r,this.len=a}get length(){return this.len}isEqual(e){return 0===oa.comparator(this,e)}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof oa?e.forEach(a=>{r.push(a)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,a=this.limit();r<a;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const a=Math.min(e.length,r.length);for(let h=0;h<a;h++){const m=e.get(h),b=r.get(h);if(m<b)return-1;if(m>b)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Jr extends oa{construct(e,r,a){return new Jr(e,r,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const r=[];for(const a of e){if(a.indexOf("//")>=0)throw new zt(et.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);r.push(...a.split("/").filter(h=>h.length>0))}return new Jr(r)}static emptyPath(){return new Jr([])}}const ju=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gi extends oa{construct(e,r,a){return new gi(e,r,a)}static isValidIdentifier(e){return ju.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new gi(["__name__"])}static fromServerFormat(e){const r=[];let a="",h=0;const m=()=>{if(0===a.length)throw new zt(et.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(a),a=""};let b=!1;for(;h<e.length;){const N=e[h];if("\\"===N){if(h+1===e.length)throw new zt(et.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const Z=e[h+1];if("\\"!==Z&&"."!==Z&&"`"!==Z)throw new zt(et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=Z,h+=2}else"`"===N?(b=!b,h++):"."!==N||b?(a+=N,h++):(m(),h++)}if(m(),b)throw new zt(et.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gi(r)}static emptyPath(){return new gi([])}}class bn{constructor(e){this.path=e}static fromPath(e){return new bn(Jr.fromString(e))}static fromName(e){return new bn(Jr.fromString(e).popFirst(5))}static empty(){return new bn(Jr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,r){return Jr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new bn(new Jr(e.slice()))}}class Oa{constructor(e,r,a,h){this.indexId=e,this.collectionGroup=r,this.fields=a,this.indexState=h}}function aa(s){return s.fields.find(e=>2===e.kind)}function ls(s){return s.fields.filter(e=>2!==e.kind)}Oa.UNKNOWN_ID=-1;class la{constructor(e,r){this.fieldPath=e,this.kind=r}}class Na{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Na(0,A.min())}}function go(s,e){const r=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,h=ar.fromTimestamp(1e9===a?new pi(r+1,0):new pi(r,a));return new A(h,bn.empty(),e)}function F(s){return new A(s.readTime,s.key,-1)}class A{constructor(e,r,a){this.readTime=e,this.documentKey=r,this.largestBatchId=a}static min(){return new A(ar.min(),bn.empty(),-1)}static max(){return new A(ar.max(),bn.empty(),-1)}}function S(s,e){let r=s.readTime.compareTo(e.readTime);return 0!==r?r:(r=bn.comparator(s.documentKey,e.documentKey),0!==r?r:ur(s.largestBatchId,e.largestBatchId))}const U="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class X{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ge(s){return Le.apply(this,arguments)}function Le(){return Le=(0,E.Z)(function*(s){if(s.code!==et.FAILED_PRECONDITION||s.message!==U)throw s;kt("LocalStore","Unexpectedly lost primary lease")}),Le.apply(this,arguments)}class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Mn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new pe((a,h)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(a,h)},this.catchCallback=m=>{this.wrapFailure(r,m).next(a,h)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof pe?r:pe.resolve(r)}catch(r){return pe.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):pe.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):pe.reject(r)}static resolve(e){return new pe((r,a)=>{r(e)})}static reject(e){return new pe((r,a)=>{a(e)})}static waitFor(e){return new pe((r,a)=>{let h=0,m=0,b=!1;e.forEach(N=>{++h,N.next(()=>{++m,b&&m===h&&r()},Z=>a(Z))}),b=!0,m===h&&r()})}static or(e){let r=pe.resolve(!1);for(const a of e)r=r.next(h=>h?pe.resolve(h):a());return r}static forEach(e,r){const a=[];return e.forEach((h,m)=>{a.push(r.call(this,h,m))}),this.waitFor(a)}static mapArray(e,r){return new pe((a,h)=>{const m=e.length,b=new Array(m);let N=0;for(let Z=0;Z<m;Z++){const te=Z;r(e[te]).next(xe=>{b[te]=xe,++N,N===m&&a(b)},xe=>h(xe))}})}static doWhile(e,r){return new pe((a,h)=>{const m=()=>{!0===e()?r().next(()=>{m()},h):a()};m()})}}class Pt{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.P=new mr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{r.error?this.P.reject(new $n(e,r.error)):this.P.resolve()},this.transaction.onerror=a=>{const h=Ts(a.target.error);this.P.reject(new $n(e,h))}}static open(e,r,a,h){try{return new Pt(r,e.transaction(h,a))}catch(m){throw new $n(r,m)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(kt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const r=this.transaction.objectStore(e);return new vr(r)}}class Cn{constructor(e,r,a){this.name=e,this.version=r,this.S=a,12.2===Cn.D((0,ae.z$)())&&Jn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return kt("SimpleDb","Removing database:",e),ms(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,ae.hl)())return!1;if(Cn.N())return!0;const e=(0,ae.z$)(),r=Cn.D(e),a=0<r&&r<10,h=Cn.k(e),m=0<h&&h<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||a||m)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,r){return e.store(r)}static D(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(a)}static k(e){const r=e.match(/Android ([\d.]+)/i),a=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(a)}F(e){var r=this;return(0,E.Z)(function*(){return r.db||(kt("SimpleDb","Opening database:",r.name),r.db=yield new Promise((a,h)=>{const m=indexedDB.open(r.name,r.version);m.onsuccess=b=>{a(b.target.result)},m.onblocked=()=>{h(new $n(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},m.onerror=b=>{const N=b.target.error;h("VersionError"===N.name?new zt(et.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===N.name?new zt(et.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+N):new $n(e,N))},m.onupgradeneeded=b=>{kt("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',b.oldVersion),r.S.$(b.target.result,m.transaction,b.oldVersion,r.version).next(()=>{kt("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.B&&(r.db.onversionchange=a=>r.B(a)),r.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=r=>e(r))}runTransaction(e,r,a,h){var m=this;return(0,E.Z)(function*(){const b="readonly"===r;let N=0;for(;;){++N;try{m.db=yield m.F(e);const Z=Pt.open(m.db,e,b?"readonly":"readwrite",a),te=h(Z).next(xe=>(Z.V(),xe)).catch(xe=>(Z.abort(xe),pe.reject(xe))).toPromise();return te.catch(()=>{}),yield Z.v,te}catch(Z){const te=Z,xe="FirebaseError"!==te.name&&N<3;if(kt("SimpleDb","Transaction failed with error:",te.message,"Retrying:",xe),m.close(),!xe)return Promise.reject(te)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Lr{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return ms(this.U.delete())}}class $n extends zt{constructor(e,r){super(et.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Br(s){return"IndexedDbTransactionError"===s.name}class vr{constructor(e){this.store=e}put(e,r){let a;return void 0!==r?(kt("SimpleDb","PUT",this.store.name,e,r),a=this.store.put(r,e)):(kt("SimpleDb","PUT",this.store.name,"<auto-key>",e),a=this.store.put(e)),ms(a)}add(e){return kt("SimpleDb","ADD",this.store.name,e,e),ms(this.store.add(e))}get(e){return ms(this.store.get(e)).next(r=>(void 0===r&&(r=null),kt("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return kt("SimpleDb","DELETE",this.store.name,e),ms(this.store.delete(e))}count(){return kt("SimpleDb","COUNT",this.store.name),ms(this.store.count())}W(e,r){const a=this.options(e,r);if(a.index||"function"!=typeof this.store.getAll){const h=this.cursor(a),m=[];return this.H(h,(b,N)=>{m.push(N)}).next(()=>m)}{const h=this.store.getAll(a.range);return new pe((m,b)=>{h.onerror=N=>{b(N.target.error)},h.onsuccess=N=>{m(N.target.result)}})}}J(e,r){const a=this.store.getAll(e,null===r?void 0:r);return new pe((h,m)=>{a.onerror=b=>{m(b.target.error)},a.onsuccess=b=>{h(b.target.result)}})}Y(e,r){kt("SimpleDb","DELETE ALL",this.store.name);const a=this.options(e,r);a.X=!1;const h=this.cursor(a);return this.H(h,(m,b,N)=>N.delete())}Z(e,r){let a;r?a=e:(a={},r=e);const h=this.cursor(a);return this.H(h,r)}tt(e){const r=this.cursor({});return new pe((a,h)=>{r.onerror=m=>{const b=Ts(m.target.error);h(b)},r.onsuccess=m=>{const b=m.target.result;b?e(b.primaryKey,b.value).next(N=>{N?b.continue():a()}):a()}})}H(e,r){const a=[];return new pe((h,m)=>{e.onerror=b=>{m(b.target.error)},e.onsuccess=b=>{const N=b.target.result;if(!N)return void h();const Z=new Lr(N),te=r(N.primaryKey,N.value,Z);if(te instanceof pe){const xe=te.catch(ze=>(Z.done(),pe.reject(ze)));a.push(xe)}Z.isDone?h():null===Z.G?N.continue():N.continue(Z.G)}}).next(()=>pe.waitFor(a))}options(e,r){let a;return void 0!==e&&("string"==typeof e?a=e:r=e),{index:a,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const a=this.store.index(e.index);return e.X?a.openKeyCursor(e.range,r):a.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function ms(s){return new pe((e,r)=>{s.onsuccess=a=>{e(a.target.result)},s.onerror=a=>{const h=Ts(a.target.error);r(h)}})}let mo=!1;function Ts(s){const e=Cn.D((0,ae.z$)());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(r)>=0){const a=new zt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return mo||(mo=!0,setTimeout(()=>{throw a},0)),a}}return s}class Qr{constructor(e,r){this.asyncQueue=e,this.et=r,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var r=this;kt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,E.Z)(function*(){r.task=null;try{kt("IndexBackiller",`Documents written: ${yield r.et.st()}`)}catch(a){Br(a)?kt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",a):yield ge(a)}yield r.nt(6e4)}))}}class va{constructor(e,r){this.localStore=e,this.persistence=r}st(e=50){var r=this;return(0,E.Z)(function*(){return r.persistence.runTransaction("Backfill Indexes","readwrite-primary",a=>r.it(a,e))})()}it(e,r){const a=new Set;let h=r,m=!0;return pe.doWhile(()=>!0===m&&h>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(b=>{if(null!==b&&!a.has(b))return kt("IndexBackiller",`Processing collection: ${b}`),this.rt(e,b,h).next(N=>{h-=N,a.add(b)});m=!1})).next(()=>r-h)}rt(e,r,a){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(h=>this.localStore.localDocuments.getNextDocuments(e,r,h,a).next(m=>{const b=m.changes;return this.localStore.indexManager.updateIndexEntries(e,b).next(()=>this.ot(h,m)).next(N=>(kt("IndexBackiller",`Updating offset: ${N}`),this.localStore.indexManager.updateCollectionGroup(e,r,N))).next(()=>b.size)}))}ot(e,r){let a=e;return r.changes.forEach((h,m)=>{const b=F(m);S(b,a)>0&&(a=b)}),new A(a.readTime,a.documentKey,Math.max(r.batchId,e.largestBatchId))}}class us{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=a=>this.ut(a),this.ct=a=>r.writeSequenceNumber(a))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Pa(s){let e=0;for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&e++;return e}function Yo(s,e){for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&e(r,s[r])}function Si(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}us.at=-1;class Ai{constructor(e,r){this.comparator=e,this.root=r||er.EMPTY}insert(e,r){return new Ai(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,er.BLACK,null,null))}remove(e){return new Ai(this.comparator,this.root.remove(e,this.comparator).copy(null,null,er.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(0===a)return r.value;a<0?r=r.left:a>0&&(r=r.right)}return null}indexOf(e){let r=0,a=this.root;for(;!a.isEmpty();){const h=this.comparator(e,a.key);if(0===h)return r+a.left.size;h<0?a=a.left:(r+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,a)=>(e(r,a),!1))}toString(){const e=[];return this.inorderTraversal((r,a)=>(e.push(`${r}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ka(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ka(this.root,e,this.comparator,!1)}getReverseIterator(){return new ka(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ka(this.root,e,this.comparator,!0)}}class ka{constructor(e,r,a,h){this.isReverse=h,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=r?a(e.key,r):1,r&&h&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(0===m){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class er{constructor(e,r,a,h,m){this.key=e,this.value=r,this.color=null!=a?a:er.RED,this.left=null!=h?h:er.EMPTY,this.right=null!=m?m:er.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,a,h,m){return new er(null!=e?e:this.key,null!=r?r:this.value,null!=a?a:this.color,null!=h?h:this.left,null!=m?m:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,a){let h=this;const m=a(e,h.key);return h=m<0?h.copy(null,null,null,h.left.insert(e,r,a),null):0===m?h.copy(null,r,null,null,null):h.copy(null,null,null,null,h.right.insert(e,r,a)),h.fixUp()}removeMin(){if(this.left.isEmpty())return er.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let a,h=this;if(r(e,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(e,r),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),0===r(e,h.key)){if(h.right.isEmpty())return er.EMPTY;a=h.right.min(),h=h.copy(a.key,a.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(e,r))}return h.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,er.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,er.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Mn();const e=this.left.check();if(e!==this.right.check())throw Mn();return e+(this.isRed()?0:1)}}er.EMPTY=null,er.RED=!0,er.BLACK=!1,er.EMPTY=new class{constructor(){this.size=0}get key(){throw Mn()}get value(){throw Mn()}get color(){throw Mn()}get left(){throw Mn()}get right(){throw Mn()}copy(s,e,r,a,h){return this}insert(s,e,r){return new er(s,e)}remove(s,e){return this}isEmpty(){return!0}inorderTraversal(s){return!1}reverseTraversal(s){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Wi{constructor(e){this.comparator=e,this.data=new Ai(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,a)=>(e(r),!1))}forEachInRange(e,r){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const h=a.getNext();if(this.comparator(h.key,e[1])>=0)return;r(h.key)}}forEachWhile(e,r){let a;for(a=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new _u(this.data.getIterator())}getIteratorFrom(e){return new _u(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(a=>{r=r.add(a)}),r}isEqual(e){if(!(e instanceof Wi)||this.size!==e.size)return!1;const r=this.data.getIterator(),a=e.data.getIterator();for(;r.hasNext();){const h=r.getNext().key,m=a.getNext().key;if(0!==this.comparator(h,m))return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Wi(this.comparator);return r.data=e,r}}class _u{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function vc(s){return s.hasNext()?s.getNext():void 0}class ni{constructor(e){this.fields=e,e.sort(gi.comparator)}static empty(){return new ni([])}unionWith(e){let r=new Wi(gi.comparator);for(const a of this.fields)r=r.add(a);for(const a of e)r=r.add(a);return new ni(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return qo(this.fields,e.fields,(r,a)=>r.isEqual(a))}}function Ec(){return"undefined"!=typeof atob}class Ys{constructor(e){this.binaryString=e}static fromBase64String(e){const r=atob(e);return new Ys(r)}static fromUint8Array(e){const r=function(a){let h="";for(let m=0;m<a.length;++m)h+=String.fromCharCode(a[m]);return h}(e);return new Ys(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let a=0;a<e.length;a++)r[a]=e.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ur(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ys.EMPTY_BYTE_STRING=new Ys("");const ud=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Co(s){if(Fn(!!s),"string"==typeof s){let e=0;const r=ud.exec(s);if(Fn(!!r),r[1]){let h=r[1];h=(h+"000000000").substr(0,9),e=Number(h)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:xi(s.seconds),nanos:xi(s.nanos)}}function xi(s){return"number"==typeof s?s:"string"==typeof s?Number(s):0}function vl(s){return"string"==typeof s?Ys.fromBase64String(s):Ys.fromUint8Array(s)}function ts(s){var e,r;return"server_timestamp"===(null===(r=((null===(e=null==s?void 0:s.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function Xl(s){const e=s.mapValue.fields.__previous_value__;return ts(e)?Xl(e):e}function rl(s){const e=Co(s.mapValue.fields.__local_write_time__.timestampValue);return new pi(e.seconds,e.nanos)}class Jl{constructor(e,r,a,h,m,b,N,Z){this.databaseId=e,this.appId=r,this.persistenceKey=a,this.host=h,this.ssl=m,this.forceLongPolling=b,this.autoDetectLongPolling=N,this.useFetchStreams=Z}}class Ea{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Ea("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ea&&e.projectId===this.projectId&&e.database===this.database}}function cs(s){return null==s}function xs(s){return 0===s&&1/s==-1/0}function Ko(s){return"number"==typeof s&&Number.isInteger(s)&&!xs(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const yo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},wo={nullValue:"NULL_VALUE"};function Ia(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?ts(s)?4:tu(s)?9007199254740991:10:Mn()}function il(s,e){if(s===e)return!0;const r=Ia(s);if(r!==Ia(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return rl(s).isEqual(rl(e));case 3:return function(a,h){if("string"==typeof a.timestampValue&&"string"==typeof h.timestampValue&&a.timestampValue.length===h.timestampValue.length)return a.timestampValue===h.timestampValue;const m=Co(a.timestampValue),b=Co(h.timestampValue);return m.seconds===b.seconds&&m.nanos===b.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return h=e,vl(s.bytesValue).isEqual(vl(h.bytesValue));case 7:return s.referenceValue===e.referenceValue;case 8:return function(a,h){return xi(a.geoPointValue.latitude)===xi(h.geoPointValue.latitude)&&xi(a.geoPointValue.longitude)===xi(h.geoPointValue.longitude)}(s,e);case 2:return function(a,h){if("integerValue"in a&&"integerValue"in h)return xi(a.integerValue)===xi(h.integerValue);if("doubleValue"in a&&"doubleValue"in h){const m=xi(a.doubleValue),b=xi(h.doubleValue);return m===b?xs(m)===xs(b):isNaN(m)&&isNaN(b)}return!1}(s,e);case 9:return qo(s.arrayValue.values||[],e.arrayValue.values||[],il);case 10:return function(a,h){const m=a.mapValue.fields||{},b=h.mapValue.fields||{};if(Pa(m)!==Pa(b))return!1;for(const N in m)if(m.hasOwnProperty(N)&&(void 0===b[N]||!il(m[N],b[N])))return!1;return!0}(s,e);default:return Mn()}var h}function Pl(s,e){return void 0!==(s.values||[]).find(r=>il(r,e))}function El(s,e){if(s===e)return 0;const r=Ia(s),a=Ia(e);if(r!==a)return ur(r,a);switch(r){case 0:case 9007199254740991:return 0;case 1:return ur(s.booleanValue,e.booleanValue);case 2:return function(h,m){const b=xi(h.integerValue||h.doubleValue),N=xi(m.integerValue||m.doubleValue);return b<N?-1:b>N?1:b===N?0:isNaN(b)?isNaN(N)?0:-1:1}(s,e);case 3:return Kd(s.timestampValue,e.timestampValue);case 4:return Kd(rl(s),rl(e));case 5:return ur(s.stringValue,e.stringValue);case 6:return function(h,m){const b=vl(h),N=vl(m);return b.compareTo(N)}(s.bytesValue,e.bytesValue);case 7:return function(h,m){const b=h.split("/"),N=m.split("/");for(let Z=0;Z<b.length&&Z<N.length;Z++){const te=ur(b[Z],N[Z]);if(0!==te)return te}return ur(b.length,N.length)}(s.referenceValue,e.referenceValue);case 8:return function(h,m){const b=ur(xi(h.latitude),xi(m.latitude));return 0!==b?b:ur(xi(h.longitude),xi(m.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return function(h,m){const b=h.values||[],N=m.values||[];for(let Z=0;Z<b.length&&Z<N.length;++Z){const te=El(b[Z],N[Z]);if(te)return te}return ur(b.length,N.length)}(s.arrayValue,e.arrayValue);case 10:return function(h,m){if(h===yo.mapValue&&m===yo.mapValue)return 0;if(h===yo.mapValue)return 1;if(m===yo.mapValue)return-1;const b=h.fields||{},N=Object.keys(b),Z=m.fields||{},te=Object.keys(Z);N.sort(),te.sort();for(let xe=0;xe<N.length&&xe<te.length;++xe){const ze=ur(N[xe],te[xe]);if(0!==ze)return ze;const Et=El(b[N[xe]],Z[te[xe]]);if(0!==Et)return Et}return ur(N.length,te.length)}(s.mapValue,e.mapValue);default:throw Mn()}}function Kd(s,e){if("string"==typeof s&&"string"==typeof e&&s.length===e.length)return ur(s,e);const r=Co(s),a=Co(e),h=ur(r.seconds,a.seconds);return 0!==h?h:ur(r.nanos,a.nanos)}function ua(s){return Ks(s)}function Ks(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(a){const h=Co(a);return`time(${h.seconds},${h.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?vl(s.bytesValue).toBase64():"referenceValue"in s?bn.fromName(s.referenceValue).toString():"geoPointValue"in s?`geo(${(e=s.geoPointValue).latitude},${e.longitude})`:"arrayValue"in s?function(a){let h="[",m=!0;for(const b of a.values||[])m?m=!1:h+=",",h+=Ks(b);return h+"]"}(s.arrayValue):"mapValue"in s?function(a){const h=Object.keys(a.fields||{}).sort();let m="{",b=!0;for(const N of h)b?b=!1:m+=",",m+=`${N}:${Ks(a.fields[N])}`;return m+"}"}(s.mapValue):Mn();var e}function ba(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Fa(s){return!!s&&"integerValue"in s}function ca(s){return!!s&&"arrayValue"in s}function eu(s){return!!s&&"nullValue"in s}function Ca(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Hu(s){return!!s&&"mapValue"in s}function sl(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&"object"==typeof s.timestampValue)return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return Yo(s.mapValue.fields,(r,a)=>e.mapValue.fields[r]=sl(a)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(s.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=sl(s.arrayValue.values[r]);return e}return Object.assign({},s)}function tu(s){return"__max__"===(((s.mapValue||{}).fields||{}).__type__||{}).stringValue}function nu(s){return"nullValue"in s?wo:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?ba(Ea.empty(),bn.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?{mapValue:{}}:Mn()}function La(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?ba(Ea.empty(),bn.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?{mapValue:{}}:"mapValue"in s?yo:Mn()}function Il(s,e){const r=El(s.value,e.value);return 0!==r?r:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function L(s,e){const r=El(s.value,e.value);return 0!==r?r:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}class Y{constructor(e){this.value=e}static empty(){return new Y({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let a=0;a<e.length-1;++a)if(r=(r.mapValue.fields||{})[e.get(a)],!Hu(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=sl(r)}setAll(e){let r=gi.emptyPath(),a={},h=[];e.forEach((b,N)=>{if(!r.isImmediateParentOf(N)){const Z=this.getFieldsMap(r);this.applyChanges(Z,a,h),a={},h=[],r=N.popLast()}b?a[N.lastSegment()]=sl(b):h.push(N.lastSegment())});const m=this.getFieldsMap(r);this.applyChanges(m,a,h)}delete(e){const r=this.field(e.popLast());Hu(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return il(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let a=0;a<e.length;++a){let h=r.mapValue.fields[e.get(a)];Hu(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},r.mapValue.fields[e.get(a)]=h),r=h}return r.mapValue.fields}applyChanges(e,r,a){Yo(r,(h,m)=>e[h]=m);for(const h of a)delete e[h]}clone(){return new Y(sl(this.value))}}function fe(s){const e=[];return Yo(s.fields,(r,a)=>{const h=new gi([r]);if(Hu(a)){const m=fe(a.mapValue).fields;if(0===m.length)e.push(h);else for(const b of m)e.push(h.child(b))}else e.push(h)}),new ni(e)}class Pe{constructor(e,r,a,h,m,b){this.key=e,this.documentType=r,this.version=a,this.readTime=h,this.data=m,this.documentState=b}static newInvalidDocument(e){return new Pe(e,0,ar.min(),ar.min(),Y.empty(),0)}static newFoundDocument(e,r,a){return new Pe(e,1,r,ar.min(),a,0)}static newNoDocument(e,r){return new Pe(e,2,r,ar.min(),Y.empty(),0)}static newUnknownDocument(e,r){return new Pe(e,3,r,ar.min(),Y.empty(),2)}convertToFoundDocument(e,r){return this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Y.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Y.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ar.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Pe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pe(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class at{constructor(e,r=null,a=[],h=[],m=null,b=null,N=null){this.path=e,this.collectionGroup=r,this.orderBy=a,this.filters=h,this.limit=m,this.startAt=b,this.endAt=N,this.ht=null}}function Tt(s,e=null,r=[],a=[],h=null,m=null,b=null){return new at(s,e,r,a,h,m,b)}function en(s){const e=Jt(s);if(null===e.ht){let r=e.path.canonicalString();null!==e.collectionGroup&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(a=>{return(h=a).field.canonicalString()+h.op.toString()+ua(h.value);var h}).join(","),r+="|ob:",r+=e.orderBy.map(a=>{return(h=a).field.canonicalString()+h.dir;var h}).join(","),cs(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(a=>ua(a)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(a=>ua(a)).join(",")),e.ht=r}return e.ht}function nr(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let h=0;h<s.orderBy.length;h++)if(!Da(s.orderBy[h],e.orderBy[h]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let h=0;h<s.filters.length;h++)if((r=s.filters[h]).op!==(a=e.filters[h]).op||!r.field.isEqual(a.field)||!il(r.value,a.value))return!1;var r,a;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Ua(s.startAt,e.startAt)&&Ua(s.endAt,e.endAt)}function Ar(s){return bn.isDocumentKey(s.path)&&null===s.collectionGroup&&0===s.filters.length}function wr(s,e){return s.filters.filter(r=>r instanceof ui&&r.field.isEqual(e))}function rr(s,e,r){let a=wo,h=!0;for(const m of wr(s,e)){let b=wo,N=!0;switch(m.op){case"<":case"<=":b=nu(m.value);break;case"==":case"in":case">=":b=m.value;break;case">":b=m.value,N=!1;break;case"!=":case"not-in":b=wo}Il({value:a,inclusive:h},{value:b,inclusive:N})<0&&(a=b,h=N)}if(null!==r)for(let m=0;m<s.orderBy.length;++m)if(s.orderBy[m].field.isEqual(e)){const b=r.position[m];Il({value:a,inclusive:h},{value:b,inclusive:r.inclusive})<0&&(a=b,h=r.inclusive);break}return{value:a,inclusive:h}}function Pi(s,e,r){let a=yo,h=!0;for(const m of wr(s,e)){let b=yo,N=!0;switch(m.op){case">=":case">":b=La(m.value),N=!1;break;case"==":case"in":case"<=":b=m.value;break;case"<":b=m.value,N=!1;break;case"!=":case"not-in":b=yo}L({value:a,inclusive:h},{value:b,inclusive:N})>0&&(a=b,h=N)}if(null!==r)for(let m=0;m<s.orderBy.length;++m)if(s.orderBy[m].field.isEqual(e)){const b=r.position[m];L({value:a,inclusive:h},{value:b,inclusive:r.inclusive})>0&&(a=b,h=r.inclusive);break}return{value:a,inclusive:h}}class ui extends class{}{constructor(e,r,a){super(),this.field=e,this.op=r,this.value=a}static create(e,r,a){return e.isKeyField()?"in"===r||"not-in"===r?this.lt(e,r,a):new wi(e,r,a):"array-contains"===r?new wa(e,a):"in"===r?new Eu(e,a):"not-in"===r?new Va(e,a):"array-contains-any"===r?new ha(e,a):new ui(e,r,a)}static lt(e,r,a){return"in"===r?new Do(e,a):new vu(e,a)}matches(e){const r=e.data.field(this.field);return"!="===this.op?null!==r&&this.ft(El(r,this.value)):null!==r&&Ia(this.value)===Ia(r)&&this.ft(El(r,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Mn()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class wi extends ui{constructor(e,r,a){super(e,r,a),this.key=bn.fromName(a.referenceValue)}matches(e){const r=bn.comparator(e.key,this.key);return this.ft(r)}}class Do extends ui{constructor(e,r){super(e,"in",r),this.keys=da(0,r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class vu extends ui{constructor(e,r){super(e,"not-in",r),this.keys=da(0,r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function da(s,e){var r;return((null===(r=e.arrayValue)||void 0===r?void 0:r.values)||[]).map(a=>bn.fromName(a.referenceValue))}class wa extends ui{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return ca(r)&&Pl(r.arrayValue,this.value)}}class Eu extends ui{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return null!==r&&Pl(this.value.arrayValue,r)}}class Va extends ui{constructor(e,r){super(e,"not-in",r)}matches(e){if(Pl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return null!==r&&!Pl(this.value.arrayValue,r)}}class ha extends ui{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!ca(r)||!r.arrayValue.values)&&r.arrayValue.values.some(a=>Pl(this.value.arrayValue,a))}}class $o{constructor(e,r){this.position=e,this.inclusive=r}}class Ba{constructor(e,r="asc"){this.field=e,this.dir=r}}function Da(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}function $a(s,e,r){let a=0;for(let h=0;h<s.position.length;h++){const m=e[h],b=s.position[h];if(a=m.field.isKeyField()?bn.comparator(bn.fromName(b.referenceValue),r.key):El(b,r.data.field(m.field)),"desc"===m.dir&&(a*=-1),0!==a)break}return a}function Ua(s,e){if(null===s)return null===e;if(null===e||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let r=0;r<s.position.length;r++)if(!il(s.position[r],e.position[r]))return!1;return!0}class kl{constructor(e,r=null,a=[],h=[],m=null,b="F",N=null,Z=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=a,this.filters=h,this.limit=m,this.limitType=b,this.startAt=N,this.endAt=Z,this._t=null,this.wt=null}}function Gi(s,e,r,a,h,m,b,N){return new kl(s,e,r,a,h,m,b,N)}function Zs(s){return new kl(s)}function Fl(s){return 0===s.filters.length&&null===s.limit&&null==s.startAt&&null==s.endAt&&(0===s.explicitOrderBy.length||1===s.explicitOrderBy.length&&s.explicitOrderBy[0].field.isKeyField())}function Wu(s){return s.explicitOrderBy.length>0?s.explicitOrderBy[0].field:null}function Gu(s){for(const e of s.filters)if(e.dt())return e.field;return null}function Ic(s){return null!==s.collectionGroup}function To(s){const e=Jt(s);if(null===e._t){e._t=[];const r=Gu(e),a=Wu(e);if(null!==r&&null===a)r.isKeyField()||e._t.push(new Ba(r)),e._t.push(new Ba(gi.keyField(),"asc"));else{let h=!1;for(const m of e.explicitOrderBy)e._t.push(m),m.field.isKeyField()&&(h=!0);if(!h){const m=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Ba(gi.keyField(),m))}}}return e._t}function Rs(s){const e=Jt(s);if(!e.wt)if("F"===e.limitType)e.wt=Tt(e.path,e.collectionGroup,To(e),e.filters,e.limit,e.startAt,e.endAt);else{const r=[];for(const m of To(e))r.push(new Ba(m.field,"desc"===m.dir?"asc":"desc"));const a=e.endAt?new $o(e.endAt.position,e.endAt.inclusive):null,h=e.startAt?new $o(e.startAt.position,e.startAt.inclusive):null;e.wt=Tt(e.path,e.collectionGroup,r,e.filters,e.limit,a,h)}return e.wt}function ol(s,e,r){return new kl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,r,s.startAt,s.endAt)}function ru(s,e){return nr(Rs(s),Rs(e))&&s.limitType===e.limitType}function bl(s){return`${en(Rs(s))}|lt:${s.limitType}`}function zu(s){return`Query(target=${function(s){let e=s.path.canonicalString();return null!==s.collectionGroup&&(e+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(e+=`, filters: [${s.filters.map(r=>{return`${(a=r).field.canonicalString()} ${a.op} ${ua(a.value)}`;var a}).join(", ")}]`),cs(s.limit)||(e+=", limit: "+s.limit),s.orderBy.length>0&&(e+=`, orderBy: [${s.orderBy.map(r=>{return`${(a=r).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),s.startAt&&(e+=", startAt: ",e+=s.startAt.inclusive?"b:":"a:",e+=s.startAt.position.map(r=>ua(r)).join(",")),s.endAt&&(e+=", endAt: ",e+=s.endAt.inclusive?"a:":"b:",e+=s.endAt.position.map(r=>ua(r)).join(",")),`Target(${e})`}(Rs(s))}; limitType=${s.limitType})`}function qu(s,e){return e.isFoundDocument()&&function(r,a){const h=a.key.path;return null!==r.collectionGroup?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(h):bn.isDocumentKey(r.path)?r.path.isEqual(h):r.path.isImmediateParentOf(h)}(s,e)&&function(r,a){for(const h of r.explicitOrderBy)if(!h.field.isKeyField()&&null===a.data.field(h.field))return!1;return!0}(s,e)&&function(r,a){for(const h of r.filters)if(!h.matches(a))return!1;return!0}(s,e)&&(a=e,!((r=s).startAt&&!function(h,m,b){const N=$a(h,m,b);return h.inclusive?N<=0:N<0}(r.startAt,To(r),a)||r.endAt&&!function(h,m,b){const N=$a(h,m,b);return h.inclusive?N>=0:N>0}(r.endAt,To(r),a)));var r,a}function cd(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function $h(s){return(e,r)=>{let a=!1;for(const h of To(s)){const m=Uh(h,e,r);if(0!==m)return m;a=a||h.field.isKeyField()}return 0}}function Uh(s,e,r){const a=s.field.isKeyField()?bn.comparator(e.key,r.key):function(h,m,b){const N=m.data.field(h),Z=b.data.field(h);return null!==N&&null!==Z?El(N,Z):Mn()}(s.field,e,r);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return Mn()}}function Yu(s,e){if(s.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xs(e)?"-0":e}}function bc(s){return{integerValue:""+s}}function Iu(s,e){return Ko(e)?bc(e):Yu(s,e)}class Cc{constructor(){this._=void 0}}function dd(s,e,r){return s instanceof iu?function(a,h){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return h&&(m.fields.__previous_value__=h),{mapValue:m}}(r,e):s instanceof Cl?Zd(s,e):s instanceof su?Ll(s,e):function(a,h){const m=wc(a,h),b=bu(m)+bu(a.yt);return Fa(m)&&Fa(a.yt)?bc(b):Yu(a.It,b)}(s,e)}function np(s,e,r){return s instanceof Cl?Zd(s,e):s instanceof su?Ll(s,e):r}function wc(s,e){return s instanceof Vl?Fa(r=e)||(a=r)&&"doubleValue"in a?e:{integerValue:0}:null;var a,r}class iu extends Cc{}class Cl extends Cc{constructor(e){super(),this.elements=e}}function Zd(s,e){const r=Qd(e);for(const a of s.elements)r.some(h=>il(h,a))||r.push(a);return{arrayValue:{values:r}}}class su extends Cc{constructor(e){super(),this.elements=e}}function Ll(s,e){let r=Qd(e);for(const a of s.elements)r=r.filter(h=>!il(h,a));return{arrayValue:{values:r}}}class Vl extends Cc{constructor(e,r){super(),this.It=e,this.yt=r}}function bu(s){return xi(s.integerValue||s.doubleValue)}function Qd(s){return ca(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class ou{constructor(e,r){this.field=e,this.transform=r}}class al{constructor(e,r){this.version=e,this.transformResults=r}}class ki{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ki}static exists(e){return new ki(void 0,e)}static updateTime(e){return new ki(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ku(s,e){return void 0!==s.updateTime?e.isFoundDocument()&&e.version.isEqual(s.updateTime):void 0===s.exists||s.exists===e.isFoundDocument()}class hd{}function jh(s,e){if(!s.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return s.isNoDocument()?new wu(s.key,ki.none()):new Zu(s.key,s.data,ki.none());{const r=s.data,a=Y.empty();let h=new Wi(gi.comparator);for(let m of e.fields)if(!h.has(m)){let b=r.field(m);null===b&&m.length>1&&(m=m.popLast(),b=r.field(m)),null===b?a.delete(m):a.set(m,b),h=h.add(m)}return new Bl(s.key,a,new ni(h.toArray()),ki.none())}}function fd(s,e,r){s instanceof Zu?function(a,h,m){const b=a.value.clone(),N=Dc(a.fieldTransforms,h,m.transformResults);b.setAll(N),h.convertToFoundDocument(m.version,b).setHasCommittedMutations()}(s,e,r):s instanceof Bl?function(a,h,m){if(!Ku(a.precondition,h))return void h.convertToUnknownDocument(m.version);const b=Dc(a.fieldTransforms,h,m.transformResults),N=h.data;N.setAll(pd(a)),N.setAll(b),h.convertToFoundDocument(m.version,N).setHasCommittedMutations()}(s,e,r):e.convertToNoDocument(r.version).setHasCommittedMutations()}function Cu(s,e,r,a){return s instanceof Zu?function(h,m,b,N){if(!Ku(h.precondition,m))return b;const Z=h.value.clone(),te=Jd(h.fieldTransforms,N,m);return Z.setAll(te),m.convertToFoundDocument(m.version,Z).setHasLocalMutations(),null}(s,e,r,a):s instanceof Bl?function(h,m,b,N){if(!Ku(h.precondition,m))return b;const Z=Jd(h.fieldTransforms,N,m),te=m.data;return te.setAll(pd(h)),te.setAll(Z),m.convertToFoundDocument(m.version,te).setHasLocalMutations(),null===b?null:b.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(xe=>xe.field))}(s,e,r,a):(b=r,Ku(s.precondition,m=e)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):b);var m,b}function ip(s,e){let r=null;for(const a of s.fieldTransforms){const h=e.data.field(a.field),m=wc(a.transform,h||null);null!=m&&(null===r&&(r=Y.empty()),r.set(a.field,m))}return r||null}function Xd(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&(a=e.fieldTransforms,!!(void 0===(r=s.fieldTransforms)&&void 0===a||r&&a&&qo(r,a,(h,m)=>function(s,e){return s.field.isEqual(e.field)&&(a=e.transform,(r=s.transform)instanceof Cl&&a instanceof Cl||r instanceof su&&a instanceof su?qo(r.elements,a.elements,il):r instanceof Vl&&a instanceof Vl?il(r.yt,a.yt):r instanceof iu&&a instanceof iu);var r,a}(h,m))))&&(0===s.type?s.value.isEqual(e.value):1!==s.type||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask));var r,a}class Zu extends hd{constructor(e,r,a,h=[]){super(),this.key=e,this.value=r,this.precondition=a,this.fieldTransforms=h,this.type=0}getFieldMask(){return null}}class Bl extends hd{constructor(e,r,a,h,m=[]){super(),this.key=e,this.data=r,this.fieldMask=a,this.precondition=h,this.fieldTransforms=m,this.type=1}getFieldMask(){return this.fieldMask}}function pd(s){const e=new Map;return s.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const a=s.data.field(r);e.set(r,a)}}),e}function Dc(s,e,r){const a=new Map;Fn(s.length===r.length);for(let h=0;h<r.length;h++){const m=s[h],b=m.transform,N=e.data.field(m.field);a.set(m.field,np(b,N,r[h]))}return a}function Jd(s,e,r){const a=new Map;for(const h of s){const m=h.transform,b=r.data.field(h.field);a.set(h.field,dd(m,b,e))}return a}class wu extends hd{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Du extends hd{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Tc{constructor(e){this.count=e}}var Ri,ei;function eh(s){switch(s){default:return Mn();case et.CANCELLED:case et.UNKNOWN:case et.DEADLINE_EXCEEDED:case et.RESOURCE_EXHAUSTED:case et.INTERNAL:case et.UNAVAILABLE:case et.UNAUTHENTICATED:return!1;case et.INVALID_ARGUMENT:case et.NOT_FOUND:case et.ALREADY_EXISTS:case et.PERMISSION_DENIED:case et.FAILED_PRECONDITION:case et.ABORTED:case et.OUT_OF_RANGE:case et.UNIMPLEMENTED:case et.DATA_LOSS:return!0}}function gd(s){if(void 0===s)return Jn("GRPC error has no .code"),et.UNKNOWN;switch(s){case Ri.OK:return et.OK;case Ri.CANCELLED:return et.CANCELLED;case Ri.UNKNOWN:return et.UNKNOWN;case Ri.DEADLINE_EXCEEDED:return et.DEADLINE_EXCEEDED;case Ri.RESOURCE_EXHAUSTED:return et.RESOURCE_EXHAUSTED;case Ri.INTERNAL:return et.INTERNAL;case Ri.UNAVAILABLE:return et.UNAVAILABLE;case Ri.UNAUTHENTICATED:return et.UNAUTHENTICATED;case Ri.INVALID_ARGUMENT:return et.INVALID_ARGUMENT;case Ri.NOT_FOUND:return et.NOT_FOUND;case Ri.ALREADY_EXISTS:return et.ALREADY_EXISTS;case Ri.PERMISSION_DENIED:return et.PERMISSION_DENIED;case Ri.FAILED_PRECONDITION:return et.FAILED_PRECONDITION;case Ri.ABORTED:return et.ABORTED;case Ri.OUT_OF_RANGE:return et.OUT_OF_RANGE;case Ri.UNIMPLEMENTED:return et.UNIMPLEMENTED;case Ri.DATA_LOSS:return et.DATA_LOSS;default:return Mn()}}(ei=Ri||(Ri={}))[ei.OK=0]="OK",ei[ei.CANCELLED=1]="CANCELLED",ei[ei.UNKNOWN=2]="UNKNOWN",ei[ei.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ei[ei.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ei[ei.NOT_FOUND=5]="NOT_FOUND",ei[ei.ALREADY_EXISTS=6]="ALREADY_EXISTS",ei[ei.PERMISSION_DENIED=7]="PERMISSION_DENIED",ei[ei.UNAUTHENTICATED=16]="UNAUTHENTICATED",ei[ei.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ei[ei.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ei[ei.ABORTED=10]="ABORTED",ei[ei.OUT_OF_RANGE=11]="OUT_OF_RANGE",ei[ei.UNIMPLEMENTED=12]="UNIMPLEMENTED",ei[ei.INTERNAL=13]="INTERNAL",ei[ei.UNAVAILABLE=14]="UNAVAILABLE",ei[ei.DATA_LOSS=15]="DATA_LOSS";class $l{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),a=this.inner[r];if(void 0!==a)for(const[h,m]of a)if(this.equalsFn(h,e))return m}has(e){return void 0!==this.get(e)}set(e,r){const a=this.mapKeyFn(e),h=this.inner[a];if(void 0===h)return this.inner[a]=[[e,r]],void this.innerSize++;for(let m=0;m<h.length;m++)if(this.equalsFn(h[m][0],e))return void(h[m]=[e,r]);h.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),a=this.inner[r];if(void 0===a)return!1;for(let h=0;h<a.length;h++)if(this.equalsFn(a[h][0],e))return 1===a.length?delete this.inner[r]:a.splice(h,1),this.innerSize--,!0;return!1}forEach(e){Yo(this.inner,(r,a)=>{for(const[h,m]of a)e(h,m)})}isEmpty(){return Si(this.inner)}size(){return this.innerSize}}const Hh=new Ai(bn.comparator);function Ta(){return Hh}const Wh=new Ai(bn.comparator);function Ul(...s){let e=Wh;for(const r of s)e=e.insert(r.key,r);return e}function md(s){let e=Wh;return s.forEach((r,a)=>e=e.insert(r,a.overlayedDocument)),e}function Sa(){return yd()}function Gh(){return yd()}function yd(){return new $l(s=>s.toString(),(s,e)=>s.isEqual(e))}const th=new Ai(bn.comparator),Sc=new Wi(bn.comparator);function Hr(...s){let e=Sc;for(const r of s)e=e.add(r);return e}const sp=new Wi(ur);function T(){return sp}class g{constructor(e,r,a,h,m){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=a,this.documentUpdates=h,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,r,a){const h=new Map;return h.set(e,_.createSynthesizedTargetChangeForCurrentChange(e,r,a)),new g(ar.min(),h,T(),Ta(),Hr())}}class _{constructor(e,r,a,h,m){this.resumeToken=e,this.current=r,this.addedDocuments=a,this.modifiedDocuments=h,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,r,a){return new _(a,r,Hr(),Hr(),Hr())}}class x{constructor(e,r,a,h){this.Tt=e,this.removedTargetIds=r,this.key=a,this.Et=h}}class J{constructor(e,r){this.targetId=e,this.At=r}}class de{constructor(e,r,a=Ys.EMPTY_BYTE_STRING,h=null){this.state=e,this.targetIds=r,this.resumeToken=a,this.cause=h}}class Ye{constructor(){this.Rt=0,this.bt=fn(),this.Pt=Ys.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Hr(),r=Hr(),a=Hr();return this.bt.forEach((h,m)=>{switch(m){case 0:e=e.add(h);break;case 2:r=r.add(h);break;case 1:a=a.add(h);break;default:Mn()}}),new _(this.Pt,this.vt,e,r,a)}Nt(){this.Vt=!1,this.bt=fn()}kt(e,r){this.Vt=!0,this.bt=this.bt.insert(e,r)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class xt{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Ta(),this.qt=Rn(),this.Kt=new Wi(ur)}Gt(e){for(const r of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(r,e.Et):this.jt(r,e.key,e.Et);for(const r of e.removedTargetIds)this.jt(r,e.key,e.Et)}Wt(e){this.forEachTarget(e,r=>{const a=this.zt(r);switch(e.state){case 0:this.Ht(r)&&a.Ct(e.resumeToken);break;case 1:a.Ft(),a.St||a.Nt(),a.Ct(e.resumeToken);break;case 2:a.Ft(),a.St||this.removeTarget(r);break;case 3:this.Ht(r)&&(a.$t(),a.Ct(e.resumeToken));break;case 4:this.Ht(r)&&(this.Jt(r),a.Ct(e.resumeToken));break;default:Mn()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Lt.forEach((a,h)=>{this.Ht(h)&&r(h)})}Yt(e){const r=e.targetId,a=e.At.count,h=this.Xt(r);if(h){const m=h.target;if(Ar(m))if(0===a){const b=new bn(m.path);this.jt(r,b,Pe.newNoDocument(b,ar.min()))}else Fn(1===a);else this.Zt(r)!==a&&(this.Jt(r),this.Kt=this.Kt.add(r))}}te(e){const r=new Map;this.Lt.forEach((m,b)=>{const N=this.Xt(b);if(N){if(m.current&&Ar(N.target)){const Z=new bn(N.target.path);null!==this.Ut.get(Z)||this.ee(b,Z)||this.jt(b,Z,Pe.newNoDocument(Z,e))}m.Dt&&(r.set(b,m.xt()),m.Nt())}});let a=Hr();this.qt.forEach((m,b)=>{let N=!0;b.forEachWhile(Z=>{const te=this.Xt(Z);return!te||2===te.purpose||(N=!1,!1)}),N&&(a=a.add(m))}),this.Ut.forEach((m,b)=>b.setReadTime(e));const h=new g(e,r,this.Kt,this.Ut,a);return this.Ut=Ta(),this.qt=Rn(),this.Kt=new Wi(ur),h}Qt(e,r){if(!this.Ht(e))return;const a=this.ee(e,r.key)?2:0;this.zt(e).kt(r.key,a),this.Ut=this.Ut.insert(r.key,r),this.qt=this.qt.insert(r.key,this.ne(r.key).add(e))}jt(e,r,a){if(!this.Ht(e))return;const h=this.zt(e);this.ee(e,r)?h.kt(r,1):h.Ot(r),this.qt=this.qt.insert(r,this.ne(r).delete(e)),a&&(this.Ut=this.Ut.insert(r,a))}removeTarget(e){this.Lt.delete(e)}Zt(e){const r=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let r=this.Lt.get(e);return r||(r=new Ye,this.Lt.set(e,r)),r}ne(e){let r=this.qt.get(e);return r||(r=new Wi(ur),this.qt=this.qt.insert(e,r)),r}Ht(e){const r=null!==this.Xt(e);return r||kt("WatchChangeAggregator","Detected inactive target",e),r}Xt(e){const r=this.Lt.get(e);return r&&r.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new Ye),this.Bt.getRemoteKeysForTarget(e).forEach(r=>{this.jt(e,r,null)})}ee(e,r){return this.Bt.getRemoteKeysForTarget(e).has(r)}}function Rn(){return new Ai(bn.comparator)}function fn(){return new Ai(bn.comparator)}const tr={asc:"ASCENDING",desc:"DESCENDING"},vi={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Fi{constructor(e,r){this.databaseId=e,this.gt=r}}function uo(s,e){return s.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jl(s,e){return s.gt?e.toBase64():e.toUint8Array()}function _d(s,e){return uo(s,e.toTimestamp())}function Qs(s){return Fn(!!s),ar.fromTimestamp(function(e){const r=Co(e);return new pi(r.seconds,r.nanos)}(s))}function Ac(s,e){return(r=s,new Jr(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function Tu(s){const e=Jr.fromString(s);return Fn(Xh(e)),e}function zi(s,e){return Ac(s.databaseId,e.path)}function So(s,e){const r=Tu(e);if(r.get(1)!==s.databaseId.projectId)throw new zt(et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+s.databaseId.projectId);if(r.get(3)!==s.databaseId.database)throw new zt(et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+s.databaseId.database);return new bn(Hl(r))}function xc(s,e){return Ac(s.databaseId,e)}function Rc(s){const e=Tu(s);return 4===e.length?Jr.emptyPath():Hl(e)}function Us(s){return new Jr(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Hl(s){return Fn(s.length>4&&"documents"===s.get(4)),s.popFirst(5)}function Su(s,e,r){return{name:zi(s,e),fields:r.value.mapValue.fields}}function zh(s,e,r){const a=So(s,e.name),h=Qs(e.updateTime),m=new Y({mapValue:{fields:e.fields}}),b=Pe.newFoundDocument(a,h,m);return r&&b.setHasCommittedMutations(),r?b.setHasCommittedMutations():b}function rh(s,e){let r;if(e instanceof Zu)r={update:Su(s,e.key,e.value)};else if(e instanceof wu)r={delete:zi(s,e.key)};else if(e instanceof Bl)r={update:Su(s,e.key,e.data),updateMask:Pm(e.fieldMask)};else{if(!(e instanceof Du))return Mn();r={verify:zi(s,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(a=>function(h,m){const b=m.transform;if(b instanceof iu)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(b instanceof Cl)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:b.elements}};if(b instanceof su)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:b.elements}};if(b instanceof Vl)return{fieldPath:m.field.canonicalString(),increment:b.yt};throw Mn()}(0,a))),e.precondition.isNone||(r.currentDocument=void 0!==(h=e.precondition).updateTime?{updateTime:_d(s,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:Mn()),r;var h}function Au(s,e){const r=e.currentDocument?void 0!==(h=e.currentDocument).updateTime?ki.updateTime(Qs(h.updateTime)):void 0!==h.exists?ki.exists(h.exists):ki.none():ki.none(),a=e.updateTransforms?e.updateTransforms.map(h=>function(m,b){let N=null;"setToServerValue"in b?(Fn("REQUEST_TIME"===b.setToServerValue),N=new iu):"appendMissingElements"in b?N=new Cl(b.appendMissingElements.values||[]):"removeAllFromArray"in b?N=new su(b.removeAllFromArray.values||[]):"increment"in b?N=new Vl(m,b.increment):Mn();const Z=gi.fromServerFormat(b.fieldPath);return new ou(Z,N)}(s,h)):[];var h;if(e.update){const h=So(s,e.update.name),m=new Y({mapValue:{fields:e.update.fields}});if(e.updateMask){const b=new ni((e.updateMask.fieldPaths||[]).map(te=>gi.fromServerFormat(te)));return new Bl(h,m,b,r,a)}return new Zu(h,m,r,a)}if(e.delete){const h=So(s,e.delete);return new wu(h,r)}if(e.verify){const h=So(s,e.verify);return new Du(h,r)}return Mn()}function qh(s,e){return{documents:[xc(s,e.path)]}}function Yh(s,e){const r={structuredQuery:{}},a=e.path;null!==e.collectionGroup?(r.parent=xc(s,a),r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r.parent=xc(s,a.popLast()),r.structuredQuery.from=[{collectionId:a.lastSegment()}]);const h=function(Z){if(0===Z.length)return;const te=Z.map(xe=>function(ze){if("=="===ze.op){if(Ca(ze.value))return{unaryFilter:{field:Ed(ze.field),op:"IS_NAN"}};if(eu(ze.value))return{unaryFilter:{field:Ed(ze.field),op:"IS_NULL"}}}else if("!="===ze.op){if(Ca(ze.value))return{unaryFilter:{field:Ed(ze.field),op:"IS_NOT_NAN"}};if(eu(ze.value))return{unaryFilter:{field:Ed(ze.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ed(ze.field),op:Zh(ze.op),value:ze.value}}}(xe));return 1===te.length?te[0]:{compositeFilter:{op:"AND",filters:te}}}(e.filters);h&&(r.structuredQuery.where=h);const m=function(Z){if(0!==Z.length)return Z.map(te=>{return{field:Ed((xe=te).field),direction:sh(xe.dir)};var xe})}(e.orderBy);m&&(r.structuredQuery.orderBy=m);const b=(te=e.limit,s.gt||cs(te)?te:{value:te});var te,N,Z;return null!==b&&(r.structuredQuery.limit=b),e.startAt&&(r.structuredQuery.startAt={before:(N=e.startAt).inclusive,values:N.position}),e.endAt&&(r.structuredQuery.endAt={before:!(Z=e.endAt).inclusive,values:Z.position}),r}function vd(s){let e=Rc(s.parent);const r=s.structuredQuery,a=r.from?r.from.length:0;let h=null;if(a>0){Fn(1===a);const xe=r.from[0];xe.allDescendants?h=xe.collectionId:e=e.child(xe.collectionId)}let m=[];r.where&&(m=ih(r.where));let b=[];r.orderBy&&(b=r.orderBy.map(xe=>{return new Ba(xu((ze=xe).field),function(Et){switch(Et){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ze.direction));var ze}));let N=null;r.limit&&(N=function(xe){let ze;return ze="object"==typeof xe?xe.value:xe,cs(ze)?null:ze}(r.limit));let Z=null;var xe;r.startAt&&(Z=new $o((xe=r.startAt).values||[],!!xe.before));let te=null;return r.endAt&&(te=function(xe){return new $o(xe.values||[],!xe.before)}(r.endAt)),Gi(e,h,b,m,N,"F",Z,te)}function ih(s){return s?void 0!==s.unaryFilter?[Qh(s)]:void 0!==s.fieldFilter?[gg(s)]:void 0!==s.compositeFilter?s.compositeFilter.filters.map(e=>ih(e)).reduce((e,r)=>e.concat(r)):Mn():[]}function sh(s){return tr[s]}function Zh(s){return vi[s]}function Ed(s){return{fieldPath:s.canonicalString()}}function xu(s){return gi.fromServerFormat(s.fieldPath)}function gg(s){return ui.create(xu(s.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Mn()}}(s.fieldFilter.op),s.fieldFilter.value)}function Qh(s){switch(s.unaryFilter.op){case"IS_NAN":const e=xu(s.unaryFilter.field);return ui.create(e,"==",{doubleValue:NaN});case"IS_NULL":const r=xu(s.unaryFilter.field);return ui.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=xu(s.unaryFilter.field);return ui.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=xu(s.unaryFilter.field);return ui.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Mn()}}function Pm(s){const e=[];return s.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function Xh(s){return s.length>=4&&"projects"===s.get(0)&&"databases"===s.get(2)}function Xs(s){let e="";for(let r=0;r<s.length;r++)e.length>0&&(e=ap(e)),e=km(s.get(r),e);return ap(e)}function km(s,e){let r=e;const a=s.length;for(let h=0;h<a;h++){const m=s.charAt(h);switch(m){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=m}}return r}function ap(s){return s+"\x01\x01"}function au(s){const e=s.length;if(Fn(e>=2),2===e)return Fn("\x01"===s.charAt(0)&&"\x01"===s.charAt(1)),Jr.emptyPath();const r=e-2,a=[];let h="";for(let m=0;m<e;){const b=s.indexOf("\x01",m);switch((b<0||b>r)&&Mn(),s.charAt(b+1)){case"\x01":const N=s.substring(m,b);let Z;0===h.length?Z=N:(h+=N,Z=h,h=""),a.push(Z);break;case"\x10":h+=s.substring(m,b),h+="\0";break;case"\x11":h+=s.substring(m,b+1);break;default:Mn()}m=b+2}return new Jr(a)}const mg=["userId","batchId"];function oh(s,e){return[s,Xs(e)]}function Mc(s,e,r){return[s,Xs(e),r]}const ja={},Jh=["prefixPath","collectionGroup","readTime","documentId"],ef=["prefixPath","collectionGroup","documentId"],Oc=["collectionGroup","readTime","prefixPath","documentId"],tf=["canonicalId","targetId"],Fm=["targetId","path"],yg=["path","targetId"],nf=["collectionId","parent"],_g=["indexId","uid"],Lm=["uid","sequenceNumber"],lu=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],wl=["indexId","uid","orderedDocumentKey"],zy=["userId","collectionPath","documentId"],qy=["userId","collectionPath","largestBatchId"],vg=["userId","collectionGroup","largestBatchId"],lp=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ll=[...lp,"documentOverlays"],ah=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],rf=ah,lh=[...rf,"indexConfiguration","indexState","indexEntries"];class ul extends X{constructor(e,r){super(),this.ie=e,this.currentSequenceNumber=r}}function ys(s,e){const r=Jt(s);return Cn.M(r.ie,e)}class sf{constructor(e,r,a,h){this.batchId=e,this.localWriteTime=r,this.baseMutations=a,this.mutations=h}applyToRemoteDocument(e,r){const a=r.mutationResults;for(let h=0;h<this.mutations.length;h++){const m=this.mutations[h];m.key.isEqual(e.key)&&fd(m,e,a[h])}}applyToLocalView(e,r){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(r=Cu(a,e,r,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(r=Cu(a,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const a=Gh();return this.mutations.forEach(h=>{const m=e.get(h.key),b=m.overlayedDocument;let N=this.applyToLocalView(b,m.mutatedFields);N=r.has(h.key)?null:N;const Z=jh(b,N);null!==Z&&a.set(h.key,Z),b.isValidDocument()||b.convertToNoDocument(ar.min())}),a}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Hr())}isEqual(e){return this.batchId===e.batchId&&qo(this.mutations,e.mutations,(r,a)=>Xd(r,a))&&qo(this.baseMutations,e.baseMutations,(r,a)=>Xd(r,a))}}class uh{constructor(e,r,a,h){this.batch=e,this.commitVersion=r,this.mutationResults=a,this.docVersions=h}static from(e,r,a){Fn(e.mutations.length===a.length);let h=th;const m=e.mutations;for(let b=0;b<m.length;b++)h=h.insert(m[b].key,a[b].version);return new uh(e,r,a,h)}}class Nc{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ha{constructor(e,r,a,h,m=ar.min(),b=ar.min(),N=Ys.EMPTY_BYTE_STRING){this.target=e,this.targetId=r,this.purpose=a,this.sequenceNumber=h,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=b,this.resumeToken=N}withSequenceNumber(e){return new Ha(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,r){return new Ha(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ha(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Pc{constructor(e){this.re=e}}function Uo(s,e){const r=e.key,a={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:kc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())a.document={name:zi(h=s.re,(m=e).key),fields:m.data.value.mapValue.fields,updateTime:uo(h,m.version.toTimestamp())};else if(e.isNoDocument())a.noDocument={path:r.path.toArray(),readTime:Qu(e.version)};else{if(!e.isUnknownDocument())return Mn();a.unknownDocument={path:r.path.toArray(),version:Qu(e.version)}}var h,m;return a}function kc(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function Qu(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function uu(s){const e=new pi(s.seconds,s.nanoseconds);return ar.fromTimestamp(e)}function cu(s,e){const r=(e.baseMutations||[]).map(m=>Au(s.re,m));for(let m=0;m<e.mutations.length-1;++m){const b=e.mutations[m];m+1<e.mutations.length&&void 0!==e.mutations[m+1].transform&&(b.updateTransforms=e.mutations[m+1].transform.fieldTransforms,e.mutations.splice(m+1,1),++m)}const a=e.mutations.map(m=>Au(s.re,m)),h=pi.fromMillis(e.localWriteTimeMs);return new sf(e.batchId,h,r,a)}function Zo(s){const e=uu(s.readTime),r=void 0!==s.lastLimboFreeSnapshotVersion?uu(s.lastLimboFreeSnapshotVersion):ar.min();let a;var h;return void 0!==s.query.documents?(Fn(1===(h=s.query).documents.length),a=Rs(Zs(Rc(h.documents[0])))):a=Rs(vd(s.query)),new Ha(a,s.targetId,0,s.lastListenSequenceNumber,e,r,Ys.fromBase64String(s.resumeToken))}function up(s,e){const r=Qu(e.snapshotVersion),a=Qu(e.lastLimboFreeSnapshotVersion);let h;h=Ar(e.target)?qh(s.re,e.target):Yh(s.re,e.target);const m=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:en(e.target),readTime:r,resumeToken:m,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:a,query:h}}function cp(s){const e=vd({parent:s.parent,structuredQuery:s.structuredQuery});return"LAST"===s.limitType?ol(e,e.limit,"L"):e}function af(s,e){return new Nc(e.largestBatchId,Au(s.re,e.overlayMutation))}function Eg(s,e){const r=e.path.lastSegment();return[s,Xs(e.path.popLast()),r]}function Ig(s,e,r,a){return{indexId:s,uid:e.uid||"",sequenceNumber:r,readTime:Qu(a.readTime),documentKey:Xs(a.documentKey.path),largestBatchId:a.largestBatchId}}class bg{getBundleMetadata(e,r){return ch(e).get(r).next(a=>{if(a)return{id:(h=a).bundleId,createTime:uu(h.createTime),version:h.version};var h})}saveBundleMetadata(e,r){return ch(e).put({bundleId:(a=r).id,createTime:Qu(Qs(a.createTime)),version:a.version});var a}getNamedQuery(e,r){return Fc(e).get(r).next(a=>{if(a)return{name:(h=a).name,query:cp(h.bundledQuery),readTime:uu(h.readTime)};var h})}saveNamedQuery(e,r){return Fc(e).put({name:(a=r).name,readTime:Qu(Qs(a.readTime)),bundledQuery:a.bundledQuery});var a}}function ch(s){return ys(s,"bundles")}function Fc(s){return ys(s,"namedQueries")}class Lc{constructor(e,r){this.It=e,this.userId=r}static oe(e,r){return new Lc(e,r.uid||"")}getOverlay(e,r){return Id(e).get(Eg(this.userId,r)).next(a=>a?af(this.It,a):null)}getOverlays(e,r){const a=Sa();return pe.forEach(r,h=>this.getOverlay(e,h).next(m=>{null!==m&&a.set(h,m)})).next(()=>a)}saveOverlays(e,r,a){const h=[];return a.forEach((m,b)=>{const N=new Nc(r,b);h.push(this.ue(e,N))}),pe.waitFor(h)}removeOverlaysForBatchId(e,r,a){const h=new Set;r.forEach(b=>h.add(Xs(b.getCollectionPath())));const m=[];return h.forEach(b=>{const N=IDBKeyRange.bound([this.userId,b,a],[this.userId,b,a+1],!1,!0);m.push(Id(e).Y("collectionPathOverlayIndex",N))}),pe.waitFor(m)}getOverlaysForCollection(e,r,a){const h=Sa(),m=Xs(r),b=IDBKeyRange.bound([this.userId,m,a],[this.userId,m,Number.POSITIVE_INFINITY],!0);return Id(e).W("collectionPathOverlayIndex",b).next(N=>{for(const Z of N){const te=af(this.It,Z);h.set(te.getKey(),te)}return h})}getOverlaysForCollectionGroup(e,r,a,h){const m=Sa();let b;const N=IDBKeyRange.bound([this.userId,r,a],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Id(e).Z({index:"collectionGroupOverlayIndex",range:N},(Z,te,xe)=>{const ze=af(this.It,te);m.size()<h||ze.largestBatchId===b?(m.set(ze.getKey(),ze),b=ze.largestBatchId):xe.done()}).next(()=>m)}ue(e,r){return Id(e).put(function(a,h,m){const[b,N,Z]=Eg(h,m.mutation.key);return{userId:h,collectionPath:N,documentId:Z,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:rh(a.re,m.mutation)}}(this.It,this.userId,r))}}function Id(s){return ys(s,"documentOverlays")}class Vc{constructor(){}ce(e,r){this.ae(e,r),r.he()}ae(e,r){if("nullValue"in e)this.le(r,5);else if("booleanValue"in e)this.le(r,10),r.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(r,15),r.fe(xi(e.integerValue));else if("doubleValue"in e){const a=xi(e.doubleValue);isNaN(a)?this.le(r,13):(this.le(r,15),xs(a)?r.fe(0):r.fe(a))}else if("timestampValue"in e){const a=e.timestampValue;this.le(r,20),"string"==typeof a?r.de(a):(r.de(`${a.seconds||""}`),r.fe(a.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,r),this.we(r);else if("bytesValue"in e)this.le(r,30),r.me(vl(e.bytesValue)),this.we(r);else if("referenceValue"in e)this.ge(e.referenceValue,r);else if("geoPointValue"in e){const a=e.geoPointValue;this.le(r,45),r.fe(a.latitude||0),r.fe(a.longitude||0)}else"mapValue"in e?tu(e)?this.le(r,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,r),this.we(r)):"arrayValue"in e?(this.pe(e.arrayValue,r),this.we(r)):Mn()}_e(e,r){this.le(r,25),this.Ie(e,r)}Ie(e,r){r.de(e)}ye(e,r){const a=e.fields||{};this.le(r,55);for(const h of Object.keys(a))this._e(h,r),this.ae(a[h],r)}pe(e,r){const a=e.values||[];this.le(r,50);for(const h of a)this.ae(h,r)}ge(e,r){this.le(r,37),bn.fromName(e).path.forEach(a=>{this.le(r,60),this.Ie(a,r)})}le(e,r){e.fe(r)}we(e){e.fe(2)}}function lf(s){if(0===s)return 8;let e=0;return s>>4==0&&(e+=4,s<<=4),s>>6==0&&(e+=2,s<<=2),s>>7==0&&(e+=1),e}function bd(s){const e=64-function(r){let a=0;for(let h=0;h<8;++h){const m=lf(255&r[h]);if(a+=m,8!==m)break}return a}(s);return Math.ceil(e/8)}Vc.Te=new Vc;class Bc{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const r=e[Symbol.iterator]();let a=r.next();for(;!a.done;)this.Ae(a.value),a=r.next();this.Re()}be(e){const r=e[Symbol.iterator]();let a=r.next();for(;!a.done;)this.Pe(a.value),a=r.next();this.ve()}Ve(e){for(const r of e){const a=r.charCodeAt(0);if(a<128)this.Ae(a);else if(a<2048)this.Ae(960|a>>>6),this.Ae(128|63&a);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a);else{const h=r.codePointAt(0);this.Ae(240|h>>>18),this.Ae(128|63&h>>>12),this.Ae(128|63&h>>>6),this.Ae(128|63&h)}}this.Re()}Se(e){for(const r of e){const a=r.charCodeAt(0);if(a<128)this.Pe(a);else if(a<2048)this.Pe(960|a>>>6),this.Pe(128|63&a);else if(r<"\ud800"||"\udbff"<r)this.Pe(480|a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a);else{const h=r.codePointAt(0);this.Pe(240|h>>>18),this.Pe(128|63&h>>>12),this.Pe(128|63&h>>>6),this.Pe(128|63&h)}}this.ve()}De(e){const r=this.Ce(e),a=bd(r);this.xe(1+a),this.buffer[this.position++]=255&a;for(let h=r.length-a;h<r.length;++h)this.buffer[this.position++]=255&r[h]}Ne(e){const r=this.Ce(e),a=bd(r);this.xe(1+a),this.buffer[this.position++]=~(255&a);for(let h=r.length-a;h<r.length;++h)this.buffer[this.position++]=~(255&r[h])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const r=function(h){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,h,!1),new Uint8Array(m.buffer)}(e),a=0!=(128&r[0]);r[0]^=a?255:128;for(let h=1;h<r.length;++h)r[h]^=a?255:0;return r}Ae(e){const r=255&e;0===r?(this.Oe(0),this.Oe(255)):255===r?(this.Oe(255),this.Oe(0)):this.Oe(r)}Pe(e){const r=255&e;0===r?(this.Fe(0),this.Fe(255)):255===r?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const r=e+this.position;if(r<=this.buffer.length)return;let a=2*this.buffer.length;a<r&&(a=r);const h=new Uint8Array(a);h.set(this.buffer),this.buffer=h}}class uf{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class Cg{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class dh{constructor(){this.Be=new Bc,this.Le=new uf(this.Be),this.Ue=new Cg(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class du{constructor(e,r,a,h){this.indexId=e,this.documentKey=r,this.arrayValue=a,this.directionalValue=h}Ke(){const e=this.directionalValue.length,r=0===e||255===this.directionalValue[e-1]?e+1:e,a=new Uint8Array(r);return a.set(this.directionalValue,0),r!==e?a.set([0],this.directionalValue.length):++a[a.length-1],new du(this.indexId,this.documentKey,this.arrayValue,a)}}function Xu(s,e){let r=s.indexId-e.indexId;return 0!==r?r:(r=dp(s.arrayValue,e.arrayValue),0!==r?r:(r=dp(s.directionalValue,e.directionalValue),0!==r?r:bn.comparator(s.documentKey,e.documentKey)))}function dp(s,e){for(let r=0;r<s.length&&r<e.length;++r){const a=s[r]-e[r];if(0!==a)return a}return s.length-e.length}class wg{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const r of e.filters){const a=r;a.dt()?this.je=a:this.Qe.push(a)}}We(e){const r=aa(e);if(void 0!==r&&!this.ze(r))return!1;const a=ls(e);let h=0,m=0;for(;h<a.length&&this.ze(a[h]);++h);if(h===a.length)return!0;if(void 0!==this.je){const b=a[h];if(!this.He(this.je,b)||!this.Je(this.Ge[m++],b))return!1;++h}for(;h<a.length;++h){const b=a[h];if(m>=this.Ge.length||!this.Je(this.Ge[m++],b))return!1}return!0}ze(e){for(const r of this.Qe)if(this.He(r,e))return!0;return!1}He(e,r){return!(void 0===e||!e.field.isEqual(r.fieldPath))&&2===r.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,r){return!!e.field.isEqual(r.fieldPath)&&(0===r.kind&&"asc"===e.dir||1===r.kind&&"desc"===e.dir)}}class Dg{constructor(){this.Ye=new $c}addToCollectionParentIndex(e,r){return this.Ye.add(r),pe.resolve()}getCollectionParents(e,r){return pe.resolve(this.Ye.getEntries(r))}addFieldIndex(e,r){return pe.resolve()}deleteFieldIndex(e,r){return pe.resolve()}getDocumentsMatchingTarget(e,r){return pe.resolve(null)}getIndexType(e,r){return pe.resolve(0)}getFieldIndexes(e,r){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,r){return pe.resolve(A.min())}getMinOffsetFromCollectionGroup(e,r){return pe.resolve(A.min())}updateCollectionGroup(e,r,a){return pe.resolve()}updateIndexEntries(e,r){return pe.resolve()}}class $c{constructor(){this.index={}}add(e){const r=e.lastSegment(),a=e.popLast(),h=this.index[r]||new Wi(Jr.comparator),m=!h.has(a);return this.index[r]=h.add(a),m}has(e){const r=e.lastSegment(),a=e.popLast(),h=this.index[r];return h&&h.has(a)}getEntries(e){return(this.index[e]||new Wi(Jr.comparator)).toArray()}}const Cd=new Uint8Array(0);class cf{constructor(e,r){this.user=e,this.databaseId=r,this.Xe=new $c,this.Ze=new $l(a=>en(a),(a,h)=>nr(a,h)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.Xe.has(r)){const a=r.lastSegment(),h=r.popLast();e.addOnCommittedListener(()=>{this.Xe.add(r)});const m={collectionId:a,parent:Xs(h)};return hu(e).put(m)}return pe.resolve()}getCollectionParents(e,r){const a=[],h=IDBKeyRange.bound([r,""],[po(r),""],!1,!0);return hu(e).W(h).next(m=>{for(const b of m){if(b.collectionId!==r)break;a.push(au(b.parent))}return a})}addFieldIndex(e,r){const a=wd(e),h={indexId:(b=r).indexId,collectionGroup:b.collectionGroup,fields:b.fields.map(N=>[N.fieldPath.canonicalString(),N.kind])};var b;delete h.indexId;const m=a.add(h);if(r.indexState){const b=Ju(e);return m.next(N=>{b.put(Ig(N,this.user,r.indexState.sequenceNumber,r.indexState.offset))})}return m.next()}deleteFieldIndex(e,r){const a=wd(e),h=Ju(e),m=cl(e);return a.delete(r.indexId).next(()=>h.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>m.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,r){const a=cl(e);let h=!0;const m=new Map;return pe.forEach(this.tn(r),b=>this.en(e,b).next(N=>{h&&(h=!!N),m.set(b,N)})).next(()=>{if(h){let b=Hr();const N=[];return pe.forEach(m,(Z,te)=>{var xe;kt("IndexedDbIndexManager",`Using index ${xe=Z,`id=${xe.indexId}|cg=${xe.collectionGroup}|f=${xe.fields.map(ns=>`${ns.fieldPath}:${ns.kind}`).join(",")}`} to execute ${en(r)}`);const ze=function(ns,ga){const Es=aa(ga);if(void 0===Es)return null;for(const Zi of wr(ns,Es.fieldPath))switch(Zi.op){case"array-contains-any":return Zi.value.arrayValue.values||[];case"array-contains":return[Zi.value]}return null}(te,Z),Et=function(ns,ga){const Es=new Map;for(const Zi of ls(ga))for(const Ho of wr(ns,Zi.fieldPath))switch(Ho.op){case"==":case"in":Es.set(Zi.fieldPath.canonicalString(),Ho.value);break;case"not-in":case"!=":return Es.set(Zi.fieldPath.canonicalString(),Ho.value),Array.from(Es.values())}return null}(te,Z),Wt=function(ns,ga){const Es=[];let Zi=!0;for(const Ho of ls(ga)){const ag=0===Ho.kind?rr(ns,Ho.fieldPath,ns.startAt):Pi(ns,Ho.fieldPath,ns.startAt);Es.push(ag.value),Zi&&(Zi=ag.inclusive)}return new $o(Es,Zi)}(te,Z),sn=function(ns,ga){const Es=[];let Zi=!0;for(const Ho of ls(ga)){const ag=0===Ho.kind?Pi(ns,Ho.fieldPath,ns.endAt):rr(ns,Ho.fieldPath,ns.endAt);Es.push(ag.value),Zi&&(Zi=ag.inclusive)}return new $o(Es,Zi)}(te,Z),Un=this.nn(Z,te,Wt),Kn=this.nn(Z,te,sn),Mi=this.sn(Z,te,Et),Os=this.rn(Z.indexId,ze,Un,Wt.inclusive,Kn,sn.inclusive,Mi);return pe.forEach(Os,ns=>a.J(ns,r.limit).next(ga=>{ga.forEach(Es=>{const Zi=bn.fromSegments(Es.documentKey);b.has(Zi)||(b=b.add(Zi),N.push(Zi))})}))}).next(()=>N)}return pe.resolve(null)})}tn(e){let r=this.Ze.get(e);return r||(r=[e],this.Ze.set(e,r),r)}rn(e,r,a,h,m,b,N){const Z=(null!=r?r.length:1)*Math.max(a.length,m.length),te=Z/(null!=r?r.length:1),xe=[];for(let ze=0;ze<Z;++ze){const Et=r?this.on(r[ze/te]):Cd,Wt=this.un(e,Et,a[ze%te],h),sn=this.cn(e,Et,m[ze%te],b),Un=N.map(Kn=>this.un(e,Et,Kn,!0));xe.push(...this.createRange(Wt,sn,Un))}return xe}un(e,r,a,h){const m=new du(e,bn.empty(),r,a);return h?m:m.Ke()}cn(e,r,a,h){const m=new du(e,bn.empty(),r,a);return h?m.Ke():m}en(e,r){const a=new wg(r),h=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,h).next(m=>{let b=null;for(const N of m)a.We(N)&&(!b||N.fields.length>b.fields.length)&&(b=N);return b})}getIndexType(e,r){let a=2;return pe.forEach(this.tn(r),h=>this.en(e,h).next(m=>{m?0!==a&&m.fields.length<function(b){let N=new Wi(gi.comparator),Z=!1;for(const te of b.filters){const xe=te;xe.field.isKeyField()||("array-contains"===xe.op||"array-contains-any"===xe.op?Z=!0:N=N.add(xe.field))}for(const te of b.orderBy)te.field.isKeyField()||(N=N.add(te.field));return N.size+(Z?1:0)}(h)&&(a=1):a=0})).next(()=>a)}an(e,r){const a=new dh;for(const h of ls(e)){const m=r.data.field(h.fieldPath);if(null==m)return null;const b=a.qe(h.kind);Vc.Te.ce(m,b)}return a.$e()}on(e){const r=new dh;return Vc.Te.ce(e,r.qe(0)),r.$e()}hn(e,r){const a=new dh;return Vc.Te.ce(ba(this.databaseId,r),a.qe(function(h){const m=ls(h);return 0===m.length?0:m[m.length-1].kind}(e))),a.$e()}sn(e,r,a){if(null===a)return[];let h=[];h.push(new dh);let m=0;for(const b of ls(e)){const N=a[m++];for(const Z of h)if(this.ln(r,b.fieldPath)&&ca(N))h=this.fn(h,b,N);else{const te=Z.qe(b.kind);Vc.Te.ce(N,te)}}return this.dn(h)}nn(e,r,a){return this.sn(e,r,a.position)}dn(e){const r=[];for(let a=0;a<e.length;++a)r[a]=e[a].$e();return r}fn(e,r,a){const h=[...e],m=[];for(const b of a.arrayValue.values||[])for(const N of h){const Z=new dh;Z.seed(N.$e()),Vc.Te.ce(b,Z.qe(r.kind)),m.push(Z)}return m}ln(e,r){return!!e.filters.find(a=>a instanceof ui&&a.field.isEqual(r)&&("in"===a.op||"not-in"===a.op))}getFieldIndexes(e,r){const a=wd(e),h=Ju(e);return(r?a.W("collectionGroupIndex",IDBKeyRange.bound(r,r)):a.W()).next(m=>{const b=[];return pe.forEach(m,N=>h.get([N.indexId,this.uid]).next(Z=>{b.push(function(te,xe){const ze=xe?new Na(xe.sequenceNumber,new A(uu(xe.readTime),new bn(au(xe.documentKey)),xe.largestBatchId)):Na.empty(),Et=te.fields.map(([Wt,sn])=>new la(gi.fromServerFormat(Wt),sn));return new Oa(te.indexId,te.collectionGroup,Et,ze)}(N,Z))})).next(()=>b)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>0===r.length?null:(r.sort((a,h)=>{const m=a.indexState.sequenceNumber-h.indexState.sequenceNumber;return 0!==m?m:ur(a.collectionGroup,h.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,a){const h=wd(e),m=Ju(e);return this._n(e).next(b=>h.W("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(N=>pe.forEach(N,Z=>m.put(Ig(Z.indexId,this.user,b,a)))))}updateIndexEntries(e,r){const a=new Map;return pe.forEach(r,(h,m)=>{const b=a.get(h.collectionGroup);return(b?pe.resolve(b):this.getFieldIndexes(e,h.collectionGroup)).next(N=>(a.set(h.collectionGroup,N),pe.forEach(N,Z=>this.wn(e,h,Z).next(te=>{const xe=this.mn(m,Z);return te.isEqual(xe)?pe.resolve():this.gn(e,m,Z,te,xe)}))))})}yn(e,r,a,h){return cl(e).put({indexId:h.indexId,uid:this.uid,arrayValue:h.arrayValue,directionalValue:h.directionalValue,orderedDocumentKey:this.hn(a,r.key),documentKey:r.key.path.toArray()})}pn(e,r,a,h){return cl(e).delete([h.indexId,this.uid,h.arrayValue,h.directionalValue,this.hn(a,r.key),r.key.path.toArray()])}wn(e,r,a){const h=cl(e);let m=new Wi(Xu);return h.Z({index:"documentKeyIndex",range:IDBKeyRange.only([a.indexId,this.uid,this.hn(a,r)])},(b,N)=>{m=m.add(new du(a.indexId,r,N.arrayValue,N.directionalValue))}).next(()=>m)}mn(e,r){let a=new Wi(Xu);const h=this.an(r,e);if(null==h)return a;const m=aa(r);if(null!=m){const b=e.data.field(m.fieldPath);if(ca(b))for(const N of b.arrayValue.values||[])a=a.add(new du(r.indexId,e.key,this.on(N),h))}else a=a.add(new du(r.indexId,e.key,Cd,h));return a}gn(e,r,a,h,m){kt("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const b=[];return function(N,Z,te,xe,ze){const Et=N.getIterator(),Wt=Z.getIterator();let sn=vc(Et),Un=vc(Wt);for(;sn||Un;){let Kn=!1,Mi=!1;if(sn&&Un){const Os=te(sn,Un);Os<0?Mi=!0:Os>0&&(Kn=!0)}else null!=sn?Mi=!0:Kn=!0;Kn?(xe(Un),Un=vc(Wt)):Mi?(ze(sn),sn=vc(Et)):(sn=vc(Et),Un=vc(Wt))}}(h,m,Xu,N=>{b.push(this.yn(e,r,a,N))},N=>{b.push(this.pn(e,r,a,N))}),pe.waitFor(b)}_n(e){let r=1;return Ju(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(a,h,m)=>{m.done(),r=h.sequenceNumber+1}).next(()=>r)}createRange(e,r,a){a=a.sort((b,N)=>Xu(b,N)).filter((b,N,Z)=>!N||0!==Xu(b,Z[N-1]));const h=[];h.push(e);for(const b of a){const N=Xu(b,e),Z=Xu(b,r);if(0===N)h[0]=e.Ke();else if(N>0&&Z<0)h.push(b),h.push(b.Ke());else if(Z>0)break}h.push(r);const m=[];for(let b=0;b<h.length;b+=2)m.push(IDBKeyRange.bound([h[b].indexId,this.uid,h[b].arrayValue,h[b].directionalValue,Cd,[]],[h[b+1].indexId,this.uid,h[b+1].arrayValue,h[b+1].directionalValue,Cd,[]]));return m}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(Uc)}getMinOffset(e,r){return pe.mapArray(this.tn(r),a=>this.en(e,a).next(h=>h||Mn())).next(Uc)}}function hu(s){return ys(s,"collectionParents")}function cl(s){return ys(s,"indexEntries")}function wd(s){return ys(s,"indexConfiguration")}function Ju(s){return ys(s,"indexState")}function Uc(s){Fn(0!==s.length);let e=s[0].indexState.offset,r=e.largestBatchId;for(let a=1;a<s.length;a++){const h=s[a].indexState.offset;S(h,e)<0&&(e=h),r<h.largestBatchId&&(r=h.largestBatchId)}return new A(e.readTime,e.documentKey,r)}const Dd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ao{constructor(e,r,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=a}static withCacheSize(e){return new Ao(e,Ao.DEFAULT_COLLECTION_PERCENTILE,Ao.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function hp(s,e,r){const a=s.store("mutations"),h=s.store("documentMutations"),m=[],b=IDBKeyRange.only(r.batchId);let N=0;const Z=a.Z({range:b},(xe,ze,Et)=>(N++,Et.delete()));m.push(Z.next(()=>{Fn(1===N)}));const te=[];for(const xe of r.mutations){const ze=Mc(e,xe.key.path,r.batchId);m.push(h.delete(ze)),te.push(xe.key)}return pe.waitFor(m).next(()=>te)}function hh(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw Mn();e=s.noDocument}return JSON.stringify(e).length}Ao.DEFAULT_COLLECTION_PERCENTILE=10,Ao.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ao.DEFAULT=new Ao(41943040,Ao.DEFAULT_COLLECTION_PERCENTILE,Ao.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ao.DISABLED=new Ao(-1,0,0);class fh{constructor(e,r,a,h){this.userId=e,this.It=r,this.indexManager=a,this.referenceDelegate=h,this.In={}}static oe(e,r,a,h){Fn(""!==e.uid);const m=e.isAuthenticated()?e.uid:"";return new fh(m,r,a,h)}checkEmpty(e){let r=!0;const a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return dl(e).Z({index:"userMutationsIndex",range:a},(h,m,b)=>{r=!1,b.done()}).next(()=>r)}addMutationBatch(e,r,a,h){const m=Ru(e),b=dl(e);return b.add({}).next(N=>{Fn("number"==typeof N);const Z=new sf(N,r,a,h),te=function(Et,Wt,sn){const Un=sn.baseMutations.map(Mi=>rh(Et.re,Mi)),Kn=sn.mutations.map(Mi=>rh(Et.re,Mi));return{userId:Wt,batchId:sn.batchId,localWriteTimeMs:sn.localWriteTime.toMillis(),baseMutations:Un,mutations:Kn}}(this.It,this.userId,Z),xe=[];let ze=new Wi((Et,Wt)=>ur(Et.canonicalString(),Wt.canonicalString()));for(const Et of h){const Wt=Mc(this.userId,Et.key.path,N);ze=ze.add(Et.key.path.popLast()),xe.push(b.put(te)),xe.push(m.put(Wt,ja))}return ze.forEach(Et=>{xe.push(this.indexManager.addToCollectionParentIndex(e,Et))}),e.addOnCommittedListener(()=>{this.In[N]=Z.keys()}),pe.waitFor(xe).next(()=>Z)})}lookupMutationBatch(e,r){return dl(e).get(r).next(a=>a?(Fn(a.userId===this.userId),cu(this.It,a)):null)}Tn(e,r){return this.In[r]?pe.resolve(this.In[r]):this.lookupMutationBatch(e,r).next(a=>{if(a){const h=a.keys();return this.In[r]=h,h}return null})}getNextMutationBatchAfterBatchId(e,r){const a=r+1,h=IDBKeyRange.lowerBound([this.userId,a]);let m=null;return dl(e).Z({index:"userMutationsIndex",range:h},(b,N,Z)=>{N.userId===this.userId&&(Fn(N.batchId>=a),m=cu(this.It,N)),Z.done()}).next(()=>m)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let a=-1;return dl(e).Z({index:"userMutationsIndex",range:r,reverse:!0},(h,m,b)=>{a=m.batchId,b.done()}).next(()=>a)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return dl(e).W("userMutationsIndex",r).next(a=>a.map(h=>cu(this.It,h)))}getAllMutationBatchesAffectingDocumentKey(e,r){const a=oh(this.userId,r.path),h=IDBKeyRange.lowerBound(a),m=[];return Ru(e).Z({range:h},(b,N,Z)=>{const[te,xe,ze]=b,Et=au(xe);if(te===this.userId&&r.path.isEqual(Et))return dl(e).get(ze).next(Wt=>{if(!Wt)throw Mn();Fn(Wt.userId===this.userId),m.push(cu(this.It,Wt))});Z.done()}).next(()=>m)}getAllMutationBatchesAffectingDocumentKeys(e,r){let a=new Wi(ur);const h=[];return r.forEach(m=>{const b=oh(this.userId,m.path),N=IDBKeyRange.lowerBound(b),Z=Ru(e).Z({range:N},(te,xe,ze)=>{const[Et,Wt,sn]=te,Un=au(Wt);Et===this.userId&&m.path.isEqual(Un)?a=a.add(sn):ze.done()});h.push(Z)}),pe.waitFor(h).next(()=>this.En(e,a))}getAllMutationBatchesAffectingQuery(e,r){const a=r.path,h=a.length+1,m=oh(this.userId,a),b=IDBKeyRange.lowerBound(m);let N=new Wi(ur);return Ru(e).Z({range:b},(Z,te,xe)=>{const[ze,Et,Wt]=Z,sn=au(Et);ze===this.userId&&a.isPrefixOf(sn)?sn.length===h&&(N=N.add(Wt)):xe.done()}).next(()=>this.En(e,N))}En(e,r){const a=[],h=[];return r.forEach(m=>{h.push(dl(e).get(m).next(b=>{if(null===b)throw Mn();Fn(b.userId===this.userId),a.push(cu(this.It,b))}))}),pe.waitFor(h).next(()=>a)}removeMutationBatch(e,r){return hp(e.ie,this.userId,r).next(a=>(e.addOnCommittedListener(()=>{this.An(r.batchId)}),pe.forEach(a,h=>this.referenceDelegate.markPotentiallyOrphaned(e,h))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return pe.resolve();const a=IDBKeyRange.lowerBound([this.userId]),h=[];return Ru(e).Z({range:a},(m,b,N)=>{if(m[0]===this.userId){const Z=au(m[1]);h.push(Z)}else N.done()}).next(()=>{Fn(0===h.length)})})}containsKey(e,r){return df(e,this.userId,r)}Rn(e){return fp(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function df(s,e,r){const a=oh(e,r.path),h=a[1],m=IDBKeyRange.lowerBound(a);let b=!1;return Ru(s).Z({range:m,X:!0},(N,Z,te)=>{const[xe,ze,Et]=N;xe===e&&ze===h&&(b=!0),te.done()}).next(()=>b)}function dl(s){return ys(s,"mutations")}function Ru(s){return ys(s,"documentMutations")}function fp(s){return ys(s,"mutationQueues")}class ec{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new ec(0)}static vn(){return new ec(-1)}}class Vm{constructor(e,r){this.referenceDelegate=e,this.It=r}allocateTargetId(e){return this.Vn(e).next(r=>{const a=new ec(r.highestTargetId);return r.highestTargetId=a.next(),this.Sn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(r=>ar.fromTimestamp(new pi(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,a){return this.Vn(e).next(h=>(h.highestListenSequenceNumber=r,a&&(h.lastRemoteSnapshotVersion=a.toTimestamp()),r>h.highestListenSequenceNumber&&(h.highestListenSequenceNumber=r),this.Sn(e,h)))}addTargetData(e,r){return this.Dn(e,r).next(()=>this.Vn(e).next(a=>(a.targetCount+=1,this.Cn(r,a),this.Sn(e,a))))}updateTargetData(e,r){return this.Dn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Mu(e).delete(r.targetId)).next(()=>this.Vn(e)).next(a=>(Fn(a.targetCount>0),a.targetCount-=1,this.Sn(e,a)))}removeTargets(e,r,a){let h=0;const m=[];return Mu(e).Z((b,N)=>{const Z=Zo(N);Z.sequenceNumber<=r&&null===a.get(Z.targetId)&&(h++,m.push(this.removeTargetData(e,Z)))}).next(()=>pe.waitFor(m)).next(()=>h)}forEachTarget(e,r){return Mu(e).Z((a,h)=>{const m=Zo(h);r(m)})}Vn(e){return Tg(e).get("targetGlobalKey").next(r=>(Fn(null!==r),r))}Sn(e,r){return Tg(e).put("targetGlobalKey",r)}Dn(e,r){return Mu(e).put(up(this.It,r))}Cn(e,r){let a=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,a=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,a=!0),a}getTargetCount(e){return this.Vn(e).next(r=>r.targetCount)}getTargetData(e,r){const a=en(r),h=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]);let m=null;return Mu(e).Z({range:h,index:"queryTargetsIndex"},(b,N,Z)=>{const te=Zo(N);nr(r,te.target)&&(m=te,Z.done())}).next(()=>m)}addMatchingKeys(e,r,a){const h=[],m=Ou(e);return r.forEach(b=>{const N=Xs(b.path);h.push(m.put({targetId:a,path:N})),h.push(this.referenceDelegate.addReference(e,a,b))}),pe.waitFor(h)}removeMatchingKeys(e,r,a){const h=Ou(e);return pe.forEach(r,m=>{const b=Xs(m.path);return pe.waitFor([h.delete([a,b]),this.referenceDelegate.removeReference(e,a,m)])})}removeMatchingKeysForTargetId(e,r){const a=Ou(e),h=IDBKeyRange.bound([r],[r+1],!1,!0);return a.delete(h)}getMatchingKeysForTargetId(e,r){const a=IDBKeyRange.bound([r],[r+1],!1,!0),h=Ou(e);let m=Hr();return h.Z({range:a,X:!0},(b,N,Z)=>{const te=au(b[1]),xe=new bn(te);m=m.add(xe)}).next(()=>m)}containsKey(e,r){const a=Xs(r.path),h=IDBKeyRange.bound([a],[po(a)],!1,!0);let m=0;return Ou(e).Z({index:"documentTargetsIndex",X:!0,range:h},([b,N],Z,te)=>{0!==b&&(m++,te.done())}).next(()=>m>0)}se(e,r){return Mu(e).get(r).next(a=>a?Zo(a):null)}}function Mu(s){return ys(s,"targets")}function Tg(s){return ys(s,"targetGlobal")}function Ou(s){return ys(s,"targetDocuments")}function hl([s,e],[r,a]){const h=ur(s,r);return 0===h?ur(e,a):h}class pp{constructor(e){this.xn=e,this.buffer=new Wi(hl),this.Nn=0}kn(){return++this.Nn}On(e){const r=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(r);else{const a=this.buffer.last();hl(r,a)<0&&(this.buffer=this.buffer.delete(a).add(r))}}get maxValue(){return this.buffer.last()[0]}}class gp{constructor(e,r,a){this.garbageCollector=e,this.asyncQueue=r,this.localStore=a,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var r=this;kt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,E.Z)(function*(){r.Mn=null;try{yield r.localStore.collectGarbage(r.garbageCollector)}catch(a){Br(a)?kt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield ge(a)}yield r.Fn(3e5)}))}}class Wa{constructor(e,r){this.$n=e,this.params=r}calculateTargetCount(e,r){return this.$n.Bn(e).next(a=>Math.floor(r/100*a))}nthSequenceNumber(e,r){if(0===r)return pe.resolve(us.at);const a=new pp(r);return this.$n.forEachTarget(e,h=>a.On(h.sequenceNumber)).next(()=>this.$n.Ln(e,h=>a.On(h))).next(()=>a.maxValue)}removeTargets(e,r,a){return this.$n.removeTargets(e,r,a)}removeOrphanedDocuments(e,r){return this.$n.removeOrphanedDocuments(e,r)}collect(e,r){return-1===this.params.cacheSizeCollectionThreshold?(kt("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(Dd)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(kt("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Dd):this.Un(e,r))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,r){let a,h,m,b,N,Z,te;const xe=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ze=>(ze>this.params.maximumSequenceNumbersToCollect?(kt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ze}`),h=this.params.maximumSequenceNumbersToCollect):h=ze,b=Date.now(),this.nthSequenceNumber(e,h))).next(ze=>(a=ze,N=Date.now(),this.removeTargets(e,a,r))).next(ze=>(m=ze,Z=Date.now(),this.removeOrphanedDocuments(e,a))).next(ze=>(te=Date.now(),Rr()<=oe.in.DEBUG&&kt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${b-xe}ms\n\tDetermined least recently used ${h} in `+(N-b)+`ms\n\tRemoved ${m} targets in `+(Z-N)+`ms\n\tRemoved ${ze} documents in `+(te-Z)+`ms\nTotal Duration: ${te-xe}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:m,documentsRemoved:ze})))}}class hf{constructor(e,r){this.db=e,this.garbageCollector=new Wa(this,r)}Bn(e){const r=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(a=>r.next(h=>a+h))}qn(e){let r=0;return this.Ln(e,a=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Ln(e,r){return this.Kn(e,(a,h)=>r(h))}addReference(e,r,a){return Wl(e,a)}removeReference(e,r,a){return Wl(e,a)}removeTargets(e,r,a){return this.db.getTargetCache().removeTargets(e,r,a)}markPotentiallyOrphaned(e,r){return Wl(e,r)}Gn(e,r){return function(a,h){let m=!1;return fp(a).tt(b=>df(a,b,h).next(N=>(N&&(m=!0),pe.resolve(!N)))).next(()=>m)}(e,r)}removeOrphanedDocuments(e,r){const a=this.db.getRemoteDocumentCache().newChangeBuffer(),h=[];let m=0;return this.Kn(e,(b,N)=>{if(N<=r){const Z=this.Gn(e,b).next(te=>{if(!te)return m++,a.getEntry(e,b).next(()=>(a.removeEntry(b,ar.min()),Ou(e).delete([0,Xs(b.path)])))});h.push(Z)}}).next(()=>pe.waitFor(h)).next(()=>a.apply(e)).next(()=>m)}removeTarget(e,r){const a=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,a)}updateLimboDocument(e,r){return Wl(e,r)}Kn(e,r){const a=Ou(e);let h,m=us.at;return a.Z({index:"documentTargetsIndex"},([b,N],{path:Z,sequenceNumber:te})=>{0===b?(m!==us.at&&r(new bn(au(h)),m),m=te,h=Z):m=us.at}).next(()=>{m!==us.at&&r(new bn(au(h)),m)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Wl(s,e){return Ou(s).put((a=s.currentSequenceNumber,{targetId:0,path:Xs(e.path),sequenceNumber:a}));var a}class ph{constructor(){this.changes=new $l(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Pe.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const a=this.changes.get(r);return void 0!==a?pe.resolve(a):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class fl{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,a){return fr(e).put(a)}removeEntry(e,r,a){return fr(e).delete(function(h,m){const b=h.path.toArray();return[b.slice(0,b.length-2),b[b.length-2],kc(m),b[b.length-1]]}(r,a))}updateMetadata(e,r){return this.getMetadata(e).next(a=>(a.byteSize+=r,this.Qn(e,a)))}getEntry(e,r){let a=Pe.newInvalidDocument(r);return fr(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(gh(r))},(h,m)=>{a=this.jn(r,m)}).next(()=>a)}Wn(e,r){let a={size:0,document:Pe.newInvalidDocument(r)};return fr(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(gh(r))},(h,m)=>{a={document:this.jn(r,m),size:hh(m)}}).next(()=>a)}getEntries(e,r){let a=Ta();return this.zn(e,r,(h,m)=>{const b=this.jn(h,m);a=a.insert(h,b)}).next(()=>a)}Hn(e,r){let a=Ta(),h=new Ai(bn.comparator);return this.zn(e,r,(m,b)=>{const N=this.jn(m,b);a=a.insert(m,N),h=h.insert(m,hh(b))}).next(()=>({documents:a,Jn:h}))}zn(e,r,a){if(r.isEmpty())return pe.resolve();let h=new Wi(mh);r.forEach(Z=>h=h.add(Z));const m=IDBKeyRange.bound(gh(h.first()),gh(h.last())),b=h.getIterator();let N=b.getNext();return fr(e).Z({index:"documentKeyIndex",range:m},(Z,te,xe)=>{const ze=bn.fromSegments([...te.prefixPath,te.collectionGroup,te.documentId]);for(;N&&mh(N,ze)<0;)a(N,null),N=b.getNext();N&&N.isEqual(ze)&&(a(N,te),N=b.hasNext()?b.getNext():null),N?xe.j(gh(N)):xe.done()}).next(()=>{for(;N;)a(N,null),N=b.hasNext()?b.getNext():null})}getAllFromCollection(e,r,a){const h=[r.popLast().toArray(),r.lastSegment(),kc(a.readTime),a.documentKey.path.isEmpty()?"":a.documentKey.path.lastSegment()],m=[r.popLast().toArray(),r.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fr(e).W(IDBKeyRange.bound(h,m,!0)).next(b=>{let N=Ta();for(const Z of b){const te=this.jn(bn.fromSegments(Z.prefixPath.concat(Z.collectionGroup,Z.documentId)),Z);N=N.insert(te.key,te)}return N})}getAllFromCollectionGroup(e,r,a,h){let m=Ta();const b=yp(r,a),N=yp(r,A.max());return fr(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(b,N,!0)},(Z,te,xe)=>{const ze=this.jn(bn.fromSegments(te.prefixPath.concat(te.collectionGroup,te.documentId)),te);m=m.insert(ze.key,ze),m.size===h&&xe.done()}).next(()=>m)}newChangeBuffer(e){return new Sg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return mp(e).get("remoteDocumentGlobalKey").next(r=>(Fn(!!r),r))}Qn(e,r){return mp(e).put("remoteDocumentGlobalKey",r)}jn(e,r){if(r){const a=function(s,e){let r;if(e.document)r=zh(s.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const a=bn.fromSegments(e.noDocument.path),h=uu(e.noDocument.readTime);r=Pe.newNoDocument(a,h),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Mn();{const a=bn.fromSegments(e.unknownDocument.path),h=uu(e.unknownDocument.version);r=Pe.newUnknownDocument(a,h)}}return e.readTime&&r.setReadTime(function(a){const h=new pi(a[0],a[1]);return ar.fromTimestamp(h)}(e.readTime)),r}(this.It,r);if(!a.isNoDocument()||!a.version.isEqual(ar.min()))return a}return Pe.newInvalidDocument(e)}}function tc(s){return new fl(s)}class Sg extends ph{constructor(e,r){super(),this.Yn=e,this.trackRemovals=r,this.Xn=new $l(a=>a.toString(),(a,h)=>a.isEqual(h))}applyChanges(e){const r=[];let a=0,h=new Wi((m,b)=>ur(m.canonicalString(),b.canonicalString()));return this.changes.forEach((m,b)=>{const N=this.Xn.get(m);if(r.push(this.Yn.removeEntry(e,m,N.readTime)),b.isValidDocument()){const Z=Uo(this.Yn.It,b);h=h.add(m.path.popLast()),a+=hh(Z)-N.size,r.push(this.Yn.addEntry(e,m,Z))}else if(a-=N.size,this.trackRemovals){const Z=Uo(this.Yn.It,b.convertToNoDocument(ar.min()));r.push(this.Yn.addEntry(e,m,Z))}}),h.forEach(m=>{r.push(this.Yn.indexManager.addToCollectionParentIndex(e,m))}),r.push(this.Yn.updateMetadata(e,a)),pe.waitFor(r)}getFromCache(e,r){return this.Yn.Wn(e,r).next(a=>(this.Xn.set(r,{size:a.size,readTime:a.document.readTime}),a.document))}getAllFromCache(e,r){return this.Yn.Hn(e,r).next(({documents:a,Jn:h})=>(h.forEach((m,b)=>{this.Xn.set(m,{size:b,readTime:a.get(m).readTime})}),a))}}function mp(s){return ys(s,"remoteDocumentGlobal")}function fr(s){return ys(s,"remoteDocumentsV14")}function gh(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function yp(s,e){const r=e.documentKey.path.toArray();return[s,kc(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function mh(s,e){const r=s.path.toArray(),a=e.path.toArray();let h=0;for(let m=0;m<r.length-2&&m<a.length-2;++m)if(h=ur(r[m],a[m]),h)return h;return h=ur(r.length,a.length),h||(h=ur(r[r.length-2],a[a.length-2]),h||ur(r[r.length-1],a[a.length-1]))}class pl{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}class _p{constructor(e,r,a,h){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=a,this.indexManager=h}getDocument(e,r){let a=null;return this.documentOverlayCache.getOverlay(e,r).next(h=>(a=h,this.getBaseDocument(e,r,a))).next(h=>(null!==a&&Cu(a.mutation,h,ni.empty(),pi.now()),h))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(a=>this.getLocalViewOfDocuments(e,a,Hr()).next(()=>a))}getLocalViewOfDocuments(e,r,a=Hr()){const h=Sa();return this.populateOverlays(e,h,r).next(()=>this.computeViews(e,r,h,a).next(m=>{let b=Ul();return m.forEach((N,Z)=>{b=b.insert(N,Z.overlayedDocument)}),b}))}getOverlayedDocuments(e,r){const a=Sa();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,Hr()))}populateOverlays(e,r,a){const h=[];return a.forEach(m=>{r.has(m)||h.push(m)}),this.documentOverlayCache.getOverlays(e,h).next(m=>{m.forEach((b,N)=>{r.set(b,N)})})}computeViews(e,r,a,h){let m=Ta();const b=yd(),N=yd();return r.forEach((Z,te)=>{const xe=a.get(te.key);h.has(te.key)&&(void 0===xe||xe.mutation instanceof Bl)?m=m.insert(te.key,te):void 0!==xe&&(b.set(te.key,xe.mutation.getFieldMask()),Cu(xe.mutation,te,xe.mutation.getFieldMask(),pi.now()))}),this.recalculateAndSaveOverlays(e,m).next(Z=>(Z.forEach((te,xe)=>b.set(te,xe)),r.forEach((te,xe)=>{var ze;return N.set(te,new pl(xe,null!==(ze=b.get(te))&&void 0!==ze?ze:null))}),N))}recalculateAndSaveOverlays(e,r){const a=yd();let h=new Ai((b,N)=>b-N),m=Hr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(b=>{for(const N of b)N.keys().forEach(Z=>{const te=r.get(Z);if(null===te)return;let xe=a.get(Z)||ni.empty();xe=N.applyToLocalView(te,xe),a.set(Z,xe);const ze=(h.get(N.batchId)||Hr()).add(Z);h=h.insert(N.batchId,ze)})}).next(()=>{const b=[],N=h.getReverseIterator();for(;N.hasNext();){const Z=N.getNext(),te=Z.key,xe=Z.value,ze=Gh();xe.forEach(Et=>{if(!m.has(Et)){const Wt=jh(r.get(Et),a.get(Et));null!==Wt&&ze.set(Et,Wt),m=m.add(Et)}}),b.push(this.documentOverlayCache.saveOverlays(e,te,ze))}return pe.waitFor(b)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,r,a){return bn.isDocumentKey((h=r).path)&&null===h.collectionGroup&&0===h.filters.length?this.getDocumentsMatchingDocumentQuery(e,r.path):Ic(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,a):this.getDocumentsMatchingCollectionQuery(e,r,a);var h}getNextDocuments(e,r,a,h){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,a,h).next(m=>{const b=h-m.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,a.largestBatchId,h-m.size):pe.resolve(Sa());let N=-1,Z=m;return b.next(te=>pe.forEach(te,(xe,ze)=>(N<ze.largestBatchId&&(N=ze.largestBatchId),m.get(xe)?pe.resolve():this.getBaseDocument(e,xe,ze).next(Et=>{Z=Z.insert(xe,Et)}))).next(()=>this.populateOverlays(e,te,m)).next(()=>this.computeViews(e,Z,te,Hr())).next(xe=>({batchId:N,changes:md(xe)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new bn(r)).next(a=>{let h=Ul();return a.isFoundDocument()&&(h=h.insert(a.key,a)),h})}getDocumentsMatchingCollectionGroupQuery(e,r,a){const h=r.collectionGroup;let m=Ul();return this.indexManager.getCollectionParents(e,h).next(b=>pe.forEach(b,N=>{const Z=(te=r,xe=N.child(h),new kl(xe,null,te.explicitOrderBy.slice(),te.filters.slice(),te.limit,te.limitType,te.startAt,te.endAt));var te,xe;return this.getDocumentsMatchingCollectionQuery(e,Z,a).next(te=>{te.forEach((xe,ze)=>{m=m.insert(xe,ze)})})}).next(()=>m))}getDocumentsMatchingCollectionQuery(e,r,a){let h;return this.remoteDocumentCache.getAllFromCollection(e,r.path,a).next(m=>(h=m,this.documentOverlayCache.getOverlaysForCollection(e,r.path,a.largestBatchId))).next(m=>{m.forEach((N,Z)=>{const te=Z.getKey();null===h.get(te)&&(h=h.insert(te,Pe.newInvalidDocument(te)))});let b=Ul();return h.forEach((N,Z)=>{const te=m.get(N);void 0!==te&&Cu(te.mutation,Z,ni.empty(),pi.now()),qu(r,Z)&&(b=b.insert(N,Z))}),b})}getBaseDocument(e,r,a){return null===a||1===a.mutation.type?this.remoteDocumentCache.getEntry(e,r):pe.resolve(Pe.newInvalidDocument(r))}}class Bm{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,r){return pe.resolve(this.Zn.get(r))}saveBundleMetadata(e,r){var a;return this.Zn.set(r.id,{id:(a=r).id,version:a.version,createTime:Qs(a.createTime)}),pe.resolve()}getNamedQuery(e,r){return pe.resolve(this.ts.get(r))}saveNamedQuery(e,r){return this.ts.set(r.name,{name:(a=r).name,query:cp(a.bundledQuery),readTime:Qs(a.readTime)}),pe.resolve();var a}}class vp{constructor(){this.overlays=new Ai(bn.comparator),this.es=new Map}getOverlay(e,r){return pe.resolve(this.overlays.get(r))}getOverlays(e,r){const a=Sa();return pe.forEach(r,h=>this.getOverlay(e,h).next(m=>{null!==m&&a.set(h,m)})).next(()=>a)}saveOverlays(e,r,a){return a.forEach((h,m)=>{this.ue(e,r,m)}),pe.resolve()}removeOverlaysForBatchId(e,r,a){const h=this.es.get(a);return void 0!==h&&(h.forEach(m=>this.overlays=this.overlays.remove(m)),this.es.delete(a)),pe.resolve()}getOverlaysForCollection(e,r,a){const h=Sa(),m=r.length+1,b=new bn(r.child("")),N=this.overlays.getIteratorFrom(b);for(;N.hasNext();){const Z=N.getNext().value,te=Z.getKey();if(!r.isPrefixOf(te.path))break;te.path.length===m&&Z.largestBatchId>a&&h.set(Z.getKey(),Z)}return pe.resolve(h)}getOverlaysForCollectionGroup(e,r,a,h){let m=new Ai((te,xe)=>te-xe);const b=this.overlays.getIterator();for(;b.hasNext();){const te=b.getNext().value;if(te.getKey().getCollectionGroup()===r&&te.largestBatchId>a){let xe=m.get(te.largestBatchId);null===xe&&(xe=Sa(),m=m.insert(te.largestBatchId,xe)),xe.set(te.getKey(),te)}}const N=Sa(),Z=m.getIterator();for(;Z.hasNext()&&(Z.getNext().value.forEach((te,xe)=>N.set(te,xe)),!(N.size()>=h)););return pe.resolve(N)}ue(e,r,a){const h=this.overlays.get(a.key);if(null!==h){const b=this.es.get(h.largestBatchId).delete(a.key);this.es.set(h.largestBatchId,b)}this.overlays=this.overlays.insert(a.key,new Nc(r,a));let m=this.es.get(r);void 0===m&&(m=Hr(),this.es.set(r,m)),this.es.set(r,m.add(a.key))}}class Gl{constructor(){this.ns=new Wi(Ms.ss),this.rs=new Wi(Ms.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,r){const a=new Ms(e,r);this.ns=this.ns.add(a),this.rs=this.rs.add(a)}us(e,r){e.forEach(a=>this.addReference(a,r))}removeReference(e,r){this.cs(new Ms(e,r))}hs(e,r){e.forEach(a=>this.removeReference(a,r))}ls(e){const r=new bn(new Jr([])),a=new Ms(r,e),h=new Ms(r,e+1),m=[];return this.rs.forEachInRange([a,h],b=>{this.cs(b),m.push(b.key)}),m}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const r=new bn(new Jr([])),a=new Ms(r,e),h=new Ms(r,e+1);let m=Hr();return this.rs.forEachInRange([a,h],b=>{m=m.add(b.key)}),m}containsKey(e){const r=new Ms(e,0),a=this.ns.firstAfterOrEqual(r);return null!==a&&e.isEqual(a.key)}}class Ms{constructor(e,r){this.key=e,this._s=r}static ss(e,r){return bn.comparator(e.key,r.key)||ur(e._s,r._s)}static os(e,r){return ur(e._s,r._s)||bn.comparator(e.key,r.key)}}class yh{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.ws=1,this.gs=new Wi(Ms.ss)}checkEmpty(e){return pe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,r,a,h){const m=this.ws;this.ws++;const b=new sf(m,r,a,h);this.mutationQueue.push(b);for(const N of h)this.gs=this.gs.add(new Ms(N.key,m)),this.indexManager.addToCollectionParentIndex(e,N.key.path.popLast());return pe.resolve(b)}lookupMutationBatch(e,r){return pe.resolve(this.ys(r))}getNextMutationBatchAfterBatchId(e,r){const h=this.ps(r+1),m=h<0?0:h;return pe.resolve(this.mutationQueue.length>m?this.mutationQueue[m]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const a=new Ms(r,0),h=new Ms(r,Number.POSITIVE_INFINITY),m=[];return this.gs.forEachInRange([a,h],b=>{const N=this.ys(b._s);m.push(N)}),pe.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,r){let a=new Wi(ur);return r.forEach(h=>{const m=new Ms(h,0),b=new Ms(h,Number.POSITIVE_INFINITY);this.gs.forEachInRange([m,b],N=>{a=a.add(N._s)})}),pe.resolve(this.Is(a))}getAllMutationBatchesAffectingQuery(e,r){const a=r.path,h=a.length+1;let m=a;bn.isDocumentKey(m)||(m=m.child(""));const b=new Ms(new bn(m),0);let N=new Wi(ur);return this.gs.forEachWhile(Z=>{const te=Z.key.path;return!!a.isPrefixOf(te)&&(te.length===h&&(N=N.add(Z._s)),!0)},b),pe.resolve(this.Is(N))}Is(e){const r=[];return e.forEach(a=>{const h=this.ys(a);null!==h&&r.push(h)}),r}removeMutationBatch(e,r){Fn(0===this.Ts(r.batchId,"removed")),this.mutationQueue.shift();let a=this.gs;return pe.forEach(r.mutations,h=>{const m=new Ms(h.key,r.batchId);return a=a.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,h.key)}).next(()=>{this.gs=a})}An(e){}containsKey(e,r){const a=new Ms(r,0),h=this.gs.firstAfterOrEqual(a);return pe.resolve(r.isEqual(h&&h.key))}performConsistencyCheck(e){return pe.resolve()}Ts(e,r){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const r=this.ps(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class jc{constructor(e){this.Es=e,this.docs=new Ai(bn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const a=r.key,h=this.docs.get(a),m=h?h.size:0,b=this.Es(r);return this.docs=this.docs.insert(a,{document:r.mutableCopy(),size:b}),this.size+=b-m,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const a=this.docs.get(r);return pe.resolve(a?a.document.mutableCopy():Pe.newInvalidDocument(r))}getEntries(e,r){let a=Ta();return r.forEach(h=>{const m=this.docs.get(h);a=a.insert(h,m?m.document.mutableCopy():Pe.newInvalidDocument(h))}),pe.resolve(a)}getAllFromCollection(e,r,a){let h=Ta();const m=new bn(r.child("")),b=this.docs.getIteratorFrom(m);for(;b.hasNext();){const{key:N,value:{document:Z}}=b.getNext();if(!r.isPrefixOf(N.path))break;N.path.length>r.length+1||S(F(Z),a)<=0||(h=h.insert(Z.key,Z.mutableCopy()))}return pe.resolve(h)}getAllFromCollectionGroup(e,r,a,h){Mn()}As(e,r){return pe.forEach(this.docs,a=>r(a))}newChangeBuffer(e){return new Ag(this)}getSize(e){return pe.resolve(this.size)}}class Ag extends ph{constructor(e){super(),this.Yn=e}applyChanges(e){const r=[];return this.changes.forEach((a,h)=>{h.isValidDocument()?r.push(this.Yn.addEntry(e,h)):this.Yn.removeEntry(a)}),pe.waitFor(r)}getFromCache(e,r){return this.Yn.getEntry(e,r)}getAllFromCache(e,r){return this.Yn.getEntries(e,r)}}class Ep{constructor(e){this.persistence=e,this.Rs=new $l(r=>en(r),nr),this.lastRemoteSnapshotVersion=ar.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Gl,this.targetCount=0,this.vs=ec.Pn()}forEachTarget(e,r){return this.Rs.forEach((a,h)=>r(h)),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,r,a){return a&&(this.lastRemoteSnapshotVersion=a),r>this.bs&&(this.bs=r),pe.resolve()}Dn(e){this.Rs.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.vs=new ec(r),this.highestTargetId=r),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,r){return this.Dn(r),this.targetCount+=1,pe.resolve()}updateTargetData(e,r){return this.Dn(r),pe.resolve()}removeTargetData(e,r){return this.Rs.delete(r.target),this.Ps.ls(r.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,r,a){let h=0;const m=[];return this.Rs.forEach((b,N)=>{N.sequenceNumber<=r&&null===a.get(N.targetId)&&(this.Rs.delete(b),m.push(this.removeMatchingKeysForTargetId(e,N.targetId)),h++)}),pe.waitFor(m).next(()=>h)}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,r){const a=this.Rs.get(r)||null;return pe.resolve(a)}addMatchingKeys(e,r,a){return this.Ps.us(r,a),pe.resolve()}removeMatchingKeys(e,r,a){this.Ps.hs(r,a);const h=this.persistence.referenceDelegate,m=[];return h&&r.forEach(b=>{m.push(h.markPotentiallyOrphaned(e,b))}),pe.waitFor(m)}removeMatchingKeysForTargetId(e,r){return this.Ps.ls(r),pe.resolve()}getMatchingKeysForTargetId(e,r){const a=this.Ps.ds(r);return pe.resolve(a)}containsKey(e,r){return pe.resolve(this.Ps.containsKey(r))}}class xg{constructor(e,r){this.Vs={},this.overlays={},this.Ss=new us(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new Ep(this),this.indexManager=new Dg,this.remoteDocumentCache=new jc(a=>this.referenceDelegate.xs(a)),this.It=new Pc(r),this.Ns=new Bm(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new vp,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let a=this.Vs[e.toKey()];return a||(a=new yh(r,this.referenceDelegate),this.Vs[e.toKey()]=a),a}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,r,a){kt("MemoryPersistence","Starting transaction:",e);const h=new fu(this.Ss.next());return this.referenceDelegate.ks(),a(h).next(m=>this.referenceDelegate.Os(h).next(()=>m)).toPromise().then(m=>(h.raiseOnCommittedEvent(),m))}Ms(e,r){return pe.or(Object.values(this.Vs).map(a=>()=>a.containsKey(e,r)))}}class fu extends X{constructor(e){super(),this.currentSequenceNumber=e}}class nc{constructor(e){this.persistence=e,this.Fs=new Gl,this.$s=null}static Bs(e){return new nc(e)}get Ls(){if(this.$s)return this.$s;throw Mn()}addReference(e,r,a){return this.Fs.addReference(a,r),this.Ls.delete(a.toString()),pe.resolve()}removeReference(e,r,a){return this.Fs.removeReference(a,r),this.Ls.add(a.toString()),pe.resolve()}markPotentiallyOrphaned(e,r){return this.Ls.add(r.toString()),pe.resolve()}removeTarget(e,r){this.Fs.ls(r.targetId).forEach(h=>this.Ls.add(h.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,r.targetId).next(h=>{h.forEach(m=>this.Ls.add(m.toString()))}).next(()=>a.removeTargetData(e,r))}ks(){this.$s=new Set}Os(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.Ls,a=>{const h=bn.fromPath(a);return this.Us(e,h).next(m=>{m||r.removeEntry(h,ar.min())})}).next(()=>(this.$s=null,r.apply(e)))}updateLimboDocument(e,r){return this.Us(e,r).next(a=>{a?this.Ls.delete(r.toString()):this.Ls.add(r.toString())})}xs(e){return 0}Us(e,r){return pe.or([()=>pe.resolve(this.Fs.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ms(e,r)])}}class _h{constructor(e){this.It=e}$(e,r,a,h){const m=new Pt("createOrUpgrade",r);var N;a<1&&h>=1&&(e.createObjectStore("owner"),(N=e).createObjectStore("mutationQueues",{keyPath:"userId"}),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mg,{unique:!0}),N.createObjectStore("documentMutations"),Ga(e),function(N){N.createObjectStore("remoteDocuments")}(e));let b=pe.resolve();return a<3&&h>=3&&(0!==a&&(function(N){N.deleteObjectStore("targetDocuments"),N.deleteObjectStore("targets"),N.deleteObjectStore("targetGlobal")}(e),Ga(e)),b=b.next(()=>function(N){const Z=N.store("targetGlobal"),te={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ar.min().toTimestamp(),targetCount:0};return Z.put("targetGlobalKey",te)}(m))),a<4&&h>=4&&(0!==a&&(b=b.next(()=>function(N,Z){return Z.store("mutations").W().next(te=>{N.deleteObjectStore("mutations"),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mg,{unique:!0});const xe=Z.store("mutations"),ze=te.map(Et=>xe.put(Et));return pe.waitFor(ze)})}(e,m))),b=b.next(()=>{!function(N){N.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),a<5&&h>=5&&(b=b.next(()=>this.qs(m))),a<6&&h>=6&&(b=b.next(()=>(function(N){N.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(m)))),a<7&&h>=7&&(b=b.next(()=>this.Gs(m))),a<8&&h>=8&&(b=b.next(()=>this.Qs(e,m))),a<9&&h>=9&&(b=b.next(()=>{!function(N){N.objectStoreNames.contains("remoteDocumentChanges")&&N.deleteObjectStore("remoteDocumentChanges")}(e)})),a<10&&h>=10&&(b=b.next(()=>this.js(m))),a<11&&h>=11&&(b=b.next(()=>{(function(N){N.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(N){N.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),a<12&&h>=12&&(b=b.next(()=>{!function(N){const Z=N.createObjectStore("documentOverlays",{keyPath:zy});Z.createIndex("collectionPathOverlayIndex",qy,{unique:!1}),Z.createIndex("collectionGroupOverlayIndex",vg,{unique:!1})}(e)})),a<13&&h>=13&&(b=b.next(()=>function(N){const Z=N.createObjectStore("remoteDocumentsV14",{keyPath:Jh});Z.createIndex("documentKeyIndex",ef),Z.createIndex("collectionGroupIndex",Oc)}(e)).next(()=>this.Ws(e,m)).next(()=>e.deleteObjectStore("remoteDocuments"))),a<14&&h>=14&&(b=b.next(()=>this.zs(e,m))),a<15&&h>=15&&(b=b.next(()=>function(N){N.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),N.createObjectStore("indexState",{keyPath:_g}).createIndex("sequenceNumberIndex",Lm,{unique:!1}),N.createObjectStore("indexEntries",{keyPath:lu}).createIndex("documentKeyIndex",wl,{unique:!1})}(e))),b}Ks(e){let r=0;return e.store("remoteDocuments").Z((a,h)=>{r+=hh(h)}).next(()=>{const a={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",a)})}qs(e){const r=e.store("mutationQueues"),a=e.store("mutations");return r.W().next(h=>pe.forEach(h,m=>{const b=IDBKeyRange.bound([m.userId,-1],[m.userId,m.lastAcknowledgedBatchId]);return a.W("userMutationsIndex",b).next(N=>pe.forEach(N,Z=>{Fn(Z.userId===m.userId);const te=cu(this.It,Z);return hp(e,m.userId,te).next(()=>{})}))}))}Gs(e){const r=e.store("targetDocuments"),a=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(h=>{const m=[];return a.Z((b,N)=>{const Z=new Jr(b),te=[0,Xs(Z)];m.push(r.get(te).next(xe=>xe?pe.resolve():r.put({targetId:0,path:Xs(Z),sequenceNumber:h.highestListenSequenceNumber})))}).next(()=>pe.waitFor(m))})}Qs(e,r){e.createObjectStore("collectionParents",{keyPath:nf});const a=r.store("collectionParents"),h=new $c,m=b=>{if(h.add(b)){const N=b.lastSegment(),Z=b.popLast();return a.put({collectionId:N,parent:Xs(Z)})}};return r.store("remoteDocuments").Z({X:!0},(b,N)=>{const Z=new Jr(b);return m(Z.popLast())}).next(()=>r.store("documentMutations").Z({X:!0},([b,N,Z],te)=>{const xe=au(N);return m(xe.popLast())}))}js(e){const r=e.store("targets");return r.Z((a,h)=>{const m=Zo(h),b=up(this.It,m);return r.put(b)})}Ws(e,r){const a=r.store("remoteDocuments"),h=[];return a.Z((m,b)=>{const N=r.store("remoteDocumentsV14"),Z=(te=b,te.document?new bn(Jr.fromString(te.document.name).popFirst(5)):te.noDocument?bn.fromSegments(te.noDocument.path):te.unknownDocument?bn.fromSegments(te.unknownDocument.path):Mn()).path.toArray();var te;const xe={prefixPath:Z.slice(0,Z.length-2),collectionGroup:Z[Z.length-2],documentId:Z[Z.length-1],readTime:b.readTime||[0,0],unknownDocument:b.unknownDocument,noDocument:b.noDocument,document:b.document,hasCommittedMutations:!!b.hasCommittedMutations};h.push(N.put(xe))}).next(()=>pe.waitFor(h))}zs(e,r){const a=r.store("mutations"),h=tc(this.It),m=new xg(nc.Bs,this.It.re);return a.W().next(b=>{const N=new Map;return b.forEach(Z=>{var te;let xe=null!==(te=N.get(Z.userId))&&void 0!==te?te:Hr();cu(this.It,Z).keys().forEach(ze=>xe=xe.add(ze)),N.set(Z.userId,xe)}),pe.forEach(N,(Z,te)=>{const xe=new un(te),ze=Lc.oe(this.It,xe),Et=m.getIndexManager(xe),Wt=fh.oe(xe,this.It,Et,m.referenceDelegate);return new _p(h,Wt,ze,Et).recalculateAndSaveOverlaysForDocumentKeys(new ul(r,us.at),Z).next()})})}}function Ga(s){s.createObjectStore("targetDocuments",{keyPath:Fm}).createIndex("documentTargetsIndex",yg,{unique:!0}),s.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",tf,{unique:!0}),s.createObjectStore("targetGlobal")}const Ip="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class bp{constructor(e,r,a,h,m,b,N,Z,te,xe,ze=15){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=a,this.Hs=m,this.window=b,this.document=N,this.Js=te,this.Ys=xe,this.Xs=ze,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=Et=>Promise.resolve(),!bp.C())throw new zt(et.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new hf(this,h),this.ii=r+"main",this.It=new Pc(Z),this.ri=new Cn(this.ii,this.Xs,new _h(this.It)),this.Cs=new Vm(this.referenceDelegate,this.It),this.remoteDocumentCache=tc(this.It),this.Ns=new bg,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===xe&&Jn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new zt(et.FAILED_PRECONDITION,Ip);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new us(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var r=this;return this.si=function(){var a=(0,E.Z)(function*(h){if(r.started)return e(h)});return function(h){return a.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var r=(0,E.Z)(function*(a){null===a.newVersion&&(yield e())});return function(a){return r.apply(this,arguments)}}())}setNetworkEnabled(e){var r=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,E.Z)(function*(){r.started&&(yield r.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Cp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(r=>{r||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(r=>this.isPrimary&&!r?this._i(e).next(()=>!1):!!r&&this.wi(e).next(()=>!0))).catch(e=>{if(Br(e))return kt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return kt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Td(e).get("owner").next(r=>pe.resolve(this.mi(r)))}gi(e){return Cp(e).delete(this.clientId)}yi(){var e=this;return(0,E.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const r=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",a=>{const h=ys(a,"clientMetadata");return h.W().next(m=>{const b=e.Ii(m,18e5),N=m.filter(Z=>-1===b.indexOf(Z));return pe.forEach(N,Z=>h.delete(Z.clientId)).next(()=>N)})}).catch(()=>[]);if(e.oi)for(const a of r)e.oi.removeItem(e.Ti(a.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?pe.resolve(!0):Td(e).get("owner").next(r=>{if(null!==r&&this.pi(r.leaseTimestampMs,5e3)&&!this.Ei(r.ownerId)){if(this.mi(r)&&this.networkEnabled)return!0;if(!this.mi(r)){if(!r.allowTabSynchronization)throw new zt(et.FAILED_PRECONDITION,Ip);return!1}}return!(!this.networkEnabled||!this.inForeground)||Cp(e).W().next(a=>void 0===this.Ii(a,5e3).find(h=>{if(this.clientId!==h.clientId){const b=!this.inForeground&&h.inForeground,N=this.networkEnabled===h.networkEnabled;if(!this.networkEnabled&&h.networkEnabled||b&&N)return!0}return!1}))}).next(r=>(this.isPrimary!==r&&kt("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var e=this;return(0,E.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],r=>{const a=new ul(r,us.at);return e._i(a).next(()=>e.gi(a))}),e.ri.close(),e.Pi()})()}Ii(e,r){return e.filter(a=>this.pi(a.updateTimeMs,r)&&!this.Ei(a.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Cp(e).W().next(r=>this.Ii(r,18e5).map(a=>a.clientId)))}get started(){return this.Ds}getMutationQueue(e,r){return fh.oe(e,this.It,r,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new cf(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Lc.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,r,a){kt("IndexedDbPersistence","Starting transaction:",e);const h="readonly"===r?"readonly":"readwrite",m=15===(b=this.Xs)?lh:14===b?rf:13===b?ah:12===b?ll:11===b?lp:void Mn();var b;let N;return this.ri.runTransaction(e,h,m,Z=>(N=new ul(Z,this.Ss?this.Ss.next():us.at),"readwrite-primary"===r?this.fi(N).next(te=>!!te||this.di(N)).next(te=>{if(!te)throw Jn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new zt(et.FAILED_PRECONDITION,U);return a(N)}).next(te=>this.wi(N).next(()=>te)):this.Vi(N).next(()=>a(N)))).then(Z=>(N.raiseOnCommittedEvent(),Z))}Vi(e){return Td(e).get("owner").next(r=>{if(null!==r&&this.pi(r.leaseTimestampMs,5e3)&&!this.Ei(r.ownerId)&&!this.mi(r)&&!(this.Ys||this.allowTabSynchronization&&r.allowTabSynchronization))throw new zt(et.FAILED_PRECONDITION,Ip)})}wi(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Td(e).put("owner",r)}static C(){return Cn.C()}_i(e){const r=Td(e);return r.get("owner").next(a=>this.mi(a)?(kt("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):pe.resolve())}pi(e,r){const a=Date.now();return!(e<a-r||e>a&&(Jn(`Detected an update time that is in the future: ${e} > ${a}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,ae.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var r;try{const a=null!==(null===(r=this.oi)||void 0===r?void 0:r.getItem(this.Ti(e)));return kt("IndexedDbPersistence",`Client '${e}' ${a?"is":"is not"} zombied in LocalStorage`),a}catch(a){return Jn("IndexedDbPersistence","Failed to get zombied client id.",a),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Jn("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Td(s){return ys(s,"owner")}function Cp(s){return ys(s,"clientMetadata")}function ff(s,e){let r=s.projectId;return s.isDefaultDatabase||(r+="."+s.database),"firestore/"+e+"/"+r+"/"}class Rg{constructor(e,r,a,h){this.targetId=e,this.fromCache=r,this.Si=a,this.Di=h}static Ci(e,r){let a=Hr(),h=Hr();for(const m of r.docChanges)switch(m.type){case 0:a=a.add(m.doc.key);break;case 1:h=h.add(m.doc.key)}return new Rg(e,r.fromCache,a,h)}}class wp{constructor(){this.xi=!1}initialize(e,r){this.Ni=e,this.indexManager=r,this.xi=!0}getDocumentsMatchingQuery(e,r,a,h){return this.ki(e,r).next(m=>m||this.Oi(e,r,h,a)).next(m=>m||this.Mi(e,r))}ki(e,r){if(Fl(r))return pe.resolve(null);let a=Rs(r);return this.indexManager.getIndexType(e,a).next(h=>0===h?null:(null!==r.limit&&1===h&&(r=ol(r,null,"F"),a=Rs(r)),this.indexManager.getDocumentsMatchingTarget(e,a).next(m=>{const b=Hr(...m);return this.Ni.getDocuments(e,b).next(N=>this.indexManager.getMinOffset(e,a).next(Z=>{const te=this.Fi(r,N);return this.$i(r,te,b,Z.readTime)?this.ki(e,ol(r,null,"F")):this.Bi(e,te,r,Z)}))})))}Oi(e,r,a,h){return Fl(r)||h.isEqual(ar.min())?this.Mi(e,r):this.Ni.getDocuments(e,a).next(m=>{const b=this.Fi(r,m);return this.$i(r,b,a,h)?this.Mi(e,r):(Rr()<=oe.in.DEBUG&&kt("QueryEngine","Re-using previous result from %s to execute query: %s",h.toString(),zu(r)),this.Bi(e,b,r,go(h,-1)))})}Fi(e,r){let a=new Wi($h(e));return r.forEach((h,m)=>{qu(e,m)&&(a=a.add(m))}),a}$i(e,r,a,h){if(null===e.limit)return!1;if(a.size!==r.size)return!0;const m="F"===e.limitType?r.last():r.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(h)>0)}Mi(e,r){return Rr()<=oe.in.DEBUG&&kt("QueryEngine","Using full collection scan to execute query:",zu(r)),this.Ni.getDocumentsMatchingQuery(e,r,A.min())}Bi(e,r,a,h){return this.Ni.getDocumentsMatchingQuery(e,a,h).next(m=>(r.forEach(b=>{m=m.insert(b.key,b)}),m))}}class Mg{constructor(e,r,a,h){this.persistence=e,this.Li=r,this.It=h,this.Ui=new Ai(ur),this.qi=new $l(m=>en(m),nr),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(a)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _p(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ui))}}function Og(s,e,r,a){return new Mg(s,e,r,a)}function pf(s,e){return Ng.apply(this,arguments)}function Ng(){return Ng=(0,E.Z)(function*(s,e){const r=Jt(s);return yield r.persistence.runTransaction("Handle user change","readonly",a=>{let h;return r.mutationQueue.getAllMutationBatches(a).next(m=>(h=m,r.Qi(e),r.mutationQueue.getAllMutationBatches(a))).next(m=>{const b=[],N=[];let Z=Hr();for(const te of h){b.push(te.batchId);for(const xe of te.mutations)Z=Z.add(xe.key)}for(const te of m){N.push(te.batchId);for(const xe of te.mutations)Z=Z.add(xe.key)}return r.localDocuments.getDocuments(a,Z).next(te=>({ji:te,removedBatchIds:b,addedBatchIds:N}))})})}),Ng.apply(this,arguments)}function Ky(s,e){const r=Jt(s);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const h=e.batch.keys(),m=r.Gi.newChangeBuffer({trackRemovals:!0});return function(b,N,Z,te){const xe=Z.batch,ze=xe.keys();let Et=pe.resolve();return ze.forEach(Wt=>{Et=Et.next(()=>te.getEntry(N,Wt)).next(sn=>{const Un=Z.docVersions.get(Wt);Fn(null!==Un),sn.version.compareTo(Un)<0&&(xe.applyToRemoteDocument(sn,Z),sn.isValidDocument()&&(sn.setReadTime(Z.commitVersion),te.addEntry(sn)))})}),Et.next(()=>b.mutationQueue.removeMutationBatch(N,xe))}(r,a,e,m).next(()=>m.apply(a)).next(()=>r.mutationQueue.performConsistencyCheck(a)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(a,h,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(b){let N=Hr();for(let Z=0;Z<b.mutationResults.length;++Z)b.mutationResults[Z].transformResults.length>0&&(N=N.add(b.batch.mutations[Z].key));return N}(e))).next(()=>r.localDocuments.getDocuments(a,h))})}function $m(s){const e=Jt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Cs.getLastRemoteSnapshotVersion(r))}function Zy(s,e){const r=Jt(s),a=e.snapshotVersion;let h=r.Ui;return r.persistence.runTransaction("Apply remote event","readwrite-primary",m=>{const b=r.Gi.newChangeBuffer({trackRemovals:!0});h=r.Ui;const N=[];e.targetChanges.forEach((xe,ze)=>{const Et=h.get(ze);if(!Et)return;N.push(r.Cs.removeMatchingKeys(m,xe.removedDocuments,ze).next(()=>r.Cs.addMatchingKeys(m,xe.addedDocuments,ze)));let Wt=Et.withSequenceNumber(m.currentSequenceNumber);var sn,Un,Kn;e.targetMismatches.has(ze)?Wt=Wt.withResumeToken(Ys.EMPTY_BYTE_STRING,ar.min()).withLastLimboFreeSnapshotVersion(ar.min()):xe.resumeToken.approximateByteSize()>0&&(Wt=Wt.withResumeToken(xe.resumeToken,a)),h=h.insert(ze,Wt),Un=Wt,Kn=xe,(0===(sn=Et).resumeToken.approximateByteSize()||Un.snapshotVersion.toMicroseconds()-sn.snapshotVersion.toMicroseconds()>=3e8||Kn.addedDocuments.size+Kn.modifiedDocuments.size+Kn.removedDocuments.size>0)&&N.push(r.Cs.updateTargetData(m,Wt))});let Z=Ta(),te=Hr();if(e.documentUpdates.forEach(xe=>{e.resolvedLimboDocuments.has(xe)&&N.push(r.persistence.referenceDelegate.updateLimboDocument(m,xe))}),N.push(Um(m,b,e.documentUpdates).next(xe=>{Z=xe.Wi,te=xe.zi})),!a.isEqual(ar.min())){const xe=r.Cs.getLastRemoteSnapshotVersion(m).next(ze=>r.Cs.setTargetsMetadata(m,m.currentSequenceNumber,a));N.push(xe)}return pe.waitFor(N).next(()=>b.apply(m)).next(()=>r.localDocuments.getLocalViewOfDocuments(m,Z,te)).next(()=>Z)}).then(m=>(r.Ui=h,m))}function Um(s,e,r){let a=Hr(),h=Hr();return r.forEach(m=>a=a.add(m)),e.getEntries(s,a).next(m=>{let b=Ta();return r.forEach((N,Z)=>{const te=m.get(N);Z.isFoundDocument()!==te.isFoundDocument()&&(h=h.add(N)),Z.isNoDocument()&&Z.version.isEqual(ar.min())?(e.removeEntry(N,Z.readTime),b=b.insert(N,Z)):!te.isValidDocument()||Z.version.compareTo(te.version)>0||0===Z.version.compareTo(te.version)&&te.hasPendingWrites?(e.addEntry(Z),b=b.insert(N,Z)):kt("LocalStore","Ignoring outdated watch update for ",N,". Current version:",te.version," Watch version:",Z.version)}),{Wi:b,zi:h}})}function Qy(s,e){const r=Jt(s);return r.persistence.runTransaction("Get next mutation batch","readonly",a=>(void 0===e&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function vh(s,e){const r=Jt(s);return r.persistence.runTransaction("Allocate target","readwrite",a=>{let h;return r.Cs.getTargetData(a,e).next(m=>m?(h=m,pe.resolve(h)):r.Cs.allocateTargetId(a).next(b=>(h=new Ha(e,b,0,a.currentSequenceNumber),r.Cs.addTargetData(a,h).next(()=>h))))}).then(a=>{const h=r.Ui.get(a.targetId);return(null===h||a.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(r.Ui=r.Ui.insert(a.targetId,a),r.qi.set(e,a.targetId)),a})}function Eh(s,e,r){return Pg.apply(this,arguments)}function Pg(){return Pg=(0,E.Z)(function*(s,e,r){const a=Jt(s),h=a.Ui.get(e),m=r?"readwrite":"readwrite-primary";try{r||(yield a.persistence.runTransaction("Release target",m,b=>a.persistence.referenceDelegate.removeTarget(b,h)))}catch(b){if(!Br(b))throw b;kt("LocalStore",`Failed to update sequence numbers for target ${e}: ${b}`)}a.Ui=a.Ui.remove(e),a.qi.delete(h.target)}),Pg.apply(this,arguments)}function Dp(s,e,r){const a=Jt(s);let h=ar.min(),m=Hr();return a.persistence.runTransaction("Execute query","readonly",b=>function(N,Z,te){const xe=Jt(N),ze=xe.qi.get(te);return void 0!==ze?pe.resolve(xe.Ui.get(ze)):xe.Cs.getTargetData(Z,te)}(a,b,Rs(e)).next(N=>{if(N)return h=N.lastLimboFreeSnapshotVersion,a.Cs.getMatchingKeysForTargetId(b,N.targetId).next(Z=>{m=Z})}).next(()=>a.Li.getDocumentsMatchingQuery(b,e,r?h:ar.min(),r?m:Hr())).next(N=>(za(a,cd(e),N),{documents:N,Hi:m})))}function jm(s,e){const r=Jt(s),a=Jt(r.Cs),h=r.Ui.get(e);return h?Promise.resolve(h.target):r.persistence.runTransaction("Get target data","readonly",m=>a.se(m,e).next(b=>b?b.target:null))}function Nu(s,e){const r=Jt(s),a=r.Ki.get(e)||ar.min();return r.persistence.runTransaction("Get new document changes","readonly",h=>r.Gi.getAllFromCollectionGroup(h,e,go(a,-1),Number.MAX_SAFE_INTEGER)).then(h=>(za(r,e,h),h))}function za(s,e,r){let a=s.Ki.get(e)||ar.min();r.forEach((h,m)=>{m.readTime.compareTo(a)>0&&(a=m.readTime)}),s.Ki.set(e,a)}function Sd(){return Sd=(0,E.Z)(function*(s,e,r,a){const h=Jt(s);let m=Hr(),b=Ta();for(const te of r){const xe=e.Ji(te.metadata.name);te.document&&(m=m.add(xe));const ze=e.Yi(te);ze.setReadTime(e.Xi(te.metadata.readTime)),b=b.insert(xe,ze)}const N=h.Gi.newChangeBuffer({trackRemovals:!0}),Z=yield vh(h,(te=a,Rs(Zs(Jr.fromString(`__bundle__/docs/${te}`)))));var te;return h.persistence.runTransaction("Apply bundle documents","readwrite",te=>Um(te,N,b).next(xe=>(N.apply(te),xe)).next(xe=>h.Cs.removeMatchingKeysForTargetId(te,Z.targetId).next(()=>h.Cs.addMatchingKeys(te,m,Z.targetId)).next(()=>h.localDocuments.getLocalViewOfDocuments(te,xe.Wi,xe.zi)).next(()=>xe.Wi)))}),Sd.apply(this,arguments)}function gf(s,e){return mf.apply(this,arguments)}function mf(){return mf=(0,E.Z)(function*(s,e,r=Hr()){const a=yield vh(s,Rs(cp(e.bundledQuery))),h=Jt(s);return h.persistence.runTransaction("Save named query","readwrite",m=>{const b=Qs(e.readTime);if(a.snapshotVersion.compareTo(b)>=0)return h.Ns.saveNamedQuery(m,e);const N=a.withResumeToken(Ys.EMPTY_BYTE_STRING,b);return h.Ui=h.Ui.insert(N.targetId,N),h.Cs.updateTargetData(m,N).next(()=>h.Cs.removeMatchingKeysForTargetId(m,a.targetId)).next(()=>h.Cs.addMatchingKeys(m,r,a.targetId)).next(()=>h.Ns.saveNamedQuery(m,e))})}),mf.apply(this,arguments)}function Ih(s,e){return`firestore_clients_${s}_${e}`}function kg(s,e,r){let a=`firestore_mutations_${s}_${r}`;return e.isAuthenticated()&&(a+=`_${e.uid}`),a}function pu(s,e){return`firestore_targets_${s}_${e}`}class bh{constructor(e,r,a,h){this.user=e,this.batchId=r,this.state=a,this.error=h}static Zi(e,r,a){const h=JSON.parse(a);let m,b="object"==typeof h&&-1!==["pending","acknowledged","rejected"].indexOf(h.state)&&(void 0===h.error||"object"==typeof h.error);return b&&h.error&&(b="string"==typeof h.error.message&&"string"==typeof h.error.code,b&&(m=new zt(h.error.code,h.error.message))),b?new bh(e,r,h.state,m):(Jn("SharedClientState",`Failed to parse mutation state for ID '${r}': ${a}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ch{constructor(e,r,a){this.targetId=e,this.state=r,this.error=a}static Zi(e,r){const a=JSON.parse(r);let h,m="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return m&&a.error&&(m="string"==typeof a.error.message&&"string"==typeof a.error.code,m&&(h=new zt(a.error.code,a.error.message))),m?new Ch(e,a.state,h):(Jn("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yf{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Zi(e,r){const a=JSON.parse(r);let h="object"==typeof a&&a.activeTargetIds instanceof Array,m=T();for(let b=0;h&&b<a.activeTargetIds.length;++b)h=Ko(a.activeTargetIds[b]),m=m.add(a.activeTargetIds[b]);return h?new yf(e,m):(Jn("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class wh{constructor(e,r){this.clientId=e,this.onlineState=r}static Zi(e){const r=JSON.parse(e);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new wh(r.clientId,r.onlineState):(Jn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Tp{constructor(){this.activeTargetIds=T()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _f{constructor(e,r,a,h,m){this.window=e,this.Hs=r,this.persistenceKey=a,this.sr=h,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Ai(ur),this.started=!1,this.cr=[];const b=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=m,this.ar=Ih(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Tp),this.lr=new RegExp(`^firestore_clients_${b}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${b}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${b}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(N){return`firestore_bundle_loaded_v2_${N}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,E.Z)(function*(){const r=yield e.syncEngine.vi();for(const h of r){if(h===e.sr)continue;const m=e.getItem(Ih(e.persistenceKey,h));if(m){const b=yf.Zi(h,m);b&&(e.ur=e.ur.insert(b.clientId,b))}}e.gr();const a=e.storage.getItem(e.wr);if(a){const h=e.yr(a);h&&e.pr(h)}for(const h of e.cr)e.rr(h);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let r=!1;return this.ur.forEach((a,h)=>{h.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,r,a){this.Tr(e,r,a),this.Er(e)}addLocalQueryTarget(e){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(pu(this.persistenceKey,e));if(a){const h=Ch.Zi(e,a);h&&(r=h.state)}}return this.Ar.er(e),this.gr(),r}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(pu(this.persistenceKey,e))}updateQueryState(e,r,a){this.Rr(e,r,a)}handleUserChange(e,r,a){r.forEach(h=>{this.Er(h)}),this.currentUser=e,a.forEach(h=>{this.addPendingMutation(h)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return kt("SharedClientState","READ",e,r),r}setItem(e,r){kt("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){kt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var r=this;const a=e;if(a.storageArea===this.storage){if(kt("SharedClientState","EVENT",a.key,a.newValue),a.key===this.ar)return void Jn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,E.Z)(function*(){if(r.started){if(null!==a.key)if(r.lr.test(a.key)){if(null==a.newValue){const h=r.vr(a.key);return r.Vr(h,null)}{const h=r.Sr(a.key,a.newValue);if(h)return r.Vr(h.clientId,h)}}else if(r.dr.test(a.key)){if(null!==a.newValue){const h=r.Dr(a.key,a.newValue);if(h)return r.Cr(h)}}else if(r._r.test(a.key)){if(null!==a.newValue){const h=r.Nr(a.key,a.newValue);if(h)return r.kr(h)}}else if(a.key===r.wr){if(null!==a.newValue){const h=r.yr(a.newValue);if(h)return r.pr(h)}}else if(a.key===r.hr){const h=function(m){let b=us.at;if(null!=m)try{const N=JSON.parse(m);Fn("number"==typeof N),b=N}catch(N){Jn("SharedClientState","Failed to read sequence number from WebStorage",N)}return b}(a.newValue);h!==us.at&&r.sequenceNumberHandler(h)}else if(a.key===r.mr){const h=r.Or(a.newValue);yield Promise.all(h.map(m=>r.syncEngine.Mr(m)))}}else r.cr.push(a)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,r,a){const h=new bh(this.currentUser,e,r,a),m=kg(this.persistenceKey,this.currentUser,e);this.setItem(m,h.tr())}Er(e){const r=kg(this.persistenceKey,this.currentUser,e);this.removeItem(r)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,r,a){const h=pu(this.persistenceKey,e),m=new Ch(e,r,a);this.setItem(h,m.tr())}Pr(e){const r=JSON.stringify(Array.from(e));this.setItem(this.mr,r)}vr(e){const r=this.lr.exec(e);return r?r[1]:null}Sr(e,r){const a=this.vr(e);return yf.Zi(a,r)}Dr(e,r){const a=this.dr.exec(e),h=Number(a[1]);return bh.Zi(new un(void 0!==a[2]?a[2]:null),h,r)}Nr(e,r){const a=this._r.exec(e),h=Number(a[1]);return Ch.Zi(h,r)}yr(e){return wh.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var r=this;return(0,E.Z)(function*(){if(e.user.uid===r.currentUser.uid)return r.syncEngine.Fr(e.batchId,e.state,e.error);kt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,r){const a=r?this.ur.insert(e,r):this.ur.remove(e),h=this.Ir(this.ur),m=this.Ir(a),b=[],N=[];return m.forEach(Z=>{h.has(Z)||b.push(Z)}),h.forEach(Z=>{m.has(Z)||N.push(Z)}),this.syncEngine.Br(b,N).then(()=>{this.ur=a})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let r=T();return e.forEach((a,h)=>{r=r.unionWith(h.activeTargetIds)}),r}}class Sp{constructor(){this.Lr=new Tp,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,a){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,r,a){this.Ur[e]=r}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Tp,Promise.resolve()}handleUserChange(e,r,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Wm{qr(e){}shutdown(){}}class Ad{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){kt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){kt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const xd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ap{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Rd extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,r,a,h,m){const b=this.ho(e,r);kt("RestConnection","Sending: ",b,a);const N={};return this.lo(N,h,m),this.fo(e,b,N,a).then(Z=>(kt("RestConnection","Received: ",Z),Z),Z=>{throw es("RestConnection",`${e} failed with error: `,Z,"url: ",b,"request:",a),Z})}_o(e,r,a,h,m,b){return this.ao(e,r,a,h,m)}lo(e,r,a){e["X-Goog-Api-Client"]="gl-js/ fire/"+hr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((h,m)=>e[m]=h),a&&a.headers.forEach((h,m)=>e[m]=h)}ho(e,r){return`${this.oo}/v1/${r}:${xd[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,r,a,h){return new Promise((m,b)=>{const N=new it;N.setWithCredentials(!0),N.listenOnce(w.COMPLETE,()=>{try{switch(N.getLastErrorCode()){case Bo.NO_ERROR:const te=N.getResponseJson();kt("Connection","XHR received:",JSON.stringify(te)),m(te);break;case Bo.TIMEOUT:kt("Connection",'RPC "'+e+'" timed out'),b(new zt(et.DEADLINE_EXCEEDED,"Request time out"));break;case Bo.HTTP_ERROR:const xe=N.getStatus();if(kt("Connection",'RPC "'+e+'" failed with status:',xe,"response text:",N.getResponseText()),xe>0){const ze=N.getResponseJson().error;if(ze&&ze.status&&ze.message){const Et=function(Wt){const sn=Wt.toLowerCase().replace(/_/g,"-");return Object.values(et).indexOf(sn)>=0?sn:et.UNKNOWN}(ze.status);b(new zt(Et,ze.message))}else b(new zt(et.UNKNOWN,"Server responded with status "+N.getStatus()))}else b(new zt(et.UNAVAILABLE,"Connection failed."));break;default:Mn()}}finally{kt("Connection",'RPC "'+e+'" completed.')}});const Z=JSON.stringify(h);N.send(r,"POST",Z,a,15)})}wo(e,r,a){const h=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=tl(),b=nl(),N={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(N.xmlHttpFactory=new q({})),this.lo(N.initMessageHeaders,r,a),N.encodeInitMessageHeaders=!0;const Z=h.join("");kt("Connection","Creating WebChannel: "+Z,N);const te=m.createWebChannel(Z,N);let xe=!1,ze=!1;const Et=new Ap({Hr:sn=>{ze?kt("Connection","Not sending because WebChannel is closed:",sn):(xe||(kt("Connection","Opening WebChannel transport."),te.open(),xe=!0),kt("Connection","WebChannel sending:",sn),te.send(sn))},Jr:()=>te.close()}),Wt=(sn,Un,Kn)=>{sn.listen(Un,Mi=>{try{Kn(Mi)}catch(Os){setTimeout(()=>{throw Os},0)}})};return Wt(te,he.EventType.OPEN,()=>{ze||kt("Connection","WebChannel transport opened.")}),Wt(te,he.EventType.CLOSE,()=>{ze||(ze=!0,kt("Connection","WebChannel transport closed"),Et.io())}),Wt(te,he.EventType.ERROR,sn=>{ze||(ze=!0,es("Connection","WebChannel transport errored:",sn),Et.io(new zt(et.UNAVAILABLE,"The operation could not be completed")))}),Wt(te,he.EventType.MESSAGE,sn=>{var Un;if(!ze){const Kn=sn.data[0];Fn(!!Kn);const Mi=Kn,Os=Mi.error||(null===(Un=Mi[0])||void 0===Un?void 0:Un.error);if(Os){kt("Connection","WebChannel received error:",Os);const ns=Os.status;let ga=function(Zi){const Ho=Ri[Zi];if(void 0!==Ho)return gd(Ho)}(ns),Es=Os.message;void 0===ga&&(ga=et.INTERNAL,Es="Unknown error status: "+ns+" with message "+Os.message),ze=!0,Et.io(new zt(ga,Es)),te.close()}else kt("Connection","WebChannel received:",Kn),Et.ro(Kn)}}),Wt(b,P.STAT_EVENT,sn=>{sn.stat===D.PROXY?kt("Connection","Detected buffering proxy"):sn.stat===D.NOPROXY&&kt("Connection","Detected no buffering proxy")}),setTimeout(()=>{Et.so()},0),Et}}function Md(){return"undefined"!=typeof window?window:null}function Pu(){return"undefined"!=typeof document?document:null}function Dh(s){return new Fi(s,!0)}class vf{constructor(e,r,a=1e3,h=1.5,m=6e4){this.Hs=e,this.timerId=r,this.mo=a,this.yo=h,this.po=m,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const r=Math.floor(this.Io+this.bo()),a=Math.max(0,Date.now()-this.Eo),h=Math.max(0,r-a);h>0&&kt("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.Io} ms, delay with jitter: ${r} ms, last attempt: ${a} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,h,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Fg{constructor(e,r,a,h,m,b,N,Z){this.Hs=e,this.vo=a,this.Vo=h,this.So=m,this.authCredentialsProvider=b,this.appCheckCredentialsProvider=N,this.listener=Z,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new vf(e,r)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,E.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,E.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,r){var a=this;return(0,E.Z)(function*(){a.Uo(),a.qo(),a.No.cancel(),a.Do++,4!==e?a.No.reset():r&&r.code===et.RESOURCE_EXHAUSTED?(Jn(r.toString()),Jn("Using maximum backoff delay to prevent overloading the backend."),a.No.Ao()):r&&r.code===et.UNAUTHENTICATED&&3!==a.state&&(a.authCredentialsProvider.invalidateToken(),a.appCheckCredentialsProvider.invalidateToken()),null!==a.stream&&(a.Ko(),a.stream.close(),a.stream=null),a.state=e,yield a.listener.Zr(r)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),r=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,h])=>{this.Do===r&&this.Qo(a,h)},a=>{e(()=>{const h=new zt(et.UNKNOWN,"Fetching auth token failed: "+a.message);return this.jo(h)})})}Qo(e,r){const a=this.Go(this.Do);this.stream=this.Wo(e,r),this.stream.Yr(()=>{a(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(h=>{a(()=>this.jo(h))}),this.stream.onMessage(h=>{a(()=>this.onMessage(h))})}Mo(){var e=this;this.state=5,this.No.Ro((0,E.Z)(function*(){e.state=0,e.start()}))}jo(e){return kt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return r=>{this.Hs.enqueueAndForget(()=>this.Do===e?r():(kt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Lg extends Fg{constructor(e,r,a,h,m,b){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,a,h,b),this.It=m}Wo(e,r){return this.So.wo("Listen",e,r)}onMessage(e){this.No.reset();const r=function(s,e){let r;if("targetChange"in e){const a="NO_CHANGE"===(Z=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===Z?1:"REMOVE"===Z?2:"CURRENT"===Z?3:"RESET"===Z?4:Mn(),h=e.targetChange.targetIds||[],m=function(Z,te){return Z.gt?(Fn(void 0===te||"string"==typeof te),Ys.fromBase64String(te||"")):(Fn(void 0===te||te instanceof Uint8Array),Ys.fromUint8Array(te||new Uint8Array))}(s,e.targetChange.resumeToken),b=e.targetChange.cause,N=b&&function(Z){const te=void 0===Z.code?et.UNKNOWN:gd(Z.code);return new zt(te,Z.message||"")}(b);r=new de(a,h,m,N||null)}else if("documentChange"in e){const a=e.documentChange,h=So(s,a.document.name),m=Qs(a.document.updateTime),b=new Y({mapValue:{fields:a.document.fields}}),N=Pe.newFoundDocument(h,m,b);r=new x(a.targetIds||[],a.removedTargetIds||[],N.key,N)}else if("documentDelete"in e){const a=e.documentDelete,h=So(s,a.document),m=a.readTime?Qs(a.readTime):ar.min(),b=Pe.newNoDocument(h,m);r=new x([],a.removedTargetIds||[],b.key,b)}else if("documentRemove"in e){const a=e.documentRemove,h=So(s,a.document);r=new x([],a.removedTargetIds||[],h,null)}else{if(!("filter"in e))return Mn();{const a=e.filter,m=new Tc(a.count||0);r=new J(a.targetId,m)}}var Z;return r}(this.It,e),a=function(h){if(!("targetChange"in h))return ar.min();const m=h.targetChange;return m.targetIds&&m.targetIds.length?ar.min():m.readTime?Qs(m.readTime):ar.min()}(e);return this.listener.zo(r,a)}Ho(e){const r={};r.database=Us(this.It),r.addTarget=function(h,m){let b;const N=m.target;return b=Ar(N)?{documents:qh(h,N)}:{query:Yh(h,N)},b.targetId=m.targetId,m.resumeToken.approximateByteSize()>0?b.resumeToken=jl(h,m.resumeToken):m.snapshotVersion.compareTo(ar.min())>0&&(b.readTime=uo(h,m.snapshotVersion.toTimestamp())),b}(this.It,e);const a=function(s,e){const r=function(a,h){switch(h){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Mn()}}(0,e.purpose);return null==r?null:{"goog-listen-tags":r}}(0,e);a&&(r.labels=a),this.Lo(r)}Jo(e){const r={};r.database=Us(this.It),r.removeTarget=e,this.Lo(r)}}class Th extends Fg{constructor(e,r,a,h,m,b){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,a,h,b),this.It=m,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,r){return this.So.wo("Write",e,r)}onMessage(e){if(Fn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const r=function(s,e){return s&&s.length>0?(Fn(void 0!==e),s.map(r=>function(a,h){let m=Qs(a.updateTime?a.updateTime:h);return m.isEqual(ar.min())&&(m=Qs(h)),new al(m,a.transformResults||[])}(r,e))):[]}(e.writeResults,e.commitTime),a=Qs(e.commitTime);return this.listener.tu(a,r)}return Fn(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Us(this.It),this.Lo(e)}Zo(e){const r={streamToken:this.lastStreamToken,writes:e.map(a=>rh(this.It,a))};this.Lo(r)}}class xp extends class{}{constructor(e,r,a,h){super(),this.authCredentials=e,this.appCheckCredentials=r,this.So=a,this.It=h,this.su=!1}iu(){if(this.su)throw new zt(et.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,r,a){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.So.ao(e,r,a,h,m)).catch(h=>{throw"FirebaseError"===h.name?(h.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new zt(et.UNKNOWN,h.toString())})}_o(e,r,a,h){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,b])=>this.So._o(e,r,a,m,b,h)).catch(m=>{throw"FirebaseError"===m.name?(m.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new zt(et.UNKNOWN,m.toString())})}terminate(){this.su=!0}}class If{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const r=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Jn(r),this.uu=!1):kt("OnlineStateTracker",r)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class Xy{constructor(e,r,a,h,m){var b=this;this.localStore=e,this.datastore=r,this.asyncQueue=a,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=m,this.gu.qr(N=>{a.enqueueAndForget((0,E.Z)(function*(){var Z;Hc(b)&&(kt("RemoteStore","Restarting streams for network reachability change."),yield(Z=(0,E.Z)(function*(te){const xe=Jt(te);xe.wu.add(4),yield Nd(xe),xe.yu.set("Unknown"),xe.wu.delete(4),yield Od(xe)}),function(te){return Z.apply(this,arguments)})(b))}))}),this.yu=new If(a,h)}}function Od(s){return bf.apply(this,arguments)}function bf(){return bf=(0,E.Z)(function*(s){if(Hc(s))for(const e of s.mu)yield e(!0)}),bf.apply(this,arguments)}function Nd(s){return Cf.apply(this,arguments)}function Cf(){return Cf=(0,E.Z)(function*(s){for(const e of s.mu)yield e(!1)}),Cf.apply(this,arguments)}function wf(s,e){const r=Jt(s);r._u.has(e.targetId)||(r._u.set(e.targetId,e),zm(r)?Bg(r):rc(r).Oo()&&qa(r,e))}function Df(s,e){const r=Jt(s),a=rc(r);r._u.delete(e),a.Oo()&&Gm(r,e),0===r._u.size&&(a.Oo()?a.$o():Hc(r)&&r.yu.set("Unknown"))}function qa(s,e){s.pu.Mt(e.targetId),rc(s).Ho(e)}function Gm(s,e){s.pu.Mt(e),rc(s).Jo(e)}function Bg(s){s.pu=new xt({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),se:e=>s._u.get(e)||null}),rc(s).start(),s.yu.cu()}function zm(s){return Hc(s)&&!rc(s).ko()&&s._u.size>0}function Hc(s){return 0===Jt(s).wu.size}function $g(s){s.pu=void 0}function av(s){return Ug.apply(this,arguments)}function Ug(){return Ug=(0,E.Z)(function*(s){s._u.forEach((e,r)=>{qa(s,e)})}),Ug.apply(this,arguments)}function jg(s,e){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,E.Z)(function*(s,e){$g(s),zm(s)?(s.yu.lu(e),Bg(s)):s.yu.set("Unknown")}),Rp.apply(this,arguments)}function Jy(s,e,r){return Hg.apply(this,arguments)}function Hg(){return Hg=(0,E.Z)(function*(s,e,r){if(s.yu.set("Online"),e instanceof de&&2===e.state&&e.cause)try{yield(a=(0,E.Z)(function*(h,m){const b=m.cause;for(const N of m.targetIds)h._u.has(N)&&(yield h.remoteSyncer.rejectListen(N,b),h._u.delete(N),h.pu.removeTarget(N))}),function(h,m){return a.apply(this,arguments)})(s,e)}catch(a){kt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),a),yield Mp(s,a)}else if(e instanceof x?s.pu.Gt(e):e instanceof J?s.pu.Yt(e):s.pu.Wt(e),!r.isEqual(ar.min()))try{const a=yield $m(s.localStore);r.compareTo(a)>=0&&(yield function(h,m){const b=h.pu.te(m);return b.targetChanges.forEach((N,Z)=>{if(N.resumeToken.approximateByteSize()>0){const te=h._u.get(Z);te&&h._u.set(Z,te.withResumeToken(N.resumeToken,m))}}),b.targetMismatches.forEach(N=>{const Z=h._u.get(N);if(!Z)return;h._u.set(N,Z.withResumeToken(Ys.EMPTY_BYTE_STRING,Z.snapshotVersion)),Gm(h,N);const te=new Ha(Z.target,N,1,Z.sequenceNumber);qa(h,te)}),h.remoteSyncer.applyRemoteEvent(b)}(s,r))}catch(a){kt("RemoteStore","Failed to raise snapshot:",a),yield Mp(s,a)}var a}),Hg.apply(this,arguments)}function Mp(s,e,r){return Op.apply(this,arguments)}function Op(){return Op=(0,E.Z)(function*(s,e,r){if(!Br(e))throw e;s.wu.add(1),yield Nd(s),s.yu.set("Offline"),r||(r=()=>$m(s.localStore)),s.asyncQueue.enqueueRetryable((0,E.Z)(function*(){kt("RemoteStore","Retrying IndexedDB access"),yield r(),s.wu.delete(1),yield Od(s)}))}),Op.apply(this,arguments)}function qm(s,e){return e().catch(r=>Mp(s,r,e))}function Pd(s){return Np.apply(this,arguments)}function Np(){return Np=(0,E.Z)(function*(s){const e=Jt(s),r=Fu(e);let a=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;e_(e);)try{const h=yield Qy(e.localStore,a);if(null===h){0===e.du.length&&r.$o();break}a=h.batchId,Ym(e,h)}catch(h){yield Mp(e,h)}Wg(e)&&Km(e)}),Np.apply(this,arguments)}function e_(s){return Hc(s)&&s.du.length<10}function Ym(s,e){s.du.push(e);const r=Fu(s);r.Oo()&&r.Xo&&r.Zo(e.mutations)}function Wg(s){return Hc(s)&&!Fu(s).ko()&&s.du.length>0}function Km(s){Fu(s).start()}function ku(s){return Tf.apply(this,arguments)}function Tf(){return Tf=(0,E.Z)(function*(s){Fu(s).nu()}),Tf.apply(this,arguments)}function t_(s){return Gg.apply(this,arguments)}function Gg(){return Gg=(0,E.Z)(function*(s){const e=Fu(s);for(const r of s.du)e.Zo(r.mutations)}),Gg.apply(this,arguments)}function lv(s,e,r){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,E.Z)(function*(s,e,r){const a=s.du.shift(),h=uh.from(a,e,r);yield qm(s,()=>s.remoteSyncer.applySuccessfulWrite(h)),yield Pd(s)}),Pp.apply(this,arguments)}function n_(s,e){return zg.apply(this,arguments)}function zg(){return zg=(0,E.Z)(function*(s,e){var r;e&&Fu(s).Xo&&(yield(r=(0,E.Z)(function*(a,h){if(eh(m=h.code)&&m!==et.ABORTED){const b=a.du.shift();Fu(a).Fo(),yield qm(a,()=>a.remoteSyncer.rejectFailedWrite(b.batchId,h)),yield Pd(a)}var m}),function(a,h){return r.apply(this,arguments)})(s,e)),Wg(s)&&Km(s)}),zg.apply(this,arguments)}function Zm(s,e){return Sf.apply(this,arguments)}function Sf(){return Sf=(0,E.Z)(function*(s,e){const r=Jt(s);r.asyncQueue.verifyOperationInProgress(),kt("RemoteStore","RemoteStore received new credentials");const a=Hc(r);r.wu.add(3),yield Nd(r),a&&r.yu.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(e),r.wu.delete(3),yield Od(r)}),Sf.apply(this,arguments)}function qg(s,e){return Yg.apply(this,arguments)}function Yg(){return Yg=(0,E.Z)(function*(s,e){const r=Jt(s);e?(r.wu.delete(2),yield Od(r)):e||(r.wu.add(2),yield Nd(r),r.yu.set("Unknown"))}),Yg.apply(this,arguments)}function rc(s){return s.Iu||(s.Iu=function(e,r,a){const h=Jt(e);return h.iu(),new Lg(r,h.So,h.authCredentials,h.appCheckCredentials,h.It,a)}(s.datastore,s.asyncQueue,{Yr:av.bind(null,s),Zr:jg.bind(null,s),zo:Jy.bind(null,s)}),s.mu.push(function(){var e=(0,E.Z)(function*(r){r?(s.Iu.Fo(),zm(s)?Bg(s):s.yu.set("Unknown")):(yield s.Iu.stop(),$g(s))});return function(r){return e.apply(this,arguments)}}())),s.Iu}function Fu(s){return s.Tu||(s.Tu=function(e,r,a){const h=Jt(e);return h.iu(),new Th(r,h.So,h.authCredentials,h.appCheckCredentials,h.It,a)}(s.datastore,s.asyncQueue,{Yr:ku.bind(null,s),Zr:n_.bind(null,s),eu:t_.bind(null,s),tu:lv.bind(null,s)}),s.mu.push(function(){var e=(0,E.Z)(function*(r){r?(s.Tu.Fo(),yield Pd(s)):(yield s.Tu.stop(),s.du.length>0&&(kt("RemoteStore",`Stopping write stream with ${s.du.length} pending writes`),s.du=[]))});return function(r){return e.apply(this,arguments)}}())),s.Tu}class Kg{constructor(e,r,a,h,m){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=a,this.op=h,this.removalCallback=m,this.deferred=new mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(b=>{})}static createAndSchedule(e,r,a,h,m){const b=Date.now()+a,N=new Kg(e,r,b,h,m);return N.start(a),N}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new zt(et.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wc(s,e){if(Jn("AsyncQueue",`${e}: ${s}`),Br(s))return new zt(et.UNAVAILABLE,`${e}: ${s}`);throw s}class Gc{constructor(e){this.comparator=e?(r,a)=>e(r,a)||bn.comparator(r.key,a.key):(r,a)=>bn.comparator(r.key,a.key),this.keyedMap=Ul(),this.sortedSet=new Ai(this.comparator)}static emptySet(e){return new Gc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,a)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Gc)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;r.hasNext();){const h=r.getNext().key,m=a.getNext().key;if(!h.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,r){const a=new Gc;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=r,a}}class Zg{constructor(){this.Eu=new Ai(bn.comparator)}track(e){const r=e.doc.key,a=this.Eu.get(r);a?0!==e.type&&3===a.type?this.Eu=this.Eu.insert(r,e):3===e.type&&1!==a.type?this.Eu=this.Eu.insert(r,{type:a.type,doc:e.doc}):2===e.type&&2===a.type?this.Eu=this.Eu.insert(r,{type:2,doc:e.doc}):2===e.type&&0===a.type?this.Eu=this.Eu.insert(r,{type:0,doc:e.doc}):1===e.type&&0===a.type?this.Eu=this.Eu.remove(r):1===e.type&&2===a.type?this.Eu=this.Eu.insert(r,{type:1,doc:a.doc}):0===e.type&&1===a.type?this.Eu=this.Eu.insert(r,{type:2,doc:e.doc}):Mn():this.Eu=this.Eu.insert(r,e)}Au(){const e=[];return this.Eu.inorderTraversal((r,a)=>{e.push(a)}),e}}class Sh{constructor(e,r,a,h,m,b,N,Z,te){this.query=e,this.docs=r,this.oldDocs=a,this.docChanges=h,this.mutatedKeys=m,this.fromCache=b,this.syncStateChanged=N,this.excludesMetadataChanges=Z,this.hasCachedResults=te}static fromInitialDocuments(e,r,a,h,m){const b=[];return r.forEach(N=>{b.push({type:0,doc:N})}),new Sh(e,r,Gc.emptySet(r),b,a,h,!0,!1,m)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ru(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,a=e.docChanges;if(r.length!==a.length)return!1;for(let h=0;h<r.length;h++)if(r[h].type!==a[h].type||!r[h].doc.isEqual(a[h].doc))return!1;return!0}}class r_{constructor(){this.Ru=void 0,this.listeners=[]}}class Qg{constructor(){this.queries=new $l(e=>bl(e),ru),this.onlineState="Unknown",this.bu=new Set}}function Qm(s,e){return Xg.apply(this,arguments)}function Xg(){return Xg=(0,E.Z)(function*(s,e){const r=Jt(s),a=e.query;let h=!1,m=r.queries.get(a);if(m||(h=!0,m=new r_),h)try{m.Ru=yield r.onListen(a)}catch(b){const N=Wc(b,`Initialization of query '${zu(e.query)}' failed`);return void e.onError(N)}r.queries.set(a,m),m.listeners.push(e),e.Pu(r.onlineState),m.Ru&&e.vu(m.Ru)&&zc(r)}),Xg.apply(this,arguments)}function kp(s,e){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,E.Z)(function*(s,e){const r=Jt(s),a=e.query;let h=!1;const m=r.queries.get(a);if(m){const b=m.listeners.indexOf(e);b>=0&&(m.listeners.splice(b,1),h=0===m.listeners.length)}if(h)return r.queries.delete(a),r.onUnlisten(a)}),Fp.apply(this,arguments)}function Jg(s,e){const r=Jt(s);let a=!1;for(const h of e){const b=r.queries.get(h.query);if(b){for(const N of b.listeners)N.vu(h)&&(a=!0);b.Ru=h}}a&&zc(r)}function Lp(s,e,r){const a=Jt(s),h=a.queries.get(e);if(h)for(const m of h.listeners)m.onError(r);a.queries.delete(e)}function zc(s){s.bu.forEach(e=>{e.next()})}class Qo{constructor(e,r,a){this.query=e,this.Vu=r,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=a||{}}vu(e){if(!this.options.includeMetadataChanges){const a=[];for(const h of e.docChanges)3!==h.type&&a.push(h);e=new Sh(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),r=!0):this.xu(e,this.onlineState)&&(this.Nu(e),r=!0),this.Du=e,r}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let r=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),r=!0),r}xu(e,r){return!e.fromCache||(!this.options.ku||!("Offline"!==r))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===r)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Sh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class kd{constructor(e,r){this.payload=e,this.byteLength=r}Ou(){return"metadata"in this.payload}}class em{constructor(e){this.It=e}Ji(e){return So(this.It,e)}Yi(e){return e.metadata.exists?zh(this.It,e.document,!1):Pe.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Qs(e)}}class Lu{constructor(e,r,a){this.Mu=e,this.localStore=r,this.It=a,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ah(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++r;const a=Jr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(a.get(a.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}$u(e){const r=new Map,a=new em(this.It);for(const h of e)if(h.metadata.queries){const m=a.Ji(h.metadata.name);for(const b of h.metadata.queries){const N=(r.get(b)||Hr()).add(m);r.set(b,N)}}return r}complete(){var e=this;return(0,E.Z)(function*(){const r=yield function(s,e,r,a){return Sd.apply(this,arguments)}(e.localStore,new em(e.It),e.documents,e.Mu.id),a=e.$u(e.documents);for(const h of e.queries)yield gf(e.localStore,h,a.get(h.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:r}})()}}function Ah(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}class ic{constructor(e){this.key=e}}class Vp{constructor(e){this.key=e}}class Fd{constructor(e,r){this.query=e,this.Uu=r,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Hr(),this.mutatedKeys=Hr(),this.Gu=$h(e),this.Qu=new Gc(this.Gu)}get ju(){return this.Uu}Wu(e,r){const a=r?r.zu:new Zg,h=r?r.Qu:this.Qu;let m=r?r.mutatedKeys:this.mutatedKeys,b=h,N=!1;const Z="F"===this.query.limitType&&h.size===this.query.limit?h.last():null,te="L"===this.query.limitType&&h.size===this.query.limit?h.first():null;if(e.inorderTraversal((xe,ze)=>{const Et=h.get(xe),Wt=qu(this.query,ze)?ze:null,sn=!!Et&&this.mutatedKeys.has(Et.key),Un=!!Wt&&(Wt.hasLocalMutations||this.mutatedKeys.has(Wt.key)&&Wt.hasCommittedMutations);let Kn=!1;Et&&Wt?Et.data.isEqual(Wt.data)?sn!==Un&&(a.track({type:3,doc:Wt}),Kn=!0):this.Hu(Et,Wt)||(a.track({type:2,doc:Wt}),Kn=!0,(Z&&this.Gu(Wt,Z)>0||te&&this.Gu(Wt,te)<0)&&(N=!0)):!Et&&Wt?(a.track({type:0,doc:Wt}),Kn=!0):Et&&!Wt&&(a.track({type:1,doc:Et}),Kn=!0,(Z||te)&&(N=!0)),Kn&&(Wt?(b=b.add(Wt),m=Un?m.add(xe):m.delete(xe)):(b=b.delete(xe),m=m.delete(xe)))}),null!==this.query.limit)for(;b.size>this.query.limit;){const xe="F"===this.query.limitType?b.last():b.first();b=b.delete(xe.key),m=m.delete(xe.key),a.track({type:1,doc:xe})}return{Qu:b,zu:a,$i:N,mutatedKeys:m}}Hu(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,a){const h=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const m=e.zu.Au();m.sort((te,xe)=>function(ze,Et){const Wt=sn=>{switch(sn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Mn()}};return Wt(ze)-Wt(Et)}(te.type,xe.type)||this.Gu(te.doc,xe.doc)),this.Ju(a);const b=r?this.Yu():[],N=0===this.Ku.size&&this.current?1:0,Z=N!==this.qu;return this.qu=N,0!==m.length||Z?{snapshot:new Sh(this.query,e.Qu,h,m,e.mutatedKeys,0===N,Z,!1,!!a&&a.resumeToken.approximateByteSize()>0),Xu:b}:{Xu:b}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Zg,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(r=>this.Uu=this.Uu.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Uu=this.Uu.delete(r)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Hr(),this.Qu.forEach(a=>{this.Zu(a.key)&&(this.Ku=this.Ku.add(a.key))});const r=[];return e.forEach(a=>{this.Ku.has(a)||r.push(new Vp(a))}),this.Ku.forEach(a=>{e.has(a)||r.push(new ic(a))}),r}tc(e){this.Uu=e.Hi,this.Ku=Hr();const r=this.Wu(e.documents);return this.applyChanges(r,!0)}ec(){return Sh.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class xh{constructor(e,r,a){this.query=e,this.targetId=r,this.view=a}}class Xm{constructor(e){this.key=e,this.nc=!1}}class Bp{constructor(e,r,a,h,m,b){this.localStore=e,this.remoteStore=r,this.eventManager=a,this.sharedClientState=h,this.currentUser=m,this.maxConcurrentLimboResolutions=b,this.sc={},this.ic=new $l(N=>bl(N),ru),this.rc=new Map,this.oc=new Set,this.uc=new Ai(bn.comparator),this.cc=new Map,this.ac=new Gl,this.hc={},this.lc=new Map,this.fc=ec.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function $p(s,e){return Up.apply(this,arguments)}function Up(){return Up=(0,E.Z)(function*(s,e){const r=Bd(s);let a,h;const m=r.ic.get(e);if(m)a=m.targetId,r.sharedClientState.addLocalQueryTarget(a),h=m.view.ec();else{const b=yield vh(r.localStore,Rs(e));r.isPrimaryClient&&wf(r.remoteStore,b);const N=r.sharedClientState.addLocalQueryTarget(b.targetId);a=b.targetId,h=yield Af(r,e,a,"current"===N,b.resumeToken)}return h}),Up.apply(this,arguments)}function Af(s,e,r,a,h){return jp.apply(this,arguments)}function jp(){return jp=(0,E.Z)(function*(s,e,r,a,h){s._c=(ze,Et,Wt)=>{return(sn=(0,E.Z)(function*(Un,Kn,Mi,Os){let ns=Kn.view.Wu(Mi);ns.$i&&(ns=yield Dp(Un.localStore,Kn.query,!1).then(({documents:Zi})=>Kn.view.Wu(Zi,ns)));const ga=Os&&Os.targetChanges.get(Kn.targetId),Es=Kn.view.applyChanges(ns,Un.isPrimaryClient,ga);return Tl(Un,Kn.targetId,Es.Xu),Es.snapshot}),function(Un,Kn,Mi,Os){return sn.apply(this,arguments)})(s,ze,Et,Wt);var sn};const m=yield Dp(s.localStore,e,!0),b=new Fd(e,m.Hi),N=b.Wu(m.documents),Z=_.createSynthesizedTargetChangeForCurrentChange(r,a&&"Offline"!==s.onlineState,h),te=b.applyChanges(N,s.isPrimaryClient,Z);Tl(s,r,te.Xu);const xe=new xh(e,r,b);return s.ic.set(e,xe),s.rc.has(r)?s.rc.get(r).push(e):s.rc.set(r,[e]),te.snapshot}),jp.apply(this,arguments)}function Xo(s,e){return tm.apply(this,arguments)}function tm(){return tm=(0,E.Z)(function*(s,e){const r=Jt(s),a=r.ic.get(e),h=r.rc.get(a.targetId);if(h.length>1)return r.rc.set(a.targetId,h.filter(m=>!ru(m,e))),void r.ic.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||(yield Eh(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),Df(r.remoteStore,a.targetId),ac(r,a.targetId)}).catch(ge))):(ac(r,a.targetId),yield Eh(r.localStore,a.targetId,!0))}),tm.apply(this,arguments)}function xf(){return xf=(0,E.Z)(function*(s,e,r){const a=sm(s);try{const h=yield function(m,b){const N=Jt(m),Z=pi.now(),te=b.reduce((Et,Wt)=>Et.add(Wt.key),Hr());let xe,ze;return N.persistence.runTransaction("Locally write mutations","readwrite",Et=>{let Wt=Ta(),sn=Hr();return N.Gi.getEntries(Et,te).next(Un=>{Wt=Un,Wt.forEach((Kn,Mi)=>{Mi.isValidDocument()||(sn=sn.add(Kn))})}).next(()=>N.localDocuments.getOverlayedDocuments(Et,Wt)).next(Un=>{xe=Un;const Kn=[];for(const Mi of b){const Os=ip(Mi,xe.get(Mi.key).overlayedDocument);null!=Os&&Kn.push(new Bl(Mi.key,Os,fe(Os.value.mapValue),ki.exists(!0)))}return N.mutationQueue.addMutationBatch(Et,Z,Kn,b)}).next(Un=>{ze=Un;const Kn=Un.applyToLocalDocumentSet(xe,sn);return N.documentOverlayCache.saveOverlays(Et,Un.batchId,Kn)})}).then(()=>({batchId:ze.batchId,changes:md(xe)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(h.batchId),function(m,b,N){let Z=m.hc[m.currentUser.toKey()];Z||(Z=new Ai(ur)),Z=Z.insert(b,N),m.hc[m.currentUser.toKey()]=Z}(a,h.batchId,r),yield uc(a,h.changes),yield Pd(a.remoteStore)}catch(h){const m=Wc(h,"Failed to persist write");r.reject(m)}}),xf.apply(this,arguments)}function qc(s,e){return Rf.apply(this,arguments)}function Rf(){return Rf=(0,E.Z)(function*(s,e){const r=Jt(s);try{const a=yield Zy(r.localStore,e);e.targetChanges.forEach((h,m)=>{const b=r.cc.get(m);b&&(Fn(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1),h.addedDocuments.size>0?b.nc=!0:h.modifiedDocuments.size>0?Fn(b.nc):h.removedDocuments.size>0&&(Fn(b.nc),b.nc=!1))}),yield uc(r,a,e)}catch(a){yield ge(a)}}),Rf.apply(this,arguments)}function Hp(s,e,r){const a=Jt(s);if(a.isPrimaryClient&&0===r||!a.isPrimaryClient&&1===r){const h=[];a.ic.forEach((m,b)=>{const N=b.view.Pu(e);N.snapshot&&h.push(N.snapshot)}),function(m,b){const N=Jt(m);N.onlineState=b;let Z=!1;N.queries.forEach((te,xe)=>{for(const ze of xe.listeners)ze.Pu(b)&&(Z=!0)}),Z&&zc(N)}(a.eventManager,e),h.length&&a.sc.zo(h),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}function Jm(s,e,r){return sc.apply(this,arguments)}function sc(){return sc=(0,E.Z)(function*(s,e,r){const a=Jt(s);a.sharedClientState.updateQueryState(e,"rejected",r);const h=a.cc.get(e),m=h&&h.key;if(m){let b=new Ai(bn.comparator);b=b.insert(m,Pe.newNoDocument(m,ar.min()));const N=Hr().add(m),Z=new g(ar.min(),new Map,new Wi(ur),b,N);yield qc(a,Z),a.uc=a.uc.remove(m),a.cc.delete(e),Vu(a)}else yield Eh(a.localStore,e,!1).then(()=>ac(a,e,r)).catch(ge)}),sc.apply(this,arguments)}function ey(s,e){return Wp.apply(this,arguments)}function Wp(){return Wp=(0,E.Z)(function*(s,e){const r=Jt(s),a=e.batch.batchId;try{const h=yield Ky(r.localStore,e);_s(r,a,null),Mf(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),yield uc(r,h)}catch(h){yield ge(h)}}),Wp.apply(this,arguments)}function oc(s,e,r){return xo.apply(this,arguments)}function xo(){return xo=(0,E.Z)(function*(s,e,r){const a=Jt(s);try{const h=yield function(m,b){const N=Jt(m);return N.persistence.runTransaction("Reject batch","readwrite-primary",Z=>{let te;return N.mutationQueue.lookupMutationBatch(Z,b).next(xe=>(Fn(null!==xe),te=xe.keys(),N.mutationQueue.removeMutationBatch(Z,xe))).next(()=>N.mutationQueue.performConsistencyCheck(Z)).next(()=>N.documentOverlayCache.removeOverlaysForBatchId(Z,te,b)).next(()=>N.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(Z,te)).next(()=>N.localDocuments.getDocuments(Z,te))})}(a.localStore,e);_s(a,e,r),Mf(a,e),a.sharedClientState.updateMutationState(e,"rejected",r),yield uc(a,h)}catch(h){yield ge(h)}}),xo.apply(this,arguments)}function Yc(){return Yc=(0,E.Z)(function*(s,e){const r=Jt(s);Hc(r.remoteStore)||kt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const a=yield function(m){const b=Jt(m);return b.persistence.runTransaction("Get highest unacknowledged batch id","readonly",N=>b.mutationQueue.getHighestUnacknowledgedBatchId(N))}(r.localStore);if(-1===a)return void e.resolve();const h=r.lc.get(a)||[];h.push(e),r.lc.set(a,h)}catch(a){const h=Wc(a,"Initialization of waitForPendingWrites() operation failed");e.reject(h)}}),Yc.apply(this,arguments)}function Mf(s,e){(s.lc.get(e)||[]).forEach(r=>{r.resolve()}),s.lc.delete(e)}function _s(s,e,r){const a=Jt(s);let h=a.hc[a.currentUser.toKey()];if(h){const m=h.get(e);m&&(r?m.reject(r):m.resolve(),h=h.remove(e)),a.hc[a.currentUser.toKey()]=h}}function ac(s,e,r=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.rc.get(e))s.ic.delete(a),r&&s.sc.wc(a,r);s.rc.delete(e),s.isPrimaryClient&&s.ac.ls(e).forEach(a=>{s.ac.containsKey(a)||ty(s,a)})}function ty(s,e){s.oc.delete(e.path.canonicalString());const r=s.uc.get(e);null!==r&&(Df(s.remoteStore,r),s.uc=s.uc.remove(e),s.cc.delete(r),Vu(s))}function Tl(s,e,r){for(const a of r)a instanceof ic?(s.ac.addReference(a.key,e),lc(s,a)):a instanceof Vp?(kt("SyncEngine","Document no longer in limbo: "+a.key),s.ac.removeReference(a.key,e),s.ac.containsKey(a.key)||ty(s,a.key)):Mn()}function lc(s,e){const r=e.key,a=r.path.canonicalString();s.uc.get(r)||s.oc.has(a)||(kt("SyncEngine","New document in limbo: "+r),s.oc.add(a),Vu(s))}function Vu(s){for(;s.oc.size>0&&s.uc.size<s.maxConcurrentLimboResolutions;){const e=s.oc.values().next().value;s.oc.delete(e);const r=new bn(Jr.fromString(e)),a=s.fc.next();s.cc.set(a,new Xm(r)),s.uc=s.uc.insert(r,a),wf(s.remoteStore,new Ha(Rs(Zs(r.path)),a,2,us.at))}}function uc(s,e,r){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,E.Z)(function*(s,e,r){const a=Jt(s),h=[],m=[],b=[];var N;a.ic.isEmpty()||(a.ic.forEach((N,Z)=>{b.push(a._c(Z,e,r).then(te=>{if((te||r)&&a.isPrimaryClient&&a.sharedClientState.updateQueryState(Z.targetId,(null==te?void 0:te.fromCache)?"not-current":"current"),te){h.push(te);const xe=Rg.Ci(Z.targetId,te);m.push(xe)}}))}),yield Promise.all(b),a.sc.zo(h),yield(N=(0,E.Z)(function*(Z,te){const xe=Jt(Z);try{yield xe.persistence.runTransaction("notifyLocalViewChanges","readwrite",ze=>pe.forEach(te,Et=>pe.forEach(Et.Si,Wt=>xe.persistence.referenceDelegate.addReference(ze,Et.targetId,Wt)).next(()=>pe.forEach(Et.Di,Wt=>xe.persistence.referenceDelegate.removeReference(ze,Et.targetId,Wt)))))}catch(ze){if(!Br(ze))throw ze;kt("LocalStore","Failed to update sequence numbers: "+ze)}for(const ze of te){const Et=ze.targetId;if(!ze.fromCache){const Wt=xe.Ui.get(Et),Un=Wt.withLastLimboFreeSnapshotVersion(Wt.snapshotVersion);xe.Ui=xe.Ui.insert(Et,Un)}}}),function(Z,te){return N.apply(this,arguments)})(a.localStore,m))}),Gp.apply(this,arguments)}function ny(s,e){return Of.apply(this,arguments)}function Of(){return Of=(0,E.Z)(function*(s,e){const r=Jt(s);if(!r.currentUser.isEqual(e)){kt("SyncEngine","User change. New user:",e.toKey());const a=yield pf(r.localStore,e);r.currentUser=e,(h=r).lc.forEach(b=>{b.forEach(N=>{N.reject(new zt(et.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.lc.clear(),r.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),yield uc(r,a.ji)}var h}),Of.apply(this,arguments)}function rm(s,e){const r=Jt(s),a=r.cc.get(e);if(a&&a.nc)return Hr().add(a.key);{let h=Hr();const m=r.rc.get(e);if(!m)return h;for(const b of m){const N=r.ic.get(b);h=h.unionWith(N.view.ju)}return h}}function im(s,e){return Rh.apply(this,arguments)}function Rh(){return Rh=(0,E.Z)(function*(s,e){const r=Jt(s),a=yield Dp(r.localStore,e.query,!0),h=e.view.tc(a);return r.isPrimaryClient&&Tl(r,e.targetId,h.Xu),h}),Rh.apply(this,arguments)}function ry(s,e){return zp.apply(this,arguments)}function zp(){return zp=(0,E.Z)(function*(s,e){const r=Jt(s);return Nu(r.localStore,e).then(a=>uc(r,a))}),zp.apply(this,arguments)}function Ld(s,e,r,a){return Kc.apply(this,arguments)}function Kc(){return Kc=(0,E.Z)(function*(s,e,r,a){const h=Jt(s),m=yield function(b,N){const Z=Jt(b),te=Jt(Z.mutationQueue);return Z.persistence.runTransaction("Lookup mutation documents","readonly",xe=>te.Tn(xe,N).next(ze=>ze?Z.localDocuments.getDocuments(xe,ze):pe.resolve(null)))}(h.localStore,e);var N;null!==m?("pending"===r?yield Pd(h.remoteStore):"acknowledged"===r||"rejected"===r?(_s(h,e,a||null),Mf(h,e),N=e,Jt(Jt(h.localStore).mutationQueue).An(N)):Mn(),yield uc(h,m)):kt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Kc.apply(this,arguments)}function Mh(){return Mh=(0,E.Z)(function*(s,e){const r=Jt(s);if(Bd(r),sm(r),!0===e&&!0!==r.dc){const a=r.sharedClientState.getAllActiveQueryTargets(),h=yield qp(r,a.toArray());r.dc=!0,yield qg(r.remoteStore,!0);for(const m of h)wf(r.remoteStore,m)}else if(!1===e&&!1!==r.dc){const a=[];let h=Promise.resolve();r.rc.forEach((m,b)=>{r.sharedClientState.isLocalQueryTarget(b)?a.push(b):h=h.then(()=>(ac(r,b),Eh(r.localStore,b,!0))),Df(r.remoteStore,b)}),yield h,yield qp(r,a),function(m){const b=Jt(m);b.cc.forEach((N,Z)=>{Df(b.remoteStore,Z)}),b.ac.fs(),b.cc=new Map,b.uc=new Ai(bn.comparator)}(r),r.dc=!1,yield qg(r.remoteStore,!1)}}),Mh.apply(this,arguments)}function qp(s,e,r){return Vd.apply(this,arguments)}function Vd(){return Vd=(0,E.Z)(function*(s,e,r){const a=Jt(s),h=[],m=[];for(const b of e){let N;const Z=a.rc.get(b);if(Z&&0!==Z.length){N=yield vh(a.localStore,Rs(Z[0]));for(const te of Z){const xe=a.ic.get(te),ze=yield im(a,xe);ze.snapshot&&m.push(ze.snapshot)}}else{const te=yield jm(a.localStore,b);N=yield vh(a.localStore,te),yield Af(a,Pf(te),b,!1,N.resumeToken)}h.push(N)}return a.sc.zo(m),h}),Vd.apply(this,arguments)}function Pf(s){return Gi(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function Yp(s){const e=Jt(s);return Jt(Jt(e.localStore).persistence).vi()}function Kp(s,e,r,a){return Oh.apply(this,arguments)}function Oh(){return Oh=(0,E.Z)(function*(s,e,r,a){const h=Jt(s);if(h.dc)return void kt("SyncEngine","Ignoring unexpected query state notification.");const m=h.rc.get(e);if(m&&m.length>0)switch(r){case"current":case"not-current":{const b=yield Nu(h.localStore,cd(m[0])),N=g.createSynthesizedRemoteEventForCurrentChange(e,"current"===r,Ys.EMPTY_BYTE_STRING);yield uc(h,b,N);break}case"rejected":yield Eh(h.localStore,e,!0),ac(h,e,a);break;default:Mn()}}),Oh.apply(this,arguments)}function kf(s,e,r){return Ff.apply(this,arguments)}function Ff(){return Ff=(0,E.Z)(function*(s,e,r){const a=Bd(s);if(a.dc){for(const h of e){if(a.rc.has(h)){kt("SyncEngine","Adding an already active target "+h);continue}const m=yield jm(a.localStore,h),b=yield vh(a.localStore,m);yield Af(a,Pf(m),b.targetId,!1,b.resumeToken),wf(a.remoteStore,b)}for(const h of r)a.rc.has(h)&&(yield Eh(a.localStore,h,!1).then(()=>{Df(a.remoteStore,h),ac(a,h)}).catch(ge))}}),Ff.apply(this,arguments)}function Bd(s){const e=Jt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=qc.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Jm.bind(null,e),e.sc.zo=Jg.bind(null,e.eventManager),e.sc.wc=Lp.bind(null,e.eventManager),e}function sm(s){const e=Jt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ey.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oc.bind(null,e),e}class sy{constructor(){this.synchronizeTabs=!1}initialize(e){var r=this;return(0,E.Z)(function*(){r.It=Dh(e.databaseInfo.databaseId),r.sharedClientState=r.gc(e),r.persistence=r.yc(e),yield r.persistence.start(),r.localStore=r.Ic(e),r.gcScheduler=r.Tc(e,r.localStore),r.indexBackfillerScheduler=r.Ec(e,r.localStore)})()}Tc(e,r){return null}Ec(e,r){return null}Ic(e){return Og(this.persistence,new wp,e.initialUser,this.It)}yc(e){return new xg(nc.Bs,this.It)}gc(e){return new Sp}terminate(){var e=this;return(0,E.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class om extends sy{constructor(e,r,a){super(),this.Ac=e,this.cacheSizeBytes=r,this.forceOwnership=a,this.synchronizeTabs=!1}initialize(e){var r=()=>super.initialize,a=this;return(0,E.Z)(function*(){yield r().call(a,e),yield a.Ac.initialize(a,e),yield sm(a.Ac.syncEngine),yield Pd(a.Ac.remoteStore),yield a.persistence.li(()=>(a.gcScheduler&&!a.gcScheduler.started&&a.gcScheduler.start(),a.indexBackfillerScheduler&&!a.indexBackfillerScheduler.started&&a.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return Og(this.persistence,new wp,e.initialUser,this.It)}Tc(e,r){return new gp(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,r)}Ec(e,r){const a=new va(r,this.persistence);return new Qr(e.asyncQueue,a)}yc(e){const r=ff(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),a=void 0!==this.cacheSizeBytes?Ao.withCacheSize(this.cacheSizeBytes):Ao.DEFAULT;return new bp(this.synchronizeTabs,r,e.clientId,a,e.asyncQueue,Md(),Pu(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new Sp}}class Lf extends om{constructor(e,r){super(e,r,!1),this.Ac=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(e){var r=()=>super.initialize,a=this;return(0,E.Z)(function*(){yield r().call(a,e);const h=a.Ac.syncEngine;a.sharedClientState instanceof _f&&(a.sharedClientState.syncEngine={Fr:Ld.bind(null,h),$r:Kp.bind(null,h),Br:kf.bind(null,h),vi:Yp.bind(null,h),Mr:ry.bind(null,h)},yield a.sharedClientState.start()),yield a.persistence.li(function(){var m=(0,E.Z)(function*(b){yield function(s,e){return Mh.apply(this,arguments)}(a.Ac.syncEngine,b),a.gcScheduler&&(b&&!a.gcScheduler.started?a.gcScheduler.start():b||a.gcScheduler.stop()),a.indexBackfillerScheduler&&(b&&!a.indexBackfillerScheduler.started?a.indexBackfillerScheduler.start():b||a.indexBackfillerScheduler.stop())});return function(b){return m.apply(this,arguments)}}())})()}gc(e){const r=Md();if(!_f.C(r))throw new zt(et.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const a=ff(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _f(r,e.asyncQueue,a,e.clientId,e.initialUser)}}class Vf{initialize(e,r){var a=this;return(0,E.Z)(function*(){a.localStore||(a.localStore=e.localStore,a.sharedClientState=e.sharedClientState,a.datastore=a.createDatastore(r),a.remoteStore=a.createRemoteStore(r),a.eventManager=a.createEventManager(r),a.syncEngine=a.createSyncEngine(r,!e.synchronizeTabs),a.sharedClientState.onlineStateHandler=h=>Hp(a.syncEngine,h,1),a.remoteStore.remoteSyncer.handleCredentialChange=ny.bind(null,a.syncEngine),yield qg(a.remoteStore,a.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Qg}createDatastore(e){const r=Dh(e.databaseInfo.databaseId),a=new Rd(e.databaseInfo);return new xp(e.authCredentials,e.appCheckCredentials,a,r)}createRemoteStore(e){return r=this.localStore,a=this.datastore,h=e.asyncQueue,m=N=>Hp(this.syncEngine,N,0),b=Ad.C()?new Ad:new Wm,new Xy(r,a,h,m,b);var r,a,h,m,b}createSyncEngine(e,r){return function(a,h,m,b,N,Z,te){const xe=new Bp(a,h,m,b,N,Z);return te&&(xe.dc=!0),xe}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}terminate(){return(e=(0,E.Z)(function*(r){const a=Jt(r);kt("RemoteStore","RemoteStore shutting down."),a.wu.add(5),yield Nd(a),a.gu.shutdown(),a.yu.set("Unknown")}),function(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function Nh(s,e,r){if(!r)throw new zt(et.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Zc(s,e,r,a){if(!0===e&&!0===a)throw new zt(et.INVALID_ARGUMENT,`${s} and ${r} cannot be used together.`)}function oy(s){if(!bn.isDocumentKey(s))throw new zt(et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function gl(s){if(bn.isDocumentKey(s))throw new zt(et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Zp(s){if(void 0===s)return"undefined";if(null===s)return"null";if("string"==typeof s)return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if("number"==typeof s||"boolean"==typeof s)return""+s;if("object"==typeof s){if(s instanceof Array)return"an array";{const e=(r=s).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof s?"a function":Mn()}function bi(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new zt(et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Zp(s);throw new zt(et.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return s}function am(s,e){if(e<=0)throw new zt(et.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}const Bf=new Map;class $f{constructor(e){var r;if(void 0===e.host){if(void 0!==e.ssl)throw new zt(et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(r=e.ssl)||void 0===r||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new zt(et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Zc("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $d{constructor(e,r,a,h){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=a,this._app=h,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $f({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new zt(et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new zt(et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $f(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new ld;switch(r.type){case"gapi":return new Mr(r.client,r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new zt(et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=Bf.get(e);r&&(kt("ComponentProvider","Removing Datastore"),Bf.delete(e),r.terminate())}(this),Promise.resolve()}}function lm(s,e,r,a={}){var h;const m=(s=bi(s,$d))._getSettings();if("firestore.googleapis.com"!==m.host&&m.host!==e&&es("Host has been set in both settings() and useEmulator(), emulator host will be used"),s._setSettings(Object.assign(Object.assign({},m),{host:`${e}:${r}`,ssl:!1})),a.mockUserToken){let b,N;if("string"==typeof a.mockUserToken)b=a.mockUserToken,N=un.MOCK_USER;else{b=(0,ae.Sg)(a.mockUserToken,null===(h=s._app)||void 0===h?void 0:h.options.projectId);const Z=a.mockUserToken.sub||a.mockUserToken.user_id;if(!Z)throw new zt(et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");N=new un(Z)}s._authCredentials=new Bs(new Zl(b,N))}}class co{constructor(e,r,a){this.converter=r,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new co(this.firestore,e,this._key)}}class jo{constructor(e,r,a){this.converter=r,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new jo(this.firestore,e,this._query)}}class Sl extends jo{constructor(e,r,a){super(e,r,Zs(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new co(this.firestore,null,new bn(e))}withConverter(e){return new Sl(this.firestore,e,this._path)}}function ay(s,e,...r){if(s=(0,ae.m9)(s),Nh("collection","path",e),s instanceof $d){const a=Jr.fromString(e,...r);return gl(a),new Sl(s,null,a)}{if(!(s instanceof co||s instanceof Sl))throw new zt(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Jr.fromString(e,...r));return gl(a),new Sl(s.firestore,null,a)}}function Uf(s,e){if(s=bi(s,$d),Nh("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new zt(et.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new jo(s,null,(r=e,new kl(Jr.emptyPath(),r)));var r}function um(s,e,...r){if(s=(0,ae.m9)(s),1===arguments.length&&(e=Ma.R()),Nh("doc","path",e),s instanceof $d){const a=Jr.fromString(e,...r);return oy(a),new co(s,null,new bn(a))}{if(!(s instanceof co||s instanceof Sl))throw new zt(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Jr.fromString(e,...r));return oy(a),new co(s.firestore,s instanceof Sl?s.converter:null,new bn(a))}}function ly(s,e){return s=(0,ae.m9)(s),e=(0,ae.m9)(e),(s instanceof co||s instanceof Sl)&&(e instanceof co||e instanceof Sl)&&s.firestore===e.firestore&&s.path===e.path&&s.converter===e.converter}function Qp(s,e){return s=(0,ae.m9)(s),e=(0,ae.m9)(e),s instanceof jo&&e instanceof jo&&s.firestore===e.firestore&&ru(s._query,e._query)&&s.converter===e.converter}function Xp(s,e=10240){let r=0;return{read:()=>(0,E.Z)(function*(){if(r<s.byteLength){const a={value:s.slice(r,r+e),done:!1};return r+=e,a}return{done:!0}})(),cancel:()=>(0,E.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class jf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Jn("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}class uy{constructor(e,r){this.Pc=e,this.It=r,this.metadata=new mr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(a=>{a&&a.Ou()?this.metadata.resolve(a.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==a?void 0:a.payload)}`))},a=>this.metadata.reject(a))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,E.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,E.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,E.Z)(function*(){const r=yield e.Sc();if(null===r)return null;const a=e.vc.decode(r),h=Number(a);isNaN(h)&&e.Dc(`length string (${a}) is not valid number`);const m=yield e.Cc(h);return new kd(JSON.parse(m),r.length+h)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,E.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const r=e.xc();r<0&&e.Dc("Reached the end of bundle when a length string is expected.");const a=e.buffer.slice(0,r);return e.buffer=e.buffer.slice(r),a})()}Cc(e){var r=this;return(0,E.Z)(function*(){for(;r.buffer.length<e;)(yield r.Nc())&&r.Dc("Reached the end of bundle when more is expected.");const a=r.vc.decode(r.buffer.slice(0,e));return r.buffer=r.buffer.slice(e),a})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,E.Z)(function*(){const r=yield e.Pc.read();if(!r.done){const a=new Uint8Array(e.buffer.length+r.value.length);a.set(e.buffer),a.set(r.value,e.buffer.length),e.buffer=a}return r.done})()}}class zl{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var r=this;return(0,E.Z)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw new zt(et.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const a=yield(h=(0,E.Z)(function*(m,b){const N=Jt(m),Z=Us(N.It)+"/documents",te={documents:b.map(Wt=>zi(N.It,Wt))},xe=yield N._o("BatchGetDocuments",Z,te,b.length),ze=new Map;xe.forEach(Wt=>{const sn=function(s,e){return"found"in e?function(r,a){Fn(!!a.found);const h=So(r,a.found.name),m=Qs(a.found.updateTime),b=new Y({mapValue:{fields:a.found.fields}});return Pe.newFoundDocument(h,m,b)}(s,e):"missing"in e?function(r,a){Fn(!!a.missing),Fn(!!a.readTime);const h=So(r,a.missing),m=Qs(a.readTime);return Pe.newNoDocument(h,m)}(s,e):Mn()}(N.It,Wt);ze.set(sn.key.toString(),sn)});const Et=[];return b.forEach(Wt=>{const sn=ze.get(Wt.toString());Fn(!!sn),Et.push(sn)}),Et}),function(m,b){return h.apply(this,arguments)})(r.datastore,e);var h;return a.forEach(h=>r.recordVersion(h)),a})()}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(a){this.lastWriteError=a}this.writtenDocs.add(e.toString())}delete(e){this.write(new wu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,E.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const r=e.readVersions;var a;e.mutations.forEach(a=>{r.delete(a.key.toString())}),r.forEach((a,h)=>{const m=bn.fromPath(h);e.mutations.push(new Du(m,e.precondition(m)))}),yield(a=(0,E.Z)(function*(h,m){const b=Jt(h),N=Us(b.It)+"/documents",Z={writes:m.map(te=>rh(b.It,te))};yield b.ao("Commit",N,Z)}),function(h,m){return a.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Mn();r=ar.min()}const a=this.readVersions.get(e.key.toString());if(a){if(!r.isEqual(a))throw new zt(et.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(ar.min())?ki.exists(!1):ki.updateTime(r):ki.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(ar.min()))throw new zt(et.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ki.updateTime(r)}return ki.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Ph{constructor(e,r,a,h,m){this.asyncQueue=e,this.datastore=r,this.options=a,this.updateFunction=h,this.deferred=m,this.kc=a.maxAttempts,this.No=new vf(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,E.Z)(function*(){const r=new zl(e.datastore),a=e.Mc(r);a&&a.then(h=>{e.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{e.deferred.resolve(h)}).catch(m=>{e.Fc(m)}))}).catch(h=>{e.Fc(h)})}))}Mc(e){try{const r=this.updateFunction(e);return!cs(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const r=e.code;return"aborted"===r||"failed-precondition"===r||!eh(r)}return!1}}class vn{constructor(e,r,a,h){var m=this;this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=a,this.databaseInfo=h,this.user=un.UNAUTHENTICATED,this.clientId=Ma.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(a,function(){var b=(0,E.Z)(function*(N){kt("FirestoreClient","Received user=",N.uid),yield m.authCredentialListener(N),m.user=N});return function(N){return b.apply(this,arguments)}}()),this.appCheckCredentials.start(a,b=>(kt("FirestoreClient","Received new app check token=",b),this.appCheckCredentialListener(b,this.user)))}getConfiguration(){var e=this;return(0,E.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new zt(et.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const r=new mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,E.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),r.resolve()}catch(a){const h=Wc(a,"Failed to shutdown persistence");r.reject(h)}})),r.promise}}function cm(s,e){return kh.apply(this,arguments)}function kh(){return kh=(0,E.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress(),kt("FirestoreClient","Initializing OfflineComponentProvider");const r=yield s.getConfiguration();yield e.initialize(r);let a=r.initialUser;s.setCredentialChangeListener(function(){var h=(0,E.Z)(function*(m){a.isEqual(m)||(yield pf(e.localStore,m),a=m)});return function(m){return h.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s.offlineComponents=e}),kh.apply(this,arguments)}function ml(s,e){return dc.apply(this,arguments)}function dc(){return dc=(0,E.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress();const r=yield Ro(s);kt("FirestoreClient","Initializing OnlineComponentProvider");const a=yield s.getConfiguration();yield e.initialize(r,a),s.setCredentialChangeListener(h=>Zm(e.remoteStore,h)),s.setAppCheckTokenChangeListener((h,m)=>Zm(e.remoteStore,m)),s.onlineComponents=e}),dc.apply(this,arguments)}function Ro(s){return yl.apply(this,arguments)}function yl(){return yl=(0,E.Z)(function*(s){return s.offlineComponents||(kt("FirestoreClient","Using default OfflineComponentProvider"),yield cm(s,new sy)),s.offlineComponents}),yl.apply(this,arguments)}function Bu(s){return Ya.apply(this,arguments)}function Ya(){return Ya=(0,E.Z)(function*(s){return s.onlineComponents||(kt("FirestoreClient","Using default OnlineComponentProvider"),yield ml(s,new Vf)),s.onlineComponents}),Ya.apply(this,arguments)}function Wf(s){return Ro(s).then(e=>e.persistence)}function gu(s){return Ro(s).then(e=>e.localStore)}function ql(s){return Bu(s).then(e=>e.remoteStore)}function hc(s){return Bu(s).then(e=>e.syncEngine)}function Al(s){return Ka.apply(this,arguments)}function Ka(){return Ka=(0,E.Z)(function*(s){const e=yield Bu(s),r=e.eventManager;return r.onListen=$p.bind(null,e.syncEngine),r.onUnlisten=Xo.bind(null,e.syncEngine),r}),Ka.apply(this,arguments)}function Gf(s,e,r={}){const a=new mr;return s.asyncQueue.enqueueAndForget((0,E.Z)(function*(){return function(h,m,b,N,Z){const te=new jf({next:ze=>{m.enqueueAndForget(()=>kp(h,xe));const Et=ze.docs.has(b);!Et&&ze.fromCache?Z.reject(new zt(et.UNAVAILABLE,"Failed to get document because the client is offline.")):Et&&ze.fromCache&&N&&"server"===N.source?Z.reject(new zt(et.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):Z.resolve(ze)},error:ze=>Z.reject(ze)}),xe=new Qo(Zs(b.path),te,{includeMetadataChanges:!0,ku:!0});return Qm(h,xe)}(yield Al(s),s.asyncQueue,e,r,a)})),a.promise}function Xc(s,e,r={}){const a=new mr;return s.asyncQueue.enqueueAndForget((0,E.Z)(function*(){return function(h,m,b,N,Z){const te=new jf({next:ze=>{m.enqueueAndForget(()=>kp(h,xe)),ze.fromCache&&"server"===N.source?Z.reject(new zt(et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):Z.resolve(ze)},error:ze=>Z.reject(ze)}),xe=new Qo(b,te,{includeMetadataChanges:!0,ku:!0});return Qm(h,xe)}(yield Al(s),s.asyncQueue,e,r,a)})),a.promise}class Jc{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new vf(this,"async_queue_retry"),this.Wc=()=>{const r=Pu();r&&kt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.No.Po()};const e=Pu();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const r=Pu();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const r=new mr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,E.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(r){if(!Br(r))throw r;kt("AsyncQueue","Operation failed with retryable error: "+r)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const r=this.Bc.then(()=>(this.Gc=!0,e().catch(a=>{throw this.Kc=a,this.Gc=!1,Jn("INTERNAL UNHANDLED ERROR: ",function(m){let b=m.message||"";return m.stack&&(b=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),b}(a)),a}).then(a=>(this.Gc=!1,a))));return this.Bc=r,r}enqueueAfterDelay(e,r,a){this.zc(),this.jc.indexOf(e)>-1&&(r=0);const h=Kg.createAndSchedule(this,e,r,a,m=>this.Yc(m));return this.qc.push(h),h}zc(){this.Kc&&Mn()}verifyOperationInProgress(){}Xc(){var e=this;return(0,E.Z)(function*(){let r;do{r=e.Bc,yield r}while(r!==e.Bc)})()}Zc(e){for(const r of this.qc)if(r.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((r,a)=>r.targetTimeMs-a.targetTimeMs);for(const r of this.qc)if(r.skipDelay(),"all"!==e&&r.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const r=this.qc.indexOf(e);this.qc.splice(r,1)}}function mu(s){return function(e,r){if("object"!=typeof e||null===e)return!1;const a=e;for(const h of["next","error","complete"])if(h in a&&"function"==typeof a[h])return!0;return!1}(s)}class qf{constructor(){this._progressObserver={},this._taskCompletionResolver=new mr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,a){this._progressObserver={next:e,error:r,complete:a}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const ed=-1;class vs extends $d{constructor(e,r,a,h){super(e,r,a,h),this.type="firestore",this._queue=new Jc,this._persistenceKey=(null==h?void 0:h.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||eg(this),this._firestoreClient.terminate()}}function cy(s,e){const r="object"==typeof s?s:(0,O.getApp)(),a="string"==typeof s?s:e||"(default)",h=(0,O._getProvider)(r,"firestore").getImmediate({identifier:a});if(!h._initialized){const m=(0,ae.P0)("firestore");m&&lm(h,...m)}return h}function Js(s){return s._firestoreClient||eg(s),s._firestoreClient.verifyNotTerminated(),s._firestoreClient}function eg(s){var e;const r=s._freezeSettings(),a=(m=(null===(e=s._app)||void 0===e?void 0:e.options.appId)||"",new Jl(s._databaseId,m,s._persistenceKey,(N=r).host,N.ssl,N.experimentalForceLongPolling,N.experimentalAutoDetectLongPolling,N.useFetchStreams));var m,N;s._firestoreClient=new vn(s._authCredentials,s._appCheckCredentials,s._queue,a)}function s_(s,e){hy(s=bi(s,vs));const r=Js(s),a=s._freezeSettings(),h=new Vf;return jd(r,h,new om(h,a.cacheSizeBytes,null==e?void 0:e.forceOwnership))}function tg(s){hy(s=bi(s,vs));const e=Js(s),r=s._freezeSettings(),a=new Vf;return jd(e,a,new Lf(a,r.cacheSizeBytes))}function jd(s,e,r){const a=new mr;return s.asyncQueue.enqueue((0,E.Z)(function*(){try{yield cm(s,r),yield ml(s,e),a.resolve()}catch(h){const m=h;if(!("FirebaseError"===(b=m).name?b.code===et.FAILED_PRECONDITION||b.code===et.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&b instanceof DOMException)||22===b.code||20===b.code||11===b.code))throw m;es("Error enabling offline persistence. Falling back to persistence disabled: "+m),a.reject(m)}var b})).then(()=>a.promise)}function hm(s){if(s._initialized&&!s._terminated)throw new zt(et.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new mr;return s._queue.enqueueAndForgetEvenWhileRestricted((0,E.Z)(function*(){try{yield(r=(0,E.Z)(function*(a){if(!Cn.C())return Promise.resolve();const h=a+"main";yield Cn.delete(h)}),function(a){return r.apply(this,arguments)})(ff(s._databaseId,s._persistenceKey)),e.resolve()}catch(r){e.reject(r)}var r})),e.promise}function fm(s){return function(e){const r=new mr;return e.asyncQueue.enqueueAndForget((0,E.Z)(function*(){return function(s,e){return Yc.apply(this,arguments)}(yield hc(e),r)})),r.promise}(Js(s=bi(s,vs)))}function ng(s){return function(s){return s.asyncQueue.enqueue((0,E.Z)(function*(){const e=yield Wf(s),r=yield ql(s);return e.setNetworkEnabled(!0),function(a){const h=Jt(a);return h.wu.delete(0),Od(h)}(r)}))}(Js(s=bi(s,vs)))}function dy(s){return function(s){return s.asyncQueue.enqueue((0,E.Z)(function*(){const e=yield Wf(s),r=yield ql(s);return e.setNetworkEnabled(!1),(a=(0,E.Z)(function*(h){const m=Jt(h);m.wu.add(0),yield Nd(m),m.yu.set("Offline")}),function(h){return a.apply(this,arguments)})(r);var a}))}(Js(s=bi(s,vs)))}function pm(s,e){const r=Js(s=bi(s,vs)),a=new qf;return function(s,e,r,a){const h=function(m,b){let N;return N="string"==typeof m?(new TextEncoder).encode(m):m,Z=function(Z,te){if(Z instanceof Uint8Array)return Xp(Z,void 0);if(Z instanceof ArrayBuffer)return Xp(new Uint8Array(Z),void 0);if(Z instanceof ReadableStream)return Z.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(N),new uy(Z,b);var Z}(r,Dh(e));s.asyncQueue.enqueueAndForget((0,E.Z)(function*(){!function(s,e,r){const a=Jt(s);var h;(h=(0,E.Z)(function*(m,b,N){try{const Z=yield b.getMetadata();if(yield function(Et,Wt){const sn=Jt(Et),Un=Qs(Wt.createTime);return sn.persistence.runTransaction("hasNewerBundle","readonly",Kn=>sn.Ns.getBundleMetadata(Kn,Wt.id)).then(Kn=>!!Kn&&Kn.createTime.compareTo(Un)>=0)}(m.localStore,Z))return yield b.close(),N._completeWith({taskState:"Success",documentsLoaded:(Et=Z).totalDocuments,bytesLoaded:Et.totalBytes,totalDocuments:Et.totalDocuments,totalBytes:Et.totalBytes}),Promise.resolve(new Set);N._updateProgress(Ah(Z));const te=new Lu(Z,m.localStore,b.It);let xe=yield b.mc();for(;xe;){const Et=yield te.Fu(xe);Et&&N._updateProgress(Et),xe=yield b.mc()}const ze=yield te.complete();return yield uc(m,ze.Lu,void 0),yield function(Et,Wt){const sn=Jt(Et);return sn.persistence.runTransaction("Save bundle","readwrite",Un=>sn.Ns.saveBundleMetadata(Un,Wt))}(m.localStore,Z),N._completeWith(ze.progress),Promise.resolve(ze.Bu)}catch(Z){return es("SyncEngine",`Loading bundle failed with ${Z}`),N._failWith(Z),Promise.resolve(new Set)}var Et}),function(m,b,N){return h.apply(this,arguments)})(a,e,r).then(h=>{a.sharedClientState.notifyBundleLoaded(h)})}(yield hc(s),h,a)}))}(r,s._databaseId,e,a),a}function rg(s,e){return function(s,e){return s.asyncQueue.enqueue((0,E.Z)(function*(){return function(r,a){const h=Jt(r);return h.persistence.runTransaction("Get named query","readonly",m=>h.Ns.getNamedQuery(m,a))}(yield gu(s),e)}))}(Js(s=bi(s,vs)),e).then(r=>r?new jo(s,null,r.query):null)}function hy(s){if(s._initialized||s._terminated)throw new zt(et.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class pc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pc(Ys.fromBase64String(e))}catch(r){throw new zt(et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new pc(Ys.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class gc{constructor(...e){for(let r=0;r<e.length;++r)if(0===e[r].length)throw new zt(et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Hd{constructor(e){this._methodName=e}}class Fh{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new zt(et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new zt(et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ur(this._lat,e._lat)||ur(this._long,e._long)}}const fy=/^__.*__$/;class ig{constructor(e,r,a){this.data=e,this.fieldMask=r,this.fieldTransforms=a}toMutation(e,r){return null!==this.fieldMask?new Bl(e,this.data,this.fieldMask,r,this.fieldTransforms):new Zu(e,this.data,r,this.fieldTransforms)}}class Yf{constructor(e,r,a){this.data=e,this.fieldMask=r,this.fieldTransforms=a}toMutation(e,r){return new Bl(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function d(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Mn()}}class l{constructor(e,r,a,h,m,b){this.settings=e,this.databaseId=r,this.It=a,this.ignoreUndefinedProperties=h,void 0===m&&this.na(),this.fieldTransforms=m||[],this.fieldMask=b||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new l(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var r;const a=null===(r=this.path)||void 0===r?void 0:r.child(e),h=this.ia({path:a,oa:!1});return h.ua(e),h}ca(e){var r;const a=null===(r=this.path)||void 0===r?void 0:r.child(e),h=this.ia({path:a,oa:!1});return h.na(),h}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Oo(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(r=>e.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>e.isPrefixOf(r.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(d(this.sa)&&fy.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class u{constructor(e,r,a){this.databaseId=e,this.ignoreUndefinedProperties=r,this.It=a||Dh(e)}da(e,r,a,h=!1){return new l({sa:e,methodName:r,fa:a,path:gi.emptyPath(),oa:!1,la:h},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function p(s){const e=s._freezeSettings(),r=Dh(s._databaseId);return new u(s._databaseId,!!e.ignoreUndefinedProperties,r)}function v(s,e,r,a,h,m={}){const b=s.da(m.merge||m.mergeFields?2:0,e,r,h);Mo("Data must be an object, but it was:",b,a);const N=Xr(a,b);let Z,te;if(m.merge)Z=new ni(b.fieldMask),te=b.fieldTransforms;else if(m.mergeFields){const xe=[];for(const ze of m.mergeFields){const Et=pa(e,ze,r);if(!b.contains(Et))throw new zt(et.INVALID_ARGUMENT,`Field '${Et}' is specified in your field mask but missing from your input data.`);yu(xe,Et)||xe.push(Et)}Z=new ni(xe),te=b.fieldTransforms.filter(ze=>Z.covers(ze.field))}else Z=null,te=b.fieldTransforms;return new ig(new Y(N),Z,te)}class R extends Hd{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof R}}function V(s,e,r){return new l({sa:3,fa:e.settings.fa,methodName:s._methodName,oa:r},e.databaseId,e.It,e.ignoreUndefinedProperties)}class se extends Hd{_toFieldTransform(e){return new ou(e.path,new iu)}isEqual(e){return e instanceof se}}class Se extends Hd{constructor(e,r){super(e),this._a=r}_toFieldTransform(e){const r=V(this,e,!0),a=this._a.map(m=>zn(m,r)),h=new Cl(a);return new ou(e.path,h)}isEqual(e){return this===e}}class He extends Hd{constructor(e,r){super(e),this._a=r}_toFieldTransform(e){const r=V(this,e,!0),a=this._a.map(m=>zn(m,r)),h=new su(a);return new ou(e.path,h)}isEqual(e){return this===e}}class It extends Hd{constructor(e,r){super(e),this.wa=r}_toFieldTransform(e){const r=new Vl(e.It,Iu(e.It,this.wa));return new ou(e.path,r)}isEqual(e){return this===e}}function St(s,e,r,a){const h=s.da(1,e,r);Mo("Data must be an object, but it was:",h,a);const m=[],b=Y.empty();Yo(a,(Z,te)=>{const xe=hs(e,Z,r);te=(0,ae.m9)(te);const ze=h.ca(xe);if(te instanceof R)m.push(xe);else{const Et=zn(te,ze);null!=Et&&(m.push(xe),b.set(xe,Et))}});const N=new ni(m);return new Yf(b,N,h.fieldTransforms)}function Bt(s,e,r,a,h,m){const b=s.da(1,e,r),N=[pa(e,a,r)],Z=[h];if(m.length%2!=0)throw new zt(et.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Et=0;Et<m.length;Et+=2)N.push(pa(e,m[Et])),Z.push(m[Et+1]);const te=[],xe=Y.empty();for(let Et=N.length-1;Et>=0;--Et)if(!yu(te,N[Et])){const Wt=N[Et];let sn=Z[Et];sn=(0,ae.m9)(sn);const Un=b.ca(Wt);if(sn instanceof R)te.push(Wt);else{const Kn=zn(sn,Un);null!=Kn&&(te.push(Wt),xe.set(Wt,Kn))}}const ze=new ni(te);return new Yf(xe,ze,b.fieldTransforms)}function On(s,e,r,a=!1){return zn(r,s.da(a?4:3,e))}function zn(s,e){if(ds(s=(0,ae.m9)(s)))return Mo("Unsupported field value:",e,s),Xr(s,e);if(s instanceof Hd)return function(r,a){if(!d(a.sa))throw a.ha(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.ha(`${r._methodName}() is not currently supported inside arrays`);const h=r._toFieldTransform(a);h&&a.fieldTransforms.push(h)}(s,e),null;if(void 0===s&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(r,a){const h=[];let m=0;for(const b of r){let N=zn(b,a.aa(m));null==N&&(N={nullValue:"NULL_VALUE"}),h.push(N),m++}return{arrayValue:{values:h}}}(s,e)}return function(r,a){if(null===(r=(0,ae.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return Iu(a.It,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const h=pi.fromDate(r);return{timestampValue:uo(a.It,h)}}if(r instanceof pi){const h=new pi(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:uo(a.It,h)}}if(r instanceof Fh)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof pc)return{bytesValue:jl(a.It,r._byteString)};if(r instanceof co){const h=a.databaseId,m=r.firestore._databaseId;if(!m.isEqual(h))throw a.ha(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Ac(r.firestore._databaseId||a.databaseId,r._key.path)}}throw a.ha(`Unsupported field value: ${Zp(r)}`)}(s,e)}function Xr(s,e){const r={};return Si(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yo(s,(a,h)=>{const m=zn(h,e.ra(a));null!=m&&(r[a]=m)}),{mapValue:{fields:r}}}function ds(s){return!("object"!=typeof s||null===s||s instanceof Array||s instanceof Date||s instanceof pi||s instanceof Fh||s instanceof pc||s instanceof co||s instanceof Hd)}function Mo(s,e,r){if(!ds(r)||"object"!=typeof(a=r)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const a=Zp(r);throw e.ha("an object"===a?s+" a custom object":s+" "+a)}var a}function pa(s,e,r){if((e=(0,ae.m9)(e))instanceof gc)return e._internalPath;if("string"==typeof e)return hs(s,e);throw Oo("Field path arguments must be of type string or ",s,!1,void 0,r)}const Aa=new RegExp("[~\\*/\\[\\]]");function hs(s,e,r){if(e.search(Aa)>=0)throw Oo(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,r);try{return new gc(...e.split("."))._internalPath}catch(a){throw Oo(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,r)}}function Oo(s,e,r,a,h){const m=a&&!a.isEmpty(),b=void 0!==h;let N=`Function ${e}() called with invalid data`;r&&(N+=" (via `toFirestore()`)"),N+=". ";let Z="";return(m||b)&&(Z+=" (found",m&&(Z+=` in field ${a}`),b&&(Z+=` in document ${h}`),Z+=")"),new zt(et.INVALID_ARGUMENT,N+s+Z)}function yu(s,e){return s.some(r=>r.isEqual(e))}class Wd{constructor(e,r,a,h,m){this._firestore=e,this._userDataWriter=r,this._key=a,this._document=h,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new co(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new l_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Kf("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r)}}}class l_ extends Wd{data(){return super.data()}}function Kf(s,e){return"string"==typeof e?hs(s,e):e instanceof gc?e._internalPath:e._delegate._internalPath}function uv(s){if("L"===s.limitType&&0===s.explicitOrderBy.length)throw new zt(et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lh{}function cv(s,...e){for(const r of e)s=r._apply(s);return s}class M0 extends Lh{constructor(e,r,a){super(),this.ma=e,this.ga=r,this.ya=a,this.type="where"}_apply(e){const r=p(e.firestore),a=function(h,m,b,N,Z,te,xe){let ze;if(Z.isKeyField()){if("array-contains"===te||"array-contains-any"===te)throw new zt(et.INVALID_ARGUMENT,`Invalid Query. You can't perform '${te}' queries on documentId().`);if("in"===te||"not-in"===te){ym(xe,te);const Wt=[];for(const sn of xe)Wt.push(my(N,h,sn));ze={arrayValue:{values:Wt}}}else ze=my(N,h,xe)}else"in"!==te&&"not-in"!==te&&"array-contains-any"!==te||ym(xe,te),ze=On(b,"where",xe,"in"===te||"not-in"===te);const Et=ui.create(Z,te,ze);return function(Wt,sn){if(sn.dt()){const Kn=Gu(Wt);if(null!==Kn&&!Kn.isEqual(sn.field))throw new zt(et.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Kn.toString()}' and '${sn.field.toString()}'`);const Mi=Wu(Wt);null!==Mi&&yy(0,sn.field,Mi)}const Un=function(Kn,Mi){for(const Os of Kn.filters)if(Mi.indexOf(Os.op)>=0)return Os.op;return null}(Wt,function(Kn){switch(Kn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(sn.op));if(null!==Un)throw new zt(et.INVALID_ARGUMENT,Un===sn.op?`Invalid query. You cannot use more than one '${sn.op.toString()}' filter.`:`Invalid query. You cannot use '${sn.op.toString()}' filters with '${Un.toString()}' filters.`)}(h,Et),Et}(e._query,0,r,e.firestore._databaseId,this.ma,this.ga,this.ya);return new jo(e.firestore,e.converter,function(h,m){const b=h.filters.concat([m]);return new kl(h.path,h.collectionGroup,h.explicitOrderBy.slice(),b,h.limit,h.limitType,h.startAt,h.endAt)}(e._query,a))}}function sg(s,e,r){const a=e,h=Kf("where",s);return new M0(h,a,r)}class u_ extends Lh{constructor(e,r){super(),this.ma=e,this.pa=r,this.type="orderBy"}_apply(e){const r=function(a,h,m){if(null!==a.startAt)throw new zt(et.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new zt(et.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const b=new Ba(h,m);return function(N,Z){if(null===Wu(N)){const te=Gu(N);null!==te&&yy(0,te,Z.field)}}(a,b),b}(e._query,this.ma,this.pa);return new jo(e.firestore,e.converter,function(a,h){const m=a.explicitOrderBy.concat([h]);return new kl(a.path,a.collectionGroup,m,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}function py(s,e="asc"){const r=e,a=Kf("orderBy",s);return new u_(a,r)}class gm extends Lh{constructor(e,r,a){super(),this.type=e,this.Ia=r,this.Ta=a}_apply(e){return new jo(e.firestore,e.converter,ol(e._query,this.Ia,this.Ta))}}function dv(s){return am("limit",s),new gm("limit",s,"F")}function gy(s){return am("limitToLast",s),new gm("limitToLast",s,"L")}class mm extends Lh{constructor(e,r,a){super(),this.type=e,this.Ea=r,this.Aa=a}_apply(e){const r=p_(e,this.type,this.Ea,this.Aa);return new jo(e.firestore,e.converter,(h=r,new kl((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,h,a.endAt)));var a,h}}function c_(...s){return new mm("startAt",s,!0)}function O0(...s){return new mm("startAfter",s,!1)}class d_ extends Lh{constructor(e,r,a){super(),this.type=e,this.Ea=r,this.Aa=a}_apply(e){const r=p_(e,this.type,this.Ea,this.Aa);return new jo(e.firestore,e.converter,(h=r,new kl((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,h)));var a,h}}function h_(...s){return new d_("endBefore",s,!1)}function f_(...s){return new d_("endAt",s,!0)}function p_(s,e,r,a){if(r[0]=(0,ae.m9)(r[0]),r[0]instanceof Wd)return function(h,m,b,N,Z){if(!N)throw new zt(et.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${b}().`);const te=[];for(const xe of To(h))if(xe.field.isKeyField())te.push(ba(m,N.key));else{const ze=N.data.field(xe.field);if(ts(ze))throw new zt(et.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+xe.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ze){const Et=xe.field.canonicalString();throw new zt(et.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Et}' (used as the orderBy) does not exist.`)}te.push(ze)}return new $o(te,Z)}(s._query,s.firestore._databaseId,e,r[0]._document,a);{const h=p(s.firestore);return function(m,b,N,Z,te,xe){const ze=m.explicitOrderBy;if(te.length>ze.length)throw new zt(et.INVALID_ARGUMENT,`Too many arguments provided to ${Z}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Et=[];for(let Wt=0;Wt<te.length;Wt++){const sn=te[Wt];if(ze[Wt].field.isKeyField()){if("string"!=typeof sn)throw new zt(et.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${Z}(), but got a ${typeof sn}`);if(!Ic(m)&&-1!==sn.indexOf("/"))throw new zt(et.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${Z}() must be a plain document ID, but '${sn}' contains a slash.`);const Un=m.path.child(Jr.fromString(sn));if(!bn.isDocumentKey(Un))throw new zt(et.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${Z}() must result in a valid document path, but '${Un}' is not because it contains an odd number of segments.`);const Kn=new bn(Un);Et.push(ba(b,Kn))}else{const Un=On(N,Z,sn);Et.push(Un)}}return new $o(Et,xe)}(s._query,s.firestore._databaseId,h,e,r,a)}}function my(s,e,r){if("string"==typeof(r=(0,ae.m9)(r))){if(""===r)throw new zt(et.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ic(e)&&-1!==r.indexOf("/"))throw new zt(et.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const a=e.path.child(Jr.fromString(r));if(!bn.isDocumentKey(a))throw new zt(et.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return ba(s,new bn(a))}if(r instanceof co)return ba(s,r._key);throw new zt(et.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zp(r)}.`)}function ym(s,e){if(!Array.isArray(s)||0===s.length)throw new zt(et.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(s.length>10)throw new zt(et.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function yy(s,e,r){if(!r.isEqual(e))throw new zt(et.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}class og{convertValue(e,r="none"){switch(Ia(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(vl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw Mn()}}convertObject(e,r){const a={};return Yo(e.fields,(h,m)=>{a[h]=this.convertValue(m,r)}),a}convertGeoPoint(e){return new Fh(xi(e.latitude),xi(e.longitude))}convertArray(e,r){return(e.values||[]).map(a=>this.convertValue(a,r))}convertServerTimestamp(e,r){switch(r){case"previous":const a=Xl(e);return null==a?null:this.convertValue(a,r);case"estimate":return this.convertTimestamp(rl(e));default:return null}}convertTimestamp(e){const r=Co(e);return new pi(r.seconds,r.nanos)}convertDocumentKey(e,r){const a=Jr.fromString(e);Fn(Xh(a));const h=new Ea(a.get(1),a.get(3)),m=new bn(a.popFirst(5));return h.isEqual(r)||Jn(`Document ${m} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),m}}function Zf(s,e,r){let a;return a=s?r&&(r.merge||r.mergeFields)?s.toFirestore(e,r):s.toFirestore(e):e,a}class g_ extends og{constructor(e){super(),this.firestore=e}convertBytes(e){return new pc(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new co(this.firestore,null,r)}}class Vh{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gd extends Wd{constructor(e,r,a,h,m,b){super(e,r,a,h,b),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Qf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const a=this._document.data.field(Kf("DocumentSnapshot.get",e));if(null!==a)return this._userDataWriter.convertValue(a,r.serverTimestamps)}}}class Qf extends Gd{data(e={}){return super.data(e)}}class td{constructor(e,r,a,h){this._firestore=e,this._userDataWriter=r,this._snapshot=h,this.metadata=new Vh(h.hasPendingWrites,h.fromCache),this.query=a}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,r){this._snapshot.docs.forEach(a=>{e.call(r,new Qf(this._firestore,this._userDataWriter,a.key,a,new Vh(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new zt(et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,h){if(a._snapshot.oldDocs.isEmpty()){let m=0;return a._snapshot.docChanges.map(b=>({type:"added",doc:new Qf(a._firestore,a._userDataWriter,b.doc.key,b.doc,new Vh(a._snapshot.mutatedKeys.has(b.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:m++}))}{let m=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(b=>h||3!==b.type).map(b=>{const N=new Qf(a._firestore,a._userDataWriter,b.doc.key,b.doc,new Vh(a._snapshot.mutatedKeys.has(b.doc.key),a._snapshot.fromCache),a.query.converter);let Z=-1,te=-1;return 0!==b.type&&(Z=m.indexOf(b.doc.key),m=m.delete(b.doc.key)),1!==b.type&&(m=m.add(b.doc),te=m.indexOf(b.doc.key)),{type:m_(b.type),doc:N,oldIndex:Z,newIndex:te}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function m_(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Mn()}}function hv(s,e){return s instanceof Gd&&e instanceof Gd?s._firestore===e._firestore&&s._key.isEqual(e._key)&&(null===s._document?null===e._document:s._document.isEqual(e._document))&&s._converter===e._converter:s instanceof td&&e instanceof td&&s._firestore===e._firestore&&Qp(s.query,e.query)&&s.metadata.isEqual(e.metadata)&&s._snapshot.isEqual(e._snapshot)}function y_(s){s=bi(s,co);const e=bi(s.firestore,vs);return Gf(Js(e),s._key).then(r=>Ey(e,s,r))}class nd extends og{constructor(e){super(),this.firestore=e}convertBytes(e){return new pc(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new co(this.firestore,null,r)}}function _y(s){s=bi(s,co);const e=bi(s.firestore,vs),r=Js(e),a=new nd(e);return function(s,e){const r=new mr;return s.asyncQueue.enqueueAndForget((0,E.Z)(function*(){return(a=(0,E.Z)(function*(h,m,b){try{const N=yield function(Z,te){const xe=Jt(Z);return xe.persistence.runTransaction("read document","readonly",ze=>xe.localDocuments.getDocument(ze,te))}(h,m);N.isFoundDocument()?b.resolve(N):N.isNoDocument()?b.resolve(null):b.reject(new zt(et.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(N){const Z=Wc(N,`Failed to get document '${m} from cache`);b.reject(Z)}}),function(h,m,b){return a.apply(this,arguments)})(yield gu(s),e,r);var a})),r.promise}(r,s._key).then(h=>new Gd(e,a,s._key,h,new Vh(null!==h&&h.hasLocalMutations,!0),s.converter))}function vy(s){s=bi(s,co);const e=bi(s.firestore,vs);return Gf(Js(e),s._key,{source:"server"}).then(r=>Ey(e,s,r))}function __(s){s=bi(s,jo);const e=bi(s.firestore,vs),r=Js(e),a=new nd(e);return uv(s._query),Xc(r,s._query).then(h=>new td(e,a,s,h))}function v_(s){s=bi(s,jo);const e=bi(s.firestore,vs),r=Js(e),a=new nd(e);return function(s,e){const r=new mr;return s.asyncQueue.enqueueAndForget((0,E.Z)(function*(){return(a=(0,E.Z)(function*(h,m,b){try{const N=yield Dp(h,m,!0),Z=new Fd(m,N.Hi),te=Z.Wu(N.documents),xe=Z.applyChanges(te,!1);b.resolve(xe.snapshot)}catch(N){const Z=Wc(N,`Failed to execute query '${m} against cache`);b.reject(Z)}}),function(h,m,b){return a.apply(this,arguments)})(yield gu(s),e,r);var a})),r.promise}(r,s._query).then(h=>new td(e,a,s,h))}function E_(s){s=bi(s,jo);const e=bi(s.firestore,vs),r=Js(e),a=new nd(e);return Xc(r,s._query,{source:"server"}).then(h=>new td(e,a,s,h))}function I_(s,e,r){s=bi(s,co);const a=bi(s.firestore,vs),h=Zf(s.converter,e,r);return Xf(a,[v(p(a),"setDoc",s._key,h,null!==s.converter,r).toMutation(s._key,ki.none())])}function b_(s,e,r,...a){s=bi(s,co);const h=bi(s.firestore,vs),m=p(h);let b;return b="string"==typeof(e=(0,ae.m9)(e))||e instanceof gc?Bt(m,"updateDoc",s._key,e,r,a):St(m,"updateDoc",s._key,e),Xf(h,[b.toMutation(s._key,ki.exists(!0))])}function C_(s){return Xf(bi(s.firestore,vs),[new wu(s._key,ki.none())])}function w_(s,e){const r=bi(s.firestore,vs),a=um(s),h=Zf(s.converter,e);return Xf(r,[v(p(s.firestore),"addDoc",a._key,h,null!==s.converter,{}).toMutation(a._key,ki.exists(!1))]).then(()=>a)}function D_(s,...e){var r,a,h;s=(0,ae.m9)(s);let m={includeMetadataChanges:!1},b=0;"object"!=typeof e[b]||mu(e[b])||(m=e[b],b++);const N={includeMetadataChanges:m.includeMetadataChanges};if(mu(e[b])){const ze=e[b];e[b]=null===(r=ze.next)||void 0===r?void 0:r.bind(ze),e[b+1]=null===(a=ze.error)||void 0===a?void 0:a.bind(ze),e[b+2]=null===(h=ze.complete)||void 0===h?void 0:h.bind(ze)}let Z,te,xe;if(s instanceof co)te=bi(s.firestore,vs),xe=Zs(s._key.path),Z={next:ze=>{e[b]&&e[b](Ey(te,s,ze))},error:e[b+1],complete:e[b+2]};else{const ze=bi(s,jo);te=bi(ze.firestore,vs),xe=ze._query;const Et=new nd(te);Z={next:Wt=>{e[b]&&e[b](new td(te,Et,ze,Wt))},error:e[b+1],complete:e[b+2]},uv(s._query)}return function(ze,Et,Wt,sn){const Un=new jf(sn),Kn=new Qo(Et,Un,Wt);return ze.asyncQueue.enqueueAndForget((0,E.Z)(function*(){return Qm(yield Al(ze),Kn)})),()=>{Un.bc(),ze.asyncQueue.enqueueAndForget((0,E.Z)(function*(){return kp(yield Al(ze),Kn)}))}}(Js(te),xe,N,Z)}function N0(s,e){return function(s,e){const r=new jf(e);return s.asyncQueue.enqueueAndForget((0,E.Z)(function*(){return a=yield Al(s),h=r,Jt(a).bu.add(h),void h.next();var a,h})),()=>{r.bc(),s.asyncQueue.enqueueAndForget((0,E.Z)(function*(){return a=yield Al(s),h=r,void Jt(a).bu.delete(h);var a,h}))}}(Js(s=bi(s,vs)),mu(e)?e:{next:e})}function Xf(s,e){return function(r,a){const h=new mr;return r.asyncQueue.enqueueAndForget((0,E.Z)(function*(){return function(s,e,r){return xf.apply(this,arguments)}(yield hc(r),a,h)})),h.promise}(Js(s),e)}function Ey(s,e,r){const a=r.docs.get(e._key),h=new nd(s);return new Gd(s,h,e._key,a,new Vh(r.hasPendingWrites,r.fromCache),e.converter)}const ea={maxAttempts:5};class Iy{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=p(e)}set(e,r,a){this._verifyNotCommitted();const h=zd(e,this._firestore),m=Zf(h.converter,r,a),b=v(this._dataReader,"WriteBatch.set",h._key,m,null!==h.converter,a);return this._mutations.push(b.toMutation(h._key,ki.none())),this}update(e,r,a,...h){this._verifyNotCommitted();const m=zd(e,this._firestore);let b;return b="string"==typeof(r=(0,ae.m9)(r))||r instanceof gc?Bt(this._dataReader,"WriteBatch.update",m._key,r,a,h):St(this._dataReader,"WriteBatch.update",m._key,r),this._mutations.push(b.toMutation(m._key,ki.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=zd(e,this._firestore);return this._mutations=this._mutations.concat(new wu(r._key,ki.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new zt(et.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zd(s,e){if((s=(0,ae.m9)(s)).firestore!==e)throw new zt(et.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}class pv extends class{constructor(e,r){this._firestore=e,this._transaction=r,this._dataReader=p(e)}get(e){const r=zd(e,this._firestore),a=new g_(this._firestore);return this._transaction.lookup([r._key]).then(h=>{if(!h||1!==h.length)return Mn();const m=h[0];if(m.isFoundDocument())return new Wd(this._firestore,a,m.key,m,r.converter);if(m.isNoDocument())return new Wd(this._firestore,a,r._key,null,r.converter);throw Mn()})}set(e,r,a){const h=zd(e,this._firestore),m=Zf(h.converter,r,a),b=v(this._dataReader,"Transaction.set",h._key,m,null!==h.converter,a);return this._transaction.set(h._key,b),this}update(e,r,a,...h){const m=zd(e,this._firestore);let b;return b="string"==typeof(r=(0,ae.m9)(r))||r instanceof gc?Bt(this._dataReader,"Transaction.update",m._key,r,a,h):St(this._dataReader,"Transaction.update",m._key,r),this._transaction.update(m._key,b),this}delete(e){const r=zd(e,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=zd(e,this._firestore),a=new nd(this._firestore);return super.get(e).then(h=>new Gd(this._firestore,a,r._key,h._document,new Vh(!1,!1),r.converter))}}function T_(s,e,r){s=bi(s,vs);const a=Object.assign(Object.assign({},ea),r);return function(h){if(h.maxAttempts<1)throw new zt(et.INVALID_ARGUMENT,"Max attempts must be at least 1")}(a),function(h,m,b){const N=new mr;return h.asyncQueue.enqueueAndForget((0,E.Z)(function*(){const Z=yield function(s){return Bu(s).then(e=>e.datastore)}(h);new Ph(h.asyncQueue,Z,b,m,N).run()})),N.promise}(Js(s),h=>e(new pv(s,h)),a)}function gv(){return new R("deleteField")}function S_(){return new se("serverTimestamp")}function A_(...s){return new Se("arrayUnion",s)}function Jf(...s){return new He("arrayRemove",s)}function mv(s){return new It("increment",s)}!function(s,e=!0){hr=O.SDK_VERSION,(0,O._registerComponent)(new ne.wA("firestore",(r,{instanceIdentifier:a,options:h})=>{const m=r.getProvider("app").getImmediate(),b=new vs(new Nl(r.getProvider("auth-internal")),new Uu(r.getProvider("app-check-internal")),function(N,Z){if(!Object.prototype.hasOwnProperty.apply(N.options,["projectId"]))throw new zt(et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ea(N.options.projectId,Z)}(m,a),m);return h=Object.assign({useFetchStreams:e},h),b._setSettings(h),b},"PUBLIC").setMultipleInstances(!0)),(0,O.registerVersion)(Ht,"3.7.1",s),(0,O.registerVersion)(Ht,"3.7.1","esm2017")}()},3854:(tn,Ze,B)=>{"use strict";B.d(Ze,{BH:()=>vt,LL:()=>Rt,ZR:()=>dt,gQ:()=>Fr,zI:()=>rt,hu:()=>O,g5:()=>ne,US:()=>Q,tV:()=>Te,h$:()=>ve,L:()=>re,$s:()=>mn,r3:()=>Tr,Sg:()=>ht,ne:()=>Dr,p$:()=>ie,vZ:()=>gn,ZB:()=>me,gK:()=>di,pd:()=>ai,aH:()=>pn,q4:()=>At,P0:()=>wn,Pz:()=>bt,m9:()=>qt,z$:()=>_e,GJ:()=>Gr,jU:()=>Ee,ru:()=>je,xb:()=>Wn,w1:()=>Fe,hl:()=>jt,uI:()=>De,UG:()=>Xe,Yr:()=>Je,b$:()=>Ae,G6:()=>ct,w9:()=>qn,cI:()=>Gt,UI:()=>cr,xO:()=>zr,zd:()=>kr,DV:()=>Ft,ug:()=>Xn,dS:()=>br,Wl:()=>Bn,Dv:()=>ci,Wj:()=>Vn,lb:()=>Sr,eu:()=>I});const O=function(Be,Ve){if(!Be)throw ne(Ve)},ne=function(Be){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Be)},oe=function(Be){const Ve=[];let Qe=0;for(let ke=0;ke<Be.length;ke++){let ye=Be.charCodeAt(ke);ye<128?Ve[Qe++]=ye:ye<2048?(Ve[Qe++]=ye>>6|192,Ve[Qe++]=63&ye|128):55296==(64512&ye)&&ke+1<Be.length&&56320==(64512&Be.charCodeAt(ke+1))?(ye=65536+((1023&ye)<<10)+(1023&Be.charCodeAt(++ke)),Ve[Qe++]=ye>>18|240,Ve[Qe++]=ye>>12&63|128,Ve[Qe++]=ye>>6&63|128,Ve[Qe++]=63&ye|128):(Ve[Qe++]=ye>>12|224,Ve[Qe++]=ye>>6&63|128,Ve[Qe++]=63&ye|128)}return Ve},Q={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Be,Ve){if(!Array.isArray(Be))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Qe=Ve?this.byteToCharMapWebSafe_:this.byteToCharMap_,ke=[];for(let ye=0;ye<Be.length;ye+=3){const Oe=Be[ye],ut=ye+1<Be.length,Ut=ut?Be[ye+1]:0,Ln=ye+2<Be.length,Tn=Ln?Be[ye+2]:0;let yn=(15&Ut)<<2|Tn>>6,pr=63&Tn;Ln||(pr=64,ut||(yn=64)),ke.push(Qe[Oe>>2],Qe[(3&Oe)<<4|Ut>>4],Qe[yn],Qe[pr])}return ke.join("")},encodeString(Be,Ve){return this.HAS_NATIVE_SUPPORT&&!Ve?btoa(Be):this.encodeByteArray(oe(Be),Ve)},decodeString(Be,Ve){return this.HAS_NATIVE_SUPPORT&&!Ve?atob(Be):function(Be){const Ve=[];let Qe=0,ke=0;for(;Qe<Be.length;){const ye=Be[Qe++];if(ye<128)Ve[ke++]=String.fromCharCode(ye);else if(ye>191&&ye<224){const Oe=Be[Qe++];Ve[ke++]=String.fromCharCode((31&ye)<<6|63&Oe)}else if(ye>239&&ye<365){const Ln=((7&ye)<<18|(63&Be[Qe++])<<12|(63&Be[Qe++])<<6|63&Be[Qe++])-65536;Ve[ke++]=String.fromCharCode(55296+(Ln>>10)),Ve[ke++]=String.fromCharCode(56320+(1023&Ln))}else{const Oe=Be[Qe++],ut=Be[Qe++];Ve[ke++]=String.fromCharCode((15&ye)<<12|(63&Oe)<<6|63&ut)}}return Ve.join("")}(this.decodeStringToByteArray(Be,Ve))},decodeStringToByteArray(Be,Ve){this.init_();const Qe=Ve?this.charToByteMapWebSafe_:this.charToByteMap_,ke=[];for(let ye=0;ye<Be.length;){const Oe=Qe[Be.charAt(ye++)],Ut=ye<Be.length?Qe[Be.charAt(ye)]:0;++ye;const Tn=ye<Be.length?Qe[Be.charAt(ye)]:64;++ye;const ln=ye<Be.length?Qe[Be.charAt(ye)]:64;if(++ye,null==Oe||null==Ut||null==Tn||null==ln)throw Error();ke.push(Oe<<2|Ut>>4),64!==Tn&&(ke.push(Ut<<4&240|Tn>>2),64!==ln&&ke.push(Tn<<6&192|ln))}return ke},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Be=0;Be<this.ENCODED_VALS.length;Be++)this.byteToCharMap_[Be]=this.ENCODED_VALS.charAt(Be),this.charToByteMap_[this.byteToCharMap_[Be]]=Be,this.byteToCharMapWebSafe_[Be]=this.ENCODED_VALS_WEBSAFE.charAt(Be),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Be]]=Be,Be>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Be)]=Be,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Be)]=Be)}}},ve=function(Be){const Ve=oe(Be);return Q.encodeByteArray(Ve,!0)},re=function(Be){return ve(Be).replace(/\./g,"")},Te=function(Be){try{return Q.decodeString(Be,!0)}catch(Ve){console.error("base64Decode failed: ",Ve)}return null};function ie(Be){return me(void 0,Be)}function me(Be,Ve){if(!(Ve instanceof Object))return Ve;switch(Ve.constructor){case Date:return new Date(Ve.getTime());case Object:void 0===Be&&(Be={});break;case Array:Be=[];break;default:return Ve}for(const Qe in Ve)!Ve.hasOwnProperty(Qe)||!Ce(Qe)||(Be[Qe]=me(Be[Qe],Ve[Qe]));return Be}function Ce(Be){return"__proto__"!==Be}function _e(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function De(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_e())}function Xe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Be){return!1}}function Ee(){return"object"==typeof self&&self.self===self}function je(){const Be="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Be&&void 0!==Be.id}function Ae(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Fe(){const Be=_e();return Be.indexOf("MSIE ")>=0||Be.indexOf("Trident/")>=0}function Je(){return!1}function ct(){return!Xe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jt(){return"object"==typeof indexedDB}function I(){return new Promise((Be,Ve)=>{try{let Qe=!0;const ke="validate-browser-context-for-indexeddb-analytics-module",ye=self.indexedDB.open(ke);ye.onsuccess=()=>{ye.result.close(),Qe||self.indexedDB.deleteDatabase(ke),Be(!0)},ye.onupgradeneeded=()=>{Qe=!1},ye.onerror=()=>{var Oe;Ve((null===(Oe=ye.error)||void 0===Oe?void 0:Oe.message)||"")}}catch(Qe){Ve(Qe)}})}function rt(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const Dt=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const Be=process.env.__FIREBASE_DEFAULTS__;return Be?JSON.parse(Be):void 0})()||(()=>{if("undefined"==typeof document)return;let Be;try{Be=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Qe){return}const Ve=Be&&Te(Be[1]);return Ve&&JSON.parse(Ve)})()}catch(Be){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Be}`)}},At=Be=>{var Ve,Qe;return null===(Qe=null===(Ve=Dt())||void 0===Ve?void 0:Ve.emulatorHosts)||void 0===Qe?void 0:Qe[Be]},wn=Be=>{const Ve=At(Be);if(!Ve)return;const Qe=Ve.lastIndexOf(":");if(Qe<=0||Qe+1===Ve.length)throw new Error(`Invalid host ${Ve} with no separate hostname and port!`);const ke=parseInt(Ve.substring(Qe+1),10);return"["===Ve[0]?[Ve.substring(1,Qe-1),ke]:[Ve.substring(0,Qe),ke]},pn=()=>{var Be;return null===(Be=Dt())||void 0===Be?void 0:Be.config},bt=Be=>{var Ve;return null===(Ve=Dt())||void 0===Ve?void 0:Ve[`_${Be}`]};class vt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ve,Qe)=>{this.resolve=Ve,this.reject=Qe})}wrapCallback(Ve){return(Qe,ke)=>{Qe?this.reject(Qe):this.resolve(ke),"function"==typeof Ve&&(this.promise.catch(()=>{}),1===Ve.length?Ve(Qe):Ve(Qe,ke))}}}function ht(Be,Ve){if(Be.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ke=Ve||"demo-project",ye=Be.iat||0,Oe=Be.sub||Be.user_id;if(!Oe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ut=Object.assign({iss:`https://securetoken.google.com/${ke}`,aud:ke,iat:ye,exp:ye+3600,auth_time:ye,sub:Oe,user_id:Oe,firebase:{sign_in_provider:"custom",identities:{}}},Be);return[re(JSON.stringify({alg:"none",type:"JWT"})),re(JSON.stringify(ut)),""].join(".")}class dt extends Error{constructor(Ve,Qe,ke){super(Qe),this.code=Ve,this.customData=ke,this.name="FirebaseError",Object.setPrototypeOf(this,dt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rt.prototype.create)}}class Rt{constructor(Ve,Qe,ke){this.service=Ve,this.serviceName=Qe,this.errors=ke}create(Ve,...Qe){const ke=Qe[0]||{},ye=`${this.service}/${Ve}`,Oe=this.errors[Ve],ut=Oe?function(Be,Ve){return Be.replace(Lt,(Qe,ke)=>{const ye=Ve[ke];return null!=ye?String(ye):`<${ke}?>`})}(Oe,ke):"Error";return new dt(ye,`${this.serviceName}: ${ut} (${ye}).`,ke)}}const Lt=/\{\$([^}]+)}/g;function Gt(Be){return JSON.parse(Be)}function Bn(Be){return JSON.stringify(Be)}const ir=function(Be){let Ve={},Qe={},ke={},ye="";try{const Oe=Be.split(".");Ve=Gt(Te(Oe[0])||""),Qe=Gt(Te(Oe[1])||""),ye=Oe[2],ke=Qe.d||{},delete Qe.d}catch(Oe){}return{header:Ve,claims:Qe,data:ke,signature:ye}},qn=function(Be){const Qe=ir(Be).claims;return!!Qe&&"object"==typeof Qe&&Qe.hasOwnProperty("iat")},Gr=function(Be){const Ve=ir(Be).claims;return"object"==typeof Ve&&!0===Ve.admin};function Tr(Be,Ve){return Object.prototype.hasOwnProperty.call(Be,Ve)}function Ft(Be,Ve){if(Object.prototype.hasOwnProperty.call(Be,Ve))return Be[Ve]}function Wn(Be){for(const Ve in Be)if(Object.prototype.hasOwnProperty.call(Be,Ve))return!1;return!0}function cr(Be,Ve,Qe){const ke={};for(const ye in Be)Object.prototype.hasOwnProperty.call(Be,ye)&&(ke[ye]=Ve.call(Qe,Be[ye],ye,Be));return ke}function gn(Be,Ve){if(Be===Ve)return!0;const Qe=Object.keys(Be),ke=Object.keys(Ve);for(const ye of Qe){if(!ke.includes(ye))return!1;const Oe=Be[ye],ut=Ve[ye];if(sr(Oe)&&sr(ut)){if(!gn(Oe,ut))return!1}else if(Oe!==ut)return!1}for(const ye of ke)if(!Qe.includes(ye))return!1;return!0}function sr(Be){return null!==Be&&"object"==typeof Be}function zr(Be){const Ve=[];for(const[Qe,ke]of Object.entries(Be))Array.isArray(ke)?ke.forEach(ye=>{Ve.push(encodeURIComponent(Qe)+"="+encodeURIComponent(ye))}):Ve.push(encodeURIComponent(Qe)+"="+encodeURIComponent(ke));return Ve.length?"&"+Ve.join("&"):""}function kr(Be){const Ve={};return Be.replace(/^\?/,"").split("&").forEach(ke=>{if(ke){const[ye,Oe]=ke.split("=");Ve[decodeURIComponent(ye)]=decodeURIComponent(Oe)}}),Ve}function ai(Be){const Ve=Be.indexOf("?");if(!Ve)return"";const Qe=Be.indexOf("#",Ve);return Be.substring(Ve,Qe>0?Qe:void 0)}class Fr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Ve=1;Ve<this.blockSize;++Ve)this.pad_[Ve]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Ve,Qe){Qe||(Qe=0);const ke=this.W_;if("string"==typeof Ve)for(let ln=0;ln<16;ln++)ke[ln]=Ve.charCodeAt(Qe)<<24|Ve.charCodeAt(Qe+1)<<16|Ve.charCodeAt(Qe+2)<<8|Ve.charCodeAt(Qe+3),Qe+=4;else for(let ln=0;ln<16;ln++)ke[ln]=Ve[Qe]<<24|Ve[Qe+1]<<16|Ve[Qe+2]<<8|Ve[Qe+3],Qe+=4;for(let ln=16;ln<80;ln++){const yn=ke[ln-3]^ke[ln-8]^ke[ln-14]^ke[ln-16];ke[ln]=4294967295&(yn<<1|yn>>>31)}let Tn,kn,ye=this.chain_[0],Oe=this.chain_[1],ut=this.chain_[2],Ut=this.chain_[3],Ln=this.chain_[4];for(let ln=0;ln<80;ln++){ln<40?ln<20?(Tn=Ut^Oe&(ut^Ut),kn=1518500249):(Tn=Oe^ut^Ut,kn=1859775393):ln<60?(Tn=Oe&ut|Ut&(Oe|ut),kn=2400959708):(Tn=Oe^ut^Ut,kn=3395469782);const yn=(ye<<5|ye>>>27)+Tn+Ln+kn+ke[ln]&4294967295;Ln=Ut,Ut=ut,ut=4294967295&(Oe<<30|Oe>>>2),Oe=ye,ye=yn}this.chain_[0]=this.chain_[0]+ye&4294967295,this.chain_[1]=this.chain_[1]+Oe&4294967295,this.chain_[2]=this.chain_[2]+ut&4294967295,this.chain_[3]=this.chain_[3]+Ut&4294967295,this.chain_[4]=this.chain_[4]+Ln&4294967295}update(Ve,Qe){if(null==Ve)return;void 0===Qe&&(Qe=Ve.length);const ke=Qe-this.blockSize;let ye=0;const Oe=this.buf_;let ut=this.inbuf_;for(;ye<Qe;){if(0===ut)for(;ye<=ke;)this.compress_(Ve,ye),ye+=this.blockSize;if("string"==typeof Ve){for(;ye<Qe;)if(Oe[ut]=Ve.charCodeAt(ye),++ut,++ye,ut===this.blockSize){this.compress_(Oe),ut=0;break}}else for(;ye<Qe;)if(Oe[ut]=Ve[ye],++ut,++ye,ut===this.blockSize){this.compress_(Oe),ut=0;break}}this.inbuf_=ut,this.total_+=Qe}digest(){const Ve=[];let Qe=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ye=this.blockSize-1;ye>=56;ye--)this.buf_[ye]=255&Qe,Qe/=256;this.compress_(this.buf_);let ke=0;for(let ye=0;ye<5;ye++)for(let Oe=24;Oe>=0;Oe-=8)Ve[ke]=this.chain_[ye]>>Oe&255,++ke;return Ve}}function Dr(Be,Ve){const Qe=new mi(Be,Ve);return Qe.subscribe.bind(Qe)}class mi{constructor(Ve,Qe){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Qe,this.task.then(()=>{Ve(this)}).catch(ke=>{this.error(ke)})}next(Ve){this.forEachObserver(Qe=>{Qe.next(Ve)})}error(Ve){this.forEachObserver(Qe=>{Qe.error(Ve)}),this.close(Ve)}complete(){this.forEachObserver(Ve=>{Ve.complete()}),this.close()}subscribe(Ve,Qe,ke){let ye;if(void 0===Ve&&void 0===Qe&&void 0===ke)throw new Error("Missing Observer.");ye=function(Be,Ve){if("object"!=typeof Be||null===Be)return!1;for(const Qe of["next","error","complete"])if(Qe in Be&&"function"==typeof Be[Qe])return!0;return!1}(Ve)?Ve:{next:Ve,error:Qe,complete:ke},void 0===ye.next&&(ye.next=Ct),void 0===ye.error&&(ye.error=Ct),void 0===ye.complete&&(ye.complete=Ct);const Oe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ye.error(this.finalError):ye.complete()}catch(ut){}}),this.observers.push(ye),Oe}unsubscribeOne(Ve){void 0===this.observers||void 0===this.observers[Ve]||(delete this.observers[Ve],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ve){if(!this.finalized)for(let Qe=0;Qe<this.observers.length;Qe++)this.sendOne(Qe,Ve)}sendOne(Ve,Qe){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ve])try{Qe(this.observers[Ve])}catch(ke){"undefined"!=typeof console&&console.error&&console.error(ke)}})}close(Ve){this.finalized||(this.finalized=!0,void 0!==Ve&&(this.finalError=Ve),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ct(){}const ci=function(Be,Ve,Qe,ke){let ye;if(ke<Ve?ye="at least "+Ve:ke>Qe&&(ye=0===Qe?"none":"no more than "+Qe),ye)throw new Error(Be+" failed: Was called with "+ke+(1===ke?" argument.":" arguments.")+" Expects "+ye+".")};function di(Be,Ve){return`${Be} failed: ${Ve} argument `}function Vn(Be,Ve,Qe,ke){if((!ke||Qe)&&"function"!=typeof Qe)throw new Error(di(Be,Ve)+"must be a valid function.")}function Sr(Be,Ve,Qe,ke){if((!ke||Qe)&&("object"!=typeof Qe||null===Qe))throw new Error(di(Be,Ve)+"must be a valid context object.")}const br=function(Be){const Ve=[];let Qe=0;for(let ke=0;ke<Be.length;ke++){let ye=Be.charCodeAt(ke);if(ye>=55296&&ye<=56319){const Oe=ye-55296;ke++,O(ke<Be.length,"Surrogate pair missing trail surrogate."),ye=65536+(Oe<<10)+(Be.charCodeAt(ke)-56320)}ye<128?Ve[Qe++]=ye:ye<2048?(Ve[Qe++]=ye>>6|192,Ve[Qe++]=63&ye|128):ye<65536?(Ve[Qe++]=ye>>12|224,Ve[Qe++]=ye>>6&63|128,Ve[Qe++]=63&ye|128):(Ve[Qe++]=ye>>18|240,Ve[Qe++]=ye>>12&63|128,Ve[Qe++]=ye>>6&63|128,Ve[Qe++]=63&ye|128)}return Ve},Xn=function(Be){let Ve=0;for(let Qe=0;Qe<Be.length;Qe++){const ke=Be.charCodeAt(Qe);ke<128?Ve++:ke<2048?Ve+=2:ke>=55296&&ke<=56319?(Ve+=4,Qe++):Ve+=3}return Ve};function mn(Be,Ve=1e3,Qe=2){const ke=Ve*Math.pow(Qe,Be),ye=Math.round(.5*ke*(Math.random()-.5)*2);return Math.min(144e5,ke+ye)}function qt(Be){return Be&&Be._delegate?Be._delegate:Be}},8945:(tn,Ze,B)=>{"use strict";function ae(w,P,D,q){var Ht,he=arguments.length,it=he<3?P:null===q?q=Object.getOwnPropertyDescriptor(P,D):q;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)it=Reflect.decorate(w,P,D,q);else for(var un=w.length-1;un>=0;un--)(Ht=w[un])&&(it=(he<3?Ht(it):he>3?Ht(P,D,it):Ht(P,D))||it);return he>3&&it&&Object.defineProperty(P,D,it),it}function Q(w,P){return function(D,q){P(D,q,w)}}function re(w,P,D,q){return new(D||(D=Promise))(function(it,Ht){function un(Rr){try{xn(q.next(Rr))}catch(Ti){Ht(Ti)}}function hr(Rr){try{xn(q.throw(Rr))}catch(Ti){Ht(Ti)}}function xn(Rr){Rr.done?it(Rr.value):function(it){return it instanceof D?it:new D(function(Ht){Ht(it)})}(Rr.value).then(un,hr)}xn((q=q.apply(w,P||[])).next())})}B.d(Ze,{Br:()=>fo,dr:()=>Or,YG:()=>rs,Sm:()=>Hn,W2:()=>Ir,Gu:()=>We,gu:()=>Ge,pK:()=>Qt,Ie:()=>An,u8:()=>Cr,IK:()=>qi,td:()=>hi,q_:()=>xr,z0:()=>ss,fG:()=>ws,uN:()=>js,jP:()=>io,g2:()=>Qi,wd:()=>ks,sr:()=>Ii,Pc:()=>Bo,r4:()=>_a,HT:()=>gs,t4:()=>ut,j9:()=>Oe});var I=B(7716),rt=B(665),pt=B(8583),st=B(174),mt=B(7235),At=(B(7689),B(5392),B(7807)),wn=B(9461),pn=B(7585),bt=B(1567),vt=B(4425),ht=B(6951),Ke=B(3291),Rt=(B(960),B(3150)),Nn=B(8891),Dn=B(9796),qn=B(9105),Gr=B(8002);function Ft(w,P,D,q){return(0,qn.m)(D)&&(q=D,D=void 0),q?Ft(w,P,D).pipe((0,Gr.U)(he=>(0,Dn.k)(he)?q(...he):q(he))):new Nn.y(he=>{Wn(w,P,function(Ht){he.next(arguments.length>1?Array.prototype.slice.call(arguments):Ht)},he,D)})}function Wn(w,P,D,q,he){let it;if(function(w){return w&&"function"==typeof w.addEventListener&&"function"==typeof w.removeEventListener}(w)){const Ht=w;w.addEventListener(P,D,he),it=()=>Ht.removeEventListener(P,D,he)}else if(function(w){return w&&"function"==typeof w.on&&"function"==typeof w.off}(w)){const Ht=w;w.on(P,D),it=()=>Ht.off(P,D)}else if(function(w){return w&&"function"==typeof w.addListener&&"function"==typeof w.removeListener}(w)){const Ht=w;w.addListener(P,D),it=()=>Ht.removeListener(P,D)}else{if(!w||!w.length)throw new TypeError("Invalid event target");for(let Ht=0,un=w.length;Ht<un;Ht++)Wn(w[Ht],P,D,q,he)}q.add(it)}var lr=B(9765),zr=B(6215),kr=B(5435),ai=B(3190),Fr=B(7519);const mi=pn.i,Ct=["*"],Vn=w=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(w):"function"==typeof requestAnimationFrame?requestAnimationFrame(w):setTimeout(w);let Sr=(()=>{class w{constructor(D,q){this.injector=D,this.el=q,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(D){this.el.nativeElement.value=this.lastValue=null==D?"":D,br(this.el)}handleChangeEvent(D,q){D===this.el.nativeElement&&(q!==this.lastValue&&(this.lastValue=q,this.onChange(q)),br(this.el))}_handleBlurEvent(D){D===this.el.nativeElement&&(this.onTouched(),br(this.el))}registerOnChange(D){this.onChange=D}registerOnTouched(D){this.onTouched=D}setDisabledState(D){this.el.nativeElement.disabled=D}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let D;try{D=this.injector.get(rt.a5)}catch(he){}if(!D)return;D.statusChanges&&(this.statusChanges=D.statusChanges.subscribe(()=>br(this.el)));const q=D.control;q&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(it=>{if(q[it]){const Ht=q[it].bind(q);q[it]=(...un)=>{Ht(...un),br(this.el)}}})}}return w.\u0275fac=function(D){I.$Z()},w.\u0275dir=I.lG2({type:w,hostBindings:function(D,q){1&D&&I.NdJ("ionBlur",function(it){return q._handleBlurEvent(it.target)})}}),ae([(0,I.L6J)("ionBlur",["$event.target"])],w.prototype,"_handleBlurEvent",null),w})();const br=w=>{Vn(()=>{const P=w.nativeElement,D=Xn(P);Yn(P,D);const q=P.closest("ion-item");q&&Yn(q,D)})},Xn=w=>{const P=w.classList,D=[];for(let q=0;q<P.length;q++){const he=P.item(q);null!==he&&on(he,"ng-")&&D.push(`ion-${he.substr(3)}`)}return D},Yn=(w,P)=>{const D=w.classList;["ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"].forEach(q=>D.remove(q)),P.forEach(q=>D.add(q))},on=(w,P)=>w.substr(0,P.length)===P;var mn;let cn=mn=class extends Sr{constructor(P,D){super(P,D)}writeValue(P){this.el.nativeElement.checked=this.lastValue=null!=P&&P,br(this.el)}_handleIonChange(P){this.handleChangeEvent(P,P.checked)}};var rn;cn.\u0275fac=function(P){return new(P||cn)(I.Y36(I.zs3),I.Y36(I.SBq))},cn.\u0275dir=I.lG2({type:cn,selectors:[["ion-checkbox"],["ion-toggle"]],hostBindings:function(P,D){1&P&&I.NdJ("ionChange",function(he){return D._handleIonChange(he.target)})},features:[I._Bn([{provide:rt.JU,useExisting:mn,multi:!0}]),I.qOj]}),cn.ctorParameters=()=>[{type:I.zs3},{type:I.SBq}],ae([(0,I.L6J)("ionChange",["$event.target"])],cn.prototype,"_handleIonChange",null);let qt=rn=class extends Sr{constructor(P,D){super(P,D)}_handleIonChange(P){this.handleChangeEvent(P,P.value)}registerOnChange(P){super.registerOnChange(D=>{P(""===D?null:parseFloat(D))})}};var Be;qt.\u0275fac=function(P){return new(P||qt)(I.Y36(I.zs3),I.Y36(I.SBq))},qt.\u0275dir=I.lG2({type:qt,selectors:[["ion-input","type","number"]],hostBindings:function(P,D){1&P&&I.NdJ("ionChange",function(he){return D._handleIonChange(he.target)})},features:[I._Bn([{provide:rt.JU,useExisting:rn,multi:!0}]),I.qOj]}),qt.ctorParameters=()=>[{type:I.zs3},{type:I.SBq}],ae([(0,I.L6J)("ionChange",["$event.target"])],qt.prototype,"_handleIonChange",null);let Ve=Be=class extends Sr{constructor(P,D){super(P,D)}_handleIonSelect(P){this.handleChangeEvent(P,P.checked)}};var Qe;Ve.\u0275fac=function(P){return new(P||Ve)(I.Y36(I.zs3),I.Y36(I.SBq))},Ve.\u0275dir=I.lG2({type:Ve,selectors:[["ion-radio"]],hostBindings:function(P,D){1&P&&I.NdJ("ionSelect",function(he){return D._handleIonSelect(he.target)})},features:[I._Bn([{provide:rt.JU,useExisting:Be,multi:!0}]),I.qOj]}),Ve.ctorParameters=()=>[{type:I.zs3},{type:I.SBq}],ae([(0,I.L6J)("ionSelect",["$event.target"])],Ve.prototype,"_handleIonSelect",null);let ke=Qe=class extends Sr{constructor(P,D){super(P,D)}_handleChangeEvent(P){this.handleChangeEvent(P,P.value)}};var ye;ke.\u0275fac=function(P){return new(P||ke)(I.Y36(I.zs3),I.Y36(I.SBq))},ke.\u0275dir=I.lG2({type:ke,selectors:[["ion-range"],["ion-select"],["ion-radio-group"],["ion-segment"],["ion-datetime"]],hostBindings:function(P,D){1&P&&I.NdJ("ionChange",function(he){return D._handleChangeEvent(he.target)})},features:[I._Bn([{provide:rt.JU,useExisting:Qe,multi:!0}]),I.qOj]}),ke.ctorParameters=()=>[{type:I.zs3},{type:I.SBq}],ae([(0,I.L6J)("ionChange",["$event.target"])],ke.prototype,"_handleChangeEvent",null);let Oe=ye=class extends Sr{constructor(P,D){super(P,D)}_handleInputEvent(P){this.handleChangeEvent(P,P.value)}};Oe.\u0275fac=function(P){return new(P||Oe)(I.Y36(I.zs3),I.Y36(I.SBq))},Oe.\u0275dir=I.lG2({type:Oe,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(P,D){1&P&&I.NdJ("ionChange",function(he){return D._handleInputEvent(he.target)})},features:[I._Bn([{provide:rt.JU,useExisting:ye,multi:!0}]),I.qOj]}),Oe.ctorParameters=()=>[{type:I.zs3},{type:I.SBq}],ae([(0,I.L6J)("ionChange",["$event.target"])],Oe.prototype,"_handleInputEvent",null);let ut=class{constructor(P,D){this.doc=P,this.backButton=new lr.xQ,this.keyboardDidShow=new lr.xQ,this.keyboardDidHide=new lr.xQ,this.pause=new lr.xQ,this.resume=new lr.xQ,this.resize=new lr.xQ,D.run(()=>{let q;this.win=P.defaultView,this.backButton.subscribeWithPriority=function(he,it){return this.subscribe(Ht=>Ht.register(he,un=>D.run(()=>it(un))))},Tn(this.pause,P,"pause"),Tn(this.resume,P,"resume"),Tn(this.backButton,P,"ionBackButton"),Tn(this.resize,this.win,"resize"),Tn(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),Tn(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(he=>{q=he}),this.win&&this.win.cordova?P.addEventListener("deviceready",()=>{q("cordova")},{once:!0}):q("dom")})}is(P){return(0,pn.a)(this.win,P)}platforms(){return(0,pn.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(P){return Ut(this.win.location.href,P)}isLandscape(){return!this.isPortrait()}isPortrait(){return this.win.matchMedia&&this.win.matchMedia("(orientation: portrait)").matches}testUserAgent(P){const D=this.win.navigator;return!!(D&&D.userAgent&&D.userAgent.indexOf(P)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}};ut.\u0275fac=function(P){return new(P||ut)(I.LFG(pt.K0),I.LFG(I.R0b))},ut.\u0275prov=I.Yz7({token:ut,factory:function(w){return ut.\u0275fac(w)},providedIn:"root"}),ut.ngInjectableDef=(0,I.Yz7)({factory:function(){return new ut((0,I.LFG)(pt.K0),(0,I.LFG)(I.R0b))},token:ut,providedIn:"root"}),ut=ae([Q(0,(0,I.tBr)(pt.K0))],ut);const Ut=(w,P)=>{P=P.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");const q=new RegExp("[\\?&]"+P+"=([^&#]*)").exec(w);return q?decodeURIComponent(q[1].replace(/\+/g," ")):null},Tn=(w,P,D)=>{P&&P.addEventListener(D,q=>{w.next(null!=q?q.detail:void 0)})};let ln=class{constructor(P,D,q,he){this.location=D,this.serializer=q,this.router=he,this.direction=$t,this.animated=Vt,this.guessDirection="forward",this.lastNavId=-1,he&&he.events.subscribe(it=>{if(it instanceof st.OD){const Ht=it.restoredState?it.restoredState.navigationId:it.id;this.guessDirection=Ht<this.lastNavId?"back":"forward",this.guessAnimation=it.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?it.id:Ht}}),P.backButton.subscribeWithPriority(0,it=>{this.pop(),it()})}navigateForward(P,D={}){return this.setDirection("forward",D.animated,D.animationDirection,D.animation),this.navigate(P,D)}navigateBack(P,D={}){return this.setDirection("back",D.animated,D.animationDirection,D.animation),this.navigate(P,D)}navigateRoot(P,D={}){return this.setDirection("root",D.animated,D.animationDirection,D.animation),this.navigate(P,D)}back(P={animated:!0,animationDirection:"back"}){return this.setDirection("back",P.animated,P.animationDirection,P.animation),this.location.back()}pop(){return re(this,void 0,void 0,function*(){let P=this.topOutlet;for(;P&&!(yield P.pop());)P=P.parentOutlet})}setDirection(P,D,q,he){this.direction=P,this.animated=yn(P,D,q),this.animationBuilder=he}setTopOutlet(P){this.topOutlet=P}consumeTransition(){let D,P="root";const q=this.animationBuilder;return"auto"===this.direction?(P=this.guessDirection,D=this.guessAnimation):(D=this.animated,P=this.direction),this.direction=$t,this.animated=Vt,this.animationBuilder=void 0,{direction:P,animation:D,animationBuilder:q}}navigate(P,D){if(Array.isArray(P))return this.router.navigate(P,D);{const q=this.serializer.parse(P.toString());return void 0!==D.queryParams&&(q.queryParams=Object.assign({},D.queryParams)),void 0!==D.fragment&&(q.fragment=D.fragment),this.router.navigateByUrl(q,D)}}};ln.\u0275fac=function(P){return new(P||ln)(I.LFG(ut),I.LFG(pt.Ye),I.LFG(st.Hx),I.LFG(st.F0,8))},ln.\u0275prov=I.Yz7({token:ln,factory:function(w){return ln.\u0275fac(w)},providedIn:"root"}),ln.ngInjectableDef=(0,I.Yz7)({factory:function(){return new ln((0,I.LFG)(ut),(0,I.LFG)(pt.Ye),(0,I.LFG)(st.Hx),(0,I.LFG)(st.F0,8))},token:ln,providedIn:"root"}),ln=ae([Q(3,(0,I.FiY)())],ln);const yn=(w,P,D)=>{if(!1!==P){if(void 0!==D)return D;if("forward"===w||"back"===w)return w;if("root"===w&&!0===P)return"forward"}},$t="auto",Vt=void 0,Nt=(w,P)=>{const D=w.prototype;P.forEach(q=>{Object.defineProperty(D,q,{get(){return this.el[q]},set(he){this.z.runOutsideAngular(()=>this.el[q]=he)}})})},_n=(w,P)=>{const D=w.prototype;P.forEach(q=>{D[q]=function(){const he=arguments;return this.z.runOutsideAngular(()=>this.el[q].apply(this.el,he))}})},Sn=(w,P,D)=>{D.forEach(q=>w[q]=Ft(P,q))};function nn(w){return function(D){return w.inputs&&Nt(D,w.inputs),w.methods&&_n(D,w.methods),D}}let Or=(()=>{let w=class{constructor(D,q,he){this.z=he,D.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(D){return new(D||w)(I.Y36(I.sBO),I.Y36(I.SBq),I.Y36(I.R0b))},w.\u0275cmp=I.Xpm({type:w,selectors:[["ion-app"]],ngContentSelectors:Ct,decls:1,vars:0,template:function(D,q){1&D&&(I.F$t(),I.Hsn(0))},encapsulation:2,changeDetection:0}),w})(),rs=(()=>{let w=class{constructor(D,q,he){this.z=he,D.detach(),this.el=q.nativeElement,Sn(this,this.el,["ionFocus","ionBlur"])}};return w.\u0275fac=function(D){return new(D||w)(I.Y36(I.sBO),I.Y36(I.SBq),I.Y36(I.R0b))},w.\u0275cmp=I.Xpm({type:w,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:Ct,decls:1,vars:0,template:function(D,q){1&D&&(I.F$t(),I.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([nn({inputs:["buttonType","color","disabled","download","expand","fill","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],w),w})(),Hn=(()=>{let w=class{constructor(D,q,he){this.z=he,D.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(D){return new(D||w)(I.Y36(I.sBO),I.Y36(I.SBq),I.Y36(I.R0b))},w.\u0275cmp=I.Xpm({type:w,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},ngContentSelectors:Ct,decls:1,vars:0,template:function(D,q){1&D&&(I.F$t(),I.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([nn({inputs:["collapse"]})],w),w})(),Ir=(()=>{let w=class{constructor(D,q,he){this.z=he,D.detach(),this.el=q.nativeElement,Sn(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return w.\u0275fac=function(D){return new(D||w)(I.Y36(I.sBO),I.Y36(I.SBq),I.Y36(I.R0b))},w.\u0275cmp=I.Xpm({type:w,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:Ct,decls:1,vars:0,template:function(D,q){1&D&&(I.F$t(),I.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([nn({inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],w),w})(),We=(()=>{let w=class{constructor(D,q,he){this.z=he,D.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(D){return new(D||w)(I.Y36(I.sBO),I.Y36(I.SBq),I.Y36(I.R0b))},w.\u0275cmp=I.Xpm({type:w,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:Ct,decls:1,vars:0,template:function(D,q){1&D&&(I.F$t(),I.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([nn({inputs:["collapse","mode","translucent"]})],w),w})(),Ge=(()=>{let w=class{constructor(D,q,he){this.z=he,D.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(D){return new(D||w)(I.Y36(I.sBO),I.Y36(I.SBq),I.Y36(I.R0b))},w.\u0275cmp=I.Xpm({type:w,selectors:[["ion-icon"]],inputs:{ariaHidden:"ariaHidden",ariaLabel:"ariaLabel",color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:Ct,decls:1,vars:0,template:function(D,q){1&D&&(I.F$t(),I.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([nn({inputs:["ariaHidden","ariaLabel","color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],w),w})(),Qt=(()=>{let w=class{constructor(D,q,he){this.z=he,D.detach(),this.el=q.nativeElement,Sn(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return w.\u0275fac=function(D){return new(D||w)(I.Y36(I.sBO),I.Y36(I.SBq),I.Y36(I.R0b))},w.\u0275cmp=I.Xpm({type:w,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:Ct,decls:1,vars:0,template:function(D,q){1&D&&(I.F$t(),I.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([nn({inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","debounce","disabled","enterkeyhint","inputmode","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],w),w})(),An=(()=>{let w=class{constructor(D,q,he){this.z=he,D.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(D){return new(D||w)(I.Y36(I.sBO),I.Y36(I.SBq),I.Y36(I.R0b))},w.\u0275cmp=I.Xpm({type:w,selectors:[["ion-item"]],inputs:{button:"button",color:"color",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:Ct,decls:1,vars:0,template:function(D,q){1&D&&(I.F$t(),I.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([nn({inputs:["button","color","detail","detailIcon","disabled","download","href","lines","mode","rel","routerAnimation","routerDirection","target","type"]})],w),w})(),Cr=(()=>{let w=class{constructor(D,q,he){this.z=he,D.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(D){return new(D||w)(I.Y36(I.sBO),I.Y36(I.SBq),I.Y36(I.R0b))},w.\u0275cmp=I.Xpm({type:w,selectors:[["ion-item-option"]],inputs:{color:"color",disabled:"disabled",download:"download",expandable:"expandable",href:"href",mode:"mode",rel:"rel",target:"target",type:"type"},ngContentSelectors:Ct,decls:1,vars:0,template:function(D,q){1&D&&(I.F$t(),I.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([nn({inputs:["color","disabled","download","expandable","href","mode","rel","target","type"]})],w),w})(),qi=(()=>{let w=class{constructor(D,q,he){this.z=he,D.detach(),this.el=q.nativeElement,Sn(this,this.el,["ionSwipe"])}};return w.\u0275fac=function(D){return new(D||w)(I.Y36(I.sBO),I.Y36(I.SBq),I.Y36(I.R0b))},w.\u0275cmp=I.Xpm({type:w,selectors:[["ion-item-options"]],inputs:{side:"side"},ngContentSelectors:Ct,decls:1,vars:0,template:function(D,q){1&D&&(I.F$t(),I.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([nn({inputs:["side"]})],w),w})(),hi=(()=>{let w=class{constructor(D,q,he){this.z=he,D.detach(),this.el=q.nativeElement,Sn(this,this.el,["ionDrag"])}};return w.\u0275fac=function(D){return new(D||w)(I.Y36(I.sBO),I.Y36(I.SBq),I.Y36(I.R0b))},w.\u0275cmp=I.Xpm({type:w,selectors:[["ion-item-sliding"]],inputs:{disabled:"disabled"},ngContentSelectors:Ct,decls:1,vars:0,template:function(D,q){1&D&&(I.F$t(),I.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([nn({inputs:["disabled"],methods:["getOpenAmount","getSlidingRatio","open","close","closeOpened"]})],w),w})(),xr=(()=>{let w=class{constructor(D,q,he){this.z=he,D.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(D){return new(D||w)(I.Y36(I.sBO),I.Y36(I.SBq),I.Y36(I.R0b))},w.\u0275cmp=I.Xpm({type:w,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:Ct,decls:1,vars:0,template:function(D,q){1&D&&(I.F$t(),I.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([nn({inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],w),w})(),ss=(()=>{let w=class{constructor(D,q,he){this.z=he,D.detach(),this.el=q.nativeElement,Sn(this,this.el,["ionWillOpen","ionWillClose","ionDidOpen","ionDidClose"])}};return w.\u0275fac=function(D){return new(D||w)(I.Y36(I.sBO),I.Y36(I.SBq),I.Y36(I.R0b))},w.\u0275cmp=I.Xpm({type:w,selectors:[["ion-menu"]],inputs:{contentId:"contentId",disabled:"disabled",maxEdgeStart:"maxEdgeStart",menuId:"menuId",side:"side",swipeGesture:"swipeGesture",type:"type"},ngContentSelectors:Ct,decls:1,vars:0,template:function(D,q){1&D&&(I.F$t(),I.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([nn({inputs:["contentId","disabled","maxEdgeStart","menuId","side","swipeGesture","type"],methods:["isOpen","isActive","open","close","toggle","setOpen"]})],w),w})(),ws=(()=>{let w=class{constructor(D,q,he){this.z=he,D.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(D){return new(D||w)(I.Y36(I.sBO),I.Y36(I.SBq),I.Y36(I.R0b))},w.\u0275cmp=I.Xpm({type:w,selectors:[["ion-menu-button"]],inputs:{autoHide:"autoHide",color:"color",disabled:"disabled",menu:"menu",mode:"mode",type:"type"},ngContentSelectors:Ct,decls:1,vars:0,template:function(D,q){1&D&&(I.F$t(),I.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([nn({inputs:["autoHide","color","disabled","menu","mode","type"]})],w),w})(),js=(()=>{let w=class{constructor(D,q,he){this.z=he,D.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(D){return new(D||w)(I.Y36(I.sBO),I.Y36(I.SBq),I.Y36(I.R0b))},w.\u0275cmp=I.Xpm({type:w,selectors:[["ion-note"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Ct,decls:1,vars:0,template:function(D,q){1&D&&(I.F$t(),I.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([nn({inputs:["color","mode"]})],w),w})(),Qi=(()=>{let w=class{constructor(D,q,he){this.z=he,D.detach(),this.el=q.nativeElement,Sn(this,this.el,["ionChange","ionInput","ionBlur","ionFocus"])}};return w.\u0275fac=function(D){return new(D||w)(I.Y36(I.sBO),I.Y36(I.SBq),I.Y36(I.R0b))},w.\u0275cmp=I.Xpm({type:w,selectors:[["ion-textarea"]],inputs:{autoGrow:"autoGrow",autocapitalize:"autocapitalize",autofocus:"autofocus",clearOnEdit:"clearOnEdit",color:"color",cols:"cols",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",maxlength:"maxlength",minlength:"minlength",mode:"mode",name:"name",placeholder:"placeholder",readonly:"readonly",required:"required",rows:"rows",spellcheck:"spellcheck",value:"value",wrap:"wrap"},ngContentSelectors:Ct,decls:1,vars:0,template:function(D,q){1&D&&(I.F$t(),I.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([nn({inputs:["autoGrow","autocapitalize","autofocus","clearOnEdit","color","cols","debounce","disabled","enterkeyhint","inputmode","maxlength","minlength","mode","name","placeholder","readonly","required","rows","spellcheck","value","wrap"],methods:["setFocus","getInputElement"]})],w),w})(),ks=(()=>{let w=class{constructor(D,q,he){this.z=he,D.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(D){return new(D||w)(I.Y36(I.sBO),I.Y36(I.SBq),I.Y36(I.R0b))},w.\u0275cmp=I.Xpm({type:w,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:Ct,decls:1,vars:0,template:function(D,q){1&D&&(I.F$t(),I.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([nn({inputs:["color","size"]})],w),w})(),Ii=(()=>{let w=class{constructor(D,q,he){this.z=he,D.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(D){return new(D||w)(I.Y36(I.sBO),I.Y36(I.SBq),I.Y36(I.R0b))},w.\u0275cmp=I.Xpm({type:w,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Ct,decls:1,vars:0,template:function(D,q){1&D&&(I.F$t(),I.Hsn(0))},encapsulation:2,changeDetection:0}),w=ae([nn({inputs:["color","mode"]})],w),w})(),Xi=class{get(P,D){const q=le();return q?q.get(P,D):null}getBoolean(P,D){const q=le();return!!q&&q.getBoolean(P,D)}getNumber(P,D){const q=le();return q?q.getNumber(P,D):0}set(P,D){console.warn("[DEPRECATION][Config]: The Config.set() method is deprecated and will be removed in Ionic Framework 6.0. Please see https://ionicframework.com/docs/angular/config for alternatives.");const q=le();q&&q.set(P,D)}};Xi.\u0275fac=function(P){return new(P||Xi)},Xi.\u0275prov=I.Yz7({token:Xi,factory:function(w){return Xi.\u0275fac(w)},providedIn:"root"}),Xi.ngInjectableDef=(0,I.Yz7)({factory:function(){return new Xi},token:Xi,providedIn:"root"});const G=new I.OlP("USERCONFIG"),le=()=>{if("undefined"!=typeof window){const w=window.Ionic;if(w&&w.config)return w.config}return null};class be{constructor(P={}){this.data=P}get(P){return this.data[P]}}let Ue=(()=>{let w=class{constructor(D,q){this.zone=D,this.appRef=q}create(D,q,he){return new wt(D,q,he,this.appRef,this.zone)}};return w.\u0275fac=function(D){return new(D||w)(I.LFG(I.R0b),I.LFG(I.z2F))},w.\u0275prov=I.Yz7({token:w,factory:function(P){return w.\u0275fac(P)}}),w})();class wt{constructor(P,D,q,he,it){this.resolver=P,this.injector=D,this.location=q,this.appRef=he,this.zone=it,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(P,D,q,he){return this.zone.run(()=>new Promise(it=>{it(Xt(this.zone,this.resolver,this.injector,this.location,this.appRef,this.elRefMap,this.elEventsMap,P,D,q,he))}))}removeViewFromDom(P,D){return this.zone.run(()=>new Promise(q=>{const he=this.elRefMap.get(D);if(he){he.destroy(),this.elRefMap.delete(D);const it=this.elEventsMap.get(D);it&&(it(),this.elEventsMap.delete(D))}q()}))}}const Xt=(w,P,D,q,he,it,Ht,un,hr,xn,Rr)=>{const Ti=P.resolveComponentFactory(hr),kt=I.zs3.create({providers:ue(xn),parent:D}),Jn=q?q.createComponent(Ti,q.length,kt):Ti.create(kt),es=Jn.instance,lo=Jn.location.nativeElement;if(xn&&Object.assign(es,xn),Rr)for(const Fn of Rr)lo.classList.add(Fn);const Mn=$(w,es,lo);return un.appendChild(lo),q||he.attachView(Jn.hostView),Jn.changeDetectorRef.reattach(),it.set(lo,Jn),Ht.set(lo,Mn),lo},W=[vt.L,vt.a,vt.b,vt.c,vt.d],$=(w,P,D)=>w.run(()=>{const q=W.filter(he=>"function"==typeof P[he]).map(he=>{const it=Ht=>P[he](Ht.detail);return D.addEventListener(he,it),()=>D.removeEventListener(he,it)});return()=>q.forEach(he=>he())}),k=new I.OlP("NavParamsToken"),ue=w=>[{provide:k,useValue:w},{provide:be,useFactory:an,deps:[k]}],an=w=>new be(w),Ci=(w,P)=>((w=w.filter(D=>D.stackId!==P.stackId)).push(P),w),ko=(w,P)=>{const D=w.createUrlTree(["."],{relativeTo:P});return w.serializeUrl(D)},Ja=(w,P)=>{if(!w)return;const D=na(P);for(let q=0;q<D.length;q++){if(q>=w.length)return D[q];if(D[q]!==w[q])return}},na=w=>w.split("/").map(P=>P.trim()).filter(P=>""!==P),Ra=w=>{w&&(w.ref.destroy(),w.unlistenEvents())};class Eo{constructor(P,D,q,he,it,Ht){this.containerEl=D,this.router=q,this.navCtrl=he,this.zone=it,this.location=Ht,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==P?na(P):void 0}createView(P,D){const q=ko(this.router,D),he=P&&P.location&&P.location.nativeElement,it=$(this.zone,P.instance,he);return{id:this.nextId++,stackId:Ja(this.tabsPrefix,q),unlistenEvents:it,element:he,ref:P,url:q}}getExistingView(P){const D=ko(this.router,P),q=this.views.find(he=>he.url===D);return q&&q.ref.changeDetectorRef.reattach(),q}setActive(P){const D=this.navCtrl.consumeTransition();let{direction:q,animation:he,animationBuilder:it}=D;const Ht=this.activeView,un=((w,P)=>!P||w.stackId!==P.stackId)(P,Ht);un&&(q="back",he=void 0);const hr=this.views.slice();let xn;const Rr=this.router;Rr.getCurrentNavigation?xn=Rr.getCurrentNavigation():Rr.navigations&&Rr.navigations.value&&(xn=Rr.navigations.value),xn&&xn.extras&&xn.extras.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const Ti=this.views.includes(P),kt=this.insertView(P,q);Ti||P.ref.changeDetectorRef.detectChanges();const Jn=P.animationBuilder;return void 0===it&&"back"===q&&!un&&void 0!==Jn&&(it=Jn),Ht&&(Ht.animationBuilder=it),this.zone.runOutsideAngular(()=>this.wait(()=>(Ht&&Ht.ref.changeDetectorRef.detach(),P.ref.changeDetectorRef.reattach(),this.transition(P,Ht,he,this.canGoBack(1),!1,it).then(()=>Yt(P,kt,hr,this.location)).then(()=>({enteringView:P,direction:q,animation:he,tabSwitch:un})))))}canGoBack(P,D=this.getActiveStackId()){return this.getStack(D).length>P}pop(P,D=this.getActiveStackId()){return this.zone.run(()=>{const q=this.getStack(D);if(q.length<=P)return Promise.resolve(!1);const he=q[q.length-P-1];let it=he.url;const Ht=he.savedData;if(Ht){const hr=Ht.get("primary");hr&&hr.route&&hr.route._routerState&&hr.route._routerState.snapshot&&hr.route._routerState.snapshot.url&&(it=hr.route._routerState.snapshot.url)}const{animationBuilder:un}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(it,Object.assign({},he.savedExtras,{animation:un})).then(()=>!0)})}startBackTransition(){const P=this.activeView;if(P){const D=this.getStack(P.stackId),q=D[D.length-2],he=q.animationBuilder;return this.wait(()=>this.transition(q,P,"back",this.canGoBack(2),!0,he))}return Promise.resolve()}endBackTransition(P){P?(this.skipTransition=!0,this.pop(1)):this.activeView&&Fo(this.activeView,this.views,this.views,this.location)}getLastUrl(P){const D=this.getStack(P);return D.length>0?D[D.length-1]:void 0}getRootUrl(P){const D=this.getStack(P);return D.length>0?D[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(Ra),this.activeView=void 0,this.views=[]}getStack(P){return this.views.filter(D=>D.stackId===P)}insertView(P,D){return this.activeView=P,this.views=((w,P,D)=>"root"===D?Ci(w,P):"forward"===D?((w,P)=>(w.indexOf(P)>=0?w=w.filter(q=>q.stackId!==P.stackId||q.id<=P.id):w.push(P),w))(w,P):((w,P)=>w.indexOf(P)>=0?w.filter(q=>q.stackId!==P.stackId||q.id<=P.id):Ci(w,P))(w,P))(this.views,P,D),this.views.slice()}transition(P,D,q,he,it,Ht){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(D===P)return Promise.resolve(!1);const un=P?P.element:void 0,hr=D?D.element:void 0,xn=this.containerEl;return un&&un!==hr&&(un.classList.add("ion-page"),un.classList.add("ion-page-invisible"),un.parentElement!==xn&&xn.appendChild(un),xn.commit)?xn.commit(un,hr,{deepWait:!0,duration:void 0===q?0:void 0,direction:q,showGoBack:he,progressAnimation:it,animationBuilder:Ht}):Promise.resolve(!1)}wait(P){return re(this,void 0,void 0,function*(){void 0!==this.runningTask&&(yield this.runningTask,this.runningTask=void 0);const D=this.runningTask=P();return D.finally(()=>this.runningTask=void 0),D})}}const Yt=(w,P,D,q)=>"function"==typeof requestAnimationFrame?new Promise(he=>{requestAnimationFrame(()=>{Fo(w,P,D,q),he()})}):Promise.resolve(),Fo=(w,P,D,q)=>{D.filter(he=>!P.includes(he)).forEach(Ra),P.forEach(he=>{const Ht=q.path().split("?")[0].split("#")[0];if(he!==w&&he.url!==Ht){const un=he.element;un.setAttribute("aria-hidden","true"),un.classList.add("ion-page-hidden"),he.ref.changeDetectorRef.detach()}})};let io=(()=>{let w=class{constructor(D,q,he,it,Ht,un,hr,xn,Rr,Ti,kt,Jn,es){this.parentContexts=D,this.location=q,this.resolver=he,this.config=un,this.navCtrl=hr,this.parentOutlet=es,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new zr.X(null),this.stackEvents=new I.vpe,this.activateEvents=new I.vpe,this.deactivateEvents=new I.vpe,this.nativeEl=Rr.nativeElement,this.name=it||st.eC,this.tabsPrefix="true"===Ht?ko(Ti,Jn):void 0,this.stackCtrl=new Eo(this.tabsPrefix,this.nativeEl,Ti,hr,kt,xn),D.onChildOutletCreated(this.name,this)}set animation(D){this.nativeEl.animation=D}set animated(D){this.nativeEl.animated=D}set swipeGesture(D){this._swipeGesture=D,this.nativeEl.swipeHandler=D?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:q=>this.stackCtrl.endBackTransition(q)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){if(!this.activated){const D=this.getContext();D&&D.route&&this.activateWith(D.route,D.resolver||null)}new Promise(D=>(0,bt.c)(this.nativeEl,D)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(D,q){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const q=this.getContext();this.activatedView.savedData=new Map(q.children.contexts);const he=this.activatedView.savedData.get("primary");if(he&&q.route&&(he.route=Object.assign({},q.route)),this.activatedView.savedExtras={},q.route){const it=q.route.snapshot;this.activatedView.savedExtras.queryParams=it.queryParams,this.activatedView.savedExtras.fragment=it.fragment}}const D=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(D)}}activateWith(D,q){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=D;let he,it=this.stackCtrl.getExistingView(D);if(it){he=this.activated=it.ref;const Ht=it.savedData;Ht&&(this.getContext().children.contexts=Ht),this.updateActivatedRouteProxy(he.instance,D)}else{const hr=(q=q||this.resolver).resolveComponentFactory(D._futureSnapshot.routeConfig.component),xn=this.parentContexts.getOrCreateContext(this.name).children,Rr=new zr.X(null),Ti=this.createActivatedRouteProxy(Rr,D),kt=new Ss(Ti,xn,this.location.injector);he=this.activated=this.location.createComponent(hr,this.location.length,kt),Rr.next(he.instance),it=this.stackCtrl.createView(this.activated,D),this.proxyMap.set(he.instance,Ti),this.currentActivatedRoute$.next({component:he.instance,activatedRoute:D})}this.activatedView=it,this.stackCtrl.setActive(it).then(Ht=>{this.navCtrl.setTopOutlet(this),this.activateEvents.emit(he.instance),this.stackEvents.emit(Ht)})}canGoBack(D=1,q){return this.stackCtrl.canGoBack(D,q)}pop(D=1,q){return this.stackCtrl.pop(D,q)}getLastUrl(D){const q=this.stackCtrl.getLastUrl(D);return q?q.url:void 0}getLastRouteView(D){return this.stackCtrl.getLastUrl(D)}getRootView(D){return this.stackCtrl.getRootUrl(D)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(D,q){const he=new st.gz;return he._futureSnapshot=q._futureSnapshot,he._routerState=q._routerState,he.snapshot=q.snapshot,he.outlet=q.outlet,he.component=q.component,he._paramMap=this.proxyObservable(D,"paramMap"),he._queryParamMap=this.proxyObservable(D,"queryParamMap"),he.url=this.proxyObservable(D,"url"),he.params=this.proxyObservable(D,"params"),he.queryParams=this.proxyObservable(D,"queryParams"),he.fragment=this.proxyObservable(D,"fragment"),he.data=this.proxyObservable(D,"data"),he}proxyObservable(D,q){return D.pipe((0,kr.h)(he=>!!he),(0,ai.w)(he=>this.currentActivatedRoute$.pipe((0,kr.h)(it=>null!==it&&it.component===he),(0,ai.w)(it=>it&&it.activatedRoute[q]),(0,Fr.x)())))}updateActivatedRouteProxy(D,q){const he=this.proxyMap.get(D);if(!he)throw new Error("Could not find activated route proxy for view");he._futureSnapshot=q._futureSnapshot,he._routerState=q._routerState,he.snapshot=q.snapshot,he.outlet=q.outlet,he.component=q.component,this.currentActivatedRoute$.next({component:D,activatedRoute:q})}};return w.\u0275fac=function(D){return new(D||w)(I.Y36(st.y6),I.Y36(I.s_b),I.Y36(I._Vd),I.$8M("name"),I.$8M("tabs"),I.Y36(Xi),I.Y36(ln),I.Y36(pt.Ye),I.Y36(I.SBq),I.Y36(st.F0),I.Y36(I.R0b),I.Y36(st.gz),I.Y36(w,12))},w.\u0275dir=I.lG2({type:w,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",swipeGesture:"swipeGesture"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),ae([(0,I.r_U)()],w.prototype,"stackEvents",void 0),ae([(0,I.r_U)("activate")],w.prototype,"activateEvents",void 0),ae([(0,I.r_U)("deactivate")],w.prototype,"deactivateEvents",void 0),w=ae([Q(3,(0,I.ahi)("name")),Q(4,(0,I.FiY)()),Q(4,(0,I.ahi)("tabs")),Q(12,(0,I.tp0)()),Q(12,(0,I.FiY)())],w),w})();class Ss{constructor(P,D,q){this.route=P,this.childContexts=D,this.parent=q}get(P,D){return P===st.gz?this.route:P===st.y6?this.childContexts:this.parent.get(P,D)}}class As{constructor(P){this.ctrl=P}create(P){return this.ctrl.create(P||{})}dismiss(P,D,q){return this.ctrl.dismiss(P,D,q)}getTop(){return this.ctrl.getTop()}}let $i=class extends As{constructor(){super(Ke.b)}};$i.\u0275fac=function(P){return new(P||$i)},$i.\u0275prov=I.Yz7({token:$i,factory:function(w){return $i.\u0275fac(w)},providedIn:"root"}),$i.ngInjectableDef=(0,I.Yz7)({factory:function(){return new $i},token:$i,providedIn:"root"});let fo=class extends As{constructor(){super(Ke.a)}};fo.\u0275fac=function(P){return new(P||fo)},fo.\u0275prov=I.Yz7({token:fo,factory:function(w){return fo.\u0275fac(w)},providedIn:"root"}),fo.ngInjectableDef=(0,I.Yz7)({factory:function(){return new fo},token:fo,providedIn:"root"});let gs=class extends As{constructor(){super(Ke.l)}};gs.\u0275fac=function(P){return new(P||gs)},gs.\u0275prov=I.Yz7({token:gs,factory:function(w){return gs.\u0275fac(w)},providedIn:"root"}),gs.ngInjectableDef=(0,I.Yz7)({factory:function(){return new gs},token:gs,providedIn:"root"});let bo=class{open(P){return ht.m.open(P)}close(P){return ht.m.close(P)}toggle(P){return ht.m.toggle(P)}enable(P,D){return ht.m.enable(P,D)}swipeGesture(P,D){return ht.m.swipeGesture(P,D)}isOpen(P){return ht.m.isOpen(P)}isEnabled(P){return ht.m.isEnabled(P)}get(P){return ht.m.get(P)}getOpen(){return ht.m.getOpen()}getMenus(){return ht.m.getMenus()}};bo.\u0275fac=function(P){return new(P||bo)},bo.\u0275prov=I.Yz7({token:bo,factory:function(w){return bo.\u0275fac(w)},providedIn:"root"}),bo.ngInjectableDef=(0,I.Yz7)({factory:function(){return new bo},token:bo,providedIn:"root"});let zs=class extends As{constructor(){super(Ke.p)}};zs.\u0275fac=function(P){return new(P||zs)},zs.\u0275prov=I.Yz7({token:zs,factory:function(w){return zs.\u0275fac(w)},providedIn:"root"}),zs.ngInjectableDef=(0,I.Yz7)({factory:function(){return new zs},token:zs,providedIn:"root"});let Lo=(()=>{let w=class extends As{constructor(D,q,he){super(Ke.m),this.angularDelegate=D,this.resolver=q,this.injector=he}create(D){return super.create(Object.assign({},D,{delegate:this.angularDelegate.create(this.resolver,this.injector)}))}};return w.\u0275fac=function(D){return new(D||w)(I.LFG(Ue),I.LFG(I._Vd),I.LFG(I.zs3))},w.\u0275prov=I.Yz7({token:w,factory:function(P){return w.\u0275fac(P)}}),w})(),ia=(()=>{let w=class extends As{constructor(D,q,he){super(Ke.c),this.angularDelegate=D,this.resolver=q,this.injector=he}create(D){return super.create(Object.assign({},D,{delegate:this.angularDelegate.create(this.resolver,this.injector)}))}};return w.\u0275fac=function(D){return new(D||w)(I.LFG(Ue),I.LFG(I._Vd),I.LFG(I.zs3))},w.\u0275prov=I.Yz7({token:w,factory:function(P){return w.\u0275fac(P)}}),w})(),Vo=class extends As{constructor(){super(Ke.t)}};Vo.\u0275fac=function(P){return new(P||Vo)},Vo.\u0275prov=I.Yz7({token:Vo,factory:function(w){return Vo.\u0275fac(w)},providedIn:"root"}),Vo.ngInjectableDef=(0,I.Yz7)({factory:function(){return new Vo},token:Vo,providedIn:"root"});let oo=class{read(P){qs().read(P)}write(P){qs().write(P)}};oo.\u0275fac=function(P){return new(P||oo)},oo.\u0275prov=I.Yz7({token:oo,factory:function(w){return oo.\u0275fac(w)},providedIn:"root"}),oo.ngInjectableDef=(0,I.Yz7)({factory:function(){return new oo},token:oo,providedIn:"root"});const qs=()=>{const w="undefined"!=typeof window?window:null;if(null!=w){const P=w.Ionic;return P&&P.queue?P.queue:{read:D=>w.requestAnimationFrame(D),write:D=>w.requestAnimationFrame(D)}}return{read:P=>P(),write:P=>P()}};let Di=class{create(P){return(0,mt.c)(P)}easingTime(P,D,q,he,it){return(0,At.g)(P,D,q,he,it)}};Di.\u0275fac=function(P){return new(P||Di)},Di.\u0275prov=I.Yz7({token:Di,factory:function(w){return Di.\u0275fac(w)},providedIn:"root"}),Di.ngInjectableDef=(0,I.Yz7)({factory:function(){return new Di},token:Di,providedIn:"root"});let ao=class{constructor(P){this.zone=P}create(P,D=!1){return D&&Object.getOwnPropertyNames(P).forEach(q=>{if("function"==typeof P[q]){const he=P[q];P[q]=(...it)=>this.zone.run(()=>he(...it))}}),(0,wn.createGesture)(P)}};ao.\u0275fac=function(P){return new(P||ao)(I.LFG(I.R0b))},ao.\u0275prov=I.Yz7({token:ao,factory:function(w){return ao.\u0275fac(w)},providedIn:"root"}),ao.ngInjectableDef=(0,I.Yz7)({factory:function(){return new ao((0,I.LFG)(I.R0b))},token:ao,providedIn:"root"});class _a{shouldDetach(P){return!1}shouldAttach(P){return!1}store(P,D){}retrieve(P){return null}shouldReuseRoute(P,D){if(P.routeConfig!==D.routeConfig)return!1;const q=P.params,he=D.params,it=Object.keys(q),Ht=Object.keys(he);if(it.length!==Ht.length)return!1;for(const un of it)if(he[un]!==q[un])return!1;return!0}}const Vs=(w,P,D)=>()=>{if(P.defaultView&&"undefined"!=typeof window){(w=>{const P=window,D=P.Ionic;D&&D.config&&"Object"!==D.config.constructor.name||(P.Ionic=P.Ionic||{},P.Ionic.config=Object.assign(Object.assign({},P.Ionic.config),w))})(Object.assign({},w,{_zoneGate:it=>D.run(it)}));const he="__zone_symbol__addEventListener"in P.body?"__zone_symbol__addEventListener":"addEventListener";return function(){var w=[];if("undefined"!=typeof window){var P=window;(!P.customElements||P.Element&&(!P.Element.prototype.closest||!P.Element.prototype.matches||!P.Element.prototype.remove||!P.Element.prototype.getRootNode))&&w.push(B.e(6748).then(B.t.bind(B,5141,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||P.NodeList&&!P.NodeList.prototype.forEach||!P.fetch||!function(){try{var q=new URL("b","http://a");return q.pathname="c%20d","http://a/c%20d"===q.href&&q.searchParams}catch(he){return!1}}()||"undefined"==typeof WeakMap)&&w.push(B.e(2214).then(B.t.bind(B,7656,23)))}return Promise.all(w)}().then(()=>((w,P)=>"undefined"==typeof window?Promise.resolve():(Rt.C&&Rt.C.supports&&Rt.C.supports("color","var(--c)")?(0,Rt.a)():B.e(1843).then(B.t.bind(B,5902,23)).then(()=>(Rt.p.$cssShim$=Rt.w.__cssshim)?Rt.p.$cssShim$.i():0)).then(()=>(mi(),(0,Rt.b)(JSON.parse('[["ion-select_3",[[2,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"options":[16]},[[0,"ionChange","onSelect"]]],[33,"ion-select",{"disabled":[4],"cancelText":[1,"cancel-text"],"okText":[1,"ok-text"],"placeholder":[1],"name":[1],"selectedText":[1,"selected-text"],"multiple":[4],"interface":[1],"interfaceOptions":[8,"interface-options"],"compareWith":[1,"compare-with"],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}]]],["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"activated":[32]}]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-modal",[[34,"ion-modal",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"swipeToClose":[4,"swipe-to-close"],"presentingElement":[16],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-popover",[[34,"ion-popover",{"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-app_8",[[0,"ion-app"],[34,"ion-buttons",{"collapse":[4]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"]]],[36,"ion-footer",{"translucent":[4]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-slide_2",[[0,"ion-slide"],[36,"ion-slides",{"options":[8],"pager":[4],"scrollbar":[4],"update":[64],"updateAutoHeight":[64],"slideTo":[64],"slideNext":[64],"slidePrev":[64],"getActiveIndex":[64],"getPreviousIndex":[64],"length":[64],"isEnd":[64],"isBeginning":[64],"startAutoplay":[64],"stopAutoplay":[64],"lockSwipeToNext":[64],"lockSwipeToPrev":[64],"lockSwipes":[64],"getSwiper":[64]}]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[1]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-input",[[34,"ion-input",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"inputmode":[1],"max":[1],"maxlength":[2],"min":[1],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"snaps":[4],"step":[2],"ticks":[4],"disabled":[4],"value":[1026],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-textarea",[[34,"ion-textarea",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[4,"auto-grow"],"value":[1025],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"activated":[32]}]]],["ion-virtual-scroll",[[0,"ion-virtual-scroll",{"approxItemHeight":[2,"approx-item-height"],"approxHeaderHeight":[2,"approx-header-height"],"approxFooterHeight":[2,"approx-footer-height"],"headerFn":[16],"footerFn":[16],"items":[16],"itemHeight":[16],"headerHeight":[16],"footerHeight":[16],"renderItem":[16],"renderHeader":[16],"renderFooter":[16],"nodeRender":[16],"domRender":[16],"totalHeight":[32],"positionForItem":[64],"checkRange":[64],"checkEnd":[64]},[[9,"resize","onResize"]]]]],["ion-datetime_3",[[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[33,"ion-datetime",{"name":[1],"disabled":[4],"readonly":[4],"min":[1025],"max":[1025],"displayFormat":[1,"display-format"],"displayTimezone":[1,"display-timezone"],"pickerFormat":[1,"picker-format"],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"monthNames":[1,"month-names"],"monthShortNames":[1,"month-short-names"],"dayNames":[1,"day-names"],"dayShortNames":[1,"day-short-names"],"pickerOptions":[16],"placeholder":[1],"value":[1025],"isExpanded":[32],"open":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ariaLabel":[1537,"aria-label"],"ariaHidden":[513,"aria-hidden"],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[33,"ion-note",{"color":[513]}],[1,"ion-skeleton-text",{"animated":[4]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"href":[1],"rel":[1],"lines":[1],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"multipleInputs":[32],"focusable":[32]},[[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}]]]]'),P))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:Vn,jmp:it=>D.runOutsideAngular(it),ael(it,Ht,un,hr){it[he](Ht,un,hr)},rel(it,Ht,un,hr){it.removeEventListener(Ht,un,hr)}}))}};var tl;let Bo=tl=class{static forRoot(P){return{ngModule:tl,providers:[{provide:G,useValue:P},{provide:I.ip1,useFactory:Vs,multi:!0,deps:[G,pt.K0,I.R0b]}]}}};Bo.\u0275fac=function(P){return new(P||Bo)},Bo.\u0275mod=I.oAB({type:Bo}),Bo.\u0275inj=I.cJS({providers:[Ue,Lo,ia],imports:[[pt.ez]]})},7235:(tn,Ze,B)=>{"use strict";B.d(Ze,{c:()=>Xe});var E=B(1567);let O;const oe=Ee=>Ee.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ae=Ee=>{if(void 0===O){const Ae=void 0!==Ee.style.webkitAnimationName;O=void 0===Ee.style.animationName&&Ae?"-webkit-":""}return O},Q=(Ee,je,Ae)=>{const $e=je.startsWith("animation")?ae(Ee):"";Ee.style.setProperty($e+je,Ae)},ve=(Ee,je)=>{const Ae=je.startsWith("animation")?ae(Ee):"";Ee.style.removeProperty(Ae+je)},ie=[],De=(Ee=[],je)=>{if(void 0!==je){const Ae=Array.isArray(je)?je:[je];return[...Ee,...Ae]}return Ee},Xe=Ee=>{let je,Ae,$e,Fe,Me,Je,pt,bt,vt,ht,Ke,Lt,Gt,ct=[],jt=[],I=[],rt=!1,st={},mt=[],lt=[],Dt={},At=0,wn=!1,pn=!1,dt=!0,Rt=!1,Zt=!0;const Bn=Ee,ir=[],Nn=[],Dn=[],qn=[],Gr=[],Tr=[],Ft=[],Wn=[],cr=[],gn=[],sr="function"==typeof AnimationEffect||"function"==typeof window.AnimationEffect,lr="function"==typeof Element&&"function"==typeof Element.prototype.animate&&sr,mi=(H,ce)=>((ce&&ce.oneTimeCallback?Nn:ir).push({c:H,o:ce}),Gt),dn=()=>{if(lr)gn.forEach(H=>{H.cancel()}),gn.length=0;else{const H=Dn.slice();(0,E.r)(()=>{H.forEach(ce=>{ve(ce,"animation-name"),ve(ce,"animation-duration"),ve(ce,"animation-timing-function"),ve(ce,"animation-iteration-count"),ve(ce,"animation-delay"),ve(ce,"animation-play-state"),ve(ce,"animation-fill-mode"),ve(ce,"animation-direction")})})}},Ct=()=>{Gr.forEach(H=>{H&&H.parentNode&&H.parentNode.removeChild(H)}),Gr.length=0},mn=()=>void 0!==Me?Me:pt?pt.getFill():"both",cn=()=>void 0!==vt?vt:void 0!==Je?Je:pt?pt.getDirection():"normal",rn=()=>wn?"linear":void 0!==$e?$e:pt?pt.getEasing():"linear",qt=()=>pn?0:void 0!==ht?ht:void 0!==Ae?Ae:pt?pt.getDuration():0,Be=()=>void 0!==Fe?Fe:pt?pt.getIterations():1,Ve=()=>void 0!==Ke?Ke:void 0!==je?je:pt?pt.getDelay():0,Vt=()=>{0!==At&&(At--,0===At&&((()=>{Yr(),Wn.forEach(Ge=>Ge()),cr.forEach(Ge=>Ge());const H=dt?1:0,ce=mt,Ie=lt,We=Dt;Dn.forEach(Ge=>{const _t=Ge.classList;ce.forEach(yt=>_t.add(yt)),Ie.forEach(yt=>_t.remove(yt));for(const yt in We)We.hasOwnProperty(yt)&&Q(Ge,yt,We[yt])}),ir.forEach(Ge=>Ge.c(H,Gt)),Nn.forEach(Ge=>Ge.c(H,Gt)),Nn.length=0,Zt=!0,dt&&(Rt=!0),dt=!0})(),pt&&pt.animationFinish()))},Sn=(H=!0)=>{(()=>{Tr.forEach(We=>We()),Ft.forEach(We=>We());const H=jt,ce=I,Ie=st;Dn.forEach(We=>{const Ge=We.classList;H.forEach(_t=>Ge.add(_t)),ce.forEach(_t=>Ge.remove(_t));for(const _t in Ie)Ie.hasOwnProperty(_t)&&Q(We,_t,Ie[_t])})})(),ct.length>0&&(lr?(Dn.forEach(H=>{const ce=H.animate(ct,{id:Bn,delay:Ve(),duration:qt(),easing:rn(),iterations:Be(),fill:mn(),direction:cn()});ce.pause(),gn.push(ce)}),gn.length>0&&(gn[0].onfinish=()=>{Vt()})):((H=!0)=>{Ct();const ce=(Ee=>(Ee.forEach(je=>{for(const Ae in je)if(je.hasOwnProperty(Ae)){const $e=je[Ae];if("easing"===Ae)je["animation-timing-function"]=$e,delete je[Ae];else{const Fe=oe(Ae);Fe!==Ae&&(je[Fe]=$e,delete je[Ae])}}}),Ee))(ct);Dn.forEach(Ie=>{if(ce.length>0){const We=((Ee=[])=>Ee.map(je=>{const Ae=je.offset,$e=[];for(const Fe in je)je.hasOwnProperty(Fe)&&"offset"!==Fe&&$e.push(`${Fe}: ${je[Fe]};`);return`${100*Ae}% { ${$e.join(" ")} }`}).join(" "))(ce);Lt=void 0!==Ee?Ee:(Ee=>{let je=ie.indexOf(Ee);return je<0&&(je=ie.push(Ee)-1),`ion-animation-${je}`})(We);const Ge=((Ee,je,Ae)=>{const $e=(Ee=>{const je=Ee.getRootNode();return je.head||je})(Ae),Fe=ae(Ae),Me=$e.querySelector("#"+Ee);if(Me)return Me;const Je=(Ae.ownerDocument||document).createElement("style");return Je.id=Ee,Je.textContent=`@${Fe}keyframes ${Ee} { ${je} } @${Fe}keyframes ${Ee}-alt { ${je} }`,$e.appendChild(Je),Je})(Lt,We,Ie);Gr.push(Ge),Q(Ie,"animation-duration",`${qt()}ms`),Q(Ie,"animation-timing-function",rn()),Q(Ie,"animation-delay",`${Ve()}ms`),Q(Ie,"animation-fill-mode",mn()),Q(Ie,"animation-direction",cn());const _t=Be()===1/0?"infinite":Be().toString();Q(Ie,"animation-iteration-count",_t),Q(Ie,"animation-play-state","paused"),H&&Q(Ie,"animation-name",`${Ge.id}-alt`),(0,E.r)(()=>{Q(Ie,"animation-name",Ge.id||null)})}})})(H)),rt=!0},nn=H=>{if(H=Math.min(Math.max(H,0),.9999),lr)gn.forEach(ce=>{ce.currentTime=ce.effect.getComputedTiming().delay+qt()*H,ce.pause()});else{const ce=`-${qt()*H}ms`;Dn.forEach(Ie=>{ct.length>0&&(Q(Ie,"animation-delay",ce),Q(Ie,"animation-play-state","paused"))})}},Or=H=>{gn.forEach(ce=>{ce.effect.updateTiming({delay:Ve(),duration:qt(),easing:rn(),iterations:Be(),fill:mn(),direction:cn()})}),void 0!==H&&nn(H)},yr=(H=!0,ce)=>{(0,E.r)(()=>{Dn.forEach(Ie=>{Q(Ie,"animation-name",Lt||null),Q(Ie,"animation-duration",`${qt()}ms`),Q(Ie,"animation-timing-function",rn()),Q(Ie,"animation-delay",void 0!==ce?`-${ce*qt()}ms`:`${Ve()}ms`),Q(Ie,"animation-fill-mode",mn()||null),Q(Ie,"animation-direction",cn()||null);const We=Be()===1/0?"infinite":Be().toString();Q(Ie,"animation-iteration-count",We),H&&Q(Ie,"animation-name",`${Lt}-alt`),(0,E.r)(()=>{Q(Ie,"animation-name",Lt||null)})})})},Nr=(H=!1,ce=!0,Ie)=>(H&&qn.forEach(We=>{We.update(H,ce,Ie)}),lr?Or(Ie):yr(ce,Ie),Gt),Hn=()=>{rt&&(lr?gn.forEach(H=>{H.pause()}):Dn.forEach(H=>{Q(H,"animation-play-state","paused")}))},Ei=()=>{bt=void 0,Vt()},Yr=()=>{bt&&clearTimeout(bt)},yi=H=>new Promise(ce=>{H&&H.sync&&(pn=!0,mi(()=>pn=!1,{oneTimeCallback:!0})),rt||Sn(),Rt&&(lr?(nn(0),Or()):yr(),Rt=!1),Zt&&(At=qn.length+1,Zt=!1),mi(()=>ce(),{oneTimeCallback:!0}),qn.forEach(Ie=>{Ie.play()}),lr?(gn.forEach(H=>{H.play()}),(0===ct.length||0===Dn.length)&&Vt()):(()=>{if(Yr(),(0,E.r)(()=>{Dn.forEach(H=>{ct.length>0&&Q(H,"animation-play-state","running")})}),0===ct.length||0===Dn.length)Vt();else{const H=Ve()||0,ce=qt()||0,Ie=Be()||1;isFinite(Ie)&&(bt=setTimeout(Ei,H+ce*Ie+100)),((Ee,je)=>{let Ae;const $e={passive:!0},Me=Je=>{Ee===Je.target&&(Ae&&Ae(),Yr(),(0,E.r)(()=>{Dn.forEach(H=>{ve(H,"animation-duration"),ve(H,"animation-delay"),ve(H,"animation-play-state")}),(0,E.r)(Vt)}))};Ee&&(Ee.addEventListener("webkitAnimationEnd",Me,$e),Ee.addEventListener("animationend",Me,$e),Ae=()=>{Ee.removeEventListener("webkitAnimationEnd",Me,$e),Ee.removeEventListener("animationend",Me,$e)})})(Dn[0])}})()}),Ns=(H,ce)=>{const Ie=ct[0];return void 0===Ie||void 0!==Ie.offset&&0!==Ie.offset?ct=[{offset:0,[H]:ce},...ct]:Ie[H]=ce,Gt};return Gt={parentAnimation:pt,elements:Dn,childAnimations:qn,id:Bn,animationFinish:Vt,from:Ns,to:(H,ce)=>{const Ie=ct[ct.length-1];return void 0===Ie||void 0!==Ie.offset&&1!==Ie.offset?ct=[...ct,{offset:1,[H]:ce}]:Ie[H]=ce,Gt},fromTo:(H,ce,Ie)=>Ns(H,ce).to(H,Ie),parent:H=>(pt=H,Gt),play:yi,pause:()=>(qn.forEach(H=>{H.pause()}),Hn(),Gt),stop:()=>{qn.forEach(H=>{H.stop()}),rt&&(dn(),rt=!1),wn=!1,pn=!1,Zt=!0,vt=void 0,ht=void 0,Ke=void 0,At=0,Rt=!1,dt=!0},destroy:H=>(qn.forEach(ce=>{ce.destroy(H)}),(H=>{dn(),H&&Ct()})(H),Dn.length=0,qn.length=0,ct.length=0,ir.length=0,Nn.length=0,rt=!1,Zt=!0,Gt),keyframes:H=>(ct=H,Gt),addAnimation:H=>{if(null!=H)if(Array.isArray(H))for(const ce of H)ce.parent(Gt),qn.push(ce);else H.parent(Gt),qn.push(H);return Gt},addElement:H=>{if(null!=H)if(1===H.nodeType)Dn.push(H);else if(H.length>=0)for(let ce=0;ce<H.length;ce++)Dn.push(H[ce]);else console.error("Invalid addElement value");return Gt},update:Nr,fill:H=>(Me=H,Nr(!0),Gt),direction:H=>(Je=H,Nr(!0),Gt),iterations:H=>(Fe=H,Nr(!0),Gt),duration:H=>(!lr&&0===H&&(H=1),Ae=H,Nr(!0),Gt),easing:H=>($e=H,Nr(!0),Gt),delay:H=>(je=H,Nr(!0),Gt),getWebAnimations:()=>gn,getKeyframes:()=>ct,getFill:mn,getDirection:cn,getDelay:Ve,getIterations:Be,getEasing:rn,getDuration:qt,afterAddRead:H=>(Wn.push(H),Gt),afterAddWrite:H=>(cr.push(H),Gt),afterClearStyles:(H=[])=>{for(const ce of H)Dt[ce]="";return Gt},afterStyles:(H={})=>(Dt=H,Gt),afterRemoveClass:H=>(lt=De(lt,H),Gt),afterAddClass:H=>(mt=De(mt,H),Gt),beforeAddRead:H=>(Tr.push(H),Gt),beforeAddWrite:H=>(Ft.push(H),Gt),beforeClearStyles:(H=[])=>{for(const ce of H)st[ce]="";return Gt},beforeStyles:(H={})=>(st=H,Gt),beforeRemoveClass:H=>(I=De(I,H),Gt),beforeAddClass:H=>(jt=De(jt,H),Gt),onFinish:mi,progressStart:(H=!1,ce)=>(qn.forEach(Ie=>{Ie.progressStart(H,ce)}),Hn(),wn=H,rt?Nr(!1,!0,ce):Sn(),Gt),progressStep:H=>(qn.forEach(ce=>{ce.progressStep(H)}),nn(H),Gt),progressEnd:(H,ce,Ie)=>(wn=!1,qn.forEach(We=>{We.progressEnd(H,ce,Ie)}),void 0!==Ie&&(ht=Ie),Rt=!1,dt=!0,0===H?(vt="reverse"===cn()?"normal":"reverse","reverse"===vt&&(dt=!1),lr?(Nr(),nn(1-ce)):(Ke=(1-ce)*qt()*-1,Nr(!1,!1))):1===H&&(lr?(Nr(),nn(ce)):(Ke=ce*qt()*-1,Nr(!1,!1))),void 0!==H&&(mi(()=>{ht=void 0,vt=void 0,Ke=void 0},{oneTimeCallback:!0}),pt||yi()),Gt)}}},7807:(tn,Ze,B)=>{"use strict";B.d(Ze,{g:()=>E});const E=(Q,ve,re,Te,ie)=>ne(Q[1],ve[1],re[1],Te[1],ie).map(me=>O(Q[0],ve[0],re[0],Te[0],me)),O=(Q,ve,re,Te,ie)=>ie*(3*ve*Math.pow(ie-1,2)+ie*(-3*re*ie+3*re+Te*ie))-Q*Math.pow(ie-1,3),ne=(Q,ve,re,Te,ie)=>ae((Te-=ie)-3*(re-=ie)+3*(ve-=ie)-(Q-=ie),3*re-6*ve+3*Q,3*ve-3*Q,Q).filter(Ce=>Ce>=0&&Ce<=1),ae=(Q,ve,re,Te)=>{if(0===Q)return((Q,ve,re)=>{const Te=ve*ve-4*Q*re;return Te<0?[]:[(-ve+Math.sqrt(Te))/(2*Q),(-ve-Math.sqrt(Te))/(2*Q)]})(ve,re,Te);const ie=(3*(re/=Q)-(ve/=Q)*ve)/3,me=(2*ve*ve*ve-9*ve*re+27*(Te/=Q))/27;if(0===ie)return[Math.pow(-me,1/3)];if(0===me)return[Math.sqrt(-ie),-Math.sqrt(-ie)];const Ce=Math.pow(me/2,2)+Math.pow(ie/3,3);if(0===Ce)return[Math.pow(me/2,.5)-ve/3];if(Ce>0)return[Math.pow(-me/2+Math.sqrt(Ce),1/3)-Math.pow(me/2+Math.sqrt(Ce),1/3)-ve/3];const _e=Math.sqrt(Math.pow(-ie/3,3)),De=Math.acos(-me/(2*Math.sqrt(Math.pow(-ie/3,3)))),Xe=2*Math.pow(_e,1/3);return[Xe*Math.cos(De/3)-ve/3,Xe*Math.cos((De+2*Math.PI)/3)-ve/3,Xe*Math.cos((De+4*Math.PI)/3)-ve/3]}},960:(tn,Ze,B)=>{"use strict";B.d(Ze,{G:()=>ae});class O{constructor(ve,re,Te,ie,me){this.id=re,this.name=Te,this.disableScroll=me,this.priority=1e6*ie+re,this.ctrl=ve}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const ve=this.ctrl.capture(this.name,this.id,this.priority);return ve&&this.disableScroll&&this.ctrl.disableScroll(this.id),ve}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class ne{constructor(ve,re,Te,ie){this.id=re,this.disable=Te,this.disableScroll=ie,this.ctrl=ve}block(){if(this.ctrl){if(this.disable)for(const ve of this.disable)this.ctrl.disableGesture(ve,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const ve of this.disable)this.ctrl.enableGesture(ve,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const oe="backdrop-no-scroll",ae=new class{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(ve){return new O(this,this.newID(),ve.name,ve.priority||0,!!ve.disableScroll)}createBlocker(ve={}){return new ne(this,this.newID(),ve.disable,!!ve.disableScroll)}start(ve,re,Te){return this.canStart(ve)?(this.requestedStart.set(re,Te),!0):(this.requestedStart.delete(re),!1)}capture(ve,re,Te){if(!this.start(ve,re,Te))return!1;const ie=this.requestedStart;let me=-1e4;if(ie.forEach(Ce=>{me=Math.max(me,Ce)}),me===Te){this.capturedId=re,ie.clear();const Ce=new CustomEvent("ionGestureCaptured",{detail:{gestureName:ve}});return document.dispatchEvent(Ce),!0}return ie.delete(re),!1}release(ve){this.requestedStart.delete(ve),this.capturedId===ve&&(this.capturedId=void 0)}disableGesture(ve,re){let Te=this.disabledGestures.get(ve);void 0===Te&&(Te=new Set,this.disabledGestures.set(ve,Te)),Te.add(re)}enableGesture(ve,re){const Te=this.disabledGestures.get(ve);void 0!==Te&&Te.delete(re)}disableScroll(ve){this.disabledScroll.add(ve),1===this.disabledScroll.size&&document.body.classList.add(oe)}enableScroll(ve){this.disabledScroll.delete(ve),0===this.disabledScroll.size&&document.body.classList.remove(oe)}canStart(ve){return!(void 0!==this.capturedId||this.isDisabled(ve))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(ve){const re=this.disabledGestures.get(ve);return!!(re&&re.size>0)}newID(){return this.gestureId++,this.gestureId}}},3087:(tn,Ze,B)=>{"use strict";B.r(Ze),B.d(Ze,{MENU_BACK_BUTTON_PRIORITY:()=>ae,OVERLAY_BACK_BUTTON_PRIORITY:()=>oe,blockHardwareBackButton:()=>O,startHardwareBackButton:()=>ne});var E=B(8239);const O=()=>{document.addEventListener("backbutton",()=>{})},ne=()=>{const Q=document;let ve=!1;Q.addEventListener("backbutton",()=>{if(ve)return;let re=0,Te=[];const ie=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(_e,De){Te.push({priority:_e,handler:De,id:re++})}}});Q.dispatchEvent(ie);const me=function(){var _e=(0,E.Z)(function*(De){try{if(De&&De.handler){const Xe=De.handler(Ce);null!=Xe&&(yield Xe)}}catch(Xe){console.error(Xe)}});return function(Xe){return _e.apply(this,arguments)}}(),Ce=()=>{if(Te.length>0){let _e={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};Te.forEach(De=>{De.priority>=_e.priority&&(_e=De)}),ve=!0,Te=Te.filter(De=>De.id!==_e.id),me(_e).then(()=>ve=!1)}};Ce()})},oe=100,ae=99},1567:(tn,Ze,B)=>{"use strict";B.d(Ze,{a:()=>ae,b:()=>Q,c:()=>E,d:()=>me,e:()=>Ce,f:()=>Ae,g:()=>ve,h:()=>O,i:()=>oe,j:()=>ie,k:()=>_e,l:()=>Te,m:()=>De,n:()=>je,o:()=>$e,p:()=>Ee,q:()=>Xe,r:()=>re});const E=(Fe,Me)=>{Fe.componentOnReady?Fe.componentOnReady().then(Je=>Me(Je)):re(()=>Me(Fe))},O=(Fe,Me=[])=>{const Je={};return Me.forEach(ct=>{Fe.hasAttribute(ct)&&(null!==Fe.getAttribute(ct)&&(Je[ct]=Fe.getAttribute(ct)),Fe.removeAttribute(ct))}),Je},ne=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],oe=Fe=>O(Fe,ne),ae=(Fe,Me,Je,ct)=>{if("undefined"!=typeof window){const jt=window,I=jt&&jt.Ionic&&jt.Ionic.config;if(I){const rt=I.get("_ael");if(rt)return rt(Fe,Me,Je,ct);if(I._ael)return I._ael(Fe,Me,Je,ct)}}return Fe.addEventListener(Me,Je,ct)},Q=(Fe,Me,Je,ct)=>{if("undefined"!=typeof window){const jt=window,I=jt&&jt.Ionic&&jt.Ionic.config;if(I){const rt=I.get("_rel");if(rt)return rt(Fe,Me,Je,ct);if(I._rel)return I._rel(Fe,Me,Je,ct)}}return Fe.removeEventListener(Me,Je,ct)},ve=(Fe,Me=Fe)=>Fe.shadowRoot||Me,re=Fe=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Fe):"function"==typeof requestAnimationFrame?requestAnimationFrame(Fe):setTimeout(Fe),Te=Fe=>!!Fe.shadowRoot&&!!Fe.attachShadow,ie=Fe=>{const Me=Fe.closest("ion-item");return Me?Me.querySelector("ion-label"):null},me=(Fe,Me)=>{let Je;const ct=Fe.getAttribute("aria-labelledby"),jt=Fe.id;let I=null!==ct&&""!==ct.trim()?ct:Me+"-lbl",rt=null!==ct&&""!==ct.trim()?document.getElementById(ct):ie(Fe);return rt?(null===ct&&(rt.id=I),Je=rt.textContent,rt.setAttribute("aria-hidden","true")):""!==jt.trim()&&(rt=document.querySelector(`label[for="${jt}"]`),rt&&(""!==rt.id?I=rt.id:rt.id=I=`${jt}-lbl`,Je=rt.textContent)),{label:rt,labelId:I,labelText:Je}},Ce=(Fe,Me,Je,ct,jt)=>{if(Fe||Te(Me)){let I=Me.querySelector("input.aux-input");I||(I=Me.ownerDocument.createElement("input"),I.type="hidden",I.classList.add("aux-input"),Me.appendChild(I)),I.disabled=jt,I.name=Je,I.value=ct||""}},_e=(Fe,Me,Je)=>Math.max(Fe,Math.min(Me,Je)),De=(Fe,Me)=>{if(!Fe){const Je="ASSERT: "+Me;throw console.error(Je),new Error(Je)}},Xe=Fe=>Fe.timeStamp||Date.now(),Ee=Fe=>{if(Fe){const Me=Fe.changedTouches;if(Me&&Me.length>0){const Je=Me[0];return{x:Je.clientX,y:Je.clientY}}if(void 0!==Fe.pageX)return{x:Fe.pageX,y:Fe.pageY}}return{x:0,y:0}},je=Fe=>{const Me="rtl"===document.dir;switch(Fe){case"start":return Me;case"end":return!Me;default:throw new Error(`"${Fe}" is not a valid value for [side]. Use "start" or "end" instead.`)}},Ae=(Fe,Me)=>{const Je=Fe._original||Fe;return{_original:Fe,emit:$e(Je.emit.bind(Je),Me)}},$e=(Fe,Me=0)=>{let Je;return(...ct)=>{clearTimeout(Je),Je=setTimeout(Fe,Me,...ct)}}},6951:(tn,Ze,B)=>{"use strict";B.d(Ze,{m:()=>me});var E=B(8239),O=B(3087),ne=B(1567),oe=B(7585),ae=B(7235);const Q=Ce=>(0,ae.c)().duration(Ce?400:300),ve=Ce=>{let _e,De;const Xe=Ce.width+8,Ee=(0,ae.c)(),je=(0,ae.c)();Ce.isEndSide?(_e=Xe+"px",De="0px"):(_e=-Xe+"px",De="0px"),Ee.addElement(Ce.menuInnerEl).fromTo("transform",`translateX(${_e})`,`translateX(${De})`);const $e="ios"===(0,oe.b)(Ce),Fe=$e?.2:.25;return je.addElement(Ce.backdropEl).fromTo("opacity",.01,Fe),Q($e).addAnimation([Ee,je])},re=Ce=>{let _e,De;const Xe=(0,oe.b)(Ce),Ee=Ce.width;Ce.isEndSide?(_e=-Ee+"px",De=Ee+"px"):(_e=Ee+"px",De=-Ee+"px");const je=(0,ae.c)().addElement(Ce.menuInnerEl).fromTo("transform",`translateX(${De})`,"translateX(0px)"),Ae=(0,ae.c)().addElement(Ce.contentEl).fromTo("transform","translateX(0px)",`translateX(${_e})`),$e=(0,ae.c)().addElement(Ce.backdropEl).fromTo("opacity",.01,.32);return Q("ios"===Xe).addAnimation([je,Ae,$e])},Te=Ce=>{const _e=(0,oe.b)(Ce),De=Ce.width*(Ce.isEndSide?-1:1)+"px",Xe=(0,ae.c)().addElement(Ce.contentEl).fromTo("transform","translateX(0px)",`translateX(${De})`);return Q("ios"===_e).addAnimation(Xe)},me=(()=>{const Ce=new Map,_e=[],De=function(){var vt=(0,E.Z)(function*(ht){const Ke=yield Me(ht);return!!Ke&&Ke.open()});return function(Ke){return vt.apply(this,arguments)}}(),Xe=function(){var vt=(0,E.Z)(function*(ht){const Ke=yield void 0!==ht?Me(ht):Je();return void 0!==Ke&&Ke.close()});return function(Ke){return vt.apply(this,arguments)}}(),Ee=function(){var vt=(0,E.Z)(function*(ht){const Ke=yield Me(ht);return!!Ke&&Ke.toggle()});return function(Ke){return vt.apply(this,arguments)}}(),je=function(){var vt=(0,E.Z)(function*(ht,Ke){const dt=yield Me(Ke);return dt&&(dt.disabled=!ht),dt});return function(Ke,dt){return vt.apply(this,arguments)}}(),Ae=function(){var vt=(0,E.Z)(function*(ht,Ke){const dt=yield Me(Ke);return dt&&(dt.swipeGesture=ht),dt});return function(Ke,dt){return vt.apply(this,arguments)}}(),$e=function(){var vt=(0,E.Z)(function*(ht){if(null!=ht){const Ke=yield Me(ht);return void 0!==Ke&&Ke.isOpen()}return void 0!==(yield Je())});return function(Ke){return vt.apply(this,arguments)}}(),Fe=function(){var vt=(0,E.Z)(function*(ht){const Ke=yield Me(ht);return!!Ke&&!Ke.disabled});return function(Ke){return vt.apply(this,arguments)}}(),Me=function(){var vt=(0,E.Z)(function*(ht){return yield bt(),"start"===ht||"end"===ht?pn(Rt=>Rt.side===ht&&!Rt.disabled)||pn(Rt=>Rt.side===ht):null!=ht?pn(dt=>dt.menuId===ht):pn(dt=>!dt.disabled)||(_e.length>0?_e[0].el:void 0)});return function(Ke){return vt.apply(this,arguments)}}(),Je=function(){var vt=(0,E.Z)(function*(){return yield bt(),Dt()});return function(){return vt.apply(this,arguments)}}(),ct=function(){var vt=(0,E.Z)(function*(){return yield bt(),At()});return function(){return vt.apply(this,arguments)}}(),jt=function(){var vt=(0,E.Z)(function*(){return yield bt(),wn()});return function(){return vt.apply(this,arguments)}}(),I=(vt,ht)=>{Ce.set(vt,ht)},st=vt=>{const ht=vt.side;_e.filter(Ke=>Ke.side===ht&&Ke!==vt).forEach(Ke=>Ke.disabled=!0)},mt=function(){var vt=(0,E.Z)(function*(ht,Ke,dt){if(wn())return!1;if(Ke){const Rt=yield Je();Rt&&ht.el!==Rt&&(yield Rt.setOpen(!1,!1))}return ht._setOpen(Ke,dt)});return function(Ke,dt,Rt){return vt.apply(this,arguments)}}(),Dt=()=>pn(vt=>vt._isOpen),At=()=>_e.map(vt=>vt.el),wn=()=>_e.some(vt=>vt.isAnimating),pn=vt=>{const ht=_e.find(vt);if(void 0!==ht)return ht.el},bt=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(vt=>new Promise(ht=>(0,ne.c)(vt,ht))));return I("reveal",Te),I("push",re),I("overlay",ve),"undefined"!=typeof document&&document.addEventListener("ionBackButton",vt=>{const ht=Dt();ht&&vt.detail.register(O.MENU_BACK_BUTTON_PRIORITY,()=>ht.close())}),{registerAnimation:I,get:Me,getMenus:ct,getOpen:Je,isEnabled:Fe,swipeGesture:Ae,isAnimating:jt,isOpen:$e,enable:je,toggle:Ee,close:Xe,open:De,_getOpenSync:Dt,_createAnimation:(vt,ht)=>{const Ke=Ce.get(vt);if(!Ke)throw new Error("animation not registered");return Ke(ht)},_register:vt=>{_e.indexOf(vt)<0&&(vt.disabled||st(vt),_e.push(vt))},_unregister:vt=>{const ht=_e.indexOf(vt);ht>-1&&_e.splice(ht,1)},_setOpen:mt,_setActiveMenu:st}})()},9461:(tn,Ze,B)=>{"use strict";B.r(Ze),B.d(Ze,{GESTURE_CONTROLLER:()=>E.G,createGesture:()=>Te});var E=B(960);const O=(_e,De,Xe,Ee)=>{const je=ne(_e)?{capture:!!Ee.capture,passive:!!Ee.passive}:!!Ee.capture;let Ae,$e;return _e.__zone_symbol__addEventListener?(Ae="__zone_symbol__addEventListener",$e="__zone_symbol__removeEventListener"):(Ae="addEventListener",$e="removeEventListener"),_e[Ae](De,Xe,je),()=>{_e[$e](De,Xe,je)}},ne=_e=>{if(void 0===oe)try{const De=Object.defineProperty({},"passive",{get:()=>{oe=!0}});_e.addEventListener("optsTest",()=>{},De)}catch(De){oe=!1}return!!oe};let oe;const ve=_e=>_e instanceof Document?_e:_e.ownerDocument,Te=_e=>{let De=!1,Xe=!1,Ee=!0,je=!1;const Ae=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},_e),$e=Ae.canStart,Fe=Ae.onWillStart,Me=Ae.onStart,Je=Ae.onEnd,ct=Ae.notCaptured,jt=Ae.onMove,I=Ae.threshold,rt=Ae.passive,pt=Ae.blurOnStart,st={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},mt=((_e,De,Xe)=>{const Ee=Xe*(Math.PI/180),je="x"===_e,Ae=Math.cos(Ee),$e=De*De;let Fe=0,Me=0,Je=!1,ct=0;return{start(jt,I){Fe=jt,Me=I,ct=0,Je=!0},detect(jt,I){if(!Je)return!1;const rt=jt-Fe,pt=I-Me,st=rt*rt+pt*pt;if(st<$e)return!1;const mt=Math.sqrt(st),lt=(je?rt:pt)/mt;return ct=lt>Ae?1:lt<-Ae?-1:0,Je=!1,!0},isGesture:()=>0!==ct,getDirection:()=>ct}})(Ae.direction,Ae.threshold,Ae.maxAngle),lt=E.G.createGesture({name:_e.gestureName,priority:_e.gesturePriority,disableScroll:_e.disableScroll}),wn=()=>{!De||(je=!1,jt&&jt(st))},pn=()=>!(lt&&!lt.capture()||(De=!0,Ee=!1,st.startX=st.currentX,st.startY=st.currentY,st.startTime=st.currentTime,Fe?Fe(st).then(vt):vt(),0)),vt=()=>{pt&&(()=>{if("undefined"!=typeof document){const Zt=document.activeElement;null!==Zt&&Zt.blur&&Zt.blur()}})(),Me&&Me(st),Ee=!0},ht=()=>{De=!1,Xe=!1,je=!1,Ee=!0,lt.release()},Ke=Zt=>{const Lt=De,Gt=Ee;if(ht(),Gt){if(ie(st,Zt),Lt)return void(Je&&Je(st));ct&&ct(st)}},dt=((_e,De,Xe,Ee,je)=>{let Ae,$e,Fe,Me,Je,ct,jt,I=0;const rt=bt=>{I=Date.now()+2e3,De(bt)&&(!$e&&Xe&&($e=O(_e,"touchmove",Xe,je)),Fe||(Fe=O(bt.target,"touchend",st,je)),Me||(Me=O(bt.target,"touchcancel",st,je)))},pt=bt=>{I>Date.now()||!De(bt)||(!ct&&Xe&&(ct=O(ve(_e),"mousemove",Xe,je)),jt||(jt=O(ve(_e),"mouseup",mt,je)))},st=bt=>{lt(),Ee&&Ee(bt)},mt=bt=>{Dt(),Ee&&Ee(bt)},lt=()=>{$e&&$e(),Fe&&Fe(),Me&&Me(),$e=Fe=Me=void 0},Dt=()=>{ct&&ct(),jt&&jt(),ct=jt=void 0},At=()=>{lt(),Dt()},wn=(bt=!0)=>{bt?(Ae||(Ae=O(_e,"touchstart",rt,je)),Je||(Je=O(_e,"mousedown",pt,je))):(Ae&&Ae(),Je&&Je(),Ae=Je=void 0,At())};return{enable:wn,stop:At,destroy:()=>{wn(!1),Ee=Xe=De=void 0}}})(Ae.el,Zt=>{const Lt=Ce(Zt);return!(Xe||!Ee||(me(Zt,st),st.startX=st.currentX,st.startY=st.currentY,st.startTime=st.currentTime=Lt,st.velocityX=st.velocityY=st.deltaX=st.deltaY=0,st.event=Zt,$e&&!1===$e(st))||(lt.release(),!lt.start()))&&(Xe=!0,0===I?pn():(mt.start(st.startX,st.startY),!0))},Zt=>{De?!je&&Ee&&(je=!0,ie(st,Zt),requestAnimationFrame(wn)):(ie(st,Zt),mt.detect(st.currentX,st.currentY)&&(!mt.isGesture()||!pn())&&Rt())},Ke,{capture:!1,passive:rt}),Rt=()=>{ht(),dt.stop(),ct&&ct(st)};return{enable(Zt=!0){Zt||(De&&Ke(void 0),ht()),dt.enable(Zt)},destroy(){lt.destroy(),dt.destroy()}}},ie=(_e,De)=>{if(!De)return;const Xe=_e.currentX,Ee=_e.currentY,je=_e.currentTime;me(De,_e);const Ae=_e.currentX,$e=_e.currentY,Me=(_e.currentTime=Ce(De))-je;if(Me>0&&Me<100){const ct=($e-Ee)/Me;_e.velocityX=(Ae-Xe)/Me*.7+.3*_e.velocityX,_e.velocityY=.7*ct+.3*_e.velocityY}_e.deltaX=Ae-_e.startX,_e.deltaY=$e-_e.startY,_e.event=De},me=(_e,De)=>{let Xe=0,Ee=0;if(_e){const je=_e.changedTouches;if(je&&je.length>0){const Ae=je[0];Xe=Ae.clientX,Ee=Ae.clientY}else void 0!==_e.pageX&&(Xe=_e.pageX,Ee=_e.pageY)}De.currentX=Xe,De.currentY=Ee},Ce=_e=>_e.timeStamp||Date.now()},3150:(tn,Ze,B)=>{"use strict";B.d(Ze,{B:()=>nt,C:()=>Ce,H:()=>Gr,a:()=>Ee,b:()=>_n,c:()=>Ns,e:()=>Yn,f:()=>Ir,g:()=>Zt,h:()=>Dn,i:()=>Gn,j:()=>Be,k:()=>Sn,p:()=>De,r:()=>yr,s:()=>Rt,w:()=>me});var E=B(8239);let ne,oe,ae,Q=!1,ve=!1,re=!1,Te=!1,ie=!1;const me="undefined"!=typeof window?window:{},Ce=me.CSS,_e=me.document||{head:{}},De={$flags$:0,$resourcesUrl$:"",jmp:z=>z(),raf:z=>requestAnimationFrame(z),ael:(z,H,ce,Ie)=>z.addEventListener(H,ce,Ie),rel:(z,H,ce,Ie)=>z.removeEventListener(H,ce,Ie),ce:(z,H)=>new CustomEvent(z,H)},Xe=(()=>(_e.head.attachShadow+"").indexOf("[native")>-1)(),Ee=z=>Promise.resolve(z),je=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replace}catch(z){}return!1})(),Ae=(z,H,ce,Ie)=>{ce&&ce.map(([We,Ge,_t])=>{const yt=Fe(z,We),ft=$e(H,_t),Qt=Me(We);De.ael(yt,Ge,ft,Qt),(H.$rmListeners$=H.$rmListeners$||[]).push(()=>De.rel(yt,Ge,ft,Qt))})},$e=(z,H)=>ce=>{try{256&z.$flags$?z.$lazyInstance$[H](ce):(z.$queuedListeners$=z.$queuedListeners$||[]).push([H,ce])}catch(Ie){qr(Ie)}},Fe=(z,H)=>4&H?_e:8&H?me:16&H?_e.body:z,Me=z=>0!=(2&z),rt="s-id",pt="sty-id",lt="http://www.w3.org/1999/xlink",wn=new WeakMap,pn=(z,H,ce)=>{let Ie=Vr.get(z);je&&ce?(Ie=Ie||new CSSStyleSheet,Ie.replace(H)):Ie=H,Vr.set(z,Ie)},bt=(z,H,ce,Ie)=>{let We=ht(H,ce),Ge=Vr.get(We);if(z=11===z.nodeType?z:_e,Ge)if("string"==typeof Ge){let yt,_t=wn.get(z=z.head||z);if(_t||wn.set(z,_t=new Set),!_t.has(We)){if(z.host&&(yt=z.querySelector(`[${pt}="${We}"]`)))yt.innerHTML=Ge;else{if(De.$cssShim$){yt=De.$cssShim$.createHostStyle(Ie,We,Ge,!!(10&H.$flags$));const ft=yt["s-sc"];ft&&(We=ft,_t=null)}else yt=_e.createElement("style"),yt.innerHTML=Ge;z.insertBefore(yt,z.querySelector("link"))}_t&&_t.add(We)}}else z.adoptedStyleSheets.includes(Ge)||(z.adoptedStyleSheets=[...z.adoptedStyleSheets,Ge]);return We},ht=(z,H)=>"sc-"+(H&&32&z.$flags$?z.$tagName$+"-"+H:z.$tagName$),Ke=z=>z.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),Rt=z=>Ei.push(z),Zt=z=>Or(z).$modeName$,Lt={},Nn=z=>"object"==(z=typeof z)||"function"===z,Dn=(z,H,...ce)=>{let Ie=null,We=null,Ge=null,_t=!1,yt=!1,ft=[];const Qt=Pn=>{for(let jn=0;jn<Pn.length;jn++)Ie=Pn[jn],Array.isArray(Ie)?Qt(Ie):null!=Ie&&"boolean"!=typeof Ie&&((_t="function"!=typeof z&&!Nn(Ie))&&(Ie=String(Ie)),_t&&yt?ft[ft.length-1].$text$+=Ie:ft.push(_t?qn(null,Ie):Ie),yt=_t)};if(Qt(ce),H){H.key&&(We=H.key),H.name&&(Ge=H.name);{const Pn=H.className||H.class;Pn&&(H.class="object"!=typeof Pn?Pn:Object.keys(Pn).filter(jn=>Pn[jn]).join(" "))}}if("function"==typeof z)return z(null===H?{}:H,ft,Ft);const An=qn(z,null);return An.$attrs$=H,ft.length>0&&(An.$children$=ft),An.$key$=We,An.$name$=Ge,An},qn=(z,H)=>({$flags$:0,$tag$:z,$text$:H,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),Gr={},Ft={forEach:(z,H)=>z.map(Wn).forEach(H),map:(z,H)=>z.map(Wn).map(H).map(cr)},Wn=z=>({vattrs:z.$attrs$,vchildren:z.$children$,vkey:z.$key$,vname:z.$name$,vtag:z.$tag$,vtext:z.$text$}),cr=z=>{if("function"==typeof z.vtag){const ce=Object.assign({},z.vattrs);return z.vkey&&(ce.key=z.vkey),z.vname&&(ce.name=z.vname),Dn(z.vtag,ce,...z.vchildren||[])}const H=qn(z.vtag,z.vtext);return H.$attrs$=z.vattrs,H.$children$=z.vchildren,H.$key$=z.vkey,H.$name$=z.vname,H},gn=(z,H,ce,Ie,We,Ge)=>{if(ce!==Ie){let _t=gr(z,H),yt=H.toLowerCase();if("class"===H){const ft=z.classList,Qt=lr(ce),An=lr(Ie);ft.remove(...Qt.filter(Pn=>Pn&&!An.includes(Pn))),ft.add(...An.filter(Pn=>Pn&&!Qt.includes(Pn)))}else if("style"===H){for(const ft in ce)(!Ie||null==Ie[ft])&&(ft.includes("-")?z.style.removeProperty(ft):z.style[ft]="");for(const ft in Ie)(!ce||Ie[ft]!==ce[ft])&&(ft.includes("-")?z.style.setProperty(ft,Ie[ft]):z.style[ft]=Ie[ft])}else if("key"!==H)if("ref"===H)Ie&&Ie(z);else if(_t||"o"!==H[0]||"n"!==H[1]){const ft=Nn(Ie);if((_t||ft&&null!==Ie)&&!We)try{if(z.tagName.includes("-"))z[H]=Ie;else{let An=null==Ie?"":Ie;"list"===H?_t=!1:(null==ce||z[H]!=An)&&(z[H]=An)}}catch(An){}let Qt=!1;yt!==(yt=yt.replace(/^xlink\:?/,""))&&(H=yt,Qt=!0),null==Ie||!1===Ie?(!1!==Ie||""===z.getAttribute(H))&&(Qt?z.removeAttributeNS(lt,H):z.removeAttribute(H)):(!_t||4&Ge||We)&&!ft&&(Ie=!0===Ie?"":Ie,Qt?z.setAttributeNS(lt,H,Ie):z.setAttribute(H,Ie))}else H="-"===H[2]?H.slice(3):gr(me,yt)?yt.slice(2):yt[2]+H.slice(3),ce&&De.rel(z,H,ce,!1),Ie&&De.ael(z,H,Ie,!1)}},sr=/\s/,lr=z=>z?z.split(sr):[],zr=(z,H,ce,Ie)=>{const We=11===H.$elm$.nodeType&&H.$elm$.host?H.$elm$.host:H.$elm$,Ge=z&&z.$attrs$||Lt,_t=H.$attrs$||Lt;for(Ie in Ge)Ie in _t||gn(We,Ie,Ge[Ie],void 0,ce,H.$flags$);for(Ie in _t)gn(We,Ie,Ge[Ie],_t[Ie],ce,H.$flags$)},kr=(z,H,ce,Ie)=>{let _t,yt,ft,We=H.$children$[ce],Ge=0;if(Q||(re=!0,"slot"===We.$tag$&&(ne&&Ie.classList.add(ne+"-s"),We.$flags$|=We.$children$?2:1)),null!==We.$text$)_t=We.$elm$=_e.createTextNode(We.$text$);else if(1&We.$flags$)_t=We.$elm$=_e.createTextNode("");else{if(Te||(Te="svg"===We.$tag$),_t=We.$elm$=_e.createElementNS(Te?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&We.$flags$?"slot-fb":We.$tag$),Te&&"foreignObject"===We.$tag$&&(Te=!1),zr(null,We,Te),(z=>null!=z)(ne)&&_t["s-si"]!==ne&&_t.classList.add(_t["s-si"]=ne),We.$children$)for(Ge=0;Ge<We.$children$.length;++Ge)yt=kr(z,We,Ge,_t),yt&&_t.appendChild(yt);"svg"===We.$tag$?Te=!1:"foreignObject"===_t.tagName&&(Te=!0)}return _t["s-hn"]=ae,3&We.$flags$&&(_t["s-sr"]=!0,_t["s-cr"]=oe,_t["s-sn"]=We.$name$||"",ft=z&&z.$children$&&z.$children$[ce],ft&&ft.$tag$===We.$tag$&&z.$elm$&&ai(z.$elm$,!1)),_t},ai=(z,H)=>{De.$flags$|=1;const ce=z.childNodes;for(let Ie=ce.length-1;Ie>=0;Ie--){const We=ce[Ie];We["s-hn"]!==ae&&We["s-ol"]&&(Ct(We).insertBefore(We,dn(We)),We["s-ol"].remove(),We["s-ol"]=void 0,re=!0),H&&ai(We,H)}De.$flags$&=-2},Fr=(z,H,ce,Ie,We,Ge)=>{let yt,_t=z["s-cr"]&&z["s-cr"].parentNode||z;for(_t.shadowRoot&&_t.tagName===ae&&(_t=_t.shadowRoot);We<=Ge;++We)Ie[We]&&(yt=kr(null,ce,We,z),yt&&(Ie[We].$elm$=yt,_t.insertBefore(yt,dn(H))))},Dr=(z,H,ce,Ie,We)=>{for(;H<=ce;++H)(Ie=z[H])&&(We=Ie.$elm$,br(Ie),ve=!0,We["s-ol"]?We["s-ol"].remove():ai(We,!0),We.remove())},dr=(z,H)=>z.$tag$===H.$tag$&&("slot"===z.$tag$?z.$name$===H.$name$:z.$key$===H.$key$),dn=z=>z&&z["s-ol"]||z,Ct=z=>(z["s-ol"]?z["s-ol"]:z).parentNode,ci=(z,H)=>{const ce=H.$elm$=z.$elm$,Ie=z.$children$,We=H.$children$,Ge=H.$tag$,_t=H.$text$;let yt;null===_t?(Te="svg"===Ge||"foreignObject"!==Ge&&Te,"slot"===Ge||zr(z,H,Te),null!==Ie&&null!==We?((z,H,ce,Ie)=>{let qi,hi,We=0,Ge=0,_t=0,yt=0,ft=H.length-1,Qt=H[0],An=H[ft],Pn=Ie.length-1,jn=Ie[0],Cr=Ie[Pn];for(;We<=ft&&Ge<=Pn;)if(null==Qt)Qt=H[++We];else if(null==An)An=H[--ft];else if(null==jn)jn=Ie[++Ge];else if(null==Cr)Cr=Ie[--Pn];else if(dr(Qt,jn))ci(Qt,jn),Qt=H[++We],jn=Ie[++Ge];else if(dr(An,Cr))ci(An,Cr),An=H[--ft],Cr=Ie[--Pn];else if(dr(Qt,Cr))("slot"===Qt.$tag$||"slot"===Cr.$tag$)&&ai(Qt.$elm$.parentNode,!1),ci(Qt,Cr),z.insertBefore(Qt.$elm$,An.$elm$.nextSibling),Qt=H[++We],Cr=Ie[--Pn];else if(dr(An,jn))("slot"===Qt.$tag$||"slot"===Cr.$tag$)&&ai(An.$elm$.parentNode,!1),ci(An,jn),z.insertBefore(An.$elm$,Qt.$elm$),An=H[--ft],jn=Ie[++Ge];else{for(_t=-1,yt=We;yt<=ft;++yt)if(H[yt]&&null!==H[yt].$key$&&H[yt].$key$===jn.$key$){_t=yt;break}_t>=0?(hi=H[_t],hi.$tag$!==jn.$tag$?qi=kr(H&&H[Ge],ce,_t,z):(ci(hi,jn),H[_t]=void 0,qi=hi.$elm$),jn=Ie[++Ge]):(qi=kr(H&&H[Ge],ce,Ge,z),jn=Ie[++Ge]),qi&&Ct(Qt.$elm$).insertBefore(qi,dn(Qt.$elm$))}We>ft?Fr(z,null==Ie[Pn+1]?null:Ie[Pn+1].$elm$,ce,Ie,Ge,Pn):Ge>Pn&&Dr(H,We,ft)})(ce,Ie,H,We):null!==We?(null!==z.$text$&&(ce.textContent=""),Fr(ce,null,H,We,0,We.length-1)):null!==Ie&&Dr(Ie,0,Ie.length-1),Te&&"svg"===Ge&&(Te=!1)):(yt=ce["s-cr"])?yt.parentNode.textContent=_t:z.$text$!==_t&&(ce.data=_t)},di=z=>{let ce,Ie,We,Ge,_t,yt,H=z.childNodes;for(Ie=0,We=H.length;Ie<We;Ie++)if(ce=H[Ie],1===ce.nodeType){if(ce["s-sr"])for(_t=ce["s-sn"],ce.hidden=!1,Ge=0;Ge<We;Ge++)if(yt=H[Ge].nodeType,H[Ge]["s-hn"]!==ce["s-hn"]||""!==_t){if(1===yt&&_t===H[Ge].getAttribute("slot")){ce.hidden=!0;break}}else if(1===yt||3===yt&&""!==H[Ge].textContent.trim()){ce.hidden=!0;break}di(ce)}},hn=[],Vn=z=>{let H,ce,Ie,We,Ge,_t,yt=0,ft=z.childNodes,Qt=ft.length;for(;yt<Qt;yt++){if(H=ft[yt],H["s-sr"]&&(ce=H["s-cr"])&&ce.parentNode)for(Ie=ce.parentNode.childNodes,We=H["s-sn"],_t=Ie.length-1;_t>=0;_t--)ce=Ie[_t],!ce["s-cn"]&&!ce["s-nr"]&&ce["s-hn"]!==H["s-hn"]&&(Sr(ce,We)?(Ge=hn.find(An=>An.$nodeToRelocate$===ce),ve=!0,ce["s-sn"]=ce["s-sn"]||We,Ge?Ge.$slotRefNode$=H:hn.push({$slotRefNode$:H,$nodeToRelocate$:ce}),ce["s-sr"]&&hn.map(An=>{Sr(An.$nodeToRelocate$,ce["s-sn"])&&(Ge=hn.find(Pn=>Pn.$nodeToRelocate$===ce),Ge&&!An.$slotRefNode$&&(An.$slotRefNode$=Ge.$slotRefNode$))})):hn.some(An=>An.$nodeToRelocate$===ce)||hn.push({$nodeToRelocate$:ce}));1===H.nodeType&&Vn(H)}},Sr=(z,H)=>1===z.nodeType?null===z.getAttribute("slot")&&""===H||z.getAttribute("slot")===H:z["s-sn"]===H||""===H,br=z=>{z.$attrs$&&z.$attrs$.ref&&z.$attrs$.ref(null),z.$children$&&z.$children$.map(br)},Gn=z=>Or(z).$hostElement$,Yn=(z,H,ce)=>{const Ie=Gn(z);return{emit:We=>ii(Ie,H,{bubbles:!!(4&ce),composed:!!(2&ce),cancelable:!!(1&ce),detail:We})}},ii=(z,H,ce)=>{const Ie=De.ce(H,ce);return z.dispatchEvent(Ie),Ie},on=(z,H)=>{H&&!z.$onRenderResolve$&&H["s-p"]&&H["s-p"].push(new Promise(ce=>z.$onRenderResolve$=ce))},Ot=(z,H)=>{if(z.$flags$|=16,!(4&z.$flags$))return on(z,z.$ancestorComponent$),Ns(()=>mn(z,H));z.$flags$|=512},mn=(z,H)=>{const Ie=z.$lazyInstance$;let We;return H&&(z.$flags$|=256,z.$queuedListeners$&&(z.$queuedListeners$.map(([Ge,_t])=>Qe(Ie,Ge,_t)),z.$queuedListeners$=null),We=Qe(Ie,"componentWillLoad")),We=ke(We,()=>Qe(Ie,"componentWillRender")),ke(We,()=>cn(z,Ie,H))},cn=function(){var z=(0,E.Z)(function*(H,ce,Ie){const We=H.$hostElement$,_t=We["s-rc"];Ie&&(z=>{const H=z.$cmpMeta$,ce=z.$hostElement$,Ie=H.$flags$,Ge=bt(Xe&&ce.shadowRoot?ce.shadowRoot:ce.getRootNode(),H,z.$modeName$,ce);10&Ie&&(ce["s-sc"]=Ge,ce.classList.add(Ge+"-h"),2&Ie&&ce.classList.add(Ge+"-s"))})(H);rn(H,ce),De.$cssShim$&&De.$cssShim$.updateHost(We),_t&&(_t.map(ft=>ft()),We["s-rc"]=void 0);{const ft=We["s-p"],Qt=()=>qt(H);0===ft.length?Qt():(Promise.all(ft).then(Qt),H.$flags$|=4,ft.length=0)}});return function(ce,Ie,We){return z.apply(this,arguments)}}(),rn=(z,H,ce)=>{try{H=H.render&&H.render(),z.$flags$&=-17,z.$flags$|=2,((z,H)=>{const ce=z.$hostElement$,Ie=z.$cmpMeta$,We=z.$vnode$||qn(null,null),Ge=(z=>z&&z.$tag$===Gr)(H)?H:Dn(null,null,H);if(ae=ce.tagName,Ie.$attrsToReflect$&&(Ge.$attrs$=Ge.$attrs$||{},Ie.$attrsToReflect$.map(([_t,yt])=>Ge.$attrs$[yt]=ce[_t])),Ge.$tag$=null,Ge.$flags$|=4,z.$vnode$=Ge,Ge.$elm$=We.$elm$=ce.shadowRoot||ce,ne=ce["s-sc"],oe=ce["s-cr"],Q=Xe&&0!=(1&Ie.$flags$),ve=!1,ci(We,Ge),De.$flags$|=1,re){Vn(Ge.$elm$);let _t,yt,ft,Qt,An,Pn,jn=0;for(;jn<hn.length;jn++)_t=hn[jn],yt=_t.$nodeToRelocate$,yt["s-ol"]||(ft=_e.createTextNode(""),ft["s-nr"]=yt,yt.parentNode.insertBefore(yt["s-ol"]=ft,yt));for(jn=0;jn<hn.length;jn++)if(_t=hn[jn],yt=_t.$nodeToRelocate$,_t.$slotRefNode$){for(Qt=_t.$slotRefNode$.parentNode,An=_t.$slotRefNode$.nextSibling,ft=yt["s-ol"];ft=ft.previousSibling;)if(Pn=ft["s-nr"],Pn&&Pn["s-sn"]===yt["s-sn"]&&Qt===Pn.parentNode&&(Pn=Pn.nextSibling,!Pn||!Pn["s-nr"])){An=Pn;break}(!An&&Qt!==yt.parentNode||yt.nextSibling!==An)&&yt!==An&&(!yt["s-hn"]&&yt["s-ol"]&&(yt["s-hn"]=yt["s-ol"].parentNode.nodeName),Qt.insertBefore(yt,An))}else 1===yt.nodeType&&(yt.hidden=!0)}ve&&di(Ge.$elm$),De.$flags$&=-2,hn.length=0})(z,H)}catch(Ie){qr(Ie,z.$hostElement$)}return null},qt=z=>{const ce=z.$hostElement$,We=z.$lazyInstance$,Ge=z.$ancestorComponent$;64&z.$flags$?Qe(We,"componentDidUpdate"):(z.$flags$|=64,ye(ce),Qe(We,"componentDidLoad"),z.$onReadyResolve$(ce),Ge||Ve()),z.$onInstanceResolve$(ce),z.$onRenderResolve$&&(z.$onRenderResolve$(),z.$onRenderResolve$=void 0),512&z.$flags$&&yi(()=>Ot(z,!1)),z.$flags$&=-517},Be=z=>{{const H=Or(z),ce=H.$hostElement$.isConnected;return ce&&2==(18&H.$flags$)&&Ot(H,!1),ce}},Ve=z=>{ye(_e.documentElement),yi(()=>ii(me,"appload",{detail:{namespace:"ionic"}}))},Qe=(z,H,ce)=>{if(z&&z[H])try{return z[H](ce)}catch(Ie){qr(Ie)}},ke=(z,H)=>z&&z.then?z.then(H):H(),ye=z=>z.classList.add("hydrated"),ut=(z,H,ce,Ie,We,Ge,_t)=>{let yt,ft,Qt,An;if(1===Ge.nodeType){for(yt=Ge.getAttribute("c-id"),yt&&(ft=yt.split("."),(ft[0]===_t||"0"===ft[0])&&(Qt={$flags$:0,$hostId$:ft[0],$nodeId$:ft[1],$depth$:ft[2],$index$:ft[3],$tag$:Ge.tagName.toLowerCase(),$elm$:Ge,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},H.push(Qt),Ge.removeAttribute("c-id"),z.$children$||(z.$children$=[]),z.$children$[Qt.$index$]=Qt,z=Qt,Ie&&"0"===Qt.$depth$&&(Ie[Qt.$index$]=Qt.$elm$))),An=Ge.childNodes.length-1;An>=0;An--)ut(z,H,ce,Ie,We,Ge.childNodes[An],_t);if(Ge.shadowRoot)for(An=Ge.shadowRoot.childNodes.length-1;An>=0;An--)ut(z,H,ce,Ie,We,Ge.shadowRoot.childNodes[An],_t)}else if(8===Ge.nodeType)ft=Ge.nodeValue.split("."),(ft[1]===_t||"0"===ft[1])&&(yt=ft[0],Qt={$flags$:0,$hostId$:ft[1],$nodeId$:ft[2],$depth$:ft[3],$index$:ft[4],$elm$:Ge,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===yt?(Qt.$elm$=Ge.nextSibling,Qt.$elm$&&3===Qt.$elm$.nodeType&&(Qt.$text$=Qt.$elm$.textContent,H.push(Qt),Ge.remove(),z.$children$||(z.$children$=[]),z.$children$[Qt.$index$]=Qt,Ie&&"0"===Qt.$depth$&&(Ie[Qt.$index$]=Qt.$elm$))):Qt.$hostId$===_t&&("s"===yt?(Qt.$tag$="slot",Ge["s-sn"]=ft[5]?Qt.$name$=ft[5]:"",Ge["s-sr"]=!0,Ie&&(Qt.$elm$=_e.createElement(Qt.$tag$),Qt.$name$&&Qt.$elm$.setAttribute("name",Qt.$name$),Ge.parentNode.insertBefore(Qt.$elm$,Ge),Ge.remove(),"0"===Qt.$depth$&&(Ie[Qt.$index$]=Qt.$elm$)),ce.push(Qt),z.$children$||(z.$children$=[]),z.$children$[Qt.$index$]=Qt):"r"===yt&&(Ie?Ge.remove():(We["s-cr"]=Ge,Ge["s-cn"]=!0))));else if(z&&"style"===z.$tag$){const Pn=qn(null,Ge.textContent);Pn.$elm$=Ge,Pn.$index$="0",z.$children$=[Pn]}},Ut=(z,H)=>{if(1===z.nodeType){let ce=0;for(;ce<z.childNodes.length;ce++)Ut(z.childNodes[ce],H);if(z.shadowRoot)for(ce=0;ce<z.shadowRoot.childNodes.length;ce++)Ut(z.shadowRoot.childNodes[ce],H)}else if(8===z.nodeType){const ce=z.nodeValue.split(".");"o"===ce[0]&&(H.set(ce[1]+"."+ce[2],z),z.nodeValue="",z["s-en"]=ce[3])}},ln=(z,H,ce)=>{if(H.$members$){z.watchers&&(H.$watchers$=z.watchers);const Ie=Object.entries(H.$members$),We=z.prototype;if(Ie.map(([Ge,[_t]])=>{31&_t||2&ce&&32&_t?Object.defineProperty(We,Ge,{get(){return((z,H)=>Or(this).$instanceValues$.get(H))(0,Ge)},set(yt){((z,H,ce,Ie)=>{const We=Or(z),Ge=We.$hostElement$,_t=We.$instanceValues$.get(H),yt=We.$flags$,ft=We.$lazyInstance$;if(ce=((z,H)=>null==z||Nn(z)?z:4&H?"false"!==z&&(""===z||!!z):2&H?parseFloat(z):1&H?String(z):z)(ce,Ie.$members$[H][0]),(!(8&yt)||void 0===_t)&&ce!==_t&&(We.$instanceValues$.set(H,ce),ft)){if(Ie.$watchers$&&128&yt){const Qt=Ie.$watchers$[H];Qt&&Qt.map(An=>{try{ft[An](ce,_t,H)}catch(Pn){qr(Pn,Ge)}})}2==(18&yt)&&Ot(We,!1)}})(this,Ge,yt,H)},configurable:!0,enumerable:!0}):1&ce&&64&_t&&Object.defineProperty(We,Ge,{value(...yt){const ft=Or(this);return ft.$onInstancePromise$.then(()=>ft.$lazyInstance$[Ge](...yt))}})}),1&ce){const Ge=new Map;We.attributeChangedCallback=function(_t,yt,ft){De.jmp(()=>{const Qt=Ge.get(_t);this[Qt]=(null!==ft||"boolean"!=typeof this[Qt])&&ft})},z.observedAttributes=Ie.filter(([_t,yt])=>15&yt[0]).map(([_t,yt])=>{const ft=yt[1]||_t;return Ge.set(ft,_t),512&yt[0]&&H.$attrsToReflect$.push([_t,ft]),ft})}}return z},yn=function(){var z=(0,E.Z)(function*(H,ce,Ie,We,Ge){if(0==(32&ce.$flags$)){{if(ce.$flags$|=32,(Ge=Hn(Ie)).then){const Qt=()=>{};Ge=yield Ge,Qt()}Ge.isProxied||(Ie.$watchers$=Ge.watchers,ln(Ge,Ie,2),Ge.isProxied=!0);const ft=()=>{};ce.$flags$|=8;try{new Ge(ce)}catch(Qt){qr(Qt)}ce.$flags$&=-9,ce.$flags$|=128,ft(),pr(ce.$lazyInstance$)}if(Ge.style){let ft=Ge.style;"string"!=typeof ft&&(ft=ft[ce.$modeName$=(z=>Ei.map(H=>H(z)).find(H=>!!H))(H)]);const Qt=ht(Ie,ce.$modeName$);if(!Vr.has(Qt)){const An=()=>{};8&Ie.$flags$&&(ft=yield B.e(8810).then(B.bind(B,8810)).then(Pn=>Pn.scopeCss(ft,Qt,!1))),pn(Qt,ft,!!(1&Ie.$flags$)),An()}}}const _t=ce.$ancestorComponent$,yt=()=>Ot(ce,!0);_t&&_t["s-rc"]?_t["s-rc"].push(yt):yt()});return function(ce,Ie,We,Ge,_t){return z.apply(this,arguments)}}(),pr=z=>{Qe(z,"connectedCallback")},Vt=z=>{const H=z["s-cr"]=_e.createComment("");H["s-cn"]=!0,z.insertBefore(H,z.firstChild)},_n=(z,H={})=>{const Ie=[],We=H.exclude||[],Ge=me.customElements,_t=_e.head,yt=_t.querySelector("meta[charset]"),ft=_e.createElement("style"),Qt=[],An=_e.querySelectorAll(`[${pt}]`);let Pn,jn=!0,Cr=0;for(Object.assign(De,H),De.$resourcesUrl$=new URL(H.resourcesUrl||"./",_e.baseURI).href,De.$flags$|=2;Cr<An.length;Cr++)pn(An[Cr].getAttribute(pt),Ke(An[Cr].innerHTML),!0);z.map(qi=>qi[1].map(hi=>{const Ni={$flags$:hi[0],$tagName$:hi[1],$members$:hi[2],$listeners$:hi[3]};Ni.$members$=hi[2],Ni.$listeners$=hi[3],Ni.$attrsToReflect$=[],Ni.$watchers$={},!Xe&&1&Ni.$flags$&&(Ni.$flags$|=8);const xr=Ni.$tagName$,Cs=class extends HTMLElement{constructor(ss){super(ss),Nr(ss=this,Ni),1&Ni.$flags$&&(Xe?ss.attachShadow({mode:"open",delegatesFocus:!!(16&Ni.$flags$)}):"shadowRoot"in ss||(ss.shadowRoot=ss))}connectedCallback(){Pn&&(clearTimeout(Pn),Pn=null),jn?Qt.push(this):De.jmp(()=>(z=>{if(0==(1&De.$flags$)){const H=Or(z),ce=H.$cmpMeta$,Ie=()=>{};if(1&H.$flags$)Ae(z,H,ce.$listeners$),pr(H.$lazyInstance$);else{let We;if(H.$flags$|=1,We=z.getAttribute(rt),We){if(Xe&&1&ce.$flags$){const Ge=bt(z.shadowRoot,ce,z.getAttribute("s-mode"));z.classList.remove(Ge+"-h",Ge+"-s")}((z,H,ce,Ie)=>{const Ge=z.shadowRoot,_t=[],ft=Ge?[]:null,Qt=Ie.$vnode$=qn(H,null);De.$orgLocNodes$||Ut(_e.body,De.$orgLocNodes$=new Map),z[rt]=ce,z.removeAttribute(rt),ut(Qt,_t,[],ft,z,z,ce),_t.map(An=>{const Pn=An.$hostId$+"."+An.$nodeId$,jn=De.$orgLocNodes$.get(Pn),Cr=An.$elm$;jn&&Xe&&""===jn["s-en"]&&jn.parentNode.insertBefore(Cr,jn.nextSibling),Ge||(Cr["s-hn"]=H,jn&&(Cr["s-ol"]=jn,Cr["s-ol"]["s-nr"]=Cr)),De.$orgLocNodes$.delete(Pn)}),Ge&&ft.map(An=>{An&&Ge.appendChild(An)})})(z,ce.$tagName$,We,H)}We||12&ce.$flags$&&Vt(z);{let Ge=z;for(;Ge=Ge.parentNode||Ge.host;)if(1===Ge.nodeType&&Ge.hasAttribute("s-id")&&Ge["s-p"]||Ge["s-p"]){on(H,H.$ancestorComponent$=Ge);break}}ce.$members$&&Object.entries(ce.$members$).map(([Ge,[_t]])=>{if(31&_t&&z.hasOwnProperty(Ge)){const yt=z[Ge];delete z[Ge],z[Ge]=yt}}),yi(()=>yn(z,H,ce))}Ie()}})(this))}disconnectedCallback(){De.jmp(()=>(z=>{if(0==(1&De.$flags$)){const H=Or(z),ce=H.$lazyInstance$;H.$rmListeners$&&(H.$rmListeners$.map(Ie=>Ie()),H.$rmListeners$=void 0),De.$cssShim$&&De.$cssShim$.removeHost(z),Qe(ce,"disconnectedCallback")}})(this))}componentOnReady(){return Or(this).$onReadyPromise$}};Ni.$lazyBundleId$=qi[0],!We.includes(xr)&&!Ge.get(xr)&&(Ie.push(xr),Ge.define(xr,ln(Cs,Ni,1)))})),ft.innerHTML=Ie+"{visibility:hidden}.hydrated{visibility:inherit}",ft.setAttribute("data-styles",""),_t.insertBefore(ft,yt?yt.nextSibling:_t.firstChild),jn=!1,Qt.length?Qt.map(qi=>qi.connectedCallback()):De.jmp(()=>Pn=setTimeout(Ve,30))},Sn=z=>{const H=new URL(z,De.$resourcesUrl$);return H.origin!==me.location.origin?H.href:H.pathname},nn=new WeakMap,Or=z=>nn.get(z),yr=(z,H)=>nn.set(H.$lazyInstance$=z,H),Nr=(z,H)=>{const ce={$flags$:0,$hostElement$:z,$cmpMeta$:H,$instanceValues$:new Map};return ce.$onInstancePromise$=new Promise(Ie=>ce.$onInstanceResolve$=Ie),ce.$onReadyPromise$=new Promise(Ie=>ce.$onReadyResolve$=Ie),z["s-p"]=[],z["s-rc"]=[],Ae(z,ce,H.$listeners$),nn.set(z,ce)},gr=(z,H)=>H in z,qr=(z,H)=>(0,console.error)(z,H),rs=new Map,Hn=(z,H,ce)=>{const Ie=z.$tagName$.replace(/-/g,"_"),We=z.$lazyBundleId$,Ge=rs.get(We);return Ge?Ge[Ie]:B(863)(`./${We}.entry.js`).then(_t=>(rs.set(We,_t),_t[Ie]),qr)},Vr=new Map,Ei=[],Yr=[],bs=[],or=(z,H)=>ce=>{z.push(ce),ie||(ie=!0,H&&4&De.$flags$?yi($r):De.raf($r))},is=z=>{for(let H=0;H<z.length;H++)try{z[H](performance.now())}catch(ce){qr(ce)}z.length=0},$r=()=>{is(Yr),is(bs),(ie=Yr.length>0)&&De.raf($r)},yi=z=>Ee().then(z),Ir=or(Yr,!1),Ns=or(bs,!0),nt={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},4425:(tn,Ze,B)=>{"use strict";B.d(Ze,{L:()=>oe,a:()=>ae,b:()=>Q,c:()=>ve,d:()=>re,e:()=>I,g:()=>st,l:()=>ct,s:()=>rt,t:()=>me});var E=B(8239),O=B(3150),ne=B(1567);const oe="ionViewWillEnter",ae="ionViewDidEnter",Q="ionViewWillLeave",ve="ionViewDidLeave",re="ionViewWillUnload",me=mt=>new Promise((lt,Dt)=>{(0,O.c)(()=>{Ce(mt),_e(mt).then(At=>{At.animation&&At.animation.destroy(),De(mt),lt(At)},At=>{De(mt),Dt(At)})})}),Ce=mt=>{const lt=mt.enteringEl,Dt=mt.leavingEl;pt(lt,Dt,mt.direction),mt.showGoBack?lt.classList.add("can-go-back"):lt.classList.remove("can-go-back"),rt(lt,!1),lt.style.setProperty("pointer-events","none"),Dt&&(rt(Dt,!1),Dt.style.setProperty("pointer-events","none"))},_e=function(){var mt=(0,E.Z)(function*(lt){const Dt=yield Xe(lt);return Dt&&O.B.isBrowser?Ee(Dt,lt):je(lt)});return function(Dt){return mt.apply(this,arguments)}}(),De=mt=>{const lt=mt.enteringEl,Dt=mt.leavingEl;lt.classList.remove("ion-page-invisible"),lt.style.removeProperty("pointer-events"),void 0!==Dt&&(Dt.classList.remove("ion-page-invisible"),Dt.style.removeProperty("pointer-events"))},Xe=function(){var mt=(0,E.Z)(function*(lt){return lt.leavingEl&&lt.animated&&0!==lt.duration?lt.animationBuilder?lt.animationBuilder:"ios"===lt.mode?(yield Promise.resolve().then(B.bind(B,7689))).iosTransitionAnimation:(yield Promise.resolve().then(B.bind(B,5392))).mdTransitionAnimation:void 0});return function(Dt){return mt.apply(this,arguments)}}(),Ee=function(){var mt=(0,E.Z)(function*(lt,Dt){yield Ae(Dt,!0);const At=lt(Dt.baseEl,Dt);Me(Dt.enteringEl,Dt.leavingEl);const wn=yield Fe(At,Dt);return Dt.progressCallback&&Dt.progressCallback(void 0),wn&&Je(Dt.enteringEl,Dt.leavingEl),{hasCompleted:wn,animation:At}});return function(Dt,At){return mt.apply(this,arguments)}}(),je=function(){var mt=(0,E.Z)(function*(lt){const Dt=lt.enteringEl,At=lt.leavingEl;return yield Ae(lt,!1),Me(Dt,At),Je(Dt,At),{hasCompleted:!0}});return function(Dt){return mt.apply(this,arguments)}}(),Ae=function(){var mt=(0,E.Z)(function*(lt,Dt){const wn=(void 0!==lt.deepWait?lt.deepWait:Dt)?[I(lt.enteringEl),I(lt.leavingEl)]:[jt(lt.enteringEl),jt(lt.leavingEl)];yield Promise.all(wn),yield $e(lt.viewIsReady,lt.enteringEl)});return function(Dt,At){return mt.apply(this,arguments)}}(),$e=function(){var mt=(0,E.Z)(function*(lt,Dt){lt&&(yield lt(Dt))});return function(Dt,At){return mt.apply(this,arguments)}}(),Fe=(mt,lt)=>{const Dt=lt.progressCallback,At=new Promise(wn=>{mt.onFinish(pn=>wn(1===pn))});return Dt?(mt.progressStart(!0),Dt(mt)):mt.play(),At},Me=(mt,lt)=>{ct(lt,Q),ct(mt,oe)},Je=(mt,lt)=>{ct(mt,ae),ct(lt,ve)},ct=(mt,lt)=>{if(mt){const Dt=new CustomEvent(lt,{bubbles:!1,cancelable:!1});mt.dispatchEvent(Dt)}},jt=mt=>mt?new Promise(lt=>(0,ne.c)(mt,lt)):Promise.resolve(),I=function(){var mt=(0,E.Z)(function*(lt){const Dt=lt;if(Dt){if(null!=Dt.componentOnReady&&null!=(yield Dt.componentOnReady()))return;yield Promise.all(Array.from(Dt.children).map(I))}});return function(Dt){return mt.apply(this,arguments)}}(),rt=(mt,lt)=>{lt?(mt.setAttribute("aria-hidden","true"),mt.classList.add("ion-page-hidden")):(mt.hidden=!1,mt.removeAttribute("aria-hidden"),mt.classList.remove("ion-page-hidden"))},pt=(mt,lt,Dt)=>{void 0!==mt&&(mt.style.zIndex="back"===Dt?"99":"101"),void 0!==lt&&(lt.style.zIndex="100")},st=mt=>mt.classList.contains("ion-page")?mt:mt.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||mt},7585:(tn,Ze,B)=>{"use strict";B.d(Ze,{a:()=>ne,b:()=>wn,c:()=>I,g:()=>O,i:()=>pn});var E=B(3150);const O=bt=>oe(bt),ne=(bt,vt)=>("string"==typeof bt&&(vt=bt,bt=void 0),O(bt).includes(vt)),oe=(bt=window)=>{if(void 0===bt)return[];bt.Ionic=bt.Ionic||{};let vt=bt.Ionic.platforms;return null==vt&&(vt=bt.Ionic.platforms=ae(bt),vt.forEach(ht=>bt.document.documentElement.classList.add(`plt-${ht}`))),vt},ae=bt=>Object.keys(ct).filter(vt=>ct[vt](bt)),ve=bt=>!!(Me(bt,/iPad/i)||Me(bt,/Macintosh/i)&&De(bt)),ie=bt=>Me(bt,/android|sink/i),De=bt=>Je(bt,"(any-pointer:coarse)"),Ee=bt=>je(bt)||Ae(bt),je=bt=>!!(bt.cordova||bt.phonegap||bt.PhoneGap),Ae=bt=>{const vt=bt.Capacitor;return!(!vt||!vt.isNative)},Me=(bt,vt)=>vt.test(bt.navigator.userAgent),Je=(bt,vt)=>bt.matchMedia(vt).matches,ct={ipad:ve,iphone:bt=>Me(bt,/iPhone/i),ios:bt=>Me(bt,/iPhone|iPod/i)||ve(bt),android:ie,phablet:bt=>{const vt=bt.innerWidth,ht=bt.innerHeight,Ke=Math.min(vt,ht),dt=Math.max(vt,ht);return Ke>390&&Ke<520&&dt>620&&dt<800},tablet:bt=>{const vt=bt.innerWidth,ht=bt.innerHeight,Ke=Math.min(vt,ht),dt=Math.max(vt,ht);return ve(bt)||(bt=>ie(bt)&&!Me(bt,/mobile/i))(bt)||Ke>460&&Ke<820&&dt>780&&dt<1400},cordova:je,capacitor:Ae,electron:bt=>Me(bt,/electron/i),pwa:bt=>!(!bt.matchMedia("(display-mode: standalone)").matches&&!bt.navigator.standalone),mobile:De,mobileweb:bt=>De(bt)&&!Ee(bt),desktop:bt=>!De(bt),hybrid:Ee};class jt{constructor(){this.m=new Map}reset(vt){this.m=new Map(Object.entries(vt))}get(vt,ht){const Ke=this.m.get(vt);return void 0!==Ke?Ke:ht}getBoolean(vt,ht=!1){const Ke=this.m.get(vt);return void 0===Ke?ht:"string"==typeof Ke?"true"===Ke:!!Ke}getNumber(vt,ht){const Ke=parseFloat(this.m.get(vt));return isNaN(Ke)?void 0!==ht?ht:NaN:Ke}set(vt,ht){this.m.set(vt,ht)}}const I=new jt,Dt="ionic-persist-config";let At;const wn=bt=>bt&&(0,E.g)(bt)||At,pn=(bt={})=>{if("undefined"==typeof window)return;const vt=window.document,ht=window,Ke=ht.Ionic=ht.Ionic||{};oe(ht);const dt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(bt=>{try{const vt=bt.sessionStorage.getItem(Dt);return null!==vt?JSON.parse(vt):{}}catch(vt){return{}}})(ht)),{persistConfig:!1}),Ke.config),(bt=>{const vt={};return bt.location.search.slice(1).split("&").map(ht=>ht.split("=")).map(([ht,Ke])=>[decodeURIComponent(ht),decodeURIComponent(Ke)]).filter(([ht])=>((bt,vt)=>bt.substr(0,vt.length)===vt)(ht,"ionic:")).map(([ht,Ke])=>[ht.slice("ionic:".length),Ke]).forEach(([ht,Ke])=>{vt[ht]=Ke}),vt})(ht)),bt);I.reset(dt),I.getBoolean("persistConfig")&&((bt,vt)=>{try{bt.sessionStorage.setItem(Dt,JSON.stringify(vt))}catch(ht){return}})(ht,dt),Ke.config=I,Ke.mode=At=I.get("mode",vt.documentElement.getAttribute("mode")||(ne(ht,"ios")?"ios":"md")),I.set("mode",At),vt.documentElement.setAttribute("mode",At),vt.documentElement.classList.add(At),I.getBoolean("_testing")&&I.set("animated",!1);const Rt=Lt=>Lt.tagName&&Lt.tagName.startsWith("ION-"),Zt=Lt=>["ios","md"].includes(Lt);(0,E.s)(Lt=>{for(;Lt;){const Gt=Lt.mode||Lt.getAttribute("mode");if(Gt){if(Zt(Gt))return Gt;Rt(Lt)&&console.warn('Invalid ionic mode: "'+Gt+'", expected: "ios" or "md"')}Lt=Lt.parentElement}return At})}},7689:(tn,Ze,B)=>{"use strict";B.r(Ze),B.d(Ze,{iosTransitionAnimation:()=>Ce,shadow:()=>Q});var E=B(7235),O=B(4425);B(3150);const ae=_e=>document.querySelector(`${_e}.ion-cloned-element`),Q=_e=>_e.shadowRoot||_e,ve=_e=>{const De="ION-TABS"===_e.tagName?_e:_e.querySelector("ion-tabs"),Xe="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=De){const Ee=De.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Ee?Ee.querySelector(Xe):null}return _e.querySelector(Xe)},re=(_e,De)=>{const Xe="ION-TABS"===_e.tagName?_e:_e.querySelector("ion-tabs");let Ee=[];if(null!=Xe){const je=Xe.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=je&&(Ee=je.querySelectorAll("ion-buttons"))}else Ee=_e.querySelectorAll("ion-buttons");for(const je of Ee){const Ae=je.closest("ion-header"),$e=Ae&&!Ae.classList.contains("header-collapse-condense-inactive"),Fe=je.querySelector("ion-back-button"),Me=je.classList.contains("buttons-collapse"),Je="start"===je.slot||""===je.slot;if(null!==Fe&&Je&&(Me&&$e&&De||!Me))return Fe}return null},ie=(_e,De,Xe,Ee,je,Ae)=>{const $e=De?`calc(100% - ${Ae.right+4}px)`:Ae.left-4+"px",Fe=De?"7px":"-7px",Me=De?"-4px":"4px",Je=De?"-4px":"4px",ct=De?"right":"left",jt=De?"left":"right",pt=Xe?[{offset:0,opacity:1,transform:`translate3d(${Me}, ${Ae.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Fe}, ${je.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${Fe}, ${je.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${Me}, ${Ae.top-46}px, 0) scale(1)`}],lt=Xe?[{offset:0,opacity:1,transform:`translate3d(${Je}, ${Ae.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${Je}, ${Ae.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${Je}, ${Ae.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${Je}, ${Ae.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${Je}, ${Ae.top-46}px, 0) scale(1)`}],Dt=(0,E.c)(),At=(0,E.c)(),wn=ae("ion-back-button"),pn=Q(wn).querySelector(".button-text"),bt=Q(wn).querySelector("ion-icon");wn.text=Ee.text,wn.mode=Ee.mode,wn.icon=Ee.icon,wn.color=Ee.color,wn.disabled=Ee.disabled,wn.style.setProperty("display","block"),wn.style.setProperty("position","fixed"),At.addElement(bt),Dt.addElement(pn),Dt.beforeStyles({"transform-origin":`${ct} center`}).beforeAddWrite(()=>{Ee.style.setProperty("display","none"),wn.style.setProperty(ct,$e)}).afterAddWrite(()=>{Ee.style.setProperty("display",""),wn.style.setProperty("display","none"),wn.style.removeProperty(ct)}).keyframes(pt),At.beforeStyles({"transform-origin":`${jt} center`}).keyframes(lt),_e.addAnimation([Dt,At])},me=(_e,De,Xe,Ee,je,Ae)=>{const $e=De?`calc(100% - ${je.right}px)`:`${je.left}px`,Fe=De?"-18px":"18px",Me=De?"right":"left",jt=Xe?[{offset:0,opacity:0,transform:`translate3d(${Fe}, ${Ae.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${je.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${je.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Fe}, ${Ae.top-4}px, 0) scale(0.5)`}],I=ae("ion-title"),rt=(0,E.c)();I.innerText=Ee.innerText,I.size=Ee.size,I.color=Ee.color,rt.addElement(I),rt.beforeStyles({"transform-origin":`${Me} center`,height:"46px",display:"",position:"relative",[Me]:$e}).beforeAddWrite(()=>{Ee.style.setProperty("display","none")}).afterAddWrite(()=>{Ee.style.setProperty("display",""),I.style.setProperty("display","none")}).keyframes(jt),_e.addAnimation(rt)},Ce=(_e,De)=>{try{const Xe="cubic-bezier(0.32,0.72,0,1)",Ee="opacity",je="transform",Ae="0%",$e=.8,Fe="rtl"===_e.ownerDocument.dir,Me=Fe?"-99.5%":"99.5%",Je=Fe?"33%":"-33%",ct=De.enteringEl,jt=De.leavingEl,I="back"===De.direction,rt=ct.querySelector(":scope > ion-content"),pt=ct.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),st=ct.querySelectorAll(":scope > ion-header > ion-toolbar"),mt=(0,E.c)(),lt=(0,E.c)();if(mt.addElement(ct).duration(De.duration||540).easing(De.easing||Xe).fill("both").beforeRemoveClass("ion-page-invisible"),jt&&_e){const pn=(0,E.c)();pn.addElement(_e),mt.addAnimation(pn)}if(rt||0!==st.length||0!==pt.length?(lt.addElement(rt),lt.addElement(pt)):lt.addElement(ct.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),mt.addAnimation(lt),I?lt.beforeClearStyles([Ee]).fromTo("transform",`translateX(${Je})`,`translateX(${Ae})`).fromTo(Ee,$e,1):lt.beforeClearStyles([Ee]).fromTo("transform",`translateX(${Me})`,`translateX(${Ae})`),rt){const pn=Q(rt).querySelector(".transition-effect");if(pn){const bt=pn.querySelector(".transition-cover"),vt=pn.querySelector(".transition-shadow"),ht=(0,E.c)(),Ke=(0,E.c)(),dt=(0,E.c)();ht.addElement(pn).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Ke.addElement(bt).beforeClearStyles([Ee]).fromTo(Ee,0,.1),dt.addElement(vt).beforeClearStyles([Ee]).fromTo(Ee,.03,.7),ht.addAnimation([Ke,dt]),lt.addAnimation([ht])}}const Dt=ct.querySelector("ion-header.header-collapse-condense"),{forward:At,backward:wn}=((_e,De,Xe,Ee,je)=>{const Ae=re(Ee,Xe),$e=ve(je),Fe=ve(Ee),Me=re(je,Xe),Je=null!==Ae&&null!==$e&&!Xe,ct=null!==Fe&&null!==Me&&Xe;if(Je){const jt=$e.getBoundingClientRect(),I=Ae.getBoundingClientRect();me(_e,De,Xe,$e,jt,I),ie(_e,De,Xe,Ae,jt,I)}else if(ct){const jt=Fe.getBoundingClientRect(),I=Me.getBoundingClientRect();me(_e,De,Xe,Fe,jt,I),ie(_e,De,Xe,Me,jt,I)}return{forward:Je,backward:ct}})(mt,Fe,I,ct,jt);if(st.forEach(pn=>{const bt=(0,E.c)();bt.addElement(pn),mt.addAnimation(bt);const vt=(0,E.c)();vt.addElement(pn.querySelector("ion-title"));const ht=(0,E.c)(),Ke=Array.from(pn.querySelectorAll("ion-buttons,[menuToggle]")),dt=pn.closest("ion-header"),Rt=dt&&dt.classList.contains("header-collapse-condense-inactive");let Zt;Zt=Ke.filter(I?Nn=>{const Dn=Nn.classList.contains("buttons-collapse");return Dn&&!Rt||!Dn}:Nn=>!Nn.classList.contains("buttons-collapse")),ht.addElement(Zt);const Lt=(0,E.c)();Lt.addElement(pn.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const Gt=(0,E.c)();Gt.addElement(Q(pn).querySelector(".toolbar-background"));const Bn=(0,E.c)(),ir=pn.querySelector("ion-back-button");if(ir&&Bn.addElement(ir),bt.addAnimation([vt,ht,Lt,Gt,Bn]),ht.fromTo(Ee,.01,1),Lt.fromTo(Ee,.01,1),I)Rt||vt.fromTo("transform",`translateX(${Je})`,`translateX(${Ae})`).fromTo(Ee,.01,1),Lt.fromTo("transform",`translateX(${Je})`,`translateX(${Ae})`),Bn.fromTo(Ee,.01,1);else if(Dt||vt.fromTo("transform",`translateX(${Me})`,`translateX(${Ae})`).fromTo(Ee,.01,1),Lt.fromTo("transform",`translateX(${Me})`,`translateX(${Ae})`),Gt.beforeClearStyles([Ee,"transform"]),(null==dt?void 0:dt.translucent)?Gt.fromTo("transform",Fe?"translateX(-100%)":"translateX(100%)","translateX(0px)"):Gt.fromTo(Ee,.01,"var(--opacity)"),At||Bn.fromTo(Ee,.01,1),ir&&!At){const Dn=(0,E.c)();Dn.addElement(Q(ir).querySelector(".button-text")).fromTo("transform",Fe?"translateX(-100px)":"translateX(100px)","translateX(0px)"),bt.addAnimation(Dn)}}),jt){const pn=(0,E.c)(),bt=jt.querySelector(":scope > ion-content"),vt=jt.querySelectorAll(":scope > ion-header > ion-toolbar"),ht=jt.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(bt||0!==vt.length||0!==ht.length?(pn.addElement(bt),pn.addElement(ht)):pn.addElement(jt.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),mt.addAnimation(pn),I){pn.beforeClearStyles([Ee]).fromTo("transform",`translateX(${Ae})`,Fe?"translateX(-100%)":"translateX(100%)");const Ke=(0,O.g)(jt);mt.afterAddWrite(()=>{"normal"===mt.getDirection()&&Ke.style.setProperty("display","none")})}else pn.fromTo("transform",`translateX(${Ae})`,`translateX(${Je})`).fromTo(Ee,1,$e);if(bt){const Ke=Q(bt).querySelector(".transition-effect");if(Ke){const dt=Ke.querySelector(".transition-cover"),Rt=Ke.querySelector(".transition-shadow"),Zt=(0,E.c)(),Lt=(0,E.c)(),Gt=(0,E.c)();Zt.addElement(Ke).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Lt.addElement(dt).beforeClearStyles([Ee]).fromTo(Ee,.1,0),Gt.addElement(Rt).beforeClearStyles([Ee]).fromTo(Ee,.7,.03),Zt.addAnimation([Lt,Gt]),pn.addAnimation([Zt])}}vt.forEach(Ke=>{const dt=(0,E.c)();dt.addElement(Ke);const Rt=(0,E.c)();Rt.addElement(Ke.querySelector("ion-title"));const Zt=(0,E.c)(),Lt=Ke.querySelectorAll("ion-buttons,[menuToggle]"),Gt=Ke.closest("ion-header"),Bn=Gt&&Gt.classList.contains("header-collapse-condense-inactive"),ir=Array.from(Lt).filter(Ft=>{const Wn=Ft.classList.contains("buttons-collapse");return Wn&&!Bn||!Wn});Zt.addElement(ir);const Nn=(0,E.c)(),Dn=Ke.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");Dn.length>0&&Nn.addElement(Dn);const qn=(0,E.c)();qn.addElement(Q(Ke).querySelector(".toolbar-background"));const Gr=(0,E.c)(),Tr=Ke.querySelector("ion-back-button");if(Tr&&Gr.addElement(Tr),dt.addAnimation([Rt,Zt,Nn,Gr,qn]),mt.addAnimation(dt),Gr.fromTo(Ee,.99,0),Zt.fromTo(Ee,.99,0),Nn.fromTo(Ee,.99,0),I){if(Bn||Rt.fromTo("transform",`translateX(${Ae})`,Fe?"translateX(-100%)":"translateX(100%)").fromTo(Ee,.99,0),Nn.fromTo("transform",`translateX(${Ae})`,Fe?"translateX(-100%)":"translateX(100%)"),qn.beforeClearStyles([Ee,"transform"]),(null==Gt?void 0:Gt.translucent)?qn.fromTo("transform","translateX(0px)",Fe?"translateX(-100%)":"translateX(100%)"):qn.fromTo(Ee,"var(--opacity)",0),Tr&&!wn){const Wn=(0,E.c)();Wn.addElement(Q(Tr).querySelector(".button-text")).fromTo("transform",`translateX(${Ae})`,`translateX(${(Fe?-124:124)+"px"})`),dt.addAnimation(Wn)}}else Bn||Rt.fromTo("transform",`translateX(${Ae})`,`translateX(${Je})`).fromTo(Ee,.99,0).afterClearStyles([je,Ee]),Nn.fromTo("transform",`translateX(${Ae})`,`translateX(${Je})`).afterClearStyles([je,Ee]),Gr.afterClearStyles([Ee]),Rt.afterClearStyles([Ee]),Zt.afterClearStyles([Ee])})}return mt}catch(Xe){throw Xe}}},5392:(tn,Ze,B)=>{"use strict";B.r(Ze),B.d(Ze,{mdTransitionAnimation:()=>oe});var E=B(7235),O=B(4425);B(3150);const oe=(ae,Q)=>{const Te="back"===Q.direction,me=Q.leavingEl,Ce=(0,O.g)(Q.enteringEl),_e=Ce.querySelector("ion-toolbar"),De=(0,E.c)();if(De.addElement(Ce).fill("both").beforeRemoveClass("ion-page-invisible"),Te?De.duration(Q.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):De.duration(Q.duration||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),_e){const Xe=(0,E.c)();Xe.addElement(_e),De.addAnimation(Xe)}if(me&&Te){De.duration(Q.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const Xe=(0,E.c)();Xe.addElement((0,O.g)(me)).onFinish(Ee=>{1===Ee&&Xe.elements.length>0&&Xe.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),De.addAnimation(Xe)}return De}},3291:(tn,Ze,B)=>{"use strict";B.d(Ze,{B:()=>ht,a:()=>re,b:()=>Te,c:()=>_e,d:()=>pt,e:()=>Xe,f:()=>mt,g:()=>At,h:()=>Q,i:()=>pn,l:()=>ie,m:()=>me,p:()=>Ce,s:()=>vt,t:()=>De});var E=B(8239),O=B(7585),ne=B(3087),oe=B(1567);let ae=0;const Q=new WeakMap,ve=Ke=>({create:dt=>Ee(Ke,dt),dismiss:(dt,Rt,Zt)=>ct(document,dt,Rt,Ke,Zt),getTop:()=>(0,E.Z)(function*(){return I(document,Ke)})()}),re=ve("ion-alert"),Te=ve("ion-action-sheet"),ie=ve("ion-loading"),me=ve("ion-modal"),Ce=ve("ion-picker"),_e=ve("ion-popover"),De=ve("ion-toast"),Xe=Ke=>{"undefined"!=typeof document&&Je(document);const dt=ae++;Ke.overlayIndex=dt,Ke.hasAttribute("id")||(Ke.id=`ion-overlay-${dt}`)},Ee=(Ke,dt)=>"undefined"!=typeof customElements?customElements.whenDefined(Ke).then(()=>{const Rt=document.createElement(Ke);return Rt.classList.add("overlay-hidden"),Object.assign(Rt,dt),lt(document).appendChild(Rt),new Promise(Zt=>(0,oe.c)(Rt,Zt))}):Promise.resolve(),je='[tabindex]:not([tabindex^="-"]), input:not([type=hidden]):not([tabindex^="-"]), textarea:not([tabindex^="-"]), button:not([tabindex^="-"]), select:not([tabindex^="-"]), .ion-focusable:not([tabindex^="-"])',Ae="input:not([type=hidden]), textarea, button, select",Je=Ke=>{0===ae&&(ae=1,Ke.addEventListener("focus",dt=>((Ke,dt)=>{const Rt=I(dt),Zt=Ke.target;if(Rt&&Zt)if(Rt===Zt)Rt.lastFocus=void 0;else{const Lt=(0,oe.g)(Rt);if(!Lt.contains(Zt))return;const Gt=Lt.querySelector(".ion-overlay-wrapper");if(!Gt)return;if(Gt.contains(Zt))Rt.lastFocus=Zt;else{const Bn=Rt.lastFocus;((Ke,dt)=>{let Rt=Ke.querySelector(je);const Zt=Rt&&Rt.shadowRoot;Zt&&(Rt=Zt.querySelector(Ae)||Rt),Rt?Rt.focus():dt.focus()})(Gt,Rt),Bn===dt.activeElement&&((Ke,dt)=>{const Rt=Array.from(Ke.querySelectorAll(je));let Zt=Rt.length>0?Rt[Rt.length-1]:null;const Lt=Zt&&Zt.shadowRoot;Lt&&(Zt=Lt.querySelector(Ae)||Zt),Zt?Zt.focus():dt.focus()})(Gt,Rt),Rt.lastFocus=dt.activeElement}}})(dt,Ke),!0),Ke.addEventListener("ionBackButton",dt=>{const Rt=I(Ke);Rt&&Rt.backdropDismiss&&dt.detail.register(ne.OVERLAY_BACK_BUTTON_PRIORITY,()=>Rt.dismiss(void 0,ht))}),Ke.addEventListener("keyup",dt=>{if("Escape"===dt.key){const Rt=I(Ke);Rt&&Rt.backdropDismiss&&Rt.dismiss(void 0,ht)}}))},ct=(Ke,dt,Rt,Zt,Lt)=>{const Gt=I(Ke,Zt,Lt);return Gt?Gt.dismiss(dt,Rt):Promise.reject("overlay does not exist")},I=(Ke,dt,Rt)=>{const Zt=((Ke,dt)=>(void 0===dt&&(dt="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(Ke.querySelectorAll(dt)).filter(Rt=>Rt.overlayIndex>0)))(Ke,dt);return void 0===Rt?Zt[Zt.length-1]:Zt.find(Lt=>Lt.id===Rt)},rt=(Ke=!1)=>{const Rt=lt(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");!Rt||(Ke?Rt.setAttribute("aria-hidden","true"):Rt.removeAttribute("aria-hidden"))},pt=function(){var Ke=(0,E.Z)(function*(dt,Rt,Zt,Lt,Gt){if(dt.presented)return;rt(!0),dt.presented=!0,dt.willPresent.emit();const Bn=(0,O.b)(dt),ir=dt.enterAnimation?dt.enterAnimation:O.c.get(Rt,"ios"===Bn?Zt:Lt);(yield Dt(dt,ir,dt.el,Gt))&&dt.didPresent.emit(),"ION-TOAST"!==dt.el.tagName&&st(dt.el),dt.keyboardClose&&dt.el.focus()});return function(Rt,Zt,Lt,Gt,Bn){return Ke.apply(this,arguments)}}(),st=function(){var Ke=(0,E.Z)(function*(dt){let Rt=document.activeElement;if(!Rt)return;const Zt=Rt&&Rt.shadowRoot;Zt&&(Rt=Zt.querySelector(Ae)||Rt),yield dt.onDidDismiss(),Rt.focus()});return function(Rt){return Ke.apply(this,arguments)}}(),mt=function(){var Ke=(0,E.Z)(function*(dt,Rt,Zt,Lt,Gt,Bn,ir){if(!dt.presented)return!1;rt(!1),dt.presented=!1;try{dt.el.style.setProperty("pointer-events","none"),dt.willDismiss.emit({data:Rt,role:Zt});const Nn=(0,O.b)(dt),Dn=dt.leaveAnimation?dt.leaveAnimation:O.c.get(Lt,"ios"===Nn?Gt:Bn);"gesture"!==Zt&&(yield Dt(dt,Dn,dt.el,ir)),dt.didDismiss.emit({data:Rt,role:Zt}),Q.delete(dt)}catch(Nn){console.error(Nn)}return dt.el.remove(),!0});return function(Rt,Zt,Lt,Gt,Bn,ir,Nn){return Ke.apply(this,arguments)}}(),lt=Ke=>Ke.querySelector("ion-app")||Ke.body,Dt=function(){var Ke=(0,E.Z)(function*(dt,Rt,Zt,Lt){Zt.classList.remove("overlay-hidden");const Bn=Rt(Zt.shadowRoot||dt.el,Lt);(!dt.animated||!O.c.getBoolean("animated",!0))&&Bn.duration(0),dt.keyboardClose&&Bn.beforeAddWrite(()=>{const Nn=Zt.ownerDocument.activeElement;Nn&&Nn.matches("input, ion-input, ion-textarea")&&Nn.blur()});const ir=Q.get(dt)||[];return Q.set(dt,[...ir,Bn]),yield Bn.play(),!0});return function(Rt,Zt,Lt,Gt){return Ke.apply(this,arguments)}}(),At=(Ke,dt)=>{let Rt;const Zt=new Promise(Lt=>Rt=Lt);return wn(Ke,dt,Lt=>{Rt(Lt.detail)}),Zt},wn=(Ke,dt,Rt)=>{const Zt=Lt=>{(0,oe.b)(Ke,dt,Zt),Rt(Lt)};(0,oe.a)(Ke,dt,Zt)},pn=Ke=>"cancel"===Ke||Ke===ht,bt=Ke=>Ke(),vt=(Ke,dt)=>{if("function"==typeof Ke)return O.c.get("_zoneGate",bt)(()=>{try{return Ke(dt)}catch(Zt){console.error(Zt)}})},ht="backdrop"},2329:(tn,Ze,B)=>{"use strict";B.d(Ze,{Mq:()=>E.getApp,C6:()=>E.getApps,ZF:()=>E.initializeApp,KN:()=>E.registerVersion});var E=B(8026);(0,E.registerVersion)("firebase","9.12.1","app")},7841:(tn,Ze,B)=>{"use strict";B.d(Ze,{Z:()=>E.Z});var E=B(3394);E.Z.registerVersion("firebase","9.12.1","app-compat")},4828:(tn,Ze,B)=>{"use strict";B.r(Ze);var E=B(8239),O=B(3394),ne=B(3607),oe=B(3854),ve=(B(8026),B(5422),B(3910));function re(){return window}function me(){return(me=(0,E.Z)(function*(ke,ye,Oe){var ut;const{BuildInfo:Ut}=re();(0,ne.aq)(ye.sessionId,"AuthEvent did not contain a session ID");const Ln=yield Ae(ye.sessionId),Tn={};return(0,ne.ar)()?Tn.ibi=Ut.packageName:(0,ne.as)()?Tn.apn=Ut.packageName:(0,ne.at)(ke,"operation-not-supported-in-this-environment"),Ut.displayName&&(Tn.appDisplayName=Ut.displayName),Tn.sessionId=Ln,(0,ne.au)(ke,Oe,ye.type,void 0,null!==(ut=ye.eventId)&&void 0!==ut?ut:void 0,Tn)})).apply(this,arguments)}function _e(){return(_e=(0,E.Z)(function*(ke){const{BuildInfo:ye}=re(),Oe={};(0,ne.ar)()?Oe.iosBundleId=ye.packageName:(0,ne.as)()?Oe.androidPackageName=ye.packageName:(0,ne.at)(ke,"operation-not-supported-in-this-environment"),yield(0,ne.av)(ke,Oe)})).apply(this,arguments)}function Ee(){return(Ee=(0,E.Z)(function*(ke,ye,Oe){const{cordova:ut}=re();let Ut=()=>{};try{yield new Promise((Ln,Tn)=>{let kn=null;function ln(){var $t;Ln();const Vt=null===($t=ut.plugins.browsertab)||void 0===$t?void 0:$t.close;"function"==typeof Vt&&Vt(),"function"==typeof(null==Oe?void 0:Oe.close)&&Oe.close()}function yn(){kn||(kn=window.setTimeout(()=>{Tn((0,ne.aw)(ke,"redirect-cancelled-by-user"))},2e3))}function pr(){"visible"===(null==document?void 0:document.visibilityState)&&yn()}ye.addPassiveListener(ln),document.addEventListener("resume",yn,!1),(0,ne.as)()&&document.addEventListener("visibilitychange",pr,!1),Ut=()=>{ye.removePassiveListener(ln),document.removeEventListener("resume",yn,!1),document.removeEventListener("visibilitychange",pr,!1),kn&&window.clearTimeout(kn)}})}finally{Ut()}})).apply(this,arguments)}function Ae(ke){return $e.apply(this,arguments)}function $e(){return($e=(0,E.Z)(function*(ke){const ye=Fe(ke),Oe=yield crypto.subtle.digest("SHA-256",ye);return Array.from(new Uint8Array(Oe)).map(Ut=>Ut.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Fe(ke){if((0,ne.aq)(/[0-9a-zA-Z]+/.test(ke),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(ke);const ye=new ArrayBuffer(ke.length),Oe=new Uint8Array(ye);for(let ut=0;ut<ke.length;ut++)Oe[ut]=ke.charCodeAt(ut);return Oe}class Je extends ne.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(ye=>{this.resolveInialized=ye})}addPassiveListener(ye){this.passiveListeners.add(ye)}removePassiveListener(ye){this.passiveListeners.delete(ye)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(ye){return this.resolveInialized(),this.passiveListeners.forEach(Oe=>Oe(ye)),super.onEvent(ye)}initialized(){var ye=this;return(0,E.Z)(function*(){yield ye.initPromise})()}}function I(ke){return rt.apply(this,arguments)}function rt(){return(rt=(0,E.Z)(function*(ke){const ye=yield mt()._get(lt(ke));return ye&&(yield mt()._remove(lt(ke))),ye})).apply(this,arguments)}function st(){const ke=[],ye="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Oe=0;Oe<20;Oe++){const ut=Math.floor(Math.random()*ye.length);ke.push(ye.charAt(ut))}return ke.join("")}function mt(){return(0,ne.ay)(ne.b)}function lt(ke){return(0,ne.az)("authEvent",ke.config.apiKey,ke.name)}function wn(ke){if(!(null==ke?void 0:ke.includes("?")))return{};const[ye,...Oe]=ke.split("?");return(0,oe.zd)(Oe.join("?"))}function ht(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,ne.aw)("no-auth-event")}}function Lt(){var ke;return(null===(ke=null==self?void 0:self.location)||void 0===ke?void 0:ke.protocol)||null}function Bn(ke=(0,oe.z$)()){return!("file:"!==Lt()&&"ionic:"!==Lt()&&"capacitor:"!==Lt()||!ke.toLowerCase().match(/iphone|ipad|ipod|android/))}function Gr(){try{const ke=self.localStorage,ye=ne.aI();if(ke)return ke.setItem(ye,"1"),ke.removeItem(ye),!function(ke=(0,oe.z$)()){return(0,oe.w1)()&&11===(null==document?void 0:document.documentMode)||function(ke=(0,oe.z$)()){return/Edge\/\d+/.test(ke)}(ke)}()||(0,oe.hl)()}catch(ke){return Tr()&&(0,oe.hl)()}return!1}function Tr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ft(){return("http:"===Lt()||"https:"===Lt()||(0,oe.ru)()||Bn())&&!((0,oe.b$)()||(0,oe.UG)())&&Gr()&&!Tr()}function Wn(){return Bn()&&"undefined"!=typeof document}function gn(){return(gn=(0,E.Z)(function*(){return!!Wn()&&new Promise(ke=>{const ye=setTimeout(()=>{ke(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(ye),ke(!0)})})})).apply(this,arguments)}const lr={LOCAL:"local",NONE:"none",SESSION:"session"},zr=ne.ax,kr="persistence";function Fr(ke){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,E.Z)(function*(ke){yield ke._initializationPromise;const ye=dr(),Oe=ne.az(kr,ke.config.apiKey,ke.name);ye&&ye.setItem(Oe,ke._getPersistence())})).apply(this,arguments)}function dr(){var ke;try{return(null===(ke="undefined"!=typeof window?window:null)||void 0===ke?void 0:ke.sessionStorage)||null}catch(ye){return null}}const dn=ne.ax;class Ct{constructor(){this.browserResolver=ne.ay(ne.k),this.cordovaResolver=ne.ay(class{constructor(){this._redirectPersistence=ne.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ne.aB,this._overrideRedirectResult=ne.aC}_initialize(ye){var Oe=this;return(0,E.Z)(function*(){const ut=ye._key();let Ut=Oe.eventManagers.get(ut);return Ut||(Ut=new Je(ye),Oe.eventManagers.set(ut,Ut),Oe.attachCallbackListeners(ye,Ut)),Ut})()}_openPopup(ye){(0,ne.at)(ye,"operation-not-supported-in-this-environment")}_openRedirect(ye,Oe,ut,Ut){var Ln=this;return(0,E.Z)(function*(){!function(ke){var ye,Oe,ut,Ut,Ln,Tn,kn,ln,yn,pr;const $t=re();(0,ne.ax)("function"==typeof(null===(ye=null==$t?void 0:$t.universalLinks)||void 0===ye?void 0:ye.subscribe),ke,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,ne.ax)(void 0!==(null===(Oe=null==$t?void 0:$t.BuildInfo)||void 0===Oe?void 0:Oe.packageName),ke,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,ne.ax)("function"==typeof(null===(Ln=null===(Ut=null===(ut=null==$t?void 0:$t.cordova)||void 0===ut?void 0:ut.plugins)||void 0===Ut?void 0:Ut.browsertab)||void 0===Ln?void 0:Ln.openUrl),ke,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,ne.ax)("function"==typeof(null===(ln=null===(kn=null===(Tn=null==$t?void 0:$t.cordova)||void 0===Tn?void 0:Tn.plugins)||void 0===kn?void 0:kn.browsertab)||void 0===ln?void 0:ln.isAvailable),ke,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,ne.ax)("function"==typeof(null===(pr=null===(yn=null==$t?void 0:$t.cordova)||void 0===yn?void 0:yn.InAppBrowser)||void 0===pr?void 0:pr.open),ke,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(ye);const Tn=yield Ln._initialize(ye);yield Tn.initialized(),Tn.resetRedirect(),(0,ne.aD)(),yield Ln._originValidation(ye);const kn=function(ke,ye,Oe=null){return{type:ye,eventId:Oe,urlResponse:null,sessionId:st(),postBody:null,tenantId:ke.tenantId,error:(0,ne.aw)(ke,"no-auth-event")}}(ye,ut,Ut);yield function(ke,ye){return mt()._set(lt(ke),ye)}(ye,kn);const ln=yield function(ke,ye,Oe){return me.apply(this,arguments)}(ye,kn,Oe),yn=yield function(ke){const{cordova:ye}=re();return new Promise(Oe=>{ye.plugins.browsertab.isAvailable(ut=>{let Ut=null;ut?ye.plugins.browsertab.openUrl(ke):Ut=ye.InAppBrowser.open(ke,(0,ne.ap)()?"_blank":"_system","location=yes"),Oe(Ut)})})}(ln);return function(ke,ye,Oe){return Ee.apply(this,arguments)}(ye,Tn,yn)})()}_isIframeWebStorageSupported(ye,Oe){throw new Error("Method not implemented.")}_originValidation(ye){const Oe=ye._key();return this.originValidationPromises[Oe]||(this.originValidationPromises[Oe]=function(ke){return _e.apply(this,arguments)}(ye)),this.originValidationPromises[Oe]}attachCallbackListeners(ye,Oe){const{universalLinks:ut,handleOpenURL:Ut,BuildInfo:Ln}=re(),Tn=setTimeout((0,E.Z)(function*(){yield I(ye),Oe.onEvent(ht())}),500),kn=function(){var pr=(0,E.Z)(function*($t){clearTimeout(Tn);const Vt=yield I(ye);let Nt=null;Vt&&(null==$t?void 0:$t.url)&&(Nt=function(ke,ye){var Oe,ut;const Ut=function(ke){const ye=wn(ke),Oe=ye.link?decodeURIComponent(ye.link):void 0,ut=wn(Oe).link,Ut=ye.deep_link_id?decodeURIComponent(ye.deep_link_id):void 0;return wn(Ut).link||Ut||ut||Oe||ke}(ye);if(Ut.includes("/__/auth/callback")){const Ln=wn(Ut),Tn=Ln.firebaseError?function(ke){try{return JSON.parse(ke)}catch(ye){return null}}(decodeURIComponent(Ln.firebaseError)):null,kn=null===(ut=null===(Oe=null==Tn?void 0:Tn.code)||void 0===Oe?void 0:Oe.split("auth/"))||void 0===ut?void 0:ut[1],ln=kn?(0,ne.aw)(kn):null;return ln?{type:ke.type,eventId:ke.eventId,tenantId:ke.tenantId,error:ln,urlResponse:null,sessionId:null,postBody:null}:{type:ke.type,eventId:ke.eventId,tenantId:ke.tenantId,sessionId:ke.sessionId,urlResponse:Ut,postBody:null}}return null}(Vt,$t.url)),Oe.onEvent(Nt||ht())});return function(Vt){return pr.apply(this,arguments)}}();void 0!==ut&&"function"==typeof ut.subscribe&&ut.subscribe(null,kn);const ln=Ut,yn=`${Ln.packageName.toLowerCase()}://`;re().handleOpenURL=function(){var pr=(0,E.Z)(function*($t){if($t.toLowerCase().startsWith(yn)&&kn({url:$t}),"function"==typeof ln)try{ln($t)}catch(Vt){console.error(Vt)}});return function($t){return pr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ne.a,this._completeRedirectFn=ne.aB,this._overrideRedirectResult=ne.aC}_initialize(ye){var Oe=this;return(0,E.Z)(function*(){return yield Oe.selectUnderlyingResolver(),Oe.assertedUnderlyingResolver._initialize(ye)})()}_openPopup(ye,Oe,ut,Ut){var Ln=this;return(0,E.Z)(function*(){return yield Ln.selectUnderlyingResolver(),Ln.assertedUnderlyingResolver._openPopup(ye,Oe,ut,Ut)})()}_openRedirect(ye,Oe,ut,Ut){var Ln=this;return(0,E.Z)(function*(){return yield Ln.selectUnderlyingResolver(),Ln.assertedUnderlyingResolver._openRedirect(ye,Oe,ut,Ut)})()}_isIframeWebStorageSupported(ye,Oe){this.assertedUnderlyingResolver._isIframeWebStorageSupported(ye,Oe)}_originValidation(ye){return this.assertedUnderlyingResolver._originValidation(ye)}get _shouldInitProactively(){return Wn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return dn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var ye=this;return(0,E.Z)(function*(){if(ye.underlyingResolver)return;const Oe=yield function(){return gn.apply(this,arguments)}();ye.underlyingResolver=Oe?ye.cordovaResolver:ye.browserResolver})()}}function ci(ke){return ke.unwrap()}function hn(ke){return Sr(ke)}function Sr(ke){const{_tokenResponse:ye}=ke instanceof oe.ZR?ke.customData:ke;if(!ye)return null;if(!(ke instanceof oe.ZR)&&"temporaryProof"in ye&&"phoneNumber"in ye)return ne.P.credentialFromResult(ke);const Oe=ye.providerId;if(!Oe||Oe===ne.o.PASSWORD)return null;let ut;switch(Oe){case ne.o.GOOGLE:ut=ne.Q;break;case ne.o.FACEBOOK:ut=ne.N;break;case ne.o.GITHUB:ut=ne.T;break;case ne.o.TWITTER:ut=ne.W;break;default:const{oauthIdToken:Ut,oauthAccessToken:Ln,oauthTokenSecret:Tn,pendingToken:kn,nonce:ln}=ye;return Ln||Tn||Ut||kn?kn?Oe.startsWith("saml.")?ne.aL._create(Oe,kn):ne.J._fromParams({providerId:Oe,signInMethod:Oe,pendingToken:kn,idToken:Ut,accessToken:Ln}):new ne.U(Oe).credential({idToken:Ut,accessToken:Ln,rawNonce:ln}):null}return ke instanceof oe.ZR?ut.credentialFromError(ke):ut.credentialFromResult(ke)}function br(ke,ye){return ye.catch(Oe=>{throw Oe instanceof oe.ZR&&function(ke,ye){var Oe,ut;const Ut=null===(Oe=ye.customData)||void 0===Oe?void 0:Oe._tokenResponse;if("auth/multi-factor-auth-required"===(null===(ut=ye)||void 0===ut?void 0:ut.code))ye.resolver=new Yn(ke,ne.an(ke,ye));else if(Ut){const Ln=Sr(ye),Tn=ye;Ln&&(Tn.credential=Ln,Tn.tenantId=Ut.tenantId||void 0,Tn.email=Ut.email||void 0,Tn.phoneNumber=Ut.phoneNumber||void 0)}}(ke,Oe),Oe}).then(Oe=>{const Ut=Oe.user;return{operationType:Oe.operationType,credential:hn(Oe),additionalUserInfo:ne.al(Oe),user:ii.getOrCreate(Ut)}})}function Xn(ke,ye){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,E.Z)(function*(ke,ye){const Oe=yield ye;return{verificationId:Oe.verificationId,confirm:ut=>br(ke,Oe.confirm(ut))}})).apply(this,arguments)}class Yn{constructor(ye,Oe){this.resolver=Oe,this.auth=ye.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(ye){return br(ci(this.auth),this.resolver.resolveSignIn(ye))}}class ii{constructor(ye){this._delegate=ye,this.multiFactor=ne.ao(ye)}static getOrCreate(ye){return ii.USER_MAP.has(ye)||ii.USER_MAP.set(ye,new ii(ye)),ii.USER_MAP.get(ye)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(ye){return this._delegate.getIdTokenResult(ye)}getIdToken(ye){return this._delegate.getIdToken(ye)}linkAndRetrieveDataWithCredential(ye){return this.linkWithCredential(ye)}linkWithCredential(ye){var Oe=this;return(0,E.Z)(function*(){return br(Oe.auth,ne.Z(Oe._delegate,ye))})()}linkWithPhoneNumber(ye,Oe){var ut=this;return(0,E.Z)(function*(){return Xn(ut.auth,ne.l(ut._delegate,ye,Oe))})()}linkWithPopup(ye){var Oe=this;return(0,E.Z)(function*(){return br(Oe.auth,ne.d(Oe._delegate,ye,Ct))})()}linkWithRedirect(ye){var Oe=this;return(0,E.Z)(function*(){return yield Fr(ne.aE(Oe.auth)),ne.g(Oe._delegate,ye,Ct)})()}reauthenticateAndRetrieveDataWithCredential(ye){return this.reauthenticateWithCredential(ye)}reauthenticateWithCredential(ye){var Oe=this;return(0,E.Z)(function*(){return br(Oe.auth,ne._(Oe._delegate,ye))})()}reauthenticateWithPhoneNumber(ye,Oe){return Xn(this.auth,ne.r(this._delegate,ye,Oe))}reauthenticateWithPopup(ye){return br(this.auth,ne.e(this._delegate,ye,Ct))}reauthenticateWithRedirect(ye){var Oe=this;return(0,E.Z)(function*(){return yield Fr(ne.aE(Oe.auth)),ne.h(Oe._delegate,ye,Ct)})()}sendEmailVerification(ye){return ne.ab(this._delegate,ye)}unlink(ye){var Oe=this;return(0,E.Z)(function*(){return yield ne.ak(Oe._delegate,ye),Oe})()}updateEmail(ye){return ne.ag(this._delegate,ye)}updatePassword(ye){return ne.ah(this._delegate,ye)}updatePhoneNumber(ye){return ne.u(this._delegate,ye)}updateProfile(ye){return ne.af(this._delegate,ye)}verifyBeforeUpdateEmail(ye,Oe){return ne.ac(this._delegate,ye,Oe)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ii.USER_MAP=new WeakMap;const on=ne.ax;let Ot=(()=>{class ke{constructor(Oe,ut){if(this.app=Oe,ut.isInitialized())return this._delegate=ut.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ut}=Oe.options;on(Ut,"invalid-api-key",{appName:Oe.name}),on(Ut,"invalid-api-key",{appName:Oe.name});const Ln="undefined"!=typeof window?Ct:void 0;this._delegate=ut.initialize({options:{persistence:cn(Ut,Oe.name),popupRedirectResolver:Ln}}),this._delegate._updateErrorMap(ne.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ii.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Oe){this._delegate.languageCode=Oe}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Oe){this._delegate.tenantId=Oe}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Oe,ut){ne.G(this._delegate,Oe,ut)}applyActionCode(Oe){return ne.a2(this._delegate,Oe)}checkActionCode(Oe){return ne.a3(this._delegate,Oe)}confirmPasswordReset(Oe,ut){return ne.a1(this._delegate,Oe,ut)}createUserWithEmailAndPassword(Oe,ut){var Ut=this;return(0,E.Z)(function*(){return br(Ut._delegate,ne.a5(Ut._delegate,Oe,ut))})()}fetchProvidersForEmail(Oe){return this.fetchSignInMethodsForEmail(Oe)}fetchSignInMethodsForEmail(Oe){return ne.aa(this._delegate,Oe)}isSignInWithEmailLink(Oe){return ne.a8(this._delegate,Oe)}getRedirectResult(){var Oe=this;return(0,E.Z)(function*(){on(Ft(),Oe._delegate,"operation-not-supported-in-this-environment");const ut=yield ne.j(Oe._delegate,Ct);return ut?br(Oe._delegate,Promise.resolve(ut)):{credential:null,user:null}})()}addFrameworkForLogging(Oe){!function(ke,ye){(0,ne.aE)(ke)._logFramework(ye)}(this._delegate,Oe)}onAuthStateChanged(Oe,ut,Ut){const{next:Ln,error:Tn,complete:kn}=mn(Oe,ut,Ut);return this._delegate.onAuthStateChanged(Ln,Tn,kn)}onIdTokenChanged(Oe,ut,Ut){const{next:Ln,error:Tn,complete:kn}=mn(Oe,ut,Ut);return this._delegate.onIdTokenChanged(Ln,Tn,kn)}sendSignInLinkToEmail(Oe,ut){return ne.a7(this._delegate,Oe,ut)}sendPasswordResetEmail(Oe,ut){return ne.a0(this._delegate,Oe,ut||void 0)}setPersistence(Oe){var ut=this;return(0,E.Z)(function*(){let Ut;switch(function(ke,ye){zr(Object.values(lr).includes(ye),ke,"invalid-persistence-type"),(0,oe.b$)()?zr(ye!==lr.SESSION,ke,"unsupported-persistence-type"):(0,oe.UG)()?zr(ye===lr.NONE,ke,"unsupported-persistence-type"):Tr()?zr(ye===lr.NONE||ye===lr.LOCAL&&(0,oe.hl)(),ke,"unsupported-persistence-type"):zr(ye===lr.NONE||Gr(),ke,"unsupported-persistence-type")}(ut._delegate,Oe),Oe){case lr.SESSION:Ut=ne.a;break;case lr.LOCAL:Ut=(yield ne.ay(ne.i)._isAvailable())?ne.i:ne.b;break;case lr.NONE:Ut=ne.L;break;default:return ne.at("argument-error",{appName:ut._delegate.name})}return ut._delegate.setPersistence(Ut)})()}signInAndRetrieveDataWithCredential(Oe){return this.signInWithCredential(Oe)}signInAnonymously(){return br(this._delegate,ne.X(this._delegate))}signInWithCredential(Oe){return br(this._delegate,ne.Y(this._delegate,Oe))}signInWithCustomToken(Oe){return br(this._delegate,ne.$(this._delegate,Oe))}signInWithEmailAndPassword(Oe,ut){return br(this._delegate,ne.a6(this._delegate,Oe,ut))}signInWithEmailLink(Oe,ut){return br(this._delegate,ne.a9(this._delegate,Oe,ut))}signInWithPhoneNumber(Oe,ut){return Xn(this._delegate,ne.s(this._delegate,Oe,ut))}signInWithPopup(Oe){var ut=this;return(0,E.Z)(function*(){return on(Ft(),ut._delegate,"operation-not-supported-in-this-environment"),br(ut._delegate,ne.c(ut._delegate,Oe,Ct))})()}signInWithRedirect(Oe){var ut=this;return(0,E.Z)(function*(){return on(Ft(),ut._delegate,"operation-not-supported-in-this-environment"),yield Fr(ut._delegate),ne.f(ut._delegate,Oe,Ct)})()}updateCurrentUser(Oe){return this._delegate.updateCurrentUser(Oe)}verifyPasswordResetCode(Oe){return ne.a4(this._delegate,Oe)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ke.Persistence=lr,ke})();function mn(ke,ye,Oe){let ut=ke;"function"!=typeof ke&&({next:ut,error:ye,complete:Oe}=ke);const Ut=ut;return{next:Tn=>Ut(Tn&&ii.getOrCreate(Tn)),error:ye,complete:Oe}}function cn(ke,ye){const Oe=function(ke,ye){const Oe=dr();if(!Oe)return[];const ut=ne.az(kr,ke,ye);switch(Oe.getItem(ut)){case lr.NONE:return[ne.L];case lr.LOCAL:return[ne.i,ne.a];case lr.SESSION:return[ne.a];default:return[]}}(ke,ye);if("undefined"!=typeof self&&!Oe.includes(ne.i)&&Oe.push(ne.i),"undefined"!=typeof window)for(const ut of[ne.b,ne.a])Oe.includes(ut)||Oe.push(ut);return Oe.includes(ne.L)||Oe.push(ne.L),Oe}class rn{constructor(){this.providerId="phone",this._delegate=new ne.P(ci(O.Z.auth()))}static credential(ye,Oe){return ne.P.credential(ye,Oe)}verifyPhoneNumber(ye,Oe){return this._delegate.verifyPhoneNumber(ye,Oe)}unwrap(){return this._delegate}}rn.PHONE_SIGN_IN_METHOD=ne.P.PHONE_SIGN_IN_METHOD,rn.PROVIDER_ID=ne.P.PROVIDER_ID;const qt=ne.ax;var ke;(ke=O.Z).INTERNAL.registerComponent(new ve.wA("auth-compat",ye=>{const Oe=ye.getProvider("app-compat").getImmediate(),ut=ye.getProvider("auth");return new Ot(Oe,ut)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ne.A.EMAIL_SIGNIN,PASSWORD_RESET:ne.A.PASSWORD_RESET,RECOVER_EMAIL:ne.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ne.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ne.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ne.A.VERIFY_EMAIL}},EmailAuthProvider:ne.M,FacebookAuthProvider:ne.N,GithubAuthProvider:ne.T,GoogleAuthProvider:ne.Q,OAuthProvider:ne.U,SAMLAuthProvider:ne.V,PhoneAuthProvider:rn,PhoneMultiFactorGenerator:ne.m,RecaptchaVerifier:class{constructor(ye,Oe,ut=O.Z.app()){var Ut;qt(null===(Ut=ut.options)||void 0===Ut?void 0:Ut.apiKey,"invalid-api-key",{appName:ut.name}),this._delegate=new ne.R(ye,Oe,ut.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:ne.W,Auth:Ot,AuthCredential:ne.H,Error:oe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ke.registerVersion("@firebase/auth-compat","0.2.23")},6215:(tn,Ze,B)=>{"use strict";B.d(Ze,{X:()=>ne});var E=B(9765),O=B(7971);class ne extends E.xQ{constructor(ae){super(),this._value=ae}get value(){return this.getValue()}_subscribe(ae){const Q=super._subscribe(ae);return Q&&!Q.closed&&ae.next(this._value),Q}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new O.N;return this._value}next(ae){super.next(this._value=ae)}}},8891:(tn,Ze,B)=>{"use strict";B.d(Ze,{y:()=>Te});var E=B(7393),ne=B(9181),oe=B(6490),Q=B(6554),ve=B(4022),re=B(2494);let Te=(()=>{class me{constructor(_e){this._isScalar=!1,_e&&(this._subscribe=_e)}lift(_e){const De=new me;return De.source=this,De.operator=_e,De}subscribe(_e,De,Xe){const{operator:Ee}=this,je=function(me,Ce,_e){if(me){if(me instanceof E.L)return me;if(me[ne.b])return me[ne.b]()}return me||Ce||_e?new E.L(me,Ce,_e):new E.L(oe.c)}(_e,De,Xe);if(je.add(Ee?Ee.call(je,this.source):this.source||re.v.useDeprecatedSynchronousErrorHandling&&!je.syncErrorThrowable?this._subscribe(je):this._trySubscribe(je)),re.v.useDeprecatedSynchronousErrorHandling&&je.syncErrorThrowable&&(je.syncErrorThrowable=!1,je.syncErrorThrown))throw je.syncErrorValue;return je}_trySubscribe(_e){try{return this._subscribe(_e)}catch(De){re.v.useDeprecatedSynchronousErrorHandling&&(_e.syncErrorThrown=!0,_e.syncErrorValue=De),function(me){for(;me;){const{closed:Ce,destination:_e,isStopped:De}=me;if(Ce||De)return!1;me=_e&&_e instanceof E.L?_e:null}return!0}(_e)?_e.error(De):console.warn(De)}}forEach(_e,De){return new(De=ie(De))((Xe,Ee)=>{let je;je=this.subscribe(Ae=>{try{_e(Ae)}catch($e){Ee($e),je&&je.unsubscribe()}},Ee,Xe)})}_subscribe(_e){const{source:De}=this;return De&&De.subscribe(_e)}[Q.L](){return this}pipe(..._e){return 0===_e.length?this:(0,ve.U)(_e)(this)}toPromise(_e){return new(_e=ie(_e))((De,Xe)=>{let Ee;this.subscribe(je=>Ee=je,je=>Xe(je),()=>De(Ee))})}}return me.create=Ce=>new me(Ce),me})();function ie(me){if(me||(me=re.v.Promise||Promise),!me)throw new Error("no Promise impl found");return me}},6490:(tn,Ze,B)=>{"use strict";B.d(Ze,{c:()=>ne});var E=B(2494),O=B(4449);const ne={closed:!0,next(oe){},error(oe){if(E.v.useDeprecatedSynchronousErrorHandling)throw oe;(0,O.z)(oe)},complete(){}}},5197:(tn,Ze,B)=>{"use strict";B.d(Ze,{L:()=>O});var E=B(7393);class O extends E.L{notifyNext(oe,ae,Q,ve,re){this.destination.next(ae)}notifyError(oe,ae){this.destination.error(oe)}notifyComplete(oe){this.destination.complete()}}},9765:(tn,Ze,B)=>{"use strict";B.d(Ze,{Yc:()=>ve,xQ:()=>re});var E=B(8891),O=B(7393),ne=B(5319),oe=B(7971),ae=B(8858),Q=B(9181);class ve extends O.L{constructor(me){super(me),this.destination=me}}let re=(()=>{class ie extends E.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Q.b](){return new ve(this)}lift(Ce){const _e=new Te(this,this);return _e.operator=Ce,_e}next(Ce){if(this.closed)throw new oe.N;if(!this.isStopped){const{observers:_e}=this,De=_e.length,Xe=_e.slice();for(let Ee=0;Ee<De;Ee++)Xe[Ee].next(Ce)}}error(Ce){if(this.closed)throw new oe.N;this.hasError=!0,this.thrownError=Ce,this.isStopped=!0;const{observers:_e}=this,De=_e.length,Xe=_e.slice();for(let Ee=0;Ee<De;Ee++)Xe[Ee].error(Ce);this.observers.length=0}complete(){if(this.closed)throw new oe.N;this.isStopped=!0;const{observers:Ce}=this,_e=Ce.length,De=Ce.slice();for(let Xe=0;Xe<_e;Xe++)De[Xe].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(Ce){if(this.closed)throw new oe.N;return super._trySubscribe(Ce)}_subscribe(Ce){if(this.closed)throw new oe.N;return this.hasError?(Ce.error(this.thrownError),ne.w.EMPTY):this.isStopped?(Ce.complete(),ne.w.EMPTY):(this.observers.push(Ce),new ae.W(this,Ce))}asObservable(){const Ce=new E.y;return Ce.source=this,Ce}}return ie.create=(me,Ce)=>new Te(me,Ce),ie})();class Te extends re{constructor(me,Ce){super(),this.destination=me,this.source=Ce}next(me){const{destination:Ce}=this;Ce&&Ce.next&&Ce.next(me)}error(me){const{destination:Ce}=this;Ce&&Ce.error&&this.destination.error(me)}complete(){const{destination:me}=this;me&&me.complete&&this.destination.complete()}_subscribe(me){const{source:Ce}=this;return Ce?this.source.subscribe(me):ne.w.EMPTY}}},8858:(tn,Ze,B)=>{"use strict";B.d(Ze,{W:()=>O});var E=B(5319);class O extends E.w{constructor(oe,ae){super(),this.subject=oe,this.subscriber=ae,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const oe=this.subject,ae=oe.observers;if(this.subject=null,!ae||0===ae.length||oe.isStopped||oe.closed)return;const Q=ae.indexOf(this.subscriber);-1!==Q&&ae.splice(Q,1)}}},7393:(tn,Ze,B)=>{"use strict";B.d(Ze,{L:()=>ve});var E=B(9105),O=B(6490),ne=B(5319),oe=B(9181),ae=B(2494),Q=B(4449);class ve extends ne.w{constructor(ie,me,Ce){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=O.c;break;case 1:if(!ie){this.destination=O.c;break}if("object"==typeof ie){ie instanceof ve?(this.syncErrorThrowable=ie.syncErrorThrowable,this.destination=ie,ie.add(this)):(this.syncErrorThrowable=!0,this.destination=new re(this,ie));break}default:this.syncErrorThrowable=!0,this.destination=new re(this,ie,me,Ce)}}[oe.b](){return this}static create(ie,me,Ce){const _e=new ve(ie,me,Ce);return _e.syncErrorThrowable=!1,_e}next(ie){this.isStopped||this._next(ie)}error(ie){this.isStopped||(this.isStopped=!0,this._error(ie))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(ie){this.destination.next(ie)}_error(ie){this.destination.error(ie),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:ie}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=ie,this}}class re extends ve{constructor(ie,me,Ce,_e){super(),this._parentSubscriber=ie;let De,Xe=this;(0,E.m)(me)?De=me:me&&(De=me.next,Ce=me.error,_e=me.complete,me!==O.c&&(Xe=Object.create(me),(0,E.m)(Xe.unsubscribe)&&this.add(Xe.unsubscribe.bind(Xe)),Xe.unsubscribe=this.unsubscribe.bind(this))),this._context=Xe,this._next=De,this._error=Ce,this._complete=_e}next(ie){if(!this.isStopped&&this._next){const{_parentSubscriber:me}=this;ae.v.useDeprecatedSynchronousErrorHandling&&me.syncErrorThrowable?this.__tryOrSetError(me,this._next,ie)&&this.unsubscribe():this.__tryOrUnsub(this._next,ie)}}error(ie){if(!this.isStopped){const{_parentSubscriber:me}=this,{useDeprecatedSynchronousErrorHandling:Ce}=ae.v;if(this._error)Ce&&me.syncErrorThrowable?(this.__tryOrSetError(me,this._error,ie),this.unsubscribe()):(this.__tryOrUnsub(this._error,ie),this.unsubscribe());else if(me.syncErrorThrowable)Ce?(me.syncErrorValue=ie,me.syncErrorThrown=!0):(0,Q.z)(ie),this.unsubscribe();else{if(this.unsubscribe(),Ce)throw ie;(0,Q.z)(ie)}}}complete(){if(!this.isStopped){const{_parentSubscriber:ie}=this;if(this._complete){const me=()=>this._complete.call(this._context);ae.v.useDeprecatedSynchronousErrorHandling&&ie.syncErrorThrowable?(this.__tryOrSetError(ie,me),this.unsubscribe()):(this.__tryOrUnsub(me),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(ie,me){try{ie.call(this._context,me)}catch(Ce){if(this.unsubscribe(),ae.v.useDeprecatedSynchronousErrorHandling)throw Ce;(0,Q.z)(Ce)}}__tryOrSetError(ie,me,Ce){if(!ae.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{me.call(this._context,Ce)}catch(_e){return ae.v.useDeprecatedSynchronousErrorHandling?(ie.syncErrorValue=_e,ie.syncErrorThrown=!0,!0):((0,Q.z)(_e),!0)}return!1}_unsubscribe(){const{_parentSubscriber:ie}=this;this._context=null,this._parentSubscriber=null,ie.unsubscribe()}}},5319:(tn,Ze,B)=>{"use strict";B.d(Ze,{w:()=>Q});var E=B(9796),O=B(1555),ne=B(9105);const ae=(()=>{function re(Te){return Error.call(this),this.message=Te?`${Te.length} errors occurred during unsubscription:\n${Te.map((ie,me)=>`${me+1}) ${ie.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Te,this}return re.prototype=Object.create(Error.prototype),re})();class Q{constructor(Te){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,Te&&(this._ctorUnsubscribe=!0,this._unsubscribe=Te)}unsubscribe(){let Te;if(this.closed)return;let{_parentOrParents:ie,_ctorUnsubscribe:me,_unsubscribe:Ce,_subscriptions:_e}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,ie instanceof Q)ie.remove(this);else if(null!==ie)for(let De=0;De<ie.length;++De)ie[De].remove(this);if((0,ne.m)(Ce)){me&&(this._unsubscribe=void 0);try{Ce.call(this)}catch(De){Te=De instanceof ae?ve(De.errors):[De]}}if((0,E.k)(_e)){let De=-1,Xe=_e.length;for(;++De<Xe;){const Ee=_e[De];if((0,O.K)(Ee))try{Ee.unsubscribe()}catch(je){Te=Te||[],je instanceof ae?Te=Te.concat(ve(je.errors)):Te.push(je)}}}if(Te)throw new ae(Te)}add(Te){let ie=Te;if(!Te)return Q.EMPTY;switch(typeof Te){case"function":ie=new Q(Te);case"object":if(ie===this||ie.closed||"function"!=typeof ie.unsubscribe)return ie;if(this.closed)return ie.unsubscribe(),ie;if(!(ie instanceof Q)){const _e=ie;ie=new Q,ie._subscriptions=[_e]}break;default:throw new Error("unrecognized teardown "+Te+" added to Subscription.")}let{_parentOrParents:me}=ie;if(null===me)ie._parentOrParents=this;else if(me instanceof Q){if(me===this)return ie;ie._parentOrParents=[me,this]}else{if(-1!==me.indexOf(this))return ie;me.push(this)}const Ce=this._subscriptions;return null===Ce?this._subscriptions=[ie]:Ce.push(ie),ie}remove(Te){const ie=this._subscriptions;if(ie){const me=ie.indexOf(Te);-1!==me&&ie.splice(me,1)}}}var re;function ve(re){return re.reduce((Te,ie)=>Te.concat(ie instanceof ae?ie.errors:ie),[])}Q.EMPTY=((re=new Q).closed=!0,re)},2494:(tn,Ze,B)=>{"use strict";B.d(Ze,{v:()=>O});let E=!1;const O={Promise:void 0,set useDeprecatedSynchronousErrorHandling(ne){if(ne){const oe=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+oe.stack)}else E&&console.log("RxJS: Back to a better error behavior. Thank you. <3");E=ne},get useDeprecatedSynchronousErrorHandling(){return E}}},5345:(tn,Ze,B)=>{"use strict";B.d(Ze,{IY:()=>oe,Ds:()=>Q,ft:()=>re});var E=B(7393),O=B(8891),ne=B(7444);class oe extends E.L{constructor(ie){super(),this.parent=ie}_next(ie){this.parent.notifyNext(ie)}_error(ie){this.parent.notifyError(ie),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Q extends E.L{notifyNext(ie){this.destination.next(ie)}notifyError(ie){this.destination.error(ie)}notifyComplete(){this.destination.complete()}}function re(Te,ie){if(ie.closed)return;if(Te instanceof O.y)return Te.subscribe(ie);let me;try{me=(0,ne.s)(Te)(ie)}catch(Ce){ie.error(Ce)}return me}},2441:(tn,Ze,B)=>{"use strict";B.d(Ze,{c:()=>ae,N:()=>Q});var E=B(9765),O=B(8891),ne=B(5319),oe=B(1307);class ae extends O.y{constructor(me,Ce){super(),this.source=me,this.subjectFactory=Ce,this._refCount=0,this._isComplete=!1}_subscribe(me){return this.getSubject().subscribe(me)}getSubject(){const me=this._subject;return(!me||me.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let me=this._connection;return me||(this._isComplete=!1,me=this._connection=new ne.w,me.add(this.source.subscribe(new ve(this.getSubject(),this))),me.closed&&(this._connection=null,me=ne.w.EMPTY)),me}refCount(){return(0,oe.x)()(this)}}const Q=(()=>{const ie=ae.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:ie._subscribe},_isComplete:{value:ie._isComplete,writable:!0},getSubject:{value:ie.getSubject},connect:{value:ie.connect},refCount:{value:ie.refCount}}})();class ve extends E.Yc{constructor(me,Ce){super(me),this.connectable=Ce}_error(me){this._unsubscribe(),super._error(me)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const me=this.connectable;if(me){this.connectable=null;const Ce=me._connection;me._refCount=0,me._subject=null,me._connection=null,Ce&&Ce.unsubscribe()}}}},8071:(tn,Ze,B)=>{"use strict";B.d(Ze,{z:()=>oe});var E=B(5917),O=B(3282);function oe(...ae){return(0,O.J)(1)((0,E.of)(...ae))}},9193:(tn,Ze,B)=>{"use strict";B.d(Ze,{E:()=>O,c:()=>ne});var E=B(8891);const O=new E.y(ae=>ae.complete());function ne(ae){return ae?function(ae){return new E.y(Q=>ae.schedule(()=>Q.complete()))}(ae):O}},4402:(tn,Ze,B)=>{"use strict";B.d(Ze,{D:()=>Xe});var E=B(8891),O=B(7444),ne=B(5319),oe=B(6554),ve=B(4087),re=B(377),me=B(4072),Ce=B(9489);function Xe(Ee,je){return je?function(Ee,je){if(null!=Ee){if(function(Ee){return Ee&&"function"==typeof Ee[oe.L]}(Ee))return function(Ee,je){return new E.y(Ae=>{const $e=new ne.w;return $e.add(je.schedule(()=>{const Fe=Ee[oe.L]();$e.add(Fe.subscribe({next(Me){$e.add(je.schedule(()=>Ae.next(Me)))},error(Me){$e.add(je.schedule(()=>Ae.error(Me)))},complete(){$e.add(je.schedule(()=>Ae.complete()))}}))})),$e})}(Ee,je);if((0,me.t)(Ee))return function(Ee,je){return new E.y(Ae=>{const $e=new ne.w;return $e.add(je.schedule(()=>Ee.then(Fe=>{$e.add(je.schedule(()=>{Ae.next(Fe),$e.add(je.schedule(()=>Ae.complete()))}))},Fe=>{$e.add(je.schedule(()=>Ae.error(Fe)))}))),$e})}(Ee,je);if((0,Ce.z)(Ee))return(0,ve.r)(Ee,je);if(function(Ee){return Ee&&"function"==typeof Ee[re.hZ]}(Ee)||"string"==typeof Ee)return function(Ee,je){if(!Ee)throw new Error("Iterable cannot be null");return new E.y(Ae=>{const $e=new ne.w;let Fe;return $e.add(()=>{Fe&&"function"==typeof Fe.return&&Fe.return()}),$e.add(je.schedule(()=>{Fe=Ee[re.hZ](),$e.add(je.schedule(function(){if(Ae.closed)return;let Me,Je;try{const ct=Fe.next();Me=ct.value,Je=ct.done}catch(ct){return void Ae.error(ct)}Je?Ae.complete():(Ae.next(Me),this.schedule())}))})),$e})}(Ee,je)}throw new TypeError((null!==Ee&&typeof Ee||Ee)+" is not observable")}(Ee,je):Ee instanceof E.y?Ee:new E.y((0,O.s)(Ee))}},6693:(tn,Ze,B)=>{"use strict";B.d(Ze,{n:()=>oe});var E=B(8891),O=B(5015),ne=B(4087);function oe(ae,Q){return Q?(0,ne.r)(ae,Q):new E.y((0,O.V)(ae))}},6682:(tn,Ze,B)=>{"use strict";B.d(Ze,{T:()=>ae});var E=B(8891),O=B(4869),ne=B(3282),oe=B(6693);function ae(...Q){let ve=Number.POSITIVE_INFINITY,re=null,Te=Q[Q.length-1];return(0,O.K)(Te)?(re=Q.pop(),Q.length>1&&"number"==typeof Q[Q.length-1]&&(ve=Q.pop())):"number"==typeof Te&&(ve=Q.pop()),null===re&&1===Q.length&&Q[0]instanceof E.y?Q[0]:(0,ne.J)(ve)((0,oe.n)(Q,re))}},5917:(tn,Ze,B)=>{"use strict";B.d(Ze,{of:()=>oe});var E=B(4869),O=B(6693),ne=B(4087);function oe(...ae){let Q=ae[ae.length-1];return(0,E.K)(Q)?(ae.pop(),(0,ne.r)(ae,Q)):(0,O.n)(ae)}},5242:(tn,Ze,B)=>{"use strict";B.d(Ze,{d:()=>O});var E=B(7393);function O(ae=null){return Q=>Q.lift(new ne(ae))}class ne{constructor(Q){this.defaultValue=Q}call(Q,ve){return ve.subscribe(new oe(Q,this.defaultValue))}}class oe extends E.L{constructor(Q,ve){super(Q),this.defaultValue=ve,this.isEmpty=!0}_next(Q){this.isEmpty=!1,this.destination.next(Q)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},7519:(tn,Ze,B)=>{"use strict";B.d(Ze,{x:()=>O});var E=B(7393);function O(ae,Q){return ve=>ve.lift(new ne(ae,Q))}class ne{constructor(Q,ve){this.compare=Q,this.keySelector=ve}call(Q,ve){return ve.subscribe(new oe(Q,this.compare,this.keySelector))}}class oe extends E.L{constructor(Q,ve,re){super(Q),this.keySelector=re,this.hasKey=!1,"function"==typeof ve&&(this.compare=ve)}compare(Q,ve){return Q===ve}_next(Q){let ve;try{const{keySelector:Te}=this;ve=Te?Te(Q):Q}catch(Te){return this.destination.error(Te)}let re=!1;if(this.hasKey)try{const{compare:Te}=this;re=Te(this.key,ve)}catch(Te){return this.destination.error(Te)}else this.hasKey=!0;re||(this.key=ve,this.destination.next(Q))}}},5435:(tn,Ze,B)=>{"use strict";B.d(Ze,{h:()=>O});var E=B(7393);function O(ae,Q){return function(re){return re.lift(new ne(ae,Q))}}class ne{constructor(Q,ve){this.predicate=Q,this.thisArg=ve}call(Q,ve){return ve.subscribe(new oe(Q,this.predicate,this.thisArg))}}class oe extends E.L{constructor(Q,ve,re){super(Q),this.predicate=ve,this.thisArg=re,this.count=0}_next(Q){let ve;try{ve=this.predicate.call(this.thisArg,Q,this.count++)}catch(re){return void this.destination.error(re)}ve&&this.destination.next(Q)}}},8049:(tn,Ze,B)=>{"use strict";B.d(Ze,{P:()=>ve});var E=B(3410),O=B(5435),ne=B(5257),oe=B(5242),ae=B(4635),Q=B(4487);function ve(re,Te){const ie=arguments.length>=2;return me=>me.pipe(re?(0,O.h)((Ce,_e)=>re(Ce,_e,me)):Q.y,(0,ne.q)(1),ie?(0,oe.d)(Te):(0,ae.T)(()=>new E.K))}},8002:(tn,Ze,B)=>{"use strict";B.d(Ze,{U:()=>O});var E=B(7393);function O(ae,Q){return function(re){if("function"!=typeof ae)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return re.lift(new ne(ae,Q))}}class ne{constructor(Q,ve){this.project=Q,this.thisArg=ve}call(Q,ve){return ve.subscribe(new oe(Q,this.project,this.thisArg))}}class oe extends E.L{constructor(Q,ve,re){super(Q),this.project=ve,this.count=0,this.thisArg=re||this}_next(Q){let ve;try{ve=this.project.call(this.thisArg,Q,this.count++)}catch(re){return void this.destination.error(re)}this.destination.next(ve)}}},3282:(tn,Ze,B)=>{"use strict";B.d(Ze,{J:()=>ne});var E=B(9773),O=B(4487);function ne(oe=Number.POSITIVE_INFINITY){return(0,E.zg)(O.y,oe)}},9773:(tn,Ze,B)=>{"use strict";B.d(Ze,{zg:()=>oe});var E=B(8002),O=B(4402),ne=B(5345);function oe(re,Te,ie=Number.POSITIVE_INFINITY){return"function"==typeof Te?me=>me.pipe(oe((Ce,_e)=>(0,O.D)(re(Ce,_e)).pipe((0,E.U)((De,Xe)=>Te(Ce,De,_e,Xe))),ie)):("number"==typeof Te&&(ie=Te),me=>me.lift(new ae(re,ie)))}class ae{constructor(Te,ie=Number.POSITIVE_INFINITY){this.project=Te,this.concurrent=ie}call(Te,ie){return ie.subscribe(new Q(Te,this.project,this.concurrent))}}class Q extends ne.Ds{constructor(Te,ie,me=Number.POSITIVE_INFINITY){super(Te),this.project=ie,this.concurrent=me,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(Te){this.active<this.concurrent?this._tryNext(Te):this.buffer.push(Te)}_tryNext(Te){let ie;const me=this.index++;try{ie=this.project(Te,me)}catch(Ce){return void this.destination.error(Ce)}this.active++,this._innerSub(ie)}_innerSub(Te){const ie=new ne.IY(this),me=this.destination;me.add(ie);const Ce=(0,ne.ft)(Te,ie);Ce!==ie&&me.add(Ce)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(Te){this.destination.next(Te)}notifyComplete(){const Te=this.buffer;this.active--,Te.length>0?this._next(Te.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(tn,Ze,B)=>{"use strict";B.d(Ze,{ht:()=>me,QV:()=>Te});var E=B(7393),O=B(9193),ne=B(5917),oe=B(8891);class re{constructor(De,Xe,Ee){this.kind=De,this.value=Xe,this.error=Ee,this.hasValue="N"===De}observe(De){switch(this.kind){case"N":return De.next&&De.next(this.value);case"E":return De.error&&De.error(this.error);case"C":return De.complete&&De.complete()}}do(De,Xe,Ee){switch(this.kind){case"N":return De&&De(this.value);case"E":return Xe&&Xe(this.error);case"C":return Ee&&Ee()}}accept(De,Xe,Ee){return De&&"function"==typeof De.next?this.observe(De):this.do(De,Xe,Ee)}toObservable(){switch(this.kind){case"N":return(0,ne.of)(this.value);case"E":return _e=this.error,new oe.y(Xe=>Xe.error(_e));case"C":return(0,O.c)()}var _e;throw new Error("unexpected notification kind value")}static createNext(De){return void 0!==De?new re("N",De):re.undefinedValueNotification}static createError(De){return new re("E",void 0,De)}static createComplete(){return re.completeNotification}}function Te(_e,De=0){return function(Ee){return Ee.lift(new ie(_e,De))}}re.completeNotification=new re("C"),re.undefinedValueNotification=new re("N",void 0);class ie{constructor(De,Xe=0){this.scheduler=De,this.delay=Xe}call(De,Xe){return Xe.subscribe(new me(De,this.scheduler,this.delay))}}class me extends E.L{constructor(De,Xe,Ee=0){super(De),this.scheduler=Xe,this.delay=Ee}static dispatch(De){const{notification:Xe,destination:Ee}=De;Xe.observe(Ee),this.unsubscribe()}scheduleMessage(De){this.destination.add(this.scheduler.schedule(me.dispatch,this.delay,new Ce(De,this.destination)))}_next(De){this.scheduleMessage(re.createNext(De))}_error(De){this.scheduleMessage(re.createError(De)),this.unsubscribe()}_complete(){this.scheduleMessage(re.createComplete()),this.unsubscribe()}}class Ce{constructor(De,Xe){this.notification=De,this.destination=Xe}}},1307:(tn,Ze,B)=>{"use strict";B.d(Ze,{x:()=>O});var E=B(7393);function O(){return function(Q){return Q.lift(new ne(Q))}}class ne{constructor(Q){this.connectable=Q}call(Q,ve){const{connectable:re}=this;re._refCount++;const Te=new oe(Q,re),ie=ve.subscribe(Te);return Te.closed||(Te.connection=re.connect()),ie}}class oe extends E.L{constructor(Q,ve){super(Q),this.connectable=ve}_unsubscribe(){const{connectable:Q}=this;if(!Q)return void(this.connection=null);this.connectable=null;const ve=Q._refCount;if(ve<=0)return void(this.connection=null);if(Q._refCount=ve-1,ve>1)return void(this.connection=null);const{connection:re}=this,Te=Q._connection;this.connection=null,Te&&(!re||Te===re)&&Te.unsubscribe()}}},2145:(tn,Ze,B)=>{"use strict";B.d(Ze,{R:()=>O});var E=B(7393);function O(ae,Q){let ve=!1;return arguments.length>=2&&(ve=!0),function(Te){return Te.lift(new ne(ae,Q,ve))}}class ne{constructor(Q,ve,re=!1){this.accumulator=Q,this.seed=ve,this.hasSeed=re}call(Q,ve){return ve.subscribe(new oe(Q,this.accumulator,this.seed,this.hasSeed))}}class oe extends E.L{constructor(Q,ve,re,Te){super(Q),this.accumulator=ve,this._seed=re,this.hasSeed=Te,this.index=0}get seed(){return this._seed}set seed(Q){this.hasSeed=!0,this._seed=Q}_next(Q){if(this.hasSeed)return this._tryNext(Q);this.seed=Q,this.destination.next(Q)}_tryNext(Q){const ve=this.index++;let re;try{re=this.accumulator(this.seed,Q,ve)}catch(Te){this.destination.error(Te)}this.seed=re,this.destination.next(re)}}},8819:(tn,Ze,B)=>{"use strict";B.d(Ze,{B:()=>ve});var E=B(2441);var oe=B(1307),ae=B(9765);function Q(){return new ae.xQ}function ve(){return re=>(0,oe.x)()(function(re,Te){return function(me){let Ce;Ce="function"==typeof re?re:function(){return re};const _e=Object.create(me,E.N);return _e.source=me,_e.subjectFactory=Ce,_e}}(Q)(re))}},9761:(tn,Ze,B)=>{"use strict";B.d(Ze,{O:()=>ne});var E=B(8071),O=B(4869);function ne(...oe){const ae=oe[oe.length-1];return(0,O.K)(ae)?(oe.pop(),Q=>(0,E.z)(oe,Q,ae)):Q=>(0,E.z)(oe,Q)}},3101:(tn,Ze,B)=>{"use strict";B.d(Ze,{R:()=>je});var E=B(8891);let O=1;const ne=Promise.resolve(),oe={};function ae($e){return $e in oe&&(delete oe[$e],!0)}const Q={setImmediate($e){const Fe=O++;return oe[Fe]=!0,ne.then(()=>ae(Fe)&&$e()),Fe},clearImmediate($e){ae($e)}};var re=B(6465),ie=B(6102);const _e=new class extends ie.v{flush(Fe){this.active=!0,this.scheduled=void 0;const{actions:Me}=this;let Je,ct=-1,jt=Me.length;Fe=Fe||Me.shift();do{if(Je=Fe.execute(Fe.state,Fe.delay))break}while(++ct<jt&&(Fe=Me.shift()));if(this.active=!1,Je){for(;++ct<jt&&(Fe=Me.shift());)Fe.unsubscribe();throw Je}}}(class extends re.o{constructor(Fe,Me){super(Fe,Me),this.scheduler=Fe,this.work=Me}requestAsyncId(Fe,Me,Je=0){return null!==Je&&Je>0?super.requestAsyncId(Fe,Me,Je):(Fe.actions.push(this),Fe.scheduled||(Fe.scheduled=Q.setImmediate(Fe.flush.bind(Fe,null))))}recycleAsyncId(Fe,Me,Je=0){if(null!==Je&&Je>0||null===Je&&this.delay>0)return super.recycleAsyncId(Fe,Me,Je);0===Fe.actions.length&&(Q.clearImmediate(Me),Fe.scheduled=void 0)}});var De=B(9796);class Ee extends E.y{constructor(Fe,Me=0,Je=_e){var $e;super(),this.source=Fe,this.delayTime=Me,this.scheduler=Je,(!(!(0,De.k)($e=Me)&&$e-parseFloat($e)+1>=0)||Me<0)&&(this.delayTime=0),(!Je||"function"!=typeof Je.schedule)&&(this.scheduler=_e)}static create(Fe,Me=0,Je=_e){return new Ee(Fe,Me,Je)}static dispatch(Fe){const{source:Me,subscriber:Je}=Fe;return this.add(Me.subscribe(Je))}_subscribe(Fe){return this.scheduler.schedule(Ee.dispatch,this.delayTime,{source:this.source,subscriber:Fe})}}function je($e,Fe=0){return function(Je){return Je.lift(new Ae($e,Fe))}}class Ae{constructor(Fe,Me){this.scheduler=Fe,this.delay=Me}call(Fe,Me){return new Ee(Me,this.delay,this.scheduler).subscribe(Fe)}}},3190:(tn,Ze,B)=>{"use strict";B.d(Ze,{w:()=>oe});var E=B(8002),O=B(4402),ne=B(5345);function oe(ve,re){return"function"==typeof re?Te=>Te.pipe(oe((ie,me)=>(0,O.D)(ve(ie,me)).pipe((0,E.U)((Ce,_e)=>re(ie,Ce,me,_e))))):Te=>Te.lift(new ae(ve))}class ae{constructor(re){this.project=re}call(re,Te){return Te.subscribe(new Q(re,this.project))}}class Q extends ne.Ds{constructor(re,Te){super(re),this.project=Te,this.index=0}_next(re){let Te;const ie=this.index++;try{Te=this.project(re,ie)}catch(me){return void this.destination.error(me)}this._innerSub(Te)}_innerSub(re){const Te=this.innerSubscription;Te&&Te.unsubscribe();const ie=new ne.IY(this),me=this.destination;me.add(ie),this.innerSubscription=(0,ne.ft)(re,ie),this.innerSubscription!==ie&&me.add(this.innerSubscription)}_complete(){const{innerSubscription:re}=this;(!re||re.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(re){this.destination.next(re)}}},5257:(tn,Ze,B)=>{"use strict";B.d(Ze,{q:()=>oe});var E=B(7393),O=B(7108),ne=B(9193);function oe(ve){return re=>0===ve?(0,ne.c)():re.lift(new ae(ve))}class ae{constructor(re){if(this.total=re,this.total<0)throw new O.W}call(re,Te){return Te.subscribe(new Q(re,this.total))}}class Q extends E.L{constructor(re,Te){super(re),this.total=Te,this.count=0}_next(re){const Te=this.total,ie=++this.count;ie<=Te&&(this.destination.next(re),ie===Te&&(this.destination.complete(),this.unsubscribe()))}}},3342:(tn,Ze,B)=>{"use strict";B.d(Ze,{b:()=>oe});var E=B(7393);function O(){}var ne=B(9105);function oe(ve,re,Te){return function(me){return me.lift(new ae(ve,re,Te))}}class ae{constructor(re,Te,ie){this.nextOrObserver=re,this.error=Te,this.complete=ie}call(re,Te){return Te.subscribe(new Q(re,this.nextOrObserver,this.error,this.complete))}}class Q extends E.L{constructor(re,Te,ie,me){super(re),this._tapNext=O,this._tapError=O,this._tapComplete=O,this._tapError=ie||O,this._tapComplete=me||O,(0,ne.m)(Te)?(this._context=this,this._tapNext=Te):Te&&(this._context=Te,this._tapNext=Te.next||O,this._tapError=Te.error||O,this._tapComplete=Te.complete||O)}_next(re){try{this._tapNext.call(this._context,re)}catch(Te){return void this.destination.error(Te)}this.destination.next(re)}_error(re){try{this._tapError.call(this._context,re)}catch(Te){return void this.destination.error(Te)}this.destination.error(re)}_complete(){try{this._tapComplete.call(this._context)}catch(re){return void this.destination.error(re)}return this.destination.complete()}}},4635:(tn,Ze,B)=>{"use strict";B.d(Ze,{T:()=>ne});var E=B(3410),O=B(7393);function ne(ve=Q){return re=>re.lift(new oe(ve))}class oe{constructor(re){this.errorFactory=re}call(re,Te){return Te.subscribe(new ae(re,this.errorFactory))}}class ae extends O.L{constructor(re,Te){super(re),this.errorFactory=Te,this.hasValue=!1}_next(re){this.hasValue=!0,this.destination.next(re)}_complete(){if(this.hasValue)return this.destination.complete();{let re;try{re=this.errorFactory()}catch(Te){re=Te}this.destination.error(re)}}}function Q(){return new E.K}},4087:(tn,Ze,B)=>{"use strict";B.d(Ze,{r:()=>ne});var E=B(8891),O=B(5319);function ne(oe,ae){return new E.y(Q=>{const ve=new O.w;let re=0;return ve.add(ae.schedule(function(){re!==oe.length?(Q.next(oe[re++]),Q.closed||ve.add(this.schedule())):Q.complete()})),ve})}},6465:(tn,Ze,B)=>{"use strict";B.d(Ze,{o:()=>ne});var E=B(5319);class O extends E.w{constructor(ae,Q){super()}schedule(ae,Q=0){return this}}class ne extends O{constructor(ae,Q){super(ae,Q),this.scheduler=ae,this.work=Q,this.pending=!1}schedule(ae,Q=0){if(this.closed)return this;this.state=ae;const ve=this.id,re=this.scheduler;return null!=ve&&(this.id=this.recycleAsyncId(re,ve,Q)),this.pending=!0,this.delay=Q,this.id=this.id||this.requestAsyncId(re,this.id,Q),this}requestAsyncId(ae,Q,ve=0){return setInterval(ae.flush.bind(ae,this),ve)}recycleAsyncId(ae,Q,ve=0){if(null!==ve&&this.delay===ve&&!1===this.pending)return Q;clearInterval(Q)}execute(ae,Q){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(ae,Q);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ae,Q){let re,ve=!1;try{this.work(ae)}catch(Te){ve=!0,re=!!Te&&Te||new Error(Te)}if(ve)return this.unsubscribe(),re}_unsubscribe(){const ae=this.id,Q=this.scheduler,ve=Q.actions,re=ve.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==re&&ve.splice(re,1),null!=ae&&(this.id=this.recycleAsyncId(Q,ae,null)),this.delay=null}}},6102:(tn,Ze,B)=>{"use strict";B.d(Ze,{v:()=>O});let E=(()=>{class ne{constructor(ae,Q=ne.now){this.SchedulerAction=ae,this.now=Q}schedule(ae,Q=0,ve){return new this.SchedulerAction(this,ae).schedule(ve,Q)}}return ne.now=()=>Date.now(),ne})();class O extends E{constructor(oe,ae=E.now){super(oe,()=>O.delegate&&O.delegate!==this?O.delegate.now():ae()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(oe,ae=0,Q){return O.delegate&&O.delegate!==this?O.delegate.schedule(oe,ae,Q):super.schedule(oe,ae,Q)}flush(oe){const{actions:ae}=this;if(this.active)return void ae.push(oe);let Q;this.active=!0;do{if(Q=oe.execute(oe.state,oe.delay))break}while(oe=ae.shift());if(this.active=!1,Q){for(;oe=ae.shift();)oe.unsubscribe();throw Q}}}},3637:(tn,Ze,B)=>{"use strict";B.d(Ze,{z:()=>ne});var E=B(6465);const ne=new(B(6102).v)(E.o)},7771:(tn,Ze,B)=>{"use strict";B.d(Ze,{c:()=>Q,N:()=>ae});var E=B(6465),ne=B(6102);const ae=new class extends ne.v{}(class extends E.o{constructor(re,Te){super(re,Te),this.scheduler=re,this.work=Te}schedule(re,Te=0){return Te>0?super.schedule(re,Te):(this.delay=Te,this.state=re,this.scheduler.flush(this),this)}execute(re,Te){return Te>0||this.closed?super.execute(re,Te):this._execute(re,Te)}requestAsyncId(re,Te,ie=0){return null!==ie&&ie>0||null===ie&&this.delay>0?super.requestAsyncId(re,Te,ie):re.flush(this)}}),Q=ae},377:(tn,Ze,B)=>{"use strict";B.d(Ze,{hZ:()=>O});const O="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(tn,Ze,B)=>{"use strict";B.d(Ze,{L:()=>E});const E="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(tn,Ze,B)=>{"use strict";B.d(Ze,{b:()=>E});const E="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7108:(tn,Ze,B)=>{"use strict";B.d(Ze,{W:()=>O});const O=(()=>{function ne(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return ne.prototype=Object.create(Error.prototype),ne})()},3410:(tn,Ze,B)=>{"use strict";B.d(Ze,{K:()=>O});const O=(()=>{function ne(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return ne.prototype=Object.create(Error.prototype),ne})()},7971:(tn,Ze,B)=>{"use strict";B.d(Ze,{N:()=>O});const O=(()=>{function ne(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return ne.prototype=Object.create(Error.prototype),ne})()},4449:(tn,Ze,B)=>{"use strict";function E(O){setTimeout(()=>{throw O},0)}B.d(Ze,{z:()=>E})},4487:(tn,Ze,B)=>{"use strict";function E(O){return O}B.d(Ze,{y:()=>E})},9796:(tn,Ze,B)=>{"use strict";B.d(Ze,{k:()=>E});const E=Array.isArray||(O=>O&&"number"==typeof O.length)},9489:(tn,Ze,B)=>{"use strict";B.d(Ze,{z:()=>E});const E=O=>O&&"number"==typeof O.length&&"function"!=typeof O},9105:(tn,Ze,B)=>{"use strict";function E(O){return"function"==typeof O}B.d(Ze,{m:()=>E})},1555:(tn,Ze,B)=>{"use strict";function E(O){return null!==O&&"object"==typeof O}B.d(Ze,{K:()=>E})},4072:(tn,Ze,B)=>{"use strict";function E(O){return!!O&&"function"!=typeof O.subscribe&&"function"==typeof O.then}B.d(Ze,{t:()=>E})},4869:(tn,Ze,B)=>{"use strict";function E(O){return O&&"function"==typeof O.schedule}B.d(Ze,{K:()=>E})},4022:(tn,Ze,B)=>{"use strict";B.d(Ze,{z:()=>O,U:()=>ne});var E=B(4487);function O(...oe){return ne(oe)}function ne(oe){return 0===oe.length?E.y:1===oe.length?oe[0]:function(Q){return oe.reduce((ve,re)=>re(ve),Q)}}},7444:(tn,Ze,B)=>{"use strict";B.d(Ze,{s:()=>me});var E=B(5015),O=B(4449),oe=B(377),Q=B(6554),re=B(9489),Te=B(4072),ie=B(1555);const me=Ce=>{if(Ce&&"function"==typeof Ce[Q.L])return(Ce=>_e=>{const De=Ce[Q.L]();if("function"!=typeof De.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return De.subscribe(_e)})(Ce);if((0,re.z)(Ce))return(0,E.V)(Ce);if((0,Te.t)(Ce))return(Ce=>_e=>(Ce.then(De=>{_e.closed||(_e.next(De),_e.complete())},De=>_e.error(De)).then(null,O.z),_e))(Ce);if(Ce&&"function"==typeof Ce[oe.hZ])return(Ce=>_e=>{const De=Ce[oe.hZ]();for(;;){let Xe;try{Xe=De.next()}catch(Ee){return _e.error(Ee),_e}if(Xe.done){_e.complete();break}if(_e.next(Xe.value),_e.closed)break}return"function"==typeof De.return&&_e.add(()=>{De.return&&De.return()}),_e})(Ce);{const De=`You provided ${(0,ie.K)(Ce)?"an invalid object":`'${Ce}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(De)}}},5015:(tn,Ze,B)=>{"use strict";B.d(Ze,{V:()=>E});const E=O=>ne=>{for(let oe=0,ae=O.length;oe<ae&&!ne.closed;oe++)ne.next(O[oe]);ne.complete()}},509:(tn,Ze,B)=>{"use strict";B.d(Ze,{D:()=>ae});var E=B(7393);class O extends E.L{constructor(ve,re,Te){super(),this.parent=ve,this.outerValue=re,this.outerIndex=Te,this.index=0}_next(ve){this.parent.notifyNext(this.outerValue,ve,this.outerIndex,this.index++,this)}_error(ve){this.parent.notifyError(ve,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var ne=B(7444),oe=B(8891);function ae(Q,ve,re,Te,ie=new O(Q,re,Te)){if(!ie.closed)return ve instanceof oe.y?ve.subscribe(ie):(0,ne.s)(ve)(ie)}},4427:(tn,Ze,B)=>{"use strict";B.r(Ze),B.d(Ze,{HomeModule:()=>Xe});var E=B(8583),O=B(8945),ne=B(174),oe=B(7716),ae=B(3792),Q=B(7556),ve=B(3071);let re=(()=>{class Ee{constructor(){}ngOnInit(){}getTimeStamp(){if(null==this.comment.createdTime)return"Saving...";let Ae=this.comment.createdTime.seconds,$e="";this.comment.updatedTime&&($e="Edited ",Ae=this.comment.updatedTime.seconds);const Fe=new Date(1e3*Ae),Me=Fe.getDate(),Je=Fe.getMonth();return`${$e}${Fe.getFullYear()}-${Me}-${Je+1} ${Fe.getHours()}:${Fe.getMinutes()}`}}return Ee.\u0275fac=function(Ae){return new(Ae||Ee)},Ee.\u0275cmp=oe.Xpm({type:Ee,selectors:[["app-comment"]],inputs:{comment:"comment",commentId:"commentId"},decls:4,vars:2,consts:[[1,"comment-item"],[1,"timestamp"]],template:function(Ae,$e){1&Ae&&(oe.TgZ(0,"div",0),oe._uU(1),oe.TgZ(2,"p",1),oe._uU(3),oe.qZA(),oe.qZA()),2&Ae&&(oe.xp6(1),oe.hij(" ",$e.comment.content," "),oe.xp6(2),oe.Oqu($e.getTimeStamp()))},styles:[".comment-item[_ngcontent-%COMP%]{width:100%;background:#f1f1f1;padding:1rem 1em .5em;font-size:.75em;border-radius:14px;white-space:pre-wrap}.comment-item[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%]{font-size:.75em;text-align:right;padding:0;margin:.5rem 0}"]}),Ee})();function Te(Ee,je){if(1&Ee){const Ae=oe.EpF();oe.TgZ(0,"ion-list",19,20),oe.TgZ(2,"ion-item-sliding"),oe.TgZ(3,"ion-item",19),oe._UZ(4,"app-comment",21),oe.qZA(),oe.TgZ(5,"ion-item-options",22),oe.TgZ(6,"ion-item-option",23),oe.NdJ("click",function(){const Me=oe.CHM(Ae).$implicit;return oe.oxw().editComment(Me)}),oe._UZ(7,"ion-icon",24),oe.qZA(),oe.qZA(),oe.qZA(),oe.qZA()}if(2&Ee){const Ae=je.$implicit;oe.xp6(4),oe.Q6J("commentId",Ae.id)("comment",Ae)}}function ie(Ee,je){if(1&Ee){const Ae=oe.EpF();oe.TgZ(0,"ion-button",25),oe.NdJ("click",function(){return oe.CHM(Ae),oe.oxw().saveComment()}),oe._UZ(1,"ion-icon",26),oe.qZA()}}function me(Ee,je){if(1&Ee){const Ae=oe.EpF();oe.TgZ(0,"div",27),oe.TgZ(1,"ion-button",28),oe.NdJ("click",function(){return oe.CHM(Ae),oe.oxw().saveComment()}),oe._uU(2," Save "),oe.qZA(),oe.TgZ(3,"ion-button",28),oe.NdJ("click",function(){return oe.CHM(Ae),oe.oxw().cancelEdit()}),oe._uU(4," Cancel "),oe.qZA(),oe.qZA()}}const _e=[{path:"",component:(()=>{class Ee{constructor(Ae,$e,Fe,Me){this.cmtSvc=Ae,this.auth=$e,this.userSvc=Fe,this.router=Me,this.showEditButtons=!1}ngOnInit(){this.user=this.userSvc.getUserDataFromLocalStorage(),this.user.displayName||(this.user.displayName=this.userSvc.getUserInfo(this.user.id)),this.cmtSvc.getComments(this.user.id).subscribe(Ae=>{console.log(Ae),this.comments=Ae}),console.log(this.commentId)}logout(){this.auth.logout().then(()=>{this.router.navigateByUrl("/login",{replaceUrl:!0})})}saveComment(){if(null!==this.commentText&&""!==this.commentText){const Ae={content:this.commentText};this.commentId&&null!==this.commentText?this.cmtSvc.updateComment(this.user.id,this.commentId,Ae):this.cmtSvc.addComment(this.user.id,Ae),this.commentText="",this.commentId=null,this.showEditButtons=!1}}handleChange(Ae){this.commentText=Ae.target.innerHTML,console.log(Ae.target.innerHTML)}editComment(Ae){this.commentId=Ae.id,this.commentText=Ae.content,this.showEditButtons=!0,this.slidingList.closeSlidingItems()}cancelEdit(){this.commentId=null,this.commentText="",this.showEditButtons=!1}}return Ee.\u0275fac=function(Ae){return new(Ae||Ee)(oe.Y36(ae.O),oe.Y36(Q.e),oe.Y36(ve.K),oe.Y36(ne.F0))},Ee.\u0275cmp=oe.Xpm({type:Ee,selectors:[["app-home"]],viewQuery:function(Ae,$e){if(1&Ae&&oe.Gf(O.q_,5),2&Ae){let Fe;oe.iGM(Fe=oe.CRH())&&($e.slidingList=Fe.first)}},decls:32,vars:7,consts:[["color","primary"],["slot","start"],["name","person-circle-outline","size","large"],["side","start","menuId","first","contentId","main"],[1,"nav-content"],[1,"user-container"],[1,"avatar"],["name","person-circle-outline",1,"avatar-alt"],[1,"user-info"],[1,"display-name"],[1,"email"],["color","danger",3,"click"],["id","main",3,"fullscreen"],["lines","none",4,"ngFor","ngForOf"],[1,"form-container"],[1,"form-row"],["placeholder","Enter more information here...",3,"value","change"],["shape","circle",3,"click",4,"ngIf"],["class","edit-btn-container",4,"ngIf"],["lines","none"],["slidingList",""],[3,"commentId","comment"],["side","end"],[3,"click"],["slot","icon-only","name","pencil-outline"],["shape","circle",3,"click"],["name","add-outline","size","large"],[1,"edit-btn-container"],["size","small",3,"click"]],template:function(Ae,$e){1&Ae&&(oe.TgZ(0,"ion-header"),oe.TgZ(1,"ion-toolbar",0),oe.TgZ(2,"ion-buttons",1),oe.TgZ(3,"ion-menu-button"),oe._UZ(4,"ion-icon",2),oe.qZA(),oe.qZA(),oe.TgZ(5,"ion-title"),oe._uU(6,"TrailApp"),oe.qZA(),oe.qZA(),oe.qZA(),oe.TgZ(7,"ion-menu",3),oe.TgZ(8,"ion-header"),oe.TgZ(9,"ion-toolbar",0),oe.TgZ(10,"ion-title"),oe._uU(11,"User Information"),oe.qZA(),oe.qZA(),oe.qZA(),oe.TgZ(12,"ion-content"),oe.TgZ(13,"div",4),oe.TgZ(14,"div",5),oe.TgZ(15,"div",6),oe._UZ(16,"ion-icon",7),oe.qZA(),oe.TgZ(17,"div",8),oe.TgZ(18,"div",9),oe._uU(19),oe.qZA(),oe.TgZ(20,"div",10),oe._uU(21),oe.qZA(),oe.qZA(),oe.qZA(),oe.TgZ(22,"ion-button",11),oe.NdJ("click",function(){return $e.logout()}),oe._uU(23,"Logout"),oe.qZA(),oe.qZA(),oe.qZA(),oe.qZA(),oe.TgZ(24,"ion-content",12),oe.YNc(25,Te,8,2,"ion-list",13),oe.TgZ(26,"div",14),oe.TgZ(27,"form"),oe.TgZ(28,"div",15),oe.TgZ(29,"ion-textarea",16),oe.NdJ("change",function(Me){return $e.handleChange(Me)}),oe.qZA(),oe.YNc(30,ie,2,0,"ion-button",17),oe.YNc(31,me,5,0,"div",18),oe.qZA(),oe.qZA(),oe.qZA(),oe.qZA()),2&Ae&&(oe.xp6(19),oe.Oqu($e.user.displayName),oe.xp6(2),oe.Oqu($e.user.email),oe.xp6(3),oe.Q6J("fullscreen",!0),oe.xp6(1),oe.Q6J("ngForOf",$e.comments),oe.xp6(4),oe.s9C("value",$e.commentText),oe.xp6(1),oe.Q6J("ngIf",!$e.showEditButtons),oe.xp6(1),oe.Q6J("ngIf",$e.showEditButtons))},directives:[O.Gu,O.sr,O.Sm,O.fG,O.gu,O.wd,O.z0,O.W2,O.YG,E.sg,O.g2,O.j9,E.O5,O.q_,O.td,O.Ie,re,O.IK,O.u8],styles:[".nav-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:calc(100vh - 60px);align-items:center}.nav-content[_ngcontent-%COMP%]   .user-container[_ngcontent-%COMP%]{padding:3rem 1rem;text-align:center}.nav-content[_ngcontent-%COMP%]   .user-container[_ngcontent-%COMP%]   .avatar-alt[_ngcontent-%COMP%]{font-size:5em}.nav-content[_ngcontent-%COMP%]   .user-container[_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%]{font-weight:500;font-size:1.5em}.nav-content[_ngcontent-%COMP%]   .user-container[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{color:var(--ion-color-secondary)}.nav-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:75%;margin-bottom:3rem}.form-row[_ngcontent-%COMP%]{position:fixed;display:flex;padding:1.5em 1em;align-items:center;width:100%;bottom:0;background-color:#fff}.form-row[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-weight:500}ion-button[shape=circle][_ngcontent-%COMP%]{--border-radius: 50%;width:56px;height:56px}app-comment[_ngcontent-%COMP%]{width:100%}ion-list[_ngcontent-%COMP%]{margin-top:1em}.edit-btn-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),Ee})()}];let De=(()=>{class Ee{}return Ee.\u0275fac=function(Ae){return new(Ae||Ee)},Ee.\u0275mod=oe.oAB({type:Ee}),Ee.\u0275inj=oe.cJS({imports:[[ne.Bz.forChild(_e)],ne.Bz]}),Ee})(),Xe=(()=>{class Ee{}return Ee.\u0275fac=function(Ae){return new(Ae||Ee)},Ee.\u0275mod=oe.oAB({type:Ee}),Ee.\u0275inj=oe.cJS({imports:[[E.ez,O.Pc,De]]}),Ee})()},7545:(tn,Ze,B)=>{"use strict";B.r(Ze),B.d(Ze,{LoginModule:()=>Ae});var E=B(8583),O=B(8945),ne=B(665),oe=B(174),ae=B(8239),Q=B(7716),ve=B(7556);function re($e,Fe){1&$e&&(Q.TgZ(0,"ion-note",10),Q._uU(1,"Email is invalid"),Q.qZA())}function Te($e,Fe){1&$e&&(Q.TgZ(0,"ion-note",10),Q._uU(1,"Password needs to be 6 characters"),Q.qZA())}function ie($e,Fe){if(1&$e){const Me=Q.EpF();Q.TgZ(0,"form",3),Q.NdJ("ngSubmit",function(){return Q.CHM(Me),Q.oxw().login()}),Q.TgZ(1,"ion-item",4),Q._UZ(2,"ion-input",5),Q.YNc(3,re,2,0,"ion-note",6),Q.qZA(),Q.TgZ(4,"ion-item",4),Q._UZ(5,"ion-input",7),Q.YNc(6,Te,2,0,"ion-note",6),Q.qZA(),Q.TgZ(7,"ion-button",8),Q._uU(8," Log in "),Q.qZA(),Q.TgZ(9,"ion-button",9),Q.NdJ("click",function(){return Q.CHM(Me),Q.oxw().createUser()}),Q._uU(10,"Create account "),Q.qZA(),Q.qZA()}if(2&$e){const Me=Q.oxw();Q.Q6J("formGroup",Me.credentials),Q.xp6(3),Q.Q6J("ngIf",(Me.email.dirty||Me.email.touched)&&Me.email.errors),Q.xp6(3),Q.Q6J("ngIf",(Me.password.dirty||Me.password.touched)&&Me.password.errors)}}function me($e,Fe){1&$e&&(Q.TgZ(0,"ion-note",10),Q._uU(1,"Name is required"),Q.qZA())}function Ce($e,Fe){1&$e&&(Q.TgZ(0,"ion-note",10),Q._uU(1,"Email is invalid"),Q.qZA())}function _e($e,Fe){1&$e&&(Q.TgZ(0,"ion-note",10),Q._uU(1,"Password needs to be 6 characters"),Q.qZA())}function De($e,Fe){if(1&$e){const Me=Q.EpF();Q.TgZ(0,"form",3),Q.NdJ("ngSubmit",function(){return Q.CHM(Me),Q.oxw().register()}),Q.TgZ(1,"ion-item",4),Q._UZ(2,"ion-input",11),Q.YNc(3,me,2,0,"ion-note",6),Q.qZA(),Q.TgZ(4,"ion-item",4),Q._UZ(5,"ion-input",5),Q.YNc(6,Ce,2,0,"ion-note",6),Q.qZA(),Q.TgZ(7,"ion-item",4),Q._UZ(8,"ion-input",7),Q.YNc(9,_e,2,0,"ion-note",6),Q.qZA(),Q.TgZ(10,"ion-button",8),Q._uU(11," Register "),Q.qZA(),Q.TgZ(12,"ion-button",12),Q.NdJ("click",function(){return Q.CHM(Me),Q.oxw().cancelRegister()}),Q._uU(13," Cancel "),Q.qZA(),Q.qZA()}if(2&$e){const Me=Q.oxw();Q.Q6J("formGroup",Me.userRegistration),Q.xp6(3),Q.Q6J("ngIf",(Me.name.dirty||Me.name.touched)&&Me.name.errors),Q.xp6(3),Q.Q6J("ngIf",(Me.email.dirty||Me.email.touched)&&Me.email.errors),Q.xp6(3),Q.Q6J("ngIf",(Me.password.dirty||Me.password.touched)&&Me.password.errors)}}const Ee=[{path:"",component:(()=>{class $e{constructor(Me,Je,ct,jt,I){this.fb=Me,this.loadingController=Je,this.alertController=ct,this.authService=jt,this.router=I,this.showRegister=!1}ngOnInit(){this.credentials=this.fb.group({email:["",[ne.kI.required,ne.kI.email]],password:["",[ne.kI.required,ne.kI.minLength(6)]]}),this.userRegistration=this.fb.group({name:["",[ne.kI.required]],email:["",[ne.kI.required,ne.kI.email]],password:["",[ne.kI.required,ne.kI.minLength(6)]]})}get email(){return this.credentials.get("email")}get password(){return this.credentials.get("password")}get regEmail(){return this.userRegistration.get("email")}get regPassword(){return this.userRegistration.get("password")}get name(){return this.userRegistration.get("name")}login(){var Me=this;return(0,ae.Z)(function*(){const Je=yield Me.loadingController.create();yield Je.present();const ct=yield Me.authService.login(Me.credentials.value);yield Je.dismiss(),ct?Me.router.navigateByUrl("/home",{replaceUrl:!0}):Me.showAlert("Login failed","Please try again!")})()}register(){var Me=this;return(0,ae.Z)(function*(){const Je=yield Me.loadingController.create();yield Je.present();const ct=yield Me.authService.register(Me.userRegistration.value);yield Je.dismiss(),ct?Me.router.navigateByUrl("/home",{replaceUrl:!0}):Me.showAlert("Registration failed","Please try again!")})()}createUser(){this.showRegister=!0}showAlert(Me,Je){var ct=this;return(0,ae.Z)(function*(){yield(yield ct.alertController.create({header:Me,message:Je,buttons:["OK"]})).present()})()}cancelRegister(){this.userRegistration.reset(),this.showRegister=!1}}return $e.\u0275fac=function(Me){return new(Me||$e)(Q.Y36(ne.qu),Q.Y36(O.HT),Q.Y36(O.Br),Q.Y36(ve.e),Q.Y36(oe.F0))},$e.\u0275cmp=Q.Xpm({type:$e,selectors:[["app-login"]],decls:7,vars:2,consts:[["color","primary"],[1,"ion-padding"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],["fill","solid",1,"ion-margin-bottom"],["type","email","placeholder","Email","formControlName","email"],["slot","error",4,"ngIf"],["type","password","placeholder","Password","formControlName","password"],["size","medium","shape","round","color","primary","type","submit","expand","block",1,"ion-margin-bottom"],["size","medium","shape","round","type","button","expand","block","color","light",3,"click"],["slot","error"],["type","text","placeholder","Name","formControlName","name"],["size","medium","shape","round","color","primary","type","button","expand","block",1,"ion-margin-bottom",3,"click"]],template:function(Me,Je){1&Me&&(Q.TgZ(0,"ion-header"),Q.TgZ(1,"ion-toolbar",0),Q.TgZ(2,"ion-title"),Q._uU(3," Login "),Q.qZA(),Q.qZA(),Q.qZA(),Q.TgZ(4,"ion-content",1),Q.YNc(5,ie,11,3,"form",2),Q.YNc(6,De,14,4,"form",2),Q.qZA()),2&Me&&(Q.xp6(5),Q.Q6J("ngIf",!Je.showRegister),Q.xp6(1),Q.Q6J("ngIf",Je.showRegister))},directives:[O.Gu,O.sr,O.wd,O.W2,E.O5,ne._Y,ne.JL,ne.sg,O.Ie,O.pK,O.j9,ne.JJ,ne.u,O.YG,O.uN],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]}),$e})()}];let je=(()=>{class $e{}return $e.\u0275fac=function(Me){return new(Me||$e)},$e.\u0275mod=Q.oAB({type:$e}),$e.\u0275inj=Q.cJS({imports:[[oe.Bz.forChild(Ee)],oe.Bz]}),$e})(),Ae=(()=>{class $e{}return $e.\u0275fac=function(Me){return new(Me||$e)},$e.\u0275mod=Q.oAB({type:$e}),$e.\u0275inj=Q.cJS({providers:[],imports:[[E.ez,ne.u5,ne.UX,O.Pc,je]]}),$e})()},7556:(tn,Ze,B)=>{"use strict";B.d(Ze,{e:()=>ae});var E=B(8239),O=B(7910),ne=B(7716),oe=B(3071);let ae=(()=>{class Q{constructor(re,Te){this.auth=re,this.userSvc=Te}register({email:re,password:Te,name:ie}){var me=this;return(0,E.Z)(function*(){try{const Ce=yield(0,O.Xb)(me.auth,re,Te);return me.userSvc.addUserInfo(Ce.user.uid,{displayName:ie}),me.userSvc.saveUserToLocalStorage({id:Ce.user.uid,email:Ce.user.email,displayName:ie}),Ce}catch(Ce){return null}})()}login({email:re,password:Te}){var ie=this;return(0,E.Z)(function*(){try{const me=yield(0,O.e5)(ie.auth,re,Te),Ce=yield ie.userSvc.getUserInfo(me.user.uid).subscribe(_e=>{console.log(Ce),ie.userSvc.saveUserToLocalStorage({id:me.user.uid,email:me.user.email,displayName:_e.displayName})});return me}catch(me){return null}})()}logout(){return this.userSvc.clearStorage(),(0,O.w7)(this.auth)}}return Q.\u0275fac=function(re){return new(re||Q)(ne.LFG(O.gx),ne.LFG(oe.K))},Q.\u0275prov=ne.Yz7({token:Q,factory:Q.\u0275fac,providedIn:"root"}),Q})()},3792:(tn,Ze,B)=>{"use strict";B.d(Ze,{O:()=>oe});var E=B(2502),O=B(1304),ne=B(7716);let oe=(()=>{class ae{constructor(ve){this.firestore=ve,this.COMMENTS_COLLECTION="comments/comment"}getComments(ve){const re=(0,O.hJ)(this.firestore,`${ve}/${this.COMMENTS_COLLECTION}`),Te=(0,E.IO)(re,(0,E.Xo)("createdTime","asc"));return(0,E.BS)(Te,{idField:"id"})}addComment(ve,re){const Te=(0,O.hJ)(this.firestore,`${ve}/${this.COMMENTS_COLLECTION}`);return(0,O.ET)(Te,Object.assign(Object.assign({},re),{createdTime:(0,E.Bt)()}))}updateComment(ve,re,Te){const ie=(0,O.JU)(this.firestore,`${ve}/${this.COMMENTS_COLLECTION}/${re}`);(0,O.r7)(ie,Object.assign(Object.assign({},Te),{updatedTime:(0,E.Bt)()}))}}return ae.\u0275fac=function(ve){return new(ve||ae)(ne.LFG(E.gg))},ae.\u0275prov=ne.Yz7({token:ae,factory:ae.\u0275fac,providedIn:"root"}),ae})()},3071:(tn,Ze,B)=>{"use strict";B.d(Ze,{K:()=>oe});var E=B(2502),O=B(1304),ne=B(7716);let oe=(()=>{class ae{constructor(ve){this.firestore=ve,this.USER_INFO_PATH="user_info"}getUserInfo(ve){const re=(0,O.JU)(this.firestore,`${ve}/${this.USER_INFO_PATH}`);return(0,E._1)(re)}addUserInfo(ve,re){const Te=(0,O.JU)(this.firestore,`${ve}/${this.USER_INFO_PATH}`);return(0,O.pl)(Te,re)}updateUserInfo(ve,re){const Te=(0,O.JU)(this.firestore,`${ve}/${this.USER_INFO_PATH}`);return(0,O.pl)(Te,re)}saveUserToLocalStorage(ve){localStorage.setItem("userData",JSON.stringify(ve))}getUserDataFromLocalStorage(){return JSON.parse(localStorage.getItem("userData")||"{}")}clearStorage(){localStorage.clear()}}return ae.\u0275fac=function(ve){return new(ve||ae)(ne.LFG(E.gg))},ae.\u0275prov=ne.Yz7({token:ae,factory:ae.\u0275fac,providedIn:"root"}),ae})()},3335:(tn,Ze,B)=>{"use strict";var E=B(8583),O=B(7716);class ne extends E.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class oe extends ne{static makeCurrent(){(0,E.HT)(new oe)}onAndCancel(l,u,p){return l.addEventListener(u,p,!1),()=>{l.removeEventListener(u,p,!1)}}dispatchEvent(l,u){l.dispatchEvent(u)}remove(l){l.parentNode&&l.parentNode.removeChild(l)}createElement(l,u){return(u=u||this.getDefaultDocument()).createElement(l)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(l){return l.nodeType===Node.ELEMENT_NODE}isShadowRoot(l){return l instanceof DocumentFragment}getGlobalEventTarget(l,u){return"window"===u?window:"document"===u?l:"body"===u?l.body:null}getBaseHref(l){const u=(ae=ae||document.querySelector("base"),ae?ae.getAttribute("href"):null);return null==u?null:function(d){ve=ve||document.createElement("a"),ve.setAttribute("href",d);const l=ve.pathname;return"/"===l.charAt(0)?l:`/${l}`}(u)}resetBaseElement(){ae=null}getUserAgent(){return window.navigator.userAgent}getCookie(l){return(0,E.Mx)(document.cookie,l)}}let ve,ae=null;const Te=new O.OlP("TRANSITION_ID"),me=[{provide:O.ip1,useFactory:function(d,l,u){return()=>{u.get(O.CZH).donePromise.then(()=>{const p=(0,E.q)(),v=l.querySelectorAll(`style[ng-transition="${d}"]`);for(let R=0;R<v.length;R++)p.remove(v[R])})}},deps:[Te,E.K0,O.zs3],multi:!0}];class Ce{static init(){(0,O.VLi)(new Ce)}addToWindow(l){O.dqk.getAngularTestability=(p,v=!0)=>{const R=l.findTestabilityInTree(p,v);if(null==R)throw new Error("Could not find testability for element.");return R},O.dqk.getAllAngularTestabilities=()=>l.getAllTestabilities(),O.dqk.getAllAngularRootElements=()=>l.getAllRootElements(),O.dqk.frameworkStabilizers||(O.dqk.frameworkStabilizers=[]),O.dqk.frameworkStabilizers.push(p=>{const v=O.dqk.getAllAngularTestabilities();let R=v.length,V=!1;const se=function(Se){V=V||Se,R--,0==R&&p(V)};v.forEach(function(Se){Se.whenStable(se)})})}findTestabilityInTree(l,u,p){if(null==u)return null;const v=l.getTestability(u);return null!=v?v:p?(0,E.q)().isShadowRoot(u)?this.findTestabilityInTree(l,u.host,!0):this.findTestabilityInTree(l,u.parentElement,!0):null}}let _e=(()=>{class d{build(){return new XMLHttpRequest}}return d.\u0275fac=function(u){return new(u||d)},d.\u0275prov=O.Yz7({token:d,factory:d.\u0275fac}),d})();const mt=new O.OlP("EventManagerPlugins");let lt=(()=>{class d{constructor(u,p){this._zone=p,this._eventNameToPlugin=new Map,u.forEach(v=>v.manager=this),this._plugins=u.slice().reverse()}addEventListener(u,p,v){return this._findPluginFor(p).addEventListener(u,p,v)}addGlobalEventListener(u,p,v){return this._findPluginFor(p).addGlobalEventListener(u,p,v)}getZone(){return this._zone}_findPluginFor(u){const p=this._eventNameToPlugin.get(u);if(p)return p;const v=this._plugins;for(let R=0;R<v.length;R++){const V=v[R];if(V.supports(u))return this._eventNameToPlugin.set(u,V),V}throw new Error(`No event manager plugin found for event ${u}`)}}return d.\u0275fac=function(u){return new(u||d)(O.LFG(mt),O.LFG(O.R0b))},d.\u0275prov=O.Yz7({token:d,factory:d.\u0275fac}),d})();class Dt{constructor(l){this._doc=l}addGlobalEventListener(l,u,p){const v=(0,E.q)().getGlobalEventTarget(this._doc,l);if(!v)throw new Error(`Unsupported event target ${v} for event ${u}`);return this.addEventListener(v,u,p)}}let At=(()=>{class d{constructor(){this._stylesSet=new Set}addStyles(u){const p=new Set;u.forEach(v=>{this._stylesSet.has(v)||(this._stylesSet.add(v),p.add(v))}),this.onStylesAdded(p)}onStylesAdded(u){}getAllStyles(){return Array.from(this._stylesSet)}}return d.\u0275fac=function(u){return new(u||d)},d.\u0275prov=O.Yz7({token:d,factory:d.\u0275fac}),d})(),wn=(()=>{class d extends At{constructor(u){super(),this._doc=u,this._hostNodes=new Map,this._hostNodes.set(u.head,[])}_addStylesToHost(u,p,v){u.forEach(R=>{const V=this._doc.createElement("style");V.textContent=R,v.push(p.appendChild(V))})}addHost(u){const p=[];this._addStylesToHost(this._stylesSet,u,p),this._hostNodes.set(u,p)}removeHost(u){const p=this._hostNodes.get(u);p&&p.forEach(pn),this._hostNodes.delete(u)}onStylesAdded(u){this._hostNodes.forEach((p,v)=>{this._addStylesToHost(u,v,p)})}ngOnDestroy(){this._hostNodes.forEach(u=>u.forEach(pn))}}return d.\u0275fac=function(u){return new(u||d)(O.LFG(E.K0))},d.\u0275prov=O.Yz7({token:d,factory:d.\u0275fac}),d})();function pn(d){(0,E.q)().remove(d)}const bt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},vt=/%COMP%/g;function Gt(d,l,u){for(let p=0;p<l.length;p++){let v=l[p];Array.isArray(v)?Gt(d,v,u):(v=v.replace(vt,d),u.push(v))}return u}function Bn(d){return l=>{if("__ngUnwrap__"===l)return d;!1===d(l)&&(l.preventDefault(),l.returnValue=!1)}}let Nn=(()=>{class d{constructor(u,p,v){this.eventManager=u,this.sharedStylesHost=p,this.appId=v,this.rendererByCompId=new Map,this.defaultRenderer=new Dn(u)}createRenderer(u,p){if(!u||!p)return this.defaultRenderer;switch(p.encapsulation){case O.ifc.Emulated:{let v=this.rendererByCompId.get(p.id);return v||(v=new Ft(this.eventManager,this.sharedStylesHost,p,this.appId),this.rendererByCompId.set(p.id,v)),v.applyToHost(u),v}case 1:case O.ifc.ShadowDom:return new Wn(this.eventManager,this.sharedStylesHost,u,p);default:if(!this.rendererByCompId.has(p.id)){const v=Gt(p.id,p.styles,[]);this.sharedStylesHost.addStyles(v),this.rendererByCompId.set(p.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return d.\u0275fac=function(u){return new(u||d)(O.LFG(lt),O.LFG(wn),O.LFG(O.AFp))},d.\u0275prov=O.Yz7({token:d,factory:d.\u0275fac}),d})();class Dn{constructor(l){this.eventManager=l,this.data=Object.create(null)}destroy(){}createElement(l,u){return u?document.createElementNS(bt[u]||u,l):document.createElement(l)}createComment(l){return document.createComment(l)}createText(l){return document.createTextNode(l)}appendChild(l,u){l.appendChild(u)}insertBefore(l,u,p){l&&l.insertBefore(u,p)}removeChild(l,u){l&&l.removeChild(u)}selectRootElement(l,u){let p="string"==typeof l?document.querySelector(l):l;if(!p)throw new Error(`The selector "${l}" did not match any elements`);return u||(p.textContent=""),p}parentNode(l){return l.parentNode}nextSibling(l){return l.nextSibling}setAttribute(l,u,p,v){if(v){u=v+":"+u;const R=bt[v];R?l.setAttributeNS(R,u,p):l.setAttribute(u,p)}else l.setAttribute(u,p)}removeAttribute(l,u,p){if(p){const v=bt[p];v?l.removeAttributeNS(v,u):l.removeAttribute(`${p}:${u}`)}else l.removeAttribute(u)}addClass(l,u){l.classList.add(u)}removeClass(l,u){l.classList.remove(u)}setStyle(l,u,p,v){v&(O.JOm.DashCase|O.JOm.Important)?l.style.setProperty(u,p,v&O.JOm.Important?"important":""):l.style[u]=p}removeStyle(l,u,p){p&O.JOm.DashCase?l.style.removeProperty(u):l.style[u]=""}setProperty(l,u,p){l[u]=p}setValue(l,u){l.nodeValue=u}listen(l,u,p){return"string"==typeof l?this.eventManager.addGlobalEventListener(l,u,Bn(p)):this.eventManager.addEventListener(l,u,Bn(p))}}class Ft extends Dn{constructor(l,u,p,v){super(l),this.component=p;const R=Gt(v+"-"+p.id,p.styles,[]);u.addStyles(R),this.contentAttr="_ngcontent-%COMP%".replace(vt,v+"-"+p.id),this.hostAttr="_nghost-%COMP%".replace(vt,v+"-"+p.id)}applyToHost(l){super.setAttribute(l,this.hostAttr,"")}createElement(l,u){const p=super.createElement(l,u);return super.setAttribute(p,this.contentAttr,""),p}}class Wn extends Dn{constructor(l,u,p,v){super(l),this.sharedStylesHost=u,this.hostEl=p,this.shadowRoot=p.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const R=Gt(v.id,v.styles,[]);for(let V=0;V<R.length;V++){const se=document.createElement("style");se.textContent=R[V],this.shadowRoot.appendChild(se)}}nodeOrShadowRoot(l){return l===this.hostEl?this.shadowRoot:l}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(l,u){return super.appendChild(this.nodeOrShadowRoot(l),u)}insertBefore(l,u,p){return super.insertBefore(this.nodeOrShadowRoot(l),u,p)}removeChild(l,u){return super.removeChild(this.nodeOrShadowRoot(l),u)}parentNode(l){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(l)))}}let cr=(()=>{class d extends Dt{constructor(u){super(u)}supports(u){return!0}addEventListener(u,p,v){return u.addEventListener(p,v,!1),()=>this.removeEventListener(u,p,v)}removeEventListener(u,p,v){return u.removeEventListener(p,v)}}return d.\u0275fac=function(u){return new(u||d)(O.LFG(E.K0))},d.\u0275prov=O.Yz7({token:d,factory:d.\u0275fac}),d})();const dr=["alt","control","meta","shift"],Ct={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ci={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},br={alt:d=>d.altKey,control:d=>d.ctrlKey,meta:d=>d.metaKey,shift:d=>d.shiftKey};let Xn=(()=>{class d extends Dt{constructor(u){super(u)}supports(u){return null!=d.parseEventName(u)}addEventListener(u,p,v){const R=d.parseEventName(p),V=d.eventCallback(R.fullKey,v,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,E.q)().onAndCancel(u,R.domEventName,V))}static parseEventName(u){const p=u.toLowerCase().split("."),v=p.shift();if(0===p.length||"keydown"!==v&&"keyup"!==v)return null;const R=d._normalizeKey(p.pop());let V="";if(dr.forEach(Se=>{const He=p.indexOf(Se);He>-1&&(p.splice(He,1),V+=Se+".")}),V+=R,0!=p.length||0===R.length)return null;const se={};return se.domEventName=v,se.fullKey=V,se}static getEventFullKey(u){let p="",v=function(d){let l=d.key;if(null==l){if(l=d.keyIdentifier,null==l)return"Unidentified";l.startsWith("U+")&&(l=String.fromCharCode(parseInt(l.substring(2),16)),3===d.location&&ci.hasOwnProperty(l)&&(l=ci[l]))}return Ct[l]||l}(u);return v=v.toLowerCase()," "===v?v="space":"."===v&&(v="dot"),dr.forEach(R=>{R!=v&&br[R](u)&&(p+=R+".")}),p+=v,p}static eventCallback(u,p,v){return R=>{d.getEventFullKey(R)===u&&v.runGuarded(()=>p(R))}}static _normalizeKey(u){return"esc"===u?"escape":u}}return d.\u0275fac=function(u){return new(u||d)(O.LFG(E.K0))},d.\u0275prov=O.Yz7({token:d,factory:d.\u0275fac}),d})();const ke=(0,O.eFA)(O._c5,"browser",[{provide:O.Lbi,useValue:E.bD},{provide:O.g9A,useValue:function(){oe.makeCurrent(),Ce.init()},multi:!0},{provide:E.K0,useFactory:function(){return(0,O.RDi)(document),document},deps:[]}]),ye=[[],{provide:O.zSh,useValue:"root"},{provide:O.qLn,useFactory:function(){return new O.qLn},deps:[]},{provide:mt,useClass:cr,multi:!0,deps:[E.K0,O.R0b,O.Lbi]},{provide:mt,useClass:Xn,multi:!0,deps:[E.K0]},[],{provide:Nn,useClass:Nn,deps:[lt,wn,O.AFp]},{provide:O.FYo,useExisting:Nn},{provide:At,useExisting:wn},{provide:wn,useClass:wn,deps:[E.K0]},{provide:O.dDg,useClass:O.dDg,deps:[O.R0b]},{provide:lt,useClass:lt,deps:[mt,O.R0b]},{provide:E.JF,useClass:_e,deps:[]},[]];let Oe=(()=>{class d{constructor(u){if(u)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(u){return{ngModule:d,providers:[{provide:O.AFp,useValue:u.appId},{provide:Te,useExisting:O.AFp},me]}}}return d.\u0275fac=function(u){return new(u||d)(O.LFG(d,12))},d.\u0275mod=O.oAB({type:d}),d.\u0275inj=O.cJS({providers:ye,imports:[E.ez,O.hGG]}),d})();"undefined"!=typeof window&&window;var Vr=B(174),Ei=B(665),Yr=B(8945),bs=B(4022),or=B(8002),is=B(5257),$r=B(7910),yi=B(2329);const Ir=(0,or.U)(d=>!!d);let Ns=(()=>{class d{constructor(u,p){this.router=u,this.auth=p,this.canActivate=(v,R)=>{const V=v.data.authGuardPipe||(()=>Ir);return(0,$r.EA)(this.auth).pipe((0,is.q)(1),V(v,R),(0,or.U)(se=>"boolean"==typeof se?se:Array.isArray(se)?this.router.createUrlTree(se):this.router.parseUrl(se)))}}}return d.\u0275fac=function(u){return new(u||d)(O.LFG(Vr.F0),O.LFG($r.gx))},d.\u0275prov=O.Yz7({token:d,factory:d.\u0275fac,providedIn:"any"}),d})();const nt=d=>({canActivate:[Ns],data:{authGuardPipe:d}}),An=[Object.assign({path:"",loadChildren:()=>Promise.resolve().then(B.bind(B,7545)).then(d=>d.LoginModule)},nt(()=>{return d=["home"],(0,bs.z)(Ir,(0,or.U)(l=>l&&d||!0));var d})),Object.assign({path:"home",loadChildren:()=>Promise.resolve().then(B.bind(B,4427)).then(d=>d.HomeModule)},nt(()=>{return d=[""],(0,bs.z)(Ir,(0,or.U)(l=>l||d));var d})),{path:"**",redirectTo:"",pathMatch:"full"}];let Pn=(()=>{class d{}return d.\u0275fac=function(u){return new(u||d)},d.\u0275mod=O.oAB({type:d}),d.\u0275inj=O.cJS({imports:[[Vr.Bz.forRoot(An,{preloadingStrategy:Vr.wm})],Vr.Bz]}),d})(),jn=(()=>{class d{constructor(u){this.platform=u,this.title="trailApp",this.initializeApp()}initializeApp(){this.platform.ready().then(()=>{console.log("ready")})}}return d.\u0275fac=function(u){return new(u||d)(O.Y36(Yr.t4))},d.\u0275cmp=O.Xpm({type:d,selectors:[["app-root"]],decls:2,vars:0,template:function(u,p){1&u&&(O.TgZ(0,"ion-app"),O._UZ(1,"ion-router-outlet"),O.qZA())},directives:[Yr.dr,Yr.jP],styles:[""]}),d})();var Cr=B(4427),qi=B(127),hi=B(2502);const Ni_firebase={projectId:"trail-app-aa3ab",appId:"1:274367012522:web:30b70ab84769c87aca3ad3",databaseURL:"https://trail-app-aa3ab-default-rtdb.firebaseio.com",storageBucket:"trail-app-aa3ab.appspot.com",apiKey:"AIzaSyBVh_gUX8-vRECj9rPbevw38_FAyV6e12s",authDomain:"trail-app-aa3ab.firebaseapp.com",messagingSenderId:"274367012522"};var xr=B(2805),Cs=B(841),ss=B(8239),ws=B(8026),Yi=B(3910),Ne=B(3854),eo=B(5422);const js="@firebase/database";let Po="";function zo(d){Po=d}class Ml{constructor(l){this.domStorage_=l,this.prefix_="firebase:"}set(l,u){null==u?this.domStorage_.removeItem(this.prefixedName_(l)):this.domStorage_.setItem(this.prefixedName_(l),(0,Ne.Wl)(u))}get(l){const u=this.domStorage_.getItem(this.prefixedName_(l));return null==u?null:(0,Ne.cI)(u)}remove(l){this.domStorage_.removeItem(this.prefixedName_(l))}prefixedName_(l){return this.prefix_+l}toString(){return this.domStorage_.toString()}}class Ds{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(l,u){null==u?delete this.cache_[l]:this.cache_[l]=u}get(l){return(0,Ne.r3)(this.cache_,l)?this.cache_[l]:null}remove(l){delete this.cache_[l]}}const Hs=function(d){try{if("undefined"!=typeof window&&void 0!==window[d]){const l=window[d];return l.setItem("firebase:sentinel","cache"),l.removeItem("firebase:sentinel"),new Ml(l)}}catch(l){}return new Ds},fs=Hs("localStorage"),Ws=Hs("sessionStorage"),to=new eo.Yd("@firebase/database"),Zr=function(){let d=1;return function(){return d++}}(),no=function(d){const l=(0,Ne.dS)(d),u=new Ne.gQ;u.update(l);const p=u.digest();return Ne.US.encodeByteArray(p)},ji=function(...d){let l="";for(let u=0;u<d.length;u++){const p=d[u];Array.isArray(p)||p&&"object"==typeof p&&"number"==typeof p.length?l+=ji.apply(null,p):l+="object"==typeof p?(0,Ne.Wl)(p):p,l+=" "}return l};let ps=null,ro=!0;const os=function(d,l){(0,Ne.hu)(!l||!0===d||!1===d,"Can't turn on custom loggers persistently."),!0===d?(to.logLevel=eo.in.VERBOSE,ps=to.log.bind(to),l&&Ws.set("logging_enabled",!0)):"function"==typeof d?ps=d:(ps=null,Ws.remove("logging_enabled"))},Li=function(...d){if(!0===ro&&(ro=!1,null===ps&&!0===Ws.get("logging_enabled")&&os(!0)),ps){const l=ji.apply(null,d);ps(l)}},Gs=function(d){return function(...l){Li(d,...l)}},_i=function(...d){const l="FIREBASE INTERNAL ERROR: "+ji(...d);to.error(l)},Ps=function(...d){const l=`FIREBASE FATAL ERROR: ${ji(...d)}`;throw to.error(l),new Error(l)},fi=function(...d){const l="FIREBASE WARNING: "+ji(...d);to.warn(l)},vo=function(d){return"number"==typeof d&&(d!=d||d===Number.POSITIVE_INFINITY||d===Number.NEGATIVE_INFINITY)},Qi="[MIN_NAME]",Ki="[MAX_NAME]",ks=function(d,l){if(d===l)return 0;if(d===Qi||l===Ki)return-1;if(l===Qi||d===Ki)return 1;{const u=k(d),p=k(l);return null!==u?null!==p?u-p==0?d.length-l.length:u-p:-1:null!==p?1:d<l?-1:1}},ta=function(d,l){return d===l?0:d<l?-1:1},Ii=function(d,l){if(l&&d in l)return l[d];throw new Error("Missing required key ("+d+") in object: "+(0,Ne.Wl)(l))},Xi=function(d){if("object"!=typeof d||null===d)return(0,Ne.Wl)(d);const l=[];for(const p in d)l.push(p);l.sort();let u="{";for(let p=0;p<l.length;p++)0!==p&&(u+=","),u+=(0,Ne.Wl)(l[p]),u+=":",u+=Xi(d[l[p]]);return u+="}",u},G=function(d,l){const u=d.length;if(u<=l)return[d];const p=[];for(let v=0;v<u;v+=l)p.push(d.substring(v,v+l>u?u:v+l));return p};function le(d,l){for(const u in d)d.hasOwnProperty(u)&&l(u,d[u])}const K=function(d){(0,Ne.hu)(!vo(d),"Invalid JSON number");const p=1023;let v,R,V,se,Se;0===d?(R=0,V=0,v=1/d==-1/0?1:0):(v=d<0,(d=Math.abs(d))>=Math.pow(2,1-p)?(se=Math.min(Math.floor(Math.log(d)/Math.LN2),p),R=se+p,V=Math.round(d*Math.pow(2,52-se)-Math.pow(2,52))):(R=0,V=Math.round(d/Math.pow(2,-1074))));const He=[];for(Se=52;Se;Se-=1)He.push(V%2?1:0),V=Math.floor(V/2);for(Se=11;Se;Se-=1)He.push(R%2?1:0),R=Math.floor(R/2);He.push(v?1:0),He.reverse();const It=He.join("");let St="";for(Se=0;Se<64;Se+=8){let Bt=parseInt(It.substr(Se,8),2).toString(16);1===Bt.length&&(Bt="0"+Bt),St+=Bt}return St.toLowerCase()},Xt=new RegExp("^-?(0*)\\d{1,10}$"),W=-2147483648,$=2147483647,k=function(d){if(Xt.test(d)){const l=Number(d);if(l>=W&&l<=$)return l}return null},ue=function(d){try{d()}catch(l){setTimeout(()=>{throw fi("Exception was thrown by user callback.",l.stack||""),l},Math.floor(0))}},an=function(d,l){const u=setTimeout(d,l);return"number"==typeof u&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(u):"object"==typeof u&&u.unref&&u.unref(),u};class Zn{constructor(l,u){this.appName_=l,this.appCheckProvider=u,this.appCheck=null==u?void 0:u.getImmediate({optional:!0}),this.appCheck||null==u||u.get().then(p=>this.appCheck=p)}getToken(l){return this.appCheck?this.appCheck.getToken(l):new Promise((u,p)=>{setTimeout(()=>{this.appCheck?this.getToken(l).then(u,p):u(null)},0)})}addTokenChangeListener(l){var u;null===(u=this.appCheckProvider)||void 0===u||u.get().then(p=>p.addTokenListener(l))}notifyForInvalidToken(){fi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Ur{constructor(l,u,p){this.appName_=l,this.firebaseOptions_=u,this.authProvider_=p,this.auth_=null,this.auth_=p.getImmediate({optional:!0}),this.auth_||p.onInit(v=>this.auth_=v)}getToken(l){return this.auth_?this.auth_.getToken(l).catch(u=>u&&"auth/token-not-initialized"===u.code?(Li("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(u)):new Promise((u,p)=>{setTimeout(()=>{this.auth_?this.getToken(l).then(u,p):u(null)},0)})}addTokenChangeListener(l){this.auth_?this.auth_.addAuthTokenListener(l):this.authProvider_.get().then(u=>u.addAuthTokenListener(l))}removeTokenChangeListener(l){this.authProvider_.get().then(u=>u.removeAuthTokenListener(l))}notifyForInvalidToken(){let l='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';l+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',fi(l)}}let Ci=(()=>{class d{constructor(u){this.accessToken=u}getToken(u){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(u){u(this.accessToken)}removeTokenChangeListener(u){}notifyForInvalidToken(){}}return d.OWNER="owner",d})();const ko=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ra="websocket",Eo="long_polling";class Yt{constructor(l,u,p,v,R=!1,V="",se=!1){this.secure=u,this.namespace=p,this.webSocketOnly=v,this.nodeAdmin=R,this.persistenceKey=V,this.includeNamespaceInQueryParams=se,this._host=l.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=fs.get("host:"+l)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(l){l!==this.internalHost&&(this.internalHost=l,this.isCacheableHost()&&fs.set("host:"+this._host,this.internalHost))}toString(){let l=this.toURLString();return this.persistenceKey&&(l+="<"+this.persistenceKey+">"),l}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Fo(d,l,u){let p;if((0,Ne.hu)("string"==typeof l,"typeof type must == string"),(0,Ne.hu)("object"==typeof u,"typeof params must == object"),l===Ra)p=(d.secure?"wss://":"ws://")+d.internalHost+"/.ws?";else{if(l!==Eo)throw new Error("Unknown connection type: "+l);p=(d.secure?"https://":"http://")+d.internalHost+"/.lp?"}(function(d){return d.host!==d.internalHost||d.isCustomHost()||d.includeNamespaceInQueryParams})(d)&&(u.ns=d.namespace);const v=[];return le(u,(R,V)=>{v.push(R+"="+V)}),p+v.join("&")}class Hi{constructor(){this.counters_={}}incrementCounter(l,u=1){(0,Ne.r3)(this.counters_,l)||(this.counters_[l]=0),this.counters_[l]+=u}get(){return(0,Ne.p$)(this.counters_)}}const io={},Ss={};function Fs(d){const l=d.toString();return io[l]||(io[l]=new Hi),io[l]}class ra{constructor(l){this.onMessage_=l,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(l,u){this.closeAfterResponse=l,this.onClose=u,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(l,u){for(this.pendingResponses[l]=u;this.pendingResponses[this.currentResponseNum];){const p=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let v=0;v<p.length;++v)p[v]&&ue(()=>{this.onMessage_(p[v])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class qs{constructor(l,u,p,v,R,V,se){this.connId=l,this.repoInfo=u,this.applicationId=p,this.appCheckToken=v,this.authToken=R,this.transportSessionId=V,this.lastSessionId=se,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Gs(l),this.stats_=Fs(u),this.urlFn=Se=>(this.appCheckToken&&(Se.ac=this.appCheckToken),Fo(u,Eo,Se))}open(l,u){this.curSegmentNum=0,this.onDisconnect_=u,this.myPacketOrderer=new ra(l),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(d){if((0,Ne.Yr)()||"complete"===document.readyState)d();else{let l=!1;const u=function(){document.body?l||(l=!0,d()):setTimeout(u,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",u,!1),window.addEventListener("load",u,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&u()}),window.attachEvent("onload",u))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new sa((...R)=>{const[V,se,Se,He,It]=R;if(this.incrementIncomingBytes_(R),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===V)this.id=se,this.password=Se;else{if("close"!==V)throw new Error("Unrecognized command received: "+V);se?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(se,()=>{this.onClosed_()})):this.onClosed_()}},(...R)=>{const[V,se]=R;this.incrementIncomingBytes_(R),this.myPacketOrderer.handleResponse(V,se)},()=>{this.onClosed_()},this.urlFn);const p={start:"t"};p.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(p.cb=this.scriptTagHolder.uniqueCallbackIdentifier),p.v="5",this.transportSessionId&&(p.s=this.transportSessionId),this.lastSessionId&&(p.ls=this.lastSessionId),this.applicationId&&(p.p=this.applicationId),this.appCheckToken&&(p.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&ko.test(location.hostname)&&(p.r="f");const v=this.urlFn(p);this.log_("Connecting via long-poll to "+v),this.scriptTagHolder.addTag(v,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){qs.forceAllow_=!0}static forceDisallow(){qs.forceDisallow_=!0}static isAvailable(){return!((0,Ne.Yr)()||!qs.forceAllow_&&(qs.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(l){const u=(0,Ne.Wl)(l);this.bytesSent+=u.length,this.stats_.incrementCounter("bytes_sent",u.length);const p=(0,Ne.h$)(u),v=G(p,1840);for(let R=0;R<v.length;R++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,v.length,v[R]),this.curSegmentNum++}addDisconnectPingFrame(l,u){if((0,Ne.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const p={dframe:"t"};p.id=l,p.pw=u,this.myDisconnFrame.src=this.urlFn(p),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(l){const u=(0,Ne.Wl)(l).length;this.bytesReceived+=u,this.stats_.incrementCounter("bytes_received",u)}}class sa{constructor(l,u,p,v){if(this.onDisconnect=p,this.urlFn=v,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Ne.Yr)())this.commandCB=l,this.onMessageCB=u;else{this.uniqueCallbackIdentifier=Zr(),window["pLPCommand"+this.uniqueCallbackIdentifier]=l,window["pRTLPCB"+this.uniqueCallbackIdentifier]=u,this.myIFrame=sa.createIFrame_();let R="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(R='<script>document.domain="'+document.domain+'";<\/script>');const V="<html><body>"+R+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(V),this.myIFrame.doc.close()}catch(se){Li("frame writing exception"),se.stack&&Li(se.stack),Li(se)}}}static createIFrame_(){const l=document.createElement("iframe");if(l.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(l);try{l.contentWindow.document||Li("No IE domain setting required")}catch(u){const p=document.domain;l.src="javascript:void((function(){document.open();document.domain='"+p+"';document.close();})())"}return l.contentDocument?l.doc=l.contentDocument:l.contentWindow?l.doc=l.contentWindow.document:l.document&&(l.doc=l.document),l}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const l=this.onDisconnect;l&&(this.onDisconnect=null,l())}startLongPoll(l,u){for(this.myID=l,this.myPW=u,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const l={};l.id=this.myID,l.pw=this.myPW,l.ser=this.currentSerial;let u=this.urlFn(l),p="",v=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+p.length<=1870;){const V=this.pendingSegs.shift();p=p+"&seg"+v+"="+V.seg+"&ts"+v+"="+V.ts+"&d"+v+"="+V.d,v++}return u+=p,this.addLongPollTag_(u,this.currentSerial),!0}return!1}enqueueSegment(l,u,p){this.pendingSegs.push({seg:l,ts:u,d:p}),this.alive&&this.newRequest_()}addLongPollTag_(l,u){this.outstandingRequests.add(u);const p=()=>{this.outstandingRequests.delete(u),this.newRequest_()},v=setTimeout(p,Math.floor(25e3));this.addTag(l,()=>{clearTimeout(v),p()})}addTag(l,u){(0,Ne.Yr)()?this.doNodeLongPoll(l,u):setTimeout(()=>{try{if(!this.sendNewPolls)return;const p=this.myIFrame.doc.createElement("script");p.type="text/javascript",p.async=!0,p.src=l,p.onload=p.onreadystatechange=function(){const v=p.readyState;(!v||"loaded"===v||"complete"===v)&&(p.onload=p.onreadystatechange=null,p.parentNode&&p.parentNode.removeChild(p),u())},p.onerror=()=>{Li("Long-poll script failed to load: "+l),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(p)}catch(p){}},Math.floor(1))}}let _a=null;"undefined"!=typeof MozWebSocket?_a=MozWebSocket:"undefined"!=typeof WebSocket&&(_a=WebSocket);let Vs=(()=>{class d{constructor(u,p,v,R,V,se,Se){this.connId=u,this.applicationId=v,this.appCheckToken=R,this.authToken=V,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Gs(this.connId),this.stats_=Fs(p),this.connURL=d.connectionURL_(p,se,Se,R,v),this.nodeAdmin=p.nodeAdmin}static connectionURL_(u,p,v,R,V){const se={v:"5"};return!(0,Ne.Yr)()&&"undefined"!=typeof location&&location.hostname&&ko.test(location.hostname)&&(se.r="f"),p&&(se.s=p),v&&(se.ls=v),R&&(se.ac=R),V&&(se.p=V),Fo(u,Ra,se)}open(u,p){this.onDisconnect=p,this.onMessage=u,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,fs.set("previous_websocket_failure",!0);try{let v;if((0,Ne.Yr)()){v={headers:{"User-Agent":`Firebase/5/${Po}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(v.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(v.headers["X-Firebase-AppCheck"]=this.appCheckToken);const V=process.env,se=0===this.connURL.indexOf("wss://")?V.HTTPS_PROXY||V.https_proxy:V.HTTP_PROXY||V.http_proxy;se&&(v.proxy={origin:se})}this.mySock=new _a(this.connURL,[],v)}catch(v){this.log_("Error instantiating WebSocket.");const R=v.message||v.data;return R&&this.log_(R),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=v=>{this.handleIncomingFrame(v)},this.mySock.onerror=v=>{this.log_("WebSocket error.  Closing connection.");const R=v.message||v.data;R&&this.log_(R),this.onClosed_()}}start(){}static forceDisallow(){d.forceDisallow_=!0}static isAvailable(){let u=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const v=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);v&&v.length>1&&parseFloat(v[1])<4.4&&(u=!0)}return!u&&null!==_a&&!d.forceDisallow_}static previouslyFailed(){return fs.isInMemoryStorage||!0===fs.get("previous_websocket_failure")}markConnectionHealthy(){fs.remove("previous_websocket_failure")}appendFrame_(u){if(this.frames.push(u),this.frames.length===this.totalFrames){const p=this.frames.join("");this.frames=null;const v=(0,Ne.cI)(p);this.onMessage(v)}}handleNewFrameCount_(u){this.totalFrames=u,this.frames=[]}extractFrameCount_(u){if((0,Ne.hu)(null===this.frames,"We already have a frame buffer"),u.length<=6){const p=Number(u);if(!isNaN(p))return this.handleNewFrameCount_(p),null}return this.handleNewFrameCount_(1),u}handleIncomingFrame(u){if(null===this.mySock)return;const p=u.data;if(this.bytesReceived+=p.length,this.stats_.incrementCounter("bytes_received",p.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(p);else{const v=this.extractFrameCount_(p);null!==v&&this.appendFrame_(v)}}send(u){this.resetKeepAlive();const p=(0,Ne.Wl)(u);this.bytesSent+=p.length,this.stats_.incrementCounter("bytes_sent",p.length);const v=G(p,16384);v.length>1&&this.sendString_(String(v.length));for(let R=0;R<v.length;R++)this.sendString_(v[R])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(u){try{this.mySock.send(u)}catch(p){this.log_("Exception thrown from WebSocket.send():",p.message||p.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return d.responsesRequiredToBeHealthy=2,d.healthyTimeout=3e4,d})(),tl=(()=>{class d{constructor(u){this.initTransports_(u)}static get ALL_TRANSPORTS(){return[qs,Vs]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(u){const p=Vs&&Vs.isAvailable();let v=p&&!Vs.previouslyFailed();if(u.webSocketOnly&&(p||fi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),v=!0),v)this.transports_=[Vs];else{const R=this.transports_=[];for(const V of d.ALL_TRANSPORTS)V&&V.isAvailable()&&R.push(V);d.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return d.globalTransportInitialized_=!1,d})();class kt{constructor(l,u,p,v,R,V,se,Se,He,It){this.id=l,this.repoInfo_=u,this.applicationId_=p,this.appCheckToken_=v,this.authToken_=R,this.onMessage_=V,this.onReady_=se,this.onDisconnect_=Se,this.onKill_=He,this.lastSessionId=It,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Gs("c:"+this.id+":"),this.transportManager_=new tl(u),this.log_("Connection created"),this.start_()}start_(){const l=this.transportManager_.initialTransport();this.conn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;const u=this.connReceiver_(this.conn_),p=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(u,p)},Math.floor(0));const v=l.healthyTimeout||0;v>0&&(this.healthyTimeout_=an(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(v)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(l){return u=>{l===this.conn_?this.onConnectionLost_(u):l===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(l){return u=>{2!==this.state_&&(l===this.rx_?this.onPrimaryMessageReceived_(u):l===this.secondaryConn_?this.onSecondaryMessageReceived_(u):this.log_("message on old connection"))}}sendRequest(l){this.sendData_({t:"d",d:l})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(l){if("t"in l){const u=l.t;"a"===u?this.upgradeIfSecondaryHealthy_():"r"===u?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===u&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(l){const u=Ii("t",l),p=Ii("d",l);if("c"===u)this.onSecondaryControl_(p);else{if("d"!==u)throw new Error("Unknown protocol layer: "+u);this.pendingDataMessages.push(p)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(l){const u=Ii("t",l),p=Ii("d",l);"c"===u?this.onControl_(p):"d"===u&&this.onDataMessage_(p)}onDataMessage_(l){this.onPrimaryResponse_(),this.onMessage_(l)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(l){const u=Ii("t",l);if("d"in l){const p=l.d;if("h"===u)this.onHandshake_(p);else if("n"===u){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let v=0;v<this.pendingDataMessages.length;++v)this.onDataMessage_(this.pendingDataMessages[v]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===u?this.onConnectionShutdown_(p):"r"===u?this.onReset_(p):"e"===u?_i("Server Error: "+p):"o"===u?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_i("Unknown control packet command: "+u)}}onHandshake_(l){const u=l.ts,p=l.v,v=l.h;this.sessionId=l.s,this.repoInfo_.host=v,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,u),"5"!==p&&fi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const l=this.transportManager_.upgradeTransport();l&&this.startUpgrade_(l)}startUpgrade_(l){this.secondaryConn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;const u=this.connReceiver_(this.secondaryConn_),p=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(u,p),an(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(l){this.log_("Reset packet received.  New host: "+l),this.repoInfo_.host=l,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(l,u){this.log_("Realtime connection established."),this.conn_=l,this.state_=1,this.onReady_&&(this.onReady_(u,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):an(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const l=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===l||this.rx_===l)&&this.close()}onConnectionLost_(l){this.conn_=null,l||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(fs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(l){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(l),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(l){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(l)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Jn{put(l,u,p,v){}merge(l,u,p,v){}refreshAuthToken(l){}refreshAppCheckToken(l){}onDisconnectPut(l,u,p){}onDisconnectMerge(l,u,p){}onDisconnectCancel(l,u){}reportStats(l){}}class es{constructor(l){this.allowedEvents_=l,this.listeners_={},(0,Ne.hu)(Array.isArray(l)&&l.length>0,"Requires a non-empty array")}trigger(l,...u){if(Array.isArray(this.listeners_[l])){const p=[...this.listeners_[l]];for(let v=0;v<p.length;v++)p[v].callback.apply(p[v].context,u)}}on(l,u,p){this.validateEventType_(l),this.listeners_[l]=this.listeners_[l]||[],this.listeners_[l].push({callback:u,context:p});const v=this.getInitialEvent(l);v&&u.apply(p,v)}off(l,u,p){this.validateEventType_(l);const v=this.listeners_[l]||[];for(let R=0;R<v.length;R++)if(v[R].callback===u&&(!p||p===v[R].context))return void v.splice(R,1)}validateEventType_(l){(0,Ne.hu)(this.allowedEvents_.find(u=>u===l),"Unknown event: "+l)}}class lo extends es{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,Ne.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new lo}getInitialEvent(l){return(0,Ne.hu)("online"===l,"Unknown event type: "+l),[this.online_]}currentlyOnline(){return this.online_}}class oi{constructor(l,u){if(void 0===u){this.pieces_=l.split("/");let p=0;for(let v=0;v<this.pieces_.length;v++)this.pieces_[v].length>0&&(this.pieces_[p]=this.pieces_[v],p++);this.pieces_.length=p,this.pieceNum_=0}else this.pieces_=l,this.pieceNum_=u}toString(){let l="";for(let u=this.pieceNum_;u<this.pieces_.length;u++)""!==this.pieces_[u]&&(l+="/"+this.pieces_[u]);return l||"/"}}function Jt(){return new oi("")}function et(d){return d.pieceNum_>=d.pieces_.length?null:d.pieces_[d.pieceNum_]}function zt(d){return d.pieces_.length-d.pieceNum_}function mr(d){let l=d.pieceNum_;return l<d.pieces_.length&&l++,new oi(d.pieces_,l)}function Zl(d){return d.pieceNum_<d.pieces_.length?d.pieces_[d.pieces_.length-1]:null}function Bs(d,l=0){return d.pieces_.slice(d.pieceNum_+l)}function Nl(d){if(d.pieceNum_>=d.pieces_.length)return null;const l=[];for(let u=d.pieceNum_;u<d.pieces_.length-1;u++)l.push(d.pieces_[u]);return new oi(l,0)}function Ui(d,l){const u=[];for(let p=d.pieceNum_;p<d.pieces_.length;p++)u.push(d.pieces_[p]);if(l instanceof oi)for(let p=l.pieceNum_;p<l.pieces_.length;p++)u.push(l.pieces_[p]);else{const p=l.split("/");for(let v=0;v<p.length;v++)p[v].length>0&&u.push(p[v])}return new oi(u,0)}function Mr(d){return d.pieceNum_>=d.pieces_.length}function as(d,l){const u=et(d),p=et(l);if(null===u)return l;if(u===p)return as(mr(d),mr(l));throw new Error("INTERNAL ERROR: innerPath ("+l+") is not within outerPath ("+d+")")}function Uu(d,l){const u=Bs(d,0),p=Bs(l,0);for(let v=0;v<u.length&&v<p.length;v++){const R=ks(u[v],p[v]);if(0!==R)return R}return u.length===p.length?0:u.length<p.length?-1:1}function Ql(d,l){if(zt(d)!==zt(l))return!1;for(let u=d.pieceNum_,p=l.pieceNum_;u<=d.pieces_.length;u++,p++)if(d.pieces_[u]!==l.pieces_[p])return!1;return!0}function $s(d,l){let u=d.pieceNum_,p=l.pieceNum_;if(zt(d)>zt(l))return!1;for(;u<d.pieces_.length;){if(d.pieces_[u]!==l.pieces_[p])return!1;++u,++p}return!0}class Ma{constructor(l,u){this.errorPrefix_=u,this.parts_=Bs(l,0),this.byteLength_=Math.max(1,this.parts_.length);for(let p=0;p<this.parts_.length;p++)this.byteLength_+=(0,Ne.ug)(this.parts_[p]);po(this)}}function po(d){if(d.byteLength_>768)throw new Error(d.errorPrefix_+"has a key path longer than 768 bytes ("+d.byteLength_+").");if(d.parts_.length>32)throw new Error(d.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+pi(d))}function pi(d){return 0===d.parts_.length?"":"in property '"+d.parts_.join(".")+"'"}class ar extends es{constructor(){let l,u;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(u="visibilitychange",l="hidden"):void 0!==document.mozHidden?(u="mozvisibilitychange",l="mozHidden"):void 0!==document.msHidden?(u="msvisibilitychange",l="msHidden"):void 0!==document.webkitHidden&&(u="webkitvisibilitychange",l="webkitHidden")),this.visible_=!0,u&&document.addEventListener(u,()=>{const p=!document[l];p!==this.visible_&&(this.visible_=p,this.trigger("visible",p))},!1)}static getInstance(){return new ar}getInitialEvent(l){return(0,Ne.hu)("visible"===l,"Unknown event type: "+l),[this.visible_]}}const oa=1e3;let _l,ls=(()=>{class d extends Jn{constructor(u,p,v,R,V,se,Se,He){if(super(),this.repoInfo_=u,this.applicationId_=p,this.onDataUpdate_=v,this.onConnectStatus_=R,this.onServerInfoUpdate_=V,this.authTokenProvider_=se,this.appCheckTokenProvider_=Se,this.authOverride_=He,this.id=d.nextPersistentConnectionId_++,this.log_=Gs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=oa,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,He&&!(0,Ne.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ar.getInstance().on("visible",this.onVisible_,this),-1===u.host.indexOf("fblocal")&&lo.getInstance().on("online",this.onOnline_,this)}sendRequest(u,p,v){const R=++this.requestNumber_,V={r:R,a:u,b:p};this.log_((0,Ne.Wl)(V)),(0,Ne.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(V),v&&(this.requestCBHash_[R]=v)}get(u){this.initConnection_();const p=new Ne.BH,v={p:u._path.toString(),q:u._queryObject};return this.outstandingGets_.push({action:"g",request:v,onComplete:se=>{const Se=se.d;"ok"===se.s?p.resolve(Se):p.reject(Se)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),p.promise}listen(u,p,v,R){this.initConnection_();const V=u._queryIdentifier,se=u._path.toString();this.log_("Listen called for "+se+" "+V),this.listens.has(se)||this.listens.set(se,new Map),(0,Ne.hu)(u._queryParams.isDefault()||!u._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Ne.hu)(!this.listens.get(se).has(V),"listen() called twice for same path/queryId.");const Se={onComplete:R,hashFn:p,query:u,tag:v};this.listens.get(se).set(V,Se),this.connected_&&this.sendListen_(Se)}sendGet_(u){const p=this.outstandingGets_[u];this.sendRequest("g",p.request,v=>{delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),p.onComplete&&p.onComplete(v)})}sendListen_(u){const p=u.query,v=p._path.toString(),R=p._queryIdentifier;this.log_("Listen on "+v+" for "+R);const V={p:v};u.tag&&(V.q=p._queryObject,V.t=u.tag),V.h=u.hashFn(),this.sendRequest("q",V,Se=>{const He=Se.d,It=Se.s;d.warnOnListenWarnings_(He,p),(this.listens.get(v)&&this.listens.get(v).get(R))===u&&(this.log_("listen response",Se),"ok"!==It&&this.removeListen_(v,R),u.onComplete&&u.onComplete(It,He))})}static warnOnListenWarnings_(u,p){if(u&&"object"==typeof u&&(0,Ne.r3)(u,"w")){const v=(0,Ne.DV)(u,"w");if(Array.isArray(v)&&~v.indexOf("no_index")){const R='".indexOn": "'+p._queryParams.getIndex().toString()+'"',V=p._path.toString();fi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${R} at ${V} to your security rules for better performance.`)}}}refreshAuthToken(u){this.authToken_=u,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(u)}reduceReconnectDelayIfAdminCredential_(u){(u&&40===u.length||(0,Ne.GJ)(u))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(u){this.appCheckToken_=u,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const u=this.authToken_,p=(0,Ne.w9)(u)?"auth":"gauth",v={cred:u};null===this.authOverride_?v.noauth=!0:"object"==typeof this.authOverride_&&(v.authvar=this.authOverride_),this.sendRequest(p,v,R=>{const V=R.s,se=R.d||"error";this.authToken_===u&&("ok"===V?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(V,se))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},u=>{const p=u.s,v=u.d||"error";"ok"===p?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(p,v)})}unlisten(u,p){const v=u._path.toString(),R=u._queryIdentifier;this.log_("Unlisten called for "+v+" "+R),(0,Ne.hu)(u._queryParams.isDefault()||!u._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(v,R)&&this.connected_&&this.sendUnlisten_(v,R,u._queryObject,p)}sendUnlisten_(u,p,v,R){this.log_("Unlisten on "+u+" for "+p);const V={p:u};R&&(V.q=v,V.t=R),this.sendRequest("n",V)}onDisconnectPut(u,p,v){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",u,p,v):this.onDisconnectRequestQueue_.push({pathString:u,action:"o",data:p,onComplete:v})}onDisconnectMerge(u,p,v){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",u,p,v):this.onDisconnectRequestQueue_.push({pathString:u,action:"om",data:p,onComplete:v})}onDisconnectCancel(u,p){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",u,null,p):this.onDisconnectRequestQueue_.push({pathString:u,action:"oc",data:null,onComplete:p})}sendOnDisconnect_(u,p,v,R){const V={p,d:v};this.log_("onDisconnect "+u,V),this.sendRequest(u,V,se=>{R&&setTimeout(()=>{R(se.s,se.d)},Math.floor(0))})}put(u,p,v,R){this.putInternal("p",u,p,v,R)}merge(u,p,v,R){this.putInternal("m",u,p,v,R)}putInternal(u,p,v,R,V){this.initConnection_();const se={p,d:v};void 0!==V&&(se.h=V),this.outstandingPuts_.push({action:u,request:se,onComplete:R}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+p)}sendPut_(u){const p=this.outstandingPuts_[u].action,v=this.outstandingPuts_[u].request,R=this.outstandingPuts_[u].onComplete;this.outstandingPuts_[u].queued=this.connected_,this.sendRequest(p,v,V=>{this.log_(p+" response",V),delete this.outstandingPuts_[u],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),R&&R(V.s,V.d)})}reportStats(u){if(this.connected_){const p={c:u};this.log_("reportStats",p),this.sendRequest("s",p,v=>{"ok"!==v.s&&this.log_("reportStats","Error sending stats: "+v.d)})}}onDataMessage_(u){if("r"in u){this.log_("from server: "+(0,Ne.Wl)(u));const p=u.r,v=this.requestCBHash_[p];v&&(delete this.requestCBHash_[p],v(u.b))}else{if("error"in u)throw"A server-side error has occurred: "+u.error;"a"in u&&this.onDataPush_(u.a,u.b)}}onDataPush_(u,p){this.log_("handleServerMessage",u,p),"d"===u?this.onDataUpdate_(p.p,p.d,!1,p.t):"m"===u?this.onDataUpdate_(p.p,p.d,!0,p.t):"c"===u?this.onListenRevoked_(p.p,p.q):"ac"===u?this.onAuthRevoked_(p.s,p.d):"apc"===u?this.onAppCheckRevoked_(p.s,p.d):"sd"===u?this.onSecurityDebugPacket_(p):_i("Unrecognized action received from server: "+(0,Ne.Wl)(u)+"\nAre you using the latest client?")}onReady_(u,p){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(u),this.lastSessionId=p,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(u){(0,Ne.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(u))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(u){u&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=oa,this.realtime_||this.scheduleConnect_(0)),this.visible_=u}onOnline_(u){u?(this.log_("Browser went online."),this.reconnectDelay_=oa,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=oa),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const u=(new Date).getTime()-this.lastConnectionAttemptTime_;let p=Math.max(0,this.reconnectDelay_-u);p=Math.random()*p,this.log_("Trying to reconnect in "+p+"ms"),this.scheduleConnect_(p),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var u=this;return(0,ss.Z)(function*(){if(u.shouldReconnect_()){u.log_("Making a connection attempt"),u.lastConnectionAttemptTime_=(new Date).getTime(),u.lastConnectionEstablishedTime_=null;const p=u.onDataMessage_.bind(u),v=u.onReady_.bind(u),R=u.onRealtimeDisconnect_.bind(u),V=u.id+":"+d.nextConnectionId_++,se=u.lastSessionId;let Se=!1,He=null;const It=function(){He?He.close():(Se=!0,R())};u.realtime_={close:It,sendRequest:function(On){(0,Ne.hu)(He,"sendRequest call when we're not connected not allowed."),He.sendRequest(On)}};const Bt=u.forceTokenRefresh_;u.forceTokenRefresh_=!1;try{const[On,zn]=yield Promise.all([u.authTokenProvider_.getToken(Bt),u.appCheckTokenProvider_.getToken(Bt)]);Se?Li("getToken() completed but was canceled"):(Li("getToken() completed. Creating connection."),u.authToken_=On&&On.accessToken,u.appCheckToken_=zn&&zn.token,He=new kt(V,u.repoInfo_,u.applicationId_,u.appCheckToken_,u.authToken_,p,v,R,Xr=>{fi(Xr+" ("+u.repoInfo_.toString()+")"),u.interrupt("server_kill")},se))}catch(On){u.log_("Failed to get token: "+On),Se||(u.repoInfo_.nodeAdmin&&fi(On),It())}}})()}interrupt(u){Li("Interrupting connection for reason: "+u),this.interruptReasons_[u]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(u){Li("Resuming connection for reason: "+u),delete this.interruptReasons_[u],(0,Ne.xb)(this.interruptReasons_)&&(this.reconnectDelay_=oa,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(u){const p=u-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:p})}cancelSentTransactions_(){for(let u=0;u<this.outstandingPuts_.length;u++){const p=this.outstandingPuts_[u];p&&"h"in p.request&&p.queued&&(p.onComplete&&p.onComplete("disconnect"),delete this.outstandingPuts_[u],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(u,p){let v;v=p?p.map(V=>Xi(V)).join("$"):"default";const R=this.removeListen_(u,v);R&&R.onComplete&&R.onComplete("permission_denied")}removeListen_(u,p){const v=new oi(u).toString();let R;if(this.listens.has(v)){const V=this.listens.get(v);R=V.get(p),V.delete(p),0===V.size&&this.listens.delete(v)}else R=void 0;return R}onAuthRevoked_(u,p){Li("Auth token revoked: "+u+"/"+p),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===u||"permission_denied"===u)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(u,p){Li("App check token revoked: "+u+"/"+p),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===u||"permission_denied"===u)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(u){this.securityDebugCallback_?this.securityDebugCallback_(u):"msg"in u&&console.log("FIREBASE: "+u.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const u of this.listens.values())for(const p of u.values())this.sendListen_(p);for(let u=0;u<this.outstandingPuts_.length;u++)this.outstandingPuts_[u]&&this.sendPut_(u);for(;this.onDisconnectRequestQueue_.length;){const u=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(u.action,u.pathString,u.data,u.onComplete)}for(let u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}sendConnectStats_(){const u={};let p="js";(0,Ne.Yr)()&&(p=this.repoInfo_.nodeAdmin?"admin_node":"node"),u["sdk."+p+"."+Po.replace(/\./g,"-")]=1,(0,Ne.uI)()?u["framework.cordova"]=1:(0,Ne.b$)()&&(u["framework.reactnative"]=1),this.reportStats(u)}shouldReconnect_(){const u=lo.getInstance().currentlyOnline();return(0,Ne.xb)(this.interruptReasons_)&&u}}return d.nextPersistentConnectionId_=0,d.nextConnectionId_=0,d})();class Kr{constructor(l,u){this.name=l,this.node=u}static Wrap(l,u){return new Kr(l,u)}}class la{getCompare(){return this.compare.bind(this)}indexedValueChanged(l,u){const p=new Kr(Qi,l),v=new Kr(Qi,u);return 0!==this.compare(p,v)}minPost(){return Kr.MIN}}class Na extends la{static get __EMPTY_NODE(){return _l}static set __EMPTY_NODE(l){_l=l}compare(l,u){return ks(l.name,u.name)}isDefinedOn(l){throw(0,Ne.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(l,u){return!1}minPost(){return Kr.MIN}maxPost(){return new Kr(Ki,_l)}makePost(l,u){return(0,Ne.hu)("string"==typeof l,"KeyIndex indexValue must always be a string."),new Kr(l,_l)}toString(){return".key"}}const go=new Na;class F{constructor(l,u,p,v,R=null){this.isReverse_=v,this.resultGenerator_=R,this.nodeStack_=[];let V=1;for(;!l.isEmpty();)if(V=u?p(l.key,u):1,v&&(V*=-1),V<0)l=this.isReverse_?l.left:l.right;else{if(0===V){this.nodeStack_.push(l);break}this.nodeStack_.push(l),l=this.isReverse_?l.right:l.left}}getNext(){if(0===this.nodeStack_.length)return null;let u,l=this.nodeStack_.pop();if(u=this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value},this.isReverse_)for(l=l.left;!l.isEmpty();)this.nodeStack_.push(l),l=l.right;else for(l=l.right;!l.isEmpty();)this.nodeStack_.push(l),l=l.left;return u}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const l=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value}}}let Le,A=(()=>{class d{constructor(u,p,v,R,V){this.key=u,this.value=p,this.color=null!=v?v:d.RED,this.left=null!=R?R:U.EMPTY_NODE,this.right=null!=V?V:U.EMPTY_NODE}copy(u,p,v,R,V){return new d(null!=u?u:this.key,null!=p?p:this.value,null!=v?v:this.color,null!=R?R:this.left,null!=V?V:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(u){return this.left.inorderTraversal(u)||!!u(this.key,this.value)||this.right.inorderTraversal(u)}reverseTraversal(u){return this.right.reverseTraversal(u)||u(this.key,this.value)||this.left.reverseTraversal(u)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(u,p,v){let R=this;const V=v(u,R.key);return R=V<0?R.copy(null,null,null,R.left.insert(u,p,v),null):0===V?R.copy(null,p,null,null,null):R.copy(null,null,null,null,R.right.insert(u,p,v)),R.fixUp_()}removeMin_(){if(this.left.isEmpty())return U.EMPTY_NODE;let u=this;return!u.left.isRed_()&&!u.left.left.isRed_()&&(u=u.moveRedLeft_()),u=u.copy(null,null,null,u.left.removeMin_(),null),u.fixUp_()}remove(u,p){let v,R;if(v=this,p(u,v.key)<0)!v.left.isEmpty()&&!v.left.isRed_()&&!v.left.left.isRed_()&&(v=v.moveRedLeft_()),v=v.copy(null,null,null,v.left.remove(u,p),null);else{if(v.left.isRed_()&&(v=v.rotateRight_()),!v.right.isEmpty()&&!v.right.isRed_()&&!v.right.left.isRed_()&&(v=v.moveRedRight_()),0===p(u,v.key)){if(v.right.isEmpty())return U.EMPTY_NODE;R=v.right.min_(),v=v.copy(R.key,R.value,null,null,v.right.removeMin_())}v=v.copy(null,null,null,null,v.right.remove(u,p))}return v.fixUp_()}isRed_(){return this.color}fixUp_(){let u=this;return u.right.isRed_()&&!u.left.isRed_()&&(u=u.rotateLeft_()),u.left.isRed_()&&u.left.left.isRed_()&&(u=u.rotateRight_()),u.left.isRed_()&&u.right.isRed_()&&(u=u.colorFlip_()),u}moveRedLeft_(){let u=this.colorFlip_();return u.right.left.isRed_()&&(u=u.copy(null,null,null,null,u.right.rotateRight_()),u=u.rotateLeft_(),u=u.colorFlip_()),u}moveRedRight_(){let u=this.colorFlip_();return u.left.left.isRed_()&&(u=u.rotateRight_(),u=u.colorFlip_()),u}rotateLeft_(){const u=this.copy(null,null,d.RED,null,this.right.left);return this.right.copy(null,null,this.color,u,null)}rotateRight_(){const u=this.copy(null,null,d.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,u)}colorFlip_(){const u=this.left.copy(null,null,!this.left.color,null,null),p=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,u,p)}checkMaxDepth_(){const u=this.check_();return Math.pow(2,u)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const u=this.left.check_();if(u!==this.right.check_())throw new Error("Black depths differ");return u+(this.isRed_()?0:1)}}return d.RED=!0,d.BLACK=!1,d})();class U{constructor(l,u=U.EMPTY_NODE){this.comparator_=l,this.root_=u}insert(l,u){return new U(this.comparator_,this.root_.insert(l,u,this.comparator_).copy(null,null,A.BLACK,null,null))}remove(l){return new U(this.comparator_,this.root_.remove(l,this.comparator_).copy(null,null,A.BLACK,null,null))}get(l){let u,p=this.root_;for(;!p.isEmpty();){if(u=this.comparator_(l,p.key),0===u)return p.value;u<0?p=p.left:u>0&&(p=p.right)}return null}getPredecessorKey(l){let u,p=this.root_,v=null;for(;!p.isEmpty();){if(u=this.comparator_(l,p.key),0===u){if(p.left.isEmpty())return v?v.key:null;for(p=p.left;!p.right.isEmpty();)p=p.right;return p.key}u<0?p=p.left:u>0&&(v=p,p=p.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(l){return this.root_.inorderTraversal(l)}reverseTraversal(l){return this.root_.reverseTraversal(l)}getIterator(l){return new F(this.root_,null,this.comparator_,!1,l)}getIteratorFrom(l,u){return new F(this.root_,l,this.comparator_,!1,u)}getReverseIteratorFrom(l,u){return new F(this.root_,l,this.comparator_,!0,u)}getReverseIterator(l){return new F(this.root_,null,this.comparator_,!0,l)}}function X(d,l){return ks(d.name,l.name)}function ge(d,l){return ks(d,l)}U.EMPTY_NODE=new class{copy(l,u,p,v,R){return this}insert(l,u,p){return new A(l,u,null)}remove(l,u){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(l){return!1}reverseTraversal(l){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Pt=function(d){return"number"==typeof d?"number:"+K(d):"string:"+d},Cn=function(d){if(d.isLeafNode()){const l=d.val();(0,Ne.hu)("string"==typeof l||"number"==typeof l||"object"==typeof l&&(0,Ne.r3)(l,".sv"),"Priority must be a string or number.")}else(0,Ne.hu)(d===Le||d.isEmpty(),"priority of unexpected type.");(0,Ne.hu)(d===Le||d.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Lr,Br,vr,$n=(()=>{class d{constructor(u,p=d.__childrenNodeConstructor.EMPTY_NODE){this.value_=u,this.priorityNode_=p,this.lazyHash_=null,(0,Ne.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Cn(this.priorityNode_)}static set __childrenNodeConstructor(u){Lr=u}static get __childrenNodeConstructor(){return Lr}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(u){return new d(this.value_,u)}getImmediateChild(u){return".priority"===u?this.priorityNode_:d.__childrenNodeConstructor.EMPTY_NODE}getChild(u){return Mr(u)?this:".priority"===et(u)?this.priorityNode_:d.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(u,p){return null}updateImmediateChild(u,p){return".priority"===u?this.updatePriority(p):p.isEmpty()&&".priority"!==u?this:d.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(u,p).updatePriority(this.priorityNode_)}updateChild(u,p){const v=et(u);return null===v?p:p.isEmpty()&&".priority"!==v?this:((0,Ne.hu)(".priority"!==v||1===zt(u),".priority must be the last token in a path"),this.updateImmediateChild(v,d.__childrenNodeConstructor.EMPTY_NODE.updateChild(mr(u),p)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(u,p){return!1}val(u){return u&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let u="";this.priorityNode_.isEmpty()||(u+="priority:"+Pt(this.priorityNode_.val())+":");const p=typeof this.value_;u+=p+":",u+="number"===p?K(this.value_):this.value_,this.lazyHash_=no(u)}return this.lazyHash_}getValue(){return this.value_}compareTo(u){return u===d.__childrenNodeConstructor.EMPTY_NODE?1:u instanceof d.__childrenNodeConstructor?-1:((0,Ne.hu)(u.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(u))}compareToLeafNode_(u){const p=typeof u.value_,v=typeof this.value_,R=d.VALUE_TYPE_ORDER.indexOf(p),V=d.VALUE_TYPE_ORDER.indexOf(v);return(0,Ne.hu)(R>=0,"Unknown leaf type: "+p),(0,Ne.hu)(V>=0,"Unknown leaf type: "+v),R===V?"object"===v?0:this.value_<u.value_?-1:this.value_===u.value_?0:1:V-R}withIndex(){return this}isIndexed(){return!0}equals(u){if(u===this)return!0;if(u.isLeafNode()){const p=u;return this.value_===p.value_&&this.priorityNode_.equals(p.priorityNode_)}return!1}}return d.VALUE_TYPE_ORDER=["object","boolean","number","string"],d})();const Qr=new class extends la{compare(l,u){const p=l.node.getPriority(),v=u.node.getPriority(),R=p.compareTo(v);return 0===R?ks(l.name,u.name):R}isDefinedOn(l){return!l.getPriority().isEmpty()}indexedValueChanged(l,u){return!l.getPriority().equals(u.getPriority())}minPost(){return Kr.MIN}maxPost(){return new Kr(Ki,new $n("[PRIORITY-POST]",vr))}makePost(l,u){const p=Br(l);return new Kr(u,new $n("[PRIORITY-POST]",p))}toString(){return".priority"}},va=Math.log(2);class us{constructor(l){this.count=parseInt(Math.log(l+1)/va,10),this.current_=this.count-1;const v=(R=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=l+1&v}nextBitIsOne(){const l=!(this.bits_&1<<this.current_);return this.current_--,l}}const Pa=function(d,l,u,p){d.sort(l);const v=function(Se,He){const It=He-Se;let St,Bt;if(0===It)return null;if(1===It)return St=d[Se],Bt=u?u(St):St,new A(Bt,St.node,A.BLACK,null,null);{const On=parseInt(It/2,10)+Se,zn=v(Se,On),Xr=v(On+1,He);return St=d[On],Bt=u?u(St):St,new A(Bt,St.node,A.BLACK,zn,Xr)}},se=function(Se){let He=null,It=null,St=d.length;const Bt=function(zn,Xr){const ds=St-zn,Mo=St;St-=zn;const pa=v(ds+1,Mo),Aa=d[ds],hs=u?u(Aa):Aa;On(new A(hs,Aa.node,Xr,null,pa))},On=function(zn){He?(He.left=zn,He=zn):(It=zn,He=zn)};for(let zn=0;zn<Se.count;++zn){const Xr=Se.nextBitIsOne(),ds=Math.pow(2,Se.count-(zn+1));Xr?Bt(ds,A.BLACK):(Bt(ds,A.BLACK),Bt(ds,A.RED))}return It}(new us(d.length));return new U(p||l,se)};let Yo;const Si={};class Ai{constructor(l,u){this.indexes_=l,this.indexSet_=u}static get Default(){return(0,Ne.hu)(Si&&Qr,"ChildrenNode.ts has not been loaded"),Yo=Yo||new Ai({".priority":Si},{".priority":Qr}),Yo}get(l){const u=(0,Ne.DV)(this.indexes_,l);if(!u)throw new Error("No index defined for "+l);return u instanceof U?u:null}hasIndex(l){return(0,Ne.r3)(this.indexSet_,l.toString())}addIndex(l,u){(0,Ne.hu)(l!==go,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const p=[];let v=!1;const R=u.getIterator(Kr.Wrap);let se,V=R.getNext();for(;V;)v=v||l.isDefinedOn(V.node),p.push(V),V=R.getNext();se=v?Pa(p,l.getCompare()):Si;const Se=l.toString(),He=Object.assign({},this.indexSet_);He[Se]=l;const It=Object.assign({},this.indexes_);return It[Se]=se,new Ai(It,He)}addToIndexes(l,u){const p=(0,Ne.UI)(this.indexes_,(v,R)=>{const V=(0,Ne.DV)(this.indexSet_,R);if((0,Ne.hu)(V,"Missing index implementation for "+R),v===Si){if(V.isDefinedOn(l.node)){const se=[],Se=u.getIterator(Kr.Wrap);let He=Se.getNext();for(;He;)He.name!==l.name&&se.push(He),He=Se.getNext();return se.push(l),Pa(se,V.getCompare())}return Si}{const se=u.get(l.name);let Se=v;return se&&(Se=Se.remove(new Kr(l.name,se))),Se.insert(l,l.node)}});return new Ai(p,this.indexSet_)}removeFromIndexes(l,u){const p=(0,Ne.UI)(this.indexes_,v=>{if(v===Si)return v;{const R=u.get(l.name);return R?v.remove(new Kr(l.name,R)):v}});return new Ai(p,this.indexSet_)}}let ka,er=(()=>{class d{constructor(u,p,v){this.children_=u,this.priorityNode_=p,this.indexMap_=v,this.lazyHash_=null,this.priorityNode_&&Cn(this.priorityNode_),this.children_.isEmpty()&&(0,Ne.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ka||(ka=new d(new U(ge),null,Ai.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ka}updatePriority(u){return this.children_.isEmpty()?this:new d(this.children_,u,this.indexMap_)}getImmediateChild(u){if(".priority"===u)return this.getPriority();{const p=this.children_.get(u);return null===p?ka:p}}getChild(u){const p=et(u);return null===p?this:this.getImmediateChild(p).getChild(mr(u))}hasChild(u){return null!==this.children_.get(u)}updateImmediateChild(u,p){if((0,Ne.hu)(p,"We should always be passing snapshot nodes"),".priority"===u)return this.updatePriority(p);{const v=new Kr(u,p);let R,V;p.isEmpty()?(R=this.children_.remove(u),V=this.indexMap_.removeFromIndexes(v,this.children_)):(R=this.children_.insert(u,p),V=this.indexMap_.addToIndexes(v,this.children_));const se=R.isEmpty()?ka:this.priorityNode_;return new d(R,se,V)}}updateChild(u,p){const v=et(u);if(null===v)return p;{(0,Ne.hu)(".priority"!==et(u)||1===zt(u),".priority must be the last token in a path");const R=this.getImmediateChild(v).updateChild(mr(u),p);return this.updateImmediateChild(v,R)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(u){if(this.isEmpty())return null;const p={};let v=0,R=0,V=!0;if(this.forEachChild(Qr,(se,Se)=>{p[se]=Se.val(u),v++,V&&d.INTEGER_REGEXP_.test(se)?R=Math.max(R,Number(se)):V=!1}),!u&&V&&R<2*v){const se=[];for(const Se in p)se[Se]=p[Se];return se}return u&&!this.getPriority().isEmpty()&&(p[".priority"]=this.getPriority().val()),p}hash(){if(null===this.lazyHash_){let u="";this.getPriority().isEmpty()||(u+="priority:"+Pt(this.getPriority().val())+":"),this.forEachChild(Qr,(p,v)=>{const R=v.hash();""!==R&&(u+=":"+p+":"+R)}),this.lazyHash_=""===u?"":no(u)}return this.lazyHash_}getPredecessorChildName(u,p,v){const R=this.resolveIndex_(v);if(R){const V=R.getPredecessorKey(new Kr(u,p));return V?V.name:null}return this.children_.getPredecessorKey(u)}getFirstChildName(u){const p=this.resolveIndex_(u);if(p){const v=p.minKey();return v&&v.name}return this.children_.minKey()}getFirstChild(u){const p=this.getFirstChildName(u);return p?new Kr(p,this.children_.get(p)):null}getLastChildName(u){const p=this.resolveIndex_(u);if(p){const v=p.maxKey();return v&&v.name}return this.children_.maxKey()}getLastChild(u){const p=this.getLastChildName(u);return p?new Kr(p,this.children_.get(p)):null}forEachChild(u,p){const v=this.resolveIndex_(u);return v?v.inorderTraversal(R=>p(R.name,R.node)):this.children_.inorderTraversal(p)}getIterator(u){return this.getIteratorFrom(u.minPost(),u)}getIteratorFrom(u,p){const v=this.resolveIndex_(p);if(v)return v.getIteratorFrom(u,R=>R);{const R=this.children_.getIteratorFrom(u.name,Kr.Wrap);let V=R.peek();for(;null!=V&&p.compare(V,u)<0;)R.getNext(),V=R.peek();return R}}getReverseIterator(u){return this.getReverseIteratorFrom(u.maxPost(),u)}getReverseIteratorFrom(u,p){const v=this.resolveIndex_(p);if(v)return v.getReverseIteratorFrom(u,R=>R);{const R=this.children_.getReverseIteratorFrom(u.name,Kr.Wrap);let V=R.peek();for(;null!=V&&p.compare(V,u)>0;)R.getNext(),V=R.peek();return R}}compareTo(u){return this.isEmpty()?u.isEmpty()?0:-1:u.isLeafNode()||u.isEmpty()?1:u===_u?-1:0}withIndex(u){if(u===go||this.indexMap_.hasIndex(u))return this;{const p=this.indexMap_.addIndex(u,this.children_);return new d(this.children_,this.priorityNode_,p)}}isIndexed(u){return u===go||this.indexMap_.hasIndex(u)}equals(u){if(u===this)return!0;if(u.isLeafNode())return!1;{const p=u;if(this.getPriority().equals(p.getPriority())){if(this.children_.count()===p.children_.count()){const v=this.getIterator(Qr),R=p.getIterator(Qr);let V=v.getNext(),se=R.getNext();for(;V&&se;){if(V.name!==se.name||!V.node.equals(se.node))return!1;V=v.getNext(),se=R.getNext()}return null===V&&null===se}return!1}return!1}}resolveIndex_(u){return u===go?null:this.indexMap_.get(u.toString())}}return d.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,d})();const _u=new class extends er{constructor(){super(new U(ge),er.EMPTY_NODE,Ai.Default)}compareTo(l){return l===this?0:1}equals(l){return l===this}getPriority(){return this}getImmediateChild(l){return er.EMPTY_NODE}isEmpty(){return!1}};function ni(d,l=null){if(null===d)return er.EMPTY_NODE;if("object"==typeof d&&".priority"in d&&(l=d[".priority"]),(0,Ne.hu)(null===l||"string"==typeof l||"number"==typeof l||"object"==typeof l&&".sv"in l,"Invalid priority type found: "+typeof l),"object"==typeof d&&".value"in d&&null!==d[".value"]&&(d=d[".value"]),"object"!=typeof d||".sv"in d)return new $n(d,ni(l));if(d instanceof Array){let u=er.EMPTY_NODE;return le(d,(p,v)=>{if((0,Ne.r3)(d,p)&&"."!==p.substring(0,1)){const R=ni(v);(R.isLeafNode()||!R.isEmpty())&&(u=u.updateImmediateChild(p,R))}}),u.updatePriority(ni(l))}{const u=[];let p=!1;if(le(d,(V,se)=>{if("."!==V.substring(0,1)){const Se=ni(se);Se.isEmpty()||(p=p||!Se.getPriority().isEmpty(),u.push(new Kr(V,Se)))}}),0===u.length)return er.EMPTY_NODE;const R=Pa(u,X,V=>V.name,ge);if(p){const V=Pa(u,Qr.getCompare());return new er(R,ni(l),new Ai({".priority":V},{".priority":Qr}))}return new er(R,ni(l),Ai.Default)}}Object.defineProperties(Kr,{MIN:{value:new Kr(Qi,er.EMPTY_NODE)},MAX:{value:new Kr(Ki,_u)}}),Na.__EMPTY_NODE=er.EMPTY_NODE,$n.__childrenNodeConstructor=er,Le=_u,vr=_u,function(d){Br=d}(ni);class Ec extends la{constructor(l){super(),this.indexPath_=l,(0,Ne.hu)(!Mr(l)&&".priority"!==et(l),"Can't create PathIndex with empty path or .priority key")}extractChild(l){return l.getChild(this.indexPath_)}isDefinedOn(l){return!l.getChild(this.indexPath_).isEmpty()}compare(l,u){const p=this.extractChild(l.node),v=this.extractChild(u.node),R=p.compareTo(v);return 0===R?ks(l.name,u.name):R}makePost(l,u){const p=ni(l),v=er.EMPTY_NODE.updateChild(this.indexPath_,p);return new Kr(u,v)}maxPost(){const l=er.EMPTY_NODE.updateChild(this.indexPath_,_u);return new Kr(Ki,l)}toString(){return Bs(this.indexPath_,0).join("/")}}const ud=new class extends la{compare(l,u){const p=l.node.compareTo(u.node);return 0===p?ks(l.name,u.name):p}isDefinedOn(l){return!0}indexedValueChanged(l,u){return!l.equals(u)}minPost(){return Kr.MIN}maxPost(){return Kr.MAX}makePost(l,u){const p=ni(l);return new Kr(u,p)}toString(){return".value"}},Co="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Xl=function(){let d=0;const l=[];return function(u){const p=u===d;let v;d=u;const R=new Array(8);for(v=7;v>=0;v--)R[v]=Co.charAt(u%64),u=Math.floor(u/64);(0,Ne.hu)(0===u,"Cannot push at time == 0");let V=R.join("");if(p){for(v=11;v>=0&&63===l[v];v--)l[v]=0;l[v]++}else for(v=0;v<12;v++)l[v]=Math.floor(64*Math.random());for(v=0;v<12;v++)V+=Co.charAt(l[v]);return(0,Ne.hu)(20===V.length,"nextPushId: Length should be 20."),V}}(),rl=function(d){if(d===""+$)return"-";const l=k(d);if(null!=l)return""+(l+1);const u=new Array(d.length);for(let V=0;V<u.length;V++)u[V]=d.charAt(V);if(u.length<786)return u.push("-"),u.join("");let p=u.length-1;for(;p>=0&&"z"===u[p];)p--;if(-1===p)return Ki;const R=Co.charAt(Co.indexOf(u[p])+1);return u[p]=R,u.slice(0,p+1).join("")},Jl=function(d){if(d===""+W)return Qi;const l=k(d);if(null!=l)return""+(l-1);const u=new Array(d.length);for(let p=0;p<u.length;p++)u[p]=d.charAt(p);return"-"===u[u.length-1]?1===u.length?""+$:(delete u[u.length-1],u.join("")):(u[u.length-1]=Co.charAt(Co.indexOf(u[u.length-1])-1),u.join("")+"z".repeat(786-u.length))};function Ea(d){return{type:"value",snapshotNode:d}}function cs(d,l){return{type:"child_added",snapshotNode:l,childName:d}}function xs(d,l){return{type:"child_removed",snapshotNode:l,childName:d}}function Ko(d,l,u){return{type:"child_changed",snapshotNode:l,childName:d,oldSnap:u}}class wo{constructor(l){this.index_=l}updateChild(l,u,p,v,R,V){(0,Ne.hu)(l.isIndexed(this.index_),"A node must be indexed if only a child is updated");const se=l.getImmediateChild(u);return se.getChild(v).equals(p.getChild(v))&&se.isEmpty()===p.isEmpty()||(null!=V&&(p.isEmpty()?l.hasChild(u)?V.trackChildChange(xs(u,se)):(0,Ne.hu)(l.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):se.isEmpty()?V.trackChildChange(cs(u,p)):V.trackChildChange(Ko(u,p,se))),l.isLeafNode()&&p.isEmpty())?l:l.updateImmediateChild(u,p).withIndex(this.index_)}updateFullNode(l,u,p){return null!=p&&(l.isLeafNode()||l.forEachChild(Qr,(v,R)=>{u.hasChild(v)||p.trackChildChange(xs(v,R))}),u.isLeafNode()||u.forEachChild(Qr,(v,R)=>{if(l.hasChild(v)){const V=l.getImmediateChild(v);V.equals(R)||p.trackChildChange(Ko(v,R,V))}else p.trackChildChange(cs(v,R))})),u.withIndex(this.index_)}updatePriority(l,u){return l.isEmpty()?er.EMPTY_NODE:l.updatePriority(u)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Ia{constructor(l){this.indexedFilter_=new wo(l.getIndex()),this.index_=l.getIndex(),this.startPost_=Ia.getStartPost_(l),this.endPost_=Ia.getEndPost_(l)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(l){return this.index_.compare(this.getStartPost(),l)<=0&&this.index_.compare(l,this.getEndPost())<=0}updateChild(l,u,p,v,R,V){return this.matches(new Kr(u,p))||(p=er.EMPTY_NODE),this.indexedFilter_.updateChild(l,u,p,v,R,V)}updateFullNode(l,u,p){u.isLeafNode()&&(u=er.EMPTY_NODE);let v=u.withIndex(this.index_);v=v.updatePriority(er.EMPTY_NODE);const R=this;return u.forEachChild(Qr,(V,se)=>{R.matches(new Kr(V,se))||(v=v.updateImmediateChild(V,er.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(l,v,p)}updatePriority(l,u){return l}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(l){if(l.hasStart()){const u=l.getIndexStartName();return l.getIndex().makePost(l.getIndexStartValue(),u)}return l.getIndex().minPost()}static getEndPost_(l){if(l.hasEnd()){const u=l.getIndexEndName();return l.getIndex().makePost(l.getIndexEndValue(),u)}return l.getIndex().maxPost()}}class il{constructor(l){this.rangedFilter_=new Ia(l),this.index_=l.getIndex(),this.limit_=l.getLimit(),this.reverse_=!l.isViewFromLeft()}updateChild(l,u,p,v,R,V){return this.rangedFilter_.matches(new Kr(u,p))||(p=er.EMPTY_NODE),l.getImmediateChild(u).equals(p)?l:l.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(l,u,p,v,R,V):this.fullLimitUpdateChild_(l,u,p,R,V)}updateFullNode(l,u,p){let v;if(u.isLeafNode()||u.isEmpty())v=er.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<u.numChildren()&&u.isIndexed(this.index_)){let R;v=er.EMPTY_NODE.withIndex(this.index_),R=this.reverse_?u.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):u.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let V=0;for(;R.hasNext()&&V<this.limit_;){const se=R.getNext();let Se;if(Se=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),se)<=0:this.index_.compare(se,this.rangedFilter_.getEndPost())<=0,!Se)break;v=v.updateImmediateChild(se.name,se.node),V++}}else{let R,V,se,Se;if(v=u.withIndex(this.index_),v=v.updatePriority(er.EMPTY_NODE),this.reverse_){Se=v.getReverseIterator(this.index_),R=this.rangedFilter_.getEndPost(),V=this.rangedFilter_.getStartPost();const St=this.index_.getCompare();se=(Bt,On)=>St(On,Bt)}else Se=v.getIterator(this.index_),R=this.rangedFilter_.getStartPost(),V=this.rangedFilter_.getEndPost(),se=this.index_.getCompare();let He=0,It=!1;for(;Se.hasNext();){const St=Se.getNext();!It&&se(R,St)<=0&&(It=!0),It&&He<this.limit_&&se(St,V)<=0?He++:v=v.updateImmediateChild(St.name,er.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(l,v,p)}updatePriority(l,u){return l}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(l,u,p,v,R){let V;if(this.reverse_){const St=this.index_.getCompare();V=(Bt,On)=>St(On,Bt)}else V=this.index_.getCompare();const se=l;(0,Ne.hu)(se.numChildren()===this.limit_,"");const Se=new Kr(u,p),He=this.reverse_?se.getFirstChild(this.index_):se.getLastChild(this.index_),It=this.rangedFilter_.matches(Se);if(se.hasChild(u)){const St=se.getImmediateChild(u);let Bt=v.getChildAfterChild(this.index_,He,this.reverse_);for(;null!=Bt&&(Bt.name===u||se.hasChild(Bt.name));)Bt=v.getChildAfterChild(this.index_,Bt,this.reverse_);const On=null==Bt?1:V(Bt,Se);if(It&&!p.isEmpty()&&On>=0)return null!=R&&R.trackChildChange(Ko(u,p,St)),se.updateImmediateChild(u,p);{null!=R&&R.trackChildChange(xs(u,St));const Xr=se.updateImmediateChild(u,er.EMPTY_NODE);return null!=Bt&&this.rangedFilter_.matches(Bt)?(null!=R&&R.trackChildChange(cs(Bt.name,Bt.node)),Xr.updateImmediateChild(Bt.name,Bt.node)):Xr}}return p.isEmpty()?l:It&&V(He,Se)>=0?(null!=R&&(R.trackChildChange(xs(He.name,He.node)),R.trackChildChange(cs(u,p))),se.updateImmediateChild(u,p).updateImmediateChild(He.name,er.EMPTY_NODE)):l}}class Pl{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Qr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Ne.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Ne.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Qi}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Ne.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Ne.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ki}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Ne.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Qr}copy(){const l=new Pl;return l.limitSet_=this.limitSet_,l.limit_=this.limit_,l.startSet_=this.startSet_,l.indexStartValue_=this.indexStartValue_,l.startNameSet_=this.startNameSet_,l.indexStartName_=this.indexStartName_,l.endSet_=this.endSet_,l.indexEndValue_=this.indexEndValue_,l.endNameSet_=this.endNameSet_,l.indexEndName_=this.indexEndName_,l.index_=this.index_,l.viewFrom_=this.viewFrom_,l}}function Ks(d,l,u){const p=d.copy();return p.startSet_=!0,void 0===l&&(l=null),p.indexStartValue_=l,null!=u?(p.startNameSet_=!0,p.indexStartName_=u):(p.startNameSet_=!1,p.indexStartName_=""),p}function Fa(d,l,u){const p=d.copy();return p.endSet_=!0,void 0===l&&(l=null),p.indexEndValue_=l,void 0!==u?(p.endNameSet_=!0,p.indexEndName_=u):(p.endNameSet_=!1,p.indexEndName_=""),p}function eu(d,l){const u=d.copy();return u.index_=l,u}function Ca(d){const l={};if(d.isDefault())return l;let u;return d.index_===Qr?u="$priority":d.index_===ud?u="$value":d.index_===go?u="$key":((0,Ne.hu)(d.index_ instanceof Ec,"Unrecognized index type!"),u=d.index_.toString()),l.orderBy=(0,Ne.Wl)(u),d.startSet_&&(l.startAt=(0,Ne.Wl)(d.indexStartValue_),d.startNameSet_&&(l.startAt+=","+(0,Ne.Wl)(d.indexStartName_))),d.endSet_&&(l.endAt=(0,Ne.Wl)(d.indexEndValue_),d.endNameSet_&&(l.endAt+=","+(0,Ne.Wl)(d.indexEndName_))),d.limitSet_&&(d.isViewFromLeft()?l.limitToFirst=d.limit_:l.limitToLast=d.limit_),l}function Hu(d){const l={};if(d.startSet_&&(l.sp=d.indexStartValue_,d.startNameSet_&&(l.sn=d.indexStartName_)),d.endSet_&&(l.ep=d.indexEndValue_,d.endNameSet_&&(l.en=d.indexEndName_)),d.limitSet_){l.l=d.limit_;let u=d.viewFrom_;""===u&&(u=d.isViewFromLeft()?"l":"r"),l.vf=u}return d.index_!==Qr&&(l.i=d.index_.toString()),l}class sl extends Jn{constructor(l,u,p,v){super(),this.repoInfo_=l,this.onDataUpdate_=u,this.authTokenProvider_=p,this.appCheckTokenProvider_=v,this.log_=Gs("p:rest:"),this.listens_={}}reportStats(l){throw new Error("Method not implemented.")}static getListenId_(l,u){return void 0!==u?"tag$"+u:((0,Ne.hu)(l._queryParams.isDefault(),"should have a tag if it's not a default query."),l._path.toString())}listen(l,u,p,v){const R=l._path.toString();this.log_("Listen called for "+R+" "+l._queryIdentifier);const V=sl.getListenId_(l,p),se={};this.listens_[V]=se;const Se=Ca(l._queryParams);this.restRequest_(R+".json",Se,(He,It)=>{let St=It;if(404===He&&(St=null,He=null),null===He&&this.onDataUpdate_(R,St,!1,p),(0,Ne.DV)(this.listens_,V)===se){let Bt;Bt=He?401===He?"permission_denied":"rest_error:"+He:"ok",v(Bt,null)}})}unlisten(l,u){const p=sl.getListenId_(l,u);delete this.listens_[p]}get(l){const u=Ca(l._queryParams),p=l._path.toString(),v=new Ne.BH;return this.restRequest_(p+".json",u,(R,V)=>{let se=V;404===R&&(se=null,R=null),null===R?(this.onDataUpdate_(p,se,!1,null),v.resolve(se)):v.reject(new Error(se))}),v.promise}refreshAuthToken(l){}restRequest_(l,u={},p){return u.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([v,R])=>{v&&v.accessToken&&(u.auth=v.accessToken),R&&R.token&&(u.ac=R.token);const V=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+l+"?ns="+this.repoInfo_.namespace+(0,Ne.xO)(u);this.log_("Sending REST request for "+V);const se=new XMLHttpRequest;se.onreadystatechange=()=>{if(p&&4===se.readyState){this.log_("REST Response for "+V+" received. status:",se.status,"response:",se.responseText);let Se=null;if(se.status>=200&&se.status<300){try{Se=(0,Ne.cI)(se.responseText)}catch(He){fi("Failed to parse JSON response for "+V+": "+se.responseText)}p(null,Se)}else 401!==se.status&&404!==se.status&&fi("Got unsuccessful REST response for "+V+" Status: "+se.status),p(se.status);p=null}},se.open("GET",V,!0),se.send()})}}class tu{constructor(){this.rootNode_=er.EMPTY_NODE}getNode(l){return this.rootNode_.getChild(l)}updateSnapshot(l,u){this.rootNode_=this.rootNode_.updateChild(l,u)}}function nu(){return{value:null,children:new Map}}function La(d,l,u){if(Mr(l))d.value=u,d.children.clear();else if(null!==d.value)d.value=d.value.updateChild(l,u);else{const p=et(l);d.children.has(p)||d.children.set(p,nu()),La(d.children.get(p),l=mr(l),u)}}function Il(d,l){if(Mr(l))return d.value=null,d.children.clear(),!0;if(null!==d.value){if(d.value.isLeafNode())return!1;{const u=d.value;return d.value=null,u.forEachChild(Qr,(p,v)=>{La(d,new oi(p),v)}),Il(d,l)}}if(d.children.size>0){const u=et(l);return l=mr(l),d.children.has(u)&&Il(d.children.get(u),l)&&d.children.delete(u),0===d.children.size}return!0}function L(d,l,u){null!==d.value?u(l,d.value):function(d,l){d.children.forEach((u,p)=>{l(p,u)})}(d,(p,v)=>{L(v,new oi(l.toString()+"/"+p),u)})}class fe{constructor(l){this.collection_=l,this.last_=null}get(){const l=this.collection_.get(),u=Object.assign({},l);return this.last_&&le(this.last_,(p,v)=>{u[p]=u[p]-v}),this.last_=l,u}}class en{constructor(l,u){this.server_=u,this.statsToReport_={},this.statsListener_=new fe(l);const p=1e4+2e4*Math.random();an(this.reportStats_.bind(this),Math.floor(p))}reportStats_(){const l=this.statsListener_.get(),u={};let p=!1;le(l,(v,R)=>{R>0&&(0,Ne.r3)(this.statsToReport_,v)&&(u[v]=R,p=!0)}),p&&this.server_.reportStats(u),an(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var In=(()=>(function(d){d[d.OVERWRITE=0]="OVERWRITE",d[d.MERGE=1]="MERGE",d[d.ACK_USER_WRITE=2]="ACK_USER_WRITE",d[d.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(In||(In={})),In))();function wr(d){return{fromUser:!1,fromServer:!0,queryId:d,tagged:!0}}class rr{constructor(l,u,p){this.path=l,this.affectedTree=u,this.revert=p,this.type=In.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(l){if(Mr(this.path)){if(null!=this.affectedTree.value)return(0,Ne.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const u=this.affectedTree.subtree(new oi(l));return new rr(Jt(),u,this.revert)}}return(0,Ne.hu)(et(this.path)===l,"operationForChild called for unrelated child."),new rr(mr(this.path),this.affectedTree,this.revert)}}class Pi{constructor(l,u){this.source=l,this.path=u,this.type=In.LISTEN_COMPLETE}operationForChild(l){return Mr(this.path)?new Pi(this.source,Jt()):new Pi(this.source,mr(this.path))}}class ui{constructor(l,u,p){this.source=l,this.path=u,this.snap=p,this.type=In.OVERWRITE}operationForChild(l){return Mr(this.path)?new ui(this.source,Jt(),this.snap.getImmediateChild(l)):new ui(this.source,mr(this.path),this.snap)}}class wi{constructor(l,u,p){this.source=l,this.path=u,this.children=p,this.type=In.MERGE}operationForChild(l){if(Mr(this.path)){const u=this.children.subtree(new oi(l));return u.isEmpty()?null:u.value?new ui(this.source,Jt(),u.value):new wi(this.source,Jt(),u)}return(0,Ne.hu)(et(this.path)===l,"Can't get a merge for a child not on the path of the operation"),new wi(this.source,mr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Do{constructor(l,u,p){this.node_=l,this.fullyInitialized_=u,this.filtered_=p}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(l){if(Mr(l))return this.isFullyInitialized()&&!this.filtered_;const u=et(l);return this.isCompleteForChild(u)}isCompleteForChild(l){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(l)}getNode(){return this.node_}}class vu{constructor(l){this.query_=l,this.index_=this.query_._queryParams.getIndex()}}function wa(d,l,u,p,v,R){const V=p.filter(se=>se.type===u);V.sort((se,Se)=>function(d,l,u){if(null==l.childName||null==u.childName)throw(0,Ne.g5)("Should only compare child_ events.");const p=new Kr(l.childName,l.snapshotNode),v=new Kr(u.childName,u.snapshotNode);return d.index_.compare(p,v)}(d,se,Se)),V.forEach(se=>{const Se=function(d,l,u){return"value"===l.type||"child_removed"===l.type||(l.prevName=u.getPredecessorChildName(l.childName,l.snapshotNode,d.index_)),l}(d,se,R);v.forEach(He=>{He.respondsTo(se.type)&&l.push(He.createEvent(Se,d.query_))})})}function ha(d,l){return{eventCache:d,serverCache:l}}function $o(d,l,u,p){return ha(new Do(l,u,p),d.serverCache)}function Ba(d,l,u,p){return ha(d.eventCache,new Do(l,u,p))}function Da(d){return d.eventCache.isFullyInitialized()?d.eventCache.getNode():null}function $a(d){return d.serverCache.isFullyInitialized()?d.serverCache.getNode():null}let Ua;class Gi{constructor(l,u=(()=>(Ua||(Ua=new U(ta)),Ua))()){this.value=l,this.children=u}static fromObject(l){let u=new Gi(null);return le(l,(p,v)=>{u=u.set(new oi(p),v)}),u}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(l,u){if(null!=this.value&&u(this.value))return{path:Jt(),value:this.value};if(Mr(l))return null;{const p=et(l),v=this.children.get(p);if(null!==v){const R=v.findRootMostMatchingPathAndValue(mr(l),u);return null!=R?{path:Ui(new oi(p),R.path),value:R.value}:null}return null}}findRootMostValueAndPath(l){return this.findRootMostMatchingPathAndValue(l,()=>!0)}subtree(l){if(Mr(l))return this;{const u=et(l),p=this.children.get(u);return null!==p?p.subtree(mr(l)):new Gi(null)}}set(l,u){if(Mr(l))return new Gi(u,this.children);{const p=et(l),R=(this.children.get(p)||new Gi(null)).set(mr(l),u),V=this.children.insert(p,R);return new Gi(this.value,V)}}remove(l){if(Mr(l))return this.children.isEmpty()?new Gi(null):new Gi(null,this.children);{const u=et(l),p=this.children.get(u);if(p){const v=p.remove(mr(l));let R;return R=v.isEmpty()?this.children.remove(u):this.children.insert(u,v),null===this.value&&R.isEmpty()?new Gi(null):new Gi(this.value,R)}return this}}get(l){if(Mr(l))return this.value;{const u=et(l),p=this.children.get(u);return p?p.get(mr(l)):null}}setTree(l,u){if(Mr(l))return u;{const p=et(l),R=(this.children.get(p)||new Gi(null)).setTree(mr(l),u);let V;return V=R.isEmpty()?this.children.remove(p):this.children.insert(p,R),new Gi(this.value,V)}}fold(l){return this.fold_(Jt(),l)}fold_(l,u){const p={};return this.children.inorderTraversal((v,R)=>{p[v]=R.fold_(Ui(l,v),u)}),u(l,this.value,p)}findOnPath(l,u){return this.findOnPath_(l,Jt(),u)}findOnPath_(l,u,p){const v=!!this.value&&p(u,this.value);if(v)return v;if(Mr(l))return null;{const R=et(l),V=this.children.get(R);return V?V.findOnPath_(mr(l),Ui(u,R),p):null}}foreachOnPath(l,u){return this.foreachOnPath_(l,Jt(),u)}foreachOnPath_(l,u,p){if(Mr(l))return this;{this.value&&p(u,this.value);const v=et(l),R=this.children.get(v);return R?R.foreachOnPath_(mr(l),Ui(u,v),p):new Gi(null)}}foreach(l){this.foreach_(Jt(),l)}foreach_(l,u){this.children.inorderTraversal((p,v)=>{v.foreach_(Ui(l,p),u)}),this.value&&u(l,this.value)}foreachChild(l){this.children.inorderTraversal((u,p)=>{p.value&&l(u,p.value)})}}class Zs{constructor(l){this.writeTree_=l}static empty(){return new Zs(new Gi(null))}}function Fl(d,l,u){if(Mr(l))return new Zs(new Gi(u));{const p=d.writeTree_.findRootMostValueAndPath(l);if(null!=p){const v=p.path;let R=p.value;const V=as(v,l);return R=R.updateChild(V,u),new Zs(d.writeTree_.set(v,R))}{const v=new Gi(u),R=d.writeTree_.setTree(l,v);return new Zs(R)}}}function Wu(d,l,u){let p=d;return le(u,(v,R)=>{p=Fl(p,Ui(l,v),R)}),p}function Gu(d,l){if(Mr(l))return Zs.empty();{const u=d.writeTree_.setTree(l,new Gi(null));return new Zs(u)}}function Ic(d,l){return null!=To(d,l)}function To(d,l){const u=d.writeTree_.findRootMostValueAndPath(l);return null!=u?d.writeTree_.get(u.path).getChild(as(u.path,l)):null}function Rs(d){const l=[],u=d.writeTree_.value;return null!=u?u.isLeafNode()||u.forEachChild(Qr,(p,v)=>{l.push(new Kr(p,v))}):d.writeTree_.children.inorderTraversal((p,v)=>{null!=v.value&&l.push(new Kr(p,v.value))}),l}function ol(d,l){if(Mr(l))return d;{const u=To(d,l);return new Zs(null!=u?new Gi(u):d.writeTree_.subtree(l))}}function ru(d){return d.writeTree_.isEmpty()}function bl(d,l){return zu(Jt(),d.writeTree_,l)}function zu(d,l,u){if(null!=l.value)return u.updateChild(d,l.value);{let p=null;return l.children.inorderTraversal((v,R)=>{".priority"===v?((0,Ne.hu)(null!==R.value,"Priority writes must always be leaf nodes"),p=R.value):u=zu(Ui(d,v),R,u)}),!u.getChild(d).isEmpty()&&null!==p&&(u=u.updateChild(Ui(d,".priority"),p)),u}}function qu(d,l){return Ku(l,d)}function bc(d,l){if(d.snap)return $s(d.path,l);for(const u in d.children)if(d.children.hasOwnProperty(u)&&$s(Ui(d.path,u),l))return!0;return!1}function Cc(d){return d.visible}function dd(d,l,u){let p=Zs.empty();for(let v=0;v<d.length;++v){const R=d[v];if(l(R)){const V=R.path;let se;if(R.snap)$s(u,V)?(se=as(u,V),p=Fl(p,se,R.snap)):$s(V,u)&&(se=as(V,u),p=Fl(p,Jt(),R.snap.getChild(se)));else{if(!R.children)throw(0,Ne.g5)("WriteRecord should have .snap or .children");if($s(u,V))se=as(u,V),p=Wu(p,se,R.children);else if($s(V,u))if(se=as(V,u),Mr(se))p=Wu(p,Jt(),R.children);else{const Se=(0,Ne.DV)(R.children,et(se));if(Se){const He=Se.getChild(mr(se));p=Fl(p,Jt(),He)}}}}}return p}function np(d,l,u,p,v){if(p||v){const R=ol(d.visibleWrites,l);return!v&&ru(R)?u:v||null!=u||Ic(R,Jt())?bl(dd(d.allWrites,function(He){return(He.visible||v)&&(!p||!~p.indexOf(He.writeId))&&($s(He.path,l)||$s(l,He.path))},l),u||er.EMPTY_NODE):null}{const R=To(d.visibleWrites,l);if(null!=R)return R;{const V=ol(d.visibleWrites,l);return ru(V)?u:null!=u||Ic(V,Jt())?bl(V,u||er.EMPTY_NODE):null}}}function Vl(d,l,u,p){return np(d.writeTree,d.treePath,l,u,p)}function bu(d,l){return function(d,l,u){let p=er.EMPTY_NODE;const v=To(d.visibleWrites,l);if(v)return v.isLeafNode()||v.forEachChild(Qr,(R,V)=>{p=p.updateImmediateChild(R,V)}),p;if(u){const R=ol(d.visibleWrites,l);return u.forEachChild(Qr,(V,se)=>{const Se=bl(ol(R,new oi(V)),se);p=p.updateImmediateChild(V,Se)}),Rs(R).forEach(V=>{p=p.updateImmediateChild(V.name,V.node)}),p}return Rs(ol(d.visibleWrites,l)).forEach(V=>{p=p.updateImmediateChild(V.name,V.node)}),p}(d.writeTree,d.treePath,l)}function Qd(d,l,u,p){return function(d,l,u,p,v){(0,Ne.hu)(p||v,"Either existingEventSnap or existingServerSnap must exist");const R=Ui(l,u);if(Ic(d.visibleWrites,R))return null;{const V=ol(d.visibleWrites,R);return ru(V)?v.getChild(u):bl(V,v.getChild(u))}}(d.writeTree,d.treePath,l,u,p)}function ou(d,l){return function(d,l){return To(d.visibleWrites,l)}(d.writeTree,Ui(d.treePath,l))}function al(d,l,u){return function(d,l,u,p){const v=Ui(l,u),R=To(d.visibleWrites,v);return null!=R?R:p.isCompleteForChild(u)?bl(ol(d.visibleWrites,v),p.getNode().getImmediateChild(u)):null}(d.writeTree,d.treePath,l,u)}function ki(d,l){return Ku(Ui(d.treePath,l),d.writeTree)}function Ku(d,l){return{treePath:d,writeTree:l}}class hd{constructor(){this.changeMap=new Map}trackChildChange(l){const u=l.type,p=l.childName;(0,Ne.hu)("child_added"===u||"child_changed"===u||"child_removed"===u,"Only child changes supported for tracking"),(0,Ne.hu)(".priority"!==p,"Only non-priority child changes can be tracked.");const v=this.changeMap.get(p);if(v){const R=v.type;if("child_added"===u&&"child_removed"===R)this.changeMap.set(p,Ko(p,l.snapshotNode,v.snapshotNode));else if("child_removed"===u&&"child_added"===R)this.changeMap.delete(p);else if("child_removed"===u&&"child_changed"===R)this.changeMap.set(p,xs(p,v.oldSnap));else if("child_changed"===u&&"child_added"===R)this.changeMap.set(p,cs(p,l.snapshotNode));else{if("child_changed"!==u||"child_changed"!==R)throw(0,Ne.g5)("Illegal combination of changes: "+l+" occurred after "+v);this.changeMap.set(p,Ko(p,l.snapshotNode,v.oldSnap))}}else this.changeMap.set(p,l)}getChanges(){return Array.from(this.changeMap.values())}}const fd=new class{getCompleteChild(l){return null}getChildAfterChild(l,u,p){return null}};class Cu{constructor(l,u,p=null){this.writes_=l,this.viewCache_=u,this.optCompleteServerCache_=p}getCompleteChild(l){const u=this.viewCache_.eventCache;if(u.isCompleteForChild(l))return u.getNode().getImmediateChild(l);{const p=null!=this.optCompleteServerCache_?new Do(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return al(this.writes_,l,p)}}getChildAfterChild(l,u,p){const v=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:$a(this.viewCache_),R=function(d,l,u,p,v,R){return function(d,l,u,p,v,R,V){let se;const Se=ol(d.visibleWrites,l),He=To(Se,Jt());if(null!=He)se=He;else{if(null==u)return[];se=bl(Se,u)}if(se=se.withIndex(V),se.isEmpty()||se.isLeafNode())return[];{const It=[],St=V.getCompare(),Bt=R?se.getReverseIteratorFrom(p,V):se.getIteratorFrom(p,V);let On=Bt.getNext();for(;On&&It.length<v;)0!==St(On,p)&&It.push(On),On=Bt.getNext();return It}}(d.writeTree,d.treePath,l,u,p,v,R)}(this.writes_,v,u,1,p,l);return 0===R.length?null:R[0]}}function pd(d,l,u,p,v,R){const V=l.eventCache;if(null!=ou(p,u))return l;{let se,Se;if(Mr(u))if((0,Ne.hu)(l.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),l.serverCache.isFiltered()){const He=$a(l),St=bu(p,He instanceof er?He:er.EMPTY_NODE);se=d.filter.updateFullNode(l.eventCache.getNode(),St,R)}else{const He=Vl(p,$a(l));se=d.filter.updateFullNode(l.eventCache.getNode(),He,R)}else{const He=et(u);if(".priority"===He){(0,Ne.hu)(1===zt(u),"Can't have a priority with additional path components");const It=V.getNode();Se=l.serverCache.getNode();const St=Qd(p,u,It,Se);se=null!=St?d.filter.updatePriority(It,St):V.getNode()}else{const It=mr(u);let St;if(V.isCompleteForChild(He)){Se=l.serverCache.getNode();const Bt=Qd(p,u,V.getNode(),Se);St=null!=Bt?V.getNode().getImmediateChild(He).updateChild(It,Bt):V.getNode().getImmediateChild(He)}else St=al(p,He,l.serverCache);se=null!=St?d.filter.updateChild(V.getNode(),He,St,It,v,R):V.getNode()}}return $o(l,se,V.isFullyInitialized()||Mr(u),d.filter.filtersNodes())}}function Dc(d,l,u,p,v,R,V,se){const Se=l.serverCache;let He;const It=V?d.filter:d.filter.getIndexedFilter();if(Mr(u))He=It.updateFullNode(Se.getNode(),p,null);else if(It.filtersNodes()&&!Se.isFiltered()){const On=Se.getNode().updateChild(u,p);He=It.updateFullNode(Se.getNode(),On,null)}else{const On=et(u);if(!Se.isCompleteForPath(u)&&zt(u)>1)return l;const zn=mr(u),ds=Se.getNode().getImmediateChild(On).updateChild(zn,p);He=".priority"===On?It.updatePriority(Se.getNode(),ds):It.updateChild(Se.getNode(),On,ds,zn,fd,null)}const St=Ba(l,He,Se.isFullyInitialized()||Mr(u),It.filtersNodes());return pd(d,St,u,v,new Cu(v,St,R),se)}function Jd(d,l,u,p,v,R,V){const se=l.eventCache;let Se,He;const It=new Cu(v,l,R);if(Mr(u))He=d.filter.updateFullNode(l.eventCache.getNode(),p,V),Se=$o(l,He,!0,d.filter.filtersNodes());else{const St=et(u);if(".priority"===St)He=d.filter.updatePriority(l.eventCache.getNode(),p),Se=$o(l,He,se.isFullyInitialized(),se.isFiltered());else{const Bt=mr(u),On=se.getNode().getImmediateChild(St);let zn;if(Mr(Bt))zn=p;else{const Xr=It.getCompleteChild(St);zn=null!=Xr?".priority"===Zl(Bt)&&Xr.getChild(Nl(Bt)).isEmpty()?Xr:Xr.updateChild(Bt,p):er.EMPTY_NODE}Se=On.equals(zn)?l:$o(l,d.filter.updateChild(se.getNode(),St,zn,Bt,It,V),se.isFullyInitialized(),d.filter.filtersNodes())}}return Se}function wu(d,l){return d.eventCache.isCompleteForChild(l)}function Tc(d,l,u){return u.foreach((p,v)=>{l=l.updateChild(p,v)}),l}function Ri(d,l,u,p,v,R,V,se){if(l.serverCache.getNode().isEmpty()&&!l.serverCache.isFullyInitialized())return l;let He,Se=l;He=Mr(u)?p:new Gi(null).setTree(u,p);const It=l.serverCache.getNode();return He.children.inorderTraversal((St,Bt)=>{if(It.hasChild(St)){const zn=Tc(0,l.serverCache.getNode().getImmediateChild(St),Bt);Se=Dc(d,Se,new oi(St),zn,v,R,V,se)}}),He.children.inorderTraversal((St,Bt)=>{const On=!l.serverCache.isCompleteForChild(St)&&null===Bt.value;if(!It.hasChild(St)&&!On){const Xr=Tc(0,l.serverCache.getNode().getImmediateChild(St),Bt);Se=Dc(d,Se,new oi(St),Xr,v,R,V,se)}}),Se}class $l{constructor(l,u){this.query_=l,this.eventRegistrations_=[];const p=this.query_._queryParams,v=new wo(p.getIndex()),R=function(d){return d.loadsAllData()?new wo(d.getIndex()):d.hasLimit()?new il(d):new Ia(d)}(p);this.processor_=function(d){return{filter:d}}(R);const V=u.serverCache,se=u.eventCache,Se=v.updateFullNode(er.EMPTY_NODE,V.getNode(),null),He=R.updateFullNode(er.EMPTY_NODE,se.getNode(),null),It=new Do(Se,V.isFullyInitialized(),v.filtersNodes()),St=new Do(He,se.isFullyInitialized(),R.filtersNodes());this.viewCache_=ha(St,It),this.eventGenerator_=new vu(this.query_)}get query(){return this.query_}}function Wh(d,l){const u=$a(d.viewCache_);return u&&(d.query._queryParams.loadsAllData()||!Mr(l)&&!u.getImmediateChild(et(l)).isEmpty())?u.getChild(l):null}function Ul(d){return 0===d.eventRegistrations_.length}function Sa(d,l,u){const p=[];if(u){(0,Ne.hu)(null==l,"A cancel should cancel all event registrations.");const v=d.query._path;d.eventRegistrations_.forEach(R=>{const V=R.createCancelEvent(u,v);V&&p.push(V)})}if(l){let v=[];for(let R=0;R<d.eventRegistrations_.length;++R){const V=d.eventRegistrations_[R];if(V.matches(l)){if(l.hasAnyCallback()){v=v.concat(d.eventRegistrations_.slice(R+1));break}}else v.push(V)}d.eventRegistrations_=v}else d.eventRegistrations_=[];return p}function Gh(d,l,u,p){l.type===In.MERGE&&null!==l.source.queryId&&((0,Ne.hu)($a(d.viewCache_),"We should always have a full cache before handling merges"),(0,Ne.hu)(Da(d.viewCache_),"Missing event cache, even though we have a server cache"));const v=d.viewCache_,R=function(d,l,u,p,v){const R=new hd;let V,se;if(u.type===In.OVERWRITE){const He=u;He.source.fromUser?V=Jd(d,l,He.path,He.snap,p,v,R):((0,Ne.hu)(He.source.fromServer,"Unknown source."),se=He.source.tagged||l.serverCache.isFiltered()&&!Mr(He.path),V=Dc(d,l,He.path,He.snap,p,v,se,R))}else if(u.type===In.MERGE){const He=u;He.source.fromUser?V=function(d,l,u,p,v,R,V){let se=l;return p.foreach((Se,He)=>{const It=Ui(u,Se);wu(l,et(It))&&(se=Jd(d,se,It,He,v,R,V))}),p.foreach((Se,He)=>{const It=Ui(u,Se);wu(l,et(It))||(se=Jd(d,se,It,He,v,R,V))}),se}(d,l,He.path,He.children,p,v,R):((0,Ne.hu)(He.source.fromServer,"Unknown source."),se=He.source.tagged||l.serverCache.isFiltered(),V=Ri(d,l,He.path,He.children,p,v,se,R))}else if(u.type===In.ACK_USER_WRITE){const He=u;V=He.revert?function(d,l,u,p,v,R){let V;if(null!=ou(p,u))return l;{const se=new Cu(p,l,v),Se=l.eventCache.getNode();let He;if(Mr(u)||".priority"===et(u)){let It;if(l.serverCache.isFullyInitialized())It=Vl(p,$a(l));else{const St=l.serverCache.getNode();(0,Ne.hu)(St instanceof er,"serverChildren would be complete if leaf node"),It=bu(p,St)}He=d.filter.updateFullNode(Se,It,R)}else{const It=et(u);let St=al(p,It,l.serverCache);null==St&&l.serverCache.isCompleteForChild(It)&&(St=Se.getImmediateChild(It)),He=null!=St?d.filter.updateChild(Se,It,St,mr(u),se,R):l.eventCache.getNode().hasChild(It)?d.filter.updateChild(Se,It,er.EMPTY_NODE,mr(u),se,R):Se,He.isEmpty()&&l.serverCache.isFullyInitialized()&&(V=Vl(p,$a(l)),V.isLeafNode()&&(He=d.filter.updateFullNode(He,V,R)))}return V=l.serverCache.isFullyInitialized()||null!=ou(p,Jt()),$o(l,He,V,d.filter.filtersNodes())}}(d,l,He.path,p,v,R):function(d,l,u,p,v,R,V){if(null!=ou(v,u))return l;const se=l.serverCache.isFiltered(),Se=l.serverCache;if(null!=p.value){if(Mr(u)&&Se.isFullyInitialized()||Se.isCompleteForPath(u))return Dc(d,l,u,Se.getNode().getChild(u),v,R,se,V);if(Mr(u)){let He=new Gi(null);return Se.getNode().forEachChild(go,(It,St)=>{He=He.set(new oi(It),St)}),Ri(d,l,u,He,v,R,se,V)}return l}{let He=new Gi(null);return p.foreach((It,St)=>{const Bt=Ui(u,It);Se.isCompleteForPath(Bt)&&(He=He.set(It,Se.getNode().getChild(Bt)))}),Ri(d,l,u,He,v,R,se,V)}}(d,l,He.path,He.affectedTree,p,v,R)}else{if(u.type!==In.LISTEN_COMPLETE)throw(0,Ne.g5)("Unknown operation type: "+u.type);V=function(d,l,u,p,v){const R=l.serverCache;return pd(d,Ba(l,R.getNode(),R.isFullyInitialized()||Mr(u),R.isFiltered()),u,p,fd,v)}(d,l,u.path,p,R)}const Se=R.getChanges();return function(d,l,u){const p=l.eventCache;if(p.isFullyInitialized()){const v=p.getNode().isLeafNode()||p.getNode().isEmpty(),R=Da(d);(u.length>0||!d.eventCache.isFullyInitialized()||v&&!p.getNode().equals(R)||!p.getNode().getPriority().equals(R.getPriority()))&&u.push(Ea(Da(l)))}}(l,V,Se),{viewCache:V,changes:Se}}(d.processor_,v,l,u,p);return function(d,l){(0,Ne.hu)(l.eventCache.getNode().isIndexed(d.filter.getIndex()),"Event snap not indexed"),(0,Ne.hu)(l.serverCache.getNode().isIndexed(d.filter.getIndex()),"Server snap not indexed")}(d.processor_,R.viewCache),(0,Ne.hu)(R.viewCache.serverCache.isFullyInitialized()||!v.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),d.viewCache_=R.viewCache,th(d,R.changes,R.viewCache.eventCache.getNode(),null)}function th(d,l,u,p){return function(d,l,u,p){const v=[],R=[];return l.forEach(V=>{"child_changed"===V.type&&d.index_.indexedValueChanged(V.oldSnap,V.snapshotNode)&&R.push(function(d,l){return{type:"child_moved",snapshotNode:l,childName:d}}(V.childName,V.snapshotNode))}),wa(d,v,"child_removed",l,p,u),wa(d,v,"child_added",l,p,u),wa(d,v,"child_moved",R,p,u),wa(d,v,"child_changed",l,p,u),wa(d,v,"value",l,p,u),v}(d.eventGenerator_,l,u,p?[p]:d.eventRegistrations_)}let Sc,Fi;class Hr{constructor(){this.views=new Map}}function _(d,l,u,p){const v=l.source.queryId;if(null!==v){const R=d.views.get(v);return(0,Ne.hu)(null!=R,"SyncTree gave us an op for an invalid query."),Gh(R,l,u,p)}{let R=[];for(const V of d.views.values())R=R.concat(Gh(V,l,u,p));return R}}function x(d,l,u,p,v){const V=d.views.get(l._queryIdentifier);if(!V){let se=Vl(u,v?p:null),Se=!1;se?Se=!0:p instanceof er?(se=bu(u,p),Se=!1):(se=er.EMPTY_NODE,Se=!1);const He=ha(new Do(se,Se,!1),new Do(p,v,!1));return new $l(l,He)}return V}function Ye(d){const l=[];for(const u of d.views.values())u.query._queryParams.loadsAllData()||l.push(u);return l}function xt(d,l){let u=null;for(const p of d.views.values())u=u||Wh(p,l);return u}function Rn(d,l){return l._queryParams.loadsAllData()?vi(d):d.views.get(l._queryIdentifier)}function fn(d,l){return null!=Rn(d,l)}function tr(d){return null!=vi(d)}function vi(d){for(const l of d.views.values())if(l.query._queryParams.loadsAllData())return l;return null}let _d=1;class Qs{constructor(l){this.listenProvider_=l,this.syncPointTree_=new Gi(null),this.pendingWriteTree_={visibleWrites:Zs.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ac(d,l,u,p,v){return function(d,l,u,p,v){(0,Ne.hu)(p>d.lastWriteId,"Stacking an older write on top of newer ones"),void 0===v&&(v=!0),d.allWrites.push({path:l,snap:u,writeId:p,visible:v}),v&&(d.visibleWrites=Fl(d.visibleWrites,l,u)),d.lastWriteId=p}(d.pendingWriteTree_,l,u,p,v),v?Au(d,new ui({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},l,u)):[]}function zi(d,l,u=!1){const p=function(d,l){for(let u=0;u<d.allWrites.length;u++){const p=d.allWrites[u];if(p.writeId===l)return p}return null}(d.pendingWriteTree_,l);if(function(d,l){const u=d.allWrites.findIndex(se=>se.writeId===l);(0,Ne.hu)(u>=0,"removeWrite called with nonexistent writeId.");const p=d.allWrites[u];d.allWrites.splice(u,1);let v=p.visible,R=!1,V=d.allWrites.length-1;for(;v&&V>=0;){const se=d.allWrites[V];se.visible&&(V>=u&&bc(se,p.path)?v=!1:$s(p.path,se.path)&&(R=!0)),V--}return!!v&&(R?(function(d){d.visibleWrites=dd(d.allWrites,Cc,Jt()),d.lastWriteId=d.allWrites.length>0?d.allWrites[d.allWrites.length-1].writeId:-1}(d),!0):(p.snap?d.visibleWrites=Gu(d.visibleWrites,p.path):le(p.children,Se=>{d.visibleWrites=Gu(d.visibleWrites,Ui(p.path,Se))}),!0))}(d.pendingWriteTree_,l)){let R=new Gi(null);return null!=p.snap?R=R.set(Jt(),!0):le(p.children,V=>{R=R.set(new oi(V),!0)}),Au(d,new rr(p.path,R,u))}return[]}function So(d,l,u){return Au(d,new ui({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l,u))}function Hl(d,l,u,p,v=!1){const R=l._path,V=d.syncPointTree_.get(R);let se=[];if(V&&("default"===l._queryIdentifier||fn(V,l))){const Se=function(d,l,u,p){const v=l._queryIdentifier,R=[];let V=[];const se=tr(d);if("default"===v)for(const[Se,He]of d.views.entries())V=V.concat(Sa(He,u,p)),Ul(He)&&(d.views.delete(Se),He.query._queryParams.loadsAllData()||R.push(He.query));else{const Se=d.views.get(v);Se&&(V=V.concat(Sa(Se,u,p)),Ul(Se)&&(d.views.delete(v),Se.query._queryParams.loadsAllData()||R.push(Se.query)))}return se&&!tr(d)&&R.push(new((0,Ne.hu)(Sc,"Reference.ts has not been loaded"),Sc)(l._repo,l._path)),{removed:R,events:V}}(V,l,u,p);(function(d){return 0===d.views.size})(V)&&(d.syncPointTree_=d.syncPointTree_.remove(R));const He=Se.removed;if(se=Se.events,!v){const It=-1!==He.findIndex(Bt=>Bt._queryParams.loadsAllData()),St=d.syncPointTree_.findOnPath(R,(Bt,On)=>tr(On));if(It&&!St){const Bt=d.syncPointTree_.subtree(R);if(!Bt.isEmpty()){const On=function(d){return d.fold((l,u,p)=>{if(u&&tr(u))return[vi(u)];{let v=[];return u&&(v=Ye(u)),le(p,(R,V)=>{v=v.concat(V)}),v}})}(Bt);for(let zn=0;zn<On.length;++zn){const Xr=On[zn],ds=Xr.query,Mo=Yh(d,Xr);d.listenProvider_.startListening(xu(ds),vd(d,ds),Mo.hashFn,Mo.onComplete)}}}if(!St&&He.length>0&&!p)if(It){const Bt=null;d.listenProvider_.stopListening(xu(l),Bt)}else He.forEach(Bt=>{const On=d.queryToTagMap.get(Kh(Bt));d.listenProvider_.stopListening(xu(Bt),On)})}!function(d,l){for(let u=0;u<l.length;++u){const p=l[u];if(!p._queryParams.loadsAllData()){const v=Kh(p),R=d.queryToTagMap.get(v);d.queryToTagMap.delete(v),d.tagToQueryMap.delete(R)}}}(d,He)}return se}function Su(d,l,u,p){const v=ih(d,p);if(null!=v){const R=sh(v),V=R.path,se=R.queryId,Se=as(V,l);return Zh(d,V,new ui(wr(se),Se,u))}return[]}function op(d,l,u,p=!1){const v=l._path;let R=null,V=!1;d.syncPointTree_.foreachOnPath(v,(Bt,On)=>{const zn=as(Bt,v);R=R||xt(On,zn),V=V||tr(On)});let Se,se=d.syncPointTree_.get(v);se?(V=V||tr(se),R=R||xt(se,Jt())):(se=new Hr,d.syncPointTree_=d.syncPointTree_.set(v,se)),null!=R?Se=!0:(Se=!1,R=er.EMPTY_NODE,d.syncPointTree_.subtree(v).foreachChild((On,zn)=>{const Xr=xt(zn,Jt());Xr&&(R=R.updateImmediateChild(On,Xr))}));const He=fn(se,l);if(!He&&!l._queryParams.loadsAllData()){const Bt=Kh(l);(0,Ne.hu)(!d.queryToTagMap.has(Bt),"View does not exist, but we have a tag");const On=_d++;d.queryToTagMap.set(Bt,On),d.tagToQueryMap.set(On,Bt)}let St=function(d,l,u,p,v,R){const V=x(d,l,p,v,R);return d.views.has(l._queryIdentifier)||d.views.set(l._queryIdentifier,V),function(d,l){d.eventRegistrations_.push(l)}(V,u),function(d,l){const u=d.viewCache_.eventCache,p=[];return u.getNode().isLeafNode()||u.getNode().forEachChild(Qr,(R,V)=>{p.push(cs(R,V))}),u.isFullyInitialized()&&p.push(Ea(u.getNode())),th(d,p,u.getNode(),l)}(V,u)}(se,l,u,qu(d.pendingWriteTree_,v),R,Se);if(!He&&!V&&!p){const Bt=Rn(se,l);St=St.concat(function(d,l,u){const p=l._path,v=vd(d,l),R=Yh(d,u),V=d.listenProvider_.startListening(xu(l),v,R.hashFn,R.onComplete),se=d.syncPointTree_.subtree(p);if(v)(0,Ne.hu)(!tr(se.value),"If we're adding a query, it shouldn't be shadowed");else{const Se=se.fold((He,It,St)=>{if(!Mr(He)&&It&&tr(It))return[vi(It).query];{let Bt=[];return It&&(Bt=Bt.concat(Ye(It).map(On=>On.query))),le(St,(On,zn)=>{Bt=Bt.concat(zn)}),Bt}});for(let He=0;He<Se.length;++He){const It=Se[He];d.listenProvider_.stopListening(xu(It),vd(d,It))}}return V}(d,l,Bt))}return St}function nh(d,l,u){const v=d.pendingWriteTree_,R=d.syncPointTree_.findOnPath(l,(V,se)=>{const He=xt(se,as(V,l));if(He)return He});return np(v,l,R,u,!0)}function Au(d,l){return pg(l,d.syncPointTree_,null,qu(d.pendingWriteTree_,Jt()))}function pg(d,l,u,p){if(Mr(d.path))return qh(d,l,u,p);{const v=l.get(Jt());null==u&&null!=v&&(u=xt(v,Jt()));let R=[];const V=et(d.path),se=d.operationForChild(V),Se=l.children.get(V);if(Se&&se){const He=u?u.getImmediateChild(V):null,It=ki(p,V);R=R.concat(pg(se,Se,He,It))}return v&&(R=R.concat(_(v,d,p,u))),R}}function qh(d,l,u,p){const v=l.get(Jt());null==u&&null!=v&&(u=xt(v,Jt()));let R=[];return l.children.inorderTraversal((V,se)=>{const Se=u?u.getImmediateChild(V):null,He=ki(p,V),It=d.operationForChild(V);It&&(R=R.concat(qh(It,se,Se,He)))}),v&&(R=R.concat(_(v,d,p,u))),R}function Yh(d,l){const u=l.query,p=vd(d,u);return{hashFn:()=>(function(d){return d.viewCache_.serverCache.getNode()}(l)||er.EMPTY_NODE).hash(),onComplete:v=>{if("ok"===v)return p?function(d,l,u){const p=ih(d,u);if(p){const v=sh(p),R=v.path,V=v.queryId,se=as(R,l);return Zh(d,R,new Pi(wr(V),se))}return[]}(d,u._path,p):function(d,l){return Au(d,new Pi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l))}(d,u._path);{const R=function(d,l){let u="Unknown Error";"too_big"===d?u="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===d?u="Client doesn't have permission to access the desired data.":"unavailable"===d&&(u="The service is unavailable");const p=new Error(d+" at "+l._path.toString()+": "+u);return p.code=d.toUpperCase(),p}(v,u);return Hl(d,u,null,R)}}}}function vd(d,l){const u=Kh(l);return d.queryToTagMap.get(u)}function Kh(d){return d._path.toString()+"$"+d._queryIdentifier}function ih(d,l){return d.tagToQueryMap.get(l)}function sh(d){const l=d.indexOf("$");return(0,Ne.hu)(-1!==l&&l<d.length-1,"Bad queryKey."),{queryId:d.substr(l+1),path:new oi(d.substr(0,l))}}function Zh(d,l,u){const p=d.syncPointTree_.get(l);return(0,Ne.hu)(p,"Missing sync point for query tag that we're tracking"),_(p,u,qu(d.pendingWriteTree_,l),null)}function xu(d){return d._queryParams.loadsAllData()&&!d._queryParams.isDefault()?new((0,Ne.hu)(Fi,"Reference.ts has not been loaded"),Fi)(d._repo,d._path):d}class Xh{constructor(l){this.node_=l}getImmediateChild(l){const u=this.node_.getImmediateChild(l);return new Xh(u)}node(){return this.node_}}class Xs{constructor(l,u){this.syncTree_=l,this.path_=u}getImmediateChild(l){const u=Ui(this.path_,l);return new Xs(this.syncTree_,u)}node(){return nh(this.syncTree_,this.path_)}}const ap=function(d,l,u){return d&&"object"==typeof d?((0,Ne.hu)(".sv"in d,"Unexpected leaf node or priority contents"),"string"==typeof d[".sv"]?au(d[".sv"],l,u):"object"==typeof d[".sv"]?mg(d[".sv"],l):void(0,Ne.hu)(!1,"Unexpected server value: "+JSON.stringify(d,null,2))):d},au=function(d,l,u){if("timestamp"===d)return u.timestamp;(0,Ne.hu)(!1,"Unexpected server value: "+d)},mg=function(d,l,u){d.hasOwnProperty("increment")||(0,Ne.hu)(!1,"Unexpected server value: "+JSON.stringify(d,null,2));const p=d.increment;"number"!=typeof p&&(0,Ne.hu)(!1,"Unexpected increment value: "+p);const v=l.node();if((0,Ne.hu)(null!=v,"Expected ChildrenNode.EMPTY_NODE for nulls"),!v.isLeafNode())return p;const V=v.getValue();return"number"!=typeof V?p:V+p},oh=function(d,l,u,p){return ja(l,new Xs(u,d),p)},Mc=function(d,l,u){return ja(d,new Xh(l),u)};function ja(d,l,u){const p=d.getPriority().val(),v=ap(p,l.getImmediateChild(".priority"),u);let R;if(d.isLeafNode()){const V=d,se=ap(V.getValue(),l,u);return se!==V.getValue()||v!==V.getPriority().val()?new $n(se,ni(v)):d}{const V=d;return R=V,v!==V.getPriority().val()&&(R=R.updatePriority(new $n(v))),V.forEachChild(Qr,(se,Se)=>{const He=ja(Se,l.getImmediateChild(se),u);He!==Se&&(R=R.updateImmediateChild(se,He))}),R}}class Jh{constructor(l="",u=null,p={children:{},childCount:0}){this.name=l,this.parent=u,this.node=p}}function ef(d,l){let u=l instanceof oi?l:new oi(l),p=d,v=et(u);for(;null!==v;){const R=(0,Ne.DV)(p.node.children,v)||{children:{},childCount:0};p=new Jh(v,p,R),u=mr(u),v=et(u)}return p}function Oc(d){return d.node.value}function tf(d,l){d.node.value=l,wl(d)}function Fm(d){return d.node.childCount>0}function nf(d,l){le(d.node.children,(u,p)=>{l(new Jh(u,d,p))})}function _g(d,l,u,p){u&&!p&&l(d),nf(d,v=>{_g(v,l,!0,p)}),u&&p&&l(d)}function lu(d){return new oi(null===d.parent?d.name:lu(d.parent)+"/"+d.name)}function wl(d){null!==d.parent&&function(d,l,u){const p=function(d){return void 0===Oc(d)&&!Fm(d)}(u),v=(0,Ne.r3)(d.node.children,l);p&&v?(delete d.node.children[l],d.node.childCount--,wl(d)):!p&&!v&&(d.node.children[l]=u.node,d.node.childCount++,wl(d))}(d.parent,d.name,d)}const qy=/[\[\].#$\/\u0000-\u001F\u007F]/,vg=/[\[\].#$\u0000-\u001F\u007F]/,lp=10485760,ll=function(d){return"string"==typeof d&&0!==d.length&&!qy.test(d)},ah=function(d){return"string"==typeof d&&0!==d.length&&!vg.test(d)},lh=function(d){return null===d||"string"==typeof d||"number"==typeof d&&!vo(d)||d&&"object"==typeof d&&(0,Ne.r3)(d,".sv")},ul=function(d,l,u,p){p&&void 0===l||ys((0,Ne.gK)(d,"value"),l,u)},ys=function(d,l,u){const p=u instanceof oi?new Ma(u,d):u;if(void 0===l)throw new Error(d+"contains undefined "+pi(p));if("function"==typeof l)throw new Error(d+"contains a function "+pi(p)+" with contents = "+l.toString());if(vo(l))throw new Error(d+"contains "+l.toString()+" "+pi(p));if("string"==typeof l&&l.length>lp/3&&(0,Ne.ug)(l)>lp)throw new Error(d+"contains a string greater than "+lp+" utf8 bytes "+pi(p)+" ('"+l.substring(0,50)+"...')");if(l&&"object"==typeof l){let v=!1,R=!1;if(le(l,(V,se)=>{if(".value"===V)v=!0;else if(".priority"!==V&&".sv"!==V&&(R=!0,!ll(V)))throw new Error(d+" contains an invalid key ("+V+") "+pi(p)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(d,l){d.parts_.length>0&&(d.byteLength_+=1),d.parts_.push(l),d.byteLength_+=(0,Ne.ug)(l),po(d)})(p,V),ys(d,se,p),function(d){const l=d.parts_.pop();d.byteLength_-=(0,Ne.ug)(l),d.parts_.length>0&&(d.byteLength_-=1)}(p)}),v&&R)throw new Error(d+' contains ".value" child '+pi(p)+" in addition to actual children.")}},uh=function(d,l,u,p){if(p&&void 0===l)return;const v=(0,Ne.gK)(d,"values");if(!l||"object"!=typeof l||Array.isArray(l))throw new Error(v+" must be an object containing the children to replace.");const R=[];le(l,(V,se)=>{const Se=new oi(V);if(ys(v,se,Ui(u,Se)),".priority"===Zl(Se)&&!lh(se))throw new Error(v+"contains an invalid value for '"+Se.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");R.push(Se)}),function(d,l){let u,p;for(u=0;u<l.length;u++){p=l[u];const R=Bs(p);for(let V=0;V<R.length;V++)if((".priority"!==R[V]||V!==R.length-1)&&!ll(R[V]))throw new Error(d+"contains an invalid key ("+R[V]+") in path "+p.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}l.sort(Uu);let v=null;for(u=0;u<l.length;u++){if(p=l[u],null!==v&&$s(v,p))throw new Error(d+"contains a path "+v.toString()+" that is ancestor of another path "+p.toString());v=p}}(v,R)},Nc=function(d,l,u){if(!u||void 0!==l){if(vo(l))throw new Error((0,Ne.gK)(d,"priority")+"is "+l.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!lh(l))throw new Error((0,Ne.gK)(d,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ha=function(d,l,u,p){if(!(p&&void 0===u||ll(u)))throw new Error((0,Ne.gK)(d,l)+'was an invalid key = "'+u+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Pc=function(d,l,u,p){if(!(p&&void 0===u||ah(u)))throw new Error((0,Ne.gK)(d,l)+'was an invalid path = "'+u+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Uo=function(d,l){if(".info"===et(l))throw new Error(d+" failed = Can't modify data under /.info/")},kc=function(d,l){const u=l.path.toString();if("string"!=typeof l.repoInfo.host||0===l.repoInfo.host.length||!ll(l.repoInfo.namespace)&&"localhost"!==l.repoInfo.host.split(":")[0]||0!==u.length&&!function(d){return d&&(d=d.replace(/^\/*\.info(\/|$)/,"/")),ah(d)}(u))throw new Error((0,Ne.gK)(d,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Qu{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function uu(d,l){let u=null;for(let p=0;p<l.length;p++){const v=l[p],R=v.getPath();null!==u&&!Ql(R,u.path)&&(d.eventLists_.push(u),u=null),null===u&&(u={events:[],path:R}),u.events.push(v)}u&&d.eventLists_.push(u)}function cu(d,l,u){uu(d,u),up(d,p=>Ql(p,l))}function Zo(d,l,u){uu(d,u),up(d,p=>$s(p,l)||$s(l,p))}function up(d,l){d.recursionDepth_++;let u=!0;for(let p=0;p<d.eventLists_.length;p++){const v=d.eventLists_[p];v&&(l(v.path)?(cp(d.eventLists_[p]),d.eventLists_[p]=null):u=!1)}u&&(d.eventLists_=[]),d.recursionDepth_--}function cp(d){for(let l=0;l<d.events.length;l++){const u=d.events[l];if(null!==u){d.events[l]=null;const p=u.getEventRunner();ps&&Li("event: "+u.toString()),ue(p)}}}const af="repo_interrupt";class Ig{constructor(l,u,p,v){this.repoInfo_=l,this.forceRestClient_=u,this.authTokenProvider_=p,this.appCheckProvider_=v,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Qu,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=nu(),this.transactionQueueTree_=new Jh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ch(d){const u=d.infoData_.getNode(new oi(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+u}function Fc(d){return function(d){return(d=d||{}).timestamp=d.timestamp||(new Date).getTime(),d}({timestamp:ch(d)})}function Lc(d,l,u,p,v){d.dataUpdateCount++;const R=new oi(l);u=d.interceptServerDataCallback_?d.interceptServerDataCallback_(l,u):u;let V=[];if(v)if(p){const Se=(0,Ne.UI)(u,He=>ni(He));V=function(d,l,u,p){const v=ih(d,p);if(v){const R=sh(v),V=R.path,se=R.queryId,Se=as(V,l),He=Gi.fromObject(u);return Zh(d,V,new wi(wr(se),Se,He))}return[]}(d.serverSyncTree_,R,Se,v)}else{const Se=ni(u);V=Su(d.serverSyncTree_,R,Se,v)}else if(p){const Se=(0,Ne.UI)(u,He=>ni(He));V=function(d,l,u){const p=Gi.fromObject(u);return Au(d,new wi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l,p))}(d.serverSyncTree_,R,Se)}else{const Se=ni(u);V=So(d.serverSyncTree_,R,Se)}let se=R;V.length>0&&(se=Ao(d,R)),Zo(d.eventQueue_,se,V)}function Id(d,l){lf(d,"connected",l),!1===l&&function(d){hu(d,"onDisconnectEvents");const l=Fc(d),u=nu();L(d.onDisconnect_,Jt(),(v,R)=>{const V=oh(v,R,d.serverSyncTree_,l);La(u,v,V)});let p=[];L(u,Jt(),(v,R)=>{p=p.concat(So(d.serverSyncTree_,v,R));const V=Ru(d,v);Ao(d,V)}),d.onDisconnect_=nu(),Zo(d.eventQueue_,Jt(),p)}(d)}function lf(d,l,u){const p=new oi("/.info/"+l),v=ni(u);d.infoData_.updateSnapshot(p,v);const R=So(d.infoSyncTree_,p,v);Zo(d.eventQueue_,p,R)}function bd(d){return d.nextWriteId_++}function uf(d,l,u,p,v){hu(d,"set",{path:l.toString(),value:u,priority:p});const R=Fc(d),V=ni(u,p),se=nh(d.serverSyncTree_,l),Se=Mc(V,se,R),He=bd(d),It=Ac(d.serverSyncTree_,l,Se,He,!0);uu(d.eventQueue_,It),d.server_.put(l.toString(),V.val(!0),(Bt,On)=>{const zn="ok"===Bt;zn||fi("set at "+l+" failed: "+Bt);const Xr=zi(d.serverSyncTree_,He,!zn);Zo(d.eventQueue_,l,Xr),cl(0,v,Bt,On)});const St=Ru(d,l);Ao(d,St),Zo(d.eventQueue_,St,[])}function du(d,l,u){d.server_.onDisconnectCancel(l.toString(),(p,v)=>{"ok"===p&&Il(d.onDisconnect_,l),cl(0,u,p,v)})}function Xu(d,l,u,p){const v=ni(u);d.server_.onDisconnectPut(l.toString(),v.val(!0),(R,V)=>{"ok"===R&&La(d.onDisconnect_,l,v),cl(0,p,R,V)})}function $c(d,l,u){let p;p=".info"===et(l._path)?Hl(d.infoSyncTree_,l,u):Hl(d.serverSyncTree_,l,u),cu(d.eventQueue_,l._path,p)}function Cd(d){d.persistentConnection_&&d.persistentConnection_.interrupt(af)}function hu(d,...l){let u="";d.persistentConnection_&&(u=d.persistentConnection_.id+":"),Li(u,...l)}function cl(d,l,u,p){l&&ue(()=>{if("ok"===u)l(null);else{const v=(u||"error").toUpperCase();let R=v;p&&(R+=": "+p);const V=new Error(R);V.code=v,l(V)}})}function Ju(d,l,u){return nh(d.serverSyncTree_,l,u)||er.EMPTY_NODE}function Uc(d,l=d.transactionQueueTree_){if(l||dl(d,l),Oc(l)){const u=fh(d,l);(0,Ne.hu)(u.length>0,"Sending zero length transaction queue"),u.every(v=>0===v.status)&&function(d,l,u){const p=u.map(He=>He.currentWriteId),v=Ju(d,l,p);let R=v;const V=v.hash();for(let He=0;He<u.length;He++){const It=u[He];(0,Ne.hu)(0===It.status,"tryToSendTransactionQueue_: items in queue should all be run."),It.status=1,It.retryCount++;const St=as(l,It.path);R=R.updateChild(St,It.currentOutputSnapshotRaw)}const se=R.val(!0),Se=l;d.server_.put(Se.toString(),se,He=>{hu(d,"transaction put response",{path:Se.toString(),status:He});let It=[];if("ok"===He){const St=[];for(let Bt=0;Bt<u.length;Bt++)u[Bt].status=2,It=It.concat(zi(d.serverSyncTree_,u[Bt].currentWriteId)),u[Bt].onComplete&&St.push(()=>u[Bt].onComplete(null,!0,u[Bt].currentOutputSnapshotResolved)),u[Bt].unwatcher();dl(d,ef(d.transactionQueueTree_,l)),Uc(d,d.transactionQueueTree_),Zo(d.eventQueue_,l,It);for(let Bt=0;Bt<St.length;Bt++)ue(St[Bt])}else{if("datastale"===He)for(let St=0;St<u.length;St++)u[St].status=3===u[St].status?4:0;else{fi("transaction at "+Se.toString()+" failed: "+He);for(let St=0;St<u.length;St++)u[St].status=4,u[St].abortReason=He}Ao(d,l)}},V)}(d,lu(l),u)}else Fm(l)&&nf(l,u=>{Uc(d,u)})}function Ao(d,l){const u=hh(d,l),p=lu(u);return function(d,l,u){if(0===l.length)return;const p=[];let v=[];const V=l.filter(se=>0===se.status).map(se=>se.currentWriteId);for(let se=0;se<l.length;se++){const Se=l[se],He=as(u,Se.path);let St,It=!1;if((0,Ne.hu)(null!==He,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Se.status)It=!0,St=Se.abortReason,v=v.concat(zi(d.serverSyncTree_,Se.currentWriteId,!0));else if(0===Se.status)if(Se.retryCount>=25)It=!0,St="maxretry",v=v.concat(zi(d.serverSyncTree_,Se.currentWriteId,!0));else{const Bt=Ju(d,Se.path,V);Se.currentInputSnapshot=Bt;const On=l[se].update(Bt.val());if(void 0!==On){ys("transaction failed: Data returned ",On,Se.path);let zn=ni(On);"object"==typeof On&&null!=On&&(0,Ne.r3)(On,".priority")||(zn=zn.updatePriority(Bt.getPriority()));const ds=Se.currentWriteId,Mo=Fc(d),pa=Mc(zn,Bt,Mo);Se.currentOutputSnapshotRaw=zn,Se.currentOutputSnapshotResolved=pa,Se.currentWriteId=bd(d),V.splice(V.indexOf(ds),1),v=v.concat(Ac(d.serverSyncTree_,Se.path,pa,Se.currentWriteId,Se.applyLocally)),v=v.concat(zi(d.serverSyncTree_,ds,!0))}else It=!0,St="nodata",v=v.concat(zi(d.serverSyncTree_,Se.currentWriteId,!0))}Zo(d.eventQueue_,u,v),v=[],It&&(l[se].status=2,setTimeout(l[se].unwatcher,Math.floor(0)),l[se].onComplete&&p.push("nodata"===St?()=>l[se].onComplete(null,!1,l[se].currentInputSnapshot):()=>l[se].onComplete(new Error(St),!1,null)))}dl(d,d.transactionQueueTree_);for(let se=0;se<p.length;se++)ue(p[se]);Uc(d,d.transactionQueueTree_)}(d,fh(d,u),p),p}function hh(d,l){let u,p=d.transactionQueueTree_;for(u=et(l);null!==u&&void 0===Oc(p);)p=ef(p,u),u=et(l=mr(l));return p}function fh(d,l){const u=[];return df(d,l,u),u.sort((p,v)=>p.order-v.order),u}function df(d,l,u){const p=Oc(l);if(p)for(let v=0;v<p.length;v++)u.push(p[v]);nf(l,v=>{df(d,v,u)})}function dl(d,l){const u=Oc(l);if(u){let p=0;for(let v=0;v<u.length;v++)2!==u[v].status&&(u[p]=u[v],p++);u.length=p,tf(l,u.length>0?u:void 0)}nf(l,p=>{dl(d,p)})}function Ru(d,l){const u=lu(hh(d,l)),p=ef(d.transactionQueueTree_,l);return function(d,l,u){let p=d.parent;for(;null!==p;){if(l(p))return!0;p=p.parent}}(p,v=>{fp(d,v)}),fp(d,p),_g(p,v=>{fp(d,v)}),u}function fp(d,l){const u=Oc(l);if(u){const p=[];let v=[],R=-1;for(let V=0;V<u.length;V++)3===u[V].status||(1===u[V].status?((0,Ne.hu)(R===V-1,"All SENT items should be at beginning of queue."),R=V,u[V].status=3,u[V].abortReason="set"):((0,Ne.hu)(0===u[V].status,"Unexpected transaction status in abort"),u[V].unwatcher(),v=v.concat(zi(d.serverSyncTree_,u[V].currentWriteId,!0)),u[V].onComplete&&p.push(u[V].onComplete.bind(null,new Error("set"),!1,null))));-1===R?tf(l,void 0):u.length=R+1,Zo(d.eventQueue_,lu(l),v);for(let V=0;V<p.length;V++)ue(p[V])}}const Mu=function(d,l){const u=Tg(d),p=u.namespace;return"firebase.com"===u.domain&&Ps(u.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!p||"undefined"===p)&&"localhost"!==u.domain&&Ps("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),u.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&fi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Yt(u.host,u.secure,p,"ws"===u.scheme||"wss"===u.scheme,l,"",p!==u.subdomain),path:new oi(u.pathString)}},Tg=function(d){let l="",u="",p="",v="",R="",V=!0,se="https",Se=443;if("string"==typeof d){let He=d.indexOf("//");He>=0&&(se=d.substring(0,He-1),d=d.substring(He+2));let It=d.indexOf("/");-1===It&&(It=d.length);let St=d.indexOf("?");-1===St&&(St=d.length),l=d.substring(0,Math.min(It,St)),It<St&&(v=function(d){let l="";const u=d.split("/");for(let p=0;p<u.length;p++)if(u[p].length>0){let v=u[p];try{v=decodeURIComponent(v.replace(/\+/g," "))}catch(R){}l+="/"+v}return l}(d.substring(It,St)));const Bt=function(d){const l={};"?"===d.charAt(0)&&(d=d.substring(1));for(const u of d.split("&")){if(0===u.length)continue;const p=u.split("=");2===p.length?l[decodeURIComponent(p[0])]=decodeURIComponent(p[1]):fi(`Invalid query segment '${u}' in query '${d}'`)}return l}(d.substring(Math.min(d.length,St)));He=l.indexOf(":"),He>=0?(V="https"===se||"wss"===se,Se=parseInt(l.substring(He+1),10)):He=l.length;const On=l.slice(0,He);if("localhost"===On.toLowerCase())u="localhost";else if(On.split(".").length<=2)u=On;else{const zn=l.indexOf(".");p=l.substring(0,zn).toLowerCase(),u=l.substring(zn+1),R=p}"ns"in Bt&&(R=Bt.ns)}return{host:l,port:Se,domain:u,subdomain:p,secure:V,scheme:se,pathString:v,namespace:R}};class Ou{constructor(l,u,p,v){this.eventType=l,this.eventRegistration=u,this.snapshot=p,this.prevName=v}getPath(){const l=this.snapshot.ref;return"value"===this.eventType?l._path:l.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,Ne.Wl)(this.snapshot.exportVal())}}class hl{constructor(l,u,p){this.eventRegistration=l,this.error=u,this.path=p}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class pp{constructor(l,u){this.snapshotCallback=l,this.cancelCallback=u}onValue(l,u){this.snapshotCallback.call(null,l,u)}onCancel(l){return(0,Ne.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,l)}get hasCancelCallback(){return!!this.cancelCallback}matches(l){return this.snapshotCallback===l.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===l.snapshotCallback.userCallback&&this.snapshotCallback.context===l.snapshotCallback.context}}class gp{constructor(l,u){this._repo=l,this._path=u}cancel(){const l=new Ne.BH;return du(this._repo,this._path,l.wrapCallback(()=>{})),l.promise}remove(){Uo("OnDisconnect.remove",this._path);const l=new Ne.BH;return Xu(this._repo,this._path,null,l.wrapCallback(()=>{})),l.promise}set(l){Uo("OnDisconnect.set",this._path),ul("OnDisconnect.set",l,this._path,!1);const u=new Ne.BH;return Xu(this._repo,this._path,l,u.wrapCallback(()=>{})),u.promise}setWithPriority(l,u){Uo("OnDisconnect.setWithPriority",this._path),ul("OnDisconnect.setWithPriority",l,this._path,!1),Nc("OnDisconnect.setWithPriority",u,!1);const p=new Ne.BH;return function(d,l,u,p,v){const R=ni(u,p);d.server_.onDisconnectPut(l.toString(),R.val(!0),(V,se)=>{"ok"===V&&La(d.onDisconnect_,l,R),cl(0,v,V,se)})}(this._repo,this._path,l,u,p.wrapCallback(()=>{})),p.promise}update(l){Uo("OnDisconnect.update",this._path),uh("OnDisconnect.update",l,this._path,!1);const u=new Ne.BH;return function(d,l,u,p){if((0,Ne.xb)(u))return Li("onDisconnect().update() called with empty data.  Don't do anything."),void cl(0,p,"ok",void 0);d.server_.onDisconnectMerge(l.toString(),u,(v,R)=>{"ok"===v&&le(u,(V,se)=>{const Se=ni(se);La(d.onDisconnect_,Ui(l,V),Se)}),cl(0,p,v,R)})}(this._repo,this._path,l,u.wrapCallback(()=>{})),u.promise}}class Wa{constructor(l,u,p,v){this._repo=l,this._path=u,this._queryParams=p,this._orderByCalled=v}get key(){return Mr(this._path)?null:Zl(this._path)}get ref(){return new fl(this._repo,this._path)}get _queryIdentifier(){const l=Hu(this._queryParams),u=Xi(l);return"{}"===u?"default":u}get _queryObject(){return Hu(this._queryParams)}isEqual(l){if(!((l=(0,Ne.m9)(l))instanceof Wa))return!1;const u=this._repo===l._repo,p=Ql(this._path,l._path);return u&&p&&this._queryIdentifier===l._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(d){let l="";for(let u=d.pieceNum_;u<d.pieces_.length;u++)""!==d.pieces_[u]&&(l+="/"+encodeURIComponent(String(d.pieces_[u])));return l||"/"}(this._path)}}function hf(d,l){if(!0===d._orderByCalled)throw new Error(l+": You can't combine multiple orderBy calls.")}function Wl(d){let l=null,u=null;if(d.hasStart()&&(l=d.getIndexStartValue()),d.hasEnd()&&(u=d.getIndexEndValue()),d.getIndex()===go){const p="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",v="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(d.hasStart()){if(d.getIndexStartName()!==Qi)throw new Error(p);if("string"!=typeof l)throw new Error(v)}if(d.hasEnd()){if(d.getIndexEndName()!==Ki)throw new Error(p);if("string"!=typeof u)throw new Error(v)}}else if(d.getIndex()===Qr){if(null!=l&&!lh(l)||null!=u&&!lh(u))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,Ne.hu)(d.getIndex()instanceof Ec||d.getIndex()===ud,"unknown index type."),null!=l&&"object"==typeof l||null!=u&&"object"==typeof u)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ph(d){if(d.hasStart()&&d.hasEnd()&&d.hasLimit()&&!d.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class fl extends Wa{constructor(l,u){super(l,u,new Pl,!1)}get parent(){const l=Nl(this._path);return null===l?null:new fl(this._repo,l)}get root(){let l=this;for(;null!==l.parent;)l=l.parent;return l}}class tc{constructor(l,u,p){this._node=l,this.ref=u,this._index=p}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(l){const u=new oi(l),p=fr(this.ref,l);return new tc(this._node.getChild(u),p,Qr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(l){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(p,v)=>l(new tc(v,fr(this.ref,p),Qr)))}hasChild(l){const u=new oi(l);return!this._node.getChild(u).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Sg(d,l){return(d=(0,Ne.m9)(d))._checkNotDeleted("ref"),void 0!==l?fr(d._root,l):d._root}function mp(d,l){(d=(0,Ne.m9)(d))._checkNotDeleted("refFromURL");const u=Mu(l,d._repo.repoInfo_.nodeAdmin);kc("refFromURL",u);const p=u.repoInfo;return!d._repo.repoInfo_.isCustomHost()&&p.host!==d._repo.repoInfo_.host&&Ps("refFromURL: Host name does not match the current database: (found "+p.host+" but expected "+d._repo.repoInfo_.host+")"),Sg(d,u.path.toString())}function fr(d,l){return null===et((d=(0,Ne.m9)(d))._path)?(u=l,u&&(u=u.replace(/^\/*\.info(\/|$)/,"/")),Pc("child","path",u,!1)):Pc("child","path",l,!1),new fl(d._repo,Ui(d._path,l));var u}function pl(d,l){d=(0,Ne.m9)(d),Uo("set",d._path),ul("set",l,d._path,!1);const u=new Ne.BH;return uf(d._repo,d._path,l,null,u.wrapCallback(()=>{})),u.promise}function vp(d,l){uh("update",l,d._path,!1);const u=new Ne.BH;return function(d,l,u,p){hu(d,"update",{path:l.toString(),value:u});let v=!0;const R=Fc(d),V={};if(le(u,(se,Se)=>{v=!1,V[se]=oh(Ui(l,se),ni(Se),d.serverSyncTree_,R)}),v)Li("update() called with empty data.  Don't do anything."),cl(0,p,"ok",void 0);else{const se=bd(d),Se=function(d,l,u,p){!function(d,l,u,p){(0,Ne.hu)(p>d.lastWriteId,"Stacking an older merge on top of newer ones"),d.allWrites.push({path:l,children:u,writeId:p,visible:!0}),d.visibleWrites=Wu(d.visibleWrites,l,u),d.lastWriteId=p}(d.pendingWriteTree_,l,u,p);const v=Gi.fromObject(u);return Au(d,new wi({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},l,v))}(d.serverSyncTree_,l,V,se);uu(d.eventQueue_,Se),d.server_.merge(l.toString(),u,(He,It)=>{const St="ok"===He;St||fi("update at "+l+" failed: "+He);const Bt=zi(d.serverSyncTree_,se,!St),On=Bt.length>0?Ao(d,l):l;Zo(d.eventQueue_,On,Bt),cl(0,p,He,It)}),le(u,He=>{const It=Ru(d,Ui(l,He));Ao(d,It)}),Zo(d.eventQueue_,l,[])}}(d._repo,d._path,l,u.wrapCallback(()=>{})),u.promise}function Gl(d){d=(0,Ne.m9)(d);const l=new pp(()=>{}),u=new Ms(l);return function(d,l,u){const p=function(d,l){const u=l._path;let p=null;d.syncPointTree_.foreachOnPath(u,(He,It)=>{const St=as(He,u);p=p||xt(It,St)});let v=d.syncPointTree_.get(u);v?p=p||xt(v,Jt()):(v=new Hr,d.syncPointTree_=d.syncPointTree_.set(u,v));const R=null!=p,V=R?new Do(p,!0,!1):null;return function(d){return Da(d.viewCache_)}(x(v,l,qu(d.pendingWriteTree_,l._path),R?V.getNode():er.EMPTY_NODE,R))}(d.serverSyncTree_,l);return null!=p?Promise.resolve(p):d.server_.get(l).then(v=>{const R=ni(v).withIndex(l._queryParams.getIndex());let V;if(op(d.serverSyncTree_,l,u,!0),l._queryParams.loadsAllData())V=So(d.serverSyncTree_,l._path,R);else{const se=vd(d.serverSyncTree_,l);V=Su(d.serverSyncTree_,l._path,R,se)}return Zo(d.eventQueue_,l._path,V),Hl(d.serverSyncTree_,l,u,null,!0),R},v=>(hu(d,"get for query "+(0,Ne.Wl)(l)+" failed: "+v),Promise.reject(new Error(v))))}(d._repo,d,u).then(p=>new tc(p,new fl(d._repo,d._path),d._queryParams.getIndex()))}class Ms{constructor(l){this.callbackContext=l}respondsTo(l){return"value"===l}createEvent(l,u){const p=u._queryParams.getIndex();return new Ou("value",this,new tc(l.snapshotNode,new fl(u._repo,u._path),p))}getEventRunner(l){return"cancel"===l.getEventType()?()=>this.callbackContext.onCancel(l.error):()=>this.callbackContext.onValue(l.snapshot,null)}createCancelEvent(l,u){return this.callbackContext.hasCancelCallback?new hl(this,l,u):null}matches(l){return l instanceof Ms&&(!l.callbackContext||!this.callbackContext||l.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class yh{constructor(l,u){this.eventType=l,this.callbackContext=u}respondsTo(l){let u="children_added"===l?"child_added":l;return u="children_removed"===u?"child_removed":u,this.eventType===u}createCancelEvent(l,u){return this.callbackContext.hasCancelCallback?new hl(this,l,u):null}createEvent(l,u){(0,Ne.hu)(null!=l.childName,"Child events should have a childName.");const p=fr(new fl(u._repo,u._path),l.childName),v=u._queryParams.getIndex();return new Ou(l.type,this,new tc(l.snapshotNode,p,v),l.prevName)}getEventRunner(l){return"cancel"===l.getEventType()?()=>this.callbackContext.onCancel(l.error):()=>this.callbackContext.onValue(l.snapshot,l.prevName)}matches(l){return l instanceof yh&&this.eventType===l.eventType&&(!this.callbackContext||!l.callbackContext||this.callbackContext.matches(l.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function jc(d,l,u,p,v){let R;if("object"==typeof p&&(R=void 0,v=p),"function"==typeof p&&(R=p),v&&v.onlyOnce){const Se=u,He=(It,St)=>{$c(d._repo,d,se),Se(It,St)};He.userCallback=u.userCallback,He.context=u.context,u=He}const V=new pp(u,R||void 0),se="value"===l?new Ms(V):new yh(l,V);return function(d,l,u){let p;p=".info"===et(l._path)?op(d.infoSyncTree_,l,u):op(d.serverSyncTree_,l,u),cu(d.eventQueue_,l._path,p)}(d._repo,d,se),()=>$c(d._repo,d,se)}function Ag(d,l,u,p){return jc(d,"value",l,u,p)}function Ep(d,l,u,p){return jc(d,"child_added",l,u,p)}function xg(d,l,u,p){return jc(d,"child_changed",l,u,p)}function fu(d,l,u,p){return jc(d,"child_moved",l,u,p)}function nc(d,l,u,p){return jc(d,"child_removed",l,u,p)}function _h(d,l,u){let p=null;const v=u?new pp(u):null;"value"===l?p=new Ms(v):l&&(p=new yh(l,v)),$c(d._repo,d,p)}class Ga{}class Ip extends Ga{constructor(l,u){super(),this._value=l,this._key=u}_apply(l){ul("endAt",this._value,l._path,!0);const u=Fa(l._queryParams,this._value,this._key);if(ph(u),Wl(u),l._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Wa(l._repo,l._path,u,l._orderByCalled)}}class Td extends Ga{constructor(l,u){super(),this._value=l,this._key=u}_apply(l){ul("endBefore",this._value,l._path,!1);const u=function(d,l,u){let p,v;return d.index_===go?("string"==typeof l&&(l=Jl(l)),v=Fa(d,l,u)):(p=null==u?Qi:Jl(u),v=Fa(d,l,p)),v.endBeforeSet_=!0,v}(l._queryParams,this._value,this._key);if(ph(u),Wl(u),l._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Wa(l._repo,l._path,u,l._orderByCalled)}}class ff extends Ga{constructor(l,u){super(),this._value=l,this._key=u}_apply(l){ul("startAt",this._value,l._path,!0);const u=Ks(l._queryParams,this._value,this._key);if(ph(u),Wl(u),l._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Wa(l._repo,l._path,u,l._orderByCalled)}}class wp extends Ga{constructor(l,u){super(),this._value=l,this._key=u}_apply(l){ul("startAfter",this._value,l._path,!1);const u=function(d,l,u){let p;if(d.index_===go)"string"==typeof l&&(l=rl(l)),p=Ks(d,l,u);else{let v;v=null==u?Ki:rl(u),p=Ks(d,l,v)}return p.startAfterSet_=!0,p}(l._queryParams,this._value,this._key);if(ph(u),Wl(u),l._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Wa(l._repo,l._path,u,l._orderByCalled)}}class Og extends Ga{constructor(l){super(),this._limit=l}_apply(l){if(l._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Wa(l._repo,l._path,function(d,l){const u=d.copy();return u.limitSet_=!0,u.limit_=l,u.viewFrom_="l",u}(l._queryParams,this._limit),l._orderByCalled)}}class Ng extends Ga{constructor(l){super(),this._limit=l}_apply(l){if(l._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Wa(l._repo,l._path,function(d,l){const u=d.copy();return u.limitSet_=!0,u.limit_=l,u.viewFrom_="r",u}(l._queryParams,this._limit),l._orderByCalled)}}class $m extends Ga{constructor(l){super(),this._path=l}_apply(l){hf(l,"orderByChild");const u=new oi(this._path);if(Mr(u))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const p=new Ec(u),v=eu(l._queryParams,p);return Wl(v),new Wa(l._repo,l._path,v,!0)}}class Um extends Ga{_apply(l){hf(l,"orderByKey");const u=eu(l._queryParams,go);return Wl(u),new Wa(l._repo,l._path,u,!0)}}class vh extends Ga{_apply(l){hf(l,"orderByPriority");const u=eu(l._queryParams,Qr);return Wl(u),new Wa(l._repo,l._path,u,!0)}}class Pg extends Ga{_apply(l){hf(l,"orderByValue");const u=eu(l._queryParams,ud);return Wl(u),new Wa(l._repo,l._path,u,!0)}}class jm extends Ga{constructor(l,u){super(),this._value=l,this._key=u}_apply(l){if(ul("equalTo",this._value,l._path,!1),l._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(l._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ip(this._value,this._key)._apply(new ff(this._value,this._key)._apply(l))}}function za(d,...l){let u=(0,Ne.m9)(d);for(const p of l)u=p._apply(u);return u}(function(d){(0,Ne.hu)(!Sc,"__referenceConstructor has already been defined"),Sc=d})(fl),function(d){(0,Ne.hu)(!Fi,"__referenceConstructor has already been defined"),Fi=d}(fl);const Sd={};function Ih(d,l,u,p,v){let R=p||d.options.databaseURL;void 0===R&&(d.options.projectId||Ps("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Li("Using default host for project ",d.options.projectId),R=`${d.options.projectId}-default-rtdb.firebaseio.com`);let Se,He,V=Mu(R,v),se=V.repoInfo;"undefined"!=typeof process&&process.env&&(He=process.env.FIREBASE_DATABASE_EMULATOR_HOST),He?(Se=!0,R=`http://${He}?ns=${se.namespace}`,V=Mu(R,v),se=V.repoInfo):Se=!V.repoInfo.secure;const It=v&&Se?new Ci(Ci.OWNER):new Ur(d.name,d.options,l);kc("Invalid Firebase Database URL",V),Mr(V.path)||Ps("Database URL must point to the root of a Firebase Database (not including a child path).");const St=function(d,l,u,p){let v=Sd[l.name];v||(v={},Sd[l.name]=v);let R=v[d.toURLString()];return R&&Ps("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),R=new Ig(d,false,u,p),v[d.toURLString()]=R,R}(se,d,It,new Zn(d.name,u));return new Ch(St,d)}class Ch{constructor(l,u){this._repoInternal=l,this.app=u,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(d,l,u){if(d.stats_=Fs(d.repoInfo_),d.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)d.server_=new sl(d.repoInfo_,(p,v,R,V)=>{Lc(d,p,v,R,V)},d.authTokenProvider_,d.appCheckProvider_),setTimeout(()=>Id(d,!0),0);else{if(null!=u){if("object"!=typeof u)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Ne.Wl)(u)}catch(p){throw new Error("Invalid authOverride provided: "+p)}}d.persistentConnection_=new ls(d.repoInfo_,l,(p,v,R,V)=>{Lc(d,p,v,R,V)},p=>{Id(d,p)},p=>{!function(d,l){le(l,(u,p)=>{lf(d,u,p)})}(d,p)},d.authTokenProvider_,d.appCheckProvider_,u),d.server_=d.persistentConnection_}d.authTokenProvider_.addTokenChangeListener(p=>{d.server_.refreshAuthToken(p)}),d.appCheckProvider_.addTokenChangeListener(p=>{d.server_.refreshAppCheckToken(p.token)}),d.statsReporter_=function(d,l){const u=d.toString();return Ss[u]||(Ss[u]=l()),Ss[u]}(d.repoInfo_,()=>new en(d.stats_,d.server_)),d.infoData_=new tu,d.infoSyncTree_=new Qs({startListening:(p,v,R,V)=>{let se=[];const Se=d.infoData_.getNode(p._path);return Se.isEmpty()||(se=So(d.infoSyncTree_,p._path,Se),setTimeout(()=>{V("ok")},0)),se},stopListening:()=>{}}),lf(d,"connected",!1),d.serverSyncTree_=new Qs({startListening:(p,v,R,V)=>(d.server_.listen(p,R,v,(se,Se)=>{const He=V(se,Se);Zo(d.eventQueue_,p._path,He)}),[]),stopListening:(p,v)=>{d.server_.unlisten(p,v)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new fl(this._repo,Jt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(d,l){const u=Sd[l];(!u||u[d.key]!==d)&&Ps(`Database ${l}(${d.repoInfo_}) has already been deleted.`),Cd(d),delete u[d.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(l){null===this._rootInternal&&Ps("Cannot call "+l+" on a deleted database.")}}function yf(){tl.IS_TRANSPORT_INITIALIZED&&fi("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function wh(){yf(),qs.forceDisallow()}function Tp(){yf(),Vs.forceDisallow(),qs.forceAllow()}function _f(d=(0,ws.getApp)(),l){const u=(0,ws._getProvider)(d,"database").getImmediate({identifier:l}),p=(0,Ne.P0)("database");return p&&Sp(u,...p),u}function Sp(d,l,u,p={}){(d=(0,Ne.m9)(d))._checkNotDeleted("useEmulator"),d._instanceStarted&&Ps("Cannot call useEmulator() after instance has already been initialized.");const v=d._repoInternal;let R;if(v.repoInfo_.nodeAdmin)p.mockUserToken&&Ps('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),R=new Ci(Ci.OWNER);else if(p.mockUserToken){const V="string"==typeof p.mockUserToken?p.mockUserToken:(0,Ne.Sg)(p.mockUserToken,d.app.options.projectId);R=new Ci(V)}!function(d,l,u,p){d.repoInfo_=new Yt(`${l}:${u}`,!1,d.repoInfo_.namespace,d.repoInfo_.webSocketOnly,d.repoInfo_.nodeAdmin,d.repoInfo_.persistenceKey,d.repoInfo_.includeNamespaceInQueryParams),p&&(d.authTokenProvider_=p)}(v,l,u,R)}function xd(d,l){os(d,l)}class Dh{constructor(l,u){this.committed=l,this.snapshot=u}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}ls.prototype.simpleListen=function(d,l){this.sendRequest("q",{p:d},l)},ls.prototype.echo=function(d,l){this.sendRequest("echo",{d},l)},zo(ws.SDK_VERSION),(0,ws._registerComponent)(new Yi.wA("database",(l,{instanceIdentifier:u})=>Ih(l.getProvider("app").getImmediate(),l.getProvider("auth-internal"),l.getProvider("app-check-internal"),u),"PUBLIC").setMultipleInstances(!0)),(0,ws.registerVersion)(js,"0.13.9",void 0),(0,ws.registerVersion)(js,"0.13.9","esm2017");class Th{constructor(l){return l}}const xp="database",If=new O.OlP("angularfire2.database-instances");function Od(d){return(l,u)=>{const p=l.runOutsideAngular(()=>d(u));return new Th(p)}}const bf={provide:class{constructor(){return(0,xr.vb)(xp)}},deps:[[new O.FiY,If]]},Nd={provide:Th,useFactory:function(d,l){const u=(0,xr.JM)(xp,d,l);return u&&new Th(u)},deps:[[new O.FiY,If],qi.Ot]};let Cf=(()=>{class d{constructor(){(0,yi.KN)("angularfire",xr.q4.full,"rtdb")}}return d.\u0275fac=function(u){return new(u||d)},d.\u0275mod=O.oAB({type:d}),d.\u0275inj=O.cJS({providers:[Nd,bf]}),d})();function wf(d,...l){return{ngModule:Cf,providers:[{provide:If,useFactory:Od(d),multi:!0,deps:[O.R0b,O.zs3,xr.HU,qi.z6,[new O.FiY,$r.dh],[new O.FiY,Cs.nm],...l]}]}}const Np=(0,xr.u3)(_f,!0);var Jg=B(7545),Lp=B(3637),zc=B(8891),Qo=B(5917),kd=B(6682),em=B(8819),Lu=B(3190),Ah=B(2145),ic=B(7519),Vp=B(5197),Fd=B(509);class Xm{constructor(l,u){this.observables=l,this.project=u}call(l,u){return u.subscribe(new Bp(l,this.observables,this.project))}}class Bp extends Vp.L{constructor(l,u,p){super(l),this.observables=u,this.project=p,this.toRespond=[];const v=u.length;this.values=new Array(v);for(let R=0;R<v;R++)this.toRespond.push(R);for(let R=0;R<v;R++)this.add((0,Fd.D)(this,u[R],void 0,R))}notifyNext(l,u,p){this.values[p]=u;const v=this.toRespond;if(v.length>0){const R=v.indexOf(p);-1!==R&&v.splice(R,1)}}notifyComplete(){}_next(l){if(0===this.toRespond.length){const u=[l,...this.values];this.project?this._tryProject(u):this.destination.next(u)}}_tryProject(l){let u;try{u=this.project.apply(this,l)}catch(p){return void this.destination.error(p)}this.destination.next(u)}}var $p=B(7393);class Af{constructor(l){this.predicate=l}call(l,u){return u.subscribe(new jp(l,this.predicate))}}class jp extends $p.L{constructor(l,u){super(l),this.predicate=u,this.skipping=!0,this.index=0}_next(l){const u=this.destination;this.skipping&&this.tryCallPredicate(l),this.skipping||u.next(l)}tryCallPredicate(l){try{const u=this.predicate(l,this.index++);this.skipping=Boolean(u)}catch(u){this.destination.error(u)}}}var Xo=B(8939),nm=(B(4828),B(3394));const Rf=new eo.Yd("@firebase/database-compat"),Hp=function(d){Rf.warn("FIREBASE WARNING: "+d)};class ey{constructor(l){this._delegate=l}cancel(l){(0,Ne.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,Ne.Wj)("OnDisconnect.cancel","onComplete",l,!0);const u=this._delegate.cancel();return l&&u.then(()=>l(null),p=>l(p)),u}remove(l){(0,Ne.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,Ne.Wj)("OnDisconnect.remove","onComplete",l,!0);const u=this._delegate.remove();return l&&u.then(()=>l(null),p=>l(p)),u}set(l,u){(0,Ne.Dv)("OnDisconnect.set",1,2,arguments.length),(0,Ne.Wj)("OnDisconnect.set","onComplete",u,!0);const p=this._delegate.set(l);return u&&p.then(()=>u(null),v=>u(v)),p}setWithPriority(l,u,p){(0,Ne.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,Ne.Wj)("OnDisconnect.setWithPriority","onComplete",p,!0);const v=this._delegate.setWithPriority(l,u);return p&&v.then(()=>p(null),R=>p(R)),v}update(l,u){if((0,Ne.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(l)){const v={};for(let R=0;R<l.length;++R)v[""+R]=l[R];l=v,Hp("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,Ne.Wj)("OnDisconnect.update","onComplete",u,!0);const p=this._delegate.update(l);return u&&p.then(()=>u(null),v=>u(v)),p}}class Wp{constructor(l,u){this.committed=l,this.snapshot=u}toJSON(){return(0,Ne.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class oc{constructor(l,u){this._database=l,this._delegate=u}val(){return(0,Ne.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,Ne.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,Ne.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,Ne.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(l){return(0,Ne.Dv)("DataSnapshot.child",0,1,arguments.length),l=String(l),Pc("DataSnapshot.child","path",l,!1),new oc(this._database,this._delegate.child(l))}hasChild(l){return(0,Ne.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Pc("DataSnapshot.hasChild","path",l,!1),this._delegate.hasChild(l)}getPriority(){return(0,Ne.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(l){return(0,Ne.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,Ne.Wj)("DataSnapshot.forEach","action",l,!1),this._delegate.forEach(u=>l(new oc(this._database,u)))}hasChildren(){return(0,Ne.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,Ne.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,Ne.Dv)("DataSnapshot.ref",0,0,arguments.length),new Dl(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class xo{constructor(l,u){this.database=l,this._delegate=u}on(l,u,p,v){var R;(0,Ne.Dv)("Query.on",2,4,arguments.length),(0,Ne.Wj)("Query.on","callback",u,!1);const V=xo.getCancelAndContextArgs_("Query.on",p,v),se=(He,It)=>{u.call(V.context,new oc(this.database,He),It)};se.userCallback=u,se.context=V.context;const Se=null===(R=V.cancel)||void 0===R?void 0:R.bind(V.context);switch(l){case"value":return Ag(this._delegate,se,Se),u;case"child_added":return Ep(this._delegate,se,Se),u;case"child_removed":return nc(this._delegate,se,Se),u;case"child_changed":return xg(this._delegate,se,Se),u;case"child_moved":return fu(this._delegate,se,Se),u;default:throw new Error((0,Ne.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(l,u,p){if((0,Ne.Dv)("Query.off",0,3,arguments.length),function(d,l,u){if(void 0!==l)switch(l){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,Ne.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,l),(0,Ne.Wj)("Query.off","callback",u,!0),(0,Ne.lb)("Query.off","context",p,!0),u){const v=()=>{};v.userCallback=u,v.context=p,_h(this._delegate,l,v)}else _h(this._delegate,l)}get(){return Gl(this._delegate).then(l=>new oc(this.database,l))}once(l,u,p,v){(0,Ne.Dv)("Query.once",1,4,arguments.length),(0,Ne.Wj)("Query.once","callback",u,!0);const R=xo.getCancelAndContextArgs_("Query.once",p,v),V=new Ne.BH,se=(He,It)=>{const St=new oc(this.database,He);u&&u.call(R.context,St,It),V.resolve(St)};se.userCallback=u,se.context=R.context;const Se=He=>{R.cancel&&R.cancel.call(R.context,He),V.reject(He)};switch(l){case"value":Ag(this._delegate,se,Se,{onlyOnce:!0});break;case"child_added":Ep(this._delegate,se,Se,{onlyOnce:!0});break;case"child_removed":nc(this._delegate,se,Se,{onlyOnce:!0});break;case"child_changed":xg(this._delegate,se,Se,{onlyOnce:!0});break;case"child_moved":fu(this._delegate,se,Se,{onlyOnce:!0});break;default:throw new Error((0,Ne.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return V.promise}limitToFirst(l){return(0,Ne.Dv)("Query.limitToFirst",1,1,arguments.length),new xo(this.database,za(this._delegate,function(d){if("number"!=typeof d||Math.floor(d)!==d||d<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Og(d)}(l)))}limitToLast(l){return(0,Ne.Dv)("Query.limitToLast",1,1,arguments.length),new xo(this.database,za(this._delegate,function(d){if("number"!=typeof d||Math.floor(d)!==d||d<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Ng(d)}(l)))}orderByChild(l){return(0,Ne.Dv)("Query.orderByChild",1,1,arguments.length),new xo(this.database,za(this._delegate,function(d){if("$key"===d)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===d)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===d)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Pc("orderByChild","path",d,!1),new $m(d)}(l)))}orderByKey(){return(0,Ne.Dv)("Query.orderByKey",0,0,arguments.length),new xo(this.database,za(this._delegate,new Um))}orderByPriority(){return(0,Ne.Dv)("Query.orderByPriority",0,0,arguments.length),new xo(this.database,za(this._delegate,new vh))}orderByValue(){return(0,Ne.Dv)("Query.orderByValue",0,0,arguments.length),new xo(this.database,za(this._delegate,new Pg))}startAt(l=null,u){return(0,Ne.Dv)("Query.startAt",0,2,arguments.length),new xo(this.database,za(this._delegate,function(d=null,l){return Ha("startAt","key",l,!0),new ff(d,l)}(l,u)))}startAfter(l=null,u){return(0,Ne.Dv)("Query.startAfter",0,2,arguments.length),new xo(this.database,za(this._delegate,function(d,l){return Ha("startAfter","key",l,!0),new wp(d,l)}(l,u)))}endAt(l=null,u){return(0,Ne.Dv)("Query.endAt",0,2,arguments.length),new xo(this.database,za(this._delegate,function(d,l){return Ha("endAt","key",l,!0),new Ip(d,l)}(l,u)))}endBefore(l=null,u){return(0,Ne.Dv)("Query.endBefore",0,2,arguments.length),new xo(this.database,za(this._delegate,function(d,l){return Ha("endBefore","key",l,!0),new Td(d,l)}(l,u)))}equalTo(l,u){return(0,Ne.Dv)("Query.equalTo",1,2,arguments.length),new xo(this.database,za(this._delegate,function(d,l){return Ha("equalTo","key",l,!0),new jm(d,l)}(l,u)))}toString(){return(0,Ne.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,Ne.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(l){if((0,Ne.Dv)("Query.isEqual",1,1,arguments.length),!(l instanceof xo))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(l._delegate)}static getCancelAndContextArgs_(l,u,p){const v={cancel:void 0,context:void 0};if(u&&p)v.cancel=u,(0,Ne.Wj)(l,"cancel",v.cancel,!0),v.context=p,(0,Ne.lb)(l,"context",v.context,!0);else if(u)if("object"==typeof u&&null!==u)v.context=u;else{if("function"!=typeof u)throw new Error((0,Ne.gK)(l,"cancelOrContext")+" must either be a cancel callback or a context object.");v.cancel=u}return v}get ref(){return new Dl(this.database,new fl(this._delegate._repo,this._delegate._path))}}class Dl extends xo{constructor(l,u){super(l,new Wa(u._repo,u._path,new Pl,!1)),this.database=l,this._delegate=u}getKey(){return(0,Ne.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(l){return(0,Ne.Dv)("Reference.child",1,1,arguments.length),"number"==typeof l&&(l=String(l)),new Dl(this.database,fr(this._delegate,l))}getParent(){(0,Ne.Dv)("Reference.parent",0,0,arguments.length);const l=this._delegate.parent;return l?new Dl(this.database,l):null}getRoot(){return(0,Ne.Dv)("Reference.root",0,0,arguments.length),new Dl(this.database,this._delegate.root)}set(l,u){(0,Ne.Dv)("Reference.set",1,2,arguments.length),(0,Ne.Wj)("Reference.set","onComplete",u,!0);const p=pl(this._delegate,l);return u&&p.then(()=>u(null),v=>u(v)),p}update(l,u){if((0,Ne.Dv)("Reference.update",1,2,arguments.length),Array.isArray(l)){const v={};for(let R=0;R<l.length;++R)v[""+R]=l[R];l=v,Hp("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Uo("Reference.update",this._delegate._path),(0,Ne.Wj)("Reference.update","onComplete",u,!0);const p=vp(this._delegate,l);return u&&p.then(()=>u(null),v=>u(v)),p}setWithPriority(l,u,p){(0,Ne.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,Ne.Wj)("Reference.setWithPriority","onComplete",p,!0);const v=function(d,l,u){if(Uo("setWithPriority",d._path),ul("setWithPriority",l,d._path,!1),Nc("setWithPriority",u,!1),".length"===d.key||".keys"===d.key)throw"setWithPriority failed: "+d.key+" is a read-only object.";const p=new Ne.BH;return uf(d._repo,d._path,l,u,p.wrapCallback(()=>{})),p.promise}(this._delegate,l,u);return p&&v.then(()=>p(null),R=>p(R)),v}remove(l){(0,Ne.Dv)("Reference.remove",0,1,arguments.length),(0,Ne.Wj)("Reference.remove","onComplete",l,!0);const u=function(d){return Uo("remove",d._path),pl(d,null)}(this._delegate);return l&&u.then(()=>l(null),p=>l(p)),u}transaction(l,u,p){(0,Ne.Dv)("Reference.transaction",1,3,arguments.length),(0,Ne.Wj)("Reference.transaction","transactionUpdate",l,!1),(0,Ne.Wj)("Reference.transaction","onComplete",u,!0),function(d,l,u,p){if(void 0!==u&&"boolean"!=typeof u)throw new Error((0,Ne.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,p);const v=function(d,l,u){var p;if(d=(0,Ne.m9)(d),Uo("Reference.transaction",d._path),".length"===d.key||".keys"===d.key)throw"Reference.transaction failed: "+d.key+" is a read-only object.";const v=null===(p=null==u?void 0:u.applyLocally)||void 0===p||p,R=new Ne.BH,se=Ag(d,()=>{});return function(d,l,u,p,v,R){hu(d,"transaction on "+l);const V={path:l,update:u,onComplete:p,status:null,order:Zr(),applyLocally:R,retryCount:0,unwatcher:v,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},se=Ju(d,l,void 0);V.currentInputSnapshot=se;const Se=V.update(se.val());if(void 0===Se)V.unwatcher(),V.currentOutputSnapshotRaw=null,V.currentOutputSnapshotResolved=null,V.onComplete&&V.onComplete(null,!1,V.currentInputSnapshot);else{ys("transaction failed: Data returned ",Se,V.path),V.status=0;const He=ef(d.transactionQueueTree_,l),It=Oc(He)||[];let St;It.push(V),tf(He,It),"object"==typeof Se&&null!==Se&&(0,Ne.r3)(Se,".priority")?(St=(0,Ne.DV)(Se,".priority"),(0,Ne.hu)(lh(St),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):St=(nh(d.serverSyncTree_,l)||er.EMPTY_NODE).getPriority().val();const Bt=Fc(d),On=ni(Se,St),zn=Mc(On,se,Bt);V.currentOutputSnapshotRaw=On,V.currentOutputSnapshotResolved=zn,V.currentWriteId=bd(d);const Xr=Ac(d.serverSyncTree_,l,zn,V.currentWriteId,V.applyLocally);Zo(d.eventQueue_,l,Xr),Uc(d,d.transactionQueueTree_)}}(d._repo,d._path,l,(Se,He,It)=>{let St=null;Se?R.reject(Se):(St=new tc(It,new fl(d._repo,d._path),Qr),R.resolve(new Dh(He,St)))},se,v),R.promise}(this._delegate,l,{applyLocally:p}).then(R=>new Wp(R.committed,new oc(this.database,R.snapshot)));return u&&v.then(R=>u(null,R.committed,R.snapshot),R=>u(R,!1,null)),v}setPriority(l,u){(0,Ne.Dv)("Reference.setPriority",1,2,arguments.length),(0,Ne.Wj)("Reference.setPriority","onComplete",u,!0);const p=function(d,l){d=(0,Ne.m9)(d),Uo("setPriority",d._path),Nc("setPriority",l,!1);const u=new Ne.BH;return uf(d._repo,Ui(d._path,".priority"),l,null,u.wrapCallback(()=>{})),u.promise}(this._delegate,l);return u&&p.then(()=>u(null),v=>u(v)),p}push(l,u){(0,Ne.Dv)("Reference.push",0,2,arguments.length),(0,Ne.Wj)("Reference.push","onComplete",u,!0);const p=function(d,l){d=(0,Ne.m9)(d),Uo("push",d._path),ul("push",l,d._path,!0);const u=ch(d._repo),p=Xl(u),v=fr(d,p),R=fr(d,p);let V;return V=null!=l?pl(R,l).then(()=>R):Promise.resolve(R),v.then=V.then.bind(V),v.catch=V.then.bind(V,void 0),v}(this._delegate,l),v=p.then(V=>new Dl(this.database,V));u&&v.then(()=>u(null),V=>u(V));const R=new Dl(this.database,p);return R.then=v.then.bind(v),R.catch=v.catch.bind(v,void 0),R}onDisconnect(){return Uo("Reference.onDisconnect",this._delegate._path),new ey(new gp(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Yc{constructor(l,u){this._delegate=l,this.app=u,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:wh,forceLongPolling:Tp}}useEmulator(l,u,p={}){Sp(this._delegate,l,u,p)}ref(l){if((0,Ne.Dv)("database.ref",0,1,arguments.length),l instanceof Dl){const u=mp(this._delegate,l.toString());return new Dl(this,u)}{const u=Sg(this._delegate,l);return new Dl(this,u)}}refFromURL(l){(0,Ne.Dv)("database.refFromURL",1,1,arguments.length);const p=mp(this._delegate,l);return new Dl(this,p)}goOffline(){return(0,Ne.Dv)("database.goOffline",0,0,arguments.length),function(d){(d=(0,Ne.m9)(d))._checkNotDeleted("goOffline"),Cd(d._repo)}(this._delegate)}goOnline(){return(0,Ne.Dv)("database.goOnline",0,0,arguments.length),function(d){(d=(0,Ne.m9)(d))._checkNotDeleted("goOnline"),function(d){d.persistentConnection_&&d.persistentConnection_.resume(af)}(d._repo)}(this._delegate)}}Yc.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:d=>function(d){return{".sv":{increment:d}}}(d)};var _s=Object.freeze({__proto__:null,initStandalone:function({app:d,url:l,version:u,customAuthImpl:p,namespace:v,nodeAdmin:R=!1}){zo(u);const V=new Yi.zt("auth-internal",new Yi.H0("database-standalone"));return V.setComponent(new Yi.wA("auth-internal",()=>p,"PRIVATE")),{instance:new Yc(Ih(d,V,void 0,l,R),d),namespace:v}}});const ac=Yc.ServerValue;!function(d){d.INTERNAL.registerComponent(new Yi.wA("database-compat",(l,{instanceIdentifier:u})=>{const p=l.getProvider("app-compat").getImmediate(),v=l.getProvider("database").getImmediate({identifier:u});return new Yc(v,p)},"PUBLIC").setServiceProps({Reference:Dl,Query:xo,Database:Yc,DataSnapshot:oc,enableLogging:xd,INTERNAL:_s,ServerValue:ac}).setMultipleInstances(!0)),d.registerVersion("@firebase/database-compat","0.2.9")}(nm.Z);var Tl=B(9765),lc=B(4402),Vu=B(309),uc=B(7771),Gp=B(5319),ny=B(7971),Of=B(8858);class rm extends Tl.xQ{constructor(l=Number.POSITIVE_INFINITY,u=Number.POSITIVE_INFINITY,p){super(),this.scheduler=p,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=l<1?1:l,this._windowTime=u<1?1:u,u===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(l){if(!this.isStopped){const u=this._events;u.push(l),u.length>this._bufferSize&&u.shift()}super.next(l)}nextTimeWindow(l){this.isStopped||(this._events.push(new im(this._getNow(),l)),this._trimBufferThenGetEvents()),super.next(l)}_subscribe(l){const u=this._infiniteTimeWindow,p=u?this._events:this._trimBufferThenGetEvents(),v=this.scheduler,R=p.length;let V;if(this.closed)throw new ny.N;if(this.isStopped||this.hasError?V=Gp.w.EMPTY:(this.observers.push(l),V=new Of.W(this,l)),v&&l.add(l=new Vu.ht(l,v)),u)for(let se=0;se<R&&!l.closed;se++)l.next(p[se]);else for(let se=0;se<R&&!l.closed;se++)l.next(p[se].value);return this.hasError?l.error(this.thrownError):this.isStopped&&l.complete(),V}_getNow(){return(this.scheduler||uc.c).now()}_trimBufferThenGetEvents(){const l=this._getNow(),u=this._bufferSize,p=this._windowTime,v=this._events,R=v.length;let V=0;for(;V<R&&!(l-v[V].time<p);)V++;return R>u&&(V=Math.max(V,R-u)),V>0&&v.splice(0,V),v}}class im{constructor(l,u){this.time=l,this.value=u}}function Rh(d,l,u){let p;return p=d&&"object"==typeof d?d:{bufferSize:d,windowTime:l,refCount:!1,scheduler:u},v=>v.lift(function({bufferSize:d=Number.POSITIVE_INFINITY,windowTime:l=Number.POSITIVE_INFINITY,refCount:u,scheduler:p}){let v,V,R=0,se=!1,Se=!1;return function(It){let St;R++,!v||se?(se=!1,v=new rm(d,l,p),St=v.subscribe(this),V=It.subscribe({next(Bt){v.next(Bt)},error(Bt){se=!0,v.error(Bt)},complete(){Se=!0,V=void 0,v.complete()}}),Se&&(V=void 0)):St=v.subscribe(this),this.add(()=>{R--,St.unsubscribe(),St=void 0,V&&!Se&&u&&0===R&&(V.unsubscribe(),V=void 0,v=void 0)})}}(p))}var zp=B(8049);function Ld(d,l){return l?(0,Lu.w)(()=>d,l):(0,Lu.w)(()=>d)}var Kc=B(3101),Nf=B(5435),Mh=B(7841);const Vd=new O.OlP("angularfire2.auth.use-emulator"),Pf=new O.OlP("angularfire2.auth.settings"),Yp=new O.OlP("angularfire2.auth.tenant-id"),Kp=new O.OlP("angularfire2.auth.langugage-code"),Oh=new O.OlP("angularfire2.auth.use-device-language"),kf=new O.OlP("angularfire.auth.persistence"),Ff=(d,l,u,p,v,R,V,se)=>(0,Xo.cc)(`${d.name}.auth`,"AngularFireAuth",d.name,()=>{const Se=l.runOutsideAngular(()=>d.auth());if(u&&Se.useEmulator(...u),p&&(Se.tenantId=p),Se.languageCode=v,R&&Se.useDeviceLanguage(),V)for(const[He,It]of Object.entries(V))Se.settings[He]=It;return se&&Se.setPersistence(se),Se},[u,p,v,R,V,se]);let Bd=(()=>{class d{constructor(u,p,v,R,V,se,Se,He,It,St,Bt,On){const zn=new Tl.xQ,Xr=(0,Qo.of)(void 0).pipe((0,Vu.QV)(V.outsideAngular),(0,Lu.w)(()=>R.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,4828)))),(0,or.U)(()=>(0,Xo.on)(u,R,p)),(0,or.U)(ds=>Ff(ds,R,se,He,It,St,Se,Bt)),Rh({bufferSize:1,refCount:!1}));if((0,E.PM)(v))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Qo.of)(null);else{Xr.pipe((0,zp.P)()).subscribe();const Mo=Xr.pipe((0,Lu.w)(hs=>hs.getRedirectResult().then(Oo=>Oo,()=>null)),xr.iC,Rh({bufferSize:1,refCount:!1})),pa=Xr.pipe((0,Lu.w)(hs=>new zc.y(Oo=>({unsubscribe:R.runOutsideAngular(()=>hs.onAuthStateChanged(yu=>Oo.next(yu),yu=>Oo.error(yu),()=>Oo.complete()))})))),Aa=Xr.pipe((0,Lu.w)(hs=>new zc.y(Oo=>({unsubscribe:R.runOutsideAngular(()=>hs.onIdTokenChanged(yu=>Oo.next(yu),yu=>Oo.error(yu),()=>Oo.complete()))}))));this.authState=Mo.pipe(Ld(pa),(0,Kc.R)(V.outsideAngular),(0,Vu.QV)(V.insideAngular)),this.user=Mo.pipe(Ld(Aa),(0,Kc.R)(V.outsideAngular),(0,Vu.QV)(V.insideAngular)),this.idToken=this.user.pipe((0,Lu.w)(hs=>hs?(0,lc.D)(hs.getIdToken()):(0,Qo.of)(null))),this.idTokenResult=this.user.pipe((0,Lu.w)(hs=>hs?(0,lc.D)(hs.getIdTokenResult()):(0,Qo.of)(null))),this.credential=(0,kd.T)(Mo,zn,this.authState.pipe((0,Nf.h)(hs=>!hs))).pipe((0,or.U)(hs=>(null==hs?void 0:hs.user)?hs:null),(0,Kc.R)(V.outsideAngular),(0,Vu.QV)(V.insideAngular))}return(0,Xo.pX)(this,Xr,R,{spy:{apply:(ds,Mo,pa)=>{(ds.startsWith("signIn")||ds.startsWith("createUser"))&&pa.then(Aa=>zn.next(Aa))}}})}}return d.\u0275fac=function(u){return new(u||d)(O.LFG(Xo.Dh),O.LFG(Xo.xv,8),O.LFG(O.Lbi),O.LFG(O.R0b),O.LFG(xr.HU),O.LFG(Vd,8),O.LFG(Pf,8),O.LFG(Yp,8),O.LFG(Kp,8),O.LFG(Oh,8),O.LFG(kf,8),O.LFG(Cs.nm,8))},d.\u0275prov=O.Yz7({token:d,factory:d.\u0275fac,providedIn:"any"}),d})();function om(d){return null==d}function Lf(d){return"function"==typeof d.set}function Vf(d,l){return Lf(l)?l:d.ref(l)}function Nh(d,l){if(function(d){return"string"==typeof d}(d))return l.stringCase();if(Lf(d))return l.firebaseCase();if(function(d){return"function"==typeof d.exportVal}(d))return l.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof d)}function Zc(d,l,u="on",p=Lp.z){return new zc.y(v=>{let R=null;return R=d[u](l,(V,se)=>{p.schedule(()=>{v.next({snapshot:V,prevKey:se})}),"once"===u&&p.schedule(()=>v.complete())},V=>{p.schedule(()=>v.error(V))}),"on"===u?{unsubscribe(){null!=R&&d.off(l,R)}}:{unsubscribe(){}}}).pipe((0,or.U)(v=>{const{snapshot:R,prevKey:V}=v;let se=null;return R.exists()&&(se=R.key),{type:l,payload:R,prevKey:V,key:se}}),(0,em.B)())}function gl(d,l){const u=d.length;for(let p=0;p<u;p++)if(d[p].payload.key===l)return p;return-1}function bi(d,l){const{payload:u,prevKey:p,key:v}=l,R=gl(d,v),V=function(d,l){if(om(l))return 0;{const u=gl(d,l);return-1===u?d.length:u+1}}(d,p);switch(l.type){case"value":if(l.payload&&l.payload.exists()){let se=null;l.payload.forEach(Se=>{const He={payload:Se,type:"value",prevKey:se,key:Se.key};return se=Se.key,d=[...d,He],!1})}return d;case"child_added":if(R>-1){const se=d[R-1];(se&&se.key||null)!==p&&(d=d.filter(Se=>Se.payload.key!==u.key)).splice(V,0,l)}else{if(null==p)return[l,...d];(d=d.slice()).splice(V,0,l)}return d;case"child_removed":return d.filter(se=>se.payload.key!==u.key);case"child_changed":return d.map(se=>se.payload.key===v?l:se);case"child_moved":if(R>-1){const se=d.splice(R,1)[0];return(d=d.slice()).splice(V,0,se),d}return d;default:return d}}function am(d){return(om(d)||0===d.length)&&(d=["child_added","child_removed","child_changed","child_moved"]),d}function Bf(d,l,u){return function(d,l,u){return Zc(d,"value","once",u).pipe((0,Lu.w)(p=>{const v=[(0,Qo.of)(p)];return l.forEach(R=>v.push(Zc(d,R,"on",u))),(0,kd.T)(...v).pipe((0,Ah.R)(bi,[]))}),(0,ic.x)())}(d,l=am(l),u)}function $f(d,l,u){const p=(l=am(l)).map(v=>Zc(d,v,"on",u));return(0,kd.T)(...p)}function jo(d,l){return function(p,v){return Nh(p,{stringCase:()=>d.child(p)[l](v),firebaseCase:()=>p[l](v),snapshotCase:()=>p.ref[l](v)})}}function Sl(d){return function(u){return u?Nh(u,{stringCase:()=>d.child(u).remove(),firebaseCase:()=>u.remove(),snapshotCase:()=>u.ref.remove()}):d.remove()}}function Uf(d,l){return function(){return Zc(d,"value","on",l)}}const ly=new O.OlP("angularfire2.realtimeDatabaseURL"),Qp=new O.OlP("angularfire2.database.use-emulator");let Xp=(()=>{class d{constructor(u,p,v,R,V,se,Se,He,It,St,Bt,On,zn,Xr,ds){this.schedulers=se;const Mo=Se,pa=(0,Xo.on)(u,V,p);He&&Ff(pa,V,It,Bt,On,zn,St,Xr),this.database=(0,Xo.cc)(`${pa.name}.database.${v}`,"AngularFireDatabase",pa.name,()=>{const Aa=V.runOutsideAngular(()=>pa.database(v||void 0));return Mo&&Aa.useEmulator(...Mo),Aa},[Mo])}list(u,p){const v=this.schedulers.ngZone.runOutsideAngular(()=>Vf(this.database,u));let R=v;return p&&(R=p(v)),function(d,l){const u=l.schedulers.outsideAngular,p=l.schedulers.ngZone.run(()=>d.ref);return{query:d,update:jo(p,"update"),set:jo(p,"set"),push:v=>p.push(v),remove:Sl(p),snapshotChanges:v=>Bf(d,v,u).pipe(xr.iC),stateChanges:v=>$f(d,v,u).pipe(xr.iC),auditTrail:v=>function(d,l,u){return function(d,l,u){return function(d,l){return Zc(d,"value","on",l).pipe((0,or.U)(u=>{let p;return u.payload.forEach(v=>(p=v.key,!1)),{data:u,lastKeyToLoad:p}}))}(d,u).pipe(function(...d){return l=>{let u;return"function"==typeof d[d.length-1]&&(u=d.pop()),l.lift(new Xm(d,u))}}(l),(0,or.U)(([v,R])=>{const V=v.lastKeyToLoad,se=R.map(Se=>Se.key);return{actions:R,lastKeyToLoad:V,loadedKeys:se}}),function(d){return l=>l.lift(new Af(d))}(v=>-1===v.loadedKeys.indexOf(v.lastKeyToLoad)),(0,or.U)(v=>v.actions))}(d,$f(d,l).pipe((0,Ah.R)((v,R)=>[...v,R],[])),u)}(d,v,u).pipe(xr.iC),valueChanges:(v,R)=>Bf(d,v,u).pipe((0,or.U)(se=>se.map(Se=>R&&R.idField?Object.assign(Object.assign({},Se.payload.val()),{[R.idField]:Se.key}):Se.payload.val())),xr.iC)}}(R,this)}object(u){return function(d,l){return{query:d,snapshotChanges:()=>Uf(d,l.schedulers.outsideAngular)().pipe(xr.iC),update:u=>d.ref.update(u),set:u=>d.ref.set(u),remove:()=>d.ref.remove(),valueChanges:()=>Uf(d,l.schedulers.outsideAngular)().pipe(xr.iC,(0,or.U)(p=>p.payload.exists()?p.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Vf(this.database,u)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return d.\u0275fac=function(u){return new(u||d)(O.LFG(Xo.Dh),O.LFG(Xo.xv,8),O.LFG(ly,8),O.LFG(O.Lbi),O.LFG(O.R0b),O.LFG(xr.HU),O.LFG(Qp,8),O.LFG(Bd,8),O.LFG(Vd,8),O.LFG(Pf,8),O.LFG(Yp,8),O.LFG(Kp,8),O.LFG(Oh,8),O.LFG(kf,8),O.LFG(Cs.nm,8))},d.\u0275prov=O.Yz7({token:d,factory:d.\u0275fac,providedIn:"any"}),d})(),jf=(()=>{class d{constructor(){Mh.Z.registerVersion("angularfire",xr.q4.full,"rtdb-compat")}}return d.\u0275fac=function(u){return new(u||d)},d.\u0275mod=O.oAB({type:d}),d.\u0275inj=O.cJS({providers:[Xp]}),d})();var uy=B(3792),Jp=B(3071),cc=B(9761);function Hf(){return d=>d.lift(new zl)}class zl{call(l,u){return u.subscribe(new Ph(l))}}class Ph extends $p.L{constructor(l){super(l),this.hasPrev=!1}_next(l){let u;this.hasPrev?u=[this.prev,l]:this.hasPrev=!0,this.prev=l,u&&this.destination.next(u)}}var vn=B(1304);function ml(d,l){if(void 0===l)return{merge:!1};if(void 0!==l.mergeFields&&void 0!==l.merge)throw new vn.WA("invalid-argument",`Invalid options passed to function ${d}(): You cannot specify both "merge" and "mergeFields".`);return l}function dc(){if("undefined"==typeof Uint8Array)throw new vn.WA("unimplemented","Uint8Arrays are not available in this environment.")}function Ro(){if(!(0,vn.Me)())throw new vn.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class yl{constructor(l){this._delegate=l}static fromBase64String(l){return Ro(),new yl(vn.Jj.fromBase64String(l))}static fromUint8Array(l){return dc(),new yl(vn.Jj.fromUint8Array(l))}toBase64(){return Ro(),this._delegate.toBase64()}toUint8Array(){return dc(),this._delegate.toUint8Array()}isEqual(l){return this._delegate.isEqual(l._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Bu(d){return function(d,l){if("object"!=typeof d||null===d)return!1;const u=d;for(const p of["next","error","complete"])if(p in u&&"function"==typeof u[p])return!0;return!1}(d)}class Wf{enableIndexedDbPersistence(l,u){return(0,vn.ST)(l._delegate,{forceOwnership:u})}enableMultiTabIndexedDbPersistence(l){return(0,vn.fH)(l._delegate)}clearIndexedDbPersistence(l){return(0,vn.Fc)(l._delegate)}}class gu{constructor(l,u,p){this._delegate=u,this._persistenceProvider=p,this.INTERNAL={delete:()=>this.terminate()},l instanceof vn.l7||(this._appCompat=l)}get _databaseId(){return this._delegate._databaseId}settings(l){const u=this._delegate._getSettings();!l.merge&&u.host!==l.host&&(0,vn.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),l.merge&&delete(l=Object.assign(Object.assign({},u),l)).merge,this._delegate._setSettings(l)}useEmulator(l,u,p={}){(0,vn.at)(this._delegate,l,u,p)}enableNetwork(){return(0,vn.Ix)(this._delegate)}disableNetwork(){return(0,vn.TF)(this._delegate)}enablePersistence(l){let u=!1,p=!1;return l&&(u=!!l.synchronizeTabs,p=!!l.experimentalForceOwningTab,(0,vn.Wi)("synchronizeTabs",u,"experimentalForceOwningTab",p)),u?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,p)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,vn.Mx)(this._delegate)}onSnapshotsInSync(l){return(0,vn.sc)(this._delegate,l)}get app(){if(!this._appCompat)throw new vn.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(l){try{return new Jc(this,(0,vn.hJ)(this._delegate,l))}catch(u){throw _o(u,"collection()","Firestore.collection()")}}doc(l){try{return new Jo(this,(0,vn.JU)(this._delegate,l))}catch(u){throw _o(u,"doc()","Firestore.doc()")}}collectionGroup(l){try{return new fa(this,(0,vn.B$)(this._delegate,l))}catch(u){throw _o(u,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(l){return(0,vn.i3)(this._delegate,u=>l(new fc(this,u)))}batch(){return(0,vn.qY)(this._delegate),new Al(new vn.PU(this._delegate,l=>(0,vn.GL)(this._delegate,l)))}loadBundle(l){return(0,vn.Pb)(this._delegate,l)}namedQuery(l){return(0,vn.L$)(this._delegate,l).then(u=>u?new fa(this,u):null)}}class ql extends vn.u7{constructor(l){super(),this.firestore=l}convertBytes(l){return new yl(new vn.Jj(l))}convertReference(l){const u=this.convertDocumentKey(l,this.firestore._databaseId);return Jo.forKey(u,this.firestore,null)}}class fc{constructor(l,u){this._firestore=l,this._delegate=u,this._userDataWriter=new ql(l)}get(l){const u=mu(l);return this._delegate.get(u).then(p=>new Ud(this._firestore,new vn.xU(this._firestore._delegate,this._userDataWriter,p._key,p._document,p.metadata,u.converter)))}set(l,u,p){const v=mu(l);return p?(ml("Transaction.set",p),this._delegate.set(v,u,p)):this._delegate.set(v,u),this}update(l,u,p,...v){const R=mu(l);return 2===arguments.length?this._delegate.update(R,u):this._delegate.update(R,u,p,...v),this}delete(l){const u=mu(l);return this._delegate.delete(u),this}}class Al{constructor(l){this._delegate=l}set(l,u,p){const v=mu(l);return p?(ml("WriteBatch.set",p),this._delegate.set(v,u,p)):this._delegate.set(v,u),this}update(l,u,p,...v){const R=mu(l);return 2===arguments.length?this._delegate.update(R,u):this._delegate.update(R,u,p,...v),this}delete(l){const u=mu(l);return this._delegate.delete(u),this}commit(){return this._delegate.commit()}}class Ka{constructor(l,u,p){this._firestore=l,this._userDataWriter=u,this._delegate=p}fromFirestore(l,u){const p=new vn.$q(this._firestore._delegate,this._userDataWriter,l._key,l._document,l.metadata,null);return this._delegate.fromFirestore(new Xc(this._firestore,p),null!=u?u:{})}toFirestore(l,u){return u?this._delegate.toFirestore(l,u):this._delegate.toFirestore(l)}static getInstance(l,u){const p=Ka.INSTANCES;let v=p.get(l);v||(v=new WeakMap,p.set(l,v));let R=v.get(u);return R||(R=new Ka(l,new ql(l),u),v.set(u,R)),R}}Ka.INSTANCES=new WeakMap;class Jo{constructor(l,u){this.firestore=l,this._delegate=u,this._userDataWriter=new ql(l)}static forPath(l,u,p){if(l.length%2!=0)throw new vn.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${l.canonicalString()} has ${l.length}`);return new Jo(u,new vn.my(u._delegate,p,new vn.Ky(l)))}static forKey(l,u,p){return new Jo(u,new vn.my(u._delegate,p,l))}get id(){return this._delegate.id}get parent(){return new Jc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(l){try{return new Jc(this.firestore,(0,vn.hJ)(this._delegate,l))}catch(u){throw _o(u,"collection()","DocumentReference.collection()")}}isEqual(l){return(l=(0,Ne.m9)(l))instanceof vn.my&&(0,vn.Eo)(this._delegate,l)}set(l,u){u=ml("DocumentReference.set",u);try{return u?(0,vn.pl)(this._delegate,l,u):(0,vn.pl)(this._delegate,l)}catch(p){throw _o(p,"setDoc()","DocumentReference.set()")}}update(l,u,...p){try{return 1===arguments.length?(0,vn.r7)(this._delegate,l):(0,vn.r7)(this._delegate,l,u,...p)}catch(v){throw _o(v,"updateDoc()","DocumentReference.update()")}}delete(){return(0,vn.oe)(this._delegate)}onSnapshot(...l){const u=Qc(l),p=Gf(l,v=>new Ud(this.firestore,new vn.xU(this.firestore._delegate,this._userDataWriter,v._key,v._document,v.metadata,this._delegate.converter)));return(0,vn.cf)(this._delegate,u,p)}get(l){let u;return u="cache"===(null==l?void 0:l.source)?(0,vn.kl)(this._delegate):"server"===(null==l?void 0:l.source)?(0,vn.Xk)(this._delegate):(0,vn.QT)(this._delegate),u.then(p=>new Ud(this.firestore,new vn.xU(this.firestore._delegate,this._userDataWriter,p._key,p._document,p.metadata,this._delegate.converter)))}withConverter(l){return new Jo(this.firestore,this._delegate.withConverter(l?Ka.getInstance(this.firestore,l):null))}}function _o(d,l,u){return d.message=d.message.replace(l,u),d}function Qc(d){for(const l of d)if("object"==typeof l&&!Bu(l))return l;return{}}function Gf(d,l){var u,p;let v;return v=Bu(d[0])?d[0]:Bu(d[1])?d[1]:"function"==typeof d[0]?{next:d[0],error:d[1],complete:d[2]}:{next:d[1],error:d[2],complete:d[3]},{next:R=>{v.next&&v.next(l(R))},error:null===(u=v.error)||void 0===u?void 0:u.bind(v),complete:null===(p=v.complete)||void 0===p?void 0:p.bind(v)}}class Ud{constructor(l,u){this._firestore=l,this._delegate=u}get ref(){return new Jo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(l){return this._delegate.data(l)}get(l,u){return this._delegate.get(l,u)}isEqual(l){return(0,vn.qK)(this._delegate,l._delegate)}}class Xc extends Ud{data(l){const u=this._delegate.data(l);return(0,vn.K9)(void 0!==u,"Document in a QueryDocumentSnapshot should exist"),u}}class fa{constructor(l,u){this.firestore=l,this._delegate=u,this._userDataWriter=new ql(l)}where(l,u,p){try{return new fa(this.firestore,(0,vn.IO)(this._delegate,(0,vn.ar)(l,u,p)))}catch(v){throw _o(v,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(l,u){try{return new fa(this.firestore,(0,vn.IO)(this._delegate,(0,vn.Xo)(l,u)))}catch(p){throw _o(p,/(orderBy|where)\(\)/,"Query.$1()")}}limit(l){try{return new fa(this.firestore,(0,vn.IO)(this._delegate,(0,vn.b9)(l)))}catch(u){throw _o(u,"limit()","Query.limit()")}}limitToLast(l){try{return new fa(this.firestore,(0,vn.IO)(this._delegate,(0,vn.vh)(l)))}catch(u){throw _o(u,"limitToLast()","Query.limitToLast()")}}startAt(...l){try{return new fa(this.firestore,(0,vn.IO)(this._delegate,(0,vn.e0)(...l)))}catch(u){throw _o(u,"startAt()","Query.startAt()")}}startAfter(...l){try{return new fa(this.firestore,(0,vn.IO)(this._delegate,(0,vn.TQ)(...l)))}catch(u){throw _o(u,"startAfter()","Query.startAfter()")}}endBefore(...l){try{return new fa(this.firestore,(0,vn.IO)(this._delegate,(0,vn.Lx)(...l)))}catch(u){throw _o(u,"endBefore()","Query.endBefore()")}}endAt(...l){try{return new fa(this.firestore,(0,vn.IO)(this._delegate,(0,vn.Wu)(...l)))}catch(u){throw _o(u,"endAt()","Query.endAt()")}}isEqual(l){return(0,vn.iE)(this._delegate,l._delegate)}get(l){let u;return u="cache"===(null==l?void 0:l.source)?(0,vn.UQ)(this._delegate):"server"===(null==l?void 0:l.source)?(0,vn.zN)(this._delegate):(0,vn.PL)(this._delegate),u.then(p=>new zf(this.firestore,new vn.W(this.firestore._delegate,this._userDataWriter,this._delegate,p._snapshot)))}onSnapshot(...l){const u=Qc(l),p=Gf(l,v=>new zf(this.firestore,new vn.W(this.firestore._delegate,this._userDataWriter,this._delegate,v._snapshot)));return(0,vn.cf)(this._delegate,u,p)}withConverter(l){return new fa(this.firestore,this._delegate.withConverter(l?Ka.getInstance(this.firestore,l):null))}}class dm{constructor(l,u){this._firestore=l,this._delegate=u}get type(){return this._delegate.type}get doc(){return new Xc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class zf{constructor(l,u){this._firestore=l,this._delegate=u}get query(){return new fa(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(l=>new Xc(this._firestore,l))}docChanges(l){return this._delegate.docChanges(l).map(u=>new dm(this._firestore,u))}forEach(l,u){this._delegate.forEach(p=>{l.call(u,new Xc(this._firestore,p))})}isEqual(l){return(0,vn.qK)(this._delegate,l._delegate)}}class Jc extends fa{constructor(l,u){super(l,u),this.firestore=l,this._delegate=u}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const l=this._delegate.parent;return l?new Jo(this.firestore,l):null}doc(l){try{return new Jo(this.firestore,void 0===l?(0,vn.JU)(this._delegate):(0,vn.JU)(this._delegate,l))}catch(u){throw _o(u,"doc()","CollectionReference.doc()")}}add(l){return(0,vn.ET)(this._delegate,l).then(u=>new Jo(this.firestore,u))}isEqual(l){return(0,vn.Eo)(this._delegate,l._delegate)}withConverter(l){return new Jc(this.firestore,this._delegate.withConverter(l?Ka.getInstance(this.firestore,l):null))}}function mu(d){return(0,vn.Cf)(d,vn.my)}class qf{constructor(...l){this._delegate=new vn.Lz(...l)}static documentId(){return new qf(vn.Xb.keyField().canonicalString())}isEqual(l){return(l=(0,Ne.m9)(l))instanceof vn.Lz&&this._delegate._internalPath.isEqual(l._internalPath)}}class ed{constructor(l){this._delegate=l}static serverTimestamp(){const l=(0,vn.Bt)();return l._methodName="FieldValue.serverTimestamp",new ed(l)}static delete(){const l=(0,vn.AK)();return l._methodName="FieldValue.delete",new ed(l)}static arrayUnion(...l){const u=(0,vn.vr)(...l);return u._methodName="FieldValue.arrayUnion",new ed(u)}static arrayRemove(...l){const u=(0,vn.Ab)(...l);return u._methodName="FieldValue.arrayRemove",new ed(u)}static increment(l){const u=(0,vn.nP)(l);return u._methodName="FieldValue.increment",new ed(u)}isEqual(l){return this._delegate.isEqual(l._delegate)}}const vs={Firestore:gu,GeoPoint:vn.F8,Timestamp:vn.EK,Blob:yl,Transaction:fc,WriteBatch:Al,DocumentReference:Jo,DocumentSnapshot:Ud,Query:fa,QueryDocumentSnapshot:Xc,QuerySnapshot:zf,CollectionReference:Jc,FieldPath:qf,FieldValue:ed,setLogLevel:function(d){(0,vn.Ub)(d)},CACHE_SIZE_UNLIMITED:vn.IX};function eg(d,l){return function(d,l=Lp.z){return new zc.y(u=>{let p;return null!=l?l.schedule(()=>{p=d.onSnapshot({includeMetadataChanges:!0},u)}):p=d.onSnapshot({includeMetadataChanges:!0},u),()=>{null!=p&&p()}})}(d,l)}function tg(d,l){return eg(d,l).pipe((0,or.U)(u=>({payload:u,type:"query"})))}function jd(d,l){return tg(d,l).pipe((0,cc.O)(void 0),Hf(),(0,or.U)(([u,p])=>{const v=p.payload.docChanges(),R=v.map(V=>({type:V.type,payload:V}));return u&&JSON.stringify(u.payload.metadata)!==JSON.stringify(p.payload.metadata)&&p.payload.docs.forEach((V,se)=>{const Se=v.find(It=>It.doc.ref.isEqual(V.ref)),He=null==u?void 0:u.payload.docs.find(It=>It.ref.isEqual(V.ref));Se&&JSON.stringify(Se.doc.metadata)===JSON.stringify(V.metadata)||!Se&&He&&JSON.stringify(He.metadata)===JSON.stringify(V.metadata)||R.push({type:"modified",payload:{oldIndex:se,newIndex:se,type:"modified",doc:V}})}),R}))}function hm(d,l,u){return jd(d,u).pipe((0,Ah.R)((p,v)=>function(d,l,u){return l.forEach(p=>{u.indexOf(p.type)>-1&&(d=function(d,l){switch(l.type){case"added":if(!d[l.newIndex]||!d[l.newIndex].doc.ref.isEqual(l.doc.ref))return ng(d,l.newIndex,0,l);break;case"modified":if(null==d[l.oldIndex]||d[l.oldIndex].doc.ref.isEqual(l.doc.ref)){if(l.oldIndex!==l.newIndex){const u=d.slice();return u.splice(l.oldIndex,1),u.splice(l.newIndex,0,l),u}return ng(d,l.newIndex,1,l)}break;case"removed":if(d[l.oldIndex]&&d[l.oldIndex].doc.ref.isEqual(l.doc.ref))return ng(d,l.oldIndex,1)}return d}(d,p))}),d}(p,v.map(R=>R.payload),l),[]),(0,ic.x)(),(0,or.U)(p=>p.map(v=>({type:v.type,payload:v}))))}function ng(d,l,u,...p){const v=d.slice();return v.splice(l,u,...p),v}function o_(d){return(!d||0===d.length)&&(d=["added","removed","modified"]),d}!function(d){(function(d,l){d.INTERNAL.registerComponent(new Yi.wA("firestore-compat",u=>((l,u)=>new gu(l,u,new Wf))(u.getProvider("app-compat").getImmediate(),u.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},vs)))})(d),d.registerVersion("@firebase/firestore-compat","0.2.1")}(nm.Z);class pm{constructor(l,u,p){this.ref=l,this.query=u,this.afs=p}stateChanges(l){let u=jd(this.query,this.afs.schedulers.outsideAngular);return l&&l.length>0&&(u=u.pipe((0,or.U)(p=>p.filter(v=>l.indexOf(v.type)>-1)))),u.pipe((0,cc.O)(void 0),Hf(),(0,Nf.h)(([p,v])=>v.length>0||!p),(0,or.U)(([p,v])=>v),xr.iC)}auditTrail(l){return this.stateChanges(l).pipe((0,Ah.R)((u,p)=>[...u,...p],[]))}snapshotChanges(l){const u=o_(l);return hm(this.query,u,this.afs.schedulers.outsideAngular).pipe(xr.iC)}valueChanges(l={}){return tg(this.query,this.afs.schedulers.outsideAngular).pipe((0,or.U)(u=>u.payload.docs.map(p=>l.idField?Object.assign(Object.assign({},p.data()),{[l.idField]:p.id}):p.data())),xr.iC)}get(l){return(0,lc.D)(this.query.get(l)).pipe(xr.iC)}add(l){return this.ref.add(l)}doc(l){return new rg(this.ref.doc(l),this.afs)}}class rg{constructor(l,u){this.ref=l,this.afs=u}set(l,u){return this.ref.set(l,u)}update(l){return this.ref.update(l)}delete(){return this.ref.delete()}collection(l,u){const p=this.ref.collection(l),{ref:v,query:R}=Fh(p,u);return new pm(v,R,this.afs)}snapshotChanges(){return function(d,l){return eg(d,l).pipe((0,cc.O)(void 0),Hf(),(0,or.U)(([u,p])=>p.exists?(null==u?void 0:u.exists)?{payload:p,type:"modified"}:{payload:p,type:"added"}:{payload:p,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(xr.iC)}valueChanges(l={}){return this.snapshotChanges().pipe((0,or.U)(({payload:u})=>l.idField?Object.assign(Object.assign({},u.data()),{[l.idField]:u.id}):u.data()))}get(l){return(0,lc.D)(this.ref.get(l)).pipe(xr.iC)}}class hy{constructor(l,u){this.query=l,this.afs=u}stateChanges(l){return l&&0!==l.length?jd(this.query,this.afs.schedulers.outsideAngular).pipe((0,or.U)(u=>u.filter(p=>l.indexOf(p.type)>-1)),(0,Nf.h)(u=>u.length>0),xr.iC):jd(this.query,this.afs.schedulers.outsideAngular).pipe(xr.iC)}auditTrail(l){return this.stateChanges(l).pipe((0,Ah.R)((u,p)=>[...u,...p],[]))}snapshotChanges(l){const u=o_(l);return hm(this.query,u,this.afs.schedulers.outsideAngular).pipe(xr.iC)}valueChanges(l={}){return tg(this.query,this.afs.schedulers.outsideAngular).pipe((0,or.U)(p=>p.payload.docs.map(v=>l.idField?Object.assign({[l.idField]:v.id},v.data()):v.data())),xr.iC)}get(l){return(0,lc.D)(this.query.get(l)).pipe(xr.iC)}}const pc=new O.OlP("angularfire2.enableFirestorePersistence"),gc=new O.OlP("angularfire2.firestore.persistenceSettings"),a_=new O.OlP("angularfire2.firestore.settings"),Hd=new O.OlP("angularfire2.firestore.use-emulator");function Fh(d,l=(u=>u)){return{query:l(d),ref:d}}let fy=(()=>{class d{constructor(u,p,v,R,V,se,Se,He,It,St,Bt,On,zn,Xr,ds,Mo,pa){this.schedulers=Se;const Aa=(0,Xo.on)(u,se,p),hs=It;St&&Ff(Aa,se,Bt,zn,Xr,ds,On,Mo),[this.firestore,this.persistenceEnabled$]=(0,Xo.cc)(`${Aa.name}.firestore`,"AngularFirestore",Aa.name,()=>{const Oo=se.runOutsideAngular(()=>Aa.firestore());if(R&&Oo.settings(R),hs&&Oo.useEmulator(...hs),v&&!(0,E.PM)(V)){const yu=()=>{try{return(0,lc.D)(Oo.enablePersistence(He||void 0).then(()=>!0,()=>!1))}catch(Wd){return"undefined"!=typeof console&&console.warn(Wd),(0,Qo.of)(!1)}};return[Oo,se.runOutsideAngular(yu)]}return[Oo,(0,Qo.of)(!1)]},[R,hs,v])}collection(u,p){let v;v="string"==typeof u?this.firestore.collection(u):u;const{ref:R,query:V}=Fh(v,p),se=this.schedulers.ngZone.run(()=>R);return new pm(se,V,this)}collectionGroup(u,p){const v=p||(V=>V),R=this.firestore.collectionGroup(u);return new hy(v(R),this)}doc(u){let p;p="string"==typeof u?this.firestore.doc(u):u;const v=this.schedulers.ngZone.run(()=>p);return new rg(v,this)}createId(){return this.firestore.collection("_").doc().id}}return d.\u0275fac=function(u){return new(u||d)(O.LFG(Xo.Dh),O.LFG(Xo.xv,8),O.LFG(pc,8),O.LFG(a_,8),O.LFG(O.Lbi),O.LFG(O.R0b),O.LFG(xr.HU),O.LFG(gc,8),O.LFG(Hd,8),O.LFG(Bd,8),O.LFG(Vd,8),O.LFG(Pf,8),O.LFG(Yp,8),O.LFG(Kp,8),O.LFG(Oh,8),O.LFG(kf,8),O.LFG(Cs.nm,8))},d.\u0275prov=O.Yz7({token:d,factory:d.\u0275fac,providedIn:"any"}),d})(),ig=(()=>{class d{constructor(){Mh.Z.registerVersion("angularfire",xr.q4.full,"fst-compat")}static enablePersistence(u){return{ngModule:d,providers:[{provide:pc,useValue:!0},{provide:gc,useValue:u}]}}}return d.\u0275fac=function(u){return new(u||d)},d.\u0275mod=O.oAB({type:d}),d.\u0275inj=O.cJS({providers:[fy]}),d})(),Yf=(()=>{class d{}return d.\u0275fac=function(u){return new(u||d)},d.\u0275mod=O.oAB({type:d,bootstrap:[jn]}),d.\u0275inj=O.cJS({providers:[{provide:Vr.wN,useClass:Yr.r4},Jp.K,uy.O,Xp],imports:[[Oe,Yr.Pc.forRoot(),Pn,Cr.HomeModule,Jg.LoginModule,Ei.UX,Ei.u5,jf,ig.enablePersistence(),Xo.hO.initializeApp(Ni_firebase),(0,qi.hX)(()=>(0,qi.ZF)(Ni_firebase)),(0,$r.AR)(()=>(0,$r.v0)()),wf(()=>Np()),(0,hi.Cm)(()=>(0,hi.ad)())]]}),d})();ke().bootstrapModule(Yf).catch(d=>console.error(d))},863:(tn,Ze,B)=>{var E={"./ion-action-sheet.entry.js":[7321,8592,7321],"./ion-alert.entry.js":[6108,8592,6108],"./ion-app_8.entry.js":[1489,8592,1489],"./ion-avatar_3.entry.js":[305,8592,305],"./ion-back-button.entry.js":[5830,8592,5830],"./ion-backdrop.entry.js":[7757,7757],"./ion-button_2.entry.js":[392,8592,392],"./ion-card_5.entry.js":[6911,8592,6911],"./ion-checkbox.entry.js":[937,8592,937],"./ion-chip.entry.js":[8695,8592,8695],"./ion-col_3.entry.js":[6034,6034],"./ion-datetime_3.entry.js":[8837,8592,8837],"./ion-fab_3.entry.js":[4195,8592,4195],"./ion-img.entry.js":[1709,1709],"./ion-infinite-scroll_2.entry.js":[5931,8592,3087],"./ion-input.entry.js":[4513,8592,4513],"./ion-item-option_3.entry.js":[8056,8592,8056],"./ion-item_8.entry.js":[862,8592,862],"./ion-loading.entry.js":[7509,8592,7509],"./ion-menu_3.entry.js":[6272,8592,6030],"./ion-modal.entry.js":[1855,8592,1855],"./ion-nav_2.entry.js":[8708,8592,8708],"./ion-popover.entry.js":[3527,8592,3527],"./ion-progress-bar.entry.js":[4694,8592,4694],"./ion-radio_2.entry.js":[9222,8592,9222],"./ion-range.entry.js":[5277,8592,5277],"./ion-refresher_2.entry.js":[9921,8592,9921],"./ion-reorder_2.entry.js":[3122,8592,3122],"./ion-ripple-effect.entry.js":[1602,1602],"./ion-route_4.entry.js":[5174,8592,5174],"./ion-searchbar.entry.js":[7895,8592,7895],"./ion-segment_2.entry.js":[6164,8592,6164],"./ion-select_3.entry.js":[592,8592,592],"./ion-slide_2.entry.js":[7162,7162],"./ion-spinner.entry.js":[1374,8592,1374],"./ion-split-pane.entry.js":[7896,7896],"./ion-tab-bar_2.entry.js":[5043,8592,5043],"./ion-tab_2.entry.js":[7802,8592,7802],"./ion-text.entry.js":[9072,8592,9072],"./ion-textarea.entry.js":[2191,8592,2191],"./ion-toast.entry.js":[801,8592,801],"./ion-toggle.entry.js":[7110,8592,7110],"./ion-virtual-scroll.entry.js":[431,431]};function O(ne){if(!B.o(E,ne))return Promise.resolve().then(()=>{var Q=new Error("Cannot find module '"+ne+"'");throw Q.code="MODULE_NOT_FOUND",Q});var oe=E[ne],ae=oe[0];return Promise.all(oe.slice(1).map(B.e)).then(()=>B(ae))}O.keys=()=>Object.keys(E),O.id=863,tn.exports=O},3394:(tn,Ze,B)=>{"use strict";B.d(Ze,{Z:()=>Xe});var E=B(3854),O=B(3910),ne=B(8026),oe=B(5422);class ae{constructor(je,Ae){this._delegate=je,this.firebase=Ae,(0,ne._addComponent)(je,new O.wA("app-compat",()=>this,"PUBLIC")),this.container=je.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(je){this._delegate.automaticDataCollectionEnabled=je}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(je=>{this._delegate.checkDestroyed(),je()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ne.deleteApp)(this._delegate)))}_getService(je,Ae=ne._DEFAULT_ENTRY_NAME){var $e;this._delegate.checkDestroyed();const Fe=this._delegate.container.getProvider(je);return!Fe.isInitialized()&&"EXPLICIT"===(null===($e=Fe.getComponent())||void 0===$e?void 0:$e.instantiationMode)&&Fe.initialize(),Fe.getImmediate({identifier:Ae})}_removeServiceInstance(je,Ae=ne._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(je).clearInstance(Ae)}_addComponent(je){(0,ne._addComponent)(this._delegate,je)}_addOrOverwriteComponent(je){(0,ne._addOrOverwriteComponent)(this._delegate,je)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ve=new E.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ie=function Te(){const Ee=function(Ee){const je={},Ae={__esModule:!0,initializeApp:function(I,rt={}){const pt=ne.initializeApp(I,rt);if((0,E.r3)(je,pt.name))return je[pt.name];const st=new Ee(pt,Ae);return je[pt.name]=st,st},app:Fe,registerVersion:ne.registerVersion,setLogLevel:ne.setLogLevel,onLog:ne.onLog,apps:null,SDK_VERSION:ne.SDK_VERSION,INTERNAL:{registerComponent:function(I){const rt=I.name,pt=rt.replace("-compat","");if(ne._registerComponent(I)&&"PUBLIC"===I.type){const st=(mt=Fe())=>{if("function"!=typeof mt[pt])throw ve.create("invalid-app-argument",{appName:rt});return mt[pt]()};void 0!==I.serviceProps&&(0,E.ZB)(st,I.serviceProps),Ae[pt]=st,Ee.prototype[pt]=function(...mt){return this._getService.bind(this,rt).apply(this,I.multipleInstances?mt:[])}}return"PUBLIC"===I.type?Ae[pt]:null},removeApp:function(I){delete je[I]},useAsService:function(I,rt){return"serverAuth"===rt?null:rt},modularAPIs:ne}};function Fe(I){if(!(0,E.r3)(je,I=I||ne._DEFAULT_ENTRY_NAME))throw ve.create("no-app",{appName:I});return je[I]}return Ae.default=Ae,Object.defineProperty(Ae,"apps",{get:function(){return Object.keys(je).map(I=>je[I])}}),Fe.App=Ee,Ae}(ae);return Ee.INTERNAL=Object.assign(Object.assign({},Ee.INTERNAL),{createFirebaseNamespace:Te,extendNamespace:function(Ae){(0,E.ZB)(Ee,Ae)},createSubscribe:E.ne,ErrorFactory:E.LL,deepExtend:E.ZB}),Ee}(),me=new oe.Yd("@firebase/app-compat");if((0,E.jU)()&&void 0!==self.firebase){me.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ee=self.firebase.SDK_VERSION;Ee&&Ee.indexOf("LITE")>=0&&me.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Xe=ie;(0,ne.registerVersion)("@firebase/app-compat","0.1.37",undefined)},8026:(tn,Ze,B)=>{"use strict";B.r(Ze),B.d(Ze,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>Gr,_DEFAULT_ENTRY_NAME:()=>vt,_addComponent:()=>Rt,_addOrOverwriteComponent:()=>Zt,_apps:()=>Ke,_clearComponents:()=>ir,_components:()=>dt,_getProvider:()=>Gt,_registerComponent:()=>Lt,_removeServiceInstance:()=>Bn,deleteApp:()=>cr,getApp:()=>Ft,getApps:()=>Wn,initializeApp:()=>Tr,onLog:()=>lr,registerVersion:()=>sr,setLogLevel:()=>zr});var E=B(8239),O=B(3910),ne=B(5422),oe=B(3854),ae=B(2268);class Q{constructor(Ot){this.container=Ot}getPlatformInfoString(){return this.container.getProviders().map(mn=>{if(function(on){const Ot=on.getComponent();return"VERSION"===(null==Ot?void 0:Ot.type)}(mn)){const cn=mn.getImmediate();return`${cn.library}/${cn.version}`}return null}).filter(mn=>mn).join(" ")}}const re="@firebase/app",ie=new ne.Yd("@firebase/app"),vt="[DEFAULT]",ht={[re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ke=new Map,dt=new Map;function Rt(on,Ot){try{on.container.addComponent(Ot)}catch(mn){ie.debug(`Component ${Ot.name} failed to register with FirebaseApp ${on.name}`,mn)}}function Zt(on,Ot){on.container.addOrOverwriteComponent(Ot)}function Lt(on){const Ot=on.name;if(dt.has(Ot))return ie.debug(`There were multiple attempts to register component ${Ot}.`),!1;dt.set(Ot,on);for(const mn of Ke.values())Rt(mn,on);return!0}function Gt(on,Ot){const mn=on.container.getProvider("heartbeat").getImmediate({optional:!0});return mn&&mn.triggerHeartbeat(),on.container.getProvider(Ot)}function Bn(on,Ot,mn=vt){Gt(on,Ot).clearInstance(mn)}function ir(){dt.clear()}const Dn=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class qn{constructor(Ot,mn,cn){this._isDeleted=!1,this._options=Object.assign({},Ot),this._config=Object.assign({},mn),this._name=mn.name,this._automaticDataCollectionEnabled=mn.automaticDataCollectionEnabled,this._container=cn,this.container.addComponent(new O.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ot){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ot}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ot){this._isDeleted=Ot}checkDestroyed(){if(this.isDeleted)throw Dn.create("app-deleted",{appName:this._name})}}const Gr="9.12.1";function Tr(on,Ot={}){let mn=on;"object"!=typeof Ot&&(Ot={name:Ot});const cn=Object.assign({name:vt,automaticDataCollectionEnabled:!1},Ot),rn=cn.name;if("string"!=typeof rn||!rn)throw Dn.create("bad-app-name",{appName:String(rn)});if(mn||(mn=(0,oe.aH)()),!mn)throw Dn.create("no-options");const qt=Ke.get(rn);if(qt){if((0,oe.vZ)(mn,qt.options)&&(0,oe.vZ)(cn,qt.config))return qt;throw Dn.create("duplicate-app",{appName:rn})}const Be=new O.H0(rn);for(const Qe of dt.values())Be.addComponent(Qe);const Ve=new qn(mn,cn,Be);return Ke.set(rn,Ve),Ve}function Ft(on=vt){const Ot=Ke.get(on);if(!Ot&&on===vt)return Tr();if(!Ot)throw Dn.create("no-app",{appName:on});return Ot}function Wn(){return Array.from(Ke.values())}function cr(on){return gn.apply(this,arguments)}function gn(){return(gn=(0,E.Z)(function*(on){const Ot=on.name;Ke.has(Ot)&&(Ke.delete(Ot),yield Promise.all(on.container.getProviders().map(mn=>mn.delete())),on.isDeleted=!0)})).apply(this,arguments)}function sr(on,Ot,mn){var cn;let rn=null!==(cn=ht[on])&&void 0!==cn?cn:on;mn&&(rn+=`-${mn}`);const qt=rn.match(/\s|\//),Be=Ot.match(/\s|\//);if(qt||Be){const Ve=[`Unable to register library "${rn}" with version "${Ot}":`];return qt&&Ve.push(`library name "${rn}" contains illegal characters (whitespace or "/")`),qt&&Be&&Ve.push("and"),Be&&Ve.push(`version name "${Ot}" contains illegal characters (whitespace or "/")`),void ie.warn(Ve.join(" "))}Lt(new O.wA(`${rn}-version`,()=>({library:rn,version:Ot}),"VERSION"))}function lr(on,Ot){if(null!==on&&"function"!=typeof on)throw Dn.create("invalid-log-argument");(0,ne.Am)(on,Ot)}function zr(on){(0,ne.Ub)(on)}const Fr="firebase-heartbeat-store";let Dr=null;function mi(){return Dr||(Dr=(0,ae.X3)("firebase-heartbeat-database",1,{upgrade:(on,Ot)=>{0===Ot&&on.createObjectStore(Fr)}}).catch(on=>{throw Dn.create("idb-open",{originalErrorMessage:on.message})})),Dr}function dn(){return(dn=(0,E.Z)(function*(on){var Ot;try{return(yield mi()).transaction(Fr).objectStore(Fr).get(di(on))}catch(mn){if(mn instanceof oe.ZR)ie.warn(mn.message);else{const cn=Dn.create("idb-get",{originalErrorMessage:null===(Ot=mn)||void 0===Ot?void 0:Ot.message});ie.warn(cn.message)}}})).apply(this,arguments)}function Ct(on,Ot){return ci.apply(this,arguments)}function ci(){return(ci=(0,E.Z)(function*(on,Ot){var mn;try{const rn=(yield mi()).transaction(Fr,"readwrite");return yield rn.objectStore(Fr).put(Ot,di(on)),rn.done}catch(cn){if(cn instanceof oe.ZR)ie.warn(cn.message);else{const rn=Dn.create("idb-set",{originalErrorMessage:null===(mn=cn)||void 0===mn?void 0:mn.message});ie.warn(rn.message)}}})).apply(this,arguments)}function di(on){return`${on.name}!${on.options.appId}`}class Sr{constructor(Ot){this.container=Ot,this._heartbeatsCache=null;const mn=this.container.getProvider("app").getImmediate();this._storage=new Gn(mn),this._heartbeatsCachePromise=this._storage.read().then(cn=>(this._heartbeatsCache=cn,cn))}triggerHeartbeat(){var Ot=this;return(0,E.Z)(function*(){const cn=Ot.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),rn=br();if(null===Ot._heartbeatsCache&&(Ot._heartbeatsCache=yield Ot._heartbeatsCachePromise),Ot._heartbeatsCache.lastSentHeartbeatDate!==rn&&!Ot._heartbeatsCache.heartbeats.some(qt=>qt.date===rn))return Ot._heartbeatsCache.heartbeats.push({date:rn,agent:cn}),Ot._heartbeatsCache.heartbeats=Ot._heartbeatsCache.heartbeats.filter(qt=>{const Be=new Date(qt.date).valueOf();return Date.now()-Be<=2592e6}),Ot._storage.overwrite(Ot._heartbeatsCache)})()}getHeartbeatsHeader(){var Ot=this;return(0,E.Z)(function*(){if(null===Ot._heartbeatsCache&&(yield Ot._heartbeatsCachePromise),null===Ot._heartbeatsCache||0===Ot._heartbeatsCache.heartbeats.length)return"";const mn=br(),{heartbeatsToSend:cn,unsentEntries:rn}=function(on,Ot=1024){const mn=[];let cn=on.slice();for(const rn of on){const qt=mn.find(Be=>Be.agent===rn.agent);if(qt){if(qt.dates.push(rn.date),Yn(mn)>Ot){qt.dates.pop();break}}else if(mn.push({agent:rn.agent,dates:[rn.date]}),Yn(mn)>Ot){mn.pop();break}cn=cn.slice(1)}return{heartbeatsToSend:mn,unsentEntries:cn}}(Ot._heartbeatsCache.heartbeats),qt=(0,oe.L)(JSON.stringify({version:2,heartbeats:cn}));return Ot._heartbeatsCache.lastSentHeartbeatDate=mn,rn.length>0?(Ot._heartbeatsCache.heartbeats=rn,yield Ot._storage.overwrite(Ot._heartbeatsCache)):(Ot._heartbeatsCache.heartbeats=[],Ot._storage.overwrite(Ot._heartbeatsCache)),qt})()}}function br(){return(new Date).toISOString().substring(0,10)}class Gn{constructor(Ot){this.app=Ot,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,E.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ot=this;return(0,E.Z)(function*(){return(yield Ot._canUseIndexedDBPromise)&&(yield function(on){return dn.apply(this,arguments)}(Ot.app))||{heartbeats:[]}})()}overwrite(Ot){var mn=this;return(0,E.Z)(function*(){var cn;if(yield mn._canUseIndexedDBPromise){const qt=yield mn.read();return Ct(mn.app,{lastSentHeartbeatDate:null!==(cn=Ot.lastSentHeartbeatDate)&&void 0!==cn?cn:qt.lastSentHeartbeatDate,heartbeats:Ot.heartbeats})}})()}add(Ot){var mn=this;return(0,E.Z)(function*(){var cn;if(yield mn._canUseIndexedDBPromise){const qt=yield mn.read();return Ct(mn.app,{lastSentHeartbeatDate:null!==(cn=Ot.lastSentHeartbeatDate)&&void 0!==cn?cn:qt.lastSentHeartbeatDate,heartbeats:[...qt.heartbeats,...Ot.heartbeats]})}})()}}function Yn(on){return(0,oe.L)(JSON.stringify({version:2,heartbeats:on})).length}Lt(new O.wA("platform-logger",Ot=>new Q(Ot),"PRIVATE")),Lt(new O.wA("heartbeat",Ot=>new Sr(Ot),"PRIVATE")),sr(re,"0.8.2",""),sr(re,"0.8.2","esm2017"),sr("fire-js","")},3910:(tn,Ze,B)=>{"use strict";B.d(Ze,{wA:()=>ne,H0:()=>re,zt:()=>ae});var E=B(8239),O=B(3854);class ne{constructor(ie,me,Ce){this.name=ie,this.instanceFactory=me,this.type=Ce,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ie){return this.instantiationMode=ie,this}setMultipleInstances(ie){return this.multipleInstances=ie,this}setServiceProps(ie){return this.serviceProps=ie,this}setInstanceCreatedCallback(ie){return this.onInstanceCreated=ie,this}}const oe="[DEFAULT]";class ae{constructor(ie,me){this.name=ie,this.container=me,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ie){const me=this.normalizeInstanceIdentifier(ie);if(!this.instancesDeferred.has(me)){const Ce=new O.BH;if(this.instancesDeferred.set(me,Ce),this.isInitialized(me)||this.shouldAutoInitialize())try{const _e=this.getOrInitializeService({instanceIdentifier:me});_e&&Ce.resolve(_e)}catch(_e){}}return this.instancesDeferred.get(me).promise}getImmediate(ie){var me;const Ce=this.normalizeInstanceIdentifier(null==ie?void 0:ie.identifier),_e=null!==(me=null==ie?void 0:ie.optional)&&void 0!==me&&me;if(!this.isInitialized(Ce)&&!this.shouldAutoInitialize()){if(_e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ce})}catch(De){if(_e)return null;throw De}}getComponent(){return this.component}setComponent(ie){if(ie.name!==this.name)throw Error(`Mismatching Component ${ie.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ie,this.shouldAutoInitialize()){if("EAGER"===ie.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:oe})}catch(me){}for(const[me,Ce]of this.instancesDeferred.entries()){const _e=this.normalizeInstanceIdentifier(me);try{const De=this.getOrInitializeService({instanceIdentifier:_e});Ce.resolve(De)}catch(De){}}}}clearInstance(ie=oe){this.instancesDeferred.delete(ie),this.instancesOptions.delete(ie),this.instances.delete(ie)}delete(){var ie=this;return(0,E.Z)(function*(){const me=Array.from(ie.instances.values());yield Promise.all([...me.filter(Ce=>"INTERNAL"in Ce).map(Ce=>Ce.INTERNAL.delete()),...me.filter(Ce=>"_delete"in Ce).map(Ce=>Ce._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ie=oe){return this.instances.has(ie)}getOptions(ie=oe){return this.instancesOptions.get(ie)||{}}initialize(ie={}){const{options:me={}}=ie,Ce=this.normalizeInstanceIdentifier(ie.instanceIdentifier);if(this.isInitialized(Ce))throw Error(`${this.name}(${Ce}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const _e=this.getOrInitializeService({instanceIdentifier:Ce,options:me});for(const[De,Xe]of this.instancesDeferred.entries())Ce===this.normalizeInstanceIdentifier(De)&&Xe.resolve(_e);return _e}onInit(ie,me){var Ce;const _e=this.normalizeInstanceIdentifier(me),De=null!==(Ce=this.onInitCallbacks.get(_e))&&void 0!==Ce?Ce:new Set;De.add(ie),this.onInitCallbacks.set(_e,De);const Xe=this.instances.get(_e);return Xe&&ie(Xe,_e),()=>{De.delete(ie)}}invokeOnInitCallbacks(ie,me){const Ce=this.onInitCallbacks.get(me);if(Ce)for(const _e of Ce)try{_e(ie,me)}catch(De){}}getOrInitializeService({instanceIdentifier:ie,options:me={}}){let Ce=this.instances.get(ie);if(!Ce&&this.component&&(Ce=this.component.instanceFactory(this.container,{instanceIdentifier:(Te=ie,Te===oe?void 0:Te),options:me}),this.instances.set(ie,Ce),this.instancesOptions.set(ie,me),this.invokeOnInitCallbacks(Ce,ie),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ie,Ce)}catch(_e){}var Te;return Ce||null}normalizeInstanceIdentifier(ie=oe){return this.component?this.component.multipleInstances?ie:oe:ie}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class re{constructor(ie){this.name=ie,this.providers=new Map}addComponent(ie){const me=this.getProvider(ie.name);if(me.isComponentSet())throw new Error(`Component ${ie.name} has already been registered with ${this.name}`);me.setComponent(ie)}addOrOverwriteComponent(ie){this.getProvider(ie.name).isComponentSet()&&this.providers.delete(ie.name),this.addComponent(ie)}getProvider(ie){if(this.providers.has(ie))return this.providers.get(ie);const me=new ae(ie,this);return this.providers.set(ie,me),me}getProviders(){return Array.from(this.providers.values())}}},5422:(tn,Ze,B)=>{"use strict";B.d(Ze,{in:()=>O,Yd:()=>ve,Ub:()=>re,Am:()=>Te});const E=[];var O=(()=>{return(ie=O||(O={}))[ie.DEBUG=0]="DEBUG",ie[ie.VERBOSE=1]="VERBOSE",ie[ie.INFO=2]="INFO",ie[ie.WARN=3]="WARN",ie[ie.ERROR=4]="ERROR",ie[ie.SILENT=5]="SILENT",O;var ie})();const ne={debug:O.DEBUG,verbose:O.VERBOSE,info:O.INFO,warn:O.WARN,error:O.ERROR,silent:O.SILENT},oe=O.INFO,ae={[O.DEBUG]:"log",[O.VERBOSE]:"log",[O.INFO]:"info",[O.WARN]:"warn",[O.ERROR]:"error"},Q=(ie,me,...Ce)=>{if(me<ie.logLevel)return;const _e=(new Date).toISOString(),De=ae[me];if(!De)throw new Error(`Attempted to log a message with an invalid logType (value: ${me})`);console[De](`[${_e}]  ${ie.name}:`,...Ce)};class ve{constructor(me){this.name=me,this._logLevel=oe,this._logHandler=Q,this._userLogHandler=null,E.push(this)}get logLevel(){return this._logLevel}set logLevel(me){if(!(me in O))throw new TypeError(`Invalid value "${me}" assigned to \`logLevel\``);this._logLevel=me}setLogLevel(me){this._logLevel="string"==typeof me?ne[me]:me}get logHandler(){return this._logHandler}set logHandler(me){if("function"!=typeof me)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=me}get userLogHandler(){return this._userLogHandler}set userLogHandler(me){this._userLogHandler=me}debug(...me){this._userLogHandler&&this._userLogHandler(this,O.DEBUG,...me),this._logHandler(this,O.DEBUG,...me)}log(...me){this._userLogHandler&&this._userLogHandler(this,O.VERBOSE,...me),this._logHandler(this,O.VERBOSE,...me)}info(...me){this._userLogHandler&&this._userLogHandler(this,O.INFO,...me),this._logHandler(this,O.INFO,...me)}warn(...me){this._userLogHandler&&this._userLogHandler(this,O.WARN,...me),this._logHandler(this,O.WARN,...me)}error(...me){this._userLogHandler&&this._userLogHandler(this,O.ERROR,...me),this._logHandler(this,O.ERROR,...me)}}function re(ie){E.forEach(me=>{me.setLogLevel(ie)})}function Te(ie,me){for(const Ce of E){let _e=null;me&&me.level&&(_e=ne[me.level]),Ce.userLogHandler=null===ie?null:(De,Xe,...Ee)=>{const je=Ee.map(Ae=>{if(null==Ae)return null;if("string"==typeof Ae)return Ae;if("number"==typeof Ae||"boolean"==typeof Ae)return Ae.toString();if(Ae instanceof Error)return Ae.message;try{return JSON.stringify(Ae)}catch($e){return null}}).filter(Ae=>Ae).join(" ");Xe>=(null!=_e?_e:De.logLevel)&&ie({level:O[Xe].toLowerCase(),message:je,args:Ee,type:De.name})}}}},2268:(tn,Ze,B)=>{"use strict";B.d(Ze,{Lj:()=>Me,X3:()=>Fe});var E=B(8239);let ne,oe;const ve=new WeakMap,re=new WeakMap,Te=new WeakMap,ie=new WeakMap,me=new WeakMap;let De={get(rt,pt,st){if(rt instanceof IDBTransaction){if("done"===pt)return re.get(rt);if("objectStoreNames"===pt)return rt.objectStoreNames||Te.get(rt);if("store"===pt)return st.objectStoreNames[1]?void 0:st.objectStore(st.objectStoreNames[0])}return Ae(rt[pt])},set:(rt,pt,st)=>(rt[pt]=st,!0),has:(rt,pt)=>rt instanceof IDBTransaction&&("done"===pt||"store"===pt)||pt in rt};function je(rt){return"function"==typeof rt?function(rt){return rt!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(rt)?function(...pt){return rt.apply($e(this),pt),Ae(ve.get(this))}:function(...pt){return Ae(rt.apply($e(this),pt))}:function(pt,...st){const mt=rt.call($e(this),pt,...st);return Te.set(mt,pt.sort?pt.sort():[pt]),Ae(mt)}}(rt):(rt instanceof IDBTransaction&&function(rt){if(re.has(rt))return;const pt=new Promise((st,mt)=>{const lt=()=>{rt.removeEventListener("complete",Dt),rt.removeEventListener("error",At),rt.removeEventListener("abort",At)},Dt=()=>{st(),lt()},At=()=>{mt(rt.error||new DOMException("AbortError","AbortError")),lt()};rt.addEventListener("complete",Dt),rt.addEventListener("error",At),rt.addEventListener("abort",At)});re.set(rt,pt)}(rt),((rt,pt)=>pt.some(st=>rt instanceof st))(rt,ne||(ne=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(rt,De):rt)}function Ae(rt){if(rt instanceof IDBRequest)return function(rt){const pt=new Promise((st,mt)=>{const lt=()=>{rt.removeEventListener("success",Dt),rt.removeEventListener("error",At)},Dt=()=>{st(Ae(rt.result)),lt()},At=()=>{mt(rt.error),lt()};rt.addEventListener("success",Dt),rt.addEventListener("error",At)});return pt.then(st=>{st instanceof IDBCursor&&ve.set(st,rt)}).catch(()=>{}),me.set(pt,rt),pt}(rt);if(ie.has(rt))return ie.get(rt);const pt=je(rt);return pt!==rt&&(ie.set(rt,pt),me.set(pt,rt)),pt}const $e=rt=>me.get(rt);function Fe(rt,pt,{blocked:st,upgrade:mt,blocking:lt,terminated:Dt}={}){const At=indexedDB.open(rt,pt),wn=Ae(At);return mt&&At.addEventListener("upgradeneeded",pn=>{mt(Ae(At.result),pn.oldVersion,pn.newVersion,Ae(At.transaction))}),st&&At.addEventListener("blocked",()=>st()),wn.then(pn=>{Dt&&pn.addEventListener("close",()=>Dt()),lt&&pn.addEventListener("versionchange",()=>lt())}).catch(()=>{}),wn}function Me(rt,{blocked:pt}={}){const st=indexedDB.deleteDatabase(rt);return pt&&st.addEventListener("blocked",()=>pt()),Ae(st).then(()=>{})}const Je=["get","getKey","getAll","getAllKeys","count"],ct=["put","add","delete","clear"],jt=new Map;function I(rt,pt){if(!(rt instanceof IDBDatabase)||pt in rt||"string"!=typeof pt)return;if(jt.get(pt))return jt.get(pt);const st=pt.replace(/FromIndex$/,""),mt=pt!==st,lt=ct.includes(st);if(!(st in(mt?IDBIndex:IDBObjectStore).prototype)||!lt&&!Je.includes(st))return;const Dt=function(){var At=(0,E.Z)(function*(wn,...pn){const bt=this.transaction(wn,lt?"readwrite":"readonly");let vt=bt.store;return mt&&(vt=vt.index(pn.shift())),(yield Promise.all([vt[st](...pn),lt&&bt.done]))[0]});return function(pn){return At.apply(this,arguments)}}();return jt.set(pt,Dt),Dt}var rt;De=$b(Bb({},rt=De),{get:(pt,st,mt)=>I(pt,st)||rt.get(pt,st,mt),has:(pt,st)=>!!I(pt,st)||rt.has(pt,st)})},8239:(tn,Ze,B)=>{"use strict";function E(ne,oe,ae,Q,ve,re,Te){try{var ie=ne[re](Te),me=ie.value}catch(Ce){return void ae(Ce)}ie.done?oe(me):Promise.resolve(me).then(Q,ve)}function O(ne){return function(){var oe=this,ae=arguments;return new Promise(function(Q,ve){var re=ne.apply(oe,ae);function Te(me){E(re,Q,ve,Te,ie,"next",me)}function ie(me){E(re,Q,ve,Te,ie,"throw",me)}Te(void 0)})}}B.d(Ze,{Z:()=>O})}},tn=>{tn(tn.s=3335)}]);
var BA=Object.defineProperty,$A=Object.defineProperties,UA=Object.getOwnPropertyDescriptors,Fb=Object.getOwnPropertySymbols,jA=Object.prototype.hasOwnProperty,HA=Object.prototype.propertyIsEnumerable,Lb=(cn,rt,F)=>rt in cn?BA(cn,rt,{enumerable:!0,configurable:!0,writable:!0,value:F}):cn[rt]=F,Vb=(cn,rt)=>{for(var F in rt||(rt={}))jA.call(rt,F)&&Lb(cn,F,rt[F]);if(Fb)for(var F of Fb(rt))HA.call(rt,F)&&Lb(cn,F,rt[F]);return cn},Bb=(cn,rt)=>$A(cn,UA(rt));(self.webpackChunktrail_app=self.webpackChunktrail_app||[]).push([[179],{8255:cn=>{function rt(F){return Promise.resolve().then(()=>{var E=new Error("Cannot find module '"+F+"'");throw E.code="MODULE_NOT_FOUND",E})}rt.keys=()=>[],rt.resolve=rt,rt.id=8255,cn.exports=rt},8583:(cn,rt,F)=>{"use strict";F.d(rt,{mr:()=>Ge,ez:()=>zs,K0:()=>Ie,Do:()=>Oe,V_:()=>ae,Ye:()=>st,S$:()=>Ke,sg:()=>Vn,O5:()=>$,b0:()=>Fe,lw:()=>oe,EM:()=>qs,JF:()=>Ci,PM:()=>xs,w_:()=>ee,bD:()=>is,q:()=>ie,Mx:()=>xr,HT:()=>ue});var E=F(7716);let O=null;function ie(){return O}function ue(G){O||(O=G)}class ee{}const Ie=new E.OlP("DocumentToken");let oe=(()=>{class G{historyGo(Q){throw new Error("Not implemented")}}return G.\u0275fac=function(Q){return new(Q||G)},G.\u0275prov=(0,E.Yz7)({factory:Se,token:G,providedIn:"platform"}),G})();function Se(){return(0,E.LFG)(ve)}const ae=new E.OlP("Location Initialized");let ve=(()=>{class G extends oe{constructor(Q){super(),this._doc=Q,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ie().getBaseHref(this._doc)}onPopState(Q){const De=ie().getGlobalEventTarget(this._doc,"window");return De.addEventListener("popstate",Q,!1),()=>De.removeEventListener("popstate",Q)}onHashChange(Q){const De=ie().getGlobalEventTarget(this._doc,"window");return De.addEventListener("hashchange",Q,!1),()=>De.removeEventListener("hashchange",Q)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(Q){this.location.pathname=Q}pushState(Q,De,qe){we()?this._history.pushState(Q,De,qe):this.location.hash=qe}replaceState(Q,De,qe){we()?this._history.replaceState(Q,De,qe):this.location.hash=qe}forward(){this._history.forward()}back(){this._history.back()}historyGo(Q=0){this._history.go(Q)}getState(){return this._history.state}}return G.\u0275fac=function(Q){return new(Q||G)(E.LFG(Ie))},G.\u0275prov=(0,E.Yz7)({factory:_e,token:G,providedIn:"platform"}),G})();function we(){return!!window.history.pushState}function _e(){return new ve((0,E.LFG)(Ie))}function Te(G,le){if(0==G.length)return le;if(0==le.length)return G;let Q=0;return G.endsWith("/")&&Q++,le.startsWith("/")&&Q++,2==Q?G+le.substring(1):1==Q?G+le:G+"/"+le}function lt(G){const le=G.match(/#|\?|$/),Q=le&&le.index||G.length;return G.slice(0,Q-("/"===G[Q-1]?1:0))+G.slice(Q)}function Ee(G){return G&&"?"!==G[0]?"?"+G:G}let Ke=(()=>{class G{historyGo(Q){throw new Error("Not implemented")}}return G.\u0275fac=function(Q){return new(Q||G)},G.\u0275prov=(0,E.Yz7)({factory:Re,token:G,providedIn:"root"}),G})();function Re(G){const le=(0,E.LFG)(Ie).location;return new Fe((0,E.LFG)(oe),le&&le.origin||"")}const Ge=new E.OlP("appBaseHref");let Fe=(()=>{class G extends Ke{constructor(Q,De){if(super(),this._platformLocation=Q,this._removeListenerFns=[],null==De&&(De=this._platformLocation.getBaseHrefFromDOM()),null==De)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=De}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(Q){this._removeListenerFns.push(this._platformLocation.onPopState(Q),this._platformLocation.onHashChange(Q))}getBaseHref(){return this._baseHref}prepareExternalUrl(Q){return Te(this._baseHref,Q)}path(Q=!1){const De=this._platformLocation.pathname+Ee(this._platformLocation.search),qe=this._platformLocation.hash;return qe&&Q?`${De}${qe}`:De}pushState(Q,De,qe,Ct){const ln=this.prepareExternalUrl(qe+Ee(Ct));this._platformLocation.pushState(Q,De,ln)}replaceState(Q,De,qe,Ct){const ln=this.prepareExternalUrl(qe+Ee(Ct));this._platformLocation.replaceState(Q,De,ln)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(Q=0){var De,qe;null===(qe=(De=this._platformLocation).historyGo)||void 0===qe||qe.call(De,Q)}}return G.\u0275fac=function(Q){return new(Q||G)(E.LFG(oe),E.LFG(Ge,8))},G.\u0275prov=E.Yz7({token:G,factory:G.\u0275fac}),G})(),Oe=(()=>{class G extends Ke{constructor(Q,De){super(),this._platformLocation=Q,this._baseHref="",this._removeListenerFns=[],null!=De&&(this._baseHref=De)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(Q){this._removeListenerFns.push(this._platformLocation.onPopState(Q),this._platformLocation.onHashChange(Q))}getBaseHref(){return this._baseHref}path(Q=!1){let De=this._platformLocation.hash;return null==De&&(De="#"),De.length>0?De.substring(1):De}prepareExternalUrl(Q){const De=Te(this._baseHref,Q);return De.length>0?"#"+De:De}pushState(Q,De,qe,Ct){let ln=this.prepareExternalUrl(qe+Ee(Ct));0==ln.length&&(ln=this._platformLocation.pathname),this._platformLocation.pushState(Q,De,ln)}replaceState(Q,De,qe,Ct){let ln=this.prepareExternalUrl(qe+Ee(Ct));0==ln.length&&(ln=this._platformLocation.pathname),this._platformLocation.replaceState(Q,De,ln)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(Q=0){var De,qe;null===(qe=(De=this._platformLocation).historyGo)||void 0===qe||qe.call(De,Q)}}return G.\u0275fac=function(Q){return new(Q||G)(E.LFG(oe),E.LFG(Ge,8))},G.\u0275prov=E.Yz7({token:G,factory:G.\u0275fac}),G})(),st=(()=>{class G{constructor(Q,De){this._subject=new E.vpe,this._urlChangeListeners=[],this._platformStrategy=Q;const qe=this._platformStrategy.getBaseHref();this._platformLocation=De,this._baseHref=lt(v(qe)),this._platformStrategy.onPopState(Ct=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ct.state,type:Ct.type})})}path(Q=!1){return this.normalize(this._platformStrategy.path(Q))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(Q,De=""){return this.path()==this.normalize(Q+Ee(De))}normalize(Q){return G.stripTrailingSlash(function(G,le){return G&&le.startsWith(G)?le.substring(G.length):le}(this._baseHref,v(Q)))}prepareExternalUrl(Q){return Q&&"/"!==Q[0]&&(Q="/"+Q),this._platformStrategy.prepareExternalUrl(Q)}go(Q,De="",qe=null){this._platformStrategy.pushState(qe,"",Q,De),this._notifyUrlChangeListeners(this.prepareExternalUrl(Q+Ee(De)),qe)}replaceState(Q,De="",qe=null){this._platformStrategy.replaceState(qe,"",Q,De),this._notifyUrlChangeListeners(this.prepareExternalUrl(Q+Ee(De)),qe)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(Q=0){var De,qe;null===(qe=(De=this._platformStrategy).historyGo)||void 0===qe||qe.call(De,Q)}onUrlChange(Q){this._urlChangeListeners.push(Q),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(De=>{this._notifyUrlChangeListeners(De.url,De.state)}))}_notifyUrlChangeListeners(Q="",De){this._urlChangeListeners.forEach(qe=>qe(Q,De))}subscribe(Q,De,qe){return this._subject.subscribe({next:Q,error:De,complete:qe})}}return G.\u0275fac=function(Q){return new(Q||G)(E.LFG(Ke),E.LFG(oe))},G.normalizeQueryParams=Ee,G.joinWithSlash=Te,G.stripTrailingSlash=lt,G.\u0275prov=(0,E.Yz7)({factory:It,token:G,providedIn:"root"}),G})();function It(){return new st((0,E.LFG)(Ke),(0,E.LFG)(oe))}function v(G){return G.replace(/\/index.html$/,"")}var ft=(()=>((ft=ft||{})[ft.Zero=0]="Zero",ft[ft.One=1]="One",ft[ft.Two=2]="Two",ft[ft.Few=3]="Few",ft[ft.Many=4]="Many",ft[ft.Other=5]="Other",ft))();const Sr=E.kL8;class zr{}let Zr=(()=>{class G extends zr{constructor(Q){super(),this.locale=Q}getPluralCategory(Q,De){switch(Sr(De||this.locale)(Q)){case ft.Zero:return"zero";case ft.One:return"one";case ft.Two:return"two";case ft.Few:return"few";case ft.Many:return"many";default:return"other"}}}return G.\u0275fac=function(Q){return new(Q||G)(E.LFG(E.soG))},G.\u0275prov=E.Yz7({token:G,factory:G.\u0275fac}),G})();function xr(G,le){le=encodeURIComponent(le);for(const Q of G.split(";")){const De=Q.indexOf("="),[qe,Ct]=-1==De?[Q,""]:[Q.slice(0,De),Q.slice(De+1)];if(qe.trim()===le)return decodeURIComponent(Ct)}return null}class ar{constructor(le,Q,De,qe){this.$implicit=le,this.ngForOf=Q,this.index=De,this.count=qe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Vn=(()=>{class G{constructor(Q,De,qe){this._viewContainer=Q,this._template=De,this._differs=qe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(Q){this._ngForOf=Q,this._ngForOfDirty=!0}set ngForTrackBy(Q){this._trackByFn=Q}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(Q){Q&&(this._template=Q)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const Q=this._ngForOf;if(!this._differ&&Q)try{this._differ=this._differs.find(Q).create(this.ngForTrackBy)}catch(De){throw new Error(`Cannot find a differ supporting object '${Q}' of type '${function(G){return G.name||typeof G}(Q)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const Q=this._differ.diff(this._ngForOf);Q&&this._applyChanges(Q)}}_applyChanges(Q){const De=[];Q.forEachOperation((qe,Ct,ln)=>{if(null==qe.previousIndex){const q=this._viewContainer.createEmbeddedView(this._template,new ar(null,this._ngForOf,-1,-1),null===ln?void 0:ln),B=new mr(qe,q);De.push(B)}else if(null==ln)this._viewContainer.remove(null===Ct?void 0:Ct);else if(null!==Ct){const q=this._viewContainer.get(Ct);this._viewContainer.move(q,ln);const B=new mr(qe,q);De.push(B)}});for(let qe=0;qe<De.length;qe++)this._perViewChange(De[qe].view,De[qe].record);for(let qe=0,Ct=this._viewContainer.length;qe<Ct;qe++){const ln=this._viewContainer.get(qe);ln.context.index=qe,ln.context.count=Ct,ln.context.ngForOf=this._ngForOf}Q.forEachIdentityChange(qe=>{this._viewContainer.get(qe.currentIndex).context.$implicit=qe.item})}_perViewChange(Q,De){Q.context.$implicit=De.item}static ngTemplateContextGuard(Q,De){return!0}}return G.\u0275fac=function(Q){return new(Q||G)(E.Y36(E.s_b),E.Y36(E.Rgc),E.Y36(E.ZZ4))},G.\u0275dir=E.lG2({type:G,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),G})();class mr{constructor(le,Q){this.record=le,this.view=Q}}let $=(()=>{class G{constructor(Q,De){this._viewContainer=Q,this._context=new W,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=De}set ngIf(Q){this._context.$implicit=this._context.ngIf=Q,this._updateView()}set ngIfThen(Q){ce("ngIfThen",Q),this._thenTemplateRef=Q,this._thenViewRef=null,this._updateView()}set ngIfElse(Q){ce("ngIfElse",Q),this._elseTemplateRef=Q,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(Q,De){return!0}}return G.\u0275fac=function(Q){return new(Q||G)(E.Y36(E.s_b),E.Y36(E.Rgc))},G.\u0275dir=E.lG2({type:G,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),G})();class W{constructor(){this.$implicit=null,this.ngIf=null}}function ce(G,le){if(le&&!le.createEmbeddedView)throw new Error(`${G} must be a TemplateRef, but received '${(0,E.AaK)(le)}'.`)}let zs=(()=>{class G{}return G.\u0275fac=function(Q){return new(Q||G)},G.\u0275mod=E.oAB({type:G}),G.\u0275inj=E.cJS({providers:[{provide:zr,useClass:Zr}]}),G})();const is="browser";function xs(G){return"server"===G}let qs=(()=>{class G{}return G.\u0275prov=(0,E.Yz7)({token:G,providedIn:"root",factory:()=>new ro((0,E.LFG)(Ie),window)}),G})();class ro{constructor(le,Q){this.document=le,this.window=Q,this.offset=()=>[0,0]}setOffset(le){this.offset=Array.isArray(le)?()=>le:le}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(le){this.supportsScrolling()&&this.window.scrollTo(le[0],le[1])}scrollToAnchor(le){if(!this.supportsScrolling())return;const Q=function(G,le){const Q=G.getElementById(le)||G.getElementsByName(le)[0];if(Q)return Q;if("function"==typeof G.createTreeWalker&&G.body&&(G.body.createShadowRoot||G.body.attachShadow)){const De=G.createTreeWalker(G.body,NodeFilter.SHOW_ELEMENT);let qe=De.currentNode;for(;qe;){const Ct=qe.shadowRoot;if(Ct){const ln=Ct.getElementById(le)||Ct.querySelector(`[name="${le}"]`);if(ln)return ln}qe=De.nextNode()}}return null}(this.document,le);Q&&(this.scrollToElement(Q),this.attemptFocus(Q))}setHistoryScrollRestoration(le){if(this.supportScrollRestoration()){const Q=this.window.history;Q&&Q.scrollRestoration&&(Q.scrollRestoration=le)}}scrollToElement(le){const Q=le.getBoundingClientRect(),De=Q.left+this.window.pageXOffset,qe=Q.top+this.window.pageYOffset,Ct=this.offset();this.window.scrollTo(De-Ct[0],qe-Ct[1])}attemptFocus(le){return le.focus(),this.document.activeElement===le}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const le=io(this.window.history)||io(Object.getPrototypeOf(this.window.history));return!(!le||!le.writable&&!le.set)}catch(le){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(le){return!1}}}function io(G){return Object.getOwnPropertyDescriptor(G,"scrollRestoration")}class Ci{}},7716:(cn,rt,F)=>{"use strict";F.d(rt,{deG:()=>ps,tb:()=>YI,AFp:()=>GI,ip1:()=>Hv,CZH:()=>kf,hGG:()=>jS,z2F:()=>Bg,ahi:()=>da,sBO:()=>Dw,Sil:()=>Vg,_Vd:()=>Sf,aQ5:()=>_o,EJc:()=>ZI,SBq:()=>pc,qLn:()=>Co,vpe:()=>gc,L6J:()=>kT,gxx:()=>Oc,tBr:()=>La,XFs:()=>En,OlP:()=>ls,zs3:()=>Ps,ZZ4:()=>Ry,aQg:()=>My,soG:()=>jy,YKP:()=>$E,v3s:()=>IS,h0i:()=>ph,PXZ:()=>gS,R0b:()=>Yl,FiY:()=>Ta,r_U:()=>PT,Lbi:()=>qI,g9A:()=>zI,Qsj:()=>cw,FYo:()=>xy,JOm:()=>$l,Tiy:()=>mv,q3G:()=>nt,tp0:()=>Va,EAV:()=>DS,Rgc:()=>Tg,dDg:()=>eb,DyG:()=>ll,q4F:()=>yv,GfV:()=>NE,i9L:()=>jo,s_b:()=>Py,ifc:()=>In,eFA:()=>sb,G48:()=>lS,Gpc:()=>ve,X6Q:()=>Zv,_c5:()=>kS,VLi:()=>aS,c2e:()=>KI,zSh:()=>hd,wAp:()=>Yr,vHH:()=>lt,EiD:()=>A,mCW:()=>Sl,qzn:()=>Gi,JVY:()=>Ku,pB0:()=>tu,eBb:()=>Qu,L6k:()=>Zu,LAX:()=>Tu,cg1:()=>av,Tjo:()=>NS,kL8:()=>tE,yhl:()=>Du,dqk:()=>Yn,sIi:()=>oh,CqO:()=>dh,QGY:()=>wf,F4k:()=>mg,RDi:()=>Do,AaK:()=>oe,z3N:()=>Ka,qOj:()=>Ol,TTD:()=>zs,_Bn:()=>AE,xp6:()=>rd,uIk:()=>gf,ekj:()=>a,Suo:()=>CI,Xpm:()=>Be,lG2:()=>$n,Yz7:()=>Vt,cJS:()=>wn,oAB:()=>Pe,Yjl:()=>Rn,Y36:()=>ch,_UZ:()=>ny,qZA:()=>Cf,TgZ:()=>pg,EpF:()=>gg,n5z:()=>Jt,Ikx:()=>ov,LFG:()=>Qi,$8M:()=>ei,$Z:()=>ty,NdJ:()=>wd,CRH:()=>wI,oxw:()=>ly,Hsn:()=>Bu,F$t:()=>uy,Q6J:()=>fg,s9C:()=>yg,iGM:()=>II,CHM:()=>So,LSH:()=>An,kYT:()=>Et,YNc:()=>ks,_uU:()=>F0,Oqu:()=>sv,hij:()=>by,Gf:()=>bI});var E=F(9765),O=F(5319),ie=F(8891),L=F(6682),ue=F(8819);function ee(t){for(let n in t)if(t[n]===ee)return n;throw Error("Could not find renamed property on target object.")}function Ie(t,n){for(const i in n)n.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=n[i])}function oe(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(oe).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const i=n.indexOf("\n");return-1===i?n:n.substring(0,i)}function Se(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const ae=ee({__forward_ref__:ee});function ve(t){return t.__forward_ref__=ve,t.toString=function(){return oe(this())},t}function we(t){return _e(t)?t():t}function _e(t){return"function"==typeof t&&t.hasOwnProperty(ae)&&t.__forward_ref__===ve}class lt extends Error{constructor(n,i){super(function(t,n){return`${t?`NG0${t}: `:""}${n}`}(n,i)),this.code=n}}function Re(t){return"string"==typeof t?t:null==t?"":String(t)}function Ge(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Re(t)}function It(t,n){const i=n?` in ${n}`:"";throw new lt("201",`No provider for ${Ge(t)} found${i}`)}function tt(t,n){null==t&&function(t,n,i,o){throw new Error(`ASSERTION ERROR: ${t}`+(null==o?"":` [Expected=> ${i} ${o} ${n} <=Actual]`))}(n,t,null,"!=")}function Vt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function wn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Hn(t){return On(t,Sr)||On(t,Gn)}function On(t,n){return t.hasOwnProperty(n)?t[n]:null}function Rr(t){return t&&(t.hasOwnProperty(Ht)||t.hasOwnProperty(Jn))?t[Ht]:null}const Sr=ee({\u0275prov:ee}),Ht=ee({\u0275inj:ee}),Gn=ee({ngInjectableDef:ee}),Jn=ee({ngInjectorDef:ee});var En=(()=>((En=En||{})[En.Default=0]="Default",En[En.Host=1]="Host",En[En.Self=2]="Self",En[En.SkipSelf=4]="SkipSelf",En[En.Optional=8]="Optional",En))();let er;function sr(t){const n=er;return er=t,n}function pr(t,n,i){const o=Hn(t);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:i&En.Optional?null:void 0!==n?n:void It(oe(t),"Injector")}function Nr(t){return{toString:t}.toString()}var Ar=(()=>((Ar=Ar||{})[Ar.OnPush=0]="OnPush",Ar[Ar.Default=1]="Default",Ar))(),In=(()=>((In=In||{})[In.Emulated=0]="Emulated",In[In.None=2]="None",In[In.ShadowDom=3]="ShadowDom",In))();const Ft="undefined"!=typeof globalThis&&globalThis,ci="undefined"!=typeof window&&window,ni="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Yn=Ft||"undefined"!=typeof global&&global||ci||ni,nr={},mt=[],He=ee({\u0275cmp:ee}),Xe=ee({\u0275dir:ee}),at=ee({\u0275pipe:ee}),Qe=ee({\u0275mod:ee}),wt=ee({\u0275loc:ee}),Qt=ee({\u0275fac:ee}),$t=ee({__NG_ELEMENT_ID__:ee});let Wt=0;function Be(t){return Nr(()=>{const i={},o={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Ar.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||mt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||In.Emulated,id:"c",styles:t.styles||mt,_:null,setInput:null,schemas:t.schemas||null,tView:null},l=t.directives,h=t.features,m=t.pipes;return o.id+=Wt++,o.inputs=tn(t.inputs,i),o.outputs=tn(t.outputs),h&&h.forEach(C=>C(o)),o.directiveDefs=l?()=>("function"==typeof l?l():l).map(it):null,o.pipeDefs=m?()=>("function"==typeof m?m():m).map(Ve):null,o})}function it(t){return Un(t)||function(t){return t[Xe]||null}(t)}function Ve(t){return function(t){return t[at]||null}(t)}const be={};function Pe(t){return Nr(()=>{const n={type:t.type,bootstrap:t.bootstrap||mt,declarations:t.declarations||mt,imports:t.imports||mt,exports:t.exports||mt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(be[t.id]=t.type),n})}function Et(t,n){return Nr(()=>{const i=Er(t,!0);i.declarations=n.declarations||mt,i.imports=n.imports||mt,i.exports=n.exports||mt})}function tn(t,n){if(null==t)return nr;const i={};for(const o in t)if(t.hasOwnProperty(o)){let l=t[o],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),i[l]=o,n&&(n[l]=h)}return i}const $n=Be;function Rn(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Un(t){return t[He]||null}function Er(t,n){const i=t[Qe]||null;if(!i&&!0===n)throw new Error(`Type ${oe(t)} does not have '\u0275mod' property.`);return i}function bt(t){return Array.isArray(t)&&"object"==typeof t[1]}function At(t){return Array.isArray(t)&&!0===t[1]}function an(t){return 0!=(8&t.flags)}function Sn(t){return 2==(2&t.flags)}function zn(t){return 1==(1&t.flags)}function Xn(t){return null!==t.template}function kr(t){return 0!=(512&t[2])}function Xi(t,n){return t.hasOwnProperty(Qt)?t[Qt]:null}class no{constructor(n,i,o){this.previousValue=n,this.currentValue=i,this.firstChange=o}isFirstChange(){return this.firstChange}}function zs(){return is}function is(t){return t.type.prototype.ngOnChanges&&(t.setInput=As),Yo}function Yo(){const t=Ko(this),n=null==t?void 0:t.current;if(n){const i=t.previous;if(i===nr)t.previous=n;else for(let o in n)i[o]=n[o];t.current=null,this.ngOnChanges(n)}}function As(t,n,i,o){const l=Ko(t)||function(t,n){return t[Ei]=n}(t,{previous:nr,current:null}),h=l.current||(l.current={}),m=l.previous,C=this.declaredInputs[i],R=m[C];h[C]=new no(R&&R.currentValue,n,m===nr),t[o]=n}zs.ngInherit=!0;const Ei="__ngSimpleChanges__";function Ko(t){return t[Ei]||null}let io;function Do(t){io=t}function G(t){return!!t.listen}const Q={createRenderer:(t,n)=>void 0!==io?io:"undefined"!=typeof document?document:void 0};function qe(t){for(;Array.isArray(t);)t=t[0];return t}function q(t,n){return qe(n[t])}function B(t,n){return qe(n[t.index])}function de(t,n){return t.data[n]}function bn(t,n){const i=n[t];return bt(i)?i:i[0]}function cr(t){return 4==(4&t[2])}function Qr(t){return 128==(128&t[2])}function mi(t,n){return null==n?null:t[n]}function ii(t){t[18]=0}function Wr(t,n){t[5]+=n;let i=t,o=t[3];for(;null!==o&&(1===n&&1===i[5]||-1===n&&0===i[5]);)o[5]+=n,i=o,o=o[3]}const rr={lFrame:va(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function To(){return rr.bindingsEnabled}function hn(){return rr.lFrame.lView}function br(){return rr.lFrame.tView}function So(t){return rr.lFrame.contextLView=t,t[8]}function Ti(){let t=Ms();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ms(){return rr.lFrame.currentTNode}function ys(t,n){const i=rr.lFrame;i.currentTNode=t,i.isParent=n}function Vs(){return rr.lFrame.isParent}function Bs(){rr.lFrame.isParent=!1}function Os(){return rr.isInCheckNoChangesMode}function $s(t){rr.isInCheckNoChangesMode=t}function un(){return rr.lFrame.bindingIndex++}function $i(t,n){const i=rr.lFrame;i.bindingIndex=i.bindingRootIndex=t,Ks(n)}function Ks(t){rr.lFrame.currentDirectiveIndex=t}function hs(){return rr.lFrame.currentQueryIndex}function Ji(t){rr.lFrame.currentQueryIndex=t}function js(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function oo(t,n,i){if(i&En.SkipSelf){let l=n,h=t;for(;!(l=l.parent,null!==l||i&En.Host||(l=js(h),null===l||(h=h[15],10&l.type))););if(null===l)return!1;n=l,t=h}const o=rr.lFrame=vs();return o.currentTNode=n,o.lView=t,!0}function li(t){const n=vs(),i=t[1];rr.lFrame=n,n.currentTNode=i.firstChild,n.lView=t,n.tView=i,n.contextLView=t,n.bindingIndex=i.bindingStartIndex,n.inI18n=!1}function vs(){const t=rr.lFrame,n=null===t?null:t.child;return null===n?va(t):n}function va(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function Ds(){const t=rr.lFrame;return rr.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const la=Ds;function ao(){const t=Ds();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function N(){return rr.lFrame.selectedIndex}function w(t){rr.lFrame.selectedIndex=t}function Y(){const t=rr.lFrame;return de(t.tView,t.selectedIndex)}function Vr(t,n){for(let i=n.directiveStart,o=n.directiveEnd;i<o;i++){const h=t.data[i].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:C,ngAfterViewInit:R,ngAfterViewChecked:j,ngOnDestroy:re}=h;m&&(t.contentHooks||(t.contentHooks=[])).push(-i,m),C&&((t.contentHooks||(t.contentHooks=[])).push(i,C),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(i,C)),R&&(t.viewHooks||(t.viewHooks=[])).push(-i,R),j&&((t.viewHooks||(t.viewHooks=[])).push(i,j),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(i,j)),null!=re&&(t.destroyHooks||(t.destroyHooks=[])).push(i,re)}}function ui(t,n,i){Ii(t,n,3,i)}function qt(t,n,i,o){(3&t[2])===i&&Ii(t,n,i,o)}function dr(t,n){let i=t[2];(3&i)===n&&(i&=2047,i+=1,t[2]=i)}function Ii(t,n,i,o){const h=null!=o?o:-1,m=n.length-1;let C=0;for(let R=void 0!==o?65535&t[18]:0;R<m;R++)if("number"==typeof n[R+1]){if(C=n[R],null!=o&&C>=o)break}else n[R]<0&&(t[18]+=65536),(C<h||-1==h)&&(es(t,i,n,R),t[18]=(4294901760&t[18])+R+2),R++}function es(t,n,i,o){const l=i[o]<0,h=i[o+1],C=t[l?-i[o]:i[o]];if(l){if(t[2]>>11<t[18]>>16&&(3&t[2])===n){t[2]+=2048;try{h.call(C)}finally{}}}else try{h.call(C)}finally{}}class Kn{constructor(n,i,o){this.factory=n,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=o}}function Ea(t,n,i){const o=G(t);let l=0;for(;l<i.length;){const h=i[l];if("number"==typeof h){if(0!==h)break;l++;const m=i[l++],C=i[l++],R=i[l++];o?t.setAttribute(n,C,R,m):n.setAttributeNS(m,C,R)}else{const m=h,C=i[++l];Ia(m)?o&&t.setProperty(n,m,C):o?t.setAttribute(n,m,C):n.setAttribute(m,C),l++}}return l}function Ha(t){return 3===t||4===t||6===t}function Ia(t){return 64===t.charCodeAt(0)}function ua(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let i=-1;for(let o=0;o<n.length;o++){const l=n[o];"number"==typeof l?i=l:0===i||nl(t,i,l,null,-1===i||2===i?n[++o]:null)}}return t}function nl(t,n,i,o,l){let h=0,m=t.length;if(-1===n)m=-1;else for(;h<t.length;){const C=t[h++];if("number"==typeof C){if(C===n){m=-1;break}if(C>n){m=h-1;break}}}for(;h<t.length;){const C=t[h];if("number"==typeof C)break;if(C===i){if(null===o)return void(null!==l&&(t[h+1]=l));if(o===t[h+1])return void(t[h+2]=l)}h++,null!==o&&h++,null!==l&&h++}-1!==m&&(t.splice(m,0,n),h=m+1),t.splice(h++,0,i),null!==o&&t.splice(h++,0,o),null!==l&&t.splice(h++,0,l)}function rl(t){return-1!==t}function ba(t){return 32767&t}function fr(t,n){let i=function(t){return t>>16}(t),o=n;for(;i>0;)o=o[15],i--;return o}let uo=!0;function Zs(t){const n=uo;return uo=t,n}let K=0;function ut(t,n){const i=ir(t,n);if(-1!==i)return i;const o=n[1];o.firstCreatePass&&(t.injectorIndex=n.length,Rt(o.data,t),Rt(n,null),Rt(o.blueprint,null));const l=Br(t,n),h=t.injectorIndex;if(rl(l)){const m=ba(l),C=fr(l,n),R=C[1].data;for(let j=0;j<8;j++)n[h+j]=C[m+j]|R[m+j]}return n[h+8]=l,h}function Rt(t,n){t.push(0,0,0,0,0,0,0,0,n)}function ir(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Br(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let i=0,o=null,l=n;for(;null!==l;){const h=l[1],m=h.type;if(o=2===m?h.declTNode:1===m?l[6]:null,null===o)return-1;if(i++,l=l[15],-1!==o.injectorIndex)return o.injectorIndex|i<<16}return-1}function pi(t,n,i){!function(t,n,i){let o;"string"==typeof i?o=i.charCodeAt(0)||0:i.hasOwnProperty($t)&&(o=i[$t]),null==o&&(o=i[$t]=K++);const l=255&o;n.data[t+(l>>5)]|=1<<l}(t,n,i)}function Ao(t,n,i){if(i&En.Optional)return t;It(n,"NodeInjector")}function il(t,n,i,o){if(i&En.Optional&&void 0===o&&(o=null),0==(i&(En.Self|En.Host))){const l=t[9],h=sr(void 0);try{return l?l.get(n,o,i&En.Optional):pr(n,o,i&En.Optional)}finally{sr(h)}}return Ao(o,n,i)}function Xo(t,n,i,o=En.Default,l){if(null!==t){const h=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty($t)?t[$t]:void 0;return"number"==typeof n?n>=0?255&n:k:n}(i);if("function"==typeof h){if(!oo(n,t,o))return o&En.Host?Ao(l,i,o):il(n,i,o,l);try{const m=h(o);if(null!=m||o&En.Optional)return m;It(i)}finally{la()}}else if("number"==typeof h){let m=null,C=ir(t,n),R=-1,j=o&En.Host?n[16][6]:null;for((-1===C||o&En.SkipSelf)&&(R=-1===C?Br(t,n):n[C+8],-1!==R&&We(o,!1)?(m=n[1],C=ba(R),n=fr(R,n)):C=-1);-1!==C;){const re=n[1];if(ye(h,C,re.data)){const Ae=S(C,n,i,m,o,j);if(Ae!==Jo)return Ae}R=n[C+8],-1!==R&&We(o,n[1].data[C+8]===j)&&ye(h,C,n)?(m=re,C=ba(R),n=fr(R,n)):C=-1}}}return il(n,i,o,l)}const Jo={};function k(){return new ge(Ti(),hn())}function S(t,n,i,o,l,h){const m=n[1],C=m.data[t+8],re=T(C,m,i,null==o?Sn(C)&&uo:o!=m&&0!=(3&C.type),l&En.Host&&h===C);return null!==re?H(n,m,re,C):Jo}function T(t,n,i,o,l){const h=t.providerIndexes,m=n.data,C=1048575&h,R=t.directiveStart,re=h>>20,Ne=l?C+re:t.directiveEnd;for(let et=o?C:C+re;et<Ne;et++){const yt=m[et];if(et<R&&i===yt||et>=R&&yt.type===i)return et}if(l){const et=m[R];if(et&&Xn(et)&&et.type===i)return R}return null}function H(t,n,i,o){let l=t[i];const h=n.data;if(function(t){return t instanceof Kn}(l)){const m=l;m.resolving&&function(t,n){throw new lt("200",`Circular dependency in DI detected for ${t}`)}(Ge(h[i]));const C=Zs(m.canSeeViewProviders);m.resolving=!0;const R=m.injectImpl?sr(m.injectImpl):null;oo(t,o,En.Default);try{l=t[i]=m.factory(void 0,h,t,o),n.firstCreatePass&&i>=o.directiveStart&&function(t,n,i){const{ngOnChanges:o,ngOnInit:l,ngDoCheck:h}=n.type.prototype;if(o){const m=is(n);(i.preOrderHooks||(i.preOrderHooks=[])).push(t,m),(i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(t,m)}l&&(i.preOrderHooks||(i.preOrderHooks=[])).push(0-t,l),h&&((i.preOrderHooks||(i.preOrderHooks=[])).push(t,h),(i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(t,h))}(i,h[i],n)}finally{null!==R&&sr(R),Zs(C),m.resolving=!1,la()}}return l}function ye(t,n,i){return!!(i[n+(t>>5)]&1<<t)}function We(t,n){return!(t&En.Self||t&En.Host&&n)}class ge{constructor(n,i){this._tNode=n,this._lView=i}get(n,i,o){return Xo(this._tNode,this._lView,n,o,i)}}function Jt(t){return Nr(()=>{const n=t.prototype.constructor,i=n[Qt]||kn(n),o=Object.prototype;let l=Object.getPrototypeOf(t.prototype).constructor;for(;l&&l!==o;){const h=l[Qt]||kn(l);if(h&&h!==i)return h;l=Object.getPrototypeOf(l)}return h=>new h})}function kn(t){return _e(t)?()=>{const n=kn(we(t));return n&&n()}:Xi(t)}function ei(t){return function(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const i=t.attrs;if(i){const o=i.length;let l=0;for(;l<o;){const h=i[l];if(Ha(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<o&&"string"==typeof i[l];)l++;else{if(h===n)return i[l+1];l+=2}}}return null}(Ti(),t)}const ti="__parameters__",Fr="__prop__metadata__";function co(t){return function(...i){if(t){const o=t(...i);for(const l in o)this[l]=o[l]}}}function Ts(t,n,i){return Nr(()=>{const o=co(n);function l(...h){if(this instanceof l)return o.apply(this,h),this;const m=new l(...h);return C.annotation=m,C;function C(R,j,re){const Ae=R.hasOwnProperty(ti)?R[ti]:Object.defineProperty(R,ti,{value:[]})[ti];for(;Ae.length<=re;)Ae.push(null);return(Ae[re]=Ae[re]||[]).push(m),R}}return i&&(l.prototype=Object.create(i.prototype)),l.prototype.ngMetadataName=t,l.annotationCls=l,l})}function xo(t,n,i,o){return Nr(()=>{const l=co(n);function h(...m){if(this instanceof h)return l.apply(this,m),this;const C=new h(...m);return function(j,re){const Ae=j.constructor,Ne=Ae.hasOwnProperty(Fr)?Ae[Fr]:Object.defineProperty(Ae,Fr,{value:{}})[Fr];Ne[re]=Ne.hasOwnProperty(re)&&Ne[re]||[],Ne[re].unshift(C),o&&o(j,re,...m)}}return i&&(h.prototype=Object.create(i.prototype)),h.prototype.ngMetadataName=t,h.annotationCls=h,h})}function as(){return Ts("Attribute",t=>({attributeName:t,__NG_ELEMENT_ID__:()=>ei(t)}))}const da=as();class ls{constructor(n,i){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=Vt({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}toString(){return`InjectionToken ${this._desc}`}}const ps=new ls("AnalyzeForEntryComponents");class Qs{}const _o=xo("ContentChild",(t,n={})=>Object.assign({selector:t,first:!0,isViewQuery:!1,descendants:!0},n),Qs),jo=xo("ViewChild",(t,n)=>Object.assign({selector:t,first:!0,isViewQuery:!0,descendants:!0},n),Qs),ll=Function;function Es(t,n){void 0===n&&(n=t);for(let i=0;i<t.length;i++){let o=t[i];Array.isArray(o)?(n===t&&(n=t.slice(0,i)),Es(o,n)):n!==t&&n.push(o)}return n}function vo(t,n){t.forEach(i=>Array.isArray(i)?vo(i,n):n(i))}function Oa(t,n,i){n>=t.length?t.push(i):t.splice(n,0,i)}function Eo(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function Io(t,n){const i=[];for(let o=0;o<t;o++)i.push(n);return i}function po(t,n,i){let o=Pa(t,n);return o>=0?t[1|o]=i:(o=~o,function(t,n,i,o){let l=t.length;if(l==n)t.push(i,o);else if(1===l)t.push(o,t[0]),t[0]=i;else{for(l--,t.push(t[l-1],t[l]);l>n;)t[l]=t[l-2],l--;t[n]=i,t[n+1]=o}}(t,o,n,i)),o}function ea(t,n){const i=Pa(t,n);if(i>=0)return t[1|i]}function Pa(t,n){return function(t,n,i){let o=0,l=t.length>>i;for(;l!==o;){const h=o+(l-o>>1),m=t[h<<i];if(n===m)return h<<i;m>n?l=h:o=h+1}return~(l<<i)}(t,n,1)}const me={},Ue="__NG_DI_FLAG__",vt="ngTempTokenPath",mn=/\n/gm,yr="__source",$r=ee({provide:String,useValue:ee});let _r;function xi(t){const n=_r;return _r=t,n}function wi(t,n=En.Default){if(void 0===_r)throw new Error("inject() must be called from an injection context");return null===_r?pr(t,void 0,n):_r.get(t,n&En.Optional?null:void 0,n)}function Qi(t,n=En.Default){return(er||wi)(we(t),n)}function Ho(t){const n=[];for(let i=0;i<t.length;i++){const o=we(t[i]);if(Array.isArray(o)){if(0===o.length)throw new Error("Arguments array must have arguments.");let l,h=En.Default;for(let m=0;m<o.length;m++){const C=o[m],R=ka(C);"number"==typeof R?-1===R?l=C.token:h|=R:l=C}n.push(Qi(l,h))}else n.push(Qi(o))}return n}function cl(t,n){return t[Ue]=n,t.prototype[Ue]=n,t}function ka(t){return t[Ue]}function na(t,n,i,o){const l=t[vt];throw n[yr]&&l.unshift(n[yr]),t.message=function(t,n,i,o=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let l=oe(n);if(Array.isArray(n))l=n.map(oe).join(" -> ");else if("object"==typeof n){let h=[];for(let m in n)if(n.hasOwnProperty(m)){let C=n[m];h.push(m+":"+("string"==typeof C?JSON.stringify(C):oe(C)))}l=`{${h.join(", ")}}`}return`${i}${o?"("+o+")":""}[${l}]: ${t.replace(mn,"\n  ")}`}("\n"+t.message,l,i,o),t.ngTokenPath=l,t[vt]=null,t}const La=cl(Ts("Inject",t=>({token:t})),-1),Ta=cl(Ts("Optional"),8),Va=cl(Ts("SkipSelf"),4);let Xl;function Ll(t){var n;return(null===(n=function(){if(void 0===Xl&&(Xl=null,Yn.trustedTypes))try{Xl=Yn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return Xl}())||void 0===n?void 0:n.createHTML(t))||t}class Sa{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class eu extends Sa{getTypeName(){return"HTML"}}class Vl extends Sa{getTypeName(){return"Style"}}class Hc extends Sa{getTypeName(){return"Script"}}class wu extends Sa{getTypeName(){return"URL"}}class Md extends Sa{getTypeName(){return"ResourceURL"}}function Ka(t){return t instanceof Sa?t.changingThisBreaksApplicationSecurity:t}function Gi(t,n){const i=Du(t);if(null!=i&&i!==n){if("ResourceURL"===i&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${i} (see https://g.co/ng/security#xss)`)}return i===n}function Du(t){return t instanceof Sa&&t.getTypeName()||null}function Ku(t){return new eu(t)}function Zu(t){return new Vl(t)}function Qu(t){return new Hc(t)}function Tu(t){return new wu(t)}function tu(t){return new Md(t)}class nu{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const i=(new window.DOMParser).parseFromString(Ll(n),"text/html").body;return null===i?this.inertDocumentHelper.getInertBodyElement(n):(i.removeChild(i.firstChild),i)}catch(i){return null}}}class $a{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const i=this.inertDocument.createElement("html");this.inertDocument.appendChild(i);const o=this.inertDocument.createElement("body");i.appendChild(o)}}getInertBodyElement(n){const i=this.inertDocument.createElement("template");if("content"in i)return i.innerHTML=Ll(n),i;const o=this.inertDocument.createElement("body");return o.innerHTML=Ll(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(o),o}stripCustomNsAttrs(n){const i=n.attributes;for(let l=i.length-1;0<l;l--){const m=i.item(l).name;("xmlns:ns1"===m||0===m.indexOf("ns1:"))&&n.removeAttribute(m)}let o=n.firstChild;for(;o;)o.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(o),o=o.nextSibling}}const Wc=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,su=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Sl(t){return(t=String(t)).match(Wc)||t.match(su)?t:"unsafe:"+t}function Ui(t){const n={};for(const i of t.split(","))n[i]=!0;return n}function si(...t){const n={};for(const i of t)for(const o in i)i.hasOwnProperty(o)&&(n[o]=!0);return n}const Au=Ui("area,br,col,hr,img,wbr"),ou=Ui("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ml=Ui("rp,rt"),yl=si(Au,si(ou,Ui("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),si(ml,Ui("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),si(ml,ou)),xu=Ui("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ia=Ui("srcset"),Ru=si(xu,ia,Ui("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ui("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),_l=Ui("script,style,template");class Xr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let i=n.firstChild,o=!0;for(;i;)if(i.nodeType===Node.ELEMENT_NODE?o=this.startElement(i):i.nodeType===Node.TEXT_NODE?this.chars(i.nodeValue):this.sanitizedSomething=!0,o&&i.firstChild)i=i.firstChild;else for(;i;){i.nodeType===Node.ELEMENT_NODE&&this.endElement(i);let l=this.checkClobberedElement(i,i.nextSibling);if(l){i=l;break}i=this.checkClobberedElement(i,i.parentNode)}return this.buf.join("")}startElement(n){const i=n.nodeName.toLowerCase();if(!yl.hasOwnProperty(i))return this.sanitizedSomething=!0,!_l.hasOwnProperty(i);this.buf.push("<"),this.buf.push(i);const o=n.attributes;for(let l=0;l<o.length;l++){const h=o.item(l),m=h.name,C=m.toLowerCase();if(!Ru.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let R=h.value;xu[C]&&(R=Sl(R)),ia[C]&&(t=R,R=(t=String(t)).split(",").map(n=>Sl(n.trim())).join(", ")),this.buf.push(" ",m,'="',p(R),'"')}var t;return this.buf.push(">"),!0}endElement(n){const i=n.nodeName.toLowerCase();yl.hasOwnProperty(i)&&!Au.hasOwnProperty(i)&&(this.buf.push("</"),this.buf.push(i),this.buf.push(">"))}chars(n){this.buf.push(p(n))}checkClobberedElement(n,i){if(i&&(n.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return i}}const Aa=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,D=/([^\#-~ |!])/g;function p(t){return t.replace(/&/g,"&amp;").replace(Aa,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(D,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let _;function A(t,n){let i=null;try{_=_||function(t){const n=new $a(t);return function(){try{return!!(new window.DOMParser).parseFromString(Ll(""),"text/html")}catch(t){return!1}}()?new nu(n):n}(t);let o=n?String(n):"";i=_.getInertBodyElement(o);let l=5,h=o;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,o=h,h=i.innerHTML,i=_.getInertBodyElement(o)}while(o!==h);return Ll((new Xr).sanitizeChildren(ne(i)||i))}finally{if(i){const o=ne(i)||i;for(;o.firstChild;)o.removeChild(o.firstChild)}}}function ne(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var nt=(()=>((nt=nt||{})[nt.NONE=0]="NONE",nt[nt.HTML=1]="HTML",nt[nt.STYLE=2]="STYLE",nt[nt.SCRIPT=3]="SCRIPT",nt[nt.URL=4]="URL",nt[nt.RESOURCE_URL=5]="RESOURCE_URL",nt))();function An(t){const n=function(){const t=hn();return t&&t[12]}();return n?n.sanitize(nt.URL,t)||"":Gi(t,"URL")?Ka(t):Sl(Re(t))}const au="__ngContext__";function Ws(t,n){t[au]=n}function uu(t){const n=function(t){return t[au]||null}(t);return n?Array.isArray(n)?n:n.lView:null}function Kc(t){return t.ngOriginalError}function Ch(t,...n){t.error(...n)}class Co{constructor(){this._console=console}handleError(n){const i=this._findOriginalError(n),o=this._findContext(n),l=(t=n)&&t.ngErrorLogger||Ch;var t;l(this._console,"ERROR",n),i&&l(this._console,"ORIGINAL ERROR",i),o&&l(this._console,"ERROR CONTEXT",o)}_findContext(n){return n?n.ngDebugContext||this._findContext(Kc(n)):null}_findOriginalError(n){let i=n&&Kc(n);for(;i&&Kc(i);)i=Kc(i);return i||null}}const Bd=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Yn))();function xl(t){return t instanceof Function?t():t}var $l=(()=>(($l=$l||{})[$l.Important=1]="Important",$l[$l.DashCase=2]="DashCase",$l))();function f(t,n){return undefined(t,n)}function y(t){const n=t[3];return At(n)?n[3]:n}function J(t){return Ye(t[13])}function xe(t){return Ye(t[4])}function Ye(t){for(;null!==t&&!At(t);)t=t[4];return t}function zt(t,n,i,o,l){if(null!=o){let h,m=!1;At(o)?h=o:bt(o)&&(m=!0,o=o[0]);const C=qe(o);0===t&&null!==i?null==l?Zg(n,i,C):Tc(n,i,C,l||null,!0):1===t&&null!==i?Tc(n,i,C,l||null,!0):2===t?function(t,n,i){const o=du(t,n);o&&function(t,n,i,o){G(t)?t.removeChild(n,i,o):n.removeChild(i)}(t,o,n,i)}(n,C,m):3===t&&n.destroyNode(C),null!=h&&function(t,n,i,o,l){const h=i[7];h!==qe(i)&&zt(n,t,o,h,l);for(let C=10;C<i.length;C++){const R=i[C];nd(R[1],R,t,n,o,h)}}(n,t,h,i,l)}}function vr(t,n,i){return G(t)?t.createElement(n,i):null===i?t.createElement(n):t.createElementNS(i,n)}function Yg(t,n){const i=t[9],o=i.indexOf(n),l=n[3];1024&n[2]&&(n[2]&=-1025,Wr(l,-1)),i.splice(o,1)}function xh(t,n){if(t.length<=10)return;const i=10+n,o=t[i];if(o){const l=o[17];null!==l&&l!==t&&Yg(l,o),n>0&&(t[i-1][4]=o[4]);const h=Eo(t,10+n);!function(t,n){nd(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(o[1],o);const m=h[19];null!==m&&m.detachView(h[1]),o[3]=null,o[4]=null,o[2]&=-129}return o}function Zf(t,n){if(!(256&n[2])){const i=n[11];G(i)&&i.destroyNode&&nd(t,n,i,3,null,null),function(t){let n=t[13];if(!n)return Xc(t[1],t);for(;n;){let i=null;if(bt(n))i=n[13];else{const o=n[10];o&&(i=o)}if(!i){for(;n&&!n[4]&&n!==t;)bt(n)&&Xc(n[1],n),n=n[3];null===n&&(n=t),bt(n)&&Xc(n[1],n),i=n&&n[4]}n=i}}(n)}}function Xc(t,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function(t,n){let i;if(null!=t&&null!=(i=t.destroyHooks))for(let o=0;o<i.length;o+=2){const l=n[i[o]];if(!(l instanceof Kn)){const h=i[o+1];if(Array.isArray(h))for(let m=0;m<h.length;m+=2){const C=l[h[m]],R=h[m+1];try{R.call(C)}finally{}}else try{h.call(l)}finally{}}}}(t,n),function(t,n){const i=t.cleanup,o=n[7];let l=-1;if(null!==i)for(let h=0;h<i.length-1;h+=2)if("string"==typeof i[h]){const m=i[h+1],C="function"==typeof m?m(n):qe(n[m]),R=o[l=i[h+2]],j=i[h+3];"boolean"==typeof j?C.removeEventListener(i[h],R,j):j>=0?o[l=j]():o[l=-j].unsubscribe(),h+=2}else{const m=o[l=i[h+1]];i[h].call(m)}if(null!==o){for(let h=l+1;h<o.length;h++)o[h]();n[7]=null}}(t,n),1===n[1].type&&G(n[11])&&n[11].destroy();const i=n[17];if(null!==i&&At(n[3])){i!==n[3]&&Yg(i,n);const o=n[19];null!==o&&o.detachView(t)}}}function Kg(t,n,i){return function(t,n,i){let o=n;for(;null!==o&&40&o.type;)o=(n=o).parent;if(null===o)return i[0];if(2&o.flags){const l=t.data[o.directiveStart].encapsulation;if(l===In.None||l===In.Emulated)return null}return B(o,i)}(t,n.parent,i)}function Tc(t,n,i,o,l){G(t)?t.insertBefore(n,i,o,l):n.insertBefore(i,o,l)}function Zg(t,n,i){G(t)?t.appendChild(n,i):n.appendChild(i)}function Qg(t,n,i,o,l){null!==o?Tc(t,n,i,o,l):Zg(t,n,i)}function du(t,n){return G(t)?t.parentNode(n):n.parentNode}function Xf(t,n,i){return Jg(t,n,i)}let Jg=function(t,n,i){return 40&t.type?B(t,i):null};function Rh(t,n,i,o){const l=Kg(t,o,n),h=n[11],C=Xf(o.parent||n[6],o,n);if(null!=l)if(Array.isArray(i))for(let R=0;R<i.length;R++)Qg(h,l,i[R],C,!1);else Qg(h,l,i,C,!1)}function Gd(t,n){if(null!==n){const i=n.type;if(3&i)return B(n,t);if(4&i)return ed(-1,t[n.index]);if(8&i){const o=n.child;if(null!==o)return Gd(t,o);{const l=t[n.index];return At(l)?ed(-1,l):qe(l)}}if(32&i)return f(n,t)()||qe(t[n.index]);{const o=Jc(t,n);return null!==o?Array.isArray(o)?o[0]:Gd(y(t[16]),o):Gd(t,n.next)}}return null}function Jc(t,n){return null!==n?t[16][6].projection[n.projection]:null}function ed(t,n){const i=10+t+1;if(i<n.length){const o=n[i],l=o[1].firstChild;if(null!==l)return Gd(o,l)}return n[7]}function Mh(t,n,i,o,l,h,m){for(;null!=i;){const C=o[i.index],R=i.type;if(m&&0===n&&(C&&Ws(qe(C),o),i.flags|=4),64!=(64&i.flags))if(8&R)Mh(t,n,i.child,o,l,h,!1),zt(n,t,l,C,h);else if(32&R){const j=f(i,o);let re;for(;re=j();)zt(n,t,l,re,h);zt(n,t,l,C,h)}else 16&R?Jf(t,n,o,i,l,h):zt(n,t,l,C,h);i=m?i.projectionNext:i.next}}function nd(t,n,i,o,l,h){Mh(i,o,t.firstChild,n,l,h,!1)}function Jf(t,n,i,o,l,h){const m=i[16],R=m[6].projection[o.projection];if(Array.isArray(R))for(let j=0;j<R.length;j++)zt(n,t,l,R[j],h);else Mh(t,n,R,m[3],l,h,!0)}function ep(t,n,i){G(t)?t.setAttribute(n,"style",i):n.style.cssText=i}function hu(t,n,i){G(t)?""===i?t.removeAttribute(n,"class"):t.setAttribute(n,"class",i):n.className=i}function Ac(t,n,i){let o=t.length;for(;;){const l=t.indexOf(n,i);if(-1===l)return l;if(0===l||t.charCodeAt(l-1)<=32){const h=n.length;if(l+h===o||t.charCodeAt(l+h)<=32)return l}i=l+1}}const tc="ng-template";function e_(t,n,i){let o=0;for(;o<t.length;){let l=t[o++];if(i&&"class"===l){if(l=t[o],-1!==Ac(l.toLowerCase(),n,0))return!0}else if(1===l){for(;o<t.length&&"string"==typeof(l=t[o++]);)if(l.toLowerCase()===n)return!0;return!1}}return!1}function xc(t){return 4===t.type&&t.value!==tc}function em(t,n,i){return n===(4!==t.type||i?t.value:tc)}function nc(t,n,i){let o=4;const l=t.attrs||[],h=function(t){for(let n=0;n<t.length;n++)if(Ha(t[n]))return n;return t.length}(l);let m=!1;for(let C=0;C<n.length;C++){const R=n[C];if("number"!=typeof R){if(!m)if(4&o){if(o=2|1&o,""!==R&&!em(t,R,i)||""===R&&1===n.length){if(Rl(o))return!1;m=!0}}else{const j=8&o?R:n[++C];if(8&o&&null!==t.attrs){if(!e_(t.attrs,j,i)){if(Rl(o))return!1;m=!0}continue}const Ae=t_(8&o?"class":R,l,xc(t),i);if(-1===Ae){if(Rl(o))return!1;m=!0;continue}if(""!==j){let Ne;Ne=Ae>h?"":l[Ae+1].toLowerCase();const et=8&o?Ne:null;if(et&&-1!==Ac(et,j,0)||2&o&&j!==Ne){if(Rl(o))return!1;m=!0}}}}else{if(!m&&!Rl(o)&&!Rl(R))return!1;if(m&&Rl(R))continue;m=!1,o=R|1&o}}return Rl(o)||m}function Rl(t){return 0==(1&t)}function t_(t,n,i,o){if(null===n)return-1;let l=0;if(o||!i){let h=!1;for(;l<n.length;){const m=n[l];if(m===t)return l;if(3===m||6===m)h=!0;else{if(1===m||2===m){let C=n[++l];for(;"string"==typeof C;)C=n[++l];continue}if(4===m)break;if(0===m){l+=4;continue}}l+=h?1:2}return-1}return function(t,n){let i=t.indexOf(4);if(i>-1)for(i++;i<t.length;){const o=t[i];if("number"==typeof o)return-1;if(o===n)return i;i++}return-1}(n,t)}function tm(t,n,i=!1){for(let o=0;o<n.length;o++)if(nc(t,n[o],i))return!0;return!1}function nm(t,n){e:for(let i=0;i<n.length;i++){const o=n[i];if(t.length===o.length){for(let l=0;l<t.length;l++)if(t[l]!==o[l])continue e;return!0}}return!1}function rm(t,n){return t?":not("+n.trim()+")":n}function im(t){let n=t[0],i=1,o=2,l="",h=!1;for(;i<t.length;){let m=t[i];if("string"==typeof m)if(2&o){const C=t[++i];l+="["+m+(C.length>0?'="'+C+'"':"")+"]"}else 8&o?l+="."+m:4&o&&(l+=" "+m);else""!==l&&!Rl(m)&&(n+=rm(h,l),l=""),o=m,h=h||!Rl(o);i++}return""!==l&&(n+=rm(h,l)),n}const Gr={};function rd(t){tp(br(),hn(),N()+t,Os())}function tp(t,n,i,o){if(!o)if(3==(3&n[2])){const h=t.preOrderCheckHooks;null!==h&&ui(n,h,i)}else{const h=t.preOrderHooks;null!==h&&qt(n,h,0,i)}w(i)}function zd(t,n){return t<<17|n<<2}function Ul(t){return t>>17&32767}function rp(t){return 2|t}function jl(t){return(131068&t)>>2}function Fo(t,n){return-131069&t|n<<2}function ip(t){return 1|t}function jh(t,n){const i=t.contentQueries;if(null!==i)for(let o=0;o<i.length;o+=2){const l=i[o],h=i[o+1];if(-1!==h){const m=t.data[h];Ji(l),m.contentQueries(2,n[h],h)}}}function sd(t,n,i,o,l,h,m,C,R,j){const re=n.blueprint.slice();return re[0]=l,re[2]=140|o,ii(re),re[3]=re[15]=t,re[8]=i,re[10]=m||t&&t[10],re[11]=C||t&&t[11],re[12]=R||t&&t[12]||null,re[9]=j||t&&t[9]||null,re[6]=h,re[16]=2==n.type?t[16]:re,re}function od(t,n,i,o,l){let h=t.data[n];if(null===h)h=function(t,n,i,o,l){const h=Ms(),m=Vs(),R=t.data[n]=function(t,n,i,o,l,h){return{type:i,index:o,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?h:h&&h.parent,i,n,o,l);return null===t.firstChild&&(t.firstChild=R),null!==h&&(m?null==h.child&&null!==R.parent&&(h.child=R):null===h.next&&(h.next=R)),R}(t,n,i,o,l),rr.lFrame.inI18n&&(h.flags|=64);else if(64&h.type){h.type=i,h.value=o,h.attrs=l;const m=function(){const t=rr.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();h.injectorIndex=null===m?-1:m.injectorIndex}return ys(h,!0),h}function ad(t,n,i,o){if(0===i)return-1;const l=n.length;for(let h=0;h<i;h++)n.push(o),t.blueprint.push(o),t.data.push(null);return l}function ld(t,n,i){li(n);try{const o=t.viewQuery;null!==o&&Mp(1,o,i);const l=t.template;null!==l&&Hh(t,n,l,1,i),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&jh(t,n),t.staticViewQueries&&Mp(2,t.viewQuery,i);const h=t.components;null!==h&&function(t,n){for(let i=0;i<n.length;i++)Sp(t,n[i])}(n,h)}catch(o){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),o}finally{n[2]&=-5,ao()}}function Pu(t,n,i,o){const l=n[2];if(256==(256&l))return;li(n);const h=Os();try{ii(n),function(t){rr.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==i&&Hh(t,n,i,2,o);const m=3==(3&l);if(!h)if(m){const j=t.preOrderCheckHooks;null!==j&&ui(n,j,null)}else{const j=t.preOrderHooks;null!==j&&qt(n,j,0,null),dr(n,0)}if(function(t){for(let n=J(t);null!==n;n=xe(n)){if(!n[2])continue;const i=n[9];for(let o=0;o<i.length;o++){const l=i[o],h=l[3];0==(1024&l[2])&&Wr(h,1),l[2]|=1024}}}(n),function(t){for(let n=J(t);null!==n;n=xe(n))for(let i=10;i<n.length;i++){const o=n[i],l=o[1];Qr(o)&&Pu(l,o,l.template,o[8])}}(n),null!==t.contentQueries&&jh(t,n),!h)if(m){const j=t.contentCheckHooks;null!==j&&ui(n,j)}else{const j=t.contentHooks;null!==j&&qt(n,j,1),dr(n,1)}!function(t,n){const i=t.hostBindingOpCodes;if(null!==i)try{for(let o=0;o<i.length;o++){const l=i[o];if(l<0)w(~l);else{const h=l,m=i[++o],C=i[++o];$i(m,h),C(2,n[h])}}}finally{w(-1)}}(t,n);const C=t.components;null!==C&&function(t,n){for(let i=0;i<n.length;i++)Cm(t,n[i])}(n,C);const R=t.viewQuery;if(null!==R&&Mp(2,R,o),!h)if(m){const j=t.viewCheckHooks;null!==j&&ui(n,j)}else{const j=t.viewHooks;null!==j&&qt(n,j,2),dr(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),h||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,Wr(n[3],-1))}finally{ao()}}function Xd(t,n,i,o){const l=n[10],h=!Os(),m=cr(n);try{h&&!m&&l.begin&&l.begin(),m&&ld(t,n,o),Pu(t,n,i,o)}finally{h&&!m&&l.end&&l.end()}}function Hh(t,n,i,o,l){const h=N(),m=2&o;try{w(-1),m&&n.length>20&&tp(t,n,20,Os()),i(o,l)}finally{w(h)}}function gp(t,n,i){!To()||(function(t,n,i,o){const l=i.directiveStart,h=i.directiveEnd;t.firstCreatePass||ut(i,n),Ws(o,n);const m=i.initialInputs;for(let C=l;C<h;C++){const R=t.data[C],j=Xn(R);j&&bm(n,i,R);const re=H(n,t,C,i);Ws(re,n),null!==m&&p_(0,C-l,re,R,0,m),j&&(bn(i.index,n)[8]=re)}}(t,n,i,B(i,n)),128==(128&i.flags)&&function(t,n,i){const o=i.directiveStart,l=i.directiveEnd,m=i.index,C=rr.lFrame.currentDirectiveIndex;try{w(m);for(let R=o;R<l;R++){const j=t.data[R],re=n[R];Ks(R),(null!==j.hostBindings||0!==j.hostVars||null!==j.hostAttrs)&&Zh(j,re)}}finally{w(-1),Ks(C)}}(t,n,i))}function mp(t,n,i=B){const o=n.localNames;if(null!==o){let l=n.index+1;for(let h=0;h<o.length;h+=2){const m=o[h+1],C=-1===m?i(n,t):t[m];t[l++]=C}}}function mm(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Wh(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function Wh(t,n,i,o,l,h,m,C,R,j){const re=20+o,Ae=re+l,Ne=function(t,n){const i=[];for(let o=0;o<n;o++)i.push(o<t?null:Gr);return i}(re,Ae),et="function"==typeof j?j():j;return Ne[1]={type:t,blueprint:Ne,template:i,queries:null,viewQuery:C,declTNode:n,data:Ne.slice().fill(null,re),bindingStartIndex:re,expandoStartIndex:Ae,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:R,consts:et,incompleteFirstPass:!1}}function Gh(t,n,i,o){const l=Xh(n);null===i?l.push(o):(l.push(i),t.firstCreatePass&&Jh(t).push(o,l.length-1))}function zh(t,n,i){for(let o in t)if(t.hasOwnProperty(o)){const l=t[o];(i=null===i?{}:i).hasOwnProperty(o)?i[o].push(n,l):i[o]=[n,l]}return i}function Ua(t,n,i,o,l,h,m,C){const R=B(n,i);let re,j=n.inputs;!C&&null!=j&&(re=j[o])?(ef(t,i,re,o,l),Sn(n)&&function(t,n){const i=bn(n,t);16&i[2]||(i[2]|=64)}(i,n.index)):3&n.type&&(o=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(o),l=null!=m?m(l,n.value||"",o):l,G(h)?h.setProperty(R,o,l):Ia(o)||(R.setProperty?R.setProperty(o,l):R[o]=l))}function Ip(t,n,i,o){let l=!1;if(To()){const h=function(t,n,i){const o=t.directiveRegistry;let l=null;if(o)for(let h=0;h<o.length;h++){const m=o[h];tm(i,m.selectors,!1)&&(l||(l=[]),pi(ut(i,n),t,m.type),Xn(m)?(Mc(t,i),l.unshift(m)):l.push(m))}return l}(t,n,i),m=null===o?null:{"":-1};if(null!==h){l=!0,Im(i,t.data.length,h.length);for(let re=0;re<h.length;re++){const Ae=h[re];Ae.providersResolver&&Ae.providersResolver(Ae)}let C=!1,R=!1,j=ad(t,n,h.length,null);for(let re=0;re<h.length;re++){const Ae=h[re];i.mergedAttrs=ua(i.mergedAttrs,Ae.hostAttrs),wp(t,i,n,j,Ae),f_(j,Ae,m),null!==Ae.contentQueries&&(i.flags|=8),(null!==Ae.hostBindings||null!==Ae.hostAttrs||0!==Ae.hostVars)&&(i.flags|=128);const Ne=Ae.type.prototype;!C&&(Ne.ngOnChanges||Ne.ngOnInit||Ne.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(i.index),C=!0),!R&&(Ne.ngOnChanges||Ne.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(i.index),R=!0),j++}!function(t,n){const o=n.directiveEnd,l=t.data,h=n.attrs,m=[];let C=null,R=null;for(let j=n.directiveStart;j<o;j++){const re=l[j],Ae=re.inputs,Ne=null===h||xc(n)?null:Dp(Ae,h);m.push(Ne),C=zh(Ae,j,C),R=zh(re.outputs,j,R)}null!==C&&(C.hasOwnProperty("class")&&(n.flags|=16),C.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=m,n.inputs=C,n.outputs=R}(t,i)}m&&function(t,n,i){if(n){const o=t.localNames=[];for(let l=0;l<n.length;l+=2){const h=i[n[l+1]];if(null==h)throw new lt("301",`Export of name '${n[l+1]}' not found!`);o.push(n[l],h)}}}(i,o,m)}return i.mergedAttrs=ua(i.mergedAttrs,i.attrs),l}function Yh(t,n,i,o,l,h){const m=h.hostBindings;if(m){let C=t.hostBindingOpCodes;null===C&&(C=t.hostBindingOpCodes=[]);const R=~n.index;(function(t){let n=t.length;for(;n>0;){const i=t[--n];if("number"==typeof i&&i<0)return i}return 0})(C)!=R&&C.push(R),C.push(o,l,m)}}function Zh(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function Mc(t,n){n.flags|=2,(t.components||(t.components=[])).push(n.index)}function f_(t,n,i){if(i){if(n.exportAs)for(let o=0;o<n.exportAs.length;o++)i[n.exportAs[o]]=t;Xn(n)&&(i[""]=t)}}function Im(t,n,i){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+i,t.providerIndexes=n}function wp(t,n,i,o,l){t.data[o]=l;const h=l.factory||(l.factory=Xi(l.type)),m=new Kn(h,Xn(l),null);t.blueprint[o]=m,i[o]=m,Yh(t,n,0,o,ad(t,i,l.hostVars,Gr),l)}function bm(t,n,i){const o=B(n,t),l=mm(i),h=t[10],m=ku(t,sd(t,l,null,i.onPush?64:16,o,n,h,h.createRenderer(o,i),null,null));t[n.index]=m}function pu(t,n,i,o,l,h){const m=B(t,n);!function(t,n,i,o,l,h,m){if(null==h)G(t)?t.removeAttribute(n,l,i):n.removeAttribute(l);else{const C=null==m?Re(h):m(h,o||"",l);G(t)?t.setAttribute(n,l,C,i):i?n.setAttributeNS(i,l,C):n.setAttribute(l,C)}}(n[11],m,h,t.value,i,o,l)}function p_(t,n,i,o,l,h){const m=h[n];if(null!==m){const C=o.setInput;for(let R=0;R<m.length;){const j=m[R++],re=m[R++],Ae=m[R++];null!==C?o.setInput(i,Ae,j,re):i[re]=Ae}}}function Dp(t,n){let i=null,o=0;for(;o<n.length;){const l=n[o];if(0!==l)if(5!==l){if("number"==typeof l)break;t.hasOwnProperty(l)&&(null===i&&(i=[]),i.push(l,t[l],n[o+1])),o+=2}else o+=2;else o+=4}return i}function Qh(t,n,i,o){return new Array(t,!0,!1,n,null,0,o,i,null,null)}function Cm(t,n){const i=bn(n,t);if(Qr(i)){const o=i[1];80&i[2]?Pu(o,i,o.template,i[8]):i[5]>0&&th(i)}}function th(t){for(let o=J(t);null!==o;o=xe(o))for(let l=10;l<o.length;l++){const h=o[l];if(1024&h[2]){const m=h[1];Pu(m,h,m.template,h[8])}else h[5]>0&&th(h)}const i=t[1].components;if(null!==i)for(let o=0;o<i.length;o++){const l=bn(i[o],t);Qr(l)&&l[5]>0&&th(l)}}function Sp(t,n){const i=bn(n,t),o=i[1];(function(t,n){for(let i=n.length;i<t.blueprint.length;i++)n.push(t.blueprint[i])})(o,i),ld(o,i,i[8])}function ku(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function gu(t){for(;t;){t[2]|=64;const n=y(t);if(kr(t)&&!n)return t;t=n}return null}function sc(t,n,i){const o=n[10];o.begin&&o.begin();try{Pu(t,n,t.template,i)}catch(l){throw Tm(n,l),l}finally{o.end&&o.end()}}function Rp(t){!function(t){for(let n=0;n<t.components.length;n++){const i=t.components[n],o=uu(i),l=o[1];Xd(l,o,l.template,i)}}(t[8])}function Mp(t,n,i){Ji(0),n(t,i)}const Op=(()=>Promise.resolve(null))();function Xh(t){return t[7]||(t[7]=[])}function Jh(t){return t.cleanup||(t.cleanup=[])}function Tm(t,n){const i=t[9],o=i?i.get(Co,null):null;o&&o.handleError(n)}function ef(t,n,i,o,l){for(let h=0;h<i.length;){const m=i[h++],C=i[h++],R=n[m],j=t.data[m];null!==j.setInput?j.setInput(R,l,o,C):R[C]=l}}function Hl(t,n,i){const o=q(n,t);!function(t,n,i){G(t)?t.setValue(n,i):n.textContent=i}(t[11],o,i)}function tf(t,n,i){let o=i?t.styles:null,l=i?t.classes:null,h=0;if(null!==n)for(let m=0;m<n.length;m++){const C=n[m];"number"==typeof C?h=C:1==h?l=Se(l,C):2==h&&(o=Se(o,C+": "+n[++m]+";"))}i?t.styles=o:t.stylesWithoutHost=o,i?t.classes=l:t.classesWithoutHost=l}const Oc=new ls("INJECTOR",-1);class Np{get(n,i=me){if(i===me){const o=new Error(`NullInjectorError: No provider for ${oe(n)}!`);throw o.name="NullInjectorError",o}return i}}const hd=new ls("Set Injector scope."),nh={},v_={};let Pp;function Am(){return void 0===Pp&&(Pp=new Np),Pp}function nf(t,n=null,i=null,o){return new Fp(t,i,n||Am(),o)}class Fp{constructor(n,i,o,l=null){this.parent=o,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];i&&vo(i,C=>this.processProvider(C,n,i)),vo([n],C=>this.processInjectorType(C,[],h)),this.records.set(Oc,Nc(void 0,this));const m=this.records.get(hd);this.scope=null!=m?m.value:null,this.source=l||("object"==typeof n?null:oe(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,i=me,o=En.Default){this.assertNotDestroyed();const l=xi(this),h=sr(void 0);try{if(!(o&En.SkipSelf)){let C=this.records.get(n);if(void 0===C){const R=("function"==typeof(t=n)||"object"==typeof t&&t instanceof ls)&&Hn(n);C=R&&this.injectableDefInScope(R)?Nc(Lp(n),nh):null,this.records.set(n,C)}if(null!=C)return this.hydrate(n,C)}return(o&En.Self?Am():this.parent).get(n,i=o&En.Optional&&i===me?null:i)}catch(m){if("NullInjectorError"===m.name){if((m[vt]=m[vt]||[]).unshift(oe(n)),l)throw m;return na(m,n,"R3InjectorError",this.source)}throw m}finally{sr(h),xi(l)}var t}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((o,l)=>n.push(oe(l))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(n,i,o){if(!(n=we(n)))return!1;let l=Rr(n);const h=null==l&&n.ngModule||void 0,m=void 0===h?n:h,C=-1!==o.indexOf(m);if(void 0!==h&&(l=Rr(h)),null==l)return!1;if(null!=l.imports&&!C){let re;o.push(m);try{vo(l.imports,Ae=>{this.processInjectorType(Ae,i,o)&&(void 0===re&&(re=[]),re.push(Ae))})}finally{}if(void 0!==re)for(let Ae=0;Ae<re.length;Ae++){const{ngModule:Ne,providers:et}=re[Ae];vo(et,yt=>this.processProvider(yt,Ne,et||mt))}}this.injectorDefTypes.add(m);const R=Xi(m)||(()=>new m);this.records.set(m,Nc(R,nh));const j=l.providers;if(null!=j&&!C){const re=n;vo(j,Ae=>this.processProvider(Ae,re,j))}return void 0!==h&&void 0!==n.providers}processProvider(n,i,o){let l=oc(n=we(n))?n:we(n&&n.provide);const h=(t=n,sf(t)?Nc(void 0,t.useValue):Nc(rf(t),nh));var t;if(oc(n)||!0!==n.multi)this.records.get(l);else{let m=this.records.get(l);m||(m=Nc(void 0,nh,!0),m.factory=()=>Ho(m.multi),this.records.set(l,m)),l=n,m.multi.push(n)}this.records.set(l,h)}hydrate(n,i){return i.value===nh&&(i.value=v_,i.value=i.factory()),"object"==typeof i.value&&i.value&&null!==(t=i.value)&&"object"==typeof t&&"function"==typeof t.ngOnDestroy&&this.onDestroy.add(i.value),i.value;var t}injectableDefInScope(n){if(!n.providedIn)return!1;const i=we(n.providedIn);return"string"==typeof i?"any"===i||i===this.scope:this.injectorDefTypes.has(i)}}function Lp(t){const n=Hn(t),i=null!==n?n.factory:Xi(t);if(null!==i)return i;if(t instanceof ls)throw new Error(`Token ${oe(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const n=t.length;if(n>0){const o=Io(n,"?");throw new Error(`Can't resolve all parameters for ${oe(t)}: (${o.join(", ")}).`)}const i=function(t){const n=t&&(t[Sr]||t[Gn]);if(n){const i=function(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${i}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${i}" class.`),n}return null}(t);return null!==i?()=>i.factory(t):()=>new t}(t);throw new Error("unreachable")}function rf(t,n,i){let o;if(oc(t)){const l=we(t);return Xi(l)||Lp(l)}if(sf(t))o=()=>we(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))o=()=>t.useFactory(...Ho(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))o=()=>Qi(we(t.useExisting));else{const l=we(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return Xi(l)||Lp(l);o=()=>new l(...Ho(t.deps))}return o}function Nc(t,n,i=!1){return{factory:t,value:n,multi:i?[]:void 0}}function sf(t){return null!==t&&"object"==typeof t&&$r in t}function oc(t){return"function"==typeof t}const af=function(t,n,i){return function(t,n=null,i=null,o){const l=nf(t,n,i,o);return l._resolveInjectorDefTypes(),l}({name:i},n,t,i)};let Ps=(()=>{class t{static create(i,o){return Array.isArray(i)?af(i,o,""):af(i.providers,i.parent,i.name||"")}}return t.THROW_IF_NOT_FOUND=me,t.NULL=new Np,t.\u0275prov=Vt({token:t,providedIn:"any",factory:()=>Qi(Oc)}),t.__NG_ELEMENT_ID__=-1,t})();function Fm(t,n){Vr(uu(t)[1],Ti())}function Ol(t){let n=function(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),i=!0;const o=[t];for(;n;){let l;if(Xn(t))l=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Error("Directives cannot inherit Components");l=n.\u0275dir}if(l){if(i){o.push(l);const m=t;m.inputs=eg(t.inputs),m.declaredInputs=eg(t.declaredInputs),m.outputs=eg(t.outputs);const C=l.hostBindings;C&&tg(t,C);const R=l.viewQuery,j=l.contentQueries;if(R&&Lm(t,R),j&&k_(t,j),Ie(t.inputs,l.inputs),Ie(t.declaredInputs,l.declaredInputs),Ie(t.outputs,l.outputs),Xn(l)&&l.data.animation){const re=t.data;re.animation=(re.animation||[]).concat(l.data.animation)}}const h=l.features;if(h)for(let m=0;m<h.length;m++){const C=h[m];C&&C.ngInherit&&C(t),C===Ol&&(i=!1)}}n=Object.getPrototypeOf(n)}!function(t){let n=0,i=null;for(let o=t.length-1;o>=0;o--){const l=t[o];l.hostVars=n+=l.hostVars,l.hostAttrs=ua(l.hostAttrs,i=ua(i,l.hostAttrs))}}(o)}function eg(t){return t===nr?{}:t===mt?[]:t}function Lm(t,n){const i=t.viewQuery;t.viewQuery=i?(o,l)=>{n(o,l),i(o,l)}:n}function k_(t,n){const i=t.contentQueries;t.contentQueries=i?(o,l,h)=>{n(o,l,h),i(o,l,h)}:n}function tg(t,n){const i=t.hostBindings;t.hostBindings=i?(o,l)=>{n(o,l),i(o,l)}:n}let ng=null;function pd(){if(!ng){const t=Yn.Symbol;if(t&&t.iterator)ng=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let i=0;i<n.length;++i){const o=n[i];"entries"!==o&&"size"!==o&&Map.prototype[o]===Map.prototype.entries&&(ng=o)}}}return ng}function oh(t){return!!ah(t)&&(Array.isArray(t)||!(t instanceof Map)&&pd()in t)}function ah(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function sa(t,n,i){return!Object.is(t[n],i)&&(t[n]=i,!0)}function gf(t,n,i,o){const l=hn();return sa(l,un(),n)&&(br(),pu(Y(),l,t,n,i,o)),gf}function uc(t,n,i,o){return sa(t,un(),i)?n+Re(i)+o:Gr}function ks(t,n,i,o,l,h,m,C){const R=hn(),j=br(),re=t+20,Ae=j.firstCreatePass?function(t,n,i,o,l,h,m,C,R){const j=n.consts,re=od(n,t,4,m||null,mi(j,C));Ip(n,i,re,mi(j,R)),Vr(n,re);const Ae=re.tViews=Wh(2,re,o,l,h,n.directiveRegistry,n.pipeRegistry,null,n.schemas,j);return null!==n.queries&&(n.queries.template(n,re),Ae.queries=n.queries.embeddedTView(re)),re}(re,j,R,n,i,o,l,h,m):j.data[re];ys(Ae,!1);const Ne=R[11].createComment("");Rh(j,R,Ne,Ae),Ws(Ne,R),ku(R,R[re]=Qh(Ne,R,Ne,Ae)),zn(Ae)&&gp(j,R,Ae),null!=m&&mp(R,Ae,C)}function ch(t,n=En.Default){const i=hn();return null===i?Qi(t,n):Xo(Ti(),i,we(t),n)}function ty(){throw new Error("invalid")}function fg(t,n,i){const o=hn();return sa(o,un(),n)&&Ua(br(),Y(),o,t,n,o[11],i,!1),fg}function bf(t,n,i,o,l){const m=l?"class":"style";ef(t,i,n.inputs[m],m,o)}function pg(t,n,i,o){const l=hn(),h=br(),m=20+t,C=l[11],R=l[m]=vr(C,n,rr.lFrame.currentNamespace),j=h.firstCreatePass?function(t,n,i,o,l,h,m){const C=n.consts,j=od(n,t,2,l,mi(C,h));return Ip(n,i,j,mi(C,m)),null!==j.attrs&&tf(j,j.attrs,!1),null!==j.mergedAttrs&&tf(j,j.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,j),j}(m,h,l,0,n,i,o):h.data[m];ys(j,!0);const re=j.mergedAttrs;null!==re&&Ea(C,R,re);const Ae=j.classes;null!==Ae&&hu(C,R,Ae);const Ne=j.styles;null!==Ne&&ep(C,R,Ne),64!=(64&j.flags)&&Rh(h,l,R,j),0===rr.lFrame.elementDepthCount&&Ws(R,l),rr.lFrame.elementDepthCount++,zn(j)&&(gp(h,l,j),function(t,n,i){if(an(n)){const l=n.directiveEnd;for(let h=n.directiveStart;h<l;h++){const m=t.data[h];m.contentQueries&&m.contentQueries(1,i[h],h)}}}(h,j,l)),null!==o&&mp(l,j)}function Cf(){let t=Ti();Vs()?Bs():(t=t.parent,ys(t,!1));const n=t;rr.lFrame.elementDepthCount--;const i=br();i.firstCreatePass&&(Vr(i,t),an(t)&&i.queries.elementEnd(t)),null!=n.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(n)&&bf(i,n,hn(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(n)&&bf(i,n,hn(),n.stylesWithoutHost,!1)}function ny(t,n,i,o){pg(t,n,i,o),Cf()}function gg(){return hn()}function wf(t){return!!t&&"function"==typeof t.then}function mg(t){return!!t&&"function"==typeof t.subscribe}const dh=mg;function wd(t,n,i,o){const l=hn(),h=br(),m=Ti();return function(t,n,i,o,l,h,m,C){const R=zn(o),re=t.firstCreatePass&&Jh(t),Ae=n[8],Ne=Xh(n);let et=!0;if(3&o.type||C){const Ot=B(o,n),Pn=C?C(Ot):Ot,gn=Ne.length,Or=C?oi=>C(qe(oi[o.index])):o.index;if(G(i)){let oi=null;if(!C&&R&&(oi=function(t,n,i,o){const l=t.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const m=l[h];if(m===i&&l[h+1]===o){const C=n[7],R=l[h+2];return C.length>R?C[R]:null}"string"==typeof m&&(h+=2)}return null}(t,n,l,o.index)),null!==oi)(oi.__ngLastListenerFn__||oi).__ngNextListenerFn__=h,oi.__ngLastListenerFn__=h,et=!1;else{h=Vu(o,n,Ae,h,!1);const ki=i.listen(Pn,l,h);Ne.push(h,ki),re&&re.push(l,Or,gn,gn+1)}}else h=Vu(o,n,Ae,h,!0),Pn.addEventListener(l,h,m),Ne.push(h),re&&re.push(l,Or,gn,m)}else h=Vu(o,n,Ae,h,!1);const yt=o.outputs;let Kt;if(et&&null!==yt&&(Kt=yt[l])){const Ot=Kt.length;if(Ot)for(let Pn=0;Pn<Ot;Pn+=2){const ma=n[Kt[Pn]][Kt[Pn+1]].subscribe(h),_u=Ne.length;Ne.push(h,ma),re&&re.push(l,o.index,_u,-(_u+1))}}}(h,l,l[11],m,t,n,!!i,o),wd}function Dd(t,n,i,o){try{return!1!==i(o)}catch(l){return Tm(t,l),!1}}function Vu(t,n,i,o,l){return function h(m){if(m===Function)return o;const C=2&t.flags?bn(t.index,n):n;0==(32&n[2])&&gu(C);let R=Dd(n,0,o,m),j=h.__ngNextListenerFn__;for(;j;)R=Dd(n,0,j,m)&&R,j=j.__ngNextListenerFn__;return l&&!1===R&&(m.preventDefault(),m.returnValue=!1),R}}function ly(t=1){return function(t){return(rr.lFrame.contextLView=function(t,n){for(;t>0;)n=n[15],t--;return n}(t,rr.lFrame.contextLView))[8]}(t)}function J_(t,n){let i=null;const o=function(t){const n=t.attrs;if(null!=n){const i=n.indexOf(5);if(0==(1&i))return n[i+1]}return null}(t);for(let l=0;l<n.length;l++){const h=n[l];if("*"!==h){if(null===o?tm(t,h,!0):nm(o,h))return l}else i=l}return i}function uy(t){const n=hn()[16][6];if(!n.projection){const o=n.projection=Io(t?t.length:1,null),l=o.slice();let h=n.child;for(;null!==h;){const m=t?J_(h,t):0;null!==m&&(l[m]?l[m].projectionNext=h:o[m]=h,l[m]=h),h=h.next}}}function Bu(t,n=0,i){const o=hn(),l=br(),h=od(l,20+t,16,null,i||null);null===h.projection&&(h.projection=n),Bs(),64!=(64&h.flags)&&function(t,n,i){Jf(n[11],0,n,i,Kg(t,i,n),Xf(i.parent||n[6],i,n))}(l,o,h)}function yg(t,n,i){return _g(t,"",n,"",i),yg}function _g(t,n,i,o,l){const h=hn(),m=uc(h,n,i,o);return m!==Gr&&Ua(br(),Y(),h,t,m,h[11],l,!1),_g}function ev(t,n,i,o,l){const h=t[i+1],m=null===n;let C=o?Ul(h):jl(h),R=!1;for(;0!==C&&(!1===R||m);){const re=t[C+1];N0(t[C],n)&&(R=!0,t[C+1]=o?ip(re):rp(re)),C=o?Ul(re):jl(re)}R&&(t[i+1]=o?rp(h):ip(h))}function N0(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&Pa(t,n)>=0}function a(t,n){return function(t,n,i,o){const l=hn(),h=br(),m=function(t){const n=rr.lFrame,i=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,i}(2);h.firstUpdatePass&&function(t,n,i,o){const l=t.data;if(null===l[i+1]){const h=l[N()],m=function(t,n){return n>=t.expandoStartIndex}(t,i);(function(t,n){return 0!=(t.flags&(n?16:32))})(h,o)&&null===n&&!m&&(n=!1),n=function(t,n,i,o){const l=function(t){const n=rr.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let h=o?n.residualClasses:n.residualStyles;if(null===l)0===(o?n.classBindings:n.styleBindings)&&(i=Pi(i=hr(null,t,n,i,o),n.attrs,o),h=null);else{const m=n.directiveStylingLast;if(-1===m||t[m]!==l)if(i=hr(l,t,n,i,o),null===h){let R=function(t,n,i){const o=i?n.classBindings:n.styleBindings;if(0!==jl(o))return t[Ul(o)]}(t,n,o);void 0!==R&&Array.isArray(R)&&(R=hr(null,t,n,R[1],o),R=Pi(R,n.attrs,o),function(t,n,i,o){t[Ul(i?n.classBindings:n.styleBindings)]=o}(t,n,o,R))}else h=function(t,n,i){let o;const l=n.directiveEnd;for(let h=1+n.directiveStylingLast;h<l;h++)o=Pi(o,t[h].hostAttrs,i);return Pi(o,n.attrs,i)}(t,n,o)}return void 0!==h&&(o?n.residualClasses=h:n.residualStyles=h),i}(l,h,n,o),function(t,n,i,o,l,h){let m=h?n.classBindings:n.styleBindings,C=Ul(m),R=jl(m);t[o]=i;let re,j=!1;if(Array.isArray(i)){const Ae=i;re=Ae[1],(null===re||Pa(Ae,re)>0)&&(j=!0)}else re=i;if(l)if(0!==R){const Ne=Ul(t[C+1]);t[o+1]=zd(Ne,C),0!==Ne&&(t[Ne+1]=Fo(t[Ne+1],o)),t[C+1]=function(t,n){return 131071&t|n<<17}(t[C+1],o)}else t[o+1]=zd(C,0),0!==C&&(t[C+1]=Fo(t[C+1],o)),C=o;else t[o+1]=zd(R,0),0===C?C=o:t[R+1]=Fo(t[R+1],o),R=o;j&&(t[o+1]=rp(t[o+1])),ev(t,re,o,!0),ev(t,re,o,!1),function(t,n,i,o,l){const h=l?t.residualClasses:t.residualStyles;null!=h&&"string"==typeof n&&Pa(h,n)>=0&&(i[o+1]=ip(i[o+1]))}(n,re,t,o,h),m=zd(C,R),h?n.classBindings=m:n.styleBindings=m}(l,h,n,i,m,o)}}(h,t,m,o),n!==Gr&&sa(l,m,n)&&function(t,n,i,o,l,h,m,C){if(!(3&n.type))return;const R=t.data,j=R[C+1];Lo(function(t){return 1==(1&t)}(j)?ns(R,n,i,l,jl(j),m):void 0)||(Lo(h)||function(t){return 2==(2&t)}(j)&&(h=ns(R,null,i,l,C,m)),function(t,n,i,o,l){const h=G(t);if(n)l?h?t.addClass(i,o):i.classList.add(o):h?t.removeClass(i,o):i.classList.remove(o);else{let m=-1===o.indexOf("-")?void 0:$l.DashCase;if(null==l)h?t.removeStyle(i,o,m):i.style.removeProperty(o);else{const C="string"==typeof l&&l.endsWith("!important");C&&(l=l.slice(0,-10),m|=$l.Important),h?t.setStyle(i,o,l,m):i.style.setProperty(o,l,C?"important":"")}}}(o,m,q(N(),i),l,h))}(h,h.data[N()],l,l[11],t,l[m+1]=function(t,n){return null==t||("string"==typeof n?t+=n:"object"==typeof t&&(t=oe(Ka(t)))),t}(n,i),o,m)}(t,n,null,!0),a}function hr(t,n,i,o,l){let h=null;const m=i.directiveEnd;let C=i.directiveStylingLast;for(-1===C?C=i.directiveStart:C++;C<m&&(h=n[C],o=Pi(o,h.hostAttrs,l),h!==t);)C++;return null!==t&&(i.directiveStylingLast=C),o}function Pi(t,n,i){const o=i?1:2;let l=-1;if(null!==n)for(let h=0;h<n.length;h++){const m=n[h];"number"==typeof m?l=m:l===o&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),po(t,m,!!i||n[++h]))}return void 0===t?null:t}function ns(t,n,i,o,l,h){const m=null===n;let C;for(;l>0;){const R=t[l],j=Array.isArray(R),re=j?R[1]:R,Ae=null===re;let Ne=i[l+1];Ne===Gr&&(Ne=Ae?mt:void 0);let et=Ae?ea(Ne,o):re===o?Ne:void 0;if(j&&!Lo(et)&&(et=ea(R,o)),Lo(et)&&(C=et,m))return C;const yt=t[l+1];l=m?Ul(yt):jl(yt)}if(null!==n){let R=h?n.residualClasses:n.residualStyles;null!=R&&(C=ea(R,o))}return C}function Lo(t){return void 0!==t}function F0(t,n=""){const i=hn(),o=br(),l=t+20,h=o.firstCreatePass?od(o,l,1,n,null):o.data[l],m=i[l]=function(t,n){return G(t)?t.createText(n):t.createTextNode(n)}(i[11],n);Rh(o,i,m,h),ys(h,!1)}function sv(t){return by("",t,""),sv}function by(t,n,i){const o=hn(),l=uc(o,t,n,i);return l!==Gr&&Hl(o,N(),l),by}function ov(t,n,i){const o=hn();return sa(o,un(),n)&&Ua(br(),Y(),o,t,n,o[11],i,!0),ov}const fh=void 0;var oC=["en",[["a","p"],["AM","PM"],fh],[["AM","PM"],fh,fh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],fh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],fh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",fh,"{1} 'at' {0}",fh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const n=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===i?1:5}];let Df={};function av(t){const n=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let i=nE(n);if(i)return i;const o=n.split("-")[0];if(i=nE(o),i)return i;if("en"===o)return oC;throw new Error(`Missing locale data for the locale "${t}".`)}function tE(t){return av(t)[Yr.PluralCase]}function nE(t){return t in Df||(Df[t]=Yn.ng&&Yn.ng.common&&Yn.ng.common.locales&&Yn.ng.common.locales[t]),Df[t]}var Yr=(()=>((Yr=Yr||{})[Yr.LocaleId=0]="LocaleId",Yr[Yr.DayPeriodsFormat=1]="DayPeriodsFormat",Yr[Yr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Yr[Yr.DaysFormat=3]="DaysFormat",Yr[Yr.DaysStandalone=4]="DaysStandalone",Yr[Yr.MonthsFormat=5]="MonthsFormat",Yr[Yr.MonthsStandalone=6]="MonthsStandalone",Yr[Yr.Eras=7]="Eras",Yr[Yr.FirstDayOfWeek=8]="FirstDayOfWeek",Yr[Yr.WeekendRange=9]="WeekendRange",Yr[Yr.DateFormat=10]="DateFormat",Yr[Yr.TimeFormat=11]="TimeFormat",Yr[Yr.DateTimeFormat=12]="DateTimeFormat",Yr[Yr.NumberSymbols=13]="NumberSymbols",Yr[Yr.NumberFormats=14]="NumberFormats",Yr[Yr.CurrencyCode=15]="CurrencyCode",Yr[Yr.CurrencySymbol=16]="CurrencySymbol",Yr[Yr.CurrencyName=17]="CurrencyName",Yr[Yr.Currencies=18]="Currencies",Yr[Yr.Directionality=19]="Directionality",Yr[Yr.PluralCase=20]="PluralCase",Yr[Yr.ExtraData=21]="ExtraData",Yr))();const Cy="en-US";let rE=Cy;function lv(t){tt(t,"Expected localeId to be defined"),"string"==typeof t&&(rE=t.toLowerCase().replace(/_/g,"-"))}function dv(t,n,i,o,l){if(t=we(t),Array.isArray(t))for(let h=0;h<t.length;h++)dv(t[h],n,i,o,l);else{const h=br(),m=hn();let C=oc(t)?t:we(t.provide),R=rf(t);const j=Ti(),re=1048575&j.providerIndexes,Ae=j.directiveStart,Ne=j.providerIndexes>>20;if(oc(t)||!t.multi){const et=new Kn(R,l,ch),yt=fv(C,n,l?re:re+Ne,Ae);-1===yt?(pi(ut(j,m),h,C),hv(h,t,n.length),n.push(C),j.directiveStart++,j.directiveEnd++,l&&(j.providerIndexes+=1048576),i.push(et),m.push(et)):(i[yt]=et,m[yt]=et)}else{const et=fv(C,n,re+Ne,Ae),yt=fv(C,n,re,re+Ne),Kt=et>=0&&i[et],Ot=yt>=0&&i[yt];if(l&&!Ot||!l&&!Kt){pi(ut(j,m),h,C);const Pn=function(t,n,i,o,l){const h=new Kn(t,i,ch);return h.multi=[],h.index=n,h.componentProviders=0,SE(h,l,o&&!i),h}(l?rw:nw,i.length,l,o,R);!l&&Ot&&(i[yt].providerFactory=Pn),hv(h,t,n.length,0),n.push(C),j.directiveStart++,j.directiveEnd++,l&&(j.providerIndexes+=1048576),i.push(Pn),m.push(Pn)}else hv(h,t,et>-1?et:yt,SE(i[l?yt:et],R,!l&&o));!l&&o&&Ot&&i[yt].componentProviders++}}}function hv(t,n,i,o){const l=oc(n);if(l||function(t){return!!t.useClass}(n)){const m=(n.useClass||n).prototype.ngOnDestroy;if(m){const C=t.destroyHooks||(t.destroyHooks=[]);if(!l&&n.multi){const R=C.indexOf(i);-1===R?C.push(i,[o,m]):C[R+1].push(o,m)}else C.push(i,m)}}}function SE(t,n,i){return i&&t.componentProviders++,t.multi.push(n)-1}function fv(t,n,i,o){for(let l=i;l<o;l++)if(n[l]===t)return l;return-1}function nw(t,n,i,o){return pv(this.multi,[])}function rw(t,n,i,o){const l=this.multi;let h;if(this.providerFactory){const m=this.providerFactory.componentProviders,C=H(i,i[1],this.providerFactory.index,o);h=C.slice(0,m),pv(l,h);for(let R=m;R<C.length;R++)h.push(C[R])}else h=[],pv(l,h);return h}function pv(t,n){for(let i=0;i<t.length;i++)n.push((0,t[i])());return n}function AE(t,n=[]){return i=>{i.providersResolver=(o,l)=>function(t,n,i){const o=br();if(o.firstCreatePass){const l=Xn(t);dv(i,o.data,o.blueprint,l,!0),dv(n,o.data,o.blueprint,l,!1)}}(o,l?l(t):t,n)}}class xE{}const ME="ngComponent";class ow{resolveComponentFactory(n){throw function(t){const n=Error(`No component factory found for ${oe(t)}. Did you add it to @NgModule.entryComponents?`);return n[ME]=t,n}(n)}}let Sf=(()=>{class t{}return t.NULL=new ow,t})();function Ay(...t){}function Af(t,n){return new pc(B(t,n))}const uw=function(){return Af(Ti(),hn())};let pc=(()=>{class t{constructor(i){this.nativeElement=i}}return t.__NG_ELEMENT_ID__=uw,t})();function OE(t){return t instanceof pc?t.nativeElement:t}class xy{}let cw=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>hw(),t})();const hw=function(){const t=hn(),i=bn(Ti().index,t);return function(t){return t[11]}(bt(i)?i:t)};let mv=(()=>{class t{}return t.\u0275prov=Vt({token:t,providedIn:"root",factory:()=>null}),t})();class NE{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const yv=new NE("12.2.16");class PE{constructor(){}supports(n){return oh(n)}create(n){return new mw(n)}}const gw=(t,n)=>n;class mw{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||gw}forEachItem(n){let i;for(i=this._itHead;null!==i;i=i._next)n(i)}forEachOperation(n){let i=this._itHead,o=this._removalsHead,l=0,h=null;for(;i||o;){const m=!o||i&&i.currentIndex<FE(o,l,h)?i:o,C=FE(m,l,h),R=m.currentIndex;if(m===o)l--,o=o._nextRemoved;else if(i=i._next,null==m.previousIndex)l++;else{h||(h=[]);const j=C-l,re=R-l;if(j!=re){for(let Ne=0;Ne<j;Ne++){const et=Ne<h.length?h[Ne]:h[Ne]=0,yt=et+Ne;re<=yt&&yt<j&&(h[Ne]=et+1)}h[m.previousIndex]=re-j}}C!==R&&n(m,C,R)}}forEachPreviousItem(n){let i;for(i=this._previousItHead;null!==i;i=i._nextPrevious)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachMovedItem(n){let i;for(i=this._movesHead;null!==i;i=i._nextMoved)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}forEachIdentityChange(n){let i;for(i=this._identityChangesHead;null!==i;i=i._nextIdentityChange)n(i)}diff(n){if(null==n&&(n=[]),!oh(n))throw new Error(`Error trying to diff '${oe(n)}'. Only arrays and iterables are allowed`);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let l,h,m,i=this._itHead,o=!1;if(Array.isArray(n)){this.length=n.length;for(let C=0;C<this.length;C++)h=n[C],m=this._trackByFn(C,h),null!==i&&Object.is(i.trackById,m)?(o&&(i=this._verifyReinsertion(i,h,m,C)),Object.is(i.item,h)||this._addIdentityChange(i,h)):(i=this._mismatch(i,h,m,C),o=!0),i=i._next}else l=0,function(t,n){if(Array.isArray(t))for(let i=0;i<t.length;i++)n(t[i]);else{const i=t[pd()]();let o;for(;!(o=i.next()).done;)n(o.value)}}(n,C=>{m=this._trackByFn(l,C),null!==i&&Object.is(i.trackById,m)?(o&&(i=this._verifyReinsertion(i,C,m,l)),Object.is(i.item,C)||this._addIdentityChange(i,C)):(i=this._mismatch(i,C,m,l),o=!0),i=i._next,l++}),this.length=l;return this._truncate(i),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,i,o,l){let h;return null===n?h=this._itTail:(h=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._reinsertAfter(n,h,l)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(o,l))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._moveAfter(n,h,l)):n=this._addAfter(new yw(i,o),h,l),n}_verifyReinsertion(n,i,o,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==h?n=this._reinsertAfter(h,n._prev,l):n.currentIndex!=l&&(n.currentIndex=l,this._addToMoves(n,l)),n}_truncate(n){for(;null!==n;){const i=n._next;this._addToRemovals(this._unlink(n)),n=i}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,i,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const l=n._prevRemoved,h=n._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(n,i,o),this._addToMoves(n,o),n}_moveAfter(n,i,o){return this._unlink(n),this._insertAfter(n,i,o),this._addToMoves(n,o),n}_addAfter(n,i,o){return this._insertAfter(n,i,o),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,i,o){const l=null===i?this._itHead:i._next;return n._next=l,n._prev=i,null===l?this._itTail=n:l._prev=n,null===i?this._itHead=n:i._next=n,null===this._linkedRecords&&(this._linkedRecords=new kE),this._linkedRecords.put(n),n.currentIndex=o,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const i=n._prev,o=n._next;return null===i?this._itHead=o:i._next=o,null===o?this._itTail=i:o._prev=i,n}_addToMoves(n,i){return n.previousIndex===i||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new kE),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,i){return n.item=i,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class yw{constructor(n,i){this.item=n,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class _w{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,i){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===i||i<=o.currentIndex)&&Object.is(o.trackById,n))return o;return null}remove(n){const i=n._prevDup,o=n._nextDup;return null===i?this._head=o:i._nextDup=o,null===o?this._tail=i:o._prevDup=i,null===this._head}}class kE{constructor(){this.map=new Map}put(n){const i=n.trackById;let o=this.map.get(i);o||(o=new _w,this.map.set(i,o)),o.add(n)}get(n,i){const l=this.map.get(n);return l?l.get(n,i):null}remove(n){const i=n.trackById;return this.map.get(i).remove(n)&&this.map.delete(i),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function FE(t,n,i){const o=t.previousIndex;if(null===o)return o;let l=0;return i&&o<i.length&&(l=i[o]),o+n+l}class LE{constructor(){}supports(n){return n instanceof Map||ah(n)}create(){return new vw}}class vw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let i;for(i=this._mapHead;null!==i;i=i._next)n(i)}forEachPreviousItem(n){let i;for(i=this._previousMapHead;null!==i;i=i._nextPrevious)n(i)}forEachChangedItem(n){let i;for(i=this._changesHead;null!==i;i=i._nextChanged)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}diff(n){if(n){if(!(n instanceof Map||ah(n)))throw new Error(`Error trying to diff '${oe(n)}'. Only maps and objects are allowed`)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(n,(o,l)=>{if(i&&i.key===l)this._maybeAddToChanges(i,o),this._appendAfter=i,i=i._next;else{const h=this._getOrCreateRecordForKey(l,o);i=this._insertBeforeOrAppend(i,h)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let o=i;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,i){if(n){const o=n._prev;return i._next=n,i._prev=o,n._prev=i,o&&(o._next=i),n===this._mapHead&&(this._mapHead=i),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(n,i){if(this._records.has(n)){const l=this._records.get(n);this._maybeAddToChanges(l,i);const h=l._prev,m=l._next;return h&&(h._next=m),m&&(m._prev=h),l._next=null,l._prev=null,l}const o=new Ew(n);return this._records.set(n,o),o.currentValue=i,this._addToAdditions(o),o}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,i){Object.is(i,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=i,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,i){n instanceof Map?n.forEach(i):Object.keys(n).forEach(o=>i(n[o],o))}}class Ew{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function VE(){return new Ry([new PE])}let Ry=(()=>{class t{constructor(i){this.factories=i}static create(i,o){if(null!=o){const l=o.factories.slice();i=i.concat(l)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||VE()),deps:[[t,new Va,new Ta]]}}find(i){const o=this.factories.find(l=>l.supports(i));if(null!=o)return o;throw new Error(`Cannot find a differ supporting object '${i}' of type '${function(t){return t.name||typeof t}(i)}'`)}}return t.\u0275prov=Vt({token:t,providedIn:"root",factory:VE}),t})();function BE(){return new My([new LE])}let My=(()=>{class t{constructor(i){this.factories=i}static create(i,o){if(o){const l=o.factories.slice();i=i.concat(l)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||BE()),deps:[[t,new Va,new Ta]]}}find(i){const o=this.factories.find(l=>l.supports(i));if(o)return o;throw new Error(`Cannot find a differ supporting object '${i}'`)}}return t.\u0275prov=Vt({token:t,providedIn:"root",factory:BE}),t})();function Oy(t,n,i,o,l=!1){for(;null!==i;){const h=n[i.index];if(null!==h&&o.push(qe(h)),At(h))for(let C=10;C<h.length;C++){const R=h[C],j=R[1].firstChild;null!==j&&Oy(R[1],R,j,o)}const m=i.type;if(8&m)Oy(t,n,i.child,o);else if(32&m){const C=f(i,n);let R;for(;R=C();)o.push(R)}else if(16&m){const C=Jc(n,i);if(Array.isArray(C))o.push(...C);else{const R=y(n[16]);Oy(R[1],R,C,o,!0)}}i=l?i.projectionNext:i.next}return o}class Dg{constructor(n,i){this._lView=n,this._cdRefInjectingView=i,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,i=n[1];return Oy(i,n,i.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(At(n)){const i=n[8],o=i?i.indexOf(this):-1;o>-1&&(xh(n,o),Eo(i,o))}this._attachedToViewContainer=!1}Zf(this._lView[1],this._lView)}onDestroy(n){Gh(this._lView[1],this._lView,null,n)}markForCheck(){gu(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){sc(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,n,i){$s(!0);try{sc(t,n,i)}finally{$s(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var n;this._appRef=null,nd(this._lView[1],n=this._lView,n[11],2,null,null)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=n}}class bw extends Dg{constructor(n){super(n),this._view=n}detectChanges(){Rp(this._view)}checkNoChanges(){!function(t){$s(!0);try{Rp(t)}finally{$s(!1)}}(this._view)}get context(){return null}}const ww=function(t){return function(t,n,i){if(Sn(t)&&!i){const o=bn(t.index,n);return new Dg(o,o)}return 47&t.type?new Dg(n[16],n):null}(Ti(),hn(),16==(16&t))};let Dw=(()=>{class t{}return t.__NG_ELEMENT_ID__=ww,t})();const Aw=[new LE],Rw=new Ry([new PE]),Mw=new My(Aw),Nw=function(){return Ny(Ti(),hn())};let Tg=(()=>{class t{}return t.__NG_ELEMENT_ID__=Nw,t})();const Pw=Tg,kw=class extends Pw{constructor(n,i,o){super(),this._declarationLView=n,this._declarationTContainer=i,this.elementRef=o}createEmbeddedView(n){const i=this._declarationTContainer.tViews,o=sd(this._declarationLView,i,n,16,null,i.declTNode,null,null,null,null);o[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(o[19]=h.createEmbeddedView(i)),ld(i,o,n),new Dg(o)}};function Ny(t,n){return 4&t.type?new kw(n,t,Af(t,n)):null}class ph{}class $E{}const Vw=function(){return HE(Ti(),hn())};let Py=(()=>{class t{}return t.__NG_ELEMENT_ID__=Vw,t})();const $w=Py,UE=class extends $w{constructor(n,i,o){super(),this._lContainer=n,this._hostTNode=i,this._hostLView=o}get element(){return Af(this._hostTNode,this._hostLView)}get injector(){return new ge(this._hostTNode,this._hostLView)}get parentInjector(){const n=Br(this._hostTNode,this._hostLView);if(rl(n)){const i=fr(n,this._hostLView),o=ba(n);return new ge(i[1].data[o+8],i)}return new ge(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const i=jE(this._lContainer);return null!==i&&i[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,i,o){const l=n.createEmbeddedView(i||{});return this.insert(l,o),l}createComponent(n,i,o,l,h){const m=o||this.parentInjector;if(!h&&null==n.ngModule&&m){const R=m.get(ph,null);R&&(h=R)}const C=n.create(m,l,void 0,h);return this.insert(C.hostView,i),C}insert(n,i){const o=n._lView,l=o[1];if(At(o[3])){const re=this.indexOf(n);if(-1!==re)this.detach(re);else{const Ae=o[3],Ne=new UE(Ae,Ae[6],Ae[3]);Ne.detach(Ne.indexOf(n))}}const h=this._adjustIndex(i),m=this._lContainer;!function(t,n,i,o){const l=10+o,h=i.length;o>0&&(i[l-1][4]=n),o<h-10?(n[4]=i[l],Oa(i,10+o,n)):(i.push(n),n[4]=null),n[3]=i;const m=n[17];null!==m&&i!==m&&function(t,n){const i=t[9];n[16]!==n[3][3][16]&&(t[2]=!0),null===i?t[9]=[n]:i.push(n)}(m,n);const C=n[19];null!==C&&C.insertView(t),n[2]|=128}(l,o,m,h);const C=ed(h,m),R=o[11],j=du(R,m[7]);return null!==j&&function(t,n,i,o,l,h){o[0]=l,o[6]=n,nd(t,o,i,1,l,h)}(l,m[6],R,o,j,C),n.attachToViewContainerRef(),Oa(_v(m),h,n),n}move(n,i){return this.insert(n,i)}indexOf(n){const i=jE(this._lContainer);return null!==i?i.indexOf(n):-1}remove(n){const i=this._adjustIndex(n,-1),o=xh(this._lContainer,i);o&&(Eo(_v(this._lContainer),i),Zf(o[1],o))}detach(n){const i=this._adjustIndex(n,-1),o=xh(this._lContainer,i);return o&&null!=Eo(_v(this._lContainer),i)?new Dg(o):null}_adjustIndex(n,i=0){return null==n?this.length+i:n}};function jE(t){return t[8]}function _v(t){return t[8]||(t[8]=[])}function HE(t,n){let i;const o=n[t.index];if(At(o))i=o;else{let l;if(8&t.type)l=qe(o);else{const h=n[11];l=h.createComment("");const m=B(t,n);Tc(h,du(h,m),l,function(t,n){return G(t)?t.nextSibling(n):n.nextSibling}(h,m),!1)}n[t.index]=i=Qh(o,n,l,t),ku(n,i)}return new UE(i,t,n)}const Of={};class uI extends Sf{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const i=Un(n);return new dI(i,this.ngModule)}}function cI(t){const n=[];for(let i in t)t.hasOwnProperty(i)&&n.push({propName:t[i],templateName:i});return n}const FD=new ls("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Bd});class dI extends xE{constructor(n,i){super(),this.componentDef=n,this.ngModule=i,this.componentType=n.type,this.selector=n.selectors.map(im).join(","),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!i}get inputs(){return cI(this.componentDef.inputs)}get outputs(){return cI(this.componentDef.outputs)}create(n,i,o,l){const h=(l=l||this.ngModule)?function(t,n){return{get:(i,o,l)=>{const h=t.get(i,Of,l);return h!==Of||o===Of?h:n.get(i,o,l)}}}(n,l.injector):n,m=h.get(xy,Q),C=h.get(mv,null),R=m.createRenderer(null,this.componentDef),j=this.componentDef.selectors[0][0]||"div",re=o?function(t,n,i){if(G(t))return t.selectRootElement(n,i===In.ShadowDom);let o="string"==typeof n?t.querySelector(n):n;return o.textContent="",o}(R,o,this.componentDef.encapsulation):vr(m.createRenderer(null,this.componentDef),j,function(t){const n=t.toLowerCase();return"svg"===n?"http://www.w3.org/2000/svg":"math"===n?"http://www.w3.org/1998/MathML/":null}(j)),Ae=this.componentDef.onPush?576:528,Ne=function(t,n){return{components:[],scheduler:t||Bd,clean:Op,playerHandler:n||null,flags:0}}(),et=Wh(0,null,null,1,0,null,null,null,null,null),yt=sd(null,et,Ne,Ae,null,null,m,R,C,h);let Kt,Ot;li(yt);try{const Pn=function(t,n,i,o,l,h){const m=i[1];i[20]=t;const R=od(m,20,2,"#host",null),j=R.mergedAttrs=n.hostAttrs;null!==j&&(tf(R,j,!0),null!==t&&(Ea(l,t,j),null!==R.classes&&hu(l,t,R.classes),null!==R.styles&&ep(l,t,R.styles)));const re=o.createRenderer(t,n),Ae=sd(i,mm(n),null,n.onPush?64:16,i[20],R,o,re,h||null,null);return m.firstCreatePass&&(pi(ut(R,i),m,n.type),Mc(m,R),Im(R,i.length,1)),ku(i,Ae),i[20]=Ae}(re,this.componentDef,yt,m,R);if(re)if(o)Ea(R,re,["ng-version",yv.full]);else{const{attrs:gn,classes:Or}=function(t){const n=[],i=[];let o=1,l=2;for(;o<t.length;){let h=t[o];if("string"==typeof h)2===l?""!==h&&n.push(h,t[++o]):8===l&&i.push(h);else{if(!Rl(l))break;l=h}o++}return{attrs:n,classes:i}}(this.componentDef.selectors[0]);gn&&Ea(R,re,gn),Or&&Or.length>0&&hu(R,re,Or.join(" "))}if(Ot=de(et,20),void 0!==i){const gn=Ot.projection=[];for(let Or=0;Or<this.ngContentSelectors.length;Or++){const oi=i[Or];gn.push(null!=oi?Array.from(oi):null)}}Kt=function(t,n,i,o,l){const h=i[1],m=function(t,n,i){const o=Ti();t.firstCreatePass&&(i.providersResolver&&i.providersResolver(i),wp(t,o,n,ad(t,n,1,null),i));const l=H(n,t,o.directiveStart,o);Ws(l,n);const h=B(o,n);return h&&Ws(h,n),l}(h,i,n);if(o.components.push(m),t[8]=m,l&&l.forEach(R=>R(m,n)),n.contentQueries){const R=Ti();n.contentQueries(1,m,R.directiveStart)}const C=Ti();return!h.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(w(C.index),Yh(i[1],C,0,C.directiveStart,C.directiveEnd,n),Zh(n,m)),m}(Pn,this.componentDef,yt,Ne,[Fm]),ld(et,yt,null)}finally{ao()}return new BD(this.componentType,Kt,Af(Ot,yt),yt,Ot)}}class BD extends class{}{constructor(n,i,o,l,h){super(),this.location=o,this._rootLView=l,this._tNode=h,this.instance=i,this.hostView=this.changeDetectorRef=new bw(l),this.componentType=n}get injector(){return new ge(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}const Nf=new Map;class jD extends ph{constructor(n,i){super(),this._parent=i,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new uI(this);const o=Er(n),l=n[wt]||null;l&&lv(l),this._bootstrapComponents=xl(o.bootstrap),this._r3Injector=nf(n,i,[{provide:ph,useValue:this},{provide:Sf,useValue:this.componentFactoryResolver}],oe(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,i=Ps.THROW_IF_NOT_FOUND,o=En.Default){return n===Ps||n===ph||n===Oc?this:this._r3Injector.get(n,i,o)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Mv extends $E{constructor(n){super(),this.moduleType=n,null!==Er(n)&&function(t){const n=new Set;!function i(o){const l=Er(o,!0),h=l.id;null!==h&&(function(t,n,i){if(n&&n!==i)throw new Error(`Duplicate module registered for ${t} - ${oe(n)} vs ${oe(n.name)}`)}(h,Nf.get(h),o),Nf.set(h,o));const m=xl(l.imports);for(const C of m)n.has(C)||(n.add(C),i(C))}(t)}(n)}create(n){return new jD(this.moduleType,n)}}function Ov(t){return n=>{setTimeout(t,void 0,n)}}const gc=class extends E.xQ{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,i,o){var l,h,m;let C=n,R=i||(()=>null),j=o;if(n&&"object"==typeof n){const Ae=n;C=null===(l=Ae.next)||void 0===l?void 0:l.bind(Ae),R=null===(h=Ae.error)||void 0===h?void 0:h.bind(Ae),j=null===(m=Ae.complete)||void 0===m?void 0:m.bind(Ae)}this.__isAsync&&(R=Ov(R),C&&(C=Ov(C)),j&&(j=Ov(j)));const re=super.subscribe({next:C,error:R,complete:j});return n instanceof O.w&&n.add(re),re}};function aT(){return this._results[pd()]()}class By{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const i=pd(),o=By.prototype;o[i]||(o[i]=aT)}get changes(){return this._changes||(this._changes=new gc)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,i){return this._results.reduce(n,i)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,i){const o=this;o.dirty=!1;const l=Es(n);(this._changesDetected=!function(t,n,i){if(t.length!==n.length)return!1;for(let o=0;o<t.length;o++){let l=t[o],h=n[o];if(i&&(l=i(l),h=i(h)),h!==l)return!1}return!0}(o._results,l,i))&&(o._results=l,o.length=l.length,o.last=l[this.length-1],o.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Nv{constructor(n){this.queryList=n,this.matches=null}clone(){return new Nv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Pv{constructor(n=[]){this.queries=n}createEmbeddedView(n){const i=n.queries;if(null!==i){const o=null!==n.contentQueries?n.contentQueries[0]:i.length,l=[];for(let h=0;h<o;h++){const m=i.getByIndex(h);l.push(this.queries[m.indexInDeclarationView].clone())}return new Pv(l)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let i=0;i<this.queries.length;i++)null!==SI(n,i).matches&&this.queries[i].setDirty()}}class vI{constructor(n,i,o=null){this.predicate=n,this.flags=i,this.read=o}}class kv{constructor(n=[]){this.queries=n}elementStart(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(n,i)}elementEnd(n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(n)}embeddedTView(n){let i=null;for(let o=0;o<this.length;o++){const l=null!==i?i.length:0,h=this.getByIndex(o).embeddedTView(n,l);h&&(h.indexInDeclarationView=o,null!==i?i.push(h):i=[h])}return null!==i?new kv(i):null}template(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].template(n,i)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Fv{constructor(n,i=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(n,i){this.isApplyingToNode(i)&&this.matchTNode(n,i)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,i){this.elementStart(n,i)}embeddedTView(n,i){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,i),new Fv(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const i=this._declarationNodeIndex;let o=n.parent;for(;null!==o&&8&o.type&&o.index!==i;)o=o.parent;return i===(null!==o?o.index:-1)}return this._appliesToNextNode}matchTNode(n,i){const o=this.metadata.predicate;if(Array.isArray(o))for(let l=0;l<o.length;l++){const h=o[l];this.matchTNodeWithReadOption(n,i,cT(i,h)),this.matchTNodeWithReadOption(n,i,T(i,n,h,!1,!1))}else o===Tg?4&i.type&&this.matchTNodeWithReadOption(n,i,-1):this.matchTNodeWithReadOption(n,i,T(i,n,o,!1,!1))}matchTNodeWithReadOption(n,i,o){if(null!==o){const l=this.metadata.read;if(null!==l)if(l===pc||l===Py||l===Tg&&4&i.type)this.addMatch(i.index,-2);else{const h=T(i,n,l,!1,!1);null!==h&&this.addMatch(i.index,h)}else this.addMatch(i.index,o)}}addMatch(n,i){null===this.matches?this.matches=[n,i]:this.matches.push(n,i)}}function cT(t,n){const i=t.localNames;if(null!==i)for(let o=0;o<i.length;o+=2)if(i[o]===n)return i[o+1];return null}function hT(t,n,i,o){return-1===i?function(t,n){return 11&t.type?Af(t,n):4&t.type?Ny(t,n):null}(n,t):-2===i?function(t,n,i){return i===pc?Af(n,t):i===Tg?Ny(n,t):i===Py?HE(n,t):void 0}(t,n,o):H(t,t[1],i,n)}function EI(t,n,i,o){const l=n[19].queries[o];if(null===l.matches){const h=t.data,m=i.matches,C=[];for(let R=0;R<m.length;R+=2){const j=m[R];C.push(j<0?null:hT(n,h[j],m[R+1],i.metadata.read))}l.matches=C}return l.matches}function Lv(t,n,i,o){const l=t.queries.getByIndex(i),h=l.matches;if(null!==h){const m=EI(t,n,l,i);for(let C=0;C<h.length;C+=2){const R=h[C];if(R>0)o.push(m[C/2]);else{const j=h[C+1],re=n[-R];for(let Ae=10;Ae<re.length;Ae++){const Ne=re[Ae];Ne[17]===Ne[3]&&Lv(Ne[1],Ne,j,o)}if(null!==re[9]){const Ae=re[9];for(let Ne=0;Ne<Ae.length;Ne++){const et=Ae[Ne];Lv(et[1],et,j,o)}}}}}return o}function II(t){const n=hn(),i=br(),o=hs();Ji(o+1);const l=SI(i,o);if(t.dirty&&cr(n)===(2==(2&l.metadata.flags))){if(null===l.matches)t.reset([]);else{const h=l.crossesNgTemplate?Lv(i,n,o,[]):EI(i,n,l,o);t.reset(h,OE),t.notifyOnChanges()}return!0}return!1}function bI(t,n,i){const o=br();o.firstCreatePass&&(TI(o,new vI(t,n,i),-1),2==(2&n)&&(o.staticViewQueries=!0)),DI(o,hn(),n)}function CI(t,n,i,o){const l=br();if(l.firstCreatePass){const h=Ti();TI(l,new vI(n,i,o),h.index),function(t,n){const i=t.contentQueries||(t.contentQueries=[]);n!==(i.length?i[i.length-1]:-1)&&i.push(t.queries.length-1,n)}(l,t),2==(2&i)&&(l.staticContentQueries=!0)}DI(l,hn(),i)}function wI(){return t=hn(),n=hs(),t[19].queries[n].queryList;var t,n}function DI(t,n,i){const o=new By(4==(4&i));Gh(t,n,o,o.destroy),null===n[19]&&(n[19]=new Pv),n[19].queries.push(new Nv(o))}function TI(t,n,i){null===t.queries&&(t.queries=new kv),t.queries.track(new Fv(n,i))}function SI(t,n){return t.queries.getByIndex(n)}const PT=xo("Output",t=>({bindingPropertyName:t})),kT=xo("HostListener",(t,n)=>({eventName:t,args:n})),Hv=new ls("Application Initializer");let kf=(()=>{class t{constructor(i){this.appInits=i,this.resolve=Ay,this.reject=Ay,this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,l)=>{this.resolve=o,this.reject=l})}runInitializers(){if(this.initialized)return;const i=[],o=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(wf(h))i.push(h);else if(dh(h)){const m=new Promise((C,R)=>{h.subscribe({complete:C,error:R})});i.push(m)}}Promise.all(i).then(()=>{o()}).catch(l=>{this.reject(l)}),0===i.length&&o(),this.initialized=!0}}return t.\u0275fac=function(i){return new(i||t)(Qi(Hv,8))},t.\u0275prov=Vt({token:t,factory:t.\u0275fac}),t})();const GI=new ls("AppId"),GT={provide:GI,useFactory:function(){return`${Wv()}${Wv()}${Wv()}`},deps:[]};function Wv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const zI=new ls("Platform Initializer"),qI=new ls("Platform ID"),YI=new ls("appBootstrapListener");let KI=(()=>{class t{log(i){console.log(i)}warn(i){console.warn(i)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=Vt({token:t,factory:t.\u0275fac}),t})();const jy=new ls("LocaleId"),ZI=new ls("DefaultCurrencyCode");class qT{constructor(n,i){this.ngModuleFactory=n,this.componentFactories=i}}const Gv=function(t){return new Mv(t)},YT=Gv,KT=function(t){return Promise.resolve(Gv(t))},QI=function(t){const n=Gv(t),o=xl(Er(t).declarations).reduce((l,h)=>{const m=Un(h);return m&&l.push(new dI(m)),l},[]);return new qT(n,o)},ZT=QI,QT=function(t){return Promise.resolve(QI(t))};let Vg=(()=>{class t{constructor(){this.compileModuleSync=YT,this.compileModuleAsync=KT,this.compileModuleAndAllComponentsSync=ZT,this.compileModuleAndAllComponentsAsync=QT}clearCache(){}clearCacheFor(i){}getModuleId(i){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=Vt({token:t,factory:t.\u0275fac}),t})();const eS=(()=>Promise.resolve(0))();function zv(t){"undefined"==typeof Zone?eS.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Yl{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new gc(!1),this.onMicrotaskEmpty=new gc(!1),this.onStable=new gc(!1),this.onError=new gc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!o&&i,l.shouldCoalesceRunChangeDetection=o,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function(){let t=Yn.requestAnimationFrame,n=Yn.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&n){const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i);const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function(t){const n=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Yn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Yv(t),t.isCheckStableRunning=!0,qv(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Yv(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,o,l,h,m,C)=>{try{return XI(t),i.invokeTask(l,h,m,C)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||t.shouldCoalesceRunChangeDetection)&&n(),JI(t)}},onInvoke:(i,o,l,h,m,C,R)=>{try{return XI(t),i.invoke(l,h,m,C,R)}finally{t.shouldCoalesceRunChangeDetection&&n(),JI(t)}},onHasTask:(i,o,l,h)=>{i.hasTask(l,h),o===l&&("microTask"==h.change?(t._hasPendingMicrotasks=h.microTask,Yv(t),qv(t)):"macroTask"==h.change&&(t.hasPendingMacrotasks=h.macroTask))},onHandleError:(i,o,l,h)=>(i.handleError(l,h),t.runOutsideAngular(()=>t.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Yl.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Yl.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,i,o){return this._inner.run(n,i,o)}runTask(n,i,o,l){const h=this._inner,m=h.scheduleEventTask("NgZoneEvent: "+l,n,nS,Ay,Ay);try{return h.runTask(m,i,o)}finally{h.cancelTask(m)}}runGuarded(n,i,o){return this._inner.runGuarded(n,i,o)}runOutsideAngular(n){return this._outer.run(n)}}const nS={};function qv(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Yv(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function XI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function JI(t){t._nesting--,qv(t)}class sS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new gc,this.onMicrotaskEmpty=new gc,this.onStable=new gc,this.onError=new gc}run(n,i,o){return n.apply(i,o)}runGuarded(n,i,o){return n.apply(i,o)}runOutsideAngular(n){return n()}runTask(n,i,o,l){return n.apply(i,o)}}let eb=(()=>{class t{constructor(i){this._ngZone=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yl.assertNotInAngularZone(),zv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())zv(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(i)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,o,l){let h=-1;o&&o>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==h),i(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:i,timeoutId:h,updateCb:l})}whenStable(i,o,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,o,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(i,o,l){return[]}}return t.\u0275fac=function(i){return new(i||t)(Qi(Yl))},t.\u0275prov=Vt({token:t,factory:t.\u0275fac}),t})(),tb=(()=>{class t{constructor(){this._applications=new Map,Kv.addToWindow(this)}registerApplication(i,o){this._applications.set(i,o)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,o=!0){return Kv.findTestabilityInTree(this,i,o)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=Vt({token:t,factory:t.\u0275fac}),t})();class oS{addToWindow(n){}findTestabilityInTree(n,i,o){return null}}function aS(t){Kv=t}let Kv=new oS,nb=!0,rb=!1;function Zv(){return rb=!0,nb}function lS(){if(rb)throw new Error("Cannot enable prod mode after platform setup.");nb=!1}let ju;const ib=new ls("AllowMultipleToken");class gS{constructor(n,i){this.name=n,this.token=i}}function sb(t,n,i=[]){const o=`Platform: ${n}`,l=new ls(o);return(h=[])=>{let m=ob();if(!m||m.injector.get(ib,!1))if(t)t(i.concat(h).concat({provide:l,useValue:!0}));else{const C=i.concat(h).concat({provide:l,useValue:!0},{provide:hd,useValue:"platform"});!function(t){if(ju&&!ju.destroyed&&!ju.injector.get(ib,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ju=t.get(ab);const n=t.get(zI,null);n&&n.forEach(i=>i())}(Ps.create({providers:C,name:o}))}return function(t){const n=ob();if(!n)throw new Error("No platform exists!");if(!n.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return n}(l)}}function ob(){return ju&&!ju.destroyed?ju:null}let ab=(()=>{class t{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,o){const C=function(t,n){let i;return i="noop"===t?new sS:("zone.js"===t?void 0:t)||new Yl({enableLongStackTrace:Zv(),shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),i}(o?o.ngZone:void 0,{ngZoneEventCoalescing:o&&o.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:o&&o.ngZoneRunCoalescing||!1}),R=[{provide:Yl,useValue:C}];return C.run(()=>{const j=Ps.create({providers:R,parent:this.injector,name:i.moduleType.name}),re=i.create(j),Ae=re.injector.get(Co,null);if(!Ae)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return C.runOutsideAngular(()=>{const Ne=C.onError.subscribe({next:et=>{Ae.handleError(et)}});re.onDestroy(()=>{Qv(this._modules,re),Ne.unsubscribe()})}),function(t,n,i){try{const o=i();return wf(o)?o.catch(l=>{throw n.runOutsideAngular(()=>t.handleError(l)),l}):o}catch(o){throw n.runOutsideAngular(()=>t.handleError(o)),o}}(Ae,C,()=>{const Ne=re.injector.get(kf);return Ne.runInitializers(),Ne.donePromise.then(()=>(lv(re.injector.get(jy,Cy)||Cy),this._moduleDoBootstrap(re),re))})})}bootstrapModule(i,o=[]){const l=lb({},o);return function(t,n,i){const o=new Mv(i);return Promise.resolve(o)}(0,0,i).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(i){const o=i.injector.get(Bg);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(l=>o.bootstrap(l));else{if(!i.instance.ngDoBootstrap)throw new Error(`The module ${oe(i.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);i.instance.ngDoBootstrap(o)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(i){return new(i||t)(Qi(Ps))},t.\u0275prov=Vt({token:t,factory:t.\u0275fac}),t})();function lb(t,n){return Array.isArray(n)?n.reduce(lb,t):Object.assign(Object.assign({},t),n)}let Bg=(()=>{class t{constructor(i,o,l,h,m){this._zone=i,this._injector=o,this._exceptionHandler=l,this._componentFactoryResolver=h,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const C=new ie.y(j=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{j.next(this._stable),j.complete()})}),R=new ie.y(j=>{let re;this._zone.runOutsideAngular(()=>{re=this._zone.onStable.subscribe(()=>{Yl.assertNotInAngularZone(),zv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,j.next(!0))})})});const Ae=this._zone.onUnstable.subscribe(()=>{Yl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{j.next(!1)}))});return()=>{re.unsubscribe(),Ae.unsubscribe()}});this.isStable=(0,L.T)(C,R.pipe((0,ue.B)()))}bootstrap(i,o){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let l;l=i instanceof xE?i:this._componentFactoryResolver.resolveComponentFactory(i),this.componentTypes.push(l.componentType);const h=function(t){return t.isBoundToModule}(l)?void 0:this._injector.get(ph),C=l.create(Ps.NULL,[],o||l.selector,h),R=C.location.nativeElement,j=C.injector.get(eb,null),re=j&&C.injector.get(tb);return j&&re&&re.registerApplication(R,j),C.onDestroy(()=>{this.detachView(C.hostView),Qv(this.components,C),re&&re.unregisterApplication(R)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(i))}finally{this._runningTick=!1}}attachView(i){const o=i;this._views.push(o),o.attachToAppRef(this)}detachView(i){const o=i;Qv(this._views,o),o.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i),this._injector.get(YI,[]).concat(this._bootstrapListeners).forEach(l=>l(i))}ngOnDestroy(){this._views.slice().forEach(i=>i.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(i){return new(i||t)(Qi(Yl),Qi(Ps),Qi(Co),Qi(Sf),Qi(kf))},t.\u0275prov=Vt({token:t,factory:t.\u0275fac}),t})();function Qv(t,n){const i=t.indexOf(n);i>-1&&t.splice(i,1)}class IS{}class CS{}const wS={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let DS=(()=>{class t{constructor(i,o){this._compiler=i,this._config=o||wS}load(i){return this.loadAndCompile(i)}loadAndCompile(i){let[o,l]=i.split("#");return void 0===l&&(l="default"),F(8255)(o).then(h=>h[l]).then(h=>hb(h,o,l)).then(h=>this._compiler.compileModuleAsync(h))}loadFactory(i){let[o,l]=i.split("#"),h="NgFactory";return void 0===l&&(l="default",h=""),F(8255)(this._config.factoryPathPrefix+o+this._config.factoryPathSuffix).then(m=>m[l+h]).then(m=>hb(m,o,l))}}return t.\u0275fac=function(i){return new(i||t)(Qi(Vg),Qi(CS,8))},t.\u0275prov=Vt({token:t,factory:t.\u0275fac}),t})();function hb(t,n,i){if(!t)throw new Error(`Cannot find '${i}' in '${n}'`);return t}const NS=function(t){return null},kS=sb(null,"core",[{provide:qI,useValue:"unknown"},{provide:ab,deps:[Ps]},{provide:tb,deps:[]},{provide:KI,deps:[]}]),$S=[{provide:Bg,useClass:Bg,deps:[Yl,Ps,Co,Sf,kf]},{provide:FD,deps:[Yl],useFactory:function(t){let n=[];return t.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(i){n.push(i)}}},{provide:kf,useClass:kf,deps:[[new Ta,Hv]]},{provide:Vg,useClass:Vg,deps:[]},GT,{provide:Ry,useFactory:function(){return Rw},deps:[]},{provide:My,useFactory:function(){return Mw},deps:[]},{provide:jy,useFactory:function(t){return lv(t=t||"undefined"!=typeof $localize&&$localize.locale||Cy),t},deps:[[new La(jy),new Ta,new Va]]},{provide:ZI,useValue:"USD"}];let jS=(()=>{class t{constructor(i){}}return t.\u0275fac=function(i){return new(i||t)(Qi(Bg))},t.\u0275mod=Pe({type:t}),t.\u0275inj=wn({providers:$S}),t})()},841:(cn,rt,F)=>{"use strict";F.d(rt,{nm:()=>wr});var E=F(2805),ue=(F(7716),F(127),F(2329),F(8239)),ee=F(8026),Ie=F(3910),oe=F(3854),Se=F(5422);const ae=new Map,ve={activated:!1,tokenObservers:[]},we={initialized:!1,enabled:!1};function _e(ht){return ae.get(ht)||ve}function Te(ht,$){ae.set(ht,$)}function lt(){return we}class st{constructor($,W,ce,Ce,Ze){if(this.operation=$,this.retryPolicy=W,this.getWaitDuration=ce,this.lowerBound=Ce,this.upperBound=Ze,this.pending=null,this.nextErrorWaitInterval=Ce,Ce>Ze)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process($){var W=this;return(0,ue.Z)(function*(){W.stop();try{W.pending=new oe.BH,yield(ht=W.getNextRun($),new Promise($=>{setTimeout($,ht)})),W.pending.resolve(),yield W.pending.promise,W.pending=new oe.BH,yield W.operation(),W.pending.resolve(),yield W.pending.promise,W.process(!0).catch(()=>{})}catch(ce){W.retryPolicy(ce)?W.process(!1).catch(()=>{}):W.stop()}var ht})()}getNextRun($){if($)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const W=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),W}}}const v=new oe.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Tt(ht){if(!_e(ht).activated)throw v.create("use-before-activation",{appName:ht.name})}function pt(ht,$){return xt.apply(this,arguments)}function xt(){return(xt=(0,ue.Z)(function*({url:ht,body:$},W){var ce,Ce;const Ze={"Content-Type":"application/json"},ze=W.getImmediate({optional:!0});if(ze){const Xn=yield ze.getHeartbeatsHeader();Xn&&(Ze["X-Firebase-Client"]=Xn)}const gt={method:"POST",body:JSON.stringify($),headers:Ze};let bt,At;try{bt=yield fetch(ht,gt)}catch(Xn){throw v.create("fetch-network-error",{originalErrorMessage:null===(ce=Xn)||void 0===ce?void 0:ce.message})}if(200!==bt.status)throw v.create("fetch-status-error",{httpStatus:bt.status});try{At=yield bt.json()}catch(Xn){throw v.create("fetch-parse-error",{originalErrorMessage:null===(Ce=Xn)||void 0===Ce?void 0:Ce.message})}const an=At.ttl.match(/^([\d.]+)(s)$/);if(!an||!an[2]||isNaN(Number(an[1])))throw v.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${At.ttl}`});const Sn=1e3*Number(an[1]),zn=Date.now();return{token:At.token,expireTimeMillis:zn+Sn,issuedAtTimeMillis:zn}})).apply(this,arguments)}function vn(ht,$){const{projectId:W,appId:ce,apiKey:Ce}=ht.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${W}/apps/${ce}:exchangeDebugToken?key=${Ce}`,body:{debug_token:$}}}const tt="firebase-app-check-store";let ct=null;function Mt(){return ct||(ct=new Promise((ht,$)=>{var W;try{const ce=indexedDB.open("firebase-app-check-database",1);ce.onsuccess=Ce=>{ht(Ce.target.result)},ce.onerror=Ce=>{var Ze;$(v.create("storage-open",{originalErrorMessage:null===(Ze=Ce.target.error)||void 0===Ze?void 0:Ze.message}))},ce.onupgradeneeded=Ce=>{0===Ce.oldVersion&&Ce.target.result.createObjectStore(tt,{keyPath:"compositeKey"})}}catch(ce){$(v.create("storage-open",{originalErrorMessage:null===(W=ce)||void 0===W?void 0:W.message}))}}),ct)}function On(){return(On=(0,ue.Z)(function*(ht,$){const ce=(yield Mt()).transaction(tt,"readwrite"),Ze=ce.objectStore(tt).put({compositeKey:ht,value:$});return new Promise((ze,gt)=>{Ze.onsuccess=bt=>{ze()},ce.onerror=bt=>{var At;gt(v.create("storage-set",{originalErrorMessage:null===(At=bt.target.error)||void 0===At?void 0:At.message}))}})})).apply(this,arguments)}const Sr=new Se.Yd("@firebase/app-check");function Jn(ht,$){return(0,oe.hl)()?function(ht,$){return function(ht,$){return On.apply(this,arguments)}(function(ht){return`${ht.options.appId}-${ht.name}`}(ht),$)}(ht,$).catch(W=>{Sr.warn(`Failed to write token to IndexedDB. Error: ${W}`)}):Promise.resolve()}function or(){return lt().enabled}function sr(){return pr.apply(this,arguments)}function pr(){return(pr=(0,ue.Z)(function*(){const ht=lt();if(ht.enabled&&ht.token)return ht.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Nr={error:"UNKNOWN_ERROR"};function Ar(ht){return oe.US.encodeString(JSON.stringify(ht),!1)}function hi(ht){return gr.apply(this,arguments)}function gr(){return(gr=(0,ue.Z)(function*(ht,$=!1){const W=ht.app;Tt(W);const ce=_e(W);let Ze,Ce=ce.token;if(Ce&&!Yn(Ce)&&(Te(W,Object.assign(Object.assign({},ce),{token:void 0})),Ce=void 0),!Ce){const bt=yield ce.cachedTokenPromise;bt&&(Yn(bt)?Ce=bt:yield Jn(W,void 0))}if(!$&&Ce&&Yn(Ce))return{token:Ce.token};let gt,ze=!1;if(or()){ce.exchangeTokenPromise||(ce.exchangeTokenPromise=pt(vn(W,yield sr()),ht.heartbeatServiceProvider).finally(()=>{ce.exchangeTokenPromise=void 0}),ze=!0);const bt=yield ce.exchangeTokenPromise;return yield Jn(W,bt),Te(W,Object.assign(Object.assign({},ce),{token:bt})),{token:bt.token}}try{ce.exchangeTokenPromise||(ce.exchangeTokenPromise=ce.provider.getToken().finally(()=>{ce.exchangeTokenPromise=void 0}),ze=!0),Ce=yield ce.exchangeTokenPromise}catch(bt){"appCheck/throttled"===bt.code?Sr.warn(bt.message):Sr.error(bt),Ze=bt}return Ce?Ze?gt=Yn(Ce)?{token:Ce.token,internalError:Ze}:Pr(Ze):(gt={token:Ce.token},Te(W,Object.assign(Object.assign({},ce),{token:Ce})),yield Jn(W,Ce)):gt=Pr(Ze),ze&&Cn(W,gt),gt})).apply(this,arguments)}function Ft(ht,$){const W=_e(ht),ce=W.tokenObservers.filter(Ce=>Ce.next!==$);0===ce.length&&W.tokenRefresher&&W.tokenRefresher.isRunning()&&W.tokenRefresher.stop(),Te(ht,Object.assign(Object.assign({},W),{tokenObservers:ce}))}function ci(ht){const{app:$}=ht,W=_e($);let ce=W.tokenRefresher;ce||(ce=function(ht){const{app:$}=ht;return new st((0,ue.Z)(function*(){let ce;if(ce=_e($).token?yield hi(ht,!0):yield hi(ht),ce.error)throw ce.error;if(ce.internalError)throw ce.internalError}),()=>!0,()=>{const W=_e($);if(W.token){let ce=W.token.issuedAtTimeMillis+.5*(W.token.expireTimeMillis-W.token.issuedAtTimeMillis)+3e5;return ce=Math.min(ce,W.token.expireTimeMillis-3e5),Math.max(0,ce-Date.now())}return 0},3e4,96e4)}(ht),Te($,Object.assign(Object.assign({},W),{tokenRefresher:ce}))),!ce.isRunning()&&W.isTokenAutoRefreshEnabled&&ce.start()}function Cn(ht,$){const W=_e(ht).tokenObservers;for(const ce of W)try{"EXTERNAL"===ce.type&&null!=$.error?ce.error($.error):ce.next($)}catch(Ce){}}function Yn(ht){return ht.expireTimeMillis-Date.now()>0}function Pr(ht){return{token:Ar(Nr),error:ht}}class Cr{constructor($,W){this.app=$,this.heartbeatServiceProvider=W}_delete(){const{tokenObservers:$}=_e(this.app);for(const W of $)Ft(this.app,W.next);return Promise.resolve()}}const Mn="app-check-internal";(0,ee._registerComponent)(new Ie.wA("app-check",ht=>function(ht,$){return new Cr(ht,$)}(ht.getProvider("app").getImmediate(),ht.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((ht,$,W)=>{ht.getProvider(Mn).initialize()})),(0,ee._registerComponent)(new Ie.wA(Mn,ht=>function(ht){return{getToken:$=>hi(ht,$),addTokenListener:$=>function(ht,$,W,ce){const{app:Ce}=ht,Ze=_e(Ce),ze={next:W,error:ce,type:$};if(Te(Ce,Object.assign(Object.assign({},Ze),{tokenObservers:[...Ze.tokenObservers,ze]})),Ze.token&&Yn(Ze.token)){const gt=Ze.token;Promise.resolve().then(()=>{W({token:gt.token}),ci(ht)}).catch(()=>{})}Ze.cachedTokenPromise.then(()=>ci(ht))}(ht,"INTERNAL",$),removeTokenListener:$=>Ft(ht.app,$)}}(ht.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ee.registerVersion)("@firebase/app-check","0.5.15");class wr{constructor(){return(0,E.vb)("app-check")}}"undefined"!=typeof window&&window},127:(cn,rt,F)=>{"use strict";F.d(rt,{Ot:()=>L,z6:()=>ue,ZF:()=>Ke,hX:()=>_e});var E=F(2329),O=F(7716),ie=F(2805);class L{constructor(st){return st}}class ue{constructor(){return(0,E.C6)()}}const oe=new O.OlP("angularfire2._apps"),Se={provide:L,useFactory:function(Oe){return Oe&&1===Oe.length?Oe[0]:new L((0,E.Mq)())},deps:[[new O.FiY,oe]]},ae={provide:ue,deps:[[new O.FiY,oe]]};function ve(Oe){return(st,It)=>{const en=st.runOutsideAngular(()=>Oe(It));return new L(en)}}let we=(()=>{class Oe{constructor(It){(0,E.KN)("angularfire",ie.q4.full,"core"),(0,E.KN)("angularfire",ie.q4.full,"app"),(0,E.KN)("angular",O.q4F.full,It.toString())}}return Oe.\u0275fac=function(It){return new(It||Oe)(O.LFG(O.Lbi))},Oe.\u0275mod=O.oAB({type:Oe}),Oe.\u0275inj=O.cJS({providers:[Se,ae]}),Oe})();function _e(Oe,...st){return{ngModule:we,providers:[{provide:oe,useFactory:ve(Oe),multi:!0,deps:[O.R0b,O.zs3,ie.HU,...st]}]}}const Ke=(0,ie.u3)(E.ZF,!0)},7910:(cn,rt,F)=>{"use strict";F.d(rt,{gx:()=>Ee,dh:()=>Ke,Xb:()=>vn,v0:()=>je,AR:()=>v,e5:()=>Ft,w7:()=>Pr,EA:()=>Tt});var E=F(2805),O=F(7716),ie=F(127),L=F(2329),ue=F(841),ee=F(3607),ve=(F(3854),F(8026),F(5422),F(3910),F(8891));function _e($t){return new ve.y(function(Wt){return{unsubscribe:(0,ee.q)($t,Wt.next.bind(Wt),Wt.error.bind(Wt),Wt.complete.bind(Wt))}})}class Ee{constructor(Wt){return Wt}}class Ke{constructor(){return(0,E.vb)("auth")}}const Ge=new O.OlP("angularfire2.auth-instances");function Oe($t){return(Wt,Be)=>{const $e=Wt.runOutsideAngular(()=>$t(Be));return new Ee($e)}}const st={provide:Ke,deps:[[new O.FiY,Ge]]},It={provide:Ee,useFactory:function($t,Wt){const Be=(0,E.JM)("auth",$t,Wt);return Be&&new Ee(Be)},deps:[[new O.FiY,Ge],ie.Ot]};let en=(()=>{class $t{constructor(){(0,L.KN)("angularfire",E.q4.full,"auth")}}return $t.\u0275fac=function(Be){return new(Be||$t)},$t.\u0275mod=O.oAB({type:$t}),$t.\u0275inj=O.cJS({providers:[It,st]}),$t})();function v($t,...Wt){return{ngModule:en,providers:[{provide:Ge,useFactory:Oe($t),multi:!0,deps:[O.R0b,O.zs3,E.HU,ie.z6,[new O.FiY,ue.nm],...Wt]}]}}const Tt=(0,E.u3)(_e,!0),vn=(0,E.u3)(ee.a5,!0),je=(0,E.u3)(ee.n,!0),Ft=(0,E.u3)(ee.a6,!0),Pr=(0,E.u3)(ee.y,!0)},8006:(cn,rt,F)=>{"use strict";F.d(rt,{zQ:()=>Nt,rT:()=>xt,f7:()=>xn,L6:()=>St,_Q:()=>pt,lh:()=>kt,Qv:()=>ft,nw:()=>vn});var E=F(7716),O=F(9765),ie=F(5917),L=F(8891),ue=F(4402),ee=F(6682),Ie=F(7771),oe=F(5319),Se=F(309),ae=F(7971),ve=F(8858);class we extends O.xQ{constructor(je=Number.POSITIVE_INFINITY,ct=Number.POSITIVE_INFINITY,Mt){super(),this.scheduler=Mt,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=je<1?1:je,this._windowTime=ct<1?1:ct,ct===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(je){if(!this.isStopped){const ct=this._events;ct.push(je),ct.length>this._bufferSize&&ct.shift()}super.next(je)}nextTimeWindow(je){this.isStopped||(this._events.push(new _e(this._getNow(),je)),this._trimBufferThenGetEvents()),super.next(je)}_subscribe(je){const ct=this._infiniteTimeWindow,Mt=ct?this._events:this._trimBufferThenGetEvents(),Gt=this.scheduler,Vt=Mt.length;let Bt;if(this.closed)throw new ae.N;if(this.isStopped||this.hasError?Bt=oe.w.EMPTY:(this.observers.push(je),Bt=new ve.W(this,je)),Gt&&je.add(je=new Se.ht(je,Gt)),ct)for(let wn=0;wn<Vt&&!je.closed;wn++)je.next(Mt[wn]);else for(let wn=0;wn<Vt&&!je.closed;wn++)je.next(Mt[wn].value);return this.hasError?je.error(this.thrownError):this.isStopped&&je.complete(),Bt}_getNow(){return(this.scheduler||Ie.c).now()}_trimBufferThenGetEvents(){const je=this._getNow(),ct=this._bufferSize,Mt=this._windowTime,Gt=this._events,Vt=Gt.length;let Bt=0;for(;Bt<Vt&&!(je-Gt[Bt].time<Mt);)Bt++;return Vt>ct&&(Bt=Math.max(Bt,Vt-ct)),Bt>0&&Gt.splice(0,Bt),Gt}}class _e{constructor(je,ct){this.time=je,this.value=ct}}function Te(tt,je,ct){let Mt;return Mt=tt&&"object"==typeof tt?tt:{bufferSize:tt,windowTime:je,refCount:!1,scheduler:ct},Gt=>Gt.lift(function({bufferSize:tt=Number.POSITIVE_INFINITY,windowTime:je=Number.POSITIVE_INFINITY,refCount:ct,scheduler:Mt}){let Gt,Bt,Vt=0,wn=!1,Hn=!1;return function(Tn){let Wn;Vt++,!Gt||wn?(wn=!1,Gt=new we(tt,je,Mt),Wn=Gt.subscribe(this),Bt=Tn.subscribe({next(Rr){Gt.next(Rr)},error(Rr){wn=!0,Gt.error(Rr)},complete(){Hn=!0,Bt=void 0,Gt.complete()}}),Hn&&(Bt=void 0)):Wn=Gt.subscribe(this),this.add(()=>{Vt--,Wn.unsubscribe(),Wn=void 0,Bt&&!Hn&&ct&&0===Vt&&(Bt.unsubscribe(),Bt=void 0,Gt=void 0)})}}(Mt))}var Ee=F(3190);function Ke(tt,je){return je?(0,Ee.w)(()=>tt,je):(0,Ee.w)(()=>tt)}var Re=F(8002),Ge=F(8049),Fe=F(3101),Oe=F(5435),st=F(2805),It=F(8939),en=F(8583),v=F(841);F(7841);const ft=new E.OlP("angularfire2.auth.use-emulator"),St=new E.OlP("angularfire2.auth.settings"),pt=new E.OlP("angularfire2.auth.tenant-id"),xt=new E.OlP("angularfire2.auth.langugage-code"),kt=new E.OlP("angularfire2.auth.use-device-language"),xn=new E.OlP("angularfire.auth.persistence"),vn=(tt,je,ct,Mt,Gt,Vt,Bt,wn)=>(0,It.cc)(`${tt.name}.auth`,"AngularFireAuth",tt.name,()=>{const Hn=je.runOutsideAngular(()=>tt.auth());if(ct&&Hn.useEmulator(...ct),Mt&&(Hn.tenantId=Mt),Hn.languageCode=Gt,Vt&&Hn.useDeviceLanguage(),Bt)for(const[On,Tn]of Object.entries(Bt))Hn.settings[On]=Tn;return wn&&Hn.setPersistence(wn),Hn},[ct,Mt,Gt,Vt,Bt,wn]);let Nt=(()=>{class tt{constructor(ct,Mt,Gt,Vt,Bt,wn,Hn,On,Tn,Wn,Rr,Sr){const Ht=new O.xQ,Gn=(0,ie.of)(void 0).pipe((0,Se.QV)(Bt.outsideAngular),(0,Ee.w)(()=>Vt.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,4828)))),(0,Re.U)(()=>(0,It.on)(ct,Vt,Mt)),(0,Re.U)(Jn=>vn(Jn,Vt,wn,On,Tn,Wn,Hn,Rr)),Te({bufferSize:1,refCount:!1}));if((0,en.PM)(Gt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ie.of)(null);else{Gn.pipe((0,Ge.P)()).subscribe();const En=Gn.pipe((0,Ee.w)(sr=>sr.getRedirectResult().then(pr=>pr,()=>null)),st.iC,Te({bufferSize:1,refCount:!1})),er=Gn.pipe((0,Ee.w)(sr=>new L.y(pr=>({unsubscribe:Vt.runOutsideAngular(()=>sr.onAuthStateChanged(Lr=>pr.next(Lr),Lr=>pr.error(Lr),()=>pr.complete()))})))),or=Gn.pipe((0,Ee.w)(sr=>new L.y(pr=>({unsubscribe:Vt.runOutsideAngular(()=>sr.onIdTokenChanged(Lr=>pr.next(Lr),Lr=>pr.error(Lr),()=>pr.complete()))}))));this.authState=En.pipe(Ke(er),(0,Fe.R)(Bt.outsideAngular),(0,Se.QV)(Bt.insideAngular)),this.user=En.pipe(Ke(or),(0,Fe.R)(Bt.outsideAngular),(0,Se.QV)(Bt.insideAngular)),this.idToken=this.user.pipe((0,Ee.w)(sr=>sr?(0,ue.D)(sr.getIdToken()):(0,ie.of)(null))),this.idTokenResult=this.user.pipe((0,Ee.w)(sr=>sr?(0,ue.D)(sr.getIdTokenResult()):(0,ie.of)(null))),this.credential=(0,ee.T)(En,Ht,this.authState.pipe((0,Oe.h)(sr=>!sr))).pipe((0,Re.U)(sr=>(null==sr?void 0:sr.user)?sr:null),(0,Fe.R)(Bt.outsideAngular),(0,Se.QV)(Bt.insideAngular))}return(0,It.pX)(this,Gn,Vt,{spy:{apply:(Jn,En,er)=>{(Jn.startsWith("signIn")||Jn.startsWith("createUser"))&&er.then(or=>Ht.next(or))}}})}}return tt.\u0275fac=function(ct){return new(ct||tt)(E.LFG(It.Dh),E.LFG(It.xv,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(st.HU),E.LFG(ft,8),E.LFG(St,8),E.LFG(pt,8),E.LFG(xt,8),E.LFG(kt,8),E.LFG(xn,8),E.LFG(v.nm,8))},tt.\u0275prov=E.Yz7({token:tt,factory:tt.\u0275fac,providedIn:"any"}),tt})()},3824:(cn,rt,F)=>{"use strict";F.d(rt,{KQ:()=>Cr,JS:()=>nr});var E=F(7716),O=F(3637),ie=F(8891),L=F(5917),ue=F(6682),ee=F(5197),Ie=F(509);class Se{constructor(He,Xe){this.observables=He,this.project=Xe}call(He,Xe){return Xe.subscribe(new ae(He,this.observables,this.project))}}class ae extends ee.L{constructor(He,Xe,at){super(He),this.observables=Xe,this.project=at,this.toRespond=[];const Qe=Xe.length;this.values=new Array(Qe);for(let wt=0;wt<Qe;wt++)this.toRespond.push(wt);for(let wt=0;wt<Qe;wt++)this.add((0,Ie.D)(this,Xe[wt],void 0,wt))}notifyNext(He,Xe,at){this.values[at]=Xe;const Qe=this.toRespond;if(Qe.length>0){const wt=Qe.indexOf(at);-1!==wt&&Qe.splice(wt,1)}}notifyComplete(){}_next(He){if(0===this.toRespond.length){const Xe=[He,...this.values];this.project?this._tryProject(Xe):this.destination.next(Xe)}}_tryProject(He){let Xe;try{Xe=this.project.apply(this,He)}catch(at){return void this.destination.error(at)}this.destination.next(Xe)}}var ve=F(7393);class _e{constructor(He){this.predicate=He}call(He,Xe){return Xe.subscribe(new Te(He,this.predicate))}}class Te extends ve.L{constructor(He,Xe){super(He),this.predicate=Xe,this.skipping=!0,this.index=0}_next(He){const Xe=this.destination;this.skipping&&this.tryCallPredicate(He),this.skipping||Xe.next(He)}tryCallPredicate(He){try{const Xe=this.predicate(He,this.index++);this.skipping=Boolean(Xe)}catch(Xe){this.destination.error(Xe)}}}var lt=F(8002),Ee=F(8819),Ke=F(3190),Re=F(2145),Ge=F(7519),Fe=F(2805),Oe=F(8939),It=(F(4828),F(3394)),en=F(3910),v=F(407),Le=F(3854);const pt=new(F(5422).Yd)("@firebase/database-compat"),xt=function(mt){pt.warn("FIREBASE WARNING: "+mt)};class vn{constructor(He){this._delegate=He}cancel(He){(0,Le.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,Le.Wj)("OnDisconnect.cancel","onComplete",He,!0);const Xe=this._delegate.cancel();return He&&Xe.then(()=>He(null),at=>He(at)),Xe}remove(He){(0,Le.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,Le.Wj)("OnDisconnect.remove","onComplete",He,!0);const Xe=this._delegate.remove();return He&&Xe.then(()=>He(null),at=>He(at)),Xe}set(He,Xe){(0,Le.Dv)("OnDisconnect.set",1,2,arguments.length),(0,Le.Wj)("OnDisconnect.set","onComplete",Xe,!0);const at=this._delegate.set(He);return Xe&&at.then(()=>Xe(null),Qe=>Xe(Qe)),at}setWithPriority(He,Xe,at){(0,Le.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,Le.Wj)("OnDisconnect.setWithPriority","onComplete",at,!0);const Qe=this._delegate.setWithPriority(He,Xe);return at&&Qe.then(()=>at(null),wt=>at(wt)),Qe}update(He,Xe){if((0,Le.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(He)){const Qe={};for(let wt=0;wt<He.length;++wt)Qe[""+wt]=He[wt];He=Qe,xt("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,Le.Wj)("OnDisconnect.update","onComplete",Xe,!0);const at=this._delegate.update(He);return Xe&&at.then(()=>Xe(null),Qe=>Xe(Qe)),at}}class Nt{constructor(He,Xe){this.committed=He,this.snapshot=Xe}toJSON(){return(0,Le.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Dt{constructor(He,Xe){this._database=He,this._delegate=Xe}val(){return(0,Le.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,Le.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,Le.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,Le.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(He){return(0,Le.Dv)("DataSnapshot.child",0,1,arguments.length),He=String(He),(0,v.FQ)("DataSnapshot.child","path",He,!1),new Dt(this._database,this._delegate.child(He))}hasChild(He){return(0,Le.Dv)("DataSnapshot.hasChild",1,1,arguments.length),(0,v.FQ)("DataSnapshot.hasChild","path",He,!1),this._delegate.hasChild(He)}getPriority(){return(0,Le.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(He){return(0,Le.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,Le.Wj)("DataSnapshot.forEach","action",He,!1),this._delegate.forEach(Xe=>He(new Dt(this._database,Xe)))}hasChildren(){return(0,Le.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,Le.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,Le.Dv)("DataSnapshot.ref",0,0,arguments.length),new je(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class tt{constructor(He,Xe){this.database=He,this._delegate=Xe}on(He,Xe,at,Qe){var wt;(0,Le.Dv)("Query.on",2,4,arguments.length),(0,Le.Wj)("Query.on","callback",Xe,!1);const Qt=tt.getCancelAndContextArgs_("Query.on",at,Qe),$t=(Be,$e)=>{Xe.call(Qt.context,new Dt(this.database,Be),$e)};$t.userCallback=Xe,$t.context=Qt.context;const Wt=null===(wt=Qt.cancel)||void 0===wt?void 0:wt.bind(Qt.context);switch(He){case"value":return(0,v.jM)(this._delegate,$t,Wt),Xe;case"child_added":return(0,v.yv)(this._delegate,$t,Wt),Xe;case"child_removed":return(0,v.MQ)(this._delegate,$t,Wt),Xe;case"child_changed":return(0,v.Jr)(this._delegate,$t,Wt),Xe;case"child_moved":return(0,v.Vt)(this._delegate,$t,Wt),Xe;default:throw new Error((0,Le.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(He,Xe,at){if((0,Le.Dv)("Query.off",0,3,arguments.length),function(mt,He,Xe){if(void 0!==He)switch(He){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,Le.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,He),(0,Le.Wj)("Query.off","callback",Xe,!0),(0,Le.lb)("Query.off","context",at,!0),Xe){const Qe=()=>{};Qe.userCallback=Xe,Qe.context=at,(0,v.S1)(this._delegate,He,Qe)}else(0,v.S1)(this._delegate,He)}get(){return(0,v.U2)(this._delegate).then(He=>new Dt(this.database,He))}once(He,Xe,at,Qe){(0,Le.Dv)("Query.once",1,4,arguments.length),(0,Le.Wj)("Query.once","callback",Xe,!0);const wt=tt.getCancelAndContextArgs_("Query.once",at,Qe),Qt=new Le.BH,$t=(Be,$e)=>{const it=new Dt(this.database,Be);Xe&&Xe.call(wt.context,it,$e),Qt.resolve(it)};$t.userCallback=Xe,$t.context=wt.context;const Wt=Be=>{wt.cancel&&wt.cancel.call(wt.context,Be),Qt.reject(Be)};switch(He){case"value":(0,v.jM)(this._delegate,$t,Wt,{onlyOnce:!0});break;case"child_added":(0,v.yv)(this._delegate,$t,Wt,{onlyOnce:!0});break;case"child_removed":(0,v.MQ)(this._delegate,$t,Wt,{onlyOnce:!0});break;case"child_changed":(0,v.Jr)(this._delegate,$t,Wt,{onlyOnce:!0});break;case"child_moved":(0,v.Vt)(this._delegate,$t,Wt,{onlyOnce:!0});break;default:throw new Error((0,Le.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return Qt.promise}limitToFirst(He){return(0,Le.Dv)("Query.limitToFirst",1,1,arguments.length),new tt(this.database,(0,v.IO)(this._delegate,(0,v.Kk)(He)))}limitToLast(He){return(0,Le.Dv)("Query.limitToLast",1,1,arguments.length),new tt(this.database,(0,v.IO)(this._delegate,(0,v.vh)(He)))}orderByChild(He){return(0,Le.Dv)("Query.orderByChild",1,1,arguments.length),new tt(this.database,(0,v.IO)(this._delegate,(0,v.g2)(He)))}orderByKey(){return(0,Le.Dv)("Query.orderByKey",0,0,arguments.length),new tt(this.database,(0,v.IO)(this._delegate,(0,v.R)()))}orderByPriority(){return(0,Le.Dv)("Query.orderByPriority",0,0,arguments.length),new tt(this.database,(0,v.IO)(this._delegate,(0,v.HE)()))}orderByValue(){return(0,Le.Dv)("Query.orderByValue",0,0,arguments.length),new tt(this.database,(0,v.IO)(this._delegate,(0,v.Bd)()))}startAt(He=null,Xe){return(0,Le.Dv)("Query.startAt",0,2,arguments.length),new tt(this.database,(0,v.IO)(this._delegate,(0,v.e0)(He,Xe)))}startAfter(He=null,Xe){return(0,Le.Dv)("Query.startAfter",0,2,arguments.length),new tt(this.database,(0,v.IO)(this._delegate,(0,v.TQ)(He,Xe)))}endAt(He=null,Xe){return(0,Le.Dv)("Query.endAt",0,2,arguments.length),new tt(this.database,(0,v.IO)(this._delegate,(0,v.Wu)(He,Xe)))}endBefore(He=null,Xe){return(0,Le.Dv)("Query.endBefore",0,2,arguments.length),new tt(this.database,(0,v.IO)(this._delegate,(0,v.Lx)(He,Xe)))}equalTo(He,Xe){return(0,Le.Dv)("Query.equalTo",1,2,arguments.length),new tt(this.database,(0,v.IO)(this._delegate,(0,v.EW)(He,Xe)))}toString(){return(0,Le.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,Le.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(He){if((0,Le.Dv)("Query.isEqual",1,1,arguments.length),!(He instanceof tt))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(He._delegate)}static getCancelAndContextArgs_(He,Xe,at){const Qe={cancel:void 0,context:void 0};if(Xe&&at)Qe.cancel=Xe,(0,Le.Wj)(He,"cancel",Qe.cancel,!0),Qe.context=at,(0,Le.lb)(He,"context",Qe.context,!0);else if(Xe)if("object"==typeof Xe&&null!==Xe)Qe.context=Xe;else{if("function"!=typeof Xe)throw new Error((0,Le.gK)(He,"cancelOrContext")+" must either be a cancel callback or a context object.");Qe.cancel=Xe}return Qe}get ref(){return new je(this.database,new v.tn(this._delegate._repo,this._delegate._path))}}class je extends tt{constructor(He,Xe){super(He,new v.JH(Xe._repo,Xe._path,new v.G$,!1)),this.database=He,this._delegate=Xe}getKey(){return(0,Le.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(He){return(0,Le.Dv)("Reference.child",1,1,arguments.length),"number"==typeof He&&(He=String(He)),new je(this.database,(0,v.iU)(this._delegate,He))}getParent(){(0,Le.Dv)("Reference.parent",0,0,arguments.length);const He=this._delegate.parent;return He?new je(this.database,He):null}getRoot(){return(0,Le.Dv)("Reference.root",0,0,arguments.length),new je(this.database,this._delegate.root)}set(He,Xe){(0,Le.Dv)("Reference.set",1,2,arguments.length),(0,Le.Wj)("Reference.set","onComplete",Xe,!0);const at=(0,v.t8)(this._delegate,He);return Xe&&at.then(()=>Xe(null),Qe=>Xe(Qe)),at}update(He,Xe){if((0,Le.Dv)("Reference.update",1,2,arguments.length),Array.isArray(He)){const Qe={};for(let wt=0;wt<He.length;++wt)Qe[""+wt]=He[wt];He=Qe,xt("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,v.mI)("Reference.update",this._delegate._path),(0,Le.Wj)("Reference.update","onComplete",Xe,!0);const at=(0,v.Vx)(this._delegate,He);return Xe&&at.then(()=>Xe(null),Qe=>Xe(Qe)),at}setWithPriority(He,Xe,at){(0,Le.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,Le.Wj)("Reference.setWithPriority","onComplete",at,!0);const Qe=(0,v.cy)(this._delegate,He,Xe);return at&&Qe.then(()=>at(null),wt=>at(wt)),Qe}remove(He){(0,Le.Dv)("Reference.remove",0,1,arguments.length),(0,Le.Wj)("Reference.remove","onComplete",He,!0);const Xe=(0,v.Od)(this._delegate);return He&&Xe.then(()=>He(null),at=>He(at)),Xe}transaction(He,Xe,at){(0,Le.Dv)("Reference.transaction",1,3,arguments.length),(0,Le.Wj)("Reference.transaction","transactionUpdate",He,!1),(0,Le.Wj)("Reference.transaction","onComplete",Xe,!0),function(mt,He,Xe,at){if(void 0!==Xe&&"boolean"!=typeof Xe)throw new Error((0,Le.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,at);const Qe=(0,v.i3)(this._delegate,He,{applyLocally:at}).then(wt=>new Nt(wt.committed,new Dt(this.database,wt.snapshot)));return Xe&&Qe.then(wt=>Xe(null,wt.committed,wt.snapshot),wt=>Xe(wt,!1,null)),Qe}setPriority(He,Xe){(0,Le.Dv)("Reference.setPriority",1,2,arguments.length),(0,Le.Wj)("Reference.setPriority","onComplete",Xe,!0);const at=(0,v.Sl)(this._delegate,He);return Xe&&at.then(()=>Xe(null),Qe=>Xe(Qe)),at}push(He,Xe){(0,Le.Dv)("Reference.push",0,2,arguments.length),(0,Le.Wj)("Reference.push","onComplete",Xe,!0);const at=(0,v.VF)(this._delegate,He),Qe=at.then(Qt=>new je(this.database,Qt));Xe&&Qe.then(()=>Xe(null),Qt=>Xe(Qt));const wt=new je(this.database,at);return wt.then=Qe.then.bind(Qe),wt.catch=Qe.catch.bind(Qe,void 0),wt}onDisconnect(){return(0,v.mI)("Reference.onDisconnect",this._delegate._path),new vn(new v.vA(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class ct{constructor(He,Xe){this._delegate=He,this.app=Xe,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:v.TD,forceLongPolling:v.Ot}}useEmulator(He,Xe,at={}){(0,v.dH)(this._delegate,He,Xe,at)}ref(He){if((0,Le.Dv)("database.ref",0,1,arguments.length),He instanceof je){const Xe=(0,v.qT)(this._delegate,He.toString());return new je(this,Xe)}{const Xe=(0,v.iH)(this._delegate,He);return new je(this,Xe)}}refFromURL(He){(0,Le.Dv)("database.refFromURL",1,1,arguments.length);const at=(0,v.qT)(this._delegate,He);return new je(this,at)}goOffline(){return(0,Le.Dv)("database.goOffline",0,0,arguments.length),(0,v.Sb)(this._delegate)}goOnline(){return(0,Le.Dv)("database.goOnline",0,0,arguments.length),(0,v.$o)(this._delegate)}}ct.ServerValue={TIMESTAMP:(0,v.Bt)(),increment:mt=>(0,v.nP)(mt)};var Gt=Object.freeze({__proto__:null,initStandalone:function({app:mt,url:He,version:Xe,customAuthImpl:at,namespace:Qe,nodeAdmin:wt=!1}){(0,v.AM)(Xe);const Qt=new en.zt("auth-internal",new en.H0("database-standalone"));return Qt.setComponent(new en.wA("auth-internal",()=>at,"PRIVATE")),{instance:new ct((0,v.wj)(mt,Qt,void 0,He,wt),mt),namespace:Qe}}});const Vt=ct.ServerValue;var mt;(mt=It.Z).INTERNAL.registerComponent(new en.wA("database-compat",(He,{instanceIdentifier:Xe})=>{const at=He.getProvider("app-compat").getImmediate(),Qe=He.getProvider("database").getImmediate({identifier:Xe});return new ct(Qe,at)},"PUBLIC").setServiceProps({Reference:je,Query:tt,Database:ct,DataSnapshot:Dt,enableLogging:v.U7,INTERNAL:Gt,ServerValue:Vt}).setMultipleInstances(!0)),mt.registerVersion("@firebase/database-compat","0.2.9");var wn=F(8006),Hn=F(841),On=F(7841);function Rr(mt){return null==mt}function Sr(mt){return"function"==typeof mt.set}function Ht(mt,He){return Sr(He)?He:mt.ref(He)}function Gn(mt,He){if(function(mt){return"string"==typeof mt}(mt))return He.stringCase();if(Sr(mt))return He.firebaseCase();if(function(mt){return"function"==typeof mt.exportVal}(mt))return He.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof mt)}function Jn(mt,He,Xe="on",at=O.z){return new ie.y(Qe=>{let wt=null;return wt=mt[Xe](He,(Qt,$t)=>{at.schedule(()=>{Qe.next({snapshot:Qt,prevKey:$t})}),"once"===Xe&&at.schedule(()=>Qe.complete())},Qt=>{at.schedule(()=>Qe.error(Qt))}),"on"===Xe?{unsubscribe(){null!=wt&&mt.off(He,wt)}}:{unsubscribe(){}}}).pipe((0,lt.U)(Qe=>{const{snapshot:wt,prevKey:Qt}=Qe;let $t=null;return wt.exists()&&($t=wt.key),{type:He,payload:wt,prevKey:Qt,key:$t}}),(0,Ee.B)())}function er(mt,He){const Xe=mt.length;for(let at=0;at<Xe;at++)if(mt[at].payload.key===He)return at;return-1}function sr(mt,He){const{payload:Xe,prevKey:at,key:Qe}=He,wt=er(mt,Qe),Qt=function(mt,He){if(Rr(He))return 0;{const Xe=er(mt,He);return-1===Xe?mt.length:Xe+1}}(mt,at);switch(He.type){case"value":if(He.payload&&He.payload.exists()){let $t=null;He.payload.forEach(Wt=>{const Be={payload:Wt,type:"value",prevKey:$t,key:Wt.key};return $t=Wt.key,mt=[...mt,Be],!1})}return mt;case"child_added":if(wt>-1){const $t=mt[wt-1];($t&&$t.key||null)!==at&&(mt=mt.filter(Wt=>Wt.payload.key!==Xe.key)).splice(Qt,0,He)}else{if(null==at)return[He,...mt];(mt=mt.slice()).splice(Qt,0,He)}return mt;case"child_removed":return mt.filter($t=>$t.payload.key!==Xe.key);case"child_changed":return mt.map($t=>$t.payload.key===Qe?He:$t);case"child_moved":if(wt>-1){const $t=mt.splice(wt,1)[0];return(mt=mt.slice()).splice(Qt,0,$t),mt}return mt;default:return mt}}function pr(mt){return(Rr(mt)||0===mt.length)&&(mt=["child_added","child_removed","child_changed","child_moved"]),mt}function Lr(mt,He,Xe){return function(mt,He,Xe){return Jn(mt,"value","once",Xe).pipe((0,Ke.w)(at=>{const Qe=[(0,L.of)(at)];return He.forEach(wt=>Qe.push(Jn(mt,wt,"on",Xe))),(0,ue.T)(...Qe).pipe((0,Re.R)(sr,[]))}),(0,Ge.x)())}(mt,He=pr(He),Xe)}function Nr(mt,He,Xe){const at=(He=pr(He)).map(Qe=>Jn(mt,Qe,"on",Xe));return(0,ue.T)(...at)}function In(mt,He){return function(at,Qe){return Gn(at,{stringCase:()=>mt.child(at)[He](Qe),firebaseCase:()=>at[He](Qe),snapshotCase:()=>at.ref[He](Qe)})}}function Ft(mt){return function(Xe){return Xe?Gn(Xe,{stringCase:()=>mt.child(Xe).remove(),firebaseCase:()=>Xe.remove(),snapshotCase:()=>Xe.ref.remove()}):mt.remove()}}function ni(mt,He){return function(){return Jn(mt,"value","on",He)}}const Yn=new E.OlP("angularfire2.realtimeDatabaseURL"),Pr=new E.OlP("angularfire2.database.use-emulator");let Cr=(()=>{class mt{constructor(Xe,at,Qe,wt,Qt,$t,Wt,Be,$e,it,Ve,be,Pe,Et,tn){this.schedulers=$t;const $n=Wt,Rn=(0,Oe.on)(Xe,Qt,at);Be&&(0,wn.nw)(Rn,Qt,$e,Ve,be,Pe,it,Et),this.database=(0,Oe.cc)(`${Rn.name}.database.${Qe}`,"AngularFireDatabase",Rn.name,()=>{const Un=Qt.runOutsideAngular(()=>Rn.database(Qe||void 0));return $n&&Un.useEmulator(...$n),Un},[$n])}list(Xe,at){const Qe=this.schedulers.ngZone.runOutsideAngular(()=>Ht(this.database,Xe));let wt=Qe;return at&&(wt=at(Qe)),function(mt,He){const Xe=He.schedulers.outsideAngular,at=He.schedulers.ngZone.run(()=>mt.ref);return{query:mt,update:In(at,"update"),set:In(at,"set"),push:Qe=>at.push(Qe),remove:Ft(at),snapshotChanges:Qe=>Lr(mt,Qe,Xe).pipe(Fe.iC),stateChanges:Qe=>Nr(mt,Qe,Xe).pipe(Fe.iC),auditTrail:Qe=>function(mt,He,Xe){return function(mt,He,Xe){return function(mt,He){return Jn(mt,"value","on",He).pipe((0,lt.U)(Xe=>{let at;return Xe.payload.forEach(Qe=>(at=Qe.key,!1)),{data:Xe,lastKeyToLoad:at}}))}(mt,Xe).pipe(function(...mt){return He=>{let Xe;return"function"==typeof mt[mt.length-1]&&(Xe=mt.pop()),He.lift(new Se(mt,Xe))}}(He),(0,lt.U)(([Qe,wt])=>{const Qt=Qe.lastKeyToLoad,$t=wt.map(Wt=>Wt.key);return{actions:wt,lastKeyToLoad:Qt,loadedKeys:$t}}),function(mt){return He=>He.lift(new _e(mt))}(Qe=>-1===Qe.loadedKeys.indexOf(Qe.lastKeyToLoad)),(0,lt.U)(Qe=>Qe.actions))}(mt,Nr(mt,He).pipe((0,Re.R)((Qe,wt)=>[...Qe,wt],[])),Xe)}(mt,Qe,Xe).pipe(Fe.iC),valueChanges:(Qe,wt)=>Lr(mt,Qe,Xe).pipe((0,lt.U)($t=>$t.map(Wt=>wt&&wt.idField?Object.assign(Object.assign({},Wt.payload.val()),{[wt.idField]:Wt.key}):Wt.payload.val())),Fe.iC)}}(wt,this)}object(Xe){return function(mt,He){return{query:mt,snapshotChanges:()=>ni(mt,He.schedulers.outsideAngular)().pipe(Fe.iC),update:Xe=>mt.ref.update(Xe),set:Xe=>mt.ref.set(Xe),remove:()=>mt.ref.remove(),valueChanges:()=>ni(mt,He.schedulers.outsideAngular)().pipe(Fe.iC,(0,lt.U)(at=>at.payload.exists()?at.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Ht(this.database,Xe)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return mt.\u0275fac=function(Xe){return new(Xe||mt)(E.LFG(Oe.Dh),E.LFG(Oe.xv,8),E.LFG(Yn,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(Fe.HU),E.LFG(Pr,8),E.LFG(wn.zQ,8),E.LFG(wn.Qv,8),E.LFG(wn.L6,8),E.LFG(wn._Q,8),E.LFG(wn.rT,8),E.LFG(wn.lh,8),E.LFG(wn.f7,8),E.LFG(Hn.nm,8))},mt.\u0275prov=E.Yz7({token:mt,factory:mt.\u0275fac,providedIn:"any"}),mt})(),nr=(()=>{class mt{constructor(){On.Z.registerVersion("angularfire",Fe.q4.full,"rtdb-compat")}}return mt.\u0275fac=function(Xe){return new(Xe||mt)},mt.\u0275mod=E.oAB({type:mt}),mt.\u0275inj=E.cJS({providers:[Cr]}),mt})()},8939:(cn,rt,F)=>{"use strict";F.d(rt,{hO:()=>_e,xv:()=>Se,Dh:()=>oe,GT:()=>ee,cc:()=>Te,on:()=>ae,pX:()=>ue});var E=F(7716),O=F(7841),ie=F(2805);cn=F.hmd(cn);const L=["ngOnDestroy"],ue=(Re,Ge,Fe,Oe={})=>new Proxy(Re,{get:(st,It)=>Fe.runOutsideAngular(()=>{var en;if(Re[It])return(null===(en=null==Oe?void 0:Oe.spy)||void 0===en?void 0:en.get)&&Oe.spy.get(It,Re[It]),Re[It];if(L.indexOf(It)>-1)return()=>{};const v=Ge.toPromise().then(Le=>{const Tt=Le&&Le[It];return"function"==typeof Tt?Tt.bind(Le):Tt&&Tt.then?Tt.then(ft=>Fe.run(()=>ft)):Fe.run(()=>Tt)});return new Proxy(()=>{},{get:(Le,Tt)=>v[Tt],apply:(Le,Tt,ft)=>v.then(St=>{var pt;const xt=St&&St(...ft);return(null===(pt=null==Oe?void 0:Oe.spy)||void 0===pt?void 0:pt.apply)&&Oe.spy.apply(It,ft,xt),xt})})})}),ee=(Re,Ge)=>{Ge.forEach(Fe=>{Object.getOwnPropertyNames(Fe.prototype||Fe).forEach(Oe=>{Object.defineProperty(Re.prototype,Oe,Object.getOwnPropertyDescriptor(Fe.prototype||Fe,Oe))})})};class Ie{constructor(Ge){return Ge}}const oe=new E.OlP("angularfire2.app.options"),Se=new E.OlP("angularfire2.app.name");function ae(Re,Ge,Fe){const st="object"==typeof Fe&&Fe||{};st.name=st.name||"string"==typeof Fe&&Fe||"[DEFAULT]";const en=O.Z.apps.filter(v=>v&&v.name===st.name)[0]||Ge.runOutsideAngular(()=>O.Z.initializeApp(Re,st));try{JSON.stringify(Re)!==JSON.stringify(en.options)&&ve("error",`${en.name} Firebase App already initialized with different options${cn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(v){}return new Ie(en)}const ve=(Re,...Ge)=>{(0,E.X6Q)()&&"undefined"!=typeof console&&console[Re](...Ge)},we={provide:Ie,useFactory:ae,deps:[oe,E.R0b,[new E.FiY,Se]]};let _e=(()=>{class Re{constructor(Fe){O.Z.registerVersion("angularfire",ie.q4.full,"core"),O.Z.registerVersion("angularfire",ie.q4.full,"app-compat"),O.Z.registerVersion("angular",E.q4F.full,Fe.toString())}static initializeApp(Fe,Oe){return{ngModule:Re,providers:[{provide:oe,useValue:Fe},{provide:Se,useValue:Oe}]}}}return Re.\u0275fac=function(Fe){return new(Fe||Re)(E.LFG(E.Lbi))},Re.\u0275mod=E.oAB({type:Re}),Re.\u0275inj=E.cJS({providers:[we]}),Re})();function Te(Re,Ge,Fe,Oe,st){const[,It,en]=globalThis.\u0275AngularfireInstanceCache.find(v=>v[0]===Re)||[];if(It)return function(Re,Ge){try{return Re.toString()===Ge.toString()}catch(Fe){return Re===Ge}}(st,en)||(Ke("error",`${Ge} was already initialized on the ${Fe} Firebase App with different settings.${Ee?" You may need to reload as Firebase is not HMR aware.":""}`),Ke("warn",{is:st,was:en})),It;{const v=Oe();return globalThis.\u0275AngularfireInstanceCache.push([Re,v,st]),v}}const Ee=!!cn.hot,Ke=(Re,...Ge)=>{(0,E.X6Q)()&&"undefined"!=typeof console&&console[Re](...Ge)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2502:(cn,rt,F)=>{"use strict";F.d(rt,{gg:()=>ft,BS:()=>Bt,_1:()=>Hn,ad:()=>Cr,Xo:()=>$t,Cm:()=>je,IO:()=>Wt,Bt:()=>Ve});var E=F(2805),O=F(7716),ie=F(7910),L=F(127),ue=F(2329),ee=F(841),Ie=F(1304),oe=F(8891),Se=F(8002),ae={includeMetadataChanges:!1};function ve(rn,nn){return void 0===nn&&(nn=ae),new oe.y(function(Yt){return{unsubscribe:(0,Ie.cf)(rn,nn,{next:Yt.next.bind(Yt),error:Yt.error.bind(Yt),complete:Yt.complete.bind(Yt)})}})}function _e(rn,nn){return void 0===nn&&(nn={}),function(rn){return ve(rn,{includeMetadataChanges:!0})}(rn).pipe((0,Se.U)(function(Yt){return Te(Yt,nn)}))}function Te(rn,nn){void 0===nn&&(nn={});var Yt=rn.data();return!rn.exists()||"object"!=typeof Yt||null===Yt||nn.idField&&(Yt[nn.idField]=rn.id),Yt}function Tt(rn,nn){return void 0===nn&&(nn={}),function(rn){return ve(rn,{includeMetadataChanges:!0}).pipe((0,Se.U)(function(nn){return nn.docs}))}(rn).pipe((0,Se.U)(function(Yt){return Yt.map(function(Mn){return Te(Mn,nn)})}))}class ft{constructor(nn){return nn}}const St="firestore",kt=new O.OlP("angularfire2.firestore-instances");function vn(rn){return(nn,Yt)=>{const Mn=nn.runOutsideAngular(()=>rn(Yt));return new ft(Mn)}}const Nt={provide:class{constructor(){return(0,E.vb)(St)}},deps:[[new O.FiY,kt]]},Dt={provide:ft,useFactory:function(rn,nn){const Yt=(0,E.JM)(St,rn,nn);return Yt&&new ft(Yt)},deps:[[new O.FiY,kt],L.Ot]};let tt=(()=>{class rn{constructor(){(0,ue.KN)("angularfire",E.q4.full,"fst")}}return rn.\u0275fac=function(Yt){return new(Yt||rn)},rn.\u0275mod=O.oAB({type:rn}),rn.\u0275inj=O.cJS({providers:[Dt,Nt]}),rn})();function je(rn,...nn){return{ngModule:tt,providers:[{provide:kt,useFactory:vn(rn),multi:!0,deps:[O.R0b,O.zs3,E.HU,L.z6,[new O.FiY,ie.dh],[new O.FiY,ee.nm],...nn]}]}}const Bt=(0,E.u3)(Tt,!0),Hn=(0,E.u3)(_e,!0),Cr=(0,E.u3)(Ie.ad,!0),$t=(0,E.u3)(Ie.Xo,!0),Wt=(0,E.u3)(Ie.IO,!0),Ve=(0,E.u3)(Ie.Bt,!0)},2805:(cn,rt,F)=>{"use strict";F.d(rt,{q4:()=>wa,iC:()=>Dl,HU:()=>Pa,vb:()=>mc,JM:()=>ha,u3:()=>Tl});var E=F(7716),O=F(2329),ie=F(8239),L=F(8026),ue=F(3854),ee=F(3910),Ie=F(5422),oe=F(2268);const Se="@firebase/installations",ae="0.5.15",we=`w:${ae}`,_e="FIS_v2",Ge=new ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Fe(V){return V instanceof ue.ZR&&V.code.includes("request-failed")}function Oe({projectId:V}){return`https://firebaseinstallations.googleapis.com/v1/projects/${V}/installations`}function st(V){return{token:V.token,requestStatus:2,expiresIn:St(V.expiresIn),creationTime:Date.now()}}function It(V,Z){return en.apply(this,arguments)}function en(){return(en=(0,ie.Z)(function*(V,Z){const Ue=(yield Z.json()).error;return Ge.create("request-failed",{requestName:V,serverCode:Ue.code,serverMessage:Ue.message,serverStatus:Ue.status})})).apply(this,arguments)}function v({apiKey:V}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":V})}function Le(V,{refreshToken:Z}){const me=v(V);return me.append("Authorization",function(V){return`${_e} ${V}`}(Z)),me}function Tt(V){return ft.apply(this,arguments)}function ft(){return(ft=(0,ie.Z)(function*(V){const Z=yield V();return Z.status>=500&&Z.status<600?V():Z})).apply(this,arguments)}function St(V){return Number(V.replace("s","000"))}function xt(V,Z){return kt.apply(this,arguments)}function kt(){return(kt=(0,ie.Z)(function*({appConfig:V,heartbeatServiceProvider:Z},{fid:me}){const Ue=Oe(V),vt=v(V),Ut=Z.getImmediate({optional:!0});if(Ut){const Hr=yield Ut.getHeartbeatsHeader();Hr&&vt.append("x-firebase-client",Hr)}const qn={method:"POST",headers:vt,body:JSON.stringify({fid:me,authVersion:_e,appId:V.appId,sdkVersion:we})},yr=yield Tt(()=>fetch(Ue,qn));if(yr.ok){const Hr=yield yr.json();return{fid:Hr.fid||me,registrationStatus:2,refreshToken:Hr.refreshToken,authToken:st(Hr.authToken)}}throw yield It("Create Installation",yr)})).apply(this,arguments)}function xn(V){return new Promise(Z=>{setTimeout(Z,V)})}const Nt=/^[cdef][\w-]{21}$/;function tt(){try{const V=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(V),V[0]=112+V[0]%16;const me=function(V){return function(V){return btoa(String.fromCharCode(...V)).replace(/\+/g,"-").replace(/\//g,"_")}(V).substr(0,22)}(V);return Nt.test(me)?me:""}catch(V){return""}}function ct(V){return`${V.appName}!${V.appId}`}const Mt=new Map;function Gt(V,Z){const me=ct(V);wn(me,Z),function(V,Z){const me=(!On&&"BroadcastChannel"in self&&(On=new BroadcastChannel("[Firebase] FID Change"),On.onmessage=V=>{wn(V.data.key,V.data.fid)}),On);me&&me.postMessage({key:V,fid:Z}),0===Mt.size&&On&&(On.close(),On=null)}(me,Z)}function wn(V,Z){const me=Mt.get(V);if(me)for(const Ue of me)Ue(Z)}let On=null;const Ht="firebase-installations-store";let Gn=null;function Jn(){return Gn||(Gn=(0,oe.X3)("firebase-installations-database",1,{upgrade:(V,Z)=>{0===Z&&V.createObjectStore(Ht)}})),Gn}function En(V,Z){return er.apply(this,arguments)}function er(){return(er=(0,ie.Z)(function*(V,Z){const me=ct(V),vt=(yield Jn()).transaction(Ht,"readwrite"),Ut=vt.objectStore(Ht),mn=yield Ut.get(me);return yield Ut.put(Z,me),yield vt.done,(!mn||mn.fid!==Z.fid)&&Gt(V,Z.fid),Z})).apply(this,arguments)}function or(V){return sr.apply(this,arguments)}function sr(){return(sr=(0,ie.Z)(function*(V){const Z=ct(V),Ue=(yield Jn()).transaction(Ht,"readwrite");yield Ue.objectStore(Ht).delete(Z),yield Ue.done})).apply(this,arguments)}function pr(V,Z){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,ie.Z)(function*(V,Z){const me=ct(V),vt=(yield Jn()).transaction(Ht,"readwrite"),Ut=vt.objectStore(Ht),mn=yield Ut.get(me),qn=Z(mn);return void 0===qn?yield Ut.delete(me):yield Ut.put(qn,me),yield vt.done,qn&&(!mn||mn.fid!==qn.fid)&&Gt(V,qn.fid),qn})).apply(this,arguments)}function Nr(V){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,ie.Z)(function*(V){let Z;const me=yield pr(V.appConfig,Ue=>{const vt=hi(Ue),Ut=gr(V,vt);return Z=Ut.registrationPromise,Ut.installationEntry});return""===me.fid?{installationEntry:yield Z}:{installationEntry:me,registrationPromise:Z}})).apply(this,arguments)}function hi(V){return Yn(V||{fid:tt(),registrationStatus:0})}function gr(V,Z){if(0===Z.registrationStatus){if(!navigator.onLine)return{installationEntry:Z,registrationPromise:Promise.reject(Ge.create("app-offline"))};const me={fid:Z.fid,registrationStatus:1,registrationTime:Date.now()},Ue=function(V,Z){return Ft.apply(this,arguments)}(V,me);return{installationEntry:me,registrationPromise:Ue}}return 1===Z.registrationStatus?{installationEntry:Z,registrationPromise:ci(V)}:{installationEntry:Z}}function Ft(){return(Ft=(0,ie.Z)(function*(V,Z){try{const me=yield xt(V,Z);return En(V.appConfig,me)}catch(me){throw Fe(me)&&409===me.customData.serverCode?yield or(V.appConfig):yield En(V.appConfig,{fid:Z.fid,registrationStatus:0}),me}})).apply(this,arguments)}function ci(V){return ni.apply(this,arguments)}function ni(){return(ni=(0,ie.Z)(function*(V){let Z=yield Cn(V.appConfig);for(;1===Z.registrationStatus;)yield xn(100),Z=yield Cn(V.appConfig);if(0===Z.registrationStatus){const{installationEntry:me,registrationPromise:Ue}=yield Nr(V);return Ue||me}return Z})).apply(this,arguments)}function Cn(V){return pr(V,Z=>{if(!Z)throw Ge.create("installation-not-found");return Yn(Z)})}function Yn(V){return function(V){return 1===V.registrationStatus&&V.registrationTime+1e4<Date.now()}(V)?{fid:V.fid,registrationStatus:0}:V}function Cr(V,Z){return nr.apply(this,arguments)}function nr(){return(nr=(0,ie.Z)(function*({appConfig:V,heartbeatServiceProvider:Z},me){const Ue=mt(V,me),vt=Le(V,me),Ut=Z.getImmediate({optional:!0});if(Ut){const Hr=yield Ut.getHeartbeatsHeader();Hr&&vt.append("x-firebase-client",Hr)}const qn={method:"POST",headers:vt,body:JSON.stringify({installation:{sdkVersion:we,appId:V.appId}})},yr=yield Tt(()=>fetch(Ue,qn));if(yr.ok)return st(yield yr.json());throw yield It("Generate Auth Token",yr)})).apply(this,arguments)}function mt(V,{fid:Z}){return`${Oe(V)}/${Z}/authTokens:generate`}function He(V){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,ie.Z)(function*(V,Z=!1){let me;const Ue=yield pr(V.appConfig,Ut=>{if(!Wt(Ut))throw Ge.create("not-registered");const mn=Ut.authToken;if(!Z&&Be(mn))return Ut;if(1===mn.requestStatus)return me=at(V,Z),Ut;{if(!navigator.onLine)throw Ge.create("app-offline");const qn=it(Ut);return me=Qt(V,qn),qn}});return me?yield me:Ue.authToken})).apply(this,arguments)}function at(V,Z){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,ie.Z)(function*(V,Z){let me=yield wt(V.appConfig);for(;1===me.authToken.requestStatus;)yield xn(100),me=yield wt(V.appConfig);const Ue=me.authToken;return 0===Ue.requestStatus?He(V,Z):Ue})).apply(this,arguments)}function wt(V){return pr(V,Z=>{if(!Wt(Z))throw Ge.create("not-registered");return function(V){return 1===V.requestStatus&&V.requestTime+1e4<Date.now()}(Z.authToken)?Object.assign(Object.assign({},Z),{authToken:{requestStatus:0}}):Z})}function Qt(V,Z){return $t.apply(this,arguments)}function $t(){return($t=(0,ie.Z)(function*(V,Z){try{const me=yield Cr(V,Z),Ue=Object.assign(Object.assign({},Z),{authToken:me});return yield En(V.appConfig,Ue),me}catch(me){if(!Fe(me)||401!==me.customData.serverCode&&404!==me.customData.serverCode){const Ue=Object.assign(Object.assign({},Z),{authToken:{requestStatus:0}});yield En(V.appConfig,Ue)}else yield or(V.appConfig);throw me}})).apply(this,arguments)}function Wt(V){return void 0!==V&&2===V.registrationStatus}function Be(V){return 2===V.requestStatus&&!function(V){const Z=Date.now();return Z<V.creationTime||V.creationTime+V.expiresIn<Z+36e5}(V)}function it(V){const Z={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},V),{authToken:Z})}function Pe(){return(Pe=(0,ie.Z)(function*(V){const Z=V,{installationEntry:me,registrationPromise:Ue}=yield Nr(Z);return Ue?Ue.catch(console.error):He(Z).catch(console.error),me.fid})).apply(this,arguments)}function tn(){return(tn=(0,ie.Z)(function*(V,Z=!1){const me=V;return yield $n(me),(yield He(me,Z)).token})).apply(this,arguments)}function $n(V){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,ie.Z)(function*(V){const{registrationPromise:Z}=yield Nr(V);Z&&(yield Z)})).apply(this,arguments)}function Fn(V){return Ge.create("missing-app-config-values",{valueName:V})}const dn="installations";(0,L._registerComponent)(new ee.wA(dn,V=>{const Z=V.getProvider("app").getImmediate(),me=function(V){if(!V||!V.options)throw Fn("App Configuration");if(!V.name)throw Fn("App Name");const Z=["projectId","apiKey","appId"];for(const me of Z)if(!V.options[me])throw Fn(me);return{appName:V.name,projectId:V.options.projectId,apiKey:V.options.apiKey,appId:V.options.appId}}(Z);return{app:Z,appConfig:me,heartbeatServiceProvider:(0,L._getProvider)(Z,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,L._registerComponent)(new ee.wA("installations-internal",V=>{const Z=V.getProvider("app").getImmediate(),me=(0,L._getProvider)(Z,dn).getImmediate();return{getId:()=>function(V){return Pe.apply(this,arguments)}(me),getToken:vt=>function(V){return tn.apply(this,arguments)}(me,vt)}},"PRIVATE")),(0,L.registerVersion)(Se,ae),(0,L.registerVersion)(Se,ae,"esm2017");const Kr="@firebase/remote-config",Zr=new ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class zn{constructor(Z,me,Ue,vt){this.client=Z,this.storage=me,this.storageCache=Ue,this.logger=vt}isCachedDataFresh(Z,me){if(!me)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Ue=Date.now()-me,vt=Ue<=Z;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Ue}. Cache max age millis (minimumFetchIntervalMillis setting): ${Z}. Is cache hit: ${vt}.`),vt}fetch(Z){var me=this;return(0,ie.Z)(function*(){const[Ue,vt]=yield Promise.all([me.storage.getLastSuccessfulFetchTimestampMillis(),me.storage.getLastSuccessfulFetchResponse()]);if(vt&&me.isCachedDataFresh(Z.cacheMaxAgeMillis,Ue))return vt;Z.eTag=vt&&vt.eTag;const Ut=yield me.client.fetch(Z),mn=[me.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ut.status&&mn.push(me.storage.setLastSuccessfulFetchResponse(Ut)),yield Promise.all(mn),Ut})()}}function Xn(V=navigator){return V.languages&&V.languages[0]||V.language}class kr{constructor(Z,me,Ue,vt,Ut,mn){this.firebaseInstallations=Z,this.sdkVersion=me,this.namespace=Ue,this.projectId=vt,this.apiKey=Ut,this.appId=mn}fetch(Z){var me=this;return(0,ie.Z)(function*(){var Ue,vt,Ut;const[mn,qn]=yield Promise.all([me.firebaseInstallations.getId(),me.firebaseInstallations.getToken()]),Hr=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${me.projectId}/namespaces/${me.namespace}:fetch?key=${me.apiKey}`,$r={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":Z.eTag||"*"},_r={sdk_version:me.sdkVersion,app_instance_id:mn,app_instance_id_token:qn,app_id:me.appId,language_code:Xn()},xi={method:"POST",headers:$r,body:JSON.stringify(_r)},wi=fetch(Hr,xi),Qi=new Promise((na,Fa)=>{Z.signal.addEventListener(()=>{const Da=new Error("The operation was aborted.");Da.name="AbortError",Fa(Da)})});let za;try{yield Promise.race([wi,Qi]),za=yield wi}catch(na){let Fa="fetch-client-network";throw"AbortError"===(null===(Ue=na)||void 0===Ue?void 0:Ue.name)&&(Fa="fetch-timeout"),Zr.create(Fa,{originalErrorMessage:null===(vt=na)||void 0===vt?void 0:vt.message})}let qa=za.status;const Ho=za.headers.get("ETag")||void 0;let cl,ka;if(200===za.status){let na;try{na=yield za.json()}catch(Fa){throw Zr.create("fetch-client-parse",{originalErrorMessage:null===(Ut=Fa)||void 0===Ut?void 0:Ut.message})}cl=na.entries,ka=na.state}if("INSTANCE_STATE_UNSPECIFIED"===ka?qa=500:"NO_CHANGE"===ka?qa=304:("NO_TEMPLATE"===ka||"EMPTY_CONFIG"===ka)&&(cl={}),304!==qa&&200!==qa)throw Zr.create("fetch-status",{httpStatus:qa});return{status:qa,eTag:Ho,config:cl}})()}}class _i{constructor(Z,me){this.client=Z,this.storage=me}fetch(Z){var me=this;return(0,ie.Z)(function*(){const Ue=(yield me.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return me.attemptFetch(Z,Ue)})()}attemptFetch(Z,{throttleEndTimeMillis:me,backoffCount:Ue}){var vt=this;return(0,ie.Z)(function*(){yield function(V,Z){return new Promise((me,Ue)=>{const vt=Math.max(Z-Date.now(),0),Ut=setTimeout(me,vt);V.addEventListener(()=>{clearTimeout(Ut),Ue(Zr.create("fetch-throttle",{throttleEndTimeMillis:Z}))})})}(Z.signal,me);try{const Ut=yield vt.client.fetch(Z);return yield vt.storage.deleteThrottleMetadata(),Ut}catch(Ut){if(!function(V){if(!(V instanceof ue.ZR&&V.customData))return!1;const Z=Number(V.customData.httpStatus);return 429===Z||500===Z||503===Z||504===Z}(Ut))throw Ut;const mn={throttleEndTimeMillis:Date.now()+(0,ue.$s)(Ue),backoffCount:Ue+1};return yield vt.storage.setThrottleMetadata(mn),vt.attemptFetch(Z,mn)}})()}}class Yi{constructor(Z,me,Ue,vt,Ut){this.app=Z,this._client=me,this._storageCache=Ue,this._storage=vt,this._logger=Ut,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ss(V,Z){var me;const Ue=V.target.error||void 0;return Zr.create(Z,{originalErrorMessage:Ue&&(null===(me=Ue)||void 0===me?void 0:me.message)})}const cs="app_namespace_store";class Mr{constructor(Z,me,Ue,vt=function(){return new Promise((V,Z)=>{var me;try{const Ue=indexedDB.open("firebase_remote_config",1);Ue.onerror=vt=>{Z(Ss(vt,"storage-open"))},Ue.onsuccess=vt=>{V(vt.target.result)},Ue.onupgradeneeded=vt=>{0===vt.oldVersion&&vt.target.result.createObjectStore(cs,{keyPath:"compositeKey"})}}catch(Ue){Z(Zr.create("storage-open",{originalErrorMessage:null===(me=Ue)||void 0===me?void 0:me.message}))}})}()){this.appId=Z,this.appName=me,this.namespace=Ue,this.openDbPromise=vt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(Z){return this.set("last_fetch_status",Z)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(Z){return this.set("last_successful_fetch_timestamp_millis",Z)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(Z){return this.set("last_successful_fetch_response",Z)}getActiveConfig(){return this.get("active_config")}setActiveConfig(Z){return this.set("active_config",Z)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(Z){return this.set("active_config_etag",Z)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(Z){return this.set("throttle_metadata",Z)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(Z){var me=this;return(0,ie.Z)(function*(){const Ue=yield me.openDbPromise;return new Promise((vt,Ut)=>{var mn;const yr=Ue.transaction([cs],"readonly").objectStore(cs),Hr=me.createCompositeKey(Z);try{const $r=yr.get(Hr);$r.onerror=_r=>{Ut(Ss(_r,"storage-get"))},$r.onsuccess=_r=>{const xi=_r.target.result;vt(xi?xi.value:void 0)}}catch($r){Ut(Zr.create("storage-get",{originalErrorMessage:null===(mn=$r)||void 0===mn?void 0:mn.message}))}})})()}set(Z,me){var Ue=this;return(0,ie.Z)(function*(){const vt=yield Ue.openDbPromise;return new Promise((Ut,mn)=>{var qn;const Hr=vt.transaction([cs],"readwrite").objectStore(cs),$r=Ue.createCompositeKey(Z);try{const _r=Hr.put({compositeKey:$r,value:me});_r.onerror=xi=>{mn(Ss(xi,"storage-set"))},_r.onsuccess=()=>{Ut()}}catch(_r){mn(Zr.create("storage-set",{originalErrorMessage:null===(qn=_r)||void 0===qn?void 0:qn.message}))}})})()}delete(Z){var me=this;return(0,ie.Z)(function*(){const Ue=yield me.openDbPromise;return new Promise((vt,Ut)=>{var mn;const yr=Ue.transaction([cs],"readwrite").objectStore(cs),Hr=me.createCompositeKey(Z);try{const $r=yr.delete(Hr);$r.onerror=_r=>{Ut(Ss(_r,"storage-delete"))},$r.onsuccess=()=>{vt()}}catch($r){Ut(Zr.create("storage-delete",{originalErrorMessage:null===(mn=$r)||void 0===mn?void 0:mn.message}))}})})()}createCompositeKey(Z){return[this.appId,this.appName,this.namespace,Z].join()}}class Js{constructor(Z){this.storage=Z}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var Z=this;return(0,ie.Z)(function*(){const me=Z.storage.getLastFetchStatus(),Ue=Z.storage.getLastSuccessfulFetchTimestampMillis(),vt=Z.storage.getActiveConfig(),Ut=yield me;Ut&&(Z.lastFetchStatus=Ut);const mn=yield Ue;mn&&(Z.lastSuccessfulFetchTimestampMillis=mn);const qn=yield vt;qn&&(Z.activeConfig=qn)})()}setLastFetchStatus(Z){return this.lastFetchStatus=Z,this.storage.setLastFetchStatus(Z)}setLastSuccessfulFetchTimestampMillis(Z){return this.lastSuccessfulFetchTimestampMillis=Z,this.storage.setLastSuccessfulFetchTimestampMillis(Z)}setActiveConfig(Z){return this.activeConfig=Z,this.storage.setActiveConfig(Z)}}function ms(){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,ie.Z)(function*(){if(!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch(V){return!1}})).apply(this,arguments)}(0,L._registerComponent)(new ee.wA("remote-config",function(Z,{instanceIdentifier:me}){const Ue=Z.getProvider("app").getImmediate(),vt=Z.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Zr.create("registration-window");if(!(0,ue.hl)())throw Zr.create("indexed-db-unavailable");const{projectId:Ut,apiKey:mn,appId:qn}=Ue.options;if(!Ut)throw Zr.create("registration-project-id");if(!mn)throw Zr.create("registration-api-key");if(!qn)throw Zr.create("registration-app-id");const yr=new Mr(qn,Ue.name,me=me||"firebase"),Hr=new Js(yr),$r=new Ie.Yd(Kr);$r.logLevel=Ie.in.ERROR;const _r=new kr(vt,L.SDK_VERSION,me,Ut,mn,qn),xi=new _i(_r,yr),wi=new zn(xi,yr,Hr,$r),Qi=new Yi(Ue,wi,Hr,yr,$r);return function(V){const Z=(0,ue.m9)(V);Z._initializePromise||(Z._initializePromise=Z._storageCache.loadFromStorage().then(()=>{Z._isInitializationComplete=!0}))}(Qi),Qi},"PUBLIC").setMultipleInstances(!0)),(0,L.registerVersion)(Kr,"0.3.14"),(0,L.registerVersion)(Kr,"0.3.14","esm2017");const to="/firebase-messaging-sw.js",Ki="/firebase-cloud-messaging-push-scope",ai="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Xi="google.c.a.c_id",no="google.c.a.c_l",zs="google.c.a.ts",is="google.c.a.e";var As=(()=>{return(V=As||(As={})).PUSH_RECEIVED="push-received",V.NOTIFICATION_CLICKED="notification-clicked",As;var V})();function Ei(V){const Z=new Uint8Array(V);return btoa(String.fromCharCode(...Z)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ko(V){const me=(V+"=".repeat((4-V.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Ue=atob(me),vt=new Uint8Array(Ue.length);for(let Ut=0;Ut<Ue.length;++Ut)vt[Ut]=Ue.charCodeAt(Ut);return vt}const xs="fcm_token_details_db",Bo="fcm_token_object_Store";function Dr(V){return qs.apply(this,arguments)}function qs(){return qs=(0,ie.Z)(function*(V){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ut=>Ut.name).includes(xs))return null;let Z=null;return(yield(0,oe.X3)(xs,5,{upgrade:(Ue=(0,ie.Z)(function*(vt,Ut,mn,qn){var yr;if(Ut<2||!vt.objectStoreNames.contains(Bo))return;const Hr=qn.objectStore(Bo),$r=yield Hr.index("fcmSenderId").get(V);if(yield Hr.clear(),$r)if(2===Ut){const _r=$r;if(!_r.auth||!_r.p256dh||!_r.endpoint)return;Z={token:_r.fcmToken,createTime:null!==(yr=_r.createTime)&&void 0!==yr?yr:Date.now(),subscriptionOptions:{auth:_r.auth,p256dh:_r.p256dh,endpoint:_r.endpoint,swScope:_r.swScope,vapidKey:"string"==typeof _r.vapidKey?_r.vapidKey:Ei(_r.vapidKey)}}}else if(3===Ut){const _r=$r;Z={token:_r.fcmToken,createTime:_r.createTime,subscriptionOptions:{auth:Ei(_r.auth),p256dh:Ei(_r.p256dh),endpoint:_r.endpoint,swScope:_r.swScope,vapidKey:Ei(_r.vapidKey)}}}else if(4===Ut){const _r=$r;Z={token:_r.fcmToken,createTime:_r.createTime,subscriptionOptions:{auth:Ei(_r.auth),p256dh:Ei(_r.p256dh),endpoint:_r.endpoint,swScope:_r.swScope,vapidKey:Ei(_r.vapidKey)}}}}),function(Ut,mn,qn,yr){return Ue.apply(this,arguments)})})).close(),yield(0,oe.Lj)(xs),yield(0,oe.Lj)("fcm_vapid_details_db"),yield(0,oe.Lj)("undefined"),ro(Z)?Z:null;var Ue}),qs.apply(this,arguments)}function ro(V){if(!V||!V.subscriptionOptions)return!1;const{subscriptionOptions:Z}=V;return"number"==typeof V.createTime&&V.createTime>0&&"string"==typeof V.token&&V.token.length>0&&"string"==typeof Z.auth&&Z.auth.length>0&&"string"==typeof Z.p256dh&&Z.p256dh.length>0&&"string"==typeof Z.endpoint&&Z.endpoint.length>0&&"string"==typeof Z.swScope&&Z.swScope.length>0&&"string"==typeof Z.vapidKey&&Z.vapidKey.length>0}const yi="firebase-messaging-store";let Ci=null;function G(){return Ci||(Ci=(0,oe.X3)("firebase-messaging-database",1,{upgrade:(V,Z)=>{0===Z&&V.createObjectStore(yi)}})),Ci}function le(V){return Q.apply(this,arguments)}function Q(){return(Q=(0,ie.Z)(function*(V){const Z=q(V),Ue=yield(yield G()).transaction(yi).objectStore(yi).get(Z);if(Ue)return Ue;{const vt=yield Dr(V.appConfig.senderId);if(vt)return yield De(V,vt),vt}})).apply(this,arguments)}function De(V,Z){return qe.apply(this,arguments)}function qe(){return(qe=(0,ie.Z)(function*(V,Z){const me=q(V),vt=(yield G()).transaction(yi,"readwrite");return yield vt.objectStore(yi).put(Z,me),yield vt.done,Z})).apply(this,arguments)}function Ct(V){return ln.apply(this,arguments)}function ln(){return(ln=(0,ie.Z)(function*(V){const Z=q(V),Ue=(yield G()).transaction(yi,"readwrite");yield Ue.objectStore(yi).delete(Z),yield Ue.done})).apply(this,arguments)}function q({appConfig:V}){return V.appId}const P=new ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function de(V,Z){return _t.apply(this,arguments)}function _t(){return(_t=(0,ie.Z)(function*(V,Z){var me;const Ue=yield ii(V),vt=rr(Z),Ut={method:"POST",headers:Ue,body:JSON.stringify(vt)};let mn;try{mn=yield(yield fetch(mi(V.appConfig),Ut)).json()}catch(qn){throw P.create("token-subscribe-failed",{errorInfo:null===(me=qn)||void 0===me?void 0:me.toString()})}if(mn.error)throw P.create("token-subscribe-failed",{errorInfo:mn.error.message});if(!mn.token)throw P.create("token-subscribe-no-token");return mn.token})).apply(this,arguments)}function bn(V,Z){return cr.apply(this,arguments)}function cr(){return(cr=(0,ie.Z)(function*(V,Z){var me;const Ue=yield ii(V),vt=rr(Z.subscriptionOptions),Ut={method:"PATCH",headers:Ue,body:JSON.stringify(vt)};let mn;try{mn=yield(yield fetch(`${mi(V.appConfig)}/${Z.token}`,Ut)).json()}catch(qn){throw P.create("token-update-failed",{errorInfo:null===(me=qn)||void 0===me?void 0:me.toString()})}if(mn.error)throw P.create("token-update-failed",{errorInfo:mn.error.message});if(!mn.token)throw P.create("token-update-no-token");return mn.token})).apply(this,arguments)}function Qr(V,Z){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,ie.Z)(function*(V,Z){var me;const vt={method:"DELETE",headers:yield ii(V)};try{const mn=yield(yield fetch(`${mi(V.appConfig)}/${Z}`,vt)).json();if(mn.error)throw P.create("token-unsubscribe-failed",{errorInfo:mn.error.message})}catch(Ut){throw P.create("token-unsubscribe-failed",{errorInfo:null===(me=Ut)||void 0===me?void 0:me.toString()})}})).apply(this,arguments)}function mi({projectId:V}){return`https://fcmregistrations.googleapis.com/v1/projects/${V}/registrations`}function ii(V){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,ie.Z)(function*({appConfig:V,installations:Z}){const me=yield Z.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":V.apiKey,"x-goog-firebase-installations-auth":`FIS ${me}`})})).apply(this,arguments)}function rr({p256dh:V,auth:Z,endpoint:me,vapidKey:Ue}){const vt={web:{endpoint:me,auth:Z,p256dh:V}};return Ue!==ai&&(vt.web.applicationPubKey=Ue),vt}const aa=6048e5;function yo(V){return $o.apply(this,arguments)}function $o(){return($o=(0,ie.Z)(function*(V){const Z=yield So(V.swRegistration,V.vapidKey),me={vapidKey:V.vapidKey,swScope:V.swRegistration.scope,endpoint:Z.endpoint,auth:Ei(Z.getKey("auth")),p256dh:Ei(Z.getKey("p256dh"))},Ue=yield le(V.firebaseDependencies);if(Ue){if(Ms(Ue.subscriptionOptions,me))return Date.now()>=Ue.createTime+aa?Zo(V,{token:Ue.token,createTime:Date.now(),subscriptionOptions:me}):Ue.token;try{yield Qr(V.firebaseDependencies,Ue.token)}catch(vt){console.warn(vt)}return hn(V.firebaseDependencies,me)}return hn(V.firebaseDependencies,me)})).apply(this,arguments)}function Ma(V){return To.apply(this,arguments)}function To(){return(To=(0,ie.Z)(function*(V){const Z=yield le(V.firebaseDependencies);Z&&(yield Qr(V.firebaseDependencies,Z.token),yield Ct(V.firebaseDependencies));const me=yield V.swRegistration.pushManager.getSubscription();return!me||me.unsubscribe()})).apply(this,arguments)}function Zo(V,Z){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,ie.Z)(function*(V,Z){try{const me=yield bn(V.firebaseDependencies,Z),Ue=Object.assign(Object.assign({},Z),{token:me,createTime:Date.now()});return yield De(V.firebaseDependencies,Ue),me}catch(me){throw yield Ma(V),me}})).apply(this,arguments)}function hn(V,Z){return br.apply(this,arguments)}function br(){return(br=(0,ie.Z)(function*(V,Z){const Ue={token:yield de(V,Z),createTime:Date.now(),subscriptionOptions:Z};return yield De(V,Ue),Ue.token})).apply(this,arguments)}function So(V,Z){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,ie.Z)(function*(V,Z){return(yield V.pushManager.getSubscription())||V.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ko(Z)})})).apply(this,arguments)}function Ms(V,Z){return Z.vapidKey===V.vapidKey&&Z.endpoint===V.endpoint&&Z.auth===V.auth&&Z.p256dh===V.p256dh}function ss(V){const Z={from:V.from,collapseKey:V.collapse_key,messageId:V.fcmMessageId};return function(V,Z){if(!Z.notification)return;V.notification={};const me=Z.notification.title;me&&(V.notification.title=me);const Ue=Z.notification.body;Ue&&(V.notification.body=Ue);const vt=Z.notification.image;vt&&(V.notification.image=vt)}(Z,V),function(V,Z){!Z.data||(V.data=Z.data)}(Z,V),function(V,Z){var me,Ue,vt,Ut,mn;if(!Z.fcmOptions&&!(null===(me=Z.notification)||void 0===me?void 0:me.click_action))return;V.fcmOptions={};const qn=null!==(vt=null===(Ue=Z.fcmOptions)||void 0===Ue?void 0:Ue.link)&&void 0!==vt?vt:null===(Ut=Z.notification)||void 0===Ut?void 0:Ut.click_action;qn&&(V.fcmOptions.link=qn);const yr=null===(mn=Z.fcmOptions)||void 0===mn?void 0:mn.analytics_label;yr&&(V.fcmOptions.analyticsLabel=yr)}(Z,V),Z}function ja(V){return"object"==typeof V&&!!V&&Xi in V}function _s(V,Z){const me=[];for(let Ue=0;Ue<V.length;Ue++)me.push(V.charAt(Ue)),Ue<Z.length&&me.push(Z.charAt(Ue));return me.join("")}function $s(V){return P.create("missing-app-config-values",{valueName:V})}_s("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),_s("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Bi{constructor(Z,me,Ue){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const vt=function(V){if(!V||!V.options)throw $s("App Configuration Object");if(!V.name)throw $s("App Name");const Z=["projectId","apiKey","appId","messagingSenderId"],{options:me}=V;for(const Ue of Z)if(!me[Ue])throw $s(Ue);return{appName:V.name,projectId:me.projectId,apiKey:me.apiKey,appId:me.appId,senderId:me.messagingSenderId}}(Z);this.firebaseDependencies={app:Z,appConfig:vt,installations:me,analyticsProvider:Ue}}_delete(){return Promise.resolve()}}function Us(V){return _a.apply(this,arguments)}function _a(){return(_a=(0,ie.Z)(function*(V){var Z;try{V.swRegistration=yield navigator.serviceWorker.register(to,{scope:Ki}),V.swRegistration.update().catch(()=>{})}catch(me){throw P.create("failed-service-worker-registration",{browserErrorMessage:null===(Z=me)||void 0===Z?void 0:Z.message})}})).apply(this,arguments)}function un(V,Z){return Si.apply(this,arguments)}function Si(){return(Si=(0,ie.Z)(function*(V,Z){if(!Z&&!V.swRegistration&&(yield Us(V)),Z||!V.swRegistration){if(!(Z instanceof ServiceWorkerRegistration))throw P.create("invalid-sw-registration");V.swRegistration=Z}})).apply(this,arguments)}function Ys(V,Z){return os.apply(this,arguments)}function os(){return(os=(0,ie.Z)(function*(V,Z){Z?V.vapidKey=Z:V.vapidKey||(V.vapidKey=ai)})).apply(this,arguments)}function ds(){return(ds=(0,ie.Z)(function*(V,Z){if(!navigator)throw P.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw P.create("permission-blocked");return yield Ys(V,null==Z?void 0:Z.vapidKey),yield un(V,null==Z?void 0:Z.serviceWorkerRegistration),yo(V)})).apply(this,arguments)}function Ks(V,Z,me){return so.apply(this,arguments)}function so(){return(so=(0,ie.Z)(function*(V,Z,me){const Ue=hs(Z);(yield V.firebaseDependencies.analyticsProvider.get()).logEvent(Ue,{message_id:me[Xi],message_name:me[no],message_time:me[zs],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function hs(V){switch(V){case As.NOTIFICATION_CLICKED:return"notification_open";case As.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function js(){return(js=(0,ie.Z)(function*(V,Z){const me=Z.data;if(!me.isFirebaseMessaging)return;V.onMessageHandler&&me.messageType===As.PUSH_RECEIVED&&("function"==typeof V.onMessageHandler?V.onMessageHandler(ss(me)):V.onMessageHandler.next(ss(me)));const Ue=me.data;ja(Ue)&&"1"===Ue[is]&&(yield Ks(V,me.messageType,Ue))})).apply(this,arguments)}const oo="@firebase/messaging";function la(){return ao.apply(this,arguments)}function ao(){return(ao=(0,ie.Z)(function*(){try{yield(0,ue.eu)()}catch(V){return!1}return"undefined"!=typeof window&&(0,ue.hl)()&&(0,ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,L._registerComponent)(new ee.wA("messaging",V=>{const Z=new Bi(V.getProvider("app").getImmediate(),V.getProvider("installations-internal").getImmediate(),V.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",me=>function(V,Z){return js.apply(this,arguments)}(Z,me)),Z},"PUBLIC")),(0,L._registerComponent)(new ee.wA("messaging-internal",V=>{const Z=V.getProvider("messaging").getImmediate();return{getToken:Ue=>function(V,Z){return ds.apply(this,arguments)}(Z,Ue)}},"PRIVATE")),(0,L.registerVersion)(oo,"0.9.19"),(0,L.registerVersion)(oo,"0.9.19","esm2017");const fn="analytics",lr="firebase_id",ui="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",qt="https://www.googletagmanager.com/gtag/js",dr=new Ie.Yd("@firebase/analytics");function Ii(V){return Promise.all(V.map(Z=>Z.catch(me=>me)))}function es(V,Z){const me=document.createElement("script");me.src=`${qt}?l=${V}&id=${Z}`,me.async=!0,document.head.appendChild(me)}function Kn(V,Z,me,Ue,vt,Ut){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,ie.Z)(function*(V,Z,me,Ue,vt,Ut){const mn=Ue[vt];try{if(mn)yield Z[mn];else{const yr=(yield Ii(me)).find(Hr=>Hr.measurementId===vt);yr&&(yield Z[yr.appId])}}catch(qn){dr.error(qn)}V("config",vt,Ut)})).apply(this,arguments)}function Ln(V,Z,me,Ue,vt){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,ie.Z)(function*(V,Z,me,Ue,vt){try{let Ut=[];if(vt&&vt.send_to){let mn=vt.send_to;Array.isArray(mn)||(mn=[mn]);const qn=yield Ii(me);for(const yr of mn){const Hr=qn.find(_r=>_r.measurementId===yr),$r=Hr&&Z[Hr.appId];if(!$r){Ut=[];break}Ut.push($r)}}0===Ut.length&&(Ut=Object.values(Z)),yield Promise.all(Ut),V("event",Ue,vt||{})}catch(Ut){dr.error(Ut)}})).apply(this,arguments)}function Il(V){const Z=window.document.getElementsByTagName("script");for(const me of Object.values(Z))if(me.src&&me.src.includes(qt)&&me.src.includes(V))return me;return null}const lo=new ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ua=new class{constructor(Z={},me=1e3){this.throttleMetadata=Z,this.intervalMillis=me}getThrottleMetadata(Z){return this.throttleMetadata[Z]}setThrottleMetadata(Z,me){this.throttleMetadata[Z]=me}deleteThrottleMetadata(Z){delete this.throttleMetadata[Z]}};function nl(V){return new Headers({Accept:"application/json","x-goog-api-key":V})}function rl(V){return ba.apply(this,arguments)}function ba(){return(ba=(0,ie.Z)(function*(V){var Z;const{appId:me,apiKey:Ue}=V,vt={method:"GET",headers:nl(Ue)},Ut=ui.replace("{app-id}",me),mn=yield fetch(Ut,vt);if(200!==mn.status&&304!==mn.status){let qn="";try{const yr=yield mn.json();(null===(Z=yr.error)||void 0===Z?void 0:Z.message)&&(qn=yr.error.message)}catch(yr){}throw lo.create("config-fetch-failed",{httpStatus:mn.status,responseMessage:qn})}return mn.json()})).apply(this,arguments)}function Qo(V){return fr.apply(this,arguments)}function fr(){return(fr=(0,ie.Z)(function*(V,Z=ua,me){const{appId:Ue,apiKey:vt,measurementId:Ut}=V.options;if(!Ue)throw lo.create("no-app-id");if(!vt){if(Ut)return{measurementId:Ut,appId:Ue};throw lo.create("no-api-key")}const mn=Z.getThrottleMetadata(Ue)||{backoffCount:0,throttleEndTimeMillis:Date.now()},qn=new z;return setTimeout((0,ie.Z)(function*(){qn.abort()}),void 0!==me?me:6e4),uo({appId:Ue,apiKey:vt,measurementId:Ut},mn,qn,Z)})).apply(this,arguments)}function uo(V,Z,me){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,ie.Z)(function*(V,{throttleEndTimeMillis:Z,backoffCount:me},Ue,vt=ua){var Ut,mn;const{appId:qn,measurementId:yr}=V;try{yield bi(Ue,Z)}catch(Hr){if(yr)return dr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yr} provided in the "measurementId" field in the local Firebase config. [${null===(Ut=Hr)||void 0===Ut?void 0:Ut.message}]`),{appId:qn,measurementId:yr};throw Hr}try{const Hr=yield rl(V);return vt.deleteThrottleMetadata(qn),Hr}catch(Hr){const $r=Hr;if(!fe($r)){if(vt.deleteThrottleMetadata(qn),yr)return dr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yr} provided in the "measurementId" field in the local Firebase config. [${null==$r?void 0:$r.message}]`),{appId:qn,measurementId:yr};throw Hr}const _r=503===Number(null===(mn=null==$r?void 0:$r.customData)||void 0===mn?void 0:mn.httpStatus)?(0,ue.$s)(me,vt.intervalMillis,30):(0,ue.$s)(me,vt.intervalMillis),xi={throttleEndTimeMillis:Date.now()+_r,backoffCount:me+1};return vt.setThrottleMetadata(qn,xi),dr.debug(`Calling attemptFetch again in ${_r} millis`),uo(V,xi,Ue,vt)}})).apply(this,arguments)}function bi(V,Z){return new Promise((me,Ue)=>{const vt=Math.max(Z-Date.now(),0),Ut=setTimeout(me,vt);V.addEventListener(()=>{clearTimeout(Ut),Ue(lo.create("fetch-throttle",{throttleEndTimeMillis:Z}))})})}function fe(V){if(!(V instanceof ue.ZR&&V.customData))return!1;const Z=Number(V.customData.httpStatus);return 429===Z||500===Z||503===Z||504===Z}class z{constructor(){this.listeners=[]}addEventListener(Z){this.listeners.push(Z)}abort(){this.listeners.forEach(Z=>Z())}}let K,Jo;function ut(){return(ut=(0,ie.Z)(function*(V,Z,me,Ue,vt){if(vt&&vt.global)V("event",me,Ue);else{const Ut=yield Z;V("event",me,Object.assign(Object.assign({},Ue),{send_to:Ut}))}})).apply(this,arguments)}function k(V){Jo=V}function S(V){K=V}function T(){return H.apply(this,arguments)}function H(){return(H=(0,ie.Z)(function*(){var V;if(!(0,ue.hl)())return dr.warn(lo.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ue.eu)()}catch(Z){return dr.warn(lo.create("indexeddb-unavailable",{errorInfo:null===(V=Z)||void 0===V?void 0:V.toString()}).message),!1}return!0})).apply(this,arguments)}function ye(){return(ye=(0,ie.Z)(function*(V,Z,me,Ue,vt,Ut,mn){var qn;const yr=Qo(V);yr.then(wi=>{me[wi.measurementId]=wi.appId,V.options.measurementId&&wi.measurementId!==V.options.measurementId&&dr.warn(`The measurement ID in the local Firebase config (${V.options.measurementId}) does not match the measurement ID fetched from the server (${wi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(wi=>dr.error(wi)),Z.push(yr);const Hr=T().then(wi=>{if(wi)return Ue.getId()}),[$r,_r]=yield Promise.all([yr,Hr]);Il(Ut)||es(Ut,$r.measurementId),Jo&&(vt("consent","default",Jo),k(void 0)),vt("js",new Date);const xi=null!==(qn=null==mn?void 0:mn.config)&&void 0!==qn?qn:{};return xi.origin="firebase",xi.update=!0,null!=_r&&(xi[lr]=_r),vt("config",$r.measurementId,xi),K&&(vt("set",K),S(void 0)),$r.measurementId})).apply(this,arguments)}class We{constructor(Z){this.app=Z}_delete(){return delete ge[this.app.options.appId],Promise.resolve()}}let ge={},Jt=[];const kn={};let ti,Fr,ei="dataLayer",fs=!1;function xo(V,Z,me){!function(){const V=[];if((0,ue.ru)()&&V.push("This is a browser extension environment."),(0,ue.zI)()||V.push("Cookies are not available."),V.length>0){const Z=V.map((Ue,vt)=>`(${vt+1}) ${Ue}`).join(" "),me=lo.create("invalid-analytics-context",{errorInfo:Z});dr.warn(me.message)}}();const Ue=V.options.appId;if(!Ue)throw lo.create("no-app-id");if(!V.options.apiKey){if(!V.options.measurementId)throw lo.create("no-api-key");dr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${V.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ge[Ue])throw lo.create("already-exists",{id:Ue});if(!fs){!function(V){let Z=[];Array.isArray(window[V])?Z=window[V]:window[V]=Z}(ei);const{wrappedGtag:Ut,gtagCore:mn}=function(V,Z,me,Ue,vt){let Ut=function(...mn){window[Ue].push(arguments)};return window[vt]&&"function"==typeof window[vt]&&(Ut=window[vt]),window[vt]=function(V,Z,me,Ue){function Ut(){return(Ut=(0,ie.Z)(function*(mn,qn,yr){try{"event"===mn?yield Ln(V,Z,me,qn,yr):"config"===mn?yield Kn(V,Z,me,Ue,qn,yr):"consent"===mn?V("consent","update",yr):V("set",qn)}catch(Hr){dr.error(Hr)}})).apply(this,arguments)}return function(mn,qn,yr){return Ut.apply(this,arguments)}}(Ut,V,Z,me),{gtagCore:Ut,wrappedGtag:window[vt]}}(ge,Jt,kn,ei,"gtag");Fr=Ut,ti=mn,fs=!0}return ge[Ue]=function(V,Z,me,Ue,vt,Ut,mn){return ye.apply(this,arguments)}(V,Jt,kn,Z,ti,ei,me),new We(V)}function sl(){return da.apply(this,arguments)}function da(){return(da=(0,ie.Z)(function*(){if((0,ue.ru)()||!(0,ue.zI)()||!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch(V){return!1}})).apply(this,arguments)}const _o="@firebase/analytics";(0,L._registerComponent)(new ee.wA(fn,(Z,{options:me})=>xo(Z.getProvider("app").getImmediate(),Z.getProvider("installations-internal").getImmediate(),me),"PUBLIC")),(0,L._registerComponent)(new ee.wA("analytics-internal",function(Z){try{const me=Z.getProvider(fn).getImmediate();return{logEvent:(Ue,vt,Ut)=>function(V,Z,me,Ue){V=(0,ue.m9)(V),function(V,Z,me,Ue,vt){return ut.apply(this,arguments)}(Fr,ge[V.app.options.appId],Z,me,Ue).catch(vt=>dr.error(vt))}(me,Ue,vt,Ut)}}catch(me){throw lo.create("interop-component-reg-failed",{reason:me})}},"PRIVATE")),(0,L.registerVersion)(_o,"0.8.3"),(0,L.registerVersion)(_o,"0.8.3","esm2017");var vu=F(7771),jo=F(3637),Wi=F(8891),al=F(3342),gs=F(3101),ll=F(309);const wa=new E.GfV("7.4.1"),Nl="__angularfire_symbol__analyticsIsSupportedValue",ho="__angularfire_symbol__analyticsIsSupported",Es="__angularfire_symbol__remoteConfigIsSupportedValue",vo="__angularfire_symbol__remoteConfigIsSupported",Oa="__angularfire_symbol__messagingIsSupportedValue",Eo="__angularfire_symbol__messagingIsSupported";function ha(V,Z,me){if(Z){if(1===Z.length)return Z[0];const Ut=Z.filter(mn=>mn.app===me);if(1===Ut.length)return Ut[0]}return me.container.getProvider(V).getImmediate({optional:!0})}globalThis[ho]||(globalThis[ho]=sl().then(V=>globalThis[Nl]=V).catch(()=>globalThis[Nl]=!1)),globalThis[Eo]||(globalThis[Eo]=la().then(V=>globalThis[Oa]=V).catch(()=>globalThis[Oa]=!1)),globalThis[vo]||(globalThis[vo]=ms().then(V=>globalThis[Es]=V).catch(()=>globalThis[Es]=!1));const mc=(V,Z)=>{const me=Z?[Z]:(0,O.C6)(),Ue=[];return me.forEach(vt=>{vt.container.getProvider(V).instances.forEach(mn=>{Ue.includes(mn)||Ue.push(mn)})}),Ue};function fo(){}class po{constructor(Z,me=vu.N){this.zone=Z,this.delegate=me}now(){return this.delegate.now()}schedule(Z,me,Ue){const vt=this.zone;return this.delegate.schedule(function(mn){vt.runGuarded(()=>{Z.apply(this,[mn])})},me,Ue)}}class ea{constructor(Z){this.zone=Z,this.task=null}call(Z,me){const Ue=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fo,{},fo,fo)),me.pipe((0,al.b)({next:Ue,complete:Ue,error:Ue})).subscribe(Z).add(Ue)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Pa=(()=>{class V{constructor(me){this.ngZone=me,this.outsideAngular=me.runOutsideAngular(()=>new po(Zone.current)),this.insideAngular=me.run(()=>new po(Zone.current,jo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return V.\u0275fac=function(me){return new(me||V)(E.LFG(E.R0b))},V.\u0275prov=E.Yz7({token:V,factory:V.\u0275fac,providedIn:"root"}),V})();function bo(){const V=globalThis.\u0275AngularFireScheduler;if(!V)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return V}function wl(V){return bo().ngZone.runOutsideAngular(()=>V())}function ta(V){return bo().ngZone.run(()=>V())}function Dl(V){return bo(),function(V){return function(me){return(me=me.lift(new ea(V.ngZone))).pipe((0,gs.R)(V.outsideAngular),(0,ll.QV)(V.insideAngular))}}(bo())(V)}const kl=(V,Z)=>function(){const Ue=arguments;return Z&&setTimeout(()=>{"scheduled"===Z.state&&Z.invoke()},10),ta(()=>V.apply(void 0,Ue))},Tl=(V,Z)=>function(){let me;const Ue=arguments;for(let Ut=0;Ut<arguments.length;Ut++)"function"==typeof Ue[Ut]&&(Z&&(me||(me=ta(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fo,{},fo,fo)))),Ue[Ut]=kl(Ue[Ut],me));const vt=wl(()=>V.apply(this,Ue));if(!Z){if(vt instanceof Wi.y){const Ut=bo();return vt.pipe((0,gs.R)(Ut.outsideAngular),(0,ll.QV)(Ut.insideAngular))}return ta(()=>vt)}return vt instanceof Wi.y?vt.pipe(Dl):vt instanceof Promise?ta(()=>new Promise((Ut,mn)=>vt.then(qn=>ta(()=>Ut(qn)),qn=>ta(()=>mn(qn))))):"function"==typeof vt&&me?function(){return setTimeout(()=>{me&&"scheduled"===me.state&&me.invoke()},10),vt.apply(this,arguments)}:ta(()=>vt)}},665:(cn,rt,F)=>{"use strict";F.d(rt,{qu:()=>Ct,u:()=>Gs,sg:()=>Jr,u5:()=>Q,JU:()=>we,a5:()=>Jn,JJ:()=>sr,JL:()=>pr,UX:()=>De,kI:()=>en,_Y:()=>W});var E=F(7716),O=F(8583),ie=F(8891),L=F(9796),ue=F(8002),ee=F(1555),Ie=F(4402);function Se(q,B){return new ie.y(P=>{const de=q.length;if(0===de)return void P.complete();const _t=new Array(de);let bn=0,cr=0;for(let Qr=0;Qr<de;Qr++){const Vi=(0,Ie.D)(q[Qr]);let mi=!1;P.add(Vi.subscribe({next:ii=>{mi||(mi=!0,cr++),_t[Qr]=ii},error:ii=>P.error(ii),complete:()=>{bn++,(bn===de||!mi)&&(cr===de&&P.next(B?B.reduce((ii,Wr,rr)=>(ii[Wr]=_t[rr],ii),{}):_t),P.complete())}}))}})}let ae=(()=>{class q{constructor(P,de){this._renderer=P,this._elementRef=de,this.onChange=_t=>{},this.onTouched=()=>{}}setProperty(P,de){this._renderer.setProperty(this._elementRef.nativeElement,P,de)}registerOnTouched(P){this.onTouched=P}registerOnChange(P){this.onChange=P}setDisabledState(P){this.setProperty("disabled",P)}}return q.\u0275fac=function(P){return new(P||q)(E.Y36(E.Qsj),E.Y36(E.SBq))},q.\u0275dir=E.lG2({type:q}),q})(),ve=(()=>{class q extends ae{}return q.\u0275fac=function(){let B;return function(de){return(B||(B=E.n5z(q)))(de||q)}}(),q.\u0275dir=E.lG2({type:q,features:[E.qOj]}),q})();const we=new E.OlP("NgValueAccessor"),lt={provide:we,useExisting:(0,E.Gpc)(()=>Re),multi:!0},Ke=new E.OlP("CompositionEventMode");let Re=(()=>{class q extends ae{constructor(P,de,_t){super(P,de),this._compositionMode=_t,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const q=(0,O.q)()?(0,O.q)().getUserAgent():"";return/android (\d+)/.test(q.toLowerCase())}())}writeValue(P){this.setProperty("value",null==P?"":P)}_handleInput(P){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(P)}_compositionStart(){this._composing=!0}_compositionEnd(P){this._composing=!1,this._compositionMode&&this.onChange(P)}}return q.\u0275fac=function(P){return new(P||q)(E.Y36(E.Qsj),E.Y36(E.SBq),E.Y36(Ke,8))},q.\u0275dir=E.lG2({type:q,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(P,de){1&P&&E.NdJ("input",function(bn){return de._handleInput(bn.target.value)})("blur",function(){return de.onTouched()})("compositionstart",function(){return de._compositionStart()})("compositionend",function(bn){return de._compositionEnd(bn.target.value)})},features:[E._Bn([lt]),E.qOj]}),q})();function Ge(q){return null==q||0===q.length}function Fe(q){return null!=q&&"number"==typeof q.length}const Oe=new E.OlP("NgValidators"),st=new E.OlP("NgAsyncValidators"),It=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class en{static min(B){return q=B,B=>{if(Ge(B.value)||Ge(q))return null;const P=parseFloat(B.value);return!isNaN(P)&&P<q?{min:{min:q,actual:B.value}}:null};var q}static max(B){return q=B,B=>{if(Ge(B.value)||Ge(q))return null;const P=parseFloat(B.value);return!isNaN(P)&&P>q?{max:{max:q,actual:B.value}}:null};var q}static required(B){return Ge(B.value)?{required:!0}:null}static requiredTrue(B){return!0===B.value?null:{required:!0}}static email(B){return Ge((q=B).value)||It.test(q.value)?null:{email:!0};var q}static minLength(B){return q=B,B=>Ge(B.value)||!Fe(B.value)?null:B.value.length<q?{minlength:{requiredLength:q,actualLength:B.value.length}}:null;var q}static maxLength(B){return q=B,B=>Fe(B.value)&&B.value.length>q?{maxlength:{requiredLength:q,actualLength:B.value.length}}:null;var q}static pattern(B){return function(q){if(!q)return xn;let B,P;return"string"==typeof q?(P="","^"!==q.charAt(0)&&(P+="^"),P+=q,"$"!==q.charAt(q.length-1)&&(P+="$"),B=new RegExp(P)):(P=q.toString(),B=q),de=>{if(Ge(de.value))return null;const _t=de.value;return B.test(_t)?null:{pattern:{requiredPattern:P,actualValue:_t}}}}(B)}static nullValidator(B){return null}static compose(B){return Mt(B)}static composeAsync(B){return Vt(B)}}function xn(q){return null}function vn(q){return null!=q}function Nt(q){const B=(0,E.QGY)(q)?(0,Ie.D)(q):q;return(0,E.CqO)(B),B}function Dt(q){let B={};return q.forEach(P=>{B=null!=P?Object.assign(Object.assign({},B),P):B}),0===Object.keys(B).length?null:B}function tt(q,B){return B.map(P=>P(q))}function ct(q){return q.map(B=>function(q){return!q.validate}(B)?B:P=>B.validate(P))}function Mt(q){if(!q)return null;const B=q.filter(vn);return 0==B.length?null:function(P){return Dt(tt(P,B))}}function Gt(q){return null!=q?Mt(ct(q)):null}function Vt(q){if(!q)return null;const B=q.filter(vn);return 0==B.length?null:function(P){return function(...q){if(1===q.length){const B=q[0];if((0,L.k)(B))return Se(B,null);if((0,ee.K)(B)&&Object.getPrototypeOf(B)===Object.prototype){const P=Object.keys(B);return Se(P.map(de=>B[de]),P)}}if("function"==typeof q[q.length-1]){const B=q.pop();return Se(q=1===q.length&&(0,L.k)(q[0])?q[0]:q,null).pipe((0,ue.U)(P=>B(...P)))}return Se(q,null)}(tt(P,B).map(Nt)).pipe((0,ue.U)(Dt))}}function Bt(q){return null!=q?Vt(ct(q)):null}function wn(q,B){return null===q?[B]:Array.isArray(q)?[...q,B]:[q,B]}function Hn(q){return q._rawValidators}function On(q){return q._rawAsyncValidators}function Tn(q){return q?Array.isArray(q)?q:[q]:[]}function Wn(q,B){return Array.isArray(q)?q.includes(B):q===B}function Rr(q,B){const P=Tn(B);return Tn(q).forEach(_t=>{Wn(P,_t)||P.push(_t)}),P}function Sr(q,B){return Tn(B).filter(P=>!Wn(q,P))}let Ht=(()=>{class q{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(P){this._rawValidators=P||[],this._composedValidatorFn=Gt(this._rawValidators)}_setAsyncValidators(P){this._rawAsyncValidators=P||[],this._composedAsyncValidatorFn=Bt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(P){this._onDestroyCallbacks.push(P)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(P=>P()),this._onDestroyCallbacks=[]}reset(P){this.control&&this.control.reset(P)}hasError(P,de){return!!this.control&&this.control.hasError(P,de)}getError(P,de){return this.control?this.control.getError(P,de):null}}return q.\u0275fac=function(P){return new(P||q)},q.\u0275dir=E.lG2({type:q}),q})(),Gn=(()=>{class q extends Ht{get formDirective(){return null}get path(){return null}}return q.\u0275fac=function(){let B;return function(de){return(B||(B=E.n5z(q)))(de||q)}}(),q.\u0275dir=E.lG2({type:q,features:[E.qOj]}),q})();class Jn extends Ht{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class En{constructor(B){this._cd=B}is(B){var P,de,_t;return"submitted"===B?!!(null===(P=this._cd)||void 0===P?void 0:P.submitted):!!(null===(_t=null===(de=this._cd)||void 0===de?void 0:de.control)||void 0===_t?void 0:_t[B])}}let sr=(()=>{class q extends En{constructor(P){super(P)}}return q.\u0275fac=function(P){return new(P||q)(E.Y36(Jn,2))},q.\u0275dir=E.lG2({type:q,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(P,de){2&P&&E.ekj("ng-untouched",de.is("untouched"))("ng-touched",de.is("touched"))("ng-pristine",de.is("pristine"))("ng-dirty",de.is("dirty"))("ng-valid",de.is("valid"))("ng-invalid",de.is("invalid"))("ng-pending",de.is("pending"))},features:[E.qOj]}),q})(),pr=(()=>{class q extends En{constructor(P){super(P)}}return q.\u0275fac=function(P){return new(P||q)(E.Y36(Gn,10))},q.\u0275dir=E.lG2({type:q,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(P,de){2&P&&E.ekj("ng-untouched",de.is("untouched"))("ng-touched",de.is("touched"))("ng-pristine",de.is("pristine"))("ng-dirty",de.is("dirty"))("ng-valid",de.is("valid"))("ng-invalid",de.is("invalid"))("ng-pending",de.is("pending"))("ng-submitted",de.is("submitted"))},features:[E.qOj]}),q})();function nr(q,B){at(q,B),B.valueAccessor.writeValue(q.value),function(q,B){B.valueAccessor.registerOnChange(P=>{q._pendingValue=P,q._pendingChange=!0,q._pendingDirty=!0,"change"===q.updateOn&&$t(q,B)})}(q,B),function(q,B){const P=(de,_t)=>{B.valueAccessor.writeValue(de),_t&&B.viewToModelUpdate(de)};q.registerOnChange(P),B._registerOnDestroy(()=>{q._unregisterOnChange(P)})}(q,B),function(q,B){B.valueAccessor.registerOnTouched(()=>{q._pendingTouched=!0,"blur"===q.updateOn&&q._pendingChange&&$t(q,B),"submit"!==q.updateOn&&q.markAsTouched()})}(q,B),function(q,B){if(B.valueAccessor.setDisabledState){const P=de=>{B.valueAccessor.setDisabledState(de)};q.registerOnDisabledChange(P),B._registerOnDestroy(()=>{q._unregisterOnDisabledChange(P)})}}(q,B)}function mt(q,B,P=!0){const de=()=>{};B.valueAccessor&&(B.valueAccessor.registerOnChange(de),B.valueAccessor.registerOnTouched(de)),Qe(q,B),q&&(B._invokeOnDestroyCallbacks(),q._registerOnCollectionChange(()=>{}))}function He(q,B){q.forEach(P=>{P.registerOnValidatorChange&&P.registerOnValidatorChange(B)})}function at(q,B){const P=Hn(q);null!==B.validator?q.setValidators(wn(P,B.validator)):"function"==typeof P&&q.setValidators([P]);const de=On(q);null!==B.asyncValidator?q.setAsyncValidators(wn(de,B.asyncValidator)):"function"==typeof de&&q.setAsyncValidators([de]);const _t=()=>q.updateValueAndValidity();He(B._rawValidators,_t),He(B._rawAsyncValidators,_t)}function Qe(q,B){let P=!1;if(null!==q){if(null!==B.validator){const _t=Hn(q);if(Array.isArray(_t)&&_t.length>0){const bn=_t.filter(cr=>cr!==B.validator);bn.length!==_t.length&&(P=!0,q.setValidators(bn))}}if(null!==B.asyncValidator){const _t=On(q);if(Array.isArray(_t)&&_t.length>0){const bn=_t.filter(cr=>cr!==B.asyncValidator);bn.length!==_t.length&&(P=!0,q.setAsyncValidators(bn))}}}const de=()=>{};return He(B._rawValidators,de),He(B._rawAsyncValidators,de),P}function $t(q,B){q._pendingDirty&&q.markAsDirty(),q.setValue(q._pendingValue,{emitModelToViewChange:!1}),B.viewToModelUpdate(q._pendingValue),q._pendingChange=!1}function $n(q,B){const P=q.indexOf(B);P>-1&&q.splice(P,1)}const Un="VALID",yn="INVALID",Dn="PENDING",Er="DISABLED";function nn(q){return(dn(q)?q.validators:q)||null}function Yt(q){return Array.isArray(q)?Gt(q):q||null}function Mn(q,B){return(dn(B)?B.asyncValidators:q)||null}function Fn(q){return Array.isArray(q)?Bt(q):q||null}function dn(q){return null!=q&&!Array.isArray(q)&&"object"==typeof q}class Ur{constructor(B,P){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=B,this._rawAsyncValidators=P,this._composedValidatorFn=Yt(this._rawValidators),this._composedAsyncValidatorFn=Fn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(B){this._rawValidators=this._composedValidatorFn=B}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(B){this._rawAsyncValidators=this._composedAsyncValidatorFn=B}get parent(){return this._parent}get valid(){return this.status===Un}get invalid(){return this.status===yn}get pending(){return this.status==Dn}get disabled(){return this.status===Er}get enabled(){return this.status!==Er}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(B){this._rawValidators=B,this._composedValidatorFn=Yt(B)}setAsyncValidators(B){this._rawAsyncValidators=B,this._composedAsyncValidatorFn=Fn(B)}addValidators(B){this.setValidators(Rr(B,this._rawValidators))}addAsyncValidators(B){this.setAsyncValidators(Rr(B,this._rawAsyncValidators))}removeValidators(B){this.setValidators(Sr(B,this._rawValidators))}removeAsyncValidators(B){this.setAsyncValidators(Sr(B,this._rawAsyncValidators))}hasValidator(B){return Wn(this._rawValidators,B)}hasAsyncValidator(B){return Wn(this._rawAsyncValidators,B)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(B={}){this.touched=!0,this._parent&&!B.onlySelf&&this._parent.markAsTouched(B)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(B=>B.markAllAsTouched())}markAsUntouched(B={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(P=>{P.markAsUntouched({onlySelf:!0})}),this._parent&&!B.onlySelf&&this._parent._updateTouched(B)}markAsDirty(B={}){this.pristine=!1,this._parent&&!B.onlySelf&&this._parent.markAsDirty(B)}markAsPristine(B={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(P=>{P.markAsPristine({onlySelf:!0})}),this._parent&&!B.onlySelf&&this._parent._updatePristine(B)}markAsPending(B={}){this.status=Dn,!1!==B.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!B.onlySelf&&this._parent.markAsPending(B)}disable(B={}){const P=this._parentMarkedDirty(B.onlySelf);this.status=Er,this.errors=null,this._forEachChild(de=>{de.disable(Object.assign(Object.assign({},B),{onlySelf:!0}))}),this._updateValue(),!1!==B.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},B),{skipPristineCheck:P})),this._onDisabledChange.forEach(de=>de(!0))}enable(B={}){const P=this._parentMarkedDirty(B.onlySelf);this.status=Un,this._forEachChild(de=>{de.enable(Object.assign(Object.assign({},B),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:B.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},B),{skipPristineCheck:P})),this._onDisabledChange.forEach(de=>de(!1))}_updateAncestors(B){this._parent&&!B.onlySelf&&(this._parent.updateValueAndValidity(B),B.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(B){this._parent=B}updateValueAndValidity(B={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Un||this.status===Dn)&&this._runAsyncValidator(B.emitEvent)),!1!==B.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!B.onlySelf&&this._parent.updateValueAndValidity(B)}_updateTreeValidity(B={emitEvent:!0}){this._forEachChild(P=>P._updateTreeValidity(B)),this.updateValueAndValidity({onlySelf:!0,emitEvent:B.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Er:Un}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(B){if(this.asyncValidator){this.status=Dn,this._hasOwnPendingAsyncValidator=!0;const P=Nt(this.asyncValidator(this));this._asyncValidationSubscription=P.subscribe(de=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(de,{emitEvent:B})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(B,P={}){this.errors=B,this._updateControlsErrors(!1!==P.emitEvent)}get(B){return function(q,B,P){if(null==B||(Array.isArray(B)||(B=B.split(".")),Array.isArray(B)&&0===B.length))return null;let de=q;return B.forEach(_t=>{de=de instanceof jr?de.controls.hasOwnProperty(_t)?de.controls[_t]:null:de instanceof Ir&&de.at(_t)||null}),de}(this,B)}getError(B,P){const de=P?this.get(P):this;return de&&de.errors?de.errors[B]:null}hasError(B,P){return!!this.getError(B,P)}get root(){let B=this;for(;B._parent;)B=B._parent;return B}_updateControlsErrors(B){this.status=this._calculateStatus(),B&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(B)}_initObservables(){this.valueChanges=new E.vpe,this.statusChanges=new E.vpe}_calculateStatus(){return this._allControlsDisabled()?Er:this.errors?yn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Dn)?Dn:this._anyControlsHaveStatus(yn)?yn:Un}_anyControlsHaveStatus(B){return this._anyControls(P=>P.status===B)}_anyControlsDirty(){return this._anyControls(B=>B.dirty)}_anyControlsTouched(){return this._anyControls(B=>B.touched)}_updatePristine(B={}){this.pristine=!this._anyControlsDirty(),this._parent&&!B.onlySelf&&this._parent._updatePristine(B)}_updateTouched(B={}){this.touched=this._anyControlsTouched(),this._parent&&!B.onlySelf&&this._parent._updateTouched(B)}_isBoxedValue(B){return"object"==typeof B&&null!==B&&2===Object.keys(B).length&&"value"in B&&"disabled"in B}_registerOnCollectionChange(B){this._onCollectionChange=B}_setUpdateStrategy(B){dn(B)&&null!=B.updateOn&&(this._updateOn=B.updateOn)}_parentMarkedDirty(B){return!B&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class wr extends Ur{constructor(B=null,P,de){super(nn(P),Mn(de,P)),this._onChange=[],this._applyFormState(B),this._setUpdateStrategy(P),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(B,P={}){this.value=this._pendingValue=B,this._onChange.length&&!1!==P.emitModelToViewChange&&this._onChange.forEach(de=>de(this.value,!1!==P.emitViewToModelChange)),this.updateValueAndValidity(P)}patchValue(B,P={}){this.setValue(B,P)}reset(B=null,P={}){this._applyFormState(B),this.markAsPristine(P),this.markAsUntouched(P),this.setValue(this.value,P),this._pendingChange=!1}_updateValue(){}_anyControls(B){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(B){this._onChange.push(B)}_unregisterOnChange(B){$n(this._onChange,B)}registerOnDisabledChange(B){this._onDisabledChange.push(B)}_unregisterOnDisabledChange(B){$n(this._onDisabledChange,B)}_forEachChild(B){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(B){this._isBoxedValue(B)?(this.value=this._pendingValue=B.value,B.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=B}}class jr extends Ur{constructor(B,P,de){super(nn(P),Mn(de,P)),this.controls=B,this._initObservables(),this._setUpdateStrategy(P),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(B,P){return this.controls[B]?this.controls[B]:(this.controls[B]=P,P.setParent(this),P._registerOnCollectionChange(this._onCollectionChange),P)}addControl(B,P,de={}){this.registerControl(B,P),this.updateValueAndValidity({emitEvent:de.emitEvent}),this._onCollectionChange()}removeControl(B,P={}){this.controls[B]&&this.controls[B]._registerOnCollectionChange(()=>{}),delete this.controls[B],this.updateValueAndValidity({emitEvent:P.emitEvent}),this._onCollectionChange()}setControl(B,P,de={}){this.controls[B]&&this.controls[B]._registerOnCollectionChange(()=>{}),delete this.controls[B],P&&this.registerControl(B,P),this.updateValueAndValidity({emitEvent:de.emitEvent}),this._onCollectionChange()}contains(B){return this.controls.hasOwnProperty(B)&&this.controls[B].enabled}setValue(B,P={}){this._checkAllValuesPresent(B),Object.keys(B).forEach(de=>{this._throwIfControlMissing(de),this.controls[de].setValue(B[de],{onlySelf:!0,emitEvent:P.emitEvent})}),this.updateValueAndValidity(P)}patchValue(B,P={}){null!=B&&(Object.keys(B).forEach(de=>{this.controls[de]&&this.controls[de].patchValue(B[de],{onlySelf:!0,emitEvent:P.emitEvent})}),this.updateValueAndValidity(P))}reset(B={},P={}){this._forEachChild((de,_t)=>{de.reset(B[_t],{onlySelf:!0,emitEvent:P.emitEvent})}),this._updatePristine(P),this._updateTouched(P),this.updateValueAndValidity(P)}getRawValue(){return this._reduceChildren({},(B,P,de)=>(B[de]=P instanceof wr?P.value:P.getRawValue(),B))}_syncPendingControls(){let B=this._reduceChildren(!1,(P,de)=>!!de._syncPendingControls()||P);return B&&this.updateValueAndValidity({onlySelf:!0}),B}_throwIfControlMissing(B){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[B])throw new Error(`Cannot find form control with name: ${B}.`)}_forEachChild(B){Object.keys(this.controls).forEach(P=>{const de=this.controls[P];de&&B(de,P)})}_setUpControls(){this._forEachChild(B=>{B.setParent(this),B._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(B){for(const P of Object.keys(this.controls)){const de=this.controls[P];if(this.contains(P)&&B(de))return!0}return!1}_reduceValue(){return this._reduceChildren({},(B,P,de)=>((P.enabled||this.disabled)&&(B[de]=P.value),B))}_reduceChildren(B,P){let de=B;return this._forEachChild((_t,bn)=>{de=P(de,_t,bn)}),de}_allControlsDisabled(){for(const B of Object.keys(this.controls))if(this.controls[B].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(B){this._forEachChild((P,de)=>{if(void 0===B[de])throw new Error(`Must supply a value for form control with name: '${de}'.`)})}}class Ir extends Ur{constructor(B,P,de){super(nn(P),Mn(de,P)),this.controls=B,this._initObservables(),this._setUpdateStrategy(P),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(B){return this.controls[B]}push(B,P={}){this.controls.push(B),this._registerControl(B),this.updateValueAndValidity({emitEvent:P.emitEvent}),this._onCollectionChange()}insert(B,P,de={}){this.controls.splice(B,0,P),this._registerControl(P),this.updateValueAndValidity({emitEvent:de.emitEvent})}removeAt(B,P={}){this.controls[B]&&this.controls[B]._registerOnCollectionChange(()=>{}),this.controls.splice(B,1),this.updateValueAndValidity({emitEvent:P.emitEvent})}setControl(B,P,de={}){this.controls[B]&&this.controls[B]._registerOnCollectionChange(()=>{}),this.controls.splice(B,1),P&&(this.controls.splice(B,0,P),this._registerControl(P)),this.updateValueAndValidity({emitEvent:de.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(B,P={}){this._checkAllValuesPresent(B),B.forEach((de,_t)=>{this._throwIfControlMissing(_t),this.at(_t).setValue(de,{onlySelf:!0,emitEvent:P.emitEvent})}),this.updateValueAndValidity(P)}patchValue(B,P={}){null!=B&&(B.forEach((de,_t)=>{this.at(_t)&&this.at(_t).patchValue(de,{onlySelf:!0,emitEvent:P.emitEvent})}),this.updateValueAndValidity(P))}reset(B=[],P={}){this._forEachChild((de,_t)=>{de.reset(B[_t],{onlySelf:!0,emitEvent:P.emitEvent})}),this._updatePristine(P),this._updateTouched(P),this.updateValueAndValidity(P)}getRawValue(){return this.controls.map(B=>B instanceof wr?B.value:B.getRawValue())}clear(B={}){this.controls.length<1||(this._forEachChild(P=>P._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:B.emitEvent}))}_syncPendingControls(){let B=this.controls.reduce((P,de)=>!!de._syncPendingControls()||P,!1);return B&&this.updateValueAndValidity({onlySelf:!0}),B}_throwIfControlMissing(B){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(B))throw new Error(`Cannot find form control at index ${B}`)}_forEachChild(B){this.controls.forEach((P,de)=>{B(P,de)})}_updateValue(){this.value=this.controls.filter(B=>B.enabled||this.disabled).map(B=>B.value)}_anyControls(B){return this.controls.some(P=>P.enabled&&B(P))}_setUpControls(){this._forEachChild(B=>this._registerControl(B))}_checkAllValuesPresent(B){this._forEachChild((P,de)=>{if(void 0===B[de])throw new Error(`Must supply a value for form control at index: ${de}.`)})}_allControlsDisabled(){for(const B of this.controls)if(B.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(B){B.setParent(this),B._registerOnCollectionChange(this._onCollectionChange)}}let W=(()=>{class q{}return q.\u0275fac=function(P){return new(P||q)},q.\u0275dir=E.lG2({type:q,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),q})(),gt=(()=>{class q{}return q.\u0275fac=function(P){return new(P||q)},q.\u0275mod=E.oAB({type:q}),q.\u0275inj=E.cJS({}),q})();const zn=new E.OlP("NgModelWithFormControlWarning"),Fi={provide:Gn,useExisting:(0,E.Gpc)(()=>Jr)};let Jr=(()=>{class q extends Gn{constructor(P,de){super(),this.validators=P,this.asyncValidators=de,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new E.vpe,this._setValidators(P),this._setAsyncValidators(de)}ngOnChanges(P){this._checkFormPresent(),P.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Qe(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(P){const de=this.form.get(P.path);return nr(de,P),de.updateValueAndValidity({emitEvent:!1}),this.directives.push(P),de}getControl(P){return this.form.get(P.path)}removeControl(P){mt(P.control||null,P,!1),$n(this.directives,P)}addFormGroup(P){this._setUpFormContainer(P)}removeFormGroup(P){this._cleanUpFormContainer(P)}getFormGroup(P){return this.form.get(P.path)}addFormArray(P){this._setUpFormContainer(P)}removeFormArray(P){this._cleanUpFormContainer(P)}getFormArray(P){return this.form.get(P.path)}updateModel(P,de){this.form.get(P.path).setValue(de)}onSubmit(P){return this.submitted=!0,function(q,B){q._syncPendingControls(),B.forEach(P=>{const de=P.control;"submit"===de.updateOn&&de._pendingChange&&(P.viewToModelUpdate(de._pendingValue),de._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(P),!1}onReset(){this.resetForm()}resetForm(P){this.form.reset(P),this.submitted=!1}_updateDomValue(){this.directives.forEach(P=>{const de=P.control,_t=this.form.get(P.path);de!==_t&&(mt(de||null,P),_t instanceof wr&&(nr(_t,P),P.control=_t))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(P){const de=this.form.get(P.path);(function(q,B){at(q,B)})(de,P),de.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(P){if(this.form){const de=this.form.get(P.path);de&&function(q,B){return Qe(q,B)}(de,P)&&de.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){at(this.form,this),this._oldForm&&Qe(this._oldForm,this)}_checkFormPresent(){}}return q.\u0275fac=function(P){return new(P||q)(E.Y36(Oe,10),E.Y36(st,10))},q.\u0275dir=E.lG2({type:q,selectors:[["","formGroup",""]],hostBindings:function(P,de){1&P&&E.NdJ("submit",function(bn){return de.onSubmit(bn)})("reset",function(){return de.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[E._Bn([Fi]),E.qOj,E.TTD]}),q})();const cs={provide:Jn,useExisting:(0,E.Gpc)(()=>Gs)};let Gs=(()=>{class q extends Jn{constructor(P,de,_t,bn,cr){super(),this._ngModelWarningConfig=cr,this._added=!1,this.update=new E.vpe,this._ngModelWarningSent=!1,this._parent=P,this._setValidators(de),this._setAsyncValidators(_t),this.valueAccessor=function(q,B){if(!B)return null;let P,de,_t;return Array.isArray(B),B.forEach(bn=>{bn.constructor===Re?P=bn:function(q){return Object.getPrototypeOf(q.constructor)===ve}(bn)?de=bn:_t=bn}),_t||de||P||null}(0,bn)}set isDisabled(P){}ngOnChanges(P){this._added||this._setUpControl(),function(q,B){if(!q.hasOwnProperty("model"))return!1;const P=q.model;return!!P.isFirstChange()||!Object.is(B,P.currentValue)}(P,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(P){this.viewModel=P,this.update.emit(P)}get path(){return function(q,B){return[...B.path,q]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return q.\u0275fac=function(P){return new(P||q)(E.Y36(Gn,13),E.Y36(Oe,10),E.Y36(st,10),E.Y36(we,10),E.Y36(zn,8))},q.\u0275dir=E.lG2({type:q,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[E._Bn([cs]),E.qOj,E.TTD]}),q._ngModelWarningSentOnce=!1,q})(),le=(()=>{class q{}return q.\u0275fac=function(P){return new(P||q)},q.\u0275mod=E.oAB({type:q}),q.\u0275inj=E.cJS({imports:[[gt]]}),q})(),Q=(()=>{class q{}return q.\u0275fac=function(P){return new(P||q)},q.\u0275mod=E.oAB({type:q}),q.\u0275inj=E.cJS({imports:[le]}),q})(),De=(()=>{class q{static withConfig(P){return{ngModule:q,providers:[{provide:zn,useValue:P.warnOnNgModelWithFormControl}]}}}return q.\u0275fac=function(P){return new(P||q)},q.\u0275mod=E.oAB({type:q}),q.\u0275inj=E.cJS({imports:[le]}),q})(),Ct=(()=>{class q{group(P,de=null){const _t=this._reduceControls(P);let Qr,bn=null,cr=null;return null!=de&&(function(q){return void 0!==q.asyncValidators||void 0!==q.validators||void 0!==q.updateOn}(de)?(bn=null!=de.validators?de.validators:null,cr=null!=de.asyncValidators?de.asyncValidators:null,Qr=null!=de.updateOn?de.updateOn:void 0):(bn=null!=de.validator?de.validator:null,cr=null!=de.asyncValidator?de.asyncValidator:null)),new jr(_t,{asyncValidators:cr,updateOn:Qr,validators:bn})}control(P,de,_t){return new wr(P,de,_t)}array(P,de,_t){const bn=P.map(cr=>this._createControl(cr));return new Ir(bn,de,_t)}_reduceControls(P){const de={};return Object.keys(P).forEach(_t=>{de[_t]=this._createControl(P[_t])}),de}_createControl(P){return P instanceof wr||P instanceof jr||P instanceof Ir?P:Array.isArray(P)?this.control(P[0],P.length>1?P[1]:null,P.length>2?P[2]:null):this.control(P)}}return q.\u0275fac=function(P){return new(P||q)},q.\u0275prov=(0,E.Yz7)({factory:function(){return new q},token:q,providedIn:De}),q})()},174:(cn,rt,F)=>{"use strict";F.d(rt,{gz:()=>At,y6:()=>Nn,OD:()=>Gn,eC:()=>Cn,wm:()=>Ia,wN:()=>Y,F0:()=>Kn,rH:()=>Pt,Bz:()=>fe,Hx:()=>Mn});var E=F(8583),O=F(7716),ie=F(4869),L=F(9796),ue=F(5197),ee=F(509),Ie=F(6693);const oe={};class ae{constructor(S){this.resultSelector=S}call(S,T){return T.subscribe(new ve(S,this.resultSelector))}}class ve extends ue.L{constructor(S,T){super(S),this.resultSelector=T,this.active=0,this.values=[],this.observables=[]}_next(S){this.values.push(oe),this.observables.push(S)}_complete(){const S=this.observables,T=S.length;if(0===T)this.destination.complete();else{this.active=T,this.toRespond=T;for(let H=0;H<T;H++)this.add((0,ee.D)(this,S[H],void 0,H))}}notifyComplete(S){0==(this.active-=1)&&this.destination.complete()}notifyNext(S,T,H){const te=this.values,We=this.toRespond?te[H]===oe?--this.toRespond:this.toRespond:0;te[H]=T,0===We&&(this.resultSelector?this._tryResultSelector(te):this.destination.next(te.slice()))}_tryResultSelector(S){let T;try{T=this.resultSelector.apply(this,S)}catch(H){return void this.destination.error(H)}this.destination.next(T)}}var we=F(8891),_e=F(4402),Te=F(9193);function lt(k){return new we.y(S=>{let T;try{T=k()}catch(te){return void S.error(te)}return(T?(0,_e.D)(T):(0,Te.c)()).subscribe(S)})}var Ee=F(5917),Ke=F(6215),Re=F(3410),Ge=F(8071),Fe=F(2441),Oe=F(9765),st=F(5345);function It(k){return function(T){const H=new en(k),te=T.lift(H);return H.caught=te}}class en{constructor(S){this.selector=S}call(S,T){return T.subscribe(new v(S,this.selector,this.caught))}}class v extends st.Ds{constructor(S,T,H){super(S),this.selector=T,this.caught=H}error(S){if(!this.isStopped){let T;try{T=this.selector(S,this.caught)}catch(ye){return void super.error(ye)}this._unsubscribeAndRecycle();const H=new st.IY(this);this.add(H);const te=(0,st.ft)(T,H);te!==H&&this.add(te)}}}var Le=F(9773);function Tt(k,S){return(0,Le.zg)(k,S,1)}var ft=F(5435),St=F(7393),pt=F(7108);function xt(k){return function(T){return 0===k?(0,Te.c)():T.lift(new kt(k))}}class kt{constructor(S){if(this.total=S,this.total<0)throw new pt.W}call(S,T){return T.subscribe(new xn(S,this.total))}}class xn extends St.L{constructor(S,T){super(S),this.total=T,this.ring=new Array,this.count=0}_next(S){const T=this.ring,H=this.total,te=this.count++;T.length<H?T.push(S):T[te%H]=S}_complete(){const S=this.destination;let T=this.count;if(T>0){const H=this.count>=this.total?this.total:this.count,te=this.ring;for(let ye=0;ye<H;ye++){const We=T++%H;S.next(te[We])}}S.complete()}}var vn=F(4635),Nt=F(5242),Dt=F(4487),je=F(5319);class Mt{constructor(S){this.callback=S}call(S,T){return T.subscribe(new Gt(S,this.callback))}}class Gt extends St.L{constructor(S,T){super(S),this.add(new je.w(T))}}var Vt=F(8002),Bt=F(3190),wn=F(5257),Hn=F(9761),On=F(2145),Tn=F(8049),Wn=F(3342),Rr=F(1307),Sr=F(3282);class Ht{constructor(S,T){this.id=S,this.url=T}}class Gn extends Ht{constructor(S,T,H="imperative",te=null){super(S,T),this.navigationTrigger=H,this.restoredState=te}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Jn extends Ht{constructor(S,T,H){super(S,T),this.urlAfterRedirects=H}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class En extends Ht{constructor(S,T,H){super(S,T),this.reason=H}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class er extends Ht{constructor(S,T,H){super(S,T),this.error=H}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class or extends Ht{constructor(S,T,H,te){super(S,T),this.urlAfterRedirects=H,this.state=te}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sr extends Ht{constructor(S,T,H,te){super(S,T),this.urlAfterRedirects=H,this.state=te}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pr extends Ht{constructor(S,T,H,te,ye){super(S,T),this.urlAfterRedirects=H,this.state=te,this.shouldActivate=ye}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Lr extends Ht{constructor(S,T,H,te){super(S,T),this.urlAfterRedirects=H,this.state=te}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nr extends Ht{constructor(S,T,H,te){super(S,T),this.urlAfterRedirects=H,this.state=te}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ar{constructor(S){this.route=S}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class hi{constructor(S){this.route=S}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class gr{constructor(S){this.snapshot=S}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class In{constructor(S){this.snapshot=S}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ft{constructor(S){this.snapshot=S}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ci{constructor(S){this.snapshot=S}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ni{constructor(S,T,H){this.routerEvent=S,this.position=T,this.anchor=H}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Cn="primary";class Yn{constructor(S){this.params=S||{}}has(S){return Object.prototype.hasOwnProperty.call(this.params,S)}get(S){if(this.has(S)){const T=this.params[S];return Array.isArray(T)?T[0]:T}return null}getAll(S){if(this.has(S)){const T=this.params[S];return Array.isArray(T)?T:[T]}return[]}get keys(){return Object.keys(this.params)}}function Pr(k){return new Yn(k)}const Cr="ngNavigationCancelingError";function nr(k){const S=Error("NavigationCancelingError: "+k);return S[Cr]=!0,S}function He(k,S,T){const H=T.path.split("/");if(H.length>k.length||"full"===T.pathMatch&&(S.hasChildren()||H.length<k.length))return null;const te={};for(let ye=0;ye<H.length;ye++){const We=H[ye],ge=k[ye];if(We.startsWith(":"))te[We.substring(1)]=ge;else if(We!==ge.path)return null}return{consumed:k.slice(0,H.length),posParams:te}}function at(k,S){const T=k?Object.keys(k):void 0,H=S?Object.keys(S):void 0;if(!T||!H||T.length!=H.length)return!1;let te;for(let ye=0;ye<T.length;ye++)if(te=T[ye],!Qe(k[te],S[te]))return!1;return!0}function Qe(k,S){if(Array.isArray(k)&&Array.isArray(S)){if(k.length!==S.length)return!1;const T=[...k].sort(),H=[...S].sort();return T.every((te,ye)=>H[ye]===te)}return k===S}function wt(k){return Array.prototype.concat.apply([],k)}function Qt(k){return k.length>0?k[k.length-1]:null}function Wt(k,S){for(const T in k)k.hasOwnProperty(T)&&S(k[T],T)}function Be(k){return(0,O.CqO)(k)?k:(0,O.QGY)(k)?(0,_e.D)(Promise.resolve(k)):(0,Ee.of)(k)}const it={exact:function Et(k,S,T){if(!nn(k.segments,S.segments)||!Un(k.segments,S.segments,T)||k.numberOfChildren!==S.numberOfChildren)return!1;for(const H in S.children)if(!k.children[H]||!Et(k.children[H],S.children[H],T))return!1;return!0},subset:$n},Ve={exact:function(k,S){return at(k,S)},subset:function(k,S){return Object.keys(S).length<=Object.keys(k).length&&Object.keys(S).every(T=>Qe(k[T],S[T]))},ignored:()=>!0};function be(k,S,T){return it[T.paths](k.root,S.root,T.matrixParams)&&Ve[T.queryParams](k.queryParams,S.queryParams)&&!("exact"===T.fragment&&k.fragment!==S.fragment)}function $n(k,S,T){return Rn(k,S,S.segments,T)}function Rn(k,S,T,H){if(k.segments.length>T.length){const te=k.segments.slice(0,T.length);return!(!nn(te,T)||S.hasChildren()||!Un(te,T,H))}if(k.segments.length===T.length){if(!nn(k.segments,T)||!Un(k.segments,T,H))return!1;for(const te in S.children)if(!k.children[te]||!$n(k.children[te],S.children[te],H))return!1;return!0}{const te=T.slice(0,k.segments.length),ye=T.slice(k.segments.length);return!!(nn(k.segments,te)&&Un(k.segments,te,H)&&k.children[Cn])&&Rn(k.children[Cn],S,ye,H)}}function Un(k,S,T){return S.every((H,te)=>Ve[T](k[te].parameters,H.parameters))}class yn{constructor(S,T,H){this.root=S,this.queryParams=T,this.fragment=H}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Pr(this.queryParams)),this._queryParamMap}toString(){return dn.serialize(this)}}class Dn{constructor(S,T){this.segments=S,this.children=T,this.parent=null,Wt(T,(H,te)=>H.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ur(this)}}class Er{constructor(S,T){this.path=S,this.parameters=T}get parameterMap(){return this._parameterMap||(this._parameterMap=Pr(this.parameters)),this._parameterMap}toString(){return gi(this)}}function nn(k,S){return k.length===S.length&&k.every((T,H)=>T.path===S[H].path)}class Mn{}class Fn{parse(S){const T=new ht(S);return new yn(T.parseRootSegment(),T.parseQueryParams(),T.parseFragment())}serialize(S){const T=`/${wr(S.root,!0)}`,H=function(k){const S=Object.keys(k).map(T=>{const H=k[T];return Array.isArray(H)?H.map(te=>`${Ir(T)}=${Ir(te)}`).join("&"):`${Ir(T)}=${Ir(H)}`}).filter(T=>!!T);return S.length?`?${S.join("&")}`:""}(S.queryParams);var k;return`${T}${H}${"string"==typeof S.fragment?`#${k=S.fragment,encodeURI(k)}`:""}`}}const dn=new Fn;function Ur(k){return k.segments.map(S=>gi(S)).join("/")}function wr(k,S){if(!k.hasChildren())return Ur(k);if(S){const T=k.children[Cn]?wr(k.children[Cn],!1):"",H=[];return Wt(k.children,(te,ye)=>{ye!==Cn&&H.push(`${ye}:${wr(te,!1)}`)}),H.length>0?`${T}(${H.join("//")})`:T}{const T=function(k,S){let T=[];return Wt(k.children,(H,te)=>{te===Cn&&(T=T.concat(S(H,te)))}),Wt(k.children,(H,te)=>{te!==Cn&&(T=T.concat(S(H,te)))}),T}(k,(H,te)=>te===Cn?[wr(k.children[Cn],!1)]:[`${te}:${wr(H,!1)}`]);return 1===Object.keys(k.children).length&&null!=k.children[Cn]?`${Ur(k)}/${T[0]}`:`${Ur(k)}/(${T.join("//")})`}}function jr(k){return encodeURIComponent(k).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ir(k){return jr(k).replace(/%3B/gi,";")}function zi(k){return jr(k).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Qn(k){return decodeURIComponent(k)}function zr(k){return Qn(k.replace(/\+/g,"%20"))}function gi(k){return`${zi(k.path)}${function(k){return Object.keys(k).map(S=>`;${zi(S)}=${zi(k[S])}`).join("")}(k.parameters)}`}const xr=/^[^\/()?;=#]+/;function qi(k){const S=k.match(xr);return S?S[0]:""}const qr=/^[^=?&#]+/,Vn=/^[^?&#]+/;class ht{constructor(S){this.url=S,this.remaining=S}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Dn([],{}):new Dn([],this.parseChildren())}parseQueryParams(){const S={};if(this.consumeOptional("?"))do{this.parseQueryParam(S)}while(this.consumeOptional("&"));return S}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const S=[];for(this.peekStartsWith("(")||S.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),S.push(this.parseSegment());let T={};this.peekStartsWith("/(")&&(this.capture("/"),T=this.parseParens(!0));let H={};return this.peekStartsWith("(")&&(H=this.parseParens(!1)),(S.length>0||Object.keys(T).length>0)&&(H[Cn]=new Dn(S,T)),H}parseSegment(){const S=qi(this.remaining);if(""===S&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(S),new Er(Qn(S),this.parseMatrixParams())}parseMatrixParams(){const S={};for(;this.consumeOptional(";");)this.parseParam(S);return S}parseParam(S){const T=qi(this.remaining);if(!T)return;this.capture(T);let H="";if(this.consumeOptional("=")){const te=qi(this.remaining);te&&(H=te,this.capture(H))}S[Qn(T)]=Qn(H)}parseQueryParam(S){const T=function(k){const S=k.match(qr);return S?S[0]:""}(this.remaining);if(!T)return;this.capture(T);let H="";if(this.consumeOptional("=")){const We=function(k){const S=k.match(Vn);return S?S[0]:""}(this.remaining);We&&(H=We,this.capture(H))}const te=zr(T),ye=zr(H);if(S.hasOwnProperty(te)){let We=S[te];Array.isArray(We)||(We=[We],S[te]=We),We.push(ye)}else S[te]=ye}parseParens(S){const T={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const H=qi(this.remaining),te=this.remaining[H.length];if("/"!==te&&")"!==te&&";"!==te)throw new Error(`Cannot parse url '${this.url}'`);let ye;H.indexOf(":")>-1?(ye=H.substr(0,H.indexOf(":")),this.capture(ye),this.capture(":")):S&&(ye=Cn);const We=this.parseChildren();T[ye]=1===Object.keys(We).length?We[Cn]:new Dn([],We),this.consumeOptional("//")}return T}peekStartsWith(S){return this.remaining.startsWith(S)}consumeOptional(S){return!!this.peekStartsWith(S)&&(this.remaining=this.remaining.substring(S.length),!0)}capture(S){if(!this.consumeOptional(S))throw new Error(`Expected "${S}".`)}}class ${constructor(S){this._root=S}get root(){return this._root.value}parent(S){const T=this.pathFromRoot(S);return T.length>1?T[T.length-2]:null}children(S){const T=W(S,this._root);return T?T.children.map(H=>H.value):[]}firstChild(S){const T=W(S,this._root);return T&&T.children.length>0?T.children[0].value:null}siblings(S){const T=ce(S,this._root);return T.length<2?[]:T[T.length-2].children.map(te=>te.value).filter(te=>te!==S)}pathFromRoot(S){return ce(S,this._root).map(T=>T.value)}}function W(k,S){if(k===S.value)return S;for(const T of S.children){const H=W(k,T);if(H)return H}return null}function ce(k,S){if(k===S.value)return[S];for(const T of S.children){const H=ce(k,T);if(H.length)return H.unshift(S),H}return[]}class Ce{constructor(S,T){this.value=S,this.children=T}toString(){return`TreeNode(${this.value})`}}function Ze(k){const S={};return k&&k.children.forEach(T=>S[T.value.outlet]=T),S}class ze extends ${constructor(S,T){super(S),this.snapshot=T,kr(this,S)}toString(){return this.snapshot.toString()}}function gt(k,S){const T=function(k,S){const We=new zn([],{},{},"",{},Cn,S,null,k.root,-1,{});return new Xn("",new Ce(We,[]))}(k,S),H=new Ke.X([new Er("",{})]),te=new Ke.X({}),ye=new Ke.X({}),We=new Ke.X({}),ge=new Ke.X(""),Jt=new At(H,te,We,ge,ye,Cn,S,T.root);return Jt.snapshot=T.root,new ze(new Ce(Jt,[]),T)}class At{constructor(S,T,H,te,ye,We,ge,Jt){this.url=S,this.params=T,this.queryParams=H,this.fragment=te,this.data=ye,this.outlet=We,this.component=ge,this._futureSnapshot=Jt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Vt.U)(S=>Pr(S)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Vt.U)(S=>Pr(S)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function an(k,S="emptyOnly"){const T=k.pathFromRoot;let H=0;if("always"!==S)for(H=T.length-1;H>=1;){const te=T[H],ye=T[H-1];if(te.routeConfig&&""===te.routeConfig.path)H--;else{if(ye.component)break;H--}}return function(k){return k.reduce((S,T)=>({params:Object.assign(Object.assign({},S.params),T.params),data:Object.assign(Object.assign({},S.data),T.data),resolve:Object.assign(Object.assign({},S.resolve),T._resolvedData)}),{params:{},data:{},resolve:{}})}(T.slice(H))}class zn{constructor(S,T,H,te,ye,We,ge,Jt,kn,ei,ur){this.url=S,this.params=T,this.queryParams=H,this.fragment=te,this.data=ye,this.outlet=We,this.component=ge,this.routeConfig=Jt,this._urlSegment=kn,this._lastPathIndex=ei,this._resolve=ur}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Pr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Pr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(H=>H.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Xn extends ${constructor(S,T){super(T),this.url=S,kr(this,T)}toString(){return Fi(this._root)}}function kr(k,S){S.value._routerState=k,S.children.forEach(T=>kr(k,T))}function Fi(k){const S=k.children.length>0?` { ${k.children.map(Fi).join(", ")} } `:"";return`${k.value}${S}`}function Jr(k){if(k.snapshot){const S=k.snapshot,T=k._futureSnapshot;k.snapshot=T,at(S.queryParams,T.queryParams)||k.queryParams.next(T.queryParams),S.fragment!==T.fragment&&k.fragment.next(T.fragment),at(S.params,T.params)||k.params.next(T.params),function(k,S){if(k.length!==S.length)return!1;for(let T=0;T<k.length;++T)if(!at(k[T],S[T]))return!1;return!0}(S.url,T.url)||k.url.next(T.url),at(S.data,T.data)||k.data.next(T.data)}else k.snapshot=k._futureSnapshot,k.data.next(k._futureSnapshot.data)}function _i(k,S){const T=at(k.params,S.params)&&function(k,S){return nn(k,S)&&k.every((T,H)=>at(T.parameters,S[H].parameters))}(k.url,S.url);return T&&!(!k.parent!=!S.parent)&&(!k.parent||_i(k.parent,S.parent))}function ws(k,S,T){if(T&&k.shouldReuseRoute(S.value,T.value.snapshot)){const H=T.value;H._futureSnapshot=S.value;const te=function(k,S,T){return S.children.map(H=>{for(const te of T.children)if(k.shouldReuseRoute(H.value,te.value.snapshot))return ws(k,H,te);return ws(k,H)})}(k,S,T);return new Ce(H,te)}{if(k.shouldAttach(S.value)){const ye=k.retrieve(S.value);if(null!==ye){const We=ye.route;return Yi(S,We),We}}const H=function(k){return new At(new Ke.X(k.url),new Ke.X(k.params),new Ke.X(k.queryParams),new Ke.X(k.fragment),new Ke.X(k.data),k.outlet,k.component,k)}(S.value),te=S.children.map(ye=>ws(k,ye));return new Ce(H,te)}}function Yi(k,S){if(k.value.routeConfig!==S.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(k.children.length!==S.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");S.value._futureSnapshot=k.value;for(let T=0;T<k.children.length;++T)Yi(k.children[T],S.children[T])}function Xs(k){return"object"==typeof k&&null!=k&&!k.outlets&&!k.segmentPath}function ji(k){return"object"==typeof k&&null!=k&&k.outlets}function Mr(k,S,T,H,te){let ye={};return H&&Wt(H,(We,ge)=>{ye[ge]=Array.isArray(We)?We.map(Jt=>`${Jt}`):`${We}`}),new yn(T.root===k?S:Js(T.root,k,S),ye,te)}function Js(k,S,T){const H={};return Wt(k.children,(te,ye)=>{H[ye]=te===S?T:Js(te,S,T)}),new Dn(k.segments,H)}class eo{constructor(S,T,H){if(this.isAbsolute=S,this.numberOfDoubleDots=T,this.commands=H,S&&H.length>0&&Xs(H[0]))throw new Error("Root segment cannot have matrix parameters");const te=H.find(ji);if(te&&te!==Qt(H))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class vi{constructor(S,T,H){this.segmentGroup=S,this.processChildren=T,this.index=H}}function Ki(k,S,T){if(k||(k=new Dn([],{})),0===k.segments.length&&k.hasChildren())return ai(k,S,T);const H=function(k,S,T){let H=0,te=S;const ye={match:!1,pathIndex:0,commandIndex:0};for(;te<k.segments.length;){if(H>=T.length)return ye;const We=k.segments[te],ge=T[H];if(ji(ge))break;const Jt=`${ge}`,kn=H<T.length-1?T[H+1]:null;if(te>0&&void 0===Jt)break;if(Jt&&kn&&"object"==typeof kn&&void 0===kn.outlets){if(!is(Jt,kn,We))return ye;H+=2}else{if(!is(Jt,{},We))return ye;H++}te++}return{match:!0,pathIndex:te,commandIndex:H}}(k,S,T),te=T.slice(H.commandIndex);if(H.match&&H.pathIndex<k.segments.length){const ye=new Dn(k.segments.slice(0,H.pathIndex),{});return ye.children[Cn]=new Dn(k.segments.slice(H.pathIndex),k.children),ai(ye,0,te)}return H.match&&0===te.length?new Dn(k.segments,{}):H.match&&!k.hasChildren()?Xi(k,S,T):H.match?ai(k,0,te):Xi(k,S,T)}function ai(k,S,T){if(0===T.length)return new Dn(k.segments,{});{const H=function(k){return ji(k[0])?k[0].outlets:{[Cn]:k}}(T),te={};return Wt(H,(ye,We)=>{"string"==typeof ye&&(ye=[ye]),null!==ye&&(te[We]=Ki(k.children[We],S,ye))}),Wt(k.children,(ye,We)=>{void 0===H[We]&&(te[We]=ye)}),new Dn(k.segments,te)}}function Xi(k,S,T){const H=k.segments.slice(0,S);let te=0;for(;te<T.length;){const ye=T[te];if(ji(ye)){const Jt=no(ye.outlets);return new Dn(H,Jt)}if(0===te&&Xs(T[0])){H.push(new Er(k.segments[S].path,zs(T[0]))),te++;continue}const We=ji(ye)?ye.outlets[Cn]:`${ye}`,ge=te<T.length-1?T[te+1]:null;We&&ge&&Xs(ge)?(H.push(new Er(We,zs(ge))),te+=2):(H.push(new Er(We,{})),te++)}return new Dn(H,{})}function no(k){const S={};return Wt(k,(T,H)=>{"string"==typeof T&&(T=[T]),null!==T&&(S[H]=Xi(new Dn([],{}),0,T))}),S}function zs(k){const S={};return Wt(k,(T,H)=>S[H]=`${T}`),S}function is(k,S,T){return k==T.path&&at(S,T.parameters)}class As{constructor(S,T,H,te){this.routeReuseStrategy=S,this.futureState=T,this.currState=H,this.forwardEvent=te}activate(S){const T=this.futureState._root,H=this.currState?this.currState._root:null;this.deactivateChildRoutes(T,H,S),Jr(this.futureState.root),this.activateChildRoutes(T,H,S)}deactivateChildRoutes(S,T,H){const te=Ze(T);S.children.forEach(ye=>{const We=ye.value.outlet;this.deactivateRoutes(ye,te[We],H),delete te[We]}),Wt(te,(ye,We)=>{this.deactivateRouteAndItsChildren(ye,H)})}deactivateRoutes(S,T,H){const te=S.value,ye=T?T.value:null;if(te===ye)if(te.component){const We=H.getContext(te.outlet);We&&this.deactivateChildRoutes(S,T,We.children)}else this.deactivateChildRoutes(S,T,H);else ye&&this.deactivateRouteAndItsChildren(T,H)}deactivateRouteAndItsChildren(S,T){this.routeReuseStrategy.shouldDetach(S.value.snapshot)?this.detachAndStoreRouteSubtree(S,T):this.deactivateRouteAndOutlet(S,T)}detachAndStoreRouteSubtree(S,T){const H=T.getContext(S.value.outlet);if(H&&H.outlet){const te=H.outlet.detach(),ye=H.children.onOutletDeactivated();this.routeReuseStrategy.store(S.value.snapshot,{componentRef:te,route:S,contexts:ye})}}deactivateRouteAndOutlet(S,T){const H=T.getContext(S.value.outlet),te=H&&S.value.component?H.children:T,ye=Ze(S);for(const We of Object.keys(ye))this.deactivateRouteAndItsChildren(ye[We],te);H&&H.outlet&&(H.outlet.deactivate(),H.children.onOutletDeactivated(),H.attachRef=null,H.resolver=null,H.route=null)}activateChildRoutes(S,T,H){const te=Ze(T);S.children.forEach(ye=>{this.activateRoutes(ye,te[ye.value.outlet],H),this.forwardEvent(new ci(ye.value.snapshot))}),S.children.length&&this.forwardEvent(new In(S.value.snapshot))}activateRoutes(S,T,H){const te=S.value,ye=T?T.value:null;if(Jr(te),te===ye)if(te.component){const We=H.getOrCreateContext(te.outlet);this.activateChildRoutes(S,T,We.children)}else this.activateChildRoutes(S,T,H);else if(te.component){const We=H.getOrCreateContext(te.outlet);if(this.routeReuseStrategy.shouldAttach(te.snapshot)){const ge=this.routeReuseStrategy.retrieve(te.snapshot);this.routeReuseStrategy.store(te.snapshot,null),We.children.onOutletReAttached(ge.contexts),We.attachRef=ge.componentRef,We.route=ge.route.value,We.outlet&&We.outlet.attach(ge.componentRef,ge.route.value),Ei(ge.route)}else{const ge=function(k){for(let S=k.parent;S;S=S.parent){const T=S.routeConfig;if(T&&T._loadedConfig)return T._loadedConfig;if(T&&T.component)return null}return null}(te.snapshot),Jt=ge?ge.module.componentFactoryResolver:null;We.attachRef=null,We.route=te,We.resolver=Jt,We.outlet&&We.outlet.activateWith(te,Jt),this.activateChildRoutes(S,null,We.children)}}else this.activateChildRoutes(S,null,H)}}function Ei(k){Jr(k.value),k.children.forEach(Ei)}class xs{constructor(S,T){this.routes=S,this.module=T}}function Li(k){return"function"==typeof k}function Dr(k){return k instanceof yn}const yi=Symbol("INITIAL_VALUE");function Ci(){return(0,Bt.w)(k=>function(...k){let S,T;return(0,ie.K)(k[k.length-1])&&(T=k.pop()),"function"==typeof k[k.length-1]&&(S=k.pop()),1===k.length&&(0,L.k)(k[0])&&(k=k[0]),(0,Ie.n)(k,T).lift(new ae(S))}(k.map(S=>S.pipe((0,wn.q)(1),(0,Hn.O)(yi)))).pipe((0,On.R)((S,T)=>{let H=!1;return T.reduce((te,ye,We)=>te!==yi?te:(ye===yi&&(H=!0),H||!1!==ye&&We!==T.length-1&&!Dr(ye)?te:ye),S)},yi),(0,ft.h)(S=>S!==yi),(0,Vt.U)(S=>Dr(S)?S:!0===S),(0,wn.q)(1)))}let G=(()=>{class k{}return k.\u0275fac=function(T){return new(T||k)},k.\u0275cmp=O.Xpm({type:k,selectors:[["ng-component"]],decls:1,vars:0,template:function(T,H){1&T&&O._UZ(0,"router-outlet")},directives:function(){return[lo]},encapsulation:2}),k})();function le(k,S=""){for(let T=0;T<k.length;T++){const H=k[T];Q(H,De(S,H))}}function Q(k,S){k.children&&le(k.children,S)}function De(k,S){return S?k||S.path?k&&!S.path?`${k}/`:!k&&S.path?S.path:`${k}/${S.path}`:"":k}function qe(k){const S=k.children&&k.children.map(qe),T=S?Object.assign(Object.assign({},k),{children:S}):Object.assign({},k);return!T.component&&(S||T.loadChildren)&&T.outlet&&T.outlet!==Cn&&(T.component=G),T}function Ct(k){return k.outlet||Cn}function ln(k,S){const T=k.filter(H=>Ct(H)===S);return T.push(...k.filter(H=>Ct(H)!==S)),T}const q={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function B(k,S,T){var H;if(""===S.path)return"full"===S.pathMatch&&(k.hasChildren()||T.length>0)?Object.assign({},q):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const ye=(S.matcher||He)(T,k,S);if(!ye)return Object.assign({},q);const We={};Wt(ye.posParams,(Jt,kn)=>{We[kn]=Jt.path});const ge=ye.consumed.length>0?Object.assign(Object.assign({},We),ye.consumed[ye.consumed.length-1].parameters):We;return{matched:!0,consumedSegments:ye.consumed,lastChild:ye.consumed.length,parameters:ge,positionalParamSegments:null!==(H=ye.posParams)&&void 0!==H?H:{}}}function P(k,S,T,H,te="corrected"){if(T.length>0&&function(k,S,T){return T.some(H=>Qr(k,S,H)&&Ct(H)!==Cn)}(k,T,H)){const We=new Dn(S,function(k,S,T,H){const te={};te[Cn]=H,H._sourceSegment=k,H._segmentIndexShift=S.length;for(const ye of T)if(""===ye.path&&Ct(ye)!==Cn){const We=new Dn([],{});We._sourceSegment=k,We._segmentIndexShift=S.length,te[Ct(ye)]=We}return te}(k,S,H,new Dn(T,k.children)));return We._sourceSegment=k,We._segmentIndexShift=S.length,{segmentGroup:We,slicedSegments:[]}}if(0===T.length&&function(k,S,T){return T.some(H=>Qr(k,S,H))}(k,T,H)){const We=new Dn(k.segments,function(k,S,T,H,te,ye){const We={};for(const ge of H)if(Qr(k,T,ge)&&!te[Ct(ge)]){const Jt=new Dn([],{});Jt._sourceSegment=k,Jt._segmentIndexShift="legacy"===ye?k.segments.length:S.length,We[Ct(ge)]=Jt}return Object.assign(Object.assign({},te),We)}(k,S,T,H,k.children,te));return We._sourceSegment=k,We._segmentIndexShift=S.length,{segmentGroup:We,slicedSegments:T}}const ye=new Dn(k.segments,k.children);return ye._sourceSegment=k,ye._segmentIndexShift=S.length,{segmentGroup:ye,slicedSegments:T}}function Qr(k,S,T){return(!(k.hasChildren()||S.length>0)||"full"!==T.pathMatch)&&""===T.path}function Vi(k,S,T,H){return!!(Ct(k)===H||H!==Cn&&Qr(S,T,k))&&("**"===k.path||B(S,k,T).matched)}function mi(k,S,T){return 0===S.length&&!k.children[T]}class ii{constructor(S){this.segmentGroup=S||null}}class Wr{constructor(S){this.urlTree=S}}function rr(k){return new we.y(S=>S.error(new ii(k)))}function aa(k){return new we.y(S=>S.error(new Wr(k)))}function yo(k){return new we.y(S=>S.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${k}'`)))}class To{constructor(S,T,H,te,ye){this.configLoader=T,this.urlSerializer=H,this.urlTree=te,this.config=ye,this.allowRedirects=!0,this.ngModule=S.get(O.h0i)}apply(){const S=P(this.urlTree.root,[],[],this.config).segmentGroup,T=new Dn(S.segments,S.children);return this.expandSegmentGroup(this.ngModule,this.config,T,Cn).pipe((0,Vt.U)(ye=>this.createUrlTree(Rs(ye),this.urlTree.queryParams,this.urlTree.fragment))).pipe(It(ye=>{if(ye instanceof Wr)return this.allowRedirects=!1,this.match(ye.urlTree);throw ye instanceof ii?this.noMatchError(ye):ye}))}match(S){return this.expandSegmentGroup(this.ngModule,this.config,S.root,Cn).pipe((0,Vt.U)(te=>this.createUrlTree(Rs(te),S.queryParams,S.fragment))).pipe(It(te=>{throw te instanceof ii?this.noMatchError(te):te}))}noMatchError(S){return new Error(`Cannot match any routes. URL Segment: '${S.segmentGroup}'`)}createUrlTree(S,T,H){const te=S.segments.length>0?new Dn([],{[Cn]:S}):S;return new yn(te,T,H)}expandSegmentGroup(S,T,H,te){return 0===H.segments.length&&H.hasChildren()?this.expandChildren(S,T,H).pipe((0,Vt.U)(ye=>new Dn([],ye))):this.expandSegment(S,H,T,H.segments,te,!0)}expandChildren(S,T,H){const te=[];for(const ye of Object.keys(H.children))"primary"===ye?te.unshift(ye):te.push(ye);return(0,_e.D)(te).pipe(Tt(ye=>{const We=H.children[ye],ge=ln(T,ye);return this.expandSegmentGroup(S,ge,We,ye).pipe((0,Vt.U)(Jt=>({segment:Jt,outlet:ye})))}),(0,On.R)((ye,We)=>(ye[We.outlet]=We.segment,ye),{}),function(k,S){const T=arguments.length>=2;return H=>H.pipe(k?(0,ft.h)((te,ye)=>k(te,ye,H)):Dt.y,xt(1),T?(0,Nt.d)(S):(0,vn.T)(()=>new Re.K))}())}expandSegment(S,T,H,te,ye,We){return(0,_e.D)(H).pipe(Tt(ge=>this.expandSegmentAgainstRoute(S,T,H,ge,te,ye,We).pipe(It(kn=>{if(kn instanceof ii)return(0,Ee.of)(null);throw kn}))),(0,Tn.P)(ge=>!!ge),It((ge,Jt)=>{if(ge instanceof Re.K||"EmptyError"===ge.name){if(mi(T,te,ye))return(0,Ee.of)(new Dn([],{}));throw new ii(T)}throw ge}))}expandSegmentAgainstRoute(S,T,H,te,ye,We,ge){return Vi(te,T,ye,We)?void 0===te.redirectTo?this.matchSegmentAgainstRoute(S,T,te,ye,We):ge&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(S,T,H,te,ye,We):rr(T):rr(T)}expandSegmentAgainstRouteUsingRedirect(S,T,H,te,ye,We){return"**"===te.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(S,H,te,We):this.expandRegularSegmentAgainstRouteUsingRedirect(S,T,H,te,ye,We)}expandWildCardWithParamsAgainstRouteUsingRedirect(S,T,H,te){const ye=this.applyRedirectCommands([],H.redirectTo,{});return H.redirectTo.startsWith("/")?aa(ye):this.lineralizeSegments(H,ye).pipe((0,Le.zg)(We=>{const ge=new Dn(We,{});return this.expandSegment(S,ge,T,We,te,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(S,T,H,te,ye,We){const{matched:ge,consumedSegments:Jt,lastChild:kn,positionalParamSegments:ei}=B(T,te,ye);if(!ge)return rr(T);const ur=this.applyRedirectCommands(Jt,te.redirectTo,ei);return te.redirectTo.startsWith("/")?aa(ur):this.lineralizeSegments(te,ur).pipe((0,Le.zg)(ti=>this.expandSegment(S,T,H,ti.concat(ye.slice(kn)),We,!1)))}matchSegmentAgainstRoute(S,T,H,te,ye){if("**"===H.path)return H.loadChildren?(H._loadedConfig?(0,Ee.of)(H._loadedConfig):this.configLoader.load(S.injector,H)).pipe((0,Vt.U)(ti=>(H._loadedConfig=ti,new Dn(te,{})))):(0,Ee.of)(new Dn(te,{}));const{matched:We,consumedSegments:ge,lastChild:Jt}=B(T,H,te);if(!We)return rr(T);const kn=te.slice(Jt);return this.getChildConfig(S,H,te).pipe((0,Le.zg)(ur=>{const ti=ur.module,Fr=ur.routes,{segmentGroup:fs,slicedSegments:co}=P(T,ge,kn,Fr),Ts=new Dn(fs.segments,fs.children);if(0===co.length&&Ts.hasChildren())return this.expandChildren(ti,Fr,Ts).pipe((0,Vt.U)(sl=>new Dn(ge,sl)));if(0===Fr.length&&0===co.length)return(0,Ee.of)(new Dn(ge,{}));const xo=Ct(H)===ye;return this.expandSegment(ti,Ts,Fr,co,xo?Cn:ye,!0).pipe((0,Vt.U)(as=>new Dn(ge.concat(as.segments),as.children)))}))}getChildConfig(S,T,H){return T.children?(0,Ee.of)(new xs(T.children,S)):T.loadChildren?void 0!==T._loadedConfig?(0,Ee.of)(T._loadedConfig):this.runCanLoadGuards(S.injector,T,H).pipe((0,Le.zg)(te=>{return te?this.configLoader.load(S.injector,T).pipe((0,Vt.U)(ye=>(T._loadedConfig=ye,ye))):(k=T,new we.y(S=>S.error(nr(`Cannot load children because the guard of the route "path: '${k.path}'" returned false`))));var k})):(0,Ee.of)(new xs([],S))}runCanLoadGuards(S,T,H){const te=T.canLoad;if(!te||0===te.length)return(0,Ee.of)(!0);const ye=te.map(We=>{const ge=S.get(We);let Jt;if((k=ge)&&Li(k.canLoad))Jt=ge.canLoad(T,H);else{if(!Li(ge))throw new Error("Invalid CanLoad guard");Jt=ge(T,H)}var k;return Be(Jt)});return(0,Ee.of)(ye).pipe(Ci(),(0,Wn.b)(We=>{if(!Dr(We))return;const ge=nr(`Redirecting to "${this.urlSerializer.serialize(We)}"`);throw ge.url=We,ge}),(0,Vt.U)(We=>!0===We))}lineralizeSegments(S,T){let H=[],te=T.root;for(;;){if(H=H.concat(te.segments),0===te.numberOfChildren)return(0,Ee.of)(H);if(te.numberOfChildren>1||!te.children[Cn])return yo(S.redirectTo);te=te.children[Cn]}}applyRedirectCommands(S,T,H){return this.applyRedirectCreatreUrlTree(T,this.urlSerializer.parse(T),S,H)}applyRedirectCreatreUrlTree(S,T,H,te){const ye=this.createSegmentGroup(S,T.root,H,te);return new yn(ye,this.createQueryParams(T.queryParams,this.urlTree.queryParams),T.fragment)}createQueryParams(S,T){const H={};return Wt(S,(te,ye)=>{if("string"==typeof te&&te.startsWith(":")){const ge=te.substring(1);H[ye]=T[ge]}else H[ye]=te}),H}createSegmentGroup(S,T,H,te){const ye=this.createSegments(S,T.segments,H,te);let We={};return Wt(T.children,(ge,Jt)=>{We[Jt]=this.createSegmentGroup(S,ge,H,te)}),new Dn(ye,We)}createSegments(S,T,H,te){return T.map(ye=>ye.path.startsWith(":")?this.findPosParam(S,ye,te):this.findOrReturn(ye,H))}findPosParam(S,T,H){const te=H[T.path.substring(1)];if(!te)throw new Error(`Cannot redirect to '${S}'. Cannot find '${T.path}'.`);return te}findOrReturn(S,T){let H=0;for(const te of T){if(te.path===S.path)return T.splice(H),te;H++}return S}}function Rs(k){const S={};for(const H of Object.keys(k.children)){const ye=Rs(k.children[H]);(ye.segments.length>0||ye.hasChildren())&&(S[H]=ye)}return function(k){if(1===k.numberOfChildren&&k.children[Cn]){const S=k.children[Cn];return new Dn(k.segments.concat(S.segments),S.children)}return k}(new Dn(k.segments,S))}class br{constructor(S){this.path=S,this.route=this.path[this.path.length-1]}}class So{constructor(S,T){this.component=S,this.route=T}}function Ti(k,S,T){const H=k._root;return Vs(H,S?S._root:null,T,[H.value])}function ss(k,S,T){const H=function(k){if(!k)return null;for(let S=k.parent;S;S=S.parent){const T=S.routeConfig;if(T&&T._loadedConfig)return T._loadedConfig}return null}(S);return(H?H.module.injector:T).get(k)}function Vs(k,S,T,H,te={canDeactivateChecks:[],canActivateChecks:[]}){const ye=Ze(S);return k.children.forEach(We=>{(function(k,S,T,H,te={canDeactivateChecks:[],canActivateChecks:[]}){const ye=k.value,We=S?S.value:null,ge=T?T.getContext(k.value.outlet):null;if(We&&ye.routeConfig===We.routeConfig){const Jt=function(k,S,T){if("function"==typeof T)return T(k,S);switch(T){case"pathParamsChange":return!nn(k.url,S.url);case"pathParamsOrQueryParamsChange":return!nn(k.url,S.url)||!at(k.queryParams,S.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_i(k,S)||!at(k.queryParams,S.queryParams);default:return!_i(k,S)}}(We,ye,ye.routeConfig.runGuardsAndResolvers);Jt?te.canActivateChecks.push(new br(H)):(ye.data=We.data,ye._resolvedData=We._resolvedData),Vs(k,S,ye.component?ge?ge.children:null:T,H,te),Jt&&ge&&ge.outlet&&ge.outlet.isActivated&&te.canDeactivateChecks.push(new So(ge.outlet.component,We))}else We&&_s(S,ge,te),te.canActivateChecks.push(new br(H)),Vs(k,null,ye.component?ge?ge.children:null:T,H,te)})(We,ye[We.value.outlet],T,H.concat([We.value]),te),delete ye[We.value.outlet]}),Wt(ye,(We,ge)=>_s(We,T.getContext(ge),te)),te}function _s(k,S,T){const H=Ze(k),te=k.value;Wt(H,(ye,We)=>{_s(ye,te.component?S?S.children.getContext(We):null:S,T)}),T.canDeactivateChecks.push(new So(te.component&&S&&S.outlet&&S.outlet.isActivated?S.outlet.component:null,te))}class os{}function $i(k){return new we.y(S=>S.error(k))}class Ks{constructor(S,T,H,te,ye,We){this.rootComponentType=S,this.config=T,this.urlTree=H,this.url=te,this.paramsInheritanceStrategy=ye,this.relativeLinkResolution=We}recognize(){const S=P(this.urlTree.root,[],[],this.config.filter(We=>void 0===We.redirectTo),this.relativeLinkResolution).segmentGroup,T=this.processSegmentGroup(this.config,S,Cn);if(null===T)return null;const H=new zn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Cn,this.rootComponentType,null,this.urlTree.root,-1,{}),te=new Ce(H,T),ye=new Xn(this.url,te);return this.inheritParamsAndData(ye._root),ye}inheritParamsAndData(S){const T=S.value,H=an(T,this.paramsInheritanceStrategy);T.params=Object.freeze(H.params),T.data=Object.freeze(H.data),S.children.forEach(te=>this.inheritParamsAndData(te))}processSegmentGroup(S,T,H){return 0===T.segments.length&&T.hasChildren()?this.processChildren(S,T):this.processSegment(S,T,T.segments,H)}processChildren(S,T){const H=[];for(const ye of Object.keys(T.children)){const We=T.children[ye],ge=ln(S,ye),Jt=this.processSegmentGroup(ge,We,ye);if(null===Jt)return null;H.push(...Jt)}const te=js(H);return te.sort((S,T)=>S.value.outlet===Cn?-1:T.value.outlet===Cn?1:S.value.outlet.localeCompare(T.value.outlet)),te}processSegment(S,T,H,te){for(const ye of S){const We=this.processSegmentAgainstRoute(ye,T,H,te);if(null!==We)return We}return mi(T,H,te)?[]:null}processSegmentAgainstRoute(S,T,H,te){if(S.redirectTo||!Vi(S,T,H,te))return null;let ye,We=[],ge=[];if("**"===S.path){const Fr=H.length>0?Qt(H).parameters:{};ye=new zn(H,Fr,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,va(S),Ct(S),S.component,S,li(T),vs(T)+H.length,Ds(S))}else{const Fr=B(T,S,H);if(!Fr.matched)return null;We=Fr.consumedSegments,ge=H.slice(Fr.lastChild),ye=new zn(We,Fr.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,va(S),Ct(S),S.component,S,li(T),vs(T)+We.length,Ds(S))}const Jt=(k=S).children?k.children:k.loadChildren?k._loadedConfig.routes:[],{segmentGroup:kn,slicedSegments:ei}=P(T,We,ge,Jt.filter(Fr=>void 0===Fr.redirectTo),this.relativeLinkResolution);var k;if(0===ei.length&&kn.hasChildren()){const Fr=this.processChildren(Jt,kn);return null===Fr?null:[new Ce(ye,Fr)]}if(0===Jt.length&&0===ei.length)return[new Ce(ye,[])];const ur=Ct(S)===te,ti=this.processSegment(Jt,kn,ei,ur?Cn:te);return null===ti?null:[new Ce(ye,ti)]}}function Ji(k){const S=k.value.routeConfig;return S&&""===S.path&&void 0===S.redirectTo}function js(k){const S=[],T=new Set;for(const H of k){if(!Ji(H)){S.push(H);continue}const te=S.find(ye=>H.value.routeConfig===ye.value.routeConfig);void 0!==te?(te.children.push(...H.children),T.add(te)):S.push(H)}for(const H of T){const te=js(H.children);S.push(new Ce(H.value,te))}return S.filter(H=>!T.has(H))}function li(k){let S=k;for(;S._sourceSegment;)S=S._sourceSegment;return S}function vs(k){let S=k,T=S._segmentIndexShift?S._segmentIndexShift:0;for(;S._sourceSegment;)S=S._sourceSegment,T+=S._segmentIndexShift?S._segmentIndexShift:0;return T-1}function va(k){return k.data||{}}function Ds(k){return k.resolve||{}}function w(k){return(0,Bt.w)(S=>{const T=k(S);return T?(0,_e.D)(T).pipe((0,Vt.U)(()=>S)):(0,Ee.of)(S)})}class Y{}class dt extends class{shouldDetach(S){return!1}store(S,T){}shouldAttach(S){return!1}retrieve(S){return null}shouldReuseRoute(S,T){return S.routeConfig===T.routeConfig}}{}const jt=new O.OlP("ROUTES");class fn{constructor(S,T,H,te){this.loader=S,this.compiler=T,this.onLoadStartListener=H,this.onLoadEndListener=te}load(S,T){if(T._loader$)return T._loader$;this.onLoadStartListener&&this.onLoadStartListener(T);const te=this.loadModuleFactory(T.loadChildren).pipe((0,Vt.U)(ye=>{this.onLoadEndListener&&this.onLoadEndListener(T);const We=ye.create(S);return new xs(wt(We.injector.get(jt,void 0,O.XFs.Self|O.XFs.Optional)).map(qe),We)}),It(ye=>{throw T._loader$=void 0,ye}));return T._loader$=new Fe.c(te,()=>new Oe.xQ).pipe((0,Rr.x)()),T._loader$}loadModuleFactory(S){return"string"==typeof S?(0,_e.D)(this.loader.load(S)):Be(S()).pipe((0,Le.zg)(T=>T instanceof O.YKP?(0,Ee.of)(T):(0,_e.D)(this.compiler.compileModuleAsync(T))))}}class lr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Nn,this.attachRef=null}}class Nn{constructor(){this.contexts=new Map}onChildOutletCreated(S,T){const H=this.getOrCreateContext(S);H.outlet=T,this.contexts.set(S,H)}onChildOutletDestroyed(S){const T=this.getContext(S);T&&(T.outlet=null,T.attachRef=null)}onOutletDeactivated(){const S=this.contexts;return this.contexts=new Map,S}onOutletReAttached(S){this.contexts=S}getOrCreateContext(S){let T=this.getContext(S);return T||(T=new lr,this.contexts.set(S,T)),T}getContext(S){return this.contexts.get(S)||null}}class ui{shouldProcessUrl(S){return!0}extract(S){return S}merge(S,T){return S}}function qt(k){throw k}function dr(k,S,T){return S.parse("/")}function Ii(k,S){return(0,Ee.of)(null)}const es={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Bn={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Kn=(()=>{class k{constructor(T,H,te,ye,We,ge,Jt,kn){this.rootComponentType=T,this.urlSerializer=H,this.rootContexts=te,this.location=ye,this.config=kn,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Oe.xQ,this.errorHandler=qt,this.malformedUriErrorHandler=dr,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ii,afterPreactivation:Ii},this.urlHandlingStrategy=new ui,this.routeReuseStrategy=new dt,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=We.get(O.h0i),this.console=We.get(O.c2e);const ti=We.get(O.R0b);this.isNgZoneEnabled=ti instanceof O.R0b&&O.R0b.isInAngularZone(),this.resetConfig(kn),this.currentUrlTree=new yn(new Dn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new fn(ge,Jt,Fr=>this.triggerEvent(new Ar(Fr)),Fr=>this.triggerEvent(new hi(Fr))),this.routerState=gt(this.currentUrlTree,this.rootComponentType),this.transitions=new Ke.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var T;return null===(T=this.location.getState())||void 0===T?void 0:T.\u0275routerPageId}setupNavigations(T){const H=this.events;return T.pipe((0,ft.h)(te=>0!==te.id),(0,Vt.U)(te=>Object.assign(Object.assign({},te),{extractedUrl:this.urlHandlingStrategy.extract(te.rawUrl)})),(0,Bt.w)(te=>{let ye=!1,We=!1;return(0,Ee.of)(te).pipe((0,Wn.b)(ge=>{this.currentNavigation={id:ge.id,initialUrl:ge.currentRawUrl,extractedUrl:ge.extractedUrl,trigger:ge.source,extras:ge.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Bt.w)(ge=>{const Jt=this.browserUrlTree.toString(),kn=!this.navigated||ge.extractedUrl.toString()!==Jt||Jt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||kn)&&this.urlHandlingStrategy.shouldProcessUrl(ge.rawUrl))return Ln(ge.source)&&(this.browserUrlTree=ge.extractedUrl),(0,Ee.of)(ge).pipe((0,Bt.w)(ur=>{const ti=this.transitions.getValue();return H.next(new Gn(ur.id,this.serializeUrl(ur.extractedUrl),ur.source,ur.restoredState)),ti!==this.transitions.getValue()?Te.E:Promise.resolve(ur)}),function(k,S,T,H){return(0,Bt.w)(te=>function(k,S,T,H,te){return new To(k,S,T,H,te).apply()}(k,S,T,te.extractedUrl,H).pipe((0,Vt.U)(ye=>Object.assign(Object.assign({},te),{urlAfterRedirects:ye}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Wn.b)(ur=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:ur.urlAfterRedirects})}),function(k,S,T,H,te){return(0,Le.zg)(ye=>function(k,S,T,H,te="emptyOnly",ye="legacy"){try{const We=new Ks(k,S,T,H,te,ye).recognize();return null===We?$i(new os):(0,Ee.of)(We)}catch(We){return $i(We)}}(k,S,ye.urlAfterRedirects,T(ye.urlAfterRedirects),H,te).pipe((0,Vt.U)(We=>Object.assign(Object.assign({},ye),{targetSnapshot:We}))))}(this.rootComponentType,this.config,ur=>this.serializeUrl(ur),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Wn.b)(ur=>{"eager"===this.urlUpdateStrategy&&(ur.extras.skipLocationChange||this.setBrowserUrl(ur.urlAfterRedirects,ur),this.browserUrlTree=ur.urlAfterRedirects);const ti=new or(ur.id,this.serializeUrl(ur.extractedUrl),this.serializeUrl(ur.urlAfterRedirects),ur.targetSnapshot);H.next(ti)}));if(kn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:ti,extractedUrl:Fr,source:fs,restoredState:co,extras:Ts}=ge,xo=new Gn(ti,this.serializeUrl(Fr),fs,co);H.next(xo);const No=gt(Fr,this.rootComponentType).snapshot;return(0,Ee.of)(Object.assign(Object.assign({},ge),{targetSnapshot:No,urlAfterRedirects:Fr,extras:Object.assign(Object.assign({},Ts),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=ge.rawUrl,this.browserUrlTree=ge.urlAfterRedirects,ge.resolve(null),Te.E}),w(ge=>{const{targetSnapshot:Jt,id:kn,extractedUrl:ei,rawUrl:ur,extras:{skipLocationChange:ti,replaceUrl:Fr}}=ge;return this.hooks.beforePreactivation(Jt,{navigationId:kn,appliedUrlTree:ei,rawUrlTree:ur,skipLocationChange:!!ti,replaceUrl:!!Fr})}),(0,Wn.b)(ge=>{const Jt=new sr(ge.id,this.serializeUrl(ge.extractedUrl),this.serializeUrl(ge.urlAfterRedirects),ge.targetSnapshot);this.triggerEvent(Jt)}),(0,Vt.U)(ge=>Object.assign(Object.assign({},ge),{guards:Ti(ge.targetSnapshot,ge.currentSnapshot,this.rootContexts)})),function(k,S){return(0,Le.zg)(T=>{const{targetSnapshot:H,currentSnapshot:te,guards:{canActivateChecks:ye,canDeactivateChecks:We}}=T;return 0===We.length&&0===ye.length?(0,Ee.of)(Object.assign(Object.assign({},T),{guardsResult:!0})):function(k,S,T,H){return(0,_e.D)(k).pipe((0,Le.zg)(te=>function(k,S,T,H,te){const ye=S&&S.routeConfig?S.routeConfig.canDeactivate:null;if(!ye||0===ye.length)return(0,Ee.of)(!0);const We=ye.map(ge=>{const Jt=ss(ge,S,te);let kn;if(function(k){return k&&Li(k.canDeactivate)}(Jt))kn=Be(Jt.canDeactivate(k,S,T,H));else{if(!Li(Jt))throw new Error("Invalid CanDeactivate guard");kn=Be(Jt(k,S,T,H))}return kn.pipe((0,Tn.P)())});return(0,Ee.of)(We).pipe(Ci())}(te.component,te.route,T,S,H)),(0,Tn.P)(te=>!0!==te,!0))}(We,H,te,k).pipe((0,Le.zg)(ge=>ge&&function(k){return"boolean"==typeof k}(ge)?function(k,S,T,H){return(0,_e.D)(S).pipe(Tt(te=>(0,Ge.z)(function(k,S){return null!==k&&S&&S(new gr(k)),(0,Ee.of)(!0)}(te.route.parent,H),function(k,S){return null!==k&&S&&S(new Ft(k)),(0,Ee.of)(!0)}(te.route,H),function(k,S,T){const H=S[S.length-1],ye=S.slice(0,S.length-1).reverse().map(We=>function(k){const S=k.routeConfig?k.routeConfig.canActivateChild:null;return S&&0!==S.length?{node:k,guards:S}:null}(We)).filter(We=>null!==We).map(We=>lt(()=>{const ge=We.guards.map(Jt=>{const kn=ss(Jt,We.node,T);let ei;if(function(k){return k&&Li(k.canActivateChild)}(kn))ei=Be(kn.canActivateChild(H,k));else{if(!Li(kn))throw new Error("Invalid CanActivateChild guard");ei=Be(kn(H,k))}return ei.pipe((0,Tn.P)())});return(0,Ee.of)(ge).pipe(Ci())}));return(0,Ee.of)(ye).pipe(Ci())}(k,te.path,T),function(k,S,T){const H=S.routeConfig?S.routeConfig.canActivate:null;if(!H||0===H.length)return(0,Ee.of)(!0);const te=H.map(ye=>lt(()=>{const We=ss(ye,S,T);let ge;if(function(k){return k&&Li(k.canActivate)}(We))ge=Be(We.canActivate(S,k));else{if(!Li(We))throw new Error("Invalid CanActivate guard");ge=Be(We(S,k))}return ge.pipe((0,Tn.P)())}));return(0,Ee.of)(te).pipe(Ci())}(k,te.route,T))),(0,Tn.P)(te=>!0!==te,!0))}(H,ye,k,S):(0,Ee.of)(ge)),(0,Vt.U)(ge=>Object.assign(Object.assign({},T),{guardsResult:ge})))})}(this.ngModule.injector,ge=>this.triggerEvent(ge)),(0,Wn.b)(ge=>{if(Dr(ge.guardsResult)){const kn=nr(`Redirecting to "${this.serializeUrl(ge.guardsResult)}"`);throw kn.url=ge.guardsResult,kn}const Jt=new pr(ge.id,this.serializeUrl(ge.extractedUrl),this.serializeUrl(ge.urlAfterRedirects),ge.targetSnapshot,!!ge.guardsResult);this.triggerEvent(Jt)}),(0,ft.h)(ge=>!!ge.guardsResult||(this.restoreHistory(ge),this.cancelNavigationTransition(ge,""),!1)),w(ge=>{if(ge.guards.canActivateChecks.length)return(0,Ee.of)(ge).pipe((0,Wn.b)(Jt=>{const kn=new Lr(Jt.id,this.serializeUrl(Jt.extractedUrl),this.serializeUrl(Jt.urlAfterRedirects),Jt.targetSnapshot);this.triggerEvent(kn)}),(0,Bt.w)(Jt=>{let kn=!1;return(0,Ee.of)(Jt).pipe(function(k,S){return(0,Le.zg)(T=>{const{targetSnapshot:H,guards:{canActivateChecks:te}}=T;if(!te.length)return(0,Ee.of)(T);let ye=0;return(0,_e.D)(te).pipe(Tt(We=>function(k,S,T,H){return function(k,S,T,H){const te=Object.keys(k);if(0===te.length)return(0,Ee.of)({});const ye={};return(0,_e.D)(te).pipe((0,Le.zg)(We=>function(k,S,T,H){const te=ss(k,S,H);return Be(te.resolve?te.resolve(S,T):te(S,T))}(k[We],S,T,H).pipe((0,Wn.b)(ge=>{ye[We]=ge}))),xt(1),(0,Le.zg)(()=>Object.keys(ye).length===te.length?(0,Ee.of)(ye):Te.E))}(k._resolve,k,S,H).pipe((0,Vt.U)(ye=>(k._resolvedData=ye,k.data=Object.assign(Object.assign({},k.data),an(k,T).resolve),null)))}(We.route,H,k,S)),(0,Wn.b)(()=>ye++),xt(1),(0,Le.zg)(We=>ye===te.length?(0,Ee.of)(T):Te.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Wn.b)({next:()=>kn=!0,complete:()=>{kn||(this.restoreHistory(Jt),this.cancelNavigationTransition(Jt,"At least one route resolver didn't emit any value."))}}))}),(0,Wn.b)(Jt=>{const kn=new Nr(Jt.id,this.serializeUrl(Jt.extractedUrl),this.serializeUrl(Jt.urlAfterRedirects),Jt.targetSnapshot);this.triggerEvent(kn)}))}),w(ge=>{const{targetSnapshot:Jt,id:kn,extractedUrl:ei,rawUrl:ur,extras:{skipLocationChange:ti,replaceUrl:Fr}}=ge;return this.hooks.afterPreactivation(Jt,{navigationId:kn,appliedUrlTree:ei,rawUrlTree:ur,skipLocationChange:!!ti,replaceUrl:!!Fr})}),(0,Vt.U)(ge=>{const Jt=function(k,S,T){const H=ws(k,S._root,T?T._root:void 0);return new ze(H,S)}(this.routeReuseStrategy,ge.targetSnapshot,ge.currentRouterState);return Object.assign(Object.assign({},ge),{targetRouterState:Jt})}),(0,Wn.b)(ge=>{this.currentUrlTree=ge.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ge.urlAfterRedirects,ge.rawUrl),this.routerState=ge.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ge.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ge),this.browserUrlTree=ge.urlAfterRedirects)}),((k,S,T)=>(0,Vt.U)(H=>(new As(S,H.targetRouterState,H.currentRouterState,T).activate(k),H)))(this.rootContexts,this.routeReuseStrategy,ge=>this.triggerEvent(ge)),(0,Wn.b)({next(){ye=!0},complete(){ye=!0}}),function(k){return S=>S.lift(new Mt(k))}(()=>{var ge;if(!ye&&!We){const Jt=`Navigation ID ${te.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(te),this.cancelNavigationTransition(te,Jt)):this.cancelNavigationTransition(te,Jt)}(null===(ge=this.currentNavigation)||void 0===ge?void 0:ge.id)===te.id&&(this.currentNavigation=null)}),It(ge=>{if(We=!0,function(k){return k&&k[Cr]}(ge)){const Jt=Dr(ge.url);Jt||(this.navigated=!0,this.restoreHistory(te,!0));const kn=new En(te.id,this.serializeUrl(te.extractedUrl),ge.message);H.next(kn),Jt?setTimeout(()=>{const ei=this.urlHandlingStrategy.merge(ge.url,this.rawUrlTree),ur={skipLocationChange:te.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ln(te.source)};this.scheduleNavigation(ei,"imperative",null,ur,{resolve:te.resolve,reject:te.reject,promise:te.promise})},0):te.resolve(!1)}else{this.restoreHistory(te,!0);const Jt=new er(te.id,this.serializeUrl(te.extractedUrl),ge);H.next(Jt);try{te.resolve(this.errorHandler(ge))}catch(kn){te.reject(kn)}}return Te.E}))}))}resetRootComponentType(T){this.rootComponentType=T,this.routerState.root.component=this.rootComponentType}getTransition(){const T=this.transitions.value;return T.urlAfterRedirects=this.browserUrlTree,T}setTransition(T){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),T))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(T=>{const H=this.extractLocationChangeInfoFromEvent(T);this.shouldScheduleNavigation(this.lastLocationChangeInfo,H)&&setTimeout(()=>{const{source:te,state:ye,urlTree:We}=H,ge={replaceUrl:!0};if(ye){const Jt=Object.assign({},ye);delete Jt.navigationId,delete Jt.\u0275routerPageId,0!==Object.keys(Jt).length&&(ge.state=Jt)}this.scheduleNavigation(We,te,ye,ge)},0),this.lastLocationChangeInfo=H}))}extractLocationChangeInfoFromEvent(T){var H;return{source:"popstate"===T.type?"popstate":"hashchange",urlTree:this.parseUrl(T.url),state:(null===(H=T.state)||void 0===H?void 0:H.navigationId)?T.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(T,H){if(!T)return!0;const te=H.urlTree.toString()===T.urlTree.toString();return H.transitionId!==T.transitionId||!te||!("hashchange"===H.source&&"popstate"===T.source||"popstate"===H.source&&"hashchange"===T.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(T){this.events.next(T)}resetConfig(T){le(T),this.config=T.map(qe),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(T,H={}){const{relativeTo:te,queryParams:ye,fragment:We,queryParamsHandling:ge,preserveFragment:Jt}=H,kn=te||this.routerState.root,ei=Jt?this.currentUrlTree.fragment:We;let ur=null;switch(ge){case"merge":ur=Object.assign(Object.assign({},this.currentUrlTree.queryParams),ye);break;case"preserve":ur=this.currentUrlTree.queryParams;break;default:ur=ye||null}return null!==ur&&(ur=this.removeEmptyProps(ur)),function(k,S,T,H,te){if(0===T.length)return Mr(S.root,S.root,S,H,te);const ye=function(k){if("string"==typeof k[0]&&1===k.length&&"/"===k[0])return new eo(!0,0,k);let S=0,T=!1;const H=k.reduce((te,ye,We)=>{if("object"==typeof ye&&null!=ye){if(ye.outlets){const ge={};return Wt(ye.outlets,(Jt,kn)=>{ge[kn]="string"==typeof Jt?Jt.split("/"):Jt}),[...te,{outlets:ge}]}if(ye.segmentPath)return[...te,ye.segmentPath]}return"string"!=typeof ye?[...te,ye]:0===We?(ye.split("/").forEach((ge,Jt)=>{0==Jt&&"."===ge||(0==Jt&&""===ge?T=!0:".."===ge?S++:""!=ge&&te.push(ge))}),te):[...te,ye]},[]);return new eo(T,S,H)}(T);if(ye.toRoot())return Mr(S.root,new Dn([],{}),S,H,te);const We=function(k,S,T){if(k.isAbsolute)return new vi(S.root,!0,0);if(-1===T.snapshot._lastPathIndex){const ye=T.snapshot._urlSegment;return new vi(ye,ye===S.root,0)}const H=Xs(k.commands[0])?0:1;return function(k,S,T){let H=k,te=S,ye=T;for(;ye>te;){if(ye-=te,H=H.parent,!H)throw new Error("Invalid number of '../'");te=H.segments.length}return new vi(H,!1,te-ye)}(T.snapshot._urlSegment,T.snapshot._lastPathIndex+H,k.numberOfDoubleDots)}(ye,S,k),ge=We.processChildren?ai(We.segmentGroup,We.index,ye.commands):Ki(We.segmentGroup,We.index,ye.commands);return Mr(We.segmentGroup,ge,S,H,te)}(kn,this.currentUrlTree,T,ur,null!=ei?ei:null)}navigateByUrl(T,H={skipLocationChange:!1}){const te=Dr(T)?T:this.parseUrl(T),ye=this.urlHandlingStrategy.merge(te,this.rawUrlTree);return this.scheduleNavigation(ye,"imperative",null,H)}navigate(T,H={skipLocationChange:!1}){return function(k){for(let S=0;S<k.length;S++){const T=k[S];if(null==T)throw new Error(`The requested path contains ${T} segment at index ${S}`)}}(T),this.navigateByUrl(this.createUrlTree(T,H),H)}serializeUrl(T){return this.urlSerializer.serialize(T)}parseUrl(T){let H;try{H=this.urlSerializer.parse(T)}catch(te){H=this.malformedUriErrorHandler(te,this.urlSerializer,T)}return H}isActive(T,H){let te;if(te=!0===H?Object.assign({},es):!1===H?Object.assign({},Bn):H,Dr(T))return be(this.currentUrlTree,T,te);const ye=this.parseUrl(T);return be(this.currentUrlTree,ye,te)}removeEmptyProps(T){return Object.keys(T).reduce((H,te)=>{const ye=T[te];return null!=ye&&(H[te]=ye),H},{})}processNavigations(){this.navigations.subscribe(T=>{this.navigated=!0,this.lastSuccessfulId=T.id,this.currentPageId=T.targetPageId,this.events.next(new Jn(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,T.resolve(!0)},T=>{this.console.warn(`Unhandled Navigation Error: ${T}`)})}scheduleNavigation(T,H,te,ye,We){var ge,Jt;if(this.disposed)return Promise.resolve(!1);const kn=this.getTransition(),ei=Ln(H)&&kn&&!Ln(kn.source),Fr=(this.lastSuccessfulId===kn.id||this.currentNavigation?kn.rawUrl:kn.urlAfterRedirects).toString()===T.toString();if(ei&&Fr)return Promise.resolve(!0);let fs,co,Ts;We?(fs=We.resolve,co=We.reject,Ts=We.promise):Ts=new Promise((as,sl)=>{fs=as,co=sl});const xo=++this.navigationId;let No;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(te=this.location.getState()),No=te&&te.\u0275routerPageId?te.\u0275routerPageId:ye.replaceUrl||ye.skipLocationChange?null!==(ge=this.browserPageId)&&void 0!==ge?ge:0:(null!==(Jt=this.browserPageId)&&void 0!==Jt?Jt:0)+1):No=0,this.setTransition({id:xo,targetPageId:No,source:H,restoredState:te,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:T,extras:ye,resolve:fs,reject:co,promise:Ts,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ts.catch(as=>Promise.reject(as))}setBrowserUrl(T,H){const te=this.urlSerializer.serialize(T),ye=Object.assign(Object.assign({},H.extras.state),this.generateNgRouterState(H.id,H.targetPageId));this.location.isCurrentPathEqualTo(te)||H.extras.replaceUrl?this.location.replaceState(te,"",ye):this.location.go(te,"",ye)}restoreHistory(T,H=!1){var te,ye;if("computed"===this.canceledNavigationResolution){const We=this.currentPageId-T.targetPageId;"popstate"!==T.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(te=this.currentNavigation)||void 0===te?void 0:te.finalUrl)||0===We?this.currentUrlTree===(null===(ye=this.currentNavigation)||void 0===ye?void 0:ye.finalUrl)&&0===We&&(this.resetState(T),this.browserUrlTree=T.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(We)}else"replace"===this.canceledNavigationResolution&&(H&&this.resetState(T),this.resetUrlToCurrentUrlTree())}resetState(T){this.routerState=T.currentRouterState,this.currentUrlTree=T.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,T.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(T,H){const te=new En(T.id,this.serializeUrl(T.extractedUrl),H);this.triggerEvent(te),T.resolve(!1)}generateNgRouterState(T,H){return"computed"===this.canceledNavigationResolution?{navigationId:T,\u0275routerPageId:H}:{navigationId:T}}}return k.\u0275fac=function(T){return new(T||k)(O.LFG(O.DyG),O.LFG(Mn),O.LFG(Nn),O.LFG(E.Ye),O.LFG(O.zs3),O.LFG(O.v3s),O.LFG(O.Sil),O.LFG(void 0))},k.\u0275prov=O.Yz7({token:k,factory:k.\u0275fac}),k})();function Ln(k){return"imperative"!==k}let Pt=(()=>{class k{constructor(T,H,te,ye,We){this.router=T,this.route=H,this.commands=[],this.onChanges=new Oe.xQ,null==te&&ye.setAttribute(We.nativeElement,"tabindex","0")}ngOnChanges(T){this.onChanges.next(this)}set routerLink(T){this.commands=null!=T?Array.isArray(T)?T:[T]:[]}onClick(){const T={skipLocationChange:Ri(this.skipLocationChange),replaceUrl:Ri(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,T),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ri(this.preserveFragment)})}}return k.\u0275fac=function(T){return new(T||k)(O.Y36(Kn),O.Y36(At),O.$8M("tabindex"),O.Y36(O.Qsj),O.Y36(O.SBq))},k.\u0275dir=O.lG2({type:k,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(T,H){1&T&&O.NdJ("click",function(){return H.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[O.TTD]}),k})();function Ri(k){return""===k||!!k}let lo=(()=>{class k{constructor(T,H,te,ye,We){this.parentContexts=T,this.location=H,this.resolver=te,this.changeDetector=We,this.activated=null,this._activatedRoute=null,this.activateEvents=new O.vpe,this.deactivateEvents=new O.vpe,this.name=ye||Cn,T.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const T=this.parentContexts.getContext(this.name);T&&T.route&&(T.attachRef?this.attach(T.attachRef,T.route):this.activateWith(T.route,T.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const T=this.activated;return this.activated=null,this._activatedRoute=null,T}attach(T,H){this.activated=T,this._activatedRoute=H,this.location.insert(T.hostView)}deactivate(){if(this.activated){const T=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,H){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=T;const We=(H=H||this.resolver).resolveComponentFactory(T._futureSnapshot.routeConfig.component),ge=this.parentContexts.getOrCreateContext(this.name).children,Jt=new Ea(T,ge,this.location.injector);this.activated=this.location.createComponent(We,this.location.length,Jt),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return k.\u0275fac=function(T){return new(T||k)(O.Y36(Nn),O.Y36(O.s_b),O.Y36(O._Vd),O.$8M("name"),O.Y36(O.sBO))},k.\u0275dir=O.lG2({type:k,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),k})();class Ea{constructor(S,T,H){this.route=S,this.childContexts=T,this.parent=H}get(S,T){return S===At?this.route:S===Nn?this.childContexts:this.parent.get(S,T)}}class Ha{}class Ia{preload(S,T){return T().pipe(It(()=>(0,Ee.of)(null)))}}class ua{preload(S,T){return(0,Ee.of)(null)}}let nl=(()=>{class k{constructor(T,H,te,ye,We){this.router=T,this.injector=ye,this.preloadingStrategy=We,this.loader=new fn(H,te,kn=>T.triggerEvent(new Ar(kn)),kn=>T.triggerEvent(new hi(kn)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,ft.h)(T=>T instanceof Jn),Tt(()=>this.preload())).subscribe(()=>{})}preload(){const T=this.injector.get(O.h0i);return this.processRoutes(T,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(T,H){const te=[];for(const ye of H)if(ye.loadChildren&&!ye.canLoad&&ye._loadedConfig){const We=ye._loadedConfig;te.push(this.processRoutes(We.module,We.routes))}else ye.loadChildren&&!ye.canLoad?te.push(this.preloadConfig(T,ye)):ye.children&&te.push(this.processRoutes(T,ye.children));return(0,_e.D)(te).pipe((0,Sr.J)(),(0,Vt.U)(ye=>{}))}preloadConfig(T,H){return this.preloadingStrategy.preload(H,()=>(H._loadedConfig?(0,Ee.of)(H._loadedConfig):this.loader.load(T.injector,H)).pipe((0,Le.zg)(ye=>(H._loadedConfig=ye,this.processRoutes(ye.module,ye.routes)))))}}return k.\u0275fac=function(T){return new(T||k)(O.LFG(Kn),O.LFG(O.v3s),O.LFG(O.Sil),O.LFG(O.zs3),O.LFG(Ha))},k.\u0275prov=O.Yz7({token:k,factory:k.\u0275fac}),k})(),rl=(()=>{class k{constructor(T,H,te={}){this.router=T,this.viewportScroller=H,this.options=te,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},te.scrollPositionRestoration=te.scrollPositionRestoration||"disabled",te.anchorScrolling=te.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(T=>{T instanceof Gn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=T.navigationTrigger,this.restoredId=T.restoredState?T.restoredState.navigationId:0):T instanceof Jn&&(this.lastId=T.id,this.scheduleScrollEvent(T,this.router.parseUrl(T.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(T=>{T instanceof ni&&(T.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(T.position):T.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(T.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(T,H){this.router.triggerEvent(new ni(T,"popstate"===this.lastSource?this.store[this.restoredId]:null,H))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return k.\u0275fac=function(T){return new(T||k)(O.LFG(Kn),O.LFG(E.EM),O.LFG(void 0))},k.\u0275prov=O.Yz7({token:k,factory:k.\u0275fac}),k})();const Qo=new O.OlP("ROUTER_CONFIGURATION"),fr=new O.OlP("ROUTER_FORROOT_GUARD"),Zs=[E.Ye,{provide:Mn,useClass:Fn},{provide:Kn,useFactory:function(k,S,T,H,te,ye,We,ge={},Jt,kn){const ei=new Kn(null,k,S,T,H,te,ye,wt(We));return Jt&&(ei.urlHandlingStrategy=Jt),kn&&(ei.routeReuseStrategy=kn),function(k,S){k.errorHandler&&(S.errorHandler=k.errorHandler),k.malformedUriErrorHandler&&(S.malformedUriErrorHandler=k.malformedUriErrorHandler),k.onSameUrlNavigation&&(S.onSameUrlNavigation=k.onSameUrlNavigation),k.paramsInheritanceStrategy&&(S.paramsInheritanceStrategy=k.paramsInheritanceStrategy),k.relativeLinkResolution&&(S.relativeLinkResolution=k.relativeLinkResolution),k.urlUpdateStrategy&&(S.urlUpdateStrategy=k.urlUpdateStrategy)}(ge,ei),ge.enableTracing&&ei.events.subscribe(ur=>{var ti,Fr;null===(ti=console.group)||void 0===ti||ti.call(console,`Router Event: ${ur.constructor.name}`),console.log(ur.toString()),console.log(ur),null===(Fr=console.groupEnd)||void 0===Fr||Fr.call(console)}),ei},deps:[Mn,Nn,E.Ye,O.zs3,O.v3s,O.Sil,jt,Qo,[class{},new O.FiY],[Y,new O.FiY]]},Nn,{provide:At,useFactory:function(k){return k.routerState.root},deps:[Kn]},{provide:O.v3s,useClass:O.EAV},nl,ua,Ia,{provide:Qo,useValue:{enableTracing:!1}}];function bi(){return new O.PXZ("Router",Kn)}let fe=(()=>{class k{constructor(T,H){}static forRoot(T,H){return{ngModule:k,providers:[Zs,ut(T),{provide:fr,useFactory:ke,deps:[[Kn,new O.FiY,new O.tp0]]},{provide:Qo,useValue:H||{}},{provide:E.S$,useFactory:K,deps:[E.lw,[new O.tBr(E.mr),new O.FiY],Qo]},{provide:rl,useFactory:z,deps:[Kn,E.EM,Qo]},{provide:Ha,useExisting:H&&H.preloadingStrategy?H.preloadingStrategy:ua},{provide:O.PXZ,multi:!0,useFactory:bi},[pi,{provide:O.ip1,multi:!0,useFactory:ca,deps:[pi]},{provide:il,useFactory:Ao,deps:[pi]},{provide:O.tb,multi:!0,useExisting:il}]]}}static forChild(T){return{ngModule:k,providers:[ut(T)]}}}return k.\u0275fac=function(T){return new(T||k)(O.LFG(fr,8),O.LFG(Kn,8))},k.\u0275mod=O.oAB({type:k}),k.\u0275inj=O.cJS({}),k})();function z(k,S,T){return T.scrollOffset&&S.setOffset(T.scrollOffset),new rl(k,S,T)}function K(k,S,T={}){return T.useHash?new E.Do(k,S):new E.b0(k,S)}function ke(k){return"guarded"}function ut(k){return[{provide:O.deG,multi:!0,useValue:k},{provide:jt,multi:!0,useValue:k}]}let pi=(()=>{class k{constructor(T){this.injector=T,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Oe.xQ}appInitializer(){return this.injector.get(E.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let H=null;const te=new Promise(ge=>H=ge),ye=this.injector.get(Kn),We=this.injector.get(Qo);return"disabled"===We.initialNavigation?(ye.setUpLocationChangeListener(),H(!0)):"enabled"===We.initialNavigation||"enabledBlocking"===We.initialNavigation?(ye.hooks.afterPreactivation=()=>this.initNavigation?(0,Ee.of)(null):(this.initNavigation=!0,H(!0),this.resultOfPreactivationDone),ye.initialNavigation()):H(!0),te})}bootstrapListener(T){const H=this.injector.get(Qo),te=this.injector.get(nl),ye=this.injector.get(rl),We=this.injector.get(Kn),ge=this.injector.get(O.z2F);T===ge.components[0]&&(("enabledNonBlocking"===H.initialNavigation||void 0===H.initialNavigation)&&We.initialNavigation(),te.setUpPreloading(),ye.init(),We.resetRootComponentType(ge.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return k.\u0275fac=function(T){return new(T||k)(O.LFG(O.zs3))},k.\u0275prov=O.Yz7({token:k,factory:k.\u0275fac}),k})();function ca(k){return k.appInitializer.bind(k)}function Ao(k){return k.bootstrapListener.bind(k)}const il=new O.OlP("Router Initializer")},3607:(cn,rt,F)=>{"use strict";F.d(rt,{$:()=>_a,A:()=>tt,B:()=>Mt,G:()=>Sn,H:()=>Jr,J:()=>Ei,L:()=>Qn,M:()=>De,N:()=>q,P:()=>V,Q:()=>B,R:()=>fo,T:()=>P,U:()=>ln,V:()=>cr,W:()=>Qr,X:()=>rr,Y:()=>Vs,Z:()=>ja,_:()=>Os,a:()=>S,a0:()=>$i,a1:()=>Ks,a2:()=>hs,a3:()=>js,a4:()=>li,a5:()=>va,a6:()=>la,a7:()=>ao,a8:()=>I,a9:()=>N,aA:()=>yc,aB:()=>Zl,aC:()=>Ta,aD:()=>La,aE:()=>At,aI:()=>te,aL:()=>_t,aa:()=>dt,ab:()=>fn,ac:()=>Nn,af:()=>dr,ag:()=>es,ah:()=>Bn,ak:()=>To,al:()=>Ea,an:()=>fe,ao:()=>ir,ap:()=>$,aq:()=>Jn,ar:()=>ht,as:()=>ar,at:()=>On,au:()=>Su,av:()=>Cu,aw:()=>Tn,ax:()=>Ht,ay:()=>er,az:()=>zr,b:()=>Jo,c:()=>Hr,d:()=>wi,e:()=>_r,f:()=>hl,g:()=>Eu,h:()=>fl,i:()=>_o,j:()=>Yu,k:()=>ou,l:()=>wl,m:()=>Go,n:()=>Aa,o:()=>vn,q:()=>Ia,r:()=>Pl,s:()=>Pa,u:()=>kl,y:()=>Qo});var E=F(8239),O=F(3854),ie=F(8026),L=F(5422);function oe(D,p){var _={};for(var A in D)Object.prototype.hasOwnProperty.call(D,A)&&p.indexOf(A)<0&&(_[A]=D[A]);if(null!=D&&"function"==typeof Object.getOwnPropertySymbols){var ne=0;for(A=Object.getOwnPropertySymbols(D);ne<A.length;ne++)p.indexOf(A[ne])<0&&Object.prototype.propertyIsEnumerable.call(D,A[ne])&&(_[A[ne]]=D[A[ne]])}return _}var kt=F(3910);const vn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},tt={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Mt=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Gt=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Vt=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),wn=new L.Yd("@firebase/auth");function Hn(D,...p){wn.logLevel<=L.in.ERROR&&wn.error(`Auth (${ie.SDK_VERSION}): ${D}`,...p)}function On(D,...p){throw Sr(D,...p)}function Tn(D,...p){return Sr(D,...p)}function Wn(D,p,_){const A=Object.assign(Object.assign({},Gt()),{[p]:_});return new O.LL("auth","Firebase",A).create(p,{appName:D.name})}function Rr(D,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&On(D,"argument-error"),Wn(D,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Sr(D,...p){if("string"!=typeof D){const _=p[0],A=[...p.slice(1)];return A[0]&&(A[0].appName=D.name),D._errorFactory.create(_,...A)}return Vt.create(D,...p)}function Ht(D,p,..._){if(!D)throw Sr(p,..._)}function Gn(D){const p="INTERNAL ASSERTION FAILED: "+D;throw Hn(p),new Error(p)}function Jn(D,p){D||Gn(p)}const En=new Map;function er(D){Jn(D instanceof Function,"Expected a class definition");let p=En.get(D);return p?(Jn(p instanceof D,"Instance stored in cache mismatched with class"),p):(p=new D,En.set(D,p),p)}function pr(){var D;return"undefined"!=typeof self&&(null===(D=self.location)||void 0===D?void 0:D.href)||""}function Lr(){return"http:"===Nr()||"https:"===Nr()}function Nr(){var D;return"undefined"!=typeof self&&(null===(D=self.location)||void 0===D?void 0:D.protocol)||null}class gr{constructor(p,_){this.shortDelay=p,this.longDelay=_,Jn(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Lr()||(0,O.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function In(D,p){Jn(D.emulator,"Emulator should always be set here");const{url:_}=D.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class Ft{static initialize(p,_,A){this.fetchImpl=p,_&&(this.headersImpl=_),A&&(this.responseImpl=A)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Gn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Gn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Gn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ci={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ni=new gr(3e4,6e4);function Cn(D,p){return D.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:D.tenantId}):p}function Yn(D,p,_,A){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,E.Z)(function*(D,p,_,A,ne={}){return Cr(D,ne,(0,E.Z)(function*(){let he={},nt={};A&&("GET"===p?nt=A:he={body:JSON.stringify(A)});const Zt=(0,O.xO)(Object.assign({key:D.config.apiKey},nt)).slice(1),jn=yield D._getAdditionalHeaders();return jn["Content-Type"]="application/json",D.languageCode&&(jn["X-Firebase-Locale"]=D.languageCode),Ft.fetch()(Xe(D,D.config.apiHost,_,Zt),Object.assign({method:p,headers:jn,referrerPolicy:"no-referrer"},he))}))})).apply(this,arguments)}function Cr(D,p,_){return nr.apply(this,arguments)}function nr(){return(nr=(0,E.Z)(function*(D,p,_){D._canInitEmulator=!1;const A=Object.assign(Object.assign({},ci),p);try{const ne=new at(D),he=yield Promise.race([_(),ne.promise]);ne.clearNetworkTimeout();const nt=yield he.json();if("needConfirmation"in nt)throw Qe(D,"account-exists-with-different-credential",nt);if(he.ok&&!("errorMessage"in nt))return nt;{const Zt=he.ok?nt.errorMessage:nt.error.message,[jn,An]=Zt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===jn)throw Qe(D,"credential-already-in-use",nt);if("EMAIL_EXISTS"===jn)throw Qe(D,"email-already-in-use",nt);if("USER_DISABLED"===jn)throw Qe(D,"user-disabled",nt);const Tr=A[jn]||jn.toLowerCase().replace(/[_\s]+/g,"-");if(An)throw Wn(D,Tr,An);On(D,Tr)}}catch(ne){if(ne instanceof O.ZR)throw ne;On(D,"network-request-failed")}})).apply(this,arguments)}function mt(D,p,_,A){return He.apply(this,arguments)}function He(){return(He=(0,E.Z)(function*(D,p,_,A,ne={}){const he=yield Yn(D,p,_,A,ne);return"mfaPendingCredential"in he&&On(D,"multi-factor-auth-required",{_serverResponse:he}),he})).apply(this,arguments)}function Xe(D,p,_,A){const ne=`${p}${_}?${A}`;return D.config.emulator?In(D.config,ne):`${D.config.apiScheme}://${ne}`}class at{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,A)=>{this.timer=setTimeout(()=>A(Tn(this.auth,"network-request-failed")),ni.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Qe(D,p,_){const A={appName:D.name};_.email&&(A.email=_.email),_.phoneNumber&&(A.phoneNumber=_.phoneNumber);const ne=Tn(D,p,A);return ne.customData._tokenResponse=_,ne}function Qt(){return(Qt=(0,E.Z)(function*(D,p){return Yn(D,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function $t(D,p){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,E.Z)(function*(D,p){return Yn(D,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Be(D,p){return $e.apply(this,arguments)}function $e(){return($e=(0,E.Z)(function*(D,p){return Yn(D,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function it(D){if(D)try{const p=new Date(Number(D));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function Pe(){return(Pe=(0,E.Z)(function*(D,p=!1){const _=(0,O.m9)(D),A=yield _.getIdToken(p),ne=tn(A);Ht(ne&&ne.exp&&ne.auth_time&&ne.iat,_.auth,"internal-error");const he="object"==typeof ne.firebase?ne.firebase:void 0,nt=null==he?void 0:he.sign_in_provider;return{claims:ne,token:A,authTime:it(Et(ne.auth_time)),issuedAtTime:it(Et(ne.iat)),expirationTime:it(Et(ne.exp)),signInProvider:nt||null,signInSecondFactor:(null==he?void 0:he.sign_in_second_factor)||null}})).apply(this,arguments)}function Et(D){return 1e3*Number(D)}function tn(D){var p;const[_,A,ne]=D.split(".");if(void 0===_||void 0===A||void 0===ne)return Hn("JWT malformed, contained fewer than 3 sections"),null;try{const he=(0,O.tV)(A);return he?JSON.parse(he):(Hn("Failed to decode base64 JWT payload"),null)}catch(he){return Hn("Caught error parsing JWT payload as JSON",null===(p=he)||void 0===p?void 0:p.toString()),null}}function Rn(D,p){return Un.apply(this,arguments)}function Un(){return(Un=(0,E.Z)(function*(D,p,_=!1){if(_)return p;try{return yield p}catch(A){throw A instanceof O.ZR&&yn(A)&&D.auth.currentUser===D&&(yield D.auth.signOut()),A}})).apply(this,arguments)}function yn({code:D}){return"auth/user-disabled"===D||"auth/user-token-expired"===D}class Dn{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const A=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),A}{this.errorBackoff=3e4;const ne=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,ne)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const A=this.getInterval(p);this.timerId=setTimeout((0,E.Z)(function*(){yield _.iteration()}),A)}iteration(){var p=this;return(0,E.Z)(function*(){var _;try{yield p.user.getIdToken(!0)}catch(A){return void("auth/network-request-failed"===(null===(_=A)||void 0===_?void 0:_.code)&&p.schedule(!0))}p.schedule()})()}}class Er{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=it(this.lastLoginAt),this.creationTime=it(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function rn(D){return nn.apply(this,arguments)}function nn(){return(nn=(0,E.Z)(function*(D){var p;const _=D.auth,A=yield D.getIdToken(),ne=yield Rn(D,Be(_,{idToken:A}));Ht(null==ne?void 0:ne.users.length,_,"internal-error");const he=ne.users[0];D._notifyReloadListener(he);const nt=(null===(p=he.providerUserInfo)||void 0===p?void 0:p.length)?dn(he.providerUserInfo):[],Zt=Fn(D.providerData,nt),Tr=!!D.isAnonymous&&!(D.email&&he.passwordHash||(null==Zt?void 0:Zt.length)),Mi={uid:he.localId,displayName:he.displayName||null,photoURL:he.photoUrl||null,email:he.email||null,emailVerified:he.emailVerified||!1,phoneNumber:he.phoneNumber||null,tenantId:he.tenantId||null,providerData:Zt,metadata:new Er(he.createdAt,he.lastLoginAt),isAnonymous:Tr};Object.assign(D,Mi)})).apply(this,arguments)}function Mn(){return(Mn=(0,E.Z)(function*(D){const p=(0,O.m9)(D);yield rn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Fn(D,p){return[...D.filter(A=>!p.some(ne=>ne.providerId===A.providerId)),...p]}function dn(D){return D.map(p=>{var{providerId:_}=p,A=oe(p,["providerId"]);return{providerId:_,uid:A.rawId||"",displayName:A.displayName||null,email:A.email||null,phoneNumber:A.phoneNumber||null,photoURL:A.photoUrl||null}})}function wr(){return(wr=(0,E.Z)(function*(D,p){const _=yield Cr(D,{},(0,E.Z)(function*(){const A=(0,O.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:ne,apiKey:he}=D.config,nt=Xe(D,ne,"/v1/token",`key=${he}`),Zt=yield D._getAdditionalHeaders();return Zt["Content-Type"]="application/x-www-form-urlencoded",Ft.fetch()(nt,{method:"POST",headers:Zt,body:A})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class jr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){Ht(p.idToken,"internal-error"),Ht(void 0!==p.idToken,"internal-error"),Ht(void 0!==p.refreshToken,"internal-error");const _="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function(D){const p=tn(D);return Ht(p,"internal-error"),Ht(void 0!==p.exp,"internal-error"),Ht(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var A=this;return(0,E.Z)(function*(){return Ht(!A.accessToken||A.refreshToken,p,"user-token-expired"),_||!A.accessToken||A.isExpired?A.refreshToken?(yield A.refresh(p,A.refreshToken),A.accessToken):null:A.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var A=this;return(0,E.Z)(function*(){const{accessToken:ne,refreshToken:he,expiresIn:nt}=yield function(D,p){return wr.apply(this,arguments)}(p,_);A.updateTokensAndExpiration(ne,he,Number(nt))})()}updateTokensAndExpiration(p,_,A){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*A}static fromJSON(p,_){const{refreshToken:A,accessToken:ne,expirationTime:he}=_,nt=new jr;return A&&(Ht("string"==typeof A,"internal-error",{appName:p}),nt.refreshToken=A),ne&&(Ht("string"==typeof ne,"internal-error",{appName:p}),nt.accessToken=ne),he&&(Ht("number"==typeof he,"internal-error",{appName:p}),nt.expirationTime=he),nt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new jr,this.toJSON())}_performRefresh(){return Gn("not implemented")}}function Ir(D,p){Ht("string"==typeof D||void 0===D,"internal-error",{appName:p})}class Kr{constructor(p){var{uid:_,auth:A,stsTokenManager:ne}=p,he=oe(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=A,this.stsTokenManager=ne,this.accessToken=ne.accessToken,this.displayName=he.displayName||null,this.email=he.email||null,this.emailVerified=he.emailVerified||!1,this.phoneNumber=he.phoneNumber||null,this.photoURL=he.photoURL||null,this.isAnonymous=he.isAnonymous||!1,this.tenantId=he.tenantId||null,this.providerData=he.providerData?[...he.providerData]:[],this.metadata=new Er(he.createdAt||void 0,he.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,E.Z)(function*(){const A=yield Rn(_,_.stsTokenManager.getToken(_.auth,p));return Ht(A,_.auth,"internal-error"),_.accessToken!==A&&(_.accessToken=A,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),A})()}getIdTokenResult(p){return function(D){return Pe.apply(this,arguments)}(this,p)}reload(){return function(D){return Mn.apply(this,arguments)}(this)}_assign(p){this!==p&&(Ht(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Kr(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){Ht(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var A=this;return(0,E.Z)(function*(){let ne=!1;p.idToken&&p.idToken!==A.stsTokenManager.accessToken&&(A.stsTokenManager.updateFromServerResponse(p),ne=!0),_&&(yield rn(A)),yield A.auth._persistUserIfCurrent(A),ne&&A.auth._notifyListenersIfCurrent(A)})()}delete(){var p=this;return(0,E.Z)(function*(){const _=yield p.getIdToken();return yield Rn(p,function(D,p){return Qt.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var A,ne,he,nt,Zt,jn,An,Tr;const Mi=null!==(A=_.displayName)&&void 0!==A?A:void 0,Oi=null!==(ne=_.email)&&void 0!==ne?ne:void 0,Ns=null!==(he=_.phoneNumber)&&void 0!==he?he:void 0,fa=null!==(nt=_.photoURL)&&void 0!==nt?nt:void 0,Mu=null!==(Zt=_.tenantId)&&void 0!==Zt?Zt:void 0,mo=null!==(jn=_._redirectEventId)&&void 0!==jn?jn:void 0,Ec=null!==(An=_.createdAt)&&void 0!==An?An:void 0,Bl=null!==(Tr=_.lastLoginAt)&&void 0!==Tr?Tr:void 0,{uid:Hs,emailVerified:pa,isAnonymous:zo,providerData:au,stsTokenManager:Ws}=_;Ht(Hs&&Ws,p,"internal-error");const lu=jr.fromJSON(this.name,Ws);Ht("string"==typeof Hs,p,"internal-error"),Ir(Mi,p.name),Ir(Oi,p.name),Ht("boolean"==typeof pa,p,"internal-error"),Ht("boolean"==typeof zo,p,"internal-error"),Ir(Ns,p.name),Ir(fa,p.name),Ir(Mu,p.name),Ir(mo,p.name),Ir(Ec,p.name),Ir(Bl,p.name);const uu=new Kr({uid:Hs,auth:p,email:Oi,emailVerified:pa,displayName:Mi,isAnonymous:zo,photoURL:fa,phoneNumber:Ns,tenantId:Mu,stsTokenManager:lu,createdAt:Ec,lastLoginAt:Bl});return au&&Array.isArray(au)&&(uu.providerData=au.map(Ic=>Object.assign({},Ic))),mo&&(uu._redirectEventId=mo),uu}static _fromIdTokenResponse(p,_,A=!1){return(0,E.Z)(function*(){const ne=new jr;ne.updateFromServerResponse(_);const he=new Kr({uid:_.localId,auth:p,stsTokenManager:ne,isAnonymous:A});return yield rn(he),he})()}}const Qn=(()=>{class D{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,E.Z)(function*(){return!0})()}_set(_,A){var ne=this;return(0,E.Z)(function*(){ne.storage[_]=A})()}_get(_){var A=this;return(0,E.Z)(function*(){const ne=A.storage[_];return void 0===ne?null:ne})()}_remove(_){var A=this;return(0,E.Z)(function*(){delete A.storage[_]})()}_addListener(_,A){}_removeListener(_,A){}}return D.type="NONE",D})();function zr(D,p,_){return`firebase:${D}:${p}:${_}`}class gi{constructor(p,_,A){this.persistence=p,this.auth=_,this.userKey=A;const{config:ne,name:he}=this.auth;this.fullUserKey=zr(this.userKey,ne.apiKey,he),this.fullPersistenceKey=zr("persistence",ne.apiKey,he),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,E.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?Kr._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,E.Z)(function*(){if(_.persistence===p)return;const A=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,A?_.setCurrentUser(A):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,A="authUser"){return(0,E.Z)(function*(){if(!_.length)return new gi(er(Qn),p,A);const ne=(yield Promise.all(_.map(function(){var An=(0,E.Z)(function*(Tr){if(yield Tr._isAvailable())return Tr});return function(Tr){return An.apply(this,arguments)}}()))).filter(An=>An);let he=ne[0]||er(Qn);const nt=zr(A,p.config.apiKey,p.name);let Zt=null;for(const An of _)try{const Tr=yield An._get(nt);if(Tr){const Mi=Kr._fromJSON(p,Tr);An!==he&&(Zt=Mi),he=An;break}}catch(Tr){}const jn=ne.filter(An=>An._shouldAllowMigration);return he._shouldAllowMigration&&jn.length?(he=jn[0],Zt&&(yield he._set(nt,Zt.toJSON())),yield Promise.all(_.map(function(){var An=(0,E.Z)(function*(Tr){if(Tr!==he)try{yield Tr._remove(nt)}catch(Mi){}});return function(Tr){return An.apply(this,arguments)}}())),new gi(he,p,A)):new gi(he,p,A)})()}}function Zr(D){const p=D.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(qr(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(rs(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Vn(p))return"Blackberry";if(mr(p))return"Webos";if(xr(p))return"Safari";if((p.includes("chrome/")||qi(p))&&!p.includes("edge/"))return"Chrome";if(ar(p))return"Android";{const A=D.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==A?void 0:A.length))return A[1]}return"Other"}function rs(D=(0,O.z$)()){return/firefox\//i.test(D)}function xr(D=(0,O.z$)()){const p=D.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function qi(D=(0,O.z$)()){return/crios\//i.test(D)}function qr(D=(0,O.z$)()){return/iemobile/i.test(D)}function ar(D=(0,O.z$)()){return/android/i.test(D)}function Vn(D=(0,O.z$)()){return/blackberry/i.test(D)}function mr(D=(0,O.z$)()){return/webos/i.test(D)}function ht(D=(0,O.z$)()){return/iphone|ipad|ipod/i.test(D)||/macintosh/i.test(D)&&/mobile/i.test(D)}function $(D=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(D)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(D)}function Ce(D=(0,O.z$)()){return ht(D)||ar(D)||mr(D)||Vn(D)||/windows phone/i.test(D)||qr(D)}function ze(D,p=[]){let _;switch(D){case"Browser":_=Zr((0,O.z$)());break;case"Worker":_=`${Zr((0,O.z$)())}-${D}`;break;default:_=D}const A=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${ie.SDK_VERSION}/${A}`}class gt{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const A=he=>new Promise((nt,Zt)=>{try{nt(p(he))}catch(jn){Zt(jn)}});A.onAbort=_,this.queue.push(A);const ne=this.queue.length-1;return()=>{this.queue[ne]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,E.Z)(function*(){var A;if(_.auth.currentUser===p)return;const ne=[];try{for(const he of _.queue)yield he(p),he.onAbort&&ne.push(he.onAbort)}catch(he){ne.reverse();for(const nt of ne)try{nt()}catch(Zt){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(A=he)||void 0===A?void 0:A.message})}})()}}class bt{constructor(p,_,A){this.app=p,this.heartbeatServiceProvider=_,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new an(this),this.idTokenSubscription=new an(this),this.beforeStateQueue=new gt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(p,_){var A=this;return _&&(this._popupRedirectResolver=er(_)),this._initializationPromise=this.queue((0,E.Z)(function*(){var ne,he;if(!A._deleted&&(A.persistenceManager=yield gi.create(A,p),!A._deleted)){if(null===(ne=A._popupRedirectResolver)||void 0===ne?void 0:ne._shouldInitProactively)try{yield A._popupRedirectResolver._initialize(A)}catch(nt){}yield A.initializeCurrentUser(_),A.lastNotifiedUid=(null===(he=A.currentUser)||void 0===he?void 0:he.uid)||null,!A._deleted&&(A._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,E.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,E.Z)(function*(){var A;const ne=yield _.assertedPersistence.getCurrentUser();let he=ne,nt=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Zt=null===(A=_.redirectUser)||void 0===A?void 0:A._redirectEventId,jn=null==he?void 0:he._redirectEventId,An=yield _.tryRedirectSignIn(p);(!Zt||Zt===jn)&&(null==An?void 0:An.user)&&(he=An.user,nt=!0)}if(!he)return _.directlySetCurrentUser(null);if(!he._redirectEventId){if(nt)try{yield _.beforeStateQueue.runMiddleware(he)}catch(Zt){he=ne,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Zt))}return he?_.reloadAndSetCurrentUserOrClear(he):_.directlySetCurrentUser(null)}return Ht(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===he._redirectEventId?_.directlySetCurrentUser(he):_.reloadAndSetCurrentUserOrClear(he)})()}tryRedirectSignIn(p){var _=this;return(0,E.Z)(function*(){let A=null;try{A=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch(ne){yield _._setRedirectUser(null)}return A})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,E.Z)(function*(){var A;try{yield rn(p)}catch(ne){if("auth/network-request-failed"!==(null===(A=ne)||void 0===A?void 0:A.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const D=navigator;return D.languages&&D.languages[0]||D.language||null}()}_delete(){var p=this;return(0,E.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,E.Z)(function*(){const A=p?(0,O.m9)(p):null;return A&&Ht(A.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(A&&A._clone(_))})()}_updateCurrentUser(p,_=!1){var A=this;return(0,E.Z)(function*(){if(!A._deleted)return p&&Ht(A.tenantId===p.tenantId,A,"tenant-id-mismatch"),_||(yield A.beforeStateQueue.runMiddleware(p)),A.queue((0,E.Z)(function*(){yield A.directlySetCurrentUser(p),A.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,E.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,E.Z)(function*(){yield _.assertedPersistence.setPersistence(er(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new O.LL("auth","Firebase",p())}onAuthStateChanged(p,_,A){return this.registerStateListener(this.authStateSubscription,p,_,A)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,A){return this.registerStateListener(this.idTokenSubscription,p,_,A)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var A=this;return(0,E.Z)(function*(){const ne=yield A.getOrInitRedirectPersistenceManager(_);return null===p?ne.removeCurrentUser():ne.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,E.Z)(function*(){if(!_.redirectPersistenceManager){const A=p&&er(p)||_._popupRedirectResolver;Ht(A,_,"argument-error"),_.redirectPersistenceManager=yield gi.create(_,[er(A._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,E.Z)(function*(){var A,ne;return _._isInitialized&&(yield _.queue((0,E.Z)(function*(){}))),(null===(A=_._currentUser)||void 0===A?void 0:A._redirectEventId)===p?_._currentUser:(null===(ne=_.redirectUser)||void 0===ne?void 0:ne._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,E.Z)(function*(){if(p===_.currentUser)return _.queue((0,E.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const A=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==A&&(this.lastNotifiedUid=A,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,A,ne){if(this._deleted)return()=>{};const he="function"==typeof _?_:_.next.bind(_),nt=this._isInitialized?Promise.resolve():this._initializationPromise;return Ht(nt,this,"internal-error"),nt.then(()=>he(this.currentUser)),"function"==typeof _?p.addObserver(_,A,ne):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,E.Z)(function*(){_.currentUser&&_.currentUser!==p&&_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh(),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return Ht(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=ze(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,E.Z)(function*(){var _;const A={"X-Client-Version":p.clientVersion};p.app.options.appId&&(A["X-Firebase-gmpid"]=p.app.options.appId);const ne=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return ne&&(A["X-Firebase-Client"]=ne),A})()}}function At(D){return(0,O.m9)(D)}class an{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,O.ne)(_=>this.observer=_)}get next(){return Ht(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Sn(D,p,_){const A=At(D);Ht(A._canInitEmulator,A,"emulator-config-failed"),Ht(/^https?:\/\//.test(p),A,"invalid-emulator-scheme");const ne=!!(null==_?void 0:_.disableWarnings),he=zn(p),{host:nt,port:Zt}=function(D){const p=zn(D),_=/(\/\/)?([^?#/]+)/.exec(D.substr(p.length));if(!_)return{host:"",port:null};const A=_[2].split("@").pop()||"",ne=/^(\[[^\]]+\])(:|$)/.exec(A);if(ne){const he=ne[1];return{host:he,port:kr(A.substr(he.length+1))}}{const[he,nt]=A.split(":");return{host:he,port:kr(nt)}}}(p);A.config.emulator={url:`${he}//${nt}${null===Zt?"":`:${Zt}`}/`},A.settings.appVerificationDisabledForTesting=!0,A.emulatorConfig=Object.freeze({host:nt,port:Zt,protocol:he.replace(":",""),options:Object.freeze({disableWarnings:ne})}),ne||function(){function D(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",D):D())}()}function zn(D){const p=D.indexOf(":");return p<0?"":D.substr(0,p+1)}function kr(D){if(!D)return null;const p=Number(D);return isNaN(p)?null:p}class Jr{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return Gn("not implemented")}_getIdTokenResponse(p){return Gn("not implemented")}_linkToIdToken(p,_){return Gn("not implemented")}_getReauthenticationResolver(p){return Gn("not implemented")}}function _i(D,p){return ri.apply(this,arguments)}function ri(){return(ri=(0,E.Z)(function*(D,p){return Yn(D,"POST","/v1/accounts:resetPassword",Cn(D,p))})).apply(this,arguments)}function ws(D,p){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,E.Z)(function*(D,p){return Yn(D,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ss(D,p){return cs.apply(this,arguments)}function cs(){return(cs=(0,E.Z)(function*(D,p){return Yn(D,"POST","/v1/accounts:update",Cn(D,p))})).apply(this,arguments)}function Xs(){return(Xs=(0,E.Z)(function*(D,p){return mt(D,"POST","/v1/accounts:signInWithPassword",Cn(D,p))})).apply(this,arguments)}function ji(D,p){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,E.Z)(function*(D,p){return Yn(D,"POST","/v1/accounts:sendOobCode",Cn(D,p))})).apply(this,arguments)}function Js(D,p){return eo.apply(this,arguments)}function eo(){return(eo=(0,E.Z)(function*(D,p){return ji(D,p)})).apply(this,arguments)}function ya(D,p){return vi.apply(this,arguments)}function vi(){return(vi=(0,E.Z)(function*(D,p){return ji(D,p)})).apply(this,arguments)}function ms(D,p){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,E.Z)(function*(D,p){return ji(D,p)})).apply(this,arguments)}function to(D,p){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,E.Z)(function*(D,p){return ji(D,p)})).apply(this,arguments)}function Ls(){return(Ls=(0,E.Z)(function*(D,p){return mt(D,"POST","/v1/accounts:signInWithEmailLink",Cn(D,p))})).apply(this,arguments)}function no(){return(no=(0,E.Z)(function*(D,p){return mt(D,"POST","/v1/accounts:signInWithEmailLink",Cn(D,p))})).apply(this,arguments)}class zs extends Jr{constructor(p,_,A,ne=null){super("password",A),this._email=p,this._password=_,this._tenantId=ne}static _fromEmailAndPassword(p,_){return new zs(p,_,"password")}static _fromEmailAndCode(p,_,A=null){return new zs(p,_,"emailLink",A)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,E.Z)(function*(){switch(_.signInMethod){case"password":return function(D,p){return Xs.apply(this,arguments)}(p,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function(D,p){return Ls.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:On(p,"internal-error")}})()}_linkToIdToken(p,_){var A=this;return(0,E.Z)(function*(){switch(A.signInMethod){case"password":return ws(p,{idToken:_,returnSecureToken:!0,email:A._email,password:A._password});case"emailLink":return function(D,p){return no.apply(this,arguments)}(p,{idToken:_,email:A._email,oobCode:A._password});default:On(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function is(D,p){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,E.Z)(function*(D,p){return mt(D,"POST","/v1/accounts:signInWithIdp",Cn(D,p))})).apply(this,arguments)}class Ei extends Jr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new Ei(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):On("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:A,signInMethod:ne}=_,he=oe(_,["providerId","signInMethod"]);if(!A||!ne)return null;const nt=new Ei(A,ne);return nt.idToken=he.idToken||void 0,nt.accessToken=he.accessToken||void 0,nt.secret=he.secret,nt.nonce=he.nonce,nt.pendingToken=he.pendingToken||null,nt}_getIdTokenResponse(p){return is(p,this.buildRequest())}_linkToIdToken(p,_){const A=this.buildRequest();return A.idToken=_,is(p,A)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,is(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,O.xO)(_)}return p}}function Ko(D,p){return xs.apply(this,arguments)}function xs(){return(xs=(0,E.Z)(function*(D,p){return Yn(D,"POST","/v1/accounts:sendVerificationCode",Cn(D,p))})).apply(this,arguments)}function Bo(){return(Bo=(0,E.Z)(function*(D,p){return mt(D,"POST","/v1/accounts:signInWithPhoneNumber",Cn(D,p))})).apply(this,arguments)}function qs(){return(qs=(0,E.Z)(function*(D,p){const _=yield mt(D,"POST","/v1/accounts:signInWithPhoneNumber",Cn(D,p));if(_.temporaryProof)throw Qe(D,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const ro={USER_NOT_FOUND:"user-not-found"};function Do(){return(Do=(0,E.Z)(function*(D,p){return mt(D,"POST","/v1/accounts:signInWithPhoneNumber",Cn(D,Object.assign(Object.assign({},p),{operation:"REAUTH"})),ro)})).apply(this,arguments)}class yi extends Jr{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new yi({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new yi({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function(D,p){return Bo.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function(D,p){return qs.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function(D,p){return Do.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:A,verificationCode:ne}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:A,code:ne}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:A,phoneNumber:ne,temporaryProof:he}=p;return A||_||ne||he?new yi({verificationId:_,verificationCode:A,phoneNumber:ne,temporaryProof:he}):null}}class le{constructor(p){var _,A,ne,he,nt,Zt;const jn=(0,O.zd)((0,O.pd)(p)),An=null!==(_=jn.apiKey)&&void 0!==_?_:null,Tr=null!==(A=jn.oobCode)&&void 0!==A?A:null,Mi=function(D){switch(D){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(ne=jn.mode)&&void 0!==ne?ne:null);Ht(An&&Tr&&Mi,"argument-error"),this.apiKey=An,this.operation=Mi,this.code=Tr,this.continueUrl=null!==(he=jn.continueUrl)&&void 0!==he?he:null,this.languageCode=null!==(nt=jn.languageCode)&&void 0!==nt?nt:null,this.tenantId=null!==(Zt=jn.tenantId)&&void 0!==Zt?Zt:null}static parseLink(p){const _=function(D){const p=(0,O.zd)((0,O.pd)(D)).link,_=p?(0,O.zd)((0,O.pd)(p)).deep_link_id:null,A=(0,O.zd)((0,O.pd)(D)).deep_link_id;return(A?(0,O.zd)((0,O.pd)(A)).link:null)||A||_||p||D}(p);try{return new le(_)}catch(A){return null}}}let De=(()=>{class D{constructor(){this.providerId=D.PROVIDER_ID}static credential(_,A){return zs._fromEmailAndPassword(_,A)}static credentialWithLink(_,A){const ne=le.parseLink(A);return Ht(ne,"argument-error"),zs._fromEmailAndCode(_,ne.code,ne.tenantId)}}return D.PROVIDER_ID="password",D.EMAIL_PASSWORD_SIGN_IN_METHOD="password",D.EMAIL_LINK_SIGN_IN_METHOD="emailLink",D})();class qe{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Ct extends qe{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class ln extends Ct{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return Ht("providerId"in _&&"signInMethod"in _,"argument-error"),Ei._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return Ht(p.idToken||p.accessToken,"argument-error"),Ei._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return ln.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return ln.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:A,oauthTokenSecret:ne,pendingToken:he,nonce:nt,providerId:Zt}=p;if(!A&&!ne&&!_&&!he||!Zt)return null;try{return new ln(Zt)._credential({idToken:_,accessToken:A,nonce:nt,pendingToken:he})}catch(jn){return null}}}let q=(()=>{class D extends Ct{constructor(){super("facebook.com")}static credential(_){return Ei._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return D.credentialFromTaggedObject(_)}static credentialFromError(_){return D.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return D.credential(_.oauthAccessToken)}catch(A){return null}}}return D.FACEBOOK_SIGN_IN_METHOD="facebook.com",D.PROVIDER_ID="facebook.com",D})(),B=(()=>{class D extends Ct{constructor(){super("google.com"),this.addScope("profile")}static credential(_,A){return Ei._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:A})}static credentialFromResult(_){return D.credentialFromTaggedObject(_)}static credentialFromError(_){return D.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:A,oauthAccessToken:ne}=_;if(!A&&!ne)return null;try{return D.credential(A,ne)}catch(he){return null}}}return D.GOOGLE_SIGN_IN_METHOD="google.com",D.PROVIDER_ID="google.com",D})(),P=(()=>{class D extends Ct{constructor(){super("github.com")}static credential(_){return Ei._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return D.credentialFromTaggedObject(_)}static credentialFromError(_){return D.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return D.credential(_.oauthAccessToken)}catch(A){return null}}}return D.GITHUB_SIGN_IN_METHOD="github.com",D.PROVIDER_ID="github.com",D})();class _t extends Jr{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return is(p,this.buildRequest())}_linkToIdToken(p,_){const A=this.buildRequest();return A.idToken=_,is(p,A)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,is(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:A,signInMethod:ne,pendingToken:he}=_;return A&&ne&&he&&A===ne?new _t(A,he):null}static _create(p,_){return new _t(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class cr extends qe{constructor(p){Ht(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return cr.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return cr.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=_t.fromJSON(p);return Ht(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:A}=p;if(!_||!A)return null;try{return _t._create(A,_)}catch(ne){return null}}}let Qr=(()=>{class D extends Ct{constructor(){super("twitter.com")}static credential(_,A){return Ei._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:A})}static credentialFromResult(_){return D.credentialFromTaggedObject(_)}static credentialFromError(_){return D.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:A,oauthTokenSecret:ne}=_;if(!A||!ne)return null;try{return D.credential(A,ne)}catch(he){return null}}}return D.TWITTER_SIGN_IN_METHOD="twitter.com",D.PROVIDER_ID="twitter.com",D})();function Vi(D,p){return mi.apply(this,arguments)}function mi(){return(mi=(0,E.Z)(function*(D,p){return mt(D,"POST","/v1/accounts:signUp",Cn(D,p))})).apply(this,arguments)}class ii{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,A,ne=!1){return(0,E.Z)(function*(){const he=yield Kr._fromIdTokenResponse(p,A,ne),nt=Wr(A);return new ii({user:he,providerId:nt,_tokenResponse:A,operationType:_})})()}static _forOperation(p,_,A){return(0,E.Z)(function*(){yield p._updateTokensIfNecessary(A,!0);const ne=Wr(A);return new ii({user:p,providerId:ne,_tokenResponse:A,operationType:_})})()}}function Wr(D){return D.providerId?D.providerId:"phoneNumber"in D?"phone":null}function rr(D){return aa.apply(this,arguments)}function aa(){return(aa=(0,E.Z)(function*(D){var p;const _=At(D);if(yield _._initializationPromise,null===(p=_.currentUser)||void 0===p?void 0:p.isAnonymous)return new ii({user:_.currentUser,providerId:null,operationType:"signIn"});const A=yield Vi(_,{returnSecureToken:!0}),ne=yield ii._fromIdTokenResponse(_,"signIn",A,!0);return yield _._updateCurrentUser(ne.user),ne})).apply(this,arguments)}class yo extends O.ZR{constructor(p,_,A,ne){var he;super(_.code,_.message),this.operationType=A,this.user=ne,Object.setPrototypeOf(this,yo.prototype),this.customData={appName:p.name,tenantId:null!==(he=p.tenantId)&&void 0!==he?he:void 0,_serverResponse:_.customData._serverResponse,operationType:A}}static _fromErrorAndOperation(p,_,A,ne){return new yo(p,_,A,ne)}}function $o(D,p,_,A){return("reauthenticate"===p?_._getReauthenticationResolver(D):_._getIdTokenResponse(D)).catch(he=>{throw"auth/multi-factor-auth-required"===he.code?yo._fromErrorAndOperation(D,he,p,A):he})}function Ma(D){return new Set(D.map(({providerId:p})=>p).filter(p=>!!p))}function To(D,p){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,E.Z)(function*(D,p){const _=(0,O.m9)(D);yield br(!0,_,p);const{providerUserInfo:A}=yield $t(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),ne=Ma(A||[]);return _.providerData=_.providerData.filter(he=>ne.has(he.providerId)),ne.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Rs(D,p){return hn.apply(this,arguments)}function hn(){return(hn=(0,E.Z)(function*(D,p,_=!1){const A=yield Rn(D,p._linkToIdToken(D.auth,yield D.getIdToken()),_);return ii._forOperation(D,"link",A)})).apply(this,arguments)}function br(D,p,_){return So.apply(this,arguments)}function So(){return(So=(0,E.Z)(function*(D,p,_){yield rn(p);const ne=!1===D?"provider-already-linked":"no-such-provider";Ht(Ma(p.providerData).has(_)===D,p.auth,ne)})).apply(this,arguments)}function Ti(D,p){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,E.Z)(function*(D,p,_=!1){var A;const{auth:ne}=D,he="reauthenticate";try{const nt=yield Rn(D,$o(ne,he,p,D),_);Ht(nt.idToken,ne,"internal-error");const Zt=tn(nt.idToken);Ht(Zt,ne,"internal-error");const{sub:jn}=Zt;return Ht(D.uid===jn,ne,"user-mismatch"),ii._forOperation(D,he,nt)}catch(nt){throw"auth/user-not-found"===(null===(A=nt)||void 0===A?void 0:A.code)&&On(ne,"user-mismatch"),nt}})).apply(this,arguments)}function ss(D,p){return ys.apply(this,arguments)}function ys(){return(ys=(0,E.Z)(function*(D,p,_=!1){const A="signIn",ne=yield $o(D,A,p),he=yield ii._fromIdTokenResponse(D,A,ne);return _||(yield D._updateCurrentUser(he.user)),he})).apply(this,arguments)}function Vs(D,p){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,E.Z)(function*(D,p){return ss(At(D),p)})).apply(this,arguments)}function ja(D,p){return _s.apply(this,arguments)}function _s(){return(_s=(0,E.Z)(function*(D,p){const _=(0,O.m9)(D);return yield br(!1,_,p.providerId),Rs(_,p)})).apply(this,arguments)}function Os(D,p){return $s.apply(this,arguments)}function $s(){return($s=(0,E.Z)(function*(D,p){return Ti((0,O.m9)(D),p)})).apply(this,arguments)}function Bi(D,p){return Us.apply(this,arguments)}function Us(){return(Us=(0,E.Z)(function*(D,p){return mt(D,"POST","/v1/accounts:signInWithCustomToken",Cn(D,p))})).apply(this,arguments)}function _a(D,p){return un.apply(this,arguments)}function un(){return(un=(0,E.Z)(function*(D,p){const _=At(D),A=yield Bi(_,{token:p,returnSecureToken:!0}),ne=yield ii._fromIdTokenResponse(_,"signIn",A);return yield _._updateCurrentUser(ne.user),ne})).apply(this,arguments)}class Si{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?Ys._fromServerResponse(p,_):On(p,"internal-error")}}class Ys extends Si{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new Ys(_)}}function os(D,p,_){var A;Ht((null===(A=_.url)||void 0===A?void 0:A.length)>0,D,"invalid-continue-uri"),Ht(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,D,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(Ht(_.iOS.bundleId.length>0,D,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(Ht(_.android.packageName.length>0,D,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function $i(D,p,_){return ds.apply(this,arguments)}function ds(){return(ds=(0,E.Z)(function*(D,p,_){const A=(0,O.m9)(D),ne={requestType:"PASSWORD_RESET",email:p};_&&os(A,ne,_),yield ya(A,ne)})).apply(this,arguments)}function Ks(D,p,_){return so.apply(this,arguments)}function so(){return(so=(0,E.Z)(function*(D,p,_){yield _i((0,O.m9)(D),{oobCode:p,newPassword:_})})).apply(this,arguments)}function hs(D,p){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,E.Z)(function*(D,p){yield Ss((0,O.m9)(D),{oobCode:p})})).apply(this,arguments)}function js(D,p){return oo.apply(this,arguments)}function oo(){return(oo=(0,E.Z)(function*(D,p){const _=(0,O.m9)(D),A=yield _i(_,{oobCode:p}),ne=A.requestType;switch(Ht(ne,_,"internal-error"),ne){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ht(A.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ht(A.mfaInfo,_,"internal-error");default:Ht(A.email,_,"internal-error")}let he=null;return A.mfaInfo&&(he=Si._fromServerResponse(At(_),A.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.newEmail:A.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.email:A.newEmail)||null,multiFactorInfo:he},operation:ne}})).apply(this,arguments)}function li(D,p){return vs.apply(this,arguments)}function vs(){return(vs=(0,E.Z)(function*(D,p){const{data:_}=yield js((0,O.m9)(D),p);return _.email})).apply(this,arguments)}function va(D,p,_){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,E.Z)(function*(D,p,_){const A=At(D),ne=yield Vi(A,{returnSecureToken:!0,email:p,password:_}),he=yield ii._fromIdTokenResponse(A,"signIn",ne);return yield A._updateCurrentUser(he.user),he})).apply(this,arguments)}function la(D,p,_){return Vs((0,O.m9)(D),De.credential(p,_))}function ao(D,p,_){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,E.Z)(function*(D,p,_){const A=(0,O.m9)(D),ne={requestType:"EMAIL_SIGNIN",email:p};Ht(_.handleCodeInApp,A,"argument-error"),_&&os(A,ne,_),yield ms(A,ne)})).apply(this,arguments)}function I(D,p){const _=le.parseLink(p);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}function N(D,p,_){return w.apply(this,arguments)}function w(){return(w=(0,E.Z)(function*(D,p,_){const A=(0,O.m9)(D),ne=De.credentialWithLink(p,_||pr());return Ht(ne._tenantId===(A.tenantId||null),A,"tenant-id-mismatch"),Vs(A,ne)})).apply(this,arguments)}function Y(D,p){return pe.apply(this,arguments)}function pe(){return(pe=(0,E.Z)(function*(D,p){return Yn(D,"POST","/v1/accounts:createAuthUri",Cn(D,p))})).apply(this,arguments)}function dt(D,p){return jt.apply(this,arguments)}function jt(){return(jt=(0,E.Z)(function*(D,p){const A={identifier:p,continueUri:Lr()?pr():"http://localhost"},{signinMethods:ne}=yield Y((0,O.m9)(D),A);return ne||[]})).apply(this,arguments)}function fn(D,p){return lr.apply(this,arguments)}function lr(){return(lr=(0,E.Z)(function*(D,p){const _=(0,O.m9)(D),ne={requestType:"VERIFY_EMAIL",idToken:yield D.getIdToken()};p&&os(_.auth,ne,p);const{email:he}=yield Js(_.auth,ne);he!==D.email&&(yield D.reload())})).apply(this,arguments)}function Nn(D,p,_){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,E.Z)(function*(D,p,_){const A=(0,O.m9)(D),he={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield D.getIdToken(),newEmail:p};_&&os(A.auth,he,_);const{email:nt}=yield to(A.auth,he);nt!==D.email&&(yield D.reload())})).apply(this,arguments)}function ui(D,p){return qt.apply(this,arguments)}function qt(){return(qt=(0,E.Z)(function*(D,p){return Yn(D,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function dr(D,p){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,E.Z)(function*(D,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const A=(0,O.m9)(D),he={idToken:yield A.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},nt=yield Rn(A,ui(A.auth,he));A.displayName=nt.displayName||null,A.photoURL=nt.photoUrl||null;const Zt=A.providerData.find(({providerId:jn})=>"password"===jn);Zt&&(Zt.displayName=A.displayName,Zt.photoURL=A.photoURL),yield A._updateTokensIfNecessary(nt)})).apply(this,arguments)}function es(D,p){return Kn((0,O.m9)(D),p,null)}function Bn(D,p){return Kn((0,O.m9)(D),null,p)}function Kn(D,p,_){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,E.Z)(function*(D,p,_){const{auth:A}=D,he={idToken:yield D.getIdToken(),returnSecureToken:!0};p&&(he.email=p),_&&(he.password=_);const nt=yield Rn(D,ws(A,he));yield D._updateTokensIfNecessary(nt,!0)})).apply(this,arguments)}class Pt{constructor(p,_,A={}){this.isNewUser=p,this.providerId=_,this.profile=A}}class pn extends Pt{constructor(p,_,A,ne){super(p,_,A),this.username=ne}}class Ri extends Pt{constructor(p,_){super(p,"facebook.com",_)}}class Il extends pn{constructor(p,_){super(p,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class bl extends Pt{constructor(p,_){super(p,"google.com",_)}}class lo extends pn{constructor(p,_,A){super(p,"twitter.com",_,A)}}function Ea(D){const{user:p,_tokenResponse:_}=D;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function(D){var p,_;if(!D)return null;const{providerId:A}=D,ne=D.rawUserInfo?JSON.parse(D.rawUserInfo):{},he=D.isNewUser||"identitytoolkit#SignupNewUserResponse"===D.kind;if(!A&&(null==D?void 0:D.idToken)){const nt=null===(_=null===(p=tn(D.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(nt)return new Pt(he,"anonymous"!==nt&&"custom"!==nt?nt:null)}if(!A)return null;switch(A){case"facebook.com":return new Ri(he,ne);case"github.com":return new Il(he,ne);case"google.com":return new bl(he,ne);case"twitter.com":return new lo(he,ne,D.screenName||null);case"custom":case"anonymous":return new Pt(he,null);default:return new Pt(he,A,ne)}}(_)}function Ia(D,p,_,A){return(0,O.m9)(D).onIdTokenChanged(p,_,A)}function Qo(D){return(0,O.m9)(D).signOut()}class Zs{constructor(p,_,A){this.type=p,this.credential=_,this.auth=A}static _fromIdtoken(p,_){return new Zs("enroll",p,_)}static _fromMfaPendingCredential(p){return new Zs("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,A;if(null==p?void 0:p.multiFactorSession){if(null===(_=p.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return Zs._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(A=p.multiFactorSession)||void 0===A?void 0:A.idToken)return Zs._fromIdtoken(p.multiFactorSession.idToken)}return null}}class bi{constructor(p,_,A){this.session=p,this.hints=_,this.signInResolver=A}static _fromError(p,_){const A=At(p),ne=_.customData._serverResponse,he=(ne.mfaInfo||[]).map(Zt=>Si._fromServerResponse(A,Zt));Ht(ne.mfaPendingCredential,A,"internal-error");const nt=Zs._fromMfaPendingCredential(ne.mfaPendingCredential);return new bi(nt,he,function(){var Zt=(0,E.Z)(function*(jn){const An=yield jn._process(A,nt);delete ne.mfaInfo,delete ne.mfaPendingCredential;const Tr=Object.assign(Object.assign({},ne),{idToken:An.idToken,refreshToken:An.refreshToken});switch(_.operationType){case"signIn":const Mi=yield ii._fromIdTokenResponse(A,_.operationType,Tr);return yield A._updateCurrentUser(Mi.user),Mi;case"reauthenticate":return Ht(_.user,A,"internal-error"),ii._forOperation(_.user,_.operationType,Tr);default:On(A,"internal-error")}});return function(jn){return Zt.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,E.Z)(function*(){return _.signInResolver(p)})()}}function fe(D,p){var _;const A=(0,O.m9)(D),ne=p;return Ht(p.customData.operationType,A,"argument-error"),Ht(null===(_=ne.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,A,"argument-error"),bi._fromError(A,ne)}function z(D,p){return Yn(D,"POST","/v2/accounts/mfaEnrollment:start",Cn(D,p))}class ut{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(A=>Si._fromServerResponse(p.auth,A)))})}static _fromUser(p){return new ut(p)}getSession(){var p=this;return(0,E.Z)(function*(){return Zs._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,_){var A=this;return(0,E.Z)(function*(){const ne=p,he=yield A.getSession(),nt=yield Rn(A.user,ne._process(A.user.auth,he,_));return yield A.user._updateTokensIfNecessary(nt),A.user.reload()})()}unenroll(p){var _=this;return(0,E.Z)(function*(){var A;const ne="string"==typeof p?p:p.uid,he=yield _.user.getIdToken(),nt=yield Rn(_.user,function(D,p){return Yn(D,"POST","/v2/accounts/mfaEnrollment:withdraw",Cn(D,p))}(_.user.auth,{idToken:he,mfaEnrollmentId:ne}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Zt})=>Zt!==ne),yield _.user._updateTokensIfNecessary(nt);try{yield _.user.reload()}catch(Zt){if("auth/user-token-expired"!==(null===(A=Zt)||void 0===A?void 0:A.code))throw Zt}})()}}const Rt=new WeakMap;function ir(D){const p=(0,O.m9)(D);return Rt.has(p)||Rt.set(p,ut._fromUser(p)),Rt.get(p)}const Br="__sak";class pi{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Br,"1"),this.storage.removeItem(Br),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Jo=(()=>{class D extends pi{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,A)=>this.onStorageEvent(_,A),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const D=(0,O.z$)();return xr(D)||ht(D)}()&&function(){try{return!(!window||window===window.top)}catch(D){return!1}}(),this.fallbackToPolling=Ce(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const A of Object.keys(this.listeners)){const ne=this.storage.getItem(A),he=this.localCache[A];ne!==he&&_(A,he,ne)}}onStorageEvent(_,A=!1){if(!_.key)return void this.forAllChangedKeys((Zt,jn,An)=>{this.notifyListeners(Zt,An)});const ne=_.key;if(A?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Zt=this.storage.getItem(ne);if(_.newValue!==Zt)null!==_.newValue?this.storage.setItem(ne,_.newValue):this.storage.removeItem(ne);else if(this.localCache[ne]===_.newValue&&!A)return}const he=()=>{const Zt=this.storage.getItem(ne);!A&&this.localCache[ne]===Zt||this.notifyListeners(ne,Zt)},nt=this.storage.getItem(ne);(0,O.w1)()&&10===document.documentMode&&nt!==_.newValue&&_.newValue!==_.oldValue?setTimeout(he,10):he()}notifyListeners(_,A){this.localCache[_]=A;const ne=this.listeners[_];if(ne)for(const he of Array.from(ne))he(A&&JSON.parse(A))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,A,ne)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:A,newValue:ne}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,A){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(A)}_removeListener(_,A){this.listeners[_]&&(this.listeners[_].delete(A),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,A){var ne=()=>super._set,he=this;return(0,E.Z)(function*(){yield ne().call(he,_,A),he.localCache[_]=JSON.stringify(A)})()}_get(_){var A=()=>super._get,ne=this;return(0,E.Z)(function*(){const he=yield A().call(ne,_);return ne.localCache[_]=JSON.stringify(he),he})()}_remove(_){var A=()=>super._remove,ne=this;return(0,E.Z)(function*(){yield A().call(ne,_),delete ne.localCache[_]})()}}return D.type="LOCAL",D})(),S=(()=>{class D extends pi{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,A){}_removeListener(_,A){}}return D.type="SESSION",D})();let H=(()=>{class D{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const A=this.receivers.find(he=>he.isListeningto(_));if(A)return A;const ne=new D(_);return this.receivers.push(ne),ne}isListeningto(_){return this.eventTarget===_}handleEvent(_){var A=this;return(0,E.Z)(function*(){const ne=_,{eventId:he,eventType:nt,data:Zt}=ne.data,jn=A.handlersMap[nt];if(!(null==jn?void 0:jn.size))return;ne.ports[0].postMessage({status:"ack",eventId:he,eventType:nt});const An=Array.from(jn).map(function(){var Mi=(0,E.Z)(function*(Oi){return Oi(ne.origin,Zt)});return function(Oi){return Mi.apply(this,arguments)}}()),Tr=yield function(D){return Promise.all(D.map(function(){var p=(0,E.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(A){return{fulfilled:!1,reason:A}}});return function(_){return p.apply(this,arguments)}}()))}(An);ne.ports[0].postMessage({status:"done",eventId:he,eventType:nt,response:Tr})})()}_subscribe(_,A){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(A)}_unsubscribe(_,A){this.handlersMap[_]&&A&&this.handlersMap[_].delete(A),(!A||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return D.receivers=[],D})();function te(D="",p=10){let _="";for(let A=0;A<p;A++)_+=Math.floor(10*Math.random());return D+_}class ye{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,A=50){var ne=this;return(0,E.Z)(function*(){const he="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!he)throw new Error("connection_unavailable");let nt,Zt;return new Promise((jn,An)=>{const Tr=te("",20);he.port1.start();const Mi=setTimeout(()=>{An(new Error("unsupported_event"))},A);Zt={messageChannel:he,onMessage(Oi){const Ns=Oi;if(Ns.data.eventId===Tr)switch(Ns.data.status){case"ack":clearTimeout(Mi),nt=setTimeout(()=>{An(new Error("timeout"))},3e3);break;case"done":clearTimeout(nt),jn(Ns.data.response);break;default:clearTimeout(Mi),clearTimeout(nt),An(new Error("invalid_response"))}}},ne.handlers.add(Zt),he.port1.addEventListener("message",Zt.onMessage),ne.target.postMessage({eventType:p,eventId:Tr,data:_},[he.port2])}).finally(()=>{Zt&&ne.removeMessageHandler(Zt)})})()}}function We(){return window}function Jt(){return void 0!==We().WorkerGlobalScope&&"function"==typeof We().importScripts}function ei(){return(ei=(0,E.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(D){return null}})).apply(this,arguments)}const Fr="firebaseLocalStorageDb",co="firebaseLocalStorage",Ts="fbase_key";class xo{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function No(D,p){return D.transaction([co],p?"readwrite":"readonly").objectStore(co)}function sl(){const D=indexedDB.open(Fr,1);return new Promise((p,_)=>{D.addEventListener("error",()=>{_(D.error)}),D.addEventListener("upgradeneeded",()=>{const A=D.result;try{A.createObjectStore(co,{keyPath:Ts})}catch(ne){_(ne)}}),D.addEventListener("success",(0,E.Z)(function*(){const A=D.result;A.objectStoreNames.contains(co)?p(A):(A.close(),yield function(){const D=indexedDB.deleteDatabase(Fr);return new xo(D).toPromise()}(),p(yield sl()))}))})}function da(D,p,_){return ls.apply(this,arguments)}function ls(){return(ls=(0,E.Z)(function*(D,p,_){const A=No(D,!0).put({[Ts]:p,value:_});return new xo(A).toPromise()})).apply(this,arguments)}function ol(){return(ol=(0,E.Z)(function*(D,p){const _=No(D,!1).get(p),A=yield new xo(_).toPromise();return void 0===A?null:A.value})).apply(this,arguments)}function Qs(D,p){const _=No(D,!0).delete(p);return new xo(_).toPromise()}const _o=(()=>{class D{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,E.Z)(function*(){return _.db||(_.db=yield sl()),_.db})()}_withRetries(_){var A=this;return(0,E.Z)(function*(){let ne=0;for(;;)try{const he=yield A._openDb();return yield _(he)}catch(he){if(ne++>3)throw he;A.db&&(A.db.close(),A.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,E.Z)(function*(){return Jt()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,E.Z)(function*(){_.receiver=H._getInstance(Jt()?self:null),_.receiver._subscribe("keyChanged",function(){var A=(0,E.Z)(function*(ne,he){return{keyProcessed:(yield _._poll()).includes(he.key)}});return function(ne,he){return A.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var A=(0,E.Z)(function*(ne,he){return["keyChanged"]});return function(ne,he){return A.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,E.Z)(function*(){var A,ne;if(_.activeServiceWorker=yield function(){return ei.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new ye(_.activeServiceWorker);const he=yield _.sender._send("ping",{},800);!he||(null===(A=he[0])||void 0===A?void 0:A.fulfilled)&&(null===(ne=he[0])||void 0===ne?void 0:ne.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var A=this;return(0,E.Z)(function*(){if(A.sender&&A.activeServiceWorker&&function(){var D;return(null===(D=null==navigator?void 0:navigator.serviceWorker)||void 0===D?void 0:D.controller)||null}()===A.activeServiceWorker)try{yield A.sender._send("keyChanged",{key:_},A.serviceWorkerReceiverAvailable?800:50)}catch(ne){}})()}_isAvailable(){return(0,E.Z)(function*(){try{if(!indexedDB)return!1;const _=yield sl();return yield da(_,Br,"1"),yield Qs(_,Br),!0}catch(_){}return!1})()}_withPendingWrite(_){var A=this;return(0,E.Z)(function*(){A.pendingWrites++;try{yield _()}finally{A.pendingWrites--}})()}_set(_,A){var ne=this;return(0,E.Z)(function*(){return ne._withPendingWrite((0,E.Z)(function*(){return yield ne._withRetries(he=>da(he,_,A)),ne.localCache[_]=A,ne.notifyServiceWorker(_)}))})()}_get(_){var A=this;return(0,E.Z)(function*(){const ne=yield A._withRetries(he=>function(D,p){return ol.apply(this,arguments)}(he,_));return A.localCache[_]=ne,ne})()}_remove(_){var A=this;return(0,E.Z)(function*(){return A._withPendingWrite((0,E.Z)(function*(){return yield A._withRetries(ne=>Qs(ne,_)),delete A.localCache[_],A.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,E.Z)(function*(){const A=yield _._withRetries(nt=>{const Zt=No(nt,!1).getAll();return new xo(Zt).toPromise()});if(!A)return[];if(0!==_.pendingWrites)return[];const ne=[],he=new Set;for(const{fbase_key:nt,value:Zt}of A)he.add(nt),JSON.stringify(_.localCache[nt])!==JSON.stringify(Zt)&&(_.notifyListeners(nt,Zt),ne.push(nt));for(const nt of Object.keys(_.localCache))_.localCache[nt]&&!he.has(nt)&&(_.notifyListeners(nt,null),ne.push(nt));return ne})()}notifyListeners(_,A){this.localCache[_]=A;const ne=this.listeners[_];if(ne)for(const he of Array.from(ne))he(A)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,E.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,A){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(A)}_removeListener(_,A){this.listeners[_]&&(this.listeners[_].delete(A),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return D.type="LOCAL",D})();function zu(D,p){return Yn(D,"POST","/v2/accounts/mfaSignIn:start",Cn(D,p))}function jo(){return(jo=(0,E.Z)(function*(D){return(yield Yn(D,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function al(D){return new Promise((p,_)=>{const A=document.createElement("script");A.setAttribute("src",D),A.onload=p,A.onerror=ne=>{const he=Tn("internal-error");he.customData=ne,_(he)},A.type="text/javascript",A.charset="UTF-8",function(){var D,p;return null!==(p=null===(D=document.getElementsByTagName("head"))||void 0===D?void 0:D[0])&&void 0!==p?p:document}().appendChild(A)})}function gs(D){return`__${D}${Math.floor(1e6*Math.random())}`}const Nl=1e12;class ho{constructor(p){this.auth=p,this.counter=Nl,this._widgets=new Map}render(p,_){const A=this.counter;return this._widgets.set(A,new Es(p,this.auth.name,_||{})),this.counter++,A}reset(p){var _;const A=p||Nl;null===(_=this._widgets.get(A))||void 0===_||_.delete(),this._widgets.delete(A)}getResponse(p){var _;return(null===(_=this._widgets.get(p||Nl))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,E.Z)(function*(){var A;return null===(A=_._widgets.get(p||Nl))||void 0===A||A.execute(),""})()}}class Es{constructor(p,_,A){this.params=A,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const ne="string"==typeof p?document.getElementById(p):p;Ht(ne,"argument-error",{appName:_}),this.container=ne,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(D){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let A=0;A<50;A++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}();const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch(A){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(A){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Oa=gs("rcb"),Eo=new gr(3e4,6e4);class Wa{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(p=We().grecaptcha)||void 0===p?void 0:p.render)}load(p,_=""){return Ht((D=_).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(D),p,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(We().grecaptcha):new Promise((A,ne)=>{const he=We().setTimeout(()=>{ne(Tn(p,"network-request-failed"))},Eo.get());We()[Oa]=()=>{We().clearTimeout(he),delete We()[Oa];const Zt=We().grecaptcha;if(!Zt)return void ne(Tn(p,"internal-error"));const jn=Zt.render;Zt.render=(An,Tr)=>{const Mi=jn(An,Tr);return this.counter++,Mi},this.hostLanguage=_,A(Zt)},al(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Oa,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(he),ne(Tn(p,"internal-error"))})});var D}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var _;return!!(null===(_=We().grecaptcha)||void 0===_?void 0:_.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Cl{load(p){return(0,E.Z)(function*(){return new ho(p)})()}clearedOneInstance(){}}const ha="recaptcha",mc={theme:"light",type:"image"};class fo{constructor(p,_=Object.assign({},mc),A){this.parameters=_,this.type=ha,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=At(A),this.isInvisible="invisible"===this.parameters.size,Ht("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const ne="string"==typeof p?document.getElementById(p):p;Ht(ne,this.auth,"argument-error"),this.container=ne,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Cl:new Wa,this.validateStartingState()}verify(){var p=this;return(0,E.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),A=p.getAssertedRecaptcha();return A.getResponse(_)||new Promise(he=>{const nt=Zt=>{!Zt||(p.tokenChangeListeners.delete(nt),he(Zt))};p.tokenChangeListeners.add(nt),p.isInvisible&&A.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){Ht(!this.parameters.sitekey,this.auth,"argument-error"),Ht(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ht("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(A=>A(_)),"function"==typeof p)p(_);else if("string"==typeof p){const A=We()[p];"function"==typeof A&&A(_)}}}assertNotDestroyed(){Ht(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,E.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const A=document.createElement("div");_.appendChild(A),_=A}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,E.Z)(function*(){Ht(Lr()&&!Jt(),p.auth,"internal-error"),yield function(){let D=null;return new Promise(p=>{"complete"!==document.readyState?(D=()=>p(),window.addEventListener("load",D)):p()}).catch(p=>{throw D&&window.removeEventListener("load",D),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function(D){return jo.apply(this,arguments)}(p.auth);Ht(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return Ht(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ea{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=yi._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function Pa(D,p,_){return bo.apply(this,arguments)}function bo(){return(bo=(0,E.Z)(function*(D,p,_){const A=At(D),ne=yield Dl(A,p,(0,O.m9)(_));return new ea(ne,he=>Vs(A,he))})).apply(this,arguments)}function wl(D,p,_){return ta.apply(this,arguments)}function ta(){return(ta=(0,E.Z)(function*(D,p,_){const A=(0,O.m9)(D);yield br(!1,A,"phone");const ne=yield Dl(A.auth,p,(0,O.m9)(_));return new ea(ne,he=>ja(A,he))})).apply(this,arguments)}function Pl(D,p,_){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,E.Z)(function*(D,p,_){const A=(0,O.m9)(D),ne=yield Dl(A.auth,p,(0,O.m9)(_));return new ea(ne,he=>Os(A,he))})).apply(this,arguments)}function Dl(D,p,_){return ul.apply(this,arguments)}function ul(){return(ul=(0,E.Z)(function*(D,p,_){var A;const ne=yield _.verify();try{let he;if(Ht("string"==typeof ne,D,"argument-error"),Ht(_.type===ha,D,"argument-error"),he="string"==typeof p?{phoneNumber:p}:p,"session"in he){const nt=he.session;if("phoneNumber"in he)return Ht("enroll"===nt.type,D,"internal-error"),(yield z(D,{idToken:nt.credential,phoneEnrollmentInfo:{phoneNumber:he.phoneNumber,recaptchaToken:ne}})).phoneSessionInfo.sessionInfo;{Ht("signin"===nt.type,D,"internal-error");const Zt=(null===(A=he.multiFactorHint)||void 0===A?void 0:A.uid)||he.multiFactorUid;return Ht(Zt,D,"missing-multi-factor-info"),(yield zu(D,{mfaPendingCredential:nt.credential,mfaEnrollmentId:Zt,phoneSignInInfo:{recaptchaToken:ne}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:nt}=yield Ko(D,{phoneNumber:he.phoneNumber,recaptchaToken:ne});return nt}}finally{_._reset()}})).apply(this,arguments)}function kl(D,p){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,E.Z)(function*(D,p){yield Rs((0,O.m9)(D),p)})).apply(this,arguments)}let V=(()=>{class D{constructor(_){this.providerId=D.PROVIDER_ID,this.auth=At(_)}verifyPhoneNumber(_,A){return Dl(this.auth,_,(0,O.m9)(A))}static credential(_,A){return yi._fromVerification(_,A)}static credentialFromResult(_){return D.credentialFromTaggedObject(_)}static credentialFromError(_){return D.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:A,temporaryProof:ne}=_;return A&&ne?yi._fromTokenResponse(A,ne):null}}return D.PROVIDER_ID="phone",D.PHONE_SIGN_IN_METHOD="phone",D})();function Z(D,p){return p?er(p):(Ht(D._popupRedirectResolver,D,"argument-error"),D._popupRedirectResolver)}class me extends Jr{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return is(p,this._buildIdpRequest())}_linkToIdToken(p,_){return is(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return is(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function Ue(D){return ss(D.auth,new me(D),D.bypassAuthState)}function vt(D){const{auth:p,user:_}=D;return Ht(_,p,"internal-error"),Ti(_,new me(D),D.bypassAuthState)}function Ut(D){return mn.apply(this,arguments)}function mn(){return(mn=(0,E.Z)(function*(D){const{auth:p,user:_}=D;return Ht(_,p,"internal-error"),Rs(_,new me(D),D.bypassAuthState)})).apply(this,arguments)}class qn{constructor(p,_,A,ne,he=!1){this.auth=p,this.resolver=A,this.user=ne,this.bypassAuthState=he,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,E.Z)(function*(A,ne){p.pendingPromise={resolve:A,reject:ne};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(he){p.reject(he)}});return function(A,ne){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,E.Z)(function*(){const{urlResponse:A,sessionId:ne,postBody:he,tenantId:nt,error:Zt,type:jn}=p;if(Zt)return void _.reject(Zt);const An={auth:_.auth,requestUri:A,sessionId:ne,tenantId:nt||void 0,postBody:he||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(jn)(An))}catch(Tr){_.reject(Tr)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Ue;case"linkViaPopup":case"linkViaRedirect":return Ut;case"reauthViaPopup":case"reauthViaRedirect":return vt;default:On(this.auth,"internal-error")}}resolve(p){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const yr=new gr(2e3,1e4);function Hr(D,p,_){return $r.apply(this,arguments)}function $r(){return($r=(0,E.Z)(function*(D,p,_){const A=At(D);Rr(D,p,qe);const ne=Z(A,_);return new za(A,"signInViaPopup",p,ne).executeNotNull()})).apply(this,arguments)}function _r(D,p,_){return xi.apply(this,arguments)}function xi(){return(xi=(0,E.Z)(function*(D,p,_){const A=(0,O.m9)(D);Rr(A.auth,p,qe);const ne=Z(A.auth,_);return new za(A.auth,"reauthViaPopup",p,ne,A).executeNotNull()})).apply(this,arguments)}function wi(D,p,_){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,E.Z)(function*(D,p,_){const A=(0,O.m9)(D);Rr(A.auth,p,qe);const ne=Z(A.auth,_);return new za(A.auth,"linkViaPopup",p,ne,A).executeNotNull()})).apply(this,arguments)}let za=(()=>{class D extends qn{constructor(_,A,ne,he,nt){super(_,A,he,nt),this.provider=ne,this.authWindow=null,this.pollId=null,D.currentPopupAction&&D.currentPopupAction.cancel(),D.currentPopupAction=this}executeNotNull(){var _=this;return(0,E.Z)(function*(){const A=yield _.execute();return Ht(A,_.auth,"internal-error"),A})()}onExecution(){var _=this;return(0,E.Z)(function*(){Jn(1===_.filter.length,"Popup operations only handle one event");const A=te();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],A),_.authWindow.associatedEvent=A,_.resolver._originValidation(_.auth).catch(ne=>{_.reject(ne)}),_.resolver._isIframeWebStorageSupported(_.auth,ne=>{ne||_.reject(Tn(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,D.currentPopupAction=null}pollUserCancellation(){const _=()=>{var A,ne;this.pollId=(null===(ne=null===(A=this.authWindow)||void 0===A?void 0:A.window)||void 0===ne?void 0:ne.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Tn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,yr.get())};_()}}return D.currentPopupAction=null,D})();const Ho=new Map;class cl extends qn{constructor(p,_,A=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,A),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,E.Z)(function*(){let A=Ho.get(_.auth._key());if(!A){try{const he=(yield function(D,p){return na.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;A=()=>Promise.resolve(he)}catch(ne){A=()=>Promise.reject(ne)}Ho.set(_.auth._key(),A)}return _.bypassAuthState||Ho.set(_.auth._key(),()=>Promise.resolve(null)),A()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,A=this;return(0,E.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(A,p);if("unknown"!==p.type){if(p.eventId){const ne=yield A.auth._redirectUserForId(p.eventId);if(ne)return A.user=ne,_().call(A,p);A.resolve(null)}}else A.resolve(null)})()}onExecution(){return(0,E.Z)(function*(){})()}cleanUp(){}}function na(){return(na=(0,E.Z)(function*(D,p){const _=Va(p),A=dl(D);if(!(yield A._isAvailable()))return!1;const ne="true"===(yield A._get(_));return yield A._remove(_),ne})).apply(this,arguments)}function Fa(D,p){return Da.apply(this,arguments)}function Da(){return(Da=(0,E.Z)(function*(D,p){return dl(D)._set(Va(p),"true")})).apply(this,arguments)}function La(){Ho.clear()}function Ta(D,p){Ho.set(D._key(),p)}function dl(D){return er(D._redirectPersistence)}function Va(D){return zr("pendingRedirect",D.config.apiKey,D.name)}function hl(D,p,_){return function(D,p,_){return go.apply(this,arguments)}(D,p,_)}function go(){return(go=(0,E.Z)(function*(D,p,_){const A=At(D);Rr(D,p,qe);const ne=Z(A,_);return yield Fa(ne,A),ne._openRedirect(A,p,"signInViaRedirect")})).apply(this,arguments)}function fl(D,p,_){return function(D,p,_){return Kl.apply(this,arguments)}(D,p,_)}function Kl(){return(Kl=(0,E.Z)(function*(D,p,_){const A=(0,O.m9)(D);Rr(A.auth,p,qe);const ne=Z(A.auth,_);yield Fa(ne,A.auth);const he=yield Ql(A);return ne._openRedirect(A.auth,p,"reauthViaRedirect",he)})).apply(this,arguments)}function Eu(D,p,_){return function(D,p,_){return Is.apply(this,arguments)}(D,p,_)}function Is(){return(Is=(0,E.Z)(function*(D,p,_){const A=(0,O.m9)(D);Rr(A.auth,p,qe);const ne=Z(A.auth,_);yield br(!1,A,p.providerId),yield Fa(ne,A.auth);const he=yield Ql(A);return ne._openRedirect(A.auth,p,"linkViaRedirect",he)})).apply(this,arguments)}function Yu(D,p){return Po.apply(this,arguments)}function Po(){return(Po=(0,E.Z)(function*(D,p){return yield At(D)._initializationPromise,Zl(D,p,!1)})).apply(this,arguments)}function Zl(D,p){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,E.Z)(function*(D,p,_=!1){const A=At(D),ne=Z(A,p),nt=yield new cl(A,ne,_).execute();return nt&&!_&&(delete nt.user._redirectEventId,yield A._persistUserIfCurrent(nt.user),yield A._setRedirectUser(null,p)),nt})).apply(this,arguments)}function Ql(D){return bu.apply(this,arguments)}function bu(){return(bu=(0,E.Z)(function*(D){const p=te(`${D.uid}:::`);return D._redirectEventId=p,yield D.auth._setRedirectUser(D),yield D.auth._persistUserIfCurrent(D),p})).apply(this,arguments)}class yc{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(A=>{this.isEventForConsumer(p,A)&&(_=!0,this.sendToConsumer(p,A),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function(D){switch(D.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jl(D);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var A;if(p.error&&!Jl(p)){const ne=(null===(A=p.error.code)||void 0===A?void 0:A.split("auth/")[1])||"internal-error";_.onError(Tn(this.auth,ne))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const A=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&A}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xl(p))}saveEventToCache(p){this.cachedEventUids.add(Xl(p)),this.lastProcessedEventTime=Date.now()}}function Xl(D){return[D.type,D.eventId,D.sessionId,D.tenantId].filter(p=>p).join("-")}function Jl({type:D,error:p}){return"unknown"===D&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Cu(D){return _c.apply(this,arguments)}function _c(){return(_c=(0,E.Z)(function*(D,p={}){return Yn(D,"GET","/v1/projects",p)})).apply(this,arguments)}const Rd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pl=/^https?/;function Ba(){return(Ba=(0,E.Z)(function*(D){if(D.config.emulator)return;const{authorizedDomains:p}=yield Cu(D);for(const _ of p)try{if(vc(_))return}catch(A){}On(D,"unauthorized-domain")})).apply(this,arguments)}function vc(D){const p=pr(),{protocol:_,hostname:A}=new URL(p);if(D.startsWith("chrome-extension://")){const nt=new URL(D);return""===nt.hostname&&""===A?"chrome-extension:"===_&&D.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&nt.hostname===A}if(!pl.test(_))return!1;if(Rd.test(D))return A===D;const ne=D.replace(/\./g,"\\.");return new RegExp("^(.+\\."+ne+"|"+ne+")$","i").test(A)}const Ya=new gr(3e4,6e4);function Sa(){const D=We().___jsl;if(null==D?void 0:D.H)for(const p of Object.keys(D.H))if(D.H[p].r=D.H[p].r||[],D.H[p].L=D.H[p].L||[],D.H[p].r=[...D.H[p].L],D.CP)for(let _=0;_<D.CP.length;_++)D.CP[_]=null}let Vl=null;function Hc(D){return Vl=Vl||function(D){return new Promise((p,_)=>{var A,ne,he;function nt(){Sa(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Sa(),_(Tn(D,"network-request-failed"))},timeout:Ya.get()})}if(null===(ne=null===(A=We().gapi)||void 0===A?void 0:A.iframes)||void 0===ne?void 0:ne.Iframe)p(gapi.iframes.getContext());else{if(!(null===(he=We().gapi)||void 0===he?void 0:he.load)){const Zt=gs("iframefcb");return We()[Zt]=()=>{gapi.load?nt():_(Tn(D,"network-request-failed"))},al(`https://apis.google.com/js/api.js?onload=${Zt}`).catch(jn=>_(jn))}nt()}}).catch(p=>{throw Vl=null,p})}(D),Vl}const wu=new gr(5e3,15e3),Gi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Du=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ku(D){const p=D.config;Ht(p.authDomain,D,"auth-domain-config-required");const _=p.emulator?In(p,"emulator/auth/iframe"):`https://${D.config.authDomain}/__/auth/iframe`,A={apiKey:p.apiKey,appName:D.name,v:ie.SDK_VERSION},ne=Du.get(D.config.apiHost);ne&&(A.eid=ne);const he=D._getFrameworks();return he.length&&(A.fw=he.join(",")),`${_}?${(0,O.xO)(A).slice(1)}`}function Qu(){return Qu=(0,E.Z)(function*(D){const p=yield Hc(D),_=We().gapi;return Ht(_,D,"internal-error"),p.open({where:document.body,url:Ku(D),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gi,dontclear:!0},A=>new Promise(function(){var ne=(0,E.Z)(function*(he,nt){yield A.restyle({setHideOnLeave:!1});const Zt=Tn(D,"network-request-failed"),jn=We().setTimeout(()=>{nt(Zt)},wu.get());function An(){We().clearTimeout(jn),he(A)}A.ping(An).then(An,()=>{nt(Zt)})});return function(he,nt){return ne.apply(this,arguments)}}()))}),Qu.apply(this,arguments)}const Tu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ru{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function Su(D,p,_,A,ne,he){Ht(D.config.authDomain,D,"auth-domain-config-required"),Ht(D.config.apiKey,D,"invalid-api-key");const nt={apiKey:D.config.apiKey,appName:D.name,authType:_,redirectUrl:A,v:ie.SDK_VERSION,eventId:ne};if(p instanceof qe){p.setDefaultLanguage(D.languageCode),nt.providerId=p.providerId||"",(0,O.xb)(p.getCustomParameters())||(nt.customParameters=JSON.stringify(p.getCustomParameters()));for(const[jn,An]of Object.entries(he||{}))nt[jn]=An}if(p instanceof Ct){const jn=p.getScopes().filter(An=>""!==An);jn.length>0&&(nt.scopes=jn.join(","))}D.tenantId&&(nt.tid=D.tenantId);const Zt=nt;for(const jn of Object.keys(Zt))void 0===Zt[jn]&&delete Zt[jn];return`${function({config:D}){return D.emulator?In(D,"emulator/auth/handler"):`https://${D.authDomain}/__/auth/handler`}(D)}?${(0,O.xO)(Zt).slice(1)}`}const si="webStorageSupport",ou=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=S,this._completeRedirectFn=Zl,this._overrideRedirectResult=Ta}_openPopup(p,_,A,ne){var he=this;return(0,E.Z)(function*(){var nt;Jn(null===(nt=he.eventManagers[p._key()])||void 0===nt?void 0:nt.manager,"_initialize() not called before _openPopup()");const Zt=Su(p,_,A,pr(),ne);return function(D,p,_,A=500,ne=600){const he=Math.max((window.screen.availHeight-ne)/2,0).toString(),nt=Math.max((window.screen.availWidth-A)/2,0).toString();let Zt="";const jn=Object.assign(Object.assign({},Tu),{width:A.toString(),height:ne.toString(),top:he,left:nt}),An=(0,O.z$)().toLowerCase();_&&(Zt=qi(An)?"_blank":_),rs(An)&&(p=p||"http://localhost",jn.scrollbars="yes");const Tr=Object.entries(jn).reduce((Oi,[Ns,fa])=>`${Oi}${Ns}=${fa},`,"");if(function(D=(0,O.z$)()){var p;return ht(D)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(An)&&"_self"!==Zt)return function(D,p){const _=document.createElement("a");_.href=D,_.target=p;const A=document.createEvent("MouseEvent");A.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(A)}(p||"",Zt),new ru(null);const Mi=window.open(p||"",Zt,Tr);Ht(Mi,D,"popup-blocked");try{Mi.focus()}catch(Oi){}return new ru(Mi)}(p,Zt,te())})()}_openRedirect(p,_,A,ne){var he=this;return(0,E.Z)(function*(){return yield he._originValidation(p),D=Su(p,_,A,pr(),ne),We().location.href=D,new Promise(()=>{});var D})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:ne,promise:he}=this.eventManagers[_];return ne?Promise.resolve(ne):(Jn(he,"If manager is not set, promise should be"),he)}const A=this.initAndGetManager(p);return this.eventManagers[_]={promise:A},A.catch(()=>{delete this.eventManagers[_]}),A}initAndGetManager(p){var _=this;return(0,E.Z)(function*(){const A=yield function(D){return Qu.apply(this,arguments)}(p),ne=new yc(p);return A.register("authEvent",he=>(Ht(null==he?void 0:he.authEvent,p,"invalid-auth-event"),{status:ne.onEvent(he.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:ne},_.iframes[p._key()]=A,ne})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(si,{type:si},ne=>{var he;const nt=null===(he=null==ne?void 0:ne[0])||void 0===he?void 0:he[si];void 0!==nt&&_(!!nt),On(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function(D){return Ba.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return Ce()||xr()||ht()}};class Gc extends class{constructor(p){this.factorId=p}_process(p,_,A){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,A);case"signin":return this._finalizeSignIn(p,_.credential);default:return Gn("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Gc(p)}_finalizeEnroll(p,_,A){return function(D,p){return Yn(D,"POST","/v2/accounts/mfaEnrollment:finalize",Cn(D,p))}(p,{idToken:_,displayName:A,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function(D,p){return Yn(D,"POST","/v2/accounts/mfaSignIn:finalize",Cn(D,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Go=(()=>{class D{constructor(){}static assertion(_){return Gc._fromCredential(_)}}return D.FACTOR_ID="phone",D})();var zc="@firebase/auth",yl="0.20.10";class xu{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,E.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(A=>{var ne;p((null===(ne=A)||void 0===ne?void 0:ne.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);!_||(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){Ht(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Ru=(0,O.Pz)("authIdTokenMaxAge")||300;let _l=null;const Xr=D=>function(){var p=(0,E.Z)(function*(_){const A=_&&(yield _.getIdTokenResult()),ne=A&&((new Date).getTime()-Date.parse(A.issuedAtTime))/1e3;if(ne&&ne>Ru)return;const he=null==A?void 0:A.token;_l!==he&&(_l=he,yield fetch(D,{method:he?"POST":"DELETE",headers:he?{Authorization:`Bearer ${he}`}:{}}))});return function(_){return p.apply(this,arguments)}}();function Aa(D=(0,ie.getApp)()){const p=(0,ie._getProvider)(D,"auth");if(p.isInitialized())return p.getImmediate();const _=function(D,p){const _=(0,ie._getProvider)(D,"auth");if(_.isInitialized()){const ne=_.getImmediate(),he=_.getOptions();if((0,O.vZ)(he,null!=p?p:{}))return ne;On(ne,"already-initialized")}return _.initialize({options:p})}(D,{popupRedirectResolver:ou,persistence:[_o,Jo,S]}),A=(0,O.Pz)("authTokenSyncURL");if(A){const he=Xr(A);(function(D,p,_){(0,O.m9)(D).beforeAuthStateChanged(p,_)})(_,he,()=>he(_.currentUser)),Ia(_,nt=>he(nt))}const ne=(0,O.q4)("auth");return ne&&Sn(_,`http://${ne}`),_}var D;D="Browser",(0,ie._registerComponent)(new kt.wA("auth",(p,{options:_})=>{const A=p.getProvider("app").getImmediate(),ne=p.getProvider("heartbeat"),{apiKey:he,authDomain:nt}=A.options;return((Zt,jn)=>{Ht(he&&!he.includes(":"),"invalid-api-key",{appName:Zt.name}),Ht(!(null==nt?void 0:nt.includes(":")),"argument-error",{appName:Zt.name});const An={apiKey:he,authDomain:nt,clientPlatform:D,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ze(D)},Tr=new bt(Zt,jn,An);return function(D,p){const _=(null==p?void 0:p.persistence)||[],A=(Array.isArray(_)?_:[_]).map(er);(null==p?void 0:p.errorMap)&&D._updateErrorMap(p.errorMap),D._initializeWithPersistence(A,null==p?void 0:p.popupRedirectResolver)}(Tr,_),Tr})(A,ne)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,A)=>{p.getProvider("auth-internal").initialize()})),(0,ie._registerComponent)(new kt.wA("auth-internal",p=>{const _=At(p.getProvider("auth").getImmediate());return new xu(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ie.registerVersion)(zc,yl,void 0),(0,ie.registerVersion)(zc,yl,"esm2017")},407:(cn,rt,F)=>{"use strict";F.d(rt,{vA:()=>qc,JH:()=>Ro,G$:()=>To,tn:()=>Aa,wj:()=>Vd,AM:()=>Se,FQ:()=>Is,mI:()=>Po,iU:()=>A,dH:()=>Bd,U7:()=>Yf,Wu:()=>Ws,Lx:()=>uu,EW:()=>Wf,Ot:()=>Th,TD:()=>Gf,U2:()=>Mi,N8:()=>Gg,Sb:()=>zf,$o:()=>qf,nP:()=>qg,Kk:()=>jf,vh:()=>Nd,S1:()=>pa,yv:()=>mo,Jr:()=>Ec,Vt:()=>Bl,MQ:()=>Hs,jM:()=>Mu,g2:()=>Hf,R:()=>kd,HE:()=>Xu,Bd:()=>bh,VF:()=>he,IO:()=>Ch,iH:()=>p,qT:()=>_,Od:()=>nt,i3:()=>Kf,Bt:()=>zg,t8:()=>Zt,Sl:()=>jn,cy:()=>An,TQ:()=>bc,e0:()=>Uf,Vx:()=>Tr});var E=F(8239),O=F(8026),ie=F(3910),L=F(3854),ue=F(5422);const ee="@firebase/database";let oe="";function Se(f){oe=f}class ae{constructor(d){this.domStorage_=d,this.prefix_="firebase:"}set(d,c){null==c?this.domStorage_.removeItem(this.prefixedName_(d)):this.domStorage_.setItem(this.prefixedName_(d),(0,L.Wl)(c))}get(d){const c=this.domStorage_.getItem(this.prefixedName_(d));return null==c?null:(0,L.cI)(c)}remove(d){this.domStorage_.removeItem(this.prefixedName_(d))}prefixedName_(d){return this.prefix_+d}toString(){return this.domStorage_.toString()}}class ve{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(d,c){null==c?delete this.cache_[d]:this.cache_[d]=c}get(d){return(0,L.r3)(this.cache_,d)?this.cache_[d]:null}remove(d){delete this.cache_[d]}}const we=function(f){try{if("undefined"!=typeof window&&void 0!==window[f]){const d=window[f];return d.setItem("firebase:sentinel","cache"),d.removeItem("firebase:sentinel"),new ae(d)}}catch(d){}return new ve},_e=we("localStorage"),Te=we("sessionStorage"),lt=new ue.Yd("@firebase/database"),Ee=function(){let f=1;return function(){return f++}}(),Ke=function(f){const d=(0,L.dS)(f),c=new L.gQ;c.update(d);const y=c.digest();return L.US.encodeByteArray(y)},Re=function(...f){let d="";for(let c=0;c<f.length;c++){const y=f[c];Array.isArray(y)||y&&"object"==typeof y&&"number"==typeof y.length?d+=Re.apply(null,y):d+="object"==typeof y?(0,L.Wl)(y):y,d+=" "}return d};let Ge=null,Fe=!0;const Oe=function(f,d){(0,L.hu)(!d||!0===f||!1===f,"Can't turn on custom loggers persistently."),!0===f?(lt.logLevel=ue.in.VERBOSE,Ge=lt.log.bind(lt),d&&Te.set("logging_enabled",!0)):"function"==typeof f?Ge=f:(Ge=null,Te.remove("logging_enabled"))},st=function(...f){if(!0===Fe&&(Fe=!1,null===Ge&&!0===Te.get("logging_enabled")&&Oe(!0)),Ge){const d=Re.apply(null,f);Ge(d)}},It=function(f){return function(...d){st(f,...d)}},en=function(...f){const d="FIREBASE INTERNAL ERROR: "+Re(...f);lt.error(d)},v=function(...f){const d=`FIREBASE FATAL ERROR: ${Re(...f)}`;throw lt.error(d),new Error(d)},Le=function(...f){const d="FIREBASE WARNING: "+Re(...f);lt.warn(d)},ft=function(f){return"number"==typeof f&&(f!=f||f===Number.POSITIVE_INFINITY||f===Number.NEGATIVE_INFINITY)},pt="[MIN_NAME]",xt="[MAX_NAME]",kt=function(f,d){if(f===d)return 0;if(f===pt||d===xt)return-1;if(d===pt||f===xt)return 1;{const c=Hn(f),y=Hn(d);return null!==c?null!==y?c-y==0?f.length-d.length:c-y:-1:null!==y?1:f<d?-1:1}},xn=function(f,d){return f===d?0:f<d?-1:1},vn=function(f,d){if(d&&f in d)return d[f];throw new Error("Missing required key ("+f+") in object: "+(0,L.Wl)(d))},Nt=function(f){if("object"!=typeof f||null===f)return(0,L.Wl)(f);const d=[];for(const y in f)d.push(y);d.sort();let c="{";for(let y=0;y<d.length;y++)0!==y&&(c+=","),c+=(0,L.Wl)(d[y]),c+=":",c+=Nt(f[d[y]]);return c+="}",c},Dt=function(f,d){const c=f.length;if(c<=d)return[f];const y=[];for(let x=0;x<c;x+=d)y.push(f.substring(x,x+d>c?c:x+d));return y};function tt(f,d){for(const c in f)f.hasOwnProperty(c)&&d(c,f[c])}const je=function(f){(0,L.hu)(!ft(f),"Invalid JSON number");const y=1023;let x,U,J,xe,Ye;0===f?(U=0,J=0,x=1/f==-1/0?1:0):(x=f<0,(f=Math.abs(f))>=Math.pow(2,1-y)?(xe=Math.min(Math.floor(Math.log(f)/Math.LN2),y),U=xe+y,J=Math.round(f*Math.pow(2,52-xe)-Math.pow(2,52))):(U=0,J=Math.round(f/Math.pow(2,-1074))));const ot=[];for(Ye=52;Ye;Ye-=1)ot.push(J%2?1:0),J=Math.floor(J/2);for(Ye=11;Ye;Ye-=1)ot.push(U%2?1:0),U=Math.floor(U/2);ot.push(x?1:0),ot.reverse();const zt=ot.join("");let Xt="";for(Ye=0;Ye<64;Ye+=8){let sn=parseInt(zt.substr(Ye,8),2).toString(16);1===sn.length&&(sn="0"+sn),Xt+=sn}return Xt.toLowerCase()},Vt=new RegExp("^-?(0*)\\d{1,10}$"),Bt=-2147483648,wn=2147483647,Hn=function(f){if(Vt.test(f)){const d=Number(f);if(d>=Bt&&d<=wn)return d}return null},On=function(f){try{f()}catch(d){setTimeout(()=>{throw Le("Exception was thrown by user callback.",d.stack||""),d},Math.floor(0))}},Wn=function(f,d){const c=setTimeout(f,d);return"number"==typeof c&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(c):"object"==typeof c&&c.unref&&c.unref(),c};class Rr{constructor(d,c){this.appName_=d,this.appCheckProvider=c,this.appCheck=null==c?void 0:c.getImmediate({optional:!0}),this.appCheck||null==c||c.get().then(y=>this.appCheck=y)}getToken(d){return this.appCheck?this.appCheck.getToken(d):new Promise((c,y)=>{setTimeout(()=>{this.appCheck?this.getToken(d).then(c,y):c(null)},0)})}addTokenChangeListener(d){var c;null===(c=this.appCheckProvider)||void 0===c||c.get().then(y=>y.addTokenListener(d))}notifyForInvalidToken(){Le(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Sr{constructor(d,c,y){this.appName_=d,this.firebaseOptions_=c,this.authProvider_=y,this.auth_=null,this.auth_=y.getImmediate({optional:!0}),this.auth_||y.onInit(x=>this.auth_=x)}getToken(d){return this.auth_?this.auth_.getToken(d).catch(c=>c&&"auth/token-not-initialized"===c.code?(st("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(c)):new Promise((c,y)=>{setTimeout(()=>{this.auth_?this.getToken(d).then(c,y):c(null)},0)})}addTokenChangeListener(d){this.auth_?this.auth_.addAuthTokenListener(d):this.authProvider_.get().then(c=>c.addAuthTokenListener(d))}removeTokenChangeListener(d){this.authProvider_.get().then(c=>c.removeAuthTokenListener(d))}notifyForInvalidToken(){let d='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';d+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Le(d)}}let Ht=(()=>{class f{constructor(c){this.accessToken=c}getToken(c){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(c){c(this.accessToken)}removeTokenChangeListener(c){}notifyForInvalidToken(){}}return f.OWNER="owner",f})();const sr=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ar="websocket",hi="long_polling";class gr{constructor(d,c,y,x,U=!1,J="",xe=!1){this.secure=c,this.namespace=y,this.webSocketOnly=x,this.nodeAdmin=U,this.persistenceKey=J,this.includeNamespaceInQueryParams=xe,this._host=d.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=_e.get("host:"+d)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(d){d!==this.internalHost&&(this.internalHost=d,this.isCacheableHost()&&_e.set("host:"+this._host,this.internalHost))}toString(){let d=this.toURLString();return this.persistenceKey&&(d+="<"+this.persistenceKey+">"),d}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Ft(f,d,c){let y;if((0,L.hu)("string"==typeof d,"typeof type must == string"),(0,L.hu)("object"==typeof c,"typeof params must == object"),d===Ar)y=(f.secure?"wss://":"ws://")+f.internalHost+"/.ws?";else{if(d!==hi)throw new Error("Unknown connection type: "+d);y=(f.secure?"https://":"http://")+f.internalHost+"/.lp?"}(function(f){return f.host!==f.internalHost||f.isCustomHost()||f.includeNamespaceInQueryParams})(f)&&(c.ns=f.namespace);const x=[];return tt(c,(U,J)=>{x.push(U+"="+J)}),y+x.join("&")}class ci{constructor(){this.counters_={}}incrementCounter(d,c=1){(0,L.r3)(this.counters_,d)||(this.counters_[d]=0),this.counters_[d]+=c}get(){return(0,L.p$)(this.counters_)}}const ni={},Cn={};function Yn(f){const d=f.toString();return ni[d]||(ni[d]=new ci),ni[d]}class Cr{constructor(d){this.onMessage_=d,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(d,c){this.closeAfterResponse=d,this.onClose=c,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(d,c){for(this.pendingResponses[d]=c;this.pendingResponses[this.currentResponseNum];){const y=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let x=0;x<y.length;++x)y[x]&&On(()=>{this.onMessage_(y[x])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class tn{constructor(d,c,y,x,U,J,xe){this.connId=d,this.repoInfo=c,this.applicationId=y,this.appCheckToken=x,this.authToken=U,this.transportSessionId=J,this.lastSessionId=xe,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=It(d),this.stats_=Yn(c),this.urlFn=Ye=>(this.appCheckToken&&(Ye.ac=this.appCheckToken),Ft(c,hi,Ye))}open(d,c){this.curSegmentNum=0,this.onDisconnect_=c,this.myPacketOrderer=new Cr(d),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(f){if((0,L.Yr)()||"complete"===document.readyState)f();else{let d=!1;const c=function(){document.body?d||(d=!0,f()):setTimeout(c,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&c()}),window.attachEvent("onload",c))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new $n((...U)=>{const[J,xe,Ye,ot,zt]=U;if(this.incrementIncomingBytes_(U),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===J)this.id=xe,this.password=Ye;else{if("close"!==J)throw new Error("Unrecognized command received: "+J);xe?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(xe,()=>{this.onClosed_()})):this.onClosed_()}},(...U)=>{const[J,xe]=U;this.incrementIncomingBytes_(U),this.myPacketOrderer.handleResponse(J,xe)},()=>{this.onClosed_()},this.urlFn);const y={start:"t"};y.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(y.cb=this.scriptTagHolder.uniqueCallbackIdentifier),y.v="5",this.transportSessionId&&(y.s=this.transportSessionId),this.lastSessionId&&(y.ls=this.lastSessionId),this.applicationId&&(y.p=this.applicationId),this.appCheckToken&&(y.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&sr.test(location.hostname)&&(y.r="f");const x=this.urlFn(y);this.log_("Connecting via long-poll to "+x),this.scriptTagHolder.addTag(x,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){tn.forceAllow_=!0}static forceDisallow(){tn.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!tn.forceAllow_&&(tn.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(d){const c=(0,L.Wl)(d);this.bytesSent+=c.length,this.stats_.incrementCounter("bytes_sent",c.length);const y=(0,L.h$)(c),x=Dt(y,1840);for(let U=0;U<x.length;U++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,x.length,x[U]),this.curSegmentNum++}addDisconnectPingFrame(d,c){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const y={dframe:"t"};y.id=d,y.pw=c,this.myDisconnFrame.src=this.urlFn(y),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(d){const c=(0,L.Wl)(d).length;this.bytesReceived+=c,this.stats_.incrementCounter("bytes_received",c)}}class $n{constructor(d,c,y,x){if(this.onDisconnect=y,this.urlFn=x,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=d,this.onMessageCB=c;else{this.uniqueCallbackIdentifier=Ee(),window["pLPCommand"+this.uniqueCallbackIdentifier]=d,window["pRTLPCB"+this.uniqueCallbackIdentifier]=c,this.myIFrame=$n.createIFrame_();let U="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(U='<script>document.domain="'+document.domain+'";<\/script>');const J="<html><body>"+U+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(J),this.myIFrame.doc.close()}catch(xe){st("frame writing exception"),xe.stack&&st(xe.stack),st(xe)}}}static createIFrame_(){const d=document.createElement("iframe");if(d.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(d);try{d.contentWindow.document||st("No IE domain setting required")}catch(c){const y=document.domain;d.src="javascript:void((function(){document.open();document.domain='"+y+"';document.close();})())"}return d.contentDocument?d.doc=d.contentDocument:d.contentWindow?d.doc=d.contentWindow.document:d.document&&(d.doc=d.document),d}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const d=this.onDisconnect;d&&(this.onDisconnect=null,d())}startLongPoll(d,c){for(this.myID=d,this.myPW=c,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const d={};d.id=this.myID,d.pw=this.myPW,d.ser=this.currentSerial;let c=this.urlFn(d),y="",x=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+y.length<=1870;){const J=this.pendingSegs.shift();y=y+"&seg"+x+"="+J.seg+"&ts"+x+"="+J.ts+"&d"+x+"="+J.d,x++}return c+=y,this.addLongPollTag_(c,this.currentSerial),!0}return!1}enqueueSegment(d,c,y){this.pendingSegs.push({seg:d,ts:c,d:y}),this.alive&&this.newRequest_()}addLongPollTag_(d,c){this.outstandingRequests.add(c);const y=()=>{this.outstandingRequests.delete(c),this.newRequest_()},x=setTimeout(y,Math.floor(25e3));this.addTag(d,()=>{clearTimeout(x),y()})}addTag(d,c){(0,L.Yr)()?this.doNodeLongPoll(d,c):setTimeout(()=>{try{if(!this.sendNewPolls)return;const y=this.myIFrame.doc.createElement("script");y.type="text/javascript",y.async=!0,y.src=d,y.onload=y.onreadystatechange=function(){const x=y.readyState;(!x||"loaded"===x||"complete"===x)&&(y.onload=y.onreadystatechange=null,y.parentNode&&y.parentNode.removeChild(y),c())},y.onerror=()=>{st("Long-poll script failed to load: "+d),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(y)}catch(y){}},Math.floor(1))}}let yn=null;"undefined"!=typeof MozWebSocket?yn=MozWebSocket:"undefined"!=typeof WebSocket&&(yn=WebSocket);let Dn=(()=>{class f{constructor(c,y,x,U,J,xe,Ye){this.connId=c,this.applicationId=x,this.appCheckToken=U,this.authToken=J,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=It(this.connId),this.stats_=Yn(y),this.connURL=f.connectionURL_(y,xe,Ye,U,x),this.nodeAdmin=y.nodeAdmin}static connectionURL_(c,y,x,U,J){const xe={v:"5"};return!(0,L.Yr)()&&"undefined"!=typeof location&&location.hostname&&sr.test(location.hostname)&&(xe.r="f"),y&&(xe.s=y),x&&(xe.ls=x),U&&(xe.ac=U),J&&(xe.p=J),Ft(c,Ar,xe)}open(c,y){this.onDisconnect=y,this.onMessage=c,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,_e.set("previous_websocket_failure",!0);try{let x;if((0,L.Yr)()){x={headers:{"User-Agent":`Firebase/5/${oe}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(x.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(x.headers["X-Firebase-AppCheck"]=this.appCheckToken);const J=process.env,xe=0===this.connURL.indexOf("wss://")?J.HTTPS_PROXY||J.https_proxy:J.HTTP_PROXY||J.http_proxy;xe&&(x.proxy={origin:xe})}this.mySock=new yn(this.connURL,[],x)}catch(x){this.log_("Error instantiating WebSocket.");const U=x.message||x.data;return U&&this.log_(U),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=x=>{this.handleIncomingFrame(x)},this.mySock.onerror=x=>{this.log_("WebSocket error.  Closing connection.");const U=x.message||x.data;U&&this.log_(U),this.onClosed_()}}start(){}static forceDisallow(){f.forceDisallow_=!0}static isAvailable(){let c=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const x=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);x&&x.length>1&&parseFloat(x[1])<4.4&&(c=!0)}return!c&&null!==yn&&!f.forceDisallow_}static previouslyFailed(){return _e.isInMemoryStorage||!0===_e.get("previous_websocket_failure")}markConnectionHealthy(){_e.remove("previous_websocket_failure")}appendFrame_(c){if(this.frames.push(c),this.frames.length===this.totalFrames){const y=this.frames.join("");this.frames=null;const x=(0,L.cI)(y);this.onMessage(x)}}handleNewFrameCount_(c){this.totalFrames=c,this.frames=[]}extractFrameCount_(c){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),c.length<=6){const y=Number(c);if(!isNaN(y))return this.handleNewFrameCount_(y),null}return this.handleNewFrameCount_(1),c}handleIncomingFrame(c){if(null===this.mySock)return;const y=c.data;if(this.bytesReceived+=y.length,this.stats_.incrementCounter("bytes_received",y.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(y);else{const x=this.extractFrameCount_(y);null!==x&&this.appendFrame_(x)}}send(c){this.resetKeepAlive();const y=(0,L.Wl)(c);this.bytesSent+=y.length,this.stats_.incrementCounter("bytes_sent",y.length);const x=Dt(y,16384);x.length>1&&this.sendString_(String(x.length));for(let U=0;U<x.length;U++)this.sendString_(x[U])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(c){try{this.mySock.send(c)}catch(y){this.log_("Exception thrown from WebSocket.send():",y.message||y.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return f.responsesRequiredToBeHealthy=2,f.healthyTimeout=3e4,f})(),Er=(()=>{class f{constructor(c){this.initTransports_(c)}static get ALL_TRANSPORTS(){return[tn,Dn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(c){const y=Dn&&Dn.isAvailable();let x=y&&!Dn.previouslyFailed();if(c.webSocketOnly&&(y||Le("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),x=!0),x)this.transports_=[Dn];else{const U=this.transports_=[];for(const J of f.ALL_TRANSPORTS)J&&J.isAvailable()&&U.push(J);f.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return f.globalTransportInitialized_=!1,f})();class gi{constructor(d,c,y,x,U,J,xe,Ye,ot,zt){this.id=d,this.repoInfo_=c,this.applicationId_=y,this.appCheckToken_=x,this.authToken_=U,this.onMessage_=J,this.onReady_=xe,this.onDisconnect_=Ye,this.onKill_=ot,this.lastSessionId=zt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=It("c:"+this.id+":"),this.transportManager_=new Er(c),this.log_("Connection created"),this.start_()}start_(){const d=this.transportManager_.initialTransport();this.conn_=new d(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=d.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.conn_),y=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(c,y)},Math.floor(0));const x=d.healthyTimeout||0;x>0&&(this.healthyTimeout_=Wn(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(x)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(d){return c=>{d===this.conn_?this.onConnectionLost_(c):d===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(d){return c=>{2!==this.state_&&(d===this.rx_?this.onPrimaryMessageReceived_(c):d===this.secondaryConn_?this.onSecondaryMessageReceived_(c):this.log_("message on old connection"))}}sendRequest(d){this.sendData_({t:"d",d})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(d){if("t"in d){const c=d.t;"a"===c?this.upgradeIfSecondaryHealthy_():"r"===c?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===c&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(d){const c=vn("t",d),y=vn("d",d);if("c"===c)this.onSecondaryControl_(y);else{if("d"!==c)throw new Error("Unknown protocol layer: "+c);this.pendingDataMessages.push(y)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(d){const c=vn("t",d),y=vn("d",d);"c"===c?this.onControl_(y):"d"===c&&this.onDataMessage_(y)}onDataMessage_(d){this.onPrimaryResponse_(),this.onMessage_(d)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(d){const c=vn("t",d);if("d"in d){const y=d.d;if("h"===c)this.onHandshake_(y);else if("n"===c){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let x=0;x<this.pendingDataMessages.length;++x)this.onDataMessage_(this.pendingDataMessages[x]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===c?this.onConnectionShutdown_(y):"r"===c?this.onReset_(y):"e"===c?en("Server Error: "+y):"o"===c?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):en("Unknown control packet command: "+c)}}onHandshake_(d){const c=d.ts,y=d.v,x=d.h;this.sessionId=d.s,this.repoInfo_.host=x,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,c),"5"!==y&&Le("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const d=this.transportManager_.upgradeTransport();d&&this.startUpgrade_(d)}startUpgrade_(d){this.secondaryConn_=new d(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=d.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.secondaryConn_),y=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(c,y),Wn(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(d){this.log_("Reset packet received.  New host: "+d),this.repoInfo_.host=d,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(d,c){this.log_("Realtime connection established."),this.conn_=d,this.state_=1,this.onReady_&&(this.onReady_(c,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Wn(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const d=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===d||this.rx_===d)&&this.close()}onConnectionLost_(d){this.conn_=null,d||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(_e.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(d){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(d),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(d){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(d)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Zr{put(d,c,y,x){}merge(d,c,y,x){}refreshAuthToken(d){}refreshAppCheckToken(d){}onDisconnectPut(d,c,y){}onDisconnectMerge(d,c,y){}onDisconnectCancel(d,c){}reportStats(d){}}class rs{constructor(d){this.allowedEvents_=d,this.listeners_={},(0,L.hu)(Array.isArray(d)&&d.length>0,"Requires a non-empty array")}trigger(d,...c){if(Array.isArray(this.listeners_[d])){const y=[...this.listeners_[d]];for(let x=0;x<y.length;x++)y[x].callback.apply(y[x].context,c)}}on(d,c,y){this.validateEventType_(d),this.listeners_[d]=this.listeners_[d]||[],this.listeners_[d].push({callback:c,context:y});const x=this.getInitialEvent(d);x&&c.apply(y,x)}off(d,c,y){this.validateEventType_(d);const x=this.listeners_[d]||[];for(let U=0;U<x.length;U++)if(x[U].callback===c&&(!y||y===x[U].context))return void x.splice(U,1)}validateEventType_(d){(0,L.hu)(this.allowedEvents_.find(c=>c===d),"Unknown event: "+d)}}class xr extends rs{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new xr}getInitialEvent(d){return(0,L.hu)("online"===d,"Unknown event type: "+d),[this.online_]}currentlyOnline(){return this.online_}}class ar{constructor(d,c){if(void 0===c){this.pieces_=d.split("/");let y=0;for(let x=0;x<this.pieces_.length;x++)this.pieces_[x].length>0&&(this.pieces_[y]=this.pieces_[x],y++);this.pieces_.length=y,this.pieceNum_=0}else this.pieces_=d,this.pieceNum_=c}toString(){let d="";for(let c=this.pieceNum_;c<this.pieces_.length;c++)""!==this.pieces_[c]&&(d+="/"+this.pieces_[c]);return d||"/"}}function Vn(){return new ar("")}function mr(f){return f.pieceNum_>=f.pieces_.length?null:f.pieces_[f.pieceNum_]}function ht(f){return f.pieces_.length-f.pieceNum_}function $(f){let d=f.pieceNum_;return d<f.pieces_.length&&d++,new ar(f.pieces_,d)}function W(f){return f.pieceNum_<f.pieces_.length?f.pieces_[f.pieces_.length-1]:null}function Ce(f,d=0){return f.pieces_.slice(f.pieceNum_+d)}function Ze(f){if(f.pieceNum_>=f.pieces_.length)return null;const d=[];for(let c=f.pieceNum_;c<f.pieces_.length-1;c++)d.push(f.pieces_[c]);return new ar(d,0)}function ze(f,d){const c=[];for(let y=f.pieceNum_;y<f.pieces_.length;y++)c.push(f.pieces_[y]);if(d instanceof ar)for(let y=d.pieceNum_;y<d.pieces_.length;y++)c.push(d.pieces_[y]);else{const y=d.split("/");for(let x=0;x<y.length;x++)y[x].length>0&&c.push(y[x])}return new ar(c,0)}function gt(f){return f.pieceNum_>=f.pieces_.length}function bt(f,d){const c=mr(f),y=mr(d);if(null===c)return d;if(c===y)return bt($(f),$(d));throw new Error("INTERNAL ERROR: innerPath ("+d+") is not within outerPath ("+f+")")}function At(f,d){const c=Ce(f,0),y=Ce(d,0);for(let x=0;x<c.length&&x<y.length;x++){const U=kt(c[x],y[x]);if(0!==U)return U}return c.length===y.length?0:c.length<y.length?-1:1}function an(f,d){if(ht(f)!==ht(d))return!1;for(let c=f.pieceNum_,y=d.pieceNum_;c<=f.pieces_.length;c++,y++)if(f.pieces_[c]!==d.pieces_[y])return!1;return!0}function Sn(f,d){let c=f.pieceNum_,y=d.pieceNum_;if(ht(f)>ht(d))return!1;for(;c<f.pieces_.length;){if(f.pieces_[c]!==d.pieces_[y])return!1;++c,++y}return!0}class zn{constructor(d,c){this.errorPrefix_=c,this.parts_=Ce(d,0),this.byteLength_=Math.max(1,this.parts_.length);for(let y=0;y<this.parts_.length;y++)this.byteLength_+=(0,L.ug)(this.parts_[y]);Fi(this)}}function Fi(f){if(f.byteLength_>768)throw new Error(f.errorPrefix_+"has a key path longer than 768 bytes ("+f.byteLength_+").");if(f.parts_.length>32)throw new Error(f.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Jr(f))}function Jr(f){return 0===f.parts_.length?"":"in property '"+f.parts_.join(".")+"'"}class _i extends rs{constructor(){let d,c;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(c="visibilitychange",d="hidden"):void 0!==document.mozHidden?(c="mozvisibilitychange",d="mozHidden"):void 0!==document.msHidden?(c="msvisibilitychange",d="msHidden"):void 0!==document.webkitHidden&&(c="webkitvisibilitychange",d="webkitHidden")),this.visible_=!0,c&&document.addEventListener(c,()=>{const y=!document[d];y!==this.visible_&&(this.visible_=y,this.trigger("visible",y))},!1)}static getInstance(){return new _i}getInitialEvent(d){return(0,L.hu)("visible"===d,"Unknown event type: "+d),[this.visible_]}}const ri=1e3;let eo,ji=(()=>{class f extends Zr{constructor(c,y,x,U,J,xe,Ye,ot){if(super(),this.repoInfo_=c,this.applicationId_=y,this.onDataUpdate_=x,this.onConnectStatus_=U,this.onServerInfoUpdate_=J,this.authTokenProvider_=xe,this.appCheckTokenProvider_=Ye,this.authOverride_=ot,this.id=f.nextPersistentConnectionId_++,this.log_=It("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ri,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,ot&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");_i.getInstance().on("visible",this.onVisible_,this),-1===c.host.indexOf("fblocal")&&xr.getInstance().on("online",this.onOnline_,this)}sendRequest(c,y,x){const U=++this.requestNumber_,J={r:U,a:c,b:y};this.log_((0,L.Wl)(J)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(J),x&&(this.requestCBHash_[U]=x)}get(c){this.initConnection_();const y=new L.BH,x={p:c._path.toString(),q:c._queryObject};return this.outstandingGets_.push({action:"g",request:x,onComplete:xe=>{const Ye=xe.d;"ok"===xe.s?y.resolve(Ye):y.reject(Ye)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),y.promise}listen(c,y,x,U){this.initConnection_();const J=c._queryIdentifier,xe=c._path.toString();this.log_("Listen called for "+xe+" "+J),this.listens.has(xe)||this.listens.set(xe,new Map),(0,L.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(xe).has(J),"listen() called twice for same path/queryId.");const Ye={onComplete:U,hashFn:y,query:c,tag:x};this.listens.get(xe).set(J,Ye),this.connected_&&this.sendListen_(Ye)}sendGet_(c){const y=this.outstandingGets_[c];this.sendRequest("g",y.request,x=>{delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),y.onComplete&&y.onComplete(x)})}sendListen_(c){const y=c.query,x=y._path.toString(),U=y._queryIdentifier;this.log_("Listen on "+x+" for "+U);const J={p:x};c.tag&&(J.q=y._queryObject,J.t=c.tag),J.h=c.hashFn(),this.sendRequest("q",J,Ye=>{const ot=Ye.d,zt=Ye.s;f.warnOnListenWarnings_(ot,y),(this.listens.get(x)&&this.listens.get(x).get(U))===c&&(this.log_("listen response",Ye),"ok"!==zt&&this.removeListen_(x,U),c.onComplete&&c.onComplete(zt,ot))})}static warnOnListenWarnings_(c,y){if(c&&"object"==typeof c&&(0,L.r3)(c,"w")){const x=(0,L.DV)(c,"w");if(Array.isArray(x)&&~x.indexOf("no_index")){const U='".indexOn": "'+y._queryParams.getIndex().toString()+'"',J=y._path.toString();Le(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${U} at ${J} to your security rules for better performance.`)}}}refreshAuthToken(c){this.authToken_=c,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(c)}reduceReconnectDelayIfAdminCredential_(c){(c&&40===c.length||(0,L.GJ)(c))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(c){this.appCheckToken_=c,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const c=this.authToken_,y=(0,L.w9)(c)?"auth":"gauth",x={cred:c};null===this.authOverride_?x.noauth=!0:"object"==typeof this.authOverride_&&(x.authvar=this.authOverride_),this.sendRequest(y,x,U=>{const J=U.s,xe=U.d||"error";this.authToken_===c&&("ok"===J?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(J,xe))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},c=>{const y=c.s,x=c.d||"error";"ok"===y?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(y,x)})}unlisten(c,y){const x=c._path.toString(),U=c._queryIdentifier;this.log_("Unlisten called for "+x+" "+U),(0,L.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(x,U)&&this.connected_&&this.sendUnlisten_(x,U,c._queryObject,y)}sendUnlisten_(c,y,x,U){this.log_("Unlisten on "+c+" for "+y);const J={p:c};U&&(J.q=x,J.t=U),this.sendRequest("n",J)}onDisconnectPut(c,y,x){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",c,y,x):this.onDisconnectRequestQueue_.push({pathString:c,action:"o",data:y,onComplete:x})}onDisconnectMerge(c,y,x){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",c,y,x):this.onDisconnectRequestQueue_.push({pathString:c,action:"om",data:y,onComplete:x})}onDisconnectCancel(c,y){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",c,null,y):this.onDisconnectRequestQueue_.push({pathString:c,action:"oc",data:null,onComplete:y})}sendOnDisconnect_(c,y,x,U){const J={p:y,d:x};this.log_("onDisconnect "+c,J),this.sendRequest(c,J,xe=>{U&&setTimeout(()=>{U(xe.s,xe.d)},Math.floor(0))})}put(c,y,x,U){this.putInternal("p",c,y,x,U)}merge(c,y,x,U){this.putInternal("m",c,y,x,U)}putInternal(c,y,x,U,J){this.initConnection_();const xe={p:y,d:x};void 0!==J&&(xe.h=J),this.outstandingPuts_.push({action:c,request:xe,onComplete:U}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+y)}sendPut_(c){const y=this.outstandingPuts_[c].action,x=this.outstandingPuts_[c].request,U=this.outstandingPuts_[c].onComplete;this.outstandingPuts_[c].queued=this.connected_,this.sendRequest(y,x,J=>{this.log_(y+" response",J),delete this.outstandingPuts_[c],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),U&&U(J.s,J.d)})}reportStats(c){if(this.connected_){const y={c};this.log_("reportStats",y),this.sendRequest("s",y,x=>{"ok"!==x.s&&this.log_("reportStats","Error sending stats: "+x.d)})}}onDataMessage_(c){if("r"in c){this.log_("from server: "+(0,L.Wl)(c));const y=c.r,x=this.requestCBHash_[y];x&&(delete this.requestCBHash_[y],x(c.b))}else{if("error"in c)throw"A server-side error has occurred: "+c.error;"a"in c&&this.onDataPush_(c.a,c.b)}}onDataPush_(c,y){this.log_("handleServerMessage",c,y),"d"===c?this.onDataUpdate_(y.p,y.d,!1,y.t):"m"===c?this.onDataUpdate_(y.p,y.d,!0,y.t):"c"===c?this.onListenRevoked_(y.p,y.q):"ac"===c?this.onAuthRevoked_(y.s,y.d):"apc"===c?this.onAppCheckRevoked_(y.s,y.d):"sd"===c?this.onSecurityDebugPacket_(y):en("Unrecognized action received from server: "+(0,L.Wl)(c)+"\nAre you using the latest client?")}onReady_(c,y){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(c),this.lastSessionId=y,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(c){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(c))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(c){c&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ri,this.realtime_||this.scheduleConnect_(0)),this.visible_=c}onOnline_(c){c?(this.log_("Browser went online."),this.reconnectDelay_=ri,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ri),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const c=(new Date).getTime()-this.lastConnectionAttemptTime_;let y=Math.max(0,this.reconnectDelay_-c);y=Math.random()*y,this.log_("Trying to reconnect in "+y+"ms"),this.scheduleConnect_(y),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var c=this;return(0,E.Z)(function*(){if(c.shouldReconnect_()){c.log_("Making a connection attempt"),c.lastConnectionAttemptTime_=(new Date).getTime(),c.lastConnectionEstablishedTime_=null;const y=c.onDataMessage_.bind(c),x=c.onReady_.bind(c),U=c.onRealtimeDisconnect_.bind(c),J=c.id+":"+f.nextConnectionId_++,xe=c.lastSessionId;let Ye=!1,ot=null;const zt=function(){ot?ot.close():(Ye=!0,U())};c.realtime_={close:zt,sendRequest:function(Zn){(0,L.hu)(ot,"sendRequest call when we're not connected not allowed."),ot.sendRequest(Zn)}};const sn=c.forceTokenRefresh_;c.forceTokenRefresh_=!1;try{const[Zn,vr]=yield Promise.all([c.authTokenProvider_.getToken(sn),c.appCheckTokenProvider_.getToken(sn)]);Ye?st("getToken() completed but was canceled"):(st("getToken() completed. Creating connection."),c.authToken_=Zn&&Zn.accessToken,c.appCheckToken_=vr&&vr.token,ot=new gi(J,c.repoInfo_,c.applicationId_,c.appCheckToken_,c.authToken_,y,x,U,Di=>{Le(Di+" ("+c.repoInfo_.toString()+")"),c.interrupt("server_kill")},xe))}catch(Zn){c.log_("Failed to get token: "+Zn),Ye||(c.repoInfo_.nodeAdmin&&Le(Zn),zt())}}})()}interrupt(c){st("Interrupting connection for reason: "+c),this.interruptReasons_[c]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(c){st("Resuming connection for reason: "+c),delete this.interruptReasons_[c],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=ri,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(c){const y=c-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:y})}cancelSentTransactions_(){for(let c=0;c<this.outstandingPuts_.length;c++){const y=this.outstandingPuts_[c];y&&"h"in y.request&&y.queued&&(y.onComplete&&y.onComplete("disconnect"),delete this.outstandingPuts_[c],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(c,y){let x;x=y?y.map(J=>Nt(J)).join("$"):"default";const U=this.removeListen_(c,x);U&&U.onComplete&&U.onComplete("permission_denied")}removeListen_(c,y){const x=new ar(c).toString();let U;if(this.listens.has(x)){const J=this.listens.get(x);U=J.get(y),J.delete(y),0===J.size&&this.listens.delete(x)}else U=void 0;return U}onAuthRevoked_(c,y){st("Auth token revoked: "+c+"/"+y),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===c||"permission_denied"===c)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(c,y){st("App check token revoked: "+c+"/"+y),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===c||"permission_denied"===c)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(c){this.securityDebugCallback_?this.securityDebugCallback_(c):"msg"in c&&console.log("FIREBASE: "+c.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const c of this.listens.values())for(const y of c.values())this.sendListen_(y);for(let c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){const c=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(c.action,c.pathString,c.data,c.onComplete)}for(let c=0;c<this.outstandingGets_.length;c++)this.outstandingGets_[c]&&this.sendGet_(c)}sendConnectStats_(){const c={};let y="js";(0,L.Yr)()&&(y=this.repoInfo_.nodeAdmin?"admin_node":"node"),c["sdk."+y+"."+oe.replace(/\./g,"-")]=1,(0,L.uI)()?c["framework.cordova"]=1:(0,L.b$)()&&(c["framework.reactnative"]=1),this.reportStats(c)}shouldReconnect_(){const c=xr.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&c}}return f.nextPersistentConnectionId_=0,f.nextConnectionId_=0,f})();class Mr{constructor(d,c){this.name=d,this.node=c}static Wrap(d,c){return new Mr(d,c)}}class Js{getCompare(){return this.compare.bind(this)}indexedValueChanged(d,c){const y=new Mr(pt,d),x=new Mr(pt,c);return 0!==this.compare(y,x)}minPost(){return Mr.MIN}}class ya extends Js{static get __EMPTY_NODE(){return eo}static set __EMPTY_NODE(d){eo=d}compare(d,c){return kt(d.name,c.name)}isDefinedOn(d){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(d,c){return!1}minPost(){return Mr.MIN}maxPost(){return new Mr(xt,eo)}makePost(d,c){return(0,L.hu)("string"==typeof d,"KeyIndex indexValue must always be a string."),new Mr(d,eo)}toString(){return".key"}}const vi=new ya;class ms{constructor(d,c,y,x,U=null){this.isReverse_=x,this.resultGenerator_=U,this.nodeStack_=[];let J=1;for(;!d.isEmpty();)if(J=c?y(d.key,c):1,x&&(J*=-1),J<0)d=this.isReverse_?d.left:d.right;else{if(0===J){this.nodeStack_.push(d);break}this.nodeStack_.push(d),d=this.isReverse_?d.right:d.left}}getNext(){if(0===this.nodeStack_.length)return null;let c,d=this.nodeStack_.pop();if(c=this.resultGenerator_?this.resultGenerator_(d.key,d.value):{key:d.key,value:d.value},this.isReverse_)for(d=d.left;!d.isEmpty();)this.nodeStack_.push(d),d=d.right;else for(d=d.right;!d.isEmpty();)this.nodeStack_.push(d),d=d.left;return c}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const d=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(d.key,d.value):{key:d.key,value:d.value}}}let Xi,Hi=(()=>{class f{constructor(c,y,x,U,J){this.key=c,this.value=y,this.color=null!=x?x:f.RED,this.left=null!=U?U:Ki.EMPTY_NODE,this.right=null!=J?J:Ki.EMPTY_NODE}copy(c,y,x,U,J){return new f(null!=c?c:this.key,null!=y?y:this.value,null!=x?x:this.color,null!=U?U:this.left,null!=J?J:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(c){return this.left.inorderTraversal(c)||!!c(this.key,this.value)||this.right.inorderTraversal(c)}reverseTraversal(c){return this.right.reverseTraversal(c)||c(this.key,this.value)||this.left.reverseTraversal(c)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(c,y,x){let U=this;const J=x(c,U.key);return U=J<0?U.copy(null,null,null,U.left.insert(c,y,x),null):0===J?U.copy(null,y,null,null,null):U.copy(null,null,null,null,U.right.insert(c,y,x)),U.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ki.EMPTY_NODE;let c=this;return!c.left.isRed_()&&!c.left.left.isRed_()&&(c=c.moveRedLeft_()),c=c.copy(null,null,null,c.left.removeMin_(),null),c.fixUp_()}remove(c,y){let x,U;if(x=this,y(c,x.key)<0)!x.left.isEmpty()&&!x.left.isRed_()&&!x.left.left.isRed_()&&(x=x.moveRedLeft_()),x=x.copy(null,null,null,x.left.remove(c,y),null);else{if(x.left.isRed_()&&(x=x.rotateRight_()),!x.right.isEmpty()&&!x.right.isRed_()&&!x.right.left.isRed_()&&(x=x.moveRedRight_()),0===y(c,x.key)){if(x.right.isEmpty())return Ki.EMPTY_NODE;U=x.right.min_(),x=x.copy(U.key,U.value,null,null,x.right.removeMin_())}x=x.copy(null,null,null,null,x.right.remove(c,y))}return x.fixUp_()}isRed_(){return this.color}fixUp_(){let c=this;return c.right.isRed_()&&!c.left.isRed_()&&(c=c.rotateLeft_()),c.left.isRed_()&&c.left.left.isRed_()&&(c=c.rotateRight_()),c.left.isRed_()&&c.right.isRed_()&&(c=c.colorFlip_()),c}moveRedLeft_(){let c=this.colorFlip_();return c.right.left.isRed_()&&(c=c.copy(null,null,null,null,c.right.rotateRight_()),c=c.rotateLeft_(),c=c.colorFlip_()),c}moveRedRight_(){let c=this.colorFlip_();return c.left.left.isRed_()&&(c=c.rotateRight_(),c=c.colorFlip_()),c}rotateLeft_(){const c=this.copy(null,null,f.RED,null,this.right.left);return this.right.copy(null,null,this.color,c,null)}rotateRight_(){const c=this.copy(null,null,f.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,c)}colorFlip_(){const c=this.left.copy(null,null,!this.left.color,null,null),y=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,c,y)}checkMaxDepth_(){const c=this.check_();return Math.pow(2,c)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const c=this.left.check_();if(c!==this.right.check_())throw new Error("Black depths differ");return c+(this.isRed_()?0:1)}}return f.RED=!0,f.BLACK=!1,f})();class Ki{constructor(d,c=Ki.EMPTY_NODE){this.comparator_=d,this.root_=c}insert(d,c){return new Ki(this.comparator_,this.root_.insert(d,c,this.comparator_).copy(null,null,Hi.BLACK,null,null))}remove(d){return new Ki(this.comparator_,this.root_.remove(d,this.comparator_).copy(null,null,Hi.BLACK,null,null))}get(d){let c,y=this.root_;for(;!y.isEmpty();){if(c=this.comparator_(d,y.key),0===c)return y.value;c<0?y=y.left:c>0&&(y=y.right)}return null}getPredecessorKey(d){let c,y=this.root_,x=null;for(;!y.isEmpty();){if(c=this.comparator_(d,y.key),0===c){if(y.left.isEmpty())return x?x.key:null;for(y=y.left;!y.right.isEmpty();)y=y.right;return y.key}c<0?y=y.left:c>0&&(x=y,y=y.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(d){return this.root_.inorderTraversal(d)}reverseTraversal(d){return this.root_.reverseTraversal(d)}getIterator(d){return new ms(this.root_,null,this.comparator_,!1,d)}getIteratorFrom(d,c){return new ms(this.root_,d,this.comparator_,!1,c)}getReverseIteratorFrom(d,c){return new ms(this.root_,d,this.comparator_,!0,c)}getReverseIterator(d){return new ms(this.root_,null,this.comparator_,!0,d)}}function ai(f,d){return kt(f.name,d.name)}function Ls(f,d){return kt(f,d)}Ki.EMPTY_NODE=new class{copy(d,c,y,x,U){return this}insert(d,c,y){return new Hi(d,c,null)}remove(d,c){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(d){return!1}reverseTraversal(d){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const zs=function(f){return"number"==typeof f?"number:"+je(f):"string:"+f},is=function(f){if(f.isLeafNode()){const d=f.val();(0,L.hu)("string"==typeof d||"number"==typeof d||"object"==typeof d&&(0,L.r3)(d,".sv"),"Priority must be a string or number.")}else(0,L.hu)(f===Xi||f.isEmpty(),"priority of unexpected type.");(0,L.hu)(f===Xi||f.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Yo,Ei,Ko,As=(()=>{class f{constructor(c,y=f.__childrenNodeConstructor.EMPTY_NODE){this.value_=c,this.priorityNode_=y,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),is(this.priorityNode_)}static set __childrenNodeConstructor(c){Yo=c}static get __childrenNodeConstructor(){return Yo}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(c){return new f(this.value_,c)}getImmediateChild(c){return".priority"===c?this.priorityNode_:f.__childrenNodeConstructor.EMPTY_NODE}getChild(c){return gt(c)?this:".priority"===mr(c)?this.priorityNode_:f.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(c,y){return null}updateImmediateChild(c,y){return".priority"===c?this.updatePriority(y):y.isEmpty()&&".priority"!==c?this:f.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(c,y).updatePriority(this.priorityNode_)}updateChild(c,y){const x=mr(c);return null===x?y:y.isEmpty()&&".priority"!==x?this:((0,L.hu)(".priority"!==x||1===ht(c),".priority must be the last token in a path"),this.updateImmediateChild(x,f.__childrenNodeConstructor.EMPTY_NODE.updateChild($(c),y)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(c,y){return!1}val(c){return c&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let c="";this.priorityNode_.isEmpty()||(c+="priority:"+zs(this.priorityNode_.val())+":");const y=typeof this.value_;c+=y+":",c+="number"===y?je(this.value_):this.value_,this.lazyHash_=Ke(c)}return this.lazyHash_}getValue(){return this.value_}compareTo(c){return c===f.__childrenNodeConstructor.EMPTY_NODE?1:c instanceof f.__childrenNodeConstructor?-1:((0,L.hu)(c.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(c))}compareToLeafNode_(c){const y=typeof c.value_,x=typeof this.value_,U=f.VALUE_TYPE_ORDER.indexOf(y),J=f.VALUE_TYPE_ORDER.indexOf(x);return(0,L.hu)(U>=0,"Unknown leaf type: "+y),(0,L.hu)(J>=0,"Unknown leaf type: "+x),U===J?"object"===x?0:this.value_<c.value_?-1:this.value_===c.value_?0:1:J-U}withIndex(){return this}isIndexed(){return!0}equals(c){if(c===this)return!0;if(c.isLeafNode()){const y=c;return this.value_===y.value_&&this.priorityNode_.equals(y.priorityNode_)}return!1}}return f.VALUE_TYPE_ORDER=["object","boolean","number","string"],f})();const Dr=new class extends Js{compare(d,c){const y=d.node.getPriority(),x=c.node.getPriority(),U=y.compareTo(x);return 0===U?kt(d.name,c.name):U}isDefinedOn(d){return!d.getPriority().isEmpty()}indexedValueChanged(d,c){return!d.getPriority().equals(c.getPriority())}minPost(){return Mr.MIN}maxPost(){return new Mr(xt,new As("[PRIORITY-POST]",Ko))}makePost(d,c){const y=Ei(d);return new Mr(c,new As("[PRIORITY-POST]",y))}toString(){return".priority"}},qs=Math.log(2);class ro{constructor(d){this.count=parseInt(Math.log(d+1)/qs,10),this.current_=this.count-1;const x=(U=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=d+1&x}nextBitIsOne(){const d=!(this.bits_&1<<this.current_);return this.current_--,d}}const io=function(f,d,c,y){f.sort(d);const x=function(Ye,ot){const zt=ot-Ye;let Xt,sn;if(0===zt)return null;if(1===zt)return Xt=f[Ye],sn=c?c(Xt):Xt,new Hi(sn,Xt.node,Hi.BLACK,null,null);{const Zn=parseInt(zt/2,10)+Ye,vr=x(Ye,Zn),Di=x(Zn+1,ot);return Xt=f[Zn],sn=c?c(Xt):Xt,new Hi(sn,Xt.node,Hi.BLACK,vr,Di)}},xe=function(Ye){let ot=null,zt=null,Xt=f.length;const sn=function(vr,Di){const ko=Xt-vr,cu=Xt;Xt-=vr;const ec=x(ko+1,cu),Qc=f[ko],Ah=c?c(Qc):Qc;Zn(new Hi(Ah,Qc.node,Di,null,ec))},Zn=function(vr){ot?(ot.left=vr,ot=vr):(zt=vr,ot=vr)};for(let vr=0;vr<Ye.count;++vr){const Di=Ye.nextBitIsOne(),ko=Math.pow(2,Ye.count-(vr+1));Di?sn(ko,Hi.BLACK):(sn(ko,Hi.BLACK),sn(ko,Hi.RED))}return zt}(new ro(f.length));return new Ki(y||d,xe)};let Do;const yi={};class Ci{constructor(d,c){this.indexes_=d,this.indexSet_=c}static get Default(){return(0,L.hu)(yi&&Dr,"ChildrenNode.ts has not been loaded"),Do=Do||new Ci({".priority":yi},{".priority":Dr}),Do}get(d){const c=(0,L.DV)(this.indexes_,d);if(!c)throw new Error("No index defined for "+d);return c instanceof Ki?c:null}hasIndex(d){return(0,L.r3)(this.indexSet_,d.toString())}addIndex(d,c){(0,L.hu)(d!==vi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const y=[];let x=!1;const U=c.getIterator(Mr.Wrap);let xe,J=U.getNext();for(;J;)x=x||d.isDefinedOn(J.node),y.push(J),J=U.getNext();xe=x?io(y,d.getCompare()):yi;const Ye=d.toString(),ot=Object.assign({},this.indexSet_);ot[Ye]=d;const zt=Object.assign({},this.indexes_);return zt[Ye]=xe,new Ci(zt,ot)}addToIndexes(d,c){const y=(0,L.UI)(this.indexes_,(x,U)=>{const J=(0,L.DV)(this.indexSet_,U);if((0,L.hu)(J,"Missing index implementation for "+U),x===yi){if(J.isDefinedOn(d.node)){const xe=[],Ye=c.getIterator(Mr.Wrap);let ot=Ye.getNext();for(;ot;)ot.name!==d.name&&xe.push(ot),ot=Ye.getNext();return xe.push(d),io(xe,J.getCompare())}return yi}{const xe=c.get(d.name);let Ye=x;return xe&&(Ye=Ye.remove(new Mr(d.name,xe))),Ye.insert(d,d.node)}});return new Ci(y,this.indexSet_)}removeFromIndexes(d,c){const y=(0,L.UI)(this.indexes_,x=>{if(x===yi)return x;{const U=c.get(d.name);return U?x.remove(new Mr(d.name,U)):x}});return new Ci(y,this.indexSet_)}}let G,le=(()=>{class f{constructor(c,y,x){this.children_=c,this.priorityNode_=y,this.indexMap_=x,this.lazyHash_=null,this.priorityNode_&&is(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return G||(G=new f(new Ki(Ls),null,Ci.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||G}updatePriority(c){return this.children_.isEmpty()?this:new f(this.children_,c,this.indexMap_)}getImmediateChild(c){if(".priority"===c)return this.getPriority();{const y=this.children_.get(c);return null===y?G:y}}getChild(c){const y=mr(c);return null===y?this:this.getImmediateChild(y).getChild($(c))}hasChild(c){return null!==this.children_.get(c)}updateImmediateChild(c,y){if((0,L.hu)(y,"We should always be passing snapshot nodes"),".priority"===c)return this.updatePriority(y);{const x=new Mr(c,y);let U,J;y.isEmpty()?(U=this.children_.remove(c),J=this.indexMap_.removeFromIndexes(x,this.children_)):(U=this.children_.insert(c,y),J=this.indexMap_.addToIndexes(x,this.children_));const xe=U.isEmpty()?G:this.priorityNode_;return new f(U,xe,J)}}updateChild(c,y){const x=mr(c);if(null===x)return y;{(0,L.hu)(".priority"!==mr(c)||1===ht(c),".priority must be the last token in a path");const U=this.getImmediateChild(x).updateChild($(c),y);return this.updateImmediateChild(x,U)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(c){if(this.isEmpty())return null;const y={};let x=0,U=0,J=!0;if(this.forEachChild(Dr,(xe,Ye)=>{y[xe]=Ye.val(c),x++,J&&f.INTEGER_REGEXP_.test(xe)?U=Math.max(U,Number(xe)):J=!1}),!c&&J&&U<2*x){const xe=[];for(const Ye in y)xe[Ye]=y[Ye];return xe}return c&&!this.getPriority().isEmpty()&&(y[".priority"]=this.getPriority().val()),y}hash(){if(null===this.lazyHash_){let c="";this.getPriority().isEmpty()||(c+="priority:"+zs(this.getPriority().val())+":"),this.forEachChild(Dr,(y,x)=>{const U=x.hash();""!==U&&(c+=":"+y+":"+U)}),this.lazyHash_=""===c?"":Ke(c)}return this.lazyHash_}getPredecessorChildName(c,y,x){const U=this.resolveIndex_(x);if(U){const J=U.getPredecessorKey(new Mr(c,y));return J?J.name:null}return this.children_.getPredecessorKey(c)}getFirstChildName(c){const y=this.resolveIndex_(c);if(y){const x=y.minKey();return x&&x.name}return this.children_.minKey()}getFirstChild(c){const y=this.getFirstChildName(c);return y?new Mr(y,this.children_.get(y)):null}getLastChildName(c){const y=this.resolveIndex_(c);if(y){const x=y.maxKey();return x&&x.name}return this.children_.maxKey()}getLastChild(c){const y=this.getLastChildName(c);return y?new Mr(y,this.children_.get(y)):null}forEachChild(c,y){const x=this.resolveIndex_(c);return x?x.inorderTraversal(U=>y(U.name,U.node)):this.children_.inorderTraversal(y)}getIterator(c){return this.getIteratorFrom(c.minPost(),c)}getIteratorFrom(c,y){const x=this.resolveIndex_(y);if(x)return x.getIteratorFrom(c,U=>U);{const U=this.children_.getIteratorFrom(c.name,Mr.Wrap);let J=U.peek();for(;null!=J&&y.compare(J,c)<0;)U.getNext(),J=U.peek();return U}}getReverseIterator(c){return this.getReverseIteratorFrom(c.maxPost(),c)}getReverseIteratorFrom(c,y){const x=this.resolveIndex_(y);if(x)return x.getReverseIteratorFrom(c,U=>U);{const U=this.children_.getReverseIteratorFrom(c.name,Mr.Wrap);let J=U.peek();for(;null!=J&&y.compare(J,c)>0;)U.getNext(),J=U.peek();return U}}compareTo(c){return this.isEmpty()?c.isEmpty()?0:-1:c.isLeafNode()||c.isEmpty()?1:c===De?-1:0}withIndex(c){if(c===vi||this.indexMap_.hasIndex(c))return this;{const y=this.indexMap_.addIndex(c,this.children_);return new f(this.children_,this.priorityNode_,y)}}isIndexed(c){return c===vi||this.indexMap_.hasIndex(c)}equals(c){if(c===this)return!0;if(c.isLeafNode())return!1;{const y=c;if(this.getPriority().equals(y.getPriority())){if(this.children_.count()===y.children_.count()){const x=this.getIterator(Dr),U=y.getIterator(Dr);let J=x.getNext(),xe=U.getNext();for(;J&&xe;){if(J.name!==xe.name||!J.node.equals(xe.node))return!1;J=x.getNext(),xe=U.getNext()}return null===J&&null===xe}return!1}return!1}}resolveIndex_(c){return c===vi?null:this.indexMap_.get(c.toString())}}return f.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,f})();const De=new class extends le{constructor(){super(new Ki(Ls),le.EMPTY_NODE,Ci.Default)}compareTo(d){return d===this?0:1}equals(d){return d===this}getPriority(){return this}getImmediateChild(d){return le.EMPTY_NODE}isEmpty(){return!1}};function Ct(f,d=null){if(null===f)return le.EMPTY_NODE;if("object"==typeof f&&".priority"in f&&(d=f[".priority"]),(0,L.hu)(null===d||"string"==typeof d||"number"==typeof d||"object"==typeof d&&".sv"in d,"Invalid priority type found: "+typeof d),"object"==typeof f&&".value"in f&&null!==f[".value"]&&(f=f[".value"]),"object"!=typeof f||".sv"in f)return new As(f,Ct(d));if(f instanceof Array){let c=le.EMPTY_NODE;return tt(f,(y,x)=>{if((0,L.r3)(f,y)&&"."!==y.substring(0,1)){const U=Ct(x);(U.isLeafNode()||!U.isEmpty())&&(c=c.updateImmediateChild(y,U))}}),c.updatePriority(Ct(d))}{const c=[];let y=!1;if(tt(f,(J,xe)=>{if("."!==J.substring(0,1)){const Ye=Ct(xe);Ye.isEmpty()||(y=y||!Ye.getPriority().isEmpty(),c.push(new Mr(J,Ye)))}}),0===c.length)return le.EMPTY_NODE;const U=io(c,ai,J=>J.name,Ls);if(y){const J=io(c,Dr.getCompare());return new le(U,Ct(d),new Ci({".priority":J},{".priority":Dr}))}return new le(U,Ct(d),Ci.Default)}}Object.defineProperties(Mr,{MIN:{value:new Mr(pt,le.EMPTY_NODE)},MAX:{value:new Mr(xt,De)}}),ya.__EMPTY_NODE=le.EMPTY_NODE,As.__childrenNodeConstructor=le,Xi=De,Ko=De,function(f){Ei=f}(Ct);class ln extends Js{constructor(d){super(),this.indexPath_=d,(0,L.hu)(!gt(d)&&".priority"!==mr(d),"Can't create PathIndex with empty path or .priority key")}extractChild(d){return d.getChild(this.indexPath_)}isDefinedOn(d){return!d.getChild(this.indexPath_).isEmpty()}compare(d,c){const y=this.extractChild(d.node),x=this.extractChild(c.node),U=y.compareTo(x);return 0===U?kt(d.name,c.name):U}makePost(d,c){const y=Ct(d),x=le.EMPTY_NODE.updateChild(this.indexPath_,y);return new Mr(c,x)}maxPost(){const d=le.EMPTY_NODE.updateChild(this.indexPath_,De);return new Mr(xt,d)}toString(){return Ce(this.indexPath_,0).join("/")}}const B=new class extends Js{compare(d,c){const y=d.node.compareTo(c.node);return 0===y?kt(d.name,c.name):y}isDefinedOn(d){return!0}indexedValueChanged(d,c){return!d.equals(c)}minPost(){return Mr.MIN}maxPost(){return Mr.MAX}makePost(d,c){const y=Ct(d);return new Mr(c,y)}toString(){return".value"}},P="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",cr=function(){let f=0;const d=[];return function(c){const y=c===f;let x;f=c;const U=new Array(8);for(x=7;x>=0;x--)U[x]=P.charAt(c%64),c=Math.floor(c/64);(0,L.hu)(0===c,"Cannot push at time == 0");let J=U.join("");if(y){for(x=11;x>=0&&63===d[x];x--)d[x]=0;d[x]++}else for(x=0;x<12;x++)d[x]=Math.floor(64*Math.random());for(x=0;x<12;x++)J+=P.charAt(d[x]);return(0,L.hu)(20===J.length,"nextPushId: Length should be 20."),J}}(),Qr=function(f){if(f===""+wn)return"-";const d=Hn(f);if(null!=d)return""+(d+1);const c=new Array(f.length);for(let J=0;J<c.length;J++)c[J]=f.charAt(J);if(c.length<786)return c.push("-"),c.join("");let y=c.length-1;for(;y>=0&&"z"===c[y];)y--;if(-1===y)return xt;const U=P.charAt(P.indexOf(c[y])+1);return c[y]=U,c.slice(0,y+1).join("")},Vi=function(f){if(f===""+Bt)return pt;const d=Hn(f);if(null!=d)return""+(d-1);const c=new Array(f.length);for(let y=0;y<c.length;y++)c[y]=f.charAt(y);return"-"===c[c.length-1]?1===c.length?""+wn:(delete c[c.length-1],c.join("")):(c[c.length-1]=P.charAt(P.indexOf(c[c.length-1])-1),c.join("")+"z".repeat(786-c.length))};function mi(f){return{type:"value",snapshotNode:f}}function ii(f,d){return{type:"child_added",snapshotNode:d,childName:f}}function Wr(f,d){return{type:"child_removed",snapshotNode:d,childName:f}}function rr(f,d,c){return{type:"child_changed",snapshotNode:d,childName:f,oldSnap:c}}class yo{constructor(d){this.index_=d}updateChild(d,c,y,x,U,J){(0,L.hu)(d.isIndexed(this.index_),"A node must be indexed if only a child is updated");const xe=d.getImmediateChild(c);return xe.getChild(x).equals(y.getChild(x))&&xe.isEmpty()===y.isEmpty()||(null!=J&&(y.isEmpty()?d.hasChild(c)?J.trackChildChange(Wr(c,xe)):(0,L.hu)(d.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):xe.isEmpty()?J.trackChildChange(ii(c,y)):J.trackChildChange(rr(c,y,xe))),d.isLeafNode()&&y.isEmpty())?d:d.updateImmediateChild(c,y).withIndex(this.index_)}updateFullNode(d,c,y){return null!=y&&(d.isLeafNode()||d.forEachChild(Dr,(x,U)=>{c.hasChild(x)||y.trackChildChange(Wr(x,U))}),c.isLeafNode()||c.forEachChild(Dr,(x,U)=>{if(d.hasChild(x)){const J=d.getImmediateChild(x);J.equals(U)||y.trackChildChange(rr(x,U,J))}else y.trackChildChange(ii(x,U))})),c.withIndex(this.index_)}updatePriority(d,c){return d.isEmpty()?le.EMPTY_NODE:d.updatePriority(c)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class $o{constructor(d){this.indexedFilter_=new yo(d.getIndex()),this.index_=d.getIndex(),this.startPost_=$o.getStartPost_(d),this.endPost_=$o.getEndPost_(d)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(d){return this.index_.compare(this.getStartPost(),d)<=0&&this.index_.compare(d,this.getEndPost())<=0}updateChild(d,c,y,x,U,J){return this.matches(new Mr(c,y))||(y=le.EMPTY_NODE),this.indexedFilter_.updateChild(d,c,y,x,U,J)}updateFullNode(d,c,y){c.isLeafNode()&&(c=le.EMPTY_NODE);let x=c.withIndex(this.index_);x=x.updatePriority(le.EMPTY_NODE);const U=this;return c.forEachChild(Dr,(J,xe)=>{U.matches(new Mr(J,xe))||(x=x.updateImmediateChild(J,le.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(d,x,y)}updatePriority(d,c){return d}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(d){if(d.hasStart()){const c=d.getIndexStartName();return d.getIndex().makePost(d.getIndexStartValue(),c)}return d.getIndex().minPost()}static getEndPost_(d){if(d.hasEnd()){const c=d.getIndexEndName();return d.getIndex().makePost(d.getIndexEndValue(),c)}return d.getIndex().maxPost()}}class Ma{constructor(d){this.rangedFilter_=new $o(d),this.index_=d.getIndex(),this.limit_=d.getLimit(),this.reverse_=!d.isViewFromLeft()}updateChild(d,c,y,x,U,J){return this.rangedFilter_.matches(new Mr(c,y))||(y=le.EMPTY_NODE),d.getImmediateChild(c).equals(y)?d:d.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(d,c,y,x,U,J):this.fullLimitUpdateChild_(d,c,y,U,J)}updateFullNode(d,c,y){let x;if(c.isLeafNode()||c.isEmpty())x=le.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<c.numChildren()&&c.isIndexed(this.index_)){let U;x=le.EMPTY_NODE.withIndex(this.index_),U=this.reverse_?c.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let J=0;for(;U.hasNext()&&J<this.limit_;){const xe=U.getNext();let Ye;if(Ye=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),xe)<=0:this.index_.compare(xe,this.rangedFilter_.getEndPost())<=0,!Ye)break;x=x.updateImmediateChild(xe.name,xe.node),J++}}else{let U,J,xe,Ye;if(x=c.withIndex(this.index_),x=x.updatePriority(le.EMPTY_NODE),this.reverse_){Ye=x.getReverseIterator(this.index_),U=this.rangedFilter_.getEndPost(),J=this.rangedFilter_.getStartPost();const Xt=this.index_.getCompare();xe=(sn,Zn)=>Xt(Zn,sn)}else Ye=x.getIterator(this.index_),U=this.rangedFilter_.getStartPost(),J=this.rangedFilter_.getEndPost(),xe=this.index_.getCompare();let ot=0,zt=!1;for(;Ye.hasNext();){const Xt=Ye.getNext();!zt&&xe(U,Xt)<=0&&(zt=!0),zt&&ot<this.limit_&&xe(Xt,J)<=0?ot++:x=x.updateImmediateChild(Xt.name,le.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(d,x,y)}updatePriority(d,c){return d}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(d,c,y,x,U){let J;if(this.reverse_){const Xt=this.index_.getCompare();J=(sn,Zn)=>Xt(Zn,sn)}else J=this.index_.getCompare();const xe=d;(0,L.hu)(xe.numChildren()===this.limit_,"");const Ye=new Mr(c,y),ot=this.reverse_?xe.getFirstChild(this.index_):xe.getLastChild(this.index_),zt=this.rangedFilter_.matches(Ye);if(xe.hasChild(c)){const Xt=xe.getImmediateChild(c);let sn=x.getChildAfterChild(this.index_,ot,this.reverse_);for(;null!=sn&&(sn.name===c||xe.hasChild(sn.name));)sn=x.getChildAfterChild(this.index_,sn,this.reverse_);const Zn=null==sn?1:J(sn,Ye);if(zt&&!y.isEmpty()&&Zn>=0)return null!=U&&U.trackChildChange(rr(c,y,Xt)),xe.updateImmediateChild(c,y);{null!=U&&U.trackChildChange(Wr(c,Xt));const Di=xe.updateImmediateChild(c,le.EMPTY_NODE);return null!=sn&&this.rangedFilter_.matches(sn)?(null!=U&&U.trackChildChange(ii(sn.name,sn.node)),Di.updateImmediateChild(sn.name,sn.node)):Di}}return y.isEmpty()?d:zt&&J(ot,Ye)>=0?(null!=U&&(U.trackChildChange(Wr(ot.name,ot.node)),U.trackChildChange(ii(c,y))),xe.updateImmediateChild(c,y).updateImmediateChild(ot.name,le.EMPTY_NODE)):d}}class To{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Dr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:pt}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:xt}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Dr}copy(){const d=new To;return d.limitSet_=this.limitSet_,d.limit_=this.limit_,d.startSet_=this.startSet_,d.indexStartValue_=this.indexStartValue_,d.startNameSet_=this.startNameSet_,d.indexStartName_=this.indexStartName_,d.endSet_=this.endSet_,d.indexEndValue_=this.indexEndValue_,d.endNameSet_=this.endNameSet_,d.indexEndName_=this.indexEndName_,d.index_=this.index_,d.viewFrom_=this.viewFrom_,d}}function br(f,d,c){const y=f.copy();return y.startSet_=!0,void 0===d&&(d=null),y.indexStartValue_=d,null!=c?(y.startNameSet_=!0,y.indexStartName_=c):(y.startNameSet_=!1,y.indexStartName_=""),y}function Ti(f,d,c){const y=f.copy();return y.endSet_=!0,void 0===d&&(d=null),y.indexEndValue_=d,void 0!==c?(y.endNameSet_=!0,y.indexEndName_=c):(y.endNameSet_=!1,y.indexEndName_=""),y}function ss(f,d){const c=f.copy();return c.index_=d,c}function ys(f){const d={};if(f.isDefault())return d;let c;return f.index_===Dr?c="$priority":f.index_===B?c="$value":f.index_===vi?c="$key":((0,L.hu)(f.index_ instanceof ln,"Unrecognized index type!"),c=f.index_.toString()),d.orderBy=(0,L.Wl)(c),f.startSet_&&(d.startAt=(0,L.Wl)(f.indexStartValue_),f.startNameSet_&&(d.startAt+=","+(0,L.Wl)(f.indexStartName_))),f.endSet_&&(d.endAt=(0,L.Wl)(f.indexEndValue_),f.endNameSet_&&(d.endAt+=","+(0,L.Wl)(f.indexEndName_))),f.limitSet_&&(f.isViewFromLeft()?d.limitToFirst=f.limit_:d.limitToLast=f.limit_),d}function Vs(f){const d={};if(f.startSet_&&(d.sp=f.indexStartValue_,f.startNameSet_&&(d.sn=f.indexStartName_)),f.endSet_&&(d.ep=f.indexEndValue_,f.endNameSet_&&(d.en=f.indexEndName_)),f.limitSet_){d.l=f.limit_;let c=f.viewFrom_;""===c&&(c=f.isViewFromLeft()?"l":"r"),d.vf=c}return f.index_!==Dr&&(d.i=f.index_.toString()),d}class Bs extends Zr{constructor(d,c,y,x){super(),this.repoInfo_=d,this.onDataUpdate_=c,this.authTokenProvider_=y,this.appCheckTokenProvider_=x,this.log_=It("p:rest:"),this.listens_={}}reportStats(d){throw new Error("Method not implemented.")}static getListenId_(d,c){return void 0!==c?"tag$"+c:((0,L.hu)(d._queryParams.isDefault(),"should have a tag if it's not a default query."),d._path.toString())}listen(d,c,y,x){const U=d._path.toString();this.log_("Listen called for "+U+" "+d._queryIdentifier);const J=Bs.getListenId_(d,y),xe={};this.listens_[J]=xe;const Ye=ys(d._queryParams);this.restRequest_(U+".json",Ye,(ot,zt)=>{let Xt=zt;if(404===ot&&(Xt=null,ot=null),null===ot&&this.onDataUpdate_(U,Xt,!1,y),(0,L.DV)(this.listens_,J)===xe){let sn;sn=ot?401===ot?"permission_denied":"rest_error:"+ot:"ok",x(sn,null)}})}unlisten(d,c){const y=Bs.getListenId_(d,c);delete this.listens_[y]}get(d){const c=ys(d._queryParams),y=d._path.toString(),x=new L.BH;return this.restRequest_(y+".json",c,(U,J)=>{let xe=J;404===U&&(xe=null,U=null),null===U?(this.onDataUpdate_(y,xe,!1,null),x.resolve(xe)):x.reject(new Error(xe))}),x.promise}refreshAuthToken(d){}restRequest_(d,c={},y){return c.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([x,U])=>{x&&x.accessToken&&(c.auth=x.accessToken),U&&U.token&&(c.ac=U.token);const J=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+d+"?ns="+this.repoInfo_.namespace+(0,L.xO)(c);this.log_("Sending REST request for "+J);const xe=new XMLHttpRequest;xe.onreadystatechange=()=>{if(y&&4===xe.readyState){this.log_("REST Response for "+J+" received. status:",xe.status,"response:",xe.responseText);let Ye=null;if(xe.status>=200&&xe.status<300){try{Ye=(0,L.cI)(xe.responseText)}catch(ot){Le("Failed to parse JSON response for "+J+": "+xe.responseText)}y(null,Ye)}else 401!==xe.status&&404!==xe.status&&Le("Got unsuccessful REST response for "+J+" Status: "+xe.status),y(xe.status);y=null}},xe.open("GET",J,!0),xe.send()})}}class ja{constructor(){this.rootNode_=le.EMPTY_NODE}getNode(d){return this.rootNode_.getChild(d)}updateSnapshot(d,c){this.rootNode_=this.rootNode_.updateChild(d,c)}}function _s(){return{value:null,children:new Map}}function Os(f,d,c){if(gt(d))f.value=c,f.children.clear();else if(null!==f.value)f.value=f.value.updateChild(d,c);else{const y=mr(d);f.children.has(y)||f.children.set(y,_s()),Os(f.children.get(y),d=$(d),c)}}function $s(f,d){if(gt(d))return f.value=null,f.children.clear(),!0;if(null!==f.value){if(f.value.isLeafNode())return!1;{const c=f.value;return f.value=null,c.forEachChild(Dr,(y,x)=>{Os(f,new ar(y),x)}),$s(f,d)}}if(f.children.size>0){const c=mr(d);return d=$(d),f.children.has(c)&&$s(f.children.get(c),d)&&f.children.delete(c),0===f.children.size}return!0}function Bi(f,d,c){null!==f.value?c(d,f.value):function(f,d){f.children.forEach((c,y)=>{d(y,c)})}(f,(y,x)=>{Bi(x,new ar(d.toString()+"/"+y),c)})}class _a{constructor(d){this.collection_=d,this.last_=null}get(){const d=this.collection_.get(),c=Object.assign({},d);return this.last_&&tt(this.last_,(y,x)=>{c[y]=c[y]-x}),this.last_=d,c}}class os{constructor(d,c){this.server_=c,this.statsToReport_={},this.statsListener_=new _a(d);const y=1e4+2e4*Math.random();Wn(this.reportStats_.bind(this),Math.floor(y))}reportStats_(){const d=this.statsListener_.get(),c={};let y=!1;tt(d,(x,U)=>{U>0&&(0,L.r3)(this.statsToReport_,x)&&(c[x]=U,y=!0)}),y&&this.server_.reportStats(c),Wn(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var $i=(()=>(function(f){f[f.OVERWRITE=0]="OVERWRITE",f[f.MERGE=1]="MERGE",f[f.ACK_USER_WRITE=2]="ACK_USER_WRITE",f[f.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}($i||($i={})),$i))();function so(f){return{fromUser:!1,fromServer:!0,queryId:f,tagged:!0}}class hs{constructor(d,c,y){this.path=d,this.affectedTree=c,this.revert=y,this.type=$i.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(d){if(gt(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const c=this.affectedTree.subtree(new ar(d));return new hs(Vn(),c,this.revert)}}return(0,L.hu)(mr(this.path)===d,"operationForChild called for unrelated child."),new hs($(this.path),this.affectedTree,this.revert)}}class Ji{constructor(d,c){this.source=d,this.path=c,this.type=$i.LISTEN_COMPLETE}operationForChild(d){return gt(this.path)?new Ji(this.source,Vn()):new Ji(this.source,$(this.path))}}class js{constructor(d,c,y){this.source=d,this.path=c,this.snap=y,this.type=$i.OVERWRITE}operationForChild(d){return gt(this.path)?new js(this.source,Vn(),this.snap.getImmediateChild(d)):new js(this.source,$(this.path),this.snap)}}class oo{constructor(d,c,y){this.source=d,this.path=c,this.children=y,this.type=$i.MERGE}operationForChild(d){if(gt(this.path)){const c=this.children.subtree(new ar(d));return c.isEmpty()?null:c.value?new js(this.source,Vn(),c.value):new oo(this.source,Vn(),c)}return(0,L.hu)(mr(this.path)===d,"Can't get a merge for a child not on the path of the operation"),new oo(this.source,$(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class li{constructor(d,c,y){this.node_=d,this.fullyInitialized_=c,this.filtered_=y}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(d){if(gt(d))return this.isFullyInitialized()&&!this.filtered_;const c=mr(d);return this.isCompleteForChild(c)}isCompleteForChild(d){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(d)}getNode(){return this.node_}}class vs{constructor(d){this.query_=d,this.index_=this.query_._queryParams.getIndex()}}function Ds(f,d,c,y,x,U){const J=y.filter(xe=>xe.type===c);J.sort((xe,Ye)=>function(f,d,c){if(null==d.childName||null==c.childName)throw(0,L.g5)("Should only compare child_ events.");const y=new Mr(d.childName,d.snapshotNode),x=new Mr(c.childName,c.snapshotNode);return f.index_.compare(y,x)}(f,xe,Ye)),J.forEach(xe=>{const Ye=function(f,d,c){return"value"===d.type||"child_removed"===d.type||(d.prevName=c.getPredecessorChildName(d.childName,d.snapshotNode,f.index_)),d}(f,xe,U);x.forEach(ot=>{ot.respondsTo(xe.type)&&d.push(ot.createEvent(Ye,f.query_))})})}function Ai(f,d){return{eventCache:f,serverCache:d}}function I(f,d,c,y){return Ai(new li(d,c,y),f.serverCache)}function N(f,d,c,y){return Ai(f.eventCache,new li(d,c,y))}function w(f){return f.eventCache.isFullyInitialized()?f.eventCache.getNode():null}function Y(f){return f.serverCache.isFullyInitialized()?f.serverCache.getNode():null}let pe;class jt{constructor(d,c=(()=>(pe||(pe=new Ki(xn)),pe))()){this.value=d,this.children=c}static fromObject(d){let c=new jt(null);return tt(d,(y,x)=>{c=c.set(new ar(y),x)}),c}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(d,c){if(null!=this.value&&c(this.value))return{path:Vn(),value:this.value};if(gt(d))return null;{const y=mr(d),x=this.children.get(y);if(null!==x){const U=x.findRootMostMatchingPathAndValue($(d),c);return null!=U?{path:ze(new ar(y),U.path),value:U.value}:null}return null}}findRootMostValueAndPath(d){return this.findRootMostMatchingPathAndValue(d,()=>!0)}subtree(d){if(gt(d))return this;{const c=mr(d),y=this.children.get(c);return null!==y?y.subtree($(d)):new jt(null)}}set(d,c){if(gt(d))return new jt(c,this.children);{const y=mr(d),U=(this.children.get(y)||new jt(null)).set($(d),c),J=this.children.insert(y,U);return new jt(this.value,J)}}remove(d){if(gt(d))return this.children.isEmpty()?new jt(null):new jt(null,this.children);{const c=mr(d),y=this.children.get(c);if(y){const x=y.remove($(d));let U;return U=x.isEmpty()?this.children.remove(c):this.children.insert(c,x),null===this.value&&U.isEmpty()?new jt(null):new jt(this.value,U)}return this}}get(d){if(gt(d))return this.value;{const c=mr(d),y=this.children.get(c);return y?y.get($(d)):null}}setTree(d,c){if(gt(d))return c;{const y=mr(d),U=(this.children.get(y)||new jt(null)).setTree($(d),c);let J;return J=U.isEmpty()?this.children.remove(y):this.children.insert(y,U),new jt(this.value,J)}}fold(d){return this.fold_(Vn(),d)}fold_(d,c){const y={};return this.children.inorderTraversal((x,U)=>{y[x]=U.fold_(ze(d,x),c)}),c(d,this.value,y)}findOnPath(d,c){return this.findOnPath_(d,Vn(),c)}findOnPath_(d,c,y){const x=!!this.value&&y(c,this.value);if(x)return x;if(gt(d))return null;{const U=mr(d),J=this.children.get(U);return J?J.findOnPath_($(d),ze(c,U),y):null}}foreachOnPath(d,c){return this.foreachOnPath_(d,Vn(),c)}foreachOnPath_(d,c,y){if(gt(d))return this;{this.value&&y(c,this.value);const x=mr(d),U=this.children.get(x);return U?U.foreachOnPath_($(d),ze(c,x),y):new jt(null)}}foreach(d){this.foreach_(Vn(),d)}foreach_(d,c){this.children.inorderTraversal((y,x)=>{x.foreach_(ze(d,y),c)}),this.value&&c(d,this.value)}foreachChild(d){this.children.inorderTraversal((c,y)=>{y.value&&d(c,y.value)})}}class fn{constructor(d){this.writeTree_=d}static empty(){return new fn(new jt(null))}}function lr(f,d,c){if(gt(d))return new fn(new jt(c));{const y=f.writeTree_.findRootMostValueAndPath(d);if(null!=y){const x=y.path;let U=y.value;const J=bt(x,d);return U=U.updateChild(J,c),new fn(f.writeTree_.set(x,U))}{const x=new jt(c),U=f.writeTree_.setTree(d,x);return new fn(U)}}}function Nn(f,d,c){let y=f;return tt(c,(x,U)=>{y=lr(y,ze(d,x),U)}),y}function Vr(f,d){if(gt(d))return fn.empty();{const c=f.writeTree_.setTree(d,new jt(null));return new fn(c)}}function ui(f,d){return null!=qt(f,d)}function qt(f,d){const c=f.writeTree_.findRootMostValueAndPath(d);return null!=c?f.writeTree_.get(c.path).getChild(bt(c.path,d)):null}function dr(f){const d=[],c=f.writeTree_.value;return null!=c?c.isLeafNode()||c.forEachChild(Dr,(y,x)=>{d.push(new Mr(y,x))}):f.writeTree_.children.inorderTraversal((y,x)=>{null!=x.value&&d.push(new Mr(y,x.value))}),d}function Ii(f,d){if(gt(d))return f;{const c=qt(f,d);return new fn(null!=c?new jt(c):f.writeTree_.subtree(d))}}function es(f){return f.writeTree_.isEmpty()}function Bn(f,d){return Kn(Vn(),f.writeTree_,d)}function Kn(f,d,c){if(null!=d.value)return c.updateChild(f,d.value);{let y=null;return d.children.inorderTraversal((x,U)=>{".priority"===x?((0,L.hu)(null!==U.value,"Priority writes must always be leaf nodes"),y=U.value):c=Kn(ze(f,x),U,c)}),!c.getChild(f).isEmpty()&&null!==y&&(c=c.updateChild(ze(f,".priority"),y)),c}}function Uo(f,d){return ke(d,f)}function Il(f,d){if(f.snap)return Sn(f.path,d);for(const c in f.children)if(f.children.hasOwnProperty(c)&&Sn(ze(f.path,c),d))return!0;return!1}function lo(f){return f.visible}function Ea(f,d,c){let y=fn.empty();for(let x=0;x<f.length;++x){const U=f[x];if(d(U)){const J=U.path;let xe;if(U.snap)Sn(c,J)?(xe=bt(c,J),y=lr(y,xe,U.snap)):Sn(J,c)&&(xe=bt(J,c),y=lr(y,Vn(),U.snap.getChild(xe)));else{if(!U.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(Sn(c,J))xe=bt(c,J),y=Nn(y,xe,U.children);else if(Sn(J,c))if(xe=bt(J,c),gt(xe))y=Nn(y,Vn(),U.children);else{const Ye=(0,L.DV)(U.children,mr(xe));if(Ye){const ot=Ye.getChild($(xe));y=lr(y,Vn(),ot)}}}}}return y}function Ha(f,d,c,y,x){if(y||x){const U=Ii(f.visibleWrites,d);return!x&&es(U)?c:x||null!=c||ui(U,Vn())?Bn(Ea(f.allWrites,function(ot){return(ot.visible||x)&&(!y||!~y.indexOf(ot.writeId))&&(Sn(ot.path,d)||Sn(d,ot.path))},d),c||le.EMPTY_NODE):null}{const U=qt(f.visibleWrites,d);if(null!=U)return U;{const J=Ii(f.visibleWrites,d);return es(J)?c:null!=c||ui(J,Vn())?Bn(J,c||le.EMPTY_NODE):null}}}function fr(f,d,c,y){return Ha(f.writeTree,f.treePath,d,c,y)}function uo(f,d){return function(f,d,c){let y=le.EMPTY_NODE;const x=qt(f.visibleWrites,d);if(x)return x.isLeafNode()||x.forEachChild(Dr,(U,J)=>{y=y.updateImmediateChild(U,J)}),y;if(c){const U=Ii(f.visibleWrites,d);return c.forEachChild(Dr,(J,xe)=>{const Ye=Bn(Ii(U,new ar(J)),xe);y=y.updateImmediateChild(J,Ye)}),dr(U).forEach(J=>{y=y.updateImmediateChild(J.name,J.node)}),y}return dr(Ii(f.visibleWrites,d)).forEach(J=>{y=y.updateImmediateChild(J.name,J.node)}),y}(f.writeTree,f.treePath,d)}function Zs(f,d,c,y){return function(f,d,c,y,x){(0,L.hu)(y||x,"Either existingEventSnap or existingServerSnap must exist");const U=ze(d,c);if(ui(f.visibleWrites,U))return null;{const J=Ii(f.visibleWrites,U);return es(J)?x.getChild(c):Bn(J,x.getChild(c))}}(f.writeTree,f.treePath,d,c,y)}function bi(f,d){return function(f,d){return qt(f.visibleWrites,d)}(f.writeTree,ze(f.treePath,d))}function z(f,d,c){return function(f,d,c,y){const x=ze(d,c),U=qt(f.visibleWrites,x);return null!=U?U:y.isCompleteForChild(c)?Bn(Ii(f.visibleWrites,x),y.getNode().getImmediateChild(c)):null}(f.writeTree,f.treePath,d,c)}function K(f,d){return ke(ze(f.treePath,d),f.writeTree)}function ke(f,d){return{treePath:f,writeTree:d}}class ut{constructor(){this.changeMap=new Map}trackChildChange(d){const c=d.type,y=d.childName;(0,L.hu)("child_added"===c||"child_changed"===c||"child_removed"===c,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==y,"Only non-priority child changes can be tracked.");const x=this.changeMap.get(y);if(x){const U=x.type;if("child_added"===c&&"child_removed"===U)this.changeMap.set(y,rr(y,d.snapshotNode,x.snapshotNode));else if("child_removed"===c&&"child_added"===U)this.changeMap.delete(y);else if("child_removed"===c&&"child_changed"===U)this.changeMap.set(y,Wr(y,x.oldSnap));else if("child_changed"===c&&"child_added"===U)this.changeMap.set(y,ii(y,d.snapshotNode));else{if("child_changed"!==c||"child_changed"!==U)throw(0,L.g5)("Illegal combination of changes: "+d+" occurred after "+x);this.changeMap.set(y,rr(y,d.snapshotNode,x.oldSnap))}}else this.changeMap.set(y,d)}getChanges(){return Array.from(this.changeMap.values())}}const ir=new class{getCompleteChild(d){return null}getChildAfterChild(d,c,y){return null}};class Br{constructor(d,c,y=null){this.writes_=d,this.viewCache_=c,this.optCompleteServerCache_=y}getCompleteChild(d){const c=this.viewCache_.eventCache;if(c.isCompleteForChild(d))return c.getNode().getImmediateChild(d);{const y=null!=this.optCompleteServerCache_?new li(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return z(this.writes_,d,y)}}getChildAfterChild(d,c,y){const x=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Y(this.viewCache_),U=function(f,d,c,y,x,U){return function(f,d,c,y,x,U,J){let xe;const Ye=Ii(f.visibleWrites,d),ot=qt(Ye,Vn());if(null!=ot)xe=ot;else{if(null==c)return[];xe=Bn(Ye,c)}if(xe=xe.withIndex(J),xe.isEmpty()||xe.isLeafNode())return[];{const zt=[],Xt=J.getCompare(),sn=U?xe.getReverseIteratorFrom(y,J):xe.getIteratorFrom(y,J);let Zn=sn.getNext();for(;Zn&&zt.length<x;)0!==Xt(Zn,y)&&zt.push(Zn),Zn=sn.getNext();return zt}}(f.writeTree,f.treePath,d,c,y,x,U)}(this.writes_,x,c,1,y,d);return 0===U.length?null:U[0]}}function Xo(f,d,c,y,x,U){const J=d.eventCache;if(null!=bi(y,c))return d;{let xe,Ye;if(gt(c))if((0,L.hu)(d.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),d.serverCache.isFiltered()){const ot=Y(d),Xt=uo(y,ot instanceof le?ot:le.EMPTY_NODE);xe=f.filter.updateFullNode(d.eventCache.getNode(),Xt,U)}else{const ot=fr(y,Y(d));xe=f.filter.updateFullNode(d.eventCache.getNode(),ot,U)}else{const ot=mr(c);if(".priority"===ot){(0,L.hu)(1===ht(c),"Can't have a priority with additional path components");const zt=J.getNode();Ye=d.serverCache.getNode();const Xt=Zs(y,c,zt,Ye);xe=null!=Xt?f.filter.updatePriority(zt,Xt):J.getNode()}else{const zt=$(c);let Xt;if(J.isCompleteForChild(ot)){Ye=d.serverCache.getNode();const sn=Zs(y,c,J.getNode(),Ye);Xt=null!=sn?J.getNode().getImmediateChild(ot).updateChild(zt,sn):J.getNode().getImmediateChild(ot)}else Xt=z(y,ot,d.serverCache);xe=null!=Xt?f.filter.updateChild(J.getNode(),ot,Xt,zt,x,U):J.getNode()}}return I(d,xe,J.isFullyInitialized()||gt(c),f.filter.filtersNodes())}}function Jo(f,d,c,y,x,U,J,xe){const Ye=d.serverCache;let ot;const zt=J?f.filter:f.filter.getIndexedFilter();if(gt(c))ot=zt.updateFullNode(Ye.getNode(),y,null);else if(zt.filtersNodes()&&!Ye.isFiltered()){const Zn=Ye.getNode().updateChild(c,y);ot=zt.updateFullNode(Ye.getNode(),Zn,null)}else{const Zn=mr(c);if(!Ye.isCompleteForPath(c)&&ht(c)>1)return d;const vr=$(c),ko=Ye.getNode().getImmediateChild(Zn).updateChild(vr,y);ot=".priority"===Zn?zt.updatePriority(Ye.getNode(),ko):zt.updateChild(Ye.getNode(),Zn,ko,vr,ir,null)}const Xt=N(d,ot,Ye.isFullyInitialized()||gt(c),zt.filtersNodes());return Xo(f,Xt,c,x,new Br(x,Xt,U),xe)}function k(f,d,c,y,x,U,J){const xe=d.eventCache;let Ye,ot;const zt=new Br(x,d,U);if(gt(c))ot=f.filter.updateFullNode(d.eventCache.getNode(),y,J),Ye=I(d,ot,!0,f.filter.filtersNodes());else{const Xt=mr(c);if(".priority"===Xt)ot=f.filter.updatePriority(d.eventCache.getNode(),y),Ye=I(d,ot,xe.isFullyInitialized(),xe.isFiltered());else{const sn=$(c),Zn=xe.getNode().getImmediateChild(Xt);let vr;if(gt(sn))vr=y;else{const Di=zt.getCompleteChild(Xt);vr=null!=Di?".priority"===W(sn)&&Di.getChild(Ze(sn)).isEmpty()?Di:Di.updateChild(sn,y):le.EMPTY_NODE}Ye=Zn.equals(vr)?d:I(d,f.filter.updateChild(xe.getNode(),Xt,vr,sn,zt,J),xe.isFullyInitialized(),f.filter.filtersNodes())}}return Ye}function S(f,d){return f.eventCache.isCompleteForChild(d)}function H(f,d,c){return c.foreach((y,x)=>{d=d.updateChild(y,x)}),d}function te(f,d,c,y,x,U,J,xe){if(d.serverCache.getNode().isEmpty()&&!d.serverCache.isFullyInitialized())return d;let ot,Ye=d;ot=gt(c)?y:new jt(null).setTree(c,y);const zt=d.serverCache.getNode();return ot.children.inorderTraversal((Xt,sn)=>{if(zt.hasChild(Xt)){const vr=H(0,d.serverCache.getNode().getImmediateChild(Xt),sn);Ye=Jo(f,Ye,new ar(Xt),vr,x,U,J,xe)}}),ot.children.inorderTraversal((Xt,sn)=>{const Zn=!d.serverCache.isCompleteForChild(Xt)&&null===sn.value;if(!zt.hasChild(Xt)&&!Zn){const Di=H(0,d.serverCache.getNode().getImmediateChild(Xt),sn);Ye=Jo(f,Ye,new ar(Xt),Di,x,U,J,xe)}}),Ye}class Jt{constructor(d,c){this.query_=d,this.eventRegistrations_=[];const y=this.query_._queryParams,x=new yo(y.getIndex()),U=function(f){return f.loadsAllData()?new yo(f.getIndex()):f.hasLimit()?new Ma(f):new $o(f)}(y);this.processor_=function(f){return{filter:f}}(U);const J=c.serverCache,xe=c.eventCache,Ye=x.updateFullNode(le.EMPTY_NODE,J.getNode(),null),ot=U.updateFullNode(le.EMPTY_NODE,xe.getNode(),null),zt=new li(Ye,J.isFullyInitialized(),x.filtersNodes()),Xt=new li(ot,xe.isFullyInitialized(),U.filtersNodes());this.viewCache_=Ai(Xt,zt),this.eventGenerator_=new vs(this.query_)}get query(){return this.query_}}function ur(f,d){const c=Y(f.viewCache_);return c&&(f.query._queryParams.loadsAllData()||!gt(d)&&!c.getImmediateChild(mr(d)).isEmpty())?c.getChild(d):null}function ti(f){return 0===f.eventRegistrations_.length}function fs(f,d,c){const y=[];if(c){(0,L.hu)(null==d,"A cancel should cancel all event registrations.");const x=f.query._path;f.eventRegistrations_.forEach(U=>{const J=U.createCancelEvent(c,x);J&&y.push(J)})}if(d){let x=[];for(let U=0;U<f.eventRegistrations_.length;++U){const J=f.eventRegistrations_[U];if(J.matches(d)){if(d.hasAnyCallback()){x=x.concat(f.eventRegistrations_.slice(U+1));break}}else x.push(J)}f.eventRegistrations_=x}else f.eventRegistrations_=[];return y}function co(f,d,c,y){d.type===$i.MERGE&&null!==d.source.queryId&&((0,L.hu)(Y(f.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)(w(f.viewCache_),"Missing event cache, even though we have a server cache"));const x=f.viewCache_,U=function(f,d,c,y,x){const U=new ut;let J,xe;if(c.type===$i.OVERWRITE){const ot=c;ot.source.fromUser?J=k(f,d,ot.path,ot.snap,y,x,U):((0,L.hu)(ot.source.fromServer,"Unknown source."),xe=ot.source.tagged||d.serverCache.isFiltered()&&!gt(ot.path),J=Jo(f,d,ot.path,ot.snap,y,x,xe,U))}else if(c.type===$i.MERGE){const ot=c;ot.source.fromUser?J=function(f,d,c,y,x,U,J){let xe=d;return y.foreach((Ye,ot)=>{const zt=ze(c,Ye);S(d,mr(zt))&&(xe=k(f,xe,zt,ot,x,U,J))}),y.foreach((Ye,ot)=>{const zt=ze(c,Ye);S(d,mr(zt))||(xe=k(f,xe,zt,ot,x,U,J))}),xe}(f,d,ot.path,ot.children,y,x,U):((0,L.hu)(ot.source.fromServer,"Unknown source."),xe=ot.source.tagged||d.serverCache.isFiltered(),J=te(f,d,ot.path,ot.children,y,x,xe,U))}else if(c.type===$i.ACK_USER_WRITE){const ot=c;J=ot.revert?function(f,d,c,y,x,U){let J;if(null!=bi(y,c))return d;{const xe=new Br(y,d,x),Ye=d.eventCache.getNode();let ot;if(gt(c)||".priority"===mr(c)){let zt;if(d.serverCache.isFullyInitialized())zt=fr(y,Y(d));else{const Xt=d.serverCache.getNode();(0,L.hu)(Xt instanceof le,"serverChildren would be complete if leaf node"),zt=uo(y,Xt)}ot=f.filter.updateFullNode(Ye,zt,U)}else{const zt=mr(c);let Xt=z(y,zt,d.serverCache);null==Xt&&d.serverCache.isCompleteForChild(zt)&&(Xt=Ye.getImmediateChild(zt)),ot=null!=Xt?f.filter.updateChild(Ye,zt,Xt,$(c),xe,U):d.eventCache.getNode().hasChild(zt)?f.filter.updateChild(Ye,zt,le.EMPTY_NODE,$(c),xe,U):Ye,ot.isEmpty()&&d.serverCache.isFullyInitialized()&&(J=fr(y,Y(d)),J.isLeafNode()&&(ot=f.filter.updateFullNode(ot,J,U)))}return J=d.serverCache.isFullyInitialized()||null!=bi(y,Vn()),I(d,ot,J,f.filter.filtersNodes())}}(f,d,ot.path,y,x,U):function(f,d,c,y,x,U,J){if(null!=bi(x,c))return d;const xe=d.serverCache.isFiltered(),Ye=d.serverCache;if(null!=y.value){if(gt(c)&&Ye.isFullyInitialized()||Ye.isCompleteForPath(c))return Jo(f,d,c,Ye.getNode().getChild(c),x,U,xe,J);if(gt(c)){let ot=new jt(null);return Ye.getNode().forEachChild(vi,(zt,Xt)=>{ot=ot.set(new ar(zt),Xt)}),te(f,d,c,ot,x,U,xe,J)}return d}{let ot=new jt(null);return y.foreach((zt,Xt)=>{const sn=ze(c,zt);Ye.isCompleteForPath(sn)&&(ot=ot.set(zt,Ye.getNode().getChild(sn)))}),te(f,d,c,ot,x,U,xe,J)}}(f,d,ot.path,ot.affectedTree,y,x,U)}else{if(c.type!==$i.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+c.type);J=function(f,d,c,y,x){const U=d.serverCache;return Xo(f,N(d,U.getNode(),U.isFullyInitialized()||gt(c),U.isFiltered()),c,y,ir,x)}(f,d,c.path,y,U)}const Ye=U.getChanges();return function(f,d,c){const y=d.eventCache;if(y.isFullyInitialized()){const x=y.getNode().isLeafNode()||y.getNode().isEmpty(),U=w(f);(c.length>0||!f.eventCache.isFullyInitialized()||x&&!y.getNode().equals(U)||!y.getNode().getPriority().equals(U.getPriority()))&&c.push(mi(w(d)))}}(d,J,Ye),{viewCache:J,changes:Ye}}(f.processor_,x,d,c,y);return function(f,d){(0,L.hu)(d.eventCache.getNode().isIndexed(f.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(d.serverCache.getNode().isIndexed(f.filter.getIndex()),"Server snap not indexed")}(f.processor_,U.viewCache),(0,L.hu)(U.viewCache.serverCache.isFullyInitialized()||!x.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),f.viewCache_=U.viewCache,xo(f,U.changes,U.viewCache.eventCache.getNode(),null)}function xo(f,d,c,y){return function(f,d,c,y){const x=[],U=[];return d.forEach(J=>{"child_changed"===J.type&&f.index_.indexedValueChanged(J.oldSnap,J.snapshotNode)&&U.push(function(f,d){return{type:"child_moved",snapshotNode:d,childName:f}}(J.childName,J.snapshotNode))}),Ds(f,x,"child_removed",d,y,c),Ds(f,x,"child_added",d,y,c),Ds(f,x,"child_moved",U,y,c),Ds(f,x,"child_changed",d,y,c),Ds(f,x,"value",d,y,c),x}(f.eventGenerator_,d,c,y?[y]:f.eventRegistrations_)}let No,jo;class as{constructor(){this.views=new Map}}function ps(f,d,c,y){const x=d.source.queryId;if(null!==x){const U=f.views.get(x);return(0,L.hu)(null!=U,"SyncTree gave us an op for an invalid query."),co(U,d,c,y)}{let U=[];for(const J of f.views.values())U=U.concat(co(J,d,c,y));return U}}function ol(f,d,c,y,x){const J=f.views.get(d._queryIdentifier);if(!J){let xe=fr(c,x?y:null),Ye=!1;xe?Ye=!0:y instanceof le?(xe=uo(c,y),Ye=!1):(xe=le.EMPTY_NODE,Ye=!1);const ot=Ai(new li(xe,Ye,!1),new li(y,x,!1));return new Jt(d,ot)}return J}function Gu(f){const d=[];for(const c of f.views.values())c.query._queryParams.loadsAllData()||d.push(c);return d}function Ca(f,d){let c=null;for(const y of f.views.values())c=c||ur(y,d);return c}function _o(f,d){return d._queryParams.loadsAllData()?vu(f):f.views.get(d._queryIdentifier)}function zu(f,d){return null!=_o(f,d)}function ts(f){return null!=vu(f)}function vu(f){for(const d of f.views.values())if(d.query._queryParams.loadsAllData())return d;return null}let gs=1;class ll{constructor(d){this.listenProvider_=d,this.syncPointTree_=new jt(null),this.pendingWriteTree_={visibleWrites:fn.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function wa(f,d,c,y,x){return function(f,d,c,y,x){(0,L.hu)(y>f.lastWriteId,"Stacking an older write on top of newer ones"),void 0===x&&(x=!0),f.allWrites.push({path:d,snap:c,writeId:y,visible:x}),x&&(f.visibleWrites=lr(f.visibleWrites,d,c)),f.lastWriteId=y}(f.pendingWriteTree_,d,c,y,x),x?fo(f,new js({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},d,c)):[]}function ho(f,d,c=!1){const y=function(f,d){for(let c=0;c<f.allWrites.length;c++){const y=f.allWrites[c];if(y.writeId===d)return y}return null}(f.pendingWriteTree_,d);if(function(f,d){const c=f.allWrites.findIndex(xe=>xe.writeId===d);(0,L.hu)(c>=0,"removeWrite called with nonexistent writeId.");const y=f.allWrites[c];f.allWrites.splice(c,1);let x=y.visible,U=!1,J=f.allWrites.length-1;for(;x&&J>=0;){const xe=f.allWrites[J];xe.visible&&(J>=c&&Il(xe,y.path)?x=!1:Sn(y.path,xe.path)&&(U=!0)),J--}return!!x&&(U?(function(f){f.visibleWrites=Ea(f.allWrites,lo,Vn()),f.lastWriteId=f.allWrites.length>0?f.allWrites[f.allWrites.length-1].writeId:-1}(f),!0):(y.snap?f.visibleWrites=Vr(f.visibleWrites,y.path):tt(y.children,Ye=>{f.visibleWrites=Vr(f.visibleWrites,ze(y.path,Ye))}),!0))}(f.pendingWriteTree_,d)){let U=new jt(null);return null!=y.snap?U=U.set(Vn(),!0):tt(y.children,J=>{U=U.set(new ar(J),!0)}),fo(f,new hs(y.path,U,c))}return[]}function Es(f,d,c){return fo(f,new js({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},d,c))}function Io(f,d,c,y,x=!1){const U=d._path,J=f.syncPointTree_.get(U);let xe=[];if(J&&("default"===d._queryIdentifier||zu(J,d))){const Ye=function(f,d,c,y){const x=d._queryIdentifier,U=[];let J=[];const xe=ts(f);if("default"===x)for(const[Ye,ot]of f.views.entries())J=J.concat(fs(ot,c,y)),ti(ot)&&(f.views.delete(Ye),ot.query._queryParams.loadsAllData()||U.push(ot.query));else{const Ye=f.views.get(x);Ye&&(J=J.concat(fs(Ye,c,y)),ti(Ye)&&(f.views.delete(x),Ye.query._queryParams.loadsAllData()||U.push(Ye.query)))}return xe&&!ts(f)&&U.push(new((0,L.hu)(No,"Reference.ts has not been loaded"),No)(d._repo,d._path)),{removed:U,events:J}}(J,d,c,y);(function(f){return 0===f.views.size})(J)&&(f.syncPointTree_=f.syncPointTree_.remove(U));const ot=Ye.removed;if(xe=Ye.events,!x){const zt=-1!==ot.findIndex(sn=>sn._queryParams.loadsAllData()),Xt=f.syncPointTree_.findOnPath(U,(sn,Zn)=>ts(Zn));if(zt&&!Xt){const sn=f.syncPointTree_.subtree(U);if(!sn.isEmpty()){const Zn=function(f){return f.fold((d,c,y)=>{if(c&&ts(c))return[vu(c)];{let x=[];return c&&(x=Gu(c)),tt(y,(U,J)=>{x=x.concat(J)}),x}})}(sn);for(let vr=0;vr<Zn.length;++vr){const Di=Zn[vr],ko=Di.query,cu=Pa(f,Di);f.listenProvider_.startListening(ul(ko),bo(f,ko),cu.hashFn,cu.onComplete)}}}if(!Xt&&ot.length>0&&!y)if(zt){const sn=null;f.listenProvider_.stopListening(ul(d),sn)}else ot.forEach(sn=>{const Zn=f.queryToTagMap.get(wl(sn));f.listenProvider_.stopListening(ul(sn),Zn)})}!function(f,d){for(let c=0;c<d.length;++c){const y=d[c];if(!y._queryParams.loadsAllData()){const x=wl(y),U=f.queryToTagMap.get(x);f.queryToTagMap.delete(x),f.tagToQueryMap.delete(U)}}}(f,ot)}return xe}function Wa(f,d,c,y){const x=ta(f,y);if(null!=x){const U=Pl(x),J=U.path,xe=U.queryId,Ye=bt(J,d);return Ga(f,J,new js(so(xe),Ye,c))}return[]}function Cl(f,d,c,y=!1){const x=d._path;let U=null,J=!1;f.syncPointTree_.foreachOnPath(x,(sn,Zn)=>{const vr=bt(sn,x);U=U||Ca(Zn,vr),J=J||ts(Zn)});let Ye,xe=f.syncPointTree_.get(x);xe?(J=J||ts(xe),U=U||Ca(xe,Vn())):(xe=new as,f.syncPointTree_=f.syncPointTree_.set(x,xe)),null!=U?Ye=!0:(Ye=!1,U=le.EMPTY_NODE,f.syncPointTree_.subtree(x).foreachChild((Zn,vr)=>{const Di=Ca(vr,Vn());Di&&(U=U.updateImmediateChild(Zn,Di))}));const ot=zu(xe,d);if(!ot&&!d._queryParams.loadsAllData()){const sn=wl(d);(0,L.hu)(!f.queryToTagMap.has(sn),"View does not exist, but we have a tag");const Zn=gs++;f.queryToTagMap.set(sn,Zn),f.tagToQueryMap.set(Zn,sn)}let Xt=function(f,d,c,y,x,U){const J=ol(f,d,y,x,U);return f.views.has(d._queryIdentifier)||f.views.set(d._queryIdentifier,J),function(f,d){f.eventRegistrations_.push(d)}(J,c),function(f,d){const c=f.viewCache_.eventCache,y=[];return c.getNode().isLeafNode()||c.getNode().forEachChild(Dr,(U,J)=>{y.push(ii(U,J))}),c.isFullyInitialized()&&y.push(mi(c.getNode())),xo(f,y,c.getNode(),d)}(J,c)}(xe,d,c,Uo(f.pendingWriteTree_,x),U,Ye);if(!ot&&!J&&!y){const sn=_o(xe,d);Xt=Xt.concat(function(f,d,c){const y=d._path,x=bo(f,d),U=Pa(f,c),J=f.listenProvider_.startListening(ul(d),x,U.hashFn,U.onComplete),xe=f.syncPointTree_.subtree(y);if(x)(0,L.hu)(!ts(xe.value),"If we're adding a query, it shouldn't be shadowed");else{const Ye=xe.fold((ot,zt,Xt)=>{if(!gt(ot)&&zt&&ts(zt))return[vu(zt).query];{let sn=[];return zt&&(sn=sn.concat(Gu(zt).map(Zn=>Zn.query))),tt(Xt,(Zn,vr)=>{sn=sn.concat(vr)}),sn}});for(let ot=0;ot<Ye.length;++ot){const zt=Ye[ot];f.listenProvider_.stopListening(ul(zt),bo(f,zt))}}return J}(f,d,sn))}return Xt}function ha(f,d,c){const x=f.pendingWriteTree_,U=f.syncPointTree_.findOnPath(d,(J,xe)=>{const ot=Ca(xe,bt(J,d));if(ot)return ot});return Ha(x,d,U,c,!0)}function fo(f,d){return po(d,f.syncPointTree_,null,Uo(f.pendingWriteTree_,Vn()))}function po(f,d,c,y){if(gt(f.path))return ea(f,d,c,y);{const x=d.get(Vn());null==c&&null!=x&&(c=Ca(x,Vn()));let U=[];const J=mr(f.path),xe=f.operationForChild(J),Ye=d.children.get(J);if(Ye&&xe){const ot=c?c.getImmediateChild(J):null,zt=K(y,J);U=U.concat(po(xe,Ye,ot,zt))}return x&&(U=U.concat(ps(x,f,y,c))),U}}function ea(f,d,c,y){const x=d.get(Vn());null==c&&null!=x&&(c=Ca(x,Vn()));let U=[];return d.children.inorderTraversal((J,xe)=>{const Ye=c?c.getImmediateChild(J):null,ot=K(y,J),zt=f.operationForChild(J);zt&&(U=U.concat(ea(zt,xe,Ye,ot)))}),x&&(U=U.concat(ps(x,f,y,c))),U}function Pa(f,d){const c=d.query,y=bo(f,c);return{hashFn:()=>(function(f){return f.viewCache_.serverCache.getNode()}(d)||le.EMPTY_NODE).hash(),onComplete:x=>{if("ok"===x)return y?function(f,d,c){const y=ta(f,c);if(y){const x=Pl(y),U=x.path,J=x.queryId,xe=bt(U,d);return Ga(f,U,new Ji(so(J),xe))}return[]}(f,c._path,y):function(f,d){return fo(f,new Ji({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},d))}(f,c._path);{const U=function(f,d){let c="Unknown Error";"too_big"===f?c="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===f?c="Client doesn't have permission to access the desired data.":"unavailable"===f&&(c="The service is unavailable");const y=new Error(f+" at "+d._path.toString()+": "+c);return y.code=f.toUpperCase(),y}(x,c);return Io(f,c,null,U)}}}}function bo(f,d){const c=wl(d);return f.queryToTagMap.get(c)}function wl(f){return f._path.toString()+"$"+f._queryIdentifier}function ta(f,d){return f.tagToQueryMap.get(d)}function Pl(f){const d=f.indexOf("$");return(0,L.hu)(-1!==d&&d<f.length-1,"Bad queryKey."),{queryId:f.substr(d+1),path:new ar(f.substr(0,d))}}function Ga(f,d,c){const y=f.syncPointTree_.get(d);return(0,L.hu)(y,"Missing sync point for query tag that we're tracking"),ps(y,c,Uo(f.pendingWriteTree_,d),null)}function ul(f){return f._queryParams.loadsAllData()&&!f._queryParams.isDefault()?new((0,L.hu)(jo,"Reference.ts has not been loaded"),jo)(f._repo,f._path):f}class Z{constructor(d){this.node_=d}getImmediateChild(d){const c=this.node_.getImmediateChild(d);return new Z(c)}node(){return this.node_}}class me{constructor(d,c){this.syncTree_=d,this.path_=c}getImmediateChild(d){const c=ze(this.path_,d);return new me(this.syncTree_,c)}node(){return ha(this.syncTree_,this.path_)}}const vt=function(f,d,c){return f&&"object"==typeof f?((0,L.hu)(".sv"in f,"Unexpected leaf node or priority contents"),"string"==typeof f[".sv"]?Ut(f[".sv"],d,c):"object"==typeof f[".sv"]?mn(f[".sv"],d):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(f,null,2))):f},Ut=function(f,d,c){if("timestamp"===f)return c.timestamp;(0,L.hu)(!1,"Unexpected server value: "+f)},mn=function(f,d,c){f.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(f,null,2));const y=f.increment;"number"!=typeof y&&(0,L.hu)(!1,"Unexpected increment value: "+y);const x=d.node();if((0,L.hu)(null!=x,"Expected ChildrenNode.EMPTY_NODE for nulls"),!x.isLeafNode())return y;const J=x.getValue();return"number"!=typeof J?y:J+y},qn=function(f,d,c,y){return Hr(d,new me(c,f),y)},yr=function(f,d,c){return Hr(f,new Z(d),c)};function Hr(f,d,c){const y=f.getPriority().val(),x=vt(y,d.getImmediateChild(".priority"),c);let U;if(f.isLeafNode()){const J=f,xe=vt(J.getValue(),d,c);return xe!==J.getValue()||x!==J.getPriority().val()?new As(xe,Ct(x)):f}{const J=f;return U=J,x!==J.getPriority().val()&&(U=U.updatePriority(new As(x))),J.forEachChild(Dr,(xe,Ye)=>{const ot=Hr(Ye,d.getImmediateChild(xe),c);ot!==Ye&&(U=U.updateImmediateChild(xe,ot))}),U}}class $r{constructor(d="",c=null,y={children:{},childCount:0}){this.name=d,this.parent=c,this.node=y}}function _r(f,d){let c=d instanceof ar?d:new ar(d),y=f,x=mr(c);for(;null!==x;){const U=(0,L.DV)(y.node.children,x)||{children:{},childCount:0};y=new $r(x,y,U),c=$(c),x=mr(c)}return y}function xi(f){return f.node.value}function wi(f,d){f.node.value=d,na(f)}function Qi(f){return f.node.childCount>0}function qa(f,d){tt(f.node.children,(c,y)=>{d(new $r(c,f,y))})}function Ho(f,d,c,y){c&&!y&&d(f),qa(f,x=>{Ho(x,d,!0,y)}),c&&y&&d(f)}function ka(f){return new ar(null===f.parent?f.name:ka(f.parent)+"/"+f.name)}function na(f){null!==f.parent&&function(f,d,c){const y=function(f){return void 0===xi(f)&&!Qi(f)}(c),x=(0,L.r3)(f.node.children,d);y&&x?(delete f.node.children[d],f.node.childCount--,na(f)):!y&&!x&&(f.node.children[d]=c.node,f.node.childCount++,na(f))}(f.parent,f.name,f)}const Da=/[\[\].#$\/\u0000-\u001F\u007F]/,La=/[\[\].#$\u0000-\u001F\u007F]/,Ta=10485760,dl=function(f){return"string"==typeof f&&0!==f.length&&!Da.test(f)},Va=function(f){return"string"==typeof f&&0!==f.length&&!La.test(f)},Fl=function(f){return null===f||"string"==typeof f||"number"==typeof f&&!ft(f)||f&&"object"==typeof f&&(0,L.r3)(f,".sv")},go=function(f,d,c,y){y&&void 0===d||fl((0,L.gK)(f,"value"),d,c)},fl=function(f,d,c){const y=c instanceof ar?new zn(c,f):c;if(void 0===d)throw new Error(f+"contains undefined "+Jr(y));if("function"==typeof d)throw new Error(f+"contains a function "+Jr(y)+" with contents = "+d.toString());if(ft(d))throw new Error(f+"contains "+d.toString()+" "+Jr(y));if("string"==typeof d&&d.length>Ta/3&&(0,L.ug)(d)>Ta)throw new Error(f+"contains a string greater than "+Ta+" utf8 bytes "+Jr(y)+" ('"+d.substring(0,50)+"...')");if(d&&"object"==typeof d){let x=!1,U=!1;if(tt(d,(J,xe)=>{if(".value"===J)x=!0;else if(".priority"!==J&&".sv"!==J&&(U=!0,!dl(J)))throw new Error(f+" contains an invalid key ("+J+") "+Jr(y)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(f,d){f.parts_.length>0&&(f.byteLength_+=1),f.parts_.push(d),f.byteLength_+=(0,L.ug)(d),Fi(f)})(y,J),fl(f,xe,y),function(f){const d=f.parts_.pop();f.byteLength_-=(0,L.ug)(d),f.parts_.length>0&&(f.byteLength_-=1)}(y)}),x&&U)throw new Error(f+' contains ".value" child '+Jr(y)+" in addition to actual children.")}},Kl=function(f,d,c,y){if(y&&void 0===d)return;const x=(0,L.gK)(f,"values");if(!d||"object"!=typeof d||Array.isArray(d))throw new Error(x+" must be an object containing the children to replace.");const U=[];tt(d,(J,xe)=>{const Ye=new ar(J);if(fl(x,xe,ze(c,Ye)),".priority"===W(Ye)&&!Fl(xe))throw new Error(x+"contains an invalid value for '"+Ye.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");U.push(Ye)}),function(f,d){let c,y;for(c=0;c<d.length;c++){y=d[c];const U=Ce(y);for(let J=0;J<U.length;J++)if((".priority"!==U[J]||J!==U.length-1)&&!dl(U[J]))throw new Error(f+"contains an invalid key ("+U[J]+") in path "+y.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}d.sort(At);let x=null;for(c=0;c<d.length;c++){if(y=d[c],null!==x&&Sn(x,y))throw new Error(f+"contains a path "+x.toString()+" that is ancestor of another path "+y.toString());x=y}}(x,U)},Eu=function(f,d,c){if(!c||void 0!==d){if(ft(d))throw new Error((0,L.gK)(f,"priority")+"is "+d.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Fl(d))throw new Error((0,L.gK)(f,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Wo=function(f,d,c,y){if(!(y&&void 0===c||dl(c)))throw new Error((0,L.gK)(f,d)+'was an invalid key = "'+c+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Is=function(f,d,c,y){if(!(y&&void 0===c||Va(c)))throw new Error((0,L.gK)(f,d)+'was an invalid path = "'+c+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Po=function(f,d){if(".info"===mr(d))throw new Error(f+" failed = Can't modify data under /.info/")},Zl=function(f,d){const c=d.path.toString();if("string"!=typeof d.repoInfo.host||0===d.repoInfo.host.length||!dl(d.repoInfo.namespace)&&"localhost"!==d.repoInfo.host.split(":")[0]||0!==c.length&&!function(f){return f&&(f=f.replace(/^\/*\.info(\/|$)/,"/")),Va(f)}(c))throw new Error((0,L.gK)(f,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Iu{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ql(f,d){let c=null;for(let y=0;y<d.length;y++){const x=d[y],U=x.getPath();null!==c&&!an(U,c.path)&&(f.eventLists_.push(c),c=null),null===c&&(c={events:[],path:U}),c.events.push(x)}c&&f.eventLists_.push(c)}function bu(f,d,c){Ql(f,c),yc(f,y=>an(y,d))}function ra(f,d,c){Ql(f,c),yc(f,y=>Sn(y,d)||Sn(d,y))}function yc(f,d){f.recursionDepth_++;let c=!0;for(let y=0;y<f.eventLists_.length;y++){const x=f.eventLists_[y];x&&(d(x.path)?(Xl(f.eventLists_[y]),f.eventLists_[y]=null):c=!1)}c&&(f.eventLists_=[]),f.recursionDepth_--}function Xl(f){for(let d=0;d<f.events.length;d++){const c=f.events[d];if(null!==c){f.events[d]=null;const y=c.getEventRunner();Ge&&st("event: "+c.toString()),On(y)}}}const Jl="repo_interrupt";class Cu{constructor(d,c,y,x){this.repoInfo_=d,this.forceRestClient_=c,this.authTokenProvider_=y,this.appCheckProvider_=x,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Iu,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=_s(),this.transactionQueueTree_=new $r,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Rd(f){const c=f.infoData_.getNode(new ar(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+c}function pl(f){return function(f){return(f=f||{}).timestamp=f.timestamp||(new Date).getTime(),f}({timestamp:Rd(f)})}function gl(f,d,c,y,x){f.dataUpdateCount++;const U=new ar(d);c=f.interceptServerDataCallback_?f.interceptServerDataCallback_(d,c):c;let J=[];if(x)if(y){const Ye=(0,L.UI)(c,ot=>Ct(ot));J=function(f,d,c,y){const x=ta(f,y);if(x){const U=Pl(x),J=U.path,xe=U.queryId,Ye=bt(J,d),ot=jt.fromObject(c);return Ga(f,J,new oo(so(xe),Ye,ot))}return[]}(f.serverSyncTree_,U,Ye,x)}else{const Ye=Ct(c);J=Wa(f.serverSyncTree_,U,Ye,x)}else if(y){const Ye=(0,L.UI)(c,ot=>Ct(ot));J=function(f,d,c){const y=jt.fromObject(c);return fo(f,new oo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},d,y))}(f.serverSyncTree_,U,Ye)}else{const Ye=Ct(c);J=Es(f.serverSyncTree_,U,Ye)}let xe=U;J.length>0&&(xe=iu(f,U)),ra(f.eventQueue_,xe,J)}function Ba(f,d){Ya(f,"connected",d),!1===d&&function(f){tu(f,"onDisconnectEvents");const d=pl(f),c=_s();Bi(f.onDisconnect_,Vn(),(x,U)=>{const J=qn(x,U,f.serverSyncTree_,d);Os(c,x,J)});let y=[];Bi(c,Vn(),(x,U)=>{y=y.concat(Es(f.serverSyncTree_,x,U));const J=Au(f,x);iu(f,J)}),f.onDisconnect_=_s(),ra(f.eventQueue_,Vn(),y)}(f)}function Ya(f,d,c){const y=new ar("/.info/"+d),x=Ct(c);f.infoData_.updateSnapshot(y,x);const U=Es(f.infoSyncTree_,y,x);ra(f.eventQueue_,y,U)}function Sa(f){return f.nextWriteId_++}function Vl(f,d,c,y,x){tu(f,"set",{path:d.toString(),value:c,priority:y});const U=pl(f),J=Ct(c,y),xe=ha(f.serverSyncTree_,d),Ye=yr(J,xe,U),ot=Sa(f),zt=wa(f.serverSyncTree_,d,Ye,ot,!0);Ql(f.eventQueue_,zt),f.server_.put(d.toString(),J.val(!0),(sn,Zn)=>{const vr="ok"===sn;vr||Le("set at "+d+" failed: "+sn);const Di=ho(f.serverSyncTree_,ot,!vr);ra(f.eventQueue_,d,Di),Za(0,x,sn,Zn)});const Xt=Au(f,d);iu(f,Xt),ra(f.eventQueue_,Xt,[])}function Md(f,d,c){f.server_.onDisconnectCancel(d.toString(),(y,x)=>{"ok"===y&&$s(f.onDisconnect_,d),Za(0,c,y,x)})}function Ka(f,d,c,y){const x=Ct(c);f.server_.onDisconnectPut(d.toString(),x.val(!0),(U,J)=>{"ok"===U&&Os(f.onDisconnect_,d,x),Za(0,y,U,J)})}function Zu(f,d,c){let y;y=".info"===mr(d._path)?Io(f.infoSyncTree_,d,c):Io(f.serverSyncTree_,d,c),bu(f.eventQueue_,d._path,y)}function Qu(f){f.persistentConnection_&&f.persistentConnection_.interrupt(Jl)}function tu(f,...d){let c="";f.persistentConnection_&&(c=f.persistentConnection_.id+":"),st(c,...d)}function Za(f,d,c,y){d&&On(()=>{if("ok"===c)d(null);else{const x=(c||"error").toUpperCase();let U=x;y&&(U+=": "+y);const J=new Error(U);J.code=x,d(J)}})}function $a(f,d,c){return ha(f.serverSyncTree_,d,c)||le.EMPTY_NODE}function ru(f,d=f.transactionQueueTree_){if(d||si(f,d),xi(d)){const c=Su(f,d);(0,L.hu)(c.length>0,"Sending zero length transaction queue"),c.every(x=>0===x.status)&&function(f,d,c){const y=c.map(ot=>ot.currentWriteId),x=$a(f,d,y);let U=x;const J=x.hash();for(let ot=0;ot<c.length;ot++){const zt=c[ot];(0,L.hu)(0===zt.status,"tryToSendTransactionQueue_: items in queue should all be run."),zt.status=1,zt.retryCount++;const Xt=bt(d,zt.path);U=U.updateChild(Xt,zt.currentOutputSnapshotRaw)}const xe=U.val(!0),Ye=d;f.server_.put(Ye.toString(),xe,ot=>{tu(f,"transaction put response",{path:Ye.toString(),status:ot});let zt=[];if("ok"===ot){const Xt=[];for(let sn=0;sn<c.length;sn++)c[sn].status=2,zt=zt.concat(ho(f.serverSyncTree_,c[sn].currentWriteId)),c[sn].onComplete&&Xt.push(()=>c[sn].onComplete(null,!0,c[sn].currentOutputSnapshotResolved)),c[sn].unwatcher();si(f,_r(f.transactionQueueTree_,d)),ru(f,f.transactionQueueTree_),ra(f.eventQueue_,d,zt);for(let sn=0;sn<Xt.length;sn++)On(Xt[sn])}else{if("datastale"===ot)for(let Xt=0;Xt<c.length;Xt++)c[Xt].status=3===c[Xt].status?4:0;else{Le("transaction at "+Ye.toString()+" failed: "+ot);for(let Xt=0;Xt<c.length;Xt++)c[Xt].status=4,c[Xt].abortReason=ot}iu(f,d)}},J)}(f,ka(d),c)}else Qi(d)&&qa(d,c=>{ru(f,c)})}function iu(f,d){const c=Sl(f,d),y=ka(c);return function(f,d,c){if(0===d.length)return;const y=[];let x=[];const J=d.filter(xe=>0===xe.status).map(xe=>xe.currentWriteId);for(let xe=0;xe<d.length;xe++){const Ye=d[xe],ot=bt(c,Ye.path);let Xt,zt=!1;if((0,L.hu)(null!==ot,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Ye.status)zt=!0,Xt=Ye.abortReason,x=x.concat(ho(f.serverSyncTree_,Ye.currentWriteId,!0));else if(0===Ye.status)if(Ye.retryCount>=25)zt=!0,Xt="maxretry",x=x.concat(ho(f.serverSyncTree_,Ye.currentWriteId,!0));else{const sn=$a(f,Ye.path,J);Ye.currentInputSnapshot=sn;const Zn=d[xe].update(sn.val());if(void 0!==Zn){fl("transaction failed: Data returned ",Zn,Ye.path);let vr=Ct(Zn);"object"==typeof Zn&&null!=Zn&&(0,L.r3)(Zn,".priority")||(vr=vr.updatePriority(sn.getPriority()));const ko=Ye.currentWriteId,cu=pl(f),ec=yr(vr,sn,cu);Ye.currentOutputSnapshotRaw=vr,Ye.currentOutputSnapshotResolved=ec,Ye.currentWriteId=Sa(f),J.splice(J.indexOf(ko),1),x=x.concat(wa(f.serverSyncTree_,Ye.path,ec,Ye.currentWriteId,Ye.applyLocally)),x=x.concat(ho(f.serverSyncTree_,ko,!0))}else zt=!0,Xt="nodata",x=x.concat(ho(f.serverSyncTree_,Ye.currentWriteId,!0))}ra(f.eventQueue_,c,x),x=[],zt&&(d[xe].status=2,setTimeout(d[xe].unwatcher,Math.floor(0)),d[xe].onComplete&&y.push("nodata"===Xt?()=>d[xe].onComplete(null,!1,d[xe].currentInputSnapshot):()=>d[xe].onComplete(new Error(Xt),!1,null)))}si(f,f.transactionQueueTree_);for(let xe=0;xe<y.length;xe++)On(y[xe]);ru(f,f.transactionQueueTree_)}(f,Su(f,c),y),y}function Sl(f,d){let c,y=f.transactionQueueTree_;for(c=mr(d);null!==c&&void 0===xi(y);)y=_r(y,c),c=mr(d=$(d));return y}function Su(f,d){const c=[];return Ui(f,d,c),c.sort((y,x)=>y.order-x.order),c}function Ui(f,d,c){const y=xi(d);if(y)for(let x=0;x<y.length;x++)c.push(y[x]);qa(d,x=>{Ui(f,x,c)})}function si(f,d){const c=xi(d);if(c){let y=0;for(let x=0;x<c.length;x++)2!==c[x].status&&(c[y]=c[x],y++);c.length=y,wi(d,c.length>0?c:void 0)}qa(d,y=>{si(f,y)})}function Au(f,d){const c=ka(Sl(f,d)),y=_r(f.transactionQueueTree_,d);return function(f,d,c){let y=f.parent;for(;null!==y;){if(d(y))return!0;y=y.parent}}(y,x=>{ou(f,x)}),ou(f,y),Ho(y,x=>{ou(f,x)}),c}function ou(f,d){const c=xi(d);if(c){const y=[];let x=[],U=-1;for(let J=0;J<c.length;J++)3===c[J].status||(1===c[J].status?((0,L.hu)(U===J-1,"All SENT items should be at beginning of queue."),U=J,c[J].status=3,c[J].abortReason="set"):((0,L.hu)(0===c[J].status,"Unexpected transaction status in abort"),c[J].unwatcher(),x=x.concat(ho(f.serverSyncTree_,c[J].currentWriteId,!0)),c[J].onComplete&&y.push(c[J].onComplete.bind(null,new Error("set"),!1,null))));-1===U?wi(d,void 0):c.length=U+1,ra(f.eventQueue_,ka(d),x);for(let J=0;J<y.length;J++)On(y[J])}}const Go=function(f,d){const c=zc(f),y=c.namespace;return"firebase.com"===c.domain&&v(c.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!y||"undefined"===y)&&"localhost"!==c.domain&&v("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),c.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Le("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new gr(c.host,c.secure,y,"ws"===c.scheme||"wss"===c.scheme,d,"",y!==c.subdomain),path:new ar(c.pathString)}},zc=function(f){let d="",c="",y="",x="",U="",J=!0,xe="https",Ye=443;if("string"==typeof f){let ot=f.indexOf("//");ot>=0&&(xe=f.substring(0,ot-1),f=f.substring(ot+2));let zt=f.indexOf("/");-1===zt&&(zt=f.length);let Xt=f.indexOf("?");-1===Xt&&(Xt=f.length),d=f.substring(0,Math.min(zt,Xt)),zt<Xt&&(x=function(f){let d="";const c=f.split("/");for(let y=0;y<c.length;y++)if(c[y].length>0){let x=c[y];try{x=decodeURIComponent(x.replace(/\+/g," "))}catch(U){}d+="/"+x}return d}(f.substring(zt,Xt)));const sn=function(f){const d={};"?"===f.charAt(0)&&(f=f.substring(1));for(const c of f.split("&")){if(0===c.length)continue;const y=c.split("=");2===y.length?d[decodeURIComponent(y[0])]=decodeURIComponent(y[1]):Le(`Invalid query segment '${c}' in query '${f}'`)}return d}(f.substring(Math.min(f.length,Xt)));ot=d.indexOf(":"),ot>=0?(J="https"===xe||"wss"===xe,Ye=parseInt(d.substring(ot+1),10)):ot=d.length;const Zn=d.slice(0,ot);if("localhost"===Zn.toLowerCase())c="localhost";else if(Zn.split(".").length<=2)c=Zn;else{const vr=d.indexOf(".");y=d.substring(0,vr).toLowerCase(),c=d.substring(vr+1),U=y}"ns"in sn&&(U=sn.ns)}return{host:d,port:Ye,domain:c,subdomain:y,secure:J,scheme:xe,pathString:x,namespace:U}};class yl{constructor(d,c,y,x){this.eventType=d,this.eventRegistration=c,this.snapshot=y,this.prevName=x}getPath(){const d=this.snapshot.ref;return"value"===this.eventType?d._path:d.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Wl)(this.snapshot.exportVal())}}class xu{constructor(d,c,y){this.eventRegistration=d,this.error=c,this.path=y}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class ia{constructor(d,c){this.snapshotCallback=d,this.cancelCallback=c}onValue(d,c){this.snapshotCallback.call(null,d,c)}onCancel(d){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,d)}get hasCancelCallback(){return!!this.cancelCallback}matches(d){return this.snapshotCallback===d.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===d.snapshotCallback.userCallback&&this.snapshotCallback.context===d.snapshotCallback.context}}class qc{constructor(d,c){this._repo=d,this._path=c}cancel(){const d=new L.BH;return Md(this._repo,this._path,d.wrapCallback(()=>{})),d.promise}remove(){Po("OnDisconnect.remove",this._path);const d=new L.BH;return Ka(this._repo,this._path,null,d.wrapCallback(()=>{})),d.promise}set(d){Po("OnDisconnect.set",this._path),go("OnDisconnect.set",d,this._path,!1);const c=new L.BH;return Ka(this._repo,this._path,d,c.wrapCallback(()=>{})),c.promise}setWithPriority(d,c){Po("OnDisconnect.setWithPriority",this._path),go("OnDisconnect.setWithPriority",d,this._path,!1),Eu("OnDisconnect.setWithPriority",c,!1);const y=new L.BH;return function(f,d,c,y,x){const U=Ct(c,y);f.server_.onDisconnectPut(d.toString(),U.val(!0),(J,xe)=>{"ok"===J&&Os(f.onDisconnect_,d,U),Za(0,x,J,xe)})}(this._repo,this._path,d,c,y.wrapCallback(()=>{})),y.promise}update(d){Po("OnDisconnect.update",this._path),Kl("OnDisconnect.update",d,this._path,!1);const c=new L.BH;return function(f,d,c,y){if((0,L.xb)(c))return st("onDisconnect().update() called with empty data.  Don't do anything."),void Za(0,y,"ok",void 0);f.server_.onDisconnectMerge(d.toString(),c,(x,U)=>{"ok"===x&&tt(c,(J,xe)=>{const Ye=Ct(xe);Os(f.onDisconnect_,ze(d,J),Ye)}),Za(0,y,x,U)})}(this._repo,this._path,d,c.wrapCallback(()=>{})),c.promise}}class Ro{constructor(d,c,y,x){this._repo=d,this._path=c,this._queryParams=y,this._orderByCalled=x}get key(){return gt(this._path)?null:W(this._path)}get ref(){return new Aa(this._repo,this._path)}get _queryIdentifier(){const d=Vs(this._queryParams),c=Nt(d);return"{}"===c?"default":c}get _queryObject(){return Vs(this._queryParams)}isEqual(d){if(!((d=(0,L.m9)(d))instanceof Ro))return!1;const c=this._repo===d._repo,y=an(this._path,d._path);return c&&y&&this._queryIdentifier===d._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(f){let d="";for(let c=f.pieceNum_;c<f.pieces_.length;c++)""!==f.pieces_[c]&&(d+="/"+encodeURIComponent(String(f.pieces_[c])));return d||"/"}(this._path)}}function Ru(f,d){if(!0===f._orderByCalled)throw new Error(d+": You can't combine multiple orderBy calls.")}function _l(f){let d=null,c=null;if(f.hasStart()&&(d=f.getIndexStartValue()),f.hasEnd()&&(c=f.getIndexEndValue()),f.getIndex()===vi){const y="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",x="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(f.hasStart()){if(f.getIndexStartName()!==pt)throw new Error(y);if("string"!=typeof d)throw new Error(x)}if(f.hasEnd()){if(f.getIndexEndName()!==xt)throw new Error(y);if("string"!=typeof c)throw new Error(x)}}else if(f.getIndex()===Dr){if(null!=d&&!Fl(d)||null!=c&&!Fl(c))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(f.getIndex()instanceof ln||f.getIndex()===B,"unknown index type."),null!=d&&"object"==typeof d||null!=c&&"object"==typeof c)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Xr(f){if(f.hasStart()&&f.hasEnd()&&f.hasLimit()&&!f.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Aa extends Ro{constructor(d,c){super(d,c,new To,!1)}get parent(){const d=Ze(this._path);return null===d?null:new Aa(this._repo,d)}get root(){let d=this;for(;null!==d.parent;)d=d.parent;return d}}class D{constructor(d,c,y){this._node=d,this.ref=c,this._index=y}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(d){const c=new ar(d),y=A(this.ref,d);return new D(this._node.getChild(c),y,Dr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(d){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(y,x)=>d(new D(x,A(this.ref,y),Dr)))}hasChild(d){const c=new ar(d);return!this._node.getChild(c).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function p(f,d){return(f=(0,L.m9)(f))._checkNotDeleted("ref"),void 0!==d?A(f._root,d):f._root}function _(f,d){(f=(0,L.m9)(f))._checkNotDeleted("refFromURL");const c=Go(d,f._repo.repoInfo_.nodeAdmin);Zl("refFromURL",c);const y=c.repoInfo;return!f._repo.repoInfo_.isCustomHost()&&y.host!==f._repo.repoInfo_.host&&v("refFromURL: Host name does not match the current database: (found "+y.host+" but expected "+f._repo.repoInfo_.host+")"),p(f,c.path.toString())}function A(f,d){return null===mr((f=(0,L.m9)(f))._path)?(c=d,c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),Is("child","path",c,!1)):Is("child","path",d,!1),new Aa(f._repo,ze(f._path,d));var c}function he(f,d){f=(0,L.m9)(f),Po("push",f._path),go("push",d,f._path,!0);const c=Rd(f._repo),y=cr(c),x=A(f,y),U=A(f,y);let J;return J=null!=d?Zt(U,d).then(()=>U):Promise.resolve(U),x.then=J.then.bind(J),x.catch=J.then.bind(J,void 0),x}function nt(f){return Po("remove",f._path),Zt(f,null)}function Zt(f,d){f=(0,L.m9)(f),Po("set",f._path),go("set",d,f._path,!1);const c=new L.BH;return Vl(f._repo,f._path,d,null,c.wrapCallback(()=>{})),c.promise}function jn(f,d){f=(0,L.m9)(f),Po("setPriority",f._path),Eu("setPriority",d,!1);const c=new L.BH;return Vl(f._repo,ze(f._path,".priority"),d,null,c.wrapCallback(()=>{})),c.promise}function An(f,d,c){if(Po("setWithPriority",f._path),go("setWithPriority",d,f._path,!1),Eu("setWithPriority",c,!1),".length"===f.key||".keys"===f.key)throw"setWithPriority failed: "+f.key+" is a read-only object.";const y=new L.BH;return Vl(f._repo,f._path,d,c,y.wrapCallback(()=>{})),y.promise}function Tr(f,d){Kl("update",d,f._path,!1);const c=new L.BH;return function(f,d,c,y){tu(f,"update",{path:d.toString(),value:c});let x=!0;const U=pl(f),J={};if(tt(c,(xe,Ye)=>{x=!1,J[xe]=qn(ze(d,xe),Ct(Ye),f.serverSyncTree_,U)}),x)st("update() called with empty data.  Don't do anything."),Za(0,y,"ok",void 0);else{const xe=Sa(f),Ye=function(f,d,c,y){!function(f,d,c,y){(0,L.hu)(y>f.lastWriteId,"Stacking an older merge on top of newer ones"),f.allWrites.push({path:d,children:c,writeId:y,visible:!0}),f.visibleWrites=Nn(f.visibleWrites,d,c),f.lastWriteId=y}(f.pendingWriteTree_,d,c,y);const x=jt.fromObject(c);return fo(f,new oo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},d,x))}(f.serverSyncTree_,d,J,xe);Ql(f.eventQueue_,Ye),f.server_.merge(d.toString(),c,(ot,zt)=>{const Xt="ok"===ot;Xt||Le("update at "+d+" failed: "+ot);const sn=ho(f.serverSyncTree_,xe,!Xt),Zn=sn.length>0?iu(f,d):d;ra(f.eventQueue_,Zn,sn),Za(0,y,ot,zt)}),tt(c,ot=>{const zt=Au(f,ze(d,ot));iu(f,zt)}),ra(f.eventQueue_,d,[])}}(f._repo,f._path,d,c.wrapCallback(()=>{})),c.promise}function Mi(f){f=(0,L.m9)(f);const d=new ia(()=>{}),c=new Oi(d);return function(f,d,c){const y=function(f,d){const c=d._path;let y=null;f.syncPointTree_.foreachOnPath(c,(ot,zt)=>{const Xt=bt(ot,c);y=y||Ca(zt,Xt)});let x=f.syncPointTree_.get(c);x?y=y||Ca(x,Vn()):(x=new as,f.syncPointTree_=f.syncPointTree_.set(c,x));const U=null!=y,J=U?new li(y,!0,!1):null;return function(f){return w(f.viewCache_)}(ol(x,d,Uo(f.pendingWriteTree_,d._path),U?J.getNode():le.EMPTY_NODE,U))}(f.serverSyncTree_,d);return null!=y?Promise.resolve(y):f.server_.get(d).then(x=>{const U=Ct(x).withIndex(d._queryParams.getIndex());let J;if(Cl(f.serverSyncTree_,d,c,!0),d._queryParams.loadsAllData())J=Es(f.serverSyncTree_,d._path,U);else{const xe=bo(f.serverSyncTree_,d);J=Wa(f.serverSyncTree_,d._path,U,xe)}return ra(f.eventQueue_,d._path,J),Io(f.serverSyncTree_,d,c,null,!0),U},x=>(tu(f,"get for query "+(0,L.Wl)(d)+" failed: "+x),Promise.reject(new Error(x))))}(f._repo,f,c).then(y=>new D(y,new Aa(f._repo,f._path),f._queryParams.getIndex()))}class Oi{constructor(d){this.callbackContext=d}respondsTo(d){return"value"===d}createEvent(d,c){const y=c._queryParams.getIndex();return new yl("value",this,new D(d.snapshotNode,new Aa(c._repo,c._path),y))}getEventRunner(d){return"cancel"===d.getEventType()?()=>this.callbackContext.onCancel(d.error):()=>this.callbackContext.onValue(d.snapshot,null)}createCancelEvent(d,c){return this.callbackContext.hasCancelCallback?new xu(this,d,c):null}matches(d){return d instanceof Oi&&(!d.callbackContext||!this.callbackContext||d.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Ns{constructor(d,c){this.eventType=d,this.callbackContext=c}respondsTo(d){let c="children_added"===d?"child_added":d;return c="children_removed"===c?"child_removed":c,this.eventType===c}createCancelEvent(d,c){return this.callbackContext.hasCancelCallback?new xu(this,d,c):null}createEvent(d,c){(0,L.hu)(null!=d.childName,"Child events should have a childName.");const y=A(new Aa(c._repo,c._path),d.childName),x=c._queryParams.getIndex();return new yl(d.type,this,new D(d.snapshotNode,y,x),d.prevName)}getEventRunner(d){return"cancel"===d.getEventType()?()=>this.callbackContext.onCancel(d.error):()=>this.callbackContext.onValue(d.snapshot,d.prevName)}matches(d){return d instanceof Ns&&this.eventType===d.eventType&&(!this.callbackContext||!d.callbackContext||this.callbackContext.matches(d.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function fa(f,d,c,y,x){let U;if("object"==typeof y&&(U=void 0,x=y),"function"==typeof y&&(U=y),x&&x.onlyOnce){const Ye=c,ot=(zt,Xt)=>{Zu(f._repo,f,xe),Ye(zt,Xt)};ot.userCallback=c.userCallback,ot.context=c.context,c=ot}const J=new ia(c,U||void 0),xe="value"===d?new Oi(J):new Ns(d,J);return function(f,d,c){let y;y=".info"===mr(d._path)?Cl(f.infoSyncTree_,d,c):Cl(f.serverSyncTree_,d,c),bu(f.eventQueue_,d._path,y)}(f._repo,f,xe),()=>Zu(f._repo,f,xe)}function Mu(f,d,c,y){return fa(f,"value",d,c,y)}function mo(f,d,c,y){return fa(f,"child_added",d,c,y)}function Ec(f,d,c,y){return fa(f,"child_changed",d,c,y)}function Bl(f,d,c,y){return fa(f,"child_moved",d,c,y)}function Hs(f,d,c,y){return fa(f,"child_removed",d,c,y)}function pa(f,d,c){let y=null;const x=c?new ia(c):null;"value"===d?y=new Oi(x):d&&(y=new Ns(d,x)),Zu(f._repo,f,y)}class zo{}class au extends zo{constructor(d,c){super(),this._value=d,this._key=c}_apply(d){go("endAt",this._value,d._path,!0);const c=Ti(d._queryParams,this._value,this._key);if(Xr(c),_l(c),d._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ro(d._repo,d._path,c,d._orderByCalled)}}function Ws(f,d){return Wo("endAt","key",d,!0),new au(f,d)}class lu extends zo{constructor(d,c){super(),this._value=d,this._key=c}_apply(d){go("endBefore",this._value,d._path,!1);const c=function(f,d,c){let y,x;return f.index_===vi?("string"==typeof d&&(d=Vi(d)),x=Ti(f,d,c)):(y=null==c?pt:Vi(c),x=Ti(f,d,y)),x.endBeforeSet_=!0,x}(d._queryParams,this._value,this._key);if(Xr(c),_l(c),d._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ro(d._repo,d._path,c,d._orderByCalled)}}function uu(f,d){return Wo("endBefore","key",d,!0),new lu(f,d)}class Ic extends zo{constructor(d,c){super(),this._value=d,this._key=c}_apply(d){go("startAt",this._value,d._path,!0);const c=br(d._queryParams,this._value,this._key);if(Xr(c),_l(c),d._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ro(d._repo,d._path,c,d._orderByCalled)}}function Uf(f=null,d){return Wo("startAt","key",d,!0),new Ic(f,d)}class vh extends zo{constructor(d,c){super(),this._value=d,this._key=c}_apply(d){go("startAfter",this._value,d._path,!1);const c=function(f,d,c){let y;if(f.index_===vi)"string"==typeof d&&(d=Qr(d)),y=br(f,d,c);else{let x;x=null==c?xt:Qr(c),y=br(f,d,x)}return y.startAfterSet_=!0,y}(d._queryParams,this._value,this._key);if(Xr(c),_l(c),d._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ro(d._repo,d._path,c,d._orderByCalled)}}function bc(f,d){return Wo("startAfter","key",d,!0),new vh(f,d)}class Yc extends zo{constructor(d){super(),this._limit=d}_apply(d){if(d._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ro(d._repo,d._path,function(f,d){const c=f.copy();return c.limitSet_=!0,c.limit_=d,c.viewFrom_="l",c}(d._queryParams,this._limit),d._orderByCalled)}}function jf(f){if("number"!=typeof f||Math.floor(f)!==f||f<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Yc(f)}class Od extends zo{constructor(d){super(),this._limit=d}_apply(d){if(d._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ro(d._repo,d._path,function(f,d){const c=f.copy();return c.limitSet_=!0,c.limit_=d,c.viewFrom_="r",c}(d._queryParams,this._limit),d._orderByCalled)}}function Nd(f){if("number"!=typeof f||Math.floor(f)!==f||f<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Od(f)}class Eh extends zo{constructor(d){super(),this._path=d}_apply(d){Ru(d,"orderByChild");const c=new ar(this._path);if(gt(c))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const y=new ln(c),x=ss(d._queryParams,y);return _l(x),new Ro(d._repo,d._path,x,!0)}}function Hf(f){if("$key"===f)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===f)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===f)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Is("orderByChild","path",f,!1),new Eh(f)}class Pd extends zo{_apply(d){Ru(d,"orderByKey");const c=ss(d._queryParams,vi);return _l(c),new Ro(d._repo,d._path,c,!0)}}function kd(){return new Pd}class Ih extends zo{_apply(d){Ru(d,"orderByPriority");const c=ss(d._queryParams,Dr);return _l(c),new Ro(d._repo,d._path,c,!0)}}function Xu(){return new Ih}class Cc extends zo{_apply(d){Ru(d,"orderByValue");const c=ss(d._queryParams,B);return _l(c),new Ro(d._repo,d._path,c,!0)}}function bh(){return new Cc}class Kc extends zo{constructor(d,c){super(),this._value=d,this._key=c}_apply(d){if(go("equalTo",this._value,d._path,!1),d._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(d._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new au(this._value,this._key)._apply(new Ic(this._value,this._key)._apply(d))}}function Wf(f,d){return Wo("equalTo","key",d,!0),new Kc(f,d)}function Ch(f,...d){let c=(0,L.m9)(f);for(const y of d)c=y._apply(c);return c}(function(f){(0,L.hu)(!No,"__referenceConstructor has already been defined"),No=f})(Aa),function(f){(0,L.hu)(!jo,"__referenceConstructor has already been defined"),jo=f}(Aa);const Fd={};function Vd(f,d,c,y,x){let U=y||f.options.databaseURL;void 0===U&&(f.options.projectId||v("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),st("Using default host for project ",f.options.projectId),U=`${f.options.projectId}-default-rtdb.firebaseio.com`);let Ye,ot,J=Go(U,x),xe=J.repoInfo;"undefined"!=typeof process&&process.env&&(ot=process.env.FIREBASE_DATABASE_EMULATOR_HOST),ot?(Ye=!0,U=`http://${ot}?ns=${xe.namespace}`,J=Go(U,x),xe=J.repoInfo):Ye=!J.repoInfo.secure;const zt=x&&Ye?new Ht(Ht.OWNER):new Sr(f.name,f.options,d);Zl("Invalid Firebase Database URL",J),gt(J.path)||v("Database URL must point to the root of a Firebase Database (not including a child path).");const Xt=function(f,d,c,y){let x=Fd[d.name];x||(x={},Fd[d.name]=x);let U=x[f.toURLString()];return U&&v("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),U=new Cu(f,false,c,y),x[f.toURLString()]=U,U}(xe,f,zt,new Rr(f.name,c));return new wh(Xt,f)}class wh{constructor(d,c){this._repoInternal=d,this.app=c,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(f,d,c){if(f.stats_=Yn(f.repoInfo_),f.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)f.server_=new Bs(f.repoInfo_,(y,x,U,J)=>{gl(f,y,x,U,J)},f.authTokenProvider_,f.appCheckProvider_),setTimeout(()=>Ba(f,!0),0);else{if(null!=c){if("object"!=typeof c)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Wl)(c)}catch(y){throw new Error("Invalid authOverride provided: "+y)}}f.persistentConnection_=new ji(f.repoInfo_,d,(y,x,U,J)=>{gl(f,y,x,U,J)},y=>{Ba(f,y)},y=>{!function(f,d){tt(d,(c,y)=>{Ya(f,c,y)})}(f,y)},f.authTokenProvider_,f.appCheckProvider_,c),f.server_=f.persistentConnection_}f.authTokenProvider_.addTokenChangeListener(y=>{f.server_.refreshAuthToken(y)}),f.appCheckProvider_.addTokenChangeListener(y=>{f.server_.refreshAppCheckToken(y.token)}),f.statsReporter_=function(f,d){const c=f.toString();return Cn[c]||(Cn[c]=d()),Cn[c]}(f.repoInfo_,()=>new os(f.stats_,f.server_)),f.infoData_=new ja,f.infoSyncTree_=new ll({startListening:(y,x,U,J)=>{let xe=[];const Ye=f.infoData_.getNode(y._path);return Ye.isEmpty()||(xe=Es(f.infoSyncTree_,y._path,Ye),setTimeout(()=>{J("ok")},0)),xe},stopListening:()=>{}}),Ya(f,"connected",!1),f.serverSyncTree_=new ll({startListening:(y,x,U,J)=>(f.server_.listen(y,U,x,(xe,Ye)=>{const ot=J(xe,Ye);ra(f.eventQueue_,y._path,ot)}),[]),stopListening:(y,x)=>{f.server_.unlisten(y,x)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Aa(this._repo,Vn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(f,d){const c=Fd[d];(!c||c[f.key]!==f)&&v(`Database ${d}(${f.repoInfo_}) has already been deleted.`),Qu(f),delete c[f.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(d){null===this._rootInternal&&v("Cannot call "+d+" on a deleted database.")}}function Dh(){Er.IS_TRANSPORT_INITIALIZED&&Le("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Gf(){Dh(),tn.forceDisallow()}function Th(){Dh(),Dn.forceDisallow(),tn.forceAllow()}function Gg(f=(0,O.getApp)(),d){const c=(0,O._getProvider)(f,"database").getImmediate({identifier:d}),y=(0,L.P0)("database");return y&&Bd(c,...y),c}function Bd(f,d,c,y={}){(f=(0,L.m9)(f))._checkNotDeleted("useEmulator"),f._instanceStarted&&v("Cannot call useEmulator() after instance has already been initialized.");const x=f._repoInternal;let U;if(x.repoInfo_.nodeAdmin)y.mockUserToken&&v('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),U=new Ht(Ht.OWNER);else if(y.mockUserToken){const J="string"==typeof y.mockUserToken?y.mockUserToken:(0,L.Sg)(y.mockUserToken,f.app.options.projectId);U=new Ht(J)}!function(f,d,c,y){f.repoInfo_=new gr(`${d}:${c}`,!1,f.repoInfo_.namespace,f.repoInfo_.webSocketOnly,f.repoInfo_.nodeAdmin,f.repoInfo_.persistenceKey,f.repoInfo_.includeNamespaceInQueryParams),y&&(f.authTokenProvider_=y)}(x,d,c,U)}function zf(f){(f=(0,L.m9)(f))._checkNotDeleted("goOffline"),Qu(f._repo)}function qf(f){(f=(0,L.m9)(f))._checkNotDeleted("goOnline"),function(f){f.persistentConnection_&&f.persistentConnection_.resume(Jl)}(f._repo)}function Yf(f,d){Oe(f,d)}const xl={".sv":"timestamp"};function zg(){return xl}function qg(f){return{".sv":{increment:f}}}class Sh{constructor(d,c){this.committed=d,this.snapshot=c}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function Kf(f,d,c){var y;if(f=(0,L.m9)(f),Po("Reference.transaction",f._path),".length"===f.key||".keys"===f.key)throw"Reference.transaction failed: "+f.key+" is a read-only object.";const x=null===(y=null==c?void 0:c.applyLocally)||void 0===y||y,U=new L.BH,xe=Mu(f,()=>{});return function(f,d,c,y,x,U){tu(f,"transaction on "+d);const J={path:d,update:c,onComplete:y,status:null,order:Ee(),applyLocally:U,retryCount:0,unwatcher:x,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},xe=$a(f,d,void 0);J.currentInputSnapshot=xe;const Ye=J.update(xe.val());if(void 0===Ye)J.unwatcher(),J.currentOutputSnapshotRaw=null,J.currentOutputSnapshotResolved=null,J.onComplete&&J.onComplete(null,!1,J.currentInputSnapshot);else{fl("transaction failed: Data returned ",Ye,J.path),J.status=0;const ot=_r(f.transactionQueueTree_,d),zt=xi(ot)||[];let Xt;zt.push(J),wi(ot,zt),"object"==typeof Ye&&null!==Ye&&(0,L.r3)(Ye,".priority")?(Xt=(0,L.DV)(Ye,".priority"),(0,L.hu)(Fl(Xt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Xt=(ha(f.serverSyncTree_,d)||le.EMPTY_NODE).getPriority().val();const sn=pl(f),Zn=Ct(Ye,Xt),vr=yr(Zn,xe,sn);J.currentOutputSnapshotRaw=Zn,J.currentOutputSnapshotResolved=vr,J.currentWriteId=Sa(f);const Di=wa(f.serverSyncTree_,d,vr,J.currentWriteId,J.applyLocally);ra(f.eventQueue_,d,Di),ru(f,f.transactionQueueTree_)}}(f._repo,f._path,d,(Ye,ot,zt)=>{let Xt=null;Ye?U.reject(Ye):(Xt=new D(zt,new Aa(f._repo,f._path),Dr),U.resolve(new Sh(ot,Xt)))},xe,x),U.promise}ji.prototype.simpleListen=function(f,d){this.sendRequest("q",{p:f},d)},ji.prototype.echo=function(f,d){this.sendRequest("echo",{d:f},d)},Se(O.SDK_VERSION),(0,O._registerComponent)(new ie.wA("database",(d,{instanceIdentifier:c})=>Vd(d.getProvider("app").getImmediate(),d.getProvider("auth-internal"),d.getProvider("app-check-internal"),c),"PUBLIC").setMultipleInstances(!0)),(0,O.registerVersion)(ee,"0.13.9",void 0),(0,O.registerVersion)(ee,"0.13.9","esm2017")},1304:(cn,rt,F)=>{"use strict";F.d(rt,{u7:()=>dh,Jj:()=>Lc,IX:()=>V_,my:()=>Mo,xU:()=>hc,Lz:()=>Vc,WA:()=>pn,F8:()=>yf,$q:()=>Dd,W:()=>Vu,EK:()=>bi,PU:()=>Eg,l7:()=>ho,Ky:()=>Rt,Xb:()=>ut,Cf:()=>Ni,K9:()=>Uo,Me:()=>zu,yq:()=>Ii,Wi:()=>Zp,ET:()=>my,Ab:()=>Sd,vr:()=>Ey,Fc:()=>U_,hJ:()=>P_,B$:()=>eg,at:()=>Fm,oe:()=>gy,AK:()=>nv,TF:()=>H_,JU:()=>Lm,ST:()=>S0,fH:()=>$_,Ix:()=>j_,Wu:()=>sy,Lx:()=>iy,qY:()=>wo,GL:()=>Td,QT:()=>uy,kl:()=>yg,Xk:()=>_g,PL:()=>cy,UQ:()=>dy,zN:()=>hy,ad:()=>B_,nP:()=>rv,b9:()=>X_,vh:()=>pg,Pb:()=>W_,L$:()=>Km,cf:()=>yy,sc:()=>O0,Xo:()=>fg,IO:()=>Q_,iE:()=>tg,Eo:()=>k_,i3:()=>_y,Bt:()=>vy,pl:()=>fy,Ub:()=>ui,qK:()=>J_,TQ:()=>M0,e0:()=>ny,r7:()=>py,Mx:()=>Ym,ar:()=>ch});var oe,E=F(8239),O=F(8026),ie=F(3910),L=F(5422),ue=F(3854),ee="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ie={},Se=Se||{},ae=ee||self;function ve(){}function we(s){var e=typeof s;return"array"==(e="object"!=e?e:s?Array.isArray(s)?"array":e:"null")||"object"==e&&"number"==typeof s.length}function _e(s){var e=typeof s;return"object"==e&&null!=s||"function"==e}var lt="closure_uid_"+(1e9*Math.random()>>>0),Ee=0;function Ke(s,e,r){return s.call.apply(s.bind,arguments)}function Re(s,e,r){if(!s)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,a),s.apply(e,u)}}return function(){return s.apply(e,arguments)}}function Ge(s,e,r){return(Ge=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ke:Re).apply(null,arguments)}function Fe(s,e){var r=Array.prototype.slice.call(arguments,1);return function(){var a=r.slice();return a.push.apply(a,arguments),s.apply(this,a)}}function Oe(s,e){function r(){}r.prototype=e.prototype,s.X=e.prototype,s.prototype=new r,s.prototype.constructor=s,s.Wb=function(a,u,g){for(var b=Array(arguments.length-2),M=2;M<arguments.length;M++)b[M-2]=arguments[M];return e.prototype[u].apply(a,b)}}function st(){this.s=this.s,this.o=this.o}var en={};st.prototype.s=!1,st.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var s=function(s){return Object.prototype.hasOwnProperty.call(s,lt)&&s[lt]||(s[lt]=++Ee)}(this);delete en[s]}},st.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const v=Array.prototype.indexOf?function(s,e){return Array.prototype.indexOf.call(s,e,void 0)}:function(s,e){if("string"==typeof s)return"string"!=typeof e||1!=e.length?-1:s.indexOf(e,0);for(let r=0;r<s.length;r++)if(r in s&&s[r]===e)return r;return-1};function Le(s){const e=s.length;if(0<e){const r=Array(e);for(let a=0;a<e;a++)r[a]=s[a];return r}return[]}function Tt(s,e){for(let r=1;r<arguments.length;r++){const a=arguments[r];if(we(a)){const u=s.length||0,g=a.length||0;s.length=u+g;for(let b=0;b<g;b++)s[u+b]=a[b]}else s.push(a)}}function ft(s,e){this.type=s,this.g=this.target=e,this.defaultPrevented=!1}ft.prototype.h=function(){this.defaultPrevented=!0};var St=function(){if(!ae.addEventListener||!Object.defineProperty)return!1;var s=!1,e=Object.defineProperty({},"passive",{get:function(){s=!0}});try{ae.addEventListener("test",ve,e),ae.removeEventListener("test",ve,e)}catch(r){}return s}();function pt(s){return/^[\s\xa0]*$/.test(s)}var xt=String.prototype.trim?function(s){return s.trim()}:function(s){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(s)[1]};function kt(s,e){return s<e?-1:s>e?1:0}function xn(){var s=ae.navigator;return s&&(s=s.userAgent)?s:""}function vn(s){return-1!=xn().indexOf(s)}function Nt(s){return Nt[" "](s),s}Nt[" "]=ve;var wn,s,tt=vn("Opera"),je=vn("Trident")||vn("MSIE"),ct=vn("Edge"),Mt=ct||je,Gt=vn("Gecko")&&!(-1!=xn().toLowerCase().indexOf("webkit")&&!vn("Edge"))&&!(vn("Trident")||vn("MSIE"))&&!vn("Edge"),Vt=-1!=xn().toLowerCase().indexOf("webkit")&&!vn("Edge");function Bt(){var s=ae.document;return s?s.documentMode:void 0}e:{var Hn="",On=(s=xn(),Gt?/rv:([^\);]+)(\)|;)/.exec(s):ct?/Edge\/([\d\.]+)/.exec(s):je?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(s):Vt?/WebKit\/(\S+)/.exec(s):tt?/(?:Version)[ \/]?(\S+)/.exec(s):void 0);if(On&&(Hn=On?On[1]:""),je){var Tn=Bt();if(null!=Tn&&Tn>parseFloat(Hn)){wn=String(Tn);break e}}wn=Hn}var Wn={};function Rr(){return e=Wn,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let s=0;const e=xt(String(wn)).split("."),r=xt("9").split("."),a=Math.max(e.length,r.length);for(let b=0;0==s&&b<a;b++){var u=e[b]||"",g=r[b]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],0==u[0].length&&0==g[0].length)break;s=kt(0==u[1].length?0:parseInt(u[1],10),0==g[1].length?0:parseInt(g[1],10))||kt(0==u[2].length,0==g[2].length)||kt(u[2],g[2]),u=u[3],g=g[3]}while(0==s)}return 0<=s}();var e}var Gn=ae.document&&je&&(Bt()||parseInt(wn,10))||void 0;function Jn(s,e){if(ft.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var r=this.type=s.type,a=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=e,e=s.relatedTarget){if(Gt){e:{try{Nt(e.nodeName);var u=!0;break e}catch(g){}u=!1}u||(e=null)}}else"mouseover"==r?e=s.fromElement:"mouseout"==r&&(e=s.toElement);this.relatedTarget=e,a?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType="string"==typeof s.pointerType?s.pointerType:En[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&Jn.X.h.call(this)}}Oe(Jn,ft);var En={2:"touch",3:"pen",4:"mouse"};Jn.prototype.h=function(){Jn.X.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var er="closure_listenable_"+(1e6*Math.random()|0),or=0;function sr(s,e,r,a,u){this.listener=s,this.proxy=null,this.src=e,this.type=r,this.capture=!!a,this.ha=u,this.key=++or,this.ba=this.ea=!1}function pr(s){s.ba=!0,s.listener=null,s.proxy=null,s.src=null,s.ha=null}function Lr(s,e,r){for(const a in s)e.call(r,s[a],a,s)}function Nr(s){const e={};for(const r in s)e[r]=s[r];return e}const Ar="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hi(s,e){let r,a;for(let u=1;u<arguments.length;u++){for(r in a=arguments[u],a)s[r]=a[r];for(let g=0;g<Ar.length;g++)r=Ar[g],Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}}function gr(s){this.src=s,this.g={},this.h=0}function In(s,e){var r=e.type;if(r in s.g){var g,a=s.g[r],u=v(a,e);(g=0<=u)&&Array.prototype.splice.call(a,u,1),g&&(pr(e),0==s.g[r].length&&(delete s.g[r],s.h--))}}function Ft(s,e,r,a){for(var u=0;u<s.length;++u){var g=s[u];if(!g.ba&&g.listener==e&&g.capture==!!r&&g.ha==a)return u}return-1}gr.prototype.add=function(s,e,r,a,u){var g=s.toString();(s=this.g[g])||(s=this.g[g]=[],this.h++);var b=Ft(s,e,a,u);return-1<b?(e=s[b],r||(e.ea=!1)):((e=new sr(e,this.src,g,!!a,u)).ea=r,s.push(e)),e};var ci="closure_lm_"+(1e6*Math.random()|0),ni={};function Cn(s,e,r,a,u){if(a&&a.once)return Cr(s,e,r,a,u);if(Array.isArray(e)){for(var g=0;g<e.length;g++)Cn(s,e[g],r,a,u);return null}return r=wt(r),s&&s[er]?s.N(e,r,_e(a)?!!a.capture:!!a,u):Yn(s,e,r,!1,a,u)}function Yn(s,e,r,a,u,g){if(!e)throw Error("Invalid event type");var b=_e(u)?!!u.capture:!!u,M=at(s);if(M||(s[ci]=M=new gr(s)),(r=M.add(e,r,a,b,g)).proxy)return r;if(a=function(){const e=Xe;return function s(r){return e.call(s.src,s.listener,r)}}(),r.proxy=a,a.src=s,a.listener=r,s.addEventListener)St||(u=b),void 0===u&&(u=!1),s.addEventListener(e.toString(),a,u);else if(s.attachEvent)s.attachEvent(He(e.toString()),a);else{if(!s.addListener||!s.removeListener)throw Error("addEventListener and attachEvent are unavailable.");s.addListener(a)}return r}function Cr(s,e,r,a,u){if(Array.isArray(e)){for(var g=0;g<e.length;g++)Cr(s,e[g],r,a,u);return null}return r=wt(r),s&&s[er]?s.O(e,r,_e(a)?!!a.capture:!!a,u):Yn(s,e,r,!0,a,u)}function nr(s,e,r,a,u){if(Array.isArray(e))for(var g=0;g<e.length;g++)nr(s,e[g],r,a,u);else a=_e(a)?!!a.capture:!!a,r=wt(r),s&&s[er]?(s=s.i,(e=String(e).toString())in s.g&&-1<(r=Ft(g=s.g[e],r,a,u))&&(pr(g[r]),Array.prototype.splice.call(g,r,1),0==g.length&&(delete s.g[e],s.h--))):s&&(s=at(s))&&(e=s.g[e.toString()],s=-1,e&&(s=Ft(e,r,a,u)),(r=-1<s?e[s]:null)&&mt(r))}function mt(s){if("number"!=typeof s&&s&&!s.ba){var e=s.src;if(e&&e[er])In(e.i,s);else{var r=s.type,a=s.proxy;e.removeEventListener?e.removeEventListener(r,a,s.capture):e.detachEvent?e.detachEvent(He(r),a):e.addListener&&e.removeListener&&e.removeListener(a),(r=at(e))?(In(r,s),0==r.h&&(r.src=null,e[ci]=null)):pr(s)}}}function He(s){return s in ni?ni[s]:ni[s]="on"+s}function Xe(s,e){if(s.ba)s=!0;else{e=new Jn(e,this);var r=s.listener,a=s.ha||s.src;s.ea&&mt(s),s=r.call(a,e)}return s}function at(s){return(s=s[ci])instanceof gr?s:null}var Qe="__closure_events_fn_"+(1e9*Math.random()>>>0);function wt(s){return"function"==typeof s?s:(s[Qe]||(s[Qe]=function(e){return s.handleEvent(e)}),s[Qe])}function Qt(){st.call(this),this.i=new gr(this),this.P=this,this.I=null}function $t(s,e){var r,a=s.I;if(a)for(r=[];a;a=a.I)r.push(a);if(s=s.P,a=e.type||e,"string"==typeof e)e=new ft(e,s);else if(e instanceof ft)e.target=e.target||s;else{var u=e;hi(e=new ft(a,s),u)}if(u=!0,r)for(var g=r.length-1;0<=g;g--){var b=e.g=r[g];u=Wt(b,a,!0,e)&&u}if(u=Wt(b=e.g=s,a,!0,e)&&u,u=Wt(b,a,!1,e)&&u,r)for(g=0;g<r.length;g++)u=Wt(b=e.g=r[g],a,!1,e)&&u}function Wt(s,e,r,a){if(!(e=s.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,g=0;g<e.length;++g){var b=e[g];if(b&&!b.ba&&b.capture==r){var M=b.listener,X=b.ha||b.src;b.ea&&In(s.i,b),u=!1!==M.call(X,a)&&u}}return u&&!a.defaultPrevented}Oe(Qt,st),Qt.prototype[er]=!0,Qt.prototype.removeEventListener=function(s,e,r,a){nr(this,s,e,r,a)},Qt.prototype.M=function(){if(Qt.X.M.call(this),this.i){var e,s=this.i;for(e in s.g){for(var r=s.g[e],a=0;a<r.length;a++)pr(r[a]);delete s.g[e],s.h--}}this.I=null},Qt.prototype.N=function(s,e,r,a){return this.i.add(String(s),e,!1,r,a)},Qt.prototype.O=function(s,e,r,a){return this.i.add(String(s),e,!0,r,a)};var Be=ae.JSON.stringify;function $e(){var s=Un;let e=null;return s.g&&(e=s.g,s.g=s.g.next,s.g||(s.h=null),e.next=null),e}var tn,Ve=new class{constructor(s,e){this.i=s,this.j=e,this.h=0,this.g=null}get(){let s;return 0<this.h?(this.h--,s=this.g,this.g=s.next,s.next=null):s=this.i(),s}}(()=>new be,s=>s.reset());class be{constructor(){this.next=this.g=this.h=null}set(e,r){this.h=e,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function Pe(s){ae.setTimeout(()=>{throw s},0)}function Et(s,e){tn||function(){var s=ae.Promise.resolve(void 0);tn=function(){s.then(yn)}}(),Rn||(tn(),Rn=!0),Un.add(s,e)}var Rn=!1,Un=new class{constructor(){this.h=this.g=null}add(e,r){const a=Ve.get();a.set(e,r),this.h?this.h.next=a:this.g=a,this.h=a}};function yn(){for(var s;s=$e();){try{s.h.call(s.g)}catch(r){Pe(r)}var e=Ve;e.j(s),100>e.h&&(e.h++,s.next=e.g,e.g=s)}Rn=!1}function Dn(s,e){Qt.call(this),this.h=s||1,this.g=e||ae,this.j=Ge(this.lb,this),this.l=Date.now()}function Er(s){s.ca=!1,s.R&&(s.g.clearTimeout(s.R),s.R=null)}function rn(s,e,r){if("function"==typeof s)r&&(s=Ge(s,r));else{if(!s||"function"!=typeof s.handleEvent)throw Error("Invalid listener argument");s=Ge(s.handleEvent,s)}return 2147483647<Number(e)?-1:ae.setTimeout(s,e||0)}function nn(s){s.g=rn(()=>{s.g=null,s.i&&(s.i=!1,nn(s))},s.j);const e=s.h;s.h=null,s.m.apply(null,e)}Oe(Dn,Qt),(oe=Dn.prototype).ca=!1,oe.R=null,oe.lb=function(){if(this.ca){var s=Date.now()-this.l;0<s&&s<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-s):(this.R&&(this.g.clearTimeout(this.R),this.R=null),$t(this,"tick"),this.ca&&(Er(this),this.start()))}},oe.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},oe.M=function(){Dn.X.M.call(this),Er(this),delete this.g};class Yt extends st{constructor(e,r){super(),this.m=e,this.j=r,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:nn(this)}M(){super.M(),this.g&&(ae.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mn(s){st.call(this),this.h=s,this.g={}}Oe(Mn,st);var Fn=[];function dn(s,e,r,a){Array.isArray(r)||(r&&(Fn[0]=r.toString()),r=Fn);for(var u=0;u<r.length;u++){var g=Cn(e,r[u],a||s.handleEvent,!1,s.h||s);if(!g)break;s.g[g.key]=g}}function Ur(s){Lr(s.g,function(e,r){this.g.hasOwnProperty(r)&&mt(e)},s),s.g={}}function wr(){this.g=!0}function Kr(s,e,r,a){s.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(s,e){if(!s.g)return e;if(!e)return null;try{var r=JSON.parse(e);if(r)for(s=0;s<r.length;s++)if(Array.isArray(r[s])){var a=r[s];if(!(2>a.length)){var u=a[1];if(Array.isArray(u)&&!(1>u.length)){var g=u[0];if("noop"!=g&&"stop"!=g&&"close"!=g)for(var b=1;b<u.length;b++)u[b]=""}}}return Be(r)}catch(M){return e}}(s,r)+(a?" "+a:"")})}Mn.prototype.M=function(){Mn.X.M.call(this),Ur(this)},Mn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},wr.prototype.Aa=function(){this.g=!1},wr.prototype.info=function(){};var zr={},gi=null;function Zr(){return gi=gi||new Qt}function rs(s){ft.call(this,zr.Pa,s)}function xr(s){const e=Zr();$t(e,new rs(e,s))}function qi(s,e){ft.call(this,zr.STAT_EVENT,s),this.stat=e}function qr(s){const e=Zr();$t(e,new qi(e,s))}function ar(s,e){ft.call(this,zr.Qa,s),this.size=e}function Vn(s,e){if("function"!=typeof s)throw Error("Fn must not be null and must be a function");return ae.setTimeout(function(){s()},e)}zr.Pa="serverreachability",Oe(rs,ft),zr.STAT_EVENT="statevent",Oe(qi,ft),zr.Qa="timingevent",Oe(ar,ft);var mr={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},ht={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function $(){}function ce(){}$.prototype.h=null;var gt,Ce={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Ze(){ft.call(this,"d")}function ze(){ft.call(this,"c")}function bt(){}function At(s,e,r,a){this.l=s,this.j=e,this.m=r,this.U=a||1,this.S=new Mn(this),this.O=Sn,this.T=new Dn(s=Mt?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new an}function an(){this.i=null,this.g="",this.h=!1}Oe(Ze,ft),Oe(ze,ft),Oe(bt,$),bt.prototype.g=function(){return new XMLHttpRequest},bt.prototype.i=function(){return{}},gt=new bt;var Sn=45e3,zn={},Xn={};function kr(s,e,r){s.K=1,s.v=Ls(ms(e)),s.s=r,s.P=!0,Fi(s,null)}function Fi(s,e){s.F=Date.now(),ws(s),s.A=ms(s.v);var r=s.A,a=s.U;Array.isArray(a)||(a=[String(a)]),qs(r.i,"t",a),s.C=0,r=s.l.H,s.h=new an,s.g=Ji(s.l,r?e:null,!s.s),0<s.N&&(s.L=new Yt(Ge(s.La,s,s.g),s.N)),dn(s.S,s.g,"readystatechange",s.ib),e=s.H?Nr(s.H):{},s.s?(s.u||(s.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",s.g.da(s.A,s.u,s.s,e)):(s.u="GET",s.g.da(s.A,s.u,null,e)),xr(1),function(s,e,r,a,u,g){s.info(function(){if(s.g)if(g)for(var b="",M=g.split("&"),X=0;X<M.length;X++){var se=M[X].split("=");if(1<se.length){var Me=se[0];se=se[1];var Je=Me.split("_");b=2<=Je.length&&"type"==Je[1]?b+(Me+"=")+se+"&":b+(Me+"=redacted&")}}else b=null;else b=g;return"XMLHTTP REQ ("+a+") [attempt "+u+"]: "+e+"\n"+r+"\n"+b})}(s.j,s.u,s.A,s.m,s.U,s.s)}function Jr(s){return!!s.g&&"GET"==s.u&&2!=s.K&&s.l.Da}function _i(s,e,r){let u,a=!0;for(;!s.I&&s.C<r.length;){if(u=ri(s,r),u==Xn){4==e&&(s.o=4,qr(14),a=!1),Kr(s.j,s.m,null,"[Incomplete Response]");break}if(u==zn){s.o=4,qr(15),Kr(s.j,s.m,r,"[Invalid Chunk]"),a=!1;break}Kr(s.j,s.m,u,null),Xs(s,u)}Jr(s)&&u!=Xn&&u!=zn&&(s.h.g="",s.C=0),4!=e||0!=r.length||s.h.h||(s.o=1,qr(16),a=!1),s.i=s.i&&a,a?0<r.length&&!s.$&&(s.$=!0,(e=s.l).g==s&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+r.length),Si(e),e.K=!0,qr(11))):(Kr(s.j,s.m,r,"[Invalid Chunked Response]"),Gs(s),cs(s))}function ri(s,e){var r=s.C,a=e.indexOf("\n",r);return-1==a?Xn:(r=Number(e.substring(r,a)),isNaN(r)?zn:(a+=1)+r>e.length?Xn:(e=e.substr(a,r),s.C=a+r,e))}function ws(s){s.V=Date.now()+s.O,Yi(s,s.O)}function Yi(s,e){if(null!=s.B)throw Error("WatchDog timer not null");s.B=Vn(Ge(s.gb,s),e)}function Ss(s){s.B&&(ae.clearTimeout(s.B),s.B=null)}function cs(s){0==s.l.G||s.I||$i(s.l,s)}function Gs(s){Ss(s);var e=s.L;e&&"function"==typeof e.na&&e.na(),s.L=null,Er(s.T),Ur(s.S),s.g&&(e=s.g,s.g=null,e.abort(),e.na())}function Xs(s,e){try{var r=s.l;if(0!=r.G&&(r.g==s||Q(r.h,s)))if(!s.J&&Q(r.h,s)&&3==r.G){try{var a=r.Fa.g.parse(e)}catch(se){a=null}if(Array.isArray(a)&&3==a.length){var u=a;if(0==u[0])e:if(r.u)r.Ba=u[1],0<r.Ba-r.T&&37500>u[2]&&r.L&&0==r.A&&!r.v&&(r.v=Vn(Ge(r.cb,r),6e3));else{if(r.g){if(!(r.g.F+3e3<s.F))break e;os(r),Bs(r)}un(r),qr(18)}if(1>=le(r.h)&&r.ja){try{r.ja()}catch(se){}r.ja=void 0}}else Ks(r,11)}else if((s.J||r.g==s)&&os(r),!pt(e))for(u=r.Fa.g.parse(e),e=0;e<u.length;e++){let se=u[e];if(r.T=se[0],se=se[1],2==r.G)if("c"==se[0]){r.I=se[1],r.ka=se[2];const Me=se[3];null!=Me&&(r.ma=Me,r.j.info("VER="+r.ma));const Je=se[4];null!=Je&&(r.Ca=Je,r.j.info("SVER="+r.Ca));const Lt=se[5];null!=Lt&&"number"==typeof Lt&&0<Lt&&(r.J=a=1.5*Lt,r.j.info("backChannelRequestTimeoutMs_="+a)),a=r;const on=s.g;if(on){const _n=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_n){var g=a.h;g.g||-1==_n.indexOf("spdy")&&-1==_n.indexOf("quic")&&-1==_n.indexOf("h2")||(g.j=g.l,g.g=new Set,g.h&&(De(g,g.h),g.h=null))}if(a.D){const tr=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;tr&&(a.za=tr,ai(a.F,a.D,tr))}}r.G=3,r.l&&r.l.xa(),r.$&&(r.P=Date.now()-s.F,r.j.info("Handshake RTT: "+r.P+"ms"));var b=s;if((a=r).sa=hs(a,a.H?a.ka:null,a.V),b.J){qe(a.h,b);var M=b,X=a.J;X&&M.setTimeout(X),M.B&&(Ss(M),ws(M)),a.g=b}else _a(a);0<r.i.length&&_s(r)}else"stop"!=se[0]&&"close"!=se[0]||Ks(r,7);else 3==r.G&&("stop"==se[0]||"close"==se[0]?"stop"==se[0]?Ks(r,7):Vs(r):"noop"!=se[0]&&r.l&&r.l.wa(se),r.A=0)}xr(4)}catch(se){}}function Js(s,e){if(s.forEach&&"function"==typeof s.forEach)s.forEach(e,void 0);else if(we(s)||"string"==typeof s)Array.prototype.forEach.call(s,e,void 0);else for(var r=function(s){if(s.oa&&"function"==typeof s.oa)return s.oa();if(!s.W||"function"!=typeof s.W){if("undefined"!=typeof Map&&s instanceof Map)return Array.from(s.keys());if(!("undefined"!=typeof Set&&s instanceof Set)){if(we(s)||"string"==typeof s){var e=[];s=s.length;for(var r=0;r<s;r++)e.push(r);return e}e=[],r=0;for(const a in s)e[r++]=a;return e}}}(s),a=function(s){if(s.W&&"function"==typeof s.W)return s.W();if("undefined"!=typeof Map&&s instanceof Map||"undefined"!=typeof Set&&s instanceof Set)return Array.from(s.values());if("string"==typeof s)return s.split("");if(we(s)){for(var e=[],r=s.length,a=0;a<r;a++)e.push(s[a]);return e}for(a in e=[],r=0,s)e[r++]=s[a];return e}(s),u=a.length,g=0;g<u;g++)e.call(void 0,a[g],r&&r[g],s)}(oe=At.prototype).setTimeout=function(s){this.O=s},oe.ib=function(s){s=s.target;const e=this.L;e&&3==br(s)?e.l():this.La(s)},oe.La=function(s){try{if(s==this.g)e:{const Me=br(this.g);var e=this.g.Ea();const Je=this.g.aa();if(!(3>Me)&&(3!=Me||Mt||this.g&&(this.h.h||this.g.fa()||So(this.g)))){this.I||4!=Me||7==e||xr(8==e||0>=Je?3:2),Ss(this);var r=this.g.aa();this.Y=r;t:if(Jr(this)){var a=So(this.g);s="";var u=a.length,g=4==br(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Gs(this),cs(this);var b="";break t}this.h.i=new ae.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,s+=this.h.i.decode(a[e],{stream:g&&e==u-1});a.splice(0,u),this.h.g+=s,this.C=0,b=this.h.g}else b=this.g.fa();if(this.i=200==r,function(s,e,r,a,u,g,b){s.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+u+"]: "+e+"\n"+r+"\n"+g+" "+b})}(this.j,this.u,this.A,this.m,this.U,Me,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var M,X=this.g;if((M=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pt(M)){var se=M;break t}}se=null}if(!(r=se)){this.i=!1,this.o=3,qr(12),Gs(this),cs(this);break e}Kr(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Xs(this,r)}this.P?(_i(this,Me,b),Mt&&this.i&&3==Me&&(dn(this.S,this.T,"tick",this.hb),this.T.start())):(Kr(this.j,this.m,b,null),Xs(this,b)),4==Me&&Gs(this),this.i&&!this.I&&(4==Me?$i(this.l,this):(this.i=!1,ws(this)))}else 400==r&&0<b.indexOf("Unknown SID")?(this.o=3,qr(12)):(this.o=0,qr(13)),Gs(this),cs(this)}}}catch(Me){}},oe.hb=function(){if(this.g){var s=br(this.g),e=this.g.fa();this.C<e.length&&(Ss(this),_i(this,s,e),this.i&&4!=s&&ws(this))}},oe.cancel=function(){this.I=!0,Gs(this)},oe.gb=function(){this.B=null;const s=Date.now();0<=s-this.V?(function(s,e){s.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(xr(3),qr(17)),Gs(this),this.o=2,cs(this)):Yi(this,this.V-s)};var eo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vi(s,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,s instanceof vi){this.h=void 0!==e?e:s.h,Hi(this,s.j),this.s=s.s,this.g=s.g,to(this,s.m),this.l=s.l,e=s.i;var r=new xs;r.i=e.i,e.g&&(r.g=new Map(e.g),r.h=e.h),Ki(this,r),this.o=s.o}else s&&(r=String(s).match(eo))?(this.h=!!e,Hi(this,r[1]||"",!0),this.s=Xi(r[2]||""),this.g=Xi(r[3]||"",!0),to(this,r[4]),this.l=Xi(r[5]||"",!0),Ki(this,r[6]||"",!0),this.o=Xi(r[7]||"")):(this.h=!!e,this.i=new xs(null,this.h))}function ms(s){return new vi(s)}function Hi(s,e,r){s.j=r?Xi(e,!0):e,s.j&&(s.j=s.j.replace(/:$/,""))}function to(s,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);s.m=e}else s.m=null}function Ki(s,e,r){e instanceof xs?(s.i=e,function(s,e){e&&!s.j&&(Li(s),s.i=null,s.g.forEach(function(r,a){var u=a.toLowerCase();a!=u&&(Bo(this,a),qs(this,u,r))},s)),s.j=e}(s.i,s.h)):(r||(e=no(e,Ei)),s.i=new xs(e,s.h))}function ai(s,e,r){s.i.set(e,r)}function Ls(s){return ai(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function Xi(s,e){return s?e?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function no(s,e,r){return"string"==typeof s?(s=encodeURI(s).replace(e,zs),r&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function zs(s){return"%"+((s=s.charCodeAt(0))>>4&15).toString(16)+(15&s).toString(16)}vi.prototype.toString=function(){var s=[],e=this.j;e&&s.push(no(e,is,!0),":");var r=this.g;return(r||"file"==e)&&(s.push("//"),(e=this.s)&&s.push(no(e,is,!0),"@"),s.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&s.push(":",String(r))),(r=this.l)&&(this.g&&"/"!=r.charAt(0)&&s.push("/"),s.push(no(r,"/"==r.charAt(0)?As:Yo,!0))),(r=this.i.toString())&&s.push("?",r),(r=this.o)&&s.push("#",no(r,Ko)),s.join("")};var is=/[#\/\?@]/g,Yo=/[#\?:]/g,As=/[#\?]/g,Ei=/[#\?@]/g,Ko=/#/g;function xs(s,e){this.h=this.g=null,this.i=s||null,this.j=!!e}function Li(s){s.g||(s.g=new Map,s.h=0,s.i&&function(s,e){if(s){s=s.split("&");for(var r=0;r<s.length;r++){var a=s[r].indexOf("="),u=null;if(0<=a){var g=s[r].substring(0,a);u=s[r].substring(a+1)}else g=s[r];e(g,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(s.i,function(e,r){s.add(decodeURIComponent(e.replace(/\+/g," ")),r)}))}function Bo(s,e){Li(s),e=ro(s,e),s.g.has(e)&&(s.i=null,s.h-=s.g.get(e).length,s.g.delete(e))}function Dr(s,e){return Li(s),e=ro(s,e),s.g.has(e)}function qs(s,e,r){Bo(s,e),0<r.length&&(s.i=null,s.g.set(ro(s,e),Le(r)),s.h+=r.length)}function ro(s,e){return e=String(e),s.j&&(e=e.toLowerCase()),e}function yi(s){this.l=s||Ci,s=ae.PerformanceNavigationTiming?0<(s=ae.performance.getEntriesByType("navigation")).length&&("hq"==s[0].nextHopProtocol||"h2"==s[0].nextHopProtocol):!!(ae.g&&ae.g.Ga&&ae.g.Ga()&&ae.g.Ga().$b),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(oe=xs.prototype).add=function(s,e){Li(this),this.i=null,s=ro(this,s);var r=this.g.get(s);return r||this.g.set(s,r=[]),r.push(e),this.h+=1,this},oe.forEach=function(s,e){Li(this),this.g.forEach(function(r,a){r.forEach(function(u){s.call(e,u,a,this)},this)},this)},oe.oa=function(){Li(this);const s=Array.from(this.g.values()),e=Array.from(this.g.keys()),r=[];for(let a=0;a<e.length;a++){const u=s[a];for(let g=0;g<u.length;g++)r.push(e[a])}return r},oe.W=function(s){Li(this);let e=[];if("string"==typeof s)Dr(this,s)&&(e=e.concat(this.g.get(ro(this,s))));else{s=Array.from(this.g.values());for(let r=0;r<s.length;r++)e=e.concat(s[r])}return e},oe.set=function(s,e){return Li(this),this.i=null,Dr(this,s=ro(this,s))&&(this.h-=this.g.get(s).length),this.g.set(s,[e]),this.h+=1,this},oe.get=function(s,e){return s&&0<(s=this.W(s)).length?String(s[0]):e},oe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const s=[],e=Array.from(this.g.keys());for(var r=0;r<e.length;r++){var a=e[r];const g=encodeURIComponent(String(a)),b=this.W(a);for(a=0;a<b.length;a++){var u=g;""!==b[a]&&(u+="="+encodeURIComponent(String(b[a]))),s.push(u)}}return this.i=s.join("&")};var Ci=10;function G(s){return!!s.h||!!s.g&&s.g.size>=s.j}function le(s){return s.h?1:s.g?s.g.size:0}function Q(s,e){return s.h?s.h==e:!!s.g&&s.g.has(e)}function De(s,e){s.g?s.g.add(e):s.h=e}function qe(s,e){s.h&&s.h==e?s.h=null:s.g&&s.g.has(e)&&s.g.delete(e)}function Ct(s){if(null!=s.h)return s.i.concat(s.h.D);if(null!=s.g&&0!==s.g.size){let e=s.i;for(const r of s.g.values())e=e.concat(r.D);return e}return Le(s.i)}function ln(){}function q(){this.g=new ln}function B(s,e,r){const a=r||"";try{Js(s,function(u,g){let b=u;_e(u)&&(b=Be(u)),e.push(a+g+"="+encodeURIComponent(b))})}catch(u){throw e.push(a+"type="+encodeURIComponent("_badmap")),u}}function de(s,e,r,a,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(a)}catch(g){}}function _t(s){this.l=s.ac||null,this.j=s.jb||!1}function bn(s,e){Qt.call(this),this.D=s,this.u=e,this.m=void 0,this.readyState=cr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}yi.prototype.cancel=function(){if(this.i=Ct(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const s of this.g.values())s.cancel();this.g.clear()}},ln.prototype.stringify=function(s){return ae.JSON.stringify(s,void 0)},ln.prototype.parse=function(s){return ae.JSON.parse(s,void 0)},Oe(_t,$),_t.prototype.g=function(){return new bn(this.l,this.j)},_t.prototype.i=function(s){return function(){return s}}({}),Oe(bn,Qt);var cr=0;function Qr(s){s.j.read().then(s.Ta.bind(s)).catch(s.ga.bind(s))}function Vi(s){s.readyState=4,s.l=null,s.j=null,s.A=null,mi(s)}function mi(s){s.onreadystatechange&&s.onreadystatechange.call(s)}(oe=bn.prototype).open=function(s,e){if(this.readyState!=cr)throw this.abort(),Error("Error reopening a connection");this.C=s,this.B=e,this.readyState=1,mi(this)},oe.send=function(s){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};s&&(e.body=s),(this.D||ae).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},oe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Vi(this)),this.readyState=cr},oe.Wa=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,mi(this)),this.g&&(this.readyState=3,mi(this),this.g)))if("arraybuffer"===this.responseType)s.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==ae.ReadableStream&&"body"in s){if(this.j=s.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Qr(this)}else s.text().then(this.Va.bind(this),this.ga.bind(this))},oe.Ta=function(s){if(this.g){if(this.u&&s.value)this.response.push(s.value);else if(!this.u){var e=s.value?s.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!s.done}))&&(this.response=this.responseText+=e)}s.done?Vi(this):mi(this),3==this.readyState&&Qr(this)}},oe.Va=function(s){this.g&&(this.response=this.responseText=s,Vi(this))},oe.Ua=function(s){this.g&&(this.response=s,Vi(this))},oe.ga=function(){this.g&&Vi(this)},oe.setRequestHeader=function(s,e){this.v.append(s,e)},oe.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},oe.getAllResponseHeaders=function(){if(!this.h)return"";const s=[],e=this.h.entries();for(var r=e.next();!r.done;)s.push((r=r.value)[0]+": "+r[1]),r=e.next();return s.join("\r\n")},Object.defineProperty(bn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(s){this.m=s?"include":"same-origin"}});var ii=ae.JSON.parse;function Wr(s){Qt.call(this),this.headers=new Map,this.u=s||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=rr,this.K=this.L=!1}Oe(Wr,Qt);var rr="",aa=/^https?$/i,yo=["POST","PUT"];function Ma(s,e){s.h=!1,s.g&&(s.l=!0,s.g.abort(),s.l=!1),s.j=e,s.m=5,To(s),Rs(s)}function To(s){s.D||(s.D=!0,$t(s,"complete"),$t(s,"error"))}function Zo(s){if(s.h&&void 0!==Se&&(!s.C[1]||4!=br(s)||2!=s.aa()))if(s.v&&4==br(s))rn(s.Ha,0,s);else if($t(s,"readystatechange"),4==br(s)){s.h=!1;try{const M=s.aa();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var r;if(!(r=e)){var a;if(a=0===M){var u=String(s.H).match(eo)[1]||null;if(!u&&ae.self&&ae.self.location){var g=ae.self.location.protocol;u=g.substr(0,g.length-1)}a=!aa.test(u?u.toLowerCase():"")}r=a}if(r)$t(s,"complete"),$t(s,"success");else{s.m=6;try{var b=2<br(s)?s.g.statusText:""}catch(X){b=""}s.j=b+" ["+s.aa()+"]",To(s)}}finally{Rs(s)}}}function Rs(s,e){if(s.g){hn(s);const r=s.g,a=s.C[0]?ve:null;s.g=null,s.C=null,e||$t(s,"ready");try{r.onreadystatechange=a}catch(u){}}}function hn(s){s.g&&s.K&&(s.g.ontimeout=null),s.A&&(ae.clearTimeout(s.A),s.A=null)}function br(s){return s.g?s.g.readyState:0}function So(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.J){case rr:case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ti(s){let e="";return Lr(s,function(r,a){e+=a,e+=":",e+=r,e+="\r\n"}),e}function Ms(s,e,r){e:{for(a in r){var a=!1;break e}a=!0}a||(r=Ti(r),"string"==typeof s?null!=r&&encodeURIComponent(String(r)):ai(s,e,r))}function ss(s,e,r){return r&&r.internalChannelParams&&r.internalChannelParams[s]||e}function ys(s){this.Ca=0,this.i=[],this.j=new wr,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ss("failFast",!1,s),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ss("baseRetryDelayMs",5e3,s),this.bb=ss("retryDelaySeedMs",1e4,s),this.$a=ss("forwardChannelMaxRetries",2,s),this.ta=ss("forwardChannelRequestTimeoutMs",2e4,s),this.ra=s&&s.xmlHttpFactory||void 0,this.Da=s&&s.Zb||!1,this.J=void 0,this.H=s&&s.supportsCrossDomainXhr||!1,this.I="",this.h=new yi(s&&s.concurrentRequestLimit),this.Fa=new q,this.O=s&&s.fastHandshake||!1,this.N=s&&s.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=s&&s.Xb||!1,s&&s.Aa&&this.j.Aa(),s&&s.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&s&&s.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Vs(s){if(ja(s),3==s.G){var e=s.U++,r=ms(s.F);ai(r,"SID",s.I),ai(r,"RID",e),ai(r,"TYPE","terminate"),Bi(s,r),(e=new At(s,s.j,e,void 0)).K=2,e.v=Ls(ms(r)),r=!1,ae.navigator&&ae.navigator.sendBeacon&&(r=ae.navigator.sendBeacon(e.v.toString(),"")),!r&&ae.Image&&((new Image).src=e.v,r=!0),r||(e.g=Ji(e.l,null),e.g.da(e.v)),e.F=Date.now(),ws(e)}so(s)}function Bs(s){s.g&&(Si(s),s.g.cancel(),s.g=null)}function ja(s){Bs(s),s.u&&(ae.clearTimeout(s.u),s.u=null),os(s),s.h.cancel(),s.m&&("number"==typeof s.m&&ae.clearTimeout(s.m),s.m=null)}function _s(s){G(s.h)||s.m||(s.m=!0,Et(s.Ja,s),s.C=0)}function $s(s,e){var r;r=e?e.m:s.U++;const a=ms(s.F);ai(a,"SID",s.I),ai(a,"RID",r),ai(a,"AID",s.T),Bi(s,a),s.o&&s.s&&Ms(a,s.o,s.s),r=new At(s,s.j,r,s.C+1),null===s.o&&(r.H=s.s),e&&(s.i=e.D.concat(s.i)),e=Us(s,r,1e3),r.setTimeout(Math.round(.5*s.ta)+Math.round(.5*s.ta*Math.random())),De(s.h,r),kr(r,a,e)}function Bi(s,e){s.ia&&Lr(s.ia,function(r,a){ai(e,a,r)}),s.l&&Js({},function(r,a){ai(e,a,r)})}function Us(s,e,r){r=Math.min(s.i.length,r);var a=s.l?Ge(s.l.Ra,s.l,s):null;e:{var u=s.i;let g=-1;for(;;){const b=["count="+r];-1==g?0<r?(g=u[0].h,b.push("ofs="+g)):g=0:b.push("ofs="+g);let M=!0;for(let X=0;X<r;X++){let se=u[X].h;const Me=u[X].g;if(se-=g,0>se)g=Math.max(0,u[X].h-100),M=!1;else try{B(Me,b,"req"+se+"_")}catch(Je){a&&a(Me)}}if(M){a=b.join("&");break e}}}return s=s.i.splice(0,r),e.D=s,a}function _a(s){s.g||s.u||(s.Z=1,Et(s.Ia,s),s.A=0)}function un(s){return!(s.g||s.u||3<=s.A||(s.Z++,s.u=Vn(Ge(s.Ia,s),ds(s,s.A)),s.A++,0))}function Si(s){null!=s.B&&(ae.clearTimeout(s.B),s.B=null)}function Ys(s){s.g=new At(s,s.j,"rpc",s.Z),null===s.o&&(s.g.H=s.s),s.g.N=0;var e=ms(s.sa);ai(e,"RID","rpc"),ai(e,"SID",s.I),ai(e,"CI",s.L?"0":"1"),ai(e,"AID",s.T),ai(e,"TYPE","xmlhttp"),Bi(s,e),s.o&&s.s&&Ms(e,s.o,s.s),s.J&&s.g.setTimeout(s.J);var r=s.g;s=s.ka,r.K=1,r.v=Ls(ms(e)),r.s=null,r.P=!0,Fi(r,s)}function os(s){null!=s.v&&(ae.clearTimeout(s.v),s.v=null)}function $i(s,e){var r=null;if(s.g==e){os(s),Si(s),s.g=null;var a=2}else{if(!Q(s.h,e))return;r=e.D,qe(s.h,e),a=1}if(0!=s.G)if(s.pa=e.Y,e.i)if(1==a){r=e.s?e.s.length:0,e=Date.now()-e.F;var u=s.C;$t(a=Zr(),new ar(a,r,e,u)),_s(s)}else _a(s);else if(3==(u=e.o)||0==u&&0<s.pa||!(1==a&&function(s,e){return!(le(s.h)>=s.h.j-(s.m?1:0)||(s.m?(s.i=e.D.concat(s.i),0):1==s.G||2==s.G||s.C>=(s.Za?0:s.$a)||(s.m=Vn(Ge(s.Ja,s,e),ds(s,s.C)),s.C++,0)))}(s,e)||2==a&&un(s)))switch(r&&0<r.length&&(e=s.h,e.i=e.i.concat(r)),u){case 1:Ks(s,5);break;case 4:Ks(s,10);break;case 3:Ks(s,6);break;default:Ks(s,2)}}function ds(s,e){let r=s.Xa+Math.floor(Math.random()*s.bb);return s.l||(r*=2),r*e}function Ks(s,e){if(s.j.info("Error code "+e),2==e){var r=null;s.l&&(r=null);var a=Ge(s.kb,s);r||(r=new vi("//www.google.com/images/cleardot.gif"),ae.location&&"http"==ae.location.protocol||Hi(r,"https"),Ls(r)),function(s,e){const r=new wr;if(ae.Image){const a=new Image;a.onload=Fe(de,r,a,"TestLoadImage: loaded",!0,e),a.onerror=Fe(de,r,a,"TestLoadImage: error",!1,e),a.onabort=Fe(de,r,a,"TestLoadImage: abort",!1,e),a.ontimeout=Fe(de,r,a,"TestLoadImage: timeout",!1,e),ae.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=s}else e(!1)}(r.toString(),a)}else qr(2);s.G=0,s.l&&s.l.va(e),so(s),ja(s)}function so(s){if(s.G=0,s.la=[],s.l){const e=Ct(s.h);(0!=e.length||0!=s.i.length)&&(Tt(s.la,e),Tt(s.la,s.i),s.h.i.length=0,Le(s.i),s.i.length=0),s.l.ua()}}function hs(s,e,r){var a=r instanceof vi?ms(r):new vi(r,void 0);if(""!=a.g)e&&(a.g=e+"."+a.g),to(a,a.m);else{var u=ae.location;a=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var g=new vi(null,void 0);a&&Hi(g,a),e&&(g.g=e),u&&to(g,u),r&&(g.l=r),a=g}return e=s.za,(r=s.D)&&e&&ai(a,r,e),ai(a,"VER",s.ma),Bi(s,a),a}function Ji(s,e,r){if(e&&!s.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Wr(r&&s.Da&&!s.ra?new _t({jb:!0}):s.ra)).Ka(s.H),e}function js(){}function oo(){if(je&&!(10<=Number(Gn)))throw Error("Environmental error: no available transport.")}function li(s,e){Qt.call(this),this.g=new ys(e),this.l=s,this.h=e&&e.messageUrlParams||null,s=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.s=s,s=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(s?s["X-WebChannel-Content-Type"]=e.messageContentType:s={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(s?s["X-WebChannel-Client-Profile"]=e.ya:s={"X-WebChannel-Client-Profile":e.ya}),this.g.S=s,(s=e&&e.Yb)&&!pt(s)&&(this.g.o=s),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!pt(e)&&(this.g.D=e,null!==(s=this.h)&&e in s&&e in(s=this.h)&&delete s[e]),this.j=new Ds(this)}function vs(s){Ze.call(this);var e=s.__sm__;if(e){e:{for(const r in e){s=r;break e}s=void 0}(this.i=s)&&(s=this.i,e=null!==e&&s in e?e[s]:void 0),this.data=e}else this.data=s}function va(){ze.call(this),this.status=1}function Ds(s){this.g=s}(oe=Wr.prototype).Ka=function(s){this.L=s},oe.da=function(s,e,r,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+s);e=e?e.toUpperCase():"GET",this.H=s,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():gt.g(),this.C=function(s){return s.h||(s.h=s.i())}(this.u?this.u:gt),this.g.onreadystatechange=Ge(this.Ha,this);try{this.F=!0,this.g.open(e,String(s),!0),this.F=!1}catch(g){return void Ma(this,g)}if(s=r||"",r=new Map(this.headers),a)if(Object.getPrototypeOf(a)===Object.prototype)for(var u in a)r.set(u,a[u]);else{if("function"!=typeof a.keys||"function"!=typeof a.get)throw Error("Unknown input type for opt_headers: "+String(a));for(const g of a.keys())r.set(g,a.get(g))}a=Array.from(r.keys()).find(g=>"content-type"==g.toLowerCase()),u=ae.FormData&&s instanceof ae.FormData,!(0<=v(yo,e))||a||u||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[g,b]of r)this.g.setRequestHeader(g,b);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{hn(this),0<this.B&&((this.K=function(s){return je&&Rr()&&"number"==typeof s.timeout&&void 0!==s.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ge(this.qa,this)):this.A=rn(this.qa,this.B,this)),this.v=!0,this.g.send(s),this.v=!1}catch(g){Ma(this,g)}},oe.qa=function(){void 0!==Se&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$t(this,"timeout"),this.abort(8))},oe.abort=function(s){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=s||7,$t(this,"complete"),$t(this,"abort"),Rs(this))},oe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Rs(this,!0)),Wr.X.M.call(this)},oe.Ha=function(){this.s||(this.F||this.v||this.l?Zo(this):this.fb())},oe.fb=function(){Zo(this)},oe.aa=function(){try{return 2<br(this)?this.g.status:-1}catch(s){return-1}},oe.fa=function(){try{return this.g?this.g.responseText:""}catch(s){return""}},oe.Sa=function(s){if(this.g){var e=this.g.responseText;return s&&0==e.indexOf(s)&&(e=e.substring(s.length)),ii(e)}},oe.Ea=function(){return this.m},oe.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(oe=ys.prototype).ma=8,oe.G=1,oe.Ja=function(s){if(this.m)if(this.m=null,1==this.G){if(!s){this.U=Math.floor(1e5*Math.random()),s=this.U++;const u=new At(this,this.j,s,void 0);let g=this.s;if(this.S&&(g?(g=Nr(g),hi(g,this.S)):g=this.S),null!==this.o||this.N||(u.H=g,g=null),this.O)e:{for(var e=0,r=0;r<this.i.length;r++){var a=this.i[r];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(e+=a)){e=r;break e}if(4096===e||r===this.i.length-1){e=r+1;break e}}e=1e3}else e=1e3;e=Us(this,u,e),ai(r=ms(this.F),"RID",s),ai(r,"CVER",22),this.D&&ai(r,"X-HTTP-Session-Id",this.D),Bi(this,r),g&&(this.N?e="headers="+encodeURIComponent(String(Ti(g)))+"&"+e:this.o&&Ms(r,this.o,g)),De(this.h,u),this.Ya&&ai(r,"TYPE","init"),this.O?(ai(r,"$req",e),ai(r,"SID","null"),u.Z=!0,kr(u,r,null)):kr(u,r,e),this.G=2}}else 3==this.G&&(s?$s(this,s):0==this.i.length||G(this.h)||$s(this))},oe.Ia=function(){if(this.u=null,Ys(this),this.$&&!(this.K||null==this.g||0>=this.P)){var s=2*this.P;this.j.info("BP detection timer enabled: "+s),this.B=Vn(Ge(this.eb,this),s)}},oe.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,qr(10),Bs(this),Ys(this))},oe.cb=function(){null!=this.v&&(this.v=null,Bs(this),un(this),qr(19))},oe.kb=function(s){s?(this.j.info("Successfully pinged google.com"),qr(2)):(this.j.info("Failed to ping google.com"),qr(1))},(oe=js.prototype).xa=function(){},oe.wa=function(){},oe.va=function(){},oe.ua=function(){},oe.Ra=function(){},oo.prototype.g=function(s,e){return new li(s,e)},Oe(li,Qt),li.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var s=this.g,e=this.l,r=this.h||void 0;qr(0),s.V=e,s.ia=r||{},s.L=s.Y,s.F=hs(s,null,s.V),_s(s)},li.prototype.close=function(){Vs(this.g)},li.prototype.u=function(s){var e=this.g;if("string"==typeof s){var r={};r.__data__=s,s=r}else this.v&&((r={}).__data__=Be(s),s=r);e.i.push(new class{constructor(s,e){this.h=s,this.g=e}}(e.ab++,s)),3==e.G&&_s(e)},li.prototype.M=function(){this.g.l=null,delete this.j,Vs(this.g),delete this.g,li.X.M.call(this)},Oe(vs,Ze),Oe(va,ze),Oe(Ds,js),Ds.prototype.xa=function(){$t(this.g,"a")},Ds.prototype.wa=function(s){$t(this.g,new vs(s))},Ds.prototype.va=function(s){$t(this.g,new va(s))},Ds.prototype.ua=function(){$t(this.g,"b")},oo.prototype.createWebChannel=oo.prototype.g,li.prototype.send=li.prototype.u,li.prototype.open=li.prototype.m,li.prototype.close=li.prototype.close,mr.NO_ERROR=0,mr.TIMEOUT=8,mr.HTTP_ERROR=6,ht.COMPLETE="complete",ce.EventType=Ce,Ce.OPEN="a",Ce.CLOSE="b",Ce.ERROR="c",Ce.MESSAGE="d",Qt.prototype.listen=Qt.prototype.N,Wr.prototype.listenOnce=Wr.prototype.O,Wr.prototype.getLastError=Wr.prototype.Oa,Wr.prototype.getLastErrorCode=Wr.prototype.Ea,Wr.prototype.getStatus=Wr.prototype.aa,Wr.prototype.getResponseJson=Wr.prototype.Sa,Wr.prototype.getResponseText=Wr.prototype.fa,Wr.prototype.send=Wr.prototype.da,Wr.prototype.setWithCredentials=Wr.prototype.Ka;var la=Ie.createWebChannelTransport=function(){return new oo},ao=Ie.getStatEventTarget=function(){return Zr()},Ai=Ie.ErrorCode=mr,I=Ie.EventType=ht,N=Ie.Event=zr,w=Ie.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Y=Ie.FetchXmlHttpFactory=_t,pe=Ie.WebChannel=ce,dt=Ie.XhrIo=Wr;const jt="@firebase/firestore";class fn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");let lr="9.12.1";const Nn=new L.Yd("@firebase/firestore");function Vr(){return Nn.logLevel}function ui(s){Nn.setLogLevel(s)}function qt(s,...e){if(Nn.logLevel<=L.in.DEBUG){const r=e.map(es);Nn.debug(`Firestore (${lr}): ${s}`,...r)}}function dr(s,...e){if(Nn.logLevel<=L.in.ERROR){const r=e.map(es);Nn.error(`Firestore (${lr}): ${s}`,...r)}}function Ii(s,...e){if(Nn.logLevel<=L.in.WARN){const r=e.map(es);Nn.warn(`Firestore (${lr}): ${s}`,...r)}}function es(s){if("string"==typeof s)return s;try{return JSON.stringify(s)}catch(r){return s}}function Bn(s="Unexpected state"){const e=`FIRESTORE (${lr}) INTERNAL ASSERTION FAILED: `+s;throw dr(e),new Error(e)}function Kn(s,e){s||Bn()}function Uo(s,e){s||Bn()}function Ln(s,e){return s}const Pt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pn extends ue.ZR{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ri{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}class Il{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(fn.UNAUTHENTICATED))}shutdown(){}}class lo{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class Ea{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){var a=this;let u=this.i;const g=se=>this.i!==u?(u=this.i,r(se)):Promise.resolve();let b=new Ri;this.o=()=>{this.i++,this.currentUser=this.u(),b.resolve(),b=new Ri,e.enqueueRetryable(()=>g(this.currentUser))};const M=()=>{const se=b;e.enqueueRetryable((0,E.Z)(function*(){yield se.promise,yield g(a.currentUser)}))},X=se=>{qt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=se,this.auth.addAuthTokenListener(this.o),M()};this.t.onInit(se=>X(se)),setTimeout(()=>{if(!this.auth){const se=this.t.getImmediate({optional:!0});se?X(se):(qt("FirebaseAuthCredentialsProvider","Auth not yet detected"),b.resolve(),b=new Ri)}},0),M()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(a=>this.i!==e?(qt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Kn("string"==typeof a.accessToken),new Il(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Kn(null===e||"string"==typeof e),new fn(e)}}class Ha{constructor(e,r,a,u){this.h=e,this.l=r,this.m=a,this.g=u,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Kn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Ia{constructor(e,r,a,u){this.h=e,this.l=r,this.m=a,this.g=u}getToken(){return Promise.resolve(new Ha(this.h,this.l,this.m,this.g))}start(e,r){e.enqueueRetryable(()=>r(fn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ua{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nl{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,r){const a=g=>{null!=g.error&&qt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${g.error.message}`);const b=g.token!==this.A;return this.A=g.token,qt("FirebaseAppCheckTokenProvider",`Received ${b?"new":"existing"} token.`),b?r(g.token):Promise.resolve()};this.o=g=>{e.enqueueRetryable(()=>a(g))};const u=g=>{qt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=g,this.appCheck.addTokenListener(this.o)};this.T.onInit(g=>u(g)),setTimeout(()=>{if(!this.appCheck){const g=this.T.getImmediate({optional:!0});g?u(g):qt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Kn("string"==typeof r.token),this.A=r.token,new ua(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ba(s){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(s);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(r);else for(let a=0;a<s;a++)r[a]=Math.floor(256*Math.random());return r}class Qo{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let a="";for(;a.length<20;){const u=ba(40);for(let g=0;g<u.length;++g)a.length<20&&u[g]<r&&(a+=e.charAt(u[g]%e.length))}return a}}function fr(s,e){return s<e?-1:s>e?1:0}function uo(s,e,r){return s.length===e.length&&s.every((a,u)=>r(a,e[u]))}function Zs(s){return s+"\0"}class bi{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new pn(Pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new pn(Pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new pn(Pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pn(Pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return bi.fromMillis(Date.now())}static fromDate(e){return bi.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),a=Math.floor(1e6*(e-1e3*r));return new bi(r,a)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?fr(this.nanoseconds,e.nanoseconds):fr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class fe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new fe(e)}static min(){return new fe(new bi(0,0))}static max(){return new fe(new bi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class z{constructor(e,r,a){void 0===r?r=0:r>e.length&&Bn(),void 0===a?a=e.length-r:a>e.length-r&&Bn(),this.segments=e,this.offset=r,this.len=a}get length(){return this.len}isEqual(e){return 0===z.comparator(this,e)}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof z?e.forEach(a=>{r.push(a)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,a=this.limit();r<a;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const a=Math.min(e.length,r.length);for(let u=0;u<a;u++){const g=e.get(u),b=r.get(u);if(g<b)return-1;if(g>b)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class K extends z{construct(e,r,a){return new K(e,r,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const r=[];for(const a of e){if(a.indexOf("//")>=0)throw new pn(Pt.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);r.push(...a.split("/").filter(u=>u.length>0))}return new K(r)}static emptyPath(){return new K([])}}const ke=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ut extends z{construct(e,r,a){return new ut(e,r,a)}static isValidIdentifier(e){return ke.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ut.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ut(["__name__"])}static fromServerFormat(e){const r=[];let a="",u=0;const g=()=>{if(0===a.length)throw new pn(Pt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(a),a=""};let b=!1;for(;u<e.length;){const M=e[u];if("\\"===M){if(u+1===e.length)throw new pn(Pt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const X=e[u+1];if("\\"!==X&&"."!==X&&"`"!==X)throw new pn(Pt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=X,u+=2}else"`"===M?(b=!b,u++):"."!==M||b?(a+=M,u++):(g(),u++)}if(g(),b)throw new pn(Pt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ut(r)}static emptyPath(){return new ut([])}}class Rt{constructor(e){this.path=e}static fromPath(e){return new Rt(K.fromString(e))}static fromName(e){return new Rt(K.fromString(e).popFirst(5))}static empty(){return new Rt(K.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===K.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,r){return K.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Rt(new K(e.slice()))}}class ir{constructor(e,r,a,u){this.indexId=e,this.collectionGroup=r,this.fields=a,this.indexState=u}}function Br(s){return s.fields.find(e=>2===e.kind)}function pi(s){return s.fields.filter(e=>2!==e.kind)}ir.UNKNOWN_ID=-1;class Ao{constructor(e,r){this.fieldPath=e,this.kind=r}}class Xo{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Xo(0,S.min())}}function Jo(s,e){const r=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,u=fe.fromTimestamp(1e9===a?new bi(r+1,0):new bi(r,a));return new S(u,Rt.empty(),e)}function k(s){return new S(s.readTime,s.key,-1)}class S{constructor(e,r,a){this.readTime=e,this.documentKey=r,this.largestBatchId=a}static min(){return new S(fe.min(),Rt.empty(),-1)}static max(){return new S(fe.max(),Rt.empty(),-1)}}function T(s,e){let r=s.readTime.compareTo(e.readTime);return 0!==r?r:(r=Rt.comparator(s.documentKey,e.documentKey),0!==r?r:fr(s.largestBatchId,e.largestBatchId))}const H="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class te{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ye(s){return We.apply(this,arguments)}function We(){return We=(0,E.Z)(function*(s){if(s.code!==Pt.FAILED_PRECONDITION||s.message!==H)throw s;qt("LocalStore","Unexpectedly lost primary lease")}),We.apply(this,arguments)}class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Bn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new ge((a,u)=>{this.nextCallback=g=>{this.wrapSuccess(e,g).next(a,u)},this.catchCallback=g=>{this.wrapFailure(r,g).next(a,u)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof ge?r:ge.resolve(r)}catch(r){return ge.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):ge.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):ge.reject(r)}static resolve(e){return new ge((r,a)=>{r(e)})}static reject(e){return new ge((r,a)=>{a(e)})}static waitFor(e){return new ge((r,a)=>{let u=0,g=0,b=!1;e.forEach(M=>{++u,M.next(()=>{++g,b&&g===u&&r()},X=>a(X))}),b=!0,g===u&&r()})}static or(e){let r=ge.resolve(!1);for(const a of e)r=r.next(u=>u?ge.resolve(u):a());return r}static forEach(e,r){const a=[];return e.forEach((u,g)=>{a.push(r.call(this,u,g))}),this.waitFor(a)}static mapArray(e,r){return new ge((a,u)=>{const g=e.length,b=new Array(g);let M=0;for(let X=0;X<g;X++){const se=X;r(e[se]).next(Me=>{b[se]=Me,++M,M===g&&a(b)},Me=>u(Me))}})}static doWhile(e,r){return new ge((a,u)=>{const g=()=>{!0===e()?r().next(()=>{g()},u):a()};g()})}}class Jt{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.P=new Ri,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{r.error?this.P.reject(new ur(e,r.error)):this.P.resolve()},this.transaction.onerror=a=>{const u=Ts(a.target.error);this.P.reject(new ur(e,u))}}static open(e,r,a,u){try{return new Jt(r,e.transaction(u,a))}catch(g){throw new ur(r,g)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(qt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const r=this.transaction.objectStore(e);return new Fr(r)}}class kn{constructor(e,r,a){this.name=e,this.version=r,this.S=a,12.2===kn.D((0,ue.z$)())&&dr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return qt("SimpleDb","Removing database:",e),fs(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,ue.hl)())return!1;if(kn.N())return!0;const e=(0,ue.z$)(),r=kn.D(e),a=0<r&&r<10,u=kn.k(e),g=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||a||g)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,r){return e.store(r)}static D(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(a)}static k(e){const r=e.match(/Android ([\d.]+)/i),a=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(a)}F(e){var r=this;return(0,E.Z)(function*(){return r.db||(qt("SimpleDb","Opening database:",r.name),r.db=yield new Promise((a,u)=>{const g=indexedDB.open(r.name,r.version);g.onsuccess=b=>{a(b.target.result)},g.onblocked=()=>{u(new ur(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},g.onerror=b=>{const M=b.target.error;u("VersionError"===M.name?new pn(Pt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===M.name?new pn(Pt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+M):new ur(e,M))},g.onupgradeneeded=b=>{qt("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',b.oldVersion),r.S.$(b.target.result,g.transaction,b.oldVersion,r.version).next(()=>{qt("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.B&&(r.db.onversionchange=a=>r.B(a)),r.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=r=>e(r))}runTransaction(e,r,a,u){var g=this;return(0,E.Z)(function*(){const b="readonly"===r;let M=0;for(;;){++M;try{g.db=yield g.F(e);const X=Jt.open(g.db,e,b?"readonly":"readwrite",a),se=u(X).next(Me=>(X.V(),Me)).catch(Me=>(X.abort(Me),ge.reject(Me))).toPromise();return se.catch(()=>{}),yield X.v,se}catch(X){const se=X,Me="FirebaseError"!==se.name&&M<3;if(qt("SimpleDb","Transaction failed with error:",se.message,"Retrying:",Me),g.close(),!Me)return Promise.reject(se)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ei{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return fs(this.U.delete())}}class ur extends pn{constructor(e,r){super(Pt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function ti(s){return"IndexedDbTransactionError"===s.name}class Fr{constructor(e){this.store=e}put(e,r){let a;return void 0!==r?(qt("SimpleDb","PUT",this.store.name,e,r),a=this.store.put(r,e)):(qt("SimpleDb","PUT",this.store.name,"<auto-key>",e),a=this.store.put(e)),fs(a)}add(e){return qt("SimpleDb","ADD",this.store.name,e,e),fs(this.store.add(e))}get(e){return fs(this.store.get(e)).next(r=>(void 0===r&&(r=null),qt("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return qt("SimpleDb","DELETE",this.store.name,e),fs(this.store.delete(e))}count(){return qt("SimpleDb","COUNT",this.store.name),fs(this.store.count())}W(e,r){const a=this.options(e,r);if(a.index||"function"!=typeof this.store.getAll){const u=this.cursor(a),g=[];return this.H(u,(b,M)=>{g.push(M)}).next(()=>g)}{const u=this.store.getAll(a.range);return new ge((g,b)=>{u.onerror=M=>{b(M.target.error)},u.onsuccess=M=>{g(M.target.result)}})}}J(e,r){const a=this.store.getAll(e,null===r?void 0:r);return new ge((u,g)=>{a.onerror=b=>{g(b.target.error)},a.onsuccess=b=>{u(b.target.result)}})}Y(e,r){qt("SimpleDb","DELETE ALL",this.store.name);const a=this.options(e,r);a.X=!1;const u=this.cursor(a);return this.H(u,(g,b,M)=>M.delete())}Z(e,r){let a;r?a=e:(a={},r=e);const u=this.cursor(a);return this.H(u,r)}tt(e){const r=this.cursor({});return new ge((a,u)=>{r.onerror=g=>{const b=Ts(g.target.error);u(b)},r.onsuccess=g=>{const b=g.target.result;b?e(b.primaryKey,b.value).next(M=>{M?b.continue():a()}):a()}})}H(e,r){const a=[];return new ge((u,g)=>{e.onerror=b=>{g(b.target.error)},e.onsuccess=b=>{const M=b.target.result;if(!M)return void u();const X=new ei(M),se=r(M.primaryKey,M.value,X);if(se instanceof ge){const Me=se.catch(Je=>(X.done(),ge.reject(Je)));a.push(Me)}X.isDone?u():null===X.G?M.continue():M.continue(X.G)}}).next(()=>ge.waitFor(a))}options(e,r){let a;return void 0!==e&&("string"==typeof e?a=e:r=e),{index:a,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const a=this.store.index(e.index);return e.X?a.openKeyCursor(e.range,r):a.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function fs(s){return new ge((e,r)=>{s.onsuccess=a=>{e(a.target.result)},s.onerror=a=>{const u=Ts(a.target.error);r(u)}})}let co=!1;function Ts(s){const e=kn.D((0,ue.z$)());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(r)>=0){const a=new pn("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return co||(co=!0,setTimeout(()=>{throw a},0)),a}}return s}class xo{constructor(e,r){this.asyncQueue=e,this.et=r,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var r=this;qt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,E.Z)(function*(){r.task=null;try{qt("IndexBackiller",`Documents written: ${yield r.et.st()}`)}catch(a){ti(a)?qt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",a):yield ye(a)}yield r.nt(6e4)}))}}class No{constructor(e,r){this.localStore=e,this.persistence=r}st(e=50){var r=this;return(0,E.Z)(function*(){return r.persistence.runTransaction("Backfill Indexes","readwrite-primary",a=>r.it(a,e))})()}it(e,r){const a=new Set;let u=r,g=!0;return ge.doWhile(()=>!0===g&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(b=>{if(null!==b&&!a.has(b))return qt("IndexBackiller",`Processing collection: ${b}`),this.rt(e,b,u).next(M=>{u-=M,a.add(b)});g=!1})).next(()=>r-u)}rt(e,r,a){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(u=>this.localStore.localDocuments.getNextDocuments(e,r,u,a).next(g=>{const b=g.changes;return this.localStore.indexManager.updateIndexEntries(e,b).next(()=>this.ot(u,g)).next(M=>(qt("IndexBackiller",`Updating offset: ${M}`),this.localStore.indexManager.updateCollectionGroup(e,r,M))).next(()=>b.size)}))}ot(e,r){let a=e;return r.changes.forEach((u,g)=>{const b=k(g);T(b,a)>0&&(a=b)}),new S(a.readTime,a.documentKey,Math.max(r.batchId,e.largestBatchId))}}class as{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=a=>this.ut(a),this.ct=a=>r.writeSequenceNumber(a))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function sl(s){let e=0;for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&e++;return e}function da(s,e){for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&e(r,s[r])}function ls(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}as.at=-1;class ps{constructor(e,r){this.comparator=e,this.root=r||Qs.EMPTY}insert(e,r){return new ps(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Qs.BLACK,null,null))}remove(e){return new ps(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qs.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(0===a)return r.value;a<0?r=r.left:a>0&&(r=r.right)}return null}indexOf(e){let r=0,a=this.root;for(;!a.isEmpty();){const u=this.comparator(e,a.key);if(0===u)return r+a.left.size;u<0?a=a.left:(r+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,a)=>(e(r,a),!1))}toString(){const e=[];return this.inorderTraversal((r,a)=>(e.push(`${r}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ol(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ol(this.root,e,this.comparator,!1)}getReverseIterator(){return new ol(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ol(this.root,e,this.comparator,!0)}}class ol{constructor(e,r,a,u){this.isReverse=u,this.nodeStack=[];let g=1;for(;!e.isEmpty();)if(g=r?a(e.key,r):1,r&&u&&(g*=-1),g<0)e=this.isReverse?e.left:e.right;else{if(0===g){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qs{constructor(e,r,a,u,g){this.key=e,this.value=r,this.color=null!=a?a:Qs.RED,this.left=null!=u?u:Qs.EMPTY,this.right=null!=g?g:Qs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,a,u,g){return new Qs(null!=e?e:this.key,null!=r?r:this.value,null!=a?a:this.color,null!=u?u:this.left,null!=g?g:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,a){let u=this;const g=a(e,u.key);return u=g<0?u.copy(null,null,null,u.left.insert(e,r,a),null):0===g?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(e,r,a)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Qs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let a,u=this;if(r(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,r),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===r(e,u.key)){if(u.right.isEmpty())return Qs.EMPTY;a=u.right.min(),u=u.copy(a.key,a.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,r))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Bn();const e=this.left.check();if(e!==this.right.check())throw Bn();return e+(this.isRed()?0:1)}}Qs.EMPTY=null,Qs.RED=!0,Qs.BLACK=!1,Qs.EMPTY=new class{constructor(){this.size=0}get key(){throw Bn()}get value(){throw Bn()}get color(){throw Bn()}get left(){throw Bn()}get right(){throw Bn()}copy(s,e,r,a,u){return this}insert(s,e,r){return new Qs(s,e)}remove(s,e){return this}isEmpty(){return!0}inorderTraversal(s){return!1}reverseTraversal(s){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Zi{constructor(e){this.comparator=e,this.data=new ps(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,a)=>(e(r),!1))}forEachInRange(e,r){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const u=a.getNext();if(this.comparator(u.key,e[1])>=0)return;r(u.key)}}forEachWhile(e,r){let a;for(a=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Gu(this.data.getIterator())}getIteratorFrom(e){return new Gu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(a=>{r=r.add(a)}),r}isEqual(e){if(!(e instanceof Zi)||this.size!==e.size)return!1;const r=this.data.getIterator(),a=e.data.getIterator();for(;r.hasNext();){const u=r.getNext().key,g=a.getNext().key;if(0!==this.comparator(u,g))return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Zi(this.comparator);return r.data=e,r}}class Gu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ca(s){return s.hasNext()?s.getNext():void 0}class _o{constructor(e){this.fields=e,e.sort(ut.comparator)}static empty(){return new _o([])}unionWith(e){let r=new Zi(ut.comparator);for(const a of this.fields)r=r.add(a);for(const a of e)r=r.add(a);return new _o(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return uo(this.fields,e.fields,(r,a)=>r.isEqual(a))}}function zu(){return"undefined"!=typeof atob}class ts{constructor(e){this.binaryString=e}static fromBase64String(e){const r=atob(e);return new ts(r)}static fromUint8Array(e){const r=function(a){let u="";for(let g=0;g<a.length;++g)u+=String.fromCharCode(a[g]);return u}(e);return new ts(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let a=0;a<e.length;a++)r[a]=e.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ts.EMPTY_BYTE_STRING=new ts("");const vu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jo(s){if(Kn(!!s),"string"==typeof s){let e=0;const r=vu.exec(s);if(Kn(!!r),r[1]){let u=r[1];u=(u+"000000000").substr(0,9),e=Number(u)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Wi(s.seconds),nanos:Wi(s.nanos)}}function Wi(s){return"number"==typeof s?s:"string"==typeof s?Number(s):0}function al(s){return"string"==typeof s?ts.fromBase64String(s):ts.fromUint8Array(s)}function gs(s){var e,r;return"server_timestamp"===(null===(r=((null===(e=null==s?void 0:s.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function ll(s){const e=s.mapValue.fields.__previous_value__;return gs(e)?ll(e):e}function wa(s){const e=jo(s.mapValue.fields.__local_write_time__.timestampValue);return new bi(e.seconds,e.nanos)}class Nl{constructor(e,r,a,u,g,b,M,X){this.databaseId=e,this.appId=r,this.persistenceKey=a,this.host=u,this.ssl=g,this.forceLongPolling=b,this.autoDetectLongPolling=M,this.useFetchStreams=X}}class ho{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new ho("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ho&&e.projectId===this.projectId&&e.database===this.database}}function Es(s){return null==s}function vo(s){return 0===s&&1/s==-1/0}function Oa(s){return"number"==typeof s&&Number.isInteger(s)&&!vo(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const Eo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Io={nullValue:"NULL_VALUE"};function Wa(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?gs(s)?4:Dl(s)?9007199254740991:10:Bn()}function Na(s,e){if(s===e)return!0;const r=Wa(s);if(r!==Wa(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return wa(s).isEqual(wa(e));case 3:return function(a,u){if("string"==typeof a.timestampValue&&"string"==typeof u.timestampValue&&a.timestampValue.length===u.timestampValue.length)return a.timestampValue===u.timestampValue;const g=jo(a.timestampValue),b=jo(u.timestampValue);return g.seconds===b.seconds&&g.nanos===b.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return u=e,al(s.bytesValue).isEqual(al(u.bytesValue));case 7:return s.referenceValue===e.referenceValue;case 8:return function(a,u){return Wi(a.geoPointValue.latitude)===Wi(u.geoPointValue.latitude)&&Wi(a.geoPointValue.longitude)===Wi(u.geoPointValue.longitude)}(s,e);case 2:return function(a,u){if("integerValue"in a&&"integerValue"in u)return Wi(a.integerValue)===Wi(u.integerValue);if("doubleValue"in a&&"doubleValue"in u){const g=Wi(a.doubleValue),b=Wi(u.doubleValue);return g===b?vo(g)===vo(b):isNaN(g)&&isNaN(b)}return!1}(s,e);case 9:return uo(s.arrayValue.values||[],e.arrayValue.values||[],Na);case 10:return function(a,u){const g=a.mapValue.fields||{},b=u.mapValue.fields||{};if(sl(g)!==sl(b))return!1;for(const M in g)if(g.hasOwnProperty(M)&&(void 0===b[M]||!Na(g[M],b[M])))return!1;return!0}(s,e);default:return Bn()}var u}function Cl(s,e){return void 0!==(s.values||[]).find(r=>Na(r,e))}function ha(s,e){if(s===e)return 0;const r=Wa(s),a=Wa(e);if(r!==a)return fr(r,a);switch(r){case 0:case 9007199254740991:return 0;case 1:return fr(s.booleanValue,e.booleanValue);case 2:return function(u,g){const b=Wi(u.integerValue||u.doubleValue),M=Wi(g.integerValue||g.doubleValue);return b<M?-1:b>M?1:b===M?0:isNaN(b)?isNaN(M)?0:-1:1}(s,e);case 3:return mc(s.timestampValue,e.timestampValue);case 4:return mc(wa(s),wa(e));case 5:return fr(s.stringValue,e.stringValue);case 6:return function(u,g){const b=al(u),M=al(g);return b.compareTo(M)}(s.bytesValue,e.bytesValue);case 7:return function(u,g){const b=u.split("/"),M=g.split("/");for(let X=0;X<b.length&&X<M.length;X++){const se=fr(b[X],M[X]);if(0!==se)return se}return fr(b.length,M.length)}(s.referenceValue,e.referenceValue);case 8:return function(u,g){const b=fr(Wi(u.latitude),Wi(g.latitude));return 0!==b?b:fr(Wi(u.longitude),Wi(g.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return function(u,g){const b=u.values||[],M=g.values||[];for(let X=0;X<b.length&&X<M.length;++X){const se=ha(b[X],M[X]);if(se)return se}return fr(b.length,M.length)}(s.arrayValue,e.arrayValue);case 10:return function(u,g){if(u===Eo.mapValue&&g===Eo.mapValue)return 0;if(u===Eo.mapValue)return 1;if(g===Eo.mapValue)return-1;const b=u.fields||{},M=Object.keys(b),X=g.fields||{},se=Object.keys(X);M.sort(),se.sort();for(let Me=0;Me<M.length&&Me<se.length;++Me){const Je=fr(M[Me],se[Me]);if(0!==Je)return Je;const Lt=ha(b[M[Me]],X[se[Me]]);if(0!==Lt)return Lt}return fr(M.length,se.length)}(s.mapValue,e.mapValue);default:throw Bn()}}function mc(s,e){if("string"==typeof s&&"string"==typeof e&&s.length===e.length)return fr(s,e);const r=jo(s),a=jo(e),u=fr(r.seconds,a.seconds);return 0!==u?u:fr(r.nanos,a.nanos)}function fo(s){return po(s)}function po(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(a){const u=jo(a);return`time(${u.seconds},${u.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?al(s.bytesValue).toBase64():"referenceValue"in s?Rt.fromName(s.referenceValue).toString():"geoPointValue"in s?`geo(${(e=s.geoPointValue).latitude},${e.longitude})`:"arrayValue"in s?function(a){let u="[",g=!0;for(const b of a.values||[])g?g=!1:u+=",",u+=po(b);return u+"]"}(s.arrayValue):"mapValue"in s?function(a){const u=Object.keys(a.fields||{}).sort();let g="{",b=!0;for(const M of u)b?b=!1:g+=",",g+=`${M}:${po(a.fields[M])}`;return g+"}"}(s.mapValue):Bn();var e}function ea(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Pa(s){return!!s&&"integerValue"in s}function bo(s){return!!s&&"arrayValue"in s}function wl(s){return!!s&&"nullValue"in s}function ta(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Pl(s){return!!s&&"mapValue"in s}function Ga(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&"object"==typeof s.timestampValue)return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return da(s.mapValue.fields,(r,a)=>e.mapValue.fields[r]=Ga(a)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(s.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Ga(s.arrayValue.values[r]);return e}return Object.assign({},s)}function Dl(s){return"__max__"===(((s.mapValue||{}).fields||{}).__type__||{}).stringValue}function ul(s){return"nullValue"in s?Io:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?ea(ho.empty(),Rt.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?{mapValue:{}}:Bn()}function kl(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?ea(ho.empty(),Rt.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?{mapValue:{}}:"mapValue"in s?Eo:Bn()}function Tl(s,e){const r=ha(s.value,e.value);return 0!==r?r:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function V(s,e){const r=ha(s.value,e.value);return 0!==r?r:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}class Z{constructor(e){this.value=e}static empty(){return new Z({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let a=0;a<e.length-1;++a)if(r=(r.mapValue.fields||{})[e.get(a)],!Pl(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ga(r)}setAll(e){let r=ut.emptyPath(),a={},u=[];e.forEach((b,M)=>{if(!r.isImmediateParentOf(M)){const X=this.getFieldsMap(r);this.applyChanges(X,a,u),a={},u=[],r=M.popLast()}b?a[M.lastSegment()]=Ga(b):u.push(M.lastSegment())});const g=this.getFieldsMap(r);this.applyChanges(g,a,u)}delete(e){const r=this.field(e.popLast());Pl(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Na(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let a=0;a<e.length;++a){let u=r.mapValue.fields[e.get(a)];Pl(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},r.mapValue.fields[e.get(a)]=u),r=u}return r.mapValue.fields}applyChanges(e,r,a){da(r,(u,g)=>e[u]=g);for(const u of a)delete e[u]}clone(){return new Z(Ga(this.value))}}function me(s){const e=[];return da(s.fields,(r,a)=>{const u=new ut([r]);if(Pl(a)){const g=me(a.mapValue).fields;if(0===g.length)e.push(u);else for(const b of g)e.push(u.child(b))}else e.push(u)}),new _o(e)}class Ue{constructor(e,r,a,u,g,b){this.key=e,this.documentType=r,this.version=a,this.readTime=u,this.data=g,this.documentState=b}static newInvalidDocument(e){return new Ue(e,0,fe.min(),fe.min(),Z.empty(),0)}static newFoundDocument(e,r,a){return new Ue(e,1,r,fe.min(),a,0)}static newNoDocument(e,r){return new Ue(e,2,r,fe.min(),Z.empty(),0)}static newUnknownDocument(e,r){return new Ue(e,3,r,fe.min(),Z.empty(),2)}convertToFoundDocument(e,r){return this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Z.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Z.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ue&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ue(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class vt{constructor(e,r=null,a=[],u=[],g=null,b=null,M=null){this.path=e,this.collectionGroup=r,this.orderBy=a,this.filters=u,this.limit=g,this.startAt=b,this.endAt=M,this.ht=null}}function Ut(s,e=null,r=[],a=[],u=null,g=null,b=null){return new vt(s,e,r,a,u,g,b)}function mn(s){const e=Ln(s);if(null===e.ht){let r=e.path.canonicalString();null!==e.collectionGroup&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(a=>{return(u=a).field.canonicalString()+u.op.toString()+fo(u.value);var u}).join(","),r+="|ob:",r+=e.orderBy.map(a=>{return(u=a).field.canonicalString()+u.dir;var u}).join(","),Es(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(a=>fo(a)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(a=>fo(a)).join(",")),e.ht=r}return e.ht}function yr(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let u=0;u<s.orderBy.length;u++)if(!Ta(s.orderBy[u],e.orderBy[u]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let u=0;u<s.filters.length;u++)if((r=s.filters[u]).op!==(a=e.filters[u]).op||!r.field.isEqual(a.field)||!Na(r.value,a.value))return!1;var r,a;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Va(s.startAt,e.startAt)&&Va(s.endAt,e.endAt)}function Hr(s){return Rt.isDocumentKey(s.path)&&null===s.collectionGroup&&0===s.filters.length}function $r(s,e){return s.filters.filter(r=>r instanceof wi&&r.field.isEqual(e))}function _r(s,e,r){let a=Io,u=!0;for(const g of $r(s,e)){let b=Io,M=!0;switch(g.op){case"<":case"<=":b=ul(g.value);break;case"==":case"in":case">=":b=g.value;break;case">":b=g.value,M=!1;break;case"!=":case"not-in":b=Io}Tl({value:a,inclusive:u},{value:b,inclusive:M})<0&&(a=b,u=M)}if(null!==r)for(let g=0;g<s.orderBy.length;++g)if(s.orderBy[g].field.isEqual(e)){const b=r.position[g];Tl({value:a,inclusive:u},{value:b,inclusive:r.inclusive})<0&&(a=b,u=r.inclusive);break}return{value:a,inclusive:u}}function xi(s,e,r){let a=Eo,u=!0;for(const g of $r(s,e)){let b=Eo,M=!0;switch(g.op){case">=":case">":b=kl(g.value),M=!1;break;case"==":case"in":case"<=":b=g.value;break;case"<":b=g.value,M=!1;break;case"!=":case"not-in":b=Eo}V({value:a,inclusive:u},{value:b,inclusive:M})>0&&(a=b,u=M)}if(null!==r)for(let g=0;g<s.orderBy.length;++g)if(s.orderBy[g].field.isEqual(e)){const b=r.position[g];V({value:a,inclusive:u},{value:b,inclusive:r.inclusive})>0&&(a=b,u=r.inclusive);break}return{value:a,inclusive:u}}class wi extends class{}{constructor(e,r,a){super(),this.field=e,this.op=r,this.value=a}static create(e,r,a){return e.isKeyField()?"in"===r||"not-in"===r?this.lt(e,r,a):new Qi(e,r,a):"array-contains"===r?new cl(e,a):"in"===r?new ka(e,a):"not-in"===r?new na(e,a):"array-contains-any"===r?new Fa(e,a):new wi(e,r,a)}static lt(e,r,a){return"in"===r?new za(e,a):new qa(e,a)}matches(e){const r=e.data.field(this.field);return"!="===this.op?null!==r&&this.ft(ha(r,this.value)):null!==r&&Wa(this.value)===Wa(r)&&this.ft(ha(r,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Bn()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Qi extends wi{constructor(e,r,a){super(e,r,a),this.key=Rt.fromName(a.referenceValue)}matches(e){const r=Rt.comparator(e.key,this.key);return this.ft(r)}}class za extends wi{constructor(e,r){super(e,"in",r),this.keys=Ho(0,r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class qa extends wi{constructor(e,r){super(e,"not-in",r),this.keys=Ho(0,r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function Ho(s,e){var r;return((null===(r=e.arrayValue)||void 0===r?void 0:r.values)||[]).map(a=>Rt.fromName(a.referenceValue))}class cl extends wi{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return bo(r)&&Cl(r.arrayValue,this.value)}}class ka extends wi{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return null!==r&&Cl(this.value.arrayValue,r)}}class na extends wi{constructor(e,r){super(e,"not-in",r)}matches(e){if(Cl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return null!==r&&!Cl(this.value.arrayValue,r)}}class Fa extends wi{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!bo(r)||!r.arrayValue.values)&&r.arrayValue.values.some(a=>Cl(this.value.arrayValue,a))}}class Da{constructor(e,r){this.position=e,this.inclusive=r}}class La{constructor(e,r="asc"){this.field=e,this.dir=r}}function Ta(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}function dl(s,e,r){let a=0;for(let u=0;u<s.position.length;u++){const g=e[u],b=s.position[u];if(a=g.field.isKeyField()?Rt.comparator(Rt.fromName(b.referenceValue),r.key):ha(b,r.data.field(g.field)),"desc"===g.dir&&(a*=-1),0!==a)break}return a}function Va(s,e){if(null===s)return null===e;if(null===e||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let r=0;r<s.position.length;r++)if(!Na(s.position[r],e.position[r]))return!1;return!0}class hl{constructor(e,r=null,a=[],u=[],g=null,b="F",M=null,X=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=a,this.filters=u,this.limit=g,this.limitType=b,this.startAt=M,this.endAt=X,this._t=null,this.wt=null}}function Fl(s,e,r,a,u,g,b,M){return new hl(s,e,r,a,u,g,b,M)}function go(s){return new hl(s)}function fl(s){return 0===s.filters.length&&null===s.limit&&null==s.startAt&&null==s.endAt&&(0===s.explicitOrderBy.length||1===s.explicitOrderBy.length&&s.explicitOrderBy[0].field.isKeyField())}function qu(s){return s.explicitOrderBy.length>0?s.explicitOrderBy[0].field:null}function Kl(s){for(const e of s.filters)if(e.dt())return e.field;return null}function Eu(s){return null!==s.collectionGroup}function Wo(s){const e=Ln(s);if(null===e._t){e._t=[];const r=Kl(e),a=qu(e);if(null!==r&&null===a)r.isKeyField()||e._t.push(new La(r)),e._t.push(new La(ut.keyField(),"asc"));else{let u=!1;for(const g of e.explicitOrderBy)e._t.push(g),g.field.isKeyField()&&(u=!0);if(!u){const g=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new La(ut.keyField(),g))}}}return e._t}function Is(s){const e=Ln(s);if(!e.wt)if("F"===e.limitType)e.wt=Ut(e.path,e.collectionGroup,Wo(e),e.filters,e.limit,e.startAt,e.endAt);else{const r=[];for(const g of Wo(e))r.push(new La(g.field,"desc"===g.dir?"asc":"desc"));const a=e.endAt?new Da(e.endAt.position,e.endAt.inclusive):null,u=e.startAt?new Da(e.startAt.position,e.startAt.inclusive):null;e.wt=Ut(e.path,e.collectionGroup,r,e.filters,e.limit,a,u)}return e.wt}function Yu(s,e,r){return new hl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,r,s.startAt,s.endAt)}function Po(s,e){return yr(Is(s),Is(e))&&s.limitType===e.limitType}function Zl(s){return`${mn(Is(s))}|lt:${s.limitType}`}function Iu(s){return`Query(target=${function(s){let e=s.path.canonicalString();return null!==s.collectionGroup&&(e+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(e+=`, filters: [${s.filters.map(r=>{return`${(a=r).field.canonicalString()} ${a.op} ${fo(a.value)}`;var a}).join(", ")}]`),Es(s.limit)||(e+=", limit: "+s.limit),s.orderBy.length>0&&(e+=`, orderBy: [${s.orderBy.map(r=>{return`${(a=r).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),s.startAt&&(e+=", startAt: ",e+=s.startAt.inclusive?"b:":"a:",e+=s.startAt.position.map(r=>fo(r)).join(",")),s.endAt&&(e+=", endAt: ",e+=s.endAt.inclusive?"a:":"b:",e+=s.endAt.position.map(r=>fo(r)).join(",")),`Target(${e})`}(Is(s))}; limitType=${s.limitType})`}function Ql(s,e){return e.isFoundDocument()&&function(r,a){const u=a.key.path;return null!==r.collectionGroup?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):Rt.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)}(s,e)&&function(r,a){for(const u of r.explicitOrderBy)if(!u.field.isKeyField()&&null===a.data.field(u.field))return!1;return!0}(s,e)&&function(r,a){for(const u of r.filters)if(!u.matches(a))return!1;return!0}(s,e)&&(a=e,!((r=s).startAt&&!function(u,g,b){const M=dl(u,g,b);return u.inclusive?M<=0:M<0}(r.startAt,Wo(r),a)||r.endAt&&!function(u,g,b){const M=dl(u,g,b);return u.inclusive?M>=0:M>0}(r.endAt,Wo(r),a)));var r,a}function bu(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function ra(s){return(e,r)=>{let a=!1;for(const u of Wo(s)){const g=yc(u,e,r);if(0!==g)return g;a=a||u.field.isKeyField()}return 0}}function yc(s,e,r){const a=s.field.isKeyField()?Rt.comparator(e.key,r.key):function(u,g,b){const M=g.data.field(u),X=b.data.field(u);return null!==M&&null!==X?ha(M,X):Bn()}(s.field,e,r);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return Bn()}}function Xl(s,e){if(s.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vo(e)?"-0":e}}function Jl(s){return{integerValue:""+s}}function Ll(s,e){return Oa(e)?Jl(e):Xl(s,e)}class Cu{constructor(){this._=void 0}}function _c(s,e,r){return s instanceof gl?function(a,u){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return u&&(g.fields.__previous_value__=u),{mapValue:g}}(r,e):s instanceof Ba?vc(s,e):s instanceof Ya?Sa(s,e):function(a,u){const g=pl(a,u),b=Vl(g)+Vl(a.yt);return Pa(g)&&Pa(a.yt)?Jl(b):Xl(a.It,b)}(s,e)}function Rd(s,e,r){return s instanceof Ba?vc(s,e):s instanceof Ya?Sa(s,e):r}function pl(s,e){return s instanceof eu?Pa(r=e)||(a=r)&&"doubleValue"in a?e:{integerValue:0}:null;var a,r}class gl extends Cu{}class Ba extends Cu{constructor(e){super(),this.elements=e}}function vc(s,e){const r=Hc(e);for(const a of s.elements)r.some(u=>Na(u,a))||r.push(a);return{arrayValue:{values:r}}}class Ya extends Cu{constructor(e){super(),this.elements=e}}function Sa(s,e){let r=Hc(e);for(const a of s.elements)r=r.filter(u=>!Na(u,a));return{arrayValue:{values:r}}}class eu extends Cu{constructor(e,r){super(),this.It=e,this.yt=r}}function Vl(s){return Wi(s.integerValue||s.doubleValue)}function Hc(s){return bo(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class wu{constructor(e,r){this.field=e,this.transform=r}}class Ka{constructor(e,r){this.version=e,this.transformResults=r}}class Gi{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Gi}static exists(e){return new Gi(void 0,e)}static updateTime(e){return new Gi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Du(s,e){return void 0!==s.updateTime?e.isFoundDocument()&&e.version.isEqual(s.updateTime):void 0===s.exists||s.exists===e.isFoundDocument()}class Ku{}function Zu(s,e){if(!s.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return s.isNoDocument()?new su(s.key,Gi.none()):new nu(s.key,s.data,Gi.none());{const r=s.data,a=Z.empty();let u=new Zi(ut.comparator);for(let g of e.fields)if(!u.has(g)){let b=r.field(g);null===b&&g.length>1&&(g=g.popLast(),b=r.field(g)),null===b?a.delete(g):a.set(g,b),u=u.add(g)}return new $a(s.key,a,new _o(u.toArray()),Gi.none())}}function Qu(s,e,r){s instanceof nu?function(a,u,g){const b=a.value.clone(),M=Wc(a.fieldTransforms,u,g.transformResults);b.setAll(M),u.convertToFoundDocument(g.version,b).setHasCommittedMutations()}(s,e,r):s instanceof $a?function(a,u,g){if(!Du(a.precondition,u))return void u.convertToUnknownDocument(g.version);const b=Wc(a.fieldTransforms,u,g.transformResults),M=u.data;M.setAll(ru(a)),M.setAll(b),u.convertToFoundDocument(g.version,M).setHasCommittedMutations()}(s,e,r):e.convertToNoDocument(r.version).setHasCommittedMutations()}function Tu(s,e,r,a){return s instanceof nu?function(u,g,b,M){if(!Du(u.precondition,g))return b;const X=u.value.clone(),se=iu(u.fieldTransforms,M,g);return X.setAll(se),g.convertToFoundDocument(g.version,X).setHasLocalMutations(),null}(s,e,r,a):s instanceof $a?function(u,g,b,M){if(!Du(u.precondition,g))return b;const X=iu(u.fieldTransforms,M,g),se=g.data;return se.setAll(ru(u)),se.setAll(X),g.convertToFoundDocument(g.version,se).setHasLocalMutations(),null===b?null:b.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(Me=>Me.field))}(s,e,r,a):(b=r,Du(s.precondition,g=e)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):b);var g,b}function tu(s,e){let r=null;for(const a of s.fieldTransforms){const u=e.data.field(a.field),g=pl(a.transform,u||null);null!=g&&(null===r&&(r=Z.empty()),r.set(a.field,g))}return r||null}function Za(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&(a=e.fieldTransforms,!!(void 0===(r=s.fieldTransforms)&&void 0===a||r&&a&&uo(r,a,(u,g)=>function(s,e){return s.field.isEqual(e.field)&&(a=e.transform,(r=s.transform)instanceof Ba&&a instanceof Ba||r instanceof Ya&&a instanceof Ya?uo(r.elements,a.elements,Na):r instanceof eu&&a instanceof eu?Na(r.yt,a.yt):r instanceof gl&&a instanceof gl);var r,a}(u,g))))&&(0===s.type?s.value.isEqual(e.value):1!==s.type||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask));var r,a}class nu extends Ku{constructor(e,r,a,u=[]){super(),this.key=e,this.value=r,this.precondition=a,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class $a extends Ku{constructor(e,r,a,u,g=[]){super(),this.key=e,this.data=r,this.fieldMask=a,this.precondition=u,this.fieldTransforms=g,this.type=1}getFieldMask(){return this.fieldMask}}function ru(s){const e=new Map;return s.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const a=s.data.field(r);e.set(r,a)}}),e}function Wc(s,e,r){const a=new Map;Kn(s.length===r.length);for(let u=0;u<r.length;u++){const g=s[u],b=g.transform,M=e.data.field(g.field);a.set(g.field,Rd(b,M,r[u]))}return a}function iu(s,e,r){const a=new Map;for(const u of s){const g=u.transform,b=r.data.field(u.field);a.set(u.field,_c(g,b,e))}return a}class su extends Ku{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Sl extends Ku{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Su{constructor(e){this.count=e}}var Ui,si;function Au(s){switch(s){default:return Bn();case Pt.CANCELLED:case Pt.UNKNOWN:case Pt.DEADLINE_EXCEEDED:case Pt.RESOURCE_EXHAUSTED:case Pt.INTERNAL:case Pt.UNAVAILABLE:case Pt.UNAUTHENTICATED:return!1;case Pt.INVALID_ARGUMENT:case Pt.NOT_FOUND:case Pt.ALREADY_EXISTS:case Pt.PERMISSION_DENIED:case Pt.FAILED_PRECONDITION:case Pt.ABORTED:case Pt.OUT_OF_RANGE:case Pt.UNIMPLEMENTED:case Pt.DATA_LOSS:return!0}}function ou(s){if(void 0===s)return dr("GRPC error has no .code"),Pt.UNKNOWN;switch(s){case Ui.OK:return Pt.OK;case Ui.CANCELLED:return Pt.CANCELLED;case Ui.UNKNOWN:return Pt.UNKNOWN;case Ui.DEADLINE_EXCEEDED:return Pt.DEADLINE_EXCEEDED;case Ui.RESOURCE_EXHAUSTED:return Pt.RESOURCE_EXHAUSTED;case Ui.INTERNAL:return Pt.INTERNAL;case Ui.UNAVAILABLE:return Pt.UNAVAILABLE;case Ui.UNAUTHENTICATED:return Pt.UNAUTHENTICATED;case Ui.INVALID_ARGUMENT:return Pt.INVALID_ARGUMENT;case Ui.NOT_FOUND:return Pt.NOT_FOUND;case Ui.ALREADY_EXISTS:return Pt.ALREADY_EXISTS;case Ui.PERMISSION_DENIED:return Pt.PERMISSION_DENIED;case Ui.FAILED_PRECONDITION:return Pt.FAILED_PRECONDITION;case Ui.ABORTED:return Pt.ABORTED;case Ui.OUT_OF_RANGE:return Pt.OUT_OF_RANGE;case Ui.UNIMPLEMENTED:return Pt.UNIMPLEMENTED;case Ui.DATA_LOSS:return Pt.DATA_LOSS;default:return Bn()}}(si=Ui||(Ui={}))[si.OK=0]="OK",si[si.CANCELLED=1]="CANCELLED",si[si.UNKNOWN=2]="UNKNOWN",si[si.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",si[si.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",si[si.NOT_FOUND=5]="NOT_FOUND",si[si.ALREADY_EXISTS=6]="ALREADY_EXISTS",si[si.PERMISSION_DENIED=7]="PERMISSION_DENIED",si[si.UNAUTHENTICATED=16]="UNAUTHENTICATED",si[si.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",si[si.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",si[si.ABORTED=10]="ABORTED",si[si.OUT_OF_RANGE=11]="OUT_OF_RANGE",si[si.UNIMPLEMENTED=12]="UNIMPLEMENTED",si[si.INTERNAL=13]="INTERNAL",si[si.UNAVAILABLE=14]="UNAVAILABLE",si[si.DATA_LOSS=15]="DATA_LOSS";class ml{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),a=this.inner[r];if(void 0!==a)for(const[u,g]of a)if(this.equalsFn(u,e))return g}has(e){return void 0!==this.get(e)}set(e,r){const a=this.mapKeyFn(e),u=this.inner[a];if(void 0===u)return this.inner[a]=[[e,r]],void this.innerSize++;for(let g=0;g<u.length;g++)if(this.equalsFn(u[g][0],e))return void(u[g]=[e,r]);u.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),a=this.inner[r];if(void 0===a)return!1;for(let u=0;u<a.length;u++)if(this.equalsFn(a[u][0],e))return 1===a.length?delete this.inner[r]:a.splice(u,1),this.innerSize--,!0;return!1}forEach(e){da(this.inner,(r,a)=>{for(const[u,g]of a)e(u,g)})}isEmpty(){return ls(this.inner)}size(){return this.innerSize}}const Gc=new ps(Rt.comparator);function Go(){return Gc}const zc=new ps(Rt.comparator);function yl(...s){let e=zc;for(const r of s)e=e.insert(r.key,r);return e}function xu(s){let e=zc;return s.forEach((r,a)=>e=e.insert(r,a.overlayedDocument)),e}function ia(){return Ro()}function qc(){return Ro()}function Ro(){return new ml(s=>s.toString(),(s,e)=>s.isEqual(e))}const Ru=new ps(Rt.comparator),_l=new Zi(Rt.comparator);function Xr(...s){let e=_l;for(const r of s)e=e.add(r);return e}const Aa=new Zi(fr);function D(){return Aa}class p{constructor(e,r,a,u,g){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=a,this.documentUpdates=u,this.resolvedLimboDocuments=g}static createSynthesizedRemoteEventForCurrentChange(e,r,a){const u=new Map;return u.set(e,_.createSynthesizedTargetChangeForCurrentChange(e,r,a)),new p(fe.min(),u,D(),Go(),Xr())}}class _{constructor(e,r,a,u,g){this.resumeToken=e,this.current=r,this.addedDocuments=a,this.modifiedDocuments=u,this.removedDocuments=g}static createSynthesizedTargetChangeForCurrentChange(e,r,a){return new _(a,r,Xr(),Xr(),Xr())}}class A{constructor(e,r,a,u){this.Tt=e,this.removedTargetIds=r,this.key=a,this.Et=u}}class ne{constructor(e,r){this.targetId=e,this.At=r}}class he{constructor(e,r,a=ts.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=r,this.resumeToken=a,this.cause=u}}class nt{constructor(){this.Rt=0,this.bt=An(),this.Pt=ts.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Xr(),r=Xr(),a=Xr();return this.bt.forEach((u,g)=>{switch(g){case 0:e=e.add(u);break;case 2:r=r.add(u);break;case 1:a=a.add(u);break;default:Bn()}}),new _(this.Pt,this.vt,e,r,a)}Nt(){this.Vt=!1,this.bt=An()}kt(e,r){this.Vt=!0,this.bt=this.bt.insert(e,r)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Zt{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Go(),this.qt=jn(),this.Kt=new Zi(fr)}Gt(e){for(const r of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(r,e.Et):this.jt(r,e.key,e.Et);for(const r of e.removedTargetIds)this.jt(r,e.key,e.Et)}Wt(e){this.forEachTarget(e,r=>{const a=this.zt(r);switch(e.state){case 0:this.Ht(r)&&a.Ct(e.resumeToken);break;case 1:a.Ft(),a.St||a.Nt(),a.Ct(e.resumeToken);break;case 2:a.Ft(),a.St||this.removeTarget(r);break;case 3:this.Ht(r)&&(a.$t(),a.Ct(e.resumeToken));break;case 4:this.Ht(r)&&(this.Jt(r),a.Ct(e.resumeToken));break;default:Bn()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Lt.forEach((a,u)=>{this.Ht(u)&&r(u)})}Yt(e){const r=e.targetId,a=e.At.count,u=this.Xt(r);if(u){const g=u.target;if(Hr(g))if(0===a){const b=new Rt(g.path);this.jt(r,b,Ue.newNoDocument(b,fe.min()))}else Kn(1===a);else this.Zt(r)!==a&&(this.Jt(r),this.Kt=this.Kt.add(r))}}te(e){const r=new Map;this.Lt.forEach((g,b)=>{const M=this.Xt(b);if(M){if(g.current&&Hr(M.target)){const X=new Rt(M.target.path);null!==this.Ut.get(X)||this.ee(b,X)||this.jt(b,X,Ue.newNoDocument(X,e))}g.Dt&&(r.set(b,g.xt()),g.Nt())}});let a=Xr();this.qt.forEach((g,b)=>{let M=!0;b.forEachWhile(X=>{const se=this.Xt(X);return!se||2===se.purpose||(M=!1,!1)}),M&&(a=a.add(g))}),this.Ut.forEach((g,b)=>b.setReadTime(e));const u=new p(e,r,this.Kt,this.Ut,a);return this.Ut=Go(),this.qt=jn(),this.Kt=new Zi(fr),u}Qt(e,r){if(!this.Ht(e))return;const a=this.ee(e,r.key)?2:0;this.zt(e).kt(r.key,a),this.Ut=this.Ut.insert(r.key,r),this.qt=this.qt.insert(r.key,this.ne(r.key).add(e))}jt(e,r,a){if(!this.Ht(e))return;const u=this.zt(e);this.ee(e,r)?u.kt(r,1):u.Ot(r),this.qt=this.qt.insert(r,this.ne(r).delete(e)),a&&(this.Ut=this.Ut.insert(r,a))}removeTarget(e){this.Lt.delete(e)}Zt(e){const r=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let r=this.Lt.get(e);return r||(r=new nt,this.Lt.set(e,r)),r}ne(e){let r=this.qt.get(e);return r||(r=new Zi(fr),this.qt=this.qt.insert(e,r)),r}Ht(e){const r=null!==this.Xt(e);return r||qt("WatchChangeAggregator","Detected inactive target",e),r}Xt(e){const r=this.Lt.get(e);return r&&r.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new nt),this.Bt.getRemoteKeysForTarget(e).forEach(r=>{this.jt(e,r,null)})}ee(e,r){return this.Bt.getRemoteKeysForTarget(e).has(r)}}function jn(){return new ps(Rt.comparator)}function An(){return new ps(Rt.comparator)}const Tr={asc:"ASCENDING",desc:"DESCENDING"},Mi={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Oi{constructor(e,r){this.databaseId=e,this.gt=r}}function Ns(s,e){return s.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fa(s,e){return s.gt?e.toBase64():e.toUint8Array()}function Mu(s,e){return Ns(s,e.toTimestamp())}function mo(s){return Kn(!!s),fe.fromTimestamp(function(e){const r=jo(e);return new bi(r.seconds,r.nanos)}(s))}function Ec(s,e){return(r=s,new K(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function Bl(s){const e=K.fromString(s);return Kn(Ch(e)),e}function Hs(s,e){return Ec(s.databaseId,e.path)}function pa(s,e){const r=Bl(e);if(r.get(1)!==s.databaseId.projectId)throw new pn(Pt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+s.databaseId.projectId);if(r.get(3)!==s.databaseId.database)throw new pn(Pt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+s.databaseId.database);return new Rt(lu(r))}function zo(s,e){return Ec(s.databaseId,e)}function au(s){const e=Bl(s);return 4===e.length?K.emptyPath():lu(e)}function Ws(s){return new K(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function lu(s){return Kn(s.length>4&&"documents"===s.get(4)),s.popFirst(5)}function uu(s,e,r){return{name:Hs(s,e),fields:r.value.mapValue.fields}}function Ic(s,e,r){const a=pa(s,e.name),u=mo(e.updateTime),g=new Z({mapValue:{fields:e.fields}}),b=Ue.newFoundDocument(a,u,g);return r&&b.setHasCommittedMutations(),r?b.setHasCommittedMutations():b}function bc(s,e){let r;if(e instanceof nu)r={update:uu(s,e.key,e.value)};else if(e instanceof su)r={delete:Hs(s,e.key)};else if(e instanceof $a)r={update:uu(s,e.key,e.data),updateMask:Wf(e.fieldMask)};else{if(!(e instanceof Sl))return Bn();r={verify:Hs(s,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(a=>function(u,g){const b=g.transform;if(b instanceof gl)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(b instanceof Ba)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:b.elements}};if(b instanceof Ya)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:b.elements}};if(b instanceof eu)return{fieldPath:g.field.canonicalString(),increment:b.yt};throw Bn()}(0,a))),e.precondition.isNone||(r.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:Mu(s,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:Bn()),r;var u}function Yc(s,e){const r=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?Gi.updateTime(mo(u.updateTime)):void 0!==u.exists?Gi.exists(u.exists):Gi.none():Gi.none(),a=e.updateTransforms?e.updateTransforms.map(u=>function(g,b){let M=null;"setToServerValue"in b?(Kn("REQUEST_TIME"===b.setToServerValue),M=new gl):"appendMissingElements"in b?M=new Ba(b.appendMissingElements.values||[]):"removeAllFromArray"in b?M=new Ya(b.removeAllFromArray.values||[]):"increment"in b?M=new eu(g,b.increment):Bn();const X=ut.fromServerFormat(b.fieldPath);return new wu(X,M)}(s,u)):[];var u;if(e.update){const u=pa(s,e.update.name),g=new Z({mapValue:{fields:e.update.fields}});if(e.updateMask){const b=new _o((e.updateMask.fieldPaths||[]).map(se=>ut.fromServerFormat(se)));return new $a(u,g,b,r,a)}return new nu(u,g,r,a)}if(e.delete){const u=pa(s,e.delete);return new su(u,r)}if(e.verify){const u=pa(s,e.verify);return new Sl(u,r)}return Bn()}function Od(s,e){return{documents:[zo(s,e.path)]}}function Nd(s,e){const r={structuredQuery:{}},a=e.path;null!==e.collectionGroup?(r.parent=zo(s,a),r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r.parent=zo(s,a.popLast()),r.structuredQuery.from=[{collectionId:a.lastSegment()}]);const u=function(X){if(0===X.length)return;const se=X.map(Me=>function(Je){if("=="===Je.op){if(ta(Je.value))return{unaryFilter:{field:Xu(Je.field),op:"IS_NAN"}};if(wl(Je.value))return{unaryFilter:{field:Xu(Je.field),op:"IS_NULL"}}}else if("!="===Je.op){if(ta(Je.value))return{unaryFilter:{field:Xu(Je.field),op:"IS_NOT_NAN"}};if(wl(Je.value))return{unaryFilter:{field:Xu(Je.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xu(Je.field),op:Ih(Je.op),value:Je.value}}}(Me));return 1===se.length?se[0]:{compositeFilter:{op:"AND",filters:se}}}(e.filters);u&&(r.structuredQuery.where=u);const g=function(X){if(0!==X.length)return X.map(se=>{return{field:Xu((Me=se).field),direction:kd(Me.dir)};var Me})}(e.orderBy);g&&(r.structuredQuery.orderBy=g);const b=(se=e.limit,s.gt||Es(se)?se:{value:se});var se,M,X;return null!==b&&(r.structuredQuery.limit=b),e.startAt&&(r.structuredQuery.startAt={before:(M=e.startAt).inclusive,values:M.position}),e.endAt&&(r.structuredQuery.endAt={before:!(X=e.endAt).inclusive,values:X.position}),r}function Eh(s){let e=au(s.parent);const r=s.structuredQuery,a=r.from?r.from.length:0;let u=null;if(a>0){Kn(1===a);const Me=r.from[0];Me.allDescendants?u=Me.collectionId:e=e.child(Me.collectionId)}let g=[];r.where&&(g=Pd(r.where));let b=[];r.orderBy&&(b=r.orderBy.map(Me=>{return new La(Cc((Je=Me).field),function(Lt){switch(Lt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Je.direction));var Je}));let M=null;r.limit&&(M=function(Me){let Je;return Je="object"==typeof Me?Me.value:Me,Es(Je)?null:Je}(r.limit));let X=null;var Me;r.startAt&&(X=new Da((Me=r.startAt).values||[],!!Me.before));let se=null;return r.endAt&&(se=function(Me){return new Da(Me.values||[],!Me.before)}(r.endAt)),Fl(e,u,b,g,M,"F",X,se)}function Pd(s){return s?void 0!==s.unaryFilter?[Kc(s)]:void 0!==s.fieldFilter?[bh(s)]:void 0!==s.compositeFilter?s.compositeFilter.filters.map(e=>Pd(e)).reduce((e,r)=>e.concat(r)):Bn():[]}function kd(s){return Tr[s]}function Ih(s){return Mi[s]}function Xu(s){return{fieldPath:s.canonicalString()}}function Cc(s){return ut.fromServerFormat(s.fieldPath)}function bh(s){return wi.create(Cc(s.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Bn()}}(s.fieldFilter.op),s.fieldFilter.value)}function Kc(s){switch(s.unaryFilter.op){case"IS_NAN":const e=Cc(s.unaryFilter.field);return wi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const r=Cc(s.unaryFilter.field);return wi.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Cc(s.unaryFilter.field);return wi.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Cc(s.unaryFilter.field);return wi.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Bn()}}function Wf(s){const e=[];return s.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function Ch(s){return s.length>=4&&"projects"===s.get(0)&&"databases"===s.get(2)}function Co(s){let e="";for(let r=0;r<s.length;r++)e.length>0&&(e=Ld(e)),e=Fd(s.get(r),e);return Ld(e)}function Fd(s,e){let r=e;const a=s.length;for(let u=0;u<a;u++){const g=s.charAt(u);switch(g){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=g}}return r}function Ld(s){return s+"\x01\x01"}function Al(s){const e=s.length;if(Kn(e>=2),2===e)return Kn("\x01"===s.charAt(0)&&"\x01"===s.charAt(1)),K.emptyPath();const r=e-2,a=[];let u="";for(let g=0;g<e;){const b=s.indexOf("\x01",g);switch((b<0||b>r)&&Bn(),s.charAt(b+1)){case"\x01":const M=s.substring(g,b);let X;0===u.length?X=M:(u+=M,X=u,u=""),a.push(X);break;case"\x10":u+=s.substring(g,b),u+="\0";break;case"\x11":u+=s.substring(g,b+1);break;default:Bn()}g=b+2}return new K(a)}const Vd=["userId","batchId"];function Zc(s,e){return[s,Co(e)]}function wc(s,e,r){return[s,Co(e),r]}const Qa={},wh=["prefixPath","collectionGroup","readTime","documentId"],Dh=["prefixPath","collectionGroup","documentId"],Gf=["collectionGroup","readTime","prefixPath","documentId"],Th=["canonicalId","targetId"],Gg=["targetId","path"],Bd=["path","targetId"],zf=["collectionId","parent"],qf=["indexId","uid"],Yf=["uid","sequenceNumber"],Ju=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],xl=["indexId","uid","orderedDocumentKey"],zg=["userId","collectionPath","documentId"],qg=["userId","collectionPath","largestBatchId"],Sh=["userId","collectionGroup","largestBatchId"],Kf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],$l=[...Kf,"documentOverlays"],$d=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],f=$d,d=[...f,"indexConfiguration","indexState","indexEntries"];class c extends te{constructor(e,r){super(),this.ie=e,this.currentSequenceNumber=r}}function y(s,e){const r=Ln(s);return kn.M(r.ie,e)}class x{constructor(e,r,a,u){this.batchId=e,this.localWriteTime=r,this.baseMutations=a,this.mutations=u}applyToRemoteDocument(e,r){const a=r.mutationResults;for(let u=0;u<this.mutations.length;u++){const g=this.mutations[u];g.key.isEqual(e.key)&&Qu(g,e,a[u])}}applyToLocalView(e,r){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(r=Tu(a,e,r,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(r=Tu(a,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const a=qc();return this.mutations.forEach(u=>{const g=e.get(u.key),b=g.overlayedDocument;let M=this.applyToLocalView(b,g.mutatedFields);M=r.has(u.key)?null:M;const X=Zu(b,M);null!==X&&a.set(u.key,X),b.isValidDocument()||b.convertToNoDocument(fe.min())}),a}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Xr())}isEqual(e){return this.batchId===e.batchId&&uo(this.mutations,e.mutations,(r,a)=>Za(r,a))&&uo(this.baseMutations,e.baseMutations,(r,a)=>Za(r,a))}}class U{constructor(e,r,a,u){this.batch=e,this.commitVersion=r,this.mutationResults=a,this.docVersions=u}static from(e,r,a){Kn(e.mutations.length===a.length);let u=Ru;const g=e.mutations;for(let b=0;b<g.length;b++)u=u.insert(g[b].key,a[b].version);return new U(e,r,a,u)}}class J{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class xe{constructor(e,r,a,u,g=fe.min(),b=fe.min(),M=ts.EMPTY_BYTE_STRING){this.target=e,this.targetId=r,this.purpose=a,this.sequenceNumber=u,this.snapshotVersion=g,this.lastLimboFreeSnapshotVersion=b,this.resumeToken=M}withSequenceNumber(e){return new xe(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,r){return new xe(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new xe(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Ye{constructor(e){this.re=e}}function zt(s,e){const r=e.key,a={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Xt(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())a.document={name:Hs(u=s.re,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:Ns(u,g.version.toTimestamp())};else if(e.isNoDocument())a.noDocument={path:r.path.toArray(),readTime:sn(e.version)};else{if(!e.isUnknownDocument())return Bn();a.unknownDocument={path:r.path.toArray(),version:sn(e.version)}}var u,g;return a}function Xt(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function sn(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Zn(s){const e=new bi(s.seconds,s.nanoseconds);return fe.fromTimestamp(e)}function vr(s,e){const r=(e.baseMutations||[]).map(g=>Yc(s.re,g));for(let g=0;g<e.mutations.length-1;++g){const b=e.mutations[g];g+1<e.mutations.length&&void 0!==e.mutations[g+1].transform&&(b.updateTransforms=e.mutations[g+1].transform.fieldTransforms,e.mutations.splice(g+1,1),++g)}const a=e.mutations.map(g=>Yc(s.re,g)),u=bi.fromMillis(e.localWriteTimeMs);return new x(e.batchId,u,r,a)}function Di(s){const e=Zn(s.readTime),r=void 0!==s.lastLimboFreeSnapshotVersion?Zn(s.lastLimboFreeSnapshotVersion):fe.min();let a;var u;return void 0!==s.query.documents?(Kn(1===(u=s.query).documents.length),a=Is(go(au(u.documents[0])))):a=Is(Eh(s.query)),new xe(a,s.targetId,0,s.lastListenSequenceNumber,e,r,ts.fromBase64String(s.resumeToken))}function ko(s,e){const r=sn(e.snapshotVersion),a=sn(e.lastLimboFreeSnapshotVersion);let u;u=Hr(e.target)?Od(s.re,e.target):Nd(s.re,e.target);const g=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:mn(e.target),readTime:r,resumeToken:g,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:a,query:u}}function cu(s){const e=Eh({parent:s.parent,structuredQuery:s.structuredQuery});return"LAST"===s.limitType?Yu(e,e.limit,"L"):e}function ec(s,e){return new J(e.largestBatchId,Yc(s.re,e.overlayMutation))}function Qc(s,e){const r=e.path.lastSegment();return[s,Co(e.path.popLast()),r]}function Ah(s,e,r,a){return{indexId:s,uid:e.uid||"",sequenceNumber:r,readTime:sn(a.readTime),documentKey:Co(a.documentKey.path),largestBatchId:a.largestBatchId}}class Yg{getBundleMetadata(e,r){return xh(e).get(r).next(a=>{if(a)return{id:(u=a).bundleId,createTime:Zn(u.createTime),version:u.version};var u})}saveBundleMetadata(e,r){return xh(e).put({bundleId:(a=r).id,createTime:sn(mo(a.createTime)),version:a.version});var a}getNamedQuery(e,r){return Zf(e).get(r).next(a=>{if(a)return{name:(u=a).name,query:cu(u.bundledQuery),readTime:Zn(u.readTime)};var u})}saveNamedQuery(e,r){return Zf(e).put({name:(a=r).name,readTime:sn(mo(a.readTime)),bundledQuery:a.bundledQuery});var a}}function xh(s){return y(s,"bundles")}function Zf(s){return y(s,"namedQueries")}class Xc{constructor(e,r){this.It=e,this.userId=r}static oe(e,r){return new Xc(e,r.uid||"")}getOverlay(e,r){return Ud(e).get(Qc(this.userId,r)).next(a=>a?ec(this.It,a):null)}getOverlays(e,r){const a=ia();return ge.forEach(r,u=>this.getOverlay(e,u).next(g=>{null!==g&&a.set(u,g)})).next(()=>a)}saveOverlays(e,r,a){const u=[];return a.forEach((g,b)=>{const M=new J(r,b);u.push(this.ue(e,M))}),ge.waitFor(u)}removeOverlaysForBatchId(e,r,a){const u=new Set;r.forEach(b=>u.add(Co(b.getCollectionPath())));const g=[];return u.forEach(b=>{const M=IDBKeyRange.bound([this.userId,b,a],[this.userId,b,a+1],!1,!0);g.push(Ud(e).Y("collectionPathOverlayIndex",M))}),ge.waitFor(g)}getOverlaysForCollection(e,r,a){const u=ia(),g=Co(r),b=IDBKeyRange.bound([this.userId,g,a],[this.userId,g,Number.POSITIVE_INFINITY],!0);return Ud(e).W("collectionPathOverlayIndex",b).next(M=>{for(const X of M){const se=ec(this.It,X);u.set(se.getKey(),se)}return u})}getOverlaysForCollectionGroup(e,r,a,u){const g=ia();let b;const M=IDBKeyRange.bound([this.userId,r,a],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Ud(e).Z({index:"collectionGroupOverlayIndex",range:M},(X,se,Me)=>{const Je=ec(this.It,se);g.size()<u||Je.largestBatchId===b?(g.set(Je.getKey(),Je),b=Je.largestBatchId):Me.done()}).next(()=>g)}ue(e,r){return Ud(e).put(function(a,u,g){const[b,M,X]=Qc(u,g.mutation.key);return{userId:u,collectionPath:M,documentId:X,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:bc(a.re,g.mutation)}}(this.It,this.userId,r))}}function Ud(s){return y(s,"documentOverlays")}class Dc{constructor(){}ce(e,r){this.ae(e,r),r.he()}ae(e,r){if("nullValue"in e)this.le(r,5);else if("booleanValue"in e)this.le(r,10),r.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(r,15),r.fe(Wi(e.integerValue));else if("doubleValue"in e){const a=Wi(e.doubleValue);isNaN(a)?this.le(r,13):(this.le(r,15),vo(a)?r.fe(0):r.fe(a))}else if("timestampValue"in e){const a=e.timestampValue;this.le(r,20),"string"==typeof a?r.de(a):(r.de(`${a.seconds||""}`),r.fe(a.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,r),this.we(r);else if("bytesValue"in e)this.le(r,30),r.me(al(e.bytesValue)),this.we(r);else if("referenceValue"in e)this.ge(e.referenceValue,r);else if("geoPointValue"in e){const a=e.geoPointValue;this.le(r,45),r.fe(a.latitude||0),r.fe(a.longitude||0)}else"mapValue"in e?Dl(e)?this.le(r,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,r),this.we(r)):"arrayValue"in e?(this.pe(e.arrayValue,r),this.we(r)):Bn()}_e(e,r){this.le(r,25),this.Ie(e,r)}Ie(e,r){r.de(e)}ye(e,r){const a=e.fields||{};this.le(r,55);for(const u of Object.keys(a))this._e(u,r),this.ae(a[u],r)}pe(e,r){const a=e.values||[];this.le(r,50);for(const u of a)this.ae(u,r)}ge(e,r){this.le(r,37),Rt.fromName(e).path.forEach(a=>{this.le(r,60),this.Ie(a,r)})}le(e,r){e.fe(r)}we(e){e.fe(2)}}function Kg(s){if(0===s)return 8;let e=0;return s>>4==0&&(e+=4,s<<=4),s>>6==0&&(e+=2,s<<=2),s>>7==0&&(e+=1),e}function Qf(s){const e=64-function(r){let a=0;for(let u=0;u<8;++u){const g=Kg(255&r[u]);if(a+=g,8!==g)break}return a}(s);return Math.ceil(e/8)}Dc.Te=new Dc;class Tc{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const r=e[Symbol.iterator]();let a=r.next();for(;!a.done;)this.Ae(a.value),a=r.next();this.Re()}be(e){const r=e[Symbol.iterator]();let a=r.next();for(;!a.done;)this.Pe(a.value),a=r.next();this.ve()}Ve(e){for(const r of e){const a=r.charCodeAt(0);if(a<128)this.Ae(a);else if(a<2048)this.Ae(960|a>>>6),this.Ae(128|63&a);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a);else{const u=r.codePointAt(0);this.Ae(240|u>>>18),this.Ae(128|63&u>>>12),this.Ae(128|63&u>>>6),this.Ae(128|63&u)}}this.Re()}Se(e){for(const r of e){const a=r.charCodeAt(0);if(a<128)this.Pe(a);else if(a<2048)this.Pe(960|a>>>6),this.Pe(128|63&a);else if(r<"\ud800"||"\udbff"<r)this.Pe(480|a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a);else{const u=r.codePointAt(0);this.Pe(240|u>>>18),this.Pe(128|63&u>>>12),this.Pe(128|63&u>>>6),this.Pe(128|63&u)}}this.ve()}De(e){const r=this.Ce(e),a=Qf(r);this.xe(1+a),this.buffer[this.position++]=255&a;for(let u=r.length-a;u<r.length;++u)this.buffer[this.position++]=255&r[u]}Ne(e){const r=this.Ce(e),a=Qf(r);this.xe(1+a),this.buffer[this.position++]=~(255&a);for(let u=r.length-a;u<r.length;++u)this.buffer[this.position++]=~(255&r[u])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const r=function(u){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,u,!1),new Uint8Array(g.buffer)}(e),a=0!=(128&r[0]);r[0]^=a?255:128;for(let u=1;u<r.length;++u)r[u]^=a?255:0;return r}Ae(e){const r=255&e;0===r?(this.Oe(0),this.Oe(255)):255===r?(this.Oe(255),this.Oe(0)):this.Oe(r)}Pe(e){const r=255&e;0===r?(this.Fe(0),this.Fe(255)):255===r?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const r=e+this.position;if(r<=this.buffer.length)return;let a=2*this.buffer.length;a<r&&(a=r);const u=new Uint8Array(a);u.set(this.buffer),this.buffer=u}}class Zg{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class Qg{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class jd{constructor(){this.Be=new Tc,this.Le=new Zg(this.Be),this.Ue=new Qg(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class du{constructor(e,r,a,u){this.indexId=e,this.documentKey=r,this.arrayValue=a,this.directionalValue=u}Ke(){const e=this.directionalValue.length,r=0===e||255===this.directionalValue[e-1]?e+1:e,a=new Uint8Array(r);return a.set(this.directionalValue,0),r!==e?a.set([0],this.directionalValue.length):++a[a.length-1],new du(this.indexId,this.documentKey,this.arrayValue,a)}}function Sc(s,e){let r=s.indexId-e.indexId;return 0!==r?r:(r=Xf(s.arrayValue,e.arrayValue),0!==r?r:(r=Xf(s.directionalValue,e.directionalValue),0!==r?r:Rt.comparator(s.documentKey,e.documentKey)))}function Xf(s,e){for(let r=0;r<s.length&&r<e.length;++r){const a=s[r]-e[r];if(0!==a)return a}return s.length-e.length}class Xg{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const r of e.filters){const a=r;a.dt()?this.je=a:this.Qe.push(a)}}We(e){const r=Br(e);if(void 0!==r&&!this.ze(r))return!1;const a=pi(e);let u=0,g=0;for(;u<a.length&&this.ze(a[u]);++u);if(u===a.length)return!0;if(void 0!==this.je){const b=a[u];if(!this.He(this.je,b)||!this.Je(this.Ge[g++],b))return!1;++u}for(;u<a.length;++u){const b=a[u];if(g>=this.Ge.length||!this.Je(this.Ge[g++],b))return!1}return!0}ze(e){for(const r of this.Qe)if(this.He(r,e))return!0;return!1}He(e,r){return!(void 0===e||!e.field.isEqual(r.fieldPath))&&2===r.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,r){return!!e.field.isEqual(r.fieldPath)&&(0===r.kind&&"asc"===e.dir||1===r.kind&&"desc"===e.dir)}}class Jg{constructor(){this.Ye=new Hd}addToCollectionParentIndex(e,r){return this.Ye.add(r),ge.resolve()}getCollectionParents(e,r){return ge.resolve(this.Ye.getEntries(r))}addFieldIndex(e,r){return ge.resolve()}deleteFieldIndex(e,r){return ge.resolve()}getDocumentsMatchingTarget(e,r){return ge.resolve(null)}getIndexType(e,r){return ge.resolve(0)}getFieldIndexes(e,r){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,r){return ge.resolve(S.min())}getMinOffsetFromCollectionGroup(e,r){return ge.resolve(S.min())}updateCollectionGroup(e,r,a){return ge.resolve()}updateIndexEntries(e,r){return ge.resolve()}}class Hd{constructor(){this.index={}}add(e){const r=e.lastSegment(),a=e.popLast(),u=this.index[r]||new Zi(K.comparator),g=!u.has(a);return this.index[r]=u.add(a),g}has(e){const r=e.lastSegment(),a=e.popLast(),u=this.index[r];return u&&u.has(a)}getEntries(e){return(this.index[e]||new Zi(K.comparator)).toArray()}}const Wd=new Uint8Array(0);class Rh{constructor(e,r){this.user=e,this.databaseId=r,this.Xe=new Hd,this.Ze=new ml(a=>mn(a),(a,u)=>yr(a,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.Xe.has(r)){const a=r.lastSegment(),u=r.popLast();e.addOnCommittedListener(()=>{this.Xe.add(r)});const g={collectionId:a,parent:Co(u)};return Gd(e).put(g)}return ge.resolve()}getCollectionParents(e,r){const a=[],u=IDBKeyRange.bound([r,""],[Zs(r),""],!1,!0);return Gd(e).W(u).next(g=>{for(const b of g){if(b.collectionId!==r)break;a.push(Al(b.parent))}return a})}addFieldIndex(e,r){const a=ed(e),u={indexId:(b=r).indexId,collectionGroup:b.collectionGroup,fields:b.fields.map(M=>[M.fieldPath.canonicalString(),M.kind])};var b;delete u.indexId;const g=a.add(u);if(r.indexState){const b=td(e);return g.next(M=>{b.put(Ah(M,this.user,r.indexState.sequenceNumber,r.indexState.offset))})}return g.next()}deleteFieldIndex(e,r){const a=ed(e),u=td(e),g=Jc(e);return a.delete(r.indexId).next(()=>u.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>g.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,r){const a=Jc(e);let u=!0;const g=new Map;return ge.forEach(this.tn(r),b=>this.en(e,b).next(M=>{u&&(u=!!M),g.set(b,M)})).next(()=>{if(u){let b=Xr();const M=[];return ge.forEach(g,(X,se)=>{var Me;qt("IndexedDbIndexManager",`Using index ${Me=X,`id=${Me.indexId}|cg=${Me.collectionGroup}|f=${Me.fields.map(us=>`${us.fieldPath}:${us.kind}`).join(",")}`} to execute ${mn(r)}`);const Je=function(us,oa){const bs=Br(oa);if(void 0===bs)return null;for(const ns of $r(us,bs.fieldPath))switch(ns.op){case"array-contains-any":return ns.value.arrayValue.values||[];case"array-contains":return[ns.value]}return null}(se,X),Lt=function(us,oa){const bs=new Map;for(const ns of pi(oa))for(const Lo of $r(us,ns.fieldPath))switch(Lo.op){case"==":case"in":bs.set(ns.fieldPath.canonicalString(),Lo.value);break;case"not-in":case"!=":return bs.set(ns.fieldPath.canonicalString(),Lo.value),Array.from(bs.values())}return null}(se,X),on=function(us,oa){const bs=[];let ns=!0;for(const Lo of pi(oa)){const hh=0===Lo.kind?_r(us,Lo.fieldPath,us.startAt):xi(us,Lo.fieldPath,us.startAt);bs.push(hh.value),ns&&(ns=hh.inclusive)}return new Da(bs,ns)}(se,X),_n=function(us,oa){const bs=[];let ns=!0;for(const Lo of pi(oa)){const hh=0===Lo.kind?xi(us,Lo.fieldPath,us.endAt):_r(us,Lo.fieldPath,us.endAt);bs.push(hh.value),ns&&(ns=hh.inclusive)}return new Da(bs,ns)}(se,X),tr=this.nn(X,se,on),hr=this.nn(X,se,_n),Pi=this.sn(X,se,Lt),Fs=this.rn(X.indexId,Je,tr,on.inclusive,hr,_n.inclusive,Pi);return ge.forEach(Fs,us=>a.J(us,r.limit).next(oa=>{oa.forEach(bs=>{const ns=Rt.fromSegments(bs.documentKey);b.has(ns)||(b=b.add(ns),M.push(ns))})}))}).next(()=>M)}return ge.resolve(null)})}tn(e){let r=this.Ze.get(e);return r||(r=[e],this.Ze.set(e,r),r)}rn(e,r,a,u,g,b,M){const X=(null!=r?r.length:1)*Math.max(a.length,g.length),se=X/(null!=r?r.length:1),Me=[];for(let Je=0;Je<X;++Je){const Lt=r?this.on(r[Je/se]):Wd,on=this.un(e,Lt,a[Je%se],u),_n=this.cn(e,Lt,g[Je%se],b),tr=M.map(hr=>this.un(e,Lt,hr,!0));Me.push(...this.createRange(on,_n,tr))}return Me}un(e,r,a,u){const g=new du(e,Rt.empty(),r,a);return u?g:g.Ke()}cn(e,r,a,u){const g=new du(e,Rt.empty(),r,a);return u?g.Ke():g}en(e,r){const a=new Xg(r),u=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,u).next(g=>{let b=null;for(const M of g)a.We(M)&&(!b||M.fields.length>b.fields.length)&&(b=M);return b})}getIndexType(e,r){let a=2;return ge.forEach(this.tn(r),u=>this.en(e,u).next(g=>{g?0!==a&&g.fields.length<function(b){let M=new Zi(ut.comparator),X=!1;for(const se of b.filters){const Me=se;Me.field.isKeyField()||("array-contains"===Me.op||"array-contains-any"===Me.op?X=!0:M=M.add(Me.field))}for(const se of b.orderBy)se.field.isKeyField()||(M=M.add(se.field));return M.size+(X?1:0)}(u)&&(a=1):a=0})).next(()=>a)}an(e,r){const a=new jd;for(const u of pi(e)){const g=r.data.field(u.fieldPath);if(null==g)return null;const b=a.qe(u.kind);Dc.Te.ce(g,b)}return a.$e()}on(e){const r=new jd;return Dc.Te.ce(e,r.qe(0)),r.$e()}hn(e,r){const a=new jd;return Dc.Te.ce(ea(this.databaseId,r),a.qe(function(u){const g=pi(u);return 0===g.length?0:g[g.length-1].kind}(e))),a.$e()}sn(e,r,a){if(null===a)return[];let u=[];u.push(new jd);let g=0;for(const b of pi(e)){const M=a[g++];for(const X of u)if(this.ln(r,b.fieldPath)&&bo(M))u=this.fn(u,b,M);else{const se=X.qe(b.kind);Dc.Te.ce(M,se)}}return this.dn(u)}nn(e,r,a){return this.sn(e,r,a.position)}dn(e){const r=[];for(let a=0;a<e.length;++a)r[a]=e[a].$e();return r}fn(e,r,a){const u=[...e],g=[];for(const b of a.arrayValue.values||[])for(const M of u){const X=new jd;X.seed(M.$e()),Dc.Te.ce(b,X.qe(r.kind)),g.push(X)}return g}ln(e,r){return!!e.filters.find(a=>a instanceof wi&&a.field.isEqual(r)&&("in"===a.op||"not-in"===a.op))}getFieldIndexes(e,r){const a=ed(e),u=td(e);return(r?a.W("collectionGroupIndex",IDBKeyRange.bound(r,r)):a.W()).next(g=>{const b=[];return ge.forEach(g,M=>u.get([M.indexId,this.uid]).next(X=>{b.push(function(se,Me){const Je=Me?new Xo(Me.sequenceNumber,new S(Zn(Me.readTime),new Rt(Al(Me.documentKey)),Me.largestBatchId)):Xo.empty(),Lt=se.fields.map(([on,_n])=>new Ao(ut.fromServerFormat(on),_n));return new ir(se.indexId,se.collectionGroup,Lt,Je)}(M,X))})).next(()=>b)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>0===r.length?null:(r.sort((a,u)=>{const g=a.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==g?g:fr(a.collectionGroup,u.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,a){const u=ed(e),g=td(e);return this._n(e).next(b=>u.W("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(M=>ge.forEach(M,X=>g.put(Ah(X.indexId,this.user,b,a)))))}updateIndexEntries(e,r){const a=new Map;return ge.forEach(r,(u,g)=>{const b=a.get(u.collectionGroup);return(b?ge.resolve(b):this.getFieldIndexes(e,u.collectionGroup)).next(M=>(a.set(u.collectionGroup,M),ge.forEach(M,X=>this.wn(e,u,X).next(se=>{const Me=this.mn(g,X);return se.isEqual(Me)?ge.resolve():this.gn(e,g,X,se,Me)}))))})}yn(e,r,a,u){return Jc(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.hn(a,r.key),documentKey:r.key.path.toArray()})}pn(e,r,a,u){return Jc(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.hn(a,r.key),r.key.path.toArray()])}wn(e,r,a){const u=Jc(e);let g=new Zi(Sc);return u.Z({index:"documentKeyIndex",range:IDBKeyRange.only([a.indexId,this.uid,this.hn(a,r)])},(b,M)=>{g=g.add(new du(a.indexId,r,M.arrayValue,M.directionalValue))}).next(()=>g)}mn(e,r){let a=new Zi(Sc);const u=this.an(r,e);if(null==u)return a;const g=Br(r);if(null!=g){const b=e.data.field(g.fieldPath);if(bo(b))for(const M of b.arrayValue.values||[])a=a.add(new du(r.indexId,e.key,this.on(M),u))}else a=a.add(new du(r.indexId,e.key,Wd,u));return a}gn(e,r,a,u,g){qt("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const b=[];return function(M,X,se,Me,Je){const Lt=M.getIterator(),on=X.getIterator();let _n=Ca(Lt),tr=Ca(on);for(;_n||tr;){let hr=!1,Pi=!1;if(_n&&tr){const Fs=se(_n,tr);Fs<0?Pi=!0:Fs>0&&(hr=!0)}else null!=_n?Pi=!0:hr=!0;hr?(Me(tr),tr=Ca(on)):Pi?(Je(_n),_n=Ca(Lt)):(_n=Ca(Lt),tr=Ca(on))}}(u,g,Sc,M=>{b.push(this.yn(e,r,a,M))},M=>{b.push(this.pn(e,r,a,M))}),ge.waitFor(b)}_n(e){let r=1;return td(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(a,u,g)=>{g.done(),r=u.sequenceNumber+1}).next(()=>r)}createRange(e,r,a){a=a.sort((b,M)=>Sc(b,M)).filter((b,M,X)=>!M||0!==Sc(b,X[M-1]));const u=[];u.push(e);for(const b of a){const M=Sc(b,e),X=Sc(b,r);if(0===M)u[0]=e.Ke();else if(M>0&&X<0)u.push(b),u.push(b.Ke());else if(X>0)break}u.push(r);const g=[];for(let b=0;b<u.length;b+=2)g.push(IDBKeyRange.bound([u[b].indexId,this.uid,u[b].arrayValue,u[b].directionalValue,Wd,[]],[u[b+1].indexId,this.uid,u[b+1].arrayValue,u[b+1].directionalValue,Wd,[]]));return g}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(Mh)}getMinOffset(e,r){return ge.mapArray(this.tn(r),a=>this.en(e,a).next(u=>u||Bn())).next(Mh)}}function Gd(s){return y(s,"collectionParents")}function Jc(s){return y(s,"indexEntries")}function ed(s){return y(s,"indexConfiguration")}function td(s){return y(s,"indexState")}function Mh(s){Kn(0!==s.length);let e=s[0].indexState.offset,r=e.largestBatchId;for(let a=1;a<s.length;a++){const u=s[a].indexState.offset;T(u,e)<0&&(e=u),r<u.largestBatchId&&(r=u.largestBatchId)}return new S(e.readTime,e.documentKey,r)}const nd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Xa{constructor(e,r,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=a}static withCacheSize(e){return new Xa(e,Xa.DEFAULT_COLLECTION_PERCENTILE,Xa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Jf(s,e,r){const a=s.store("mutations"),u=s.store("documentMutations"),g=[],b=IDBKeyRange.only(r.batchId);let M=0;const X=a.Z({range:b},(Me,Je,Lt)=>(M++,Lt.delete()));g.push(X.next(()=>{Kn(1===M)}));const se=[];for(const Me of r.mutations){const Je=wc(e,Me.key.path,r.batchId);g.push(u.delete(Je)),se.push(Me.key)}return ge.waitFor(g).next(()=>se)}function Oh(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw Bn();e=s.noDocument}return JSON.stringify(e).length}Xa.DEFAULT_COLLECTION_PERCENTILE=10,Xa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xa.DEFAULT=new Xa(41943040,Xa.DEFAULT_COLLECTION_PERCENTILE,Xa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xa.DISABLED=new Xa(-1,0,0);class Nh{constructor(e,r,a,u){this.userId=e,this.It=r,this.indexManager=a,this.referenceDelegate=u,this.In={}}static oe(e,r,a,u){Kn(""!==e.uid);const g=e.isAuthenticated()?e.uid:"";return new Nh(g,r,a,u)}checkEmpty(e){let r=!0;const a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hu(e).Z({index:"userMutationsIndex",range:a},(u,g,b)=>{r=!1,b.done()}).next(()=>r)}addMutationBatch(e,r,a,u){const g=Ac(e),b=hu(e);return b.add({}).next(M=>{Kn("number"==typeof M);const X=new x(M,r,a,u),se=function(Lt,on,_n){const tr=_n.baseMutations.map(Pi=>bc(Lt.re,Pi)),hr=_n.mutations.map(Pi=>bc(Lt.re,Pi));return{userId:on,batchId:_n.batchId,localWriteTimeMs:_n.localWriteTime.toMillis(),baseMutations:tr,mutations:hr}}(this.It,this.userId,X),Me=[];let Je=new Zi((Lt,on)=>fr(Lt.canonicalString(),on.canonicalString()));for(const Lt of u){const on=wc(this.userId,Lt.key.path,M);Je=Je.add(Lt.key.path.popLast()),Me.push(b.put(se)),Me.push(g.put(on,Qa))}return Je.forEach(Lt=>{Me.push(this.indexManager.addToCollectionParentIndex(e,Lt))}),e.addOnCommittedListener(()=>{this.In[M]=X.keys()}),ge.waitFor(Me).next(()=>X)})}lookupMutationBatch(e,r){return hu(e).get(r).next(a=>a?(Kn(a.userId===this.userId),vr(this.It,a)):null)}Tn(e,r){return this.In[r]?ge.resolve(this.In[r]):this.lookupMutationBatch(e,r).next(a=>{if(a){const u=a.keys();return this.In[r]=u,u}return null})}getNextMutationBatchAfterBatchId(e,r){const a=r+1,u=IDBKeyRange.lowerBound([this.userId,a]);let g=null;return hu(e).Z({index:"userMutationsIndex",range:u},(b,M,X)=>{M.userId===this.userId&&(Kn(M.batchId>=a),g=vr(this.It,M)),X.done()}).next(()=>g)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let a=-1;return hu(e).Z({index:"userMutationsIndex",range:r,reverse:!0},(u,g,b)=>{a=g.batchId,b.done()}).next(()=>a)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hu(e).W("userMutationsIndex",r).next(a=>a.map(u=>vr(this.It,u)))}getAllMutationBatchesAffectingDocumentKey(e,r){const a=Zc(this.userId,r.path),u=IDBKeyRange.lowerBound(a),g=[];return Ac(e).Z({range:u},(b,M,X)=>{const[se,Me,Je]=b,Lt=Al(Me);if(se===this.userId&&r.path.isEqual(Lt))return hu(e).get(Je).next(on=>{if(!on)throw Bn();Kn(on.userId===this.userId),g.push(vr(this.It,on))});X.done()}).next(()=>g)}getAllMutationBatchesAffectingDocumentKeys(e,r){let a=new Zi(fr);const u=[];return r.forEach(g=>{const b=Zc(this.userId,g.path),M=IDBKeyRange.lowerBound(b),X=Ac(e).Z({range:M},(se,Me,Je)=>{const[Lt,on,_n]=se,tr=Al(on);Lt===this.userId&&g.path.isEqual(tr)?a=a.add(_n):Je.done()});u.push(X)}),ge.waitFor(u).next(()=>this.En(e,a))}getAllMutationBatchesAffectingQuery(e,r){const a=r.path,u=a.length+1,g=Zc(this.userId,a),b=IDBKeyRange.lowerBound(g);let M=new Zi(fr);return Ac(e).Z({range:b},(X,se,Me)=>{const[Je,Lt,on]=X,_n=Al(Lt);Je===this.userId&&a.isPrefixOf(_n)?_n.length===u&&(M=M.add(on)):Me.done()}).next(()=>this.En(e,M))}En(e,r){const a=[],u=[];return r.forEach(g=>{u.push(hu(e).get(g).next(b=>{if(null===b)throw Bn();Kn(b.userId===this.userId),a.push(vr(this.It,b))}))}),ge.waitFor(u).next(()=>a)}removeMutationBatch(e,r){return Jf(e.ie,this.userId,r).next(a=>(e.addOnCommittedListener(()=>{this.An(r.batchId)}),ge.forEach(a,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return ge.resolve();const a=IDBKeyRange.lowerBound([this.userId]),u=[];return Ac(e).Z({range:a},(g,b,M)=>{if(g[0]===this.userId){const X=Al(g[1]);u.push(X)}else M.done()}).next(()=>{Kn(0===u.length)})})}containsKey(e,r){return ep(e,this.userId,r)}Rn(e){return Jy(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ep(s,e,r){const a=Zc(e,r.path),u=a[1],g=IDBKeyRange.lowerBound(a);let b=!1;return Ac(s).Z({range:g,X:!0},(M,X,se)=>{const[Me,Je,Lt]=M;Me===e&&Je===u&&(b=!0),se.done()}).next(()=>b)}function hu(s){return y(s,"mutations")}function Ac(s){return y(s,"documentMutations")}function Jy(s){return y(s,"mutationQueues")}class tc{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new tc(0)}static vn(){return new tc(-1)}}class e_{constructor(e,r){this.referenceDelegate=e,this.It=r}allocateTargetId(e){return this.Vn(e).next(r=>{const a=new tc(r.highestTargetId);return r.highestTargetId=a.next(),this.Sn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(r=>fe.fromTimestamp(new bi(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,a){return this.Vn(e).next(u=>(u.highestListenSequenceNumber=r,a&&(u.lastRemoteSnapshotVersion=a.toTimestamp()),r>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=r),this.Sn(e,u)))}addTargetData(e,r){return this.Dn(e,r).next(()=>this.Vn(e).next(a=>(a.targetCount+=1,this.Cn(r,a),this.Sn(e,a))))}updateTargetData(e,r){return this.Dn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>xc(e).delete(r.targetId)).next(()=>this.Vn(e)).next(a=>(Kn(a.targetCount>0),a.targetCount-=1,this.Sn(e,a)))}removeTargets(e,r,a){let u=0;const g=[];return xc(e).Z((b,M)=>{const X=Di(M);X.sequenceNumber<=r&&null===a.get(X.targetId)&&(u++,g.push(this.removeTargetData(e,X)))}).next(()=>ge.waitFor(g)).next(()=>u)}forEachTarget(e,r){return xc(e).Z((a,u)=>{const g=Di(u);r(g)})}Vn(e){return em(e).get("targetGlobalKey").next(r=>(Kn(null!==r),r))}Sn(e,r){return em(e).put("targetGlobalKey",r)}Dn(e,r){return xc(e).put(ko(this.It,r))}Cn(e,r){let a=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,a=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,a=!0),a}getTargetCount(e){return this.Vn(e).next(r=>r.targetCount)}getTargetData(e,r){const a=mn(r),u=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]);let g=null;return xc(e).Z({range:u,index:"queryTargetsIndex"},(b,M,X)=>{const se=Di(M);yr(r,se.target)&&(g=se,X.done())}).next(()=>g)}addMatchingKeys(e,r,a){const u=[],g=nc(e);return r.forEach(b=>{const M=Co(b.path);u.push(g.put({targetId:a,path:M})),u.push(this.referenceDelegate.addReference(e,a,b))}),ge.waitFor(u)}removeMatchingKeys(e,r,a){const u=nc(e);return ge.forEach(r,g=>{const b=Co(g.path);return ge.waitFor([u.delete([a,b]),this.referenceDelegate.removeReference(e,a,g)])})}removeMatchingKeysForTargetId(e,r){const a=nc(e),u=IDBKeyRange.bound([r],[r+1],!1,!0);return a.delete(u)}getMatchingKeysForTargetId(e,r){const a=IDBKeyRange.bound([r],[r+1],!1,!0),u=nc(e);let g=Xr();return u.Z({range:a,X:!0},(b,M,X)=>{const se=Al(b[1]),Me=new Rt(se);g=g.add(Me)}).next(()=>g)}containsKey(e,r){const a=Co(r.path),u=IDBKeyRange.bound([a],[Zs(a)],!1,!0);let g=0;return nc(e).Z({index:"documentTargetsIndex",X:!0,range:u},([b,M],X,se)=>{0!==b&&(g++,se.done())}).next(()=>g>0)}se(e,r){return xc(e).get(r).next(a=>a?Di(a):null)}}function xc(s){return y(s,"targets")}function em(s){return y(s,"targetGlobal")}function nc(s){return y(s,"targetDocuments")}function Rl([s,e],[r,a]){const u=fr(s,r);return 0===u?fr(e,a):u}class t_{constructor(e){this.xn=e,this.buffer=new Zi(Rl),this.Nn=0}kn(){return++this.Nn}On(e){const r=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(r);else{const a=this.buffer.last();Rl(r,a)<0&&(this.buffer=this.buffer.delete(a).add(r))}}get maxValue(){return this.buffer.last()[0]}}class tm{constructor(e,r,a){this.garbageCollector=e,this.asyncQueue=r,this.localStore=a,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var r=this;qt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,E.Z)(function*(){r.Mn=null;try{yield r.localStore.collectGarbage(r.garbageCollector)}catch(a){ti(a)?qt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield ye(a)}yield r.Fn(3e5)}))}}class n_{constructor(e,r){this.$n=e,this.params=r}calculateTargetCount(e,r){return this.$n.Bn(e).next(a=>Math.floor(r/100*a))}nthSequenceNumber(e,r){if(0===r)return ge.resolve(as.at);const a=new t_(r);return this.$n.forEachTarget(e,u=>a.On(u.sequenceNumber)).next(()=>this.$n.Ln(e,u=>a.On(u))).next(()=>a.maxValue)}removeTargets(e,r,a){return this.$n.removeTargets(e,r,a)}removeOrphanedDocuments(e,r){return this.$n.removeOrphanedDocuments(e,r)}collect(e,r){return-1===this.params.cacheSizeCollectionThreshold?(qt("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(nd)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(qt("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nd):this.Un(e,r))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,r){let a,u,g,b,M,X,se;const Me=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Je=>(Je>this.params.maximumSequenceNumbersToCollect?(qt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Je}`),u=this.params.maximumSequenceNumbersToCollect):u=Je,b=Date.now(),this.nthSequenceNumber(e,u))).next(Je=>(a=Je,M=Date.now(),this.removeTargets(e,a,r))).next(Je=>(g=Je,X=Date.now(),this.removeOrphanedDocuments(e,a))).next(Je=>(se=Date.now(),Vr()<=L.in.DEBUG&&qt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${b-Me}ms\n\tDetermined least recently used ${u} in `+(M-b)+`ms\n\tRemoved ${g} targets in `+(X-M)+`ms\n\tRemoved ${Je} documents in `+(se-X)+`ms\nTotal Duration: ${se-Me}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:g,documentsRemoved:Je})))}}class r_{constructor(e,r){this.db=e,this.garbageCollector=new n_(this,r)}Bn(e){const r=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(a=>r.next(u=>a+u))}qn(e){let r=0;return this.Ln(e,a=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Ln(e,r){return this.Kn(e,(a,u)=>r(u))}addReference(e,r,a){return Ph(e,a)}removeReference(e,r,a){return Ph(e,a)}removeTargets(e,r,a){return this.db.getTargetCache().removeTargets(e,r,a)}markPotentiallyOrphaned(e,r){return Ph(e,r)}Gn(e,r){return function(a,u){let g=!1;return Jy(a).tt(b=>ep(a,b,u).next(M=>(M&&(g=!0),ge.resolve(!M)))).next(()=>g)}(e,r)}removeOrphanedDocuments(e,r){const a=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let g=0;return this.Kn(e,(b,M)=>{if(M<=r){const X=this.Gn(e,b).next(se=>{if(!se)return g++,a.getEntry(e,b).next(()=>(a.removeEntry(b,fe.min()),nc(e).delete([0,Co(b.path)])))});u.push(X)}}).next(()=>ge.waitFor(u)).next(()=>a.apply(e)).next(()=>g)}removeTarget(e,r){const a=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,a)}updateLimboDocument(e,r){return Ph(e,r)}Kn(e,r){const a=nc(e);let u,g=as.at;return a.Z({index:"documentTargetsIndex"},([b,M],{path:X,sequenceNumber:se})=>{0===b?(g!==as.at&&r(new Rt(Al(u)),g),g=se,u=X):g=as.at}).next(()=>{g!==as.at&&r(new Rt(Al(u)),g)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ph(s,e){return nc(s).put((a=s.currentSequenceNumber,{targetId:0,path:Co(e.path),sequenceNumber:a}));var a}class nm{constructor(){this.changes=new ml(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Ue.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const a=this.changes.get(r);return void 0!==a?ge.resolve(a):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class rm{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,a){return Gr(e).put(a)}removeEntry(e,r,a){return Gr(e).delete(function(u,g){const b=u.path.toArray();return[b.slice(0,b.length-2),b[b.length-2],Xt(g),b[b.length-1]]}(r,a))}updateMetadata(e,r){return this.getMetadata(e).next(a=>(a.byteSize+=r,this.Qn(e,a)))}getEntry(e,r){let a=Ue.newInvalidDocument(r);return Gr(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(rd(r))},(u,g)=>{a=this.jn(r,g)}).next(()=>a)}Wn(e,r){let a={size:0,document:Ue.newInvalidDocument(r)};return Gr(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(rd(r))},(u,g)=>{a={document:this.jn(r,g),size:Oh(g)}}).next(()=>a)}getEntries(e,r){let a=Go();return this.zn(e,r,(u,g)=>{const b=this.jn(u,g);a=a.insert(u,b)}).next(()=>a)}Hn(e,r){let a=Go(),u=new ps(Rt.comparator);return this.zn(e,r,(g,b)=>{const M=this.jn(g,b);a=a.insert(g,M),u=u.insert(g,Oh(b))}).next(()=>({documents:a,Jn:u}))}zn(e,r,a){if(r.isEmpty())return ge.resolve();let u=new Zi(zd);r.forEach(X=>u=u.add(X));const g=IDBKeyRange.bound(rd(u.first()),rd(u.last())),b=u.getIterator();let M=b.getNext();return Gr(e).Z({index:"documentKeyIndex",range:g},(X,se,Me)=>{const Je=Rt.fromSegments([...se.prefixPath,se.collectionGroup,se.documentId]);for(;M&&zd(M,Je)<0;)a(M,null),M=b.getNext();M&&M.isEqual(Je)&&(a(M,se),M=b.hasNext()?b.getNext():null),M?Me.j(rd(M)):Me.done()}).next(()=>{for(;M;)a(M,null),M=b.hasNext()?b.getNext():null})}getAllFromCollection(e,r,a){const u=[r.popLast().toArray(),r.lastSegment(),Xt(a.readTime),a.documentKey.path.isEmpty()?"":a.documentKey.path.lastSegment()],g=[r.popLast().toArray(),r.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Gr(e).W(IDBKeyRange.bound(u,g,!0)).next(b=>{let M=Go();for(const X of b){const se=this.jn(Rt.fromSegments(X.prefixPath.concat(X.collectionGroup,X.documentId)),X);M=M.insert(se.key,se)}return M})}getAllFromCollectionGroup(e,r,a,u){let g=Go();const b=tp(r,a),M=tp(r,S.max());return Gr(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(b,M,!0)},(X,se,Me)=>{const Je=this.jn(Rt.fromSegments(se.prefixPath.concat(se.collectionGroup,se.documentId)),se);g=g.insert(Je.key,Je),g.size===u&&Me.done()}).next(()=>g)}newChangeBuffer(e){return new i_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return sm(e).get("remoteDocumentGlobalKey").next(r=>(Kn(!!r),r))}Qn(e,r){return sm(e).put("remoteDocumentGlobalKey",r)}jn(e,r){if(r){const a=function(s,e){let r;if(e.document)r=Ic(s.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const a=Rt.fromSegments(e.noDocument.path),u=Zn(e.noDocument.readTime);r=Ue.newNoDocument(a,u),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Bn();{const a=Rt.fromSegments(e.unknownDocument.path),u=Zn(e.unknownDocument.version);r=Ue.newUnknownDocument(a,u)}}return e.readTime&&r.setReadTime(function(a){const u=new bi(a[0],a[1]);return fe.fromTimestamp(u)}(e.readTime)),r}(this.It,r);if(!a.isNoDocument()||!a.version.isEqual(fe.min()))return a}return Ue.newInvalidDocument(e)}}function im(s){return new rm(s)}class i_ extends nm{constructor(e,r){super(),this.Yn=e,this.trackRemovals=r,this.Xn=new ml(a=>a.toString(),(a,u)=>a.isEqual(u))}applyChanges(e){const r=[];let a=0,u=new Zi((g,b)=>fr(g.canonicalString(),b.canonicalString()));return this.changes.forEach((g,b)=>{const M=this.Xn.get(g);if(r.push(this.Yn.removeEntry(e,g,M.readTime)),b.isValidDocument()){const X=zt(this.Yn.It,b);u=u.add(g.path.popLast()),a+=Oh(X)-M.size,r.push(this.Yn.addEntry(e,g,X))}else if(a-=M.size,this.trackRemovals){const X=zt(this.Yn.It,b.convertToNoDocument(fe.min()));r.push(this.Yn.addEntry(e,g,X))}}),u.forEach(g=>{r.push(this.Yn.indexManager.addToCollectionParentIndex(e,g))}),r.push(this.Yn.updateMetadata(e,a)),ge.waitFor(r)}getFromCache(e,r){return this.Yn.Wn(e,r).next(a=>(this.Xn.set(r,{size:a.size,readTime:a.document.readTime}),a.document))}getAllFromCache(e,r){return this.Yn.Hn(e,r).next(({documents:a,Jn:u})=>(u.forEach((g,b)=>{this.Xn.set(g,{size:b,readTime:a.get(g).readTime})}),a))}}function sm(s){return y(s,"remoteDocumentGlobal")}function Gr(s){return y(s,"remoteDocumentsV14")}function rd(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function tp(s,e){const r=e.documentKey.path.toArray();return[s,Xt(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function zd(s,e){const r=s.path.toArray(),a=e.path.toArray();let u=0;for(let g=0;g<r.length-2&&g<a.length-2;++g)if(u=fr(r[g],a[g]),u)return u;return u=fr(r.length,a.length),u||(u=fr(r[r.length-2],a[a.length-2]),u||fr(r[r.length-1],a[a.length-1]))}class Ul{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}class np{constructor(e,r,a,u){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=a,this.indexManager=u}getDocument(e,r){let a=null;return this.documentOverlayCache.getOverlay(e,r).next(u=>(a=u,this.getBaseDocument(e,r,a))).next(u=>(null!==a&&Tu(a.mutation,u,_o.empty(),bi.now()),u))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(a=>this.getLocalViewOfDocuments(e,a,Xr()).next(()=>a))}getLocalViewOfDocuments(e,r,a=Xr()){const u=ia();return this.populateOverlays(e,u,r).next(()=>this.computeViews(e,r,u,a).next(g=>{let b=yl();return g.forEach((M,X)=>{b=b.insert(M,X.overlayedDocument)}),b}))}getOverlayedDocuments(e,r){const a=ia();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,Xr()))}populateOverlays(e,r,a){const u=[];return a.forEach(g=>{r.has(g)||u.push(g)}),this.documentOverlayCache.getOverlays(e,u).next(g=>{g.forEach((b,M)=>{r.set(b,M)})})}computeViews(e,r,a,u){let g=Go();const b=Ro(),M=Ro();return r.forEach((X,se)=>{const Me=a.get(se.key);u.has(se.key)&&(void 0===Me||Me.mutation instanceof $a)?g=g.insert(se.key,se):void 0!==Me&&(b.set(se.key,Me.mutation.getFieldMask()),Tu(Me.mutation,se,Me.mutation.getFieldMask(),bi.now()))}),this.recalculateAndSaveOverlays(e,g).next(X=>(X.forEach((se,Me)=>b.set(se,Me)),r.forEach((se,Me)=>{var Je;return M.set(se,new Ul(Me,null!==(Je=b.get(se))&&void 0!==Je?Je:null))}),M))}recalculateAndSaveOverlays(e,r){const a=Ro();let u=new ps((b,M)=>b-M),g=Xr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(b=>{for(const M of b)M.keys().forEach(X=>{const se=r.get(X);if(null===se)return;let Me=a.get(X)||_o.empty();Me=M.applyToLocalView(se,Me),a.set(X,Me);const Je=(u.get(M.batchId)||Xr()).add(X);u=u.insert(M.batchId,Je)})}).next(()=>{const b=[],M=u.getReverseIterator();for(;M.hasNext();){const X=M.getNext(),se=X.key,Me=X.value,Je=qc();Me.forEach(Lt=>{if(!g.has(Lt)){const on=Zu(r.get(Lt),a.get(Lt));null!==on&&Je.set(Lt,on),g=g.add(Lt)}}),b.push(this.documentOverlayCache.saveOverlays(e,se,Je))}return ge.waitFor(b)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,r,a){return Rt.isDocumentKey((u=r).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,r.path):Eu(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,a):this.getDocumentsMatchingCollectionQuery(e,r,a);var u}getNextDocuments(e,r,a,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,a,u).next(g=>{const b=u-g.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,a.largestBatchId,u-g.size):ge.resolve(ia());let M=-1,X=g;return b.next(se=>ge.forEach(se,(Me,Je)=>(M<Je.largestBatchId&&(M=Je.largestBatchId),g.get(Me)?ge.resolve():this.getBaseDocument(e,Me,Je).next(Lt=>{X=X.insert(Me,Lt)}))).next(()=>this.populateOverlays(e,se,g)).next(()=>this.computeViews(e,X,se,Xr())).next(Me=>({batchId:M,changes:xu(Me)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Rt(r)).next(a=>{let u=yl();return a.isFoundDocument()&&(u=u.insert(a.key,a)),u})}getDocumentsMatchingCollectionGroupQuery(e,r,a){const u=r.collectionGroup;let g=yl();return this.indexManager.getCollectionParents(e,u).next(b=>ge.forEach(b,M=>{const X=(se=r,Me=M.child(u),new hl(Me,null,se.explicitOrderBy.slice(),se.filters.slice(),se.limit,se.limitType,se.startAt,se.endAt));var se,Me;return this.getDocumentsMatchingCollectionQuery(e,X,a).next(se=>{se.forEach((Me,Je)=>{g=g.insert(Me,Je)})})}).next(()=>g))}getDocumentsMatchingCollectionQuery(e,r,a){let u;return this.remoteDocumentCache.getAllFromCollection(e,r.path,a).next(g=>(u=g,this.documentOverlayCache.getOverlaysForCollection(e,r.path,a.largestBatchId))).next(g=>{g.forEach((M,X)=>{const se=X.getKey();null===u.get(se)&&(u=u.insert(se,Ue.newInvalidDocument(se)))});let b=yl();return u.forEach((M,X)=>{const se=g.get(M);void 0!==se&&Tu(se.mutation,X,_o.empty(),bi.now()),Ql(r,X)&&(b=b.insert(M,X))}),b})}getBaseDocument(e,r,a){return null===a||1===a.mutation.type?this.remoteDocumentCache.getEntry(e,r):ge.resolve(Ue.newInvalidDocument(r))}}class s_{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,r){return ge.resolve(this.Zn.get(r))}saveBundleMetadata(e,r){var a;return this.Zn.set(r.id,{id:(a=r).id,version:a.version,createTime:mo(a.createTime)}),ge.resolve()}getNamedQuery(e,r){return ge.resolve(this.ts.get(r))}saveNamedQuery(e,r){return this.ts.set(r.name,{name:(a=r).name,query:cu(a.bundledQuery),readTime:mo(a.readTime)}),ge.resolve();var a}}class rp{constructor(){this.overlays=new ps(Rt.comparator),this.es=new Map}getOverlay(e,r){return ge.resolve(this.overlays.get(r))}getOverlays(e,r){const a=ia();return ge.forEach(r,u=>this.getOverlay(e,u).next(g=>{null!==g&&a.set(u,g)})).next(()=>a)}saveOverlays(e,r,a){return a.forEach((u,g)=>{this.ue(e,r,g)}),ge.resolve()}removeOverlaysForBatchId(e,r,a){const u=this.es.get(a);return void 0!==u&&(u.forEach(g=>this.overlays=this.overlays.remove(g)),this.es.delete(a)),ge.resolve()}getOverlaysForCollection(e,r,a){const u=ia(),g=r.length+1,b=new Rt(r.child("")),M=this.overlays.getIteratorFrom(b);for(;M.hasNext();){const X=M.getNext().value,se=X.getKey();if(!r.isPrefixOf(se.path))break;se.path.length===g&&X.largestBatchId>a&&u.set(X.getKey(),X)}return ge.resolve(u)}getOverlaysForCollectionGroup(e,r,a,u){let g=new ps((se,Me)=>se-Me);const b=this.overlays.getIterator();for(;b.hasNext();){const se=b.getNext().value;if(se.getKey().getCollectionGroup()===r&&se.largestBatchId>a){let Me=g.get(se.largestBatchId);null===Me&&(Me=ia(),g=g.insert(se.largestBatchId,Me)),Me.set(se.getKey(),se)}}const M=ia(),X=g.getIterator();for(;X.hasNext()&&(X.getNext().value.forEach((se,Me)=>M.set(se,Me)),!(M.size()>=u)););return ge.resolve(M)}ue(e,r,a){const u=this.overlays.get(a.key);if(null!==u){const b=this.es.get(u.largestBatchId).delete(a.key);this.es.set(u.largestBatchId,b)}this.overlays=this.overlays.insert(a.key,new J(r,a));let g=this.es.get(r);void 0===g&&(g=Xr(),this.es.set(r,g)),this.es.set(r,g.add(a.key))}}class jl{constructor(){this.ns=new Zi(Fo.ss),this.rs=new Zi(Fo.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,r){const a=new Fo(e,r);this.ns=this.ns.add(a),this.rs=this.rs.add(a)}us(e,r){e.forEach(a=>this.addReference(a,r))}removeReference(e,r){this.cs(new Fo(e,r))}hs(e,r){e.forEach(a=>this.removeReference(a,r))}ls(e){const r=new Rt(new K([])),a=new Fo(r,e),u=new Fo(r,e+1),g=[];return this.rs.forEachInRange([a,u],b=>{this.cs(b),g.push(b.key)}),g}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const r=new Rt(new K([])),a=new Fo(r,e),u=new Fo(r,e+1);let g=Xr();return this.rs.forEachInRange([a,u],b=>{g=g.add(b.key)}),g}containsKey(e){const r=new Fo(e,0),a=this.ns.firstAfterOrEqual(r);return null!==a&&e.isEqual(a.key)}}class Fo{constructor(e,r){this.key=e,this._s=r}static ss(e,r){return Rt.comparator(e.key,r.key)||fr(e._s,r._s)}static os(e,r){return fr(e._s,r._s)||Rt.comparator(e.key,r.key)}}class om{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.ws=1,this.gs=new Zi(Fo.ss)}checkEmpty(e){return ge.resolve(0===this.mutationQueue.length)}addMutationBatch(e,r,a,u){const g=this.ws;this.ws++;const b=new x(g,r,a,u);this.mutationQueue.push(b);for(const M of u)this.gs=this.gs.add(new Fo(M.key,g)),this.indexManager.addToCollectionParentIndex(e,M.key.path.popLast());return ge.resolve(b)}lookupMutationBatch(e,r){return ge.resolve(this.ys(r))}getNextMutationBatchAfterBatchId(e,r){const u=this.ps(r+1),g=u<0?0:u;return ge.resolve(this.mutationQueue.length>g?this.mutationQueue[g]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const a=new Fo(r,0),u=new Fo(r,Number.POSITIVE_INFINITY),g=[];return this.gs.forEachInRange([a,u],b=>{const M=this.ys(b._s);g.push(M)}),ge.resolve(g)}getAllMutationBatchesAffectingDocumentKeys(e,r){let a=new Zi(fr);return r.forEach(u=>{const g=new Fo(u,0),b=new Fo(u,Number.POSITIVE_INFINITY);this.gs.forEachInRange([g,b],M=>{a=a.add(M._s)})}),ge.resolve(this.Is(a))}getAllMutationBatchesAffectingQuery(e,r){const a=r.path,u=a.length+1;let g=a;Rt.isDocumentKey(g)||(g=g.child(""));const b=new Fo(new Rt(g),0);let M=new Zi(fr);return this.gs.forEachWhile(X=>{const se=X.key.path;return!!a.isPrefixOf(se)&&(se.length===u&&(M=M.add(X._s)),!0)},b),ge.resolve(this.Is(M))}Is(e){const r=[];return e.forEach(a=>{const u=this.ys(a);null!==u&&r.push(u)}),r}removeMutationBatch(e,r){Kn(0===this.Ts(r.batchId,"removed")),this.mutationQueue.shift();let a=this.gs;return ge.forEach(r.mutations,u=>{const g=new Fo(u.key,r.batchId);return a=a.delete(g),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.gs=a})}An(e){}containsKey(e,r){const a=new Fo(r,0),u=this.gs.firstAfterOrEqual(a);return ge.resolve(r.isEqual(u&&u.key))}performConsistencyCheck(e){return ge.resolve()}Ts(e,r){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const r=this.ps(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class ip{constructor(e){this.Es=e,this.docs=new ps(Rt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const a=r.key,u=this.docs.get(a),g=u?u.size:0,b=this.Es(r);return this.docs=this.docs.insert(a,{document:r.mutableCopy(),size:b}),this.size+=b-g,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const a=this.docs.get(r);return ge.resolve(a?a.document.mutableCopy():Ue.newInvalidDocument(r))}getEntries(e,r){let a=Go();return r.forEach(u=>{const g=this.docs.get(u);a=a.insert(u,g?g.document.mutableCopy():Ue.newInvalidDocument(u))}),ge.resolve(a)}getAllFromCollection(e,r,a){let u=Go();const g=new Rt(r.child("")),b=this.docs.getIteratorFrom(g);for(;b.hasNext();){const{key:M,value:{document:X}}=b.getNext();if(!r.isPrefixOf(M.path))break;M.path.length>r.length+1||T(k(X),a)<=0||(u=u.insert(X.key,X.mutableCopy()))}return ge.resolve(u)}getAllFromCollectionGroup(e,r,a,u){Bn()}As(e,r){return ge.forEach(this.docs,a=>r(a))}newChangeBuffer(e){return new _0(this)}getSize(e){return ge.resolve(this.size)}}class _0 extends nm{constructor(e){super(),this.Yn=e}applyChanges(e){const r=[];return this.changes.forEach((a,u)=>{u.isValidDocument()?r.push(this.Yn.addEntry(e,u)):this.Yn.removeEntry(a)}),ge.waitFor(r)}getFromCache(e,r){return this.Yn.getEntry(e,r)}getAllFromCache(e,r){return this.Yn.getEntries(e,r)}}class am{constructor(e){this.persistence=e,this.Rs=new ml(r=>mn(r),yr),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.bs=0,this.Ps=new jl,this.targetCount=0,this.vs=tc.Pn()}forEachTarget(e,r){return this.Rs.forEach((a,u)=>r(u)),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,r,a){return a&&(this.lastRemoteSnapshotVersion=a),r>this.bs&&(this.bs=r),ge.resolve()}Dn(e){this.Rs.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.vs=new tc(r),this.highestTargetId=r),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,r){return this.Dn(r),this.targetCount+=1,ge.resolve()}updateTargetData(e,r){return this.Dn(r),ge.resolve()}removeTargetData(e,r){return this.Rs.delete(r.target),this.Ps.ls(r.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,r,a){let u=0;const g=[];return this.Rs.forEach((b,M)=>{M.sequenceNumber<=r&&null===a.get(M.targetId)&&(this.Rs.delete(b),g.push(this.removeMatchingKeysForTargetId(e,M.targetId)),u++)}),ge.waitFor(g).next(()=>u)}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,r){const a=this.Rs.get(r)||null;return ge.resolve(a)}addMatchingKeys(e,r,a){return this.Ps.us(r,a),ge.resolve()}removeMatchingKeys(e,r,a){this.Ps.hs(r,a);const u=this.persistence.referenceDelegate,g=[];return u&&r.forEach(b=>{g.push(u.markPotentiallyOrphaned(e,b))}),ge.waitFor(g)}removeMatchingKeysForTargetId(e,r){return this.Ps.ls(r),ge.resolve()}getMatchingKeysForTargetId(e,r){const a=this.Ps.ds(r);return ge.resolve(a)}containsKey(e,r){return ge.resolve(this.Ps.containsKey(r))}}class o_{constructor(e,r){this.Vs={},this.overlays={},this.Ss=new as(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new am(this),this.indexManager=new Jg,this.remoteDocumentCache=new ip(a=>this.referenceDelegate.xs(a)),this.It=new Ye(r),this.Ns=new s_(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new rp,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let a=this.Vs[e.toKey()];return a||(a=new om(r,this.referenceDelegate),this.Vs[e.toKey()]=a),a}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,r,a){qt("MemoryPersistence","Starting transaction:",e);const u=new Ou(this.Ss.next());return this.referenceDelegate.ks(),a(u).next(g=>this.referenceDelegate.Os(u).next(()=>g)).toPromise().then(g=>(u.raiseOnCommittedEvent(),g))}Ms(e,r){return ge.or(Object.values(this.Vs).map(a=>()=>a.containsKey(e,r)))}}class Ou extends te{constructor(e){super(),this.currentSequenceNumber=e}}class Rc{constructor(e){this.persistence=e,this.Fs=new jl,this.$s=null}static Bs(e){return new Rc(e)}get Ls(){if(this.$s)return this.$s;throw Bn()}addReference(e,r,a){return this.Fs.addReference(a,r),this.Ls.delete(a.toString()),ge.resolve()}removeReference(e,r,a){return this.Fs.removeReference(a,r),this.Ls.add(a.toString()),ge.resolve()}markPotentiallyOrphaned(e,r){return this.Ls.add(r.toString()),ge.resolve()}removeTarget(e,r){this.Fs.ls(r.targetId).forEach(u=>this.Ls.add(u.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,r.targetId).next(u=>{u.forEach(g=>this.Ls.add(g.toString()))}).next(()=>a.removeTargetData(e,r))}ks(){this.$s=new Set}Os(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.Ls,a=>{const u=Rt.fromPath(a);return this.Us(e,u).next(g=>{g||r.removeEntry(u,fe.min())})}).next(()=>(this.$s=null,r.apply(e)))}updateLimboDocument(e,r){return this.Us(e,r).next(a=>{a?this.Ls.delete(r.toString()):this.Ls.add(r.toString())})}xs(e){return 0}Us(e,r){return ge.or([()=>ge.resolve(this.Fs.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ms(e,r)])}}class kh{constructor(e){this.It=e}$(e,r,a,u){const g=new Jt("createOrUpgrade",r);var M;a<1&&u>=1&&(e.createObjectStore("owner"),(M=e).createObjectStore("mutationQueues",{keyPath:"userId"}),M.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Vd,{unique:!0}),M.createObjectStore("documentMutations"),Fh(e),function(M){M.createObjectStore("remoteDocuments")}(e));let b=ge.resolve();return a<3&&u>=3&&(0!==a&&(function(M){M.deleteObjectStore("targetDocuments"),M.deleteObjectStore("targets"),M.deleteObjectStore("targetGlobal")}(e),Fh(e)),b=b.next(()=>function(M){const X=M.store("targetGlobal"),se={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:fe.min().toTimestamp(),targetCount:0};return X.put("targetGlobalKey",se)}(g))),a<4&&u>=4&&(0!==a&&(b=b.next(()=>function(M,X){return X.store("mutations").W().next(se=>{M.deleteObjectStore("mutations"),M.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Vd,{unique:!0});const Me=X.store("mutations"),Je=se.map(Lt=>Me.put(Lt));return ge.waitFor(Je)})}(e,g))),b=b.next(()=>{!function(M){M.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),a<5&&u>=5&&(b=b.next(()=>this.qs(g))),a<6&&u>=6&&(b=b.next(()=>(function(M){M.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(g)))),a<7&&u>=7&&(b=b.next(()=>this.Gs(g))),a<8&&u>=8&&(b=b.next(()=>this.Qs(e,g))),a<9&&u>=9&&(b=b.next(()=>{!function(M){M.objectStoreNames.contains("remoteDocumentChanges")&&M.deleteObjectStore("remoteDocumentChanges")}(e)})),a<10&&u>=10&&(b=b.next(()=>this.js(g))),a<11&&u>=11&&(b=b.next(()=>{(function(M){M.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(M){M.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),a<12&&u>=12&&(b=b.next(()=>{!function(M){const X=M.createObjectStore("documentOverlays",{keyPath:zg});X.createIndex("collectionPathOverlayIndex",qg,{unique:!1}),X.createIndex("collectionGroupOverlayIndex",Sh,{unique:!1})}(e)})),a<13&&u>=13&&(b=b.next(()=>function(M){const X=M.createObjectStore("remoteDocumentsV14",{keyPath:wh});X.createIndex("documentKeyIndex",Dh),X.createIndex("collectionGroupIndex",Gf)}(e)).next(()=>this.Ws(e,g)).next(()=>e.deleteObjectStore("remoteDocuments"))),a<14&&u>=14&&(b=b.next(()=>this.zs(e,g))),a<15&&u>=15&&(b=b.next(()=>function(M){M.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),M.createObjectStore("indexState",{keyPath:qf}).createIndex("sequenceNumberIndex",Yf,{unique:!1}),M.createObjectStore("indexEntries",{keyPath:Ju}).createIndex("documentKeyIndex",xl,{unique:!1})}(e))),b}Ks(e){let r=0;return e.store("remoteDocuments").Z((a,u)=>{r+=Oh(u)}).next(()=>{const a={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",a)})}qs(e){const r=e.store("mutationQueues"),a=e.store("mutations");return r.W().next(u=>ge.forEach(u,g=>{const b=IDBKeyRange.bound([g.userId,-1],[g.userId,g.lastAcknowledgedBatchId]);return a.W("userMutationsIndex",b).next(M=>ge.forEach(M,X=>{Kn(X.userId===g.userId);const se=vr(this.It,X);return Jf(e,g.userId,se).next(()=>{})}))}))}Gs(e){const r=e.store("targetDocuments"),a=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const g=[];return a.Z((b,M)=>{const X=new K(b),se=[0,Co(X)];g.push(r.get(se).next(Me=>Me?ge.resolve():r.put({targetId:0,path:Co(X),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>ge.waitFor(g))})}Qs(e,r){e.createObjectStore("collectionParents",{keyPath:zf});const a=r.store("collectionParents"),u=new Hd,g=b=>{if(u.add(b)){const M=b.lastSegment(),X=b.popLast();return a.put({collectionId:M,parent:Co(X)})}};return r.store("remoteDocuments").Z({X:!0},(b,M)=>{const X=new K(b);return g(X.popLast())}).next(()=>r.store("documentMutations").Z({X:!0},([b,M,X],se)=>{const Me=Al(M);return g(Me.popLast())}))}js(e){const r=e.store("targets");return r.Z((a,u)=>{const g=Di(u),b=ko(this.It,g);return r.put(b)})}Ws(e,r){const a=r.store("remoteDocuments"),u=[];return a.Z((g,b)=>{const M=r.store("remoteDocumentsV14"),X=(se=b,se.document?new Rt(K.fromString(se.document.name).popFirst(5)):se.noDocument?Rt.fromSegments(se.noDocument.path):se.unknownDocument?Rt.fromSegments(se.unknownDocument.path):Bn()).path.toArray();var se;const Me={prefixPath:X.slice(0,X.length-2),collectionGroup:X[X.length-2],documentId:X[X.length-1],readTime:b.readTime||[0,0],unknownDocument:b.unknownDocument,noDocument:b.noDocument,document:b.document,hasCommittedMutations:!!b.hasCommittedMutations};u.push(M.put(Me))}).next(()=>ge.waitFor(u))}zs(e,r){const a=r.store("mutations"),u=im(this.It),g=new o_(Rc.Bs,this.It.re);return a.W().next(b=>{const M=new Map;return b.forEach(X=>{var se;let Me=null!==(se=M.get(X.userId))&&void 0!==se?se:Xr();vr(this.It,X).keys().forEach(Je=>Me=Me.add(Je)),M.set(X.userId,Me)}),ge.forEach(M,(X,se)=>{const Me=new fn(se),Je=Xc.oe(this.It,Me),Lt=g.getIndexManager(Me),on=Nh.oe(Me,this.It,Lt,g.referenceDelegate);return new np(u,on,Je,Lt).recalculateAndSaveOverlaysForDocumentKeys(new c(r,as.at),X).next()})})}}function Fh(s){s.createObjectStore("targetDocuments",{keyPath:Gg}).createIndex("documentTargetsIndex",Bd,{unique:!0}),s.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Th,{unique:!0}),s.createObjectStore("targetGlobal")}const lm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class sp{constructor(e,r,a,u,g,b,M,X,se,Me,Je=15){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=a,this.Hs=g,this.window=b,this.document=M,this.Js=se,this.Ys=Me,this.Xs=Je,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=Lt=>Promise.resolve(),!sp.C())throw new pn(Pt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new r_(this,u),this.ii=r+"main",this.It=new Ye(X),this.ri=new kn(this.ii,this.Xs,new kh(this.It)),this.Cs=new e_(this.referenceDelegate,this.It),this.remoteDocumentCache=im(this.It),this.Ns=new Yg,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===Me&&dr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new pn(Pt.FAILED_PRECONDITION,lm);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new as(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var r=this;return this.si=function(){var a=(0,E.Z)(function*(u){if(r.started)return e(u)});return function(u){return a.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var r=(0,E.Z)(function*(a){null===a.newVersion&&(yield e())});return function(a){return r.apply(this,arguments)}}())}setNetworkEnabled(e){var r=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,E.Z)(function*(){r.started&&(yield r.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>op(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(r=>{r||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(r=>this.isPrimary&&!r?this._i(e).next(()=>!1):!!r&&this.wi(e).next(()=>!0))).catch(e=>{if(ti(e))return qt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return qt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return id(e).get("owner").next(r=>ge.resolve(this.mi(r)))}gi(e){return op(e).delete(this.clientId)}yi(){var e=this;return(0,E.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const r=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",a=>{const u=y(a,"clientMetadata");return u.W().next(g=>{const b=e.Ii(g,18e5),M=g.filter(X=>-1===b.indexOf(X));return ge.forEach(M,X=>u.delete(X.clientId)).next(()=>M)})}).catch(()=>[]);if(e.oi)for(const a of r)e.oi.removeItem(e.Ti(a.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ge.resolve(!0):id(e).get("owner").next(r=>{if(null!==r&&this.pi(r.leaseTimestampMs,5e3)&&!this.Ei(r.ownerId)){if(this.mi(r)&&this.networkEnabled)return!0;if(!this.mi(r)){if(!r.allowTabSynchronization)throw new pn(Pt.FAILED_PRECONDITION,lm);return!1}}return!(!this.networkEnabled||!this.inForeground)||op(e).W().next(a=>void 0===this.Ii(a,5e3).find(u=>{if(this.clientId!==u.clientId){const b=!this.inForeground&&u.inForeground,M=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||b&&M)return!0}return!1}))}).next(r=>(this.isPrimary!==r&&qt("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var e=this;return(0,E.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],r=>{const a=new c(r,as.at);return e._i(a).next(()=>e.gi(a))}),e.ri.close(),e.Pi()})()}Ii(e,r){return e.filter(a=>this.pi(a.updateTimeMs,r)&&!this.Ei(a.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>op(e).W().next(r=>this.Ii(r,18e5).map(a=>a.clientId)))}get started(){return this.Ds}getMutationQueue(e,r){return Nh.oe(e,this.It,r,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Rh(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Xc.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,r,a){qt("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===r?"readonly":"readwrite",g=15===(b=this.Xs)?d:14===b?f:13===b?$d:12===b?$l:11===b?Kf:void Bn();var b;let M;return this.ri.runTransaction(e,u,g,X=>(M=new c(X,this.Ss?this.Ss.next():as.at),"readwrite-primary"===r?this.fi(M).next(se=>!!se||this.di(M)).next(se=>{if(!se)throw dr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new pn(Pt.FAILED_PRECONDITION,H);return a(M)}).next(se=>this.wi(M).next(()=>se)):this.Vi(M).next(()=>a(M)))).then(X=>(M.raiseOnCommittedEvent(),X))}Vi(e){return id(e).get("owner").next(r=>{if(null!==r&&this.pi(r.leaseTimestampMs,5e3)&&!this.Ei(r.ownerId)&&!this.mi(r)&&!(this.Ys||this.allowTabSynchronization&&r.allowTabSynchronization))throw new pn(Pt.FAILED_PRECONDITION,lm)})}wi(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return id(e).put("owner",r)}static C(){return kn.C()}_i(e){const r=id(e);return r.get("owner").next(a=>this.mi(a)?(qt("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):ge.resolve())}pi(e,r){const a=Date.now();return!(e<a-r||e>a&&(dr(`Detected an update time that is in the future: ${e} > ${a}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,ue.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var r;try{const a=null!==(null===(r=this.oi)||void 0===r?void 0:r.getItem(this.Ti(e)));return qt("IndexedDbPersistence",`Client '${e}' ${a?"is":"is not"} zombied in LocalStorage`),a}catch(a){return dr("IndexedDbPersistence","Failed to get zombied client id.",a),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){dr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function id(s){return y(s,"owner")}function op(s){return y(s,"clientMetadata")}function ap(s,e){let r=s.projectId;return s.isDefaultDatabase||(r+="."+s.database),"firestore/"+e+"/"+r+"/"}class um{constructor(e,r,a,u){this.targetId=e,this.fromCache=r,this.Si=a,this.Di=u}static Ci(e,r){let a=Xr(),u=Xr();for(const g of r.docChanges)switch(g.type){case 0:a=a.add(g.doc.key);break;case 1:u=u.add(g.doc.key)}return new um(e,r.fromCache,a,u)}}class lp{constructor(){this.xi=!1}initialize(e,r){this.Ni=e,this.indexManager=r,this.xi=!0}getDocumentsMatchingQuery(e,r,a,u){return this.ki(e,r).next(g=>g||this.Oi(e,r,u,a)).next(g=>g||this.Mi(e,r))}ki(e,r){if(fl(r))return ge.resolve(null);let a=Is(r);return this.indexManager.getIndexType(e,a).next(u=>0===u?null:(null!==r.limit&&1===u&&(r=Yu(r,null,"F"),a=Is(r)),this.indexManager.getDocumentsMatchingTarget(e,a).next(g=>{const b=Xr(...g);return this.Ni.getDocuments(e,b).next(M=>this.indexManager.getMinOffset(e,a).next(X=>{const se=this.Fi(r,M);return this.$i(r,se,b,X.readTime)?this.ki(e,Yu(r,null,"F")):this.Bi(e,se,r,X)}))})))}Oi(e,r,a,u){return fl(r)||u.isEqual(fe.min())?this.Mi(e,r):this.Ni.getDocuments(e,a).next(g=>{const b=this.Fi(r,g);return this.$i(r,b,a,u)?this.Mi(e,r):(Vr()<=L.in.DEBUG&&qt("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Iu(r)),this.Bi(e,b,r,Jo(u,-1)))})}Fi(e,r){let a=new Zi(ra(e));return r.forEach((u,g)=>{Ql(e,g)&&(a=a.add(g))}),a}$i(e,r,a,u){if(null===e.limit)return!1;if(a.size!==r.size)return!0;const g="F"===e.limitType?r.last():r.first();return!!g&&(g.hasPendingWrites||g.version.compareTo(u)>0)}Mi(e,r){return Vr()<=L.in.DEBUG&&qt("QueryEngine","Using full collection scan to execute query:",Iu(r)),this.Ni.getDocumentsMatchingQuery(e,r,S.min())}Bi(e,r,a,u){return this.Ni.getDocumentsMatchingQuery(e,a,u).next(g=>(r.forEach(b=>{g=g.insert(b.key,b)}),g))}}class cm{constructor(e,r,a,u){this.persistence=e,this.Li=r,this.It=u,this.Ui=new ps(fr),this.qi=new ml(g=>mn(g),yr),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(a)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new np(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ui))}}function dm(s,e,r,a){return new cm(s,e,r,a)}function Lh(s,e){return hm.apply(this,arguments)}function hm(){return hm=(0,E.Z)(function*(s,e){const r=Ln(s);return yield r.persistence.runTransaction("Handle user change","readonly",a=>{let u;return r.mutationQueue.getAllMutationBatches(a).next(g=>(u=g,r.Qi(e),r.mutationQueue.getAllMutationBatches(a))).next(g=>{const b=[],M=[];let X=Xr();for(const se of u){b.push(se.batchId);for(const Me of se.mutations)X=X.add(Me.key)}for(const se of g){M.push(se.batchId);for(const Me of se.mutations)X=X.add(Me.key)}return r.localDocuments.getDocuments(a,X).next(se=>({ji:se,removedBatchIds:b,addedBatchIds:M}))})})}),hm.apply(this,arguments)}function v0(s,e){const r=Ln(s);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const u=e.batch.keys(),g=r.Gi.newChangeBuffer({trackRemovals:!0});return function(b,M,X,se){const Me=X.batch,Je=Me.keys();let Lt=ge.resolve();return Je.forEach(on=>{Lt=Lt.next(()=>se.getEntry(M,on)).next(_n=>{const tr=X.docVersions.get(on);Kn(null!==tr),_n.version.compareTo(tr)<0&&(Me.applyToRemoteDocument(_n,X),_n.isValidDocument()&&(_n.setReadTime(X.commitVersion),se.addEntry(_n)))})}),Lt.next(()=>b.mutationQueue.removeMutationBatch(M,Me))}(r,a,e,g).next(()=>g.apply(a)).next(()=>r.mutationQueue.performConsistencyCheck(a)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(a,u,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(b){let M=Xr();for(let X=0;X<b.mutationResults.length;++X)b.mutationResults[X].transformResults.length>0&&(M=M.add(b.batch.mutations[X].key));return M}(e))).next(()=>r.localDocuments.getDocuments(a,u))})}function a_(s){const e=Ln(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Cs.getLastRemoteSnapshotVersion(r))}function E0(s,e){const r=Ln(s),a=e.snapshotVersion;let u=r.Ui;return r.persistence.runTransaction("Apply remote event","readwrite-primary",g=>{const b=r.Gi.newChangeBuffer({trackRemovals:!0});u=r.Ui;const M=[];e.targetChanges.forEach((Me,Je)=>{const Lt=u.get(Je);if(!Lt)return;M.push(r.Cs.removeMatchingKeys(g,Me.removedDocuments,Je).next(()=>r.Cs.addMatchingKeys(g,Me.addedDocuments,Je)));let on=Lt.withSequenceNumber(g.currentSequenceNumber);var _n,tr,hr;e.targetMismatches.has(Je)?on=on.withResumeToken(ts.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):Me.resumeToken.approximateByteSize()>0&&(on=on.withResumeToken(Me.resumeToken,a)),u=u.insert(Je,on),tr=on,hr=Me,(0===(_n=Lt).resumeToken.approximateByteSize()||tr.snapshotVersion.toMicroseconds()-_n.snapshotVersion.toMicroseconds()>=3e8||hr.addedDocuments.size+hr.modifiedDocuments.size+hr.removedDocuments.size>0)&&M.push(r.Cs.updateTargetData(g,on))});let X=Go(),se=Xr();if(e.documentUpdates.forEach(Me=>{e.resolvedLimboDocuments.has(Me)&&M.push(r.persistence.referenceDelegate.updateLimboDocument(g,Me))}),M.push(l_(g,b,e.documentUpdates).next(Me=>{X=Me.Wi,se=Me.zi})),!a.isEqual(fe.min())){const Me=r.Cs.getLastRemoteSnapshotVersion(g).next(Je=>r.Cs.setTargetsMetadata(g,g.currentSequenceNumber,a));M.push(Me)}return ge.waitFor(M).next(()=>b.apply(g)).next(()=>r.localDocuments.getLocalViewOfDocuments(g,X,se)).next(()=>X)}).then(g=>(r.Ui=u,g))}function l_(s,e,r){let a=Xr(),u=Xr();return r.forEach(g=>a=a.add(g)),e.getEntries(s,a).next(g=>{let b=Go();return r.forEach((M,X)=>{const se=g.get(M);X.isFoundDocument()!==se.isFoundDocument()&&(u=u.add(M)),X.isNoDocument()&&X.version.isEqual(fe.min())?(e.removeEntry(M,X.readTime),b=b.insert(M,X)):!se.isValidDocument()||X.version.compareTo(se.version)>0||0===X.version.compareTo(se.version)&&se.hasPendingWrites?(e.addEntry(X),b=b.insert(M,X)):qt("LocalStore","Ignoring outdated watch update for ",M,". Current version:",se.version," Watch version:",X.version)}),{Wi:b,zi:u}})}function I0(s,e){const r=Ln(s);return r.persistence.runTransaction("Get next mutation batch","readonly",a=>(void 0===e&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function qd(s,e){const r=Ln(s);return r.persistence.runTransaction("Allocate target","readwrite",a=>{let u;return r.Cs.getTargetData(a,e).next(g=>g?(u=g,ge.resolve(u)):r.Cs.allocateTargetId(a).next(b=>(u=new xe(e,b,0,a.currentSequenceNumber),r.Cs.addTargetData(a,u).next(()=>u))))}).then(a=>{const u=r.Ui.get(a.targetId);return(null===u||a.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(r.Ui=r.Ui.insert(a.targetId,a),r.qi.set(e,a.targetId)),a})}function Yd(s,e,r){return fm.apply(this,arguments)}function fm(){return fm=(0,E.Z)(function*(s,e,r){const a=Ln(s),u=a.Ui.get(e),g=r?"readwrite":"readwrite-primary";try{r||(yield a.persistence.runTransaction("Release target",g,b=>a.persistence.referenceDelegate.removeTarget(b,u)))}catch(b){if(!ti(b))throw b;qt("LocalStore",`Failed to update sequence numbers for target ${e}: ${b}`)}a.Ui=a.Ui.remove(e),a.qi.delete(u.target)}),fm.apply(this,arguments)}function up(s,e,r){const a=Ln(s);let u=fe.min(),g=Xr();return a.persistence.runTransaction("Execute query","readonly",b=>function(M,X,se){const Me=Ln(M),Je=Me.qi.get(se);return void 0!==Je?ge.resolve(Me.Ui.get(Je)):Me.Cs.getTargetData(X,se)}(a,b,Is(e)).next(M=>{if(M)return u=M.lastLimboFreeSnapshotVersion,a.Cs.getMatchingKeysForTargetId(b,M.targetId).next(X=>{g=X})}).next(()=>a.Li.getDocumentsMatchingQuery(b,e,r?u:fe.min(),r?g:Xr())).next(M=>(Vh(a,bu(e),M),{documents:M,Hi:g})))}function u_(s,e){const r=Ln(s),a=Ln(r.Cs),u=r.Ui.get(e);return u?Promise.resolve(u.target):r.persistence.runTransaction("Get target data","readonly",g=>a.se(g,e).next(b=>b?b.target:null))}function Nu(s,e){const r=Ln(s),a=r.Ki.get(e)||fe.min();return r.persistence.runTransaction("Get new document changes","readonly",u=>r.Gi.getAllFromCollectionGroup(u,e,Jo(a,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Vh(r,e,u),u))}function Vh(s,e,r){let a=s.Ki.get(e)||fe.min();r.forEach((u,g)=>{g.readTime.compareTo(a)>0&&(a=g.readTime)}),s.Ki.set(e,a)}function Bh(){return Bh=(0,E.Z)(function*(s,e,r,a){const u=Ln(s);let g=Xr(),b=Go();for(const se of r){const Me=e.Ji(se.metadata.name);se.document&&(g=g.add(Me));const Je=e.Yi(se);Je.setReadTime(e.Xi(se.metadata.readTime)),b=b.insert(Me,Je)}const M=u.Gi.newChangeBuffer({trackRemovals:!0}),X=yield qd(u,(se=a,Is(go(K.fromString(`__bundle__/docs/${se}`)))));var se;return u.persistence.runTransaction("Apply bundle documents","readwrite",se=>l_(se,M,b).next(Me=>(M.apply(se),Me)).next(Me=>u.Cs.removeMatchingKeysForTargetId(se,X.targetId).next(()=>u.Cs.addMatchingKeys(se,g,X.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(se,Me.Wi,Me.zi)).next(()=>Me.Wi)))}),Bh.apply(this,arguments)}function cp(s,e){return $h.apply(this,arguments)}function $h(){return $h=(0,E.Z)(function*(s,e,r=Xr()){const a=yield qd(s,Is(cu(e.bundledQuery))),u=Ln(s);return u.persistence.runTransaction("Save named query","readwrite",g=>{const b=mo(e.readTime);if(a.snapshotVersion.compareTo(b)>=0)return u.Ns.saveNamedQuery(g,e);const M=a.withResumeToken(ts.EMPTY_BYTE_STRING,b);return u.Ui=u.Ui.insert(M.targetId,M),u.Cs.updateTargetData(g,M).next(()=>u.Cs.removeMatchingKeysForTargetId(g,a.targetId)).next(()=>u.Cs.addMatchingKeys(g,r,a.targetId)).next(()=>u.Ns.saveNamedQuery(g,e))})}),$h.apply(this,arguments)}function Uh(s,e){return`firestore_clients_${s}_${e}`}function pm(s,e,r){let a=`firestore_mutations_${s}_${r}`;return e.isAuthenticated()&&(a+=`_${e.uid}`),a}function fu(s,e){return`firestore_targets_${s}_${e}`}class Kd{constructor(e,r,a,u){this.user=e,this.batchId=r,this.state=a,this.error=u}static Zi(e,r,a){const u=JSON.parse(a);let g,b="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return b&&u.error&&(b="string"==typeof u.error.message&&"string"==typeof u.error.code,b&&(g=new pn(u.error.code,u.error.message))),b?new Kd(e,r,u.state,g):(dr("SharedClientState",`Failed to parse mutation state for ID '${r}': ${a}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zd{constructor(e,r,a){this.targetId=e,this.state=r,this.error=a}static Zi(e,r){const a=JSON.parse(r);let u,g="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return g&&a.error&&(g="string"==typeof a.error.message&&"string"==typeof a.error.code,g&&(u=new pn(a.error.code,a.error.message))),g?new Zd(e,a.state,u):(dr("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dp{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Zi(e,r){const a=JSON.parse(r);let u="object"==typeof a&&a.activeTargetIds instanceof Array,g=D();for(let b=0;u&&b<a.activeTargetIds.length;++b)u=Oa(a.activeTargetIds[b]),g=g.add(a.activeTargetIds[b]);return u?new dp(e,g):(dr("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class Qd{constructor(e,r){this.clientId=e,this.onlineState=r}static Zi(e){const r=JSON.parse(e);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new Qd(r.clientId,r.onlineState):(dr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class hp{constructor(){this.activeTargetIds=D()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jh{constructor(e,r,a,u,g){this.window=e,this.Hs=r,this.persistenceKey=a,this.sr=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new ps(fr),this.started=!1,this.cr=[];const b=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=g,this.ar=Uh(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new hp),this.lr=new RegExp(`^firestore_clients_${b}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${b}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${b}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(M){return`firestore_bundle_loaded_v2_${M}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,E.Z)(function*(){const r=yield e.syncEngine.vi();for(const u of r){if(u===e.sr)continue;const g=e.getItem(Uh(e.persistenceKey,u));if(g){const b=dp.Zi(u,g);b&&(e.ur=e.ur.insert(b.clientId,b))}}e.gr();const a=e.storage.getItem(e.wr);if(a){const u=e.yr(a);u&&e.pr(u)}for(const u of e.cr)e.rr(u);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let r=!1;return this.ur.forEach((a,u)=>{u.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,r,a){this.Tr(e,r,a),this.Er(e)}addLocalQueryTarget(e){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(fu(this.persistenceKey,e));if(a){const u=Zd.Zi(e,a);u&&(r=u.state)}}return this.Ar.er(e),this.gr(),r}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(fu(this.persistenceKey,e))}updateQueryState(e,r,a){this.Rr(e,r,a)}handleUserChange(e,r,a){r.forEach(u=>{this.Er(u)}),this.currentUser=e,a.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return qt("SharedClientState","READ",e,r),r}setItem(e,r){qt("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){qt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var r=this;const a=e;if(a.storageArea===this.storage){if(qt("SharedClientState","EVENT",a.key,a.newValue),a.key===this.ar)return void dr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,E.Z)(function*(){if(r.started){if(null!==a.key)if(r.lr.test(a.key)){if(null==a.newValue){const u=r.vr(a.key);return r.Vr(u,null)}{const u=r.Sr(a.key,a.newValue);if(u)return r.Vr(u.clientId,u)}}else if(r.dr.test(a.key)){if(null!==a.newValue){const u=r.Dr(a.key,a.newValue);if(u)return r.Cr(u)}}else if(r._r.test(a.key)){if(null!==a.newValue){const u=r.Nr(a.key,a.newValue);if(u)return r.kr(u)}}else if(a.key===r.wr){if(null!==a.newValue){const u=r.yr(a.newValue);if(u)return r.pr(u)}}else if(a.key===r.hr){const u=function(g){let b=as.at;if(null!=g)try{const M=JSON.parse(g);Kn("number"==typeof M),b=M}catch(M){dr("SharedClientState","Failed to read sequence number from WebStorage",M)}return b}(a.newValue);u!==as.at&&r.sequenceNumberHandler(u)}else if(a.key===r.mr){const u=r.Or(a.newValue);yield Promise.all(u.map(g=>r.syncEngine.Mr(g)))}}else r.cr.push(a)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,r,a){const u=new Kd(this.currentUser,e,r,a),g=pm(this.persistenceKey,this.currentUser,e);this.setItem(g,u.tr())}Er(e){const r=pm(this.persistenceKey,this.currentUser,e);this.removeItem(r)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,r,a){const u=fu(this.persistenceKey,e),g=new Zd(e,r,a);this.setItem(u,g.tr())}Pr(e){const r=JSON.stringify(Array.from(e));this.setItem(this.mr,r)}vr(e){const r=this.lr.exec(e);return r?r[1]:null}Sr(e,r){const a=this.vr(e);return dp.Zi(a,r)}Dr(e,r){const a=this.dr.exec(e),u=Number(a[1]);return Kd.Zi(new fn(void 0!==a[2]?a[2]:null),u,r)}Nr(e,r){const a=this._r.exec(e),u=Number(a[1]);return Zd.Zi(u,r)}yr(e){return Qd.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var r=this;return(0,E.Z)(function*(){if(e.user.uid===r.currentUser.uid)return r.syncEngine.Fr(e.batchId,e.state,e.error);qt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,r){const a=r?this.ur.insert(e,r):this.ur.remove(e),u=this.Ir(this.ur),g=this.Ir(a),b=[],M=[];return g.forEach(X=>{u.has(X)||b.push(X)}),u.forEach(X=>{g.has(X)||M.push(X)}),this.syncEngine.Br(b,M).then(()=>{this.ur=a})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let r=D();return e.forEach((a,u)=>{r=r.unionWith(u.activeTargetIds)}),r}}class gm{constructor(){this.Lr=new hp,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,a){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,r,a){this.Ur[e]=r}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new hp,Promise.resolve()}handleUserChange(e,r,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class d_{qr(e){}shutdown(){}}class sd{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){qt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){qt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const od={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fp{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class ad extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,r,a,u,g){const b=this.ho(e,r);qt("RestConnection","Sending: ",b,a);const M={};return this.lo(M,u,g),this.fo(e,b,M,a).then(X=>(qt("RestConnection","Received: ",X),X),X=>{throw Ii("RestConnection",`${e} failed with error: `,X,"url: ",b,"request:",a),X})}_o(e,r,a,u,g,b){return this.ao(e,r,a,u,g)}lo(e,r,a){e["X-Goog-Api-Client"]="gl-js/ fire/"+lr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((u,g)=>e[g]=u),a&&a.headers.forEach((u,g)=>e[g]=u)}ho(e,r){return`${this.oo}/v1/${r}:${od[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,r,a,u){return new Promise((g,b)=>{const M=new dt;M.setWithCredentials(!0),M.listenOnce(I.COMPLETE,()=>{try{switch(M.getLastErrorCode()){case Ai.NO_ERROR:const se=M.getResponseJson();qt("Connection","XHR received:",JSON.stringify(se)),g(se);break;case Ai.TIMEOUT:qt("Connection",'RPC "'+e+'" timed out'),b(new pn(Pt.DEADLINE_EXCEEDED,"Request time out"));break;case Ai.HTTP_ERROR:const Me=M.getStatus();if(qt("Connection",'RPC "'+e+'" failed with status:',Me,"response text:",M.getResponseText()),Me>0){const Je=M.getResponseJson().error;if(Je&&Je.status&&Je.message){const Lt=function(on){const _n=on.toLowerCase().replace(/_/g,"-");return Object.values(Pt).indexOf(_n)>=0?_n:Pt.UNKNOWN}(Je.status);b(new pn(Lt,Je.message))}else b(new pn(Pt.UNKNOWN,"Server responded with status "+M.getStatus()))}else b(new pn(Pt.UNAVAILABLE,"Connection failed."));break;default:Bn()}}finally{qt("Connection",'RPC "'+e+'" completed.')}});const X=JSON.stringify(u);M.send(r,"POST",X,a,15)})}wo(e,r,a){const u=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=la(),b=ao(),M={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(M.xmlHttpFactory=new Y({})),this.lo(M.initMessageHeaders,r,a),M.encodeInitMessageHeaders=!0;const X=u.join("");qt("Connection","Creating WebChannel: "+X,M);const se=g.createWebChannel(X,M);let Me=!1,Je=!1;const Lt=new fp({Hr:_n=>{Je?qt("Connection","Not sending because WebChannel is closed:",_n):(Me||(qt("Connection","Opening WebChannel transport."),se.open(),Me=!0),qt("Connection","WebChannel sending:",_n),se.send(_n))},Jr:()=>se.close()}),on=(_n,tr,hr)=>{_n.listen(tr,Pi=>{try{hr(Pi)}catch(Fs){setTimeout(()=>{throw Fs},0)}})};return on(se,pe.EventType.OPEN,()=>{Je||qt("Connection","WebChannel transport opened.")}),on(se,pe.EventType.CLOSE,()=>{Je||(Je=!0,qt("Connection","WebChannel transport closed"),Lt.io())}),on(se,pe.EventType.ERROR,_n=>{Je||(Je=!0,Ii("Connection","WebChannel transport errored:",_n),Lt.io(new pn(Pt.UNAVAILABLE,"The operation could not be completed")))}),on(se,pe.EventType.MESSAGE,_n=>{var tr;if(!Je){const hr=_n.data[0];Kn(!!hr);const Pi=hr,Fs=Pi.error||(null===(tr=Pi[0])||void 0===tr?void 0:tr.error);if(Fs){qt("Connection","WebChannel received error:",Fs);const us=Fs.status;let oa=function(ns){const Lo=Ui[ns];if(void 0!==Lo)return ou(Lo)}(us),bs=Fs.message;void 0===oa&&(oa=Pt.INTERNAL,bs="Unknown error status: "+us+" with message "+Fs.message),Je=!0,Lt.io(new pn(oa,bs)),se.close()}else qt("Connection","WebChannel received:",hr),Lt.ro(hr)}}),on(b,N.STAT_EVENT,_n=>{_n.stat===w.PROXY?qt("Connection","Detected buffering proxy"):_n.stat===w.NOPROXY&&qt("Connection","Detected no buffering proxy")}),setTimeout(()=>{Lt.so()},0),Lt}}function ld(){return"undefined"!=typeof window?window:null}function Pu(){return"undefined"!=typeof document?document:null}function Xd(s){return new Oi(s,!0)}class Hh{constructor(e,r,a=1e3,u=1.5,g=6e4){this.Hs=e,this.timerId=r,this.mo=a,this.yo=u,this.po=g,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const r=Math.floor(this.Io+this.bo()),a=Math.max(0,Date.now()-this.Eo),u=Math.max(0,r-a);u>0&&qt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Io} ms, delay with jitter: ${r} ms, last attempt: ${a} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,u,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class pp{constructor(e,r,a,u,g,b,M,X){this.Hs=e,this.vo=a,this.Vo=u,this.So=g,this.authCredentialsProvider=b,this.appCheckCredentialsProvider=M,this.listener=X,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Hh(e,r)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,E.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,E.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,r){var a=this;return(0,E.Z)(function*(){a.Uo(),a.qo(),a.No.cancel(),a.Do++,4!==e?a.No.reset():r&&r.code===Pt.RESOURCE_EXHAUSTED?(dr(r.toString()),dr("Using maximum backoff delay to prevent overloading the backend."),a.No.Ao()):r&&r.code===Pt.UNAUTHENTICATED&&3!==a.state&&(a.authCredentialsProvider.invalidateToken(),a.appCheckCredentialsProvider.invalidateToken()),null!==a.stream&&(a.Ko(),a.stream.close(),a.stream=null),a.state=e,yield a.listener.Zr(r)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),r=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,u])=>{this.Do===r&&this.Qo(a,u)},a=>{e(()=>{const u=new pn(Pt.UNKNOWN,"Fetching auth token failed: "+a.message);return this.jo(u)})})}Qo(e,r){const a=this.Go(this.Do);this.stream=this.Wo(e,r),this.stream.Yr(()=>{a(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(u=>{a(()=>this.jo(u))}),this.stream.onMessage(u=>{a(()=>this.onMessage(u))})}Mo(){var e=this;this.state=5,this.No.Ro((0,E.Z)(function*(){e.state=0,e.start()}))}jo(e){return qt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return r=>{this.Hs.enqueueAndForget(()=>this.Do===e?r():(qt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gp extends pp{constructor(e,r,a,u,g,b){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,a,u,b),this.It=g}Wo(e,r){return this.So.wo("Listen",e,r)}onMessage(e){this.No.reset();const r=function(s,e){let r;if("targetChange"in e){const a="NO_CHANGE"===(X=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===X?1:"REMOVE"===X?2:"CURRENT"===X?3:"RESET"===X?4:Bn(),u=e.targetChange.targetIds||[],g=function(X,se){return X.gt?(Kn(void 0===se||"string"==typeof se),ts.fromBase64String(se||"")):(Kn(void 0===se||se instanceof Uint8Array),ts.fromUint8Array(se||new Uint8Array))}(s,e.targetChange.resumeToken),b=e.targetChange.cause,M=b&&function(X){const se=void 0===X.code?Pt.UNKNOWN:ou(X.code);return new pn(se,X.message||"")}(b);r=new he(a,u,g,M||null)}else if("documentChange"in e){const a=e.documentChange,u=pa(s,a.document.name),g=mo(a.document.updateTime),b=new Z({mapValue:{fields:a.document.fields}}),M=Ue.newFoundDocument(u,g,b);r=new A(a.targetIds||[],a.removedTargetIds||[],M.key,M)}else if("documentDelete"in e){const a=e.documentDelete,u=pa(s,a.document),g=a.readTime?mo(a.readTime):fe.min(),b=Ue.newNoDocument(u,g);r=new A([],a.removedTargetIds||[],b.key,b)}else if("documentRemove"in e){const a=e.documentRemove,u=pa(s,a.document);r=new A([],a.removedTargetIds||[],u,null)}else{if(!("filter"in e))return Bn();{const a=e.filter,g=new Su(a.count||0);r=new ne(a.targetId,g)}}var X;return r}(this.It,e),a=function(u){if(!("targetChange"in u))return fe.min();const g=u.targetChange;return g.targetIds&&g.targetIds.length?fe.min():g.readTime?mo(g.readTime):fe.min()}(e);return this.listener.zo(r,a)}Ho(e){const r={};r.database=Ws(this.It),r.addTarget=function(u,g){let b;const M=g.target;return b=Hr(M)?{documents:Od(u,M)}:{query:Nd(u,M)},b.targetId=g.targetId,g.resumeToken.approximateByteSize()>0?b.resumeToken=fa(u,g.resumeToken):g.snapshotVersion.compareTo(fe.min())>0&&(b.readTime=Ns(u,g.snapshotVersion.toTimestamp())),b}(this.It,e);const a=function(s,e){const r=function(a,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Bn()}}(0,e.purpose);return null==r?null:{"goog-listen-tags":r}}(0,e);a&&(r.labels=a),this.Lo(r)}Jo(e){const r={};r.database=Ws(this.It),r.removeTarget=e,this.Lo(r)}}class mp extends pp{constructor(e,r,a,u,g,b){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,a,u,b),this.It=g,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,r){return this.So.wo("Write",e,r)}onMessage(e){if(Kn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const r=function(s,e){return s&&s.length>0?(Kn(void 0!==e),s.map(r=>function(a,u){let g=mo(a.updateTime?a.updateTime:u);return g.isEqual(fe.min())&&(g=mo(u)),new Ka(g,a.transformResults||[])}(r,e))):[]}(e.writeResults,e.commitTime),a=mo(e.commitTime);return this.listener.tu(a,r)}return Kn(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Ws(this.It),this.Lo(e)}Zo(e){const r={streamToken:this.lastStreamToken,writes:e.map(a=>bc(this.It,a))};this.Lo(r)}}class mm extends class{}{constructor(e,r,a,u){super(),this.authCredentials=e,this.appCheckCredentials=r,this.So=a,this.It=u,this.su=!1}iu(){if(this.su)throw new pn(Pt.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,r,a){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,g])=>this.So.ao(e,r,a,u,g)).catch(u=>{throw"FirebaseError"===u.name?(u.code===Pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pn(Pt.UNKNOWN,u.toString())})}_o(e,r,a,u){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([g,b])=>this.So._o(e,r,a,g,b,u)).catch(g=>{throw"FirebaseError"===g.name?(g.code===Pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g):new pn(Pt.UNKNOWN,g.toString())})}terminate(){this.su=!0}}class ym{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const r=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(dr(r),this.uu=!1):qt("OnlineStateTracker",r)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class b0{constructor(e,r,a,u,g){var b=this;this.localStore=e,this.datastore=r,this.asyncQueue=a,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=g,this.gu.qr(M=>{a.enqueueAndForget((0,E.Z)(function*(){var X;rc(b)&&(qt("RemoteStore","Restarting streams for network reachability change."),yield(X=(0,E.Z)(function*(se){const Me=Ln(se);Me.wu.add(4),yield cd(Me),Me.yu.set("Unknown"),Me.wu.delete(4),yield ud(Me)}),function(se){return X.apply(this,arguments)})(b))}))}),this.yu=new ym(a,u)}}function ud(s){return Gh.apply(this,arguments)}function Gh(){return Gh=(0,E.Z)(function*(s){if(rc(s))for(const e of s.mu)yield e(!0)}),Gh.apply(this,arguments)}function cd(s){return zh.apply(this,arguments)}function zh(){return zh=(0,E.Z)(function*(s){for(const e of s.mu)yield e(!1)}),zh.apply(this,arguments)}function qh(s,e){const r=Ln(s);r._u.has(e.targetId)||(r._u.set(e.targetId,e),vm(r)?_p(r):ku(r).Oo()&&Ua(r,e))}function Jd(s,e){const r=Ln(s),a=ku(r);r._u.delete(e),a.Oo()&&_m(r,e),0===r._u.size&&(a.Oo()?a.$o():rc(r)&&r.yu.set("Unknown"))}function Ua(s,e){s.pu.Mt(e.targetId),ku(s).Ho(e)}function _m(s,e){s.pu.Mt(e),ku(s).Jo(e)}function _p(s){s.pu=new Zt({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),se:e=>s._u.get(e)||null}),ku(s).start(),s.yu.cu()}function vm(s){return rc(s)&&!ku(s).ko()&&s._u.size>0}function rc(s){return 0===Ln(s).wu.size}function vp(s){s.pu=void 0}function C0(s){return Ep.apply(this,arguments)}function Ep(){return Ep=(0,E.Z)(function*(s){s._u.forEach((e,r)=>{Ua(s,e)})}),Ep.apply(this,arguments)}function Ip(s,e){return Yh.apply(this,arguments)}function Yh(){return Yh=(0,E.Z)(function*(s,e){vp(s),vm(s)?(s.yu.lu(e),_p(s)):s.yu.set("Unknown")}),Yh.apply(this,arguments)}function h_(s,e,r){return bp.apply(this,arguments)}function bp(){return bp=(0,E.Z)(function*(s,e,r){if(s.yu.set("Online"),e instanceof he&&2===e.state&&e.cause)try{yield(a=(0,E.Z)(function*(u,g){const b=g.cause;for(const M of g.targetIds)u._u.has(M)&&(yield u.remoteSyncer.rejectListen(M,b),u._u.delete(M),u.pu.removeTarget(M))}),function(u,g){return a.apply(this,arguments)})(s,e)}catch(a){qt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),a),yield Kh(s,a)}else if(e instanceof A?s.pu.Gt(e):e instanceof ne?s.pu.Yt(e):s.pu.Wt(e),!r.isEqual(fe.min()))try{const a=yield a_(s.localStore);r.compareTo(a)>=0&&(yield function(u,g){const b=u.pu.te(g);return b.targetChanges.forEach((M,X)=>{if(M.resumeToken.approximateByteSize()>0){const se=u._u.get(X);se&&u._u.set(X,se.withResumeToken(M.resumeToken,g))}}),b.targetMismatches.forEach(M=>{const X=u._u.get(M);if(!X)return;u._u.set(M,X.withResumeToken(ts.EMPTY_BYTE_STRING,X.snapshotVersion)),_m(u,M);const se=new xe(X.target,M,1,X.sequenceNumber);Ua(u,se)}),u.remoteSyncer.applyRemoteEvent(b)}(s,r))}catch(a){qt("RemoteStore","Failed to raise snapshot:",a),yield Kh(s,a)}var a}),bp.apply(this,arguments)}function Kh(s,e,r){return Zh.apply(this,arguments)}function Zh(){return Zh=(0,E.Z)(function*(s,e,r){if(!ti(e))throw e;s.wu.add(1),yield cd(s),s.yu.set("Offline"),r||(r=()=>a_(s.localStore)),s.asyncQueue.enqueueRetryable((0,E.Z)(function*(){qt("RemoteStore","Retrying IndexedDB access"),yield r(),s.wu.delete(1),yield ud(s)}))}),Zh.apply(this,arguments)}function Em(s,e){return e().catch(r=>Kh(s,r,e))}function Mc(s){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,E.Z)(function*(s){const e=Ln(s),r=gu(e);let a=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;f_(e);)try{const u=yield I0(e.localStore,a);if(null===u){0===e.du.length&&r.$o();break}a=u.batchId,Im(e,u)}catch(u){yield Kh(e,u)}wp(e)&&bm(e)}),Cp.apply(this,arguments)}function f_(s){return rc(s)&&s.du.length<10}function Im(s,e){s.du.push(e);const r=gu(s);r.Oo()&&r.Xo&&r.Zo(e.mutations)}function wp(s){return rc(s)&&!gu(s).ko()&&s.du.length>0}function bm(s){gu(s).start()}function pu(s){return eh.apply(this,arguments)}function eh(){return eh=(0,E.Z)(function*(s){gu(s).nu()}),eh.apply(this,arguments)}function p_(s){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,E.Z)(function*(s){const e=gu(s);for(const r of s.du)e.Zo(r.mutations)}),Dp.apply(this,arguments)}function w0(s,e,r){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,E.Z)(function*(s,e,r){const a=s.du.shift(),u=U.from(a,e,r);yield Em(s,()=>s.remoteSyncer.applySuccessfulWrite(u)),yield Mc(s)}),Qh.apply(this,arguments)}function g_(s,e){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,E.Z)(function*(s,e){var r;e&&gu(s).Xo&&(yield(r=(0,E.Z)(function*(a,u){if(Au(g=u.code)&&g!==Pt.ABORTED){const b=a.du.shift();gu(a).Fo(),yield Em(a,()=>a.remoteSyncer.rejectFailedWrite(b.batchId,u)),yield Mc(a)}var g}),function(a,u){return r.apply(this,arguments)})(s,e)),wp(s)&&bm(s)}),Tp.apply(this,arguments)}function Cm(s,e){return th.apply(this,arguments)}function th(){return th=(0,E.Z)(function*(s,e){const r=Ln(s);r.asyncQueue.verifyOperationInProgress(),qt("RemoteStore","RemoteStore received new credentials");const a=rc(r);r.wu.add(3),yield cd(r),a&&r.yu.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(e),r.wu.delete(3),yield ud(r)}),th.apply(this,arguments)}function Sp(s,e){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,E.Z)(function*(s,e){const r=Ln(s);e?(r.wu.delete(2),yield ud(r)):e||(r.wu.add(2),yield cd(r),r.yu.set("Unknown"))}),Ap.apply(this,arguments)}function ku(s){return s.Iu||(s.Iu=function(e,r,a){const u=Ln(e);return u.iu(),new gp(r,u.So,u.authCredentials,u.appCheckCredentials,u.It,a)}(s.datastore,s.asyncQueue,{Yr:C0.bind(null,s),Zr:Ip.bind(null,s),zo:h_.bind(null,s)}),s.mu.push(function(){var e=(0,E.Z)(function*(r){r?(s.Iu.Fo(),vm(s)?_p(s):s.yu.set("Unknown")):(yield s.Iu.stop(),vp(s))});return function(r){return e.apply(this,arguments)}}())),s.Iu}function gu(s){return s.Tu||(s.Tu=function(e,r,a){const u=Ln(e);return u.iu(),new mp(r,u.So,u.authCredentials,u.appCheckCredentials,u.It,a)}(s.datastore,s.asyncQueue,{Yr:pu.bind(null,s),Zr:g_.bind(null,s),eu:p_.bind(null,s),tu:w0.bind(null,s)}),s.mu.push(function(){var e=(0,E.Z)(function*(r){r?(s.Tu.Fo(),yield Mc(s)):(yield s.Tu.stop(),s.du.length>0&&(qt("RemoteStore",`Stopping write stream with ${s.du.length} pending writes`),s.du=[]))});return function(r){return e.apply(this,arguments)}}())),s.Tu}class xp{constructor(e,r,a,u,g){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=a,this.op=u,this.removalCallback=g,this.deferred=new Ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(b=>{})}static createAndSchedule(e,r,a,u,g){const b=Date.now()+a,M=new xp(e,r,b,u,g);return M.start(a),M}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new pn(Pt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ic(s,e){if(dr("AsyncQueue",`${e}: ${s}`),ti(s))return new pn(Pt.UNAVAILABLE,`${e}: ${s}`);throw s}class sc{constructor(e){this.comparator=e?(r,a)=>e(r,a)||Rt.comparator(r.key,a.key):(r,a)=>Rt.comparator(r.key,a.key),this.keyedMap=yl(),this.sortedSet=new ps(this.comparator)}static emptySet(e){return new sc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,a)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof sc)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;r.hasNext();){const u=r.getNext().key,g=a.getNext().key;if(!u.isEqual(g))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,r){const a=new sc;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=r,a}}class Rp{constructor(){this.Eu=new ps(Rt.comparator)}track(e){const r=e.doc.key,a=this.Eu.get(r);a?0!==e.type&&3===a.type?this.Eu=this.Eu.insert(r,e):3===e.type&&1!==a.type?this.Eu=this.Eu.insert(r,{type:a.type,doc:e.doc}):2===e.type&&2===a.type?this.Eu=this.Eu.insert(r,{type:2,doc:e.doc}):2===e.type&&0===a.type?this.Eu=this.Eu.insert(r,{type:0,doc:e.doc}):1===e.type&&0===a.type?this.Eu=this.Eu.remove(r):1===e.type&&2===a.type?this.Eu=this.Eu.insert(r,{type:1,doc:a.doc}):0===e.type&&1===a.type?this.Eu=this.Eu.insert(r,{type:2,doc:e.doc}):Bn():this.Eu=this.Eu.insert(r,e)}Au(){const e=[];return this.Eu.inorderTraversal((r,a)=>{e.push(a)}),e}}class dd{constructor(e,r,a,u,g,b,M,X,se){this.query=e,this.docs=r,this.oldDocs=a,this.docChanges=u,this.mutatedKeys=g,this.fromCache=b,this.syncStateChanged=M,this.excludesMetadataChanges=X,this.hasCachedResults=se}static fromInitialDocuments(e,r,a,u,g){const b=[];return r.forEach(M=>{b.push({type:0,doc:M})}),new dd(e,r,sc.emptySet(r),b,a,u,!0,!1,g)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Po(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,a=e.docChanges;if(r.length!==a.length)return!1;for(let u=0;u<r.length;u++)if(r[u].type!==a[u].type||!r[u].doc.isEqual(a[u].doc))return!1;return!0}}class m_{constructor(){this.Ru=void 0,this.listeners=[]}}class Mp{constructor(){this.queries=new ml(e=>Zl(e),Po),this.onlineState="Unknown",this.bu=new Set}}function wm(s,e){return Op.apply(this,arguments)}function Op(){return Op=(0,E.Z)(function*(s,e){const r=Ln(s),a=e.query;let u=!1,g=r.queries.get(a);if(g||(u=!0,g=new m_),u)try{g.Ru=yield r.onListen(a)}catch(b){const M=ic(b,`Initialization of query '${Iu(e.query)}' failed`);return void e.onError(M)}r.queries.set(a,g),g.listeners.push(e),e.Pu(r.onlineState),g.Ru&&e.vu(g.Ru)&&ef(r)}),Op.apply(this,arguments)}function Xh(s,e){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,E.Z)(function*(s,e){const r=Ln(s),a=e.query;let u=!1;const g=r.queries.get(a);if(g){const b=g.listeners.indexOf(e);b>=0&&(g.listeners.splice(b,1),u=0===g.listeners.length)}if(u)return r.queries.delete(a),r.onUnlisten(a)}),Jh.apply(this,arguments)}function Dm(s,e){const r=Ln(s);let a=!1;for(const u of e){const b=r.queries.get(u.query);if(b){for(const M of b.listeners)M.vu(u)&&(a=!0);b.Ru=u}}a&&ef(r)}function Tm(s,e,r){const a=Ln(s),u=a.queries.get(e);if(u)for(const g of u.listeners)g.onError(r);a.queries.delete(e)}function ef(s){s.bu.forEach(e=>{e.next()})}class Hl{constructor(e,r,a){this.query=e,this.Vu=r,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=a||{}}vu(e){if(!this.options.includeMetadataChanges){const a=[];for(const u of e.docChanges)3!==u.type&&a.push(u);e=new dd(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),r=!0):this.xu(e,this.onlineState)&&(this.Nu(e),r=!0),this.Du=e,r}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let r=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),r=!0),r}xu(e,r){return!e.fromCache||(!this.options.ku||!("Offline"!==r))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===r)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=dd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class tf{constructor(e,r){this.payload=e,this.byteLength=r}Ou(){return"metadata"in this.payload}}class Sm{constructor(e){this.It=e}Ji(e){return pa(this.It,e)}Yi(e){return e.metadata.exists?Ic(this.It,e.document,!1):Ue.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return mo(e)}}class y_{constructor(e,r,a){this.Mu=e,this.localStore=r,this.It=a,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=__(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++r;const a=K.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(a.get(a.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}$u(e){const r=new Map,a=new Sm(this.It);for(const u of e)if(u.metadata.queries){const g=a.Ji(u.metadata.name);for(const b of u.metadata.queries){const M=(r.get(b)||Xr()).add(g);r.set(b,M)}}return r}complete(){var e=this;return(0,E.Z)(function*(){const r=yield function(s,e,r,a){return Bh.apply(this,arguments)}(e.localStore,new Sm(e.It),e.documents,e.Mu.id),a=e.$u(e.documents);for(const u of e.queries)yield cp(e.localStore,u,a.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:r}})()}}function __(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}class Oc{constructor(e){this.key=e}}class Np{constructor(e){this.key=e}}class hd{constructor(e,r){this.query=e,this.Uu=r,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Xr(),this.mutatedKeys=Xr(),this.Gu=ra(e),this.Qu=new sc(this.Gu)}get ju(){return this.Uu}Wu(e,r){const a=r?r.zu:new Rp,u=r?r.Qu:this.Qu;let g=r?r.mutatedKeys:this.mutatedKeys,b=u,M=!1;const X="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,se="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((Me,Je)=>{const Lt=u.get(Me),on=Ql(this.query,Je)?Je:null,_n=!!Lt&&this.mutatedKeys.has(Lt.key),tr=!!on&&(on.hasLocalMutations||this.mutatedKeys.has(on.key)&&on.hasCommittedMutations);let hr=!1;Lt&&on?Lt.data.isEqual(on.data)?_n!==tr&&(a.track({type:3,doc:on}),hr=!0):this.Hu(Lt,on)||(a.track({type:2,doc:on}),hr=!0,(X&&this.Gu(on,X)>0||se&&this.Gu(on,se)<0)&&(M=!0)):!Lt&&on?(a.track({type:0,doc:on}),hr=!0):Lt&&!on&&(a.track({type:1,doc:Lt}),hr=!0,(X||se)&&(M=!0)),hr&&(on?(b=b.add(on),g=tr?g.add(Me):g.delete(Me)):(b=b.delete(Me),g=g.delete(Me)))}),null!==this.query.limit)for(;b.size>this.query.limit;){const Me="F"===this.query.limitType?b.last():b.first();b=b.delete(Me.key),g=g.delete(Me.key),a.track({type:1,doc:Me})}return{Qu:b,zu:a,$i:M,mutatedKeys:g}}Hu(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,a){const u=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const g=e.zu.Au();g.sort((se,Me)=>function(Je,Lt){const on=_n=>{switch(_n){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bn()}};return on(Je)-on(Lt)}(se.type,Me.type)||this.Gu(se.doc,Me.doc)),this.Ju(a);const b=r?this.Yu():[],M=0===this.Ku.size&&this.current?1:0,X=M!==this.qu;return this.qu=M,0!==g.length||X?{snapshot:new dd(this.query,e.Qu,u,g,e.mutatedKeys,0===M,X,!1,!!a&&a.resumeToken.approximateByteSize()>0),Xu:b}:{Xu:b}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Rp,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(r=>this.Uu=this.Uu.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Uu=this.Uu.delete(r)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Xr(),this.Qu.forEach(a=>{this.Zu(a.key)&&(this.Ku=this.Ku.add(a.key))});const r=[];return e.forEach(a=>{this.Ku.has(a)||r.push(new Np(a))}),this.Ku.forEach(a=>{e.has(a)||r.push(new Oc(a))}),r}tc(e){this.Uu=e.Hi,this.Ku=Xr();const r=this.Wu(e.documents);return this.applyChanges(r,!0)}ec(){return dd.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class nh{constructor(e,r,a){this.query=e,this.targetId=r,this.view=a}}class v_{constructor(e){this.key=e,this.nc=!1}}class Pp{constructor(e,r,a,u,g,b){this.localStore=e,this.remoteStore=r,this.eventManager=a,this.sharedClientState=u,this.currentUser=g,this.maxConcurrentLimboResolutions=b,this.sc={},this.ic=new ml(M=>Zl(M),Po),this.rc=new Map,this.oc=new Set,this.uc=new ps(Rt.comparator),this.cc=new Map,this.ac=new jl,this.hc={},this.lc=new Map,this.fc=tc.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function Am(s,e){return kp.apply(this,arguments)}function kp(){return kp=(0,E.Z)(function*(s,e){const r=hf(s);let a,u;const g=r.ic.get(e);if(g)a=g.targetId,r.sharedClientState.addLocalQueryTarget(a),u=g.view.ec();else{const b=yield qd(r.localStore,Is(e));r.isPrimaryClient&&qh(r.remoteStore,b);const M=r.sharedClientState.addLocalQueryTarget(b.targetId);a=b.targetId,u=yield nf(r,e,a,"current"===M,b.resumeToken)}return u}),kp.apply(this,arguments)}function nf(s,e,r,a,u){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,E.Z)(function*(s,e,r,a,u){s._c=(Je,Lt,on)=>{return(_n=(0,E.Z)(function*(tr,hr,Pi,Fs){let us=hr.view.Wu(Pi);us.$i&&(us=yield up(tr.localStore,hr.query,!1).then(({documents:ns})=>hr.view.Wu(ns,us)));const oa=Fs&&Fs.targetChanges.get(hr.targetId),bs=hr.view.applyChanges(us,tr.isPrimaryClient,oa);return Wl(tr,hr.targetId,bs.Xu),bs.snapshot}),function(tr,hr,Pi,Fs){return _n.apply(this,arguments)})(s,Je,Lt,on);var _n};const g=yield up(s.localStore,e,!0),b=new hd(e,g.Hi),M=b.Wu(g.documents),X=_.createSynthesizedTargetChangeForCurrentChange(r,a&&"Offline"!==s.onlineState,u),se=b.applyChanges(M,s.isPrimaryClient,X);Wl(s,r,se.Xu);const Me=new nh(e,r,b);return s.ic.set(e,Me),s.rc.has(r)?s.rc.get(r).push(e):s.rc.set(r,[e]),se.snapshot}),Fp.apply(this,arguments)}function Lp(s,e){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,E.Z)(function*(s,e){const r=Ln(s),a=r.ic.get(e),u=r.rc.get(a.targetId);if(u.length>1)return r.rc.set(a.targetId,u.filter(g=>!Po(g,e))),void r.ic.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||(yield Yd(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),Jd(r.remoteStore,a.targetId),ac(r,a.targetId)}).catch(ye))):(ac(r,a.targetId),yield Yd(r.localStore,a.targetId,!0))}),Vp.apply(this,arguments)}function rf(){return rf=(0,E.Z)(function*(s,e,r){const a=qp(s);try{const u=yield function(g,b){const M=Ln(g),X=bi.now(),se=b.reduce((Lt,on)=>Lt.add(on.key),Xr());let Me,Je;return M.persistence.runTransaction("Locally write mutations","readwrite",Lt=>{let on=Go(),_n=Xr();return M.Gi.getEntries(Lt,se).next(tr=>{on=tr,on.forEach((hr,Pi)=>{Pi.isValidDocument()||(_n=_n.add(hr))})}).next(()=>M.localDocuments.getOverlayedDocuments(Lt,on)).next(tr=>{Me=tr;const hr=[];for(const Pi of b){const Fs=tu(Pi,Me.get(Pi.key).overlayedDocument);null!=Fs&&hr.push(new $a(Pi.key,Fs,me(Fs.value.mapValue),Gi.exists(!0)))}return M.mutationQueue.addMutationBatch(Lt,X,hr,b)}).next(tr=>{Je=tr;const hr=tr.applyToLocalDocumentSet(Me,_n);return M.documentOverlayCache.saveOverlays(Lt,tr.batchId,hr)})}).then(()=>({batchId:Je.batchId,changes:xu(Me)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(u.batchId),function(g,b,M){let X=g.hc[g.currentUser.toKey()];X||(X=new ps(fr)),X=X.insert(b,M),g.hc[g.currentUser.toKey()]=X}(a,u.batchId,r),yield lc(a,u.changes),yield Mc(a.remoteStore)}catch(u){const g=ic(u,"Failed to persist write");r.reject(g)}}),rf.apply(this,arguments)}function Nc(s,e){return sf.apply(this,arguments)}function sf(){return sf=(0,E.Z)(function*(s,e){const r=Ln(s);try{const a=yield E0(r.localStore,e);e.targetChanges.forEach((u,g)=>{const b=r.cc.get(g);b&&(Kn(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?b.nc=!0:u.modifiedDocuments.size>0?Kn(b.nc):u.removedDocuments.size>0&&(Kn(b.nc),b.nc=!1))}),yield lc(r,a,e)}catch(a){yield ye(a)}}),sf.apply(this,arguments)}function xm(s,e,r){const a=Ln(s);if(a.isPrimaryClient&&0===r||!a.isPrimaryClient&&1===r){const u=[];a.ic.forEach((g,b)=>{const M=b.view.Pu(e);M.snapshot&&u.push(M.snapshot)}),function(g,b){const M=Ln(g);M.onlineState=b;let X=!1;M.queries.forEach((se,Me)=>{for(const Je of Me.listeners)Je.Pu(b)&&(X=!0)}),X&&ef(M)}(a.eventManager,e),u.length&&a.sc.zo(u),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}function I_(s,e,r){return oc.apply(this,arguments)}function oc(){return oc=(0,E.Z)(function*(s,e,r){const a=Ln(s);a.sharedClientState.updateQueryState(e,"rejected",r);const u=a.cc.get(e),g=u&&u.key;if(g){let b=new ps(Rt.comparator);b=b.insert(g,Ue.newNoDocument(g,fe.min()));const M=Xr().add(g),X=new p(fe.min(),new Map,new Zi(fr),b,M);yield Nc(a,X),a.uc=a.uc.remove(g),a.cc.delete(e),rh(a)}else yield Yd(a.localStore,e,!1).then(()=>ac(a,e,r)).catch(ye)}),oc.apply(this,arguments)}function b_(s,e){return Bp.apply(this,arguments)}function Bp(){return Bp=(0,E.Z)(function*(s,e){const r=Ln(s),a=e.batch.batchId;try{const u=yield v0(r.localStore,e);Ps(r,a,null),af(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),yield lc(r,u)}catch(u){yield ye(u)}}),Bp.apply(this,arguments)}function C_(s,e,r){return $p.apply(this,arguments)}function $p(){return $p=(0,E.Z)(function*(s,e,r){const a=Ln(s);try{const u=yield function(g,b){const M=Ln(g);return M.persistence.runTransaction("Reject batch","readwrite-primary",X=>{let se;return M.mutationQueue.lookupMutationBatch(X,b).next(Me=>(Kn(null!==Me),se=Me.keys(),M.mutationQueue.removeMutationBatch(X,Me))).next(()=>M.mutationQueue.performConsistencyCheck(X)).next(()=>M.documentOverlayCache.removeOverlaysForBatchId(X,se,b)).next(()=>M.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(X,se)).next(()=>M.localDocuments.getDocuments(X,se))})}(a.localStore,e);Ps(a,e,r),af(a,e),a.sharedClientState.updateMutationState(e,"rejected",r),yield lc(a,u)}catch(u){yield ye(u)}}),$p.apply(this,arguments)}function Up(){return Up=(0,E.Z)(function*(s,e){const r=Ln(s);rc(r.remoteStore)||qt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const a=yield function(g){const b=Ln(g);return b.persistence.runTransaction("Get highest unacknowledged batch id","readonly",M=>b.mutationQueue.getHighestUnacknowledgedBatchId(M))}(r.localStore);if(-1===a)return void e.resolve();const u=r.lc.get(a)||[];u.push(e),r.lc.set(a,u)}catch(a){const u=ic(a,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),Up.apply(this,arguments)}function af(s,e){(s.lc.get(e)||[]).forEach(r=>{r.resolve()}),s.lc.delete(e)}function Ps(s,e,r){const a=Ln(s);let u=a.hc[a.currentUser.toKey()];if(u){const g=u.get(e);g&&(r?g.reject(r):g.resolve(),u=u.remove(e)),a.hc[a.currentUser.toKey()]=u}}function ac(s,e,r=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.rc.get(e))s.ic.delete(a),r&&s.sc.wc(a,r);s.rc.delete(e),s.isPrimaryClient&&s.ac.ls(e).forEach(a=>{s.ac.containsKey(a)||w_(s,a)})}function w_(s,e){s.oc.delete(e.path.canonicalString());const r=s.uc.get(e);null!==r&&(Jd(s.remoteStore,r),s.uc=s.uc.remove(e),s.cc.delete(r),rh(s))}function Wl(s,e,r){for(const a of r)a instanceof Oc?(s.ac.addReference(a.key,e),jp(s,a)):a instanceof Np?(qt("SyncEngine","Document no longer in limbo: "+a.key),s.ac.removeReference(a.key,e),s.ac.containsKey(a.key)||w_(s,a.key)):Bn()}function jp(s,e){const r=e.key,a=r.path.canonicalString();s.uc.get(r)||s.oc.has(a)||(qt("SyncEngine","New document in limbo: "+r),s.oc.add(a),rh(s))}function rh(s){for(;s.oc.size>0&&s.uc.size<s.maxConcurrentLimboResolutions;){const e=s.oc.values().next().value;s.oc.delete(e);const r=new Rt(K.fromString(e)),a=s.fc.next();s.cc.set(a,new v_(r)),s.uc=s.uc.insert(r,a),qh(s.remoteStore,new xe(Is(go(r.path)),a,2,as.at))}}function lc(s,e,r){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,E.Z)(function*(s,e,r){const a=Ln(s),u=[],g=[],b=[];var M;a.ic.isEmpty()||(a.ic.forEach((M,X)=>{b.push(a._c(X,e,r).then(se=>{if((se||r)&&a.isPrimaryClient&&a.sharedClientState.updateQueryState(X.targetId,(null==se?void 0:se.fromCache)?"not-current":"current"),se){u.push(se);const Me=um.Ci(X.targetId,se);g.push(Me)}}))}),yield Promise.all(b),a.sc.zo(u),yield(M=(0,E.Z)(function*(X,se){const Me=Ln(X);try{yield Me.persistence.runTransaction("notifyLocalViewChanges","readwrite",Je=>ge.forEach(se,Lt=>ge.forEach(Lt.Si,on=>Me.persistence.referenceDelegate.addReference(Je,Lt.targetId,on)).next(()=>ge.forEach(Lt.Di,on=>Me.persistence.referenceDelegate.removeReference(Je,Lt.targetId,on)))))}catch(Je){if(!ti(Je))throw Je;qt("LocalStore","Failed to update sequence numbers: "+Je)}for(const Je of se){const Lt=Je.targetId;if(!Je.fromCache){const on=Me.Ui.get(Lt),tr=on.withLastLimboFreeSnapshotVersion(on.snapshotVersion);Me.Ui=Me.Ui.insert(Lt,tr)}}}),function(X,se){return M.apply(this,arguments)})(a.localStore,g))}),Hp.apply(this,arguments)}function D_(s,e){return lf.apply(this,arguments)}function lf(){return lf=(0,E.Z)(function*(s,e){const r=Ln(s);if(!r.currentUser.isEqual(e)){qt("SyncEngine","User change. New user:",e.toKey());const a=yield Lh(r.localStore,e);r.currentUser=e,(u=r).lc.forEach(b=>{b.forEach(M=>{M.reject(new pn(Pt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.lc.clear(),r.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),yield lc(r,a.ji)}var u}),lf.apply(this,arguments)}function Rm(s,e){const r=Ln(s),a=r.cc.get(e);if(a&&a.nc)return Xr().add(a.key);{let u=Xr();const g=r.rc.get(e);if(!g)return u;for(const b of g){const M=r.ic.get(b);u=u.unionWith(M.view.ju)}return u}}function Mm(s,e){return uf.apply(this,arguments)}function uf(){return uf=(0,E.Z)(function*(s,e){const r=Ln(s),a=yield up(r.localStore,e.query,!0),u=e.view.tc(a);return r.isPrimaryClient&&Wl(r,e.targetId,u.Xu),u}),uf.apply(this,arguments)}function T_(s,e){return Wp.apply(this,arguments)}function Wp(){return Wp=(0,E.Z)(function*(s,e){const r=Ln(s);return Nu(r.localStore,e).then(a=>lc(r,a))}),Wp.apply(this,arguments)}function ih(s,e,r,a){return sh.apply(this,arguments)}function sh(){return sh=(0,E.Z)(function*(s,e,r,a){const u=Ln(s),g=yield function(b,M){const X=Ln(b),se=Ln(X.mutationQueue);return X.persistence.runTransaction("Lookup mutation documents","readonly",Me=>se.Tn(Me,M).next(Je=>Je?X.localDocuments.getDocuments(Me,Je):ge.resolve(null)))}(u.localStore,e);var M;null!==g?("pending"===r?yield Mc(u.remoteStore):"acknowledged"===r||"rejected"===r?(Ps(u,e,a||null),af(u,e),M=e,Ln(Ln(u.localStore).mutationQueue).An(M)):Bn(),yield lc(u,g)):qt("SyncEngine","Cannot apply mutation batch with id: "+e)}),sh.apply(this,arguments)}function cf(){return cf=(0,E.Z)(function*(s,e){const r=Ln(s);if(hf(r),qp(r),!0===e&&!0!==r.dc){const a=r.sharedClientState.getAllActiveQueryTargets(),u=yield Gp(r,a.toArray());r.dc=!0,yield Sp(r.remoteStore,!0);for(const g of u)qh(r.remoteStore,g)}else if(!1===e&&!1!==r.dc){const a=[];let u=Promise.resolve();r.rc.forEach((g,b)=>{r.sharedClientState.isLocalQueryTarget(b)?a.push(b):u=u.then(()=>(ac(r,b),Yd(r.localStore,b,!0))),Jd(r.remoteStore,b)}),yield u,yield Gp(r,a),function(g){const b=Ln(g);b.cc.forEach((M,X)=>{Jd(b.remoteStore,X)}),b.ac.fs(),b.cc=new Map,b.uc=new ps(Rt.comparator)}(r),r.dc=!1,yield Sp(r.remoteStore,!1)}}),cf.apply(this,arguments)}function Gp(s,e,r){return df.apply(this,arguments)}function df(){return df=(0,E.Z)(function*(s,e,r){const a=Ln(s),u=[],g=[];for(const b of e){let M;const X=a.rc.get(b);if(X&&0!==X.length){M=yield qd(a.localStore,Is(X[0]));for(const se of X){const Me=a.ic.get(se),Je=yield Mm(a,Me);Je.snapshot&&g.push(Je.snapshot)}}else{const se=yield u_(a.localStore,b);M=yield qd(a.localStore,se),yield nf(a,Nm(se),b,!1,M.resumeToken)}u.push(M)}return a.sc.zo(g),u}),df.apply(this,arguments)}function Nm(s){return Fl(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function S_(s){const e=Ln(s);return Ln(Ln(e.localStore).persistence).vi()}function A_(s,e,r,a){return zp.apply(this,arguments)}function zp(){return zp=(0,E.Z)(function*(s,e,r,a){const u=Ln(s);if(u.dc)return void qt("SyncEngine","Ignoring unexpected query state notification.");const g=u.rc.get(e);if(g&&g.length>0)switch(r){case"current":case"not-current":{const b=yield Nu(u.localStore,bu(g[0])),M=p.createSynthesizedRemoteEventForCurrentChange(e,"current"===r,ts.EMPTY_BYTE_STRING);yield lc(u,b,M);break}case"rejected":yield Yd(u.localStore,e,!0),ac(u,e,a);break;default:Bn()}}),zp.apply(this,arguments)}function Pm(s,e,r){return km.apply(this,arguments)}function km(){return km=(0,E.Z)(function*(s,e,r){const a=hf(s);if(a.dc){for(const u of e){if(a.rc.has(u)){qt("SyncEngine","Adding an already active target "+u);continue}const g=yield u_(a.localStore,u),b=yield qd(a.localStore,g);yield nf(a,Nm(g),b.targetId,!1,b.resumeToken),qh(a.remoteStore,b)}for(const u of r)a.rc.has(u)&&(yield Yd(a.localStore,u,!1).then(()=>{Jd(a.remoteStore,u),ac(a,u)}).catch(ye))}}),km.apply(this,arguments)}function hf(s){const e=Ln(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Nc.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Rm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=I_.bind(null,e),e.sc.zo=Dm.bind(null,e.eventManager),e.sc.wc=Tm.bind(null,e.eventManager),e}function qp(s){const e=Ln(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=b_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=C_.bind(null,e),e}class R_{constructor(){this.synchronizeTabs=!1}initialize(e){var r=this;return(0,E.Z)(function*(){r.It=Xd(e.databaseInfo.databaseId),r.sharedClientState=r.gc(e),r.persistence=r.yc(e),yield r.persistence.start(),r.localStore=r.Ic(e),r.gcScheduler=r.Tc(e,r.localStore),r.indexBackfillerScheduler=r.Ec(e,r.localStore)})()}Tc(e,r){return null}Ec(e,r){return null}Ic(e){return dm(this.persistence,new lp,e.initialUser,this.It)}yc(e){return new o_(Rc.Bs,this.It)}gc(e){return new gm}terminate(){var e=this;return(0,E.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class M_ extends R_{constructor(e,r,a){super(),this.Ac=e,this.cacheSizeBytes=r,this.forceOwnership=a,this.synchronizeTabs=!1}initialize(e){var r=()=>super.initialize,a=this;return(0,E.Z)(function*(){yield r().call(a,e),yield a.Ac.initialize(a,e),yield qp(a.Ac.syncEngine),yield Mc(a.Ac.remoteStore),yield a.persistence.li(()=>(a.gcScheduler&&!a.gcScheduler.started&&a.gcScheduler.start(),a.indexBackfillerScheduler&&!a.indexBackfillerScheduler.started&&a.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return dm(this.persistence,new lp,e.initialUser,this.It)}Tc(e,r){return new tm(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,r)}Ec(e,r){const a=new No(r,this.persistence);return new xo(e.asyncQueue,a)}yc(e){const r=ap(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),a=void 0!==this.cacheSizeBytes?Xa.withCacheSize(this.cacheSizeBytes):Xa.DEFAULT;return new sp(this.synchronizeTabs,r,e.clientId,a,e.asyncQueue,ld(),Pu(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new gm}}class Yp extends M_{constructor(e,r){super(e,r,!1),this.Ac=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(e){var r=()=>super.initialize,a=this;return(0,E.Z)(function*(){yield r().call(a,e);const u=a.Ac.syncEngine;a.sharedClientState instanceof jh&&(a.sharedClientState.syncEngine={Fr:ih.bind(null,u),$r:A_.bind(null,u),Br:Pm.bind(null,u),vi:S_.bind(null,u),Mr:T_.bind(null,u)},yield a.sharedClientState.start()),yield a.persistence.li(function(){var g=(0,E.Z)(function*(b){yield function(s,e){return cf.apply(this,arguments)}(a.Ac.syncEngine,b),a.gcScheduler&&(b&&!a.gcScheduler.started?a.gcScheduler.start():b||a.gcScheduler.stop()),a.indexBackfillerScheduler&&(b&&!a.indexBackfillerScheduler.started?a.indexBackfillerScheduler.start():b||a.indexBackfillerScheduler.stop())});return function(b){return g.apply(this,arguments)}}())})()}gc(e){const r=ld();if(!jh.C(r))throw new pn(Pt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const a=ap(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new jh(r,e.asyncQueue,a,e.clientId,e.initialUser)}}class Kp{initialize(e,r){var a=this;return(0,E.Z)(function*(){a.localStore||(a.localStore=e.localStore,a.sharedClientState=e.sharedClientState,a.datastore=a.createDatastore(r),a.remoteStore=a.createRemoteStore(r),a.eventManager=a.createEventManager(r),a.syncEngine=a.createSyncEngine(r,!e.synchronizeTabs),a.sharedClientState.onlineStateHandler=u=>xm(a.syncEngine,u,1),a.remoteStore.remoteSyncer.handleCredentialChange=D_.bind(null,a.syncEngine),yield Sp(a.remoteStore,a.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Mp}createDatastore(e){const r=Xd(e.databaseInfo.databaseId),a=new ad(e.databaseInfo);return new mm(e.authCredentials,e.appCheckCredentials,a,r)}createRemoteStore(e){return r=this.localStore,a=this.datastore,u=e.asyncQueue,g=M=>xm(this.syncEngine,M,0),b=sd.C()?new sd:new d_,new b0(r,a,u,g,b);var r,a,u,g,b}createSyncEngine(e,r){return function(a,u,g,b,M,X,se){const Me=new Pp(a,u,g,b,M,X);return se&&(Me.dc=!0),Me}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}terminate(){return(e=(0,E.Z)(function*(r){const a=Ln(r);qt("RemoteStore","RemoteStore shutting down."),a.wu.add(5),yield cd(a),a.gu.shutdown(),a.yu.set("Unknown")}),function(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function ff(s,e,r){if(!r)throw new pn(Pt.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Zp(s,e,r,a){if(!0===e&&!0===a)throw new pn(Pt.INVALID_ARGUMENT,`${s} and ${r} cannot be used together.`)}function O_(s){if(!Rt.isDocumentKey(s))throw new pn(Pt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Ml(s){if(Rt.isDocumentKey(s))throw new pn(Pt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Qp(s){if(void 0===s)return"undefined";if(null===s)return"null";if("string"==typeof s)return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if("number"==typeof s||"boolean"==typeof s)return""+s;if("object"==typeof s){if(s instanceof Array)return"an array";{const e=(r=s).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof s?"a function":Bn()}function Ni(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new pn(Pt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Qp(s);throw new pn(Pt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return s}function N_(s,e){if(e<=0)throw new pn(Pt.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}const Xp=new Map;class Jp{constructor(e){var r;if(void 0===e.host){if(void 0!==e.ssl)throw new pn(Pt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(r=e.ssl)||void 0===r||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new pn(Pt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Zp("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fd{constructor(e,r,a,u){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=a,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jp({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new pn(Pt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new pn(Pt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jp(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new bl;switch(r.type){case"gapi":return new Ia(r.client,r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pn(Pt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=Xp.get(e);r&&(qt("ComponentProvider","Removing Datastore"),Xp.delete(e),r.terminate())}(this),Promise.resolve()}}function Fm(s,e,r,a={}){var u;const g=(s=Ni(s,fd))._getSettings();if("firestore.googleapis.com"!==g.host&&g.host!==e&&Ii("Host has been set in both settings() and useEmulator(), emulator host will be used"),s._setSettings(Object.assign(Object.assign({},g),{host:`${e}:${r}`,ssl:!1})),a.mockUserToken){let b,M;if("string"==typeof a.mockUserToken)b=a.mockUserToken,M=fn.MOCK_USER;else{b=(0,ue.Sg)(a.mockUserToken,null===(u=s._app)||void 0===u?void 0:u.options.projectId);const X=a.mockUserToken.sub||a.mockUserToken.user_id;if(!X)throw new pn(Pt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");M=new fn(X)}s._authCredentials=new lo(new Il(b,M))}}class Mo{constructor(e,r,a){this.converter=r,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ol(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mo(this.firestore,e,this._key)}}class ga{constructor(e,r,a){this.converter=r,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new ga(this.firestore,e,this._query)}}class Ol extends ga{constructor(e,r,a){super(e,r,go(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mo(this.firestore,null,new Rt(e))}withConverter(e){return new Ol(this.firestore,e,this._path)}}function P_(s,e,...r){if(s=(0,ue.m9)(s),ff("collection","path",e),s instanceof fd){const a=K.fromString(e,...r);return Ml(a),new Ol(s,null,a)}{if(!(s instanceof Mo||s instanceof Ol))throw new pn(Pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(K.fromString(e,...r));return Ml(a),new Ol(s.firestore,null,a)}}function eg(s,e){if(s=Ni(s,fd),ff("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new pn(Pt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ga(s,null,(r=e,new hl(K.emptyPath(),r)));var r}function Lm(s,e,...r){if(s=(0,ue.m9)(s),1===arguments.length&&(e=Qo.R()),ff("doc","path",e),s instanceof fd){const a=K.fromString(e,...r);return O_(a),new Mo(s,null,new Rt(a))}{if(!(s instanceof Mo||s instanceof Ol))throw new pn(Pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(K.fromString(e,...r));return O_(a),new Mo(s.firestore,s instanceof Ol?s.converter:null,new Rt(a))}}function k_(s,e){return s=(0,ue.m9)(s),e=(0,ue.m9)(e),(s instanceof Mo||s instanceof Ol)&&(e instanceof Mo||e instanceof Ol)&&s.firestore===e.firestore&&s.path===e.path&&s.converter===e.converter}function tg(s,e){return s=(0,ue.m9)(s),e=(0,ue.m9)(e),s instanceof ga&&e instanceof ga&&s.firestore===e.firestore&&Po(s._query,e._query)&&s.converter===e.converter}function Vm(s,e=10240){let r=0;return{read:()=>(0,E.Z)(function*(){if(r<s.byteLength){const a={value:s.slice(r,r+e),done:!1};return r+=e,a}return{done:!0}})(),cancel:()=>(0,E.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class pf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):dr("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}class F_{constructor(e,r){this.Pc=e,this.It=r,this.metadata=new Ri,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(a=>{a&&a.Ou()?this.metadata.resolve(a.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==a?void 0:a.payload)}`))},a=>this.metadata.reject(a))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,E.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,E.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,E.Z)(function*(){const r=yield e.Sc();if(null===r)return null;const a=e.vc.decode(r),u=Number(a);isNaN(u)&&e.Dc(`length string (${a}) is not valid number`);const g=yield e.Cc(u);return new tf(JSON.parse(g),r.length+u)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,E.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const r=e.xc();r<0&&e.Dc("Reached the end of bundle when a length string is expected.");const a=e.buffer.slice(0,r);return e.buffer=e.buffer.slice(r),a})()}Cc(e){var r=this;return(0,E.Z)(function*(){for(;r.buffer.length<e;)(yield r.Nc())&&r.Dc("Reached the end of bundle when more is expected.");const a=r.vc.decode(r.buffer.slice(0,e));return r.buffer=r.buffer.slice(e),a})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,E.Z)(function*(){const r=yield e.Pc.read();if(!r.done){const a=new Uint8Array(e.buffer.length+r.value.length);a.set(e.buffer),a.set(r.value,e.buffer.length),e.buffer=a}return r.done})()}}class Gl{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var r=this;return(0,E.Z)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw new pn(Pt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const a=yield(u=(0,E.Z)(function*(g,b){const M=Ln(g),X=Ws(M.It)+"/documents",se={documents:b.map(on=>Hs(M.It,on))},Me=yield M._o("BatchGetDocuments",X,se,b.length),Je=new Map;Me.forEach(on=>{const _n=function(s,e){return"found"in e?function(r,a){Kn(!!a.found);const u=pa(r,a.found.name),g=mo(a.found.updateTime),b=new Z({mapValue:{fields:a.found.fields}});return Ue.newFoundDocument(u,g,b)}(s,e):"missing"in e?function(r,a){Kn(!!a.missing),Kn(!!a.readTime);const u=pa(r,a.missing),g=mo(a.readTime);return Ue.newNoDocument(u,g)}(s,e):Bn()}(M.It,on);Je.set(_n.key.toString(),_n)});const Lt=[];return b.forEach(on=>{const _n=Je.get(on.toString());Kn(!!_n),Lt.push(_n)}),Lt}),function(g,b){return u.apply(this,arguments)})(r.datastore,e);var u;return a.forEach(u=>r.recordVersion(u)),a})()}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(a){this.lastWriteError=a}this.writtenDocs.add(e.toString())}delete(e){this.write(new su(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,E.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const r=e.readVersions;var a;e.mutations.forEach(a=>{r.delete(a.key.toString())}),r.forEach((a,u)=>{const g=Rt.fromPath(u);e.mutations.push(new Sl(g,e.precondition(g)))}),yield(a=(0,E.Z)(function*(u,g){const b=Ln(u),M=Ws(b.It)+"/documents",X={writes:g.map(se=>bc(b.It,se))};yield b.ao("Commit",M,X)}),function(u,g){return a.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Bn();r=fe.min()}const a=this.readVersions.get(e.key.toString());if(a){if(!r.isEqual(a))throw new pn(Pt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(fe.min())?Gi.exists(!1):Gi.updateTime(r):Gi.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(fe.min()))throw new pn(Pt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gi.updateTime(r)}return Gi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class oh{constructor(e,r,a,u,g){this.asyncQueue=e,this.datastore=r,this.options=a,this.updateFunction=u,this.deferred=g,this.kc=a.maxAttempts,this.No=new Hh(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,E.Z)(function*(){const r=new Gl(e.datastore),a=e.Mc(r);a&&a.then(u=>{e.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{e.deferred.resolve(u)}).catch(g=>{e.Fc(g)}))}).catch(u=>{e.Fc(u)})}))}Mc(e){try{const r=this.updateFunction(e);return!Es(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const r=e.code;return"aborted"===r||"failed-precondition"===r||!Au(r)}return!1}}class L_{constructor(e,r,a,u){var g=this;this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=a,this.databaseInfo=u,this.user=fn.UNAUTHENTICATED,this.clientId=Qo.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(a,function(){var b=(0,E.Z)(function*(M){qt("FirestoreClient","Received user=",M.uid),yield g.authCredentialListener(M),g.user=M});return function(M){return b.apply(this,arguments)}}()),this.appCheckCredentials.start(a,b=>(qt("FirestoreClient","Received new app check token=",b),this.appCheckCredentialListener(b,this.user)))}getConfiguration(){var e=this;return(0,E.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new pn(Pt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const r=new Ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,E.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),r.resolve()}catch(a){const u=ic(a,"Failed to shutdown persistence");r.reject(u)}})),r.promise}}function $m(s,e){return ah.apply(this,arguments)}function ah(){return ah=(0,E.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress(),qt("FirestoreClient","Initializing OfflineComponentProvider");const r=yield s.getConfiguration();yield e.initialize(r);let a=r.initialUser;s.setCredentialChangeListener(function(){var u=(0,E.Z)(function*(g){a.isEqual(g)||(yield Lh(e.localStore,g),a=g)});return function(g){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s.offlineComponents=e}),ah.apply(this,arguments)}function zl(s,e){return Pc.apply(this,arguments)}function Pc(){return Pc=(0,E.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress();const r=yield sa(s);qt("FirestoreClient","Initializing OnlineComponentProvider");const a=yield s.getConfiguration();yield e.initialize(r,a),s.setCredentialChangeListener(u=>Cm(e.remoteStore,u)),s.setAppCheckTokenChangeListener((u,g)=>Cm(e.remoteStore,g)),s.onlineComponents=e}),Pc.apply(this,arguments)}function sa(s){return Fu.apply(this,arguments)}function Fu(){return Fu=(0,E.Z)(function*(s){return s.offlineComponents||(qt("FirestoreClient","Using default OfflineComponentProvider"),yield $m(s,new R_)),s.offlineComponents}),Fu.apply(this,arguments)}function kc(s){return Ja.apply(this,arguments)}function Ja(){return Ja=(0,E.Z)(function*(s){return s.onlineComponents||(qt("FirestoreClient","Using default OnlineComponentProvider"),yield zl(s,new Kp)),s.onlineComponents}),Ja.apply(this,arguments)}function gf(s){return sa(s).then(e=>e.persistence)}function Lu(s){return sa(s).then(e=>e.localStore)}function uc(s){return kc(s).then(e=>e.remoteStore)}function cc(s){return kc(s).then(e=>e.syncEngine)}function ql(s){return dc.apply(this,arguments)}function dc(){return dc=(0,E.Z)(function*(s){const e=yield kc(s),r=e.eventManager;return r.onListen=Am.bind(null,e.syncEngine),r.onUnlisten=Lp.bind(null,e.syncEngine),r}),dc.apply(this,arguments)}function rg(s,e,r={}){const a=new Ri;return s.asyncQueue.enqueueAndForget((0,E.Z)(function*(){return function(u,g,b,M,X){const se=new pf({next:Je=>{g.enqueueAndForget(()=>Xh(u,Me));const Lt=Je.docs.has(b);!Lt&&Je.fromCache?X.reject(new pn(Pt.UNAVAILABLE,"Failed to get document because the client is offline.")):Lt&&Je.fromCache&&M&&"server"===M.source?X.reject(new pn(Pt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):X.resolve(Je)},error:Je=>X.reject(Je)}),Me=new Hl(go(b.path),se,{includeMetadataChanges:!0,ku:!0});return wm(u,Me)}(yield ql(s),s.asyncQueue,e,r,a)})),a.promise}function ig(s,e,r={}){const a=new Ri;return s.asyncQueue.enqueueAndForget((0,E.Z)(function*(){return function(u,g,b,M,X){const se=new pf({next:Je=>{g.enqueueAndForget(()=>Xh(u,Me)),Je.fromCache&&"server"===M.source?X.reject(new pn(Pt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):X.resolve(Je)},error:Je=>X.reject(Je)}),Me=new Hl(b,se,{includeMetadataChanges:!0,ku:!0});return wm(u,Me)}(yield ql(s),s.asyncQueue,e,r,a)})),a.promise}class Gm{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new Hh(this,"async_queue_retry"),this.Wc=()=>{const r=Pu();r&&qt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.No.Po()};const e=Pu();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const r=Pu();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const r=new Ri;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,E.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(r){if(!ti(r))throw r;qt("AsyncQueue","Operation failed with retryable error: "+r)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const r=this.Bc.then(()=>(this.Gc=!0,e().catch(a=>{throw this.Kc=a,this.Gc=!1,dr("INTERNAL UNHANDLED ERROR: ",function(g){let b=g.message||"";return g.stack&&(b=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),b}(a)),a}).then(a=>(this.Gc=!1,a))));return this.Bc=r,r}enqueueAfterDelay(e,r,a){this.zc(),this.jc.indexOf(e)>-1&&(r=0);const u=xp.createAndSchedule(this,e,r,a,g=>this.Yc(g));return this.qc.push(u),u}zc(){this.Kc&&Bn()}verifyOperationInProgress(){}Xc(){var e=this;return(0,E.Z)(function*(){let r;do{r=e.Bc,yield r}while(r!==e.Bc)})()}Zc(e){for(const r of this.qc)if(r.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((r,a)=>r.targetTimeMs-a.targetTimeMs);for(const r of this.qc)if(r.skipDelay(),"all"!==e&&r.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const r=this.qc.indexOf(e);this.qc.splice(r,1)}}function mf(s){return function(e,r){if("object"!=typeof e||null===e)return!1;const a=e;for(const u of["next","error","complete"])if(u in a&&"function"==typeof a[u])return!0;return!1}(s)}class zm{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ri,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,a){this._progressObserver={next:e,error:r,complete:a}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const V_=-1;class ks extends fd{constructor(e,r,a,u){super(e,r,a,u),this.type="firestore",this._queue=new Gm,this._persistenceKey=(null==u?void 0:u.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||qm(this),this._firestoreClient.terminate()}}function B_(s,e){const r="object"==typeof s?s:(0,O.getApp)(),a="string"==typeof s?s:e||"(default)",u=(0,O._getProvider)(r,"firestore").getImmediate({identifier:a});if(!u._initialized){const g=(0,ue.P0)("firestore");g&&Fm(u,...g)}return u}function wo(s){return s._firestoreClient||qm(s),s._firestoreClient.verifyNotTerminated(),s._firestoreClient}function qm(s){var e;const r=s._freezeSettings(),a=(g=(null===(e=s._app)||void 0===e?void 0:e.options.appId)||"",new Nl(s._databaseId,g,s._persistenceKey,(M=r).host,M.ssl,M.experimentalForceLongPolling,M.experimentalAutoDetectLongPolling,M.useFetchStreams));var g,M;s._firestoreClient=new L_(s._authCredentials,s._appCheckCredentials,s._queue,a)}function S0(s,e){G_(s=Ni(s,ks));const r=wo(s),a=s._freezeSettings(),u=new Kp;return sg(r,u,new M_(u,a.cacheSizeBytes,null==e?void 0:e.forceOwnership))}function $_(s){G_(s=Ni(s,ks));const e=wo(s),r=s._freezeSettings(),a=new Kp;return sg(e,a,new Yp(a,r.cacheSizeBytes))}function sg(s,e,r){const a=new Ri;return s.asyncQueue.enqueue((0,E.Z)(function*(){try{yield $m(s,r),yield zl(s,e),a.resolve()}catch(u){const g=u;if(!("FirebaseError"===(b=g).name?b.code===Pt.FAILED_PRECONDITION||b.code===Pt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&b instanceof DOMException)||22===b.code||20===b.code||11===b.code))throw g;Ii("Error enabling offline persistence. Falling back to persistence disabled: "+g),a.reject(g)}var b})).then(()=>a.promise)}function U_(s){if(s._initialized&&!s._terminated)throw new pn(Pt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ri;return s._queue.enqueueAndForgetEvenWhileRestricted((0,E.Z)(function*(){try{yield(r=(0,E.Z)(function*(a){if(!kn.C())return Promise.resolve();const u=a+"main";yield kn.delete(u)}),function(a){return r.apply(this,arguments)})(ap(s._databaseId,s._persistenceKey)),e.resolve()}catch(r){e.reject(r)}var r})),e.promise}function Ym(s){return function(e){const r=new Ri;return e.asyncQueue.enqueueAndForget((0,E.Z)(function*(){return function(s,e){return Up.apply(this,arguments)}(yield cc(e),r)})),r.promise}(wo(s=Ni(s,ks)))}function j_(s){return function(s){return s.asyncQueue.enqueue((0,E.Z)(function*(){const e=yield gf(s),r=yield uc(s);return e.setNetworkEnabled(!0),function(a){const u=Ln(a);return u.wu.delete(0),ud(u)}(r)}))}(wo(s=Ni(s,ks)))}function H_(s){return function(s){return s.asyncQueue.enqueue((0,E.Z)(function*(){const e=yield gf(s),r=yield uc(s);return e.setNetworkEnabled(!1),(a=(0,E.Z)(function*(u){const g=Ln(u);g.wu.add(0),yield cd(g),g.yu.set("Offline")}),function(u){return a.apply(this,arguments)})(r);var a}))}(wo(s=Ni(s,ks)))}function W_(s,e){const r=wo(s=Ni(s,ks)),a=new zm;return function(s,e,r,a){const u=function(g,b){let M;return M="string"==typeof g?(new TextEncoder).encode(g):g,X=function(X,se){if(X instanceof Uint8Array)return Vm(X,void 0);if(X instanceof ArrayBuffer)return Vm(new Uint8Array(X),void 0);if(X instanceof ReadableStream)return X.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(M),new F_(X,b);var X}(r,Xd(e));s.asyncQueue.enqueueAndForget((0,E.Z)(function*(){!function(s,e,r){const a=Ln(s);var u;(u=(0,E.Z)(function*(g,b,M){try{const X=yield b.getMetadata();if(yield function(Lt,on){const _n=Ln(Lt),tr=mo(on.createTime);return _n.persistence.runTransaction("hasNewerBundle","readonly",hr=>_n.Ns.getBundleMetadata(hr,on.id)).then(hr=>!!hr&&hr.createTime.compareTo(tr)>=0)}(g.localStore,X))return yield b.close(),M._completeWith({taskState:"Success",documentsLoaded:(Lt=X).totalDocuments,bytesLoaded:Lt.totalBytes,totalDocuments:Lt.totalDocuments,totalBytes:Lt.totalBytes}),Promise.resolve(new Set);M._updateProgress(__(X));const se=new y_(X,g.localStore,b.It);let Me=yield b.mc();for(;Me;){const Lt=yield se.Fu(Me);Lt&&M._updateProgress(Lt),Me=yield b.mc()}const Je=yield se.complete();return yield lc(g,Je.Lu,void 0),yield function(Lt,on){const _n=Ln(Lt);return _n.persistence.runTransaction("Save bundle","readwrite",tr=>_n.Ns.saveBundleMetadata(tr,on))}(g.localStore,X),M._completeWith(Je.progress),Promise.resolve(Je.Bu)}catch(X){return Ii("SyncEngine",`Loading bundle failed with ${X}`),M._failWith(X),Promise.resolve(new Set)}var Lt}),function(g,b,M){return u.apply(this,arguments)})(a,e,r).then(u=>{a.sharedClientState.notifyBundleLoaded(u)})}(yield cc(s),u,a)}))}(r,s._databaseId,e,a),a}function Km(s,e){return function(s,e){return s.asyncQueue.enqueue((0,E.Z)(function*(){return function(r,a){const u=Ln(r);return u.persistence.runTransaction("Get named query","readonly",g=>u.Ns.getNamedQuery(g,a))}(yield Lu(s),e)}))}(wo(s=Ni(s,ks)),e).then(r=>r?new ga(s,null,r.query):null)}function G_(s){if(s._initialized||s._terminated)throw new pn(Pt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Lc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lc(ts.fromBase64String(e))}catch(r){throw new pn(Pt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Lc(ts.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Vc{constructor(...e){for(let r=0;r<e.length;++r)if(0===e[r].length)throw new pn(Pt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _d{constructor(e){this._methodName=e}}class yf{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new pn(Pt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new pn(Pt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return fr(this._lat,e._lat)||fr(this._long,e._long)}}const z_=/^__.*__$/;class og{constructor(e,r,a){this.data=e,this.fieldMask=r,this.fieldTransforms=a}toMutation(e,r){return null!==this.fieldMask?new $a(e,this.data,this.fieldMask,r,this.fieldTransforms):new nu(e,this.data,r,this.fieldTransforms)}}class _f{constructor(e,r,a){this.data=e,this.fieldMask=r,this.fieldTransforms=a}toMutation(e,r){return new $a(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function Zm(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Bn()}}class ag{constructor(e,r,a,u,g,b){this.settings=e,this.databaseId=r,this.It=a,this.ignoreUndefinedProperties=u,void 0===g&&this.na(),this.fieldTransforms=g||[],this.fieldMask=b||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new ag(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var r;const a=null===(r=this.path)||void 0===r?void 0:r.child(e),u=this.ia({path:a,oa:!1});return u.ua(e),u}ca(e){var r;const a=null===(r=this.path)||void 0===r?void 0:r.child(e),u=this.ia({path:a,oa:!1});return u.na(),u}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return uh(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(r=>e.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>e.isPrefixOf(r.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Zm(this.sa)&&z_.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class x0{constructor(e,r,a){this.databaseId=e,this.ignoreUndefinedProperties=r,this.It=a||Xd(e)}da(e,r,a,u=!1){return new ag({sa:e,methodName:r,fa:a,path:ut.emptyPath(),oa:!1,la:u},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function vd(s){const e=s._freezeSettings(),r=Xd(s._databaseId);return new x0(s._databaseId,!!e.ignoreUndefinedProperties,r)}function vf(s,e,r,a,u,g={}){const b=s.da(g.merge||g.mergeFields?2:0,e,r,u);dg("Data must be an object, but it was:",b,a);const M=cg(a,b);let X,se;if(g.merge)X=new _o(b.fieldMask),se=b.fieldTransforms;else if(g.mergeFields){const Me=[];for(const Je of g.mergeFields){const Lt=hg(e,Je,r);if(!b.contains(Lt))throw new pn(Pt.INVALID_ARGUMENT,`Field '${Lt}' is specified in your field mask but missing from your input data.`);Jm(Me,Lt)||Me.push(Lt)}X=new _o(Me),se=b.fieldTransforms.filter(Je=>X.covers(Je.field))}else X=null,se=b.fieldTransforms;return new og(new Z(M),X,se)}class Ed extends _d{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ed}}function q_(s,e,r){return new ag({sa:3,fa:e.settings.fa,methodName:s._methodName,oa:r},e.databaseId,e.It,e.ignoreUndefinedProperties)}class lg extends _d{_toFieldTransform(e){return new wu(e.path,new gl)}isEqual(e){return e instanceof lg}}class Id extends _d{constructor(e,r){super(e),this._a=r}_toFieldTransform(e){const r=q_(this,e,!0),a=this._a.map(g=>Bc(g,r)),u=new Ba(a);return new wu(e.path,u)}isEqual(e){return this===e}}class Y_ extends _d{constructor(e,r){super(e),this._a=r}_toFieldTransform(e){const r=q_(this,e,!0),a=this._a.map(g=>Bc(g,r)),u=new Ya(a);return new wu(e.path,u)}isEqual(e){return this===e}}class Qm extends _d{constructor(e,r){super(e),this.wa=r}_toFieldTransform(e){const r=new eu(e.It,Ll(e.It,this.wa));return new wu(e.path,r)}isEqual(e){return this===e}}function ug(s,e,r,a){const u=s.da(1,e,r);dg("Data must be an object, but it was:",u,a);const g=[],b=Z.empty();da(a,(X,se)=>{const Me=If(e,X,r);se=(0,ue.m9)(se);const Je=u.ca(Me);if(se instanceof Ed)g.push(Me);else{const Lt=Bc(se,Je);null!=Lt&&(g.push(Me),b.set(Me,Lt))}});const M=new _o(g);return new _f(b,M,u.fieldTransforms)}function Ef(s,e,r,a,u,g){const b=s.da(1,e,r),M=[hg(e,a,r)],X=[u];if(g.length%2!=0)throw new pn(Pt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Lt=0;Lt<g.length;Lt+=2)M.push(hg(e,g[Lt])),X.push(g[Lt+1]);const se=[],Me=Z.empty();for(let Lt=M.length-1;Lt>=0;--Lt)if(!Jm(se,M[Lt])){const on=M[Lt];let _n=X[Lt];_n=(0,ue.m9)(_n);const tr=b.ca(on);if(_n instanceof Ed)se.push(on);else{const hr=Bc(_n,tr);null!=hr&&(se.push(on),Me.set(on,hr))}}const Je=new _o(se);return new _f(Me,Je,b.fieldTransforms)}function lh(s,e,r,a=!1){return Bc(r,s.da(a?4:3,e))}function Bc(s,e){if(Xm(s=(0,ue.m9)(s)))return dg("Unsupported field value:",e,s),cg(s,e);if(s instanceof _d)return function(r,a){if(!Zm(a.sa))throw a.ha(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.ha(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(a);u&&a.fieldTransforms.push(u)}(s,e),null;if(void 0===s&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(r,a){const u=[];let g=0;for(const b of r){let M=Bc(b,a.aa(g));null==M&&(M={nullValue:"NULL_VALUE"}),u.push(M),g++}return{arrayValue:{values:u}}}(s,e)}return function(r,a){if(null===(r=(0,ue.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return Ll(a.It,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const u=bi.fromDate(r);return{timestampValue:Ns(a.It,u)}}if(r instanceof bi){const u=new bi(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ns(a.It,u)}}if(r instanceof yf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Lc)return{bytesValue:fa(a.It,r._byteString)};if(r instanceof Mo){const u=a.databaseId,g=r.firestore._databaseId;if(!g.isEqual(u))throw a.ha(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Ec(r.firestore._databaseId||a.databaseId,r._key.path)}}throw a.ha(`Unsupported field value: ${Qp(r)}`)}(s,e)}function cg(s,e){const r={};return ls(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):da(s,(a,u)=>{const g=Bc(u,e.ra(a));null!=g&&(r[a]=g)}),{mapValue:{fields:r}}}function Xm(s){return!("object"!=typeof s||null===s||s instanceof Array||s instanceof Date||s instanceof bi||s instanceof yf||s instanceof Lc||s instanceof Mo||s instanceof _d)}function dg(s,e,r){if(!Xm(r)||"object"!=typeof(a=r)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const a=Qp(r);throw e.ha("an object"===a?s+" a custom object":s+" "+a)}var a}function hg(s,e,r){if((e=(0,ue.m9)(e))instanceof Vc)return e._internalPath;if("string"==typeof e)return If(s,e);throw uh("Field path arguments must be of type string or ",s,!1,void 0,r)}const K_=new RegExp("[~\\*/\\[\\]]");function If(s,e,r){if(e.search(K_)>=0)throw uh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,r);try{return new Vc(...e.split("."))._internalPath}catch(a){throw uh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,r)}}function uh(s,e,r,a,u){const g=a&&!a.isEmpty(),b=void 0!==u;let M=`Function ${e}() called with invalid data`;r&&(M+=" (via `toFirestore()`)"),M+=". ";let X="";return(g||b)&&(X+=" (found",g&&(X+=` in field ${a}`),b&&(X+=` in document ${u}`),X+=")"),new pn(Pt.INVALID_ARGUMENT,M+s+X)}function Jm(s,e){return s.some(r=>r.isEqual(e))}class bd{constructor(e,r,a,u,g){this._firestore=e,this._userDataWriter=r,this._key=a,this._document=u,this._converter=g}get id(){return this._key.path.lastSegment()}get ref(){return new Mo(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ey(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Cd("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r)}}}class ey extends bd{data(){return super.data()}}function Cd(s,e){return"string"==typeof e?If(s,e):e instanceof Vc?e._internalPath:e._delegate._internalPath}function Z_(s){if("L"===s.limitType&&0===s.explicitOrderBy.length)throw new pn(Pt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $c{}function Q_(s,...e){for(const r of e)s=r._apply(s);return s}class R0 extends $c{constructor(e,r,a){super(),this.ma=e,this.ga=r,this.ya=a,this.type="where"}_apply(e){const r=vd(e.firestore),a=function(u,g,b,M,X,se,Me){let Je;if(X.isKeyField()){if("array-contains"===se||"array-contains-any"===se)throw new pn(Pt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${se}' queries on documentId().`);if("in"===se||"not-in"===se){wf(Me,se);const on=[];for(const _n of Me)on.push(gg(M,u,_n));Je={arrayValue:{values:on}}}else Je=gg(M,u,Me)}else"in"!==se&&"not-in"!==se&&"array-contains-any"!==se||wf(Me,se),Je=lh(b,"where",Me,"in"===se||"not-in"===se);const Lt=wi.create(X,se,Je);return function(on,_n){if(_n.dt()){const hr=Kl(on);if(null!==hr&&!hr.isEqual(_n.field))throw new pn(Pt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${hr.toString()}' and '${_n.field.toString()}'`);const Pi=qu(on);null!==Pi&&mg(0,_n.field,Pi)}const tr=function(hr,Pi){for(const Fs of hr.filters)if(Pi.indexOf(Fs.op)>=0)return Fs.op;return null}(on,function(hr){switch(hr){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(_n.op));if(null!==tr)throw new pn(Pt.INVALID_ARGUMENT,tr===_n.op?`Invalid query. You cannot use more than one '${_n.op.toString()}' filter.`:`Invalid query. You cannot use '${_n.op.toString()}' filters with '${tr.toString()}' filters.`)}(u,Lt),Lt}(e._query,0,r,e.firestore._databaseId,this.ma,this.ga,this.ya);return new ga(e.firestore,e.converter,function(u,g){const b=u.filters.concat([g]);return new hl(u.path,u.collectionGroup,u.explicitOrderBy.slice(),b,u.limit,u.limitType,u.startAt,u.endAt)}(e._query,a))}}function ch(s,e,r){const a=e,u=Cd("where",s);return new R0(u,a,r)}class ty extends $c{constructor(e,r){super(),this.ma=e,this.pa=r,this.type="orderBy"}_apply(e){const r=function(a,u,g){if(null!==a.startAt)throw new pn(Pt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new pn(Pt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const b=new La(u,g);return function(M,X){if(null===qu(M)){const se=Kl(M);null!==se&&mg(0,se,X.field)}}(a,b),b}(e._query,this.ma,this.pa);return new ga(e.firestore,e.converter,function(a,u){const g=a.explicitOrderBy.concat([u]);return new hl(a.path,a.collectionGroup,g,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}function fg(s,e="asc"){const r=e,a=Cd("orderBy",s);return new ty(a,r)}class bf extends $c{constructor(e,r,a){super(),this.type=e,this.Ia=r,this.Ta=a}_apply(e){return new ga(e.firestore,e.converter,Yu(e._query,this.Ia,this.Ta))}}function X_(s){return N_("limit",s),new bf("limit",s,"F")}function pg(s){return N_("limitToLast",s),new bf("limitToLast",s,"L")}class Cf extends $c{constructor(e,r,a){super(),this.type=e,this.Ea=r,this.Aa=a}_apply(e){const r=oy(e,this.type,this.Ea,this.Aa);return new ga(e.firestore,e.converter,(u=r,new hl((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,u,a.endAt)));var a,u}}function ny(...s){return new Cf("startAt",s,!0)}function M0(...s){return new Cf("startAfter",s,!1)}class ry extends $c{constructor(e,r,a){super(),this.type=e,this.Ea=r,this.Aa=a}_apply(e){const r=oy(e,this.type,this.Ea,this.Aa);return new ga(e.firestore,e.converter,(u=r,new hl((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,u)));var a,u}}function iy(...s){return new ry("endBefore",s,!1)}function sy(...s){return new ry("endAt",s,!0)}function oy(s,e,r,a){if(r[0]=(0,ue.m9)(r[0]),r[0]instanceof bd)return function(u,g,b,M,X){if(!M)throw new pn(Pt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${b}().`);const se=[];for(const Me of Wo(u))if(Me.field.isKeyField())se.push(ea(g,M.key));else{const Je=M.data.field(Me.field);if(gs(Je))throw new pn(Pt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Me.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Je){const Lt=Me.field.canonicalString();throw new pn(Pt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Lt}' (used as the orderBy) does not exist.`)}se.push(Je)}return new Da(se,X)}(s._query,s.firestore._databaseId,e,r[0]._document,a);{const u=vd(s.firestore);return function(g,b,M,X,se,Me){const Je=g.explicitOrderBy;if(se.length>Je.length)throw new pn(Pt.INVALID_ARGUMENT,`Too many arguments provided to ${X}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Lt=[];for(let on=0;on<se.length;on++){const _n=se[on];if(Je[on].field.isKeyField()){if("string"!=typeof _n)throw new pn(Pt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${X}(), but got a ${typeof _n}`);if(!Eu(g)&&-1!==_n.indexOf("/"))throw new pn(Pt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${X}() must be a plain document ID, but '${_n}' contains a slash.`);const tr=g.path.child(K.fromString(_n));if(!Rt.isDocumentKey(tr))throw new pn(Pt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${X}() must result in a valid document path, but '${tr}' is not because it contains an odd number of segments.`);const hr=new Rt(tr);Lt.push(ea(b,hr))}else{const tr=lh(M,X,_n);Lt.push(tr)}}return new Da(Lt,Me)}(s._query,s.firestore._databaseId,u,e,r,a)}}function gg(s,e,r){if("string"==typeof(r=(0,ue.m9)(r))){if(""===r)throw new pn(Pt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Eu(e)&&-1!==r.indexOf("/"))throw new pn(Pt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const a=e.path.child(K.fromString(r));if(!Rt.isDocumentKey(a))throw new pn(Pt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return ea(s,new Rt(a))}if(r instanceof Mo)return ea(s,r._key);throw new pn(Pt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qp(r)}.`)}function wf(s,e){if(!Array.isArray(s)||0===s.length)throw new pn(Pt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(s.length>10)throw new pn(Pt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function mg(s,e,r){if(!r.isEqual(e))throw new pn(Pt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}class dh{convertValue(e,r="none"){switch(Wa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(al(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw Bn()}}convertObject(e,r){const a={};return da(e.fields,(u,g)=>{a[u]=this.convertValue(g,r)}),a}convertGeoPoint(e){return new yf(Wi(e.latitude),Wi(e.longitude))}convertArray(e,r){return(e.values||[]).map(a=>this.convertValue(a,r))}convertServerTimestamp(e,r){switch(r){case"previous":const a=ll(e);return null==a?null:this.convertValue(a,r);case"estimate":return this.convertTimestamp(wa(e));default:return null}}convertTimestamp(e){const r=jo(e);return new bi(r.seconds,r.nanos)}convertDocumentKey(e,r){const a=K.fromString(e);Kn(Ch(a));const u=new ho(a.get(1),a.get(3)),g=new Rt(a.popFirst(5));return u.isEqual(r)||dr(`Document ${g} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),g}}function wd(s,e,r){let a;return a=s?r&&(r.merge||r.mergeFields)?s.toFirestore(e,r):s.toFirestore(e):e,a}class ay extends dh{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lc(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Mo(this.firestore,null,r)}}class Uc{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hc extends bd{constructor(e,r,a,u,g,b){super(e,r,a,u,b),this._firestore=e,this._firestoreImpl=e,this.metadata=g}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Dd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const a=this._document.data.field(Cd("DocumentSnapshot.get",e));if(null!==a)return this._userDataWriter.convertValue(a,r.serverTimestamps)}}}class Dd extends hc{data(e={}){return super.data(e)}}class Vu{constructor(e,r,a,u){this._firestore=e,this._userDataWriter=r,this._snapshot=u,this.metadata=new Uc(u.hasPendingWrites,u.fromCache),this.query=a}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,r){this._snapshot.docs.forEach(a=>{e.call(r,new Dd(this._firestore,this._userDataWriter,a.key,a,new Uc(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new pn(Pt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,u){if(a._snapshot.oldDocs.isEmpty()){let g=0;return a._snapshot.docChanges.map(b=>({type:"added",doc:new Dd(a._firestore,a._userDataWriter,b.doc.key,b.doc,new Uc(a._snapshot.mutatedKeys.has(b.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:g++}))}{let g=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(b=>u||3!==b.type).map(b=>{const M=new Dd(a._firestore,a._userDataWriter,b.doc.key,b.doc,new Uc(a._snapshot.mutatedKeys.has(b.doc.key),a._snapshot.fromCache),a.query.converter);let X=-1,se=-1;return 0!==b.type&&(X=g.indexOf(b.doc.key),g=g.delete(b.doc.key)),1!==b.type&&(g=g.add(b.doc),se=g.indexOf(b.doc.key)),{type:ly(b.type),doc:M,oldIndex:X,newIndex:se}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function ly(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bn()}}function J_(s,e){return s instanceof hc&&e instanceof hc?s._firestore===e._firestore&&s._key.isEqual(e._key)&&(null===s._document?null===e._document:s._document.isEqual(e._document))&&s._converter===e._converter:s instanceof Vu&&e instanceof Vu&&s._firestore===e._firestore&&tg(s.query,e.query)&&s.metadata.isEqual(e.metadata)&&s._snapshot.isEqual(e._snapshot)}function uy(s){s=Ni(s,Mo);const e=Ni(s.firestore,ks);return rg(wo(e),s._key).then(r=>vg(e,s,r))}class Bu extends dh{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lc(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Mo(this.firestore,null,r)}}function yg(s){s=Ni(s,Mo);const e=Ni(s.firestore,ks),r=wo(e),a=new Bu(e);return function(s,e){const r=new Ri;return s.asyncQueue.enqueueAndForget((0,E.Z)(function*(){return(a=(0,E.Z)(function*(u,g,b){try{const M=yield function(X,se){const Me=Ln(X);return Me.persistence.runTransaction("read document","readonly",Je=>Me.localDocuments.getDocument(Je,se))}(u,g);M.isFoundDocument()?b.resolve(M):M.isNoDocument()?b.resolve(null):b.reject(new pn(Pt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(M){const X=ic(M,`Failed to get document '${g} from cache`);b.reject(X)}}),function(u,g,b){return a.apply(this,arguments)})(yield Lu(s),e,r);var a})),r.promise}(r,s._key).then(u=>new hc(e,a,s._key,u,new Uc(null!==u&&u.hasLocalMutations,!0),s.converter))}function _g(s){s=Ni(s,Mo);const e=Ni(s.firestore,ks);return rg(wo(e),s._key,{source:"server"}).then(r=>vg(e,s,r))}function cy(s){s=Ni(s,ga);const e=Ni(s.firestore,ks),r=wo(e),a=new Bu(e);return Z_(s._query),ig(r,s._query).then(u=>new Vu(e,a,s,u))}function dy(s){s=Ni(s,ga);const e=Ni(s.firestore,ks),r=wo(e),a=new Bu(e);return function(s,e){const r=new Ri;return s.asyncQueue.enqueueAndForget((0,E.Z)(function*(){return(a=(0,E.Z)(function*(u,g,b){try{const M=yield up(u,g,!0),X=new hd(g,M.Hi),se=X.Wu(M.documents),Me=X.applyChanges(se,!1);b.resolve(Me.snapshot)}catch(M){const X=ic(M,`Failed to execute query '${g} against cache`);b.reject(X)}}),function(u,g,b){return a.apply(this,arguments)})(yield Lu(s),e,r);var a})),r.promise}(r,s._query).then(u=>new Vu(e,a,s,u))}function hy(s){s=Ni(s,ga);const e=Ni(s.firestore,ks),r=wo(e),a=new Bu(e);return ig(r,s._query,{source:"server"}).then(u=>new Vu(e,a,s,u))}function fy(s,e,r){s=Ni(s,Mo);const a=Ni(s.firestore,ks),u=wd(s.converter,e,r);return Td(a,[vf(vd(a),"setDoc",s._key,u,null!==s.converter,r).toMutation(s._key,Gi.none())])}function py(s,e,r,...a){s=Ni(s,Mo);const u=Ni(s.firestore,ks),g=vd(u);let b;return b="string"==typeof(e=(0,ue.m9)(e))||e instanceof Vc?Ef(g,"updateDoc",s._key,e,r,a):ug(g,"updateDoc",s._key,e),Td(u,[b.toMutation(s._key,Gi.exists(!0))])}function gy(s){return Td(Ni(s.firestore,ks),[new su(s._key,Gi.none())])}function my(s,e){const r=Ni(s.firestore,ks),a=Lm(s),u=wd(s.converter,e);return Td(r,[vf(vd(s.firestore),"addDoc",a._key,u,null!==s.converter,{}).toMutation(a._key,Gi.exists(!1))]).then(()=>a)}function yy(s,...e){var r,a,u;s=(0,ue.m9)(s);let g={includeMetadataChanges:!1},b=0;"object"!=typeof e[b]||mf(e[b])||(g=e[b],b++);const M={includeMetadataChanges:g.includeMetadataChanges};if(mf(e[b])){const Je=e[b];e[b]=null===(r=Je.next)||void 0===r?void 0:r.bind(Je),e[b+1]=null===(a=Je.error)||void 0===a?void 0:a.bind(Je),e[b+2]=null===(u=Je.complete)||void 0===u?void 0:u.bind(Je)}let X,se,Me;if(s instanceof Mo)se=Ni(s.firestore,ks),Me=go(s._key.path),X={next:Je=>{e[b]&&e[b](vg(se,s,Je))},error:e[b+1],complete:e[b+2]};else{const Je=Ni(s,ga);se=Ni(Je.firestore,ks),Me=Je._query;const Lt=new Bu(se);X={next:on=>{e[b]&&e[b](new Vu(se,Lt,Je,on))},error:e[b+1],complete:e[b+2]},Z_(s._query)}return function(Je,Lt,on,_n){const tr=new pf(_n),hr=new Hl(Lt,tr,on);return Je.asyncQueue.enqueueAndForget((0,E.Z)(function*(){return wm(yield ql(Je),hr)})),()=>{tr.bc(),Je.asyncQueue.enqueueAndForget((0,E.Z)(function*(){return Xh(yield ql(Je),hr)}))}}(wo(se),Me,M,X)}function O0(s,e){return function(s,e){const r=new pf(e);return s.asyncQueue.enqueueAndForget((0,E.Z)(function*(){return a=yield ql(s),u=r,Ln(a).bu.add(u),void u.next();var a,u})),()=>{r.bc(),s.asyncQueue.enqueueAndForget((0,E.Z)(function*(){return a=yield ql(s),u=r,void Ln(a).bu.delete(u);var a,u}))}}(wo(s=Ni(s,ks)),mf(e)?e:{next:e})}function Td(s,e){return function(r,a){const u=new Ri;return r.asyncQueue.enqueueAndForget((0,E.Z)(function*(){return function(s,e,r){return rf.apply(this,arguments)}(yield cc(r),a,u)})),u.promise}(wo(s),e)}function vg(s,e,r){const a=r.docs.get(e._key),u=new Bu(s);return new hc(s,u,e._key,a,new Uc(r.hasPendingWrites,r.fromCache),e.converter)}const qo={maxAttempts:5};class Eg{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=vd(e)}set(e,r,a){this._verifyNotCommitted();const u=fc(e,this._firestore),g=wd(u.converter,r,a),b=vf(this._dataReader,"WriteBatch.set",u._key,g,null!==u.converter,a);return this._mutations.push(b.toMutation(u._key,Gi.none())),this}update(e,r,a,...u){this._verifyNotCommitted();const g=fc(e,this._firestore);let b;return b="string"==typeof(r=(0,ue.m9)(r))||r instanceof Vc?Ef(this._dataReader,"WriteBatch.update",g._key,r,a,u):ug(this._dataReader,"WriteBatch.update",g._key,r),this._mutations.push(b.toMutation(g._key,Gi.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=fc(e,this._firestore);return this._mutations=this._mutations.concat(new su(r._key,Gi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new pn(Pt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function fc(s,e){if((s=(0,ue.m9)(s)).firestore!==e)throw new pn(Pt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}class tv extends class{constructor(e,r){this._firestore=e,this._transaction=r,this._dataReader=vd(e)}get(e){const r=fc(e,this._firestore),a=new ay(this._firestore);return this._transaction.lookup([r._key]).then(u=>{if(!u||1!==u.length)return Bn();const g=u[0];if(g.isFoundDocument())return new bd(this._firestore,a,g.key,g,r.converter);if(g.isNoDocument())return new bd(this._firestore,a,r._key,null,r.converter);throw Bn()})}set(e,r,a){const u=fc(e,this._firestore),g=wd(u.converter,r,a),b=vf(this._dataReader,"Transaction.set",u._key,g,null!==u.converter,a);return this._transaction.set(u._key,b),this}update(e,r,a,...u){const g=fc(e,this._firestore);let b;return b="string"==typeof(r=(0,ue.m9)(r))||r instanceof Vc?Ef(this._dataReader,"Transaction.update",g._key,r,a,u):ug(this._dataReader,"Transaction.update",g._key,r),this._transaction.update(g._key,b),this}delete(e){const r=fc(e,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=fc(e,this._firestore),a=new Bu(this._firestore);return super.get(e).then(u=>new hc(this._firestore,a,r._key,u._document,new Uc(!1,!1),r.converter))}}function _y(s,e,r){s=Ni(s,ks);const a=Object.assign(Object.assign({},qo),r);return function(u){if(u.maxAttempts<1)throw new pn(Pt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(a),function(u,g,b){const M=new Ri;return u.asyncQueue.enqueueAndForget((0,E.Z)(function*(){const X=yield function(s){return kc(s).then(e=>e.datastore)}(u);new oh(u.asyncQueue,X,b,g,M).run()})),M.promise}(wo(s),u=>e(new tv(s,u)),a)}function nv(){return new Ed("deleteField")}function vy(){return new lg("serverTimestamp")}function Ey(...s){return new Id("arrayUnion",s)}function Sd(...s){return new Y_("arrayRemove",s)}function rv(s){return new Qm("increment",s)}!function(s,e=!0){lr=O.SDK_VERSION,(0,O._registerComponent)(new ie.wA("firestore",(r,{instanceIdentifier:a,options:u})=>{const g=r.getProvider("app").getImmediate(),b=new ks(new Ea(r.getProvider("auth-internal")),new nl(r.getProvider("app-check-internal")),function(M,X){if(!Object.prototype.hasOwnProperty.apply(M.options,["projectId"]))throw new pn(Pt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ho(M.options.projectId,X)}(g,a),g);return u=Object.assign({useFetchStreams:e},u),b._setSettings(u),b},"PUBLIC").setMultipleInstances(!0)),(0,O.registerVersion)(jt,"3.7.1",s),(0,O.registerVersion)(jt,"3.7.1","esm2017")}()},3854:(cn,rt,F)=>{"use strict";F.d(rt,{BH:()=>Dt,LL:()=>Mt,ZR:()=>ct,gQ:()=>Nr,zI:()=>Le,hu:()=>O,g5:()=>ie,US:()=>ee,tV:()=>Se,h$:()=>Ie,L:()=>oe,$s:()=>wt,r3:()=>Sr,Sg:()=>tt,ne:()=>Ar,p$:()=>ae,vZ:()=>En,ZB:()=>ve,gK:()=>ni,pd:()=>Lr,aH:()=>vn,q4:()=>kt,P0:()=>xn,Pz:()=>Nt,m9:()=>Wt,z$:()=>_e,GJ:()=>Rr,jU:()=>Ee,ru:()=>Ke,xb:()=>Gn,w1:()=>Fe,hl:()=>en,uI:()=>Te,UG:()=>lt,Yr:()=>st,b$:()=>Re,G6:()=>It,w9:()=>Wn,cI:()=>Bt,UI:()=>Jn,xO:()=>sr,zd:()=>pr,DV:()=>Ht,ug:()=>nr,dS:()=>Cr,Wl:()=>wn,Dv:()=>ci,Wj:()=>Yn,lb:()=>Pr,eu:()=>v});const O=function(Be,$e){if(!Be)throw ie($e)},ie=function(Be){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Be)},L=function(Be){const $e=[];let it=0;for(let Ve=0;Ve<Be.length;Ve++){let be=Be.charCodeAt(Ve);be<128?$e[it++]=be:be<2048?($e[it++]=be>>6|192,$e[it++]=63&be|128):55296==(64512&be)&&Ve+1<Be.length&&56320==(64512&Be.charCodeAt(Ve+1))?(be=65536+((1023&be)<<10)+(1023&Be.charCodeAt(++Ve)),$e[it++]=be>>18|240,$e[it++]=be>>12&63|128,$e[it++]=be>>6&63|128,$e[it++]=63&be|128):($e[it++]=be>>12|224,$e[it++]=be>>6&63|128,$e[it++]=63&be|128)}return $e},ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Be,$e){if(!Array.isArray(Be))throw Error("encodeByteArray takes an array as a parameter");this.init_();const it=$e?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ve=[];for(let be=0;be<Be.length;be+=3){const Pe=Be[be],Et=be+1<Be.length,tn=Et?Be[be+1]:0,$n=be+2<Be.length,Rn=$n?Be[be+2]:0;let Dn=(15&tn)<<2|Rn>>6,Er=63&Rn;$n||(Er=64,Et||(Dn=64)),Ve.push(it[Pe>>2],it[(3&Pe)<<4|tn>>4],it[Dn],it[Er])}return Ve.join("")},encodeString(Be,$e){return this.HAS_NATIVE_SUPPORT&&!$e?btoa(Be):this.encodeByteArray(L(Be),$e)},decodeString(Be,$e){return this.HAS_NATIVE_SUPPORT&&!$e?atob(Be):function(Be){const $e=[];let it=0,Ve=0;for(;it<Be.length;){const be=Be[it++];if(be<128)$e[Ve++]=String.fromCharCode(be);else if(be>191&&be<224){const Pe=Be[it++];$e[Ve++]=String.fromCharCode((31&be)<<6|63&Pe)}else if(be>239&&be<365){const $n=((7&be)<<18|(63&Be[it++])<<12|(63&Be[it++])<<6|63&Be[it++])-65536;$e[Ve++]=String.fromCharCode(55296+($n>>10)),$e[Ve++]=String.fromCharCode(56320+(1023&$n))}else{const Pe=Be[it++],Et=Be[it++];$e[Ve++]=String.fromCharCode((15&be)<<12|(63&Pe)<<6|63&Et)}}return $e.join("")}(this.decodeStringToByteArray(Be,$e))},decodeStringToByteArray(Be,$e){this.init_();const it=$e?this.charToByteMapWebSafe_:this.charToByteMap_,Ve=[];for(let be=0;be<Be.length;){const Pe=it[Be.charAt(be++)],tn=be<Be.length?it[Be.charAt(be)]:0;++be;const Rn=be<Be.length?it[Be.charAt(be)]:64;++be;const yn=be<Be.length?it[Be.charAt(be)]:64;if(++be,null==Pe||null==tn||null==Rn||null==yn)throw Error();Ve.push(Pe<<2|tn>>4),64!==Rn&&(Ve.push(tn<<4&240|Rn>>2),64!==yn&&Ve.push(Rn<<6&192|yn))}return Ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Be=0;Be<this.ENCODED_VALS.length;Be++)this.byteToCharMap_[Be]=this.ENCODED_VALS.charAt(Be),this.charToByteMap_[this.byteToCharMap_[Be]]=Be,this.byteToCharMapWebSafe_[Be]=this.ENCODED_VALS_WEBSAFE.charAt(Be),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Be]]=Be,Be>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Be)]=Be,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Be)]=Be)}}},Ie=function(Be){const $e=L(Be);return ee.encodeByteArray($e,!0)},oe=function(Be){return Ie(Be).replace(/\./g,"")},Se=function(Be){try{return ee.decodeString(Be,!0)}catch($e){console.error("base64Decode failed: ",$e)}return null};function ae(Be){return ve(void 0,Be)}function ve(Be,$e){if(!($e instanceof Object))return $e;switch($e.constructor){case Date:return new Date($e.getTime());case Object:void 0===Be&&(Be={});break;case Array:Be=[];break;default:return $e}for(const it in $e)!$e.hasOwnProperty(it)||!we(it)||(Be[it]=ve(Be[it],$e[it]));return Be}function we(Be){return"__proto__"!==Be}function _e(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Te(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_e())}function lt(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Be){return!1}}function Ee(){return"object"==typeof self&&self.self===self}function Ke(){const Be="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Be&&void 0!==Be.id}function Re(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Fe(){const Be=_e();return Be.indexOf("MSIE ")>=0||Be.indexOf("Trident/")>=0}function st(){return!1}function It(){return!lt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function en(){return"object"==typeof indexedDB}function v(){return new Promise((Be,$e)=>{try{let it=!0;const Ve="validate-browser-context-for-indexeddb-analytics-module",be=self.indexedDB.open(Ve);be.onsuccess=()=>{be.result.close(),it||self.indexedDB.deleteDatabase(Ve),Be(!0)},be.onupgradeneeded=()=>{it=!1},be.onerror=()=>{var Pe;$e((null===(Pe=be.error)||void 0===Pe?void 0:Pe.message)||"")}}catch(it){$e(it)}})}function Le(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const xt=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const Be=process.env.__FIREBASE_DEFAULTS__;return Be?JSON.parse(Be):void 0})()||(()=>{if("undefined"==typeof document)return;let Be;try{Be=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(it){return}const $e=Be&&Se(Be[1]);return $e&&JSON.parse($e)})()}catch(Be){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Be}`)}},kt=Be=>{var $e,it;return null===(it=null===($e=xt())||void 0===$e?void 0:$e.emulatorHosts)||void 0===it?void 0:it[Be]},xn=Be=>{const $e=kt(Be);if(!$e)return;const it=$e.lastIndexOf(":");if(it<=0||it+1===$e.length)throw new Error(`Invalid host ${$e} with no separate hostname and port!`);const Ve=parseInt($e.substring(it+1),10);return"["===$e[0]?[$e.substring(1,it-1),Ve]:[$e.substring(0,it),Ve]},vn=()=>{var Be;return null===(Be=xt())||void 0===Be?void 0:Be.config},Nt=Be=>{var $e;return null===($e=xt())||void 0===$e?void 0:$e[`_${Be}`]};class Dt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($e,it)=>{this.resolve=$e,this.reject=it})}wrapCallback($e){return(it,Ve)=>{it?this.reject(it):this.resolve(Ve),"function"==typeof $e&&(this.promise.catch(()=>{}),1===$e.length?$e(it):$e(it,Ve))}}}function tt(Be,$e){if(Be.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ve=$e||"demo-project",be=Be.iat||0,Pe=Be.sub||Be.user_id;if(!Pe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Et=Object.assign({iss:`https://securetoken.google.com/${Ve}`,aud:Ve,iat:be,exp:be+3600,auth_time:be,sub:Pe,user_id:Pe,firebase:{sign_in_provider:"custom",identities:{}}},Be);return[oe(JSON.stringify({alg:"none",type:"JWT"})),oe(JSON.stringify(Et)),""].join(".")}class ct extends Error{constructor($e,it,Ve){super(it),this.code=$e,this.customData=Ve,this.name="FirebaseError",Object.setPrototypeOf(this,ct.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mt.prototype.create)}}class Mt{constructor($e,it,Ve){this.service=$e,this.serviceName=it,this.errors=Ve}create($e,...it){const Ve=it[0]||{},be=`${this.service}/${$e}`,Pe=this.errors[$e],Et=Pe?function(Be,$e){return Be.replace(Vt,(it,Ve)=>{const be=$e[Ve];return null!=be?String(be):`<${Ve}?>`})}(Pe,Ve):"Error";return new ct(be,`${this.serviceName}: ${Et} (${be}).`,Ve)}}const Vt=/\{\$([^}]+)}/g;function Bt(Be){return JSON.parse(Be)}function wn(Be){return JSON.stringify(Be)}const Hn=function(Be){let $e={},it={},Ve={},be="";try{const Pe=Be.split(".");$e=Bt(Se(Pe[0])||""),it=Bt(Se(Pe[1])||""),be=Pe[2],Ve=it.d||{},delete it.d}catch(Pe){}return{header:$e,claims:it,data:Ve,signature:be}},Wn=function(Be){const it=Hn(Be).claims;return!!it&&"object"==typeof it&&it.hasOwnProperty("iat")},Rr=function(Be){const $e=Hn(Be).claims;return"object"==typeof $e&&!0===$e.admin};function Sr(Be,$e){return Object.prototype.hasOwnProperty.call(Be,$e)}function Ht(Be,$e){if(Object.prototype.hasOwnProperty.call(Be,$e))return Be[$e]}function Gn(Be){for(const $e in Be)if(Object.prototype.hasOwnProperty.call(Be,$e))return!1;return!0}function Jn(Be,$e,it){const Ve={};for(const be in Be)Object.prototype.hasOwnProperty.call(Be,be)&&(Ve[be]=$e.call(it,Be[be],be,Be));return Ve}function En(Be,$e){if(Be===$e)return!0;const it=Object.keys(Be),Ve=Object.keys($e);for(const be of it){if(!Ve.includes(be))return!1;const Pe=Be[be],Et=$e[be];if(er(Pe)&&er(Et)){if(!En(Pe,Et))return!1}else if(Pe!==Et)return!1}for(const be of Ve)if(!it.includes(be))return!1;return!0}function er(Be){return null!==Be&&"object"==typeof Be}function sr(Be){const $e=[];for(const[it,Ve]of Object.entries(Be))Array.isArray(Ve)?Ve.forEach(be=>{$e.push(encodeURIComponent(it)+"="+encodeURIComponent(be))}):$e.push(encodeURIComponent(it)+"="+encodeURIComponent(Ve));return $e.length?"&"+$e.join("&"):""}function pr(Be){const $e={};return Be.replace(/^\?/,"").split("&").forEach(Ve=>{if(Ve){const[be,Pe]=Ve.split("=");$e[decodeURIComponent(be)]=decodeURIComponent(Pe)}}),$e}function Lr(Be){const $e=Be.indexOf("?");if(!$e)return"";const it=Be.indexOf("#",$e);return Be.substring($e,it>0?it:void 0)}class Nr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let $e=1;$e<this.blockSize;++$e)this.pad_[$e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_($e,it){it||(it=0);const Ve=this.W_;if("string"==typeof $e)for(let yn=0;yn<16;yn++)Ve[yn]=$e.charCodeAt(it)<<24|$e.charCodeAt(it+1)<<16|$e.charCodeAt(it+2)<<8|$e.charCodeAt(it+3),it+=4;else for(let yn=0;yn<16;yn++)Ve[yn]=$e[it]<<24|$e[it+1]<<16|$e[it+2]<<8|$e[it+3],it+=4;for(let yn=16;yn<80;yn++){const Dn=Ve[yn-3]^Ve[yn-8]^Ve[yn-14]^Ve[yn-16];Ve[yn]=4294967295&(Dn<<1|Dn>>>31)}let Rn,Un,be=this.chain_[0],Pe=this.chain_[1],Et=this.chain_[2],tn=this.chain_[3],$n=this.chain_[4];for(let yn=0;yn<80;yn++){yn<40?yn<20?(Rn=tn^Pe&(Et^tn),Un=1518500249):(Rn=Pe^Et^tn,Un=1859775393):yn<60?(Rn=Pe&Et|tn&(Pe|Et),Un=2400959708):(Rn=Pe^Et^tn,Un=3395469782);const Dn=(be<<5|be>>>27)+Rn+$n+Un+Ve[yn]&4294967295;$n=tn,tn=Et,Et=4294967295&(Pe<<30|Pe>>>2),Pe=be,be=Dn}this.chain_[0]=this.chain_[0]+be&4294967295,this.chain_[1]=this.chain_[1]+Pe&4294967295,this.chain_[2]=this.chain_[2]+Et&4294967295,this.chain_[3]=this.chain_[3]+tn&4294967295,this.chain_[4]=this.chain_[4]+$n&4294967295}update($e,it){if(null==$e)return;void 0===it&&(it=$e.length);const Ve=it-this.blockSize;let be=0;const Pe=this.buf_;let Et=this.inbuf_;for(;be<it;){if(0===Et)for(;be<=Ve;)this.compress_($e,be),be+=this.blockSize;if("string"==typeof $e){for(;be<it;)if(Pe[Et]=$e.charCodeAt(be),++Et,++be,Et===this.blockSize){this.compress_(Pe),Et=0;break}}else for(;be<it;)if(Pe[Et]=$e[be],++Et,++be,Et===this.blockSize){this.compress_(Pe),Et=0;break}}this.inbuf_=Et,this.total_+=it}digest(){const $e=[];let it=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let be=this.blockSize-1;be>=56;be--)this.buf_[be]=255&it,it/=256;this.compress_(this.buf_);let Ve=0;for(let be=0;be<5;be++)for(let Pe=24;Pe>=0;Pe-=8)$e[Ve]=this.chain_[be]>>Pe&255,++Ve;return $e}}function Ar(Be,$e){const it=new hi(Be,$e);return it.subscribe.bind(it)}class hi{constructor($e,it){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=it,this.task.then(()=>{$e(this)}).catch(Ve=>{this.error(Ve)})}next($e){this.forEachObserver(it=>{it.next($e)})}error($e){this.forEachObserver(it=>{it.error($e)}),this.close($e)}complete(){this.forEachObserver($e=>{$e.complete()}),this.close()}subscribe($e,it,Ve){let be;if(void 0===$e&&void 0===it&&void 0===Ve)throw new Error("Missing Observer.");be=function(Be,$e){if("object"!=typeof Be||null===Be)return!1;for(const it of["next","error","complete"])if(it in Be&&"function"==typeof Be[it])return!0;return!1}($e)?$e:{next:$e,error:it,complete:Ve},void 0===be.next&&(be.next=Ft),void 0===be.error&&(be.error=Ft),void 0===be.complete&&(be.complete=Ft);const Pe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?be.error(this.finalError):be.complete()}catch(Et){}}),this.observers.push(be),Pe}unsubscribeOne($e){void 0===this.observers||void 0===this.observers[$e]||(delete this.observers[$e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($e){if(!this.finalized)for(let it=0;it<this.observers.length;it++)this.sendOne(it,$e)}sendOne($e,it){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$e])try{it(this.observers[$e])}catch(Ve){"undefined"!=typeof console&&console.error&&console.error(Ve)}})}close($e){this.finalized||(this.finalized=!0,void 0!==$e&&(this.finalError=$e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ft(){}const ci=function(Be,$e,it,Ve){let be;if(Ve<$e?be="at least "+$e:Ve>it&&(be=0===it?"none":"no more than "+it),be)throw new Error(Be+" failed: Was called with "+Ve+(1===Ve?" argument.":" arguments.")+" Expects "+be+".")};function ni(Be,$e){return`${Be} failed: ${$e} argument `}function Yn(Be,$e,it,Ve){if((!Ve||it)&&"function"!=typeof it)throw new Error(ni(Be,$e)+"must be a valid function.")}function Pr(Be,$e,it,Ve){if((!Ve||it)&&("object"!=typeof it||null===it))throw new Error(ni(Be,$e)+"must be a valid context object.")}const Cr=function(Be){const $e=[];let it=0;for(let Ve=0;Ve<Be.length;Ve++){let be=Be.charCodeAt(Ve);if(be>=55296&&be<=56319){const Pe=be-55296;Ve++,O(Ve<Be.length,"Surrogate pair missing trail surrogate."),be=65536+(Pe<<10)+(Be.charCodeAt(Ve)-56320)}be<128?$e[it++]=be:be<2048?($e[it++]=be>>6|192,$e[it++]=63&be|128):be<65536?($e[it++]=be>>12|224,$e[it++]=be>>6&63|128,$e[it++]=63&be|128):($e[it++]=be>>18|240,$e[it++]=be>>12&63|128,$e[it++]=be>>6&63|128,$e[it++]=63&be|128)}return $e},nr=function(Be){let $e=0;for(let it=0;it<Be.length;it++){const Ve=Be.charCodeAt(it);Ve<128?$e++:Ve<2048?$e+=2:Ve>=55296&&Ve<=56319?($e+=4,it++):$e+=3}return $e};function wt(Be,$e=1e3,it=2){const Ve=$e*Math.pow(it,Be),be=Math.round(.5*Ve*(Math.random()-.5)*2);return Math.min(144e5,Ve+be)}function Wt(Be){return Be&&Be._delegate?Be._delegate:Be}},8945:(cn,rt,F)=>{"use strict";function ue(I,N,w,Y){var jt,pe=arguments.length,dt=pe<3?N:null===Y?Y=Object.getOwnPropertyDescriptor(N,w):Y;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)dt=Reflect.decorate(I,N,w,Y);else for(var fn=I.length-1;fn>=0;fn--)(jt=I[fn])&&(dt=(pe<3?jt(dt):pe>3?jt(N,w,dt):jt(N,w))||dt);return pe>3&&dt&&Object.defineProperty(N,w,dt),dt}function ee(I,N){return function(w,Y){N(w,Y,I)}}function oe(I,N,w,Y){return new(w||(w=Promise))(function(dt,jt){function fn(Vr){try{Nn(Y.next(Vr))}catch(ui){jt(ui)}}function lr(Vr){try{Nn(Y.throw(Vr))}catch(ui){jt(ui)}}function Nn(Vr){Vr.done?dt(Vr.value):function(dt){return dt instanceof w?dt:new w(function(jt){jt(dt)})}(Vr.value).then(fn,lr)}Nn((Y=Y.apply(I,N||[])).next())})}F.d(rt,{Br:()=>Ys,dr:()=>Ur,YG:()=>zi,Sm:()=>Qn,W2:()=>Vn,Gu:()=>Ze,gu:()=>ze,pK:()=>an,Ie:()=>Sn,u8:()=>kr,IK:()=>Fi,td:()=>Jr,q_:()=>ri,z0:()=>Yi,fG:()=>Ss,uN:()=>ji,jP:()=>Ms,g2:()=>qs,wd:()=>io,sr:()=>yi,Pc:()=>Ai,r4:()=>va,HT:()=>os,t4:()=>Et,j9:()=>Pe});var v=F(7716),Le=F(665),Tt=F(8583),ft=F(174),St=F(7235),kt=(F(7689),F(5392),F(7807)),xn=F(9461),vn=F(7585),Nt=F(1567),Dt=F(4425),tt=F(6951),je=F(3291),Mt=(F(960),F(3150)),On=F(8891),Tn=F(9796),Wn=F(9105),Rr=F(8002);function Ht(I,N,w,Y){return(0,Wn.m)(w)&&(Y=w,w=void 0),Y?Ht(I,N,w).pipe((0,Rr.U)(pe=>(0,Tn.k)(pe)?Y(...pe):Y(pe))):new On.y(pe=>{Gn(I,N,function(jt){pe.next(arguments.length>1?Array.prototype.slice.call(arguments):jt)},pe,w)})}function Gn(I,N,w,Y,pe){let dt;if(function(I){return I&&"function"==typeof I.addEventListener&&"function"==typeof I.removeEventListener}(I)){const jt=I;I.addEventListener(N,w,pe),dt=()=>jt.removeEventListener(N,w,pe)}else if(function(I){return I&&"function"==typeof I.on&&"function"==typeof I.off}(I)){const jt=I;I.on(N,w),dt=()=>jt.off(N,w)}else if(function(I){return I&&"function"==typeof I.addListener&&"function"==typeof I.removeListener}(I)){const jt=I;I.addListener(N,w),dt=()=>jt.removeListener(N,w)}else{if(!I||!I.length)throw new TypeError("Invalid event target");for(let jt=0,fn=I.length;jt<fn;jt++)Gn(I[jt],N,w,Y,pe)}Y.add(dt)}var or=F(9765),sr=F(6215),pr=F(5435),Lr=F(3190),Nr=F(7519);const hi=vn.i,Ft=["*"],Yn=I=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(I):"function"==typeof requestAnimationFrame?requestAnimationFrame(I):setTimeout(I);let Pr=(()=>{class I{constructor(w,Y){this.injector=w,this.el=Y,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(w){this.el.nativeElement.value=this.lastValue=null==w?"":w,Cr(this.el)}handleChangeEvent(w,Y){w===this.el.nativeElement&&(Y!==this.lastValue&&(this.lastValue=Y,this.onChange(Y)),Cr(this.el))}_handleBlurEvent(w){w===this.el.nativeElement&&(this.onTouched(),Cr(this.el))}registerOnChange(w){this.onChange=w}registerOnTouched(w){this.onTouched=w}setDisabledState(w){this.el.nativeElement.disabled=w}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let w;try{w=this.injector.get(Le.a5)}catch(pe){}if(!w)return;w.statusChanges&&(this.statusChanges=w.statusChanges.subscribe(()=>Cr(this.el)));const Y=w.control;Y&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(dt=>{if(Y[dt]){const jt=Y[dt].bind(Y);Y[dt]=(...fn)=>{jt(...fn),Cr(this.el)}}})}}return I.\u0275fac=function(w){v.$Z()},I.\u0275dir=v.lG2({type:I,hostBindings:function(w,Y){1&w&&v.NdJ("ionBlur",function(dt){return Y._handleBlurEvent(dt.target)})}}),ue([(0,v.L6J)("ionBlur",["$event.target"])],I.prototype,"_handleBlurEvent",null),I})();const Cr=I=>{Yn(()=>{const N=I.nativeElement,w=nr(N);He(N,w);const Y=N.closest("ion-item");Y&&He(Y,w)})},nr=I=>{const N=I.classList,w=[];for(let Y=0;Y<N.length;Y++){const pe=N.item(Y);null!==pe&&at(pe,"ng-")&&w.push(`ion-${pe.substr(3)}`)}return w},He=(I,N)=>{const w=I.classList;["ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"].forEach(Y=>w.remove(Y)),N.forEach(Y=>w.add(Y))},at=(I,N)=>I.substr(0,N.length)===N;var wt;let Qt=wt=class extends Pr{constructor(N,w){super(N,w)}writeValue(N){this.el.nativeElement.checked=this.lastValue=null!=N&&N,Cr(this.el)}_handleIonChange(N){this.handleChangeEvent(N,N.checked)}};var $t;Qt.\u0275fac=function(N){return new(N||Qt)(v.Y36(v.zs3),v.Y36(v.SBq))},Qt.\u0275dir=v.lG2({type:Qt,selectors:[["ion-checkbox"],["ion-toggle"]],hostBindings:function(N,w){1&N&&v.NdJ("ionChange",function(pe){return w._handleIonChange(pe.target)})},features:[v._Bn([{provide:Le.JU,useExisting:wt,multi:!0}]),v.qOj]}),Qt.ctorParameters=()=>[{type:v.zs3},{type:v.SBq}],ue([(0,v.L6J)("ionChange",["$event.target"])],Qt.prototype,"_handleIonChange",null);let Wt=$t=class extends Pr{constructor(N,w){super(N,w)}_handleIonChange(N){this.handleChangeEvent(N,N.value)}registerOnChange(N){super.registerOnChange(w=>{N(""===w?null:parseFloat(w))})}};var Be;Wt.\u0275fac=function(N){return new(N||Wt)(v.Y36(v.zs3),v.Y36(v.SBq))},Wt.\u0275dir=v.lG2({type:Wt,selectors:[["ion-input","type","number"]],hostBindings:function(N,w){1&N&&v.NdJ("ionChange",function(pe){return w._handleIonChange(pe.target)})},features:[v._Bn([{provide:Le.JU,useExisting:$t,multi:!0}]),v.qOj]}),Wt.ctorParameters=()=>[{type:v.zs3},{type:v.SBq}],ue([(0,v.L6J)("ionChange",["$event.target"])],Wt.prototype,"_handleIonChange",null);let $e=Be=class extends Pr{constructor(N,w){super(N,w)}_handleIonSelect(N){this.handleChangeEvent(N,N.checked)}};var it;$e.\u0275fac=function(N){return new(N||$e)(v.Y36(v.zs3),v.Y36(v.SBq))},$e.\u0275dir=v.lG2({type:$e,selectors:[["ion-radio"]],hostBindings:function(N,w){1&N&&v.NdJ("ionSelect",function(pe){return w._handleIonSelect(pe.target)})},features:[v._Bn([{provide:Le.JU,useExisting:Be,multi:!0}]),v.qOj]}),$e.ctorParameters=()=>[{type:v.zs3},{type:v.SBq}],ue([(0,v.L6J)("ionSelect",["$event.target"])],$e.prototype,"_handleIonSelect",null);let Ve=it=class extends Pr{constructor(N,w){super(N,w)}_handleChangeEvent(N){this.handleChangeEvent(N,N.value)}};var be;Ve.\u0275fac=function(N){return new(N||Ve)(v.Y36(v.zs3),v.Y36(v.SBq))},Ve.\u0275dir=v.lG2({type:Ve,selectors:[["ion-range"],["ion-select"],["ion-radio-group"],["ion-segment"],["ion-datetime"]],hostBindings:function(N,w){1&N&&v.NdJ("ionChange",function(pe){return w._handleChangeEvent(pe.target)})},features:[v._Bn([{provide:Le.JU,useExisting:it,multi:!0}]),v.qOj]}),Ve.ctorParameters=()=>[{type:v.zs3},{type:v.SBq}],ue([(0,v.L6J)("ionChange",["$event.target"])],Ve.prototype,"_handleChangeEvent",null);let Pe=be=class extends Pr{constructor(N,w){super(N,w)}_handleInputEvent(N){this.handleChangeEvent(N,N.value)}};Pe.\u0275fac=function(N){return new(N||Pe)(v.Y36(v.zs3),v.Y36(v.SBq))},Pe.\u0275dir=v.lG2({type:Pe,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(N,w){1&N&&v.NdJ("ionChange",function(pe){return w._handleInputEvent(pe.target)})},features:[v._Bn([{provide:Le.JU,useExisting:be,multi:!0}]),v.qOj]}),Pe.ctorParameters=()=>[{type:v.zs3},{type:v.SBq}],ue([(0,v.L6J)("ionChange",["$event.target"])],Pe.prototype,"_handleInputEvent",null);let Et=class{constructor(N,w){this.doc=N,this.backButton=new or.xQ,this.keyboardDidShow=new or.xQ,this.keyboardDidHide=new or.xQ,this.pause=new or.xQ,this.resume=new or.xQ,this.resize=new or.xQ,w.run(()=>{let Y;this.win=N.defaultView,this.backButton.subscribeWithPriority=function(pe,dt){return this.subscribe(jt=>jt.register(pe,fn=>w.run(()=>dt(fn))))},Rn(this.pause,N,"pause"),Rn(this.resume,N,"resume"),Rn(this.backButton,N,"ionBackButton"),Rn(this.resize,this.win,"resize"),Rn(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),Rn(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(pe=>{Y=pe}),this.win&&this.win.cordova?N.addEventListener("deviceready",()=>{Y("cordova")},{once:!0}):Y("dom")})}is(N){return(0,vn.a)(this.win,N)}platforms(){return(0,vn.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(N){return tn(this.win.location.href,N)}isLandscape(){return!this.isPortrait()}isPortrait(){return this.win.matchMedia&&this.win.matchMedia("(orientation: portrait)").matches}testUserAgent(N){const w=this.win.navigator;return!!(w&&w.userAgent&&w.userAgent.indexOf(N)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}};Et.\u0275fac=function(N){return new(N||Et)(v.LFG(Tt.K0),v.LFG(v.R0b))},Et.\u0275prov=v.Yz7({token:Et,factory:function(I){return Et.\u0275fac(I)},providedIn:"root"}),Et.ngInjectableDef=(0,v.Yz7)({factory:function(){return new Et((0,v.LFG)(Tt.K0),(0,v.LFG)(v.R0b))},token:Et,providedIn:"root"}),Et=ue([ee(0,(0,v.tBr)(Tt.K0))],Et);const tn=(I,N)=>{N=N.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");const Y=new RegExp("[\\?&]"+N+"=([^&#]*)").exec(I);return Y?decodeURIComponent(Y[1].replace(/\+/g," ")):null},Rn=(I,N,w)=>{N&&N.addEventListener(w,Y=>{I.next(null!=Y?Y.detail:void 0)})};let yn=class{constructor(N,w,Y,pe){this.location=w,this.serializer=Y,this.router=pe,this.direction=rn,this.animated=nn,this.guessDirection="forward",this.lastNavId=-1,pe&&pe.events.subscribe(dt=>{if(dt instanceof ft.OD){const jt=dt.restoredState?dt.restoredState.navigationId:dt.id;this.guessDirection=jt<this.lastNavId?"back":"forward",this.guessAnimation=dt.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?dt.id:jt}}),N.backButton.subscribeWithPriority(0,dt=>{this.pop(),dt()})}navigateForward(N,w={}){return this.setDirection("forward",w.animated,w.animationDirection,w.animation),this.navigate(N,w)}navigateBack(N,w={}){return this.setDirection("back",w.animated,w.animationDirection,w.animation),this.navigate(N,w)}navigateRoot(N,w={}){return this.setDirection("root",w.animated,w.animationDirection,w.animation),this.navigate(N,w)}back(N={animated:!0,animationDirection:"back"}){return this.setDirection("back",N.animated,N.animationDirection,N.animation),this.location.back()}pop(){return oe(this,void 0,void 0,function*(){let N=this.topOutlet;for(;N&&!(yield N.pop());)N=N.parentOutlet})}setDirection(N,w,Y,pe){this.direction=N,this.animated=Dn(N,w,Y),this.animationBuilder=pe}setTopOutlet(N){this.topOutlet=N}consumeTransition(){let w,N="root";const Y=this.animationBuilder;return"auto"===this.direction?(N=this.guessDirection,w=this.guessAnimation):(w=this.animated,N=this.direction),this.direction=rn,this.animated=nn,this.animationBuilder=void 0,{direction:N,animation:w,animationBuilder:Y}}navigate(N,w){if(Array.isArray(N))return this.router.navigate(N,w);{const Y=this.serializer.parse(N.toString());return void 0!==w.queryParams&&(Y.queryParams=Object.assign({},w.queryParams)),void 0!==w.fragment&&(Y.fragment=w.fragment),this.router.navigateByUrl(Y,w)}}};yn.\u0275fac=function(N){return new(N||yn)(v.LFG(Et),v.LFG(Tt.Ye),v.LFG(ft.Hx),v.LFG(ft.F0,8))},yn.\u0275prov=v.Yz7({token:yn,factory:function(I){return yn.\u0275fac(I)},providedIn:"root"}),yn.ngInjectableDef=(0,v.Yz7)({factory:function(){return new yn((0,v.LFG)(Et),(0,v.LFG)(Tt.Ye),(0,v.LFG)(ft.Hx),(0,v.LFG)(ft.F0,8))},token:yn,providedIn:"root"}),yn=ue([ee(3,(0,v.FiY)())],yn);const Dn=(I,N,w)=>{if(!1!==N){if(void 0!==w)return w;if("forward"===I||"back"===I)return I;if("root"===I&&!0===N)return"forward"}},rn="auto",nn=void 0,Yt=(I,N)=>{const w=I.prototype;N.forEach(Y=>{Object.defineProperty(w,Y,{get(){return this.el[Y]},set(pe){this.z.runOutsideAngular(()=>this.el[Y]=pe)}})})},Mn=(I,N)=>{const w=I.prototype;N.forEach(Y=>{w[Y]=function(){const pe=arguments;return this.z.runOutsideAngular(()=>this.el[Y].apply(this.el,pe))}})},Fn=(I,N,w)=>{w.forEach(Y=>I[Y]=Ht(N,Y))};function dn(I){return function(w){return I.inputs&&Yt(w,I.inputs),I.methods&&Mn(w,I.methods),w}}let Ur=(()=>{let I=class{constructor(w,Y,pe){this.z=pe,w.detach(),this.el=Y.nativeElement}};return I.\u0275fac=function(w){return new(w||I)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},I.\u0275cmp=v.Xpm({type:I,selectors:[["ion-app"]],ngContentSelectors:Ft,decls:1,vars:0,template:function(w,Y){1&w&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),I})(),zi=(()=>{let I=class{constructor(w,Y,pe){this.z=pe,w.detach(),this.el=Y.nativeElement,Fn(this,this.el,["ionFocus","ionBlur"])}};return I.\u0275fac=function(w){return new(w||I)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},I.\u0275cmp=v.Xpm({type:I,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:Ft,decls:1,vars:0,template:function(w,Y){1&w&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),I=ue([dn({inputs:["buttonType","color","disabled","download","expand","fill","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],I),I})(),Qn=(()=>{let I=class{constructor(w,Y,pe){this.z=pe,w.detach(),this.el=Y.nativeElement}};return I.\u0275fac=function(w){return new(w||I)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},I.\u0275cmp=v.Xpm({type:I,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},ngContentSelectors:Ft,decls:1,vars:0,template:function(w,Y){1&w&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),I=ue([dn({inputs:["collapse"]})],I),I})(),Vn=(()=>{let I=class{constructor(w,Y,pe){this.z=pe,w.detach(),this.el=Y.nativeElement,Fn(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return I.\u0275fac=function(w){return new(w||I)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},I.\u0275cmp=v.Xpm({type:I,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:Ft,decls:1,vars:0,template:function(w,Y){1&w&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),I=ue([dn({inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],I),I})(),Ze=(()=>{let I=class{constructor(w,Y,pe){this.z=pe,w.detach(),this.el=Y.nativeElement}};return I.\u0275fac=function(w){return new(w||I)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},I.\u0275cmp=v.Xpm({type:I,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:Ft,decls:1,vars:0,template:function(w,Y){1&w&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),I=ue([dn({inputs:["collapse","mode","translucent"]})],I),I})(),ze=(()=>{let I=class{constructor(w,Y,pe){this.z=pe,w.detach(),this.el=Y.nativeElement}};return I.\u0275fac=function(w){return new(w||I)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},I.\u0275cmp=v.Xpm({type:I,selectors:[["ion-icon"]],inputs:{ariaHidden:"ariaHidden",ariaLabel:"ariaLabel",color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:Ft,decls:1,vars:0,template:function(w,Y){1&w&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),I=ue([dn({inputs:["ariaHidden","ariaLabel","color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],I),I})(),an=(()=>{let I=class{constructor(w,Y,pe){this.z=pe,w.detach(),this.el=Y.nativeElement,Fn(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return I.\u0275fac=function(w){return new(w||I)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},I.\u0275cmp=v.Xpm({type:I,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:Ft,decls:1,vars:0,template:function(w,Y){1&w&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),I=ue([dn({inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","debounce","disabled","enterkeyhint","inputmode","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],I),I})(),Sn=(()=>{let I=class{constructor(w,Y,pe){this.z=pe,w.detach(),this.el=Y.nativeElement}};return I.\u0275fac=function(w){return new(w||I)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},I.\u0275cmp=v.Xpm({type:I,selectors:[["ion-item"]],inputs:{button:"button",color:"color",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:Ft,decls:1,vars:0,template:function(w,Y){1&w&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),I=ue([dn({inputs:["button","color","detail","detailIcon","disabled","download","href","lines","mode","rel","routerAnimation","routerDirection","target","type"]})],I),I})(),kr=(()=>{let I=class{constructor(w,Y,pe){this.z=pe,w.detach(),this.el=Y.nativeElement}};return I.\u0275fac=function(w){return new(w||I)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},I.\u0275cmp=v.Xpm({type:I,selectors:[["ion-item-option"]],inputs:{color:"color",disabled:"disabled",download:"download",expandable:"expandable",href:"href",mode:"mode",rel:"rel",target:"target",type:"type"},ngContentSelectors:Ft,decls:1,vars:0,template:function(w,Y){1&w&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),I=ue([dn({inputs:["color","disabled","download","expandable","href","mode","rel","target","type"]})],I),I})(),Fi=(()=>{let I=class{constructor(w,Y,pe){this.z=pe,w.detach(),this.el=Y.nativeElement,Fn(this,this.el,["ionSwipe"])}};return I.\u0275fac=function(w){return new(w||I)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},I.\u0275cmp=v.Xpm({type:I,selectors:[["ion-item-options"]],inputs:{side:"side"},ngContentSelectors:Ft,decls:1,vars:0,template:function(w,Y){1&w&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),I=ue([dn({inputs:["side"]})],I),I})(),Jr=(()=>{let I=class{constructor(w,Y,pe){this.z=pe,w.detach(),this.el=Y.nativeElement,Fn(this,this.el,["ionDrag"])}};return I.\u0275fac=function(w){return new(w||I)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},I.\u0275cmp=v.Xpm({type:I,selectors:[["ion-item-sliding"]],inputs:{disabled:"disabled"},ngContentSelectors:Ft,decls:1,vars:0,template:function(w,Y){1&w&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),I=ue([dn({inputs:["disabled"],methods:["getOpenAmount","getSlidingRatio","open","close","closeOpened"]})],I),I})(),ri=(()=>{let I=class{constructor(w,Y,pe){this.z=pe,w.detach(),this.el=Y.nativeElement}};return I.\u0275fac=function(w){return new(w||I)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},I.\u0275cmp=v.Xpm({type:I,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:Ft,decls:1,vars:0,template:function(w,Y){1&w&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),I=ue([dn({inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],I),I})(),Yi=(()=>{let I=class{constructor(w,Y,pe){this.z=pe,w.detach(),this.el=Y.nativeElement,Fn(this,this.el,["ionWillOpen","ionWillClose","ionDidOpen","ionDidClose"])}};return I.\u0275fac=function(w){return new(w||I)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},I.\u0275cmp=v.Xpm({type:I,selectors:[["ion-menu"]],inputs:{contentId:"contentId",disabled:"disabled",maxEdgeStart:"maxEdgeStart",menuId:"menuId",side:"side",swipeGesture:"swipeGesture",type:"type"},ngContentSelectors:Ft,decls:1,vars:0,template:function(w,Y){1&w&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),I=ue([dn({inputs:["contentId","disabled","maxEdgeStart","menuId","side","swipeGesture","type"],methods:["isOpen","isActive","open","close","toggle","setOpen"]})],I),I})(),Ss=(()=>{let I=class{constructor(w,Y,pe){this.z=pe,w.detach(),this.el=Y.nativeElement}};return I.\u0275fac=function(w){return new(w||I)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},I.\u0275cmp=v.Xpm({type:I,selectors:[["ion-menu-button"]],inputs:{autoHide:"autoHide",color:"color",disabled:"disabled",menu:"menu",mode:"mode",type:"type"},ngContentSelectors:Ft,decls:1,vars:0,template:function(w,Y){1&w&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),I=ue([dn({inputs:["autoHide","color","disabled","menu","mode","type"]})],I),I})(),ji=(()=>{let I=class{constructor(w,Y,pe){this.z=pe,w.detach(),this.el=Y.nativeElement}};return I.\u0275fac=function(w){return new(w||I)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},I.\u0275cmp=v.Xpm({type:I,selectors:[["ion-note"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Ft,decls:1,vars:0,template:function(w,Y){1&w&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),I=ue([dn({inputs:["color","mode"]})],I),I})(),qs=(()=>{let I=class{constructor(w,Y,pe){this.z=pe,w.detach(),this.el=Y.nativeElement,Fn(this,this.el,["ionChange","ionInput","ionBlur","ionFocus"])}};return I.\u0275fac=function(w){return new(w||I)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},I.\u0275cmp=v.Xpm({type:I,selectors:[["ion-textarea"]],inputs:{autoGrow:"autoGrow",autocapitalize:"autocapitalize",autofocus:"autofocus",clearOnEdit:"clearOnEdit",color:"color",cols:"cols",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",maxlength:"maxlength",minlength:"minlength",mode:"mode",name:"name",placeholder:"placeholder",readonly:"readonly",required:"required",rows:"rows",spellcheck:"spellcheck",value:"value",wrap:"wrap"},ngContentSelectors:Ft,decls:1,vars:0,template:function(w,Y){1&w&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),I=ue([dn({inputs:["autoGrow","autocapitalize","autofocus","clearOnEdit","color","cols","debounce","disabled","enterkeyhint","inputmode","maxlength","minlength","mode","name","placeholder","readonly","required","rows","spellcheck","value","wrap"],methods:["setFocus","getInputElement"]})],I),I})(),io=(()=>{let I=class{constructor(w,Y,pe){this.z=pe,w.detach(),this.el=Y.nativeElement}};return I.\u0275fac=function(w){return new(w||I)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},I.\u0275cmp=v.Xpm({type:I,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:Ft,decls:1,vars:0,template:function(w,Y){1&w&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),I=ue([dn({inputs:["color","size"]})],I),I})(),yi=(()=>{let I=class{constructor(w,Y,pe){this.z=pe,w.detach(),this.el=Y.nativeElement}};return I.\u0275fac=function(w){return new(w||I)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},I.\u0275cmp=v.Xpm({type:I,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Ft,decls:1,vars:0,template:function(w,Y){1&w&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),I=ue([dn({inputs:["color","mode"]})],I),I})(),Ci=class{get(N,w){const Y=le();return Y?Y.get(N,w):null}getBoolean(N,w){const Y=le();return!!Y&&Y.getBoolean(N,w)}getNumber(N,w){const Y=le();return Y?Y.getNumber(N,w):0}set(N,w){console.warn("[DEPRECATION][Config]: The Config.set() method is deprecated and will be removed in Ionic Framework 6.0. Please see https://ionicframework.com/docs/angular/config for alternatives.");const Y=le();Y&&Y.set(N,w)}};Ci.\u0275fac=function(N){return new(N||Ci)},Ci.\u0275prov=v.Yz7({token:Ci,factory:function(I){return Ci.\u0275fac(I)},providedIn:"root"}),Ci.ngInjectableDef=(0,v.Yz7)({factory:function(){return new Ci},token:Ci,providedIn:"root"});const G=new v.OlP("USERCONFIG"),le=()=>{if("undefined"!=typeof window){const I=window.Ionic;if(I&&I.config)return I.config}return null};class De{constructor(N={}){this.data=N}get(N){return this.data[N]}}let qe=(()=>{let I=class{constructor(w,Y){this.zone=w,this.appRef=Y}create(w,Y,pe){return new Ct(w,Y,pe,this.appRef,this.zone)}};return I.\u0275fac=function(w){return new(w||I)(v.LFG(v.R0b),v.LFG(v.z2F))},I.\u0275prov=v.Yz7({token:I,factory:function(N){return I.\u0275fac(N)}}),I})();class Ct{constructor(N,w,Y,pe,dt){this.resolver=N,this.injector=w,this.location=Y,this.appRef=pe,this.zone=dt,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(N,w,Y,pe){return this.zone.run(()=>new Promise(dt=>{dt(ln(this.zone,this.resolver,this.injector,this.location,this.appRef,this.elRefMap,this.elEventsMap,N,w,Y,pe))}))}removeViewFromDom(N,w){return this.zone.run(()=>new Promise(Y=>{const pe=this.elRefMap.get(w);if(pe){pe.destroy(),this.elRefMap.delete(w);const dt=this.elEventsMap.get(w);dt&&(dt(),this.elEventsMap.delete(w))}Y()}))}}const ln=(I,N,w,Y,pe,dt,jt,fn,lr,Nn,Vr)=>{const ui=N.resolveComponentFactory(lr),qt=v.zs3.create({providers:de(Nn),parent:w}),dr=Y?Y.createComponent(ui,Y.length,qt):ui.create(qt),Ii=dr.instance,es=dr.location.nativeElement;if(Nn&&Object.assign(Ii,Nn),Vr)for(const Kn of Vr)es.classList.add(Kn);const Bn=B(I,Ii,es);return fn.appendChild(es),Y||pe.attachView(dr.hostView),dr.changeDetectorRef.reattach(),dt.set(es,dr),jt.set(es,Bn),es},q=[Dt.L,Dt.a,Dt.b,Dt.c,Dt.d],B=(I,N,w)=>I.run(()=>{const Y=q.filter(pe=>"function"==typeof N[pe]).map(pe=>{const dt=jt=>N[pe](jt.detail);return w.addEventListener(pe,dt),()=>w.removeEventListener(pe,dt)});return()=>Y.forEach(pe=>pe())}),P=new v.OlP("NavParamsToken"),de=I=>[{provide:P,useValue:I},{provide:De,useFactory:bn,deps:[P]}],bn=I=>new De(I),Vi=(I,N)=>((I=I.filter(w=>w.stackId!==N.stackId)).push(N),I),yo=(I,N)=>{const w=I.createUrlTree(["."],{relativeTo:N});return I.serializeUrl(w)},Ma=(I,N)=>{if(!I)return;const w=To(N);for(let Y=0;Y<w.length;Y++){if(Y>=I.length)return w[Y];if(w[Y]!==I[Y])return}},To=I=>I.split("/").map(N=>N.trim()).filter(N=>""!==N),Zo=I=>{I&&(I.ref.destroy(),I.unlistenEvents())};class Rs{constructor(N,w,Y,pe,dt,jt){this.containerEl=w,this.router=Y,this.navCtrl=pe,this.zone=dt,this.location=jt,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==N?To(N):void 0}createView(N,w){const Y=yo(this.router,w),pe=N&&N.location&&N.location.nativeElement,dt=B(this.zone,N.instance,pe);return{id:this.nextId++,stackId:Ma(this.tabsPrefix,Y),unlistenEvents:dt,element:pe,ref:N,url:Y}}getExistingView(N){const w=yo(this.router,N),Y=this.views.find(pe=>pe.url===w);return Y&&Y.ref.changeDetectorRef.reattach(),Y}setActive(N){const w=this.navCtrl.consumeTransition();let{direction:Y,animation:pe,animationBuilder:dt}=w;const jt=this.activeView,fn=((I,N)=>!N||I.stackId!==N.stackId)(N,jt);fn&&(Y="back",pe=void 0);const lr=this.views.slice();let Nn;const Vr=this.router;Vr.getCurrentNavigation?Nn=Vr.getCurrentNavigation():Vr.navigations&&Vr.navigations.value&&(Nn=Vr.navigations.value),Nn&&Nn.extras&&Nn.extras.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const ui=this.views.includes(N),qt=this.insertView(N,Y);ui||N.ref.changeDetectorRef.detectChanges();const dr=N.animationBuilder;return void 0===dt&&"back"===Y&&!fn&&void 0!==dr&&(dt=dr),jt&&(jt.animationBuilder=dt),this.zone.runOutsideAngular(()=>this.wait(()=>(jt&&jt.ref.changeDetectorRef.detach(),N.ref.changeDetectorRef.reattach(),this.transition(N,jt,pe,this.canGoBack(1),!1,dt).then(()=>hn(N,qt,lr,this.location)).then(()=>({enteringView:N,direction:Y,animation:pe,tabSwitch:fn})))))}canGoBack(N,w=this.getActiveStackId()){return this.getStack(w).length>N}pop(N,w=this.getActiveStackId()){return this.zone.run(()=>{const Y=this.getStack(w);if(Y.length<=N)return Promise.resolve(!1);const pe=Y[Y.length-N-1];let dt=pe.url;const jt=pe.savedData;if(jt){const lr=jt.get("primary");lr&&lr.route&&lr.route._routerState&&lr.route._routerState.snapshot&&lr.route._routerState.snapshot.url&&(dt=lr.route._routerState.snapshot.url)}const{animationBuilder:fn}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(dt,Object.assign({},pe.savedExtras,{animation:fn})).then(()=>!0)})}startBackTransition(){const N=this.activeView;if(N){const w=this.getStack(N.stackId),Y=w[w.length-2],pe=Y.animationBuilder;return this.wait(()=>this.transition(Y,N,"back",this.canGoBack(2),!0,pe))}return Promise.resolve()}endBackTransition(N){N?(this.skipTransition=!0,this.pop(1)):this.activeView&&So(this.activeView,this.views,this.views,this.location)}getLastUrl(N){const w=this.getStack(N);return w.length>0?w[w.length-1]:void 0}getRootUrl(N){const w=this.getStack(N);return w.length>0?w[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(Zo),this.activeView=void 0,this.views=[]}getStack(N){return this.views.filter(w=>w.stackId===N)}insertView(N,w){return this.activeView=N,this.views=((I,N,w)=>"root"===w?Vi(I,N):"forward"===w?((I,N)=>(I.indexOf(N)>=0?I=I.filter(Y=>Y.stackId!==N.stackId||Y.id<=N.id):I.push(N),I))(I,N):((I,N)=>I.indexOf(N)>=0?I.filter(Y=>Y.stackId!==N.stackId||Y.id<=N.id):Vi(I,N))(I,N))(this.views,N,w),this.views.slice()}transition(N,w,Y,pe,dt,jt){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(w===N)return Promise.resolve(!1);const fn=N?N.element:void 0,lr=w?w.element:void 0,Nn=this.containerEl;return fn&&fn!==lr&&(fn.classList.add("ion-page"),fn.classList.add("ion-page-invisible"),fn.parentElement!==Nn&&Nn.appendChild(fn),Nn.commit)?Nn.commit(fn,lr,{deepWait:!0,duration:void 0===Y?0:void 0,direction:Y,showGoBack:pe,progressAnimation:dt,animationBuilder:jt}):Promise.resolve(!1)}wait(N){return oe(this,void 0,void 0,function*(){void 0!==this.runningTask&&(yield this.runningTask,this.runningTask=void 0);const w=this.runningTask=N();return w.finally(()=>this.runningTask=void 0),w})}}const hn=(I,N,w,Y)=>"function"==typeof requestAnimationFrame?new Promise(pe=>{requestAnimationFrame(()=>{So(I,N,w,Y),pe()})}):Promise.resolve(),So=(I,N,w,Y)=>{w.filter(pe=>!N.includes(pe)).forEach(Zo),N.forEach(pe=>{const jt=Y.path().split("?")[0].split("#")[0];if(pe!==I&&pe.url!==jt){const fn=pe.element;fn.setAttribute("aria-hidden","true"),fn.classList.add("ion-page-hidden"),pe.ref.changeDetectorRef.detach()}})};let Ms=(()=>{let I=class{constructor(w,Y,pe,dt,jt,fn,lr,Nn,Vr,ui,qt,dr,Ii){this.parentContexts=w,this.location=Y,this.resolver=pe,this.config=fn,this.navCtrl=lr,this.parentOutlet=Ii,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new sr.X(null),this.stackEvents=new v.vpe,this.activateEvents=new v.vpe,this.deactivateEvents=new v.vpe,this.nativeEl=Vr.nativeElement,this.name=dt||ft.eC,this.tabsPrefix="true"===jt?yo(ui,dr):void 0,this.stackCtrl=new Rs(this.tabsPrefix,this.nativeEl,ui,lr,qt,Nn),w.onChildOutletCreated(this.name,this)}set animation(w){this.nativeEl.animation=w}set animated(w){this.nativeEl.animated=w}set swipeGesture(w){this._swipeGesture=w,this.nativeEl.swipeHandler=w?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:Y=>this.stackCtrl.endBackTransition(Y)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){if(!this.activated){const w=this.getContext();w&&w.route&&this.activateWith(w.route,w.resolver||null)}new Promise(w=>(0,Nt.c)(this.nativeEl,w)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(w,Y){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const Y=this.getContext();this.activatedView.savedData=new Map(Y.children.contexts);const pe=this.activatedView.savedData.get("primary");if(pe&&Y.route&&(pe.route=Object.assign({},Y.route)),this.activatedView.savedExtras={},Y.route){const dt=Y.route.snapshot;this.activatedView.savedExtras.queryParams=dt.queryParams,this.activatedView.savedExtras.fragment=dt.fragment}}const w=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(w)}}activateWith(w,Y){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=w;let pe,dt=this.stackCtrl.getExistingView(w);if(dt){pe=this.activated=dt.ref;const jt=dt.savedData;jt&&(this.getContext().children.contexts=jt),this.updateActivatedRouteProxy(pe.instance,w)}else{const lr=(Y=Y||this.resolver).resolveComponentFactory(w._futureSnapshot.routeConfig.component),Nn=this.parentContexts.getOrCreateContext(this.name).children,Vr=new sr.X(null),ui=this.createActivatedRouteProxy(Vr,w),qt=new ss(ui,Nn,this.location.injector);pe=this.activated=this.location.createComponent(lr,this.location.length,qt),Vr.next(pe.instance),dt=this.stackCtrl.createView(this.activated,w),this.proxyMap.set(pe.instance,ui),this.currentActivatedRoute$.next({component:pe.instance,activatedRoute:w})}this.activatedView=dt,this.stackCtrl.setActive(dt).then(jt=>{this.navCtrl.setTopOutlet(this),this.activateEvents.emit(pe.instance),this.stackEvents.emit(jt)})}canGoBack(w=1,Y){return this.stackCtrl.canGoBack(w,Y)}pop(w=1,Y){return this.stackCtrl.pop(w,Y)}getLastUrl(w){const Y=this.stackCtrl.getLastUrl(w);return Y?Y.url:void 0}getLastRouteView(w){return this.stackCtrl.getLastUrl(w)}getRootView(w){return this.stackCtrl.getRootUrl(w)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(w,Y){const pe=new ft.gz;return pe._futureSnapshot=Y._futureSnapshot,pe._routerState=Y._routerState,pe.snapshot=Y.snapshot,pe.outlet=Y.outlet,pe.component=Y.component,pe._paramMap=this.proxyObservable(w,"paramMap"),pe._queryParamMap=this.proxyObservable(w,"queryParamMap"),pe.url=this.proxyObservable(w,"url"),pe.params=this.proxyObservable(w,"params"),pe.queryParams=this.proxyObservable(w,"queryParams"),pe.fragment=this.proxyObservable(w,"fragment"),pe.data=this.proxyObservable(w,"data"),pe}proxyObservable(w,Y){return w.pipe((0,pr.h)(pe=>!!pe),(0,Lr.w)(pe=>this.currentActivatedRoute$.pipe((0,pr.h)(dt=>null!==dt&&dt.component===pe),(0,Lr.w)(dt=>dt&&dt.activatedRoute[Y]),(0,Nr.x)())))}updateActivatedRouteProxy(w,Y){const pe=this.proxyMap.get(w);if(!pe)throw new Error("Could not find activated route proxy for view");pe._futureSnapshot=Y._futureSnapshot,pe._routerState=Y._routerState,pe.snapshot=Y.snapshot,pe.outlet=Y.outlet,pe.component=Y.component,this.currentActivatedRoute$.next({component:w,activatedRoute:Y})}};return I.\u0275fac=function(w){return new(w||I)(v.Y36(ft.y6),v.Y36(v.s_b),v.Y36(v._Vd),v.$8M("name"),v.$8M("tabs"),v.Y36(Ci),v.Y36(yn),v.Y36(Tt.Ye),v.Y36(v.SBq),v.Y36(ft.F0),v.Y36(v.R0b),v.Y36(ft.gz),v.Y36(I,12))},I.\u0275dir=v.lG2({type:I,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",swipeGesture:"swipeGesture"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),ue([(0,v.r_U)()],I.prototype,"stackEvents",void 0),ue([(0,v.r_U)("activate")],I.prototype,"activateEvents",void 0),ue([(0,v.r_U)("deactivate")],I.prototype,"deactivateEvents",void 0),I=ue([ee(3,(0,v.ahi)("name")),ee(4,(0,v.FiY)()),ee(4,(0,v.ahi)("tabs")),ee(12,(0,v.tp0)()),ee(12,(0,v.FiY)())],I),I})();class ss{constructor(N,w,Y){this.route=N,this.childContexts=w,this.parent=Y}get(N,w){return N===ft.gz?this.route:N===ft.y6?this.childContexts:this.parent.get(N,w)}}class un{constructor(N){this.ctrl=N}create(N){return this.ctrl.create(N||{})}dismiss(N,w,Y){return this.ctrl.dismiss(N,w,Y)}getTop(){return this.ctrl.getTop()}}let Si=class extends un{constructor(){super(je.b)}};Si.\u0275fac=function(N){return new(N||Si)},Si.\u0275prov=v.Yz7({token:Si,factory:function(I){return Si.\u0275fac(I)},providedIn:"root"}),Si.ngInjectableDef=(0,v.Yz7)({factory:function(){return new Si},token:Si,providedIn:"root"});let Ys=class extends un{constructor(){super(je.a)}};Ys.\u0275fac=function(N){return new(N||Ys)},Ys.\u0275prov=v.Yz7({token:Ys,factory:function(I){return Ys.\u0275fac(I)},providedIn:"root"}),Ys.ngInjectableDef=(0,v.Yz7)({factory:function(){return new Ys},token:Ys,providedIn:"root"});let os=class extends un{constructor(){super(je.l)}};os.\u0275fac=function(N){return new(N||os)},os.\u0275prov=v.Yz7({token:os,factory:function(I){return os.\u0275fac(I)},providedIn:"root"}),os.ngInjectableDef=(0,v.Yz7)({factory:function(){return new os},token:os,providedIn:"root"});let $i=class{open(N){return tt.m.open(N)}close(N){return tt.m.close(N)}toggle(N){return tt.m.toggle(N)}enable(N,w){return tt.m.enable(N,w)}swipeGesture(N,w){return tt.m.swipeGesture(N,w)}isOpen(N){return tt.m.isOpen(N)}isEnabled(N){return tt.m.isEnabled(N)}get(N){return tt.m.get(N)}getOpen(){return tt.m.getOpen()}getMenus(){return tt.m.getMenus()}};$i.\u0275fac=function(N){return new(N||$i)},$i.\u0275prov=v.Yz7({token:$i,factory:function(I){return $i.\u0275fac(I)},providedIn:"root"}),$i.ngInjectableDef=(0,v.Yz7)({factory:function(){return new $i},token:$i,providedIn:"root"});let ds=class extends un{constructor(){super(je.p)}};ds.\u0275fac=function(N){return new(N||ds)},ds.\u0275prov=v.Yz7({token:ds,factory:function(I){return ds.\u0275fac(I)},providedIn:"root"}),ds.ngInjectableDef=(0,v.Yz7)({factory:function(){return new ds},token:ds,providedIn:"root"});let Ks=(()=>{let I=class extends un{constructor(w,Y,pe){super(je.m),this.angularDelegate=w,this.resolver=Y,this.injector=pe}create(w){return super.create(Object.assign({},w,{delegate:this.angularDelegate.create(this.resolver,this.injector)}))}};return I.\u0275fac=function(w){return new(w||I)(v.LFG(qe),v.LFG(v._Vd),v.LFG(v.zs3))},I.\u0275prov=v.Yz7({token:I,factory:function(N){return I.\u0275fac(N)}}),I})(),so=(()=>{let I=class extends un{constructor(w,Y,pe){super(je.c),this.angularDelegate=w,this.resolver=Y,this.injector=pe}create(w){return super.create(Object.assign({},w,{delegate:this.angularDelegate.create(this.resolver,this.injector)}))}};return I.\u0275fac=function(w){return new(w||I)(v.LFG(qe),v.LFG(v._Vd),v.LFG(v.zs3))},I.\u0275prov=v.Yz7({token:I,factory:function(N){return I.\u0275fac(N)}}),I})(),hs=class extends un{constructor(){super(je.t)}};hs.\u0275fac=function(N){return new(N||hs)},hs.\u0275prov=v.Yz7({token:hs,factory:function(I){return hs.\u0275fac(I)},providedIn:"root"}),hs.ngInjectableDef=(0,v.Yz7)({factory:function(){return new hs},token:hs,providedIn:"root"});let Ji=class{read(N){js().read(N)}write(N){js().write(N)}};Ji.\u0275fac=function(N){return new(N||Ji)},Ji.\u0275prov=v.Yz7({token:Ji,factory:function(I){return Ji.\u0275fac(I)},providedIn:"root"}),Ji.ngInjectableDef=(0,v.Yz7)({factory:function(){return new Ji},token:Ji,providedIn:"root"});const js=()=>{const I="undefined"!=typeof window?window:null;if(null!=I){const N=I.Ionic;return N&&N.queue?N.queue:{read:w=>I.requestAnimationFrame(w),write:w=>I.requestAnimationFrame(w)}}return{read:N=>N(),write:N=>N()}};let li=class{create(N){return(0,St.c)(N)}easingTime(N,w,Y,pe,dt){return(0,kt.g)(N,w,Y,pe,dt)}};li.\u0275fac=function(N){return new(N||li)},li.\u0275prov=v.Yz7({token:li,factory:function(I){return li.\u0275fac(I)},providedIn:"root"}),li.ngInjectableDef=(0,v.Yz7)({factory:function(){return new li},token:li,providedIn:"root"});let vs=class{constructor(N){this.zone=N}create(N,w=!1){return w&&Object.getOwnPropertyNames(N).forEach(Y=>{if("function"==typeof N[Y]){const pe=N[Y];N[Y]=(...dt)=>this.zone.run(()=>pe(...dt))}}),(0,xn.createGesture)(N)}};vs.\u0275fac=function(N){return new(N||vs)(v.LFG(v.R0b))},vs.\u0275prov=v.Yz7({token:vs,factory:function(I){return vs.\u0275fac(I)},providedIn:"root"}),vs.ngInjectableDef=(0,v.Yz7)({factory:function(){return new vs((0,v.LFG)(v.R0b))},token:vs,providedIn:"root"});class va{shouldDetach(N){return!1}shouldAttach(N){return!1}store(N,w){}retrieve(N){return null}shouldReuseRoute(N,w){if(N.routeConfig!==w.routeConfig)return!1;const Y=N.params,pe=w.params,dt=Object.keys(Y),jt=Object.keys(pe);if(dt.length!==jt.length)return!1;for(const fn of dt)if(pe[fn]!==Y[fn])return!1;return!0}}const Ds=(I,N,w)=>()=>{if(N.defaultView&&"undefined"!=typeof window){(I=>{const N=window,w=N.Ionic;w&&w.config&&"Object"!==w.config.constructor.name||(N.Ionic=N.Ionic||{},N.Ionic.config=Object.assign(Object.assign({},N.Ionic.config),I))})(Object.assign({},I,{_zoneGate:dt=>w.run(dt)}));const pe="__zone_symbol__addEventListener"in N.body?"__zone_symbol__addEventListener":"addEventListener";return function(){var I=[];if("undefined"!=typeof window){var N=window;(!N.customElements||N.Element&&(!N.Element.prototype.closest||!N.Element.prototype.matches||!N.Element.prototype.remove||!N.Element.prototype.getRootNode))&&I.push(F.e(6748).then(F.t.bind(F,5141,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||N.NodeList&&!N.NodeList.prototype.forEach||!N.fetch||!function(){try{var Y=new URL("b","http://a");return Y.pathname="c%20d","http://a/c%20d"===Y.href&&Y.searchParams}catch(pe){return!1}}()||"undefined"==typeof WeakMap)&&I.push(F.e(2214).then(F.t.bind(F,7656,23)))}return Promise.all(I)}().then(()=>((I,N)=>"undefined"==typeof window?Promise.resolve():(Mt.C&&Mt.C.supports&&Mt.C.supports("color","var(--c)")?(0,Mt.a)():F.e(1843).then(F.t.bind(F,5902,23)).then(()=>(Mt.p.$cssShim$=Mt.w.__cssshim)?Mt.p.$cssShim$.i():0)).then(()=>(hi(),(0,Mt.b)(JSON.parse('[["ion-select_3",[[2,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"options":[16]},[[0,"ionChange","onSelect"]]],[33,"ion-select",{"disabled":[4],"cancelText":[1,"cancel-text"],"okText":[1,"ok-text"],"placeholder":[1],"name":[1],"selectedText":[1,"selected-text"],"multiple":[4],"interface":[1],"interfaceOptions":[8,"interface-options"],"compareWith":[1,"compare-with"],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}]]],["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"activated":[32]}]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-modal",[[34,"ion-modal",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"swipeToClose":[4,"swipe-to-close"],"presentingElement":[16],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-popover",[[34,"ion-popover",{"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-app_8",[[0,"ion-app"],[34,"ion-buttons",{"collapse":[4]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"]]],[36,"ion-footer",{"translucent":[4]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-slide_2",[[0,"ion-slide"],[36,"ion-slides",{"options":[8],"pager":[4],"scrollbar":[4],"update":[64],"updateAutoHeight":[64],"slideTo":[64],"slideNext":[64],"slidePrev":[64],"getActiveIndex":[64],"getPreviousIndex":[64],"length":[64],"isEnd":[64],"isBeginning":[64],"startAutoplay":[64],"stopAutoplay":[64],"lockSwipeToNext":[64],"lockSwipeToPrev":[64],"lockSwipes":[64],"getSwiper":[64]}]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[1]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-input",[[34,"ion-input",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"inputmode":[1],"max":[1],"maxlength":[2],"min":[1],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"snaps":[4],"step":[2],"ticks":[4],"disabled":[4],"value":[1026],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-textarea",[[34,"ion-textarea",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[4,"auto-grow"],"value":[1025],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"activated":[32]}]]],["ion-virtual-scroll",[[0,"ion-virtual-scroll",{"approxItemHeight":[2,"approx-item-height"],"approxHeaderHeight":[2,"approx-header-height"],"approxFooterHeight":[2,"approx-footer-height"],"headerFn":[16],"footerFn":[16],"items":[16],"itemHeight":[16],"headerHeight":[16],"footerHeight":[16],"renderItem":[16],"renderHeader":[16],"renderFooter":[16],"nodeRender":[16],"domRender":[16],"totalHeight":[32],"positionForItem":[64],"checkRange":[64],"checkEnd":[64]},[[9,"resize","onResize"]]]]],["ion-datetime_3",[[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[33,"ion-datetime",{"name":[1],"disabled":[4],"readonly":[4],"min":[1025],"max":[1025],"displayFormat":[1,"display-format"],"displayTimezone":[1,"display-timezone"],"pickerFormat":[1,"picker-format"],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"monthNames":[1,"month-names"],"monthShortNames":[1,"month-short-names"],"dayNames":[1,"day-names"],"dayShortNames":[1,"day-short-names"],"pickerOptions":[16],"placeholder":[1],"value":[1025],"isExpanded":[32],"open":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ariaLabel":[1537,"aria-label"],"ariaHidden":[513,"aria-hidden"],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[33,"ion-note",{"color":[513]}],[1,"ion-skeleton-text",{"animated":[4]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"href":[1],"rel":[1],"lines":[1],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"multipleInputs":[32],"focusable":[32]},[[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}]]]]'),N))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:Yn,jmp:dt=>w.runOutsideAngular(dt),ael(dt,jt,fn,lr){dt[pe](jt,fn,lr)},rel(dt,jt,fn,lr){dt.removeEventListener(jt,fn,lr)}}))}};var la;let Ai=la=class{static forRoot(N){return{ngModule:la,providers:[{provide:G,useValue:N},{provide:v.ip1,useFactory:Ds,multi:!0,deps:[G,Tt.K0,v.R0b]}]}}};Ai.\u0275fac=function(N){return new(N||Ai)},Ai.\u0275mod=v.oAB({type:Ai}),Ai.\u0275inj=v.cJS({providers:[qe,Ks,so],imports:[[Tt.ez]]})},7235:(cn,rt,F)=>{"use strict";F.d(rt,{c:()=>lt});var E=F(1567);let O;const L=Ee=>Ee.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ue=Ee=>{if(void 0===O){const Re=void 0!==Ee.style.webkitAnimationName;O=void 0===Ee.style.animationName&&Re?"-webkit-":""}return O},ee=(Ee,Ke,Re)=>{const Ge=Ke.startsWith("animation")?ue(Ee):"";Ee.style.setProperty(Ge+Ke,Re)},Ie=(Ee,Ke)=>{const Re=Ke.startsWith("animation")?ue(Ee):"";Ee.style.removeProperty(Re+Ke)},ae=[],Te=(Ee=[],Ke)=>{if(void 0!==Ke){const Re=Array.isArray(Ke)?Ke:[Ke];return[...Ee,...Re]}return Ee},lt=Ee=>{let Ke,Re,Ge,Fe,Oe,st,Tt,Nt,Dt,tt,je,Vt,Bt,It=[],en=[],v=[],Le=!1,ft={},St=[],pt=[],xt={},kt=0,xn=!1,vn=!1,ct=!0,Mt=!1,Gt=!0;const wn=Ee,Hn=[],On=[],Tn=[],Wn=[],Rr=[],Sr=[],Ht=[],Gn=[],Jn=[],En=[],er="function"==typeof AnimationEffect||"function"==typeof window.AnimationEffect,or="function"==typeof Element&&"function"==typeof Element.prototype.animate&&er,hi=(W,ce)=>((ce&&ce.oneTimeCallback?On:Hn).push({c:W,o:ce}),Bt),In=()=>{if(or)En.forEach(W=>{W.cancel()}),En.length=0;else{const W=Tn.slice();(0,E.r)(()=>{W.forEach(ce=>{Ie(ce,"animation-name"),Ie(ce,"animation-duration"),Ie(ce,"animation-timing-function"),Ie(ce,"animation-iteration-count"),Ie(ce,"animation-delay"),Ie(ce,"animation-play-state"),Ie(ce,"animation-fill-mode"),Ie(ce,"animation-direction")})})}},Ft=()=>{Rr.forEach(W=>{W&&W.parentNode&&W.parentNode.removeChild(W)}),Rr.length=0},wt=()=>void 0!==Oe?Oe:Tt?Tt.getFill():"both",Qt=()=>void 0!==Dt?Dt:void 0!==st?st:Tt?Tt.getDirection():"normal",$t=()=>xn?"linear":void 0!==Ge?Ge:Tt?Tt.getEasing():"linear",Wt=()=>vn?0:void 0!==tt?tt:void 0!==Re?Re:Tt?Tt.getDuration():0,Be=()=>void 0!==Fe?Fe:Tt?Tt.getIterations():1,$e=()=>void 0!==je?je:void 0!==Ke?Ke:Tt?Tt.getDelay():0,nn=()=>{0!==kt&&(kt--,0===kt&&((()=>{Zr(),Gn.forEach(ze=>ze()),Jn.forEach(ze=>ze());const W=ct?1:0,ce=St,Ce=pt,Ze=xt;Tn.forEach(ze=>{const gt=ze.classList;ce.forEach(bt=>gt.add(bt)),Ce.forEach(bt=>gt.remove(bt));for(const bt in Ze)Ze.hasOwnProperty(bt)&&ee(ze,bt,Ze[bt])}),Hn.forEach(ze=>ze.c(W,Bt)),On.forEach(ze=>ze.c(W,Bt)),On.length=0,Gt=!0,ct&&(Mt=!0),ct=!0})(),Tt&&Tt.animationFinish()))},Fn=(W=!0)=>{(()=>{Sr.forEach(Ze=>Ze()),Ht.forEach(Ze=>Ze());const W=en,ce=v,Ce=ft;Tn.forEach(Ze=>{const ze=Ze.classList;W.forEach(gt=>ze.add(gt)),ce.forEach(gt=>ze.remove(gt));for(const gt in Ce)Ce.hasOwnProperty(gt)&&ee(Ze,gt,Ce[gt])})})(),It.length>0&&(or?(Tn.forEach(W=>{const ce=W.animate(It,{id:wn,delay:$e(),duration:Wt(),easing:$t(),iterations:Be(),fill:wt(),direction:Qt()});ce.pause(),En.push(ce)}),En.length>0&&(En[0].onfinish=()=>{nn()})):((W=!0)=>{Ft();const ce=(Ee=>(Ee.forEach(Ke=>{for(const Re in Ke)if(Ke.hasOwnProperty(Re)){const Ge=Ke[Re];if("easing"===Re)Ke["animation-timing-function"]=Ge,delete Ke[Re];else{const Fe=L(Re);Fe!==Re&&(Ke[Fe]=Ge,delete Ke[Re])}}}),Ee))(It);Tn.forEach(Ce=>{if(ce.length>0){const Ze=((Ee=[])=>Ee.map(Ke=>{const Re=Ke.offset,Ge=[];for(const Fe in Ke)Ke.hasOwnProperty(Fe)&&"offset"!==Fe&&Ge.push(`${Fe}: ${Ke[Fe]};`);return`${100*Re}% { ${Ge.join(" ")} }`}).join(" "))(ce);Vt=void 0!==Ee?Ee:(Ee=>{let Ke=ae.indexOf(Ee);return Ke<0&&(Ke=ae.push(Ee)-1),`ion-animation-${Ke}`})(Ze);const ze=((Ee,Ke,Re)=>{const Ge=(Ee=>{const Ke=Ee.getRootNode();return Ke.head||Ke})(Re),Fe=ue(Re),Oe=Ge.querySelector("#"+Ee);if(Oe)return Oe;const st=(Re.ownerDocument||document).createElement("style");return st.id=Ee,st.textContent=`@${Fe}keyframes ${Ee} { ${Ke} } @${Fe}keyframes ${Ee}-alt { ${Ke} }`,Ge.appendChild(st),st})(Vt,Ze,Ce);Rr.push(ze),ee(Ce,"animation-duration",`${Wt()}ms`),ee(Ce,"animation-timing-function",$t()),ee(Ce,"animation-delay",`${$e()}ms`),ee(Ce,"animation-fill-mode",wt()),ee(Ce,"animation-direction",Qt());const gt=Be()===1/0?"infinite":Be().toString();ee(Ce,"animation-iteration-count",gt),ee(Ce,"animation-play-state","paused"),W&&ee(Ce,"animation-name",`${ze.id}-alt`),(0,E.r)(()=>{ee(Ce,"animation-name",ze.id||null)})}})})(W)),Le=!0},dn=W=>{if(W=Math.min(Math.max(W,0),.9999),or)En.forEach(ce=>{ce.currentTime=ce.effect.getComputedTiming().delay+Wt()*W,ce.pause()});else{const ce=`-${Wt()*W}ms`;Tn.forEach(Ce=>{It.length>0&&(ee(Ce,"animation-delay",ce),ee(Ce,"animation-play-state","paused"))})}},Ur=W=>{En.forEach(ce=>{ce.effect.updateTiming({delay:$e(),duration:Wt(),easing:$t(),iterations:Be(),fill:wt(),direction:Qt()})}),void 0!==W&&dn(W)},wr=(W=!0,ce)=>{(0,E.r)(()=>{Tn.forEach(Ce=>{ee(Ce,"animation-name",Vt||null),ee(Ce,"animation-duration",`${Wt()}ms`),ee(Ce,"animation-timing-function",$t()),ee(Ce,"animation-delay",void 0!==ce?`-${ce*Wt()}ms`:`${$e()}ms`),ee(Ce,"animation-fill-mode",wt()||null),ee(Ce,"animation-direction",Qt()||null);const Ze=Be()===1/0?"infinite":Be().toString();ee(Ce,"animation-iteration-count",Ze),W&&ee(Ce,"animation-name",`${Vt}-alt`),(0,E.r)(()=>{ee(Ce,"animation-name",Vt||null)})})})},jr=(W=!1,ce=!0,Ce)=>(W&&Wn.forEach(Ze=>{Ze.update(W,ce,Ce)}),or?Ur(Ce):wr(ce,Ce),Bt),Qn=()=>{Le&&(or?En.forEach(W=>{W.pause()}):Tn.forEach(W=>{ee(W,"animation-play-state","paused")}))},gi=()=>{Nt=void 0,nn()},Zr=()=>{Nt&&clearTimeout(Nt)},ar=W=>new Promise(ce=>{W&&W.sync&&(vn=!0,hi(()=>vn=!1,{oneTimeCallback:!0})),Le||Fn(),Mt&&(or?(dn(0),Ur()):wr(),Mt=!1),Gt&&(kt=Wn.length+1,Gt=!1),hi(()=>ce(),{oneTimeCallback:!0}),Wn.forEach(Ce=>{Ce.play()}),or?(En.forEach(W=>{W.play()}),(0===It.length||0===Tn.length)&&nn()):(()=>{if(Zr(),(0,E.r)(()=>{Tn.forEach(W=>{It.length>0&&ee(W,"animation-play-state","running")})}),0===It.length||0===Tn.length)nn();else{const W=$e()||0,ce=Wt()||0,Ce=Be()||1;isFinite(Ce)&&(Nt=setTimeout(gi,W+ce*Ce+100)),((Ee,Ke)=>{let Re;const Ge={passive:!0},Oe=st=>{Ee===st.target&&(Re&&Re(),Zr(),(0,E.r)(()=>{Tn.forEach(W=>{Ie(W,"animation-duration"),Ie(W,"animation-delay"),Ie(W,"animation-play-state")}),(0,E.r)(nn)}))};Ee&&(Ee.addEventListener("webkitAnimationEnd",Oe,Ge),Ee.addEventListener("animationend",Oe,Ge),Re=()=>{Ee.removeEventListener("webkitAnimationEnd",Oe,Ge),Ee.removeEventListener("animationend",Oe,Ge)})})(Tn[0])}})()}),mr=(W,ce)=>{const Ce=It[0];return void 0===Ce||void 0!==Ce.offset&&0!==Ce.offset?It=[{offset:0,[W]:ce},...It]:Ce[W]=ce,Bt};return Bt={parentAnimation:Tt,elements:Tn,childAnimations:Wn,id:wn,animationFinish:nn,from:mr,to:(W,ce)=>{const Ce=It[It.length-1];return void 0===Ce||void 0!==Ce.offset&&1!==Ce.offset?It=[...It,{offset:1,[W]:ce}]:Ce[W]=ce,Bt},fromTo:(W,ce,Ce)=>mr(W,ce).to(W,Ce),parent:W=>(Tt=W,Bt),play:ar,pause:()=>(Wn.forEach(W=>{W.pause()}),Qn(),Bt),stop:()=>{Wn.forEach(W=>{W.stop()}),Le&&(In(),Le=!1),xn=!1,vn=!1,Gt=!0,Dt=void 0,tt=void 0,je=void 0,kt=0,Mt=!1,ct=!0},destroy:W=>(Wn.forEach(ce=>{ce.destroy(W)}),(W=>{In(),W&&Ft()})(W),Tn.length=0,Wn.length=0,It.length=0,Hn.length=0,On.length=0,Le=!1,Gt=!0,Bt),keyframes:W=>(It=W,Bt),addAnimation:W=>{if(null!=W)if(Array.isArray(W))for(const ce of W)ce.parent(Bt),Wn.push(ce);else W.parent(Bt),Wn.push(W);return Bt},addElement:W=>{if(null!=W)if(1===W.nodeType)Tn.push(W);else if(W.length>=0)for(let ce=0;ce<W.length;ce++)Tn.push(W[ce]);else console.error("Invalid addElement value");return Bt},update:jr,fill:W=>(Oe=W,jr(!0),Bt),direction:W=>(st=W,jr(!0),Bt),iterations:W=>(Fe=W,jr(!0),Bt),duration:W=>(!or&&0===W&&(W=1),Re=W,jr(!0),Bt),easing:W=>(Ge=W,jr(!0),Bt),delay:W=>(Ke=W,jr(!0),Bt),getWebAnimations:()=>En,getKeyframes:()=>It,getFill:wt,getDirection:Qt,getDelay:$e,getIterations:Be,getEasing:$t,getDuration:Wt,afterAddRead:W=>(Gn.push(W),Bt),afterAddWrite:W=>(Jn.push(W),Bt),afterClearStyles:(W=[])=>{for(const ce of W)xt[ce]="";return Bt},afterStyles:(W={})=>(xt=W,Bt),afterRemoveClass:W=>(pt=Te(pt,W),Bt),afterAddClass:W=>(St=Te(St,W),Bt),beforeAddRead:W=>(Sr.push(W),Bt),beforeAddWrite:W=>(Ht.push(W),Bt),beforeClearStyles:(W=[])=>{for(const ce of W)ft[ce]="";return Bt},beforeStyles:(W={})=>(ft=W,Bt),beforeRemoveClass:W=>(v=Te(v,W),Bt),beforeAddClass:W=>(en=Te(en,W),Bt),onFinish:hi,progressStart:(W=!1,ce)=>(Wn.forEach(Ce=>{Ce.progressStart(W,ce)}),Qn(),xn=W,Le?jr(!1,!0,ce):Fn(),Bt),progressStep:W=>(Wn.forEach(ce=>{ce.progressStep(W)}),dn(W),Bt),progressEnd:(W,ce,Ce)=>(xn=!1,Wn.forEach(Ze=>{Ze.progressEnd(W,ce,Ce)}),void 0!==Ce&&(tt=Ce),Mt=!1,ct=!0,0===W?(Dt="reverse"===Qt()?"normal":"reverse","reverse"===Dt&&(ct=!1),or?(jr(),dn(1-ce)):(je=(1-ce)*Wt()*-1,jr(!1,!1))):1===W&&(or?(jr(),dn(ce)):(je=ce*Wt()*-1,jr(!1,!1))),void 0!==W&&(hi(()=>{tt=void 0,Dt=void 0,je=void 0},{oneTimeCallback:!0}),Tt||ar()),Bt)}}},7807:(cn,rt,F)=>{"use strict";F.d(rt,{g:()=>E});const E=(ee,Ie,oe,Se,ae)=>ie(ee[1],Ie[1],oe[1],Se[1],ae).map(ve=>O(ee[0],Ie[0],oe[0],Se[0],ve)),O=(ee,Ie,oe,Se,ae)=>ae*(3*Ie*Math.pow(ae-1,2)+ae*(-3*oe*ae+3*oe+Se*ae))-ee*Math.pow(ae-1,3),ie=(ee,Ie,oe,Se,ae)=>ue((Se-=ae)-3*(oe-=ae)+3*(Ie-=ae)-(ee-=ae),3*oe-6*Ie+3*ee,3*Ie-3*ee,ee).filter(we=>we>=0&&we<=1),ue=(ee,Ie,oe,Se)=>{if(0===ee)return((ee,Ie,oe)=>{const Se=Ie*Ie-4*ee*oe;return Se<0?[]:[(-Ie+Math.sqrt(Se))/(2*ee),(-Ie-Math.sqrt(Se))/(2*ee)]})(Ie,oe,Se);const ae=(3*(oe/=ee)-(Ie/=ee)*Ie)/3,ve=(2*Ie*Ie*Ie-9*Ie*oe+27*(Se/=ee))/27;if(0===ae)return[Math.pow(-ve,1/3)];if(0===ve)return[Math.sqrt(-ae),-Math.sqrt(-ae)];const we=Math.pow(ve/2,2)+Math.pow(ae/3,3);if(0===we)return[Math.pow(ve/2,.5)-Ie/3];if(we>0)return[Math.pow(-ve/2+Math.sqrt(we),1/3)-Math.pow(ve/2+Math.sqrt(we),1/3)-Ie/3];const _e=Math.sqrt(Math.pow(-ae/3,3)),Te=Math.acos(-ve/(2*Math.sqrt(Math.pow(-ae/3,3)))),lt=2*Math.pow(_e,1/3);return[lt*Math.cos(Te/3)-Ie/3,lt*Math.cos((Te+2*Math.PI)/3)-Ie/3,lt*Math.cos((Te+4*Math.PI)/3)-Ie/3]}},960:(cn,rt,F)=>{"use strict";F.d(rt,{G:()=>ue});class O{constructor(Ie,oe,Se,ae,ve){this.id=oe,this.name=Se,this.disableScroll=ve,this.priority=1e6*ae+oe,this.ctrl=Ie}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const Ie=this.ctrl.capture(this.name,this.id,this.priority);return Ie&&this.disableScroll&&this.ctrl.disableScroll(this.id),Ie}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class ie{constructor(Ie,oe,Se,ae){this.id=oe,this.disable=Se,this.disableScroll=ae,this.ctrl=Ie}block(){if(this.ctrl){if(this.disable)for(const Ie of this.disable)this.ctrl.disableGesture(Ie,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const Ie of this.disable)this.ctrl.enableGesture(Ie,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const L="backdrop-no-scroll",ue=new class{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(Ie){return new O(this,this.newID(),Ie.name,Ie.priority||0,!!Ie.disableScroll)}createBlocker(Ie={}){return new ie(this,this.newID(),Ie.disable,!!Ie.disableScroll)}start(Ie,oe,Se){return this.canStart(Ie)?(this.requestedStart.set(oe,Se),!0):(this.requestedStart.delete(oe),!1)}capture(Ie,oe,Se){if(!this.start(Ie,oe,Se))return!1;const ae=this.requestedStart;let ve=-1e4;if(ae.forEach(we=>{ve=Math.max(ve,we)}),ve===Se){this.capturedId=oe,ae.clear();const we=new CustomEvent("ionGestureCaptured",{detail:{gestureName:Ie}});return document.dispatchEvent(we),!0}return ae.delete(oe),!1}release(Ie){this.requestedStart.delete(Ie),this.capturedId===Ie&&(this.capturedId=void 0)}disableGesture(Ie,oe){let Se=this.disabledGestures.get(Ie);void 0===Se&&(Se=new Set,this.disabledGestures.set(Ie,Se)),Se.add(oe)}enableGesture(Ie,oe){const Se=this.disabledGestures.get(Ie);void 0!==Se&&Se.delete(oe)}disableScroll(Ie){this.disabledScroll.add(Ie),1===this.disabledScroll.size&&document.body.classList.add(L)}enableScroll(Ie){this.disabledScroll.delete(Ie),0===this.disabledScroll.size&&document.body.classList.remove(L)}canStart(Ie){return!(void 0!==this.capturedId||this.isDisabled(Ie))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(Ie){const oe=this.disabledGestures.get(Ie);return!!(oe&&oe.size>0)}newID(){return this.gestureId++,this.gestureId}}},3087:(cn,rt,F)=>{"use strict";F.r(rt),F.d(rt,{MENU_BACK_BUTTON_PRIORITY:()=>ue,OVERLAY_BACK_BUTTON_PRIORITY:()=>L,blockHardwareBackButton:()=>O,startHardwareBackButton:()=>ie});var E=F(8239);const O=()=>{document.addEventListener("backbutton",()=>{})},ie=()=>{const ee=document;let Ie=!1;ee.addEventListener("backbutton",()=>{if(Ie)return;let oe=0,Se=[];const ae=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(_e,Te){Se.push({priority:_e,handler:Te,id:oe++})}}});ee.dispatchEvent(ae);const ve=function(){var _e=(0,E.Z)(function*(Te){try{if(Te&&Te.handler){const lt=Te.handler(we);null!=lt&&(yield lt)}}catch(lt){console.error(lt)}});return function(lt){return _e.apply(this,arguments)}}(),we=()=>{if(Se.length>0){let _e={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};Se.forEach(Te=>{Te.priority>=_e.priority&&(_e=Te)}),Ie=!0,Se=Se.filter(Te=>Te.id!==_e.id),ve(_e).then(()=>Ie=!1)}};we()})},L=100,ue=99},1567:(cn,rt,F)=>{"use strict";F.d(rt,{a:()=>ue,b:()=>ee,c:()=>E,d:()=>ve,e:()=>we,f:()=>Re,g:()=>Ie,h:()=>O,i:()=>L,j:()=>ae,k:()=>_e,l:()=>Se,m:()=>Te,n:()=>Ke,o:()=>Ge,p:()=>Ee,q:()=>lt,r:()=>oe});const E=(Fe,Oe)=>{Fe.componentOnReady?Fe.componentOnReady().then(st=>Oe(st)):oe(()=>Oe(Fe))},O=(Fe,Oe=[])=>{const st={};return Oe.forEach(It=>{Fe.hasAttribute(It)&&(null!==Fe.getAttribute(It)&&(st[It]=Fe.getAttribute(It)),Fe.removeAttribute(It))}),st},ie=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],L=Fe=>O(Fe,ie),ue=(Fe,Oe,st,It)=>{if("undefined"!=typeof window){const en=window,v=en&&en.Ionic&&en.Ionic.config;if(v){const Le=v.get("_ael");if(Le)return Le(Fe,Oe,st,It);if(v._ael)return v._ael(Fe,Oe,st,It)}}return Fe.addEventListener(Oe,st,It)},ee=(Fe,Oe,st,It)=>{if("undefined"!=typeof window){const en=window,v=en&&en.Ionic&&en.Ionic.config;if(v){const Le=v.get("_rel");if(Le)return Le(Fe,Oe,st,It);if(v._rel)return v._rel(Fe,Oe,st,It)}}return Fe.removeEventListener(Oe,st,It)},Ie=(Fe,Oe=Fe)=>Fe.shadowRoot||Oe,oe=Fe=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Fe):"function"==typeof requestAnimationFrame?requestAnimationFrame(Fe):setTimeout(Fe),Se=Fe=>!!Fe.shadowRoot&&!!Fe.attachShadow,ae=Fe=>{const Oe=Fe.closest("ion-item");return Oe?Oe.querySelector("ion-label"):null},ve=(Fe,Oe)=>{let st;const It=Fe.getAttribute("aria-labelledby"),en=Fe.id;let v=null!==It&&""!==It.trim()?It:Oe+"-lbl",Le=null!==It&&""!==It.trim()?document.getElementById(It):ae(Fe);return Le?(null===It&&(Le.id=v),st=Le.textContent,Le.setAttribute("aria-hidden","true")):""!==en.trim()&&(Le=document.querySelector(`label[for="${en}"]`),Le&&(""!==Le.id?v=Le.id:Le.id=v=`${en}-lbl`,st=Le.textContent)),{label:Le,labelId:v,labelText:st}},we=(Fe,Oe,st,It,en)=>{if(Fe||Se(Oe)){let v=Oe.querySelector("input.aux-input");v||(v=Oe.ownerDocument.createElement("input"),v.type="hidden",v.classList.add("aux-input"),Oe.appendChild(v)),v.disabled=en,v.name=st,v.value=It||""}},_e=(Fe,Oe,st)=>Math.max(Fe,Math.min(Oe,st)),Te=(Fe,Oe)=>{if(!Fe){const st="ASSERT: "+Oe;throw console.error(st),new Error(st)}},lt=Fe=>Fe.timeStamp||Date.now(),Ee=Fe=>{if(Fe){const Oe=Fe.changedTouches;if(Oe&&Oe.length>0){const st=Oe[0];return{x:st.clientX,y:st.clientY}}if(void 0!==Fe.pageX)return{x:Fe.pageX,y:Fe.pageY}}return{x:0,y:0}},Ke=Fe=>{const Oe="rtl"===document.dir;switch(Fe){case"start":return Oe;case"end":return!Oe;default:throw new Error(`"${Fe}" is not a valid value for [side]. Use "start" or "end" instead.`)}},Re=(Fe,Oe)=>{const st=Fe._original||Fe;return{_original:Fe,emit:Ge(st.emit.bind(st),Oe)}},Ge=(Fe,Oe=0)=>{let st;return(...It)=>{clearTimeout(st),st=setTimeout(Fe,Oe,...It)}}},6951:(cn,rt,F)=>{"use strict";F.d(rt,{m:()=>ve});var E=F(8239),O=F(3087),ie=F(1567),L=F(7585),ue=F(7235);const ee=we=>(0,ue.c)().duration(we?400:300),Ie=we=>{let _e,Te;const lt=we.width+8,Ee=(0,ue.c)(),Ke=(0,ue.c)();we.isEndSide?(_e=lt+"px",Te="0px"):(_e=-lt+"px",Te="0px"),Ee.addElement(we.menuInnerEl).fromTo("transform",`translateX(${_e})`,`translateX(${Te})`);const Ge="ios"===(0,L.b)(we),Fe=Ge?.2:.25;return Ke.addElement(we.backdropEl).fromTo("opacity",.01,Fe),ee(Ge).addAnimation([Ee,Ke])},oe=we=>{let _e,Te;const lt=(0,L.b)(we),Ee=we.width;we.isEndSide?(_e=-Ee+"px",Te=Ee+"px"):(_e=Ee+"px",Te=-Ee+"px");const Ke=(0,ue.c)().addElement(we.menuInnerEl).fromTo("transform",`translateX(${Te})`,"translateX(0px)"),Re=(0,ue.c)().addElement(we.contentEl).fromTo("transform","translateX(0px)",`translateX(${_e})`),Ge=(0,ue.c)().addElement(we.backdropEl).fromTo("opacity",.01,.32);return ee("ios"===lt).addAnimation([Ke,Re,Ge])},Se=we=>{const _e=(0,L.b)(we),Te=we.width*(we.isEndSide?-1:1)+"px",lt=(0,ue.c)().addElement(we.contentEl).fromTo("transform","translateX(0px)",`translateX(${Te})`);return ee("ios"===_e).addAnimation(lt)},ve=(()=>{const we=new Map,_e=[],Te=function(){var Dt=(0,E.Z)(function*(tt){const je=yield Oe(tt);return!!je&&je.open()});return function(je){return Dt.apply(this,arguments)}}(),lt=function(){var Dt=(0,E.Z)(function*(tt){const je=yield void 0!==tt?Oe(tt):st();return void 0!==je&&je.close()});return function(je){return Dt.apply(this,arguments)}}(),Ee=function(){var Dt=(0,E.Z)(function*(tt){const je=yield Oe(tt);return!!je&&je.toggle()});return function(je){return Dt.apply(this,arguments)}}(),Ke=function(){var Dt=(0,E.Z)(function*(tt,je){const ct=yield Oe(je);return ct&&(ct.disabled=!tt),ct});return function(je,ct){return Dt.apply(this,arguments)}}(),Re=function(){var Dt=(0,E.Z)(function*(tt,je){const ct=yield Oe(je);return ct&&(ct.swipeGesture=tt),ct});return function(je,ct){return Dt.apply(this,arguments)}}(),Ge=function(){var Dt=(0,E.Z)(function*(tt){if(null!=tt){const je=yield Oe(tt);return void 0!==je&&je.isOpen()}return void 0!==(yield st())});return function(je){return Dt.apply(this,arguments)}}(),Fe=function(){var Dt=(0,E.Z)(function*(tt){const je=yield Oe(tt);return!!je&&!je.disabled});return function(je){return Dt.apply(this,arguments)}}(),Oe=function(){var Dt=(0,E.Z)(function*(tt){return yield Nt(),"start"===tt||"end"===tt?vn(Mt=>Mt.side===tt&&!Mt.disabled)||vn(Mt=>Mt.side===tt):null!=tt?vn(ct=>ct.menuId===tt):vn(ct=>!ct.disabled)||(_e.length>0?_e[0].el:void 0)});return function(je){return Dt.apply(this,arguments)}}(),st=function(){var Dt=(0,E.Z)(function*(){return yield Nt(),xt()});return function(){return Dt.apply(this,arguments)}}(),It=function(){var Dt=(0,E.Z)(function*(){return yield Nt(),kt()});return function(){return Dt.apply(this,arguments)}}(),en=function(){var Dt=(0,E.Z)(function*(){return yield Nt(),xn()});return function(){return Dt.apply(this,arguments)}}(),v=(Dt,tt)=>{we.set(Dt,tt)},ft=Dt=>{const tt=Dt.side;_e.filter(je=>je.side===tt&&je!==Dt).forEach(je=>je.disabled=!0)},St=function(){var Dt=(0,E.Z)(function*(tt,je,ct){if(xn())return!1;if(je){const Mt=yield st();Mt&&tt.el!==Mt&&(yield Mt.setOpen(!1,!1))}return tt._setOpen(je,ct)});return function(je,ct,Mt){return Dt.apply(this,arguments)}}(),xt=()=>vn(Dt=>Dt._isOpen),kt=()=>_e.map(Dt=>Dt.el),xn=()=>_e.some(Dt=>Dt.isAnimating),vn=Dt=>{const tt=_e.find(Dt);if(void 0!==tt)return tt.el},Nt=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(Dt=>new Promise(tt=>(0,ie.c)(Dt,tt))));return v("reveal",Se),v("push",oe),v("overlay",Ie),"undefined"!=typeof document&&document.addEventListener("ionBackButton",Dt=>{const tt=xt();tt&&Dt.detail.register(O.MENU_BACK_BUTTON_PRIORITY,()=>tt.close())}),{registerAnimation:v,get:Oe,getMenus:It,getOpen:st,isEnabled:Fe,swipeGesture:Re,isAnimating:en,isOpen:Ge,enable:Ke,toggle:Ee,close:lt,open:Te,_getOpenSync:xt,_createAnimation:(Dt,tt)=>{const je=we.get(Dt);if(!je)throw new Error("animation not registered");return je(tt)},_register:Dt=>{_e.indexOf(Dt)<0&&(Dt.disabled||ft(Dt),_e.push(Dt))},_unregister:Dt=>{const tt=_e.indexOf(Dt);tt>-1&&_e.splice(tt,1)},_setOpen:St,_setActiveMenu:ft}})()},9461:(cn,rt,F)=>{"use strict";F.r(rt),F.d(rt,{GESTURE_CONTROLLER:()=>E.G,createGesture:()=>Se});var E=F(960);const O=(_e,Te,lt,Ee)=>{const Ke=ie(_e)?{capture:!!Ee.capture,passive:!!Ee.passive}:!!Ee.capture;let Re,Ge;return _e.__zone_symbol__addEventListener?(Re="__zone_symbol__addEventListener",Ge="__zone_symbol__removeEventListener"):(Re="addEventListener",Ge="removeEventListener"),_e[Re](Te,lt,Ke),()=>{_e[Ge](Te,lt,Ke)}},ie=_e=>{if(void 0===L)try{const Te=Object.defineProperty({},"passive",{get:()=>{L=!0}});_e.addEventListener("optsTest",()=>{},Te)}catch(Te){L=!1}return!!L};let L;const Ie=_e=>_e instanceof Document?_e:_e.ownerDocument,Se=_e=>{let Te=!1,lt=!1,Ee=!0,Ke=!1;const Re=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},_e),Ge=Re.canStart,Fe=Re.onWillStart,Oe=Re.onStart,st=Re.onEnd,It=Re.notCaptured,en=Re.onMove,v=Re.threshold,Le=Re.passive,Tt=Re.blurOnStart,ft={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},St=((_e,Te,lt)=>{const Ee=lt*(Math.PI/180),Ke="x"===_e,Re=Math.cos(Ee),Ge=Te*Te;let Fe=0,Oe=0,st=!1,It=0;return{start(en,v){Fe=en,Oe=v,It=0,st=!0},detect(en,v){if(!st)return!1;const Le=en-Fe,Tt=v-Oe,ft=Le*Le+Tt*Tt;if(ft<Ge)return!1;const St=Math.sqrt(ft),pt=(Ke?Le:Tt)/St;return It=pt>Re?1:pt<-Re?-1:0,st=!1,!0},isGesture:()=>0!==It,getDirection:()=>It}})(Re.direction,Re.threshold,Re.maxAngle),pt=E.G.createGesture({name:_e.gestureName,priority:_e.gesturePriority,disableScroll:_e.disableScroll}),xn=()=>{!Te||(Ke=!1,en&&en(ft))},vn=()=>!(pt&&!pt.capture()||(Te=!0,Ee=!1,ft.startX=ft.currentX,ft.startY=ft.currentY,ft.startTime=ft.currentTime,Fe?Fe(ft).then(Dt):Dt(),0)),Dt=()=>{Tt&&(()=>{if("undefined"!=typeof document){const Gt=document.activeElement;null!==Gt&&Gt.blur&&Gt.blur()}})(),Oe&&Oe(ft),Ee=!0},tt=()=>{Te=!1,lt=!1,Ke=!1,Ee=!0,pt.release()},je=Gt=>{const Vt=Te,Bt=Ee;if(tt(),Bt){if(ae(ft,Gt),Vt)return void(st&&st(ft));It&&It(ft)}},ct=((_e,Te,lt,Ee,Ke)=>{let Re,Ge,Fe,Oe,st,It,en,v=0;const Le=Nt=>{v=Date.now()+2e3,Te(Nt)&&(!Ge&&lt&&(Ge=O(_e,"touchmove",lt,Ke)),Fe||(Fe=O(Nt.target,"touchend",ft,Ke)),Oe||(Oe=O(Nt.target,"touchcancel",ft,Ke)))},Tt=Nt=>{v>Date.now()||!Te(Nt)||(!It&&lt&&(It=O(Ie(_e),"mousemove",lt,Ke)),en||(en=O(Ie(_e),"mouseup",St,Ke)))},ft=Nt=>{pt(),Ee&&Ee(Nt)},St=Nt=>{xt(),Ee&&Ee(Nt)},pt=()=>{Ge&&Ge(),Fe&&Fe(),Oe&&Oe(),Ge=Fe=Oe=void 0},xt=()=>{It&&It(),en&&en(),It=en=void 0},kt=()=>{pt(),xt()},xn=(Nt=!0)=>{Nt?(Re||(Re=O(_e,"touchstart",Le,Ke)),st||(st=O(_e,"mousedown",Tt,Ke))):(Re&&Re(),st&&st(),Re=st=void 0,kt())};return{enable:xn,stop:kt,destroy:()=>{xn(!1),Ee=lt=Te=void 0}}})(Re.el,Gt=>{const Vt=we(Gt);return!(lt||!Ee||(ve(Gt,ft),ft.startX=ft.currentX,ft.startY=ft.currentY,ft.startTime=ft.currentTime=Vt,ft.velocityX=ft.velocityY=ft.deltaX=ft.deltaY=0,ft.event=Gt,Ge&&!1===Ge(ft))||(pt.release(),!pt.start()))&&(lt=!0,0===v?vn():(St.start(ft.startX,ft.startY),!0))},Gt=>{Te?!Ke&&Ee&&(Ke=!0,ae(ft,Gt),requestAnimationFrame(xn)):(ae(ft,Gt),St.detect(ft.currentX,ft.currentY)&&(!St.isGesture()||!vn())&&Mt())},je,{capture:!1,passive:Le}),Mt=()=>{tt(),ct.stop(),It&&It(ft)};return{enable(Gt=!0){Gt||(Te&&je(void 0),tt()),ct.enable(Gt)},destroy(){pt.destroy(),ct.destroy()}}},ae=(_e,Te)=>{if(!Te)return;const lt=_e.currentX,Ee=_e.currentY,Ke=_e.currentTime;ve(Te,_e);const Re=_e.currentX,Ge=_e.currentY,Oe=(_e.currentTime=we(Te))-Ke;if(Oe>0&&Oe<100){const It=(Ge-Ee)/Oe;_e.velocityX=(Re-lt)/Oe*.7+.3*_e.velocityX,_e.velocityY=.7*It+.3*_e.velocityY}_e.deltaX=Re-_e.startX,_e.deltaY=Ge-_e.startY,_e.event=Te},ve=(_e,Te)=>{let lt=0,Ee=0;if(_e){const Ke=_e.changedTouches;if(Ke&&Ke.length>0){const Re=Ke[0];lt=Re.clientX,Ee=Re.clientY}else void 0!==_e.pageX&&(lt=_e.pageX,Ee=_e.pageY)}Te.currentX=lt,Te.currentY=Ee},we=_e=>_e.timeStamp||Date.now()},3150:(cn,rt,F)=>{"use strict";F.d(rt,{B:()=>ht,C:()=>we,H:()=>Rr,a:()=>Ee,b:()=>Mn,c:()=>mr,e:()=>He,f:()=>Vn,g:()=>Gt,h:()=>Tn,i:()=>mt,j:()=>Be,k:()=>Fn,p:()=>Te,r:()=>wr,s:()=>Mt,w:()=>ve});var E=F(8239);let ie,L,ue,ee=!1,Ie=!1,oe=!1,Se=!1,ae=!1;const ve="undefined"!=typeof window?window:{},we=ve.CSS,_e=ve.document||{head:{}},Te={$flags$:0,$resourcesUrl$:"",jmp:$=>$(),raf:$=>requestAnimationFrame($),ael:($,W,ce,Ce)=>$.addEventListener(W,ce,Ce),rel:($,W,ce,Ce)=>$.removeEventListener(W,ce,Ce),ce:($,W)=>new CustomEvent($,W)},lt=(()=>(_e.head.attachShadow+"").indexOf("[native")>-1)(),Ee=$=>Promise.resolve($),Ke=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replace}catch($){}return!1})(),Re=($,W,ce,Ce)=>{ce&&ce.map(([Ze,ze,gt])=>{const bt=Fe($,Ze),At=Ge(W,gt),an=Oe(Ze);Te.ael(bt,ze,At,an),(W.$rmListeners$=W.$rmListeners$||[]).push(()=>Te.rel(bt,ze,At,an))})},Ge=($,W)=>ce=>{try{256&$.$flags$?$.$lazyInstance$[W](ce):($.$queuedListeners$=$.$queuedListeners$||[]).push([W,ce])}catch(Ce){Kr(Ce)}},Fe=($,W)=>4&W?_e:8&W?ve:16&W?_e.body:$,Oe=$=>0!=(2&$),Le="s-id",Tt="sty-id",pt="http://www.w3.org/1999/xlink",xn=new WeakMap,vn=($,W,ce)=>{let Ce=zr.get($);Ke&&ce?(Ce=Ce||new CSSStyleSheet,Ce.replace(W)):Ce=W,zr.set($,Ce)},Nt=($,W,ce,Ce)=>{let Ze=tt(W,ce),ze=zr.get(Ze);if($=11===$.nodeType?$:_e,ze)if("string"==typeof ze){let bt,gt=xn.get($=$.head||$);if(gt||xn.set($,gt=new Set),!gt.has(Ze)){if($.host&&(bt=$.querySelector(`[${Tt}="${Ze}"]`)))bt.innerHTML=ze;else{if(Te.$cssShim$){bt=Te.$cssShim$.createHostStyle(Ce,Ze,ze,!!(10&W.$flags$));const At=bt["s-sc"];At&&(Ze=At,gt=null)}else bt=_e.createElement("style"),bt.innerHTML=ze;$.insertBefore(bt,$.querySelector("link"))}gt&&gt.add(Ze)}}else $.adoptedStyleSheets.includes(ze)||($.adoptedStyleSheets=[...$.adoptedStyleSheets,ze]);return Ze},tt=($,W)=>"sc-"+(W&&32&$.$flags$?$.$tagName$+"-"+W:$.$tagName$),je=$=>$.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),Mt=$=>gi.push($),Gt=$=>Ur($).$modeName$,Vt={},On=$=>"object"==($=typeof $)||"function"===$,Tn=($,W,...ce)=>{let Ce=null,Ze=null,ze=null,gt=!1,bt=!1,At=[];const an=zn=>{for(let Xn=0;Xn<zn.length;Xn++)Ce=zn[Xn],Array.isArray(Ce)?an(Ce):null!=Ce&&"boolean"!=typeof Ce&&((gt="function"!=typeof $&&!On(Ce))&&(Ce=String(Ce)),gt&&bt?At[At.length-1].$text$+=Ce:At.push(gt?Wn(null,Ce):Ce),bt=gt)};if(an(ce),W){W.key&&(Ze=W.key),W.name&&(ze=W.name);{const zn=W.className||W.class;zn&&(W.class="object"!=typeof zn?zn:Object.keys(zn).filter(Xn=>zn[Xn]).join(" "))}}if("function"==typeof $)return $(null===W?{}:W,At,Ht);const Sn=Wn($,null);return Sn.$attrs$=W,At.length>0&&(Sn.$children$=At),Sn.$key$=Ze,Sn.$name$=ze,Sn},Wn=($,W)=>({$flags$:0,$tag$:$,$text$:W,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),Rr={},Ht={forEach:($,W)=>$.map(Gn).forEach(W),map:($,W)=>$.map(Gn).map(W).map(Jn)},Gn=$=>({vattrs:$.$attrs$,vchildren:$.$children$,vkey:$.$key$,vname:$.$name$,vtag:$.$tag$,vtext:$.$text$}),Jn=$=>{if("function"==typeof $.vtag){const ce=Object.assign({},$.vattrs);return $.vkey&&(ce.key=$.vkey),$.vname&&(ce.name=$.vname),Tn($.vtag,ce,...$.vchildren||[])}const W=Wn($.vtag,$.vtext);return W.$attrs$=$.vattrs,W.$children$=$.vchildren,W.$key$=$.vkey,W.$name$=$.vname,W},En=($,W,ce,Ce,Ze,ze)=>{if(ce!==Ce){let gt=Ir($,W),bt=W.toLowerCase();if("class"===W){const At=$.classList,an=or(ce),Sn=or(Ce);At.remove(...an.filter(zn=>zn&&!Sn.includes(zn))),At.add(...Sn.filter(zn=>zn&&!an.includes(zn)))}else if("style"===W){for(const At in ce)(!Ce||null==Ce[At])&&(At.includes("-")?$.style.removeProperty(At):$.style[At]="");for(const At in Ce)(!ce||Ce[At]!==ce[At])&&(At.includes("-")?$.style.setProperty(At,Ce[At]):$.style[At]=Ce[At])}else if("key"!==W)if("ref"===W)Ce&&Ce($);else if(gt||"o"!==W[0]||"n"!==W[1]){const At=On(Ce);if((gt||At&&null!==Ce)&&!Ze)try{if($.tagName.includes("-"))$[W]=Ce;else{let Sn=null==Ce?"":Ce;"list"===W?gt=!1:(null==ce||$[W]!=Sn)&&($[W]=Sn)}}catch(Sn){}let an=!1;bt!==(bt=bt.replace(/^xlink\:?/,""))&&(W=bt,an=!0),null==Ce||!1===Ce?(!1!==Ce||""===$.getAttribute(W))&&(an?$.removeAttributeNS(pt,W):$.removeAttribute(W)):(!gt||4&ze||Ze)&&!At&&(Ce=!0===Ce?"":Ce,an?$.setAttributeNS(pt,W,Ce):$.setAttribute(W,Ce))}else W="-"===W[2]?W.slice(3):Ir(ve,bt)?bt.slice(2):bt[2]+W.slice(3),ce&&Te.rel($,W,ce,!1),Ce&&Te.ael($,W,Ce,!1)}},er=/\s/,or=$=>$?$.split(er):[],sr=($,W,ce,Ce)=>{const Ze=11===W.$elm$.nodeType&&W.$elm$.host?W.$elm$.host:W.$elm$,ze=$&&$.$attrs$||Vt,gt=W.$attrs$||Vt;for(Ce in ze)Ce in gt||En(Ze,Ce,ze[Ce],void 0,ce,W.$flags$);for(Ce in gt)En(Ze,Ce,ze[Ce],gt[Ce],ce,W.$flags$)},pr=($,W,ce,Ce)=>{let gt,bt,At,Ze=W.$children$[ce],ze=0;if(ee||(oe=!0,"slot"===Ze.$tag$&&(ie&&Ce.classList.add(ie+"-s"),Ze.$flags$|=Ze.$children$?2:1)),null!==Ze.$text$)gt=Ze.$elm$=_e.createTextNode(Ze.$text$);else if(1&Ze.$flags$)gt=Ze.$elm$=_e.createTextNode("");else{if(Se||(Se="svg"===Ze.$tag$),gt=Ze.$elm$=_e.createElementNS(Se?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&Ze.$flags$?"slot-fb":Ze.$tag$),Se&&"foreignObject"===Ze.$tag$&&(Se=!1),sr(null,Ze,Se),($=>null!=$)(ie)&&gt["s-si"]!==ie&&gt.classList.add(gt["s-si"]=ie),Ze.$children$)for(ze=0;ze<Ze.$children$.length;++ze)bt=pr($,Ze,ze,gt),bt&&gt.appendChild(bt);"svg"===Ze.$tag$?Se=!1:"foreignObject"===gt.tagName&&(Se=!0)}return gt["s-hn"]=ue,3&Ze.$flags$&&(gt["s-sr"]=!0,gt["s-cr"]=L,gt["s-sn"]=Ze.$name$||"",At=$&&$.$children$&&$.$children$[ce],At&&At.$tag$===Ze.$tag$&&$.$elm$&&Lr($.$elm$,!1)),gt},Lr=($,W)=>{Te.$flags$|=1;const ce=$.childNodes;for(let Ce=ce.length-1;Ce>=0;Ce--){const Ze=ce[Ce];Ze["s-hn"]!==ue&&Ze["s-ol"]&&(Ft(Ze).insertBefore(Ze,In(Ze)),Ze["s-ol"].remove(),Ze["s-ol"]=void 0,oe=!0),W&&Lr(Ze,W)}Te.$flags$&=-2},Nr=($,W,ce,Ce,Ze,ze)=>{let bt,gt=$["s-cr"]&&$["s-cr"].parentNode||$;for(gt.shadowRoot&&gt.tagName===ue&&(gt=gt.shadowRoot);Ze<=ze;++Ze)Ce[Ze]&&(bt=pr(null,ce,Ze,$),bt&&(Ce[Ze].$elm$=bt,gt.insertBefore(bt,In(W))))},Ar=($,W,ce,Ce,Ze)=>{for(;W<=ce;++W)(Ce=$[W])&&(Ze=Ce.$elm$,Cr(Ce),Ie=!0,Ze["s-ol"]?Ze["s-ol"].remove():Lr(Ze,!0),Ze.remove())},gr=($,W)=>$.$tag$===W.$tag$&&("slot"===$.$tag$?$.$name$===W.$name$:$.$key$===W.$key$),In=$=>$&&$["s-ol"]||$,Ft=$=>($["s-ol"]?$["s-ol"]:$).parentNode,ci=($,W)=>{const ce=W.$elm$=$.$elm$,Ce=$.$children$,Ze=W.$children$,ze=W.$tag$,gt=W.$text$;let bt;null===gt?(Se="svg"===ze||"foreignObject"!==ze&&Se,"slot"===ze||sr($,W,Se),null!==Ce&&null!==Ze?(($,W,ce,Ce)=>{let Fi,Jr,Ze=0,ze=0,gt=0,bt=0,At=W.length-1,an=W[0],Sn=W[At],zn=Ce.length-1,Xn=Ce[0],kr=Ce[zn];for(;Ze<=At&&ze<=zn;)if(null==an)an=W[++Ze];else if(null==Sn)Sn=W[--At];else if(null==Xn)Xn=Ce[++ze];else if(null==kr)kr=Ce[--zn];else if(gr(an,Xn))ci(an,Xn),an=W[++Ze],Xn=Ce[++ze];else if(gr(Sn,kr))ci(Sn,kr),Sn=W[--At],kr=Ce[--zn];else if(gr(an,kr))("slot"===an.$tag$||"slot"===kr.$tag$)&&Lr(an.$elm$.parentNode,!1),ci(an,kr),$.insertBefore(an.$elm$,Sn.$elm$.nextSibling),an=W[++Ze],kr=Ce[--zn];else if(gr(Sn,Xn))("slot"===an.$tag$||"slot"===kr.$tag$)&&Lr(Sn.$elm$.parentNode,!1),ci(Sn,Xn),$.insertBefore(Sn.$elm$,an.$elm$),Sn=W[--At],Xn=Ce[++ze];else{for(gt=-1,bt=Ze;bt<=At;++bt)if(W[bt]&&null!==W[bt].$key$&&W[bt].$key$===Xn.$key$){gt=bt;break}gt>=0?(Jr=W[gt],Jr.$tag$!==Xn.$tag$?Fi=pr(W&&W[ze],ce,gt,$):(ci(Jr,Xn),W[gt]=void 0,Fi=Jr.$elm$),Xn=Ce[++ze]):(Fi=pr(W&&W[ze],ce,ze,$),Xn=Ce[++ze]),Fi&&Ft(an.$elm$).insertBefore(Fi,In(an.$elm$))}Ze>At?Nr($,null==Ce[zn+1]?null:Ce[zn+1].$elm$,ce,Ce,ze,zn):ze>zn&&Ar(W,Ze,At)})(ce,Ce,W,Ze):null!==Ze?(null!==$.$text$&&(ce.textContent=""),Nr(ce,null,W,Ze,0,Ze.length-1)):null!==Ce&&Ar(Ce,0,Ce.length-1),Se&&"svg"===ze&&(Se=!1)):(bt=ce["s-cr"])?bt.parentNode.textContent=gt:$.$text$!==gt&&(ce.data=gt)},ni=$=>{let ce,Ce,Ze,ze,gt,bt,W=$.childNodes;for(Ce=0,Ze=W.length;Ce<Ze;Ce++)if(ce=W[Ce],1===ce.nodeType){if(ce["s-sr"])for(gt=ce["s-sn"],ce.hidden=!1,ze=0;ze<Ze;ze++)if(bt=W[ze].nodeType,W[ze]["s-hn"]!==ce["s-hn"]||""!==gt){if(1===bt&&gt===W[ze].getAttribute("slot")){ce.hidden=!0;break}}else if(1===bt||3===bt&&""!==W[ze].textContent.trim()){ce.hidden=!0;break}ni(ce)}},Cn=[],Yn=$=>{let W,ce,Ce,Ze,ze,gt,bt=0,At=$.childNodes,an=At.length;for(;bt<an;bt++){if(W=At[bt],W["s-sr"]&&(ce=W["s-cr"])&&ce.parentNode)for(Ce=ce.parentNode.childNodes,Ze=W["s-sn"],gt=Ce.length-1;gt>=0;gt--)ce=Ce[gt],!ce["s-cn"]&&!ce["s-nr"]&&ce["s-hn"]!==W["s-hn"]&&(Pr(ce,Ze)?(ze=Cn.find(Sn=>Sn.$nodeToRelocate$===ce),Ie=!0,ce["s-sn"]=ce["s-sn"]||Ze,ze?ze.$slotRefNode$=W:Cn.push({$slotRefNode$:W,$nodeToRelocate$:ce}),ce["s-sr"]&&Cn.map(Sn=>{Pr(Sn.$nodeToRelocate$,ce["s-sn"])&&(ze=Cn.find(zn=>zn.$nodeToRelocate$===ce),ze&&!Sn.$slotRefNode$&&(Sn.$slotRefNode$=ze.$slotRefNode$))})):Cn.some(Sn=>Sn.$nodeToRelocate$===ce)||Cn.push({$nodeToRelocate$:ce}));1===W.nodeType&&Yn(W)}},Pr=($,W)=>1===$.nodeType?null===$.getAttribute("slot")&&""===W||$.getAttribute("slot")===W:$["s-sn"]===W||""===W,Cr=$=>{$.$attrs$&&$.$attrs$.ref&&$.$attrs$.ref(null),$.$children$&&$.$children$.map(Cr)},mt=$=>Ur($).$hostElement$,He=($,W,ce)=>{const Ce=mt($);return{emit:Ze=>Xe(Ce,W,{bubbles:!!(4&ce),composed:!!(2&ce),cancelable:!!(1&ce),detail:Ze})}},Xe=($,W,ce)=>{const Ce=Te.ce(W,ce);return $.dispatchEvent(Ce),Ce},at=($,W)=>{W&&!$.$onRenderResolve$&&W["s-p"]&&W["s-p"].push(new Promise(ce=>$.$onRenderResolve$=ce))},Qe=($,W)=>{if($.$flags$|=16,!(4&$.$flags$))return at($,$.$ancestorComponent$),mr(()=>wt($,W));$.$flags$|=512},wt=($,W)=>{const Ce=$.$lazyInstance$;let Ze;return W&&($.$flags$|=256,$.$queuedListeners$&&($.$queuedListeners$.map(([ze,gt])=>it(Ce,ze,gt)),$.$queuedListeners$=null),Ze=it(Ce,"componentWillLoad")),Ze=Ve(Ze,()=>it(Ce,"componentWillRender")),Ve(Ze,()=>Qt($,Ce,W))},Qt=function(){var $=(0,E.Z)(function*(W,ce,Ce){const Ze=W.$hostElement$,gt=Ze["s-rc"];Ce&&($=>{const W=$.$cmpMeta$,ce=$.$hostElement$,Ce=W.$flags$,ze=Nt(lt&&ce.shadowRoot?ce.shadowRoot:ce.getRootNode(),W,$.$modeName$,ce);10&Ce&&(ce["s-sc"]=ze,ce.classList.add(ze+"-h"),2&Ce&&ce.classList.add(ze+"-s"))})(W);$t(W,ce),Te.$cssShim$&&Te.$cssShim$.updateHost(Ze),gt&&(gt.map(At=>At()),Ze["s-rc"]=void 0);{const At=Ze["s-p"],an=()=>Wt(W);0===At.length?an():(Promise.all(At).then(an),W.$flags$|=4,At.length=0)}});return function(ce,Ce,Ze){return $.apply(this,arguments)}}(),$t=($,W,ce)=>{try{W=W.render&&W.render(),$.$flags$&=-17,$.$flags$|=2,(($,W)=>{const ce=$.$hostElement$,Ce=$.$cmpMeta$,Ze=$.$vnode$||Wn(null,null),ze=($=>$&&$.$tag$===Rr)(W)?W:Tn(null,null,W);if(ue=ce.tagName,Ce.$attrsToReflect$&&(ze.$attrs$=ze.$attrs$||{},Ce.$attrsToReflect$.map(([gt,bt])=>ze.$attrs$[bt]=ce[gt])),ze.$tag$=null,ze.$flags$|=4,$.$vnode$=ze,ze.$elm$=Ze.$elm$=ce.shadowRoot||ce,ie=ce["s-sc"],L=ce["s-cr"],ee=lt&&0!=(1&Ce.$flags$),Ie=!1,ci(Ze,ze),Te.$flags$|=1,oe){Yn(ze.$elm$);let gt,bt,At,an,Sn,zn,Xn=0;for(;Xn<Cn.length;Xn++)gt=Cn[Xn],bt=gt.$nodeToRelocate$,bt["s-ol"]||(At=_e.createTextNode(""),At["s-nr"]=bt,bt.parentNode.insertBefore(bt["s-ol"]=At,bt));for(Xn=0;Xn<Cn.length;Xn++)if(gt=Cn[Xn],bt=gt.$nodeToRelocate$,gt.$slotRefNode$){for(an=gt.$slotRefNode$.parentNode,Sn=gt.$slotRefNode$.nextSibling,At=bt["s-ol"];At=At.previousSibling;)if(zn=At["s-nr"],zn&&zn["s-sn"]===bt["s-sn"]&&an===zn.parentNode&&(zn=zn.nextSibling,!zn||!zn["s-nr"])){Sn=zn;break}(!Sn&&an!==bt.parentNode||bt.nextSibling!==Sn)&&bt!==Sn&&(!bt["s-hn"]&&bt["s-ol"]&&(bt["s-hn"]=bt["s-ol"].parentNode.nodeName),an.insertBefore(bt,Sn))}else 1===bt.nodeType&&(bt.hidden=!0)}Ie&&ni(ze.$elm$),Te.$flags$&=-2,Cn.length=0})($,W)}catch(Ce){Kr(Ce,$.$hostElement$)}return null},Wt=$=>{const ce=$.$hostElement$,Ze=$.$lazyInstance$,ze=$.$ancestorComponent$;64&$.$flags$?it(Ze,"componentDidUpdate"):($.$flags$|=64,be(ce),it(Ze,"componentDidLoad"),$.$onReadyResolve$(ce),ze||$e()),$.$onInstanceResolve$(ce),$.$onRenderResolve$&&($.$onRenderResolve$(),$.$onRenderResolve$=void 0),512&$.$flags$&&ar(()=>Qe($,!1)),$.$flags$&=-517},Be=$=>{{const W=Ur($),ce=W.$hostElement$.isConnected;return ce&&2==(18&W.$flags$)&&Qe(W,!1),ce}},$e=$=>{be(_e.documentElement),ar(()=>Xe(ve,"appload",{detail:{namespace:"ionic"}}))},it=($,W,ce)=>{if($&&$[W])try{return $[W](ce)}catch(Ce){Kr(Ce)}},Ve=($,W)=>$&&$.then?$.then(W):W(),be=$=>$.classList.add("hydrated"),Et=($,W,ce,Ce,Ze,ze,gt)=>{let bt,At,an,Sn;if(1===ze.nodeType){for(bt=ze.getAttribute("c-id"),bt&&(At=bt.split("."),(At[0]===gt||"0"===At[0])&&(an={$flags$:0,$hostId$:At[0],$nodeId$:At[1],$depth$:At[2],$index$:At[3],$tag$:ze.tagName.toLowerCase(),$elm$:ze,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},W.push(an),ze.removeAttribute("c-id"),$.$children$||($.$children$=[]),$.$children$[an.$index$]=an,$=an,Ce&&"0"===an.$depth$&&(Ce[an.$index$]=an.$elm$))),Sn=ze.childNodes.length-1;Sn>=0;Sn--)Et($,W,ce,Ce,Ze,ze.childNodes[Sn],gt);if(ze.shadowRoot)for(Sn=ze.shadowRoot.childNodes.length-1;Sn>=0;Sn--)Et($,W,ce,Ce,Ze,ze.shadowRoot.childNodes[Sn],gt)}else if(8===ze.nodeType)At=ze.nodeValue.split("."),(At[1]===gt||"0"===At[1])&&(bt=At[0],an={$flags$:0,$hostId$:At[1],$nodeId$:At[2],$depth$:At[3],$index$:At[4],$elm$:ze,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===bt?(an.$elm$=ze.nextSibling,an.$elm$&&3===an.$elm$.nodeType&&(an.$text$=an.$elm$.textContent,W.push(an),ze.remove(),$.$children$||($.$children$=[]),$.$children$[an.$index$]=an,Ce&&"0"===an.$depth$&&(Ce[an.$index$]=an.$elm$))):an.$hostId$===gt&&("s"===bt?(an.$tag$="slot",ze["s-sn"]=At[5]?an.$name$=At[5]:"",ze["s-sr"]=!0,Ce&&(an.$elm$=_e.createElement(an.$tag$),an.$name$&&an.$elm$.setAttribute("name",an.$name$),ze.parentNode.insertBefore(an.$elm$,ze),ze.remove(),"0"===an.$depth$&&(Ce[an.$index$]=an.$elm$)),ce.push(an),$.$children$||($.$children$=[]),$.$children$[an.$index$]=an):"r"===bt&&(Ce?ze.remove():(Ze["s-cr"]=ze,ze["s-cn"]=!0))));else if($&&"style"===$.$tag$){const zn=Wn(null,ze.textContent);zn.$elm$=ze,zn.$index$="0",$.$children$=[zn]}},tn=($,W)=>{if(1===$.nodeType){let ce=0;for(;ce<$.childNodes.length;ce++)tn($.childNodes[ce],W);if($.shadowRoot)for(ce=0;ce<$.shadowRoot.childNodes.length;ce++)tn($.shadowRoot.childNodes[ce],W)}else if(8===$.nodeType){const ce=$.nodeValue.split(".");"o"===ce[0]&&(W.set(ce[1]+"."+ce[2],$),$.nodeValue="",$["s-en"]=ce[3])}},yn=($,W,ce)=>{if(W.$members$){$.watchers&&(W.$watchers$=$.watchers);const Ce=Object.entries(W.$members$),Ze=$.prototype;if(Ce.map(([ze,[gt]])=>{31&gt||2&ce&&32&gt?Object.defineProperty(Ze,ze,{get(){return(($,W)=>Ur(this).$instanceValues$.get(W))(0,ze)},set(bt){(($,W,ce,Ce)=>{const Ze=Ur($),ze=Ze.$hostElement$,gt=Ze.$instanceValues$.get(W),bt=Ze.$flags$,At=Ze.$lazyInstance$;if(ce=(($,W)=>null==$||On($)?$:4&W?"false"!==$&&(""===$||!!$):2&W?parseFloat($):1&W?String($):$)(ce,Ce.$members$[W][0]),(!(8&bt)||void 0===gt)&&ce!==gt&&(Ze.$instanceValues$.set(W,ce),At)){if(Ce.$watchers$&&128&bt){const an=Ce.$watchers$[W];an&&an.map(Sn=>{try{At[Sn](ce,gt,W)}catch(zn){Kr(zn,ze)}})}2==(18&bt)&&Qe(Ze,!1)}})(this,ze,bt,W)},configurable:!0,enumerable:!0}):1&ce&&64&gt&&Object.defineProperty(Ze,ze,{value(...bt){const At=Ur(this);return At.$onInstancePromise$.then(()=>At.$lazyInstance$[ze](...bt))}})}),1&ce){const ze=new Map;Ze.attributeChangedCallback=function(gt,bt,At){Te.jmp(()=>{const an=ze.get(gt);this[an]=(null!==At||"boolean"!=typeof this[an])&&At})},$.observedAttributes=Ce.filter(([gt,bt])=>15&bt[0]).map(([gt,bt])=>{const At=bt[1]||gt;return ze.set(At,gt),512&bt[0]&&W.$attrsToReflect$.push([gt,At]),At})}}return $},Dn=function(){var $=(0,E.Z)(function*(W,ce,Ce,Ze,ze){if(0==(32&ce.$flags$)){{if(ce.$flags$|=32,(ze=Qn(Ce)).then){const an=()=>{};ze=yield ze,an()}ze.isProxied||(Ce.$watchers$=ze.watchers,yn(ze,Ce,2),ze.isProxied=!0);const At=()=>{};ce.$flags$|=8;try{new ze(ce)}catch(an){Kr(an)}ce.$flags$&=-9,ce.$flags$|=128,At(),Er(ce.$lazyInstance$)}if(ze.style){let At=ze.style;"string"!=typeof At&&(At=At[ce.$modeName$=($=>gi.map(W=>W($)).find(W=>!!W))(W)]);const an=tt(Ce,ce.$modeName$);if(!zr.has(an)){const Sn=()=>{};8&Ce.$flags$&&(At=yield F.e(8810).then(F.bind(F,8810)).then(zn=>zn.scopeCss(At,an,!1))),vn(an,At,!!(1&Ce.$flags$)),Sn()}}}const gt=ce.$ancestorComponent$,bt=()=>Qe(ce,!0);gt&&gt["s-rc"]?gt["s-rc"].push(bt):bt()});return function(ce,Ce,Ze,ze,gt){return $.apply(this,arguments)}}(),Er=$=>{it($,"connectedCallback")},nn=$=>{const W=$["s-cr"]=_e.createComment("");W["s-cn"]=!0,$.insertBefore(W,$.firstChild)},Mn=($,W={})=>{const Ce=[],Ze=W.exclude||[],ze=ve.customElements,gt=_e.head,bt=gt.querySelector("meta[charset]"),At=_e.createElement("style"),an=[],Sn=_e.querySelectorAll(`[${Tt}]`);let zn,Xn=!0,kr=0;for(Object.assign(Te,W),Te.$resourcesUrl$=new URL(W.resourcesUrl||"./",_e.baseURI).href,Te.$flags$|=2;kr<Sn.length;kr++)vn(Sn[kr].getAttribute(Tt),je(Sn[kr].innerHTML),!0);$.map(Fi=>Fi[1].map(Jr=>{const _i={$flags$:Jr[0],$tagName$:Jr[1],$members$:Jr[2],$listeners$:Jr[3]};_i.$members$=Jr[2],_i.$listeners$=Jr[3],_i.$attrsToReflect$=[],_i.$watchers$={},!lt&&1&_i.$flags$&&(_i.$flags$|=8);const ri=_i.$tagName$,ws=class extends HTMLElement{constructor(Yi){super(Yi),jr(Yi=this,_i),1&_i.$flags$&&(lt?Yi.attachShadow({mode:"open",delegatesFocus:!!(16&_i.$flags$)}):"shadowRoot"in Yi||(Yi.shadowRoot=Yi))}connectedCallback(){zn&&(clearTimeout(zn),zn=null),Xn?an.push(this):Te.jmp(()=>($=>{if(0==(1&Te.$flags$)){const W=Ur($),ce=W.$cmpMeta$,Ce=()=>{};if(1&W.$flags$)Re($,W,ce.$listeners$),Er(W.$lazyInstance$);else{let Ze;if(W.$flags$|=1,Ze=$.getAttribute(Le),Ze){if(lt&&1&ce.$flags$){const ze=Nt($.shadowRoot,ce,$.getAttribute("s-mode"));$.classList.remove(ze+"-h",ze+"-s")}(($,W,ce,Ce)=>{const ze=$.shadowRoot,gt=[],At=ze?[]:null,an=Ce.$vnode$=Wn(W,null);Te.$orgLocNodes$||tn(_e.body,Te.$orgLocNodes$=new Map),$[Le]=ce,$.removeAttribute(Le),Et(an,gt,[],At,$,$,ce),gt.map(Sn=>{const zn=Sn.$hostId$+"."+Sn.$nodeId$,Xn=Te.$orgLocNodes$.get(zn),kr=Sn.$elm$;Xn&&lt&&""===Xn["s-en"]&&Xn.parentNode.insertBefore(kr,Xn.nextSibling),ze||(kr["s-hn"]=W,Xn&&(kr["s-ol"]=Xn,kr["s-ol"]["s-nr"]=kr)),Te.$orgLocNodes$.delete(zn)}),ze&&At.map(Sn=>{Sn&&ze.appendChild(Sn)})})($,ce.$tagName$,Ze,W)}Ze||12&ce.$flags$&&nn($);{let ze=$;for(;ze=ze.parentNode||ze.host;)if(1===ze.nodeType&&ze.hasAttribute("s-id")&&ze["s-p"]||ze["s-p"]){at(W,W.$ancestorComponent$=ze);break}}ce.$members$&&Object.entries(ce.$members$).map(([ze,[gt]])=>{if(31&gt&&$.hasOwnProperty(ze)){const bt=$[ze];delete $[ze],$[ze]=bt}}),ar(()=>Dn($,W,ce))}Ce()}})(this))}disconnectedCallback(){Te.jmp(()=>($=>{if(0==(1&Te.$flags$)){const W=Ur($),ce=W.$lazyInstance$;W.$rmListeners$&&(W.$rmListeners$.map(Ce=>Ce()),W.$rmListeners$=void 0),Te.$cssShim$&&Te.$cssShim$.removeHost($),it(ce,"disconnectedCallback")}})(this))}componentOnReady(){return Ur(this).$onReadyPromise$}};_i.$lazyBundleId$=Fi[0],!Ze.includes(ri)&&!ze.get(ri)&&(Ce.push(ri),ze.define(ri,yn(ws,_i,1)))})),At.innerHTML=Ce+"{visibility:hidden}.hydrated{visibility:inherit}",At.setAttribute("data-styles",""),gt.insertBefore(At,bt?bt.nextSibling:gt.firstChild),Xn=!1,an.length?an.map(Fi=>Fi.connectedCallback()):Te.jmp(()=>zn=setTimeout($e,30))},Fn=$=>{const W=new URL($,Te.$resourcesUrl$);return W.origin!==ve.location.origin?W.href:W.pathname},dn=new WeakMap,Ur=$=>dn.get($),wr=($,W)=>dn.set(W.$lazyInstance$=$,W),jr=($,W)=>{const ce={$flags$:0,$hostElement$:$,$cmpMeta$:W,$instanceValues$:new Map};return ce.$onInstancePromise$=new Promise(Ce=>ce.$onInstanceResolve$=Ce),ce.$onReadyPromise$=new Promise(Ce=>ce.$onReadyResolve$=Ce),$["s-p"]=[],$["s-rc"]=[],Re($,ce,W.$listeners$),dn.set($,ce)},Ir=($,W)=>W in $,Kr=($,W)=>(0,console.error)($,W),zi=new Map,Qn=($,W,ce)=>{const Ce=$.$tagName$.replace(/-/g,"_"),Ze=$.$lazyBundleId$,ze=zi.get(Ze);return ze?ze[Ce]:F(863)(`./${Ze}.entry.js`).then(gt=>(zi.set(Ze,gt),gt[Ce]),Kr)},zr=new Map,gi=[],Zr=[],rs=[],xr=($,W)=>ce=>{$.push(ce),ae||(ae=!0,W&&4&Te.$flags$?ar(qr):Te.raf(qr))},qi=$=>{for(let W=0;W<$.length;W++)try{$[W](performance.now())}catch(ce){Kr(ce)}$.length=0},qr=()=>{qi(Zr),qi(rs),(ae=Zr.length>0)&&Te.raf(qr)},ar=$=>Ee().then($),Vn=xr(Zr,!1),mr=xr(rs,!0),ht={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},4425:(cn,rt,F)=>{"use strict";F.d(rt,{L:()=>L,a:()=>ue,b:()=>ee,c:()=>Ie,d:()=>oe,e:()=>v,g:()=>ft,l:()=>It,s:()=>Le,t:()=>ve});var E=F(8239),O=F(3150),ie=F(1567);const L="ionViewWillEnter",ue="ionViewDidEnter",ee="ionViewWillLeave",Ie="ionViewDidLeave",oe="ionViewWillUnload",ve=St=>new Promise((pt,xt)=>{(0,O.c)(()=>{we(St),_e(St).then(kt=>{kt.animation&&kt.animation.destroy(),Te(St),pt(kt)},kt=>{Te(St),xt(kt)})})}),we=St=>{const pt=St.enteringEl,xt=St.leavingEl;Tt(pt,xt,St.direction),St.showGoBack?pt.classList.add("can-go-back"):pt.classList.remove("can-go-back"),Le(pt,!1),pt.style.setProperty("pointer-events","none"),xt&&(Le(xt,!1),xt.style.setProperty("pointer-events","none"))},_e=function(){var St=(0,E.Z)(function*(pt){const xt=yield lt(pt);return xt&&O.B.isBrowser?Ee(xt,pt):Ke(pt)});return function(xt){return St.apply(this,arguments)}}(),Te=St=>{const pt=St.enteringEl,xt=St.leavingEl;pt.classList.remove("ion-page-invisible"),pt.style.removeProperty("pointer-events"),void 0!==xt&&(xt.classList.remove("ion-page-invisible"),xt.style.removeProperty("pointer-events"))},lt=function(){var St=(0,E.Z)(function*(pt){return pt.leavingEl&&pt.animated&&0!==pt.duration?pt.animationBuilder?pt.animationBuilder:"ios"===pt.mode?(yield Promise.resolve().then(F.bind(F,7689))).iosTransitionAnimation:(yield Promise.resolve().then(F.bind(F,5392))).mdTransitionAnimation:void 0});return function(xt){return St.apply(this,arguments)}}(),Ee=function(){var St=(0,E.Z)(function*(pt,xt){yield Re(xt,!0);const kt=pt(xt.baseEl,xt);Oe(xt.enteringEl,xt.leavingEl);const xn=yield Fe(kt,xt);return xt.progressCallback&&xt.progressCallback(void 0),xn&&st(xt.enteringEl,xt.leavingEl),{hasCompleted:xn,animation:kt}});return function(xt,kt){return St.apply(this,arguments)}}(),Ke=function(){var St=(0,E.Z)(function*(pt){const xt=pt.enteringEl,kt=pt.leavingEl;return yield Re(pt,!1),Oe(xt,kt),st(xt,kt),{hasCompleted:!0}});return function(xt){return St.apply(this,arguments)}}(),Re=function(){var St=(0,E.Z)(function*(pt,xt){const xn=(void 0!==pt.deepWait?pt.deepWait:xt)?[v(pt.enteringEl),v(pt.leavingEl)]:[en(pt.enteringEl),en(pt.leavingEl)];yield Promise.all(xn),yield Ge(pt.viewIsReady,pt.enteringEl)});return function(xt,kt){return St.apply(this,arguments)}}(),Ge=function(){var St=(0,E.Z)(function*(pt,xt){pt&&(yield pt(xt))});return function(xt,kt){return St.apply(this,arguments)}}(),Fe=(St,pt)=>{const xt=pt.progressCallback,kt=new Promise(xn=>{St.onFinish(vn=>xn(1===vn))});return xt?(St.progressStart(!0),xt(St)):St.play(),kt},Oe=(St,pt)=>{It(pt,ee),It(St,L)},st=(St,pt)=>{It(St,ue),It(pt,Ie)},It=(St,pt)=>{if(St){const xt=new CustomEvent(pt,{bubbles:!1,cancelable:!1});St.dispatchEvent(xt)}},en=St=>St?new Promise(pt=>(0,ie.c)(St,pt)):Promise.resolve(),v=function(){var St=(0,E.Z)(function*(pt){const xt=pt;if(xt){if(null!=xt.componentOnReady&&null!=(yield xt.componentOnReady()))return;yield Promise.all(Array.from(xt.children).map(v))}});return function(xt){return St.apply(this,arguments)}}(),Le=(St,pt)=>{pt?(St.setAttribute("aria-hidden","true"),St.classList.add("ion-page-hidden")):(St.hidden=!1,St.removeAttribute("aria-hidden"),St.classList.remove("ion-page-hidden"))},Tt=(St,pt,xt)=>{void 0!==St&&(St.style.zIndex="back"===xt?"99":"101"),void 0!==pt&&(pt.style.zIndex="100")},ft=St=>St.classList.contains("ion-page")?St:St.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||St},7585:(cn,rt,F)=>{"use strict";F.d(rt,{a:()=>ie,b:()=>xn,c:()=>v,g:()=>O,i:()=>vn});var E=F(3150);const O=Nt=>L(Nt),ie=(Nt,Dt)=>("string"==typeof Nt&&(Dt=Nt,Nt=void 0),O(Nt).includes(Dt)),L=(Nt=window)=>{if(void 0===Nt)return[];Nt.Ionic=Nt.Ionic||{};let Dt=Nt.Ionic.platforms;return null==Dt&&(Dt=Nt.Ionic.platforms=ue(Nt),Dt.forEach(tt=>Nt.document.documentElement.classList.add(`plt-${tt}`))),Dt},ue=Nt=>Object.keys(It).filter(Dt=>It[Dt](Nt)),Ie=Nt=>!!(Oe(Nt,/iPad/i)||Oe(Nt,/Macintosh/i)&&Te(Nt)),ae=Nt=>Oe(Nt,/android|sink/i),Te=Nt=>st(Nt,"(any-pointer:coarse)"),Ee=Nt=>Ke(Nt)||Re(Nt),Ke=Nt=>!!(Nt.cordova||Nt.phonegap||Nt.PhoneGap),Re=Nt=>{const Dt=Nt.Capacitor;return!(!Dt||!Dt.isNative)},Oe=(Nt,Dt)=>Dt.test(Nt.navigator.userAgent),st=(Nt,Dt)=>Nt.matchMedia(Dt).matches,It={ipad:Ie,iphone:Nt=>Oe(Nt,/iPhone/i),ios:Nt=>Oe(Nt,/iPhone|iPod/i)||Ie(Nt),android:ae,phablet:Nt=>{const Dt=Nt.innerWidth,tt=Nt.innerHeight,je=Math.min(Dt,tt),ct=Math.max(Dt,tt);return je>390&&je<520&&ct>620&&ct<800},tablet:Nt=>{const Dt=Nt.innerWidth,tt=Nt.innerHeight,je=Math.min(Dt,tt),ct=Math.max(Dt,tt);return Ie(Nt)||(Nt=>ae(Nt)&&!Oe(Nt,/mobile/i))(Nt)||je>460&&je<820&&ct>780&&ct<1400},cordova:Ke,capacitor:Re,electron:Nt=>Oe(Nt,/electron/i),pwa:Nt=>!(!Nt.matchMedia("(display-mode: standalone)").matches&&!Nt.navigator.standalone),mobile:Te,mobileweb:Nt=>Te(Nt)&&!Ee(Nt),desktop:Nt=>!Te(Nt),hybrid:Ee};class en{constructor(){this.m=new Map}reset(Dt){this.m=new Map(Object.entries(Dt))}get(Dt,tt){const je=this.m.get(Dt);return void 0!==je?je:tt}getBoolean(Dt,tt=!1){const je=this.m.get(Dt);return void 0===je?tt:"string"==typeof je?"true"===je:!!je}getNumber(Dt,tt){const je=parseFloat(this.m.get(Dt));return isNaN(je)?void 0!==tt?tt:NaN:je}set(Dt,tt){this.m.set(Dt,tt)}}const v=new en,xt="ionic-persist-config";let kt;const xn=Nt=>Nt&&(0,E.g)(Nt)||kt,vn=(Nt={})=>{if("undefined"==typeof window)return;const Dt=window.document,tt=window,je=tt.Ionic=tt.Ionic||{};L(tt);const ct=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(Nt=>{try{const Dt=Nt.sessionStorage.getItem(xt);return null!==Dt?JSON.parse(Dt):{}}catch(Dt){return{}}})(tt)),{persistConfig:!1}),je.config),(Nt=>{const Dt={};return Nt.location.search.slice(1).split("&").map(tt=>tt.split("=")).map(([tt,je])=>[decodeURIComponent(tt),decodeURIComponent(je)]).filter(([tt])=>((Nt,Dt)=>Nt.substr(0,Dt.length)===Dt)(tt,"ionic:")).map(([tt,je])=>[tt.slice("ionic:".length),je]).forEach(([tt,je])=>{Dt[tt]=je}),Dt})(tt)),Nt);v.reset(ct),v.getBoolean("persistConfig")&&((Nt,Dt)=>{try{Nt.sessionStorage.setItem(xt,JSON.stringify(Dt))}catch(tt){return}})(tt,ct),je.config=v,je.mode=kt=v.get("mode",Dt.documentElement.getAttribute("mode")||(ie(tt,"ios")?"ios":"md")),v.set("mode",kt),Dt.documentElement.setAttribute("mode",kt),Dt.documentElement.classList.add(kt),v.getBoolean("_testing")&&v.set("animated",!1);const Mt=Vt=>Vt.tagName&&Vt.tagName.startsWith("ION-"),Gt=Vt=>["ios","md"].includes(Vt);(0,E.s)(Vt=>{for(;Vt;){const Bt=Vt.mode||Vt.getAttribute("mode");if(Bt){if(Gt(Bt))return Bt;Mt(Vt)&&console.warn('Invalid ionic mode: "'+Bt+'", expected: "ios" or "md"')}Vt=Vt.parentElement}return kt})}},7689:(cn,rt,F)=>{"use strict";F.r(rt),F.d(rt,{iosTransitionAnimation:()=>we,shadow:()=>ee});var E=F(7235),O=F(4425);F(3150);const ue=_e=>document.querySelector(`${_e}.ion-cloned-element`),ee=_e=>_e.shadowRoot||_e,Ie=_e=>{const Te="ION-TABS"===_e.tagName?_e:_e.querySelector("ion-tabs"),lt="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=Te){const Ee=Te.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Ee?Ee.querySelector(lt):null}return _e.querySelector(lt)},oe=(_e,Te)=>{const lt="ION-TABS"===_e.tagName?_e:_e.querySelector("ion-tabs");let Ee=[];if(null!=lt){const Ke=lt.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=Ke&&(Ee=Ke.querySelectorAll("ion-buttons"))}else Ee=_e.querySelectorAll("ion-buttons");for(const Ke of Ee){const Re=Ke.closest("ion-header"),Ge=Re&&!Re.classList.contains("header-collapse-condense-inactive"),Fe=Ke.querySelector("ion-back-button"),Oe=Ke.classList.contains("buttons-collapse"),st="start"===Ke.slot||""===Ke.slot;if(null!==Fe&&st&&(Oe&&Ge&&Te||!Oe))return Fe}return null},ae=(_e,Te,lt,Ee,Ke,Re)=>{const Ge=Te?`calc(100% - ${Re.right+4}px)`:Re.left-4+"px",Fe=Te?"7px":"-7px",Oe=Te?"-4px":"4px",st=Te?"-4px":"4px",It=Te?"right":"left",en=Te?"left":"right",Tt=lt?[{offset:0,opacity:1,transform:`translate3d(${Oe}, ${Re.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Fe}, ${Ke.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${Fe}, ${Ke.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${Oe}, ${Re.top-46}px, 0) scale(1)`}],pt=lt?[{offset:0,opacity:1,transform:`translate3d(${st}, ${Re.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${st}, ${Re.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${st}, ${Re.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${st}, ${Re.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${st}, ${Re.top-46}px, 0) scale(1)`}],xt=(0,E.c)(),kt=(0,E.c)(),xn=ue("ion-back-button"),vn=ee(xn).querySelector(".button-text"),Nt=ee(xn).querySelector("ion-icon");xn.text=Ee.text,xn.mode=Ee.mode,xn.icon=Ee.icon,xn.color=Ee.color,xn.disabled=Ee.disabled,xn.style.setProperty("display","block"),xn.style.setProperty("position","fixed"),kt.addElement(Nt),xt.addElement(vn),xt.beforeStyles({"transform-origin":`${It} center`}).beforeAddWrite(()=>{Ee.style.setProperty("display","none"),xn.style.setProperty(It,Ge)}).afterAddWrite(()=>{Ee.style.setProperty("display",""),xn.style.setProperty("display","none"),xn.style.removeProperty(It)}).keyframes(Tt),kt.beforeStyles({"transform-origin":`${en} center`}).keyframes(pt),_e.addAnimation([xt,kt])},ve=(_e,Te,lt,Ee,Ke,Re)=>{const Ge=Te?`calc(100% - ${Ke.right}px)`:`${Ke.left}px`,Fe=Te?"-18px":"18px",Oe=Te?"right":"left",en=lt?[{offset:0,opacity:0,transform:`translate3d(${Fe}, ${Re.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${Ke.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${Ke.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Fe}, ${Re.top-4}px, 0) scale(0.5)`}],v=ue("ion-title"),Le=(0,E.c)();v.innerText=Ee.innerText,v.size=Ee.size,v.color=Ee.color,Le.addElement(v),Le.beforeStyles({"transform-origin":`${Oe} center`,height:"46px",display:"",position:"relative",[Oe]:Ge}).beforeAddWrite(()=>{Ee.style.setProperty("display","none")}).afterAddWrite(()=>{Ee.style.setProperty("display",""),v.style.setProperty("display","none")}).keyframes(en),_e.addAnimation(Le)},we=(_e,Te)=>{try{const lt="cubic-bezier(0.32,0.72,0,1)",Ee="opacity",Ke="transform",Re="0%",Ge=.8,Fe="rtl"===_e.ownerDocument.dir,Oe=Fe?"-99.5%":"99.5%",st=Fe?"33%":"-33%",It=Te.enteringEl,en=Te.leavingEl,v="back"===Te.direction,Le=It.querySelector(":scope > ion-content"),Tt=It.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),ft=It.querySelectorAll(":scope > ion-header > ion-toolbar"),St=(0,E.c)(),pt=(0,E.c)();if(St.addElement(It).duration(Te.duration||540).easing(Te.easing||lt).fill("both").beforeRemoveClass("ion-page-invisible"),en&&_e){const vn=(0,E.c)();vn.addElement(_e),St.addAnimation(vn)}if(Le||0!==ft.length||0!==Tt.length?(pt.addElement(Le),pt.addElement(Tt)):pt.addElement(It.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),St.addAnimation(pt),v?pt.beforeClearStyles([Ee]).fromTo("transform",`translateX(${st})`,`translateX(${Re})`).fromTo(Ee,Ge,1):pt.beforeClearStyles([Ee]).fromTo("transform",`translateX(${Oe})`,`translateX(${Re})`),Le){const vn=ee(Le).querySelector(".transition-effect");if(vn){const Nt=vn.querySelector(".transition-cover"),Dt=vn.querySelector(".transition-shadow"),tt=(0,E.c)(),je=(0,E.c)(),ct=(0,E.c)();tt.addElement(vn).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),je.addElement(Nt).beforeClearStyles([Ee]).fromTo(Ee,0,.1),ct.addElement(Dt).beforeClearStyles([Ee]).fromTo(Ee,.03,.7),tt.addAnimation([je,ct]),pt.addAnimation([tt])}}const xt=It.querySelector("ion-header.header-collapse-condense"),{forward:kt,backward:xn}=((_e,Te,lt,Ee,Ke)=>{const Re=oe(Ee,lt),Ge=Ie(Ke),Fe=Ie(Ee),Oe=oe(Ke,lt),st=null!==Re&&null!==Ge&&!lt,It=null!==Fe&&null!==Oe&&lt;if(st){const en=Ge.getBoundingClientRect(),v=Re.getBoundingClientRect();ve(_e,Te,lt,Ge,en,v),ae(_e,Te,lt,Re,en,v)}else if(It){const en=Fe.getBoundingClientRect(),v=Oe.getBoundingClientRect();ve(_e,Te,lt,Fe,en,v),ae(_e,Te,lt,Oe,en,v)}return{forward:st,backward:It}})(St,Fe,v,It,en);if(ft.forEach(vn=>{const Nt=(0,E.c)();Nt.addElement(vn),St.addAnimation(Nt);const Dt=(0,E.c)();Dt.addElement(vn.querySelector("ion-title"));const tt=(0,E.c)(),je=Array.from(vn.querySelectorAll("ion-buttons,[menuToggle]")),ct=vn.closest("ion-header"),Mt=ct&&ct.classList.contains("header-collapse-condense-inactive");let Gt;Gt=je.filter(v?On=>{const Tn=On.classList.contains("buttons-collapse");return Tn&&!Mt||!Tn}:On=>!On.classList.contains("buttons-collapse")),tt.addElement(Gt);const Vt=(0,E.c)();Vt.addElement(vn.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const Bt=(0,E.c)();Bt.addElement(ee(vn).querySelector(".toolbar-background"));const wn=(0,E.c)(),Hn=vn.querySelector("ion-back-button");if(Hn&&wn.addElement(Hn),Nt.addAnimation([Dt,tt,Vt,Bt,wn]),tt.fromTo(Ee,.01,1),Vt.fromTo(Ee,.01,1),v)Mt||Dt.fromTo("transform",`translateX(${st})`,`translateX(${Re})`).fromTo(Ee,.01,1),Vt.fromTo("transform",`translateX(${st})`,`translateX(${Re})`),wn.fromTo(Ee,.01,1);else if(xt||Dt.fromTo("transform",`translateX(${Oe})`,`translateX(${Re})`).fromTo(Ee,.01,1),Vt.fromTo("transform",`translateX(${Oe})`,`translateX(${Re})`),Bt.beforeClearStyles([Ee,"transform"]),(null==ct?void 0:ct.translucent)?Bt.fromTo("transform",Fe?"translateX(-100%)":"translateX(100%)","translateX(0px)"):Bt.fromTo(Ee,.01,"var(--opacity)"),kt||wn.fromTo(Ee,.01,1),Hn&&!kt){const Tn=(0,E.c)();Tn.addElement(ee(Hn).querySelector(".button-text")).fromTo("transform",Fe?"translateX(-100px)":"translateX(100px)","translateX(0px)"),Nt.addAnimation(Tn)}}),en){const vn=(0,E.c)(),Nt=en.querySelector(":scope > ion-content"),Dt=en.querySelectorAll(":scope > ion-header > ion-toolbar"),tt=en.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(Nt||0!==Dt.length||0!==tt.length?(vn.addElement(Nt),vn.addElement(tt)):vn.addElement(en.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),St.addAnimation(vn),v){vn.beforeClearStyles([Ee]).fromTo("transform",`translateX(${Re})`,Fe?"translateX(-100%)":"translateX(100%)");const je=(0,O.g)(en);St.afterAddWrite(()=>{"normal"===St.getDirection()&&je.style.setProperty("display","none")})}else vn.fromTo("transform",`translateX(${Re})`,`translateX(${st})`).fromTo(Ee,1,Ge);if(Nt){const je=ee(Nt).querySelector(".transition-effect");if(je){const ct=je.querySelector(".transition-cover"),Mt=je.querySelector(".transition-shadow"),Gt=(0,E.c)(),Vt=(0,E.c)(),Bt=(0,E.c)();Gt.addElement(je).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Vt.addElement(ct).beforeClearStyles([Ee]).fromTo(Ee,.1,0),Bt.addElement(Mt).beforeClearStyles([Ee]).fromTo(Ee,.7,.03),Gt.addAnimation([Vt,Bt]),vn.addAnimation([Gt])}}Dt.forEach(je=>{const ct=(0,E.c)();ct.addElement(je);const Mt=(0,E.c)();Mt.addElement(je.querySelector("ion-title"));const Gt=(0,E.c)(),Vt=je.querySelectorAll("ion-buttons,[menuToggle]"),Bt=je.closest("ion-header"),wn=Bt&&Bt.classList.contains("header-collapse-condense-inactive"),Hn=Array.from(Vt).filter(Ht=>{const Gn=Ht.classList.contains("buttons-collapse");return Gn&&!wn||!Gn});Gt.addElement(Hn);const On=(0,E.c)(),Tn=je.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");Tn.length>0&&On.addElement(Tn);const Wn=(0,E.c)();Wn.addElement(ee(je).querySelector(".toolbar-background"));const Rr=(0,E.c)(),Sr=je.querySelector("ion-back-button");if(Sr&&Rr.addElement(Sr),ct.addAnimation([Mt,Gt,On,Rr,Wn]),St.addAnimation(ct),Rr.fromTo(Ee,.99,0),Gt.fromTo(Ee,.99,0),On.fromTo(Ee,.99,0),v){if(wn||Mt.fromTo("transform",`translateX(${Re})`,Fe?"translateX(-100%)":"translateX(100%)").fromTo(Ee,.99,0),On.fromTo("transform",`translateX(${Re})`,Fe?"translateX(-100%)":"translateX(100%)"),Wn.beforeClearStyles([Ee,"transform"]),(null==Bt?void 0:Bt.translucent)?Wn.fromTo("transform","translateX(0px)",Fe?"translateX(-100%)":"translateX(100%)"):Wn.fromTo(Ee,"var(--opacity)",0),Sr&&!xn){const Gn=(0,E.c)();Gn.addElement(ee(Sr).querySelector(".button-text")).fromTo("transform",`translateX(${Re})`,`translateX(${(Fe?-124:124)+"px"})`),ct.addAnimation(Gn)}}else wn||Mt.fromTo("transform",`translateX(${Re})`,`translateX(${st})`).fromTo(Ee,.99,0).afterClearStyles([Ke,Ee]),On.fromTo("transform",`translateX(${Re})`,`translateX(${st})`).afterClearStyles([Ke,Ee]),Rr.afterClearStyles([Ee]),Mt.afterClearStyles([Ee]),Gt.afterClearStyles([Ee])})}return St}catch(lt){throw lt}}},5392:(cn,rt,F)=>{"use strict";F.r(rt),F.d(rt,{mdTransitionAnimation:()=>L});var E=F(7235),O=F(4425);F(3150);const L=(ue,ee)=>{const Se="back"===ee.direction,ve=ee.leavingEl,we=(0,O.g)(ee.enteringEl),_e=we.querySelector("ion-toolbar"),Te=(0,E.c)();if(Te.addElement(we).fill("both").beforeRemoveClass("ion-page-invisible"),Se?Te.duration(ee.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):Te.duration(ee.duration||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),_e){const lt=(0,E.c)();lt.addElement(_e),Te.addAnimation(lt)}if(ve&&Se){Te.duration(ee.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const lt=(0,E.c)();lt.addElement((0,O.g)(ve)).onFinish(Ee=>{1===Ee&&lt.elements.length>0&&lt.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),Te.addAnimation(lt)}return Te}},3291:(cn,rt,F)=>{"use strict";F.d(rt,{B:()=>tt,a:()=>oe,b:()=>Se,c:()=>_e,d:()=>Tt,e:()=>lt,f:()=>St,g:()=>kt,h:()=>ee,i:()=>vn,l:()=>ae,m:()=>ve,p:()=>we,s:()=>Dt,t:()=>Te});var E=F(8239),O=F(7585),ie=F(3087),L=F(1567);let ue=0;const ee=new WeakMap,Ie=je=>({create:ct=>Ee(je,ct),dismiss:(ct,Mt,Gt)=>It(document,ct,Mt,je,Gt),getTop:()=>(0,E.Z)(function*(){return v(document,je)})()}),oe=Ie("ion-alert"),Se=Ie("ion-action-sheet"),ae=Ie("ion-loading"),ve=Ie("ion-modal"),we=Ie("ion-picker"),_e=Ie("ion-popover"),Te=Ie("ion-toast"),lt=je=>{"undefined"!=typeof document&&st(document);const ct=ue++;je.overlayIndex=ct,je.hasAttribute("id")||(je.id=`ion-overlay-${ct}`)},Ee=(je,ct)=>"undefined"!=typeof customElements?customElements.whenDefined(je).then(()=>{const Mt=document.createElement(je);return Mt.classList.add("overlay-hidden"),Object.assign(Mt,ct),pt(document).appendChild(Mt),new Promise(Gt=>(0,L.c)(Mt,Gt))}):Promise.resolve(),Ke='[tabindex]:not([tabindex^="-"]), input:not([type=hidden]):not([tabindex^="-"]), textarea:not([tabindex^="-"]), button:not([tabindex^="-"]), select:not([tabindex^="-"]), .ion-focusable:not([tabindex^="-"])',Re="input:not([type=hidden]), textarea, button, select",st=je=>{0===ue&&(ue=1,je.addEventListener("focus",ct=>((je,ct)=>{const Mt=v(ct),Gt=je.target;if(Mt&&Gt)if(Mt===Gt)Mt.lastFocus=void 0;else{const Vt=(0,L.g)(Mt);if(!Vt.contains(Gt))return;const Bt=Vt.querySelector(".ion-overlay-wrapper");if(!Bt)return;if(Bt.contains(Gt))Mt.lastFocus=Gt;else{const wn=Mt.lastFocus;((je,ct)=>{let Mt=je.querySelector(Ke);const Gt=Mt&&Mt.shadowRoot;Gt&&(Mt=Gt.querySelector(Re)||Mt),Mt?Mt.focus():ct.focus()})(Bt,Mt),wn===ct.activeElement&&((je,ct)=>{const Mt=Array.from(je.querySelectorAll(Ke));let Gt=Mt.length>0?Mt[Mt.length-1]:null;const Vt=Gt&&Gt.shadowRoot;Vt&&(Gt=Vt.querySelector(Re)||Gt),Gt?Gt.focus():ct.focus()})(Bt,Mt),Mt.lastFocus=ct.activeElement}}})(ct,je),!0),je.addEventListener("ionBackButton",ct=>{const Mt=v(je);Mt&&Mt.backdropDismiss&&ct.detail.register(ie.OVERLAY_BACK_BUTTON_PRIORITY,()=>Mt.dismiss(void 0,tt))}),je.addEventListener("keyup",ct=>{if("Escape"===ct.key){const Mt=v(je);Mt&&Mt.backdropDismiss&&Mt.dismiss(void 0,tt)}}))},It=(je,ct,Mt,Gt,Vt)=>{const Bt=v(je,Gt,Vt);return Bt?Bt.dismiss(ct,Mt):Promise.reject("overlay does not exist")},v=(je,ct,Mt)=>{const Gt=((je,ct)=>(void 0===ct&&(ct="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(je.querySelectorAll(ct)).filter(Mt=>Mt.overlayIndex>0)))(je,ct);return void 0===Mt?Gt[Gt.length-1]:Gt.find(Vt=>Vt.id===Mt)},Le=(je=!1)=>{const Mt=pt(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");!Mt||(je?Mt.setAttribute("aria-hidden","true"):Mt.removeAttribute("aria-hidden"))},Tt=function(){var je=(0,E.Z)(function*(ct,Mt,Gt,Vt,Bt){if(ct.presented)return;Le(!0),ct.presented=!0,ct.willPresent.emit();const wn=(0,O.b)(ct),Hn=ct.enterAnimation?ct.enterAnimation:O.c.get(Mt,"ios"===wn?Gt:Vt);(yield xt(ct,Hn,ct.el,Bt))&&ct.didPresent.emit(),"ION-TOAST"!==ct.el.tagName&&ft(ct.el),ct.keyboardClose&&ct.el.focus()});return function(Mt,Gt,Vt,Bt,wn){return je.apply(this,arguments)}}(),ft=function(){var je=(0,E.Z)(function*(ct){let Mt=document.activeElement;if(!Mt)return;const Gt=Mt&&Mt.shadowRoot;Gt&&(Mt=Gt.querySelector(Re)||Mt),yield ct.onDidDismiss(),Mt.focus()});return function(Mt){return je.apply(this,arguments)}}(),St=function(){var je=(0,E.Z)(function*(ct,Mt,Gt,Vt,Bt,wn,Hn){if(!ct.presented)return!1;Le(!1),ct.presented=!1;try{ct.el.style.setProperty("pointer-events","none"),ct.willDismiss.emit({data:Mt,role:Gt});const On=(0,O.b)(ct),Tn=ct.leaveAnimation?ct.leaveAnimation:O.c.get(Vt,"ios"===On?Bt:wn);"gesture"!==Gt&&(yield xt(ct,Tn,ct.el,Hn)),ct.didDismiss.emit({data:Mt,role:Gt}),ee.delete(ct)}catch(On){console.error(On)}return ct.el.remove(),!0});return function(Mt,Gt,Vt,Bt,wn,Hn,On){return je.apply(this,arguments)}}(),pt=je=>je.querySelector("ion-app")||je.body,xt=function(){var je=(0,E.Z)(function*(ct,Mt,Gt,Vt){Gt.classList.remove("overlay-hidden");const wn=Mt(Gt.shadowRoot||ct.el,Vt);(!ct.animated||!O.c.getBoolean("animated",!0))&&wn.duration(0),ct.keyboardClose&&wn.beforeAddWrite(()=>{const On=Gt.ownerDocument.activeElement;On&&On.matches("input, ion-input, ion-textarea")&&On.blur()});const Hn=ee.get(ct)||[];return ee.set(ct,[...Hn,wn]),yield wn.play(),!0});return function(Mt,Gt,Vt,Bt){return je.apply(this,arguments)}}(),kt=(je,ct)=>{let Mt;const Gt=new Promise(Vt=>Mt=Vt);return xn(je,ct,Vt=>{Mt(Vt.detail)}),Gt},xn=(je,ct,Mt)=>{const Gt=Vt=>{(0,L.b)(je,ct,Gt),Mt(Vt)};(0,L.a)(je,ct,Gt)},vn=je=>"cancel"===je||je===tt,Nt=je=>je(),Dt=(je,ct)=>{if("function"==typeof je)return O.c.get("_zoneGate",Nt)(()=>{try{return je(ct)}catch(Gt){console.error(Gt)}})},tt="backdrop"},2329:(cn,rt,F)=>{"use strict";F.d(rt,{Mq:()=>E.getApp,C6:()=>E.getApps,ZF:()=>E.initializeApp,KN:()=>E.registerVersion});var E=F(8026);(0,E.registerVersion)("firebase","9.12.1","app")},7841:(cn,rt,F)=>{"use strict";F.d(rt,{Z:()=>E.Z});var E=F(3394);E.Z.registerVersion("firebase","9.12.1","app-compat")},4828:(cn,rt,F)=>{"use strict";F.r(rt);var E=F(8239),O=F(3394),ie=F(3607),L=F(3854),Ie=(F(8026),F(5422),F(3910));function oe(){return window}function ve(){return(ve=(0,E.Z)(function*(Ve,be,Pe){var Et;const{BuildInfo:tn}=oe();(0,ie.aq)(be.sessionId,"AuthEvent did not contain a session ID");const $n=yield Re(be.sessionId),Rn={};return(0,ie.ar)()?Rn.ibi=tn.packageName:(0,ie.as)()?Rn.apn=tn.packageName:(0,ie.at)(Ve,"operation-not-supported-in-this-environment"),tn.displayName&&(Rn.appDisplayName=tn.displayName),Rn.sessionId=$n,(0,ie.au)(Ve,Pe,be.type,void 0,null!==(Et=be.eventId)&&void 0!==Et?Et:void 0,Rn)})).apply(this,arguments)}function _e(){return(_e=(0,E.Z)(function*(Ve){const{BuildInfo:be}=oe(),Pe={};(0,ie.ar)()?Pe.iosBundleId=be.packageName:(0,ie.as)()?Pe.androidPackageName=be.packageName:(0,ie.at)(Ve,"operation-not-supported-in-this-environment"),yield(0,ie.av)(Ve,Pe)})).apply(this,arguments)}function Ee(){return(Ee=(0,E.Z)(function*(Ve,be,Pe){const{cordova:Et}=oe();let tn=()=>{};try{yield new Promise(($n,Rn)=>{let Un=null;function yn(){var rn;$n();const nn=null===(rn=Et.plugins.browsertab)||void 0===rn?void 0:rn.close;"function"==typeof nn&&nn(),"function"==typeof(null==Pe?void 0:Pe.close)&&Pe.close()}function Dn(){Un||(Un=window.setTimeout(()=>{Rn((0,ie.aw)(Ve,"redirect-cancelled-by-user"))},2e3))}function Er(){"visible"===(null==document?void 0:document.visibilityState)&&Dn()}be.addPassiveListener(yn),document.addEventListener("resume",Dn,!1),(0,ie.as)()&&document.addEventListener("visibilitychange",Er,!1),tn=()=>{be.removePassiveListener(yn),document.removeEventListener("resume",Dn,!1),document.removeEventListener("visibilitychange",Er,!1),Un&&window.clearTimeout(Un)}})}finally{tn()}})).apply(this,arguments)}function Re(Ve){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,E.Z)(function*(Ve){const be=Fe(Ve),Pe=yield crypto.subtle.digest("SHA-256",be);return Array.from(new Uint8Array(Pe)).map(tn=>tn.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Fe(Ve){if((0,ie.aq)(/[0-9a-zA-Z]+/.test(Ve),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(Ve);const be=new ArrayBuffer(Ve.length),Pe=new Uint8Array(be);for(let Et=0;Et<Ve.length;Et++)Pe[Et]=Ve.charCodeAt(Et);return Pe}class st extends ie.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(be=>{this.resolveInialized=be})}addPassiveListener(be){this.passiveListeners.add(be)}removePassiveListener(be){this.passiveListeners.delete(be)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(be){return this.resolveInialized(),this.passiveListeners.forEach(Pe=>Pe(be)),super.onEvent(be)}initialized(){var be=this;return(0,E.Z)(function*(){yield be.initPromise})()}}function v(Ve){return Le.apply(this,arguments)}function Le(){return(Le=(0,E.Z)(function*(Ve){const be=yield St()._get(pt(Ve));return be&&(yield St()._remove(pt(Ve))),be})).apply(this,arguments)}function ft(){const Ve=[],be="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Pe=0;Pe<20;Pe++){const Et=Math.floor(Math.random()*be.length);Ve.push(be.charAt(Et))}return Ve.join("")}function St(){return(0,ie.ay)(ie.b)}function pt(Ve){return(0,ie.az)("authEvent",Ve.config.apiKey,Ve.name)}function xn(Ve){if(!(null==Ve?void 0:Ve.includes("?")))return{};const[be,...Pe]=Ve.split("?");return(0,L.zd)(Pe.join("?"))}function tt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,ie.aw)("no-auth-event")}}function Vt(){var Ve;return(null===(Ve=null==self?void 0:self.location)||void 0===Ve?void 0:Ve.protocol)||null}function wn(Ve=(0,L.z$)()){return!("file:"!==Vt()&&"ionic:"!==Vt()&&"capacitor:"!==Vt()||!Ve.toLowerCase().match(/iphone|ipad|ipod|android/))}function Rr(){try{const Ve=self.localStorage,be=ie.aI();if(Ve)return Ve.setItem(be,"1"),Ve.removeItem(be),!function(Ve=(0,L.z$)()){return(0,L.w1)()&&11===(null==document?void 0:document.documentMode)||function(Ve=(0,L.z$)()){return/Edge\/\d+/.test(Ve)}(Ve)}()||(0,L.hl)()}catch(Ve){return Sr()&&(0,L.hl)()}return!1}function Sr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ht(){return("http:"===Vt()||"https:"===Vt()||(0,L.ru)()||wn())&&!((0,L.b$)()||(0,L.UG)())&&Rr()&&!Sr()}function Gn(){return wn()&&"undefined"!=typeof document}function En(){return(En=(0,E.Z)(function*(){return!!Gn()&&new Promise(Ve=>{const be=setTimeout(()=>{Ve(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(be),Ve(!0)})})})).apply(this,arguments)}const or={LOCAL:"local",NONE:"none",SESSION:"session"},sr=ie.ax,pr="persistence";function Nr(Ve){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,E.Z)(function*(Ve){yield Ve._initializationPromise;const be=gr(),Pe=ie.az(pr,Ve.config.apiKey,Ve.name);be&&be.setItem(Pe,Ve._getPersistence())})).apply(this,arguments)}function gr(){var Ve;try{return(null===(Ve="undefined"!=typeof window?window:null)||void 0===Ve?void 0:Ve.sessionStorage)||null}catch(be){return null}}const In=ie.ax;class Ft{constructor(){this.browserResolver=ie.ay(ie.k),this.cordovaResolver=ie.ay(class{constructor(){this._redirectPersistence=ie.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ie.aB,this._overrideRedirectResult=ie.aC}_initialize(be){var Pe=this;return(0,E.Z)(function*(){const Et=be._key();let tn=Pe.eventManagers.get(Et);return tn||(tn=new st(be),Pe.eventManagers.set(Et,tn),Pe.attachCallbackListeners(be,tn)),tn})()}_openPopup(be){(0,ie.at)(be,"operation-not-supported-in-this-environment")}_openRedirect(be,Pe,Et,tn){var $n=this;return(0,E.Z)(function*(){!function(Ve){var be,Pe,Et,tn,$n,Rn,Un,yn,Dn,Er;const rn=oe();(0,ie.ax)("function"==typeof(null===(be=null==rn?void 0:rn.universalLinks)||void 0===be?void 0:be.subscribe),Ve,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,ie.ax)(void 0!==(null===(Pe=null==rn?void 0:rn.BuildInfo)||void 0===Pe?void 0:Pe.packageName),Ve,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,ie.ax)("function"==typeof(null===($n=null===(tn=null===(Et=null==rn?void 0:rn.cordova)||void 0===Et?void 0:Et.plugins)||void 0===tn?void 0:tn.browsertab)||void 0===$n?void 0:$n.openUrl),Ve,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,ie.ax)("function"==typeof(null===(yn=null===(Un=null===(Rn=null==rn?void 0:rn.cordova)||void 0===Rn?void 0:Rn.plugins)||void 0===Un?void 0:Un.browsertab)||void 0===yn?void 0:yn.isAvailable),Ve,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,ie.ax)("function"==typeof(null===(Er=null===(Dn=null==rn?void 0:rn.cordova)||void 0===Dn?void 0:Dn.InAppBrowser)||void 0===Er?void 0:Er.open),Ve,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(be);const Rn=yield $n._initialize(be);yield Rn.initialized(),Rn.resetRedirect(),(0,ie.aD)(),yield $n._originValidation(be);const Un=function(Ve,be,Pe=null){return{type:be,eventId:Pe,urlResponse:null,sessionId:ft(),postBody:null,tenantId:Ve.tenantId,error:(0,ie.aw)(Ve,"no-auth-event")}}(be,Et,tn);yield function(Ve,be){return St()._set(pt(Ve),be)}(be,Un);const yn=yield function(Ve,be,Pe){return ve.apply(this,arguments)}(be,Un,Pe),Dn=yield function(Ve){const{cordova:be}=oe();return new Promise(Pe=>{be.plugins.browsertab.isAvailable(Et=>{let tn=null;Et?be.plugins.browsertab.openUrl(Ve):tn=be.InAppBrowser.open(Ve,(0,ie.ap)()?"_blank":"_system","location=yes"),Pe(tn)})})}(yn);return function(Ve,be,Pe){return Ee.apply(this,arguments)}(be,Rn,Dn)})()}_isIframeWebStorageSupported(be,Pe){throw new Error("Method not implemented.")}_originValidation(be){const Pe=be._key();return this.originValidationPromises[Pe]||(this.originValidationPromises[Pe]=function(Ve){return _e.apply(this,arguments)}(be)),this.originValidationPromises[Pe]}attachCallbackListeners(be,Pe){const{universalLinks:Et,handleOpenURL:tn,BuildInfo:$n}=oe(),Rn=setTimeout((0,E.Z)(function*(){yield v(be),Pe.onEvent(tt())}),500),Un=function(){var Er=(0,E.Z)(function*(rn){clearTimeout(Rn);const nn=yield v(be);let Yt=null;nn&&(null==rn?void 0:rn.url)&&(Yt=function(Ve,be){var Pe,Et;const tn=function(Ve){const be=xn(Ve),Pe=be.link?decodeURIComponent(be.link):void 0,Et=xn(Pe).link,tn=be.deep_link_id?decodeURIComponent(be.deep_link_id):void 0;return xn(tn).link||tn||Et||Pe||Ve}(be);if(tn.includes("/__/auth/callback")){const $n=xn(tn),Rn=$n.firebaseError?function(Ve){try{return JSON.parse(Ve)}catch(be){return null}}(decodeURIComponent($n.firebaseError)):null,Un=null===(Et=null===(Pe=null==Rn?void 0:Rn.code)||void 0===Pe?void 0:Pe.split("auth/"))||void 0===Et?void 0:Et[1],yn=Un?(0,ie.aw)(Un):null;return yn?{type:Ve.type,eventId:Ve.eventId,tenantId:Ve.tenantId,error:yn,urlResponse:null,sessionId:null,postBody:null}:{type:Ve.type,eventId:Ve.eventId,tenantId:Ve.tenantId,sessionId:Ve.sessionId,urlResponse:tn,postBody:null}}return null}(nn,rn.url)),Pe.onEvent(Yt||tt())});return function(nn){return Er.apply(this,arguments)}}();void 0!==Et&&"function"==typeof Et.subscribe&&Et.subscribe(null,Un);const yn=tn,Dn=`${$n.packageName.toLowerCase()}://`;oe().handleOpenURL=function(){var Er=(0,E.Z)(function*(rn){if(rn.toLowerCase().startsWith(Dn)&&Un({url:rn}),"function"==typeof yn)try{yn(rn)}catch(nn){console.error(nn)}});return function(rn){return Er.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ie.a,this._completeRedirectFn=ie.aB,this._overrideRedirectResult=ie.aC}_initialize(be){var Pe=this;return(0,E.Z)(function*(){return yield Pe.selectUnderlyingResolver(),Pe.assertedUnderlyingResolver._initialize(be)})()}_openPopup(be,Pe,Et,tn){var $n=this;return(0,E.Z)(function*(){return yield $n.selectUnderlyingResolver(),$n.assertedUnderlyingResolver._openPopup(be,Pe,Et,tn)})()}_openRedirect(be,Pe,Et,tn){var $n=this;return(0,E.Z)(function*(){return yield $n.selectUnderlyingResolver(),$n.assertedUnderlyingResolver._openRedirect(be,Pe,Et,tn)})()}_isIframeWebStorageSupported(be,Pe){this.assertedUnderlyingResolver._isIframeWebStorageSupported(be,Pe)}_originValidation(be){return this.assertedUnderlyingResolver._originValidation(be)}get _shouldInitProactively(){return Gn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return In(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var be=this;return(0,E.Z)(function*(){if(be.underlyingResolver)return;const Pe=yield function(){return En.apply(this,arguments)}();be.underlyingResolver=Pe?be.cordovaResolver:be.browserResolver})()}}function ci(Ve){return Ve.unwrap()}function Cn(Ve){return Pr(Ve)}function Pr(Ve){const{_tokenResponse:be}=Ve instanceof L.ZR?Ve.customData:Ve;if(!be)return null;if(!(Ve instanceof L.ZR)&&"temporaryProof"in be&&"phoneNumber"in be)return ie.P.credentialFromResult(Ve);const Pe=be.providerId;if(!Pe||Pe===ie.o.PASSWORD)return null;let Et;switch(Pe){case ie.o.GOOGLE:Et=ie.Q;break;case ie.o.FACEBOOK:Et=ie.N;break;case ie.o.GITHUB:Et=ie.T;break;case ie.o.TWITTER:Et=ie.W;break;default:const{oauthIdToken:tn,oauthAccessToken:$n,oauthTokenSecret:Rn,pendingToken:Un,nonce:yn}=be;return $n||Rn||tn||Un?Un?Pe.startsWith("saml.")?ie.aL._create(Pe,Un):ie.J._fromParams({providerId:Pe,signInMethod:Pe,pendingToken:Un,idToken:tn,accessToken:$n}):new ie.U(Pe).credential({idToken:tn,accessToken:$n,rawNonce:yn}):null}return Ve instanceof L.ZR?Et.credentialFromError(Ve):Et.credentialFromResult(Ve)}function Cr(Ve,be){return be.catch(Pe=>{throw Pe instanceof L.ZR&&function(Ve,be){var Pe,Et;const tn=null===(Pe=be.customData)||void 0===Pe?void 0:Pe._tokenResponse;if("auth/multi-factor-auth-required"===(null===(Et=be)||void 0===Et?void 0:Et.code))be.resolver=new He(Ve,ie.an(Ve,be));else if(tn){const $n=Pr(be),Rn=be;$n&&(Rn.credential=$n,Rn.tenantId=tn.tenantId||void 0,Rn.email=tn.email||void 0,Rn.phoneNumber=tn.phoneNumber||void 0)}}(Ve,Pe),Pe}).then(Pe=>{const tn=Pe.user;return{operationType:Pe.operationType,credential:Cn(Pe),additionalUserInfo:ie.al(Pe),user:Xe.getOrCreate(tn)}})}function nr(Ve,be){return mt.apply(this,arguments)}function mt(){return(mt=(0,E.Z)(function*(Ve,be){const Pe=yield be;return{verificationId:Pe.verificationId,confirm:Et=>Cr(Ve,Pe.confirm(Et))}})).apply(this,arguments)}class He{constructor(be,Pe){this.resolver=Pe,this.auth=be.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(be){return Cr(ci(this.auth),this.resolver.resolveSignIn(be))}}class Xe{constructor(be){this._delegate=be,this.multiFactor=ie.ao(be)}static getOrCreate(be){return Xe.USER_MAP.has(be)||Xe.USER_MAP.set(be,new Xe(be)),Xe.USER_MAP.get(be)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(be){return this._delegate.getIdTokenResult(be)}getIdToken(be){return this._delegate.getIdToken(be)}linkAndRetrieveDataWithCredential(be){return this.linkWithCredential(be)}linkWithCredential(be){var Pe=this;return(0,E.Z)(function*(){return Cr(Pe.auth,ie.Z(Pe._delegate,be))})()}linkWithPhoneNumber(be,Pe){var Et=this;return(0,E.Z)(function*(){return nr(Et.auth,ie.l(Et._delegate,be,Pe))})()}linkWithPopup(be){var Pe=this;return(0,E.Z)(function*(){return Cr(Pe.auth,ie.d(Pe._delegate,be,Ft))})()}linkWithRedirect(be){var Pe=this;return(0,E.Z)(function*(){return yield Nr(ie.aE(Pe.auth)),ie.g(Pe._delegate,be,Ft)})()}reauthenticateAndRetrieveDataWithCredential(be){return this.reauthenticateWithCredential(be)}reauthenticateWithCredential(be){var Pe=this;return(0,E.Z)(function*(){return Cr(Pe.auth,ie._(Pe._delegate,be))})()}reauthenticateWithPhoneNumber(be,Pe){return nr(this.auth,ie.r(this._delegate,be,Pe))}reauthenticateWithPopup(be){return Cr(this.auth,ie.e(this._delegate,be,Ft))}reauthenticateWithRedirect(be){var Pe=this;return(0,E.Z)(function*(){return yield Nr(ie.aE(Pe.auth)),ie.h(Pe._delegate,be,Ft)})()}sendEmailVerification(be){return ie.ab(this._delegate,be)}unlink(be){var Pe=this;return(0,E.Z)(function*(){return yield ie.ak(Pe._delegate,be),Pe})()}updateEmail(be){return ie.ag(this._delegate,be)}updatePassword(be){return ie.ah(this._delegate,be)}updatePhoneNumber(be){return ie.u(this._delegate,be)}updateProfile(be){return ie.af(this._delegate,be)}verifyBeforeUpdateEmail(be,Pe){return ie.ac(this._delegate,be,Pe)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Xe.USER_MAP=new WeakMap;const at=ie.ax;let Qe=(()=>{class Ve{constructor(Pe,Et){if(this.app=Pe,Et.isInitialized())return this._delegate=Et.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:tn}=Pe.options;at(tn,"invalid-api-key",{appName:Pe.name}),at(tn,"invalid-api-key",{appName:Pe.name});const $n="undefined"!=typeof window?Ft:void 0;this._delegate=Et.initialize({options:{persistence:Qt(tn,Pe.name),popupRedirectResolver:$n}}),this._delegate._updateErrorMap(ie.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Xe.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Pe){this._delegate.languageCode=Pe}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Pe){this._delegate.tenantId=Pe}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Pe,Et){ie.G(this._delegate,Pe,Et)}applyActionCode(Pe){return ie.a2(this._delegate,Pe)}checkActionCode(Pe){return ie.a3(this._delegate,Pe)}confirmPasswordReset(Pe,Et){return ie.a1(this._delegate,Pe,Et)}createUserWithEmailAndPassword(Pe,Et){var tn=this;return(0,E.Z)(function*(){return Cr(tn._delegate,ie.a5(tn._delegate,Pe,Et))})()}fetchProvidersForEmail(Pe){return this.fetchSignInMethodsForEmail(Pe)}fetchSignInMethodsForEmail(Pe){return ie.aa(this._delegate,Pe)}isSignInWithEmailLink(Pe){return ie.a8(this._delegate,Pe)}getRedirectResult(){var Pe=this;return(0,E.Z)(function*(){at(Ht(),Pe._delegate,"operation-not-supported-in-this-environment");const Et=yield ie.j(Pe._delegate,Ft);return Et?Cr(Pe._delegate,Promise.resolve(Et)):{credential:null,user:null}})()}addFrameworkForLogging(Pe){!function(Ve,be){(0,ie.aE)(Ve)._logFramework(be)}(this._delegate,Pe)}onAuthStateChanged(Pe,Et,tn){const{next:$n,error:Rn,complete:Un}=wt(Pe,Et,tn);return this._delegate.onAuthStateChanged($n,Rn,Un)}onIdTokenChanged(Pe,Et,tn){const{next:$n,error:Rn,complete:Un}=wt(Pe,Et,tn);return this._delegate.onIdTokenChanged($n,Rn,Un)}sendSignInLinkToEmail(Pe,Et){return ie.a7(this._delegate,Pe,Et)}sendPasswordResetEmail(Pe,Et){return ie.a0(this._delegate,Pe,Et||void 0)}setPersistence(Pe){var Et=this;return(0,E.Z)(function*(){let tn;switch(function(Ve,be){sr(Object.values(or).includes(be),Ve,"invalid-persistence-type"),(0,L.b$)()?sr(be!==or.SESSION,Ve,"unsupported-persistence-type"):(0,L.UG)()?sr(be===or.NONE,Ve,"unsupported-persistence-type"):Sr()?sr(be===or.NONE||be===or.LOCAL&&(0,L.hl)(),Ve,"unsupported-persistence-type"):sr(be===or.NONE||Rr(),Ve,"unsupported-persistence-type")}(Et._delegate,Pe),Pe){case or.SESSION:tn=ie.a;break;case or.LOCAL:tn=(yield ie.ay(ie.i)._isAvailable())?ie.i:ie.b;break;case or.NONE:tn=ie.L;break;default:return ie.at("argument-error",{appName:Et._delegate.name})}return Et._delegate.setPersistence(tn)})()}signInAndRetrieveDataWithCredential(Pe){return this.signInWithCredential(Pe)}signInAnonymously(){return Cr(this._delegate,ie.X(this._delegate))}signInWithCredential(Pe){return Cr(this._delegate,ie.Y(this._delegate,Pe))}signInWithCustomToken(Pe){return Cr(this._delegate,ie.$(this._delegate,Pe))}signInWithEmailAndPassword(Pe,Et){return Cr(this._delegate,ie.a6(this._delegate,Pe,Et))}signInWithEmailLink(Pe,Et){return Cr(this._delegate,ie.a9(this._delegate,Pe,Et))}signInWithPhoneNumber(Pe,Et){return nr(this._delegate,ie.s(this._delegate,Pe,Et))}signInWithPopup(Pe){var Et=this;return(0,E.Z)(function*(){return at(Ht(),Et._delegate,"operation-not-supported-in-this-environment"),Cr(Et._delegate,ie.c(Et._delegate,Pe,Ft))})()}signInWithRedirect(Pe){var Et=this;return(0,E.Z)(function*(){return at(Ht(),Et._delegate,"operation-not-supported-in-this-environment"),yield Nr(Et._delegate),ie.f(Et._delegate,Pe,Ft)})()}updateCurrentUser(Pe){return this._delegate.updateCurrentUser(Pe)}verifyPasswordResetCode(Pe){return ie.a4(this._delegate,Pe)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Ve.Persistence=or,Ve})();function wt(Ve,be,Pe){let Et=Ve;"function"!=typeof Ve&&({next:Et,error:be,complete:Pe}=Ve);const tn=Et;return{next:Rn=>tn(Rn&&Xe.getOrCreate(Rn)),error:be,complete:Pe}}function Qt(Ve,be){const Pe=function(Ve,be){const Pe=gr();if(!Pe)return[];const Et=ie.az(pr,Ve,be);switch(Pe.getItem(Et)){case or.NONE:return[ie.L];case or.LOCAL:return[ie.i,ie.a];case or.SESSION:return[ie.a];default:return[]}}(Ve,be);if("undefined"!=typeof self&&!Pe.includes(ie.i)&&Pe.push(ie.i),"undefined"!=typeof window)for(const Et of[ie.b,ie.a])Pe.includes(Et)||Pe.push(Et);return Pe.includes(ie.L)||Pe.push(ie.L),Pe}class $t{constructor(){this.providerId="phone",this._delegate=new ie.P(ci(O.Z.auth()))}static credential(be,Pe){return ie.P.credential(be,Pe)}verifyPhoneNumber(be,Pe){return this._delegate.verifyPhoneNumber(be,Pe)}unwrap(){return this._delegate}}$t.PHONE_SIGN_IN_METHOD=ie.P.PHONE_SIGN_IN_METHOD,$t.PROVIDER_ID=ie.P.PROVIDER_ID;const Wt=ie.ax;var Ve;(Ve=O.Z).INTERNAL.registerComponent(new Ie.wA("auth-compat",be=>{const Pe=be.getProvider("app-compat").getImmediate(),Et=be.getProvider("auth");return new Qe(Pe,Et)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ie.A.EMAIL_SIGNIN,PASSWORD_RESET:ie.A.PASSWORD_RESET,RECOVER_EMAIL:ie.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ie.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ie.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ie.A.VERIFY_EMAIL}},EmailAuthProvider:ie.M,FacebookAuthProvider:ie.N,GithubAuthProvider:ie.T,GoogleAuthProvider:ie.Q,OAuthProvider:ie.U,SAMLAuthProvider:ie.V,PhoneAuthProvider:$t,PhoneMultiFactorGenerator:ie.m,RecaptchaVerifier:class{constructor(be,Pe,Et=O.Z.app()){var tn;Wt(null===(tn=Et.options)||void 0===tn?void 0:tn.apiKey,"invalid-api-key",{appName:Et.name}),this._delegate=new ie.R(be,Pe,Et.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:ie.W,Auth:Qe,AuthCredential:ie.H,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Ve.registerVersion("@firebase/auth-compat","0.2.23")},6215:(cn,rt,F)=>{"use strict";F.d(rt,{X:()=>ie});var E=F(9765),O=F(7971);class ie extends E.xQ{constructor(ue){super(),this._value=ue}get value(){return this.getValue()}_subscribe(ue){const ee=super._subscribe(ue);return ee&&!ee.closed&&ue.next(this._value),ee}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new O.N;return this._value}next(ue){super.next(this._value=ue)}}},8891:(cn,rt,F)=>{"use strict";F.d(rt,{y:()=>Se});var E=F(7393),ie=F(9181),L=F(6490),ee=F(6554),Ie=F(4022),oe=F(2494);let Se=(()=>{class ve{constructor(_e){this._isScalar=!1,_e&&(this._subscribe=_e)}lift(_e){const Te=new ve;return Te.source=this,Te.operator=_e,Te}subscribe(_e,Te,lt){const{operator:Ee}=this,Ke=function(ve,we,_e){if(ve){if(ve instanceof E.L)return ve;if(ve[ie.b])return ve[ie.b]()}return ve||we||_e?new E.L(ve,we,_e):new E.L(L.c)}(_e,Te,lt);if(Ke.add(Ee?Ee.call(Ke,this.source):this.source||oe.v.useDeprecatedSynchronousErrorHandling&&!Ke.syncErrorThrowable?this._subscribe(Ke):this._trySubscribe(Ke)),oe.v.useDeprecatedSynchronousErrorHandling&&Ke.syncErrorThrowable&&(Ke.syncErrorThrowable=!1,Ke.syncErrorThrown))throw Ke.syncErrorValue;return Ke}_trySubscribe(_e){try{return this._subscribe(_e)}catch(Te){oe.v.useDeprecatedSynchronousErrorHandling&&(_e.syncErrorThrown=!0,_e.syncErrorValue=Te),function(ve){for(;ve;){const{closed:we,destination:_e,isStopped:Te}=ve;if(we||Te)return!1;ve=_e&&_e instanceof E.L?_e:null}return!0}(_e)?_e.error(Te):console.warn(Te)}}forEach(_e,Te){return new(Te=ae(Te))((lt,Ee)=>{let Ke;Ke=this.subscribe(Re=>{try{_e(Re)}catch(Ge){Ee(Ge),Ke&&Ke.unsubscribe()}},Ee,lt)})}_subscribe(_e){const{source:Te}=this;return Te&&Te.subscribe(_e)}[ee.L](){return this}pipe(..._e){return 0===_e.length?this:(0,Ie.U)(_e)(this)}toPromise(_e){return new(_e=ae(_e))((Te,lt)=>{let Ee;this.subscribe(Ke=>Ee=Ke,Ke=>lt(Ke),()=>Te(Ee))})}}return ve.create=we=>new ve(we),ve})();function ae(ve){if(ve||(ve=oe.v.Promise||Promise),!ve)throw new Error("no Promise impl found");return ve}},6490:(cn,rt,F)=>{"use strict";F.d(rt,{c:()=>ie});var E=F(2494),O=F(4449);const ie={closed:!0,next(L){},error(L){if(E.v.useDeprecatedSynchronousErrorHandling)throw L;(0,O.z)(L)},complete(){}}},5197:(cn,rt,F)=>{"use strict";F.d(rt,{L:()=>O});var E=F(7393);class O extends E.L{notifyNext(L,ue,ee,Ie,oe){this.destination.next(ue)}notifyError(L,ue){this.destination.error(L)}notifyComplete(L){this.destination.complete()}}},9765:(cn,rt,F)=>{"use strict";F.d(rt,{Yc:()=>Ie,xQ:()=>oe});var E=F(8891),O=F(7393),ie=F(5319),L=F(7971),ue=F(8858),ee=F(9181);class Ie extends O.L{constructor(ve){super(ve),this.destination=ve}}let oe=(()=>{class ae extends E.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ee.b](){return new Ie(this)}lift(we){const _e=new Se(this,this);return _e.operator=we,_e}next(we){if(this.closed)throw new L.N;if(!this.isStopped){const{observers:_e}=this,Te=_e.length,lt=_e.slice();for(let Ee=0;Ee<Te;Ee++)lt[Ee].next(we)}}error(we){if(this.closed)throw new L.N;this.hasError=!0,this.thrownError=we,this.isStopped=!0;const{observers:_e}=this,Te=_e.length,lt=_e.slice();for(let Ee=0;Ee<Te;Ee++)lt[Ee].error(we);this.observers.length=0}complete(){if(this.closed)throw new L.N;this.isStopped=!0;const{observers:we}=this,_e=we.length,Te=we.slice();for(let lt=0;lt<_e;lt++)Te[lt].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(we){if(this.closed)throw new L.N;return super._trySubscribe(we)}_subscribe(we){if(this.closed)throw new L.N;return this.hasError?(we.error(this.thrownError),ie.w.EMPTY):this.isStopped?(we.complete(),ie.w.EMPTY):(this.observers.push(we),new ue.W(this,we))}asObservable(){const we=new E.y;return we.source=this,we}}return ae.create=(ve,we)=>new Se(ve,we),ae})();class Se extends oe{constructor(ve,we){super(),this.destination=ve,this.source=we}next(ve){const{destination:we}=this;we&&we.next&&we.next(ve)}error(ve){const{destination:we}=this;we&&we.error&&this.destination.error(ve)}complete(){const{destination:ve}=this;ve&&ve.complete&&this.destination.complete()}_subscribe(ve){const{source:we}=this;return we?this.source.subscribe(ve):ie.w.EMPTY}}},8858:(cn,rt,F)=>{"use strict";F.d(rt,{W:()=>O});var E=F(5319);class O extends E.w{constructor(L,ue){super(),this.subject=L,this.subscriber=ue,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const L=this.subject,ue=L.observers;if(this.subject=null,!ue||0===ue.length||L.isStopped||L.closed)return;const ee=ue.indexOf(this.subscriber);-1!==ee&&ue.splice(ee,1)}}},7393:(cn,rt,F)=>{"use strict";F.d(rt,{L:()=>Ie});var E=F(9105),O=F(6490),ie=F(5319),L=F(9181),ue=F(2494),ee=F(4449);class Ie extends ie.w{constructor(ae,ve,we){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=O.c;break;case 1:if(!ae){this.destination=O.c;break}if("object"==typeof ae){ae instanceof Ie?(this.syncErrorThrowable=ae.syncErrorThrowable,this.destination=ae,ae.add(this)):(this.syncErrorThrowable=!0,this.destination=new oe(this,ae));break}default:this.syncErrorThrowable=!0,this.destination=new oe(this,ae,ve,we)}}[L.b](){return this}static create(ae,ve,we){const _e=new Ie(ae,ve,we);return _e.syncErrorThrowable=!1,_e}next(ae){this.isStopped||this._next(ae)}error(ae){this.isStopped||(this.isStopped=!0,this._error(ae))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(ae){this.destination.next(ae)}_error(ae){this.destination.error(ae),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:ae}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=ae,this}}class oe extends Ie{constructor(ae,ve,we,_e){super(),this._parentSubscriber=ae;let Te,lt=this;(0,E.m)(ve)?Te=ve:ve&&(Te=ve.next,we=ve.error,_e=ve.complete,ve!==O.c&&(lt=Object.create(ve),(0,E.m)(lt.unsubscribe)&&this.add(lt.unsubscribe.bind(lt)),lt.unsubscribe=this.unsubscribe.bind(this))),this._context=lt,this._next=Te,this._error=we,this._complete=_e}next(ae){if(!this.isStopped&&this._next){const{_parentSubscriber:ve}=this;ue.v.useDeprecatedSynchronousErrorHandling&&ve.syncErrorThrowable?this.__tryOrSetError(ve,this._next,ae)&&this.unsubscribe():this.__tryOrUnsub(this._next,ae)}}error(ae){if(!this.isStopped){const{_parentSubscriber:ve}=this,{useDeprecatedSynchronousErrorHandling:we}=ue.v;if(this._error)we&&ve.syncErrorThrowable?(this.__tryOrSetError(ve,this._error,ae),this.unsubscribe()):(this.__tryOrUnsub(this._error,ae),this.unsubscribe());else if(ve.syncErrorThrowable)we?(ve.syncErrorValue=ae,ve.syncErrorThrown=!0):(0,ee.z)(ae),this.unsubscribe();else{if(this.unsubscribe(),we)throw ae;(0,ee.z)(ae)}}}complete(){if(!this.isStopped){const{_parentSubscriber:ae}=this;if(this._complete){const ve=()=>this._complete.call(this._context);ue.v.useDeprecatedSynchronousErrorHandling&&ae.syncErrorThrowable?(this.__tryOrSetError(ae,ve),this.unsubscribe()):(this.__tryOrUnsub(ve),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(ae,ve){try{ae.call(this._context,ve)}catch(we){if(this.unsubscribe(),ue.v.useDeprecatedSynchronousErrorHandling)throw we;(0,ee.z)(we)}}__tryOrSetError(ae,ve,we){if(!ue.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{ve.call(this._context,we)}catch(_e){return ue.v.useDeprecatedSynchronousErrorHandling?(ae.syncErrorValue=_e,ae.syncErrorThrown=!0,!0):((0,ee.z)(_e),!0)}return!1}_unsubscribe(){const{_parentSubscriber:ae}=this;this._context=null,this._parentSubscriber=null,ae.unsubscribe()}}},5319:(cn,rt,F)=>{"use strict";F.d(rt,{w:()=>ee});var E=F(9796),O=F(1555),ie=F(9105);const ue=(()=>{function oe(Se){return Error.call(this),this.message=Se?`${Se.length} errors occurred during unsubscription:\n${Se.map((ae,ve)=>`${ve+1}) ${ae.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Se,this}return oe.prototype=Object.create(Error.prototype),oe})();class ee{constructor(Se){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,Se&&(this._ctorUnsubscribe=!0,this._unsubscribe=Se)}unsubscribe(){let Se;if(this.closed)return;let{_parentOrParents:ae,_ctorUnsubscribe:ve,_unsubscribe:we,_subscriptions:_e}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,ae instanceof ee)ae.remove(this);else if(null!==ae)for(let Te=0;Te<ae.length;++Te)ae[Te].remove(this);if((0,ie.m)(we)){ve&&(this._unsubscribe=void 0);try{we.call(this)}catch(Te){Se=Te instanceof ue?Ie(Te.errors):[Te]}}if((0,E.k)(_e)){let Te=-1,lt=_e.length;for(;++Te<lt;){const Ee=_e[Te];if((0,O.K)(Ee))try{Ee.unsubscribe()}catch(Ke){Se=Se||[],Ke instanceof ue?Se=Se.concat(Ie(Ke.errors)):Se.push(Ke)}}}if(Se)throw new ue(Se)}add(Se){let ae=Se;if(!Se)return ee.EMPTY;switch(typeof Se){case"function":ae=new ee(Se);case"object":if(ae===this||ae.closed||"function"!=typeof ae.unsubscribe)return ae;if(this.closed)return ae.unsubscribe(),ae;if(!(ae instanceof ee)){const _e=ae;ae=new ee,ae._subscriptions=[_e]}break;default:throw new Error("unrecognized teardown "+Se+" added to Subscription.")}let{_parentOrParents:ve}=ae;if(null===ve)ae._parentOrParents=this;else if(ve instanceof ee){if(ve===this)return ae;ae._parentOrParents=[ve,this]}else{if(-1!==ve.indexOf(this))return ae;ve.push(this)}const we=this._subscriptions;return null===we?this._subscriptions=[ae]:we.push(ae),ae}remove(Se){const ae=this._subscriptions;if(ae){const ve=ae.indexOf(Se);-1!==ve&&ae.splice(ve,1)}}}var oe;function Ie(oe){return oe.reduce((Se,ae)=>Se.concat(ae instanceof ue?ae.errors:ae),[])}ee.EMPTY=((oe=new ee).closed=!0,oe)},2494:(cn,rt,F)=>{"use strict";F.d(rt,{v:()=>O});let E=!1;const O={Promise:void 0,set useDeprecatedSynchronousErrorHandling(ie){if(ie){const L=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+L.stack)}else E&&console.log("RxJS: Back to a better error behavior. Thank you. <3");E=ie},get useDeprecatedSynchronousErrorHandling(){return E}}},5345:(cn,rt,F)=>{"use strict";F.d(rt,{IY:()=>L,Ds:()=>ee,ft:()=>oe});var E=F(7393),O=F(8891),ie=F(7444);class L extends E.L{constructor(ae){super(),this.parent=ae}_next(ae){this.parent.notifyNext(ae)}_error(ae){this.parent.notifyError(ae),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ee extends E.L{notifyNext(ae){this.destination.next(ae)}notifyError(ae){this.destination.error(ae)}notifyComplete(){this.destination.complete()}}function oe(Se,ae){if(ae.closed)return;if(Se instanceof O.y)return Se.subscribe(ae);let ve;try{ve=(0,ie.s)(Se)(ae)}catch(we){ae.error(we)}return ve}},2441:(cn,rt,F)=>{"use strict";F.d(rt,{c:()=>ue,N:()=>ee});var E=F(9765),O=F(8891),ie=F(5319),L=F(1307);class ue extends O.y{constructor(ve,we){super(),this.source=ve,this.subjectFactory=we,this._refCount=0,this._isComplete=!1}_subscribe(ve){return this.getSubject().subscribe(ve)}getSubject(){const ve=this._subject;return(!ve||ve.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let ve=this._connection;return ve||(this._isComplete=!1,ve=this._connection=new ie.w,ve.add(this.source.subscribe(new Ie(this.getSubject(),this))),ve.closed&&(this._connection=null,ve=ie.w.EMPTY)),ve}refCount(){return(0,L.x)()(this)}}const ee=(()=>{const ae=ue.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:ae._subscribe},_isComplete:{value:ae._isComplete,writable:!0},getSubject:{value:ae.getSubject},connect:{value:ae.connect},refCount:{value:ae.refCount}}})();class Ie extends E.Yc{constructor(ve,we){super(ve),this.connectable=we}_error(ve){this._unsubscribe(),super._error(ve)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const ve=this.connectable;if(ve){this.connectable=null;const we=ve._connection;ve._refCount=0,ve._subject=null,ve._connection=null,we&&we.unsubscribe()}}}},8071:(cn,rt,F)=>{"use strict";F.d(rt,{z:()=>L});var E=F(5917),O=F(3282);function L(...ue){return(0,O.J)(1)((0,E.of)(...ue))}},9193:(cn,rt,F)=>{"use strict";F.d(rt,{E:()=>O,c:()=>ie});var E=F(8891);const O=new E.y(ue=>ue.complete());function ie(ue){return ue?function(ue){return new E.y(ee=>ue.schedule(()=>ee.complete()))}(ue):O}},4402:(cn,rt,F)=>{"use strict";F.d(rt,{D:()=>lt});var E=F(8891),O=F(7444),ie=F(5319),L=F(6554),Ie=F(4087),oe=F(377),ve=F(4072),we=F(9489);function lt(Ee,Ke){return Ke?function(Ee,Ke){if(null!=Ee){if(function(Ee){return Ee&&"function"==typeof Ee[L.L]}(Ee))return function(Ee,Ke){return new E.y(Re=>{const Ge=new ie.w;return Ge.add(Ke.schedule(()=>{const Fe=Ee[L.L]();Ge.add(Fe.subscribe({next(Oe){Ge.add(Ke.schedule(()=>Re.next(Oe)))},error(Oe){Ge.add(Ke.schedule(()=>Re.error(Oe)))},complete(){Ge.add(Ke.schedule(()=>Re.complete()))}}))})),Ge})}(Ee,Ke);if((0,ve.t)(Ee))return function(Ee,Ke){return new E.y(Re=>{const Ge=new ie.w;return Ge.add(Ke.schedule(()=>Ee.then(Fe=>{Ge.add(Ke.schedule(()=>{Re.next(Fe),Ge.add(Ke.schedule(()=>Re.complete()))}))},Fe=>{Ge.add(Ke.schedule(()=>Re.error(Fe)))}))),Ge})}(Ee,Ke);if((0,we.z)(Ee))return(0,Ie.r)(Ee,Ke);if(function(Ee){return Ee&&"function"==typeof Ee[oe.hZ]}(Ee)||"string"==typeof Ee)return function(Ee,Ke){if(!Ee)throw new Error("Iterable cannot be null");return new E.y(Re=>{const Ge=new ie.w;let Fe;return Ge.add(()=>{Fe&&"function"==typeof Fe.return&&Fe.return()}),Ge.add(Ke.schedule(()=>{Fe=Ee[oe.hZ](),Ge.add(Ke.schedule(function(){if(Re.closed)return;let Oe,st;try{const It=Fe.next();Oe=It.value,st=It.done}catch(It){return void Re.error(It)}st?Re.complete():(Re.next(Oe),this.schedule())}))})),Ge})}(Ee,Ke)}throw new TypeError((null!==Ee&&typeof Ee||Ee)+" is not observable")}(Ee,Ke):Ee instanceof E.y?Ee:new E.y((0,O.s)(Ee))}},6693:(cn,rt,F)=>{"use strict";F.d(rt,{n:()=>L});var E=F(8891),O=F(5015),ie=F(4087);function L(ue,ee){return ee?(0,ie.r)(ue,ee):new E.y((0,O.V)(ue))}},6682:(cn,rt,F)=>{"use strict";F.d(rt,{T:()=>ue});var E=F(8891),O=F(4869),ie=F(3282),L=F(6693);function ue(...ee){let Ie=Number.POSITIVE_INFINITY,oe=null,Se=ee[ee.length-1];return(0,O.K)(Se)?(oe=ee.pop(),ee.length>1&&"number"==typeof ee[ee.length-1]&&(Ie=ee.pop())):"number"==typeof Se&&(Ie=ee.pop()),null===oe&&1===ee.length&&ee[0]instanceof E.y?ee[0]:(0,ie.J)(Ie)((0,L.n)(ee,oe))}},5917:(cn,rt,F)=>{"use strict";F.d(rt,{of:()=>L});var E=F(4869),O=F(6693),ie=F(4087);function L(...ue){let ee=ue[ue.length-1];return(0,E.K)(ee)?(ue.pop(),(0,ie.r)(ue,ee)):(0,O.n)(ue)}},5242:(cn,rt,F)=>{"use strict";F.d(rt,{d:()=>O});var E=F(7393);function O(ue=null){return ee=>ee.lift(new ie(ue))}class ie{constructor(ee){this.defaultValue=ee}call(ee,Ie){return Ie.subscribe(new L(ee,this.defaultValue))}}class L extends E.L{constructor(ee,Ie){super(ee),this.defaultValue=Ie,this.isEmpty=!0}_next(ee){this.isEmpty=!1,this.destination.next(ee)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},7519:(cn,rt,F)=>{"use strict";F.d(rt,{x:()=>O});var E=F(7393);function O(ue,ee){return Ie=>Ie.lift(new ie(ue,ee))}class ie{constructor(ee,Ie){this.compare=ee,this.keySelector=Ie}call(ee,Ie){return Ie.subscribe(new L(ee,this.compare,this.keySelector))}}class L extends E.L{constructor(ee,Ie,oe){super(ee),this.keySelector=oe,this.hasKey=!1,"function"==typeof Ie&&(this.compare=Ie)}compare(ee,Ie){return ee===Ie}_next(ee){let Ie;try{const{keySelector:Se}=this;Ie=Se?Se(ee):ee}catch(Se){return this.destination.error(Se)}let oe=!1;if(this.hasKey)try{const{compare:Se}=this;oe=Se(this.key,Ie)}catch(Se){return this.destination.error(Se)}else this.hasKey=!0;oe||(this.key=Ie,this.destination.next(ee))}}},5435:(cn,rt,F)=>{"use strict";F.d(rt,{h:()=>O});var E=F(7393);function O(ue,ee){return function(oe){return oe.lift(new ie(ue,ee))}}class ie{constructor(ee,Ie){this.predicate=ee,this.thisArg=Ie}call(ee,Ie){return Ie.subscribe(new L(ee,this.predicate,this.thisArg))}}class L extends E.L{constructor(ee,Ie,oe){super(ee),this.predicate=Ie,this.thisArg=oe,this.count=0}_next(ee){let Ie;try{Ie=this.predicate.call(this.thisArg,ee,this.count++)}catch(oe){return void this.destination.error(oe)}Ie&&this.destination.next(ee)}}},8049:(cn,rt,F)=>{"use strict";F.d(rt,{P:()=>Ie});var E=F(3410),O=F(5435),ie=F(5257),L=F(5242),ue=F(4635),ee=F(4487);function Ie(oe,Se){const ae=arguments.length>=2;return ve=>ve.pipe(oe?(0,O.h)((we,_e)=>oe(we,_e,ve)):ee.y,(0,ie.q)(1),ae?(0,L.d)(Se):(0,ue.T)(()=>new E.K))}},8002:(cn,rt,F)=>{"use strict";F.d(rt,{U:()=>O});var E=F(7393);function O(ue,ee){return function(oe){if("function"!=typeof ue)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return oe.lift(new ie(ue,ee))}}class ie{constructor(ee,Ie){this.project=ee,this.thisArg=Ie}call(ee,Ie){return Ie.subscribe(new L(ee,this.project,this.thisArg))}}class L extends E.L{constructor(ee,Ie,oe){super(ee),this.project=Ie,this.count=0,this.thisArg=oe||this}_next(ee){let Ie;try{Ie=this.project.call(this.thisArg,ee,this.count++)}catch(oe){return void this.destination.error(oe)}this.destination.next(Ie)}}},3282:(cn,rt,F)=>{"use strict";F.d(rt,{J:()=>ie});var E=F(9773),O=F(4487);function ie(L=Number.POSITIVE_INFINITY){return(0,E.zg)(O.y,L)}},9773:(cn,rt,F)=>{"use strict";F.d(rt,{zg:()=>L});var E=F(8002),O=F(4402),ie=F(5345);function L(oe,Se,ae=Number.POSITIVE_INFINITY){return"function"==typeof Se?ve=>ve.pipe(L((we,_e)=>(0,O.D)(oe(we,_e)).pipe((0,E.U)((Te,lt)=>Se(we,Te,_e,lt))),ae)):("number"==typeof Se&&(ae=Se),ve=>ve.lift(new ue(oe,ae)))}class ue{constructor(Se,ae=Number.POSITIVE_INFINITY){this.project=Se,this.concurrent=ae}call(Se,ae){return ae.subscribe(new ee(Se,this.project,this.concurrent))}}class ee extends ie.Ds{constructor(Se,ae,ve=Number.POSITIVE_INFINITY){super(Se),this.project=ae,this.concurrent=ve,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(Se){this.active<this.concurrent?this._tryNext(Se):this.buffer.push(Se)}_tryNext(Se){let ae;const ve=this.index++;try{ae=this.project(Se,ve)}catch(we){return void this.destination.error(we)}this.active++,this._innerSub(ae)}_innerSub(Se){const ae=new ie.IY(this),ve=this.destination;ve.add(ae);const we=(0,ie.ft)(Se,ae);we!==ae&&ve.add(we)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(Se){this.destination.next(Se)}notifyComplete(){const Se=this.buffer;this.active--,Se.length>0?this._next(Se.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(cn,rt,F)=>{"use strict";F.d(rt,{ht:()=>ve,QV:()=>Se});var E=F(7393),O=F(9193),ie=F(5917),L=F(8891);class oe{constructor(Te,lt,Ee){this.kind=Te,this.value=lt,this.error=Ee,this.hasValue="N"===Te}observe(Te){switch(this.kind){case"N":return Te.next&&Te.next(this.value);case"E":return Te.error&&Te.error(this.error);case"C":return Te.complete&&Te.complete()}}do(Te,lt,Ee){switch(this.kind){case"N":return Te&&Te(this.value);case"E":return lt&&lt(this.error);case"C":return Ee&&Ee()}}accept(Te,lt,Ee){return Te&&"function"==typeof Te.next?this.observe(Te):this.do(Te,lt,Ee)}toObservable(){switch(this.kind){case"N":return(0,ie.of)(this.value);case"E":return _e=this.error,new L.y(lt=>lt.error(_e));case"C":return(0,O.c)()}var _e;throw new Error("unexpected notification kind value")}static createNext(Te){return void 0!==Te?new oe("N",Te):oe.undefinedValueNotification}static createError(Te){return new oe("E",void 0,Te)}static createComplete(){return oe.completeNotification}}function Se(_e,Te=0){return function(Ee){return Ee.lift(new ae(_e,Te))}}oe.completeNotification=new oe("C"),oe.undefinedValueNotification=new oe("N",void 0);class ae{constructor(Te,lt=0){this.scheduler=Te,this.delay=lt}call(Te,lt){return lt.subscribe(new ve(Te,this.scheduler,this.delay))}}class ve extends E.L{constructor(Te,lt,Ee=0){super(Te),this.scheduler=lt,this.delay=Ee}static dispatch(Te){const{notification:lt,destination:Ee}=Te;lt.observe(Ee),this.unsubscribe()}scheduleMessage(Te){this.destination.add(this.scheduler.schedule(ve.dispatch,this.delay,new we(Te,this.destination)))}_next(Te){this.scheduleMessage(oe.createNext(Te))}_error(Te){this.scheduleMessage(oe.createError(Te)),this.unsubscribe()}_complete(){this.scheduleMessage(oe.createComplete()),this.unsubscribe()}}class we{constructor(Te,lt){this.notification=Te,this.destination=lt}}},1307:(cn,rt,F)=>{"use strict";F.d(rt,{x:()=>O});var E=F(7393);function O(){return function(ee){return ee.lift(new ie(ee))}}class ie{constructor(ee){this.connectable=ee}call(ee,Ie){const{connectable:oe}=this;oe._refCount++;const Se=new L(ee,oe),ae=Ie.subscribe(Se);return Se.closed||(Se.connection=oe.connect()),ae}}class L extends E.L{constructor(ee,Ie){super(ee),this.connectable=Ie}_unsubscribe(){const{connectable:ee}=this;if(!ee)return void(this.connection=null);this.connectable=null;const Ie=ee._refCount;if(Ie<=0)return void(this.connection=null);if(ee._refCount=Ie-1,Ie>1)return void(this.connection=null);const{connection:oe}=this,Se=ee._connection;this.connection=null,Se&&(!oe||Se===oe)&&Se.unsubscribe()}}},2145:(cn,rt,F)=>{"use strict";F.d(rt,{R:()=>O});var E=F(7393);function O(ue,ee){let Ie=!1;return arguments.length>=2&&(Ie=!0),function(Se){return Se.lift(new ie(ue,ee,Ie))}}class ie{constructor(ee,Ie,oe=!1){this.accumulator=ee,this.seed=Ie,this.hasSeed=oe}call(ee,Ie){return Ie.subscribe(new L(ee,this.accumulator,this.seed,this.hasSeed))}}class L extends E.L{constructor(ee,Ie,oe,Se){super(ee),this.accumulator=Ie,this._seed=oe,this.hasSeed=Se,this.index=0}get seed(){return this._seed}set seed(ee){this.hasSeed=!0,this._seed=ee}_next(ee){if(this.hasSeed)return this._tryNext(ee);this.seed=ee,this.destination.next(ee)}_tryNext(ee){const Ie=this.index++;let oe;try{oe=this.accumulator(this.seed,ee,Ie)}catch(Se){this.destination.error(Se)}this.seed=oe,this.destination.next(oe)}}},8819:(cn,rt,F)=>{"use strict";F.d(rt,{B:()=>Ie});var E=F(2441);var L=F(1307),ue=F(9765);function ee(){return new ue.xQ}function Ie(){return oe=>(0,L.x)()(function(oe,Se){return function(ve){let we;we="function"==typeof oe?oe:function(){return oe};const _e=Object.create(ve,E.N);return _e.source=ve,_e.subjectFactory=we,_e}}(ee)(oe))}},9761:(cn,rt,F)=>{"use strict";F.d(rt,{O:()=>ie});var E=F(8071),O=F(4869);function ie(...L){const ue=L[L.length-1];return(0,O.K)(ue)?(L.pop(),ee=>(0,E.z)(L,ee,ue)):ee=>(0,E.z)(L,ee)}},3101:(cn,rt,F)=>{"use strict";F.d(rt,{R:()=>Ke});var E=F(8891);let O=1;const ie=Promise.resolve(),L={};function ue(Ge){return Ge in L&&(delete L[Ge],!0)}const ee={setImmediate(Ge){const Fe=O++;return L[Fe]=!0,ie.then(()=>ue(Fe)&&Ge()),Fe},clearImmediate(Ge){ue(Ge)}};var oe=F(6465),ae=F(6102);const _e=new class extends ae.v{flush(Fe){this.active=!0,this.scheduled=void 0;const{actions:Oe}=this;let st,It=-1,en=Oe.length;Fe=Fe||Oe.shift();do{if(st=Fe.execute(Fe.state,Fe.delay))break}while(++It<en&&(Fe=Oe.shift()));if(this.active=!1,st){for(;++It<en&&(Fe=Oe.shift());)Fe.unsubscribe();throw st}}}(class extends oe.o{constructor(Fe,Oe){super(Fe,Oe),this.scheduler=Fe,this.work=Oe}requestAsyncId(Fe,Oe,st=0){return null!==st&&st>0?super.requestAsyncId(Fe,Oe,st):(Fe.actions.push(this),Fe.scheduled||(Fe.scheduled=ee.setImmediate(Fe.flush.bind(Fe,null))))}recycleAsyncId(Fe,Oe,st=0){if(null!==st&&st>0||null===st&&this.delay>0)return super.recycleAsyncId(Fe,Oe,st);0===Fe.actions.length&&(ee.clearImmediate(Oe),Fe.scheduled=void 0)}});var Te=F(9796);class Ee extends E.y{constructor(Fe,Oe=0,st=_e){var Ge;super(),this.source=Fe,this.delayTime=Oe,this.scheduler=st,(!(!(0,Te.k)(Ge=Oe)&&Ge-parseFloat(Ge)+1>=0)||Oe<0)&&(this.delayTime=0),(!st||"function"!=typeof st.schedule)&&(this.scheduler=_e)}static create(Fe,Oe=0,st=_e){return new Ee(Fe,Oe,st)}static dispatch(Fe){const{source:Oe,subscriber:st}=Fe;return this.add(Oe.subscribe(st))}_subscribe(Fe){return this.scheduler.schedule(Ee.dispatch,this.delayTime,{source:this.source,subscriber:Fe})}}function Ke(Ge,Fe=0){return function(st){return st.lift(new Re(Ge,Fe))}}class Re{constructor(Fe,Oe){this.scheduler=Fe,this.delay=Oe}call(Fe,Oe){return new Ee(Oe,this.delay,this.scheduler).subscribe(Fe)}}},3190:(cn,rt,F)=>{"use strict";F.d(rt,{w:()=>L});var E=F(8002),O=F(4402),ie=F(5345);function L(Ie,oe){return"function"==typeof oe?Se=>Se.pipe(L((ae,ve)=>(0,O.D)(Ie(ae,ve)).pipe((0,E.U)((we,_e)=>oe(ae,we,ve,_e))))):Se=>Se.lift(new ue(Ie))}class ue{constructor(oe){this.project=oe}call(oe,Se){return Se.subscribe(new ee(oe,this.project))}}class ee extends ie.Ds{constructor(oe,Se){super(oe),this.project=Se,this.index=0}_next(oe){let Se;const ae=this.index++;try{Se=this.project(oe,ae)}catch(ve){return void this.destination.error(ve)}this._innerSub(Se)}_innerSub(oe){const Se=this.innerSubscription;Se&&Se.unsubscribe();const ae=new ie.IY(this),ve=this.destination;ve.add(ae),this.innerSubscription=(0,ie.ft)(oe,ae),this.innerSubscription!==ae&&ve.add(this.innerSubscription)}_complete(){const{innerSubscription:oe}=this;(!oe||oe.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(oe){this.destination.next(oe)}}},5257:(cn,rt,F)=>{"use strict";F.d(rt,{q:()=>L});var E=F(7393),O=F(7108),ie=F(9193);function L(Ie){return oe=>0===Ie?(0,ie.c)():oe.lift(new ue(Ie))}class ue{constructor(oe){if(this.total=oe,this.total<0)throw new O.W}call(oe,Se){return Se.subscribe(new ee(oe,this.total))}}class ee extends E.L{constructor(oe,Se){super(oe),this.total=Se,this.count=0}_next(oe){const Se=this.total,ae=++this.count;ae<=Se&&(this.destination.next(oe),ae===Se&&(this.destination.complete(),this.unsubscribe()))}}},3342:(cn,rt,F)=>{"use strict";F.d(rt,{b:()=>L});var E=F(7393);function O(){}var ie=F(9105);function L(Ie,oe,Se){return function(ve){return ve.lift(new ue(Ie,oe,Se))}}class ue{constructor(oe,Se,ae){this.nextOrObserver=oe,this.error=Se,this.complete=ae}call(oe,Se){return Se.subscribe(new ee(oe,this.nextOrObserver,this.error,this.complete))}}class ee extends E.L{constructor(oe,Se,ae,ve){super(oe),this._tapNext=O,this._tapError=O,this._tapComplete=O,this._tapError=ae||O,this._tapComplete=ve||O,(0,ie.m)(Se)?(this._context=this,this._tapNext=Se):Se&&(this._context=Se,this._tapNext=Se.next||O,this._tapError=Se.error||O,this._tapComplete=Se.complete||O)}_next(oe){try{this._tapNext.call(this._context,oe)}catch(Se){return void this.destination.error(Se)}this.destination.next(oe)}_error(oe){try{this._tapError.call(this._context,oe)}catch(Se){return void this.destination.error(Se)}this.destination.error(oe)}_complete(){try{this._tapComplete.call(this._context)}catch(oe){return void this.destination.error(oe)}return this.destination.complete()}}},4635:(cn,rt,F)=>{"use strict";F.d(rt,{T:()=>ie});var E=F(3410),O=F(7393);function ie(Ie=ee){return oe=>oe.lift(new L(Ie))}class L{constructor(oe){this.errorFactory=oe}call(oe,Se){return Se.subscribe(new ue(oe,this.errorFactory))}}class ue extends O.L{constructor(oe,Se){super(oe),this.errorFactory=Se,this.hasValue=!1}_next(oe){this.hasValue=!0,this.destination.next(oe)}_complete(){if(this.hasValue)return this.destination.complete();{let oe;try{oe=this.errorFactory()}catch(Se){oe=Se}this.destination.error(oe)}}}function ee(){return new E.K}},4087:(cn,rt,F)=>{"use strict";F.d(rt,{r:()=>ie});var E=F(8891),O=F(5319);function ie(L,ue){return new E.y(ee=>{const Ie=new O.w;let oe=0;return Ie.add(ue.schedule(function(){oe!==L.length?(ee.next(L[oe++]),ee.closed||Ie.add(this.schedule())):ee.complete()})),Ie})}},6465:(cn,rt,F)=>{"use strict";F.d(rt,{o:()=>ie});var E=F(5319);class O extends E.w{constructor(ue,ee){super()}schedule(ue,ee=0){return this}}class ie extends O{constructor(ue,ee){super(ue,ee),this.scheduler=ue,this.work=ee,this.pending=!1}schedule(ue,ee=0){if(this.closed)return this;this.state=ue;const Ie=this.id,oe=this.scheduler;return null!=Ie&&(this.id=this.recycleAsyncId(oe,Ie,ee)),this.pending=!0,this.delay=ee,this.id=this.id||this.requestAsyncId(oe,this.id,ee),this}requestAsyncId(ue,ee,Ie=0){return setInterval(ue.flush.bind(ue,this),Ie)}recycleAsyncId(ue,ee,Ie=0){if(null!==Ie&&this.delay===Ie&&!1===this.pending)return ee;clearInterval(ee)}execute(ue,ee){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ie=this._execute(ue,ee);if(Ie)return Ie;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,ee){let oe,Ie=!1;try{this.work(ue)}catch(Se){Ie=!0,oe=!!Se&&Se||new Error(Se)}if(Ie)return this.unsubscribe(),oe}_unsubscribe(){const ue=this.id,ee=this.scheduler,Ie=ee.actions,oe=Ie.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==oe&&Ie.splice(oe,1),null!=ue&&(this.id=this.recycleAsyncId(ee,ue,null)),this.delay=null}}},6102:(cn,rt,F)=>{"use strict";F.d(rt,{v:()=>O});let E=(()=>{class ie{constructor(ue,ee=ie.now){this.SchedulerAction=ue,this.now=ee}schedule(ue,ee=0,Ie){return new this.SchedulerAction(this,ue).schedule(Ie,ee)}}return ie.now=()=>Date.now(),ie})();class O extends E{constructor(L,ue=E.now){super(L,()=>O.delegate&&O.delegate!==this?O.delegate.now():ue()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(L,ue=0,ee){return O.delegate&&O.delegate!==this?O.delegate.schedule(L,ue,ee):super.schedule(L,ue,ee)}flush(L){const{actions:ue}=this;if(this.active)return void ue.push(L);let ee;this.active=!0;do{if(ee=L.execute(L.state,L.delay))break}while(L=ue.shift());if(this.active=!1,ee){for(;L=ue.shift();)L.unsubscribe();throw ee}}}},3637:(cn,rt,F)=>{"use strict";F.d(rt,{z:()=>ie});var E=F(6465);const ie=new(F(6102).v)(E.o)},7771:(cn,rt,F)=>{"use strict";F.d(rt,{c:()=>ee,N:()=>ue});var E=F(6465),ie=F(6102);const ue=new class extends ie.v{}(class extends E.o{constructor(oe,Se){super(oe,Se),this.scheduler=oe,this.work=Se}schedule(oe,Se=0){return Se>0?super.schedule(oe,Se):(this.delay=Se,this.state=oe,this.scheduler.flush(this),this)}execute(oe,Se){return Se>0||this.closed?super.execute(oe,Se):this._execute(oe,Se)}requestAsyncId(oe,Se,ae=0){return null!==ae&&ae>0||null===ae&&this.delay>0?super.requestAsyncId(oe,Se,ae):oe.flush(this)}}),ee=ue},377:(cn,rt,F)=>{"use strict";F.d(rt,{hZ:()=>O});const O="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(cn,rt,F)=>{"use strict";F.d(rt,{L:()=>E});const E="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(cn,rt,F)=>{"use strict";F.d(rt,{b:()=>E});const E="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7108:(cn,rt,F)=>{"use strict";F.d(rt,{W:()=>O});const O=(()=>{function ie(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return ie.prototype=Object.create(Error.prototype),ie})()},3410:(cn,rt,F)=>{"use strict";F.d(rt,{K:()=>O});const O=(()=>{function ie(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return ie.prototype=Object.create(Error.prototype),ie})()},7971:(cn,rt,F)=>{"use strict";F.d(rt,{N:()=>O});const O=(()=>{function ie(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return ie.prototype=Object.create(Error.prototype),ie})()},4449:(cn,rt,F)=>{"use strict";function E(O){setTimeout(()=>{throw O},0)}F.d(rt,{z:()=>E})},4487:(cn,rt,F)=>{"use strict";function E(O){return O}F.d(rt,{y:()=>E})},9796:(cn,rt,F)=>{"use strict";F.d(rt,{k:()=>E});const E=Array.isArray||(O=>O&&"number"==typeof O.length)},9489:(cn,rt,F)=>{"use strict";F.d(rt,{z:()=>E});const E=O=>O&&"number"==typeof O.length&&"function"!=typeof O},9105:(cn,rt,F)=>{"use strict";function E(O){return"function"==typeof O}F.d(rt,{m:()=>E})},1555:(cn,rt,F)=>{"use strict";function E(O){return null!==O&&"object"==typeof O}F.d(rt,{K:()=>E})},4072:(cn,rt,F)=>{"use strict";function E(O){return!!O&&"function"!=typeof O.subscribe&&"function"==typeof O.then}F.d(rt,{t:()=>E})},4869:(cn,rt,F)=>{"use strict";function E(O){return O&&"function"==typeof O.schedule}F.d(rt,{K:()=>E})},4022:(cn,rt,F)=>{"use strict";F.d(rt,{z:()=>O,U:()=>ie});var E=F(4487);function O(...L){return ie(L)}function ie(L){return 0===L.length?E.y:1===L.length?L[0]:function(ee){return L.reduce((Ie,oe)=>oe(Ie),ee)}}},7444:(cn,rt,F)=>{"use strict";F.d(rt,{s:()=>ve});var E=F(5015),O=F(4449),L=F(377),ee=F(6554),oe=F(9489),Se=F(4072),ae=F(1555);const ve=we=>{if(we&&"function"==typeof we[ee.L])return(we=>_e=>{const Te=we[ee.L]();if("function"!=typeof Te.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Te.subscribe(_e)})(we);if((0,oe.z)(we))return(0,E.V)(we);if((0,Se.t)(we))return(we=>_e=>(we.then(Te=>{_e.closed||(_e.next(Te),_e.complete())},Te=>_e.error(Te)).then(null,O.z),_e))(we);if(we&&"function"==typeof we[L.hZ])return(we=>_e=>{const Te=we[L.hZ]();for(;;){let lt;try{lt=Te.next()}catch(Ee){return _e.error(Ee),_e}if(lt.done){_e.complete();break}if(_e.next(lt.value),_e.closed)break}return"function"==typeof Te.return&&_e.add(()=>{Te.return&&Te.return()}),_e})(we);{const Te=`You provided ${(0,ae.K)(we)?"an invalid object":`'${we}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Te)}}},5015:(cn,rt,F)=>{"use strict";F.d(rt,{V:()=>E});const E=O=>ie=>{for(let L=0,ue=O.length;L<ue&&!ie.closed;L++)ie.next(O[L]);ie.complete()}},509:(cn,rt,F)=>{"use strict";F.d(rt,{D:()=>ue});var E=F(7393);class O extends E.L{constructor(Ie,oe,Se){super(),this.parent=Ie,this.outerValue=oe,this.outerIndex=Se,this.index=0}_next(Ie){this.parent.notifyNext(this.outerValue,Ie,this.outerIndex,this.index++,this)}_error(Ie){this.parent.notifyError(Ie,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var ie=F(7444),L=F(8891);function ue(ee,Ie,oe,Se,ae=new O(ee,oe,Se)){if(!ae.closed)return Ie instanceof L.y?Ie.subscribe(ae):(0,ie.s)(Ie)(ae)}},4427:(cn,rt,F)=>{"use strict";F.r(rt),F.d(rt,{HomeModule:()=>lt});var E=F(8583),O=F(8945),ie=F(174),L=F(7716),ue=F(3792),ee=F(7556),Ie=F(3071);let oe=(()=>{class Ee{constructor(){}ngOnInit(){}getTimeStamp(){if(null==this.comment.createdTime)return"Saving...";let Re=this.comment.createdTime.seconds,Ge="";this.comment.updatedTime&&(Ge="Edited ",Re=this.comment.updatedTime.seconds);const Fe=new Date(1e3*Re),Oe=Fe.getDate(),st=Fe.getMonth();return`${Ge}${Fe.getFullYear()}-${Oe}-${st+1} ${Fe.getHours()}:${Fe.getMinutes()}`}}return Ee.\u0275fac=function(Re){return new(Re||Ee)},Ee.\u0275cmp=L.Xpm({type:Ee,selectors:[["app-comment"]],inputs:{comment:"comment",commentId:"commentId"},decls:4,vars:2,consts:[[1,"comment-item"],[1,"timestamp"]],template:function(Re,Ge){1&Re&&(L.TgZ(0,"div",0),L._uU(1),L.TgZ(2,"p",1),L._uU(3),L.qZA(),L.qZA()),2&Re&&(L.xp6(1),L.hij(" ",Ge.comment.content," "),L.xp6(2),L.Oqu(Ge.getTimeStamp()))},styles:[".comment-item[_ngcontent-%COMP%]{width:100%;background:#f1f1f1;padding:1rem 1em .5em;font-size:.75em;border-radius:14px;white-space:pre-wrap}.comment-item[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%]{font-size:.75em;text-align:right;padding:0;margin:.5rem 0}"]}),Ee})();function Se(Ee,Ke){if(1&Ee){const Re=L.EpF();L.TgZ(0,"ion-list",19,20),L.TgZ(2,"ion-item-sliding"),L.TgZ(3,"ion-item",19),L._UZ(4,"app-comment",21),L.qZA(),L.TgZ(5,"ion-item-options",22),L.TgZ(6,"ion-item-option",23),L.NdJ("click",function(){const Oe=L.CHM(Re).$implicit;return L.oxw().editComment(Oe)}),L._UZ(7,"ion-icon",24),L.qZA(),L.qZA(),L.qZA(),L.qZA()}if(2&Ee){const Re=Ke.$implicit;L.xp6(4),L.Q6J("commentId",Re.id)("comment",Re)}}function ae(Ee,Ke){if(1&Ee){const Re=L.EpF();L.TgZ(0,"ion-button",25),L.NdJ("click",function(){return L.CHM(Re),L.oxw().saveComment()}),L._UZ(1,"ion-icon",26),L.qZA()}}function ve(Ee,Ke){if(1&Ee){const Re=L.EpF();L.TgZ(0,"div",27),L.TgZ(1,"ion-button",28),L.NdJ("click",function(){return L.CHM(Re),L.oxw().saveComment()}),L._uU(2," Save "),L.qZA(),L.TgZ(3,"ion-button",28),L.NdJ("click",function(){return L.CHM(Re),L.oxw().cancelEdit()}),L._uU(4," Cancel "),L.qZA(),L.qZA()}}const _e=[{path:"",component:(()=>{class Ee{constructor(Re,Ge,Fe,Oe){this.cmtSvc=Re,this.auth=Ge,this.userSvc=Fe,this.router=Oe,this.showEditButtons=!1}ngOnInit(){this.user=this.userSvc.getUserDataFromLocalStorage(),this.cmtSvc.getComments(this.user.id).subscribe(Re=>{console.log(Re),this.comments=Re}),console.log(this.commentId)}logout(){this.auth.logout().then(()=>{this.router.navigateByUrl("/login",{replaceUrl:!0})})}saveComment(){if(null!==this.commentText&&""!==this.commentText){const Re={content:this.commentText};this.commentId&&null!==this.commentText?this.cmtSvc.updateComment(this.user.id,this.commentId,Re):this.cmtSvc.addComment(this.user.id,Re),this.commentText="",this.commentId=null,this.showEditButtons=!1}}handleChange(Re){this.commentText=Re.target.innerHTML,console.log(Re.target.innerHTML)}editComment(Re){this.commentId=Re.id,this.commentText=Re.content,this.showEditButtons=!0,this.slidingList.closeSlidingItems()}cancelEdit(){this.commentId=null,this.commentText="",this.showEditButtons=!1}}return Ee.\u0275fac=function(Re){return new(Re||Ee)(L.Y36(ue.O),L.Y36(ee.e),L.Y36(Ie.K),L.Y36(ie.F0))},Ee.\u0275cmp=L.Xpm({type:Ee,selectors:[["app-home"]],viewQuery:function(Re,Ge){if(1&Re&&L.Gf(O.q_,5),2&Re){let Fe;L.iGM(Fe=L.CRH())&&(Ge.slidingList=Fe.first)}},decls:32,vars:7,consts:[["color","primary"],["slot","start"],["name","person-circle-outline","size","large"],["side","start","menuId","first","contentId","main"],[1,"nav-content"],[1,"user-container"],[1,"avatar"],["name","person-circle-outline",1,"avatar-alt"],[1,"user-info"],[1,"display-name"],[1,"email"],["color","danger",3,"click"],["id","main",3,"fullscreen"],["lines","none",4,"ngFor","ngForOf"],[1,"form-container"],[1,"form-row"],["placeholder","Enter more information here...",3,"value","change"],["shape","circle",3,"click",4,"ngIf"],["class","edit-btn-container",4,"ngIf"],["lines","none"],["slidingList",""],[3,"commentId","comment"],["side","end"],[3,"click"],["slot","icon-only","name","pencil-outline"],["shape","circle",3,"click"],["name","add-outline","size","large"],[1,"edit-btn-container"],["size","small",3,"click"]],template:function(Re,Ge){1&Re&&(L.TgZ(0,"ion-header"),L.TgZ(1,"ion-toolbar",0),L.TgZ(2,"ion-buttons",1),L.TgZ(3,"ion-menu-button"),L._UZ(4,"ion-icon",2),L.qZA(),L.qZA(),L.TgZ(5,"ion-title"),L._uU(6,"TrailApp"),L.qZA(),L.qZA(),L.qZA(),L.TgZ(7,"ion-menu",3),L.TgZ(8,"ion-header"),L.TgZ(9,"ion-toolbar",0),L.TgZ(10,"ion-title"),L._uU(11,"User Information"),L.qZA(),L.qZA(),L.qZA(),L.TgZ(12,"ion-content"),L.TgZ(13,"div",4),L.TgZ(14,"div",5),L.TgZ(15,"div",6),L._UZ(16,"ion-icon",7),L.qZA(),L.TgZ(17,"div",8),L.TgZ(18,"div",9),L._uU(19),L.qZA(),L.TgZ(20,"div",10),L._uU(21),L.qZA(),L.qZA(),L.qZA(),L.TgZ(22,"ion-button",11),L.NdJ("click",function(){return Ge.logout()}),L._uU(23,"Logout"),L.qZA(),L.qZA(),L.qZA(),L.qZA(),L.TgZ(24,"ion-content",12),L.YNc(25,Se,8,2,"ion-list",13),L.TgZ(26,"div",14),L.TgZ(27,"form"),L.TgZ(28,"div",15),L.TgZ(29,"ion-textarea",16),L.NdJ("change",function(Oe){return Ge.handleChange(Oe)}),L.qZA(),L.YNc(30,ae,2,0,"ion-button",17),L.YNc(31,ve,5,0,"div",18),L.qZA(),L.qZA(),L.qZA(),L.qZA()),2&Re&&(L.xp6(19),L.Oqu(Ge.user.displayName),L.xp6(2),L.Oqu(Ge.user.email),L.xp6(3),L.Q6J("fullscreen",!0),L.xp6(1),L.Q6J("ngForOf",Ge.comments),L.xp6(4),L.s9C("value",Ge.commentText),L.xp6(1),L.Q6J("ngIf",!Ge.showEditButtons),L.xp6(1),L.Q6J("ngIf",Ge.showEditButtons))},directives:[O.Gu,O.sr,O.Sm,O.fG,O.gu,O.wd,O.z0,O.W2,O.YG,E.sg,O.g2,O.j9,E.O5,O.q_,O.td,O.Ie,oe,O.IK,O.u8],styles:[".nav-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:calc(100vh - 60px);align-items:center}.nav-content[_ngcontent-%COMP%]   .user-container[_ngcontent-%COMP%]{padding:3rem 1rem;text-align:center}.nav-content[_ngcontent-%COMP%]   .user-container[_ngcontent-%COMP%]   .avatar-alt[_ngcontent-%COMP%]{font-size:5em}.nav-content[_ngcontent-%COMP%]   .user-container[_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%]{font-weight:500;font-size:1.5em}.nav-content[_ngcontent-%COMP%]   .user-container[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{color:var(--ion-color-secondary)}.nav-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:75%;margin-bottom:3rem}.form-row[_ngcontent-%COMP%]{position:fixed;display:flex;padding:1.5em 1em;align-items:center;width:100%;bottom:0}.form-row[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-weight:500}ion-button[shape=circle][_ngcontent-%COMP%]{--border-radius: 50%;width:56px;height:56px}app-comment[_ngcontent-%COMP%]{width:100%}ion-list[_ngcontent-%COMP%]{margin-top:1em}.edit-btn-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),Ee})()}];let Te=(()=>{class Ee{}return Ee.\u0275fac=function(Re){return new(Re||Ee)},Ee.\u0275mod=L.oAB({type:Ee}),Ee.\u0275inj=L.cJS({imports:[[ie.Bz.forChild(_e)],ie.Bz]}),Ee})(),lt=(()=>{class Ee{}return Ee.\u0275fac=function(Re){return new(Re||Ee)},Ee.\u0275mod=L.oAB({type:Ee}),Ee.\u0275inj=L.cJS({imports:[[E.ez,O.Pc,Te]]}),Ee})()},7545:(cn,rt,F)=>{"use strict";F.r(rt),F.d(rt,{LoginModule:()=>Re});var E=F(8583),O=F(8945),ie=F(665),L=F(174),ue=F(8239),ee=F(7716),Ie=F(7556);function oe(Ge,Fe){1&Ge&&(ee.TgZ(0,"ion-note",10),ee._uU(1,"Email is invalid"),ee.qZA())}function Se(Ge,Fe){1&Ge&&(ee.TgZ(0,"ion-note",10),ee._uU(1,"Password needs to be 6 characters"),ee.qZA())}function ae(Ge,Fe){if(1&Ge){const Oe=ee.EpF();ee.TgZ(0,"form",3),ee.NdJ("ngSubmit",function(){return ee.CHM(Oe),ee.oxw().login()}),ee.TgZ(1,"ion-item",4),ee._UZ(2,"ion-input",5),ee.YNc(3,oe,2,0,"ion-note",6),ee.qZA(),ee.TgZ(4,"ion-item",4),ee._UZ(5,"ion-input",7),ee.YNc(6,Se,2,0,"ion-note",6),ee.qZA(),ee.TgZ(7,"ion-button",8),ee._uU(8," Log in "),ee.qZA(),ee.TgZ(9,"ion-button",9),ee.NdJ("click",function(){return ee.CHM(Oe),ee.oxw().createUser()}),ee._uU(10,"Create account "),ee.qZA(),ee.qZA()}if(2&Ge){const Oe=ee.oxw();ee.Q6J("formGroup",Oe.credentials),ee.xp6(3),ee.Q6J("ngIf",(Oe.email.dirty||Oe.email.touched)&&Oe.email.errors),ee.xp6(3),ee.Q6J("ngIf",(Oe.password.dirty||Oe.password.touched)&&Oe.password.errors)}}function ve(Ge,Fe){1&Ge&&(ee.TgZ(0,"ion-note",10),ee._uU(1,"Name is required"),ee.qZA())}function we(Ge,Fe){1&Ge&&(ee.TgZ(0,"ion-note",10),ee._uU(1,"Email is invalid"),ee.qZA())}function _e(Ge,Fe){1&Ge&&(ee.TgZ(0,"ion-note",10),ee._uU(1,"Password needs to be 6 characters"),ee.qZA())}function Te(Ge,Fe){if(1&Ge){const Oe=ee.EpF();ee.TgZ(0,"form",3),ee.NdJ("ngSubmit",function(){return ee.CHM(Oe),ee.oxw().register()}),ee.TgZ(1,"ion-item",4),ee._UZ(2,"ion-input",11),ee.YNc(3,ve,2,0,"ion-note",6),ee.qZA(),ee.TgZ(4,"ion-item",4),ee._UZ(5,"ion-input",5),ee.YNc(6,we,2,0,"ion-note",6),ee.qZA(),ee.TgZ(7,"ion-item",4),ee._UZ(8,"ion-input",7),ee.YNc(9,_e,2,0,"ion-note",6),ee.qZA(),ee.TgZ(10,"ion-button",8),ee._uU(11," Register "),ee.qZA(),ee.qZA()}if(2&Ge){const Oe=ee.oxw();ee.Q6J("formGroup",Oe.userRegistration),ee.xp6(3),ee.Q6J("ngIf",(Oe.name.dirty||Oe.name.touched)&&Oe.name.errors),ee.xp6(3),ee.Q6J("ngIf",(Oe.email.dirty||Oe.email.touched)&&Oe.email.errors),ee.xp6(3),ee.Q6J("ngIf",(Oe.password.dirty||Oe.password.touched)&&Oe.password.errors)}}const Ee=[{path:"",component:(()=>{class Ge{constructor(Oe,st,It,en,v){this.fb=Oe,this.loadingController=st,this.alertController=It,this.authService=en,this.router=v,this.showRegister=!1}ngOnInit(){this.credentials=this.fb.group({email:["",[ie.kI.required,ie.kI.email]],password:["",[ie.kI.required,ie.kI.minLength(6)]]}),this.userRegistration=this.fb.group({name:["",[ie.kI.required]],email:["",[ie.kI.required,ie.kI.email]],password:["",[ie.kI.required,ie.kI.minLength(6)]]})}get email(){return this.credentials.get("email")}get password(){return this.credentials.get("password")}get regEmail(){return this.userRegistration.get("email")}get regPassword(){return this.userRegistration.get("password")}get name(){return this.userRegistration.get("name")}login(){var Oe=this;return(0,ue.Z)(function*(){const st=yield Oe.loadingController.create();yield st.present();const It=yield Oe.authService.login(Oe.credentials.value);yield st.dismiss(),It?Oe.router.navigateByUrl("/home",{replaceUrl:!0}):Oe.showAlert("Login failed","Please try again!")})()}register(){var Oe=this;return(0,ue.Z)(function*(){const st=yield Oe.loadingController.create();yield st.present();const It=yield Oe.authService.register(Oe.userRegistration.value);yield st.dismiss(),It?Oe.router.navigateByUrl("/home",{replaceUrl:!0}):Oe.showAlert("Registration failed","Please try again!")})()}createUser(){this.showRegister=!0}showAlert(Oe,st){var It=this;return(0,ue.Z)(function*(){yield(yield It.alertController.create({header:Oe,message:st,buttons:["OK"]})).present()})()}}return Ge.\u0275fac=function(Oe){return new(Oe||Ge)(ee.Y36(ie.qu),ee.Y36(O.HT),ee.Y36(O.Br),ee.Y36(Ie.e),ee.Y36(L.F0))},Ge.\u0275cmp=ee.Xpm({type:Ge,selectors:[["app-login"]],decls:7,vars:2,consts:[["color","primary"],[1,"ion-padding"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],["fill","solid",1,"ion-margin-bottom"],["type","email","placeholder","Email","formControlName","email"],["slot","error",4,"ngIf"],["type","password","placeholder","Password","formControlName","password"],["size","medium","shape","round","color","primary","type","submit","expand","block",1,"ion-margin-bottom"],["size","medium","shape","round","type","button","expand","block","color","light",3,"click"],["slot","error"],["type","text","placeholder","Name","formControlName","name"]],template:function(Oe,st){1&Oe&&(ee.TgZ(0,"ion-header"),ee.TgZ(1,"ion-toolbar",0),ee.TgZ(2,"ion-title"),ee._uU(3," Login "),ee.qZA(),ee.qZA(),ee.qZA(),ee.TgZ(4,"ion-content",1),ee.YNc(5,ae,11,3,"form",2),ee.YNc(6,Te,12,4,"form",2),ee.qZA()),2&Oe&&(ee.xp6(5),ee.Q6J("ngIf",!st.showRegister),ee.xp6(1),ee.Q6J("ngIf",st.showRegister))},directives:[O.Gu,O.sr,O.wd,O.W2,E.O5,ie._Y,ie.JL,ie.sg,O.Ie,O.pK,O.j9,ie.JJ,ie.u,O.YG,O.uN],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]}),Ge})()}];let Ke=(()=>{class Ge{}return Ge.\u0275fac=function(Oe){return new(Oe||Ge)},Ge.\u0275mod=ee.oAB({type:Ge}),Ge.\u0275inj=ee.cJS({imports:[[L.Bz.forChild(Ee)],L.Bz]}),Ge})(),Re=(()=>{class Ge{}return Ge.\u0275fac=function(Oe){return new(Oe||Ge)},Ge.\u0275mod=ee.oAB({type:Ge}),Ge.\u0275inj=ee.cJS({providers:[],imports:[[E.ez,ie.u5,ie.UX,O.Pc,Ke]]}),Ge})()},7556:(cn,rt,F)=>{"use strict";F.d(rt,{e:()=>ee});var E=F(8239),O=F(7910),ie=F(7716),L=F(3824),ue=F(3071);let ee=(()=>{class Ie{constructor(Se,ae,ve){this.auth=Se,this.db=ae,this.userSvc=ve}register({email:Se,password:ae,name:ve}){var we=this;return(0,E.Z)(function*(){try{const _e=yield(0,O.Xb)(we.auth,Se,ae);return we.userSvc.addUserInfo(_e.user.uid,{displayName:ve}),we.userSvc.saveUserToLocalStorage({id:_e.user.uid,email:_e.user.email,displayName:ve}),_e}catch(_e){return null}})()}login({email:Se,password:ae}){var ve=this;return(0,E.Z)(function*(){try{const we=yield(0,O.e5)(ve.auth,Se,ae),_e=yield ve.userSvc.getUserInfo(we.user.uid).toPromise();return console.log(_e),ve.userSvc.saveUserToLocalStorage({id:we.user.uid,email:we.user.email,displayName:_e.displayName}),we}catch(we){return null}})()}logout(){return this.userSvc.clearStorage(),(0,O.w7)(this.auth)}}return Ie.\u0275fac=function(Se){return new(Se||Ie)(ie.LFG(O.gx),ie.LFG(L.KQ),ie.LFG(ue.K))},Ie.\u0275prov=ie.Yz7({token:Ie,factory:Ie.\u0275fac,providedIn:"root"}),Ie})()},3792:(cn,rt,F)=>{"use strict";F.d(rt,{O:()=>L});var E=F(2502),O=F(1304),ie=F(7716);let L=(()=>{class ue{constructor(Ie){this.firestore=Ie,this.COMMENTS_COLLECTION="comments/comment"}getComments(Ie){const oe=(0,O.hJ)(this.firestore,`${Ie}/${this.COMMENTS_COLLECTION}`),Se=(0,E.IO)(oe,(0,E.Xo)("createdTime","asc"));return(0,E.BS)(Se,{idField:"id"})}addComment(Ie,oe){const Se=(0,O.hJ)(this.firestore,`${Ie}/${this.COMMENTS_COLLECTION}`);return(0,O.ET)(Se,Object.assign(Object.assign({},oe),{createdTime:(0,E.Bt)()}))}updateComment(Ie,oe,Se){const ae=(0,O.JU)(this.firestore,`${Ie}/${this.COMMENTS_COLLECTION}/${oe}`);(0,O.r7)(ae,Object.assign(Object.assign({},Se),{updatedTime:(0,E.Bt)()}))}}return ue.\u0275fac=function(Ie){return new(Ie||ue)(ie.LFG(E.gg))},ue.\u0275prov=ie.Yz7({token:ue,factory:ue.\u0275fac,providedIn:"root"}),ue})()},3071:(cn,rt,F)=>{"use strict";F.d(rt,{K:()=>L});var E=F(2502),O=F(1304),ie=F(7716);let L=(()=>{class ue{constructor(Ie){this.firestore=Ie,this.USER_INFO_PATH="user_info"}getUserInfo(Ie){const oe=(0,O.JU)(this.firestore,`${Ie}/${this.USER_INFO_PATH}`);return(0,E._1)(oe)}addUserInfo(Ie,oe){const Se=(0,O.JU)(this.firestore,`${Ie}/${this.USER_INFO_PATH}`);return(0,O.pl)(Se,oe)}updateUserInfo(Ie,oe){const Se=(0,O.JU)(this.firestore,`${Ie}/${this.USER_INFO_PATH}`);return(0,O.pl)(Se,oe)}saveUserToLocalStorage(Ie){localStorage.setItem("userData",JSON.stringify(Ie))}getUserDataFromLocalStorage(){return JSON.parse(localStorage.getItem("userData")||"{}")}clearStorage(){localStorage.clear()}}return ue.\u0275fac=function(Ie){return new(Ie||ue)(ie.LFG(E.gg))},ue.\u0275prov=ie.Yz7({token:ue,factory:ue.\u0275fac,providedIn:"root"}),ue})()},4683:(cn,rt,F)=>{"use strict";var E=F(8583),O=F(7716);class ie extends E.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class L extends ie{static makeCurrent(){(0,E.HT)(new L)}onAndCancel(z,K,ke){return z.addEventListener(K,ke,!1),()=>{z.removeEventListener(K,ke,!1)}}dispatchEvent(z,K){z.dispatchEvent(K)}remove(z){z.parentNode&&z.parentNode.removeChild(z)}createElement(z,K){return(K=K||this.getDefaultDocument()).createElement(z)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(z){return z.nodeType===Node.ELEMENT_NODE}isShadowRoot(z){return z instanceof DocumentFragment}getGlobalEventTarget(z,K){return"window"===K?window:"document"===K?z:"body"===K?z.body:null}getBaseHref(z){const K=(ue=ue||document.querySelector("base"),ue?ue.getAttribute("href"):null);return null==K?null:function(fe){Ie=Ie||document.createElement("a"),Ie.setAttribute("href",fe);const z=Ie.pathname;return"/"===z.charAt(0)?z:`/${z}`}(K)}resetBaseElement(){ue=null}getUserAgent(){return window.navigator.userAgent}getCookie(z){return(0,E.Mx)(document.cookie,z)}}let Ie,ue=null;const Se=new O.OlP("TRANSITION_ID"),ve=[{provide:O.ip1,useFactory:function(fe,z,K){return()=>{K.get(O.CZH).donePromise.then(()=>{const ke=(0,E.q)(),ut=z.querySelectorAll(`style[ng-transition="${fe}"]`);for(let Rt=0;Rt<ut.length;Rt++)ke.remove(ut[Rt])})}},deps:[Se,E.K0,O.zs3],multi:!0}];class we{static init(){(0,O.VLi)(new we)}addToWindow(z){O.dqk.getAngularTestability=(ke,ut=!0)=>{const Rt=z.findTestabilityInTree(ke,ut);if(null==Rt)throw new Error("Could not find testability for element.");return Rt},O.dqk.getAllAngularTestabilities=()=>z.getAllTestabilities(),O.dqk.getAllAngularRootElements=()=>z.getAllRootElements(),O.dqk.frameworkStabilizers||(O.dqk.frameworkStabilizers=[]),O.dqk.frameworkStabilizers.push(ke=>{const ut=O.dqk.getAllAngularTestabilities();let Rt=ut.length,ir=!1;const Br=function(pi){ir=ir||pi,Rt--,0==Rt&&ke(ir)};ut.forEach(function(pi){pi.whenStable(Br)})})}findTestabilityInTree(z,K,ke){if(null==K)return null;const ut=z.getTestability(K);return null!=ut?ut:ke?(0,E.q)().isShadowRoot(K)?this.findTestabilityInTree(z,K.host,!0):this.findTestabilityInTree(z,K.parentElement,!0):null}}let _e=(()=>{class fe{build(){return new XMLHttpRequest}}return fe.\u0275fac=function(K){return new(K||fe)},fe.\u0275prov=O.Yz7({token:fe,factory:fe.\u0275fac}),fe})();const St=new O.OlP("EventManagerPlugins");let pt=(()=>{class fe{constructor(K,ke){this._zone=ke,this._eventNameToPlugin=new Map,K.forEach(ut=>ut.manager=this),this._plugins=K.slice().reverse()}addEventListener(K,ke,ut){return this._findPluginFor(ke).addEventListener(K,ke,ut)}addGlobalEventListener(K,ke,ut){return this._findPluginFor(ke).addGlobalEventListener(K,ke,ut)}getZone(){return this._zone}_findPluginFor(K){const ke=this._eventNameToPlugin.get(K);if(ke)return ke;const ut=this._plugins;for(let Rt=0;Rt<ut.length;Rt++){const ir=ut[Rt];if(ir.supports(K))return this._eventNameToPlugin.set(K,ir),ir}throw new Error(`No event manager plugin found for event ${K}`)}}return fe.\u0275fac=function(K){return new(K||fe)(O.LFG(St),O.LFG(O.R0b))},fe.\u0275prov=O.Yz7({token:fe,factory:fe.\u0275fac}),fe})();class xt{constructor(z){this._doc=z}addGlobalEventListener(z,K,ke){const ut=(0,E.q)().getGlobalEventTarget(this._doc,z);if(!ut)throw new Error(`Unsupported event target ${ut} for event ${K}`);return this.addEventListener(ut,K,ke)}}let kt=(()=>{class fe{constructor(){this._stylesSet=new Set}addStyles(K){const ke=new Set;K.forEach(ut=>{this._stylesSet.has(ut)||(this._stylesSet.add(ut),ke.add(ut))}),this.onStylesAdded(ke)}onStylesAdded(K){}getAllStyles(){return Array.from(this._stylesSet)}}return fe.\u0275fac=function(K){return new(K||fe)},fe.\u0275prov=O.Yz7({token:fe,factory:fe.\u0275fac}),fe})(),xn=(()=>{class fe extends kt{constructor(K){super(),this._doc=K,this._hostNodes=new Map,this._hostNodes.set(K.head,[])}_addStylesToHost(K,ke,ut){K.forEach(Rt=>{const ir=this._doc.createElement("style");ir.textContent=Rt,ut.push(ke.appendChild(ir))})}addHost(K){const ke=[];this._addStylesToHost(this._stylesSet,K,ke),this._hostNodes.set(K,ke)}removeHost(K){const ke=this._hostNodes.get(K);ke&&ke.forEach(vn),this._hostNodes.delete(K)}onStylesAdded(K){this._hostNodes.forEach((ke,ut)=>{this._addStylesToHost(K,ut,ke)})}ngOnDestroy(){this._hostNodes.forEach(K=>K.forEach(vn))}}return fe.\u0275fac=function(K){return new(K||fe)(O.LFG(E.K0))},fe.\u0275prov=O.Yz7({token:fe,factory:fe.\u0275fac}),fe})();function vn(fe){(0,E.q)().remove(fe)}const Nt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Dt=/%COMP%/g;function Bt(fe,z,K){for(let ke=0;ke<z.length;ke++){let ut=z[ke];Array.isArray(ut)?Bt(fe,ut,K):(ut=ut.replace(Dt,fe),K.push(ut))}return K}function wn(fe){return z=>{if("__ngUnwrap__"===z)return fe;!1===fe(z)&&(z.preventDefault(),z.returnValue=!1)}}let On=(()=>{class fe{constructor(K,ke,ut){this.eventManager=K,this.sharedStylesHost=ke,this.appId=ut,this.rendererByCompId=new Map,this.defaultRenderer=new Tn(K)}createRenderer(K,ke){if(!K||!ke)return this.defaultRenderer;switch(ke.encapsulation){case O.ifc.Emulated:{let ut=this.rendererByCompId.get(ke.id);return ut||(ut=new Ht(this.eventManager,this.sharedStylesHost,ke,this.appId),this.rendererByCompId.set(ke.id,ut)),ut.applyToHost(K),ut}case 1:case O.ifc.ShadowDom:return new Gn(this.eventManager,this.sharedStylesHost,K,ke);default:if(!this.rendererByCompId.has(ke.id)){const ut=Bt(ke.id,ke.styles,[]);this.sharedStylesHost.addStyles(ut),this.rendererByCompId.set(ke.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return fe.\u0275fac=function(K){return new(K||fe)(O.LFG(pt),O.LFG(xn),O.LFG(O.AFp))},fe.\u0275prov=O.Yz7({token:fe,factory:fe.\u0275fac}),fe})();class Tn{constructor(z){this.eventManager=z,this.data=Object.create(null)}destroy(){}createElement(z,K){return K?document.createElementNS(Nt[K]||K,z):document.createElement(z)}createComment(z){return document.createComment(z)}createText(z){return document.createTextNode(z)}appendChild(z,K){z.appendChild(K)}insertBefore(z,K,ke){z&&z.insertBefore(K,ke)}removeChild(z,K){z&&z.removeChild(K)}selectRootElement(z,K){let ke="string"==typeof z?document.querySelector(z):z;if(!ke)throw new Error(`The selector "${z}" did not match any elements`);return K||(ke.textContent=""),ke}parentNode(z){return z.parentNode}nextSibling(z){return z.nextSibling}setAttribute(z,K,ke,ut){if(ut){K=ut+":"+K;const Rt=Nt[ut];Rt?z.setAttributeNS(Rt,K,ke):z.setAttribute(K,ke)}else z.setAttribute(K,ke)}removeAttribute(z,K,ke){if(ke){const ut=Nt[ke];ut?z.removeAttributeNS(ut,K):z.removeAttribute(`${ke}:${K}`)}else z.removeAttribute(K)}addClass(z,K){z.classList.add(K)}removeClass(z,K){z.classList.remove(K)}setStyle(z,K,ke,ut){ut&(O.JOm.DashCase|O.JOm.Important)?z.style.setProperty(K,ke,ut&O.JOm.Important?"important":""):z.style[K]=ke}removeStyle(z,K,ke){ke&O.JOm.DashCase?z.style.removeProperty(K):z.style[K]=""}setProperty(z,K,ke){z[K]=ke}setValue(z,K){z.nodeValue=K}listen(z,K,ke){return"string"==typeof z?this.eventManager.addGlobalEventListener(z,K,wn(ke)):this.eventManager.addEventListener(z,K,wn(ke))}}class Ht extends Tn{constructor(z,K,ke,ut){super(z),this.component=ke;const Rt=Bt(ut+"-"+ke.id,ke.styles,[]);K.addStyles(Rt),this.contentAttr="_ngcontent-%COMP%".replace(Dt,ut+"-"+ke.id),this.hostAttr=function(fe){return"_nghost-%COMP%".replace(Dt,fe)}(ut+"-"+ke.id)}applyToHost(z){super.setAttribute(z,this.hostAttr,"")}createElement(z,K){const ke=super.createElement(z,K);return super.setAttribute(ke,this.contentAttr,""),ke}}class Gn extends Tn{constructor(z,K,ke,ut){super(z),this.sharedStylesHost=K,this.hostEl=ke,this.shadowRoot=ke.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Rt=Bt(ut.id,ut.styles,[]);for(let ir=0;ir<Rt.length;ir++){const Br=document.createElement("style");Br.textContent=Rt[ir],this.shadowRoot.appendChild(Br)}}nodeOrShadowRoot(z){return z===this.hostEl?this.shadowRoot:z}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(z,K){return super.appendChild(this.nodeOrShadowRoot(z),K)}insertBefore(z,K,ke){return super.insertBefore(this.nodeOrShadowRoot(z),K,ke)}removeChild(z,K){return super.removeChild(this.nodeOrShadowRoot(z),K)}parentNode(z){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(z)))}}let Jn=(()=>{class fe extends xt{constructor(K){super(K)}supports(K){return!0}addEventListener(K,ke,ut){return K.addEventListener(ke,ut,!1),()=>this.removeEventListener(K,ke,ut)}removeEventListener(K,ke,ut){return K.removeEventListener(ke,ut)}}return fe.\u0275fac=function(K){return new(K||fe)(O.LFG(E.K0))},fe.\u0275prov=O.Yz7({token:fe,factory:fe.\u0275fac}),fe})();const gr=["alt","control","meta","shift"],Ft={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ci={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Cr={alt:fe=>fe.altKey,control:fe=>fe.ctrlKey,meta:fe=>fe.metaKey,shift:fe=>fe.shiftKey};let nr=(()=>{class fe extends xt{constructor(K){super(K)}supports(K){return null!=fe.parseEventName(K)}addEventListener(K,ke,ut){const Rt=fe.parseEventName(ke),ir=fe.eventCallback(Rt.fullKey,ut,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,E.q)().onAndCancel(K,Rt.domEventName,ir))}static parseEventName(K){const ke=K.toLowerCase().split("."),ut=ke.shift();if(0===ke.length||"keydown"!==ut&&"keyup"!==ut)return null;const Rt=fe._normalizeKey(ke.pop());let ir="";if(gr.forEach(pi=>{const ca=ke.indexOf(pi);ca>-1&&(ke.splice(ca,1),ir+=pi+".")}),ir+=Rt,0!=ke.length||0===Rt.length)return null;const Br={};return Br.domEventName=ut,Br.fullKey=ir,Br}static getEventFullKey(K){let ke="",ut=function(fe){let z=fe.key;if(null==z){if(z=fe.keyIdentifier,null==z)return"Unidentified";z.startsWith("U+")&&(z=String.fromCharCode(parseInt(z.substring(2),16)),3===fe.location&&ci.hasOwnProperty(z)&&(z=ci[z]))}return Ft[z]||z}(K);return ut=ut.toLowerCase()," "===ut?ut="space":"."===ut&&(ut="dot"),gr.forEach(Rt=>{Rt!=ut&&Cr[Rt](K)&&(ke+=Rt+".")}),ke+=ut,ke}static eventCallback(K,ke,ut){return Rt=>{fe.getEventFullKey(Rt)===K&&ut.runGuarded(()=>ke(Rt))}}static _normalizeKey(K){return"esc"===K?"escape":K}}return fe.\u0275fac=function(K){return new(K||fe)(O.LFG(E.K0))},fe.\u0275prov=O.Yz7({token:fe,factory:fe.\u0275fac}),fe})();const Ve=(0,O.eFA)(O._c5,"browser",[{provide:O.Lbi,useValue:E.bD},{provide:O.g9A,useValue:function(){L.makeCurrent(),we.init()},multi:!0},{provide:E.K0,useFactory:function(){return(0,O.RDi)(document),document},deps:[]}]),be=[[],{provide:O.zSh,useValue:"root"},{provide:O.qLn,useFactory:function(){return new O.qLn},deps:[]},{provide:St,useClass:Jn,multi:!0,deps:[E.K0,O.R0b,O.Lbi]},{provide:St,useClass:nr,multi:!0,deps:[E.K0]},[],{provide:On,useClass:On,deps:[pt,xn,O.AFp]},{provide:O.FYo,useExisting:On},{provide:kt,useExisting:xn},{provide:xn,useClass:xn,deps:[E.K0]},{provide:O.dDg,useClass:O.dDg,deps:[O.R0b]},{provide:pt,useClass:pt,deps:[St,O.R0b]},{provide:E.JF,useClass:_e,deps:[]},[]];let Pe=(()=>{class fe{constructor(K){if(K)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(K){return{ngModule:fe,providers:[{provide:O.AFp,useValue:K.appId},{provide:Se,useExisting:O.AFp},ve]}}}return fe.\u0275fac=function(K){return new(K||fe)(O.LFG(fe,12))},fe.\u0275mod=O.oAB({type:fe}),fe.\u0275inj=O.cJS({providers:be,imports:[E.ez,O.hGG]}),fe})();"undefined"!=typeof window&&window;var zr=F(174),gi=F(665),Zr=F(8945),rs=F(4022),xr=F(8002),qi=F(5257),qr=F(7910),ar=F(2329);const Vn=(0,xr.U)(fe=>!!fe);let mr=(()=>{class fe{constructor(K,ke){this.router=K,this.auth=ke,this.canActivate=(ut,Rt)=>{const ir=ut.data.authGuardPipe||(()=>Vn);return(0,qr.EA)(this.auth).pipe((0,qi.q)(1),ir(ut,Rt),(0,xr.U)(Br=>"boolean"==typeof Br?Br:Array.isArray(Br)?this.router.createUrlTree(Br):this.router.parseUrl(Br)))}}}return fe.\u0275fac=function(K){return new(K||fe)(O.LFG(zr.F0),O.LFG(qr.gx))},fe.\u0275prov=O.Yz7({token:fe,factory:fe.\u0275fac,providedIn:"any"}),fe})();const ht=fe=>({canActivate:[mr],data:{authGuardPipe:fe}}),Sn=[Object.assign({path:"",loadChildren:()=>Promise.resolve().then(F.bind(F,7545)).then(fe=>fe.LoginModule)},ht(()=>{return fe=["home"],(0,rs.z)(Vn,(0,xr.U)(z=>z&&fe||!0));var fe})),Object.assign({path:"home",loadChildren:()=>Promise.resolve().then(F.bind(F,4427)).then(fe=>fe.HomeModule)},ht(()=>{return fe=[""],(0,rs.z)(Vn,(0,xr.U)(z=>z||fe));var fe})),{path:"**",redirectTo:"",pathMatch:"full"}];let zn=(()=>{class fe{}return fe.\u0275fac=function(K){return new(K||fe)},fe.\u0275mod=O.oAB({type:fe}),fe.\u0275inj=O.cJS({imports:[[zr.Bz.forRoot(Sn,{preloadingStrategy:zr.wm})],zr.Bz]}),fe})(),Xn=(()=>{class fe{constructor(K){this.platform=K,this.title="trailApp",this.initializeApp()}initializeApp(){this.platform.ready().then(()=>{console.log("ready")})}}return fe.\u0275fac=function(K){return new(K||fe)(O.Y36(Zr.t4))},fe.\u0275cmp=O.Xpm({type:fe,selectors:[["app-root"]],decls:2,vars:0,template:function(K,ke){1&K&&(O.TgZ(0,"ion-app"),O._UZ(1,"ion-router-outlet"),O.qZA())},directives:[Zr.dr,Zr.jP],styles:[""]}),fe})();var kr=F(4427),Fi=F(127),Jr=F(2502);const _i_firebase={projectId:"trail-app-aa3ab",appId:"1:274367012522:web:30b70ab84769c87aca3ad3",databaseURL:"https://trail-app-aa3ab-default-rtdb.firebaseio.com",storageBucket:"trail-app-aa3ab.appspot.com",apiKey:"AIzaSyBVh_gUX8-vRECj9rPbevw38_FAyV6e12s",authDomain:"trail-app-aa3ab.firebaseapp.com",messagingSenderId:"274367012522"};var ri=F(2805),ws=F(841),Yi=F(407);class Ss{constructor(z){return z}}const cs="database",ji=new O.OlP("angularfire2.database-instances");function Js(fe){return(z,K)=>{const ke=z.runOutsideAngular(()=>fe(K));return new Ss(ke)}}const eo={provide:class{constructor(){return(0,ri.vb)(cs)}},deps:[[new O.FiY,ji]]},ya={provide:Ss,useFactory:function(fe,z){const K=(0,ri.JM)(cs,fe,z);return K&&new Ss(K)},deps:[[new O.FiY,ji],Fi.Ot]};let vi=(()=>{class fe{constructor(){(0,ar.KN)("angularfire",ri.q4.full,"rtdb")}}return fe.\u0275fac=function(K){return new(K||fe)},fe.\u0275mod=O.oAB({type:fe}),fe.\u0275inj=O.cJS({providers:[ya,eo]}),fe})();function ms(fe,...z){return{ngModule:vi,providers:[{provide:ji,useFactory:Js(fe),multi:!0,deps:[O.R0b,O.zs3,ri.HU,Fi.z6,[new O.FiY,qr.dh],[new O.FiY,ws.nm],...z]}]}}const qs=(0,ri.u3)(Yi.N8,!0);var To=F(7545),Zo=F(3824),Rs=F(8939),hn=F(3792),br=F(3071),So=F(3637),Ti=F(8891),Ms=F(4402),ss=F(5917),ys=F(9761),Vs=F(7393);function Bs(){return fe=>fe.lift(new ja)}class ja{call(z,K){return K.subscribe(new _s(z))}}class _s extends Vs.L{constructor(z){super(z),this.hasPrev=!1}_next(z){let K;this.hasPrev?K=[this.prev,z]:this.hasPrev=!0,this.prev=z,K&&this.destination.next(K)}}var Os=F(2145),$s=F(7519),Bi=F(5435),_a=(F(4828),F(3394)),un=F(1304),Si=F(3854),Ys=F(3910);function ds(fe,z){if(void 0===z)return{merge:!1};if(void 0!==z.mergeFields&&void 0!==z.merge)throw new un.WA("invalid-argument",`Invalid options passed to function ${fe}(): You cannot specify both "merge" and "mergeFields".`);return z}function Ks(){if("undefined"==typeof Uint8Array)throw new un.WA("unimplemented","Uint8Arrays are not available in this environment.")}function so(){if(!(0,un.Me)())throw new un.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class hs{constructor(z){this._delegate=z}static fromBase64String(z){return so(),new hs(un.Jj.fromBase64String(z))}static fromUint8Array(z){return Ks(),new hs(un.Jj.fromUint8Array(z))}toBase64(){return so(),this._delegate.toBase64()}toUint8Array(){return Ks(),this._delegate.toUint8Array()}isEqual(z){return this._delegate.isEqual(z._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ji(fe){return function(fe,z){if("object"!=typeof fe||null===fe)return!1;const K=fe;for(const ke of["next","error","complete"])if(ke in K&&"function"==typeof K[ke])return!0;return!1}(fe)}class oo{enableIndexedDbPersistence(z,K){return(0,un.ST)(z._delegate,{forceOwnership:K})}enableMultiTabIndexedDbPersistence(z){return(0,un.fH)(z._delegate)}clearIndexedDbPersistence(z){return(0,un.Fc)(z._delegate)}}class li{constructor(z,K,ke){this._delegate=K,this._persistenceProvider=ke,this.INTERNAL={delete:()=>this.terminate()},z instanceof un.l7||(this._appCompat=z)}get _databaseId(){return this._delegate._databaseId}settings(z){const K=this._delegate._getSettings();!z.merge&&K.host!==z.host&&(0,un.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),z.merge&&delete(z=Object.assign(Object.assign({},K),z)).merge,this._delegate._setSettings(z)}useEmulator(z,K,ke={}){(0,un.at)(this._delegate,z,K,ke)}enableNetwork(){return(0,un.Ix)(this._delegate)}disableNetwork(){return(0,un.TF)(this._delegate)}enablePersistence(z){let K=!1,ke=!1;return z&&(K=!!z.synchronizeTabs,ke=!!z.experimentalForceOwningTab,(0,un.Wi)("synchronizeTabs",K,"experimentalForceOwningTab",ke)),K?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,ke)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,un.Mx)(this._delegate)}onSnapshotsInSync(z){return(0,un.sc)(this._delegate,z)}get app(){if(!this._appCompat)throw new un.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(z){try{return new lr(this,(0,un.hJ)(this._delegate,z))}catch(K){throw I(K,"collection()","Firestore.collection()")}}doc(z){try{return new Ai(this,(0,un.JU)(this._delegate,z))}catch(K){throw I(K,"doc()","Firestore.doc()")}}collectionGroup(z){try{return new dt(this,(0,un.B$)(this._delegate,z))}catch(K){throw I(K,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(z){return(0,un.i3)(this._delegate,K=>z(new Ds(this,K)))}batch(){return(0,un.qY)(this._delegate),new la(new un.PU(this._delegate,z=>(0,un.GL)(this._delegate,z)))}loadBundle(z){return(0,un.Pb)(this._delegate,z)}namedQuery(z){return(0,un.L$)(this._delegate,z).then(K=>K?new dt(this,K):null)}}class vs extends un.u7{constructor(z){super(),this.firestore=z}convertBytes(z){return new hs(new un.Jj(z))}convertReference(z){const K=this.convertDocumentKey(z,this.firestore._databaseId);return Ai.forKey(K,this.firestore,null)}}class Ds{constructor(z,K){this._firestore=z,this._delegate=K,this._userDataWriter=new vs(z)}get(z){const K=Nn(z);return this._delegate.get(K).then(ke=>new Y(this._firestore,new un.xU(this._firestore._delegate,this._userDataWriter,ke._key,ke._document,ke.metadata,K.converter)))}set(z,K,ke){const ut=Nn(z);return ke?(ds("Transaction.set",ke),this._delegate.set(ut,K,ke)):this._delegate.set(ut,K),this}update(z,K,ke,...ut){const Rt=Nn(z);return 2===arguments.length?this._delegate.update(Rt,K):this._delegate.update(Rt,K,ke,...ut),this}delete(z){const K=Nn(z);return this._delegate.delete(K),this}}class la{constructor(z){this._delegate=z}set(z,K,ke){const ut=Nn(z);return ke?(ds("WriteBatch.set",ke),this._delegate.set(ut,K,ke)):this._delegate.set(ut,K),this}update(z,K,ke,...ut){const Rt=Nn(z);return 2===arguments.length?this._delegate.update(Rt,K):this._delegate.update(Rt,K,ke,...ut),this}delete(z){const K=Nn(z);return this._delegate.delete(K),this}commit(){return this._delegate.commit()}}class ao{constructor(z,K,ke){this._firestore=z,this._userDataWriter=K,this._delegate=ke}fromFirestore(z,K){const ke=new un.$q(this._firestore._delegate,this._userDataWriter,z._key,z._document,z.metadata,null);return this._delegate.fromFirestore(new pe(this._firestore,ke),null!=K?K:{})}toFirestore(z,K){return K?this._delegate.toFirestore(z,K):this._delegate.toFirestore(z)}static getInstance(z,K){const ke=ao.INSTANCES;let ut=ke.get(z);ut||(ut=new WeakMap,ke.set(z,ut));let Rt=ut.get(K);return Rt||(Rt=new ao(z,new vs(z),K),ut.set(K,Rt)),Rt}}ao.INSTANCES=new WeakMap;class Ai{constructor(z,K){this.firestore=z,this._delegate=K,this._userDataWriter=new vs(z)}static forPath(z,K,ke){if(z.length%2!=0)throw new un.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${z.canonicalString()} has ${z.length}`);return new Ai(K,new un.my(K._delegate,ke,new un.Ky(z)))}static forKey(z,K,ke){return new Ai(K,new un.my(K._delegate,ke,z))}get id(){return this._delegate.id}get parent(){return new lr(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(z){try{return new lr(this.firestore,(0,un.hJ)(this._delegate,z))}catch(K){throw I(K,"collection()","DocumentReference.collection()")}}isEqual(z){return(z=(0,Si.m9)(z))instanceof un.my&&(0,un.Eo)(this._delegate,z)}set(z,K){K=ds("DocumentReference.set",K);try{return K?(0,un.pl)(this._delegate,z,K):(0,un.pl)(this._delegate,z)}catch(ke){throw I(ke,"setDoc()","DocumentReference.set()")}}update(z,K,...ke){try{return 1===arguments.length?(0,un.r7)(this._delegate,z):(0,un.r7)(this._delegate,z,K,...ke)}catch(ut){throw I(ut,"updateDoc()","DocumentReference.update()")}}delete(){return(0,un.oe)(this._delegate)}onSnapshot(...z){const K=N(z),ke=w(z,ut=>new Y(this.firestore,new un.xU(this.firestore._delegate,this._userDataWriter,ut._key,ut._document,ut.metadata,this._delegate.converter)));return(0,un.cf)(this._delegate,K,ke)}get(z){let K;return K="cache"===(null==z?void 0:z.source)?(0,un.kl)(this._delegate):"server"===(null==z?void 0:z.source)?(0,un.Xk)(this._delegate):(0,un.QT)(this._delegate),K.then(ke=>new Y(this.firestore,new un.xU(this.firestore._delegate,this._userDataWriter,ke._key,ke._document,ke.metadata,this._delegate.converter)))}withConverter(z){return new Ai(this.firestore,this._delegate.withConverter(z?ao.getInstance(this.firestore,z):null))}}function I(fe,z,K){return fe.message=fe.message.replace(z,K),fe}function N(fe){for(const z of fe)if("object"==typeof z&&!Ji(z))return z;return{}}function w(fe,z){var K,ke;let ut;return ut=Ji(fe[0])?fe[0]:Ji(fe[1])?fe[1]:"function"==typeof fe[0]?{next:fe[0],error:fe[1],complete:fe[2]}:{next:fe[1],error:fe[2],complete:fe[3]},{next:Rt=>{ut.next&&ut.next(z(Rt))},error:null===(K=ut.error)||void 0===K?void 0:K.bind(ut),complete:null===(ke=ut.complete)||void 0===ke?void 0:ke.bind(ut)}}class Y{constructor(z,K){this._firestore=z,this._delegate=K}get ref(){return new Ai(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(z){return this._delegate.data(z)}get(z,K){return this._delegate.get(z,K)}isEqual(z){return(0,un.qK)(this._delegate,z._delegate)}}class pe extends Y{data(z){const K=this._delegate.data(z);return(0,un.K9)(void 0!==K,"Document in a QueryDocumentSnapshot should exist"),K}}class dt{constructor(z,K){this.firestore=z,this._delegate=K,this._userDataWriter=new vs(z)}where(z,K,ke){try{return new dt(this.firestore,(0,un.IO)(this._delegate,(0,un.ar)(z,K,ke)))}catch(ut){throw I(ut,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(z,K){try{return new dt(this.firestore,(0,un.IO)(this._delegate,(0,un.Xo)(z,K)))}catch(ke){throw I(ke,/(orderBy|where)\(\)/,"Query.$1()")}}limit(z){try{return new dt(this.firestore,(0,un.IO)(this._delegate,(0,un.b9)(z)))}catch(K){throw I(K,"limit()","Query.limit()")}}limitToLast(z){try{return new dt(this.firestore,(0,un.IO)(this._delegate,(0,un.vh)(z)))}catch(K){throw I(K,"limitToLast()","Query.limitToLast()")}}startAt(...z){try{return new dt(this.firestore,(0,un.IO)(this._delegate,(0,un.e0)(...z)))}catch(K){throw I(K,"startAt()","Query.startAt()")}}startAfter(...z){try{return new dt(this.firestore,(0,un.IO)(this._delegate,(0,un.TQ)(...z)))}catch(K){throw I(K,"startAfter()","Query.startAfter()")}}endBefore(...z){try{return new dt(this.firestore,(0,un.IO)(this._delegate,(0,un.Lx)(...z)))}catch(K){throw I(K,"endBefore()","Query.endBefore()")}}endAt(...z){try{return new dt(this.firestore,(0,un.IO)(this._delegate,(0,un.Wu)(...z)))}catch(K){throw I(K,"endAt()","Query.endAt()")}}isEqual(z){return(0,un.iE)(this._delegate,z._delegate)}get(z){let K;return K="cache"===(null==z?void 0:z.source)?(0,un.UQ)(this._delegate):"server"===(null==z?void 0:z.source)?(0,un.zN)(this._delegate):(0,un.PL)(this._delegate),K.then(ke=>new fn(this.firestore,new un.W(this.firestore._delegate,this._userDataWriter,this._delegate,ke._snapshot)))}onSnapshot(...z){const K=N(z),ke=w(z,ut=>new fn(this.firestore,new un.W(this.firestore._delegate,this._userDataWriter,this._delegate,ut._snapshot)));return(0,un.cf)(this._delegate,K,ke)}withConverter(z){return new dt(this.firestore,this._delegate.withConverter(z?ao.getInstance(this.firestore,z):null))}}class jt{constructor(z,K){this._firestore=z,this._delegate=K}get type(){return this._delegate.type}get doc(){return new pe(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class fn{constructor(z,K){this._firestore=z,this._delegate=K}get query(){return new dt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(z=>new pe(this._firestore,z))}docChanges(z){return this._delegate.docChanges(z).map(K=>new jt(this._firestore,K))}forEach(z,K){this._delegate.forEach(ke=>{z.call(K,new pe(this._firestore,ke))})}isEqual(z){return(0,un.qK)(this._delegate,z._delegate)}}class lr extends dt{constructor(z,K){super(z,K),this.firestore=z,this._delegate=K}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const z=this._delegate.parent;return z?new Ai(this.firestore,z):null}doc(z){try{return new Ai(this.firestore,void 0===z?(0,un.JU)(this._delegate):(0,un.JU)(this._delegate,z))}catch(K){throw I(K,"doc()","CollectionReference.doc()")}}add(z){return(0,un.ET)(this._delegate,z).then(K=>new Ai(this.firestore,K))}isEqual(z){return(0,un.Eo)(this._delegate,z._delegate)}withConverter(z){return new lr(this.firestore,this._delegate.withConverter(z?ao.getInstance(this.firestore,z):null))}}function Nn(fe){return(0,un.Cf)(fe,un.my)}class Vr{constructor(...z){this._delegate=new un.Lz(...z)}static documentId(){return new Vr(un.Xb.keyField().canonicalString())}isEqual(z){return(z=(0,Si.m9)(z))instanceof un.Lz&&this._delegate._internalPath.isEqual(z._internalPath)}}class ui{constructor(z){this._delegate=z}static serverTimestamp(){const z=(0,un.Bt)();return z._methodName="FieldValue.serverTimestamp",new ui(z)}static delete(){const z=(0,un.AK)();return z._methodName="FieldValue.delete",new ui(z)}static arrayUnion(...z){const K=(0,un.vr)(...z);return K._methodName="FieldValue.arrayUnion",new ui(K)}static arrayRemove(...z){const K=(0,un.Ab)(...z);return K._methodName="FieldValue.arrayRemove",new ui(K)}static increment(z){const K=(0,un.nP)(z);return K._methodName="FieldValue.increment",new ui(K)}isEqual(z){return this._delegate.isEqual(z._delegate)}}const qt={Firestore:li,GeoPoint:un.F8,Timestamp:un.EK,Blob:hs,Transaction:Ds,WriteBatch:la,DocumentReference:Ai,DocumentSnapshot:Y,Query:dt,QueryDocumentSnapshot:pe,QuerySnapshot:fn,CollectionReference:lr,FieldPath:Vr,FieldValue:ui,setLogLevel:function(fe){(0,un.Ub)(fe)},CACHE_SIZE_UNLIMITED:un.IX};var fe;(function(fe,z){fe.INTERNAL.registerComponent(new Ys.wA("firestore-compat",K=>((z,K)=>new li(z,K,new oo))(K.getProvider("app-compat").getImmediate(),K.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},qt)))})(fe=_a.Z),fe.registerVersion("@firebase/firestore-compat","0.2.1");var es=F(8006),Bn=F(7841);function Uo(fe,z){return function(fe,z=So.z){return new Ti.y(K=>{let ke;return null!=z?z.schedule(()=>{ke=fe.onSnapshot({includeMetadataChanges:!0},K)}):ke=fe.onSnapshot({includeMetadataChanges:!0},K),()=>{null!=ke&&ke()}})}(fe,z)}function Pt(fe,z){return Uo(fe,z).pipe((0,xr.U)(K=>({payload:K,type:"query"})))}function pn(fe,z){return Pt(fe,z).pipe((0,ys.O)(void 0),Bs(),(0,xr.U)(([K,ke])=>{const ut=ke.payload.docChanges(),Rt=ut.map(ir=>({type:ir.type,payload:ir}));return K&&JSON.stringify(K.payload.metadata)!==JSON.stringify(ke.payload.metadata)&&ke.payload.docs.forEach((ir,Br)=>{const pi=ut.find(Ao=>Ao.doc.ref.isEqual(ir.ref)),ca=null==K?void 0:K.payload.docs.find(Ao=>Ao.ref.isEqual(ir.ref));pi&&JSON.stringify(pi.doc.metadata)===JSON.stringify(ir.metadata)||!pi&&ca&&JSON.stringify(ca.metadata)===JSON.stringify(ir.metadata)||Rt.push({type:"modified",payload:{oldIndex:Br,newIndex:Br,type:"modified",doc:ir}})}),Rt}))}function Ri(fe,z,K){return pn(fe,K).pipe((0,Os.R)((ke,ut)=>function(fe,z,K){return z.forEach(ke=>{K.indexOf(ke.type)>-1&&(fe=function(fe,z){switch(z.type){case"added":if(!fe[z.newIndex]||!fe[z.newIndex].doc.ref.isEqual(z.doc.ref))return bl(fe,z.newIndex,0,z);break;case"modified":if(null==fe[z.oldIndex]||fe[z.oldIndex].doc.ref.isEqual(z.doc.ref)){if(z.oldIndex!==z.newIndex){const K=fe.slice();return K.splice(z.oldIndex,1),K.splice(z.newIndex,0,z),K}return bl(fe,z.newIndex,1,z)}break;case"removed":if(fe[z.oldIndex]&&fe[z.oldIndex].doc.ref.isEqual(z.doc.ref))return bl(fe,z.oldIndex,1)}return fe}(fe,ke))}),fe}(ke,ut.map(Rt=>Rt.payload),z),[]),(0,$s.x)(),(0,xr.U)(ke=>ke.map(ut=>({type:ut.type,payload:ut}))))}function bl(fe,z,K,...ke){const ut=fe.slice();return ut.splice(z,K,...ke),ut}function Ea(fe){return(!fe||0===fe.length)&&(fe=["added","removed","modified"]),fe}class Ha{constructor(z,K,ke){this.ref=z,this.query=K,this.afs=ke}stateChanges(z){let K=pn(this.query,this.afs.schedulers.outsideAngular);return z&&z.length>0&&(K=K.pipe((0,xr.U)(ke=>ke.filter(ut=>z.indexOf(ut.type)>-1)))),K.pipe((0,ys.O)(void 0),Bs(),(0,Bi.h)(([ke,ut])=>ut.length>0||!ke),(0,xr.U)(([ke,ut])=>ut),ri.iC)}auditTrail(z){return this.stateChanges(z).pipe((0,Os.R)((K,ke)=>[...K,...ke],[]))}snapshotChanges(z){const K=Ea(z);return Ri(this.query,K,this.afs.schedulers.outsideAngular).pipe(ri.iC)}valueChanges(z={}){return Pt(this.query,this.afs.schedulers.outsideAngular).pipe((0,xr.U)(K=>K.payload.docs.map(ke=>z.idField?Object.assign(Object.assign({},ke.data()),{[z.idField]:ke.id}):ke.data())),ri.iC)}get(z){return(0,Ms.D)(this.query.get(z)).pipe(ri.iC)}add(z){return this.ref.add(z)}doc(z){return new Ia(this.ref.doc(z),this.afs)}}class Ia{constructor(z,K){this.ref=z,this.afs=K}set(z,K){return this.ref.set(z,K)}update(z){return this.ref.update(z)}delete(){return this.ref.delete()}collection(z,K){const ke=this.ref.collection(z),{ref:ut,query:Rt}=fr(ke,K);return new Ha(ut,Rt,this.afs)}snapshotChanges(){return function(fe,z){return Uo(fe,z).pipe((0,ys.O)(void 0),Bs(),(0,xr.U)(([K,ke])=>ke.exists?(null==K?void 0:K.exists)?{payload:ke,type:"modified"}:{payload:ke,type:"added"}:{payload:ke,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ri.iC)}valueChanges(z={}){return this.snapshotChanges().pipe((0,xr.U)(({payload:K})=>z.idField?Object.assign(Object.assign({},K.data()),{[z.idField]:K.id}):K.data()))}get(z){return(0,Ms.D)(this.ref.get(z)).pipe(ri.iC)}}class ua{constructor(z,K){this.query=z,this.afs=K}stateChanges(z){return z&&0!==z.length?pn(this.query,this.afs.schedulers.outsideAngular).pipe((0,xr.U)(K=>K.filter(ke=>z.indexOf(ke.type)>-1)),(0,Bi.h)(K=>K.length>0),ri.iC):pn(this.query,this.afs.schedulers.outsideAngular).pipe(ri.iC)}auditTrail(z){return this.stateChanges(z).pipe((0,Os.R)((K,ke)=>[...K,...ke],[]))}snapshotChanges(z){const K=Ea(z);return Ri(this.query,K,this.afs.schedulers.outsideAngular).pipe(ri.iC)}valueChanges(z={}){return Pt(this.query,this.afs.schedulers.outsideAngular).pipe((0,xr.U)(ke=>ke.payload.docs.map(ut=>z.idField?Object.assign({[z.idField]:ut.id},ut.data()):ut.data())),ri.iC)}get(z){return(0,Ms.D)(this.query.get(z)).pipe(ri.iC)}}const nl=new O.OlP("angularfire2.enableFirestorePersistence"),rl=new O.OlP("angularfire2.firestore.persistenceSettings"),ba=new O.OlP("angularfire2.firestore.settings"),Qo=new O.OlP("angularfire2.firestore.use-emulator");function fr(fe,z=(K=>K)){return{query:z(fe),ref:fe}}let uo=(()=>{class fe{constructor(K,ke,ut,Rt,ir,Br,pi,ca,Ao,il,Xo,Jo,k,S,T,H,te){this.schedulers=pi;const ye=(0,Rs.on)(K,Br,ke),We=Ao;il&&(0,es.nw)(ye,Br,Xo,k,S,T,Jo,H),[this.firestore,this.persistenceEnabled$]=(0,Rs.cc)(`${ye.name}.firestore`,"AngularFirestore",ye.name,()=>{const ge=Br.runOutsideAngular(()=>ye.firestore());if(Rt&&ge.settings(Rt),We&&ge.useEmulator(...We),ut&&!(0,E.PM)(ir)){const Jt=()=>{try{return(0,Ms.D)(ge.enablePersistence(ca||void 0).then(()=>!0,()=>!1))}catch(kn){return"undefined"!=typeof console&&console.warn(kn),(0,ss.of)(!1)}};return[ge,Br.runOutsideAngular(Jt)]}return[ge,(0,ss.of)(!1)]},[Rt,We,ut])}collection(K,ke){let ut;ut="string"==typeof K?this.firestore.collection(K):K;const{ref:Rt,query:ir}=fr(ut,ke),Br=this.schedulers.ngZone.run(()=>Rt);return new Ha(Br,ir,this)}collectionGroup(K,ke){const ut=ke||(ir=>ir),Rt=this.firestore.collectionGroup(K);return new ua(ut(Rt),this)}doc(K){let ke;ke="string"==typeof K?this.firestore.doc(K):K;const ut=this.schedulers.ngZone.run(()=>ke);return new Ia(ut,this)}createId(){return this.firestore.collection("_").doc().id}}return fe.\u0275fac=function(K){return new(K||fe)(O.LFG(Rs.Dh),O.LFG(Rs.xv,8),O.LFG(nl,8),O.LFG(ba,8),O.LFG(O.Lbi),O.LFG(O.R0b),O.LFG(ri.HU),O.LFG(rl,8),O.LFG(Qo,8),O.LFG(es.zQ,8),O.LFG(es.Qv,8),O.LFG(es.L6,8),O.LFG(es._Q,8),O.LFG(es.rT,8),O.LFG(es.lh,8),O.LFG(es.f7,8),O.LFG(ws.nm,8))},fe.\u0275prov=O.Yz7({token:fe,factory:fe.\u0275fac,providedIn:"any"}),fe})(),Zs=(()=>{class fe{constructor(){Bn.Z.registerVersion("angularfire",ri.q4.full,"fst-compat")}static enablePersistence(K){return{ngModule:fe,providers:[{provide:nl,useValue:!0},{provide:rl,useValue:K}]}}}return fe.\u0275fac=function(K){return new(K||fe)},fe.\u0275mod=O.oAB({type:fe}),fe.\u0275inj=O.cJS({providers:[uo]}),fe})(),bi=(()=>{class fe{}return fe.\u0275fac=function(K){return new(K||fe)},fe.\u0275mod=O.oAB({type:fe,bootstrap:[Xn]}),fe.\u0275inj=O.cJS({providers:[{provide:zr.wN,useClass:Zr.r4},br.K,hn.O,Zo.KQ],imports:[[Pe,Zr.Pc.forRoot(),zn,kr.HomeModule,To.LoginModule,gi.UX,gi.u5,Zo.JS,Zs.enablePersistence(),Rs.hO.initializeApp(_i_firebase),(0,Fi.hX)(()=>(0,Fi.ZF)(_i_firebase)),(0,qr.AR)(()=>(0,qr.v0)()),ms(()=>qs()),(0,Jr.Cm)(()=>(0,Jr.ad)())]]}),fe})();Ve().bootstrapModule(bi).catch(fe=>console.error(fe))},863:(cn,rt,F)=>{var E={"./ion-action-sheet.entry.js":[7321,8592,7321],"./ion-alert.entry.js":[6108,8592,6108],"./ion-app_8.entry.js":[1489,8592,1489],"./ion-avatar_3.entry.js":[305,8592,305],"./ion-back-button.entry.js":[5830,8592,5830],"./ion-backdrop.entry.js":[7757,7757],"./ion-button_2.entry.js":[392,8592,392],"./ion-card_5.entry.js":[6911,8592,6911],"./ion-checkbox.entry.js":[937,8592,937],"./ion-chip.entry.js":[8695,8592,8695],"./ion-col_3.entry.js":[6034,6034],"./ion-datetime_3.entry.js":[8837,8592,8837],"./ion-fab_3.entry.js":[4195,8592,4195],"./ion-img.entry.js":[1709,1709],"./ion-infinite-scroll_2.entry.js":[5931,8592,3087],"./ion-input.entry.js":[4513,8592,4513],"./ion-item-option_3.entry.js":[8056,8592,8056],"./ion-item_8.entry.js":[862,8592,862],"./ion-loading.entry.js":[7509,8592,7509],"./ion-menu_3.entry.js":[6272,8592,6030],"./ion-modal.entry.js":[1855,8592,1855],"./ion-nav_2.entry.js":[8708,8592,8708],"./ion-popover.entry.js":[3527,8592,3527],"./ion-progress-bar.entry.js":[4694,8592,4694],"./ion-radio_2.entry.js":[9222,8592,9222],"./ion-range.entry.js":[5277,8592,5277],"./ion-refresher_2.entry.js":[9921,8592,9921],"./ion-reorder_2.entry.js":[3122,8592,3122],"./ion-ripple-effect.entry.js":[1602,1602],"./ion-route_4.entry.js":[5174,8592,5174],"./ion-searchbar.entry.js":[7895,8592,7895],"./ion-segment_2.entry.js":[6164,8592,6164],"./ion-select_3.entry.js":[592,8592,592],"./ion-slide_2.entry.js":[7162,7162],"./ion-spinner.entry.js":[1374,8592,1374],"./ion-split-pane.entry.js":[7896,7896],"./ion-tab-bar_2.entry.js":[5043,8592,5043],"./ion-tab_2.entry.js":[7802,8592,7802],"./ion-text.entry.js":[9072,8592,9072],"./ion-textarea.entry.js":[2191,8592,2191],"./ion-toast.entry.js":[801,8592,801],"./ion-toggle.entry.js":[7110,8592,7110],"./ion-virtual-scroll.entry.js":[431,431]};function O(ie){if(!F.o(E,ie))return Promise.resolve().then(()=>{var ee=new Error("Cannot find module '"+ie+"'");throw ee.code="MODULE_NOT_FOUND",ee});var L=E[ie],ue=L[0];return Promise.all(L.slice(1).map(F.e)).then(()=>F(ue))}O.keys=()=>Object.keys(E),O.id=863,cn.exports=O},3394:(cn,rt,F)=>{"use strict";F.d(rt,{Z:()=>lt});var E=F(3854),O=F(3910),ie=F(8026),L=F(5422);class ue{constructor(Ke,Re){this._delegate=Ke,this.firebase=Re,(0,ie._addComponent)(Ke,new O.wA("app-compat",()=>this,"PUBLIC")),this.container=Ke.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ke){this._delegate.automaticDataCollectionEnabled=Ke}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ke=>{this._delegate.checkDestroyed(),Ke()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ie.deleteApp)(this._delegate)))}_getService(Ke,Re=ie._DEFAULT_ENTRY_NAME){var Ge;this._delegate.checkDestroyed();const Fe=this._delegate.container.getProvider(Ke);return!Fe.isInitialized()&&"EXPLICIT"===(null===(Ge=Fe.getComponent())||void 0===Ge?void 0:Ge.instantiationMode)&&Fe.initialize(),Fe.getImmediate({identifier:Re})}_removeServiceInstance(Ke,Re=ie._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ke).clearInstance(Re)}_addComponent(Ke){(0,ie._addComponent)(this._delegate,Ke)}_addOrOverwriteComponent(Ke){(0,ie._addOrOverwriteComponent)(this._delegate,Ke)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ie=new E.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ae=function Se(){const Ee=function(Ee){const Ke={},Re={__esModule:!0,initializeApp:function(v,Le={}){const Tt=ie.initializeApp(v,Le);if((0,E.r3)(Ke,Tt.name))return Ke[Tt.name];const ft=new Ee(Tt,Re);return Ke[Tt.name]=ft,ft},app:Fe,registerVersion:ie.registerVersion,setLogLevel:ie.setLogLevel,onLog:ie.onLog,apps:null,SDK_VERSION:ie.SDK_VERSION,INTERNAL:{registerComponent:function(v){const Le=v.name,Tt=Le.replace("-compat","");if(ie._registerComponent(v)&&"PUBLIC"===v.type){const ft=(St=Fe())=>{if("function"!=typeof St[Tt])throw Ie.create("invalid-app-argument",{appName:Le});return St[Tt]()};void 0!==v.serviceProps&&(0,E.ZB)(ft,v.serviceProps),Re[Tt]=ft,Ee.prototype[Tt]=function(...St){return this._getService.bind(this,Le).apply(this,v.multipleInstances?St:[])}}return"PUBLIC"===v.type?Re[Tt]:null},removeApp:function(v){delete Ke[v]},useAsService:function(v,Le){return"serverAuth"===Le?null:Le},modularAPIs:ie}};function Fe(v){if(!(0,E.r3)(Ke,v=v||ie._DEFAULT_ENTRY_NAME))throw Ie.create("no-app",{appName:v});return Ke[v]}return Re.default=Re,Object.defineProperty(Re,"apps",{get:function(){return Object.keys(Ke).map(v=>Ke[v])}}),Fe.App=Ee,Re}(ue);return Ee.INTERNAL=Object.assign(Object.assign({},Ee.INTERNAL),{createFirebaseNamespace:Se,extendNamespace:function(Re){(0,E.ZB)(Ee,Re)},createSubscribe:E.ne,ErrorFactory:E.LL,deepExtend:E.ZB}),Ee}(),ve=new L.Yd("@firebase/app-compat");if((0,E.jU)()&&void 0!==self.firebase){ve.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ee=self.firebase.SDK_VERSION;Ee&&Ee.indexOf("LITE")>=0&&ve.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const lt=ae;(0,ie.registerVersion)("@firebase/app-compat","0.1.37",undefined)},8026:(cn,rt,F)=>{"use strict";F.r(rt),F.d(rt,{FirebaseError:()=>L.ZR,SDK_VERSION:()=>Rr,_DEFAULT_ENTRY_NAME:()=>Dt,_addComponent:()=>Mt,_addOrOverwriteComponent:()=>Gt,_apps:()=>je,_clearComponents:()=>Hn,_components:()=>ct,_getProvider:()=>Bt,_registerComponent:()=>Vt,_removeServiceInstance:()=>wn,deleteApp:()=>Jn,getApp:()=>Ht,getApps:()=>Gn,initializeApp:()=>Sr,onLog:()=>or,registerVersion:()=>er,setLogLevel:()=>sr});var E=F(8239),O=F(3910),ie=F(5422),L=F(3854),ue=F(2268);class ee{constructor(Qe){this.container=Qe}getPlatformInfoString(){return this.container.getProviders().map(wt=>{if(function(at){const Qe=at.getComponent();return"VERSION"===(null==Qe?void 0:Qe.type)}(wt)){const Qt=wt.getImmediate();return`${Qt.library}/${Qt.version}`}return null}).filter(wt=>wt).join(" ")}}const oe="@firebase/app",ae=new ie.Yd("@firebase/app"),Dt="[DEFAULT]",tt={[oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},je=new Map,ct=new Map;function Mt(at,Qe){try{at.container.addComponent(Qe)}catch(wt){ae.debug(`Component ${Qe.name} failed to register with FirebaseApp ${at.name}`,wt)}}function Gt(at,Qe){at.container.addOrOverwriteComponent(Qe)}function Vt(at){const Qe=at.name;if(ct.has(Qe))return ae.debug(`There were multiple attempts to register component ${Qe}.`),!1;ct.set(Qe,at);for(const wt of je.values())Mt(wt,at);return!0}function Bt(at,Qe){const wt=at.container.getProvider("heartbeat").getImmediate({optional:!0});return wt&&wt.triggerHeartbeat(),at.container.getProvider(Qe)}function wn(at,Qe,wt=Dt){Bt(at,Qe).clearInstance(wt)}function Hn(){ct.clear()}const Tn=new L.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Wn{constructor(Qe,wt,Qt){this._isDeleted=!1,this._options=Object.assign({},Qe),this._config=Object.assign({},wt),this._name=wt.name,this._automaticDataCollectionEnabled=wt.automaticDataCollectionEnabled,this._container=Qt,this.container.addComponent(new O.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Qe){this.checkDestroyed(),this._automaticDataCollectionEnabled=Qe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Qe){this._isDeleted=Qe}checkDestroyed(){if(this.isDeleted)throw Tn.create("app-deleted",{appName:this._name})}}const Rr="9.12.1";function Sr(at,Qe={}){let wt=at;"object"!=typeof Qe&&(Qe={name:Qe});const Qt=Object.assign({name:Dt,automaticDataCollectionEnabled:!1},Qe),$t=Qt.name;if("string"!=typeof $t||!$t)throw Tn.create("bad-app-name",{appName:String($t)});if(wt||(wt=(0,L.aH)()),!wt)throw Tn.create("no-options");const Wt=je.get($t);if(Wt){if((0,L.vZ)(wt,Wt.options)&&(0,L.vZ)(Qt,Wt.config))return Wt;throw Tn.create("duplicate-app",{appName:$t})}const Be=new O.H0($t);for(const it of ct.values())Be.addComponent(it);const $e=new Wn(wt,Qt,Be);return je.set($t,$e),$e}function Ht(at=Dt){const Qe=je.get(at);if(!Qe&&at===Dt)return Sr();if(!Qe)throw Tn.create("no-app",{appName:at});return Qe}function Gn(){return Array.from(je.values())}function Jn(at){return En.apply(this,arguments)}function En(){return(En=(0,E.Z)(function*(at){const Qe=at.name;je.has(Qe)&&(je.delete(Qe),yield Promise.all(at.container.getProviders().map(wt=>wt.delete())),at.isDeleted=!0)})).apply(this,arguments)}function er(at,Qe,wt){var Qt;let $t=null!==(Qt=tt[at])&&void 0!==Qt?Qt:at;wt&&($t+=`-${wt}`);const Wt=$t.match(/\s|\//),Be=Qe.match(/\s|\//);if(Wt||Be){const $e=[`Unable to register library "${$t}" with version "${Qe}":`];return Wt&&$e.push(`library name "${$t}" contains illegal characters (whitespace or "/")`),Wt&&Be&&$e.push("and"),Be&&$e.push(`version name "${Qe}" contains illegal characters (whitespace or "/")`),void ae.warn($e.join(" "))}Vt(new O.wA(`${$t}-version`,()=>({library:$t,version:Qe}),"VERSION"))}function or(at,Qe){if(null!==at&&"function"!=typeof at)throw Tn.create("invalid-log-argument");(0,ie.Am)(at,Qe)}function sr(at){(0,ie.Ub)(at)}const Nr="firebase-heartbeat-store";let Ar=null;function hi(){return Ar||(Ar=(0,ue.X3)("firebase-heartbeat-database",1,{upgrade:(at,Qe)=>{0===Qe&&at.createObjectStore(Nr)}}).catch(at=>{throw Tn.create("idb-open",{originalErrorMessage:at.message})})),Ar}function In(){return(In=(0,E.Z)(function*(at){var Qe;try{return(yield hi()).transaction(Nr).objectStore(Nr).get(ni(at))}catch(wt){if(wt instanceof L.ZR)ae.warn(wt.message);else{const Qt=Tn.create("idb-get",{originalErrorMessage:null===(Qe=wt)||void 0===Qe?void 0:Qe.message});ae.warn(Qt.message)}}})).apply(this,arguments)}function Ft(at,Qe){return ci.apply(this,arguments)}function ci(){return(ci=(0,E.Z)(function*(at,Qe){var wt;try{const $t=(yield hi()).transaction(Nr,"readwrite");return yield $t.objectStore(Nr).put(Qe,ni(at)),$t.done}catch(Qt){if(Qt instanceof L.ZR)ae.warn(Qt.message);else{const $t=Tn.create("idb-set",{originalErrorMessage:null===(wt=Qt)||void 0===wt?void 0:wt.message});ae.warn($t.message)}}})).apply(this,arguments)}function ni(at){return`${at.name}!${at.options.appId}`}class Pr{constructor(Qe){this.container=Qe,this._heartbeatsCache=null;const wt=this.container.getProvider("app").getImmediate();this._storage=new mt(wt),this._heartbeatsCachePromise=this._storage.read().then(Qt=>(this._heartbeatsCache=Qt,Qt))}triggerHeartbeat(){var Qe=this;return(0,E.Z)(function*(){const Qt=Qe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),$t=Cr();if(null===Qe._heartbeatsCache&&(Qe._heartbeatsCache=yield Qe._heartbeatsCachePromise),Qe._heartbeatsCache.lastSentHeartbeatDate!==$t&&!Qe._heartbeatsCache.heartbeats.some(Wt=>Wt.date===$t))return Qe._heartbeatsCache.heartbeats.push({date:$t,agent:Qt}),Qe._heartbeatsCache.heartbeats=Qe._heartbeatsCache.heartbeats.filter(Wt=>{const Be=new Date(Wt.date).valueOf();return Date.now()-Be<=2592e6}),Qe._storage.overwrite(Qe._heartbeatsCache)})()}getHeartbeatsHeader(){var Qe=this;return(0,E.Z)(function*(){if(null===Qe._heartbeatsCache&&(yield Qe._heartbeatsCachePromise),null===Qe._heartbeatsCache||0===Qe._heartbeatsCache.heartbeats.length)return"";const wt=Cr(),{heartbeatsToSend:Qt,unsentEntries:$t}=function(at,Qe=1024){const wt=[];let Qt=at.slice();for(const $t of at){const Wt=wt.find(Be=>Be.agent===$t.agent);if(Wt){if(Wt.dates.push($t.date),He(wt)>Qe){Wt.dates.pop();break}}else if(wt.push({agent:$t.agent,dates:[$t.date]}),He(wt)>Qe){wt.pop();break}Qt=Qt.slice(1)}return{heartbeatsToSend:wt,unsentEntries:Qt}}(Qe._heartbeatsCache.heartbeats),Wt=(0,L.L)(JSON.stringify({version:2,heartbeats:Qt}));return Qe._heartbeatsCache.lastSentHeartbeatDate=wt,$t.length>0?(Qe._heartbeatsCache.heartbeats=$t,yield Qe._storage.overwrite(Qe._heartbeatsCache)):(Qe._heartbeatsCache.heartbeats=[],Qe._storage.overwrite(Qe._heartbeatsCache)),Wt})()}}function Cr(){return(new Date).toISOString().substring(0,10)}class mt{constructor(Qe){this.app=Qe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,E.Z)(function*(){return!!(0,L.hl)()&&(0,L.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Qe=this;return(0,E.Z)(function*(){return(yield Qe._canUseIndexedDBPromise)&&(yield function(at){return In.apply(this,arguments)}(Qe.app))||{heartbeats:[]}})()}overwrite(Qe){var wt=this;return(0,E.Z)(function*(){var Qt;if(yield wt._canUseIndexedDBPromise){const Wt=yield wt.read();return Ft(wt.app,{lastSentHeartbeatDate:null!==(Qt=Qe.lastSentHeartbeatDate)&&void 0!==Qt?Qt:Wt.lastSentHeartbeatDate,heartbeats:Qe.heartbeats})}})()}add(Qe){var wt=this;return(0,E.Z)(function*(){var Qt;if(yield wt._canUseIndexedDBPromise){const Wt=yield wt.read();return Ft(wt.app,{lastSentHeartbeatDate:null!==(Qt=Qe.lastSentHeartbeatDate)&&void 0!==Qt?Qt:Wt.lastSentHeartbeatDate,heartbeats:[...Wt.heartbeats,...Qe.heartbeats]})}})()}}function He(at){return(0,L.L)(JSON.stringify({version:2,heartbeats:at})).length}Vt(new O.wA("platform-logger",Qe=>new ee(Qe),"PRIVATE")),Vt(new O.wA("heartbeat",Qe=>new Pr(Qe),"PRIVATE")),er(oe,"0.8.2",""),er(oe,"0.8.2","esm2017"),er("fire-js","")},3910:(cn,rt,F)=>{"use strict";F.d(rt,{wA:()=>ie,H0:()=>oe,zt:()=>ue});var E=F(8239),O=F(3854);class ie{constructor(ae,ve,we){this.name=ae,this.instanceFactory=ve,this.type=we,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ae){return this.instantiationMode=ae,this}setMultipleInstances(ae){return this.multipleInstances=ae,this}setServiceProps(ae){return this.serviceProps=ae,this}setInstanceCreatedCallback(ae){return this.onInstanceCreated=ae,this}}const L="[DEFAULT]";class ue{constructor(ae,ve){this.name=ae,this.container=ve,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ae){const ve=this.normalizeInstanceIdentifier(ae);if(!this.instancesDeferred.has(ve)){const we=new O.BH;if(this.instancesDeferred.set(ve,we),this.isInitialized(ve)||this.shouldAutoInitialize())try{const _e=this.getOrInitializeService({instanceIdentifier:ve});_e&&we.resolve(_e)}catch(_e){}}return this.instancesDeferred.get(ve).promise}getImmediate(ae){var ve;const we=this.normalizeInstanceIdentifier(null==ae?void 0:ae.identifier),_e=null!==(ve=null==ae?void 0:ae.optional)&&void 0!==ve&&ve;if(!this.isInitialized(we)&&!this.shouldAutoInitialize()){if(_e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:we})}catch(Te){if(_e)return null;throw Te}}getComponent(){return this.component}setComponent(ae){if(ae.name!==this.name)throw Error(`Mismatching Component ${ae.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ae,this.shouldAutoInitialize()){if("EAGER"===ae.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:L})}catch(ve){}for(const[ve,we]of this.instancesDeferred.entries()){const _e=this.normalizeInstanceIdentifier(ve);try{const Te=this.getOrInitializeService({instanceIdentifier:_e});we.resolve(Te)}catch(Te){}}}}clearInstance(ae=L){this.instancesDeferred.delete(ae),this.instancesOptions.delete(ae),this.instances.delete(ae)}delete(){var ae=this;return(0,E.Z)(function*(){const ve=Array.from(ae.instances.values());yield Promise.all([...ve.filter(we=>"INTERNAL"in we).map(we=>we.INTERNAL.delete()),...ve.filter(we=>"_delete"in we).map(we=>we._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ae=L){return this.instances.has(ae)}getOptions(ae=L){return this.instancesOptions.get(ae)||{}}initialize(ae={}){const{options:ve={}}=ae,we=this.normalizeInstanceIdentifier(ae.instanceIdentifier);if(this.isInitialized(we))throw Error(`${this.name}(${we}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const _e=this.getOrInitializeService({instanceIdentifier:we,options:ve});for(const[Te,lt]of this.instancesDeferred.entries())we===this.normalizeInstanceIdentifier(Te)&&lt.resolve(_e);return _e}onInit(ae,ve){var we;const _e=this.normalizeInstanceIdentifier(ve),Te=null!==(we=this.onInitCallbacks.get(_e))&&void 0!==we?we:new Set;Te.add(ae),this.onInitCallbacks.set(_e,Te);const lt=this.instances.get(_e);return lt&&ae(lt,_e),()=>{Te.delete(ae)}}invokeOnInitCallbacks(ae,ve){const we=this.onInitCallbacks.get(ve);if(we)for(const _e of we)try{_e(ae,ve)}catch(Te){}}getOrInitializeService({instanceIdentifier:ae,options:ve={}}){let we=this.instances.get(ae);if(!we&&this.component&&(we=this.component.instanceFactory(this.container,{instanceIdentifier:(Se=ae,Se===L?void 0:Se),options:ve}),this.instances.set(ae,we),this.instancesOptions.set(ae,ve),this.invokeOnInitCallbacks(we,ae),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ae,we)}catch(_e){}var Se;return we||null}normalizeInstanceIdentifier(ae=L){return this.component?this.component.multipleInstances?ae:L:ae}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class oe{constructor(ae){this.name=ae,this.providers=new Map}addComponent(ae){const ve=this.getProvider(ae.name);if(ve.isComponentSet())throw new Error(`Component ${ae.name} has already been registered with ${this.name}`);ve.setComponent(ae)}addOrOverwriteComponent(ae){this.getProvider(ae.name).isComponentSet()&&this.providers.delete(ae.name),this.addComponent(ae)}getProvider(ae){if(this.providers.has(ae))return this.providers.get(ae);const ve=new ue(ae,this);return this.providers.set(ae,ve),ve}getProviders(){return Array.from(this.providers.values())}}},5422:(cn,rt,F)=>{"use strict";F.d(rt,{in:()=>O,Yd:()=>Ie,Ub:()=>oe,Am:()=>Se});const E=[];var O=(()=>{return(ae=O||(O={}))[ae.DEBUG=0]="DEBUG",ae[ae.VERBOSE=1]="VERBOSE",ae[ae.INFO=2]="INFO",ae[ae.WARN=3]="WARN",ae[ae.ERROR=4]="ERROR",ae[ae.SILENT=5]="SILENT",O;var ae})();const ie={debug:O.DEBUG,verbose:O.VERBOSE,info:O.INFO,warn:O.WARN,error:O.ERROR,silent:O.SILENT},L=O.INFO,ue={[O.DEBUG]:"log",[O.VERBOSE]:"log",[O.INFO]:"info",[O.WARN]:"warn",[O.ERROR]:"error"},ee=(ae,ve,...we)=>{if(ve<ae.logLevel)return;const _e=(new Date).toISOString(),Te=ue[ve];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${ve})`);console[Te](`[${_e}]  ${ae.name}:`,...we)};class Ie{constructor(ve){this.name=ve,this._logLevel=L,this._logHandler=ee,this._userLogHandler=null,E.push(this)}get logLevel(){return this._logLevel}set logLevel(ve){if(!(ve in O))throw new TypeError(`Invalid value "${ve}" assigned to \`logLevel\``);this._logLevel=ve}setLogLevel(ve){this._logLevel="string"==typeof ve?ie[ve]:ve}get logHandler(){return this._logHandler}set logHandler(ve){if("function"!=typeof ve)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ve}get userLogHandler(){return this._userLogHandler}set userLogHandler(ve){this._userLogHandler=ve}debug(...ve){this._userLogHandler&&this._userLogHandler(this,O.DEBUG,...ve),this._logHandler(this,O.DEBUG,...ve)}log(...ve){this._userLogHandler&&this._userLogHandler(this,O.VERBOSE,...ve),this._logHandler(this,O.VERBOSE,...ve)}info(...ve){this._userLogHandler&&this._userLogHandler(this,O.INFO,...ve),this._logHandler(this,O.INFO,...ve)}warn(...ve){this._userLogHandler&&this._userLogHandler(this,O.WARN,...ve),this._logHandler(this,O.WARN,...ve)}error(...ve){this._userLogHandler&&this._userLogHandler(this,O.ERROR,...ve),this._logHandler(this,O.ERROR,...ve)}}function oe(ae){E.forEach(ve=>{ve.setLogLevel(ae)})}function Se(ae,ve){for(const we of E){let _e=null;ve&&ve.level&&(_e=ie[ve.level]),we.userLogHandler=null===ae?null:(Te,lt,...Ee)=>{const Ke=Ee.map(Re=>{if(null==Re)return null;if("string"==typeof Re)return Re;if("number"==typeof Re||"boolean"==typeof Re)return Re.toString();if(Re instanceof Error)return Re.message;try{return JSON.stringify(Re)}catch(Ge){return null}}).filter(Re=>Re).join(" ");lt>=(null!=_e?_e:Te.logLevel)&&ae({level:O[lt].toLowerCase(),message:Ke,args:Ee,type:Te.name})}}}},2268:(cn,rt,F)=>{"use strict";F.d(rt,{Lj:()=>Oe,X3:()=>Fe});var E=F(8239);let ie,L;const Ie=new WeakMap,oe=new WeakMap,Se=new WeakMap,ae=new WeakMap,ve=new WeakMap;let Te={get(Le,Tt,ft){if(Le instanceof IDBTransaction){if("done"===Tt)return oe.get(Le);if("objectStoreNames"===Tt)return Le.objectStoreNames||Se.get(Le);if("store"===Tt)return ft.objectStoreNames[1]?void 0:ft.objectStore(ft.objectStoreNames[0])}return Re(Le[Tt])},set:(Le,Tt,ft)=>(Le[Tt]=ft,!0),has:(Le,Tt)=>Le instanceof IDBTransaction&&("done"===Tt||"store"===Tt)||Tt in Le};function Ke(Le){return"function"==typeof Le?function(Le){return Le!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(L||(L=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(Le)?function(...Tt){return Le.apply(Ge(this),Tt),Re(Ie.get(this))}:function(...Tt){return Re(Le.apply(Ge(this),Tt))}:function(Tt,...ft){const St=Le.call(Ge(this),Tt,...ft);return Se.set(St,Tt.sort?Tt.sort():[Tt]),Re(St)}}(Le):(Le instanceof IDBTransaction&&function(Le){if(oe.has(Le))return;const Tt=new Promise((ft,St)=>{const pt=()=>{Le.removeEventListener("complete",xt),Le.removeEventListener("error",kt),Le.removeEventListener("abort",kt)},xt=()=>{ft(),pt()},kt=()=>{St(Le.error||new DOMException("AbortError","AbortError")),pt()};Le.addEventListener("complete",xt),Le.addEventListener("error",kt),Le.addEventListener("abort",kt)});oe.set(Le,Tt)}(Le),((Le,Tt)=>Tt.some(ft=>Le instanceof ft))(Le,ie||(ie=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(Le,Te):Le)}function Re(Le){if(Le instanceof IDBRequest)return function(Le){const Tt=new Promise((ft,St)=>{const pt=()=>{Le.removeEventListener("success",xt),Le.removeEventListener("error",kt)},xt=()=>{ft(Re(Le.result)),pt()},kt=()=>{St(Le.error),pt()};Le.addEventListener("success",xt),Le.addEventListener("error",kt)});return Tt.then(ft=>{ft instanceof IDBCursor&&Ie.set(ft,Le)}).catch(()=>{}),ve.set(Tt,Le),Tt}(Le);if(ae.has(Le))return ae.get(Le);const Tt=Ke(Le);return Tt!==Le&&(ae.set(Le,Tt),ve.set(Tt,Le)),Tt}const Ge=Le=>ve.get(Le);function Fe(Le,Tt,{blocked:ft,upgrade:St,blocking:pt,terminated:xt}={}){const kt=indexedDB.open(Le,Tt),xn=Re(kt);return St&&kt.addEventListener("upgradeneeded",vn=>{St(Re(kt.result),vn.oldVersion,vn.newVersion,Re(kt.transaction))}),ft&&kt.addEventListener("blocked",()=>ft()),xn.then(vn=>{xt&&vn.addEventListener("close",()=>xt()),pt&&vn.addEventListener("versionchange",()=>pt())}).catch(()=>{}),xn}function Oe(Le,{blocked:Tt}={}){const ft=indexedDB.deleteDatabase(Le);return Tt&&ft.addEventListener("blocked",()=>Tt()),Re(ft).then(()=>{})}const st=["get","getKey","getAll","getAllKeys","count"],It=["put","add","delete","clear"],en=new Map;function v(Le,Tt){if(!(Le instanceof IDBDatabase)||Tt in Le||"string"!=typeof Tt)return;if(en.get(Tt))return en.get(Tt);const ft=Tt.replace(/FromIndex$/,""),St=Tt!==ft,pt=It.includes(ft);if(!(ft in(St?IDBIndex:IDBObjectStore).prototype)||!pt&&!st.includes(ft))return;const xt=function(){var kt=(0,E.Z)(function*(xn,...vn){const Nt=this.transaction(xn,pt?"readwrite":"readonly");let Dt=Nt.store;return St&&(Dt=Dt.index(vn.shift())),(yield Promise.all([Dt[ft](...vn),pt&&Nt.done]))[0]});return function(vn){return kt.apply(this,arguments)}}();return en.set(Tt,xt),xt}var Le;Te=Bb(Vb({},Le=Te),{get:(Tt,ft,St)=>v(Tt,ft)||Le.get(Tt,ft,St),has:(Tt,ft)=>!!v(Tt,ft)||Le.has(Tt,ft)})},8239:(cn,rt,F)=>{"use strict";function E(ie,L,ue,ee,Ie,oe,Se){try{var ae=ie[oe](Se),ve=ae.value}catch(we){return void ue(we)}ae.done?L(ve):Promise.resolve(ve).then(ee,Ie)}function O(ie){return function(){var L=this,ue=arguments;return new Promise(function(ee,Ie){var oe=ie.apply(L,ue);function Se(ve){E(oe,ee,Ie,Se,ae,"next",ve)}function ae(ve){E(oe,ee,Ie,Se,ae,"throw",ve)}Se(void 0)})}}F.d(rt,{Z:()=>O})}},cn=>{cn(cn.s=4683)}]);
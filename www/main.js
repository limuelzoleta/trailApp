var BA=Object.defineProperty,$A=Object.defineProperties,UA=Object.getOwnPropertyDescriptors,FI=Object.getOwnPropertySymbols,jA=Object.prototype.hasOwnProperty,HA=Object.prototype.propertyIsEnumerable,LI=(en,it,F)=>it in en?BA(en,it,{enumerable:!0,configurable:!0,writable:!0,value:F}):en[it]=F,VI=(en,it)=>{for(var F in it||(it={}))jA.call(it,F)&&LI(en,F,it[F]);if(FI)for(var F of FI(it))HA.call(it,F)&&LI(en,F,it[F]);return en},BI=(en,it)=>$A(en,UA(it));(self.webpackChunktrail_app=self.webpackChunktrail_app||[]).push([[179],{8255:en=>{function it(F){return Promise.resolve().then(()=>{var y=new Error("Cannot find module '"+F+"'");throw y.code="MODULE_NOT_FOUND",y})}it.keys=()=>[],it.resolve=it,it.id=8255,en.exports=it},3796:(en,it,F)=>{"use strict";F.d(it,{Uw:()=>Ze,fo:()=>we});var y=F(8239);"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global&&global;var L=(()=>{return(Pe=L||(L={})).Unimplemented="UNIMPLEMENTED",Pe.Unavailable="UNAVAILABLE",L;var Pe})();class Ce extends Error{constructor(be,Me,et){super(be),this.message=be,this.code=Me,this.data=et}}const he=Pe=>{var be,Me,et,dt,nt;const At=Pe.CapacitorCustomPlatform||null,Ie=Pe.Capacitor||{},Ye=Ie.Plugins=Ie.Plugins||{},Ve=Pe.CapacitorPlatforms,tt=(null===(be=null==Ve?void 0:Ve.currentPlatform)||void 0===be?void 0:be.getPlatform)||(()=>null!==At?At.name:(Pe=>{var be,Me;return(null==Pe?void 0:Pe.androidBridge)?"android":(null===(Me=null===(be=null==Pe?void 0:Pe.webkit)||void 0===be?void 0:be.messageHandlers)||void 0===Me?void 0:Me.bridge)?"ios":"web"})(Pe)),Bt=(null===(Me=null==Ve?void 0:Ve.currentPlatform)||void 0===Me?void 0:Me.isNativePlatform)||(()=>"web"!==tt()),Nt=(null===(et=null==Ve?void 0:Ve.currentPlatform)||void 0===et?void 0:et.isPluginAvailable)||(Tt=>{const un=Sn.get(Tt);return!(!(null==un?void 0:un.platforms.has(tt()))&&!Nn(Tt))}),Nn=(null===(dt=null==Ve?void 0:Ve.currentPlatform)||void 0===dt?void 0:dt.getPluginHeader)||(Tt=>{var un;return null===(un=Ie.PluginHeaders)||void 0===un?void 0:un.find(Un=>Un.name===Tt)}),Sn=new Map,cr=(null===(nt=null==Ve?void 0:Ve.currentPlatform)||void 0===nt?void 0:nt.registerPlugin)||((Tt,un={})=>{const Un=Sn.get(Tt);if(Un)return console.warn(`Capacitor plugin "${Tt}" already registered. Cannot register plugins twice.`),Un.proxy;const Xt=tt(),Ln=Nn(Tt);let kn;const Xn=function(){var Ht=(0,y.Z)(function*(){return!kn&&Xt in un?kn=kn="function"==typeof un[Xt]?yield un[Xt]():un[Xt]:null!==At&&!kn&&"web"in un&&(kn=kn="function"==typeof un.web?yield un.web():un.web),kn});return function(){return Ht.apply(this,arguments)}}(),vr=Ht=>{let It;const ur=(...pr)=>{const rn=Xn().then(En=>{const Jn=((Ht,It)=>{var ur,pr;if(!Ln){if(Ht)return null===(pr=Ht[It])||void 0===pr?void 0:pr.bind(Ht);throw new Ce(`"${Tt}" plugin is not implemented on ${Xt}`,L.Unimplemented)}{const rn=null==Ln?void 0:Ln.methods.find(En=>It===En.name);if(rn)return"promise"===rn.rtype?En=>Ie.nativePromise(Tt,It.toString(),En):(En,Jn)=>Ie.nativeCallback(Tt,It.toString(),En,Jn);if(Ht)return null===(ur=Ht[It])||void 0===ur?void 0:ur.bind(Ht)}})(En,Ht);if(Jn){const rr=Jn(...pr);return It=null==rr?void 0:rr.remove,rr}throw new Ce(`"${Tt}.${Ht}()" is not implemented on ${Xt}`,L.Unimplemented)});return"addListener"===Ht&&(rn.remove=(0,y.Z)(function*(){return It()})),rn};return ur.toString=()=>`${Ht.toString()}() { [capacitor code] }`,Object.defineProperty(ur,"name",{value:Ht,writable:!1,configurable:!1}),ur},Er=vr("addListener"),hr=vr("removeListener"),ei=(Ht,It)=>{const ur=Er({eventName:Ht},It),pr=function(){var En=(0,y.Z)(function*(){const Jn=yield ur;hr({eventName:Ht,callbackId:Jn},It)});return function(){return En.apply(this,arguments)}}(),rn=new Promise(En=>ur.then(()=>En({remove:pr})));return rn.remove=(0,y.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield pr()}),rn},nr=new Proxy({},{get(Ht,It){switch(It){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return Ln?ei:Er;case"removeListener":return hr;default:return vr(It)}}});return Ye[Tt]=nr,Sn.set(Tt,{name:Tt,proxy:nr,platforms:new Set([...Object.keys(un),...Ln?[Xt]:[]])}),nr});return Ie.convertFileSrc||(Ie.convertFileSrc=Tt=>Tt),Ie.getPlatform=tt,Ie.handleError=Tt=>Pe.console.error(Tt),Ie.isNativePlatform=Bt,Ie.isPluginAvailable=Nt,Ie.pluginMethodNoop=(Tt,un,Un)=>Promise.reject(`${Un} does not have an implementation of "${un}".`),Ie.registerPlugin=cr,Ie.Exception=Ce,Ie.DEBUG=!!Ie.DEBUG,Ie.isLoggingEnabled=!!Ie.isLoggingEnabled,Ie.platform=Ie.getPlatform(),Ie.isNative=Ie.isNativePlatform(),Ie},le=(Pe=>Pe.Capacitor=he(Pe))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),we=le.registerPlugin;class Ze{constructor(be){this.listeners={},this.windowListeners={},be&&(console.warn(`Capacitor WebPlugin "${be.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=be)}addListener(be,Me){var et=this;this.listeners[be]||(this.listeners[be]=[]),this.listeners[be].push(Me);const nt=this.windowListeners[be];nt&&!nt.registered&&this.addWindowListener(nt);const At=function(){var Ye=(0,y.Z)(function*(){return et.removeListener(be,Me)});return function(){return Ye.apply(this,arguments)}}(),Ie=Promise.resolve({remove:At});return Object.defineProperty(Ie,"remove",{value:(Ye=(0,y.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield At()}),function(){return Ye.apply(this,arguments)})}),Ie;var Ye}removeAllListeners(){var be=this;return(0,y.Z)(function*(){be.listeners={};for(const Me in be.windowListeners)be.removeWindowListener(be.windowListeners[Me]);be.windowListeners={}})()}notifyListeners(be,Me){const et=this.listeners[be];et&&et.forEach(dt=>dt(Me))}hasListeners(be){return!!this.listeners[be].length}registerWindowListener(be,Me){this.windowListeners[Me]={registered:!1,windowEventName:be,pluginEventName:Me,handler:et=>{this.notifyListeners(Me,et)}}}unimplemented(be="not implemented"){return new le.Exception(be,L.Unimplemented)}unavailable(be="not available"){return new le.Exception(be,L.Unavailable)}removeListener(be,Me){var et=this;return(0,y.Z)(function*(){const dt=et.listeners[be];if(!dt)return;const nt=dt.indexOf(Me);et.listeners[be].splice(nt,1),et.listeners[be].length||et.removeWindowListener(et.windowListeners[be])})()}addWindowListener(be){window.addEventListener(be.windowEventName,be.handler),be.registered=!0}removeWindowListener(be){!be||(window.removeEventListener(be.windowEventName,be.handler),be.registered=!1)}}const ft=Pe=>encodeURIComponent(Pe).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);class Se extends Ze{setCookie(be){return(0,y.Z)(function*(){try{const Me=ft(be.key),et=ft(be.value),dt=`; expires=${(be.expires||"").replace("expires=","")}`,nt=(be.path||"/").replace("path=","");document.cookie=`${Me}=${et||""}${dt}; path=${nt}`}catch(Me){return Promise.reject(Me)}})()}deleteCookie(be){return(0,y.Z)(function*(){try{document.cookie=`${be.key}=; Max-Age=0`}catch(Me){return Promise.reject(Me)}})()}clearCookies(){return(0,y.Z)(function*(){try{const be=document.cookie.split(";")||[];for(const Me of be)document.cookie=Me.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(be){return Promise.reject(be)}})()}clearAllCookies(){var be=this;return(0,y.Z)(function*(){try{yield be.clearCookies()}catch(Me){return Promise.reject(Me)}})()}}we("CapacitorCookies",{web:()=>new Se});const gt=function(){var Pe=(0,y.Z)(function*(be){return new Promise((Me,et)=>{const dt=new FileReader;dt.onload=()=>{const nt=dt.result;Me(nt.indexOf(",")>=0?nt.split(",")[1]:nt)},dt.onerror=nt=>et(nt),dt.readAsDataURL(be)})});return function(Me){return Pe.apply(this,arguments)}}();class pt extends Ze{request(be){return(0,y.Z)(function*(){const Me=((Pe,be={})=>{const Me=Object.assign({method:Pe.method||"GET",headers:Pe.headers},be),dt=((Pe={})=>{const be=Object.keys(Pe);return Object.keys(Pe).map(dt=>dt.toLocaleLowerCase()).reduce((dt,nt,At)=>(dt[nt]=Pe[be[At]],dt),{})})(Pe.headers)["content-type"]||"";if("string"==typeof Pe.data)Me.body=Pe.data;else if(dt.includes("application/x-www-form-urlencoded")){const nt=new URLSearchParams;for(const[At,Ie]of Object.entries(Pe.data||{}))nt.set(At,Ie);Me.body=nt.toString()}else if(dt.includes("multipart/form-data")){const nt=new FormData;if(Pe.data instanceof FormData)Pe.data.forEach((Ie,Ye)=>{nt.append(Ye,Ie)});else for(const Ie of Object.keys(Pe.data))nt.append(Ie,Pe.data[Ie]);Me.body=nt;const At=new Headers(Me.headers);At.delete("content-type"),Me.headers=At}else(dt.includes("application/json")||"object"==typeof Pe.data)&&(Me.body=JSON.stringify(Pe.data));return Me})(be,be.webFetchExtra),et=((Pe,be=!0)=>Pe?Object.entries(Pe).reduce((et,dt)=>{const[nt,At]=dt;let Ie,Ye;return Array.isArray(At)?(Ye="",At.forEach(Ve=>{Ie=be?encodeURIComponent(Ve):Ve,Ye+=`${nt}=${Ie}&`}),Ye.slice(0,-1)):(Ie=be?encodeURIComponent(At):At,Ye=`${nt}=${Ie}`),`${et}&${Ye}`},"").substr(1):null)(be.params,be.shouldEncodeUrlParams),dt=et?`${be.url}?${et}`:be.url,nt=yield fetch(dt,Me),At=nt.headers.get("content-type")||"";let Ye,Ve,{responseType:Ie="text"}=nt.ok?be:{};switch(At.includes("application/json")&&(Ie="json"),Ie){case"arraybuffer":case"blob":Ve=yield nt.blob(),Ye=yield gt(Ve);break;case"json":Ye=yield nt.json();break;default:Ye=yield nt.text()}const Fe={};return nt.headers.forEach((tt,St)=>{Fe[St]=tt}),{data:Ye,headers:Fe,status:nt.status,url:nt.url}})()}get(be){var Me=this;return(0,y.Z)(function*(){return Me.request(Object.assign(Object.assign({},be),{method:"GET"}))})()}post(be){var Me=this;return(0,y.Z)(function*(){return Me.request(Object.assign(Object.assign({},be),{method:"POST"}))})()}put(be){var Me=this;return(0,y.Z)(function*(){return Me.request(Object.assign(Object.assign({},be),{method:"PUT"}))})()}patch(be){var Me=this;return(0,y.Z)(function*(){return Me.request(Object.assign(Object.assign({},be),{method:"PATCH"}))})()}delete(be){var Me=this;return(0,y.Z)(function*(){return Me.request(Object.assign(Object.assign({},be),{method:"DELETE"}))})()}}we("CapacitorHttp",{web:()=>new pt})},8583:(en,it,F)=>{"use strict";F.d(it,{mr:()=>ft,ez:()=>es,K0:()=>ye,Do:()=>Ue,V_:()=>re,Ye:()=>gt,S$:()=>Ze,mk:()=>zi,sg:()=>Ar,O5:()=>Y,b0:()=>Se,lw:()=>L,EM:()=>eo,JF:()=>Bi,PM:()=>Ri,w_:()=>Q,bD:()=>Yi,q:()=>te,Mx:()=>$r,HT:()=>oe});var y=F(7716);let A=null;function te(){return A}function oe(W){A||(A=W)}class Q{}const ye=new y.OlP("DocumentToken");let L=(()=>{class W{historyGo(K){throw new Error("Not implemented")}}return W.\u0275fac=function(K){return new(K||W)},W.\u0275prov=(0,y.Yz7)({factory:Ce,token:W,providedIn:"platform"}),W})();function Ce(){return(0,y.LFG)(he)}const re=new y.OlP("Location Initialized");let he=(()=>{class W extends L{constructor(K){super(),this._doc=K,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return te().getBaseHref(this._doc)}onPopState(K){const De=te().getGlobalEventTarget(this._doc,"window");return De.addEventListener("popstate",K,!1),()=>De.removeEventListener("popstate",K)}onHashChange(K){const De=te().getGlobalEventTarget(this._doc,"window");return De.addEventListener("hashchange",K,!1),()=>De.removeEventListener("hashchange",K)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(K){this.location.pathname=K}pushState(K,De,Ke){_e()?this._history.pushState(K,De,Ke):this.location.hash=Ke}replaceState(K,De,Ke){_e()?this._history.replaceState(K,De,Ke):this.location.hash=Ke}forward(){this._history.forward()}back(){this._history.back()}historyGo(K=0){this._history.go(K)}getState(){return this._history.state}}return W.\u0275fac=function(K){return new(K||W)(y.LFG(ye))},W.\u0275prov=(0,y.Yz7)({factory:le,token:W,providedIn:"platform"}),W})();function _e(){return!!window.history.pushState}function le(){return new he((0,y.LFG)(ye))}function we(W,fe){if(0==W.length)return fe;if(0==fe.length)return W;let K=0;return W.endsWith("/")&&K++,fe.startsWith("/")&&K++,2==K?W+fe.substring(1):1==K?W+fe:W+"/"+fe}function ht(W){const fe=W.match(/#|\?|$/),K=fe&&fe.index||W.length;return W.slice(0,K-("/"===W[K-1]?1:0))+W.slice(K)}function Ae(W){return W&&"?"!==W[0]?"?"+W:W}let Ze=(()=>{class W{historyGo(K){throw new Error("Not implemented")}}return W.\u0275fac=function(K){return new(K||W)},W.\u0275prov=(0,y.Yz7)({factory:Ge,token:W,providedIn:"root"}),W})();function Ge(W){const fe=(0,y.LFG)(ye).location;return new Se((0,y.LFG)(L),fe&&fe.origin||"")}const ft=new y.OlP("appBaseHref");let Se=(()=>{class W extends Ze{constructor(K,De){if(super(),this._platformLocation=K,this._removeListenerFns=[],null==De&&(De=this._platformLocation.getBaseHrefFromDOM()),null==De)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=De}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(K){this._removeListenerFns.push(this._platformLocation.onPopState(K),this._platformLocation.onHashChange(K))}getBaseHref(){return this._baseHref}prepareExternalUrl(K){return we(this._baseHref,K)}path(K=!1){const De=this._platformLocation.pathname+Ae(this._platformLocation.search),Ke=this._platformLocation.hash;return Ke&&K?`${De}${Ke}`:De}pushState(K,De,Ke,Ft){const an=this.prepareExternalUrl(Ke+Ae(Ft));this._platformLocation.pushState(K,De,an)}replaceState(K,De,Ke,Ft){const an=this.prepareExternalUrl(Ke+Ae(Ft));this._platformLocation.replaceState(K,De,an)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(K=0){var De,Ke;null===(Ke=(De=this._platformLocation).historyGo)||void 0===Ke||Ke.call(De,K)}}return W.\u0275fac=function(K){return new(K||W)(y.LFG(L),y.LFG(ft,8))},W.\u0275prov=y.Yz7({token:W,factory:W.\u0275fac}),W})(),Ue=(()=>{class W extends Ze{constructor(K,De){super(),this._platformLocation=K,this._baseHref="",this._removeListenerFns=[],null!=De&&(this._baseHref=De)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(K){this._removeListenerFns.push(this._platformLocation.onPopState(K),this._platformLocation.onHashChange(K))}getBaseHref(){return this._baseHref}path(K=!1){let De=this._platformLocation.hash;return null==De&&(De="#"),De.length>0?De.substring(1):De}prepareExternalUrl(K){const De=we(this._baseHref,K);return De.length>0?"#"+De:De}pushState(K,De,Ke,Ft){let an=this.prepareExternalUrl(Ke+Ae(Ft));0==an.length&&(an=this._platformLocation.pathname),this._platformLocation.pushState(K,De,an)}replaceState(K,De,Ke,Ft){let an=this.prepareExternalUrl(Ke+Ae(Ft));0==an.length&&(an=this._platformLocation.pathname),this._platformLocation.replaceState(K,De,an)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(K=0){var De,Ke;null===(Ke=(De=this._platformLocation).historyGo)||void 0===Ke||Ke.call(De,K)}}return W.\u0275fac=function(K){return new(K||W)(y.LFG(L),y.LFG(ft,8))},W.\u0275prov=y.Yz7({token:W,factory:W.\u0275fac}),W})(),gt=(()=>{class W{constructor(K,De){this._subject=new y.vpe,this._urlChangeListeners=[],this._platformStrategy=K;const Ke=this._platformStrategy.getBaseHref();this._platformLocation=De,this._baseHref=ht(E(Ke)),this._platformStrategy.onPopState(Ft=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ft.state,type:Ft.type})})}path(K=!1){return this.normalize(this._platformStrategy.path(K))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(K,De=""){return this.path()==this.normalize(K+Ae(De))}normalize(K){return W.stripTrailingSlash(function(W,fe){return W&&fe.startsWith(W)?fe.substring(W.length):fe}(this._baseHref,E(K)))}prepareExternalUrl(K){return K&&"/"!==K[0]&&(K="/"+K),this._platformStrategy.prepareExternalUrl(K)}go(K,De="",Ke=null){this._platformStrategy.pushState(Ke,"",K,De),this._notifyUrlChangeListeners(this.prepareExternalUrl(K+Ae(De)),Ke)}replaceState(K,De="",Ke=null){this._platformStrategy.replaceState(Ke,"",K,De),this._notifyUrlChangeListeners(this.prepareExternalUrl(K+Ae(De)),Ke)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(K=0){var De,Ke;null===(Ke=(De=this._platformStrategy).historyGo)||void 0===Ke||Ke.call(De,K)}onUrlChange(K){this._urlChangeListeners.push(K),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(De=>{this._notifyUrlChangeListeners(De.url,De.state)}))}_notifyUrlChangeListeners(K="",De){this._urlChangeListeners.forEach(Ke=>Ke(K,De))}subscribe(K,De,Ke){return this._subject.subscribe({next:K,error:De,complete:Ke})}}return W.\u0275fac=function(K){return new(K||W)(y.LFG(Ze),y.LFG(L))},W.normalizeQueryParams=Ae,W.joinWithSlash=we,W.stripTrailingSlash=ht,W.\u0275prov=(0,y.Yz7)({factory:ut,token:W,providedIn:"root"}),W})();function ut(){return new gt((0,y.LFG)(Ze),(0,y.LFG)(L))}function E(W){return W.replace(/\/index.html$/,"")}var Pe=(()=>((Pe=Pe||{})[Pe.Zero=0]="Zero",Pe[Pe.One=1]="One",Pe[Pe.Two=2]="Two",Pe[Pe.Few=3]="Few",Pe[Pe.Many=4]="Many",Pe[Pe.Other=5]="Other",Pe))();const cr=y.kL8;class Wr{}let Yr=(()=>{class W extends Wr{constructor(K){super(),this.locale=K}getPluralCategory(K,De){switch(cr(De||this.locale)(K)){case Pe.Zero:return"zero";case Pe.One:return"one";case Pe.Two:return"two";case Pe.Few:return"few";case Pe.Many:return"many";default:return"other"}}}return W.\u0275fac=function(K){return new(K||W)(y.LFG(y.soG))},W.\u0275prov=y.Yz7({token:W,factory:W.\u0275fac}),W})();function $r(W,fe){fe=encodeURIComponent(fe);for(const K of W.split(";")){const De=K.indexOf("="),[Ke,Ft]=-1==De?[K,""]:[K.slice(0,De),K.slice(De+1)];if(Ke.trim()===fe)return decodeURIComponent(Ft)}return null}let zi=(()=>{class W{constructor(K,De,Ke,Ft){this._iterableDiffers=K,this._keyValueDiffers=De,this._ngEl=Ke,this._renderer=Ft,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(K){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof K?K.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(K){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof K?K.split(/\s+/):K,this._rawClass&&((0,y.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const K=this._iterableDiffer.diff(this._rawClass);K&&this._applyIterableChanges(K)}else if(this._keyValueDiffer){const K=this._keyValueDiffer.diff(this._rawClass);K&&this._applyKeyValueChanges(K)}}_applyKeyValueChanges(K){K.forEachAddedItem(De=>this._toggleClass(De.key,De.currentValue)),K.forEachChangedItem(De=>this._toggleClass(De.key,De.currentValue)),K.forEachRemovedItem(De=>{De.previousValue&&this._toggleClass(De.key,!1)})}_applyIterableChanges(K){K.forEachAddedItem(De=>{if("string"!=typeof De.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,y.AaK)(De.item)}`);this._toggleClass(De.item,!0)}),K.forEachRemovedItem(De=>this._toggleClass(De.item,!1))}_applyClasses(K){K&&(Array.isArray(K)||K instanceof Set?K.forEach(De=>this._toggleClass(De,!0)):Object.keys(K).forEach(De=>this._toggleClass(De,!!K[De])))}_removeClasses(K){K&&(Array.isArray(K)||K instanceof Set?K.forEach(De=>this._toggleClass(De,!1)):Object.keys(K).forEach(De=>this._toggleClass(De,!1)))}_toggleClass(K,De){(K=K.trim())&&K.split(/\s+/g).forEach(Ke=>{De?this._renderer.addClass(this._ngEl.nativeElement,Ke):this._renderer.removeClass(this._ngEl.nativeElement,Ke)})}}return W.\u0275fac=function(K){return new(K||W)(y.Y36(y.ZZ4),y.Y36(y.aQg),y.Y36(y.SBq),y.Y36(y.Qsj))},W.\u0275dir=y.lG2({type:W,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),W})();class mi{constructor(fe,K,De,Ke){this.$implicit=fe,this.ngForOf=K,this.index=De,this.count=Ke}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ar=(()=>{class W{constructor(K,De,Ke){this._viewContainer=K,this._template=De,this._differs=Ke,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(K){this._ngForOf=K,this._ngForOfDirty=!0}set ngForTrackBy(K){this._trackByFn=K}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(K){K&&(this._template=K)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const K=this._ngForOf;if(!this._differ&&K)try{this._differ=this._differs.find(K).create(this.ngForTrackBy)}catch(De){throw new Error(`Cannot find a differ supporting object '${K}' of type '${function(W){return W.name||typeof W}(K)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const K=this._differ.diff(this._ngForOf);K&&this._applyChanges(K)}}_applyChanges(K){const De=[];K.forEachOperation((Ke,Ft,an)=>{if(null==Ke.previousIndex){const G=this._viewContainer.createEmbeddedView(this._template,new mi(null,this._ngForOf,-1,-1),null===an?void 0:an),$=new As(Ke,G);De.push($)}else if(null==an)this._viewContainer.remove(null===Ft?void 0:Ft);else if(null!==Ft){const G=this._viewContainer.get(Ft);this._viewContainer.move(G,an);const $=new As(Ke,G);De.push($)}});for(let Ke=0;Ke<De.length;Ke++)this._perViewChange(De[Ke].view,De[Ke].record);for(let Ke=0,Ft=this._viewContainer.length;Ke<Ft;Ke++){const an=this._viewContainer.get(Ke);an.context.index=Ke,an.context.count=Ft,an.context.ngForOf=this._ngForOf}K.forEachIdentityChange(Ke=>{this._viewContainer.get(Ke.currentIndex).context.$implicit=Ke.item})}_perViewChange(K,De){K.context.$implicit=De.item}static ngTemplateContextGuard(K,De){return!0}}return W.\u0275fac=function(K){return new(K||W)(y.Y36(y.s_b),y.Y36(y.Rgc),y.Y36(y.ZZ4))},W.\u0275dir=y.lG2({type:W,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),W})();class As{constructor(fe,K){this.record=fe,this.view=K}}let Y=(()=>{class W{constructor(K,De){this._viewContainer=K,this._context=new H,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=De}set ngIf(K){this._context.$implicit=this._context.ngIf=K,this._updateView()}set ngIfThen(K){ue("ngIfThen",K),this._thenTemplateRef=K,this._thenViewRef=null,this._updateView()}set ngIfElse(K){ue("ngIfElse",K),this._elseTemplateRef=K,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(K,De){return!0}}return W.\u0275fac=function(K){return new(K||W)(y.Y36(y.s_b),y.Y36(y.Rgc))},W.\u0275dir=y.lG2({type:W,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),W})();class H{constructor(){this.$implicit=null,this.ngIf=null}}function ue(W,fe){if(fe&&!fe.createEmbeddedView)throw new Error(`${W} must be a TemplateRef, but received '${(0,y.AaK)(fe)}'.`)}let es=(()=>{class W{}return W.\u0275fac=function(K){return new(K||W)},W.\u0275mod=y.oAB({type:W}),W.\u0275inj=y.cJS({providers:[{provide:Wr,useClass:Yr}]}),W})();const Yi="browser";function Ri(W){return"server"===W}let eo=(()=>{class W{}return W.\u0275prov=(0,y.Yz7)({token:W,providedIn:"root",factory:()=>new qi((0,y.LFG)(ye),window)}),W})();class qi{constructor(fe,K){this.document=fe,this.window=K,this.offset=()=>[0,0]}setOffset(fe){this.offset=Array.isArray(fe)?()=>fe:fe}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(fe){this.supportsScrolling()&&this.window.scrollTo(fe[0],fe[1])}scrollToAnchor(fe){if(!this.supportsScrolling())return;const K=function(W,fe){const K=W.getElementById(fe)||W.getElementsByName(fe)[0];if(K)return K;if("function"==typeof W.createTreeWalker&&W.body&&(W.body.createShadowRoot||W.body.attachShadow)){const De=W.createTreeWalker(W.body,NodeFilter.SHOW_ELEMENT);let Ke=De.currentNode;for(;Ke;){const Ft=Ke.shadowRoot;if(Ft){const an=Ft.getElementById(fe)||Ft.querySelector(`[name="${fe}"]`);if(an)return an}Ke=De.nextNode()}}return null}(this.document,fe);K&&(this.scrollToElement(K),this.attemptFocus(K))}setHistoryScrollRestoration(fe){if(this.supportScrollRestoration()){const K=this.window.history;K&&K.scrollRestoration&&(K.scrollRestoration=fe)}}scrollToElement(fe){const K=fe.getBoundingClientRect(),De=K.left+this.window.pageXOffset,Ke=K.top+this.window.pageYOffset,Ft=this.offset();this.window.scrollTo(De-Ft[0],Ke-Ft[1])}attemptFocus(fe){return fe.focus(),this.document.activeElement===fe}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const fe=as(this.window.history)||as(Object.getPrototypeOf(this.window.history));return!(!fe||!fe.writable&&!fe.set)}catch(fe){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(fe){return!1}}}function as(W){return Object.getOwnPropertyDescriptor(W,"scrollRestoration")}class Bi{}},7716:(en,it,F)=>{"use strict";F.d(it,{deG:()=>ji,tb:()=>qb,AFp:()=>Gb,ip1:()=>Qv,CZH:()=>Zg,hGG:()=>jS,z2F:()=>gy,ahi:()=>Co,sBO:()=>Tw,Sil:()=>py,_Vd:()=>jg,aQ5:()=>po,EJc:()=>Zb,SBq:()=>dd,qLn:()=>js,vpe:()=>hd,L6J:()=>kD,gxx:()=>Uc,tBr:()=>Ho,XFs:()=>Xt,OlP:()=>Ui,zs3:()=>us,ZZ4:()=>E_,aQg:()=>b_,soG:()=>P_,YKP:()=>$E,v3s:()=>bS,h0i:()=>Ap,PXZ:()=>gS,R0b:()=>_c,FiY:()=>Ha,r_U:()=>ND,Lbi:()=>Yb,g9A:()=>zb,Qsj:()=>uw,FYo:()=>v_,JOm:()=>rl,Tiy:()=>wv,q3G:()=>lt,tp0:()=>Do,EAV:()=>TS,Rgc:()=>ny,dDg:()=>eI,DyG:()=>pl,q4F:()=>Tv,GfV:()=>OE,i9L:()=>Zo,s_b:()=>w_,ifc:()=>Ht,eFA:()=>sI,G48:()=>lS,Gpc:()=>he,X6Q:()=>s0,_c5:()=>kS,VLi:()=>aS,c2e:()=>Kb,zSh:()=>sd,wAp:()=>Br,vHH:()=>ht,EiD:()=>R,mCW:()=>Gl,qzn:()=>Si,JVY:()=>nu,pB0:()=>vd,eBb:()=>_d,L6k:()=>gh,LAX:()=>Ac,cg1:()=>gv,Tjo:()=>OS,kL8:()=>tE,yhl:()=>Sc,dqk:()=>En,sIi:()=>Ep,CqO:()=>Tp,QGY:()=>Bg,F4k:()=>zm,RDi:()=>Ms,AaK:()=>L,z3N:()=>vl,qOj:()=>Qe,TTD:()=>es,_Bn:()=>AE,xp6:()=>ol,uIk:()=>Rg,ekj:()=>a,Suo:()=>Cb,Xpm:()=>Be,lG2:()=>jn,Yz7:()=>Mt,cJS:()=>gn,oAB:()=>$e,Yjl:()=>An,Y36:()=>wp,_UZ:()=>zy,qZA:()=>Vg,TgZ:()=>Wm,EpF:()=>Gm,n5z:()=>qt,Ikx:()=>pv,LFG:()=>Ei,$8M:()=>jr,$Z:()=>Gy,NdJ:()=>Tf,CRH:()=>wb,oxw:()=>Xy,Hsn:()=>Cu,F$t:()=>Jy,Q6J:()=>Hm,s9C:()=>Ym,iGM:()=>bb,CHM:()=>Po,LSH:()=>bn,kYT:()=>wt,YNc:()=>Ds,_uU:()=>F0,Oqu:()=>fv,hij:()=>h_,Gf:()=>Ib});var y=F(9765),A=F(5319),te=F(8891),ke=F(6682),oe=F(8819);function Q(t){for(let n in t)if(t[n]===Q)return n;throw Error("Could not find renamed property on target object.")}function ye(t,n){for(const i in n)n.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=n[i])}function L(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(L).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const i=n.indexOf("\n");return-1===i?n:n.substring(0,i)}function Ce(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const re=Q({__forward_ref__:Q});function he(t){return t.__forward_ref__=he,t.toString=function(){return L(this())},t}function _e(t){return le(t)?t():t}function le(t){return"function"==typeof t&&t.hasOwnProperty(re)&&t.__forward_ref__===he}class ht extends Error{constructor(n,i){super(function(t,n){return`${t?`NG0${t}: `:""}${n}`}(n,i)),this.code=n}}function Ge(t){return"string"==typeof t?t:null==t?"":String(t)}function ft(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ge(t)}function ut(t,n){const i=n?` in ${n}`:"";throw new ht("201",`No provider for ${ft(t)} found${i}`)}function Ve(t,n){null==t&&function(t,n,i,o){throw new Error(`ASSERTION ERROR: ${t}`+(null==o?"":` [Expected=> ${i} ${o} ${n} <=Actual]`))}(n,t,null,"!=")}function Mt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function gn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Nn(t){return wn(t,cr)||wn(t,un)}function wn(t,n){return t.hasOwnProperty(n)?t[n]:null}function mr(t){return t&&(t.hasOwnProperty(Tt)||t.hasOwnProperty(Un))?t[Tt]:null}const cr=Q({\u0275prov:Q}),Tt=Q({\u0275inj:Q}),un=Q({ngInjectableDef:Q}),Un=Q({ngInjectorDef:Q});var Xt=(()=>((Xt=Xt||{})[Xt.Default=0]="Default",Xt[Xt.Host=1]="Host",Xt[Xt.Self=2]="Self",Xt[Xt.SkipSelf=4]="SkipSelf",Xt[Xt.Optional=8]="Optional",Xt))();let Ln;function Xn(t){const n=Ln;return Ln=t,n}function or(t,n,i){const o=Nn(t);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:i&Xt.Optional?null:void 0!==n?n:void ut(L(t),"Injector")}function Er(t){return{toString:t}.toString()}var hr=(()=>((hr=hr||{})[hr.OnPush=0]="OnPush",hr[hr.Default=1]="Default",hr))(),Ht=(()=>((Ht=Ht||{})[Ht.Emulated=0]="Emulated",Ht[Ht.None=2]="None",Ht[Ht.ShadowDom=3]="ShadowDom",Ht))();const It="undefined"!=typeof globalThis&&globalThis,ur="undefined"!=typeof window&&window,pr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,En=It||"undefined"!=typeof global&&global||ur||pr,ir={},Kn=[],Zn=Q({\u0275cmp:Q}),ti=Q({\u0275dir:Q}),fn=Q({\u0275pipe:Q}),Xe=Q({\u0275mod:Q}),se=Q({\u0275loc:Q}),xe=Q({\u0275fac:Q}),at=Q({__NG_ELEMENT_ID__:Q});let Ct=0;function Be(t){return Er(()=>{const i={},o={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===hr.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Kn,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Ht.Emulated,id:"c",styles:t.styles||Kn,_:null,setInput:null,schemas:t.schemas||null,tView:null},u=t.directives,f=t.features,_=t.pipes;return o.id+=Ct++,o.inputs=Qt(t.inputs,i),o.outputs=Qt(t.outputs),f&&f.forEach(C=>C(o)),o.directiveDefs=u?()=>("function"==typeof u?u():u).map(ct):null,o.pipeDefs=_?()=>("function"==typeof _?_():_).map(We):null,o})}function ct(t){return Vn(t)||function(t){return t[ti]||null}(t)}function We(t){return function(t){return t[fn]||null}(t)}const Ee={};function $e(t){return Er(()=>{const n={type:t.type,bootstrap:t.bootstrap||Kn,declarations:t.declarations||Kn,imports:t.imports||Kn,exports:t.exports||Kn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(Ee[t.id]=t.type),n})}function wt(t,n){return Er(()=>{const i=br(t,!0);i.declarations=n.declarations||Kn,i.imports=n.imports||Kn,i.exports=n.exports||Kn})}function Qt(t,n){if(null==t)return ir;const i={};for(const o in t)if(t.hasOwnProperty(o)){let u=t[o],f=u;Array.isArray(u)&&(f=u[1],u=u[0]),i[u]=o,n&&(n[u]=f)}return i}const jn=Be;function An(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Vn(t){return t[Zn]||null}function br(t,n){const i=t[Xe]||null;if(!i&&!0===n)throw new Error(`Type ${L(t)} does not have '\u0275mod' property.`);return i}function Pt(t){return Array.isArray(t)&&"object"==typeof t[1]}function xt(t){return Array.isArray(t)&&!0===t[1]}function on(t){return 0!=(8&t.flags)}function Pn(t){return 2==(2&t.flags)}function $n(t){return 1==(1&t.flags)}function Gn(t){return null!==t.template}function xr(t){return 0!=(512&t[2])}function Ji(t,n){return t.hasOwnProperty(xe)?t[xe]:null}class bs{constructor(n,i,o){this.previousValue=n,this.currentValue=i,this.firstChange=o}isFirstChange(){return this.firstChange}}function es(){return Yi}function Yi(t){return t.type.prototype.ngOnChanges&&(t.setInput=_i),ra}function ra(){const t=Mo(this),n=null==t?void 0:t.current;if(n){const i=t.previous;if(i===ir)t.previous=n;else for(let o in n)i[o]=n[o];t.current=null,this.ngOnChanges(n)}}function _i(t,n,i,o){const u=Mo(t)||function(t,n){return t[ci]=n}(t,{previous:ir,current:null}),f=u.current||(u.current={}),_=u.previous,C=this.declaredInputs[i],M=_[C];f[C]=new bs(M&&M.currentValue,n,_===ir),t[o]=n}es.ngInherit=!0;const ci="__ngSimpleChanges__";function Mo(t){return t[ci]||null}let as;function Ms(t){as=t}function W(t){return!!t.listen}const K={createRenderer:(t,n)=>void 0!==as?as:"undefined"!=typeof document?document:void 0};function Ke(t){for(;Array.isArray(t);)t=t[0];return t}function G(t,n){return Ke(n[t])}function $(t,n){return Ke(n[t.index])}function ce(t,n){return t.data[n]}function _n(t,n){const i=n[t];return Pt(i)?i:i[0]}function er(t){return 4==(4&t[2])}function Kr(t){return 128==(128&t[2])}function si(t,n){return null==n?null:t[n]}function ni(t){t[18]=0}function Zr(t,n){t[5]+=n;let i=t,o=t[3];for(;null!==o&&(1===n&&1===i[5]||-1===n&&0===i[5]);)o[5]+=n,i=o,o=o[3]}const ar={lFrame:qa(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function sa(){return ar.bindingsEnabled}function ln(){return ar.lFrame.lView}function Ir(){return ar.lFrame.tView}function Po(t){return ar.lFrame.contextLView=t,t[8]}function ki(){let t=ao();for(;null!==t&&64===t.type;)t=t.parent;return t}function ao(){return ar.lFrame.currentTNode}function Ps(t,n){const i=ar.lFrame;i.currentTNode=t,i.isParent=n}function Os(){return ar.lFrame.isParent}function qo(){ar.lFrame.isParent=!1}function aa(){return ar.isInCheckNoChangesMode}function lo(t){ar.isInCheckNoChangesMode=t}function gs(){return ar.lFrame.bindingIndex++}function co(t,n){const i=ar.lFrame;i.bindingIndex=i.bindingRootIndex=t,vo(n)}function vo(t){ar.lFrame.currentDirectiveIndex=t}function Eo(){return ar.lFrame.currentQueryIndex}function qs(t){ar.lFrame.currentQueryIndex=t}function la(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function Ks(t,n,i){if(i&Xt.SkipSelf){let u=n,f=t;for(;!(u=u.parent,null!==u||i&Xt.Host||(u=la(f),null===u||(f=f[15],10&u.type))););if(null===u)return!1;n=u,t=f}const o=ar.lFrame=Zs();return o.currentTNode=n,o.lView=t,!0}function vi(t){const n=Zs(),i=t[1];ar.lFrame=n,n.currentTNode=i.firstChild,n.lView=t,n.tView=i,n.contextLView=t,n.bindingIndex=i.bindingStartIndex,n.inI18n=!1}function Zs(){const t=ar.lFrame,n=null===t?null:t.child;return null===n?qa(t):n}function qa(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function Qs(){const t=ar.lFrame;return ar.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const No=Qs;function _a(){const t=Qs();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function N(){return ar.lFrame.selectedIndex}function T(t){ar.lFrame.selectedIndex=t}function q(){const t=ar.lFrame;return ce(t.tView,t.selectedIndex)}function Lr(t,n){for(let i=n.directiveStart,o=n.directiveEnd;i<o;i++){const f=t.data[i].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:C,ngAfterViewInit:M,ngAfterViewChecked:U,ngOnDestroy:ne}=f;_&&(t.contentHooks||(t.contentHooks=[])).push(-i,_),C&&((t.contentHooks||(t.contentHooks=[])).push(i,C),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(i,C)),M&&(t.viewHooks||(t.viewHooks=[])).push(-i,M),U&&((t.viewHooks||(t.viewHooks=[])).push(i,U),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(i,U)),null!=ne&&(t.destroyHooks||(t.destroyHooks=[])).push(i,ne)}}function Ci(t,n,i){Ki(t,n,3,i)}function Kt(t,n,i,o){(3&t[2])===i&&Ki(t,n,i,o)}function lr(t,n){let i=t[2];(3&i)===n&&(i&=2047,i+=1,t[2]=i)}function Ki(t,n,i,o){const f=null!=o?o:-1,_=n.length-1;let C=0;for(let M=void 0!==o?65535&t[18]:0;M<_;M++)if("number"==typeof n[M+1]){if(C=n[M],null!=o&&C>=o)break}else n[M]<0&&(t[18]+=65536),(C<f||-1==f)&&(uo(t,i,n,M),t[18]=(4294901760&t[18])+M+2),M++}function uo(t,n,i,o){const u=i[o]<0,f=i[o+1],C=t[u?-i[o]:i[o]];if(u){if(t[2]>>11<t[18]>>16&&(3&t[2])===n){t[2]+=2048;try{f.call(C)}finally{}}}else try{f.call(C)}finally{}}class Hn{constructor(n,i,o){this.factory=n,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=o}}function va(t,n,i){const o=W(t);let u=0;for(;u<i.length;){const f=i[u];if("number"==typeof f){if(0!==f)break;u++;const _=i[u++],C=i[u++],M=i[u++];o?t.setAttribute(n,C,M,_):n.setAttributeNS(_,C,M)}else{const _=f,C=i[++u];Ti(_)?o&&t.setProperty(n,_,C):o?t.setAttribute(n,_,C):n.setAttribute(_,C),u++}}return u}function rc(t){return 3===t||4===t||6===t}function Ti(t){return 64===t.charCodeAt(0)}function Pr(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let i=-1;for(let o=0;o<n.length;o++){const u=n[o];"number"==typeof u?i=u:0===i||Bs(t,i,u,null,-1===i||2===i?n[++o]:null)}}return t}function Bs(t,n,i,o,u){let f=0,_=t.length;if(-1===n)_=-1;else for(;f<t.length;){const C=t[f++];if("number"==typeof C){if(C===n){_=-1;break}if(C>n){_=f-1;break}}}for(;f<t.length;){const C=t[f];if("number"==typeof C)break;if(C===i){if(null===o)return void(null!==u&&(t[f+1]=u));if(o===t[f+1])return void(t[f+2]=u)}f++,null!==o&&f++,null!==u&&f++}-1!==_&&(t.splice(_,0,n),f=_+1),t.splice(f++,0,i),null!==o&&t.splice(f++,0,o),null!==u&&t.splice(f++,0,u)}function Ec(t){return-1!==t}function Ea(t){return 32767&t}function yr(t,n){let i=function(t){return t>>16}(t),o=n;for(;i>0;)o=o[15],i--;return o}let ko=!0;function fo(t){const n=ko;return ko=t,n}let zr=0;function ui(t,n){const i=Ia(t,n);if(-1!==i)return i;const o=n[1];o.firstCreatePass&&(t.injectorIndex=n.length,xn(o.data,t),xn(n,null),xn(o.blueprint,null));const u=ca(t,n),f=t.injectorIndex;if(Ec(u)){const _=Ea(u),C=yr(u,n),M=C[1].data;for(let U=0;U<8;U++)n[f+U]=C[_+U]|M[_+U]}return n[f+8]=u,f}function xn(t,n){t.push(0,0,0,0,0,0,0,0,n)}function Ia(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function ca(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let i=0,o=null,u=n;for(;null!==u;){const f=u[1],_=f.type;if(o=2===_?f.declTNode:1===_?u[6]:null,null===o)return-1;if(i++,u=u[15],-1!==o.injectorIndex)return o.injectorIndex|i<<16}return-1}function $s(t,n,i){!function(t,n,i){let o;"string"==typeof i?o=i.charCodeAt(0)||0:i.hasOwnProperty(at)&&(o=i[at]),null==o&&(o=i[at]=zr++);const u=255&o;n.data[t+(u>>5)]|=1<<u}(t,n,i)}function Or(t,n,i){if(i&Xt.Optional)return t;ut(n,"NodeInjector")}function Za(t,n,i,o){if(i&Xt.Optional&&void 0===o&&(o=null),0==(i&(Xt.Self|Xt.Host))){const u=t[9],f=Xn(void 0);try{return u?u.get(n,o,i&Xt.Optional):or(n,o,i&Xt.Optional)}finally{Xn(f)}}return Or(o,n,i)}function Ko(t,n,i,o=Xt.Default,u){if(null!==t){const f=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(at)?t[at]:void 0;return"number"==typeof n?n>=0?255&n:V:n}(i);if("function"==typeof f){if(!Ks(n,t,o))return o&Xt.Host?Or(u,i,o):Za(n,i,o,u);try{const _=f(o);if(null!=_||o&Xt.Optional)return _;ut(i)}finally{No()}}else if("number"==typeof f){let _=null,C=Ia(t,n),M=-1,U=o&Xt.Host?n[16][6]:null;for((-1===C||o&Xt.SkipSelf)&&(M=-1===C?ca(t,n):n[C+8],-1!==M&&qe(o,!1)?(_=n[1],C=Ea(M),n=yr(M,n)):C=-1);-1!==C;){const ne=n[1];if(ve(f,C,ne.data)){const Re=x(C,n,i,_,o,U);if(Re!==Qa)return Re}M=n[C+8],-1!==M&&qe(o,n[1].data[C+8]===U)&&ve(f,C,n)?(_=ne,C=Ea(M),n=yr(M,n)):C=-1}}}return Za(n,i,o,u)}const Qa={};function V(){return new ge(ki(),ln())}function x(t,n,i,o,u,f){const _=n[1],C=_.data[t+8],ne=S(C,_,i,null==o?Pn(C)&&ko:o!=_&&0!=(3&C.type),u&Xt.Host&&f===C);return null!==ne?j(n,_,ne,C):Qa}function S(t,n,i,o,u){const f=t.providerIndexes,_=n.data,C=1048575&f,M=t.directiveStart,ne=f>>20,Le=u?C+ne:t.directiveEnd;for(let ot=o?C:C+ne;ot<Le;ot++){const yt=_[ot];if(ot<M&&i===yt||ot>=M&&yt.type===i)return ot}if(u){const ot=_[M];if(ot&&Gn(ot)&&ot.type===i)return M}return null}function j(t,n,i,o){let u=t[i];const f=n.data;if(function(t){return t instanceof Hn}(u)){const _=u;_.resolving&&function(t,n){throw new ht("200",`Circular dependency in DI detected for ${t}`)}(ft(f[i]));const C=fo(_.canSeeViewProviders);_.resolving=!0;const M=_.injectImpl?Xn(_.injectImpl):null;Ks(t,o,Xt.Default);try{u=t[i]=_.factory(void 0,f,t,o),n.firstCreatePass&&i>=o.directiveStart&&function(t,n,i){const{ngOnChanges:o,ngOnInit:u,ngDoCheck:f}=n.type.prototype;if(o){const _=Yi(n);(i.preOrderHooks||(i.preOrderHooks=[])).push(t,_),(i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(t,_)}u&&(i.preOrderHooks||(i.preOrderHooks=[])).push(0-t,u),f&&((i.preOrderHooks||(i.preOrderHooks=[])).push(t,f),(i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(t,f))}(i,f[i],n)}finally{null!==M&&Xn(M),fo(C),_.resolving=!1,No()}}return u}function ve(t,n,i){return!!(i[n+(t>>5)]&1<<t)}function qe(t,n){return!(t&Xt.Self||t&Xt.Host&&n)}class ge{constructor(n,i){this._tNode=n,this._lView=i}get(n,i,o){return Ko(this._tNode,this._lView,n,o,i)}}function qt(t){return Er(()=>{const n=t.prototype.constructor,i=n[xe]||Rn(n),o=Object.prototype;let u=Object.getPrototypeOf(t.prototype).constructor;for(;u&&u!==o;){const f=u[xe]||Rn(u);if(f&&f!==i)return f;u=Object.getPrototypeOf(u)}return f=>new f})}function Rn(t){return le(t)?()=>{const n=Rn(_e(t));return n&&n()}:Ji(t)}function jr(t){return function(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const i=t.attrs;if(i){const o=i.length;let u=0;for(;u<o;){const f=i[u];if(rc(f))break;if(0===f)u+=2;else if("number"==typeof f)for(u++;u<o&&"string"==typeof i[u];)u++;else{if(f===n)return i[u+1];u+=2}}}return null}(ki(),t)}const Nr="__parameters__",Dr="__prop__metadata__";function no(t){return function(...i){if(t){const o=t(...i);for(const u in o)this[u]=o[u]}}}function ys(t,n,i){return Er(()=>{const o=no(n);function u(...f){if(this instanceof u)return o.apply(this,f),this;const _=new u(...f);return C.annotation=_,C;function C(M,U,ne){const Re=M.hasOwnProperty(Nr)?M[Nr]:Object.defineProperty(M,Nr,{value:[]})[Nr];for(;Re.length<=ne;)Re.push(null);return(Re[ne]=Re[ne]||[]).push(_),M}}return i&&(u.prototype=Object.create(i.prototype)),u.prototype.ngMetadataName=t,u.annotationCls=u,u})}function Io(t,n,i,o){return Er(()=>{const u=no(n);function f(..._){if(this instanceof f)return u.apply(this,_),this;const C=new f(..._);return function(U,ne){const Re=U.constructor,Le=Re.hasOwnProperty(Dr)?Re[Dr]:Object.defineProperty(Re,Dr,{value:{}})[Dr];Le[ne]=Le.hasOwnProperty(ne)&&Le[ne]||[],Le[ne].unshift(C),o&&o(U,ne,..._)}}return i&&(f.prototype=Object.create(i.prototype)),f.prototype.ngMetadataName=t,f.annotationCls=f,f})}function rs(){return ys("Attribute",t=>({attributeName:t,__NG_ELEMENT_ID__:()=>jr(t)}))}const Co=rs();class Ui{constructor(n,i){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=Mt({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}toString(){return`InjectionToken ${this._desc}`}}const ji=new Ui("AnalyzeForEntryComponents");class cs{}const po=Io("ContentChild",(t,n={})=>Object.assign({selector:t,first:!0,isViewQuery:!1,descendants:!0},n),cs),Zo=Io("ViewChild",(t,n)=>Object.assign({selector:t,first:!0,isViewQuery:!0,descendants:!0},n),cs),pl=Function;function ks(t,n){void 0===n&&(n=t);for(let i=0;i<t.length;i++){let o=t[i];Array.isArray(o)?(n===t&&(n=t.slice(0,i)),ks(o,n)):n!==t&&n.push(o)}return n}function _s(t,n){t.forEach(i=>Array.isArray(i)?_s(i,n):n(i))}function Fo(t,n,i){n>=t.length?t.push(i):t.splice(n,0,i)}function ws(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function Lo(t,n){const i=[];for(let o=0;o<t;o++)i.push(n);return i}function ro(t,n,i){let o=Ja(t,n);return o>=0?t[1|o]=i:(o=~o,function(t,n,i,o){let u=t.length;if(u==n)t.push(i,o);else if(1===u)t.push(o,t[0]),t[0]=i;else{for(u--,t.push(t[u-1],t[u]);u>n;)t[u]=t[u-2],u--;t[n]=i,t[n+1]=o}}(t,o,n,i)),o}function Bo(t,n){const i=Ja(t,n);if(i>=0)return t[1|i]}function Ja(t,n){return function(t,n,i){let o=0,u=t.length>>i;for(;u!==o;){const f=o+(u-o>>1),_=t[f<<i];if(n===_)return f<<i;_>n?u=f:o=f+1}return~(u<<i)}(t,n,1)}const me={},ze="__NG_DI_FLAG__",Et="ngTempTokenPath",cn=/\n/gm,Yn="__source",Rr=Q({provide:String,useValue:Q});let fr;function Li(t){const n=fr;return fr=t,n}function pi(t,n=Xt.Default){if(void 0===fr)throw new Error("inject() must be called from an injection context");return null===fr?or(t,void 0,n):fr.get(t,n&Xt.Optional?null:void 0,n)}function Ei(t,n=Xt.Default){return(Ln||pi)(_e(t),n)}function Jo(t){const n=[];for(let i=0;i<t.length;i++){const o=_e(t[i]);if(Array.isArray(o)){if(0===o.length)throw new Error("Arguments array must have arguments.");let u,f=Xt.Default;for(let _=0;_<o.length;_++){const C=o[_],M=Ua(C);"number"==typeof M?-1===M?u=C.token:f|=M:u=C}n.push(Ei(u,f))}else n.push(Ei(o))}return n}function ml(t,n){return t[ze]=n,t.prototype[ze]=n,t}function Ua(t){return t[ze]}function Ca(t,n,i,o){const u=t[Et];throw n[Yn]&&u.unshift(n[Yn]),t.message=function(t,n,i,o=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let u=L(n);if(Array.isArray(n))u=n.map(L).join(" -> ");else if("object"==typeof n){let f=[];for(let _ in n)if(n.hasOwnProperty(_)){let C=n[_];f.push(_+":"+("string"==typeof C?JSON.stringify(C):L(C)))}u=`{${f.join(", ")}}`}return`${i}${o?"("+o+")":""}[${u}]: ${t.replace(cn,"\n  ")}`}("\n"+t.message,u,i,o),t.ngTokenPath=u,t[Et]=null,t}const Ho=ml(ys("Inject",t=>({token:t})),-1),Ha=ml(ys("Optional"),8),Do=ml(ys("SkipSelf"),4);let Cc;function ac(t){var n;return(null===(n=function(){if(void 0===Cc&&(Cc=null,En.trustedTypes))try{Cc=En.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return Cc}())||void 0===n?void 0:n.createHTML(t))||t}class _l{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Tc extends _l{getTypeName(){return"HTML"}}class Hl extends _l{getTypeName(){return"Style"}}class Mu extends _l{getTypeName(){return"Script"}}class Dc extends _l{getTypeName(){return"URL"}}class Pu extends _l{getTypeName(){return"ResourceURL"}}function vl(t){return t instanceof _l?t.changingThisBreaksApplicationSecurity:t}function Si(t,n){const i=Sc(t);if(null!=i&&i!==n){if("ResourceURL"===i&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${i} (see https://g.co/ng/security#xss)`)}return i===n}function Sc(t){return t instanceof _l&&t.getTypeName()||null}function nu(t){return new Tc(t)}function gh(t){return new Hl(t)}function _d(t){return new Mu(t)}function Ac(t){return new Dc(t)}function vd(t){return new Pu(t)}class xc{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const i=(new window.DOMParser).parseFromString(ac(n),"text/html").body;return null===i?this.inertDocumentHelper.getInertBodyElement(n):(i.removeChild(i.firstChild),i)}catch(i){return null}}}class El{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const i=this.inertDocument.createElement("html");this.inertDocument.appendChild(i);const o=this.inertDocument.createElement("body");i.appendChild(o)}}getInertBodyElement(n){const i=this.inertDocument.createElement("template");if("content"in i)return i.innerHTML=ac(n),i;const o=this.inertDocument.createElement("body");return o.innerHTML=ac(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(o),o}stripCustomNsAttrs(n){const i=n.attributes;for(let u=i.length-1;0<u;u--){const _=i.item(u).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&n.removeAttribute(_)}let o=n.firstChild;for(;o;)o.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(o),o=o.nextSibling}}const Id=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Wl=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Gl(t){return(t=String(t)).match(Id)||t.match(Wl)?t:"unsafe:"+t}function Pi(t){const n={};for(const i of t.split(","))n[i]=!0;return n}function Jr(...t){const n={};for(const i of t)for(const o in i)i.hasOwnProperty(o)&&(n[o]=!0);return n}const Cd=Pi("area,br,col,hr,img,wbr"),ku=Pi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),bl=Pi("rp,rt"),zl=Jr(Cd,Jr(ku,Pi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Jr(bl,Pi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Jr(bl,ku)),ru=Pi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),wa=Pi("srcset"),vh=Jr(ru,wa,Pi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Pi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),wd=Pi("script,style,template");class Hr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let i=n.firstChild,o=!0;for(;i;)if(i.nodeType===Node.ELEMENT_NODE?o=this.startElement(i):i.nodeType===Node.TEXT_NODE?this.chars(i.nodeValue):this.sanitizedSomething=!0,o&&i.firstChild)i=i.firstChild;else for(;i;){i.nodeType===Node.ELEMENT_NODE&&this.endElement(i);let u=this.checkClobberedElement(i,i.nextSibling);if(u){i=u;break}i=this.checkClobberedElement(i,i.parentNode)}return this.buf.join("")}startElement(n){const i=n.nodeName.toLowerCase();if(!zl.hasOwnProperty(i))return this.sanitizedSomething=!0,!wd.hasOwnProperty(i);this.buf.push("<"),this.buf.push(i);const o=n.attributes;for(let u=0;u<o.length;u++){const f=o.item(u),_=f.name,C=_.toLowerCase();if(!vh.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let M=f.value;ru[C]&&(M=Gl(M)),wa[C]&&(t=M,M=(t=String(t)).split(",").map(n=>Gl(n.trim())).join(", ")),this.buf.push(" ",_,'="',g(M),'"')}var t;return this.buf.push(">"),!0}endElement(n){const i=n.nodeName.toLowerCase();zl.hasOwnProperty(i)&&!Cd.hasOwnProperty(i)&&(this.buf.push("</"),this.buf.push(i),this.buf.push(">"))}chars(n){this.buf.push(g(n))}checkClobberedElement(n,i){if(i&&(n.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return i}}const Eh=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,D=/([^\#-~ |!])/g;function g(t){return t.replace(/&/g,"&amp;").replace(Eh,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(D,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let v;function R(t,n){let i=null;try{v=v||function(t){const n=new El(t);return function(){try{return!!(new window.DOMParser).parseFromString(ac(""),"text/html")}catch(t){return!1}}()?new xc(n):n}(t);let o=n?String(n):"";i=v.getInertBodyElement(o);let u=5,f=o;do{if(0===u)throw new Error("Failed to sanitize html because the input is unstable");u--,o=f,f=i.innerHTML,i=v.getInertBodyElement(o)}while(o!==f);return ac((new Hr).sanitizeChildren(ee(i)||i))}finally{if(i){const o=ee(i)||i;for(;o.firstChild;)o.removeChild(o.firstChild)}}}function ee(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var lt=(()=>((lt=lt||{})[lt.NONE=0]="NONE",lt[lt.HTML=1]="HTML",lt[lt.STYLE=2]="STYLE",lt[lt.SCRIPT=3]="SCRIPT",lt[lt.URL=4]="URL",lt[lt.RESOURCE_URL=5]="RESOURCE_URL",lt))();function bn(t){const n=function(){const t=ln();return t&&t[12]}();return n?n.sanitize(lt.URL,t)||"":Si(t,"URL")?vl(t):Gl(Ge(t))}const su="__ngContext__";function Ls(t,n){t[su]=n}function Tl(t){const n=function(t){return t[su]||null}(t);return n?Array.isArray(n)?n:n.lView:null}function Dh(t){return t.ngOriginalError}function Op(t,...n){t.error(...n)}class js{constructor(){this._console=console}handleError(n){const i=this._findOriginalError(n),o=this._findContext(n),u=(t=n)&&t.ngErrorLogger||Op;var t;u(this._console,"ERROR",n),i&&u(this._console,"ORIGINAL ERROR",i),o&&u(this._console,"ERROR CONTEXT",o)}_findContext(n){return n?n.ngDebugContext||this._findContext(Dh(n)):null}_findOriginalError(n){let i=n&&Dh(n);for(;i&&Dh(i);)i=Dh(i);return i||null}}const kf=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(En))();function Da(t){return t instanceof Function?t():t}var rl=(()=>((rl=rl||{})[rl.Important=1]="Important",rl[rl.DashCase=2]="DashCase",rl))();function xd(t,n){return undefined(t,n)}function Vi(t){const n=t[3];return xt(n)?n[3]:n}function Hu(t){return au(t[13])}function il(t){return au(t[4])}function au(t){for(;null!==t&&!xt(t);)t=t[4];return t}function lu(t,n,i,o,u){if(null!=o){let f,_=!1;xt(o)?f=o:Pt(o)&&(_=!0,o=o[0]);const C=Ke(o);0===t&&null!==i?null==u?Hp(n,i,C):ql(n,i,C,u||null,!0):1===t&&null!==i?ql(n,i,C,u||null,!0):2===t?function(t,n,i){const o=Kl(t,n);o&&function(t,n,i,o){W(t)?t.removeChild(n,i,o):n.removeChild(i)}(t,o,n,i)}(n,C,_):3===t&&n.destroyNode(C),null!=f&&function(t,n,i,o,u){const f=i[7];f!==Ke(i)&&lu(n,t,o,f,u);for(let C=10;C<i.length;C++){const M=i[C];cc(M[1],M,t,n,o,f)}}(n,t,f,i,u)}}function sl(t,n,i){return W(t)?t.createElement(n,i):null===i?t.createElement(n):t.createElementNS(i,n)}function Up(t,n){const i=t[9],o=i.indexOf(n),u=n[3];1024&n[2]&&(n[2]&=-1025,Zr(u,-1)),i.splice(o,1)}function Nh(t,n){if(t.length<=10)return;const i=10+n,o=t[i];if(o){const u=o[17];null!==u&&u!==t&&Up(u,o),n>0&&(t[i-1][4]=o[4]);const f=ws(t,10+n);!function(t,n){cc(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(o[1],o);const _=f[19];null!==_&&_.detachView(f[1]),o[3]=null,o[4]=null,o[2]&=-129}return o}function kh(t,n){if(!(256&n[2])){const i=n[11];W(i)&&i.destroyNode&&cc(t,n,i,3,null,null),function(t){let n=t[13];if(!n)return Yl(t[1],t);for(;n;){let i=null;if(Pt(n))i=n[13];else{const o=n[10];o&&(i=o)}if(!i){for(;n&&!n[4]&&n!==t;)Pt(n)&&Yl(n[1],n),n=n[3];null===n&&(n=t),Pt(n)&&Yl(n[1],n),i=n&&n[4]}n=i}}(n)}}function Yl(t,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function(t,n){let i;if(null!=t&&null!=(i=t.destroyHooks))for(let o=0;o<i.length;o+=2){const u=n[i[o]];if(!(u instanceof Hn)){const f=i[o+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const C=u[f[_]],M=f[_+1];try{M.call(C)}finally{}}else try{f.call(u)}finally{}}}}(t,n),function(t,n){const i=t.cleanup,o=n[7];let u=-1;if(null!==i)for(let f=0;f<i.length-1;f+=2)if("string"==typeof i[f]){const _=i[f+1],C="function"==typeof _?_(n):Ke(n[_]),M=o[u=i[f+2]],U=i[f+3];"boolean"==typeof U?C.removeEventListener(i[f],M,U):U>=0?o[u=U]():o[u=-U].unsubscribe(),f+=2}else{const _=o[u=i[f+1]];i[f].call(_)}if(null!==o){for(let f=u+1;f<o.length;f++)o[f]();n[7]=null}}(t,n),1===n[1].type&&W(n[11])&&n[11].destroy();const i=n[17];if(null!==i&&xt(n[3])){i!==n[3]&&Up(i,n);const o=n[19];null!==o&&o.detachView(t)}}}function jp(t,n,i){return function(t,n,i){let o=n;for(;null!==o&&40&o.type;)o=(n=o).parent;if(null===o)return i[0];if(2&o.flags){const u=t.data[o.directiveStart].encapsulation;if(u===Ht.None||u===Ht.Emulated)return null}return $(o,i)}(t,n.parent,i)}function ql(t,n,i,o,u){W(t)?t.insertBefore(n,i,o,u):n.insertBefore(i,o,u)}function Hp(t,n,i){W(t)?t.appendChild(n,i):n.appendChild(i)}function Fh(t,n,i,o,u){null!==o?ql(t,n,i,o,u):Hp(t,n,i)}function Kl(t,n){return W(t)?t.parentNode(n):n.parentNode}function Lh(t,n,i){return Gp(t,n,i)}let Gp=function(t,n,i){return 40&t.type?$(t,i):null};function Od(t,n,i,o){const u=jp(t,o,n),f=n[11],C=Lh(o.parent||n[6],o,n);if(null!=u)if(Array.isArray(i))for(let M=0;M<i.length;M++)Fh(f,u,i[M],C,!1);else Fh(f,u,i,C,!1)}function Nd(t,n){if(null!==n){const i=n.type;if(3&i)return $(n,t);if(4&i)return Ga(-1,t[n.index]);if(8&i){const o=n.child;if(null!==o)return Nd(t,o);{const u=t[n.index];return xt(u)?Ga(-1,u):Ke(u)}}if(32&i)return xd(n,t)()||Ke(t[n.index]);{const o=Sl(t,n);return null!==o?Array.isArray(o)?o[0]:Nd(Vi(t[16]),o):Nd(t,n.next)}}return null}function Sl(t,n){return null!==n?t[16][6].projection[n.projection]:null}function Ga(t,n){const i=10+t+1;if(i<n.length){const o=n[i],u=o[1].firstChild;if(null!==u)return Nd(o,u)}return n[7]}function Yu(t,n,i,o,u,f,_){for(;null!=i;){const C=o[i.index],M=i.type;if(_&&0===n&&(C&&Ls(Ke(C),o),i.flags|=4),64!=(64&i.flags))if(8&M)Yu(t,n,i.child,o,u,f,!1),lu(n,t,u,C,f);else if(32&M){const U=xd(i,o);let ne;for(;ne=U();)lu(n,t,u,ne,f);lu(n,t,u,C,f)}else 16&M?Lc(t,n,o,i,u,f):lu(n,t,u,C,f);i=_?i.projectionNext:i.next}}function cc(t,n,i,o,u,f){Yu(i,o,t.firstChild,n,u,f,!1)}function Lc(t,n,i,o,u,f){const _=i[16],M=_[6].projection[o.projection];if(Array.isArray(M))for(let U=0;U<M.length;U++)lu(n,t,u,M[U],f);else Yu(t,n,M,_[3],u,f,!0)}function Bh(t,n,i){W(t)?t.setAttribute(n,"style",i):n.style.cssText=i}function Al(t,n,i){W(t)?""===i?t.removeAttribute(n,"class"):t.setAttribute(n,"class",i):n.className=i}function Zl(t,n,i){let o=t.length;for(;;){const u=t.indexOf(n,i);if(-1===u)return u;if(0===u||t.charCodeAt(u-1)<=32){const f=n.length;if(u+f===o||t.charCodeAt(u+f)<=32)return u}i=u+1}}const Ql="ng-template";function am(t,n,i){let o=0;for(;o<t.length;){let u=t[o++];if(i&&"class"===u){if(u=t[o],-1!==Zl(u.toLowerCase(),n,0))return!0}else if(1===u){for(;o<t.length&&"string"==typeof(u=t[o++]);)if(u.toLowerCase()===n)return!0;return!1}}return!1}function hu(t){return 4===t.type&&t.value!==Ql}function $h(t,n,i){return n===(4!==t.type||i?t.value:Ql)}function Vc(t,n,i){let o=4;const u=t.attrs||[],f=function(t){for(let n=0;n<t.length;n++)if(rc(t[n]))return n;return t.length}(u);let _=!1;for(let C=0;C<n.length;C++){const M=n[C];if("number"!=typeof M){if(!_)if(4&o){if(o=2|1&o,""!==M&&!$h(t,M,i)||""===M&&1===n.length){if(za(o))return!1;_=!0}}else{const U=8&o?M:n[++C];if(8&o&&null!==t.attrs){if(!am(t.attrs,U,i)){if(za(o))return!1;_=!0}continue}const Re=zp(8&o?"class":M,u,hu(t),i);if(-1===Re){if(za(o))return!1;_=!0;continue}if(""!==U){let Le;Le=Re>f?"":u[Re+1].toLowerCase();const ot=8&o?Le:null;if(ot&&-1!==Zl(ot,U,0)||2&o&&U!==Le){if(za(o))return!1;_=!0}}}}else{if(!_&&!za(o)&&!za(M))return!1;if(_&&za(M))continue;_=!1,o=M|1&o}}return za(o)||_}function za(t){return 0==(1&t)}function zp(t,n,i,o){if(null===n)return-1;let u=0;if(o||!i){let f=!1;for(;u<n.length;){const _=n[u];if(_===t)return u;if(3===_||6===_)f=!0;else{if(1===_||2===_){let C=n[++u];for(;"string"==typeof C;)C=n[++u];continue}if(4===_)break;if(0===_){u+=4;continue}}u+=f?1:2}return-1}return function(t,n){let i=t.indexOf(4);if(i>-1)for(i++;i<t.length;){const o=t[i];if("number"==typeof o)return-1;if(o===n)return i;i++}return-1}(n,t)}function Uh(t,n,i=!1){for(let o=0;o<n.length;o++)if(Vc(t,n[o],i))return!0;return!1}function uc(t,n){e:for(let i=0;i<n.length;i++){const o=n[i];if(t.length===o.length){for(let u=0;u<t.length;u++)if(t[u]!==o[u])continue e;return!0}}return!1}function Fd(t,n){return t?":not("+n.trim()+")":n}function Ya(t){let n=t[0],i=1,o=2,u="",f=!1;for(;i<t.length;){let _=t[i];if("string"==typeof _)if(2&o){const C=t[++i];u+="["+_+(C.length>0?'="'+C+'"':"")+"]"}else 8&o?u+="."+_:4&o&&(u+=" "+_);else""!==u&&!za(_)&&(n+=Fd(f,u),u=""),o=_,f=f||!za(o);i++}return""!==u&&(n+=Fd(f,u)),n}const Mr={};function ol(t){qp(Ir(),ln(),N()+t,aa())}function qp(t,n,i,o){if(!o)if(3==(3&n[2])){const f=t.preOrderCheckHooks;null!==f&&Ci(n,f,i)}else{const f=t.preOrderHooks;null!==f&&Kt(n,f,0,i)}T(i)}function Ld(t,n){return t<<17|n<<2}function xl(t){return t>>17&32767}function $f(t){return 2|t}function Rl(t){return(131068&t)>>2}function io(t,n){return-131069&t|n<<2}function Ku(t){return 1|t}function Kh(t,n){const i=t.contentQueries;if(null!==i)for(let o=0;o<i.length;o+=2){const u=i[o],f=i[o+1];if(-1!==f){const _=t.data[f];qs(u),_.contentQueries(2,n[f],f)}}}function Xu(t,n,i,o,u,f,_,C,M,U){const ne=n.blueprint.slice();return ne[0]=u,ne[2]=140|o,ni(ne),ne[3]=ne[15]=t,ne[8]=i,ne[10]=_||t&&t[10],ne[11]=C||t&&t[11],ne[12]=M||t&&t[12]||null,ne[9]=U||t&&t[9]||null,ne[6]=f,ne[16]=2==n.type?t[16]:ne,ne}function Ju(t,n,i,o,u){let f=t.data[n];if(null===f)f=function(t,n,i,o,u){const f=ao(),_=Os(),M=t.data[n]=function(t,n,i,o,u,f){return{type:i,index:o,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:u,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,i,n,o,u);return null===t.firstChild&&(t.firstChild=M),null!==f&&(_?null==f.child&&null!==M.parent&&(f.child=M):null===f.next&&(f.next=M)),M}(t,n,i,o,u),ar.lFrame.inI18n&&(f.flags|=64);else if(64&f.type){f.type=i,f.value=o,f.attrs=u;const _=function(){const t=ar.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return Ps(f,!0),f}function ed(t,n,i,o){if(0===i)return-1;const u=n.length;for(let f=0;f<i;f++)n.push(o),t.blueprint.push(o),t.data.push(null);return u}function td(t,n,i){vi(n);try{const o=t.viewQuery;null!==o&&_g(1,o,i);const u=t.template;null!==u&&Zh(t,n,u,1,i),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Kh(t,n),t.staticViewQueries&&_g(2,t.viewQuery,i);const f=t.components;null!==f&&function(t,n){for(let i=0;i<n.length;i++)pg(t,n[i])}(n,f)}catch(o){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),o}finally{n[2]&=-5,_a()}}function hc(t,n,i,o){const u=n[2];if(256==(256&u))return;vi(n);const f=aa();try{ni(n),function(t){ar.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==i&&Zh(t,n,i,2,o);const _=3==(3&u);if(!f)if(_){const U=t.preOrderCheckHooks;null!==U&&Ci(n,U,null)}else{const U=t.preOrderHooks;null!==U&&Kt(n,U,0,null),lr(n,0)}if(function(t){for(let n=Hu(t);null!==n;n=il(n)){if(!n[2])continue;const i=n[9];for(let o=0;o<i.length;o++){const u=i[o],f=u[3];0==(1024&u[2])&&Zr(f,1),u[2]|=1024}}}(n),function(t){for(let n=Hu(t);null!==n;n=il(n))for(let i=10;i<n.length;i++){const o=n[i],u=o[1];Kr(o)&&hc(u,o,u.template,o[8])}}(n),null!==t.contentQueries&&Kh(t,n),!f)if(_){const U=t.contentCheckHooks;null!==U&&Ci(n,U)}else{const U=t.contentHooks;null!==U&&Kt(n,U,1),lr(n,1)}!function(t,n){const i=t.hostBindingOpCodes;if(null!==i)try{for(let o=0;o<i.length;o++){const u=i[o];if(u<0)T(~u);else{const f=u,_=i[++o],C=i[++o];co(_,f),C(2,n[f])}}}finally{T(-1)}}(t,n);const C=t.components;null!==C&&function(t,n){for(let i=0;i<n.length;i++)vm(t,n[i])}(n,C);const M=t.viewQuery;if(null!==M&&_g(2,M,o),!f)if(_){const U=t.viewCheckHooks;null!==U&&Ci(n,U)}else{const U=t.viewHooks;null!==U&&Kt(n,U,2),lr(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),f||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,Zr(n[3],-1))}finally{_a()}}function Yd(t,n,i,o){const u=n[10],f=!aa(),_=er(n);try{f&&!_&&u.begin&&u.begin(),_&&td(t,n,o),hc(t,n,i,o)}finally{f&&!_&&u.end&&u.end()}}function Zh(t,n,i,o,u){const f=N(),_=2&o;try{T(-1),_&&n.length>20&&qp(t,n,20,aa()),i(o,u)}finally{T(f)}}function ng(t,n,i){!sa()||(function(t,n,i,o){const u=i.directiveStart,f=i.directiveEnd;t.firstCreatePass||ui(i,n),Ls(o,n);const _=i.initialInputs;for(let C=u;C<f;C++){const M=t.data[C],U=Gn(M);U&&_m(n,i,M);const ne=j(n,t,C,i);Ls(ne,n),null!==_&&Dy(0,C-u,ne,M,0,_),U&&(_n(i.index,n)[8]=ne)}}(t,n,i,$(i,n)),128==(128&i.flags)&&function(t,n,i){const o=i.directiveStart,u=i.directiveEnd,_=i.index,C=ar.lFrame.currentDirectiveIndex;try{T(_);for(let M=o;M<u;M++){const U=t.data[M],ne=n[M];vo(M),(null!==U.hostBindings||0!==U.hostVars||null!==U.hostAttrs)&&ep(U,ne)}}finally{T(-1),vo(C)}}(t,n,i))}function rg(t,n,i=$){const o=n.localNames;if(null!==o){let u=n.index+1;for(let f=0;f<o.length;f+=2){const _=o[f+1],C=-1===_?i(n,t):t[_];t[u++]=C}}}function Qh(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=qd(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function qd(t,n,i,o,u,f,_,C,M,U){const ne=20+o,Re=ne+u,Le=function(t,n){const i=[];for(let o=0;o<n;o++)i.push(o<t?null:Mr);return i}(ne,Re),ot="function"==typeof U?U():U;return Le[1]={type:t,blueprint:Le,template:i,queries:null,viewQuery:C,declTNode:n,data:Le.slice().fill(null,ne),bindingStartIndex:ne,expandoStartIndex:Re,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:M,consts:ot,incompleteFirstPass:!1}}function Xh(t,n,i,o){const u=np(n);null===i?u.push(o):(u.push(i),t.firstCreatePass&&rp(t).push(o,u.length-1))}function Jh(t,n,i){for(let o in t)if(t.hasOwnProperty(o)){const u=t[o];(i=null===i?{}:i).hasOwnProperty(o)?i[o].push(n,u):i[o]=[n,u]}return i}function Ra(t,n,i,o,u,f,_,C){const M=$(n,i);let ne,U=n.inputs;!C&&null!=U&&(ne=U[o])?(rf(t,i,ne,o,u),Pn(n)&&function(t,n){const i=_n(n,t);16&i[2]||(i[2]|=64)}(i,n.index)):3&n.type&&(o=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(o),u=null!=_?_(u,n.value||"",o):u,W(f)?f.setProperty(M,o,u):Ti(o)||(M.setProperty?M.setProperty(o,u):M[o]=u))}function lg(t,n,i,o){let u=!1;if(sa()){const f=function(t,n,i){const o=t.directiveRegistry;let u=null;if(o)for(let f=0;f<o.length;f++){const _=o[f];Uh(i,_.selectors,!1)&&(u||(u=[]),$s(ui(i,n),t,_.type),Gn(_)?(id(t,i),u.unshift(_)):u.push(_))}return u}(t,n,i),_=null===o?null:{"":-1};if(null!==f){u=!0,ym(i,t.data.length,f.length);for(let ne=0;ne<f.length;ne++){const Re=f[ne];Re.providersResolver&&Re.providersResolver(Re)}let C=!1,M=!1,U=ed(t,n,f.length,null);for(let ne=0;ne<f.length;ne++){const Re=f[ne];i.mergedAttrs=Pr(i.mergedAttrs,Re.hostAttrs),dg(t,i,n,U,Re),mm(U,Re,_),null!==Re.contentQueries&&(i.flags|=8),(null!==Re.hostBindings||null!==Re.hostAttrs||0!==Re.hostVars)&&(i.flags|=128);const Le=Re.type.prototype;!C&&(Le.ngOnChanges||Le.ngOnInit||Le.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(i.index),C=!0),!M&&(Le.ngOnChanges||Le.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(i.index),M=!0),U++}!function(t,n){const o=n.directiveEnd,u=t.data,f=n.attrs,_=[];let C=null,M=null;for(let U=n.directiveStart;U<o;U++){const ne=u[U],Re=ne.inputs,Le=null===f||hu(n)?null:hg(Re,f);_.push(Le),C=Jh(Re,U,C),M=Jh(ne.outputs,U,M)}null!==C&&(C.hasOwnProperty("class")&&(n.flags|=16),C.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=_,n.inputs=C,n.outputs=M}(t,i)}_&&function(t,n,i){if(n){const o=t.localNames=[];for(let u=0;u<n.length;u+=2){const f=i[n[u+1]];if(null==f)throw new ht("301",`Export of name '${n[u+1]}' not found!`);o.push(n[u],f)}}}(i,o,_)}return i.mergedAttrs=Pr(i.mergedAttrs,i.attrs),u}function Xf(t,n,i,o,u,f){const _=f.hostBindings;if(_){let C=t.hostBindingOpCodes;null===C&&(C=t.hostBindingOpCodes=[]);const M=~n.index;(function(t){let n=t.length;for(;n>0;){const i=t[--n];if("number"==typeof i&&i<0)return i}return 0})(C)!=M&&C.push(M),C.push(o,u,_)}}function ep(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function id(t,n){n.flags|=2,(t.components||(t.components=[])).push(n.index)}function mm(t,n,i){if(i){if(n.exportAs)for(let o=0;o<n.exportAs.length;o++)i[n.exportAs[o]]=t;Gn(n)&&(i[""]=t)}}function ym(t,n,i){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+i,t.providerIndexes=n}function dg(t,n,i,o,u){t.data[o]=u;const f=u.factory||(u.factory=Ji(u.type)),_=new Hn(f,Gn(u),null);t.blueprint[o]=_,i[o]=_,Xf(t,n,0,o,ed(t,i,u.hostVars,Mr),u)}function _m(t,n,i){const o=$(n,t),u=Qh(i),f=t[10],_=$c(t,Xu(t,u,null,i.onPush?64:16,o,n,f,f.createRenderer(o,i),null,null));t[n.index]=_}function fc(t,n,i,o,u,f){const _=$(t,n);!function(t,n,i,o,u,f,_){if(null==f)W(t)?t.removeAttribute(n,u,i):n.removeAttribute(u);else{const C=null==_?Ge(f):_(f,o||"",u);W(t)?t.setAttribute(n,u,C,i):i?n.setAttributeNS(i,u,C):n.setAttribute(u,C)}}(n[11],_,f,t.value,i,o,u)}function Dy(t,n,i,o,u,f){const _=f[n];if(null!==_){const C=o.setInput;for(let M=0;M<_.length;){const U=_[M++],ne=_[M++],Re=_[M++];null!==C?o.setInput(i,Re,U,ne):i[ne]=Re}}}function hg(t,n){let i=null,o=0;for(;o<n.length;){const u=n[o];if(0!==u)if(5!==u){if("number"==typeof u)break;t.hasOwnProperty(u)&&(null===i&&(i=[]),i.push(u,t[u],n[o+1])),o+=2}else o+=2;else o+=4}return i}function tp(t,n,i,o){return new Array(t,!0,!1,n,null,0,o,i,null,null)}function vm(t,n){const i=_n(n,t);if(Kr(i)){const o=i[1];80&i[2]?hc(o,i,o.template,i[8]):i[5]>0&&nf(i)}}function nf(t){for(let o=Hu(t);null!==o;o=il(o))for(let u=10;u<o.length;u++){const f=o[u];if(1024&f[2]){const _=f[1];hc(_,f,_.template,f[8])}else f[5]>0&&nf(f)}const i=t[1].components;if(null!==i)for(let o=0;o<i.length;o++){const u=_n(i[o],t);Kr(u)&&u[5]>0&&nf(u)}}function pg(t,n){const i=_n(n,t),o=i[1];(function(t,n){for(let i=n.length;i<t.blueprint.length;i++)n.push(t.blueprint[i])})(o,i),td(o,i,i[8])}function $c(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function pc(t){for(;t;){t[2]|=64;const n=Vi(t);if(xr(t)&&!n)return t;t=n}return null}function yu(t,n,i){const o=n[10];o.begin&&o.begin();try{hc(t,n,t.template,i)}catch(u){throw Eg(n,u),u}finally{o.end&&o.end()}}function yg(t){!function(t){for(let n=0;n<t.components.length;n++){const i=t.components[n],o=Tl(i),u=o[1];Yd(u,o,u.template,i)}}(t[8])}function _g(t,n,i){qs(0),n(t,i)}const vg=(()=>Promise.resolve(null))();function np(t){return t[7]||(t[7]=[])}function rp(t){return t.cleanup||(t.cleanup=[])}function Eg(t,n){const i=t[9],o=i?i.get(js,null):null;o&&o.handleError(n)}function rf(t,n,i,o,u){for(let f=0;f<i.length;){const _=i[f++],C=i[f++],M=n[_],U=t.data[_];null!==U.setInput?U.setInput(M,u,o,C):M[C]=u}}function Pl(t,n,i){const o=G(n,t);!function(t,n,i){W(t)?t.setValue(n,i):n.textContent=i}(t[11],o,i)}function sf(t,n,i){let o=i?t.styles:null,u=i?t.classes:null,f=0;if(null!==n)for(let _=0;_<n.length;_++){const C=n[_];"number"==typeof C?f=C:1==f?u=Ce(u,C):2==f&&(o=Ce(o,C+": "+n[++_]+";"))}i?t.styles=o:t.stylesWithoutHost=o,i?t.classes=u:t.classesWithoutHost=u}const Uc=new Ui("INJECTOR",-1);class sp{get(n,i=me){if(i===me){const o=new Error(`NullInjectorError: No provider for ${L(n)}!`);throw o.name="NullInjectorError",o}return i}}const sd=new Ui("Set Injector scope."),Qd={},wm={};let op;function bg(){return void 0===op&&(op=new sp),op}function af(t,n=null,i=null,o){return new lp(t,i,n||bg(),o)}class lp{constructor(n,i,o,u=null){this.parent=o,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];i&&_s(i,C=>this.processProvider(C,n,i)),_s([n],C=>this.processInjectorType(C,[],f)),this.records.set(Uc,vu(void 0,this));const _=this.records.get(sd);this.scope=null!=_?_.value:null,this.source=u||("object"==typeof n?null:L(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,i=me,o=Xt.Default){this.assertNotDestroyed();const u=Li(this),f=Xn(void 0);try{if(!(o&Xt.SkipSelf)){let C=this.records.get(n);if(void 0===C){const M=("function"==typeof(t=n)||"object"==typeof t&&t instanceof Ui)&&Nn(n);C=M&&this.injectableDefInScope(M)?vu(cp(n),Qd):null,this.records.set(n,C)}if(null!=C)return this.hydrate(n,C)}return(o&Xt.Self?bg():this.parent).get(n,i=o&Xt.Optional&&i===me?null:i)}catch(_){if("NullInjectorError"===_.name){if((_[Et]=_[Et]||[]).unshift(L(n)),u)throw _;return Ca(_,n,"R3InjectorError",this.source)}throw _}finally{Xn(f),Li(u)}var t}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((o,u)=>n.push(L(u))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(n,i,o){if(!(n=_e(n)))return!1;let u=mr(n);const f=null==u&&n.ngModule||void 0,_=void 0===f?n:f,C=-1!==o.indexOf(_);if(void 0!==f&&(u=mr(f)),null==u)return!1;if(null!=u.imports&&!C){let ne;o.push(_);try{_s(u.imports,Re=>{this.processInjectorType(Re,i,o)&&(void 0===ne&&(ne=[]),ne.push(Re))})}finally{}if(void 0!==ne)for(let Re=0;Re<ne.length;Re++){const{ngModule:Le,providers:ot}=ne[Re];_s(ot,yt=>this.processProvider(yt,Le,ot||Kn))}}this.injectorDefTypes.add(_);const M=Ji(_)||(()=>new _);this.records.set(_,vu(M,Qd));const U=u.providers;if(null!=U&&!C){const ne=n;_s(U,Re=>this.processProvider(Re,ne,U))}return void 0!==f&&void 0!==n.providers}processProvider(n,i,o){let u=jc(n=_e(n))?n:_e(n&&n.provide);const f=(t=n,cf(t)?vu(void 0,t.useValue):vu(lf(t),Qd));var t;if(jc(n)||!0!==n.multi)this.records.get(u);else{let _=this.records.get(u);_||(_=vu(void 0,Qd,!0),_.factory=()=>Jo(_.multi),this.records.set(u,_)),u=n,_.multi.push(n)}this.records.set(u,f)}hydrate(n,i){return i.value===Qd&&(i.value=wm,i.value=i.factory()),"object"==typeof i.value&&i.value&&null!==(t=i.value)&&"object"==typeof t&&"function"==typeof t.ngOnDestroy&&this.onDestroy.add(i.value),i.value;var t}injectableDefInScope(n){if(!n.providedIn)return!1;const i=_e(n.providedIn);return"string"==typeof i?"any"===i||i===this.scope:this.injectorDefTypes.has(i)}}function cp(t){const n=Nn(t),i=null!==n?n.factory:Ji(t);if(null!==i)return i;if(t instanceof Ui)throw new Error(`Token ${L(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const n=t.length;if(n>0){const o=Lo(n,"?");throw new Error(`Can't resolve all parameters for ${L(t)}: (${o.join(", ")}).`)}const i=function(t){const n=t&&(t[cr]||t[un]);if(n){const i=function(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${i}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${i}" class.`),n}return null}(t);return null!==i?()=>i.factory(t):()=>new t}(t);throw new Error("unreachable")}function lf(t,n,i){let o;if(jc(t)){const u=_e(t);return Ji(u)||cp(u)}if(cf(t))o=()=>_e(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))o=()=>t.useFactory(...Jo(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))o=()=>Ei(_e(t.useExisting));else{const u=_e(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return Ji(u)||cp(u);o=()=>new u(...Jo(t.deps))}return o}function vu(t,n,i=!1){return{factory:t,value:n,multi:i?[]:void 0}}function cf(t){return null!==t&&"object"==typeof t&&Rr in t}function jc(t){return"function"==typeof t}const Hc=function(t,n,i){return function(t,n=null,i=null,o){const u=af(t,n,i,o);return u._resolveInjectorDefTypes(),u}({name:i},n,t,i)};let us=(()=>{class t{static create(i,o){return Array.isArray(i)?Hc(i,o,""):Hc(i.providers,i.parent,i.name||"")}}return t.THROW_IF_NOT_FOUND=me,t.NULL=new sp,t.\u0275prov=Mt({token:t,providedIn:"any",factory:()=>Ei(Uc)}),t.__NG_ELEMENT_ID__=-1,t})();function z(t,n){Lr(Tl(t)[1],ki())}function Qe(t){let n=function(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),i=!0;const o=[t];for(;n;){let u;if(Gn(t))u=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Error("Directives cannot inherit Components");u=n.\u0275dir}if(u){if(i){o.push(u);const _=t;_.inputs=Wt(t.inputs),_.declaredInputs=Wt(t.declaredInputs),_.outputs=Wt(t.outputs);const C=u.hostBindings;C&&gr(t,C);const M=u.viewQuery,U=u.contentQueries;if(M&&tn(t,M),U&&Wn(t,U),ye(t.inputs,u.inputs),ye(t.declaredInputs,u.declaredInputs),ye(t.outputs,u.outputs),Gn(u)&&u.data.animation){const ne=t.data;ne.animation=(ne.animation||[]).concat(u.data.animation)}}const f=u.features;if(f)for(let _=0;_<f.length;_++){const C=f[_];C&&C.ngInherit&&C(t),C===Qe&&(i=!1)}}n=Object.getPrototypeOf(n)}!function(t){let n=0,i=null;for(let o=t.length-1;o>=0;o--){const u=t[o];u.hostVars=n+=u.hostVars,u.hostAttrs=Pr(u.hostAttrs,i=Pr(i,u.hostAttrs))}}(o)}function Wt(t){return t===ir?{}:t===Kn?[]:t}function tn(t,n){const i=t.viewQuery;t.viewQuery=i?(o,u)=>{n(o,u),i(o,u)}:n}function Wn(t,n){const i=t.contentQueries;t.contentQueries=i?(o,u,f)=>{n(o,u,f),i(o,u,f)}:n}function gr(t,n){const i=t.hostBindings;t.hostBindings=i?(o,u)=>{n(o,u),i(o,u)}:n}let Nl=null;function kl(){if(!Nl){const t=En.Symbol;if(t&&t.iterator)Nl=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let i=0;i<n.length;++i){const o=n[i];"entries"!==o&&"size"!==o&&Map.prototype[o]===Map.prototype.entries&&(Nl=o)}}}return Nl}function Ep(t){return!!bp(t)&&(Array.isArray(t)||!(t instanceof Map)&&kl()in t)}function bp(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ta(t,n,i){return!Object.is(t[n],i)&&(t[n]=i,!0)}function Rg(t,n,i,o){const u=ln();return ta(u,gs(),n)&&(Ir(),fc(q(),u,t,n,i,o)),Rg}function od(t,n,i,o){return ta(t,gs(),i)?n+Ge(i)+o:Mr}function Ds(t,n,i,o,u,f,_,C){const M=ln(),U=Ir(),ne=t+20,Re=U.firstCreatePass?function(t,n,i,o,u,f,_,C,M){const U=n.consts,ne=Ju(n,t,4,_||null,si(U,C));lg(n,i,ne,si(U,M)),Lr(n,ne);const Re=ne.tViews=qd(2,ne,o,u,f,n.directiveRegistry,n.pipeRegistry,null,n.schemas,U);return null!==n.queries&&(n.queries.template(n,ne),Re.queries=n.queries.embeddedTView(ne)),ne}(ne,U,M,n,i,o,u,f,_):U.data[ne];Ps(Re,!1);const Le=M[11].createComment("");Od(U,M,Le,Re),Ls(Le,M),$c(M,M[ne]=tp(Le,M,Le,Re)),$n(Re)&&ng(U,M,Re),null!=_&&rg(M,Re,C)}function wp(t,n=Xt.Default){const i=ln();return null===i?Ei(t,n):Ko(ki(),i,_e(t),n)}function Gy(){throw new Error("invalid")}function Hm(t,n,i){const o=ln();return ta(o,gs(),n)&&Ra(Ir(),q(),o,t,n,o[11],i,!1),Hm}function Lg(t,n,i,o,u){const _=u?"class":"style";rf(t,i,n.inputs[_],_,o)}function Wm(t,n,i,o){const u=ln(),f=Ir(),_=20+t,C=u[11],M=u[_]=sl(C,n,ar.lFrame.currentNamespace),U=f.firstCreatePass?function(t,n,i,o,u,f,_){const C=n.consts,U=Ju(n,t,2,u,si(C,f));return lg(n,i,U,si(C,_)),null!==U.attrs&&sf(U,U.attrs,!1),null!==U.mergedAttrs&&sf(U,U.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,U),U}(_,f,u,0,n,i,o):f.data[_];Ps(U,!0);const ne=U.mergedAttrs;null!==ne&&va(C,M,ne);const Re=U.classes;null!==Re&&Al(C,M,Re);const Le=U.styles;null!==Le&&Bh(C,M,Le),64!=(64&U.flags)&&Od(f,u,M,U),0===ar.lFrame.elementDepthCount&&Ls(M,u),ar.lFrame.elementDepthCount++,$n(U)&&(ng(f,u,U),function(t,n,i){if(on(n)){const u=n.directiveEnd;for(let f=n.directiveStart;f<u;f++){const _=t.data[f];_.contentQueries&&_.contentQueries(1,i[f],f)}}}(f,U,u)),null!==o&&rg(u,U)}function Vg(){let t=ki();Os()?qo():(t=t.parent,Ps(t,!1));const n=t;ar.lFrame.elementDepthCount--;const i=Ir();i.firstCreatePass&&(Lr(i,t),on(t)&&i.queries.elementEnd(t)),null!=n.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(n)&&Lg(i,n,ln(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(n)&&Lg(i,n,ln(),n.stylesWithoutHost,!1)}function zy(t,n,i,o){Wm(t,n,i,o),Vg()}function Gm(){return ln()}function Bg(t){return!!t&&"function"==typeof t.then}function zm(t){return!!t&&"function"==typeof t.subscribe}const Tp=zm;function Tf(t,n,i,o){const u=ln(),f=Ir(),_=ki();return function(t,n,i,o,u,f,_,C){const M=$n(o),ne=t.firstCreatePass&&rp(t),Re=n[8],Le=np(n);let ot=!0;if(3&o.type||C){const Rt=$(o,n),Tn=C?C(Rt):Rt,sn=Le.length,Sr=C?Qr=>C(Ke(Qr[o.index])):o.index;if(W(i)){let Qr=null;if(!C&&M&&(Qr=function(t,n,i,o){const u=t.cleanup;if(null!=u)for(let f=0;f<u.length-1;f+=2){const _=u[f];if(_===i&&u[f+1]===o){const C=n[7],M=u[f+2];return C.length>M?C[M]:null}"string"==typeof _&&(f+=2)}return null}(t,n,u,o.index)),null!==Qr)(Qr.__ngLastListenerFn__||Qr).__ngNextListenerFn__=f,Qr.__ngLastListenerFn__=f,ot=!1;else{f=Iu(o,n,Re,f,!1);const xi=i.listen(Tn,u,f);Le.push(f,xi),ne&&ne.push(u,Sr,sn,sn+1)}}else f=Iu(o,n,Re,f,!0),Tn.addEventListener(u,f,_),Le.push(f),ne&&ne.push(u,Sr,sn,_)}else f=Iu(o,n,Re,f,!1);const yt=o.outputs;let Gt;if(ot&&null!==yt&&(Gt=yt[u])){const Rt=Gt.length;if(Rt)for(let Tn=0;Tn<Rt;Tn+=2){const ya=n[Gt[Tn]][Gt[Tn+1]].subscribe(f),Kc=Le.length;Le.push(f,ya),ne&&ne.push(u,o.index,Kc,-(Kc+1))}}}(f,u,u[11],_,t,n,!!i,o),Tf}function Df(t,n,i,o){try{return!1!==i(o)}catch(u){return Eg(t,u),!1}}function Iu(t,n,i,o,u){return function f(_){if(_===Function)return o;const C=2&t.flags?_n(t.index,n):n;0==(32&n[2])&&pc(C);let M=Df(n,0,o,_),U=f.__ngNextListenerFn__;for(;U;)M=Df(n,0,U,_)&&M,U=U.__ngNextListenerFn__;return u&&!1===M&&(_.preventDefault(),_.returnValue=!1),M}}function Xy(t=1){return function(t){return(ar.lFrame.contextLView=function(t,n){for(;t>0;)n=n[15],t--;return n}(t,ar.lFrame.contextLView))[8]}(t)}function av(t,n){let i=null;const o=function(t){const n=t.attrs;if(null!=n){const i=n.indexOf(5);if(0==(1&i))return n[i+1]}return null}(t);for(let u=0;u<n.length;u++){const f=n[u];if("*"!==f){if(null===o?Uh(t,f,!0):uc(o,f))return u}else i=u}return i}function Jy(t){const n=ln()[16][6];if(!n.projection){const o=n.projection=Lo(t?t.length:1,null),u=o.slice();let f=n.child;for(;null!==f;){const _=t?av(f,t):0;null!==_&&(u[_]?u[_].projectionNext=f:o[_]=f,u[_]=f),f=f.next}}}function Cu(t,n=0,i){const o=ln(),u=Ir(),f=Ju(u,20+t,16,null,i||null);null===f.projection&&(f.projection=n),qo(),64!=(64&f.flags)&&function(t,n,i){Lc(n[11],0,n,i,jp(t,i,n),Lh(i.parent||n[6],i,n))}(u,o,f)}function Ym(t,n,i){return qm(t,"",n,"",i),Ym}function qm(t,n,i,o,u){const f=ln(),_=od(f,n,i,o);return _!==Mr&&Ra(Ir(),q(),f,t,_,f[11],u,!1),qm}function lv(t,n,i,o,u){const f=t[i+1],_=null===n;let C=o?xl(f):Rl(f),M=!1;for(;0!==C&&(!1===M||_);){const ne=t[C+1];O0(t[C],n)&&(M=!0,t[C+1]=o?Ku(ne):$f(ne)),C=o?xl(ne):Rl(ne)}M&&(t[i+1]=o?$f(f):Ku(f))}function O0(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&Ja(t,n)>=0}function a(t,n){return function(t,n,i,o){const u=ln(),f=Ir(),_=function(t){const n=ar.lFrame,i=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,i}(2);f.firstUpdatePass&&function(t,n,i,o){const u=t.data;if(null===u[i+1]){const f=u[N()],_=function(t,n){return n>=t.expandoStartIndex}(t,i);(function(t,n){return 0!=(t.flags&(n?16:32))})(f,o)&&null===n&&!_&&(n=!1),n=function(t,n,i,o){const u=function(t){const n=ar.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let f=o?n.residualClasses:n.residualStyles;if(null===u)0===(o?n.classBindings:n.styleBindings)&&(i=Ai(i=sr(null,t,n,i,o),n.attrs,o),f=null);else{const _=n.directiveStylingLast;if(-1===_||t[_]!==u)if(i=sr(u,t,n,i,o),null===f){let M=function(t,n,i){const o=i?n.classBindings:n.styleBindings;if(0!==Rl(o))return t[xl(o)]}(t,n,o);void 0!==M&&Array.isArray(M)&&(M=sr(null,t,n,M[1],o),M=Ai(M,n.attrs,o),function(t,n,i,o){t[xl(i?n.classBindings:n.styleBindings)]=o}(t,n,o,M))}else f=function(t,n,i){let o;const u=n.directiveEnd;for(let f=1+n.directiveStylingLast;f<u;f++)o=Ai(o,t[f].hostAttrs,i);return Ai(o,n.attrs,i)}(t,n,o)}return void 0!==f&&(o?n.residualClasses=f:n.residualStyles=f),i}(u,f,n,o),function(t,n,i,o,u,f){let _=f?n.classBindings:n.styleBindings,C=xl(_),M=Rl(_);t[o]=i;let ne,U=!1;if(Array.isArray(i)){const Re=i;ne=Re[1],(null===ne||Ja(Re,ne)>0)&&(U=!0)}else ne=i;if(u)if(0!==M){const Le=xl(t[C+1]);t[o+1]=Ld(Le,C),0!==Le&&(t[Le+1]=io(t[Le+1],o)),t[C+1]=function(t,n){return 131071&t|n<<17}(t[C+1],o)}else t[o+1]=Ld(C,0),0!==C&&(t[C+1]=io(t[C+1],o)),C=o;else t[o+1]=Ld(M,0),0===C?C=o:t[M+1]=io(t[M+1],o),M=o;U&&(t[o+1]=$f(t[o+1])),lv(t,ne,o,!0),lv(t,ne,o,!1),function(t,n,i,o,u){const f=u?t.residualClasses:t.residualStyles;null!=f&&"string"==typeof n&&Ja(f,n)>=0&&(i[o+1]=Ku(i[o+1]))}(n,ne,t,o,f),_=Ld(C,M),f?n.classBindings=_:n.styleBindings=_}(u,f,n,i,_,o)}}(f,t,_,o),n!==Mr&&ta(u,_,n)&&function(t,n,i,o,u,f,_,C){if(!(3&n.type))return;const M=t.data,U=M[C+1];So(function(t){return 1==(1&t)}(U)?Gi(M,n,i,u,Rl(U),_):void 0)||(So(f)||function(t){return 2==(2&t)}(U)&&(f=Gi(M,null,i,u,C,_)),function(t,n,i,o,u){const f=W(t);if(n)u?f?t.addClass(i,o):i.classList.add(o):f?t.removeClass(i,o):i.classList.remove(o);else{let _=-1===o.indexOf("-")?void 0:rl.DashCase;if(null==u)f?t.removeStyle(i,o,_):i.style.removeProperty(o);else{const C="string"==typeof u&&u.endsWith("!important");C&&(u=u.slice(0,-10),_|=rl.Important),f?t.setStyle(i,o,u,_):i.style.setProperty(o,u,C?"important":"")}}}(o,_,G(N(),i),u,f))}(f,f.data[N()],u,u[11],t,u[_+1]=function(t,n){return null==t||("string"==typeof n?t+=n:"object"==typeof t&&(t=L(vl(t)))),t}(n,i),o,_)}(t,n,null,!0),a}function sr(t,n,i,o,u){let f=null;const _=i.directiveEnd;let C=i.directiveStylingLast;for(-1===C?C=i.directiveStart:C++;C<_&&(f=n[C],o=Ai(o,f.hostAttrs,u),f!==t);)C++;return null!==t&&(i.directiveStylingLast=C),o}function Ai(t,n,i){const o=i?1:2;let u=-1;if(null!==n)for(let f=0;f<n.length;f++){const _=n[f];"number"==typeof _?u=_:u===o&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ro(t,_,!!i||n[++f]))}return void 0===t?null:t}function Gi(t,n,i,o,u,f){const _=null===n;let C;for(;u>0;){const M=t[u],U=Array.isArray(M),ne=U?M[1]:M,Re=null===ne;let Le=i[u+1];Le===Mr&&(Le=Re?Kn:void 0);let ot=Re?Bo(Le,o):ne===o?Le:void 0;if(U&&!So(ot)&&(ot=Bo(M,o)),So(ot)&&(C=ot,_))return C;const yt=t[u+1];u=_?xl(yt):Rl(yt)}if(null!==n){let M=f?n.residualClasses:n.residualStyles;null!=M&&(C=Bo(M,o))}return C}function So(t){return void 0!==t}function F0(t,n=""){const i=ln(),o=Ir(),u=t+20,f=o.firstCreatePass?Ju(o,u,1,n,null):o.data[u],_=i[u]=function(t,n){return W(t)?t.createText(n):t.createTextNode(n)}(i[11],n);Od(o,i,_,f),Ps(f,!1)}function fv(t){return h_("",t,""),fv}function h_(t,n,i){const o=ln(),u=od(o,t,n,i);return u!==Mr&&Pl(o,N(),u),h_}function pv(t,n,i){const o=ln();return ta(o,gs(),n)&&Ra(Ir(),q(),o,t,n,o[11],i,!0),pv}const Sp=void 0;var oC=["en",[["a","p"],["AM","PM"],Sp],[["AM","PM"],Sp,Sp],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Sp,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Sp,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Sp,"{1} 'at' {0}",Sp],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const n=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===i?1:5}];let $g={};function gv(t){const n=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let i=nE(n);if(i)return i;const o=n.split("-")[0];if(i=nE(o),i)return i;if("en"===o)return oC;throw new Error(`Missing locale data for the locale "${t}".`)}function tE(t){return gv(t)[Br.PluralCase]}function nE(t){return t in $g||($g[t]=En.ng&&En.ng.common&&En.ng.common.locales&&En.ng.common.locales[t]),$g[t]}var Br=(()=>((Br=Br||{})[Br.LocaleId=0]="LocaleId",Br[Br.DayPeriodsFormat=1]="DayPeriodsFormat",Br[Br.DayPeriodsStandalone=2]="DayPeriodsStandalone",Br[Br.DaysFormat=3]="DaysFormat",Br[Br.DaysStandalone=4]="DaysStandalone",Br[Br.MonthsFormat=5]="MonthsFormat",Br[Br.MonthsStandalone=6]="MonthsStandalone",Br[Br.Eras=7]="Eras",Br[Br.FirstDayOfWeek=8]="FirstDayOfWeek",Br[Br.WeekendRange=9]="WeekendRange",Br[Br.DateFormat=10]="DateFormat",Br[Br.TimeFormat=11]="TimeFormat",Br[Br.DateTimeFormat=12]="DateTimeFormat",Br[Br.NumberSymbols=13]="NumberSymbols",Br[Br.NumberFormats=14]="NumberFormats",Br[Br.CurrencyCode=15]="CurrencyCode",Br[Br.CurrencySymbol=16]="CurrencySymbol",Br[Br.CurrencyName=17]="CurrencyName",Br[Br.Currencies=18]="Currencies",Br[Br.Directionality=19]="Directionality",Br[Br.PluralCase=20]="PluralCase",Br[Br.ExtraData=21]="ExtraData",Br))();const f_="en-US";let rE=f_;function mv(t){Ve(t,"Expected localeId to be defined"),"string"==typeof t&&(rE=t.toLowerCase().replace(/_/g,"-"))}function vv(t,n,i,o,u){if(t=_e(t),Array.isArray(t))for(let f=0;f<t.length;f++)vv(t[f],n,i,o,u);else{const f=Ir(),_=ln();let C=jc(t)?t:_e(t.provide),M=lf(t);const U=ki(),ne=1048575&U.providerIndexes,Re=U.directiveStart,Le=U.providerIndexes>>20;if(jc(t)||!t.multi){const ot=new Hn(M,u,wp),yt=bv(C,n,u?ne:ne+Le,Re);-1===yt?($s(ui(U,_),f,C),Ev(f,t,n.length),n.push(C),U.directiveStart++,U.directiveEnd++,u&&(U.providerIndexes+=1048576),i.push(ot),_.push(ot)):(i[yt]=ot,_[yt]=ot)}else{const ot=bv(C,n,ne+Le,Re),yt=bv(C,n,ne,ne+Le),Gt=ot>=0&&i[ot],Rt=yt>=0&&i[yt];if(u&&!Rt||!u&&!Gt){$s(ui(U,_),f,C);const Tn=function(t,n,i,o,u){const f=new Hn(t,i,wp);return f.multi=[],f.index=n,f.componentProviders=0,SE(f,u,o&&!i),f}(u?rw:nw,i.length,u,o,M);!u&&Rt&&(i[yt].providerFactory=Tn),Ev(f,t,n.length,0),n.push(C),U.directiveStart++,U.directiveEnd++,u&&(U.providerIndexes+=1048576),i.push(Tn),_.push(Tn)}else Ev(f,t,ot>-1?ot:yt,SE(i[u?yt:ot],M,!u&&o));!u&&o&&Rt&&i[yt].componentProviders++}}}function Ev(t,n,i,o){const u=jc(n);if(u||function(t){return!!t.useClass}(n)){const _=(n.useClass||n).prototype.ngOnDestroy;if(_){const C=t.destroyHooks||(t.destroyHooks=[]);if(!u&&n.multi){const M=C.indexOf(i);-1===M?C.push(i,[o,_]):C[M+1].push(o,_)}else C.push(i,_)}}}function SE(t,n,i){return i&&t.componentProviders++,t.multi.push(n)-1}function bv(t,n,i,o){for(let u=i;u<o;u++)if(n[u]===t)return u;return-1}function nw(t,n,i,o){return Iv(this.multi,[])}function rw(t,n,i,o){const u=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,C=j(i,i[1],this.providerFactory.index,o);f=C.slice(0,_),Iv(u,f);for(let M=_;M<C.length;M++)f.push(C[M])}else f=[],Iv(u,f);return f}function Iv(t,n){for(let i=0;i<t.length;i++)n.push((0,t[i])());return n}function AE(t,n=[]){return i=>{i.providersResolver=(o,u)=>function(t,n,i){const o=Ir();if(o.firstCreatePass){const u=Gn(t);vv(i,o.data,o.blueprint,u,!0),vv(n,o.data,o.blueprint,u,!1)}}(o,u?u(t):t,n)}}class xE{}const ME="ngComponent";class ow{resolveComponentFactory(n){throw function(t){const n=Error(`No component factory found for ${L(t)}. Did you add it to @NgModule.entryComponents?`);return n[ME]=t,n}(n)}}let jg=(()=>{class t{}return t.NULL=new ow,t})();function __(...t){}function Hg(t,n){return new dd($(t,n))}const cw=function(){return Hg(ki(),ln())};let dd=(()=>{class t{constructor(i){this.nativeElement=i}}return t.__NG_ELEMENT_ID__=cw,t})();function PE(t){return t instanceof dd?t.nativeElement:t}class v_{}let uw=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>hw(),t})();const hw=function(){const t=ln(),i=_n(ki().index,t);return function(t){return t[11]}(Pt(i)?i:t)};let wv=(()=>{class t{}return t.\u0275prov=Mt({token:t,providedIn:"root",factory:()=>null}),t})();class OE{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const Tv=new OE("12.2.16");class NE{constructor(){}supports(n){return Ep(n)}create(n){return new mw(n)}}const gw=(t,n)=>n;class mw{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||gw}forEachItem(n){let i;for(i=this._itHead;null!==i;i=i._next)n(i)}forEachOperation(n){let i=this._itHead,o=this._removalsHead,u=0,f=null;for(;i||o;){const _=!o||i&&i.currentIndex<FE(o,u,f)?i:o,C=FE(_,u,f),M=_.currentIndex;if(_===o)u--,o=o._nextRemoved;else if(i=i._next,null==_.previousIndex)u++;else{f||(f=[]);const U=C-u,ne=M-u;if(U!=ne){for(let Le=0;Le<U;Le++){const ot=Le<f.length?f[Le]:f[Le]=0,yt=ot+Le;ne<=yt&&yt<U&&(f[Le]=ot+1)}f[_.previousIndex]=ne-U}}C!==M&&n(_,C,M)}}forEachPreviousItem(n){let i;for(i=this._previousItHead;null!==i;i=i._nextPrevious)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachMovedItem(n){let i;for(i=this._movesHead;null!==i;i=i._nextMoved)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}forEachIdentityChange(n){let i;for(i=this._identityChangesHead;null!==i;i=i._nextIdentityChange)n(i)}diff(n){if(null==n&&(n=[]),!Ep(n))throw new Error(`Error trying to diff '${L(n)}'. Only arrays and iterables are allowed`);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let u,f,_,i=this._itHead,o=!1;if(Array.isArray(n)){this.length=n.length;for(let C=0;C<this.length;C++)f=n[C],_=this._trackByFn(C,f),null!==i&&Object.is(i.trackById,_)?(o&&(i=this._verifyReinsertion(i,f,_,C)),Object.is(i.item,f)||this._addIdentityChange(i,f)):(i=this._mismatch(i,f,_,C),o=!0),i=i._next}else u=0,function(t,n){if(Array.isArray(t))for(let i=0;i<t.length;i++)n(t[i]);else{const i=t[kl()]();let o;for(;!(o=i.next()).done;)n(o.value)}}(n,C=>{_=this._trackByFn(u,C),null!==i&&Object.is(i.trackById,_)?(o&&(i=this._verifyReinsertion(i,C,_,u)),Object.is(i.item,C)||this._addIdentityChange(i,C)):(i=this._mismatch(i,C,_,u),o=!0),i=i._next,u++}),this.length=u;return this._truncate(i),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,i,o,u){let f;return null===n?f=this._itTail:(f=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._reinsertAfter(n,f,u)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(o,u))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._moveAfter(n,f,u)):n=this._addAfter(new yw(i,o),f,u),n}_verifyReinsertion(n,i,o,u){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==f?n=this._reinsertAfter(f,n._prev,u):n.currentIndex!=u&&(n.currentIndex=u,this._addToMoves(n,u)),n}_truncate(n){for(;null!==n;){const i=n._next;this._addToRemovals(this._unlink(n)),n=i}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,i,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const u=n._prevRemoved,f=n._nextRemoved;return null===u?this._removalsHead=f:u._nextRemoved=f,null===f?this._removalsTail=u:f._prevRemoved=u,this._insertAfter(n,i,o),this._addToMoves(n,o),n}_moveAfter(n,i,o){return this._unlink(n),this._insertAfter(n,i,o),this._addToMoves(n,o),n}_addAfter(n,i,o){return this._insertAfter(n,i,o),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,i,o){const u=null===i?this._itHead:i._next;return n._next=u,n._prev=i,null===u?this._itTail=n:u._prev=n,null===i?this._itHead=n:i._next=n,null===this._linkedRecords&&(this._linkedRecords=new kE),this._linkedRecords.put(n),n.currentIndex=o,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const i=n._prev,o=n._next;return null===i?this._itHead=o:i._next=o,null===o?this._itTail=i:o._prev=i,n}_addToMoves(n,i){return n.previousIndex===i||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new kE),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,i){return n.item=i,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class yw{constructor(n,i){this.item=n,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class _w{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,i){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===i||i<=o.currentIndex)&&Object.is(o.trackById,n))return o;return null}remove(n){const i=n._prevDup,o=n._nextDup;return null===i?this._head=o:i._nextDup=o,null===o?this._tail=i:o._prevDup=i,null===this._head}}class kE{constructor(){this.map=new Map}put(n){const i=n.trackById;let o=this.map.get(i);o||(o=new _w,this.map.set(i,o)),o.add(n)}get(n,i){const u=this.map.get(n);return u?u.get(n,i):null}remove(n){const i=n.trackById;return this.map.get(i).remove(n)&&this.map.delete(i),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function FE(t,n,i){const o=t.previousIndex;if(null===o)return o;let u=0;return i&&o<i.length&&(u=i[o]),o+n+u}class LE{constructor(){}supports(n){return n instanceof Map||bp(n)}create(){return new vw}}class vw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let i;for(i=this._mapHead;null!==i;i=i._next)n(i)}forEachPreviousItem(n){let i;for(i=this._previousMapHead;null!==i;i=i._nextPrevious)n(i)}forEachChangedItem(n){let i;for(i=this._changesHead;null!==i;i=i._nextChanged)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}diff(n){if(n){if(!(n instanceof Map||bp(n)))throw new Error(`Error trying to diff '${L(n)}'. Only maps and objects are allowed`)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(n,(o,u)=>{if(i&&i.key===u)this._maybeAddToChanges(i,o),this._appendAfter=i,i=i._next;else{const f=this._getOrCreateRecordForKey(u,o);i=this._insertBeforeOrAppend(i,f)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let o=i;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,i){if(n){const o=n._prev;return i._next=n,i._prev=o,n._prev=i,o&&(o._next=i),n===this._mapHead&&(this._mapHead=i),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(n,i){if(this._records.has(n)){const u=this._records.get(n);this._maybeAddToChanges(u,i);const f=u._prev,_=u._next;return f&&(f._next=_),_&&(_._prev=f),u._next=null,u._prev=null,u}const o=new Ew(n);return this._records.set(n,o),o.currentValue=i,this._addToAdditions(o),o}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,i){Object.is(i,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=i,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,i){n instanceof Map?n.forEach(i):Object.keys(n).forEach(o=>i(n[o],o))}}class Ew{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function VE(){return new E_([new NE])}let E_=(()=>{class t{constructor(i){this.factories=i}static create(i,o){if(null!=o){const u=o.factories.slice();i=i.concat(u)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||VE()),deps:[[t,new Do,new Ha]]}}find(i){const o=this.factories.find(u=>u.supports(i));if(null!=o)return o;throw new Error(`Cannot find a differ supporting object '${i}' of type '${function(t){return t.name||typeof t}(i)}'`)}}return t.\u0275prov=Mt({token:t,providedIn:"root",factory:VE}),t})();function BE(){return new b_([new LE])}let b_=(()=>{class t{constructor(i){this.factories=i}static create(i,o){if(o){const u=o.factories.slice();i=i.concat(u)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||BE()),deps:[[t,new Do,new Ha]]}}find(i){const o=this.factories.find(u=>u.supports(i));if(o)return o;throw new Error(`Cannot find a differ supporting object '${i}'`)}}return t.\u0275prov=Mt({token:t,providedIn:"root",factory:BE}),t})();function I_(t,n,i,o,u=!1){for(;null!==i;){const f=n[i.index];if(null!==f&&o.push(Ke(f)),xt(f))for(let C=10;C<f.length;C++){const M=f[C],U=M[1].firstChild;null!==U&&I_(M[1],M,U,o)}const _=i.type;if(8&_)I_(t,n,i.child,o);else if(32&_){const C=xd(i,n);let M;for(;M=C();)o.push(M)}else if(16&_){const C=Sl(n,i);if(Array.isArray(C))o.push(...C);else{const M=Vi(n[16]);I_(M[1],M,C,o,!0)}}i=u?i.projectionNext:i.next}return o}class ty{constructor(n,i){this._lView=n,this._cdRefInjectingView=i,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,i=n[1];return I_(i,n,i.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(xt(n)){const i=n[8],o=i?i.indexOf(this):-1;o>-1&&(Nh(n,o),ws(i,o))}this._attachedToViewContainer=!1}kh(this._lView[1],this._lView)}onDestroy(n){Xh(this._lView[1],this._lView,null,n)}markForCheck(){pc(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){yu(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,n,i){lo(!0);try{yu(t,n,i)}finally{lo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var n;this._appRef=null,cc(this._lView[1],n=this._lView,n[11],2,null,null)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=n}}class Iw extends ty{constructor(n){super(n),this._view=n}detectChanges(){yg(this._view)}checkNoChanges(){!function(t){lo(!0);try{yg(t)}finally{lo(!1)}}(this._view)}get context(){return null}}const ww=function(t){return function(t,n,i){if(Pn(t)&&!i){const o=_n(t.index,n);return new ty(o,o)}return 47&t.type?new ty(n[16],n):null}(ki(),ln(),16==(16&t))};let Tw=(()=>{class t{}return t.__NG_ELEMENT_ID__=ww,t})();const Aw=[new LE],Rw=new E_([new NE]),Mw=new b_(Aw),Ow=function(){return C_(ki(),ln())};let ny=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ow,t})();const Nw=ny,kw=class extends Nw{constructor(n,i,o){super(),this._declarationLView=n,this._declarationTContainer=i,this.elementRef=o}createEmbeddedView(n){const i=this._declarationTContainer.tViews,o=Xu(this._declarationLView,i,n,16,null,i.declTNode,null,null,null,null);o[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(o[19]=f.createEmbeddedView(i)),td(i,o,n),new ty(o)}};function C_(t,n){return 4&t.type?new kw(n,t,Hg(t,n)):null}class Ap{}class $E{}const Vw=function(){return HE(ki(),ln())};let w_=(()=>{class t{}return t.__NG_ELEMENT_ID__=Vw,t})();const $w=w_,UE=class extends $w{constructor(n,i,o){super(),this._lContainer=n,this._hostTNode=i,this._hostLView=o}get element(){return Hg(this._hostTNode,this._hostLView)}get injector(){return new ge(this._hostTNode,this._hostLView)}get parentInjector(){const n=ca(this._hostTNode,this._hostLView);if(Ec(n)){const i=yr(n,this._hostLView),o=Ea(n);return new ge(i[1].data[o+8],i)}return new ge(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const i=jE(this._lContainer);return null!==i&&i[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,i,o){const u=n.createEmbeddedView(i||{});return this.insert(u,o),u}createComponent(n,i,o,u,f){const _=o||this.parentInjector;if(!f&&null==n.ngModule&&_){const M=_.get(Ap,null);M&&(f=M)}const C=n.create(_,u,void 0,f);return this.insert(C.hostView,i),C}insert(n,i){const o=n._lView,u=o[1];if(xt(o[3])){const ne=this.indexOf(n);if(-1!==ne)this.detach(ne);else{const Re=o[3],Le=new UE(Re,Re[6],Re[3]);Le.detach(Le.indexOf(n))}}const f=this._adjustIndex(i),_=this._lContainer;!function(t,n,i,o){const u=10+o,f=i.length;o>0&&(i[u-1][4]=n),o<f-10?(n[4]=i[u],Fo(i,10+o,n)):(i.push(n),n[4]=null),n[3]=i;const _=n[17];null!==_&&i!==_&&function(t,n){const i=t[9];n[16]!==n[3][3][16]&&(t[2]=!0),null===i?t[9]=[n]:i.push(n)}(_,n);const C=n[19];null!==C&&C.insertView(t),n[2]|=128}(u,o,_,f);const C=Ga(f,_),M=o[11],U=Kl(M,_[7]);return null!==U&&function(t,n,i,o,u,f){o[0]=u,o[6]=n,cc(t,o,i,1,u,f)}(u,_[6],M,o,U,C),n.attachToViewContainerRef(),Fo(Dv(_),f,n),n}move(n,i){return this.insert(n,i)}indexOf(n){const i=jE(this._lContainer);return null!==i?i.indexOf(n):-1}remove(n){const i=this._adjustIndex(n,-1),o=Nh(this._lContainer,i);o&&(ws(Dv(this._lContainer),i),kh(o[1],o))}detach(n){const i=this._adjustIndex(n,-1),o=Nh(this._lContainer,i);return o&&null!=ws(Dv(this._lContainer),i)?new ty(o):null}_adjustIndex(n,i=0){return null==n?this.length+i:n}};function jE(t){return t[8]}function Dv(t){return t[8]||(t[8]=[])}function HE(t,n){let i;const o=n[t.index];if(xt(o))i=o;else{let u;if(8&t.type)u=Ke(o);else{const f=n[11];u=f.createComment("");const _=$(t,n);ql(f,Kl(f,_),u,function(t,n){return W(t)?t.nextSibling(n):n.nextSibling}(f,_),!1)}n[t.index]=i=tp(o,n,u,t),$c(n,i)}return new UE(i,t,n)}const Yg={};class cb extends jg{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const i=Vn(n);return new db(i,this.ngModule)}}function ub(t){const n=[];for(let i in t)t.hasOwnProperty(i)&&n.push({propName:t[i],templateName:i});return n}const FT=new Ui("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>kf});class db extends xE{constructor(n,i){super(),this.componentDef=n,this.ngModule=i,this.componentType=n.type,this.selector=n.selectors.map(Ya).join(","),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!i}get inputs(){return ub(this.componentDef.inputs)}get outputs(){return ub(this.componentDef.outputs)}create(n,i,o,u){const f=(u=u||this.ngModule)?function(t,n){return{get:(i,o,u)=>{const f=t.get(i,Yg,u);return f!==Yg||o===Yg?f:n.get(i,o,u)}}}(n,u.injector):n,_=f.get(v_,K),C=f.get(wv,null),M=_.createRenderer(null,this.componentDef),U=this.componentDef.selectors[0][0]||"div",ne=o?function(t,n,i){if(W(t))return t.selectRootElement(n,i===Ht.ShadowDom);let o="string"==typeof n?t.querySelector(n):n;return o.textContent="",o}(M,o,this.componentDef.encapsulation):sl(_.createRenderer(null,this.componentDef),U,function(t){const n=t.toLowerCase();return"svg"===n?"http://www.w3.org/2000/svg":"math"===n?"http://www.w3.org/1998/MathML/":null}(U)),Re=this.componentDef.onPush?576:528,Le=function(t,n){return{components:[],scheduler:t||kf,clean:vg,playerHandler:n||null,flags:0}}(),ot=qd(0,null,null,1,0,null,null,null,null,null),yt=Xu(null,ot,Le,Re,null,null,_,M,C,f);let Gt,Rt;vi(yt);try{const Tn=function(t,n,i,o,u,f){const _=i[1];i[20]=t;const M=Ju(_,20,2,"#host",null),U=M.mergedAttrs=n.hostAttrs;null!==U&&(sf(M,U,!0),null!==t&&(va(u,t,U),null!==M.classes&&Al(u,t,M.classes),null!==M.styles&&Bh(u,t,M.styles)));const ne=o.createRenderer(t,n),Re=Xu(i,Qh(n),null,n.onPush?64:16,i[20],M,o,ne,f||null,null);return _.firstCreatePass&&($s(ui(M,i),_,n.type),id(_,M),ym(M,i.length,1)),$c(i,Re),i[20]=Re}(ne,this.componentDef,yt,_,M);if(ne)if(o)va(M,ne,["ng-version",Tv.full]);else{const{attrs:sn,classes:Sr}=function(t){const n=[],i=[];let o=1,u=2;for(;o<t.length;){let f=t[o];if("string"==typeof f)2===u?""!==f&&n.push(f,t[++o]):8===u&&i.push(f);else{if(!za(u))break;u=f}o++}return{attrs:n,classes:i}}(this.componentDef.selectors[0]);sn&&va(M,ne,sn),Sr&&Sr.length>0&&Al(M,ne,Sr.join(" "))}if(Rt=ce(ot,20),void 0!==i){const sn=Rt.projection=[];for(let Sr=0;Sr<this.ngContentSelectors.length;Sr++){const Qr=i[Sr];sn.push(null!=Qr?Array.from(Qr):null)}}Gt=function(t,n,i,o,u){const f=i[1],_=function(t,n,i){const o=ki();t.firstCreatePass&&(i.providersResolver&&i.providersResolver(i),dg(t,o,n,ed(t,n,1,null),i));const u=j(n,t,o.directiveStart,o);Ls(u,n);const f=$(o,n);return f&&Ls(f,n),u}(f,i,n);if(o.components.push(_),t[8]=_,u&&u.forEach(M=>M(_,n)),n.contentQueries){const M=ki();n.contentQueries(1,_,M.directiveStart)}const C=ki();return!f.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(T(C.index),Xf(i[1],C,0,C.directiveStart,C.directiveEnd,n),ep(n,_)),_}(Tn,this.componentDef,yt,Le,[z]),td(ot,yt,null)}finally{_a()}return new BT(this.componentType,Gt,Hg(Rt,yt),yt,Rt)}}class BT extends class{}{constructor(n,i,o,u,f){super(),this.location=o,this._rootLView=u,this._tNode=f,this.instance=i,this.hostView=this.changeDetectorRef=new Iw(u),this.componentType=n}get injector(){return new ge(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}const qg=new Map;class jT extends Ap{constructor(n,i){super(),this._parent=i,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new cb(this);const o=br(n),u=n[se]||null;u&&mv(u),this._bootstrapComponents=Da(o.bootstrap),this._r3Injector=af(n,i,[{provide:Ap,useValue:this},{provide:jg,useValue:this.componentFactoryResolver}],L(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,i=us.THROW_IF_NOT_FOUND,o=Xt.Default){return n===us||n===Ap||n===Uc?this:this._r3Injector.get(n,i,o)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Bv extends $E{constructor(n){super(),this.moduleType=n,null!==br(n)&&function(t){const n=new Set;!function i(o){const u=br(o,!0),f=u.id;null!==f&&(function(t,n,i){if(n&&n!==i)throw new Error(`Duplicate module registered for ${t} - ${L(n)} vs ${L(n.name)}`)}(f,qg.get(f),o),qg.set(f,o));const _=Da(u.imports);for(const C of _)n.has(C)||(n.add(C),i(C))}(t)}(n)}create(n){return new jT(this.moduleType,n)}}function $v(t){return n=>{setTimeout(t,void 0,n)}}const hd=class extends y.xQ{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,i,o){var u,f,_;let C=n,M=i||(()=>null),U=o;if(n&&"object"==typeof n){const Re=n;C=null===(u=Re.next)||void 0===u?void 0:u.bind(Re),M=null===(f=Re.error)||void 0===f?void 0:f.bind(Re),U=null===(_=Re.complete)||void 0===_?void 0:_.bind(Re)}this.__isAsync&&(M=$v(M),C&&(C=$v(C)),U&&(U=$v(U)));const ne=super.subscribe({next:C,error:M,complete:U});return n instanceof A.w&&n.add(ne),ne}};function aD(){return this._results[kl()]()}class x_{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const i=kl(),o=x_.prototype;o[i]||(o[i]=aD)}get changes(){return this._changes||(this._changes=new hd)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,i){return this._results.reduce(n,i)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,i){const o=this;o.dirty=!1;const u=ks(n);(this._changesDetected=!function(t,n,i){if(t.length!==n.length)return!1;for(let o=0;o<t.length;o++){let u=t[o],f=n[o];if(i&&(u=i(u),f=i(f)),f!==u)return!1}return!0}(o._results,u,i))&&(o._results=u,o.length=u.length,o.last=u[this.length-1],o.first=u[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Uv{constructor(n){this.queryList=n,this.matches=null}clone(){return new Uv(this.queryList)}setDirty(){this.queryList.setDirty()}}class jv{constructor(n=[]){this.queries=n}createEmbeddedView(n){const i=n.queries;if(null!==i){const o=null!==n.contentQueries?n.contentQueries[0]:i.length,u=[];for(let f=0;f<o;f++){const _=i.getByIndex(f);u.push(this.queries[_.indexInDeclarationView].clone())}return new jv(u)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let i=0;i<this.queries.length;i++)null!==Sb(n,i).matches&&this.queries[i].setDirty()}}class vb{constructor(n,i,o=null){this.predicate=n,this.flags=i,this.read=o}}class Hv{constructor(n=[]){this.queries=n}elementStart(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(n,i)}elementEnd(n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(n)}embeddedTView(n){let i=null;for(let o=0;o<this.length;o++){const u=null!==i?i.length:0,f=this.getByIndex(o).embeddedTView(n,u);f&&(f.indexInDeclarationView=o,null!==i?i.push(f):i=[f])}return null!==i?new Hv(i):null}template(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].template(n,i)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Wv{constructor(n,i=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(n,i){this.isApplyingToNode(i)&&this.matchTNode(n,i)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,i){this.elementStart(n,i)}embeddedTView(n,i){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,i),new Wv(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const i=this._declarationNodeIndex;let o=n.parent;for(;null!==o&&8&o.type&&o.index!==i;)o=o.parent;return i===(null!==o?o.index:-1)}return this._appliesToNextNode}matchTNode(n,i){const o=this.metadata.predicate;if(Array.isArray(o))for(let u=0;u<o.length;u++){const f=o[u];this.matchTNodeWithReadOption(n,i,uD(i,f)),this.matchTNodeWithReadOption(n,i,S(i,n,f,!1,!1))}else o===ny?4&i.type&&this.matchTNodeWithReadOption(n,i,-1):this.matchTNodeWithReadOption(n,i,S(i,n,o,!1,!1))}matchTNodeWithReadOption(n,i,o){if(null!==o){const u=this.metadata.read;if(null!==u)if(u===dd||u===w_||u===ny&&4&i.type)this.addMatch(i.index,-2);else{const f=S(i,n,u,!1,!1);null!==f&&this.addMatch(i.index,f)}else this.addMatch(i.index,o)}}addMatch(n,i){null===this.matches?this.matches=[n,i]:this.matches.push(n,i)}}function uD(t,n){const i=t.localNames;if(null!==i)for(let o=0;o<i.length;o+=2)if(i[o]===n)return i[o+1];return null}function hD(t,n,i,o){return-1===i?function(t,n){return 11&t.type?Hg(t,n):4&t.type?C_(t,n):null}(n,t):-2===i?function(t,n,i){return i===dd?Hg(n,t):i===ny?C_(n,t):i===w_?HE(n,t):void 0}(t,n,o):j(t,t[1],i,n)}function Eb(t,n,i,o){const u=n[19].queries[o];if(null===u.matches){const f=t.data,_=i.matches,C=[];for(let M=0;M<_.length;M+=2){const U=_[M];C.push(U<0?null:hD(n,f[U],_[M+1],i.metadata.read))}u.matches=C}return u.matches}function Gv(t,n,i,o){const u=t.queries.getByIndex(i),f=u.matches;if(null!==f){const _=Eb(t,n,u,i);for(let C=0;C<f.length;C+=2){const M=f[C];if(M>0)o.push(_[C/2]);else{const U=f[C+1],ne=n[-M];for(let Re=10;Re<ne.length;Re++){const Le=ne[Re];Le[17]===Le[3]&&Gv(Le[1],Le,U,o)}if(null!==ne[9]){const Re=ne[9];for(let Le=0;Le<Re.length;Le++){const ot=Re[Le];Gv(ot[1],ot,U,o)}}}}}return o}function bb(t){const n=ln(),i=Ir(),o=Eo();qs(o+1);const u=Sb(i,o);if(t.dirty&&er(n)===(2==(2&u.metadata.flags))){if(null===u.matches)t.reset([]);else{const f=u.crossesNgTemplate?Gv(i,n,o,[]):Eb(i,n,u,o);t.reset(f,PE),t.notifyOnChanges()}return!0}return!1}function Ib(t,n,i){const o=Ir();o.firstCreatePass&&(Db(o,new vb(t,n,i),-1),2==(2&n)&&(o.staticViewQueries=!0)),Tb(o,ln(),n)}function Cb(t,n,i,o){const u=Ir();if(u.firstCreatePass){const f=ki();Db(u,new vb(n,i,o),f.index),function(t,n){const i=t.contentQueries||(t.contentQueries=[]);n!==(i.length?i[i.length-1]:-1)&&i.push(t.queries.length-1,n)}(u,t),2==(2&i)&&(u.staticContentQueries=!0)}Tb(u,ln(),i)}function wb(){return t=ln(),n=Eo(),t[19].queries[n].queryList;var t,n}function Tb(t,n,i){const o=new x_(4==(4&i));Xh(t,n,o,o.destroy),null===n[19]&&(n[19]=new jv),n[19].queries.push(new Uv(o))}function Db(t,n,i){null===t.queries&&(t.queries=new Hv),t.queries.track(new Wv(n,i))}function Sb(t,n){return t.queries.getByIndex(n)}const ND=Io("Output",t=>({bindingPropertyName:t})),kD=Io("HostListener",(t,n)=>({eventName:t,args:n})),Qv=new Ui("Application Initializer");let Zg=(()=>{class t{constructor(i){this.appInits=i,this.resolve=__,this.reject=__,this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,u)=>{this.resolve=o,this.reject=u})}runInitializers(){if(this.initialized)return;const i=[],o=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let u=0;u<this.appInits.length;u++){const f=this.appInits[u]();if(Bg(f))i.push(f);else if(Tp(f)){const _=new Promise((C,M)=>{f.subscribe({complete:C,error:M})});i.push(_)}}Promise.all(i).then(()=>{o()}).catch(u=>{this.reject(u)}),0===i.length&&o(),this.initialized=!0}}return t.\u0275fac=function(i){return new(i||t)(Ei(Qv,8))},t.\u0275prov=Mt({token:t,factory:t.\u0275fac}),t})();const Gb=new Ui("AppId"),GD={provide:Gb,useFactory:function(){return`${Xv()}${Xv()}${Xv()}`},deps:[]};function Xv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const zb=new Ui("Platform Initializer"),Yb=new Ui("Platform ID"),qb=new Ui("appBootstrapListener");let Kb=(()=>{class t{log(i){console.log(i)}warn(i){console.warn(i)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=Mt({token:t,factory:t.\u0275fac}),t})();const P_=new Ui("LocaleId"),Zb=new Ui("DefaultCurrencyCode");class YD{constructor(n,i){this.ngModuleFactory=n,this.componentFactories=i}}const Jv=function(t){return new Bv(t)},qD=Jv,KD=function(t){return Promise.resolve(Jv(t))},Qb=function(t){const n=Jv(t),o=Da(br(t).declarations).reduce((u,f)=>{const _=Vn(f);return _&&u.push(new db(_)),u},[]);return new YD(n,o)},ZD=Qb,QD=function(t){return Promise.resolve(Qb(t))};let py=(()=>{class t{constructor(){this.compileModuleSync=qD,this.compileModuleAsync=KD,this.compileModuleAndAllComponentsSync=ZD,this.compileModuleAndAllComponentsAsync=QD}clearCache(){}clearCacheFor(i){}getModuleId(i){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=Mt({token:t,factory:t.\u0275fac}),t})();const eS=(()=>Promise.resolve(0))();function e0(t){"undefined"==typeof Zone?eS.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class _c{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new hd(!1),this.onMicrotaskEmpty=new hd(!1),this.onStable=new hd(!1),this.onError=new hd(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const u=this;u._nesting=0,u._outer=u._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!o&&i,u.shouldCoalesceRunChangeDetection=o,u.lastRequestAnimationFrameId=-1,u.nativeRequestAnimationFrame=function(){let t=En.requestAnimationFrame,n=En.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&n){const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i);const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function(t){const n=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(En,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,n0(t),t.isCheckStableRunning=!0,t0(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),n0(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,o,u,f,_,C)=>{try{return Xb(t),i.invokeTask(u,f,_,C)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||t.shouldCoalesceRunChangeDetection)&&n(),Jb(t)}},onInvoke:(i,o,u,f,_,C,M)=>{try{return Xb(t),i.invoke(u,f,_,C,M)}finally{t.shouldCoalesceRunChangeDetection&&n(),Jb(t)}},onHasTask:(i,o,u,f)=>{i.hasTask(u,f),o===u&&("microTask"==f.change?(t._hasPendingMicrotasks=f.microTask,n0(t),t0(t)):"macroTask"==f.change&&(t.hasPendingMacrotasks=f.macroTask))},onHandleError:(i,o,u,f)=>(i.handleError(u,f),t.runOutsideAngular(()=>t.onError.emit(f)),!1)})}(u)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!_c.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(_c.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,i,o){return this._inner.run(n,i,o)}runTask(n,i,o,u){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+u,n,nS,__,__);try{return f.runTask(_,i,o)}finally{f.cancelTask(_)}}runGuarded(n,i,o){return this._inner.runGuarded(n,i,o)}runOutsideAngular(n){return this._outer.run(n)}}const nS={};function t0(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function n0(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Xb(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Jb(t){t._nesting--,t0(t)}class sS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new hd,this.onMicrotaskEmpty=new hd,this.onStable=new hd,this.onError=new hd}run(n,i,o){return n.apply(i,o)}runGuarded(n,i,o){return n.apply(i,o)}runOutsideAngular(n){return n()}runTask(n,i,o,u){return n.apply(i,o)}}let eI=(()=>{class t{constructor(i){this._ngZone=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_c.assertNotInAngularZone(),e0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())e0(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(i)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,o,u){let f=-1;o&&o>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),i(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:i,timeoutId:f,updateCb:u})}whenStable(i,o,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,o,u),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(i,o,u){return[]}}return t.\u0275fac=function(i){return new(i||t)(Ei(_c))},t.\u0275prov=Mt({token:t,factory:t.\u0275fac}),t})(),tI=(()=>{class t{constructor(){this._applications=new Map,r0.addToWindow(this)}registerApplication(i,o){this._applications.set(i,o)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,o=!0){return r0.findTestabilityInTree(this,i,o)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=Mt({token:t,factory:t.\u0275fac}),t})();class oS{addToWindow(n){}findTestabilityInTree(n,i,o){return null}}function aS(t){r0=t}let r0=new oS,nI=!0,rI=!1;function s0(){return rI=!0,nI}function lS(){if(rI)throw new Error("Cannot enable prod mode after platform setup.");nI=!1}let Du;const iI=new Ui("AllowMultipleToken");class gS{constructor(n,i){this.name=n,this.token=i}}function sI(t,n,i=[]){const o=`Platform: ${n}`,u=new Ui(o);return(f=[])=>{let _=oI();if(!_||_.injector.get(iI,!1))if(t)t(i.concat(f).concat({provide:u,useValue:!0}));else{const C=i.concat(f).concat({provide:u,useValue:!0},{provide:sd,useValue:"platform"});!function(t){if(Du&&!Du.destroyed&&!Du.injector.get(iI,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Du=t.get(aI);const n=t.get(zb,null);n&&n.forEach(i=>i())}(us.create({providers:C,name:o}))}return function(t){const n=oI();if(!n)throw new Error("No platform exists!");if(!n.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return n}(u)}}function oI(){return Du&&!Du.destroyed?Du:null}let aI=(()=>{class t{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,o){const C=function(t,n){let i;return i="noop"===t?new sS:("zone.js"===t?void 0:t)||new _c({enableLongStackTrace:s0(),shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),i}(o?o.ngZone:void 0,{ngZoneEventCoalescing:o&&o.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:o&&o.ngZoneRunCoalescing||!1}),M=[{provide:_c,useValue:C}];return C.run(()=>{const U=us.create({providers:M,parent:this.injector,name:i.moduleType.name}),ne=i.create(U),Re=ne.injector.get(js,null);if(!Re)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return C.runOutsideAngular(()=>{const Le=C.onError.subscribe({next:ot=>{Re.handleError(ot)}});ne.onDestroy(()=>{o0(this._modules,ne),Le.unsubscribe()})}),function(t,n,i){try{const o=i();return Bg(o)?o.catch(u=>{throw n.runOutsideAngular(()=>t.handleError(u)),u}):o}catch(o){throw n.runOutsideAngular(()=>t.handleError(o)),o}}(Re,C,()=>{const Le=ne.injector.get(Zg);return Le.runInitializers(),Le.donePromise.then(()=>(mv(ne.injector.get(P_,f_)||f_),this._moduleDoBootstrap(ne),ne))})})}bootstrapModule(i,o=[]){const u=lI({},o);return function(t,n,i){const o=new Bv(i);return Promise.resolve(o)}(0,0,i).then(f=>this.bootstrapModuleFactory(f,u))}_moduleDoBootstrap(i){const o=i.injector.get(gy);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(u=>o.bootstrap(u));else{if(!i.instance.ngDoBootstrap)throw new Error(`The module ${L(i.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);i.instance.ngDoBootstrap(o)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(i){return new(i||t)(Ei(us))},t.\u0275prov=Mt({token:t,factory:t.\u0275fac}),t})();function lI(t,n){return Array.isArray(n)?n.reduce(lI,t):Object.assign(Object.assign({},t),n)}let gy=(()=>{class t{constructor(i,o,u,f,_){this._zone=i,this._injector=o,this._exceptionHandler=u,this._componentFactoryResolver=f,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const C=new te.y(U=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{U.next(this._stable),U.complete()})}),M=new te.y(U=>{let ne;this._zone.runOutsideAngular(()=>{ne=this._zone.onStable.subscribe(()=>{_c.assertNotInAngularZone(),e0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,U.next(!0))})})});const Re=this._zone.onUnstable.subscribe(()=>{_c.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{U.next(!1)}))});return()=>{ne.unsubscribe(),Re.unsubscribe()}});this.isStable=(0,ke.T)(C,M.pipe((0,oe.B)()))}bootstrap(i,o){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let u;u=i instanceof xE?i:this._componentFactoryResolver.resolveComponentFactory(i),this.componentTypes.push(u.componentType);const f=function(t){return t.isBoundToModule}(u)?void 0:this._injector.get(Ap),C=u.create(us.NULL,[],o||u.selector,f),M=C.location.nativeElement,U=C.injector.get(eI,null),ne=U&&C.injector.get(tI);return U&&ne&&ne.registerApplication(M,U),C.onDestroy(()=>{this.detachView(C.hostView),o0(this.components,C),ne&&ne.unregisterApplication(M)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(i))}finally{this._runningTick=!1}}attachView(i){const o=i;this._views.push(o),o.attachToAppRef(this)}detachView(i){const o=i;o0(this._views,o),o.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i),this._injector.get(qb,[]).concat(this._bootstrapListeners).forEach(u=>u(i))}ngOnDestroy(){this._views.slice().forEach(i=>i.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(i){return new(i||t)(Ei(_c),Ei(us),Ei(js),Ei(jg),Ei(Zg))},t.\u0275prov=Mt({token:t,factory:t.\u0275fac}),t})();function o0(t,n){const i=t.indexOf(n);i>-1&&t.splice(i,1)}class bS{}class CS{}const wS={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let TS=(()=>{class t{constructor(i,o){this._compiler=i,this._config=o||wS}load(i){return this.loadAndCompile(i)}loadAndCompile(i){let[o,u]=i.split("#");return void 0===u&&(u="default"),F(8255)(o).then(f=>f[u]).then(f=>hI(f,o,u)).then(f=>this._compiler.compileModuleAsync(f))}loadFactory(i){let[o,u]=i.split("#"),f="NgFactory";return void 0===u&&(u="default",f=""),F(8255)(this._config.factoryPathPrefix+o+this._config.factoryPathSuffix).then(_=>_[u+f]).then(_=>hI(_,o,u))}}return t.\u0275fac=function(i){return new(i||t)(Ei(py),Ei(CS,8))},t.\u0275prov=Mt({token:t,factory:t.\u0275fac}),t})();function hI(t,n,i){if(!t)throw new Error(`Cannot find '${i}' in '${n}'`);return t}const OS=function(t){return null},kS=sI(null,"core",[{provide:Yb,useValue:"unknown"},{provide:aI,deps:[us]},{provide:tI,deps:[]},{provide:Kb,deps:[]}]),$S=[{provide:gy,useClass:gy,deps:[_c,us,js,jg,Zg]},{provide:FT,deps:[_c],useFactory:function(t){let n=[];return t.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(i){n.push(i)}}},{provide:Zg,useClass:Zg,deps:[[new Ha,Qv]]},{provide:py,useClass:py,deps:[]},GD,{provide:E_,useFactory:function(){return Rw},deps:[]},{provide:b_,useFactory:function(){return Mw},deps:[]},{provide:P_,useFactory:function(t){return mv(t=t||"undefined"!=typeof $localize&&$localize.locale||f_),t},deps:[[new Ho(P_),new Ha,new Do]]},{provide:Zb,useValue:"USD"}];let jS=(()=>{class t{constructor(i){}}return t.\u0275fac=function(i){return new(i||t)(Ei(gy))},t.\u0275mod=$e({type:t}),t.\u0275inj=gn({providers:$S}),t})()},841:(en,it,F)=>{"use strict";F.d(it,{nm:()=>Tr});var y=F(2805),oe=(F(7716),F(127),F(2329),F(8239)),Q=F(8026),ye=F(3910),L=F(3854),Ce=F(5422);const re=new Map,he={activated:!1,tokenObservers:[]},_e={initialized:!1,enabled:!1};function le(_t){return re.get(_t)||he}function we(_t,Y){re.set(_t,Y)}function ht(){return _e}class gt{constructor(Y,H,ue,Te,Je){if(this.operation=Y,this.retryPolicy=H,this.getWaitDuration=ue,this.lowerBound=Te,this.upperBound=Je,this.pending=null,this.nextErrorWaitInterval=Te,Te>Je)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Y){var H=this;return(0,oe.Z)(function*(){H.stop();try{H.pending=new L.BH,yield(_t=H.getNextRun(Y),new Promise(Y=>{setTimeout(Y,_t)})),H.pending.resolve(),yield H.pending.promise,H.pending=new L.BH,yield H.operation(),H.pending.resolve(),yield H.pending.promise,H.process(!0).catch(()=>{})}catch(ue){H.retryPolicy(ue)?H.process(!1).catch(()=>{}):H.stop()}var _t})()}getNextRun(Y){if(Y)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const H=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),H}}}const E=new L.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Dt(_t){if(!le(_t).activated)throw E.create("use-before-activation",{appName:_t.name})}function Me(_t,Y){return et.apply(this,arguments)}function et(){return(et=(0,oe.Z)(function*({url:_t,body:Y},H){var ue,Te;const Je={"Content-Type":"application/json"},rt=H.getImmediate({optional:!0});if(rt){const Gn=yield rt.getHeartbeatsHeader();Gn&&(Je["X-Firebase-Client"]=Gn)}const Ot={method:"POST",body:JSON.stringify(Y),headers:Je};let Pt,xt;try{Pt=yield fetch(_t,Ot)}catch(Gn){throw E.create("fetch-network-error",{originalErrorMessage:null===(ue=Gn)||void 0===ue?void 0:ue.message})}if(200!==Pt.status)throw E.create("fetch-status-error",{httpStatus:Pt.status});try{xt=yield Pt.json()}catch(Gn){throw E.create("fetch-parse-error",{originalErrorMessage:null===(Te=Gn)||void 0===Te?void 0:Te.message})}const on=xt.ttl.match(/^([\d.]+)(s)$/);if(!on||!on[2]||isNaN(Number(on[1])))throw E.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${xt.ttl}`});const Pn=1e3*Number(on[1]),$n=Date.now();return{token:xt.token,expireTimeMillis:$n+Pn,issuedAtTimeMillis:$n}})).apply(this,arguments)}function At(_t,Y){const{projectId:H,appId:ue,apiKey:Te}=_t.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${H}/apps/${ue}:exchangeDebugToken?key=${Te}`,body:{debug_token:Y}}}const Ve="firebase-app-check-store";let tt=null;function St(){return tt||(tt=new Promise((_t,Y)=>{var H;try{const ue=indexedDB.open("firebase-app-check-database",1);ue.onsuccess=Te=>{_t(Te.target.result)},ue.onerror=Te=>{var Je;Y(E.create("storage-open",{originalErrorMessage:null===(Je=Te.target.error)||void 0===Je?void 0:Je.message}))},ue.onupgradeneeded=Te=>{0===Te.oldVersion&&Te.target.result.createObjectStore(Ve,{keyPath:"compositeKey"})}}catch(ue){Y(E.create("storage-open",{originalErrorMessage:null===(H=ue)||void 0===H?void 0:H.message}))}}),tt)}function wn(){return(wn=(0,oe.Z)(function*(_t,Y){const ue=(yield St()).transaction(Ve,"readwrite"),Je=ue.objectStore(Ve).put({compositeKey:_t,value:Y});return new Promise((rt,Ot)=>{Je.onsuccess=Pt=>{rt()},ue.onerror=Pt=>{var xt;Ot(E.create("storage-set",{originalErrorMessage:null===(xt=Pt.target.error)||void 0===xt?void 0:xt.message}))}})})).apply(this,arguments)}const cr=new Ce.Yd("@firebase/app-check");function Un(_t,Y){return(0,L.hl)()?function(_t,Y){return function(_t,Y){return wn.apply(this,arguments)}(function(_t){return`${_t.options.appId}-${_t.name}`}(_t),Y)}(_t,Y).catch(H=>{cr.warn(`Failed to write token to IndexedDB. Error: ${H}`)}):Promise.resolve()}function kn(){return ht().enabled}function Xn(){return or.apply(this,arguments)}function or(){return(or=(0,oe.Z)(function*(){const _t=ht();if(_t.enabled&&_t.token)return _t.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Er={error:"UNKNOWN_ERROR"};function hr(_t){return L.US.encodeString(JSON.stringify(_t),!1)}function ei(_t){return nr.apply(this,arguments)}function nr(){return(nr=(0,oe.Z)(function*(_t,Y=!1){const H=_t.app;Dt(H);const ue=le(H);let Je,Te=ue.token;if(Te&&!En(Te)&&(we(H,Object.assign(Object.assign({},ue),{token:void 0})),Te=void 0),!Te){const Pt=yield ue.cachedTokenPromise;Pt&&(En(Pt)?Te=Pt:yield Un(H,void 0))}if(!Y&&Te&&En(Te))return{token:Te.token};let Ot,rt=!1;if(kn()){ue.exchangeTokenPromise||(ue.exchangeTokenPromise=Me(At(H,yield Xn()),_t.heartbeatServiceProvider).finally(()=>{ue.exchangeTokenPromise=void 0}),rt=!0);const Pt=yield ue.exchangeTokenPromise;return yield Un(H,Pt),we(H,Object.assign(Object.assign({},ue),{token:Pt})),{token:Pt.token}}try{ue.exchangeTokenPromise||(ue.exchangeTokenPromise=ue.provider.getToken().finally(()=>{ue.exchangeTokenPromise=void 0}),rt=!0),Te=yield ue.exchangeTokenPromise}catch(Pt){"appCheck/throttled"===Pt.code?cr.warn(Pt.message):cr.error(Pt),Je=Pt}return Te?Je?Ot=En(Te)?{token:Te.token,internalError:Je}:Jn(Je):(Ot={token:Te.token},we(H,Object.assign(Object.assign({},ue),{token:Te})),yield Un(H,Te)):Ot=Jn(Je),rt&&rn(H,Ot),Ot})).apply(this,arguments)}function It(_t,Y){const H=le(_t),ue=H.tokenObservers.filter(Te=>Te.next!==Y);0===ue.length&&H.tokenRefresher&&H.tokenRefresher.isRunning()&&H.tokenRefresher.stop(),we(_t,Object.assign(Object.assign({},H),{tokenObservers:ue}))}function ur(_t){const{app:Y}=_t,H=le(Y);let ue=H.tokenRefresher;ue||(ue=function(_t){const{app:Y}=_t;return new gt((0,oe.Z)(function*(){let ue;if(ue=le(Y).token?yield ei(_t,!0):yield ei(_t),ue.error)throw ue.error;if(ue.internalError)throw ue.internalError}),()=>!0,()=>{const H=le(Y);if(H.token){let ue=H.token.issuedAtTimeMillis+.5*(H.token.expireTimeMillis-H.token.issuedAtTimeMillis)+3e5;return ue=Math.min(ue,H.token.expireTimeMillis-3e5),Math.max(0,ue-Date.now())}return 0},3e4,96e4)}(_t),we(Y,Object.assign(Object.assign({},H),{tokenRefresher:ue}))),!ue.isRunning()&&H.isTokenAutoRefreshEnabled&&ue.start()}function rn(_t,Y){const H=le(_t).tokenObservers;for(const ue of H)try{"EXTERNAL"===ue.type&&null!=Y.error?ue.error(Y.error):ue.next(Y)}catch(Te){}}function En(_t){return _t.expireTimeMillis-Date.now()>0}function Jn(_t){return{token:hr(Er),error:_t}}class rr{constructor(Y,H){this.app=Y,this.heartbeatServiceProvider=H}_delete(){const{tokenObservers:Y}=le(this.app);for(const H of Y)It(this.app,H.next);return Promise.resolve()}}const Cn="app-check-internal";(0,Q._registerComponent)(new ye.wA("app-check",_t=>function(_t,Y){return new rr(_t,Y)}(_t.getProvider("app").getImmediate(),_t.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((_t,Y,H)=>{_t.getProvider(Cn).initialize()})),(0,Q._registerComponent)(new ye.wA(Cn,_t=>function(_t){return{getToken:Y=>ei(_t,Y),addTokenListener:Y=>function(_t,Y,H,ue){const{app:Te}=_t,Je=le(Te),rt={next:H,error:ue,type:Y};if(we(Te,Object.assign(Object.assign({},Je),{tokenObservers:[...Je.tokenObservers,rt]})),Je.token&&En(Je.token)){const Ot=Je.token;Promise.resolve().then(()=>{H({token:Ot.token}),ur(_t)}).catch(()=>{})}Je.cachedTokenPromise.then(()=>ur(_t))}(_t,"INTERNAL",Y),removeTokenListener:Y=>It(_t.app,Y)}}(_t.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Q.registerVersion)("@firebase/app-check","0.5.15");class Tr{constructor(){return(0,y.vb)("app-check")}}"undefined"!=typeof window&&window},127:(en,it,F)=>{"use strict";F.d(it,{Ot:()=>ke,z6:()=>oe,ZF:()=>Ze,hX:()=>le});var y=F(2329),A=F(7716),te=F(2805);class ke{constructor(gt){return gt}}class oe{constructor(){return(0,y.C6)()}}const L=new A.OlP("angularfire2._apps"),Ce={provide:ke,useFactory:function(Ue){return Ue&&1===Ue.length?Ue[0]:new ke((0,y.Mq)())},deps:[[new A.FiY,L]]},re={provide:oe,deps:[[new A.FiY,L]]};function he(Ue){return(gt,ut)=>{const $t=gt.runOutsideAngular(()=>Ue(ut));return new ke($t)}}let _e=(()=>{class Ue{constructor(ut){(0,y.KN)("angularfire",te.q4.full,"core"),(0,y.KN)("angularfire",te.q4.full,"app"),(0,y.KN)("angular",A.q4F.full,ut.toString())}}return Ue.\u0275fac=function(ut){return new(ut||Ue)(A.LFG(A.Lbi))},Ue.\u0275mod=A.oAB({type:Ue}),Ue.\u0275inj=A.cJS({providers:[Ce,re]}),Ue})();function le(Ue,...gt){return{ngModule:_e,providers:[{provide:L,useFactory:he(Ue),multi:!0,deps:[A.R0b,A.zs3,te.HU,...gt]}]}}const Ze=(0,te.u3)(y.ZF,!0)},7910:(en,it,F)=>{"use strict";F.d(it,{gx:()=>Ae,dh:()=>Ze,Xb:()=>At,v0:()=>Fe,AR:()=>E,e5:()=>It,w7:()=>Jn,EA:()=>Dt});var y=F(2805),A=F(7716),te=F(127),ke=F(2329),oe=F(841),Q=F(3607),he=(F(3854),F(8026),F(5422),F(3910),F(8891));function le(at){return new he.y(function(Ct){return{unsubscribe:(0,Q.q)(at,Ct.next.bind(Ct),Ct.error.bind(Ct),Ct.complete.bind(Ct))}})}class Ae{constructor(Ct){return Ct}}class Ze{constructor(){return(0,y.vb)("auth")}}const ft=new A.OlP("angularfire2.auth-instances");function Ue(at){return(Ct,Be)=>{const He=Ct.runOutsideAngular(()=>at(Be));return new Ae(He)}}const gt={provide:Ze,deps:[[new A.FiY,ft]]},ut={provide:Ae,useFactory:function(at,Ct){const Be=(0,y.JM)("auth",at,Ct);return Be&&new Ae(Be)},deps:[[new A.FiY,ft],te.Ot]};let $t=(()=>{class at{constructor(){(0,ke.KN)("angularfire",y.q4.full,"auth")}}return at.\u0275fac=function(Be){return new(Be||at)},at.\u0275mod=A.oAB({type:at}),at.\u0275inj=A.cJS({providers:[ut,gt]}),at})();function E(at,...Ct){return{ngModule:$t,providers:[{provide:ft,useFactory:Ue(at),multi:!0,deps:[A.R0b,A.zs3,y.HU,te.z6,[new A.FiY,oe.nm],...Ct]}]}}const Dt=(0,y.u3)(le,!0),At=(0,y.u3)(Q.a5,!0),Fe=(0,y.u3)(Q.n,!0),It=(0,y.u3)(Q.a6,!0),Jn=(0,y.u3)(Q.y,!0)},8006:(en,it,F)=>{"use strict";F.d(it,{zQ:()=>Ie,rT:()=>et,f7:()=>nt,L6:()=>be,_Q:()=>Me,lh:()=>dt,Qv:()=>Pe,nw:()=>At});var y=F(7716),A=F(9765),te=F(5917),ke=F(8891),oe=F(4402),Q=F(6682),ye=F(7771),L=F(5319),Ce=F(309),re=F(7971),he=F(8858);class _e extends A.xQ{constructor(Fe=Number.POSITIVE_INFINITY,tt=Number.POSITIVE_INFINITY,St){super(),this.scheduler=St,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=Fe<1?1:Fe,this._windowTime=tt<1?1:tt,tt===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(Fe){if(!this.isStopped){const tt=this._events;tt.push(Fe),tt.length>this._bufferSize&&tt.shift()}super.next(Fe)}nextTimeWindow(Fe){this.isStopped||(this._events.push(new le(this._getNow(),Fe)),this._trimBufferThenGetEvents()),super.next(Fe)}_subscribe(Fe){const tt=this._infiniteTimeWindow,St=tt?this._events:this._trimBufferThenGetEvents(),Bt=this.scheduler,Mt=St.length;let Nt;if(this.closed)throw new re.N;if(this.isStopped||this.hasError?Nt=L.w.EMPTY:(this.observers.push(Fe),Nt=new he.W(this,Fe)),Bt&&Fe.add(Fe=new Ce.ht(Fe,Bt)),tt)for(let gn=0;gn<Mt&&!Fe.closed;gn++)Fe.next(St[gn]);else for(let gn=0;gn<Mt&&!Fe.closed;gn++)Fe.next(St[gn].value);return this.hasError?Fe.error(this.thrownError):this.isStopped&&Fe.complete(),Nt}_getNow(){return(this.scheduler||ye.c).now()}_trimBufferThenGetEvents(){const Fe=this._getNow(),tt=this._bufferSize,St=this._windowTime,Bt=this._events,Mt=Bt.length;let Nt=0;for(;Nt<Mt&&!(Fe-Bt[Nt].time<St);)Nt++;return Mt>tt&&(Nt=Math.max(Nt,Mt-tt)),Nt>0&&Bt.splice(0,Nt),Bt}}class le{constructor(Fe,tt){this.time=Fe,this.value=tt}}function we(Ve,Fe,tt){let St;return St=Ve&&"object"==typeof Ve?Ve:{bufferSize:Ve,windowTime:Fe,refCount:!1,scheduler:tt},Bt=>Bt.lift(function({bufferSize:Ve=Number.POSITIVE_INFINITY,windowTime:Fe=Number.POSITIVE_INFINITY,refCount:tt,scheduler:St}){let Bt,Nt,Mt=0,gn=!1,Nn=!1;return function(yn){let Sn;Mt++,!Bt||gn?(gn=!1,Bt=new _e(Ve,Fe,St),Sn=Bt.subscribe(this),Nt=yn.subscribe({next(mr){Bt.next(mr)},error(mr){gn=!0,Bt.error(mr)},complete(){Nn=!0,Nt=void 0,Bt.complete()}}),Nn&&(Nt=void 0)):Sn=Bt.subscribe(this),this.add(()=>{Mt--,Sn.unsubscribe(),Sn=void 0,Nt&&!Nn&&tt&&0===Mt&&(Nt.unsubscribe(),Nt=void 0,Bt=void 0)})}}(St))}var Ae=F(3190);function Ze(Ve,Fe){return Fe?(0,Ae.w)(()=>Ve,Fe):(0,Ae.w)(()=>Ve)}var Ge=F(8002),ft=F(8049),Se=F(3101),Ue=F(5435),gt=F(2805),ut=F(8939),$t=F(8583),E=F(841);F(7841);const Pe=new y.OlP("angularfire2.auth.use-emulator"),be=new y.OlP("angularfire2.auth.settings"),Me=new y.OlP("angularfire2.auth.tenant-id"),et=new y.OlP("angularfire2.auth.langugage-code"),dt=new y.OlP("angularfire2.auth.use-device-language"),nt=new y.OlP("angularfire.auth.persistence"),At=(Ve,Fe,tt,St,Bt,Mt,Nt,gn)=>(0,ut.cc)(`${Ve.name}.auth`,"AngularFireAuth",Ve.name,()=>{const Nn=Fe.runOutsideAngular(()=>Ve.auth());if(tt&&Nn.useEmulator(...tt),St&&(Nn.tenantId=St),Nn.languageCode=Bt,Mt&&Nn.useDeviceLanguage(),Nt)for(const[wn,yn]of Object.entries(Nt))Nn.settings[wn]=yn;return gn&&Nn.setPersistence(gn),Nn},[tt,St,Bt,Mt,Nt,gn]);let Ie=(()=>{class Ve{constructor(tt,St,Bt,Mt,Nt,gn,Nn,wn,yn,Sn,mr,cr){const Tt=new A.xQ,un=(0,te.of)(void 0).pipe((0,Ce.QV)(Nt.outsideAngular),(0,Ae.w)(()=>Mt.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,4828)))),(0,Ge.U)(()=>(0,ut.on)(tt,Mt,St)),(0,Ge.U)(Un=>At(Un,Mt,gn,wn,yn,Sn,Nn,mr)),we({bufferSize:1,refCount:!1}));if((0,$t.PM)(Bt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,te.of)(null);else{un.pipe((0,ft.P)()).subscribe();const Xt=un.pipe((0,Ae.w)(Xn=>Xn.getRedirectResult().then(or=>or,()=>null)),gt.iC,we({bufferSize:1,refCount:!1})),Ln=un.pipe((0,Ae.w)(Xn=>new ke.y(or=>({unsubscribe:Mt.runOutsideAngular(()=>Xn.onAuthStateChanged(vr=>or.next(vr),vr=>or.error(vr),()=>or.complete()))})))),kn=un.pipe((0,Ae.w)(Xn=>new ke.y(or=>({unsubscribe:Mt.runOutsideAngular(()=>Xn.onIdTokenChanged(vr=>or.next(vr),vr=>or.error(vr),()=>or.complete()))}))));this.authState=Xt.pipe(Ze(Ln),(0,Se.R)(Nt.outsideAngular),(0,Ce.QV)(Nt.insideAngular)),this.user=Xt.pipe(Ze(kn),(0,Se.R)(Nt.outsideAngular),(0,Ce.QV)(Nt.insideAngular)),this.idToken=this.user.pipe((0,Ae.w)(Xn=>Xn?(0,oe.D)(Xn.getIdToken()):(0,te.of)(null))),this.idTokenResult=this.user.pipe((0,Ae.w)(Xn=>Xn?(0,oe.D)(Xn.getIdTokenResult()):(0,te.of)(null))),this.credential=(0,Q.T)(Xt,Tt,this.authState.pipe((0,Ue.h)(Xn=>!Xn))).pipe((0,Ge.U)(Xn=>(null==Xn?void 0:Xn.user)?Xn:null),(0,Se.R)(Nt.outsideAngular),(0,Ce.QV)(Nt.insideAngular))}return(0,ut.pX)(this,un,Mt,{spy:{apply:(Un,Xt,Ln)=>{(Un.startsWith("signIn")||Un.startsWith("createUser"))&&Ln.then(kn=>Tt.next(kn))}}})}}return Ve.\u0275fac=function(tt){return new(tt||Ve)(y.LFG(ut.Dh),y.LFG(ut.xv,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(gt.HU),y.LFG(Pe,8),y.LFG(be,8),y.LFG(Me,8),y.LFG(et,8),y.LFG(dt,8),y.LFG(nt,8),y.LFG(E.nm,8))},Ve.\u0275prov=y.Yz7({token:Ve,factory:Ve.\u0275fac,providedIn:"any"}),Ve})()},9781:(en,it,F)=>{"use strict";F.d(it,{ST:()=>ti,yb:()=>fn});var y=F(7716),A=F(3637),te=F(8891),ke=F(4402),oe=F(5917),Q=F(2805),ye=F(7393);function L(){return Xe=>Xe.lift(new Ce)}class Ce{call(se,xe){return xe.subscribe(new re(se))}}class re extends ye.L{constructor(se){super(se),this.hasPrev=!1}_next(se){let xe;this.hasPrev?xe=[this.prev,se]:this.hasPrev=!0,this.prev=se,xe&&this.destination.next(xe)}}var he=F(9761),_e=F(8002),le=F(2145),we=F(7519),ht=F(5435),Ae=F(8939),Ze=F(8583),ft=(F(4828),F(3394)),Se=F(1304),Ue=F(3854),gt=F(3910);function E(Xe,se){if(void 0===se)return{merge:!1};if(void 0!==se.mergeFields&&void 0!==se.merge)throw new Se.WA("invalid-argument",`Invalid options passed to function ${Xe}(): You cannot specify both "merge" and "mergeFields".`);return se}function pt(){if("undefined"==typeof Uint8Array)throw new Se.WA("unimplemented","Uint8Arrays are not available in this environment.")}function Dt(){if(!(0,Se.Me)())throw new Se.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Pe{constructor(se){this._delegate=se}static fromBase64String(se){return Dt(),new Pe(Se.Jj.fromBase64String(se))}static fromUint8Array(se){return pt(),new Pe(Se.Jj.fromUint8Array(se))}toBase64(){return Dt(),this._delegate.toBase64()}toUint8Array(){return pt(),this._delegate.toUint8Array()}isEqual(se){return this._delegate.isEqual(se._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function be(Xe){return function(Xe,se){if("object"!=typeof Xe||null===Xe)return!1;const xe=Xe;for(const at of["next","error","complete"])if(at in xe&&"function"==typeof xe[at])return!0;return!1}(Xe)}class et{enableIndexedDbPersistence(se,xe){return(0,Se.ST)(se._delegate,{forceOwnership:xe})}enableMultiTabIndexedDbPersistence(se){return(0,Se.fH)(se._delegate)}clearIndexedDbPersistence(se){return(0,Se.Fc)(se._delegate)}}class dt{constructor(se,xe,at){this._delegate=xe,this._persistenceProvider=at,this.INTERNAL={delete:()=>this.terminate()},se instanceof Se.l7||(this._appCompat=se)}get _databaseId(){return this._delegate._databaseId}settings(se){const xe=this._delegate._getSettings();!se.merge&&xe.host!==se.host&&(0,Se.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),se.merge&&delete(se=Object.assign(Object.assign({},xe),se)).merge,this._delegate._setSettings(se)}useEmulator(se,xe,at={}){(0,Se.at)(this._delegate,se,xe,at)}enableNetwork(){return(0,Se.Ix)(this._delegate)}disableNetwork(){return(0,Se.TF)(this._delegate)}enablePersistence(se){let xe=!1,at=!1;return se&&(xe=!!se.synchronizeTabs,at=!!se.experimentalForceOwningTab,(0,Se.Wi)("synchronizeTabs",xe,"experimentalForceOwningTab",at)),xe?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,at)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,Se.Mx)(this._delegate)}onSnapshotsInSync(se){return(0,Se.sc)(this._delegate,se)}get app(){if(!this._appCompat)throw new Se.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(se){try{return new yn(this,(0,Se.hJ)(this._delegate,se))}catch(xe){throw tt(xe,"collection()","Firestore.collection()")}}doc(se){try{return new Fe(this,(0,Se.JU)(this._delegate,se))}catch(xe){throw tt(xe,"doc()","Firestore.doc()")}}collectionGroup(se){try{return new gn(this,(0,Se.B$)(this._delegate,se))}catch(xe){throw tt(xe,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(se){return(0,Se.i3)(this._delegate,xe=>se(new Ie(this,xe)))}batch(){return(0,Se.qY)(this._delegate),new Ye(new Se.PU(this._delegate,se=>(0,Se.GL)(this._delegate,se)))}loadBundle(se){return(0,Se.Pb)(this._delegate,se)}namedQuery(se){return(0,Se.L$)(this._delegate,se).then(xe=>xe?new gn(this,xe):null)}}class nt extends Se.u7{constructor(se){super(),this.firestore=se}convertBytes(se){return new Pe(new Se.Jj(se))}convertReference(se){const xe=this.convertDocumentKey(se,this.firestore._databaseId);return Fe.forKey(xe,this.firestore,null)}}class Ie{constructor(se,xe){this._firestore=se,this._delegate=xe,this._userDataWriter=new nt(se)}get(se){const xe=Sn(se);return this._delegate.get(xe).then(at=>new Mt(this._firestore,new Se.xU(this._firestore._delegate,this._userDataWriter,at._key,at._document,at.metadata,xe.converter)))}set(se,xe,at){const Ct=Sn(se);return at?(E("Transaction.set",at),this._delegate.set(Ct,xe,at)):this._delegate.set(Ct,xe),this}update(se,xe,at,...Ct){const Be=Sn(se);return 2===arguments.length?this._delegate.update(Be,xe):this._delegate.update(Be,xe,at,...Ct),this}delete(se){const xe=Sn(se);return this._delegate.delete(xe),this}}class Ye{constructor(se){this._delegate=se}set(se,xe,at){const Ct=Sn(se);return at?(E("WriteBatch.set",at),this._delegate.set(Ct,xe,at)):this._delegate.set(Ct,xe),this}update(se,xe,at,...Ct){const Be=Sn(se);return 2===arguments.length?this._delegate.update(Be,xe):this._delegate.update(Be,xe,at,...Ct),this}delete(se){const xe=Sn(se);return this._delegate.delete(xe),this}commit(){return this._delegate.commit()}}class Ve{constructor(se,xe,at){this._firestore=se,this._userDataWriter=xe,this._delegate=at}fromFirestore(se,xe){const at=new Se.$q(this._firestore._delegate,this._userDataWriter,se._key,se._document,se.metadata,null);return this._delegate.fromFirestore(new Nt(this._firestore,at),null!=xe?xe:{})}toFirestore(se,xe){return xe?this._delegate.toFirestore(se,xe):this._delegate.toFirestore(se)}static getInstance(se,xe){const at=Ve.INSTANCES;let Ct=at.get(se);Ct||(Ct=new WeakMap,at.set(se,Ct));let Be=Ct.get(xe);return Be||(Be=new Ve(se,new nt(se),xe),Ct.set(xe,Be)),Be}}Ve.INSTANCES=new WeakMap;class Fe{constructor(se,xe){this.firestore=se,this._delegate=xe,this._userDataWriter=new nt(se)}static forPath(se,xe,at){if(se.length%2!=0)throw new Se.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${se.canonicalString()} has ${se.length}`);return new Fe(xe,new Se.my(xe._delegate,at,new Se.Ky(se)))}static forKey(se,xe,at){return new Fe(xe,new Se.my(xe._delegate,at,se))}get id(){return this._delegate.id}get parent(){return new yn(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(se){try{return new yn(this.firestore,(0,Se.hJ)(this._delegate,se))}catch(xe){throw tt(xe,"collection()","DocumentReference.collection()")}}isEqual(se){return(se=(0,Ue.m9)(se))instanceof Se.my&&(0,Se.Eo)(this._delegate,se)}set(se,xe){xe=E("DocumentReference.set",xe);try{return xe?(0,Se.pl)(this._delegate,se,xe):(0,Se.pl)(this._delegate,se)}catch(at){throw tt(at,"setDoc()","DocumentReference.set()")}}update(se,xe,...at){try{return 1===arguments.length?(0,Se.r7)(this._delegate,se):(0,Se.r7)(this._delegate,se,xe,...at)}catch(Ct){throw tt(Ct,"updateDoc()","DocumentReference.update()")}}delete(){return(0,Se.oe)(this._delegate)}onSnapshot(...se){const xe=St(se),at=Bt(se,Ct=>new Mt(this.firestore,new Se.xU(this.firestore._delegate,this._userDataWriter,Ct._key,Ct._document,Ct.metadata,this._delegate.converter)));return(0,Se.cf)(this._delegate,xe,at)}get(se){let xe;return xe="cache"===(null==se?void 0:se.source)?(0,Se.kl)(this._delegate):"server"===(null==se?void 0:se.source)?(0,Se.Xk)(this._delegate):(0,Se.QT)(this._delegate),xe.then(at=>new Mt(this.firestore,new Se.xU(this.firestore._delegate,this._userDataWriter,at._key,at._document,at.metadata,this._delegate.converter)))}withConverter(se){return new Fe(this.firestore,this._delegate.withConverter(se?Ve.getInstance(this.firestore,se):null))}}function tt(Xe,se,xe){return Xe.message=Xe.message.replace(se,xe),Xe}function St(Xe){for(const se of Xe)if("object"==typeof se&&!be(se))return se;return{}}function Bt(Xe,se){var xe,at;let Ct;return Ct=be(Xe[0])?Xe[0]:be(Xe[1])?Xe[1]:"function"==typeof Xe[0]?{next:Xe[0],error:Xe[1],complete:Xe[2]}:{next:Xe[1],error:Xe[2],complete:Xe[3]},{next:Be=>{Ct.next&&Ct.next(se(Be))},error:null===(xe=Ct.error)||void 0===xe?void 0:xe.bind(Ct),complete:null===(at=Ct.complete)||void 0===at?void 0:at.bind(Ct)}}class Mt{constructor(se,xe){this._firestore=se,this._delegate=xe}get ref(){return new Fe(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(se){return this._delegate.data(se)}get(se,xe){return this._delegate.get(se,xe)}isEqual(se){return(0,Se.qK)(this._delegate,se._delegate)}}class Nt extends Mt{data(se){const xe=this._delegate.data(se);return(0,Se.K9)(void 0!==xe,"Document in a QueryDocumentSnapshot should exist"),xe}}class gn{constructor(se,xe){this.firestore=se,this._delegate=xe,this._userDataWriter=new nt(se)}where(se,xe,at){try{return new gn(this.firestore,(0,Se.IO)(this._delegate,(0,Se.ar)(se,xe,at)))}catch(Ct){throw tt(Ct,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(se,xe){try{return new gn(this.firestore,(0,Se.IO)(this._delegate,(0,Se.Xo)(se,xe)))}catch(at){throw tt(at,/(orderBy|where)\(\)/,"Query.$1()")}}limit(se){try{return new gn(this.firestore,(0,Se.IO)(this._delegate,(0,Se.b9)(se)))}catch(xe){throw tt(xe,"limit()","Query.limit()")}}limitToLast(se){try{return new gn(this.firestore,(0,Se.IO)(this._delegate,(0,Se.vh)(se)))}catch(xe){throw tt(xe,"limitToLast()","Query.limitToLast()")}}startAt(...se){try{return new gn(this.firestore,(0,Se.IO)(this._delegate,(0,Se.e0)(...se)))}catch(xe){throw tt(xe,"startAt()","Query.startAt()")}}startAfter(...se){try{return new gn(this.firestore,(0,Se.IO)(this._delegate,(0,Se.TQ)(...se)))}catch(xe){throw tt(xe,"startAfter()","Query.startAfter()")}}endBefore(...se){try{return new gn(this.firestore,(0,Se.IO)(this._delegate,(0,Se.Lx)(...se)))}catch(xe){throw tt(xe,"endBefore()","Query.endBefore()")}}endAt(...se){try{return new gn(this.firestore,(0,Se.IO)(this._delegate,(0,Se.Wu)(...se)))}catch(xe){throw tt(xe,"endAt()","Query.endAt()")}}isEqual(se){return(0,Se.iE)(this._delegate,se._delegate)}get(se){let xe;return xe="cache"===(null==se?void 0:se.source)?(0,Se.UQ)(this._delegate):"server"===(null==se?void 0:se.source)?(0,Se.zN)(this._delegate):(0,Se.PL)(this._delegate),xe.then(at=>new wn(this.firestore,new Se.W(this.firestore._delegate,this._userDataWriter,this._delegate,at._snapshot)))}onSnapshot(...se){const xe=St(se),at=Bt(se,Ct=>new wn(this.firestore,new Se.W(this.firestore._delegate,this._userDataWriter,this._delegate,Ct._snapshot)));return(0,Se.cf)(this._delegate,xe,at)}withConverter(se){return new gn(this.firestore,this._delegate.withConverter(se?Ve.getInstance(this.firestore,se):null))}}class Nn{constructor(se,xe){this._firestore=se,this._delegate=xe}get type(){return this._delegate.type}get doc(){return new Nt(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class wn{constructor(se,xe){this._firestore=se,this._delegate=xe}get query(){return new gn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(se=>new Nt(this._firestore,se))}docChanges(se){return this._delegate.docChanges(se).map(xe=>new Nn(this._firestore,xe))}forEach(se,xe){this._delegate.forEach(at=>{se.call(xe,new Nt(this._firestore,at))})}isEqual(se){return(0,Se.qK)(this._delegate,se._delegate)}}class yn extends gn{constructor(se,xe){super(se,xe),this.firestore=se,this._delegate=xe}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const se=this._delegate.parent;return se?new Fe(this.firestore,se):null}doc(se){try{return new Fe(this.firestore,void 0===se?(0,Se.JU)(this._delegate):(0,Se.JU)(this._delegate,se))}catch(xe){throw tt(xe,"doc()","CollectionReference.doc()")}}add(se){return(0,Se.ET)(this._delegate,se).then(xe=>new Fe(this.firestore,xe))}isEqual(se){return(0,Se.Eo)(this._delegate,se._delegate)}withConverter(se){return new yn(this.firestore,this._delegate.withConverter(se?Ve.getInstance(this.firestore,se):null))}}function Sn(Xe){return(0,Se.Cf)(Xe,Se.my)}class mr{constructor(...se){this._delegate=new Se.Lz(...se)}static documentId(){return new mr(Se.Xb.keyField().canonicalString())}isEqual(se){return(se=(0,Ue.m9)(se))instanceof Se.Lz&&this._delegate._internalPath.isEqual(se._internalPath)}}class cr{constructor(se){this._delegate=se}static serverTimestamp(){const se=(0,Se.Bt)();return se._methodName="FieldValue.serverTimestamp",new cr(se)}static delete(){const se=(0,Se.AK)();return se._methodName="FieldValue.delete",new cr(se)}static arrayUnion(...se){const xe=(0,Se.vr)(...se);return xe._methodName="FieldValue.arrayUnion",new cr(xe)}static arrayRemove(...se){const xe=(0,Se.Ab)(...se);return xe._methodName="FieldValue.arrayRemove",new cr(xe)}static increment(se){const xe=(0,Se.nP)(se);return xe._methodName="FieldValue.increment",new cr(xe)}isEqual(se){return this._delegate.isEqual(se._delegate)}}const Tt={Firestore:dt,GeoPoint:Se.F8,Timestamp:Se.EK,Blob:Pe,Transaction:Ie,WriteBatch:Ye,DocumentReference:Fe,DocumentSnapshot:Mt,Query:gn,QueryDocumentSnapshot:Nt,QuerySnapshot:wn,CollectionReference:yn,FieldPath:mr,FieldValue:cr,setLogLevel:function(Xe){(0,Se.Ub)(Xe)},CACHE_SIZE_UNLIMITED:Se.IX};var Xe;(function(Xe,se){Xe.INTERNAL.registerComponent(new gt.wA("firestore-compat",xe=>((se,xe)=>new dt(se,xe,new et))(xe.getProvider("app-compat").getImmediate(),xe.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},Tt)))})(Xe=ft.Z),Xe.registerVersion("@firebase/firestore-compat","0.2.1");var Xt=F(8006),Ln=F(841),kn=F(7841);function or(Xe,se){return function(Xe,se=A.z){return new te.y(xe=>{let at;return null!=se?se.schedule(()=>{at=Xe.onSnapshot({includeMetadataChanges:!0},xe)}):at=Xe.onSnapshot({includeMetadataChanges:!0},xe),()=>{null!=at&&at()}})}(Xe,se)}function Er(Xe,se){return or(Xe,se).pipe((0,_e.U)(xe=>({payload:xe,type:"query"})))}function hr(Xe,se){return Er(Xe,se).pipe((0,he.O)(void 0),L(),(0,_e.U)(([xe,at])=>{const Ct=at.payload.docChanges(),Be=Ct.map(He=>({type:He.type,payload:He}));return xe&&JSON.stringify(xe.payload.metadata)!==JSON.stringify(at.payload.metadata)&&at.payload.docs.forEach((He,ct)=>{const We=Ct.find($e=>$e.doc.ref.isEqual(He.ref)),Ee=null==xe?void 0:xe.payload.docs.find($e=>$e.ref.isEqual(He.ref));We&&JSON.stringify(We.doc.metadata)===JSON.stringify(He.metadata)||!We&&Ee&&JSON.stringify(Ee.metadata)===JSON.stringify(He.metadata)||Be.push({type:"modified",payload:{oldIndex:ct,newIndex:ct,type:"modified",doc:He}})}),Be}))}function ei(Xe,se,xe){return hr(Xe,xe).pipe((0,le.R)((at,Ct)=>function(Xe,se,xe){return se.forEach(at=>{xe.indexOf(at.type)>-1&&(Xe=function(Xe,se){switch(se.type){case"added":if(!Xe[se.newIndex]||!Xe[se.newIndex].doc.ref.isEqual(se.doc.ref))return Ht(Xe,se.newIndex,0,se);break;case"modified":if(null==Xe[se.oldIndex]||Xe[se.oldIndex].doc.ref.isEqual(se.doc.ref)){if(se.oldIndex!==se.newIndex){const xe=Xe.slice();return xe.splice(se.oldIndex,1),xe.splice(se.newIndex,0,se),xe}return Ht(Xe,se.newIndex,1,se)}break;case"removed":if(Xe[se.oldIndex]&&Xe[se.oldIndex].doc.ref.isEqual(se.doc.ref))return Ht(Xe,se.oldIndex,1)}return Xe}(Xe,at))}),Xe}(at,Ct.map(Be=>Be.payload),se),[]),(0,we.x)(),(0,_e.U)(at=>at.map(Ct=>({type:Ct.type,payload:Ct}))))}function Ht(Xe,se,xe,...at){const Ct=Xe.slice();return Ct.splice(se,xe,...at),Ct}function ur(Xe){return(!Xe||0===Xe.length)&&(Xe=["added","removed","modified"]),Xe}class pr{constructor(se,xe,at){this.ref=se,this.query=xe,this.afs=at}stateChanges(se){let xe=hr(this.query,this.afs.schedulers.outsideAngular);return se&&se.length>0&&(xe=xe.pipe((0,_e.U)(at=>at.filter(Ct=>se.indexOf(Ct.type)>-1)))),xe.pipe((0,he.O)(void 0),L(),(0,ht.h)(([at,Ct])=>Ct.length>0||!at),(0,_e.U)(([at,Ct])=>Ct),Q.iC)}auditTrail(se){return this.stateChanges(se).pipe((0,le.R)((xe,at)=>[...xe,...at],[]))}snapshotChanges(se){const xe=ur(se);return ei(this.query,xe,this.afs.schedulers.outsideAngular).pipe(Q.iC)}valueChanges(se={}){return Er(this.query,this.afs.schedulers.outsideAngular).pipe((0,_e.U)(xe=>xe.payload.docs.map(at=>se.idField?Object.assign(Object.assign({},at.data()),{[se.idField]:at.id}):at.data())),Q.iC)}get(se){return(0,ke.D)(this.query.get(se)).pipe(Q.iC)}add(se){return this.ref.add(se)}doc(se){return new rn(this.ref.doc(se),this.afs)}}class rn{constructor(se,xe){this.ref=se,this.afs=xe}set(se,xe){return this.ref.set(se,xe)}update(se){return this.ref.update(se)}delete(){return this.ref.delete()}collection(se,xe){const at=this.ref.collection(se),{ref:Ct,query:Be}=Zn(at,xe);return new pr(Ct,Be,this.afs)}snapshotChanges(){return function(Xe,se){return or(Xe,se).pipe((0,he.O)(void 0),L(),(0,_e.U)(([xe,at])=>at.exists?(null==xe?void 0:xe.exists)?{payload:at,type:"modified"}:{payload:at,type:"added"}:{payload:at,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Q.iC)}valueChanges(se={}){return this.snapshotChanges().pipe((0,_e.U)(({payload:xe})=>se.idField?Object.assign(Object.assign({},xe.data()),{[se.idField]:xe.id}):xe.data()))}get(se){return(0,ke.D)(this.ref.get(se)).pipe(Q.iC)}}class En{constructor(se,xe){this.query=se,this.afs=xe}stateChanges(se){return se&&0!==se.length?hr(this.query,this.afs.schedulers.outsideAngular).pipe((0,_e.U)(xe=>xe.filter(at=>se.indexOf(at.type)>-1)),(0,ht.h)(xe=>xe.length>0),Q.iC):hr(this.query,this.afs.schedulers.outsideAngular).pipe(Q.iC)}auditTrail(se){return this.stateChanges(se).pipe((0,le.R)((xe,at)=>[...xe,...at],[]))}snapshotChanges(se){const xe=ur(se);return ei(this.query,xe,this.afs.schedulers.outsideAngular).pipe(Q.iC)}valueChanges(se={}){return Er(this.query,this.afs.schedulers.outsideAngular).pipe((0,_e.U)(at=>at.payload.docs.map(Ct=>se.idField?Object.assign({[se.idField]:Ct.id},Ct.data()):Ct.data())),Q.iC)}get(se){return(0,ke.D)(this.query.get(se)).pipe(Q.iC)}}const Jn=new y.OlP("angularfire2.enableFirestorePersistence"),rr=new y.OlP("angularfire2.firestore.persistenceSettings"),ir=new y.OlP("angularfire2.firestore.settings"),Kn=new y.OlP("angularfire2.firestore.use-emulator");function Zn(Xe,se=(xe=>xe)){return{query:se(Xe),ref:Xe}}let ti=(()=>{class Xe{constructor(xe,at,Ct,Be,He,ct,We,Ee,$e,wt,Qt,jn,An,Vn,mn,In,br){this.schedulers=We;const Zt=(0,Ae.on)(xe,ct,at),Yt=$e;wt&&(0,Xt.nw)(Zt,ct,Qt,An,Vn,mn,jn,In),[this.firestore,this.persistenceEnabled$]=(0,Ae.cc)(`${Zt.name}.firestore`,"AngularFirestore",Zt.name,()=>{const Ut=ct.runOutsideAngular(()=>Zt.firestore());if(Be&&Ut.settings(Be),Yt&&Ut.useEmulator(...Yt),Ct&&!(0,Ze.PM)(He)){const Cn=()=>{try{return(0,ke.D)(Ut.enablePersistence(Ee||void 0).then(()=>!0,()=>!1))}catch(Mn){return"undefined"!=typeof console&&console.warn(Mn),(0,oe.of)(!1)}};return[Ut,ct.runOutsideAngular(Cn)]}return[Ut,(0,oe.of)(!1)]},[Be,Yt,Ct])}collection(xe,at){let Ct;Ct="string"==typeof xe?this.firestore.collection(xe):xe;const{ref:Be,query:He}=Zn(Ct,at),ct=this.schedulers.ngZone.run(()=>Be);return new pr(ct,He,this)}collectionGroup(xe,at){const Ct=at||(He=>He),Be=this.firestore.collectionGroup(xe);return new En(Ct(Be),this)}doc(xe){let at;at="string"==typeof xe?this.firestore.doc(xe):xe;const Ct=this.schedulers.ngZone.run(()=>at);return new rn(Ct,this)}createId(){return this.firestore.collection("_").doc().id}}return Xe.\u0275fac=function(xe){return new(xe||Xe)(y.LFG(Ae.Dh),y.LFG(Ae.xv,8),y.LFG(Jn,8),y.LFG(ir,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(Q.HU),y.LFG(rr,8),y.LFG(Kn,8),y.LFG(Xt.zQ,8),y.LFG(Xt.Qv,8),y.LFG(Xt.L6,8),y.LFG(Xt._Q,8),y.LFG(Xt.rT,8),y.LFG(Xt.lh,8),y.LFG(Xt.f7,8),y.LFG(Ln.nm,8))},Xe.\u0275prov=y.Yz7({token:Xe,factory:Xe.\u0275fac,providedIn:"any"}),Xe})(),fn=(()=>{class Xe{constructor(){kn.Z.registerVersion("angularfire",Q.q4.full,"fst-compat")}static enablePersistence(xe){return{ngModule:Xe,providers:[{provide:Jn,useValue:!0},{provide:rr,useValue:xe}]}}}return Xe.\u0275fac=function(xe){return new(xe||Xe)},Xe.\u0275mod=y.oAB({type:Xe}),Xe.\u0275inj=y.cJS({providers:[ti]}),Xe})()},8939:(en,it,F)=>{"use strict";F.d(it,{hO:()=>le,xv:()=>Ce,Dh:()=>L,GT:()=>Q,cc:()=>we,on:()=>re,pX:()=>oe});var y=F(7716),A=F(7841),te=F(2805);en=F.hmd(en);const ke=["ngOnDestroy"],oe=(Ge,ft,Se,Ue={})=>new Proxy(Ge,{get:(gt,ut)=>Se.runOutsideAngular(()=>{var $t;if(Ge[ut])return(null===($t=null==Ue?void 0:Ue.spy)||void 0===$t?void 0:$t.get)&&Ue.spy.get(ut,Ge[ut]),Ge[ut];if(ke.indexOf(ut)>-1)return()=>{};const E=ft.toPromise().then(pt=>{const Dt=pt&&pt[ut];return"function"==typeof Dt?Dt.bind(pt):Dt&&Dt.then?Dt.then(Pe=>Se.run(()=>Pe)):Se.run(()=>Dt)});return new Proxy(()=>{},{get:(pt,Dt)=>E[Dt],apply:(pt,Dt,Pe)=>E.then(be=>{var Me;const et=be&&be(...Pe);return(null===(Me=null==Ue?void 0:Ue.spy)||void 0===Me?void 0:Me.apply)&&Ue.spy.apply(ut,Pe,et),et})})})}),Q=(Ge,ft)=>{ft.forEach(Se=>{Object.getOwnPropertyNames(Se.prototype||Se).forEach(Ue=>{Object.defineProperty(Ge.prototype,Ue,Object.getOwnPropertyDescriptor(Se.prototype||Se,Ue))})})};class ye{constructor(ft){return ft}}const L=new y.OlP("angularfire2.app.options"),Ce=new y.OlP("angularfire2.app.name");function re(Ge,ft,Se){const gt="object"==typeof Se&&Se||{};gt.name=gt.name||"string"==typeof Se&&Se||"[DEFAULT]";const $t=A.Z.apps.filter(E=>E&&E.name===gt.name)[0]||ft.runOutsideAngular(()=>A.Z.initializeApp(Ge,gt));try{JSON.stringify(Ge)!==JSON.stringify($t.options)&&he("error",`${$t.name} Firebase App already initialized with different options${en.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(E){}return new ye($t)}const he=(Ge,...ft)=>{(0,y.X6Q)()&&"undefined"!=typeof console&&console[Ge](...ft)},_e={provide:ye,useFactory:re,deps:[L,y.R0b,[new y.FiY,Ce]]};let le=(()=>{class Ge{constructor(Se){A.Z.registerVersion("angularfire",te.q4.full,"core"),A.Z.registerVersion("angularfire",te.q4.full,"app-compat"),A.Z.registerVersion("angular",y.q4F.full,Se.toString())}static initializeApp(Se,Ue){return{ngModule:Ge,providers:[{provide:L,useValue:Se},{provide:Ce,useValue:Ue}]}}}return Ge.\u0275fac=function(Se){return new(Se||Ge)(y.LFG(y.Lbi))},Ge.\u0275mod=y.oAB({type:Ge}),Ge.\u0275inj=y.cJS({providers:[_e]}),Ge})();function we(Ge,ft,Se,Ue,gt){const[,ut,$t]=globalThis.\u0275AngularfireInstanceCache.find(E=>E[0]===Ge)||[];if(ut)return function(Ge,ft){try{return Ge.toString()===ft.toString()}catch(Se){return Ge===ft}}(gt,$t)||(Ze("error",`${ft} was already initialized on the ${Se} Firebase App with different settings.${Ae?" You may need to reload as Firebase is not HMR aware.":""}`),Ze("warn",{is:gt,was:$t})),ut;{const E=Ue();return globalThis.\u0275AngularfireInstanceCache.push([Ge,E,gt]),E}}const Ae=!!en.hot,Ze=(Ge,...ft)=>{(0,y.X6Q)()&&"undefined"!=typeof console&&console[Ge](...ft)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2502:(en,it,F)=>{"use strict";F.d(it,{gg:()=>Pe,BS:()=>Nt,JU:()=>or,_1:()=>Nn,ad:()=>rr,Xo:()=>at,Cm:()=>Fe,IO:()=>Ct,pl:()=>Ee});var y=F(2805),A=F(7716),te=F(7910),ke=F(127),oe=F(2329),Q=F(841),ye=F(1304),L=F(8891),Ce=F(8002),re={includeMetadataChanges:!1};function he(Zt,Yt){return void 0===Yt&&(Yt=re),new L.y(function(Ut){return{unsubscribe:(0,ye.cf)(Zt,Yt,{next:Ut.next.bind(Ut),error:Ut.error.bind(Ut),complete:Ut.complete.bind(Ut)})}})}function le(Zt,Yt){return void 0===Yt&&(Yt={}),function(Zt){return he(Zt,{includeMetadataChanges:!0})}(Zt).pipe((0,Ce.U)(function(Ut){return we(Ut,Yt)}))}function we(Zt,Yt){void 0===Yt&&(Yt={});var Ut=Zt.data();return!Zt.exists()||"object"!=typeof Ut||null===Ut||Yt.idField&&(Ut[Yt.idField]=Zt.id),Ut}function Dt(Zt,Yt){return void 0===Yt&&(Yt={}),function(Zt){return he(Zt,{includeMetadataChanges:!0}).pipe((0,Ce.U)(function(Yt){return Yt.docs}))}(Zt).pipe((0,Ce.U)(function(Ut){return Ut.map(function(Cn){return we(Cn,Yt)})}))}class Pe{constructor(Yt){return Yt}}const be="firestore",dt=new A.OlP("angularfire2.firestore-instances");function At(Zt){return(Yt,Ut)=>{const Cn=Yt.runOutsideAngular(()=>Zt(Ut));return new Pe(Cn)}}const Ie={provide:class{constructor(){return(0,y.vb)(be)}},deps:[[new A.FiY,dt]]},Ye={provide:Pe,useFactory:function(Zt,Yt){const Ut=(0,y.JM)(be,Zt,Yt);return Ut&&new Pe(Ut)},deps:[[new A.FiY,dt],ke.Ot]};let Ve=(()=>{class Zt{constructor(){(0,oe.KN)("angularfire",y.q4.full,"fst")}}return Zt.\u0275fac=function(Ut){return new(Ut||Zt)},Zt.\u0275mod=A.oAB({type:Zt}),Zt.\u0275inj=A.cJS({providers:[Ye,Ie]}),Zt})();function Fe(Zt,...Yt){return{ngModule:Ve,providers:[{provide:dt,useFactory:At(Zt),multi:!0,deps:[A.R0b,A.zs3,y.HU,ke.z6,[new A.FiY,te.dh],[new A.FiY,Q.nm],...Yt]}]}}const Nt=(0,y.u3)(Dt,!0),Nn=(0,y.u3)(le,!0),or=(0,y.u3)(ye.JU,!0),rr=(0,y.u3)(ye.ad,!0),at=(0,y.u3)(ye.Xo,!0),Ct=(0,y.u3)(ye.IO,!0),Ee=(0,y.u3)(ye.pl,!0)},2805:(en,it,F)=>{"use strict";F.d(it,{q4:()=>Xa,iC:()=>$a,HU:()=>Ja,vb:()=>pd,JM:()=>da,u3:()=>ha});var y=F(7716),A=F(2329),te=F(8239),ke=F(8026),oe=F(3854),Q=F(3910),ye=F(5422),L=F(2268);const Ce="@firebase/installations",re="0.5.15",_e=`w:${re}`,le="FIS_v2",ft=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Se(B){return B instanceof oe.ZR&&B.code.includes("request-failed")}function Ue({projectId:B}){return`https://firebaseinstallations.googleapis.com/v1/projects/${B}/installations`}function gt(B){return{token:B.token,requestStatus:2,expiresIn:be(B.expiresIn),creationTime:Date.now()}}function ut(B,Z){return $t.apply(this,arguments)}function $t(){return($t=(0,te.Z)(function*(B,Z){const ze=(yield Z.json()).error;return ft.create("request-failed",{requestName:B,serverCode:ze.code,serverMessage:ze.message,serverStatus:ze.status})})).apply(this,arguments)}function E({apiKey:B}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":B})}function pt(B,{refreshToken:Z}){const me=E(B);return me.append("Authorization",function(B){return`${le} ${B}`}(Z)),me}function Dt(B){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,te.Z)(function*(B){const Z=yield B();return Z.status>=500&&Z.status<600?B():Z})).apply(this,arguments)}function be(B){return Number(B.replace("s","000"))}function et(B,Z){return dt.apply(this,arguments)}function dt(){return(dt=(0,te.Z)(function*({appConfig:B,heartbeatServiceProvider:Z},{fid:me}){const ze=Ue(B),Et=E(B),Vt=Z.getImmediate({optional:!0});if(Vt){const kr=yield Vt.getHeartbeatsHeader();kr&&Et.append("x-firebase-client",kr)}const Bn={method:"POST",headers:Et,body:JSON.stringify({fid:me,authVersion:le,appId:B.appId,sdkVersion:_e})},Yn=yield Dt(()=>fetch(ze,Bn));if(Yn.ok){const kr=yield Yn.json();return{fid:kr.fid||me,registrationStatus:2,refreshToken:kr.refreshToken,authToken:gt(kr.authToken)}}throw yield ut("Create Installation",Yn)})).apply(this,arguments)}function nt(B){return new Promise(Z=>{setTimeout(Z,B)})}const Ie=/^[cdef][\w-]{21}$/;function Ve(){try{const B=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(B),B[0]=112+B[0]%16;const me=function(B){return function(B){return btoa(String.fromCharCode(...B)).replace(/\+/g,"-").replace(/\//g,"_")}(B).substr(0,22)}(B);return Ie.test(me)?me:""}catch(B){return""}}function tt(B){return`${B.appName}!${B.appId}`}const St=new Map;function Bt(B,Z){const me=tt(B);gn(me,Z),function(B,Z){const me=(!wn&&"BroadcastChannel"in self&&(wn=new BroadcastChannel("[Firebase] FID Change"),wn.onmessage=B=>{gn(B.data.key,B.data.fid)}),wn);me&&me.postMessage({key:B,fid:Z}),0===St.size&&wn&&(wn.close(),wn=null)}(me,Z)}function gn(B,Z){const me=St.get(B);if(me)for(const ze of me)ze(Z)}let wn=null;const Tt="firebase-installations-store";let un=null;function Un(){return un||(un=(0,L.X3)("firebase-installations-database",1,{upgrade:(B,Z)=>{0===Z&&B.createObjectStore(Tt)}})),un}function Xt(B,Z){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,te.Z)(function*(B,Z){const me=tt(B),Et=(yield Un()).transaction(Tt,"readwrite"),Vt=Et.objectStore(Tt),cn=yield Vt.get(me);return yield Vt.put(Z,me),yield Et.done,(!cn||cn.fid!==Z.fid)&&Bt(B,Z.fid),Z})).apply(this,arguments)}function kn(B){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,te.Z)(function*(B){const Z=tt(B),ze=(yield Un()).transaction(Tt,"readwrite");yield ze.objectStore(Tt).delete(Z),yield ze.done})).apply(this,arguments)}function or(B,Z){return vr.apply(this,arguments)}function vr(){return(vr=(0,te.Z)(function*(B,Z){const me=tt(B),Et=(yield Un()).transaction(Tt,"readwrite"),Vt=Et.objectStore(Tt),cn=yield Vt.get(me),Bn=Z(cn);return void 0===Bn?yield Vt.delete(me):yield Vt.put(Bn,me),yield Et.done,Bn&&(!cn||cn.fid!==Bn.fid)&&Bt(B,Bn.fid),Bn})).apply(this,arguments)}function Er(B){return hr.apply(this,arguments)}function hr(){return(hr=(0,te.Z)(function*(B){let Z;const me=yield or(B.appConfig,ze=>{const Et=ei(ze),Vt=nr(B,Et);return Z=Vt.registrationPromise,Vt.installationEntry});return""===me.fid?{installationEntry:yield Z}:{installationEntry:me,registrationPromise:Z}})).apply(this,arguments)}function ei(B){return En(B||{fid:Ve(),registrationStatus:0})}function nr(B,Z){if(0===Z.registrationStatus){if(!navigator.onLine)return{installationEntry:Z,registrationPromise:Promise.reject(ft.create("app-offline"))};const me={fid:Z.fid,registrationStatus:1,registrationTime:Date.now()},ze=function(B,Z){return It.apply(this,arguments)}(B,me);return{installationEntry:me,registrationPromise:ze}}return 1===Z.registrationStatus?{installationEntry:Z,registrationPromise:ur(B)}:{installationEntry:Z}}function It(){return(It=(0,te.Z)(function*(B,Z){try{const me=yield et(B,Z);return Xt(B.appConfig,me)}catch(me){throw Se(me)&&409===me.customData.serverCode?yield kn(B.appConfig):yield Xt(B.appConfig,{fid:Z.fid,registrationStatus:0}),me}})).apply(this,arguments)}function ur(B){return pr.apply(this,arguments)}function pr(){return(pr=(0,te.Z)(function*(B){let Z=yield rn(B.appConfig);for(;1===Z.registrationStatus;)yield nt(100),Z=yield rn(B.appConfig);if(0===Z.registrationStatus){const{installationEntry:me,registrationPromise:ze}=yield Er(B);return ze||me}return Z})).apply(this,arguments)}function rn(B){return or(B,Z=>{if(!Z)throw ft.create("installation-not-found");return En(Z)})}function En(B){return function(B){return 1===B.registrationStatus&&B.registrationTime+1e4<Date.now()}(B)?{fid:B.fid,registrationStatus:0}:B}function rr(B,Z){return ir.apply(this,arguments)}function ir(){return(ir=(0,te.Z)(function*({appConfig:B,heartbeatServiceProvider:Z},me){const ze=Kn(B,me),Et=pt(B,me),Vt=Z.getImmediate({optional:!0});if(Vt){const kr=yield Vt.getHeartbeatsHeader();kr&&Et.append("x-firebase-client",kr)}const Bn={method:"POST",headers:Et,body:JSON.stringify({installation:{sdkVersion:_e,appId:B.appId}})},Yn=yield Dt(()=>fetch(ze,Bn));if(Yn.ok)return gt(yield Yn.json());throw yield ut("Generate Auth Token",Yn)})).apply(this,arguments)}function Kn(B,{fid:Z}){return`${Ue(B)}/${Z}/authTokens:generate`}function Zn(B){return ti.apply(this,arguments)}function ti(){return(ti=(0,te.Z)(function*(B,Z=!1){let me;const ze=yield or(B.appConfig,Vt=>{if(!Ct(Vt))throw ft.create("not-registered");const cn=Vt.authToken;if(!Z&&Be(cn))return Vt;if(1===cn.requestStatus)return me=fn(B,Z),Vt;{if(!navigator.onLine)throw ft.create("app-offline");const Bn=ct(Vt);return me=xe(B,Bn),Bn}});return me?yield me:ze.authToken})).apply(this,arguments)}function fn(B,Z){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,te.Z)(function*(B,Z){let me=yield se(B.appConfig);for(;1===me.authToken.requestStatus;)yield nt(100),me=yield se(B.appConfig);const ze=me.authToken;return 0===ze.requestStatus?Zn(B,Z):ze})).apply(this,arguments)}function se(B){return or(B,Z=>{if(!Ct(Z))throw ft.create("not-registered");return function(B){return 1===B.requestStatus&&B.requestTime+1e4<Date.now()}(Z.authToken)?Object.assign(Object.assign({},Z),{authToken:{requestStatus:0}}):Z})}function xe(B,Z){return at.apply(this,arguments)}function at(){return(at=(0,te.Z)(function*(B,Z){try{const me=yield rr(B,Z),ze=Object.assign(Object.assign({},Z),{authToken:me});return yield Xt(B.appConfig,ze),me}catch(me){if(!Se(me)||401!==me.customData.serverCode&&404!==me.customData.serverCode){const ze=Object.assign(Object.assign({},Z),{authToken:{requestStatus:0}});yield Xt(B.appConfig,ze)}else yield kn(B.appConfig);throw me}})).apply(this,arguments)}function Ct(B){return void 0!==B&&2===B.registrationStatus}function Be(B){return 2===B.requestStatus&&!function(B){const Z=Date.now();return Z<B.creationTime||B.creationTime+B.expiresIn<Z+36e5}(B)}function ct(B){const Z={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},B),{authToken:Z})}function $e(){return($e=(0,te.Z)(function*(B){const Z=B,{installationEntry:me,registrationPromise:ze}=yield Er(Z);return ze?ze.catch(console.error):Zn(Z).catch(console.error),me.fid})).apply(this,arguments)}function Qt(){return(Qt=(0,te.Z)(function*(B,Z=!1){const me=B;return yield jn(me),(yield Zn(me,Z)).token})).apply(this,arguments)}function jn(B){return An.apply(this,arguments)}function An(){return(An=(0,te.Z)(function*(B){const{registrationPromise:Z}=yield Er(B);Z&&(yield Z)})).apply(this,arguments)}function Mn(B){return ft.create("missing-app-config-values",{valueName:B})}const dn="installations";(0,ke._registerComponent)(new Q.wA(dn,B=>{const Z=B.getProvider("app").getImmediate(),me=function(B){if(!B||!B.options)throw Mn("App Configuration");if(!B.name)throw Mn("App Name");const Z=["projectId","apiKey","appId"];for(const me of Z)if(!B.options[me])throw Mn(me);return{appName:B.name,projectId:B.options.projectId,apiKey:B.options.apiKey,appId:B.options.appId}}(Z);return{app:Z,appConfig:me,heartbeatServiceProvider:(0,ke._getProvider)(Z,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ke._registerComponent)(new Q.wA("installations-internal",B=>{const Z=B.getProvider("app").getImmediate(),me=(0,ke._getProvider)(Z,dn).getImmediate();return{getId:()=>function(B){return $e.apply(this,arguments)}(me),getToken:Et=>function(B){return Qt.apply(this,arguments)}(me,Et)}},"PRIVATE")),(0,ke.registerVersion)(Ce,re),(0,ke.registerVersion)(Ce,re,"esm2017");const Xr="@firebase/remote-config",Yr=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class $n{constructor(Z,me,ze,Et){this.client=Z,this.storage=me,this.storageCache=ze,this.logger=Et}isCachedDataFresh(Z,me){if(!me)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ze=Date.now()-me,Et=ze<=Z;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ze}. Cache max age millis (minimumFetchIntervalMillis setting): ${Z}. Is cache hit: ${Et}.`),Et}fetch(Z){var me=this;return(0,te.Z)(function*(){const[ze,Et]=yield Promise.all([me.storage.getLastSuccessfulFetchTimestampMillis(),me.storage.getLastSuccessfulFetchResponse()]);if(Et&&me.isCachedDataFresh(Z.cacheMaxAgeMillis,ze))return Et;Z.eTag=Et&&Et.eTag;const Vt=yield me.client.fetch(Z),cn=[me.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Vt.status&&cn.push(me.storage.setLastSuccessfulFetchResponse(Vt)),yield Promise.all(cn),Vt})()}}function Gn(B=navigator){return B.languages&&B.languages[0]||B.language}class xr{constructor(Z,me,ze,Et,Vt,cn){this.firebaseInstallations=Z,this.sdkVersion=me,this.namespace=ze,this.projectId=Et,this.apiKey=Vt,this.appId=cn}fetch(Z){var me=this;return(0,te.Z)(function*(){var ze,Et,Vt;const[cn,Bn]=yield Promise.all([me.firebaseInstallations.getId(),me.firebaseInstallations.getToken()]),kr=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${me.projectId}/namespaces/${me.namespace}:fetch?key=${me.apiKey}`,Rr={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":Z.eTag||"*"},fr={sdk_version:me.sdkVersion,app_instance_id:cn,app_instance_id_token:Bn,app_id:me.appId,language_code:Gn()},Li={method:"POST",headers:Rr,body:JSON.stringify(fr)},pi=fetch(kr,Li),Ei=new Promise((Ca,ja)=>{Z.signal.addEventListener(()=>{const jo=new Error("The operation was aborted.");jo.name="AbortError",ja(jo)})});let Uo;try{yield Promise.race([pi,Ei]),Uo=yield pi}catch(Ca){let ja="fetch-client-network";throw"AbortError"===(null===(ze=Ca)||void 0===ze?void 0:ze.name)&&(ja="fetch-timeout"),Yr.create(ja,{originalErrorMessage:null===(Et=Ca)||void 0===Et?void 0:Et.message})}let Xo=Uo.status;const Jo=Uo.headers.get("ETag")||void 0;let ml,Ua;if(200===Uo.status){let Ca;try{Ca=yield Uo.json()}catch(ja){throw Yr.create("fetch-client-parse",{originalErrorMessage:null===(Vt=ja)||void 0===Vt?void 0:Vt.message})}ml=Ca.entries,Ua=Ca.state}if("INSTANCE_STATE_UNSPECIFIED"===Ua?Xo=500:"NO_CHANGE"===Ua?Xo=304:("NO_TEMPLATE"===Ua||"EMPTY_CONFIG"===Ua)&&(ml={}),304!==Xo&&200!==Xo)throw Yr.create("fetch-status",{httpStatus:Xo});return{status:Xo,eTag:Jo,config:ml}})()}}class bi{constructor(Z,me){this.client=Z,this.storage=me}fetch(Z){var me=this;return(0,te.Z)(function*(){const ze=(yield me.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return me.attemptFetch(Z,ze)})()}attemptFetch(Z,{throttleEndTimeMillis:me,backoffCount:ze}){var Et=this;return(0,te.Z)(function*(){yield function(B,Z){return new Promise((me,ze)=>{const Et=Math.max(Z-Date.now(),0),Vt=setTimeout(me,Et);B.addEventListener(()=>{clearTimeout(Vt),ze(Yr.create("fetch-throttle",{throttleEndTimeMillis:Z}))})})}(Z.signal,me);try{const Vt=yield Et.client.fetch(Z);return yield Et.storage.deleteThrottleMetadata(),Vt}catch(Vt){if(!function(B){if(!(B instanceof oe.ZR&&B.customData))return!1;const Z=Number(B.customData.httpStatus);return 429===Z||500===Z||503===Z||504===Z}(Vt))throw Vt;const cn={throttleEndTimeMillis:Date.now()+(0,oe.$s)(ze),backoffCount:ze+1};return yield Et.storage.setThrottleMetadata(cn),Et.attemptFetch(Z,cn)}})()}}class li{constructor(Z,me,ze,Et,Vt){this.app=Z,this._client=me,this._storageCache=ze,this._storage=Et,this._logger=Vt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Hs(B,Z){var me;const ze=B.target.error||void 0;return Yr.create(Z,{originalErrorMessage:ze&&(null===(me=ze)||void 0===me?void 0:me.message)})}const Hi="app_namespace_store";class xo{constructor(Z,me,ze,Et=function(){return new Promise((B,Z)=>{var me;try{const ze=indexedDB.open("firebase_remote_config",1);ze.onerror=Et=>{Z(Hs(Et,"storage-open"))},ze.onsuccess=Et=>{B(Et.target.result)},ze.onupgradeneeded=Et=>{0===Et.oldVersion&&Et.target.result.createObjectStore(Hi,{keyPath:"compositeKey"})}}catch(ze){Z(Yr.create("storage-open",{originalErrorMessage:null===(me=ze)||void 0===me?void 0:me.message}))}})}()){this.appId=Z,this.appName=me,this.namespace=ze,this.openDbPromise=Et}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(Z){return this.set("last_fetch_status",Z)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(Z){return this.set("last_successful_fetch_timestamp_millis",Z)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(Z){return this.set("last_successful_fetch_response",Z)}getActiveConfig(){return this.get("active_config")}setActiveConfig(Z){return this.set("active_config",Z)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(Z){return this.set("active_config_etag",Z)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(Z){return this.set("throttle_metadata",Z)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(Z){var me=this;return(0,te.Z)(function*(){const ze=yield me.openDbPromise;return new Promise((Et,Vt)=>{var cn;const Yn=ze.transaction([Hi],"readonly").objectStore(Hi),kr=me.createCompositeKey(Z);try{const Rr=Yn.get(kr);Rr.onerror=fr=>{Vt(Hs(fr,"storage-get"))},Rr.onsuccess=fr=>{const Li=fr.target.result;Et(Li?Li.value:void 0)}}catch(Rr){Vt(Yr.create("storage-get",{originalErrorMessage:null===(cn=Rr)||void 0===cn?void 0:cn.message}))}})})()}set(Z,me){var ze=this;return(0,te.Z)(function*(){const Et=yield ze.openDbPromise;return new Promise((Vt,cn)=>{var Bn;const kr=Et.transaction([Hi],"readwrite").objectStore(Hi),Rr=ze.createCompositeKey(Z);try{const fr=kr.put({compositeKey:Rr,value:me});fr.onerror=Li=>{cn(Hs(Li,"storage-set"))},fr.onsuccess=()=>{Vt()}}catch(fr){cn(Yr.create("storage-set",{originalErrorMessage:null===(Bn=fr)||void 0===Bn?void 0:Bn.message}))}})})()}delete(Z){var me=this;return(0,te.Z)(function*(){const ze=yield me.openDbPromise;return new Promise((Et,Vt)=>{var cn;const Yn=ze.transaction([Hi],"readwrite").objectStore(Hi),kr=me.createCompositeKey(Z);try{const Rr=Yn.delete(kr);Rr.onerror=fr=>{Vt(Hs(fr,"storage-delete"))},Rr.onsuccess=()=>{Et()}}catch(Rr){Vt(Yr.create("storage-delete",{originalErrorMessage:null===(cn=Rr)||void 0===cn?void 0:cn.message}))}})})()}createCompositeKey(Z){return[this.appId,this.appName,this.namespace,Z].join()}}class Ro{constructor(Z){this.storage=Z}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var Z=this;return(0,te.Z)(function*(){const me=Z.storage.getLastFetchStatus(),ze=Z.storage.getLastSuccessfulFetchTimestampMillis(),Et=Z.storage.getActiveConfig(),Vt=yield me;Vt&&(Z.lastFetchStatus=Vt);const cn=yield ze;cn&&(Z.lastSuccessfulFetchTimestampMillis=cn);const Bn=yield Et;Bn&&(Z.activeConfig=Bn)})()}setLastFetchStatus(Z){return this.lastFetchStatus=Z,this.storage.setLastFetchStatus(Z)}setLastSuccessfulFetchTimestampMillis(Z){return this.lastSuccessfulFetchTimestampMillis=Z,this.storage.setLastSuccessfulFetchTimestampMillis(Z)}setActiveConfig(Z){return this.activeConfig=Z,this.storage.setActiveConfig(Z)}}function Ws(){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,te.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch(B){return!1}})).apply(this,arguments)}(0,ke._registerComponent)(new Q.wA("remote-config",function(Z,{instanceIdentifier:me}){const ze=Z.getProvider("app").getImmediate(),Et=Z.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Yr.create("registration-window");if(!(0,oe.hl)())throw Yr.create("indexed-db-unavailable");const{projectId:Vt,apiKey:cn,appId:Bn}=ze.options;if(!Vt)throw Yr.create("registration-project-id");if(!cn)throw Yr.create("registration-api-key");if(!Bn)throw Yr.create("registration-app-id");const Yn=new xo(Bn,ze.name,me=me||"firebase"),kr=new Ro(Yn),Rr=new ye.Yd(Xr);Rr.logLevel=ye.in.ERROR;const fr=new xr(Et,ke.SDK_VERSION,me,Vt,cn,Bn),Li=new bi(fr,Yn),pi=new $n(Li,Yn,kr,Rr),Ei=new li(ze,pi,kr,Yn,Rr);return function(B){const Z=(0,oe.m9)(B);Z._initializePromise||(Z._initializePromise=Z._storageCache.loadFromStorage().then(()=>{Z._isInitializationComplete=!0}))}(Ei),Ei},"PUBLIC").setMultipleInstances(!0)),(0,ke.registerVersion)(Xr,"0.3.14"),(0,ke.registerVersion)(Xr,"0.3.14","esm2017");const os="/firebase-messaging-sw.js",yo="/firebase-cloud-messaging-push-scope",Ur="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ji="google.c.a.c_id",bs="google.c.a.c_l",es="google.c.a.ts",Yi="google.c.a.e";var _i=(()=>{return(B=_i||(_i={})).PUSH_RECEIVED="push-received",B.NOTIFICATION_CLICKED="notification-clicked",_i;var B})();function ci(B){const Z=new Uint8Array(B);return btoa(String.fromCharCode(...Z)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Mo(B){const me=(B+"=".repeat((4-B.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ze=atob(me),Et=new Uint8Array(ze.length);for(let Vt=0;Vt<ze.length;++Vt)Et[Vt]=ze.charCodeAt(Vt);return Et}const Ri="fcm_token_details_db",Yo="fcm_token_object_Store";function Ii(B){return eo.apply(this,arguments)}function eo(){return eo=(0,te.Z)(function*(B){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Vt=>Vt.name).includes(Ri))return null;let Z=null;return(yield(0,L.X3)(Ri,5,{upgrade:(ze=(0,te.Z)(function*(Et,Vt,cn,Bn){var Yn;if(Vt<2||!Et.objectStoreNames.contains(Yo))return;const kr=Bn.objectStore(Yo),Rr=yield kr.index("fcmSenderId").get(B);if(yield kr.clear(),Rr)if(2===Vt){const fr=Rr;if(!fr.auth||!fr.p256dh||!fr.endpoint)return;Z={token:fr.fcmToken,createTime:null!==(Yn=fr.createTime)&&void 0!==Yn?Yn:Date.now(),subscriptionOptions:{auth:fr.auth,p256dh:fr.p256dh,endpoint:fr.endpoint,swScope:fr.swScope,vapidKey:"string"==typeof fr.vapidKey?fr.vapidKey:ci(fr.vapidKey)}}}else if(3===Vt){const fr=Rr;Z={token:fr.fcmToken,createTime:fr.createTime,subscriptionOptions:{auth:ci(fr.auth),p256dh:ci(fr.p256dh),endpoint:fr.endpoint,swScope:fr.swScope,vapidKey:ci(fr.vapidKey)}}}else if(4===Vt){const fr=Rr;Z={token:fr.fcmToken,createTime:fr.createTime,subscriptionOptions:{auth:ci(fr.auth),p256dh:ci(fr.p256dh),endpoint:fr.endpoint,swScope:fr.swScope,vapidKey:ci(fr.vapidKey)}}}}),function(Vt,cn,Bn,Yn){return ze.apply(this,arguments)})})).close(),yield(0,L.Lj)(Ri),yield(0,L.Lj)("fcm_vapid_details_db"),yield(0,L.Lj)("undefined"),qi(Z)?Z:null;var ze}),eo.apply(this,arguments)}function qi(B){if(!B||!B.subscriptionOptions)return!1;const{subscriptionOptions:Z}=B;return"number"==typeof B.createTime&&B.createTime>0&&"string"==typeof B.token&&B.token.length>0&&"string"==typeof Z.auth&&Z.auth.length>0&&"string"==typeof Z.p256dh&&Z.p256dh.length>0&&"string"==typeof Z.endpoint&&Z.endpoint.length>0&&"string"==typeof Z.swScope&&Z.swScope.length>0&&"string"==typeof Z.vapidKey&&Z.vapidKey.length>0}const Ni="firebase-messaging-store";let Bi=null;function W(){return Bi||(Bi=(0,L.X3)("firebase-messaging-database",1,{upgrade:(B,Z)=>{0===Z&&B.createObjectStore(Ni)}})),Bi}function fe(B){return K.apply(this,arguments)}function K(){return(K=(0,te.Z)(function*(B){const Z=G(B),ze=yield(yield W()).transaction(Ni).objectStore(Ni).get(Z);if(ze)return ze;{const Et=yield Ii(B.appConfig.senderId);if(Et)return yield De(B,Et),Et}})).apply(this,arguments)}function De(B,Z){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,te.Z)(function*(B,Z){const me=G(B),Et=(yield W()).transaction(Ni,"readwrite");return yield Et.objectStore(Ni).put(Z,me),yield Et.done,Z})).apply(this,arguments)}function Ft(B){return an.apply(this,arguments)}function an(){return(an=(0,te.Z)(function*(B){const Z=G(B),ze=(yield W()).transaction(Ni,"readwrite");yield ze.objectStore(Ni).delete(Z),yield ze.done})).apply(this,arguments)}function G({appConfig:B}){return B.appId}const k=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ce(B,Z){return mt.apply(this,arguments)}function mt(){return(mt=(0,te.Z)(function*(B,Z){var me;const ze=yield ni(B),Et=ar(Z),Vt={method:"POST",headers:ze,body:JSON.stringify(Et)};let cn;try{cn=yield(yield fetch(si(B.appConfig),Vt)).json()}catch(Bn){throw k.create("token-subscribe-failed",{errorInfo:null===(me=Bn)||void 0===me?void 0:me.toString()})}if(cn.error)throw k.create("token-subscribe-failed",{errorInfo:cn.error.message});if(!cn.token)throw k.create("token-subscribe-no-token");return cn.token})).apply(this,arguments)}function _n(B,Z){return er.apply(this,arguments)}function er(){return(er=(0,te.Z)(function*(B,Z){var me;const ze=yield ni(B),Et=ar(Z.subscriptionOptions),Vt={method:"PATCH",headers:ze,body:JSON.stringify(Et)};let cn;try{cn=yield(yield fetch(`${si(B.appConfig)}/${Z.token}`,Vt)).json()}catch(Bn){throw k.create("token-update-failed",{errorInfo:null===(me=Bn)||void 0===me?void 0:me.toString()})}if(cn.error)throw k.create("token-update-failed",{errorInfo:cn.error.message});if(!cn.token)throw k.create("token-update-no-token");return cn.token})).apply(this,arguments)}function Kr(B,Z){return $i.apply(this,arguments)}function $i(){return($i=(0,te.Z)(function*(B,Z){var me;const Et={method:"DELETE",headers:yield ni(B)};try{const cn=yield(yield fetch(`${si(B.appConfig)}/${Z}`,Et)).json();if(cn.error)throw k.create("token-unsubscribe-failed",{errorInfo:cn.error.message})}catch(Vt){throw k.create("token-unsubscribe-failed",{errorInfo:null===(me=Vt)||void 0===me?void 0:me.toString()})}})).apply(this,arguments)}function si({projectId:B}){return`https://fcmregistrations.googleapis.com/v1/projects/${B}/registrations`}function ni(B){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,te.Z)(function*({appConfig:B,installations:Z}){const me=yield Z.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":B.apiKey,"x-goog-firebase-installations-auth":`FIS ${me}`})})).apply(this,arguments)}function ar({p256dh:B,auth:Z,endpoint:me,vapidKey:ze}){const Et={web:{endpoint:me,auth:Z,p256dh:B}};return ze!==Ur&&(Et.web.applicationPubKey=ze),Et}const ia=6048e5;function _o(B){return Na.apply(this,arguments)}function Na(){return(Na=(0,te.Z)(function*(B){const Z=yield Po(B.swRegistration,B.vapidKey),me={vapidKey:B.vapidKey,swScope:B.swRegistration.scope,endpoint:Z.endpoint,auth:ci(Z.getKey("auth")),p256dh:ci(Z.getKey("p256dh"))},ze=yield fe(B.firebaseDependencies);if(ze){if(ao(ze.subscriptionOptions,me))return Date.now()>=ze.createTime+ia?oa(B,{token:ze.token,createTime:Date.now(),subscriptionOptions:me}):ze.token;try{yield Kr(B.firebaseDependencies,ze.token)}catch(Et){console.warn(Et)}return ln(B.firebaseDependencies,me)}return ln(B.firebaseDependencies,me)})).apply(this,arguments)}function ka(B){return sa.apply(this,arguments)}function sa(){return(sa=(0,te.Z)(function*(B){const Z=yield fe(B.firebaseDependencies);Z&&(yield Kr(B.firebaseDependencies,Z.token),yield Ft(B.firebaseDependencies));const me=yield B.swRegistration.pushManager.getSubscription();return!me||me.unsubscribe()})).apply(this,arguments)}function oa(B,Z){return oo.apply(this,arguments)}function oo(){return(oo=(0,te.Z)(function*(B,Z){try{const me=yield _n(B.firebaseDependencies,Z),ze=Object.assign(Object.assign({},Z),{token:me,createTime:Date.now()});return yield De(B.firebaseDependencies,ze),me}catch(me){throw yield ka(B),me}})).apply(this,arguments)}function ln(B,Z){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,te.Z)(function*(B,Z){const ze={token:yield ce(B,Z),createTime:Date.now(),subscriptionOptions:Z};return yield De(B,ze),ze.token})).apply(this,arguments)}function Po(B,Z){return ki.apply(this,arguments)}function ki(){return(ki=(0,te.Z)(function*(B,Z){return(yield B.pushManager.getSubscription())||B.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Mo(Z)})})).apply(this,arguments)}function ao(B,Z){return Z.vapidKey===B.vapidKey&&Z.endpoint===B.endpoint&&Z.auth===B.auth&&Z.p256dh===B.p256dh}function Is(B){const Z={from:B.from,collapseKey:B.collapse_key,messageId:B.fcmMessageId};return function(B,Z){if(!Z.notification)return;B.notification={};const me=Z.notification.title;me&&(B.notification.title=me);const ze=Z.notification.body;ze&&(B.notification.body=ze);const Et=Z.notification.image;Et&&(B.notification.image=Et)}(Z,B),function(B,Z){!Z.data||(B.data=Z.data)}(Z,B),function(B,Z){var me,ze,Et,Vt,cn;if(!Z.fcmOptions&&!(null===(me=Z.notification)||void 0===me?void 0:me.click_action))return;B.fcmOptions={};const Bn=null!==(Et=null===(ze=Z.fcmOptions)||void 0===ze?void 0:ze.link)&&void 0!==Et?Et:null===(Vt=Z.notification)||void 0===Vt?void 0:Vt.click_action;Bn&&(B.fcmOptions.link=Bn);const Yn=null===(cn=Z.fcmOptions)||void 0===cn?void 0:cn.analytics_label;Yn&&(B.fcmOptions.analyticsLabel=Yn)}(Z,B),Z}function Vl(B){return"object"==typeof B&&!!B&&Ji in B}function Vs(B,Z){const me=[];for(let ze=0;ze<B.length;ze++)me.push(B.charAt(ze)),ze<Z.length&&me.push(Z.charAt(ze));return me.join("")}function lo(B){return k.create("missing-app-config-values",{valueName:B})}Vs("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Vs("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ts{constructor(Z,me,ze){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Et=function(B){if(!B||!B.options)throw lo("App Configuration Object");if(!B.name)throw lo("App Name");const Z=["projectId","apiKey","appId","messagingSenderId"],{options:me}=B;for(const ze of Z)if(!me[ze])throw lo(ze);return{appName:B.name,projectId:me.projectId,apiKey:me.apiKey,appId:me.appId,senderId:me.messagingSenderId}}(Z);this.firebaseDependencies={app:Z,appConfig:Et,installations:me,analyticsProvider:ze}}_delete(){return Promise.resolve()}}function Ns(B){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,te.Z)(function*(B){var Z;try{B.swRegistration=yield navigator.serviceWorker.register(os,{scope:yo}),B.swRegistration.update().catch(()=>{})}catch(me){throw k.create("failed-service-worker-registration",{browserErrorMessage:null===(Z=me)||void 0===Z?void 0:Z.message})}})).apply(this,arguments)}function gs(B,Z){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,te.Z)(function*(B,Z){if(!Z&&!B.swRegistration&&(yield Ns(B)),Z||!B.swRegistration){if(!(Z instanceof ServiceWorkerRegistration))throw k.create("invalid-sw-registration");B.swRegistration=Z}})).apply(this,arguments)}function to(B,Z){return ls.apply(this,arguments)}function ls(){return(ls=(0,te.Z)(function*(B,Z){Z?B.vapidKey=Z:B.vapidKey||(B.vapidKey=Ur)})).apply(this,arguments)}function Ys(){return(Ys=(0,te.Z)(function*(B,Z){if(!navigator)throw k.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw k.create("permission-blocked");return yield to(B,null==Z?void 0:Z.vapidKey),yield gs(B,null==Z?void 0:Z.serviceWorkerRegistration),_o(B)})).apply(this,arguments)}function vo(B,Z,me){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,te.Z)(function*(B,Z,me){const ze=Eo(Z);(yield B.firebaseDependencies.analyticsProvider.get()).logEvent(ze,{message_id:me[Ji],message_name:me[bs],message_time:me[es],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Eo(B){switch(B){case _i.NOTIFICATION_CLICKED:return"notification_open";case _i.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function la(){return(la=(0,te.Z)(function*(B,Z){const me=Z.data;if(!me.isFirebaseMessaging)return;B.onMessageHandler&&me.messageType===_i.PUSH_RECEIVED&&("function"==typeof B.onMessageHandler?B.onMessageHandler(Is(me)):B.onMessageHandler.next(Is(me)));const ze=me.data;Vl(ze)&&"1"===ze[Yi]&&(yield vo(B,me.messageType,ze))})).apply(this,arguments)}const Ks="@firebase/messaging";function No(){return _a.apply(this,arguments)}function _a(){return(_a=(0,te.Z)(function*(){try{yield(0,oe.eu)()}catch(B){return!1}return"undefined"!=typeof window&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ke._registerComponent)(new Q.wA("messaging",B=>{const Z=new ts(B.getProvider("app").getImmediate(),B.getProvider("installations-internal").getImmediate(),B.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",me=>function(B,Z){return la.apply(this,arguments)}(Z,me)),Z},"PUBLIC")),(0,ke._registerComponent)(new Q.wA("messaging-internal",B=>{const Z=B.getProvider("messaging").getImmediate();return{getToken:ze=>function(B,Z){return Ys.apply(this,arguments)}(Z,ze)}},"PRIVATE")),(0,ke.registerVersion)(Ks,"0.9.19"),(0,ke.registerVersion)(Ks,"0.9.19","esm2017");const vn="analytics",Cr="firebase_id",Ci="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Kt="https://www.googletagmanager.com/gtag/js",lr=new ye.Yd("@firebase/analytics");function Ki(B){return Promise.all(B.map(Z=>Z.catch(me=>me)))}function uo(B,Z){const me=document.createElement("script");me.src=`${Kt}?l=${B}&id=${Z}`,me.async=!0,document.head.appendChild(me)}function Hn(B,Z,me,ze,Et,Vt){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,te.Z)(function*(B,Z,me,ze,Et,Vt){const cn=ze[Et];try{if(cn)yield Z[cn];else{const Yn=(yield Ki(me)).find(kr=>kr.measurementId===Et);Yn&&(yield Z[Yn.appId])}}catch(Bn){lr.error(Bn)}B("config",Et,Vt)})).apply(this,arguments)}function hn(B,Z,me,ze,Et){return bt.apply(this,arguments)}function bt(){return(bt=(0,te.Z)(function*(B,Z,me,ze,Et){try{let Vt=[];if(Et&&Et.send_to){let cn=Et.send_to;Array.isArray(cn)||(cn=[cn]);const Bn=yield Ki(me);for(const Yn of cn){const kr=Bn.find(fr=>fr.measurementId===Yn),Rr=kr&&Z[kr.appId];if(!Rr){Vt=[];break}Vt.push(Rr)}}0===Vt.length&&(Vt=Object.values(Z)),yield Promise.all(Vt),B("event",ze,Et||{})}catch(Vt){lr.error(Vt)}})).apply(this,arguments)}function wi(B){const Z=window.document.getElementsByTagName("script");for(const me of Object.values(Z))if(me.src&&me.src.includes(Kt)&&me.src.includes(B))return me;return null}const ho=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Pr=new class{constructor(Z={},me=1e3){this.throttleMetadata=Z,this.intervalMillis=me}getThrottleMetadata(Z){return this.throttleMetadata[Z]}setThrottleMetadata(Z,me){this.throttleMetadata[Z]=me}deleteThrottleMetadata(Z){delete this.throttleMetadata[Z]}};function Bs(B){return new Headers({Accept:"application/json","x-goog-api-key":B})}function Ec(B){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,te.Z)(function*(B){var Z;const{appId:me,apiKey:ze}=B,Et={method:"GET",headers:Bs(ze)},Vt=Ci.replace("{app-id}",me),cn=yield fetch(Vt,Et);if(200!==cn.status&&304!==cn.status){let Bn="";try{const Yn=yield cn.json();(null===(Z=Yn.error)||void 0===Z?void 0:Z.message)&&(Bn=Yn.error.message)}catch(Yn){}throw ho.create("config-fetch-failed",{httpStatus:cn.status,responseMessage:Bn})}return cn.json()})).apply(this,arguments)}function ms(B){return yr.apply(this,arguments)}function yr(){return(yr=(0,te.Z)(function*(B,Z=Pr,me){const{appId:ze,apiKey:Et,measurementId:Vt}=B.options;if(!ze)throw ho.create("no-app-id");if(!Et){if(Vt)return{measurementId:Vt,appId:ze};throw ho.create("no-api-key")}const cn=Z.getThrottleMetadata(ze)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Bn=new ba;return setTimeout((0,te.Z)(function*(){Bn.abort()}),void 0!==me?me:6e4),ko({appId:ze,apiKey:Et,measurementId:Vt},cn,Bn,Z)})).apply(this,arguments)}function ko(B,Z,me){return fo.apply(this,arguments)}function fo(){return(fo=(0,te.Z)(function*(B,{throttleEndTimeMillis:Z,backoffCount:me},ze,Et=Pr){var Vt,cn;const{appId:Bn,measurementId:Yn}=B;try{yield Mi(ze,Z)}catch(kr){if(Yn)return lr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Yn} provided in the "measurementId" field in the local Firebase config. [${null===(Vt=kr)||void 0===Vt?void 0:Vt.message}]`),{appId:Bn,measurementId:Yn};throw kr}try{const kr=yield Ec(B);return Et.deleteThrottleMetadata(Bn),kr}catch(kr){const Rr=kr;if(!dr(Rr)){if(Et.deleteThrottleMetadata(Bn),Yn)return lr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Yn} provided in the "measurementId" field in the local Firebase config. [${null==Rr?void 0:Rr.message}]`),{appId:Bn,measurementId:Yn};throw kr}const fr=503===Number(null===(cn=null==Rr?void 0:Rr.customData)||void 0===cn?void 0:cn.httpStatus)?(0,oe.$s)(me,Et.intervalMillis,30):(0,oe.$s)(me,Et.intervalMillis),Li={throttleEndTimeMillis:Date.now()+fr,backoffCount:me+1};return Et.setThrottleMetadata(Bn,Li),lr.debug(`Calling attemptFetch again in ${fr} millis`),ko(B,Li,ze,Et)}})).apply(this,arguments)}function Mi(B,Z){return new Promise((me,ze)=>{const Et=Math.max(Z-Date.now(),0),Vt=setTimeout(me,Et);B.addEventListener(()=>{clearTimeout(Vt),ze(ho.create("fetch-throttle",{throttleEndTimeMillis:Z}))})})}function dr(B){if(!(B instanceof oe.ZR&&B.customData))return!1;const Z=Number(B.customData.httpStatus);return 429===Z||500===Z||503===Z||504===Z}class ba{constructor(){this.listeners=[]}addEventListener(Z){this.listeners.push(Z)}abort(){this.listeners.forEach(Z=>Z())}}let zr,Qa;function ui(){return(ui=(0,te.Z)(function*(B,Z,me,ze,Et){if(Et&&Et.global)B("event",me,ze);else{const Vt=yield Z;B("event",me,Object.assign(Object.assign({},ze),{send_to:Vt}))}})).apply(this,arguments)}function V(B){Qa=B}function x(B){zr=B}function S(){return j.apply(this,arguments)}function j(){return(j=(0,te.Z)(function*(){var B;if(!(0,oe.hl)())return lr.warn(ho.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(Z){return lr.warn(ho.create("indexeddb-unavailable",{errorInfo:null===(B=Z)||void 0===B?void 0:B.toString()}).message),!1}return!0})).apply(this,arguments)}function ve(){return(ve=(0,te.Z)(function*(B,Z,me,ze,Et,Vt,cn){var Bn;const Yn=ms(B);Yn.then(pi=>{me[pi.measurementId]=pi.appId,B.options.measurementId&&pi.measurementId!==B.options.measurementId&&lr.warn(`The measurement ID in the local Firebase config (${B.options.measurementId}) does not match the measurement ID fetched from the server (${pi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(pi=>lr.error(pi)),Z.push(Yn);const kr=S().then(pi=>{if(pi)return ze.getId()}),[Rr,fr]=yield Promise.all([Yn,kr]);wi(Vt)||uo(Vt,Rr.measurementId),Qa&&(Et("consent","default",Qa),V(void 0)),Et("js",new Date);const Li=null!==(Bn=null==cn?void 0:cn.config)&&void 0!==Bn?Bn:{};return Li.origin="firebase",Li.update=!0,null!=fr&&(Li[Cr]=fr),Et("config",Rr.measurementId,Li),zr&&(Et("set",zr),x(void 0)),Rr.measurementId})).apply(this,arguments)}class qe{constructor(Z){this.app=Z}_delete(){return delete ge[this.app.options.appId],Promise.resolve()}}let ge={},qt=[];const Rn={};let Nr,Dr,jr="dataLayer",ns=!1;function Io(B,Z,me){!function(){const B=[];if((0,oe.ru)()&&B.push("This is a browser extension environment."),(0,oe.zI)()||B.push("Cookies are not available."),B.length>0){const Z=B.map((ze,Et)=>`(${Et+1}) ${ze}`).join(" "),me=ho.create("invalid-analytics-context",{errorInfo:Z});lr.warn(me.message)}}();const ze=B.options.appId;if(!ze)throw ho.create("no-app-id");if(!B.options.apiKey){if(!B.options.measurementId)throw ho.create("no-api-key");lr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${B.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ge[ze])throw ho.create("already-exists",{id:ze});if(!ns){!function(B){let Z=[];Array.isArray(window[B])?Z=window[B]:window[B]=Z}(jr);const{wrappedGtag:Vt,gtagCore:cn}=function(B,Z,me,ze,Et){let Vt=function(...cn){window[ze].push(arguments)};return window[Et]&&"function"==typeof window[Et]&&(Vt=window[Et]),window[Et]=function(B,Z,me,ze){function Vt(){return(Vt=(0,te.Z)(function*(cn,Bn,Yn){try{"event"===cn?yield hn(B,Z,me,Bn,Yn):"config"===cn?yield Hn(B,Z,me,ze,Bn,Yn):"consent"===cn?B("consent","update",Yn):B("set",Bn)}catch(kr){lr.error(kr)}})).apply(this,arguments)}return function(cn,Bn,Yn){return Vt.apply(this,arguments)}}(Vt,B,Z,me),{gtagCore:Vt,wrappedGtag:window[Et]}}(ge,qt,Rn,jr,"gtag");Dr=Vt,Nr=cn,ns=!0}return ge[ze]=function(B,Z,me,ze,Et,Vt,cn){return ve.apply(this,arguments)}(B,qt,Rn,Z,Nr,jr,me),new qe(B)}function hl(){return Co.apply(this,arguments)}function Co(){return(Co=(0,te.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch(B){return!1}})).apply(this,arguments)}const po="@firebase/analytics";(0,ke._registerComponent)(new Q.wA(vn,(Z,{options:me})=>Io(Z.getProvider("app").getImmediate(),Z.getProvider("installations-internal").getImmediate(),me),"PUBLIC")),(0,ke._registerComponent)(new Q.wA("analytics-internal",function(Z){try{const me=Z.getProvider(vn).getImmediate();return{logEvent:(ze,Et,Vt)=>function(B,Z,me,ze){B=(0,oe.m9)(B),function(B,Z,me,ze,Et){return ui.apply(this,arguments)}(Dr,ge[B.app.options.appId],Z,me,ze).catch(Et=>lr.error(Et))}(me,ze,Et,Vt)}}catch(me){throw ho.create("interop-component-reg-failed",{reason:me})}},"PRIVATE")),(0,ke.registerVersion)(po,"0.8.3"),(0,ke.registerVersion)(po,"0.8.3","esm2017");var hh=F(7771),Zo=F(3637),yi=F(8891),Va=F(3342),Zi=F(3101),pl=F(309);const Xa=new y.GfV("7.4.1"),Bl="__angularfire_symbol__analyticsIsSupportedValue",ua="__angularfire_symbol__analyticsIsSupported",ks="__angularfire_symbol__remoteConfigIsSupportedValue",_s="__angularfire_symbol__remoteConfigIsSupported",Fo="__angularfire_symbol__messagingIsSupportedValue",ws="__angularfire_symbol__messagingIsSupported";function da(B,Z,me){if(Z){if(1===Z.length)return Z[0];const Vt=Z.filter(cn=>cn.app===me);if(1===Vt.length)return Vt[0]}return me.container.getProvider(B).getImmediate({optional:!0})}globalThis[ua]||(globalThis[ua]=hl().then(B=>globalThis[Bl]=B).catch(()=>globalThis[Bl]=!1)),globalThis[ws]||(globalThis[ws]=No().then(B=>globalThis[Fo]=B).catch(()=>globalThis[Fo]=!1)),globalThis[_s]||(globalThis[_s]=Ws().then(B=>globalThis[ks]=B).catch(()=>globalThis[ks]=!1));const pd=(B,Z)=>{const me=Z?[Z]:(0,A.C6)(),ze=[];return me.forEach(Et=>{Et.container.getProvider(B).instances.forEach(cn=>{ze.includes(cn)||ze.push(cn)})}),ze};function Qo(){}class ro{constructor(Z,me=hh.N){this.zone=Z,this.delegate=me}now(){return this.delegate.now()}schedule(Z,me,ze){const Et=this.zone;return this.delegate.schedule(function(cn){Et.runGuarded(()=>{Z.apply(this,[cn])})},me,ze)}}class Bo{constructor(Z){this.zone=Z,this.task=null}call(Z,me){const ze=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Qo,{},Qo,Qo)),me.pipe((0,Va.b)({next:ze,complete:ze,error:ze})).subscribe(Z).add(ze)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ja=(()=>{class B{constructor(me){this.ngZone=me,this.outsideAngular=me.runOutsideAngular(()=>new ro(Zone.current)),this.insideAngular=me.run(()=>new ro(Zone.current,Zo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return B.\u0275fac=function(me){return new(me||B)(y.LFG(y.R0b))},B.\u0275prov=y.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"}),B})();function To(){const B=globalThis.\u0275AngularFireScheduler;if(!B)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return B}function Qc(B){return To().ngZone.runOutsideAngular(()=>B())}function $o(B){return To().ngZone.run(()=>B())}function $a(B){return To(),function(B){return function(me){return(me=me.lift(new Bo(B.ngZone))).pipe((0,Zi.R)(B.outsideAngular),(0,pl.QV)(B.insideAngular))}}(To())(B)}const el=(B,Z)=>function(){const ze=arguments;return Z&&setTimeout(()=>{"scheduled"===Z.state&&Z.invoke()},10),$o(()=>B.apply(void 0,ze))},ha=(B,Z)=>function(){let me;const ze=arguments;for(let Vt=0;Vt<arguments.length;Vt++)"function"==typeof ze[Vt]&&(Z&&(me||(me=$o(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Qo,{},Qo,Qo)))),ze[Vt]=el(ze[Vt],me));const Et=Qc(()=>B.apply(this,ze));if(!Z){if(Et instanceof yi.y){const Vt=To();return Et.pipe((0,Zi.R)(Vt.outsideAngular),(0,pl.QV)(Vt.insideAngular))}return $o(()=>Et)}return Et instanceof yi.y?Et.pipe($a):Et instanceof Promise?$o(()=>new Promise((Vt,cn)=>Et.then(Bn=>$o(()=>Vt(Bn)),Bn=>$o(()=>cn(Bn))))):"function"==typeof Et&&me?function(){return setTimeout(()=>{me&&"scheduled"===me.state&&me.invoke()},10),Et.apply(this,arguments)}:$o(()=>Et)}},665:(en,it,F)=>{"use strict";F.d(it,{qu:()=>Ft,u:()=>Es,sg:()=>hi,u5:()=>K,JU:()=>_e,a5:()=>Un,JJ:()=>Xn,JL:()=>or,UX:()=>De,kI:()=>$t,_Y:()=>H});var y=F(7716),A=F(8583),te=F(8891),ke=F(9796),oe=F(8002),Q=F(1555),ye=F(4402);function Ce(G,$){return new te.y(k=>{const ce=G.length;if(0===ce)return void k.complete();const mt=new Array(ce);let _n=0,er=0;for(let Kr=0;Kr<ce;Kr++){const $i=(0,ye.D)(G[Kr]);let si=!1;k.add($i.subscribe({next:ni=>{si||(si=!0,er++),mt[Kr]=ni},error:ni=>k.error(ni),complete:()=>{_n++,(_n===ce||!si)&&(er===ce&&k.next($?$.reduce((ni,Zr,ar)=>(ni[Zr]=mt[ar],ni),{}):mt),k.complete())}}))}})}let re=(()=>{class G{constructor(k,ce){this._renderer=k,this._elementRef=ce,this.onChange=mt=>{},this.onTouched=()=>{}}setProperty(k,ce){this._renderer.setProperty(this._elementRef.nativeElement,k,ce)}registerOnTouched(k){this.onTouched=k}registerOnChange(k){this.onChange=k}setDisabledState(k){this.setProperty("disabled",k)}}return G.\u0275fac=function(k){return new(k||G)(y.Y36(y.Qsj),y.Y36(y.SBq))},G.\u0275dir=y.lG2({type:G}),G})(),he=(()=>{class G extends re{}return G.\u0275fac=function(){let $;return function(ce){return($||($=y.n5z(G)))(ce||G)}}(),G.\u0275dir=y.lG2({type:G,features:[y.qOj]}),G})();const _e=new y.OlP("NgValueAccessor"),ht={provide:_e,useExisting:(0,y.Gpc)(()=>Ge),multi:!0},Ze=new y.OlP("CompositionEventMode");let Ge=(()=>{class G extends re{constructor(k,ce,mt){super(k,ce),this._compositionMode=mt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const G=(0,A.q)()?(0,A.q)().getUserAgent():"";return/android (\d+)/.test(G.toLowerCase())}())}writeValue(k){this.setProperty("value",null==k?"":k)}_handleInput(k){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(k)}_compositionStart(){this._composing=!0}_compositionEnd(k){this._composing=!1,this._compositionMode&&this.onChange(k)}}return G.\u0275fac=function(k){return new(k||G)(y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(Ze,8))},G.\u0275dir=y.lG2({type:G,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(k,ce){1&k&&y.NdJ("input",function(_n){return ce._handleInput(_n.target.value)})("blur",function(){return ce.onTouched()})("compositionstart",function(){return ce._compositionStart()})("compositionend",function(_n){return ce._compositionEnd(_n.target.value)})},features:[y._Bn([ht]),y.qOj]}),G})();function ft(G){return null==G||0===G.length}function Se(G){return null!=G&&"number"==typeof G.length}const Ue=new y.OlP("NgValidators"),gt=new y.OlP("NgAsyncValidators"),ut=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class $t{static min($){return G=$,$=>{if(ft($.value)||ft(G))return null;const k=parseFloat($.value);return!isNaN(k)&&k<G?{min:{min:G,actual:$.value}}:null};var G}static max($){return G=$,$=>{if(ft($.value)||ft(G))return null;const k=parseFloat($.value);return!isNaN(k)&&k>G?{max:{max:G,actual:$.value}}:null};var G}static required($){return ft($.value)?{required:!0}:null}static requiredTrue($){return!0===$.value?null:{required:!0}}static email($){return ft((G=$).value)||ut.test(G.value)?null:{email:!0};var G}static minLength($){return G=$,$=>ft($.value)||!Se($.value)?null:$.value.length<G?{minlength:{requiredLength:G,actualLength:$.value.length}}:null;var G}static maxLength($){return G=$,$=>Se($.value)&&$.value.length>G?{maxlength:{requiredLength:G,actualLength:$.value.length}}:null;var G}static pattern($){return function(G){if(!G)return nt;let $,k;return"string"==typeof G?(k="","^"!==G.charAt(0)&&(k+="^"),k+=G,"$"!==G.charAt(G.length-1)&&(k+="$"),$=new RegExp(k)):(k=G.toString(),$=G),ce=>{if(ft(ce.value))return null;const mt=ce.value;return $.test(mt)?null:{pattern:{requiredPattern:k,actualValue:mt}}}}($)}static nullValidator($){return null}static compose($){return St($)}static composeAsync($){return Mt($)}}function nt(G){return null}function At(G){return null!=G}function Ie(G){const $=(0,y.QGY)(G)?(0,ye.D)(G):G;return(0,y.CqO)($),$}function Ye(G){let $={};return G.forEach(k=>{$=null!=k?Object.assign(Object.assign({},$),k):$}),0===Object.keys($).length?null:$}function Ve(G,$){return $.map(k=>k(G))}function tt(G){return G.map($=>function(G){return!G.validate}($)?$:k=>$.validate(k))}function St(G){if(!G)return null;const $=G.filter(At);return 0==$.length?null:function(k){return Ye(Ve(k,$))}}function Bt(G){return null!=G?St(tt(G)):null}function Mt(G){if(!G)return null;const $=G.filter(At);return 0==$.length?null:function(k){return function(...G){if(1===G.length){const $=G[0];if((0,ke.k)($))return Ce($,null);if((0,Q.K)($)&&Object.getPrototypeOf($)===Object.prototype){const k=Object.keys($);return Ce(k.map(ce=>$[ce]),k)}}if("function"==typeof G[G.length-1]){const $=G.pop();return Ce(G=1===G.length&&(0,ke.k)(G[0])?G[0]:G,null).pipe((0,oe.U)(k=>$(...k)))}return Ce(G,null)}(Ve(k,$).map(Ie)).pipe((0,oe.U)(Ye))}}function Nt(G){return null!=G?Mt(tt(G)):null}function gn(G,$){return null===G?[$]:Array.isArray(G)?[...G,$]:[G,$]}function Nn(G){return G._rawValidators}function wn(G){return G._rawAsyncValidators}function yn(G){return G?Array.isArray(G)?G:[G]:[]}function Sn(G,$){return Array.isArray(G)?G.includes($):G===$}function mr(G,$){const k=yn($);return yn(G).forEach(mt=>{Sn(k,mt)||k.push(mt)}),k}function cr(G,$){return yn($).filter(k=>!Sn(G,k))}let Tt=(()=>{class G{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(k){this._rawValidators=k||[],this._composedValidatorFn=Bt(this._rawValidators)}_setAsyncValidators(k){this._rawAsyncValidators=k||[],this._composedAsyncValidatorFn=Nt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(k){this._onDestroyCallbacks.push(k)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(k=>k()),this._onDestroyCallbacks=[]}reset(k){this.control&&this.control.reset(k)}hasError(k,ce){return!!this.control&&this.control.hasError(k,ce)}getError(k,ce){return this.control?this.control.getError(k,ce):null}}return G.\u0275fac=function(k){return new(k||G)},G.\u0275dir=y.lG2({type:G}),G})(),un=(()=>{class G extends Tt{get formDirective(){return null}get path(){return null}}return G.\u0275fac=function(){let $;return function(ce){return($||($=y.n5z(G)))(ce||G)}}(),G.\u0275dir=y.lG2({type:G,features:[y.qOj]}),G})();class Un extends Tt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Xt{constructor($){this._cd=$}is($){var k,ce,mt;return"submitted"===$?!!(null===(k=this._cd)||void 0===k?void 0:k.submitted):!!(null===(mt=null===(ce=this._cd)||void 0===ce?void 0:ce.control)||void 0===mt?void 0:mt[$])}}let Xn=(()=>{class G extends Xt{constructor(k){super(k)}}return G.\u0275fac=function(k){return new(k||G)(y.Y36(Un,2))},G.\u0275dir=y.lG2({type:G,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(k,ce){2&k&&y.ekj("ng-untouched",ce.is("untouched"))("ng-touched",ce.is("touched"))("ng-pristine",ce.is("pristine"))("ng-dirty",ce.is("dirty"))("ng-valid",ce.is("valid"))("ng-invalid",ce.is("invalid"))("ng-pending",ce.is("pending"))},features:[y.qOj]}),G})(),or=(()=>{class G extends Xt{constructor(k){super(k)}}return G.\u0275fac=function(k){return new(k||G)(y.Y36(un,10))},G.\u0275dir=y.lG2({type:G,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(k,ce){2&k&&y.ekj("ng-untouched",ce.is("untouched"))("ng-touched",ce.is("touched"))("ng-pristine",ce.is("pristine"))("ng-dirty",ce.is("dirty"))("ng-valid",ce.is("valid"))("ng-invalid",ce.is("invalid"))("ng-pending",ce.is("pending"))("ng-submitted",ce.is("submitted"))},features:[y.qOj]}),G})();function ir(G,$){fn(G,$),$.valueAccessor.writeValue(G.value),function(G,$){$.valueAccessor.registerOnChange(k=>{G._pendingValue=k,G._pendingChange=!0,G._pendingDirty=!0,"change"===G.updateOn&&at(G,$)})}(G,$),function(G,$){const k=(ce,mt)=>{$.valueAccessor.writeValue(ce),mt&&$.viewToModelUpdate(ce)};G.registerOnChange(k),$._registerOnDestroy(()=>{G._unregisterOnChange(k)})}(G,$),function(G,$){$.valueAccessor.registerOnTouched(()=>{G._pendingTouched=!0,"blur"===G.updateOn&&G._pendingChange&&at(G,$),"submit"!==G.updateOn&&G.markAsTouched()})}(G,$),function(G,$){if($.valueAccessor.setDisabledState){const k=ce=>{$.valueAccessor.setDisabledState(ce)};G.registerOnDisabledChange(k),$._registerOnDestroy(()=>{G._unregisterOnDisabledChange(k)})}}(G,$)}function Kn(G,$,k=!0){const ce=()=>{};$.valueAccessor&&($.valueAccessor.registerOnChange(ce),$.valueAccessor.registerOnTouched(ce)),Xe(G,$),G&&($._invokeOnDestroyCallbacks(),G._registerOnCollectionChange(()=>{}))}function Zn(G,$){G.forEach(k=>{k.registerOnValidatorChange&&k.registerOnValidatorChange($)})}function fn(G,$){const k=Nn(G);null!==$.validator?G.setValidators(gn(k,$.validator)):"function"==typeof k&&G.setValidators([k]);const ce=wn(G);null!==$.asyncValidator?G.setAsyncValidators(gn(ce,$.asyncValidator)):"function"==typeof ce&&G.setAsyncValidators([ce]);const mt=()=>G.updateValueAndValidity();Zn($._rawValidators,mt),Zn($._rawAsyncValidators,mt)}function Xe(G,$){let k=!1;if(null!==G){if(null!==$.validator){const mt=Nn(G);if(Array.isArray(mt)&&mt.length>0){const _n=mt.filter(er=>er!==$.validator);_n.length!==mt.length&&(k=!0,G.setValidators(_n))}}if(null!==$.asyncValidator){const mt=wn(G);if(Array.isArray(mt)&&mt.length>0){const _n=mt.filter(er=>er!==$.asyncValidator);_n.length!==mt.length&&(k=!0,G.setAsyncValidators(_n))}}}const ce=()=>{};return Zn($._rawValidators,ce),Zn($._rawAsyncValidators,ce),k}function at(G,$){G._pendingDirty&&G.markAsDirty(),G.setValue(G._pendingValue,{emitModelToViewChange:!1}),$.viewToModelUpdate(G._pendingValue),G._pendingChange=!1}function jn(G,$){const k=G.indexOf($);k>-1&&G.splice(k,1)}const Vn="VALID",mn="INVALID",In="PENDING",br="DISABLED";function Yt(G){return(dn(G)?G.validators:G)||null}function Ut(G){return Array.isArray(G)?Bt(G):G||null}function Cn(G,$){return(dn($)?$.asyncValidators:G)||null}function Mn(G){return Array.isArray(G)?Nt(G):G||null}function dn(G){return null!=G&&!Array.isArray(G)&&"object"==typeof G}class Vr{constructor($,k){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=$,this._rawAsyncValidators=k,this._composedValidatorFn=Ut(this._rawValidators),this._composedAsyncValidatorFn=Mn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator($){this._rawValidators=this._composedValidatorFn=$}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator($){this._rawAsyncValidators=this._composedAsyncValidatorFn=$}get parent(){return this._parent}get valid(){return this.status===Vn}get invalid(){return this.status===mn}get pending(){return this.status==In}get disabled(){return this.status===br}get enabled(){return this.status!==br}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators($){this._rawValidators=$,this._composedValidatorFn=Ut($)}setAsyncValidators($){this._rawAsyncValidators=$,this._composedAsyncValidatorFn=Mn($)}addValidators($){this.setValidators(mr($,this._rawValidators))}addAsyncValidators($){this.setAsyncValidators(mr($,this._rawAsyncValidators))}removeValidators($){this.setValidators(cr($,this._rawValidators))}removeAsyncValidators($){this.setAsyncValidators(cr($,this._rawAsyncValidators))}hasValidator($){return Sn(this._rawValidators,$)}hasAsyncValidator($){return Sn(this._rawAsyncValidators,$)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched($={}){this.touched=!0,this._parent&&!$.onlySelf&&this._parent.markAsTouched($)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild($=>$.markAllAsTouched())}markAsUntouched($={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(k=>{k.markAsUntouched({onlySelf:!0})}),this._parent&&!$.onlySelf&&this._parent._updateTouched($)}markAsDirty($={}){this.pristine=!1,this._parent&&!$.onlySelf&&this._parent.markAsDirty($)}markAsPristine($={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(k=>{k.markAsPristine({onlySelf:!0})}),this._parent&&!$.onlySelf&&this._parent._updatePristine($)}markAsPending($={}){this.status=In,!1!==$.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!$.onlySelf&&this._parent.markAsPending($)}disable($={}){const k=this._parentMarkedDirty($.onlySelf);this.status=br,this.errors=null,this._forEachChild(ce=>{ce.disable(Object.assign(Object.assign({},$),{onlySelf:!0}))}),this._updateValue(),!1!==$.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},$),{skipPristineCheck:k})),this._onDisabledChange.forEach(ce=>ce(!0))}enable($={}){const k=this._parentMarkedDirty($.onlySelf);this.status=Vn,this._forEachChild(ce=>{ce.enable(Object.assign(Object.assign({},$),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:$.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},$),{skipPristineCheck:k})),this._onDisabledChange.forEach(ce=>ce(!1))}_updateAncestors($){this._parent&&!$.onlySelf&&(this._parent.updateValueAndValidity($),$.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent($){this._parent=$}updateValueAndValidity($={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Vn||this.status===In)&&this._runAsyncValidator($.emitEvent)),!1!==$.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!$.onlySelf&&this._parent.updateValueAndValidity($)}_updateTreeValidity($={emitEvent:!0}){this._forEachChild(k=>k._updateTreeValidity($)),this.updateValueAndValidity({onlySelf:!0,emitEvent:$.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?br:Vn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator($){if(this.asyncValidator){this.status=In,this._hasOwnPendingAsyncValidator=!0;const k=Ie(this.asyncValidator(this));this._asyncValidationSubscription=k.subscribe(ce=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ce,{emitEvent:$})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors($,k={}){this.errors=$,this._updateControlsErrors(!1!==k.emitEvent)}get($){return function(G,$,k){if(null==$||(Array.isArray($)||($=$.split(".")),Array.isArray($)&&0===$.length))return null;let ce=G;return $.forEach(mt=>{ce=ce instanceof Fr?ce.controls.hasOwnProperty(mt)?ce.controls[mt]:null:ce instanceof wr&&ce.at(mt)||null}),ce}(this,$)}getError($,k){const ce=k?this.get(k):this;return ce&&ce.errors?ce.errors[$]:null}hasError($,k){return!!this.getError($,k)}get root(){let $=this;for(;$._parent;)$=$._parent;return $}_updateControlsErrors($){this.status=this._calculateStatus(),$&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors($)}_initObservables(){this.valueChanges=new y.vpe,this.statusChanges=new y.vpe}_calculateStatus(){return this._allControlsDisabled()?br:this.errors?mn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(In)?In:this._anyControlsHaveStatus(mn)?mn:Vn}_anyControlsHaveStatus($){return this._anyControls(k=>k.status===$)}_anyControlsDirty(){return this._anyControls($=>$.dirty)}_anyControlsTouched(){return this._anyControls($=>$.touched)}_updatePristine($={}){this.pristine=!this._anyControlsDirty(),this._parent&&!$.onlySelf&&this._parent._updatePristine($)}_updateTouched($={}){this.touched=this._anyControlsTouched(),this._parent&&!$.onlySelf&&this._parent._updateTouched($)}_isBoxedValue($){return"object"==typeof $&&null!==$&&2===Object.keys($).length&&"value"in $&&"disabled"in $}_registerOnCollectionChange($){this._onCollectionChange=$}_setUpdateStrategy($){dn($)&&null!=$.updateOn&&(this._updateOn=$.updateOn)}_parentMarkedDirty($){return!$&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Tr extends Vr{constructor($=null,k,ce){super(Yt(k),Cn(ce,k)),this._onChange=[],this._applyFormState($),this._setUpdateStrategy(k),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue($,k={}){this.value=this._pendingValue=$,this._onChange.length&&!1!==k.emitModelToViewChange&&this._onChange.forEach(ce=>ce(this.value,!1!==k.emitViewToModelChange)),this.updateValueAndValidity(k)}patchValue($,k={}){this.setValue($,k)}reset($=null,k={}){this._applyFormState($),this.markAsPristine(k),this.markAsUntouched(k),this.setValue(this.value,k),this._pendingChange=!1}_updateValue(){}_anyControls($){return!1}_allControlsDisabled(){return this.disabled}registerOnChange($){this._onChange.push($)}_unregisterOnChange($){jn(this._onChange,$)}registerOnDisabledChange($){this._onDisabledChange.push($)}_unregisterOnDisabledChange($){jn(this._onDisabledChange,$)}_forEachChild($){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState($){this._isBoxedValue($)?(this.value=this._pendingValue=$.value,$.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=$}}class Fr extends Vr{constructor($,k,ce){super(Yt(k),Cn(ce,k)),this.controls=$,this._initObservables(),this._setUpdateStrategy(k),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl($,k){return this.controls[$]?this.controls[$]:(this.controls[$]=k,k.setParent(this),k._registerOnCollectionChange(this._onCollectionChange),k)}addControl($,k,ce={}){this.registerControl($,k),this.updateValueAndValidity({emitEvent:ce.emitEvent}),this._onCollectionChange()}removeControl($,k={}){this.controls[$]&&this.controls[$]._registerOnCollectionChange(()=>{}),delete this.controls[$],this.updateValueAndValidity({emitEvent:k.emitEvent}),this._onCollectionChange()}setControl($,k,ce={}){this.controls[$]&&this.controls[$]._registerOnCollectionChange(()=>{}),delete this.controls[$],k&&this.registerControl($,k),this.updateValueAndValidity({emitEvent:ce.emitEvent}),this._onCollectionChange()}contains($){return this.controls.hasOwnProperty($)&&this.controls[$].enabled}setValue($,k={}){this._checkAllValuesPresent($),Object.keys($).forEach(ce=>{this._throwIfControlMissing(ce),this.controls[ce].setValue($[ce],{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k)}patchValue($,k={}){null!=$&&(Object.keys($).forEach(ce=>{this.controls[ce]&&this.controls[ce].patchValue($[ce],{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k))}reset($={},k={}){this._forEachChild((ce,mt)=>{ce.reset($[mt],{onlySelf:!0,emitEvent:k.emitEvent})}),this._updatePristine(k),this._updateTouched(k),this.updateValueAndValidity(k)}getRawValue(){return this._reduceChildren({},($,k,ce)=>($[ce]=k instanceof Tr?k.value:k.getRawValue(),$))}_syncPendingControls(){let $=this._reduceChildren(!1,(k,ce)=>!!ce._syncPendingControls()||k);return $&&this.updateValueAndValidity({onlySelf:!0}),$}_throwIfControlMissing($){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[$])throw new Error(`Cannot find form control with name: ${$}.`)}_forEachChild($){Object.keys(this.controls).forEach(k=>{const ce=this.controls[k];ce&&$(ce,k)})}_setUpControls(){this._forEachChild($=>{$.setParent(this),$._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls($){for(const k of Object.keys(this.controls)){const ce=this.controls[k];if(this.contains(k)&&$(ce))return!0}return!1}_reduceValue(){return this._reduceChildren({},($,k,ce)=>((k.enabled||this.disabled)&&($[ce]=k.value),$))}_reduceChildren($,k){let ce=$;return this._forEachChild((mt,_n)=>{ce=k(ce,mt,_n)}),ce}_allControlsDisabled(){for(const $ of Object.keys(this.controls))if(this.controls[$].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent($){this._forEachChild((k,ce)=>{if(void 0===$[ce])throw new Error(`Must supply a value for form control with name: '${ce}'.`)})}}class wr extends Vr{constructor($,k,ce){super(Yt(k),Cn(ce,k)),this.controls=$,this._initObservables(),this._setUpdateStrategy(k),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at($){return this.controls[$]}push($,k={}){this.controls.push($),this._registerControl($),this.updateValueAndValidity({emitEvent:k.emitEvent}),this._onCollectionChange()}insert($,k,ce={}){this.controls.splice($,0,k),this._registerControl(k),this.updateValueAndValidity({emitEvent:ce.emitEvent})}removeAt($,k={}){this.controls[$]&&this.controls[$]._registerOnCollectionChange(()=>{}),this.controls.splice($,1),this.updateValueAndValidity({emitEvent:k.emitEvent})}setControl($,k,ce={}){this.controls[$]&&this.controls[$]._registerOnCollectionChange(()=>{}),this.controls.splice($,1),k&&(this.controls.splice($,0,k),this._registerControl(k)),this.updateValueAndValidity({emitEvent:ce.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue($,k={}){this._checkAllValuesPresent($),$.forEach((ce,mt)=>{this._throwIfControlMissing(mt),this.at(mt).setValue(ce,{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k)}patchValue($,k={}){null!=$&&($.forEach((ce,mt)=>{this.at(mt)&&this.at(mt).patchValue(ce,{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k))}reset($=[],k={}){this._forEachChild((ce,mt)=>{ce.reset($[mt],{onlySelf:!0,emitEvent:k.emitEvent})}),this._updatePristine(k),this._updateTouched(k),this.updateValueAndValidity(k)}getRawValue(){return this.controls.map($=>$ instanceof Tr?$.value:$.getRawValue())}clear($={}){this.controls.length<1||(this._forEachChild(k=>k._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:$.emitEvent}))}_syncPendingControls(){let $=this.controls.reduce((k,ce)=>!!ce._syncPendingControls()||k,!1);return $&&this.updateValueAndValidity({onlySelf:!0}),$}_throwIfControlMissing($){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at($))throw new Error(`Cannot find form control at index ${$}`)}_forEachChild($){this.controls.forEach((k,ce)=>{$(k,ce)})}_updateValue(){this.value=this.controls.filter($=>$.enabled||this.disabled).map($=>$.value)}_anyControls($){return this.controls.some(k=>k.enabled&&$(k))}_setUpControls(){this._forEachChild($=>this._registerControl($))}_checkAllValuesPresent($){this._forEachChild((k,ce)=>{if(void 0===$[ce])throw new Error(`Must supply a value for form control at index: ${ce}.`)})}_allControlsDisabled(){for(const $ of this.controls)if($.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl($){$.setParent(this),$._registerOnCollectionChange(this._onCollectionChange)}}let H=(()=>{class G{}return G.\u0275fac=function(k){return new(k||G)},G.\u0275dir=y.lG2({type:G,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),G})(),Ot=(()=>{class G{}return G.\u0275fac=function(k){return new(k||G)},G.\u0275mod=y.oAB({type:G}),G.\u0275inj=y.cJS({}),G})();const $n=new y.OlP("NgModelWithFormControlWarning"),ss={provide:un,useExisting:(0,y.Gpc)(()=>hi)};let hi=(()=>{class G extends un{constructor(k,ce){super(),this.validators=k,this.asyncValidators=ce,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new y.vpe,this._setValidators(k),this._setAsyncValidators(ce)}ngOnChanges(k){this._checkFormPresent(),k.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Xe(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(k){const ce=this.form.get(k.path);return ir(ce,k),ce.updateValueAndValidity({emitEvent:!1}),this.directives.push(k),ce}getControl(k){return this.form.get(k.path)}removeControl(k){Kn(k.control||null,k,!1),jn(this.directives,k)}addFormGroup(k){this._setUpFormContainer(k)}removeFormGroup(k){this._cleanUpFormContainer(k)}getFormGroup(k){return this.form.get(k.path)}addFormArray(k){this._setUpFormContainer(k)}removeFormArray(k){this._cleanUpFormContainer(k)}getFormArray(k){return this.form.get(k.path)}updateModel(k,ce){this.form.get(k.path).setValue(ce)}onSubmit(k){return this.submitted=!0,function(G,$){G._syncPendingControls(),$.forEach(k=>{const ce=k.control;"submit"===ce.updateOn&&ce._pendingChange&&(k.viewToModelUpdate(ce._pendingValue),ce._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(k),!1}onReset(){this.resetForm()}resetForm(k){this.form.reset(k),this.submitted=!1}_updateDomValue(){this.directives.forEach(k=>{const ce=k.control,mt=this.form.get(k.path);ce!==mt&&(Kn(ce||null,k),mt instanceof Tr&&(ir(mt,k),k.control=mt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(k){const ce=this.form.get(k.path);(function(G,$){fn(G,$)})(ce,k),ce.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(k){if(this.form){const ce=this.form.get(k.path);ce&&function(G,$){return Xe(G,$)}(ce,k)&&ce.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){fn(this.form,this),this._oldForm&&Xe(this._oldForm,this)}_checkFormPresent(){}}return G.\u0275fac=function(k){return new(k||G)(y.Y36(Ue,10),y.Y36(gt,10))},G.\u0275dir=y.lG2({type:G,selectors:[["","formGroup",""]],hostBindings:function(k,ce){1&k&&y.NdJ("submit",function(_n){return ce.onSubmit(_n)})("reset",function(){return ce.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[y._Bn([ss]),y.qOj,y.TTD]}),G})();const Hi={provide:Un,useExisting:(0,y.Gpc)(()=>Es)};let Es=(()=>{class G extends Un{constructor(k,ce,mt,_n,er){super(),this._ngModelWarningConfig=er,this._added=!1,this.update=new y.vpe,this._ngModelWarningSent=!1,this._parent=k,this._setValidators(ce),this._setAsyncValidators(mt),this.valueAccessor=function(G,$){if(!$)return null;let k,ce,mt;return Array.isArray($),$.forEach(_n=>{_n.constructor===Ge?k=_n:function(G){return Object.getPrototypeOf(G.constructor)===he}(_n)?ce=_n:mt=_n}),mt||ce||k||null}(0,_n)}set isDisabled(k){}ngOnChanges(k){this._added||this._setUpControl(),function(G,$){if(!G.hasOwnProperty("model"))return!1;const k=G.model;return!!k.isFirstChange()||!Object.is($,k.currentValue)}(k,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(k){this.viewModel=k,this.update.emit(k)}get path(){return function(G,$){return[...$.path,G]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return G.\u0275fac=function(k){return new(k||G)(y.Y36(un,13),y.Y36(Ue,10),y.Y36(gt,10),y.Y36(_e,10),y.Y36($n,8))},G.\u0275dir=y.lG2({type:G,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[y._Bn([Hi]),y.qOj,y.TTD]}),G._ngModelWarningSentOnce=!1,G})(),fe=(()=>{class G{}return G.\u0275fac=function(k){return new(k||G)},G.\u0275mod=y.oAB({type:G}),G.\u0275inj=y.cJS({imports:[[Ot]]}),G})(),K=(()=>{class G{}return G.\u0275fac=function(k){return new(k||G)},G.\u0275mod=y.oAB({type:G}),G.\u0275inj=y.cJS({imports:[fe]}),G})(),De=(()=>{class G{static withConfig(k){return{ngModule:G,providers:[{provide:$n,useValue:k.warnOnNgModelWithFormControl}]}}}return G.\u0275fac=function(k){return new(k||G)},G.\u0275mod=y.oAB({type:G}),G.\u0275inj=y.cJS({imports:[fe]}),G})(),Ft=(()=>{class G{group(k,ce=null){const mt=this._reduceControls(k);let Kr,_n=null,er=null;return null!=ce&&(function(G){return void 0!==G.asyncValidators||void 0!==G.validators||void 0!==G.updateOn}(ce)?(_n=null!=ce.validators?ce.validators:null,er=null!=ce.asyncValidators?ce.asyncValidators:null,Kr=null!=ce.updateOn?ce.updateOn:void 0):(_n=null!=ce.validator?ce.validator:null,er=null!=ce.asyncValidator?ce.asyncValidator:null)),new Fr(mt,{asyncValidators:er,updateOn:Kr,validators:_n})}control(k,ce,mt){return new Tr(k,ce,mt)}array(k,ce,mt){const _n=k.map(er=>this._createControl(er));return new wr(_n,ce,mt)}_reduceControls(k){const ce={};return Object.keys(k).forEach(mt=>{ce[mt]=this._createControl(k[mt])}),ce}_createControl(k){return k instanceof Tr||k instanceof Fr||k instanceof wr?k:Array.isArray(k)?this.control(k[0],k.length>1?k[1]:null,k.length>2?k[2]:null):this.control(k)}}return G.\u0275fac=function(k){return new(k||G)},G.\u0275prov=(0,y.Yz7)({factory:function(){return new G},token:G,providedIn:De}),G})()},174:(en,it,F)=>{"use strict";F.d(it,{gz:()=>xt,y6:()=>On,OD:()=>un,eC:()=>rn,wm:()=>Ti,wN:()=>q,F0:()=>Hn,rH:()=>bt,Bz:()=>dr,Hx:()=>Cn});var y=F(8583),A=F(7716),te=F(4869),ke=F(9796),oe=F(5197),Q=F(509),ye=F(6693);const L={};class re{constructor(x){this.resultSelector=x}call(x,S){return S.subscribe(new he(x,this.resultSelector))}}class he extends oe.L{constructor(x,S){super(x),this.resultSelector=S,this.active=0,this.values=[],this.observables=[]}_next(x){this.values.push(L),this.observables.push(x)}_complete(){const x=this.observables,S=x.length;if(0===S)this.destination.complete();else{this.active=S,this.toRespond=S;for(let j=0;j<S;j++)this.add((0,Q.D)(this,x[j],void 0,j))}}notifyComplete(x){0==(this.active-=1)&&this.destination.complete()}notifyNext(x,S,j){const J=this.values,qe=this.toRespond?J[j]===L?--this.toRespond:this.toRespond:0;J[j]=S,0===qe&&(this.resultSelector?this._tryResultSelector(J):this.destination.next(J.slice()))}_tryResultSelector(x){let S;try{S=this.resultSelector.apply(this,x)}catch(j){return void this.destination.error(j)}this.destination.next(S)}}var _e=F(8891),le=F(4402),we=F(9193);function ht(V){return new _e.y(x=>{let S;try{S=V()}catch(J){return void x.error(J)}return(S?(0,le.D)(S):(0,we.c)()).subscribe(x)})}var Ae=F(5917),Ze=F(6215),Ge=F(3410),ft=F(8071),Se=F(2441),Ue=F(9765),gt=F(5345);function ut(V){return function(S){const j=new $t(V),J=S.lift(j);return j.caught=J}}class $t{constructor(x){this.selector=x}call(x,S){return S.subscribe(new E(x,this.selector,this.caught))}}class E extends gt.Ds{constructor(x,S,j){super(x),this.selector=S,this.caught=j}error(x){if(!this.isStopped){let S;try{S=this.selector(x,this.caught)}catch(ve){return void super.error(ve)}this._unsubscribeAndRecycle();const j=new gt.IY(this);this.add(j);const J=(0,gt.ft)(S,j);J!==j&&this.add(J)}}}var pt=F(9773);function Dt(V,x){return(0,pt.zg)(V,x,1)}var Pe=F(5435),be=F(7393),Me=F(7108);function et(V){return function(S){return 0===V?(0,we.c)():S.lift(new dt(V))}}class dt{constructor(x){if(this.total=x,this.total<0)throw new Me.W}call(x,S){return S.subscribe(new nt(x,this.total))}}class nt extends be.L{constructor(x,S){super(x),this.total=S,this.ring=new Array,this.count=0}_next(x){const S=this.ring,j=this.total,J=this.count++;S.length<j?S.push(x):S[J%j]=x}_complete(){const x=this.destination;let S=this.count;if(S>0){const j=this.count>=this.total?this.total:this.count,J=this.ring;for(let ve=0;ve<j;ve++){const qe=S++%j;x.next(J[qe])}}x.complete()}}var At=F(4635),Ie=F(5242),Ye=F(4487),Fe=F(5319);class St{constructor(x){this.callback=x}call(x,S){return S.subscribe(new Bt(x,this.callback))}}class Bt extends be.L{constructor(x,S){super(x),this.add(new Fe.w(S))}}var Mt=F(8002),Nt=F(3190),gn=F(5257),Nn=F(9761),wn=F(2145),yn=F(8049),Sn=F(3342),mr=F(1307),cr=F(3282);class Tt{constructor(x,S){this.id=x,this.url=S}}class un extends Tt{constructor(x,S,j="imperative",J=null){super(x,S),this.navigationTrigger=j,this.restoredState=J}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Un extends Tt{constructor(x,S,j){super(x,S),this.urlAfterRedirects=j}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Xt extends Tt{constructor(x,S,j){super(x,S),this.reason=j}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ln extends Tt{constructor(x,S,j){super(x,S),this.error=j}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class kn extends Tt{constructor(x,S,j,J){super(x,S),this.urlAfterRedirects=j,this.state=J}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xn extends Tt{constructor(x,S,j,J){super(x,S),this.urlAfterRedirects=j,this.state=J}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class or extends Tt{constructor(x,S,j,J,ve){super(x,S),this.urlAfterRedirects=j,this.state=J,this.shouldActivate=ve}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class vr extends Tt{constructor(x,S,j,J){super(x,S),this.urlAfterRedirects=j,this.state=J}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Er extends Tt{constructor(x,S,j,J){super(x,S),this.urlAfterRedirects=j,this.state=J}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hr{constructor(x){this.route=x}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ei{constructor(x){this.route=x}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class nr{constructor(x){this.snapshot=x}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ht{constructor(x){this.snapshot=x}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class It{constructor(x){this.snapshot=x}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ur{constructor(x){this.snapshot=x}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pr{constructor(x,S,j){this.routerEvent=x,this.position=S,this.anchor=j}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const rn="primary";class En{constructor(x){this.params=x||{}}has(x){return Object.prototype.hasOwnProperty.call(this.params,x)}get(x){if(this.has(x)){const S=this.params[x];return Array.isArray(S)?S[0]:S}return null}getAll(x){if(this.has(x)){const S=this.params[x];return Array.isArray(S)?S:[S]}return[]}get keys(){return Object.keys(this.params)}}function Jn(V){return new En(V)}const rr="ngNavigationCancelingError";function ir(V){const x=Error("NavigationCancelingError: "+V);return x[rr]=!0,x}function Zn(V,x,S){const j=S.path.split("/");if(j.length>V.length||"full"===S.pathMatch&&(x.hasChildren()||j.length<V.length))return null;const J={};for(let ve=0;ve<j.length;ve++){const qe=j[ve],ge=V[ve];if(qe.startsWith(":"))J[qe.substring(1)]=ge;else if(qe!==ge.path)return null}return{consumed:V.slice(0,j.length),posParams:J}}function fn(V,x){const S=V?Object.keys(V):void 0,j=x?Object.keys(x):void 0;if(!S||!j||S.length!=j.length)return!1;let J;for(let ve=0;ve<S.length;ve++)if(J=S[ve],!Xe(V[J],x[J]))return!1;return!0}function Xe(V,x){if(Array.isArray(V)&&Array.isArray(x)){if(V.length!==x.length)return!1;const S=[...V].sort(),j=[...x].sort();return S.every((J,ve)=>j[ve]===J)}return V===x}function se(V){return Array.prototype.concat.apply([],V)}function xe(V){return V.length>0?V[V.length-1]:null}function Ct(V,x){for(const S in V)V.hasOwnProperty(S)&&x(V[S],S)}function Be(V){return(0,A.CqO)(V)?V:(0,A.QGY)(V)?(0,le.D)(Promise.resolve(V)):(0,Ae.of)(V)}const ct={exact:function wt(V,x,S){if(!Yt(V.segments,x.segments)||!Vn(V.segments,x.segments,S)||V.numberOfChildren!==x.numberOfChildren)return!1;for(const j in x.children)if(!V.children[j]||!wt(V.children[j],x.children[j],S))return!1;return!0},subset:jn},We={exact:function(V,x){return fn(V,x)},subset:function(V,x){return Object.keys(x).length<=Object.keys(V).length&&Object.keys(x).every(S=>Xe(V[S],x[S]))},ignored:()=>!0};function Ee(V,x,S){return ct[S.paths](V.root,x.root,S.matrixParams)&&We[S.queryParams](V.queryParams,x.queryParams)&&!("exact"===S.fragment&&V.fragment!==x.fragment)}function jn(V,x,S){return An(V,x,x.segments,S)}function An(V,x,S,j){if(V.segments.length>S.length){const J=V.segments.slice(0,S.length);return!(!Yt(J,S)||x.hasChildren()||!Vn(J,S,j))}if(V.segments.length===S.length){if(!Yt(V.segments,S)||!Vn(V.segments,S,j))return!1;for(const J in x.children)if(!V.children[J]||!jn(V.children[J],x.children[J],j))return!1;return!0}{const J=S.slice(0,V.segments.length),ve=S.slice(V.segments.length);return!!(Yt(V.segments,J)&&Vn(V.segments,J,j)&&V.children[rn])&&An(V.children[rn],x,ve,j)}}function Vn(V,x,S){return x.every((j,J)=>We[S](V[J].parameters,j.parameters))}class mn{constructor(x,S,j){this.root=x,this.queryParams=S,this.fragment=j}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jn(this.queryParams)),this._queryParamMap}toString(){return dn.serialize(this)}}class In{constructor(x,S){this.segments=x,this.children=S,this.parent=null,Ct(S,(j,J)=>j.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Vr(this)}}class br{constructor(x,S){this.path=x,this.parameters=S}get parameterMap(){return this._parameterMap||(this._parameterMap=Jn(this.parameters)),this._parameterMap}toString(){return di(this)}}function Yt(V,x){return V.length===x.length&&V.every((S,j)=>S.path===x[j].path)}class Cn{}class Mn{parse(x){const S=new _t(x);return new mn(S.parseRootSegment(),S.parseQueryParams(),S.parseFragment())}serialize(x){const S=`/${Tr(x.root,!0)}`,j=function(V){const x=Object.keys(V).map(S=>{const j=V[S];return Array.isArray(j)?j.map(J=>`${wr(S)}=${wr(J)}`).join("&"):`${wr(S)}=${wr(j)}`}).filter(S=>!!S);return x.length?`?${x.join("&")}`:""}(x.queryParams);var V;return`${S}${j}${"string"==typeof x.fragment?`#${V=x.fragment,encodeURI(V)}`:""}`}}const dn=new Mn;function Vr(V){return V.segments.map(x=>di(x)).join("/")}function Tr(V,x){if(!V.hasChildren())return Vr(V);if(x){const S=V.children[rn]?Tr(V.children[rn],!1):"",j=[];return Ct(V.children,(J,ve)=>{ve!==rn&&j.push(`${ve}:${Tr(J,!1)}`)}),j.length>0?`${S}(${j.join("//")})`:S}{const S=function(V,x){let S=[];return Ct(V.children,(j,J)=>{J===rn&&(S=S.concat(x(j,J)))}),Ct(V.children,(j,J)=>{J!==rn&&(S=S.concat(x(j,J)))}),S}(V,(j,J)=>J===rn?[Tr(V.children[rn],!1)]:[`${J}:${Tr(j,!1)}`]);return 1===Object.keys(V.children).length&&null!=V.children[rn]?`${Vr(V)}/${S[0]}`:`${Vr(V)}/(${S.join("//")})`}}function Fr(V){return encodeURIComponent(V).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function wr(V){return Fr(V).replace(/%3B/gi,";")}function Xi(V){return Fr(V).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Qn(V){return decodeURIComponent(V)}function Wr(V){return Qn(V.replace(/\+/g,"%20"))}function di(V){return`${Xi(V.path)}${function(V){return Object.keys(V).map(x=>`;${Xi(x)}=${Xi(V[x])}`).join("")}(V.parameters)}`}const $r=/^[^\/()?;=#]+/;function zi(V){const x=V.match($r);return x?x[0]:""}const qr=/^[^=?&#]+/,Ar=/^[^?&#]+/;class _t{constructor(x){this.url=x,this.remaining=x}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new In([],{}):new In([],this.parseChildren())}parseQueryParams(){const x={};if(this.consumeOptional("?"))do{this.parseQueryParam(x)}while(this.consumeOptional("&"));return x}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const x=[];for(this.peekStartsWith("(")||x.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),x.push(this.parseSegment());let S={};this.peekStartsWith("/(")&&(this.capture("/"),S=this.parseParens(!0));let j={};return this.peekStartsWith("(")&&(j=this.parseParens(!1)),(x.length>0||Object.keys(S).length>0)&&(j[rn]=new In(x,S)),j}parseSegment(){const x=zi(this.remaining);if(""===x&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(x),new br(Qn(x),this.parseMatrixParams())}parseMatrixParams(){const x={};for(;this.consumeOptional(";");)this.parseParam(x);return x}parseParam(x){const S=zi(this.remaining);if(!S)return;this.capture(S);let j="";if(this.consumeOptional("=")){const J=zi(this.remaining);J&&(j=J,this.capture(j))}x[Qn(S)]=Qn(j)}parseQueryParam(x){const S=function(V){const x=V.match(qr);return x?x[0]:""}(this.remaining);if(!S)return;this.capture(S);let j="";if(this.consumeOptional("=")){const qe=function(V){const x=V.match(Ar);return x?x[0]:""}(this.remaining);qe&&(j=qe,this.capture(j))}const J=Wr(S),ve=Wr(j);if(x.hasOwnProperty(J)){let qe=x[J];Array.isArray(qe)||(qe=[qe],x[J]=qe),qe.push(ve)}else x[J]=ve}parseParens(x){const S={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const j=zi(this.remaining),J=this.remaining[j.length];if("/"!==J&&")"!==J&&";"!==J)throw new Error(`Cannot parse url '${this.url}'`);let ve;j.indexOf(":")>-1?(ve=j.substr(0,j.indexOf(":")),this.capture(ve),this.capture(":")):x&&(ve=rn);const qe=this.parseChildren();S[ve]=1===Object.keys(qe).length?qe[rn]:new In([],qe),this.consumeOptional("//")}return S}peekStartsWith(x){return this.remaining.startsWith(x)}consumeOptional(x){return!!this.peekStartsWith(x)&&(this.remaining=this.remaining.substring(x.length),!0)}capture(x){if(!this.consumeOptional(x))throw new Error(`Expected "${x}".`)}}class Y{constructor(x){this._root=x}get root(){return this._root.value}parent(x){const S=this.pathFromRoot(x);return S.length>1?S[S.length-2]:null}children(x){const S=H(x,this._root);return S?S.children.map(j=>j.value):[]}firstChild(x){const S=H(x,this._root);return S&&S.children.length>0?S.children[0].value:null}siblings(x){const S=ue(x,this._root);return S.length<2?[]:S[S.length-2].children.map(J=>J.value).filter(J=>J!==x)}pathFromRoot(x){return ue(x,this._root).map(S=>S.value)}}function H(V,x){if(V===x.value)return x;for(const S of x.children){const j=H(V,S);if(j)return j}return null}function ue(V,x){if(V===x.value)return[x];for(const S of x.children){const j=ue(V,S);if(j.length)return j.unshift(x),j}return[]}class Te{constructor(x,S){this.value=x,this.children=S}toString(){return`TreeNode(${this.value})`}}function Je(V){const x={};return V&&V.children.forEach(S=>x[S.value.outlet]=S),x}class rt extends Y{constructor(x,S){super(x),this.snapshot=S,xr(this,x)}toString(){return this.snapshot.toString()}}function Ot(V,x){const S=function(V,x){const qe=new $n([],{},{},"",{},rn,x,null,V.root,-1,{});return new Gn("",new Te(qe,[]))}(V,x),j=new Ze.X([new br("",{})]),J=new Ze.X({}),ve=new Ze.X({}),qe=new Ze.X({}),ge=new Ze.X(""),qt=new xt(j,J,qe,ge,ve,rn,x,S.root);return qt.snapshot=S.root,new rt(new Te(qt,[]),S)}class xt{constructor(x,S,j,J,ve,qe,ge,qt){this.url=x,this.params=S,this.queryParams=j,this.fragment=J,this.data=ve,this.outlet=qe,this.component=ge,this._futureSnapshot=qt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Mt.U)(x=>Jn(x)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Mt.U)(x=>Jn(x)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function on(V,x="emptyOnly"){const S=V.pathFromRoot;let j=0;if("always"!==x)for(j=S.length-1;j>=1;){const J=S[j],ve=S[j-1];if(J.routeConfig&&""===J.routeConfig.path)j--;else{if(ve.component)break;j--}}return function(V){return V.reduce((x,S)=>({params:Object.assign(Object.assign({},x.params),S.params),data:Object.assign(Object.assign({},x.data),S.data),resolve:Object.assign(Object.assign({},x.resolve),S._resolvedData)}),{params:{},data:{},resolve:{}})}(S.slice(j))}class $n{constructor(x,S,j,J,ve,qe,ge,qt,Rn,jr,tr){this.url=x,this.params=S,this.queryParams=j,this.fragment=J,this.data=ve,this.outlet=qe,this.component=ge,this.routeConfig=qt,this._urlSegment=Rn,this._lastPathIndex=jr,this._resolve=tr}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Jn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(j=>j.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Gn extends Y{constructor(x,S){super(S),this.url=x,xr(this,S)}toString(){return ss(this._root)}}function xr(V,x){x.value._routerState=V,x.children.forEach(S=>xr(V,S))}function ss(V){const x=V.children.length>0?` { ${V.children.map(ss).join(", ")} } `:"";return`${V.value}${x}`}function hi(V){if(V.snapshot){const x=V.snapshot,S=V._futureSnapshot;V.snapshot=S,fn(x.queryParams,S.queryParams)||V.queryParams.next(S.queryParams),x.fragment!==S.fragment&&V.fragment.next(S.fragment),fn(x.params,S.params)||V.params.next(S.params),function(V,x){if(V.length!==x.length)return!1;for(let S=0;S<V.length;++S)if(!fn(V[S],x[S]))return!1;return!0}(x.url,S.url)||V.url.next(S.url),fn(x.data,S.data)||V.data.next(S.data)}else V.snapshot=V._futureSnapshot,V.data.next(V._futureSnapshot.data)}function bi(V,x){const S=fn(V.params,x.params)&&function(V,x){return Yt(V,x)&&V.every((S,j)=>fn(S.parameters,x[j].parameters))}(V.url,x.url);return S&&!(!V.parent!=!x.parent)&&(!V.parent||bi(V.parent,x.parent))}function vs(V,x,S){if(S&&V.shouldReuseRoute(x.value,S.value.snapshot)){const j=S.value;j._futureSnapshot=x.value;const J=function(V,x,S){return x.children.map(j=>{for(const J of S.children)if(V.shouldReuseRoute(j.value,J.value.snapshot))return vs(V,j,J);return vs(V,j)})}(V,x,S);return new Te(j,J)}{if(V.shouldAttach(x.value)){const ve=V.retrieve(x.value);if(null!==ve){const qe=ve.route;return li(x,qe),qe}}const j=function(V){return new xt(new Ze.X(V.url),new Ze.X(V.params),new Ze.X(V.queryParams),new Ze.X(V.fragment),new Ze.X(V.data),V.outlet,V.component,V)}(x.value),J=x.children.map(ve=>vs(V,ve));return new Te(j,J)}}function li(V,x){if(V.value.routeConfig!==x.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(V.children.length!==x.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");x.value._futureSnapshot=V.value;for(let S=0;S<V.children.length;++S)li(V.children[S],x.children[S])}function je(V){return"object"==typeof V&&null!=V&&!V.outlets&&!V.segmentPath}function Rs(V){return"object"==typeof V&&null!=V&&V.outlets}function xo(V,x,S,j,J){let ve={};return j&&Ct(j,(qe,ge)=>{ve[ge]=Array.isArray(qe)?qe.map(qt=>`${qt}`):`${qe}`}),new mn(S.root===V?x:Ro(S.root,V,x),ve,J)}function Ro(V,x,S){const j={};return Ct(V.children,(J,ve)=>{j[ve]=J===x?S:Ro(J,x,S)}),new In(V.segments,j)}class mo{constructor(x,S,j){if(this.isAbsolute=x,this.numberOfDoubleDots=S,this.commands=j,x&&j.length>0&&je(j[0]))throw new Error("Root segment cannot have matrix parameters");const J=j.find(Rs);if(J&&J!==xe(j))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ps{constructor(x,S,j){this.segmentGroup=x,this.processChildren=S,this.index=j}}function yo(V,x,S){if(V||(V=new In([],{})),0===V.segments.length&&V.hasChildren())return Ur(V,x,S);const j=function(V,x,S){let j=0,J=x;const ve={match:!1,pathIndex:0,commandIndex:0};for(;J<V.segments.length;){if(j>=S.length)return ve;const qe=V.segments[J],ge=S[j];if(Rs(ge))break;const qt=`${ge}`,Rn=j<S.length-1?S[j+1]:null;if(J>0&&void 0===qt)break;if(qt&&Rn&&"object"==typeof Rn&&void 0===Rn.outlets){if(!Yi(qt,Rn,qe))return ve;j+=2}else{if(!Yi(qt,{},qe))return ve;j++}J++}return{match:!0,pathIndex:J,commandIndex:j}}(V,x,S),J=S.slice(j.commandIndex);if(j.match&&j.pathIndex<V.segments.length){const ve=new In(V.segments.slice(0,j.pathIndex),{});return ve.children[rn]=new In(V.segments.slice(j.pathIndex),V.children),Ur(ve,0,J)}return j.match&&0===J.length?new In(V.segments,{}):j.match&&!V.hasChildren()?Ji(V,x,S):j.match?Ur(V,0,J):Ji(V,x,S)}function Ur(V,x,S){if(0===S.length)return new In(V.segments,{});{const j=function(V){return Rs(V[0])?V[0].outlets:{[rn]:V}}(S),J={};return Ct(j,(ve,qe)=>{"string"==typeof ve&&(ve=[ve]),null!==ve&&(J[qe]=yo(V.children[qe],x,ve))}),Ct(V.children,(ve,qe)=>{void 0===j[qe]&&(J[qe]=ve)}),new In(V.segments,J)}}function Ji(V,x,S){const j=V.segments.slice(0,x);let J=0;for(;J<S.length;){const ve=S[J];if(Rs(ve)){const qt=bs(ve.outlets);return new In(j,qt)}if(0===J&&je(S[0])){j.push(new br(V.segments[x].path,es(S[0]))),J++;continue}const qe=Rs(ve)?ve.outlets[rn]:`${ve}`,ge=J<S.length-1?S[J+1]:null;qe&&ge&&je(ge)?(j.push(new br(qe,es(ge))),J+=2):(j.push(new br(qe,{})),J++)}return new In(j,{})}function bs(V){const x={};return Ct(V,(S,j)=>{"string"==typeof S&&(S=[S]),null!==S&&(x[j]=Ji(new In([],{}),0,S))}),x}function es(V){const x={};return Ct(V,(S,j)=>x[j]=`${S}`),x}function Yi(V,x,S){return V==S.path&&fn(x,S.parameters)}class _i{constructor(x,S,j,J){this.routeReuseStrategy=x,this.futureState=S,this.currState=j,this.forwardEvent=J}activate(x){const S=this.futureState._root,j=this.currState?this.currState._root:null;this.deactivateChildRoutes(S,j,x),hi(this.futureState.root),this.activateChildRoutes(S,j,x)}deactivateChildRoutes(x,S,j){const J=Je(S);x.children.forEach(ve=>{const qe=ve.value.outlet;this.deactivateRoutes(ve,J[qe],j),delete J[qe]}),Ct(J,(ve,qe)=>{this.deactivateRouteAndItsChildren(ve,j)})}deactivateRoutes(x,S,j){const J=x.value,ve=S?S.value:null;if(J===ve)if(J.component){const qe=j.getContext(J.outlet);qe&&this.deactivateChildRoutes(x,S,qe.children)}else this.deactivateChildRoutes(x,S,j);else ve&&this.deactivateRouteAndItsChildren(S,j)}deactivateRouteAndItsChildren(x,S){this.routeReuseStrategy.shouldDetach(x.value.snapshot)?this.detachAndStoreRouteSubtree(x,S):this.deactivateRouteAndOutlet(x,S)}detachAndStoreRouteSubtree(x,S){const j=S.getContext(x.value.outlet);if(j&&j.outlet){const J=j.outlet.detach(),ve=j.children.onOutletDeactivated();this.routeReuseStrategy.store(x.value.snapshot,{componentRef:J,route:x,contexts:ve})}}deactivateRouteAndOutlet(x,S){const j=S.getContext(x.value.outlet),J=j&&x.value.component?j.children:S,ve=Je(x);for(const qe of Object.keys(ve))this.deactivateRouteAndItsChildren(ve[qe],J);j&&j.outlet&&(j.outlet.deactivate(),j.children.onOutletDeactivated(),j.attachRef=null,j.resolver=null,j.route=null)}activateChildRoutes(x,S,j){const J=Je(S);x.children.forEach(ve=>{this.activateRoutes(ve,J[ve.value.outlet],j),this.forwardEvent(new ur(ve.value.snapshot))}),x.children.length&&this.forwardEvent(new Ht(x.value.snapshot))}activateRoutes(x,S,j){const J=x.value,ve=S?S.value:null;if(hi(J),J===ve)if(J.component){const qe=j.getOrCreateContext(J.outlet);this.activateChildRoutes(x,S,qe.children)}else this.activateChildRoutes(x,S,j);else if(J.component){const qe=j.getOrCreateContext(J.outlet);if(this.routeReuseStrategy.shouldAttach(J.snapshot)){const ge=this.routeReuseStrategy.retrieve(J.snapshot);this.routeReuseStrategy.store(J.snapshot,null),qe.children.onOutletReAttached(ge.contexts),qe.attachRef=ge.componentRef,qe.route=ge.route.value,qe.outlet&&qe.outlet.attach(ge.componentRef,ge.route.value),ci(ge.route)}else{const ge=function(V){for(let x=V.parent;x;x=x.parent){const S=x.routeConfig;if(S&&S._loadedConfig)return S._loadedConfig;if(S&&S.component)return null}return null}(J.snapshot),qt=ge?ge.module.componentFactoryResolver:null;qe.attachRef=null,qe.route=J,qe.resolver=qt,qe.outlet&&qe.outlet.activateWith(J,qt),this.activateChildRoutes(x,null,qe.children)}}else this.activateChildRoutes(x,null,j)}}function ci(V){hi(V.value),V.children.forEach(ci)}class Ri{constructor(x,S){this.routes=x,this.module=S}}function Gr(V){return"function"==typeof V}function Ii(V){return V instanceof mn}const Ni=Symbol("INITIAL_VALUE");function Bi(){return(0,Nt.w)(V=>function(...V){let x,S;return(0,te.K)(V[V.length-1])&&(S=V.pop()),"function"==typeof V[V.length-1]&&(x=V.pop()),1===V.length&&(0,ke.k)(V[0])&&(V=V[0]),(0,ye.n)(V,S).lift(new re(x))}(V.map(x=>x.pipe((0,gn.q)(1),(0,Nn.O)(Ni)))).pipe((0,wn.R)((x,S)=>{let j=!1;return S.reduce((J,ve,qe)=>J!==Ni?J:(ve===Ni&&(j=!0),j||!1!==ve&&qe!==S.length-1&&!Ii(ve)?J:ve),x)},Ni),(0,Pe.h)(x=>x!==Ni),(0,Mt.U)(x=>Ii(x)?x:!0===x),(0,gn.q)(1)))}let W=(()=>{class V{}return V.\u0275fac=function(S){return new(S||V)},V.\u0275cmp=A.Xpm({type:V,selectors:[["ng-component"]],decls:1,vars:0,template:function(S,j){1&S&&A._UZ(0,"router-outlet")},directives:function(){return[ho]},encapsulation:2}),V})();function fe(V,x=""){for(let S=0;S<V.length;S++){const j=V[S];K(j,De(x,j))}}function K(V,x){V.children&&fe(V.children,x)}function De(V,x){return x?V||x.path?V&&!x.path?`${V}/`:!V&&x.path?x.path:`${V}/${x.path}`:"":V}function Ke(V){const x=V.children&&V.children.map(Ke),S=x?Object.assign(Object.assign({},V),{children:x}):Object.assign({},V);return!S.component&&(x||S.loadChildren)&&S.outlet&&S.outlet!==rn&&(S.component=W),S}function Ft(V){return V.outlet||rn}function an(V,x){const S=V.filter(j=>Ft(j)===x);return S.push(...V.filter(j=>Ft(j)!==x)),S}const G={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function $(V,x,S){var j;if(""===x.path)return"full"===x.pathMatch&&(V.hasChildren()||S.length>0)?Object.assign({},G):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const ve=(x.matcher||Zn)(S,V,x);if(!ve)return Object.assign({},G);const qe={};Ct(ve.posParams,(qt,Rn)=>{qe[Rn]=qt.path});const ge=ve.consumed.length>0?Object.assign(Object.assign({},qe),ve.consumed[ve.consumed.length-1].parameters):qe;return{matched:!0,consumedSegments:ve.consumed,lastChild:ve.consumed.length,parameters:ge,positionalParamSegments:null!==(j=ve.posParams)&&void 0!==j?j:{}}}function k(V,x,S,j,J="corrected"){if(S.length>0&&function(V,x,S){return S.some(j=>Kr(V,x,j)&&Ft(j)!==rn)}(V,S,j)){const qe=new In(x,function(V,x,S,j){const J={};J[rn]=j,j._sourceSegment=V,j._segmentIndexShift=x.length;for(const ve of S)if(""===ve.path&&Ft(ve)!==rn){const qe=new In([],{});qe._sourceSegment=V,qe._segmentIndexShift=x.length,J[Ft(ve)]=qe}return J}(V,x,j,new In(S,V.children)));return qe._sourceSegment=V,qe._segmentIndexShift=x.length,{segmentGroup:qe,slicedSegments:[]}}if(0===S.length&&function(V,x,S){return S.some(j=>Kr(V,x,j))}(V,S,j)){const qe=new In(V.segments,function(V,x,S,j,J,ve){const qe={};for(const ge of j)if(Kr(V,S,ge)&&!J[Ft(ge)]){const qt=new In([],{});qt._sourceSegment=V,qt._segmentIndexShift="legacy"===ve?V.segments.length:x.length,qe[Ft(ge)]=qt}return Object.assign(Object.assign({},J),qe)}(V,x,S,j,V.children,J));return qe._sourceSegment=V,qe._segmentIndexShift=x.length,{segmentGroup:qe,slicedSegments:S}}const ve=new In(V.segments,V.children);return ve._sourceSegment=V,ve._segmentIndexShift=x.length,{segmentGroup:ve,slicedSegments:S}}function Kr(V,x,S){return(!(V.hasChildren()||x.length>0)||"full"!==S.pathMatch)&&""===S.path}function $i(V,x,S,j){return!!(Ft(V)===j||j!==rn&&Kr(x,S,V))&&("**"===V.path||$(x,V,S).matched)}function si(V,x,S){return 0===x.length&&!V.children[S]}class ni{constructor(x){this.segmentGroup=x||null}}class Zr{constructor(x){this.urlTree=x}}function ar(V){return new _e.y(x=>x.error(new ni(V)))}function ia(V){return new _e.y(x=>x.error(new Zr(V)))}function _o(V){return new _e.y(x=>x.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${V}'`)))}class sa{constructor(x,S,j,J,ve){this.configLoader=S,this.urlSerializer=j,this.urlTree=J,this.config=ve,this.allowRedirects=!0,this.ngModule=x.get(A.h0i)}apply(){const x=k(this.urlTree.root,[],[],this.config).segmentGroup,S=new In(x.segments,x.children);return this.expandSegmentGroup(this.ngModule,this.config,S,rn).pipe((0,Mt.U)(ve=>this.createUrlTree(oo(ve),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ut(ve=>{if(ve instanceof Zr)return this.allowRedirects=!1,this.match(ve.urlTree);throw ve instanceof ni?this.noMatchError(ve):ve}))}match(x){return this.expandSegmentGroup(this.ngModule,this.config,x.root,rn).pipe((0,Mt.U)(J=>this.createUrlTree(oo(J),x.queryParams,x.fragment))).pipe(ut(J=>{throw J instanceof ni?this.noMatchError(J):J}))}noMatchError(x){return new Error(`Cannot match any routes. URL Segment: '${x.segmentGroup}'`)}createUrlTree(x,S,j){const J=x.segments.length>0?new In([],{[rn]:x}):x;return new mn(J,S,j)}expandSegmentGroup(x,S,j,J){return 0===j.segments.length&&j.hasChildren()?this.expandChildren(x,S,j).pipe((0,Mt.U)(ve=>new In([],ve))):this.expandSegment(x,j,S,j.segments,J,!0)}expandChildren(x,S,j){const J=[];for(const ve of Object.keys(j.children))"primary"===ve?J.unshift(ve):J.push(ve);return(0,le.D)(J).pipe(Dt(ve=>{const qe=j.children[ve],ge=an(S,ve);return this.expandSegmentGroup(x,ge,qe,ve).pipe((0,Mt.U)(qt=>({segment:qt,outlet:ve})))}),(0,wn.R)((ve,qe)=>(ve[qe.outlet]=qe.segment,ve),{}),function(V,x){const S=arguments.length>=2;return j=>j.pipe(V?(0,Pe.h)((J,ve)=>V(J,ve,j)):Ye.y,et(1),S?(0,Ie.d)(x):(0,At.T)(()=>new Ge.K))}())}expandSegment(x,S,j,J,ve,qe){return(0,le.D)(j).pipe(Dt(ge=>this.expandSegmentAgainstRoute(x,S,j,ge,J,ve,qe).pipe(ut(Rn=>{if(Rn instanceof ni)return(0,Ae.of)(null);throw Rn}))),(0,yn.P)(ge=>!!ge),ut((ge,qt)=>{if(ge instanceof Ge.K||"EmptyError"===ge.name){if(si(S,J,ve))return(0,Ae.of)(new In([],{}));throw new ni(S)}throw ge}))}expandSegmentAgainstRoute(x,S,j,J,ve,qe,ge){return $i(J,S,ve,qe)?void 0===J.redirectTo?this.matchSegmentAgainstRoute(x,S,J,ve,qe):ge&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(x,S,j,J,ve,qe):ar(S):ar(S)}expandSegmentAgainstRouteUsingRedirect(x,S,j,J,ve,qe){return"**"===J.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(x,j,J,qe):this.expandRegularSegmentAgainstRouteUsingRedirect(x,S,j,J,ve,qe)}expandWildCardWithParamsAgainstRouteUsingRedirect(x,S,j,J){const ve=this.applyRedirectCommands([],j.redirectTo,{});return j.redirectTo.startsWith("/")?ia(ve):this.lineralizeSegments(j,ve).pipe((0,pt.zg)(qe=>{const ge=new In(qe,{});return this.expandSegment(x,ge,S,qe,J,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(x,S,j,J,ve,qe){const{matched:ge,consumedSegments:qt,lastChild:Rn,positionalParamSegments:jr}=$(S,J,ve);if(!ge)return ar(S);const tr=this.applyRedirectCommands(qt,J.redirectTo,jr);return J.redirectTo.startsWith("/")?ia(tr):this.lineralizeSegments(J,tr).pipe((0,pt.zg)(Nr=>this.expandSegment(x,S,j,Nr.concat(ve.slice(Rn)),qe,!1)))}matchSegmentAgainstRoute(x,S,j,J,ve){if("**"===j.path)return j.loadChildren?(j._loadedConfig?(0,Ae.of)(j._loadedConfig):this.configLoader.load(x.injector,j)).pipe((0,Mt.U)(Nr=>(j._loadedConfig=Nr,new In(J,{})))):(0,Ae.of)(new In(J,{}));const{matched:qe,consumedSegments:ge,lastChild:qt}=$(S,j,J);if(!qe)return ar(S);const Rn=J.slice(qt);return this.getChildConfig(x,j,J).pipe((0,pt.zg)(tr=>{const Nr=tr.module,Dr=tr.routes,{segmentGroup:ns,slicedSegments:no}=k(S,ge,Rn,Dr),ys=new In(ns.segments,ns.children);if(0===no.length&&ys.hasChildren())return this.expandChildren(Nr,Dr,ys).pipe((0,Mt.U)(hl=>new In(ge,hl)));if(0===Dr.length&&0===no.length)return(0,Ae.of)(new In(ge,{}));const Io=Ft(j)===ve;return this.expandSegment(Nr,ys,Dr,no,Io?rn:ve,!0).pipe((0,Mt.U)(rs=>new In(ge.concat(rs.segments),rs.children)))}))}getChildConfig(x,S,j){return S.children?(0,Ae.of)(new Ri(S.children,x)):S.loadChildren?void 0!==S._loadedConfig?(0,Ae.of)(S._loadedConfig):this.runCanLoadGuards(x.injector,S,j).pipe((0,pt.zg)(J=>{return J?this.configLoader.load(x.injector,S).pipe((0,Mt.U)(ve=>(S._loadedConfig=ve,ve))):(V=S,new _e.y(x=>x.error(ir(`Cannot load children because the guard of the route "path: '${V.path}'" returned false`))));var V})):(0,Ae.of)(new Ri([],x))}runCanLoadGuards(x,S,j){const J=S.canLoad;if(!J||0===J.length)return(0,Ae.of)(!0);const ve=J.map(qe=>{const ge=x.get(qe);let qt;if((V=ge)&&Gr(V.canLoad))qt=ge.canLoad(S,j);else{if(!Gr(ge))throw new Error("Invalid CanLoad guard");qt=ge(S,j)}var V;return Be(qt)});return(0,Ae.of)(ve).pipe(Bi(),(0,Sn.b)(qe=>{if(!Ii(qe))return;const ge=ir(`Redirecting to "${this.urlSerializer.serialize(qe)}"`);throw ge.url=qe,ge}),(0,Mt.U)(qe=>!0===qe))}lineralizeSegments(x,S){let j=[],J=S.root;for(;;){if(j=j.concat(J.segments),0===J.numberOfChildren)return(0,Ae.of)(j);if(J.numberOfChildren>1||!J.children[rn])return _o(x.redirectTo);J=J.children[rn]}}applyRedirectCommands(x,S,j){return this.applyRedirectCreatreUrlTree(S,this.urlSerializer.parse(S),x,j)}applyRedirectCreatreUrlTree(x,S,j,J){const ve=this.createSegmentGroup(x,S.root,j,J);return new mn(ve,this.createQueryParams(S.queryParams,this.urlTree.queryParams),S.fragment)}createQueryParams(x,S){const j={};return Ct(x,(J,ve)=>{if("string"==typeof J&&J.startsWith(":")){const ge=J.substring(1);j[ve]=S[ge]}else j[ve]=J}),j}createSegmentGroup(x,S,j,J){const ve=this.createSegments(x,S.segments,j,J);let qe={};return Ct(S.children,(ge,qt)=>{qe[qt]=this.createSegmentGroup(x,ge,j,J)}),new In(ve,qe)}createSegments(x,S,j,J){return S.map(ve=>ve.path.startsWith(":")?this.findPosParam(x,ve,J):this.findOrReturn(ve,j))}findPosParam(x,S,j){const J=j[S.path.substring(1)];if(!J)throw new Error(`Cannot redirect to '${x}'. Cannot find '${S.path}'.`);return J}findOrReturn(x,S){let j=0;for(const J of S){if(J.path===x.path)return S.splice(j),J;j++}return x}}function oo(V){const x={};for(const j of Object.keys(V.children)){const ve=oo(V.children[j]);(ve.segments.length>0||ve.hasChildren())&&(x[j]=ve)}return function(V){if(1===V.numberOfChildren&&V.children[rn]){const x=V.children[rn];return new In(V.segments.concat(x.segments),x.children)}return V}(new In(V.segments,x))}class Ir{constructor(x){this.path=x,this.route=this.path[this.path.length-1]}}class Po{constructor(x,S){this.component=x,this.route=S}}function ki(V,x,S){const j=V._root;return Os(j,x?x._root:null,S,[j.value])}function Is(V,x,S){const j=function(V){if(!V)return null;for(let x=V.parent;x;x=x.parent){const S=x.routeConfig;if(S&&S._loadedConfig)return S._loadedConfig}return null}(x);return(j?j.module.injector:S).get(V)}function Os(V,x,S,j,J={canDeactivateChecks:[],canActivateChecks:[]}){const ve=Je(x);return V.children.forEach(qe=>{(function(V,x,S,j,J={canDeactivateChecks:[],canActivateChecks:[]}){const ve=V.value,qe=x?x.value:null,ge=S?S.getContext(V.value.outlet):null;if(qe&&ve.routeConfig===qe.routeConfig){const qt=function(V,x,S){if("function"==typeof S)return S(V,x);switch(S){case"pathParamsChange":return!Yt(V.url,x.url);case"pathParamsOrQueryParamsChange":return!Yt(V.url,x.url)||!fn(V.queryParams,x.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!bi(V,x)||!fn(V.queryParams,x.queryParams);default:return!bi(V,x)}}(qe,ve,ve.routeConfig.runGuardsAndResolvers);qt?J.canActivateChecks.push(new Ir(j)):(ve.data=qe.data,ve._resolvedData=qe._resolvedData),Os(V,x,ve.component?ge?ge.children:null:S,j,J),qt&&ge&&ge.outlet&&ge.outlet.isActivated&&J.canDeactivateChecks.push(new Po(ge.outlet.component,qe))}else qe&&Vs(x,ge,J),J.canActivateChecks.push(new Ir(j)),Os(V,null,ve.component?ge?ge.children:null:S,j,J)})(qe,ve[qe.value.outlet],S,j.concat([qe.value]),J),delete ve[qe.value.outlet]}),Ct(ve,(qe,ge)=>Vs(qe,S.getContext(ge),J)),J}function Vs(V,x,S){const j=Je(V),J=V.value;Ct(j,(ve,qe)=>{Vs(ve,J.component?x?x.children.getContext(qe):null:x,S)}),S.canDeactivateChecks.push(new Po(J.component&&x&&x.outlet&&x.outlet.isActivated?x.outlet.component:null,J))}class ls{}function co(V){return new _e.y(x=>x.error(V))}class vo{constructor(x,S,j,J,ve,qe){this.rootComponentType=x,this.config=S,this.urlTree=j,this.url=J,this.paramsInheritanceStrategy=ve,this.relativeLinkResolution=qe}recognize(){const x=k(this.urlTree.root,[],[],this.config.filter(qe=>void 0===qe.redirectTo),this.relativeLinkResolution).segmentGroup,S=this.processSegmentGroup(this.config,x,rn);if(null===S)return null;const j=new $n([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},rn,this.rootComponentType,null,this.urlTree.root,-1,{}),J=new Te(j,S),ve=new Gn(this.url,J);return this.inheritParamsAndData(ve._root),ve}inheritParamsAndData(x){const S=x.value,j=on(S,this.paramsInheritanceStrategy);S.params=Object.freeze(j.params),S.data=Object.freeze(j.data),x.children.forEach(J=>this.inheritParamsAndData(J))}processSegmentGroup(x,S,j){return 0===S.segments.length&&S.hasChildren()?this.processChildren(x,S):this.processSegment(x,S,S.segments,j)}processChildren(x,S){const j=[];for(const ve of Object.keys(S.children)){const qe=S.children[ve],ge=an(x,ve),qt=this.processSegmentGroup(ge,qe,ve);if(null===qt)return null;j.push(...qt)}const J=la(j);return J.sort((x,S)=>x.value.outlet===rn?-1:S.value.outlet===rn?1:x.value.outlet.localeCompare(S.value.outlet)),J}processSegment(x,S,j,J){for(const ve of x){const qe=this.processSegmentAgainstRoute(ve,S,j,J);if(null!==qe)return qe}return si(S,j,J)?[]:null}processSegmentAgainstRoute(x,S,j,J){if(x.redirectTo||!$i(x,S,j,J))return null;let ve,qe=[],ge=[];if("**"===x.path){const Dr=j.length>0?xe(j).parameters:{};ve=new $n(j,Dr,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,qa(x),Ft(x),x.component,x,vi(S),Zs(S)+j.length,Qs(x))}else{const Dr=$(S,x,j);if(!Dr.matched)return null;qe=Dr.consumedSegments,ge=j.slice(Dr.lastChild),ve=new $n(qe,Dr.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,qa(x),Ft(x),x.component,x,vi(S),Zs(S)+qe.length,Qs(x))}const qt=(V=x).children?V.children:V.loadChildren?V._loadedConfig.routes:[],{segmentGroup:Rn,slicedSegments:jr}=k(S,qe,ge,qt.filter(Dr=>void 0===Dr.redirectTo),this.relativeLinkResolution);var V;if(0===jr.length&&Rn.hasChildren()){const Dr=this.processChildren(qt,Rn);return null===Dr?null:[new Te(ve,Dr)]}if(0===qt.length&&0===jr.length)return[new Te(ve,[])];const tr=Ft(x)===J,Nr=this.processSegment(qt,Rn,jr,tr?rn:J);return null===Nr?null:[new Te(ve,Nr)]}}function qs(V){const x=V.value.routeConfig;return x&&""===x.path&&void 0===x.redirectTo}function la(V){const x=[],S=new Set;for(const j of V){if(!qs(j)){x.push(j);continue}const J=x.find(ve=>j.value.routeConfig===ve.value.routeConfig);void 0!==J?(J.children.push(...j.children),S.add(J)):x.push(j)}for(const j of S){const J=la(j.children);x.push(new Te(j.value,J))}return x.filter(j=>!S.has(j))}function vi(V){let x=V;for(;x._sourceSegment;)x=x._sourceSegment;return x}function Zs(V){let x=V,S=x._segmentIndexShift?x._segmentIndexShift:0;for(;x._sourceSegment;)x=x._sourceSegment,S+=x._segmentIndexShift?x._segmentIndexShift:0;return S-1}function qa(V){return V.data||{}}function Qs(V){return V.resolve||{}}function T(V){return(0,Nt.w)(x=>{const S=V(x);return S?(0,le.D)(S).pipe((0,Mt.U)(()=>x)):(0,Ae.of)(x)})}class q{}class vt extends class{shouldDetach(x){return!1}store(x,S){}shouldAttach(x){return!1}retrieve(x){return null}shouldReuseRoute(x,S){return x.routeConfig===S.routeConfig}}{}const Jt=new A.OlP("ROUTES");class vn{constructor(x,S,j,J){this.loader=x,this.compiler=S,this.onLoadStartListener=j,this.onLoadEndListener=J}load(x,S){if(S._loader$)return S._loader$;this.onLoadStartListener&&this.onLoadStartListener(S);const J=this.loadModuleFactory(S.loadChildren).pipe((0,Mt.U)(ve=>{this.onLoadEndListener&&this.onLoadEndListener(S);const qe=ve.create(x);return new Ri(se(qe.injector.get(Jt,void 0,A.XFs.Self|A.XFs.Optional)).map(Ke),qe)}),ut(ve=>{throw S._loader$=void 0,ve}));return S._loader$=new Se.c(J,()=>new Ue.xQ).pipe((0,mr.x)()),S._loader$}loadModuleFactory(x){return"string"==typeof x?(0,le.D)(this.loader.load(x)):Be(x()).pipe((0,pt.zg)(S=>S instanceof A.YKP?(0,Ae.of)(S):(0,le.D)(this.compiler.compileModuleAsync(S))))}}class Cr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new On,this.attachRef=null}}class On{constructor(){this.contexts=new Map}onChildOutletCreated(x,S){const j=this.getOrCreateContext(x);j.outlet=S,this.contexts.set(x,j)}onChildOutletDestroyed(x){const S=this.getContext(x);S&&(S.outlet=null,S.attachRef=null)}onOutletDeactivated(){const x=this.contexts;return this.contexts=new Map,x}onOutletReAttached(x){this.contexts=x}getOrCreateContext(x){let S=this.getContext(x);return S||(S=new Cr,this.contexts.set(x,S)),S}getContext(x){return this.contexts.get(x)||null}}class Ci{shouldProcessUrl(x){return!0}extract(x){return x}merge(x,S){return x}}function Kt(V){throw V}function lr(V,x,S){return x.parse("/")}function Ki(V,x){return(0,Ae.of)(null)}const uo={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Fn={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Hn=(()=>{class V{constructor(S,j,J,ve,qe,ge,qt,Rn){this.rootComponentType=S,this.urlSerializer=j,this.rootContexts=J,this.location=ve,this.config=Rn,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ue.xQ,this.errorHandler=Kt,this.malformedUriErrorHandler=lr,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ki,afterPreactivation:Ki},this.urlHandlingStrategy=new Ci,this.routeReuseStrategy=new vt,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=qe.get(A.h0i),this.console=qe.get(A.c2e);const Nr=qe.get(A.R0b);this.isNgZoneEnabled=Nr instanceof A.R0b&&A.R0b.isInAngularZone(),this.resetConfig(Rn),this.currentUrlTree=new mn(new In([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new vn(ge,qt,Dr=>this.triggerEvent(new hr(Dr)),Dr=>this.triggerEvent(new ei(Dr))),this.routerState=Ot(this.currentUrlTree,this.rootComponentType),this.transitions=new Ze.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var S;return null===(S=this.location.getState())||void 0===S?void 0:S.\u0275routerPageId}setupNavigations(S){const j=this.events;return S.pipe((0,Pe.h)(J=>0!==J.id),(0,Mt.U)(J=>Object.assign(Object.assign({},J),{extractedUrl:this.urlHandlingStrategy.extract(J.rawUrl)})),(0,Nt.w)(J=>{let ve=!1,qe=!1;return(0,Ae.of)(J).pipe((0,Sn.b)(ge=>{this.currentNavigation={id:ge.id,initialUrl:ge.currentRawUrl,extractedUrl:ge.extractedUrl,trigger:ge.source,extras:ge.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Nt.w)(ge=>{const qt=this.browserUrlTree.toString(),Rn=!this.navigated||ge.extractedUrl.toString()!==qt||qt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Rn)&&this.urlHandlingStrategy.shouldProcessUrl(ge.rawUrl))return hn(ge.source)&&(this.browserUrlTree=ge.extractedUrl),(0,Ae.of)(ge).pipe((0,Nt.w)(tr=>{const Nr=this.transitions.getValue();return j.next(new un(tr.id,this.serializeUrl(tr.extractedUrl),tr.source,tr.restoredState)),Nr!==this.transitions.getValue()?we.E:Promise.resolve(tr)}),function(V,x,S,j){return(0,Nt.w)(J=>function(V,x,S,j,J){return new sa(V,x,S,j,J).apply()}(V,x,S,J.extractedUrl,j).pipe((0,Mt.U)(ve=>Object.assign(Object.assign({},J),{urlAfterRedirects:ve}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Sn.b)(tr=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:tr.urlAfterRedirects})}),function(V,x,S,j,J){return(0,pt.zg)(ve=>function(V,x,S,j,J="emptyOnly",ve="legacy"){try{const qe=new vo(V,x,S,j,J,ve).recognize();return null===qe?co(new ls):(0,Ae.of)(qe)}catch(qe){return co(qe)}}(V,x,ve.urlAfterRedirects,S(ve.urlAfterRedirects),j,J).pipe((0,Mt.U)(qe=>Object.assign(Object.assign({},ve),{targetSnapshot:qe}))))}(this.rootComponentType,this.config,tr=>this.serializeUrl(tr),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Sn.b)(tr=>{"eager"===this.urlUpdateStrategy&&(tr.extras.skipLocationChange||this.setBrowserUrl(tr.urlAfterRedirects,tr),this.browserUrlTree=tr.urlAfterRedirects);const Nr=new kn(tr.id,this.serializeUrl(tr.extractedUrl),this.serializeUrl(tr.urlAfterRedirects),tr.targetSnapshot);j.next(Nr)}));if(Rn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Nr,extractedUrl:Dr,source:ns,restoredState:no,extras:ys}=ge,Io=new un(Nr,this.serializeUrl(Dr),ns,no);j.next(Io);const oi=Ot(Dr,this.rootComponentType).snapshot;return(0,Ae.of)(Object.assign(Object.assign({},ge),{targetSnapshot:oi,urlAfterRedirects:Dr,extras:Object.assign(Object.assign({},ys),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=ge.rawUrl,this.browserUrlTree=ge.urlAfterRedirects,ge.resolve(null),we.E}),T(ge=>{const{targetSnapshot:qt,id:Rn,extractedUrl:jr,rawUrl:tr,extras:{skipLocationChange:Nr,replaceUrl:Dr}}=ge;return this.hooks.beforePreactivation(qt,{navigationId:Rn,appliedUrlTree:jr,rawUrlTree:tr,skipLocationChange:!!Nr,replaceUrl:!!Dr})}),(0,Sn.b)(ge=>{const qt=new Xn(ge.id,this.serializeUrl(ge.extractedUrl),this.serializeUrl(ge.urlAfterRedirects),ge.targetSnapshot);this.triggerEvent(qt)}),(0,Mt.U)(ge=>Object.assign(Object.assign({},ge),{guards:ki(ge.targetSnapshot,ge.currentSnapshot,this.rootContexts)})),function(V,x){return(0,pt.zg)(S=>{const{targetSnapshot:j,currentSnapshot:J,guards:{canActivateChecks:ve,canDeactivateChecks:qe}}=S;return 0===qe.length&&0===ve.length?(0,Ae.of)(Object.assign(Object.assign({},S),{guardsResult:!0})):function(V,x,S,j){return(0,le.D)(V).pipe((0,pt.zg)(J=>function(V,x,S,j,J){const ve=x&&x.routeConfig?x.routeConfig.canDeactivate:null;if(!ve||0===ve.length)return(0,Ae.of)(!0);const qe=ve.map(ge=>{const qt=Is(ge,x,J);let Rn;if(function(V){return V&&Gr(V.canDeactivate)}(qt))Rn=Be(qt.canDeactivate(V,x,S,j));else{if(!Gr(qt))throw new Error("Invalid CanDeactivate guard");Rn=Be(qt(V,x,S,j))}return Rn.pipe((0,yn.P)())});return(0,Ae.of)(qe).pipe(Bi())}(J.component,J.route,S,x,j)),(0,yn.P)(J=>!0!==J,!0))}(qe,j,J,V).pipe((0,pt.zg)(ge=>ge&&function(V){return"boolean"==typeof V}(ge)?function(V,x,S,j){return(0,le.D)(x).pipe(Dt(J=>(0,ft.z)(function(V,x){return null!==V&&x&&x(new nr(V)),(0,Ae.of)(!0)}(J.route.parent,j),function(V,x){return null!==V&&x&&x(new It(V)),(0,Ae.of)(!0)}(J.route,j),function(V,x,S){const j=x[x.length-1],ve=x.slice(0,x.length-1).reverse().map(qe=>function(V){const x=V.routeConfig?V.routeConfig.canActivateChild:null;return x&&0!==x.length?{node:V,guards:x}:null}(qe)).filter(qe=>null!==qe).map(qe=>ht(()=>{const ge=qe.guards.map(qt=>{const Rn=Is(qt,qe.node,S);let jr;if(function(V){return V&&Gr(V.canActivateChild)}(Rn))jr=Be(Rn.canActivateChild(j,V));else{if(!Gr(Rn))throw new Error("Invalid CanActivateChild guard");jr=Be(Rn(j,V))}return jr.pipe((0,yn.P)())});return(0,Ae.of)(ge).pipe(Bi())}));return(0,Ae.of)(ve).pipe(Bi())}(V,J.path,S),function(V,x,S){const j=x.routeConfig?x.routeConfig.canActivate:null;if(!j||0===j.length)return(0,Ae.of)(!0);const J=j.map(ve=>ht(()=>{const qe=Is(ve,x,S);let ge;if(function(V){return V&&Gr(V.canActivate)}(qe))ge=Be(qe.canActivate(x,V));else{if(!Gr(qe))throw new Error("Invalid CanActivate guard");ge=Be(qe(x,V))}return ge.pipe((0,yn.P)())}));return(0,Ae.of)(J).pipe(Bi())}(V,J.route,S))),(0,yn.P)(J=>!0!==J,!0))}(j,ve,V,x):(0,Ae.of)(ge)),(0,Mt.U)(ge=>Object.assign(Object.assign({},S),{guardsResult:ge})))})}(this.ngModule.injector,ge=>this.triggerEvent(ge)),(0,Sn.b)(ge=>{if(Ii(ge.guardsResult)){const Rn=ir(`Redirecting to "${this.serializeUrl(ge.guardsResult)}"`);throw Rn.url=ge.guardsResult,Rn}const qt=new or(ge.id,this.serializeUrl(ge.extractedUrl),this.serializeUrl(ge.urlAfterRedirects),ge.targetSnapshot,!!ge.guardsResult);this.triggerEvent(qt)}),(0,Pe.h)(ge=>!!ge.guardsResult||(this.restoreHistory(ge),this.cancelNavigationTransition(ge,""),!1)),T(ge=>{if(ge.guards.canActivateChecks.length)return(0,Ae.of)(ge).pipe((0,Sn.b)(qt=>{const Rn=new vr(qt.id,this.serializeUrl(qt.extractedUrl),this.serializeUrl(qt.urlAfterRedirects),qt.targetSnapshot);this.triggerEvent(Rn)}),(0,Nt.w)(qt=>{let Rn=!1;return(0,Ae.of)(qt).pipe(function(V,x){return(0,pt.zg)(S=>{const{targetSnapshot:j,guards:{canActivateChecks:J}}=S;if(!J.length)return(0,Ae.of)(S);let ve=0;return(0,le.D)(J).pipe(Dt(qe=>function(V,x,S,j){return function(V,x,S,j){const J=Object.keys(V);if(0===J.length)return(0,Ae.of)({});const ve={};return(0,le.D)(J).pipe((0,pt.zg)(qe=>function(V,x,S,j){const J=Is(V,x,j);return Be(J.resolve?J.resolve(x,S):J(x,S))}(V[qe],x,S,j).pipe((0,Sn.b)(ge=>{ve[qe]=ge}))),et(1),(0,pt.zg)(()=>Object.keys(ve).length===J.length?(0,Ae.of)(ve):we.E))}(V._resolve,V,x,j).pipe((0,Mt.U)(ve=>(V._resolvedData=ve,V.data=Object.assign(Object.assign({},V.data),on(V,S).resolve),null)))}(qe.route,j,V,x)),(0,Sn.b)(()=>ve++),et(1),(0,pt.zg)(qe=>ve===J.length?(0,Ae.of)(S):we.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Sn.b)({next:()=>Rn=!0,complete:()=>{Rn||(this.restoreHistory(qt),this.cancelNavigationTransition(qt,"At least one route resolver didn't emit any value."))}}))}),(0,Sn.b)(qt=>{const Rn=new Er(qt.id,this.serializeUrl(qt.extractedUrl),this.serializeUrl(qt.urlAfterRedirects),qt.targetSnapshot);this.triggerEvent(Rn)}))}),T(ge=>{const{targetSnapshot:qt,id:Rn,extractedUrl:jr,rawUrl:tr,extras:{skipLocationChange:Nr,replaceUrl:Dr}}=ge;return this.hooks.afterPreactivation(qt,{navigationId:Rn,appliedUrlTree:jr,rawUrlTree:tr,skipLocationChange:!!Nr,replaceUrl:!!Dr})}),(0,Mt.U)(ge=>{const qt=function(V,x,S){const j=vs(V,x._root,S?S._root:void 0);return new rt(j,x)}(this.routeReuseStrategy,ge.targetSnapshot,ge.currentRouterState);return Object.assign(Object.assign({},ge),{targetRouterState:qt})}),(0,Sn.b)(ge=>{this.currentUrlTree=ge.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ge.urlAfterRedirects,ge.rawUrl),this.routerState=ge.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ge.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ge),this.browserUrlTree=ge.urlAfterRedirects)}),((V,x,S)=>(0,Mt.U)(j=>(new _i(x,j.targetRouterState,j.currentRouterState,S).activate(V),j)))(this.rootContexts,this.routeReuseStrategy,ge=>this.triggerEvent(ge)),(0,Sn.b)({next(){ve=!0},complete(){ve=!0}}),function(V){return x=>x.lift(new St(V))}(()=>{var ge;if(!ve&&!qe){const qt=`Navigation ID ${J.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(J),this.cancelNavigationTransition(J,qt)):this.cancelNavigationTransition(J,qt)}(null===(ge=this.currentNavigation)||void 0===ge?void 0:ge.id)===J.id&&(this.currentNavigation=null)}),ut(ge=>{if(qe=!0,function(V){return V&&V[rr]}(ge)){const qt=Ii(ge.url);qt||(this.navigated=!0,this.restoreHistory(J,!0));const Rn=new Xt(J.id,this.serializeUrl(J.extractedUrl),ge.message);j.next(Rn),qt?setTimeout(()=>{const jr=this.urlHandlingStrategy.merge(ge.url,this.rawUrlTree),tr={skipLocationChange:J.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||hn(J.source)};this.scheduleNavigation(jr,"imperative",null,tr,{resolve:J.resolve,reject:J.reject,promise:J.promise})},0):J.resolve(!1)}else{this.restoreHistory(J,!0);const qt=new Ln(J.id,this.serializeUrl(J.extractedUrl),ge);j.next(qt);try{J.resolve(this.errorHandler(ge))}catch(Rn){J.reject(Rn)}}return we.E}))}))}resetRootComponentType(S){this.rootComponentType=S,this.routerState.root.component=this.rootComponentType}getTransition(){const S=this.transitions.value;return S.urlAfterRedirects=this.browserUrlTree,S}setTransition(S){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),S))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(S=>{const j=this.extractLocationChangeInfoFromEvent(S);this.shouldScheduleNavigation(this.lastLocationChangeInfo,j)&&setTimeout(()=>{const{source:J,state:ve,urlTree:qe}=j,ge={replaceUrl:!0};if(ve){const qt=Object.assign({},ve);delete qt.navigationId,delete qt.\u0275routerPageId,0!==Object.keys(qt).length&&(ge.state=qt)}this.scheduleNavigation(qe,J,ve,ge)},0),this.lastLocationChangeInfo=j}))}extractLocationChangeInfoFromEvent(S){var j;return{source:"popstate"===S.type?"popstate":"hashchange",urlTree:this.parseUrl(S.url),state:(null===(j=S.state)||void 0===j?void 0:j.navigationId)?S.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(S,j){if(!S)return!0;const J=j.urlTree.toString()===S.urlTree.toString();return j.transitionId!==S.transitionId||!J||!("hashchange"===j.source&&"popstate"===S.source||"popstate"===j.source&&"hashchange"===S.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(S){this.events.next(S)}resetConfig(S){fe(S),this.config=S.map(Ke),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(S,j={}){const{relativeTo:J,queryParams:ve,fragment:qe,queryParamsHandling:ge,preserveFragment:qt}=j,Rn=J||this.routerState.root,jr=qt?this.currentUrlTree.fragment:qe;let tr=null;switch(ge){case"merge":tr=Object.assign(Object.assign({},this.currentUrlTree.queryParams),ve);break;case"preserve":tr=this.currentUrlTree.queryParams;break;default:tr=ve||null}return null!==tr&&(tr=this.removeEmptyProps(tr)),function(V,x,S,j,J){if(0===S.length)return xo(x.root,x.root,x,j,J);const ve=function(V){if("string"==typeof V[0]&&1===V.length&&"/"===V[0])return new mo(!0,0,V);let x=0,S=!1;const j=V.reduce((J,ve,qe)=>{if("object"==typeof ve&&null!=ve){if(ve.outlets){const ge={};return Ct(ve.outlets,(qt,Rn)=>{ge[Rn]="string"==typeof qt?qt.split("/"):qt}),[...J,{outlets:ge}]}if(ve.segmentPath)return[...J,ve.segmentPath]}return"string"!=typeof ve?[...J,ve]:0===qe?(ve.split("/").forEach((ge,qt)=>{0==qt&&"."===ge||(0==qt&&""===ge?S=!0:".."===ge?x++:""!=ge&&J.push(ge))}),J):[...J,ve]},[]);return new mo(S,x,j)}(S);if(ve.toRoot())return xo(x.root,new In([],{}),x,j,J);const qe=function(V,x,S){if(V.isAbsolute)return new ps(x.root,!0,0);if(-1===S.snapshot._lastPathIndex){const ve=S.snapshot._urlSegment;return new ps(ve,ve===x.root,0)}const j=je(V.commands[0])?0:1;return function(V,x,S){let j=V,J=x,ve=S;for(;ve>J;){if(ve-=J,j=j.parent,!j)throw new Error("Invalid number of '../'");J=j.segments.length}return new ps(j,!1,J-ve)}(S.snapshot._urlSegment,S.snapshot._lastPathIndex+j,V.numberOfDoubleDots)}(ve,x,V),ge=qe.processChildren?Ur(qe.segmentGroup,qe.index,ve.commands):yo(qe.segmentGroup,qe.index,ve.commands);return xo(qe.segmentGroup,ge,x,j,J)}(Rn,this.currentUrlTree,S,tr,null!=jr?jr:null)}navigateByUrl(S,j={skipLocationChange:!1}){const J=Ii(S)?S:this.parseUrl(S),ve=this.urlHandlingStrategy.merge(J,this.rawUrlTree);return this.scheduleNavigation(ve,"imperative",null,j)}navigate(S,j={skipLocationChange:!1}){return function(V){for(let x=0;x<V.length;x++){const S=V[x];if(null==S)throw new Error(`The requested path contains ${S} segment at index ${x}`)}}(S),this.navigateByUrl(this.createUrlTree(S,j),j)}serializeUrl(S){return this.urlSerializer.serialize(S)}parseUrl(S){let j;try{j=this.urlSerializer.parse(S)}catch(J){j=this.malformedUriErrorHandler(J,this.urlSerializer,S)}return j}isActive(S,j){let J;if(J=!0===j?Object.assign({},uo):!1===j?Object.assign({},Fn):j,Ii(S))return Ee(this.currentUrlTree,S,J);const ve=this.parseUrl(S);return Ee(this.currentUrlTree,ve,J)}removeEmptyProps(S){return Object.keys(S).reduce((j,J)=>{const ve=S[J];return null!=ve&&(j[J]=ve),j},{})}processNavigations(){this.navigations.subscribe(S=>{this.navigated=!0,this.lastSuccessfulId=S.id,this.currentPageId=S.targetPageId,this.events.next(new Un(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,S.resolve(!0)},S=>{this.console.warn(`Unhandled Navigation Error: ${S}`)})}scheduleNavigation(S,j,J,ve,qe){var ge,qt;if(this.disposed)return Promise.resolve(!1);const Rn=this.getTransition(),jr=hn(j)&&Rn&&!hn(Rn.source),Dr=(this.lastSuccessfulId===Rn.id||this.currentNavigation?Rn.rawUrl:Rn.urlAfterRedirects).toString()===S.toString();if(jr&&Dr)return Promise.resolve(!0);let ns,no,ys;qe?(ns=qe.resolve,no=qe.reject,ys=qe.promise):ys=new Promise((rs,hl)=>{ns=rs,no=hl});const Io=++this.navigationId;let oi;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(J=this.location.getState()),oi=J&&J.\u0275routerPageId?J.\u0275routerPageId:ve.replaceUrl||ve.skipLocationChange?null!==(ge=this.browserPageId)&&void 0!==ge?ge:0:(null!==(qt=this.browserPageId)&&void 0!==qt?qt:0)+1):oi=0,this.setTransition({id:Io,targetPageId:oi,source:j,restoredState:J,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:S,extras:ve,resolve:ns,reject:no,promise:ys,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ys.catch(rs=>Promise.reject(rs))}setBrowserUrl(S,j){const J=this.urlSerializer.serialize(S),ve=Object.assign(Object.assign({},j.extras.state),this.generateNgRouterState(j.id,j.targetPageId));this.location.isCurrentPathEqualTo(J)||j.extras.replaceUrl?this.location.replaceState(J,"",ve):this.location.go(J,"",ve)}restoreHistory(S,j=!1){var J,ve;if("computed"===this.canceledNavigationResolution){const qe=this.currentPageId-S.targetPageId;"popstate"!==S.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(J=this.currentNavigation)||void 0===J?void 0:J.finalUrl)||0===qe?this.currentUrlTree===(null===(ve=this.currentNavigation)||void 0===ve?void 0:ve.finalUrl)&&0===qe&&(this.resetState(S),this.browserUrlTree=S.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(qe)}else"replace"===this.canceledNavigationResolution&&(j&&this.resetState(S),this.resetUrlToCurrentUrlTree())}resetState(S){this.routerState=S.currentRouterState,this.currentUrlTree=S.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,S.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(S,j){const J=new Xt(S.id,this.serializeUrl(S.extractedUrl),j);this.triggerEvent(J),S.resolve(!1)}generateNgRouterState(S,j){return"computed"===this.canceledNavigationResolution?{navigationId:S,\u0275routerPageId:j}:{navigationId:S}}}return V.\u0275fac=function(S){return new(S||V)(A.LFG(A.DyG),A.LFG(Cn),A.LFG(On),A.LFG(y.Ye),A.LFG(A.zs3),A.LFG(A.v3s),A.LFG(A.Sil),A.LFG(void 0))},V.\u0275prov=A.Yz7({token:V,factory:V.\u0275fac}),V})();function hn(V){return"imperative"!==V}let bt=(()=>{class V{constructor(S,j,J,ve,qe){this.router=S,this.route=j,this.commands=[],this.onChanges=new Ue.xQ,null==J&&ve.setAttribute(qe.nativeElement,"tabindex","0")}ngOnChanges(S){this.onChanges.next(this)}set routerLink(S){this.commands=null!=S?Array.isArray(S)?S:[S]:[]}onClick(){const S={skipLocationChange:fi(this.skipLocationChange),replaceUrl:fi(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,S),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:fi(this.preserveFragment)})}}return V.\u0275fac=function(S){return new(S||V)(A.Y36(Hn),A.Y36(xt),A.$8M("tabindex"),A.Y36(A.Qsj),A.Y36(A.SBq))},V.\u0275dir=A.lG2({type:V,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(S,j){1&S&&A.NdJ("click",function(){return j.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[A.TTD]}),V})();function fi(V){return""===V||!!V}let ho=(()=>{class V{constructor(S,j,J,ve,qe){this.parentContexts=S,this.location=j,this.resolver=J,this.changeDetector=qe,this.activated=null,this._activatedRoute=null,this.activateEvents=new A.vpe,this.deactivateEvents=new A.vpe,this.name=ve||rn,S.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const S=this.parentContexts.getContext(this.name);S&&S.route&&(S.attachRef?this.attach(S.attachRef,S.route):this.activateWith(S.route,S.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const S=this.activated;return this.activated=null,this._activatedRoute=null,S}attach(S,j){this.activated=S,this._activatedRoute=j,this.location.insert(S.hostView)}deactivate(){if(this.activated){const S=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(S)}}activateWith(S,j){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=S;const qe=(j=j||this.resolver).resolveComponentFactory(S._futureSnapshot.routeConfig.component),ge=this.parentContexts.getOrCreateContext(this.name).children,qt=new va(S,ge,this.location.injector);this.activated=this.location.createComponent(qe,this.location.length,qt),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return V.\u0275fac=function(S){return new(S||V)(A.Y36(On),A.Y36(A.s_b),A.Y36(A._Vd),A.$8M("name"),A.Y36(A.sBO))},V.\u0275dir=A.lG2({type:V,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),V})();class va{constructor(x,S,j){this.route=x,this.childContexts=S,this.parent=j}get(x,S){return x===xt?this.route:x===On?this.childContexts:this.parent.get(x,S)}}class rc{}class Ti{preload(x,S){return S().pipe(ut(()=>(0,Ae.of)(null)))}}class Pr{preload(x,S){return(0,Ae.of)(null)}}let Bs=(()=>{class V{constructor(S,j,J,ve,qe){this.router=S,this.injector=ve,this.preloadingStrategy=qe,this.loader=new vn(j,J,Rn=>S.triggerEvent(new hr(Rn)),Rn=>S.triggerEvent(new ei(Rn)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Pe.h)(S=>S instanceof Un),Dt(()=>this.preload())).subscribe(()=>{})}preload(){const S=this.injector.get(A.h0i);return this.processRoutes(S,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(S,j){const J=[];for(const ve of j)if(ve.loadChildren&&!ve.canLoad&&ve._loadedConfig){const qe=ve._loadedConfig;J.push(this.processRoutes(qe.module,qe.routes))}else ve.loadChildren&&!ve.canLoad?J.push(this.preloadConfig(S,ve)):ve.children&&J.push(this.processRoutes(S,ve.children));return(0,le.D)(J).pipe((0,cr.J)(),(0,Mt.U)(ve=>{}))}preloadConfig(S,j){return this.preloadingStrategy.preload(j,()=>(j._loadedConfig?(0,Ae.of)(j._loadedConfig):this.loader.load(S.injector,j)).pipe((0,pt.zg)(ve=>(j._loadedConfig=ve,this.processRoutes(ve.module,ve.routes)))))}}return V.\u0275fac=function(S){return new(S||V)(A.LFG(Hn),A.LFG(A.v3s),A.LFG(A.Sil),A.LFG(A.zs3),A.LFG(rc))},V.\u0275prov=A.Yz7({token:V,factory:V.\u0275fac}),V})(),Ec=(()=>{class V{constructor(S,j,J={}){this.router=S,this.viewportScroller=j,this.options=J,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},J.scrollPositionRestoration=J.scrollPositionRestoration||"disabled",J.anchorScrolling=J.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(S=>{S instanceof un?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=S.navigationTrigger,this.restoredId=S.restoredState?S.restoredState.navigationId:0):S instanceof Un&&(this.lastId=S.id,this.scheduleScrollEvent(S,this.router.parseUrl(S.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(S=>{S instanceof pr&&(S.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(S.position):S.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(S.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(S,j){this.router.triggerEvent(new pr(S,"popstate"===this.lastSource?this.store[this.restoredId]:null,j))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return V.\u0275fac=function(S){return new(S||V)(A.LFG(Hn),A.LFG(y.EM),A.LFG(void 0))},V.\u0275prov=A.Yz7({token:V,factory:V.\u0275fac}),V})();const ms=new A.OlP("ROUTER_CONFIGURATION"),yr=new A.OlP("ROUTER_FORROOT_GUARD"),fo=[y.Ye,{provide:Cn,useClass:Mn},{provide:Hn,useFactory:function(V,x,S,j,J,ve,qe,ge={},qt,Rn){const jr=new Hn(null,V,x,S,j,J,ve,se(qe));return qt&&(jr.urlHandlingStrategy=qt),Rn&&(jr.routeReuseStrategy=Rn),function(V,x){V.errorHandler&&(x.errorHandler=V.errorHandler),V.malformedUriErrorHandler&&(x.malformedUriErrorHandler=V.malformedUriErrorHandler),V.onSameUrlNavigation&&(x.onSameUrlNavigation=V.onSameUrlNavigation),V.paramsInheritanceStrategy&&(x.paramsInheritanceStrategy=V.paramsInheritanceStrategy),V.relativeLinkResolution&&(x.relativeLinkResolution=V.relativeLinkResolution),V.urlUpdateStrategy&&(x.urlUpdateStrategy=V.urlUpdateStrategy)}(ge,jr),ge.enableTracing&&jr.events.subscribe(tr=>{var Nr,Dr;null===(Nr=console.group)||void 0===Nr||Nr.call(console,`Router Event: ${tr.constructor.name}`),console.log(tr.toString()),console.log(tr),null===(Dr=console.groupEnd)||void 0===Dr||Dr.call(console)}),jr},deps:[Cn,On,y.Ye,A.zs3,A.v3s,A.Sil,Jt,ms,[class{},new A.FiY],[q,new A.FiY]]},On,{provide:xt,useFactory:function(V){return V.routerState.root},deps:[Hn]},{provide:A.v3s,useClass:A.EAV},Bs,Pr,Ti,{provide:ms,useValue:{enableTracing:!1}}];function Mi(){return new A.PXZ("Router",Hn)}let dr=(()=>{class V{constructor(S,j){}static forRoot(S,j){return{ngModule:V,providers:[fo,ui(S),{provide:yr,useFactory:Zc,deps:[[Hn,new A.FiY,new A.tp0]]},{provide:ms,useValue:j||{}},{provide:y.S$,useFactory:zr,deps:[y.lw,[new A.tBr(y.mr),new A.FiY],ms]},{provide:Ec,useFactory:ba,deps:[Hn,y.EM,ms]},{provide:rc,useExisting:j&&j.preloadingStrategy?j.preloadingStrategy:Pr},{provide:A.PXZ,multi:!0,useFactory:Mi},[$s,{provide:A.ip1,multi:!0,useFactory:La,deps:[$s]},{provide:Za,useFactory:Or,deps:[$s]},{provide:A.tb,multi:!0,useExisting:Za}]]}}static forChild(S){return{ngModule:V,providers:[ui(S)]}}}return V.\u0275fac=function(S){return new(S||V)(A.LFG(yr,8),A.LFG(Hn,8))},V.\u0275mod=A.oAB({type:V}),V.\u0275inj=A.cJS({}),V})();function ba(V,x,S){return S.scrollOffset&&x.setOffset(S.scrollOffset),new Ec(V,x,S)}function zr(V,x,S={}){return S.useHash?new y.Do(V,x):new y.b0(V,x)}function Zc(V){return"guarded"}function ui(V){return[{provide:A.deG,multi:!0,useValue:V},{provide:Jt,multi:!0,useValue:V}]}let $s=(()=>{class V{constructor(S){this.injector=S,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ue.xQ}appInitializer(){return this.injector.get(y.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let j=null;const J=new Promise(ge=>j=ge),ve=this.injector.get(Hn),qe=this.injector.get(ms);return"disabled"===qe.initialNavigation?(ve.setUpLocationChangeListener(),j(!0)):"enabled"===qe.initialNavigation||"enabledBlocking"===qe.initialNavigation?(ve.hooks.afterPreactivation=()=>this.initNavigation?(0,Ae.of)(null):(this.initNavigation=!0,j(!0),this.resultOfPreactivationDone),ve.initialNavigation()):j(!0),J})}bootstrapListener(S){const j=this.injector.get(ms),J=this.injector.get(Bs),ve=this.injector.get(Ec),qe=this.injector.get(Hn),ge=this.injector.get(A.z2F);S===ge.components[0]&&(("enabledNonBlocking"===j.initialNavigation||void 0===j.initialNavigation)&&qe.initialNavigation(),J.setUpPreloading(),ve.init(),qe.resetRootComponentType(ge.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return V.\u0275fac=function(S){return new(S||V)(A.LFG(A.zs3))},V.\u0275prov=A.Yz7({token:V,factory:V.\u0275fac}),V})();function La(V){return V.appInitializer.bind(V)}function Or(V){return V.bootstrapListener.bind(V)}const Za=new A.OlP("Router Initializer")},8384:(en,it,F)=>{"use strict";F.d(it,{Uw:()=>Ze,fo:()=>we});var y=F(8239);"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global&&global;var L=(()=>{return(Pe=L||(L={})).Unimplemented="UNIMPLEMENTED",Pe.Unavailable="UNAVAILABLE",L;var Pe})();class Ce extends Error{constructor(be,Me,et){super(be),this.message=be,this.code=Me,this.data=et}}const he=Pe=>{var be,Me,et,dt,nt;const At=Pe.CapacitorCustomPlatform||null,Ie=Pe.Capacitor||{},Ye=Ie.Plugins=Ie.Plugins||{},Ve=Pe.CapacitorPlatforms,tt=(null===(be=null==Ve?void 0:Ve.currentPlatform)||void 0===be?void 0:be.getPlatform)||(()=>null!==At?At.name:(Pe=>{var be,Me;return(null==Pe?void 0:Pe.androidBridge)?"android":(null===(Me=null===(be=null==Pe?void 0:Pe.webkit)||void 0===be?void 0:be.messageHandlers)||void 0===Me?void 0:Me.bridge)?"ios":"web"})(Pe)),Bt=(null===(Me=null==Ve?void 0:Ve.currentPlatform)||void 0===Me?void 0:Me.isNativePlatform)||(()=>"web"!==tt()),Nt=(null===(et=null==Ve?void 0:Ve.currentPlatform)||void 0===et?void 0:et.isPluginAvailable)||(Tt=>{const un=Sn.get(Tt);return!(!(null==un?void 0:un.platforms.has(tt()))&&!Nn(Tt))}),Nn=(null===(dt=null==Ve?void 0:Ve.currentPlatform)||void 0===dt?void 0:dt.getPluginHeader)||(Tt=>{var un;return null===(un=Ie.PluginHeaders)||void 0===un?void 0:un.find(Un=>Un.name===Tt)}),Sn=new Map,cr=(null===(nt=null==Ve?void 0:Ve.currentPlatform)||void 0===nt?void 0:nt.registerPlugin)||((Tt,un={})=>{const Un=Sn.get(Tt);if(Un)return console.warn(`Capacitor plugin "${Tt}" already registered. Cannot register plugins twice.`),Un.proxy;const Xt=tt(),Ln=Nn(Tt);let kn;const Xn=function(){var Ht=(0,y.Z)(function*(){return!kn&&Xt in un?kn=kn="function"==typeof un[Xt]?yield un[Xt]():un[Xt]:null!==At&&!kn&&"web"in un&&(kn=kn="function"==typeof un.web?yield un.web():un.web),kn});return function(){return Ht.apply(this,arguments)}}(),vr=Ht=>{let It;const ur=(...pr)=>{const rn=Xn().then(En=>{const Jn=((Ht,It)=>{var ur,pr;if(!Ln){if(Ht)return null===(pr=Ht[It])||void 0===pr?void 0:pr.bind(Ht);throw new Ce(`"${Tt}" plugin is not implemented on ${Xt}`,L.Unimplemented)}{const rn=null==Ln?void 0:Ln.methods.find(En=>It===En.name);if(rn)return"promise"===rn.rtype?En=>Ie.nativePromise(Tt,It.toString(),En):(En,Jn)=>Ie.nativeCallback(Tt,It.toString(),En,Jn);if(Ht)return null===(ur=Ht[It])||void 0===ur?void 0:ur.bind(Ht)}})(En,Ht);if(Jn){const rr=Jn(...pr);return It=null==rr?void 0:rr.remove,rr}throw new Ce(`"${Tt}.${Ht}()" is not implemented on ${Xt}`,L.Unimplemented)});return"addListener"===Ht&&(rn.remove=(0,y.Z)(function*(){return It()})),rn};return ur.toString=()=>`${Ht.toString()}() { [capacitor code] }`,Object.defineProperty(ur,"name",{value:Ht,writable:!1,configurable:!1}),ur},Er=vr("addListener"),hr=vr("removeListener"),ei=(Ht,It)=>{const ur=Er({eventName:Ht},It),pr=function(){var En=(0,y.Z)(function*(){const Jn=yield ur;hr({eventName:Ht,callbackId:Jn},It)});return function(){return En.apply(this,arguments)}}(),rn=new Promise(En=>ur.then(()=>En({remove:pr})));return rn.remove=(0,y.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield pr()}),rn},nr=new Proxy({},{get(Ht,It){switch(It){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return Ln?ei:Er;case"removeListener":return hr;default:return vr(It)}}});return Ye[Tt]=nr,Sn.set(Tt,{name:Tt,proxy:nr,platforms:new Set([...Object.keys(un),...Ln?[Xt]:[]])}),nr});return Ie.convertFileSrc||(Ie.convertFileSrc=Tt=>Tt),Ie.getPlatform=tt,Ie.handleError=Tt=>Pe.console.error(Tt),Ie.isNativePlatform=Bt,Ie.isPluginAvailable=Nt,Ie.pluginMethodNoop=(Tt,un,Un)=>Promise.reject(`${Un} does not have an implementation of "${un}".`),Ie.registerPlugin=cr,Ie.Exception=Ce,Ie.DEBUG=!!Ie.DEBUG,Ie.isLoggingEnabled=!!Ie.isLoggingEnabled,Ie.platform=Ie.getPlatform(),Ie.isNative=Ie.isNativePlatform(),Ie},le=(Pe=>Pe.Capacitor=he(Pe))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),we=le.registerPlugin;class Ze{constructor(be){this.listeners={},this.windowListeners={},be&&(console.warn(`Capacitor WebPlugin "${be.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=be)}addListener(be,Me){var et=this;this.listeners[be]||(this.listeners[be]=[]),this.listeners[be].push(Me);const nt=this.windowListeners[be];nt&&!nt.registered&&this.addWindowListener(nt);const At=function(){var Ye=(0,y.Z)(function*(){return et.removeListener(be,Me)});return function(){return Ye.apply(this,arguments)}}(),Ie=Promise.resolve({remove:At});return Object.defineProperty(Ie,"remove",{value:(Ye=(0,y.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield At()}),function(){return Ye.apply(this,arguments)})}),Ie;var Ye}removeAllListeners(){var be=this;return(0,y.Z)(function*(){be.listeners={};for(const Me in be.windowListeners)be.removeWindowListener(be.windowListeners[Me]);be.windowListeners={}})()}notifyListeners(be,Me){const et=this.listeners[be];et&&et.forEach(dt=>dt(Me))}hasListeners(be){return!!this.listeners[be].length}registerWindowListener(be,Me){this.windowListeners[Me]={registered:!1,windowEventName:be,pluginEventName:Me,handler:et=>{this.notifyListeners(Me,et)}}}unimplemented(be="not implemented"){return new le.Exception(be,L.Unimplemented)}unavailable(be="not available"){return new le.Exception(be,L.Unavailable)}removeListener(be,Me){var et=this;return(0,y.Z)(function*(){const dt=et.listeners[be];if(!dt)return;const nt=dt.indexOf(Me);et.listeners[be].splice(nt,1),et.listeners[be].length||et.removeWindowListener(et.windowListeners[be])})()}addWindowListener(be){window.addEventListener(be.windowEventName,be.handler),be.registered=!0}removeWindowListener(be){!be||(window.removeEventListener(be.windowEventName,be.handler),be.registered=!1)}}const ft=Pe=>encodeURIComponent(Pe).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);class Se extends Ze{setCookie(be){return(0,y.Z)(function*(){try{const Me=ft(be.key),et=ft(be.value),dt=`; expires=${(be.expires||"").replace("expires=","")}`,nt=(be.path||"/").replace("path=","");document.cookie=`${Me}=${et||""}${dt}; path=${nt}`}catch(Me){return Promise.reject(Me)}})()}deleteCookie(be){return(0,y.Z)(function*(){try{document.cookie=`${be.key}=; Max-Age=0`}catch(Me){return Promise.reject(Me)}})()}clearCookies(){return(0,y.Z)(function*(){try{const be=document.cookie.split(";")||[];for(const Me of be)document.cookie=Me.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(be){return Promise.reject(be)}})()}clearAllCookies(){var be=this;return(0,y.Z)(function*(){try{yield be.clearCookies()}catch(Me){return Promise.reject(Me)}})()}}we("CapacitorCookies",{web:()=>new Se});const gt=function(){var Pe=(0,y.Z)(function*(be){return new Promise((Me,et)=>{const dt=new FileReader;dt.onload=()=>{const nt=dt.result;Me(nt.indexOf(",")>=0?nt.split(",")[1]:nt)},dt.onerror=nt=>et(nt),dt.readAsDataURL(be)})});return function(Me){return Pe.apply(this,arguments)}}();class pt extends Ze{request(be){return(0,y.Z)(function*(){const Me=((Pe,be={})=>{const Me=Object.assign({method:Pe.method||"GET",headers:Pe.headers},be),dt=((Pe={})=>{const be=Object.keys(Pe);return Object.keys(Pe).map(dt=>dt.toLocaleLowerCase()).reduce((dt,nt,At)=>(dt[nt]=Pe[be[At]],dt),{})})(Pe.headers)["content-type"]||"";if("string"==typeof Pe.data)Me.body=Pe.data;else if(dt.includes("application/x-www-form-urlencoded")){const nt=new URLSearchParams;for(const[At,Ie]of Object.entries(Pe.data||{}))nt.set(At,Ie);Me.body=nt.toString()}else if(dt.includes("multipart/form-data")){const nt=new FormData;if(Pe.data instanceof FormData)Pe.data.forEach((Ie,Ye)=>{nt.append(Ye,Ie)});else for(const Ie of Object.keys(Pe.data))nt.append(Ie,Pe.data[Ie]);Me.body=nt;const At=new Headers(Me.headers);At.delete("content-type"),Me.headers=At}else(dt.includes("application/json")||"object"==typeof Pe.data)&&(Me.body=JSON.stringify(Pe.data));return Me})(be,be.webFetchExtra),et=((Pe,be=!0)=>Pe?Object.entries(Pe).reduce((et,dt)=>{const[nt,At]=dt;let Ie,Ye;return Array.isArray(At)?(Ye="",At.forEach(Ve=>{Ie=be?encodeURIComponent(Ve):Ve,Ye+=`${nt}=${Ie}&`}),Ye.slice(0,-1)):(Ie=be?encodeURIComponent(At):At,Ye=`${nt}=${Ie}`),`${et}&${Ye}`},"").substr(1):null)(be.params,be.shouldEncodeUrlParams),dt=et?`${be.url}?${et}`:be.url,nt=yield fetch(dt,Me),At=nt.headers.get("content-type")||"";let Ye,Ve,{responseType:Ie="text"}=nt.ok?be:{};switch(At.includes("application/json")&&(Ie="json"),Ie){case"arraybuffer":case"blob":Ve=yield nt.blob(),Ye=yield gt(Ve);break;case"json":Ye=yield nt.json();break;default:Ye=yield nt.text()}const Fe={};return nt.headers.forEach((tt,St)=>{Fe[St]=tt}),{data:Ye,headers:Fe,status:nt.status,url:nt.url}})()}get(be){var Me=this;return(0,y.Z)(function*(){return Me.request(Object.assign(Object.assign({},be),{method:"GET"}))})()}post(be){var Me=this;return(0,y.Z)(function*(){return Me.request(Object.assign(Object.assign({},be),{method:"POST"}))})()}put(be){var Me=this;return(0,y.Z)(function*(){return Me.request(Object.assign(Object.assign({},be),{method:"PUT"}))})()}patch(be){var Me=this;return(0,y.Z)(function*(){return Me.request(Object.assign(Object.assign({},be),{method:"PATCH"}))})()}delete(be){var Me=this;return(0,y.Z)(function*(){return Me.request(Object.assign(Object.assign({},be),{method:"DELETE"}))})()}}we("CapacitorHttp",{web:()=>new pt})},1796:(en,it,F)=>{"use strict";F.d(it,{u:()=>A});const A=(0,F(8384).fo)("Preferences",{web:()=>F.e(5034).then(F.bind(F,5034)).then(te=>new te.PreferencesWeb)})},3607:(en,it,F)=>{"use strict";F.d(it,{$:()=>Fa,A:()=>Ve,B:()=>St,G:()=>Pn,H:()=>hi,J:()=>ci,L:()=>Qn,M:()=>De,N:()=>G,P:()=>B,Q:()=>$,R:()=>Qo,T:()=>k,U:()=>an,V:()=>er,W:()=>Kr,X:()=>ar,Y:()=>Os,Z:()=>Vl,_:()=>aa,a:()=>x,a0:()=>co,a1:()=>vo,a2:()=>Eo,a3:()=>la,a4:()=>vi,a5:()=>qa,a6:()=>No,a7:()=>_a,a8:()=>w,a9:()=>N,aA:()=>ph,aB:()=>sc,aC:()=>Ha,aD:()=>Ho,aE:()=>xt,aI:()=>J,aL:()=>mt,aa:()=>vt,ab:()=>vn,ac:()=>On,af:()=>lr,ag:()=>uo,ah:()=>Fn,ak:()=>sa,al:()=>va,an:()=>dr,ao:()=>Ia,ap:()=>Y,aq:()=>Un,ar:()=>_t,as:()=>mi,at:()=>wn,au:()=>Nu,av:()=>tu,aw:()=>yn,ax:()=>Tt,ay:()=>Ln,az:()=>Wr,b:()=>Qa,c:()=>kr,d:()=>pi,e:()=>fr,f:()=>Wa,g:()=>xu,h:()=>Wo,i:()=>po,j:()=>Jc,k:()=>ku,l:()=>Qc,m:()=>ga,n:()=>Eh,o:()=>At,q:()=>Ti,r:()=>Ic,s:()=>Ja,u:()=>el,y:()=>ms});var y=F(8239),A=F(3854),te=F(8026),ke=F(5422);function L(D,g){var v={};for(var R in D)Object.prototype.hasOwnProperty.call(D,R)&&g.indexOf(R)<0&&(v[R]=D[R]);if(null!=D&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(R=Object.getOwnPropertySymbols(D);ee<R.length;ee++)g.indexOf(R[ee])<0&&Object.prototype.propertyIsEnumerable.call(D,R[ee])&&(v[R[ee]]=D[R[ee]])}return v}var dt=F(3910);const At={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ve={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const St=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Bt=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Mt=new A.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),gn=new ke.Yd("@firebase/auth");function Nn(D,...g){gn.logLevel<=ke.in.ERROR&&gn.error(`Auth (${te.SDK_VERSION}): ${D}`,...g)}function wn(D,...g){throw cr(D,...g)}function yn(D,...g){return cr(D,...g)}function Sn(D,g,v){const R=Object.assign(Object.assign({},Bt()),{[g]:v});return new A.LL("auth","Firebase",R).create(g,{appName:D.name})}function mr(D,g,v){if(!(g instanceof v))throw v.name!==g.constructor.name&&wn(D,"argument-error"),Sn(D,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function cr(D,...g){if("string"!=typeof D){const v=g[0],R=[...g.slice(1)];return R[0]&&(R[0].appName=D.name),D._errorFactory.create(v,...R)}return Mt.create(D,...g)}function Tt(D,g,...v){if(!D)throw cr(g,...v)}function un(D){const g="INTERNAL ASSERTION FAILED: "+D;throw Nn(g),new Error(g)}function Un(D,g){D||un(g)}const Xt=new Map;function Ln(D){Un(D instanceof Function,"Expected a class definition");let g=Xt.get(D);return g?(Un(g instanceof D,"Instance stored in cache mismatched with class"),g):(g=new D,Xt.set(D,g),g)}function or(){var D;return"undefined"!=typeof self&&(null===(D=self.location)||void 0===D?void 0:D.href)||""}function vr(){return"http:"===Er()||"https:"===Er()}function Er(){var D;return"undefined"!=typeof self&&(null===(D=self.location)||void 0===D?void 0:D.protocol)||null}class nr{constructor(g,v){this.shortDelay=g,this.longDelay=v,Un(v>g,"Short delay should be less than long delay!"),this.isMobile=(0,A.uI)()||(0,A.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(vr()||(0,A.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Ht(D,g){Un(D.emulator,"Emulator should always be set here");const{url:v}=D.emulator;return g?`${v}${g.startsWith("/")?g.slice(1):g}`:v}class It{static initialize(g,v,R){this.fetchImpl=g,v&&(this.headersImpl=v),R&&(this.responseImpl=R)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ur={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},pr=new nr(3e4,6e4);function rn(D,g){return D.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:D.tenantId}):g}function En(D,g,v,R){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,y.Z)(function*(D,g,v,R,ee={}){return rr(D,ee,(0,y.Z)(function*(){let de={},lt={};R&&("GET"===g?lt=R:de={body:JSON.stringify(R)});const zt=(0,A.xO)(Object.assign({key:D.config.apiKey},lt)).slice(1),Dn=yield D._getAdditionalHeaders();return Dn["Content-Type"]="application/json",D.languageCode&&(Dn["X-Firebase-Locale"]=D.languageCode),It.fetch()(ti(D,D.config.apiHost,v,zt),Object.assign({method:g,headers:Dn,referrerPolicy:"no-referrer"},de))}))})).apply(this,arguments)}function rr(D,g,v){return ir.apply(this,arguments)}function ir(){return(ir=(0,y.Z)(function*(D,g,v){D._canInitEmulator=!1;const R=Object.assign(Object.assign({},ur),g);try{const ee=new fn(D),de=yield Promise.race([v(),ee.promise]);ee.clearNetworkTimeout();const lt=yield de.json();if("needConfirmation"in lt)throw Xe(D,"account-exists-with-different-credential",lt);if(de.ok&&!("errorMessage"in lt))return lt;{const zt=de.ok?lt.errorMessage:lt.error.message,[Dn,bn]=zt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Dn)throw Xe(D,"credential-already-in-use",lt);if("EMAIL_EXISTS"===Dn)throw Xe(D,"email-already-in-use",lt);if("USER_DISABLED"===Dn)throw Xe(D,"user-disabled",lt);const _r=R[Dn]||Dn.toLowerCase().replace(/[_\s]+/g,"-");if(bn)throw Sn(D,_r,bn);wn(D,_r)}}catch(ee){if(ee instanceof A.ZR)throw ee;wn(D,"network-request-failed")}})).apply(this,arguments)}function Kn(D,g,v,R){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,y.Z)(function*(D,g,v,R,ee={}){const de=yield En(D,g,v,R,ee);return"mfaPendingCredential"in de&&wn(D,"multi-factor-auth-required",{_serverResponse:de}),de})).apply(this,arguments)}function ti(D,g,v,R){const ee=`${g}${v}?${R}`;return D.config.emulator?Ht(D.config,ee):`${D.config.apiScheme}://${ee}`}class fn{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((v,R)=>{this.timer=setTimeout(()=>R(yn(this.auth,"network-request-failed")),pr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xe(D,g,v){const R={appName:D.name};v.email&&(R.email=v.email),v.phoneNumber&&(R.phoneNumber=v.phoneNumber);const ee=yn(D,g,R);return ee.customData._tokenResponse=v,ee}function xe(){return(xe=(0,y.Z)(function*(D,g){return En(D,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function at(D,g){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,y.Z)(function*(D,g){return En(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Be(D,g){return He.apply(this,arguments)}function He(){return(He=(0,y.Z)(function*(D,g){return En(D,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function ct(D){if(D)try{const g=new Date(Number(D));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function $e(){return($e=(0,y.Z)(function*(D,g=!1){const v=(0,A.m9)(D),R=yield v.getIdToken(g),ee=Qt(R);Tt(ee&&ee.exp&&ee.auth_time&&ee.iat,v.auth,"internal-error");const de="object"==typeof ee.firebase?ee.firebase:void 0,lt=null==de?void 0:de.sign_in_provider;return{claims:ee,token:R,authTime:ct(wt(ee.auth_time)),issuedAtTime:ct(wt(ee.iat)),expirationTime:ct(wt(ee.exp)),signInProvider:lt||null,signInSecondFactor:(null==de?void 0:de.sign_in_second_factor)||null}})).apply(this,arguments)}function wt(D){return 1e3*Number(D)}function Qt(D){var g;const[v,R,ee]=D.split(".");if(void 0===v||void 0===R||void 0===ee)return Nn("JWT malformed, contained fewer than 3 sections"),null;try{const de=(0,A.tV)(R);return de?JSON.parse(de):(Nn("Failed to decode base64 JWT payload"),null)}catch(de){return Nn("Caught error parsing JWT payload as JSON",null===(g=de)||void 0===g?void 0:g.toString()),null}}function An(D,g){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,y.Z)(function*(D,g,v=!1){if(v)return g;try{return yield g}catch(R){throw R instanceof A.ZR&&mn(R)&&D.auth.currentUser===D&&(yield D.auth.signOut()),R}})).apply(this,arguments)}function mn({code:D}){return"auth/user-disabled"===D||"auth/user-token-expired"===D}class In{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var v;if(g){const R=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),R}{this.errorBackoff=3e4;const ee=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,ee)}}schedule(g=!1){var v=this;if(!this.isRunning)return;const R=this.getInterval(g);this.timerId=setTimeout((0,y.Z)(function*(){yield v.iteration()}),R)}iteration(){var g=this;return(0,y.Z)(function*(){var v;try{yield g.user.getIdToken(!0)}catch(R){return void("auth/network-request-failed"===(null===(v=R)||void 0===v?void 0:v.code)&&g.schedule(!0))}g.schedule()})()}}class br{constructor(g,v){this.createdAt=g,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=ct(this.lastLoginAt),this.creationTime=ct(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Zt(D){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,y.Z)(function*(D){var g;const v=D.auth,R=yield D.getIdToken(),ee=yield An(D,Be(v,{idToken:R}));Tt(null==ee?void 0:ee.users.length,v,"internal-error");const de=ee.users[0];D._notifyReloadListener(de);const lt=(null===(g=de.providerUserInfo)||void 0===g?void 0:g.length)?dn(de.providerUserInfo):[],zt=Mn(D.providerData,lt),_r=!!D.isAnonymous&&!(D.email&&de.passwordHash||(null==zt?void 0:zt.length)),ai={uid:de.localId,displayName:de.displayName||null,photoURL:de.photoUrl||null,email:de.email||null,emailVerified:de.emailVerified||!1,phoneNumber:de.phoneNumber||null,tenantId:de.tenantId||null,providerData:zt,metadata:new br(de.createdAt,de.lastLoginAt),isAnonymous:_r};Object.assign(D,ai)})).apply(this,arguments)}function Cn(){return(Cn=(0,y.Z)(function*(D){const g=(0,A.m9)(D);yield Zt(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Mn(D,g){return[...D.filter(R=>!g.some(ee=>ee.providerId===R.providerId)),...g]}function dn(D){return D.map(g=>{var{providerId:v}=g,R=L(g,["providerId"]);return{providerId:v,uid:R.rawId||"",displayName:R.displayName||null,email:R.email||null,phoneNumber:R.phoneNumber||null,photoURL:R.photoUrl||null}})}function Tr(){return(Tr=(0,y.Z)(function*(D,g){const v=yield rr(D,{},(0,y.Z)(function*(){const R=(0,A.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:ee,apiKey:de}=D.config,lt=ti(D,ee,"/v1/token",`key=${de}`),zt=yield D._getAdditionalHeaders();return zt["Content-Type"]="application/x-www-form-urlencoded",It.fetch()(lt,{method:"POST",headers:zt,body:R})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class Fr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Tt(g.idToken,"internal-error"),Tt(void 0!==g.idToken,"internal-error"),Tt(void 0!==g.refreshToken,"internal-error");const v="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function(D){const g=Qt(D);return Tt(g,"internal-error"),Tt(void 0!==g.exp,"internal-error"),Tt(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,v)}getToken(g,v=!1){var R=this;return(0,y.Z)(function*(){return Tt(!R.accessToken||R.refreshToken,g,"user-token-expired"),v||!R.accessToken||R.isExpired?R.refreshToken?(yield R.refresh(g,R.refreshToken),R.accessToken):null:R.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,v){var R=this;return(0,y.Z)(function*(){const{accessToken:ee,refreshToken:de,expiresIn:lt}=yield function(D,g){return Tr.apply(this,arguments)}(g,v);R.updateTokensAndExpiration(ee,de,Number(lt))})()}updateTokensAndExpiration(g,v,R){this.refreshToken=v||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*R}static fromJSON(g,v){const{refreshToken:R,accessToken:ee,expirationTime:de}=v,lt=new Fr;return R&&(Tt("string"==typeof R,"internal-error",{appName:g}),lt.refreshToken=R),ee&&(Tt("string"==typeof ee,"internal-error",{appName:g}),lt.accessToken=ee),de&&(Tt("number"==typeof de,"internal-error",{appName:g}),lt.expirationTime=de),lt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Fr,this.toJSON())}_performRefresh(){return un("not implemented")}}function wr(D,g){Tt("string"==typeof D||void 0===D,"internal-error",{appName:g})}class Xr{constructor(g){var{uid:v,auth:R,stsTokenManager:ee}=g,de=L(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new In(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=R,this.stsTokenManager=ee,this.accessToken=ee.accessToken,this.displayName=de.displayName||null,this.email=de.email||null,this.emailVerified=de.emailVerified||!1,this.phoneNumber=de.phoneNumber||null,this.photoURL=de.photoURL||null,this.isAnonymous=de.isAnonymous||!1,this.tenantId=de.tenantId||null,this.providerData=de.providerData?[...de.providerData]:[],this.metadata=new br(de.createdAt||void 0,de.lastLoginAt||void 0)}getIdToken(g){var v=this;return(0,y.Z)(function*(){const R=yield An(v,v.stsTokenManager.getToken(v.auth,g));return Tt(R,v.auth,"internal-error"),v.accessToken!==R&&(v.accessToken=R,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),R})()}getIdTokenResult(g){return function(D){return $e.apply(this,arguments)}(this,g)}reload(){return function(D){return Cn.apply(this,arguments)}(this)}_assign(g){this!==g&&(Tt(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(v=>Object.assign({},v)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Xr(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){Tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,v=!1){var R=this;return(0,y.Z)(function*(){let ee=!1;g.idToken&&g.idToken!==R.stsTokenManager.accessToken&&(R.stsTokenManager.updateFromServerResponse(g),ee=!0),v&&(yield Zt(R)),yield R.auth._persistUserIfCurrent(R),ee&&R.auth._notifyListenersIfCurrent(R)})()}delete(){var g=this;return(0,y.Z)(function*(){const v=yield g.getIdToken();return yield An(g,function(D,g){return xe.apply(this,arguments)}(g.auth,{idToken:v})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,v){var R,ee,de,lt,zt,Dn,bn,_r;const ai=null!==(R=v.displayName)&&void 0!==R?R:void 0,Oi=null!==(ee=v.email)&&void 0!==ee?ee:void 0,Ts=null!==(de=v.phoneNumber)&&void 0!==de?de:void 0,Il=null!==(lt=v.photoURL)&&void 0!==lt?lt:void 0,Fu=null!==(zt=v.tenantId)&&void 0!==zt?zt:void 0,Xs=null!==(Dn=v._redirectEventId)&&void 0!==Dn?Dn:void 0,Lu=null!==(bn=v.createdAt)&&void 0!==bn?bn:void 0,Cl=null!==(_r=v.lastLoginAt)&&void 0!==_r?_r:void 0,{uid:Fs,emailVerified:Us,isAnonymous:wl,providerData:su,stsTokenManager:Ls}=v;Tt(Fs&&Ls,g,"internal-error");const Rc=Fr.fromJSON(this.name,Ls);Tt("string"==typeof Fs,g,"internal-error"),wr(ai,g.name),wr(Oi,g.name),Tt("boolean"==typeof Us,g,"internal-error"),Tt("boolean"==typeof wl,g,"internal-error"),wr(Ts,g.name),wr(Il,g.name),wr(Fu,g.name),wr(Xs,g.name),wr(Lu,g.name),wr(Cl,g.name);const Tl=new Xr({uid:Fs,auth:g,email:Oi,emailVerified:Us,displayName:ai,isAnonymous:wl,photoURL:Il,phoneNumber:Ts,tenantId:Fu,stsTokenManager:Rc,createdAt:Lu,lastLoginAt:Cl});return su&&Array.isArray(su)&&(Tl.providerData=su.map(Td=>Object.assign({},Td))),Xs&&(Tl._redirectEventId=Xs),Tl}static _fromIdTokenResponse(g,v,R=!1){return(0,y.Z)(function*(){const ee=new Fr;ee.updateFromServerResponse(v);const de=new Xr({uid:v.localId,auth:g,stsTokenManager:ee,isAnonymous:R});return yield Zt(de),de})()}}const Qn=(()=>{class D{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,y.Z)(function*(){return!0})()}_set(v,R){var ee=this;return(0,y.Z)(function*(){ee.storage[v]=R})()}_get(v){var R=this;return(0,y.Z)(function*(){const ee=R.storage[v];return void 0===ee?null:ee})()}_remove(v){var R=this;return(0,y.Z)(function*(){delete R.storage[v]})()}_addListener(v,R){}_removeListener(v,R){}}return D.type="NONE",D})();function Wr(D,g,v){return`firebase:${D}:${g}:${v}`}class di{constructor(g,v,R){this.persistence=g,this.auth=v,this.userKey=R;const{config:ee,name:de}=this.auth;this.fullUserKey=Wr(this.userKey,ee.apiKey,de),this.fullPersistenceKey=Wr("persistence",ee.apiKey,de),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,y.Z)(function*(){const v=yield g.persistence._get(g.fullUserKey);return v?Xr._fromJSON(g.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var v=this;return(0,y.Z)(function*(){if(v.persistence===g)return;const R=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=g,R?v.setCurrentUser(R):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,v,R="authUser"){return(0,y.Z)(function*(){if(!v.length)return new di(Ln(Qn),g,R);const ee=(yield Promise.all(v.map(function(){var bn=(0,y.Z)(function*(_r){if(yield _r._isAvailable())return _r});return function(_r){return bn.apply(this,arguments)}}()))).filter(bn=>bn);let de=ee[0]||Ln(Qn);const lt=Wr(R,g.config.apiKey,g.name);let zt=null;for(const bn of v)try{const _r=yield bn._get(lt);if(_r){const ai=Xr._fromJSON(g,_r);bn!==de&&(zt=ai),de=bn;break}}catch(_r){}const Dn=ee.filter(bn=>bn._shouldAllowMigration);return de._shouldAllowMigration&&Dn.length?(de=Dn[0],zt&&(yield de._set(lt,zt.toJSON())),yield Promise.all(v.map(function(){var bn=(0,y.Z)(function*(_r){if(_r!==de)try{yield _r._remove(lt)}catch(ai){}});return function(_r){return bn.apply(this,arguments)}}())),new di(de,g,R)):new di(de,g,R)})()}}function Yr(D){const g=D.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(qr(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(fs(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Ar(g))return"Blackberry";if(As(g))return"Webos";if($r(g))return"Safari";if((g.includes("chrome/")||zi(g))&&!g.includes("edge/"))return"Chrome";if(mi(g))return"Android";{const R=D.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==R?void 0:R.length))return R[1]}return"Other"}function fs(D=(0,A.z$)()){return/firefox\//i.test(D)}function $r(D=(0,A.z$)()){const g=D.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function zi(D=(0,A.z$)()){return/crios\//i.test(D)}function qr(D=(0,A.z$)()){return/iemobile/i.test(D)}function mi(D=(0,A.z$)()){return/android/i.test(D)}function Ar(D=(0,A.z$)()){return/blackberry/i.test(D)}function As(D=(0,A.z$)()){return/webos/i.test(D)}function _t(D=(0,A.z$)()){return/iphone|ipad|ipod/i.test(D)||/macintosh/i.test(D)&&/mobile/i.test(D)}function Y(D=(0,A.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(D)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(D)}function Te(D=(0,A.z$)()){return _t(D)||mi(D)||As(D)||Ar(D)||/windows phone/i.test(D)||qr(D)}function rt(D,g=[]){let v;switch(D){case"Browser":v=Yr((0,A.z$)());break;case"Worker":v=`${Yr((0,A.z$)())}-${D}`;break;default:v=D}const R=g.length?g.join(","):"FirebaseCore-web";return`${v}/JsCore/${te.SDK_VERSION}/${R}`}class Ot{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,v){const R=de=>new Promise((lt,zt)=>{try{lt(g(de))}catch(Dn){zt(Dn)}});R.onAbort=v,this.queue.push(R);const ee=this.queue.length-1;return()=>{this.queue[ee]=()=>Promise.resolve()}}runMiddleware(g){var v=this;return(0,y.Z)(function*(){var R;if(v.auth.currentUser===g)return;const ee=[];try{for(const de of v.queue)yield de(g),de.onAbort&&ee.push(de.onAbort)}catch(de){ee.reverse();for(const lt of ee)try{lt()}catch(zt){}throw v.auth._errorFactory.create("login-blocked",{originalMessage:null===(R=de)||void 0===R?void 0:R.message})}})()}}class Pt{constructor(g,v,R){this.app=g,this.heartbeatServiceProvider=v,this.config=R,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new on(this),this.idTokenSubscription=new on(this),this.beforeStateQueue=new Ot(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Mt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=R.sdkClientVersion}_initializeWithPersistence(g,v){var R=this;return v&&(this._popupRedirectResolver=Ln(v)),this._initializationPromise=this.queue((0,y.Z)(function*(){var ee,de;if(!R._deleted&&(R.persistenceManager=yield di.create(R,g),!R._deleted)){if(null===(ee=R._popupRedirectResolver)||void 0===ee?void 0:ee._shouldInitProactively)try{yield R._popupRedirectResolver._initialize(R)}catch(lt){}yield R.initializeCurrentUser(v),R.lastNotifiedUid=(null===(de=R.currentUser)||void 0===de?void 0:de.uid)||null,!R._deleted&&(R._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,y.Z)(function*(){if(g._deleted)return;const v=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||v){if(g.currentUser&&v&&g.currentUser.uid===v.uid)return g._currentUser._assign(v),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(v,!0)}})()}initializeCurrentUser(g){var v=this;return(0,y.Z)(function*(){var R;const ee=yield v.assertedPersistence.getCurrentUser();let de=ee,lt=!1;if(g&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const zt=null===(R=v.redirectUser)||void 0===R?void 0:R._redirectEventId,Dn=null==de?void 0:de._redirectEventId,bn=yield v.tryRedirectSignIn(g);(!zt||zt===Dn)&&(null==bn?void 0:bn.user)&&(de=bn.user,lt=!0)}if(!de)return v.directlySetCurrentUser(null);if(!de._redirectEventId){if(lt)try{yield v.beforeStateQueue.runMiddleware(de)}catch(zt){de=ee,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(zt))}return de?v.reloadAndSetCurrentUserOrClear(de):v.directlySetCurrentUser(null)}return Tt(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===de._redirectEventId?v.directlySetCurrentUser(de):v.reloadAndSetCurrentUserOrClear(de)})()}tryRedirectSignIn(g){var v=this;return(0,y.Z)(function*(){let R=null;try{R=yield v._popupRedirectResolver._completeRedirectFn(v,g,!0)}catch(ee){yield v._setRedirectUser(null)}return R})()}reloadAndSetCurrentUserOrClear(g){var v=this;return(0,y.Z)(function*(){var R;try{yield Zt(g)}catch(ee){if("auth/network-request-failed"!==(null===(R=ee)||void 0===R?void 0:R.code))return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const D=navigator;return D.languages&&D.languages[0]||D.language||null}()}_delete(){var g=this;return(0,y.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var v=this;return(0,y.Z)(function*(){const R=g?(0,A.m9)(g):null;return R&&Tt(R.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(R&&R._clone(v))})()}_updateCurrentUser(g,v=!1){var R=this;return(0,y.Z)(function*(){if(!R._deleted)return g&&Tt(R.tenantId===g.tenantId,R,"tenant-id-mismatch"),v||(yield R.beforeStateQueue.runMiddleware(g)),R.queue((0,y.Z)(function*(){yield R.directlySetCurrentUser(g),R.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,y.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var v=this;return this.queue((0,y.Z)(function*(){yield v.assertedPersistence.setPersistence(Ln(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new A.LL("auth","Firebase",g())}onAuthStateChanged(g,v,R){return this.registerStateListener(this.authStateSubscription,g,v,R)}beforeAuthStateChanged(g,v){return this.beforeStateQueue.pushCallback(g,v)}onIdTokenChanged(g,v,R){return this.registerStateListener(this.idTokenSubscription,g,v,R)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,v){var R=this;return(0,y.Z)(function*(){const ee=yield R.getOrInitRedirectPersistenceManager(v);return null===g?ee.removeCurrentUser():ee.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var v=this;return(0,y.Z)(function*(){if(!v.redirectPersistenceManager){const R=g&&Ln(g)||v._popupRedirectResolver;Tt(R,v,"argument-error"),v.redirectPersistenceManager=yield di.create(v,[Ln(R._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(g){var v=this;return(0,y.Z)(function*(){var R,ee;return v._isInitialized&&(yield v.queue((0,y.Z)(function*(){}))),(null===(R=v._currentUser)||void 0===R?void 0:R._redirectEventId)===g?v._currentUser:(null===(ee=v.redirectUser)||void 0===ee?void 0:ee._redirectEventId)===g?v.redirectUser:null})()}_persistUserIfCurrent(g){var v=this;return(0,y.Z)(function*(){if(g===v.currentUser)return v.queue((0,y.Z)(function*(){return v.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const R=null!==(v=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==R&&(this.lastNotifiedUid=R,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,v,R,ee){if(this._deleted)return()=>{};const de="function"==typeof v?v:v.next.bind(v),lt=this._isInitialized?Promise.resolve():this._initializationPromise;return Tt(lt,this,"internal-error"),lt.then(()=>de(this.currentUser)),"function"==typeof v?g.addObserver(v,R,ee):g.addObserver(v)}directlySetCurrentUser(g){var v=this;return(0,y.Z)(function*(){v.currentUser&&v.currentUser!==g&&v._currentUser._stopProactiveRefresh(),g&&v.isProactiveRefreshEnabled&&g._startProactiveRefresh(),v.currentUser=g,g?yield v.assertedPersistence.setCurrentUser(g):yield v.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return Tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=rt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,y.Z)(function*(){var v;const R={"X-Client-Version":g.clientVersion};g.app.options.appId&&(R["X-Firebase-gmpid"]=g.app.options.appId);const ee=yield null===(v=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();return ee&&(R["X-Firebase-Client"]=ee),R})()}}function xt(D){return(0,A.m9)(D)}class on{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,A.ne)(v=>this.observer=v)}get next(){return Tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Pn(D,g,v){const R=xt(D);Tt(R._canInitEmulator,R,"emulator-config-failed"),Tt(/^https?:\/\//.test(g),R,"invalid-emulator-scheme");const ee=!!(null==v?void 0:v.disableWarnings),de=$n(g),{host:lt,port:zt}=function(D){const g=$n(D),v=/(\/\/)?([^?#/]+)/.exec(D.substr(g.length));if(!v)return{host:"",port:null};const R=v[2].split("@").pop()||"",ee=/^(\[[^\]]+\])(:|$)/.exec(R);if(ee){const de=ee[1];return{host:de,port:xr(R.substr(de.length+1))}}{const[de,lt]=R.split(":");return{host:de,port:xr(lt)}}}(g);R.config.emulator={url:`${de}//${lt}${null===zt?"":`:${zt}`}/`},R.settings.appVerificationDisabledForTesting=!0,R.emulatorConfig=Object.freeze({host:lt,port:zt,protocol:de.replace(":",""),options:Object.freeze({disableWarnings:ee})}),ee||function(){function D(){const g=document.createElement("p"),v=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",D):D())}()}function $n(D){const g=D.indexOf(":");return g<0?"":D.substr(0,g+1)}function xr(D){if(!D)return null;const g=Number(D);return isNaN(g)?null:g}class hi{constructor(g,v){this.providerId=g,this.signInMethod=v}toJSON(){return un("not implemented")}_getIdTokenResponse(g){return un("not implemented")}_linkToIdToken(g,v){return un("not implemented")}_getReauthenticationResolver(g){return un("not implemented")}}function bi(D,g){return xs.apply(this,arguments)}function xs(){return(xs=(0,y.Z)(function*(D,g){return En(D,"POST","/v1/accounts:resetPassword",rn(D,g))})).apply(this,arguments)}function vs(D,g){return li.apply(this,arguments)}function li(){return(li=(0,y.Z)(function*(D,g){return En(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Hs(D,g){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,y.Z)(function*(D,g){return En(D,"POST","/v1/accounts:update",rn(D,g))})).apply(this,arguments)}function je(){return(je=(0,y.Z)(function*(D,g){return Kn(D,"POST","/v1/accounts:signInWithPassword",rn(D,g))})).apply(this,arguments)}function Rs(D,g){return xo.apply(this,arguments)}function xo(){return(xo=(0,y.Z)(function*(D,g){return En(D,"POST","/v1/accounts:sendOobCode",rn(D,g))})).apply(this,arguments)}function Ro(D,g){return mo.apply(this,arguments)}function mo(){return(mo=(0,y.Z)(function*(D,g){return Rs(D,g)})).apply(this,arguments)}function Oa(D,g){return ps.apply(this,arguments)}function ps(){return(ps=(0,y.Z)(function*(D,g){return Rs(D,g)})).apply(this,arguments)}function Ws(D,g){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,y.Z)(function*(D,g){return Rs(D,g)})).apply(this,arguments)}function os(D,g){return yo.apply(this,arguments)}function yo(){return(yo=(0,y.Z)(function*(D,g){return Rs(D,g)})).apply(this,arguments)}function zs(){return(zs=(0,y.Z)(function*(D,g){return Kn(D,"POST","/v1/accounts:signInWithEmailLink",rn(D,g))})).apply(this,arguments)}function bs(){return(bs=(0,y.Z)(function*(D,g){return Kn(D,"POST","/v1/accounts:signInWithEmailLink",rn(D,g))})).apply(this,arguments)}class es extends hi{constructor(g,v,R,ee=null){super("password",R),this._email=g,this._password=v,this._tenantId=ee}static _fromEmailAndPassword(g,v){return new es(g,v,"password")}static _fromEmailAndCode(g,v,R=null){return new es(g,v,"emailLink",R)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g;if((null==v?void 0:v.email)&&(null==v?void 0:v.password)){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(g){var v=this;return(0,y.Z)(function*(){switch(v.signInMethod){case"password":return function(D,g){return je.apply(this,arguments)}(g,{returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function(D,g){return zs.apply(this,arguments)}(g,{email:v._email,oobCode:v._password});default:wn(g,"internal-error")}})()}_linkToIdToken(g,v){var R=this;return(0,y.Z)(function*(){switch(R.signInMethod){case"password":return vs(g,{idToken:v,returnSecureToken:!0,email:R._email,password:R._password});case"emailLink":return function(D,g){return bs.apply(this,arguments)}(g,{idToken:v,email:R._email,oobCode:R._password});default:wn(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Yi(D,g){return ra.apply(this,arguments)}function ra(){return(ra=(0,y.Z)(function*(D,g){return Kn(D,"POST","/v1/accounts:signInWithIdp",rn(D,g))})).apply(this,arguments)}class ci extends hi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const v=new ci(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(v.idToken=g.idToken),g.accessToken&&(v.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(v.nonce=g.nonce),g.pendingToken&&(v.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(v.accessToken=g.oauthToken,v.secret=g.oauthTokenSecret):wn("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:R,signInMethod:ee}=v,de=L(v,["providerId","signInMethod"]);if(!R||!ee)return null;const lt=new ci(R,ee);return lt.idToken=de.idToken||void 0,lt.accessToken=de.accessToken||void 0,lt.secret=de.secret,lt.nonce=de.nonce,lt.pendingToken=de.pendingToken||null,lt}_getIdTokenResponse(g){return Yi(g,this.buildRequest())}_linkToIdToken(g,v){const R=this.buildRequest();return R.idToken=v,Yi(g,R)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,Yi(g,v)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),g.postBody=(0,A.xO)(v)}return g}}function Mo(D,g){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,y.Z)(function*(D,g){return En(D,"POST","/v1/accounts:sendVerificationCode",rn(D,g))})).apply(this,arguments)}function Yo(){return(Yo=(0,y.Z)(function*(D,g){return Kn(D,"POST","/v1/accounts:signInWithPhoneNumber",rn(D,g))})).apply(this,arguments)}function eo(){return(eo=(0,y.Z)(function*(D,g){const v=yield Kn(D,"POST","/v1/accounts:signInWithPhoneNumber",rn(D,g));if(v.temporaryProof)throw Xe(D,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const qi={USER_NOT_FOUND:"user-not-found"};function Ms(){return(Ms=(0,y.Z)(function*(D,g){return Kn(D,"POST","/v1/accounts:signInWithPhoneNumber",rn(D,Object.assign(Object.assign({},g),{operation:"REAUTH"})),qi)})).apply(this,arguments)}class Ni extends hi{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,v){return new Ni({verificationId:g,verificationCode:v})}static _fromTokenResponse(g,v){return new Ni({phoneNumber:g,temporaryProof:v})}_getIdTokenResponse(g){return function(D,g){return Yo.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,v){return function(D,g){return eo.apply(this,arguments)}(g,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function(D,g){return Ms.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:v,verificationId:R,verificationCode:ee}=this.params;return g&&v?{temporaryProof:g,phoneNumber:v}:{sessionInfo:R,code:ee}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:v,verificationCode:R,phoneNumber:ee,temporaryProof:de}=g;return R||v||ee||de?new Ni({verificationId:v,verificationCode:R,phoneNumber:ee,temporaryProof:de}):null}}class fe{constructor(g){var v,R,ee,de,lt,zt;const Dn=(0,A.zd)((0,A.pd)(g)),bn=null!==(v=Dn.apiKey)&&void 0!==v?v:null,_r=null!==(R=Dn.oobCode)&&void 0!==R?R:null,ai=function(D){switch(D){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(ee=Dn.mode)&&void 0!==ee?ee:null);Tt(bn&&_r&&ai,"argument-error"),this.apiKey=bn,this.operation=ai,this.code=_r,this.continueUrl=null!==(de=Dn.continueUrl)&&void 0!==de?de:null,this.languageCode=null!==(lt=Dn.languageCode)&&void 0!==lt?lt:null,this.tenantId=null!==(zt=Dn.tenantId)&&void 0!==zt?zt:null}static parseLink(g){const v=function(D){const g=(0,A.zd)((0,A.pd)(D)).link,v=g?(0,A.zd)((0,A.pd)(g)).deep_link_id:null,R=(0,A.zd)((0,A.pd)(D)).deep_link_id;return(R?(0,A.zd)((0,A.pd)(R)).link:null)||R||v||g||D}(g);try{return new fe(v)}catch(R){return null}}}let De=(()=>{class D{constructor(){this.providerId=D.PROVIDER_ID}static credential(v,R){return es._fromEmailAndPassword(v,R)}static credentialWithLink(v,R){const ee=fe.parseLink(R);return Tt(ee,"argument-error"),es._fromEmailAndCode(v,ee.code,ee.tenantId)}}return D.PROVIDER_ID="password",D.EMAIL_PASSWORD_SIGN_IN_METHOD="password",D.EMAIL_LINK_SIGN_IN_METHOD="emailLink",D})();class Ke{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Ft extends Ke{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class an extends Ft{static credentialFromJSON(g){const v="string"==typeof g?JSON.parse(g):g;return Tt("providerId"in v&&"signInMethod"in v,"argument-error"),ci._fromParams(v)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Tt(g.idToken||g.accessToken,"argument-error"),ci._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return an.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return an.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:R,oauthTokenSecret:ee,pendingToken:de,nonce:lt,providerId:zt}=g;if(!R&&!ee&&!v&&!de||!zt)return null;try{return new an(zt)._credential({idToken:v,accessToken:R,nonce:lt,pendingToken:de})}catch(Dn){return null}}}let G=(()=>{class D extends Ft{constructor(){super("facebook.com")}static credential(v){return ci._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return D.credential(v.oauthAccessToken)}catch(R){return null}}}return D.FACEBOOK_SIGN_IN_METHOD="facebook.com",D.PROVIDER_ID="facebook.com",D})(),$=(()=>{class D extends Ft{constructor(){super("google.com"),this.addScope("profile")}static credential(v,R){return ci._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:R})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:R,oauthAccessToken:ee}=v;if(!R&&!ee)return null;try{return D.credential(R,ee)}catch(de){return null}}}return D.GOOGLE_SIGN_IN_METHOD="google.com",D.PROVIDER_ID="google.com",D})(),k=(()=>{class D extends Ft{constructor(){super("github.com")}static credential(v){return ci._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return D.credential(v.oauthAccessToken)}catch(R){return null}}}return D.GITHUB_SIGN_IN_METHOD="github.com",D.PROVIDER_ID="github.com",D})();class mt extends hi{constructor(g,v){super(g,g),this.pendingToken=v}_getIdTokenResponse(g){return Yi(g,this.buildRequest())}_linkToIdToken(g,v){const R=this.buildRequest();return R.idToken=v,Yi(g,R)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,Yi(g,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:R,signInMethod:ee,pendingToken:de}=v;return R&&ee&&de&&R===ee?new mt(R,de):null}static _create(g,v){return new mt(g,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class er extends Ke{constructor(g){Tt(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return er.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return er.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const v=mt.fromJSON(g);return Tt(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:v,providerId:R}=g;if(!v||!R)return null;try{return mt._create(R,v)}catch(ee){return null}}}let Kr=(()=>{class D extends Ft{constructor(){super("twitter.com")}static credential(v,R){return ci._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:R})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:R,oauthTokenSecret:ee}=v;if(!R||!ee)return null;try{return D.credential(R,ee)}catch(de){return null}}}return D.TWITTER_SIGN_IN_METHOD="twitter.com",D.PROVIDER_ID="twitter.com",D})();function $i(D,g){return si.apply(this,arguments)}function si(){return(si=(0,y.Z)(function*(D,g){return Kn(D,"POST","/v1/accounts:signUp",rn(D,g))})).apply(this,arguments)}class ni{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,v,R,ee=!1){return(0,y.Z)(function*(){const de=yield Xr._fromIdTokenResponse(g,R,ee),lt=Zr(R);return new ni({user:de,providerId:lt,_tokenResponse:R,operationType:v})})()}static _forOperation(g,v,R){return(0,y.Z)(function*(){yield g._updateTokensIfNecessary(R,!0);const ee=Zr(R);return new ni({user:g,providerId:ee,_tokenResponse:R,operationType:v})})()}}function Zr(D){return D.providerId?D.providerId:"phoneNumber"in D?"phone":null}function ar(D){return ia.apply(this,arguments)}function ia(){return(ia=(0,y.Z)(function*(D){var g;const v=xt(D);if(yield v._initializationPromise,null===(g=v.currentUser)||void 0===g?void 0:g.isAnonymous)return new ni({user:v.currentUser,providerId:null,operationType:"signIn"});const R=yield $i(v,{returnSecureToken:!0}),ee=yield ni._fromIdTokenResponse(v,"signIn",R,!0);return yield v._updateCurrentUser(ee.user),ee})).apply(this,arguments)}class _o extends A.ZR{constructor(g,v,R,ee){var de;super(v.code,v.message),this.operationType=R,this.user=ee,Object.setPrototypeOf(this,_o.prototype),this.customData={appName:g.name,tenantId:null!==(de=g.tenantId)&&void 0!==de?de:void 0,_serverResponse:v.customData._serverResponse,operationType:R}}static _fromErrorAndOperation(g,v,R,ee){return new _o(g,v,R,ee)}}function Na(D,g,v,R){return("reauthenticate"===g?v._getReauthenticationResolver(D):v._getIdTokenResponse(D)).catch(de=>{throw"auth/multi-factor-auth-required"===de.code?_o._fromErrorAndOperation(D,de,g,R):de})}function ka(D){return new Set(D.map(({providerId:g})=>g).filter(g=>!!g))}function sa(D,g){return oa.apply(this,arguments)}function oa(){return(oa=(0,y.Z)(function*(D,g){const v=(0,A.m9)(D);yield Ir(!0,v,g);const{providerUserInfo:R}=yield at(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[g]}),ee=ka(R||[]);return v.providerData=v.providerData.filter(de=>ee.has(de.providerId)),ee.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v})).apply(this,arguments)}function oo(D,g){return ln.apply(this,arguments)}function ln(){return(ln=(0,y.Z)(function*(D,g,v=!1){const R=yield An(D,g._linkToIdToken(D.auth,yield D.getIdToken()),v);return ni._forOperation(D,"link",R)})).apply(this,arguments)}function Ir(D,g,v){return Po.apply(this,arguments)}function Po(){return(Po=(0,y.Z)(function*(D,g,v){yield Zt(g);const ee=!1===D?"provider-already-linked":"no-such-provider";Tt(ka(g.providerData).has(v)===D,g.auth,ee)})).apply(this,arguments)}function ki(D,g){return ao.apply(this,arguments)}function ao(){return(ao=(0,y.Z)(function*(D,g,v=!1){var R;const{auth:ee}=D,de="reauthenticate";try{const lt=yield An(D,Na(ee,de,g,D),v);Tt(lt.idToken,ee,"internal-error");const zt=Qt(lt.idToken);Tt(zt,ee,"internal-error");const{sub:Dn}=zt;return Tt(D.uid===Dn,ee,"user-mismatch"),ni._forOperation(D,de,lt)}catch(lt){throw"auth/user-not-found"===(null===(R=lt)||void 0===R?void 0:R.code)&&wn(ee,"user-mismatch"),lt}})).apply(this,arguments)}function Is(D,g){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,y.Z)(function*(D,g,v=!1){const R="signIn",ee=yield Na(D,R,g),de=yield ni._fromIdTokenResponse(D,R,ee);return v||(yield D._updateCurrentUser(de.user)),de})).apply(this,arguments)}function Os(D,g){return qo.apply(this,arguments)}function qo(){return(qo=(0,y.Z)(function*(D,g){return Is(xt(D),g)})).apply(this,arguments)}function Vl(D,g){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,y.Z)(function*(D,g){const v=(0,A.m9)(D);return yield Ir(!1,v,g.providerId),oo(v,g)})).apply(this,arguments)}function aa(D,g){return lo.apply(this,arguments)}function lo(){return(lo=(0,y.Z)(function*(D,g){return ki((0,A.m9)(D),g)})).apply(this,arguments)}function ts(D,g){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,y.Z)(function*(D,g){return Kn(D,"POST","/v1/accounts:signInWithCustomToken",rn(D,g))})).apply(this,arguments)}function Fa(D,g){return gs.apply(this,arguments)}function gs(){return(gs=(0,y.Z)(function*(D,g){const v=xt(D),R=yield ts(v,{token:g,returnSecureToken:!0}),ee=yield ni._fromIdTokenResponse(v,"signIn",R);return yield v._updateCurrentUser(ee.user),ee})).apply(this,arguments)}class Fi{constructor(g,v){this.factorId=g,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(g,v){return"phoneInfo"in v?to._fromServerResponse(g,v):wn(g,"internal-error")}}class to extends Fi{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,v){return new to(v)}}function ls(D,g,v){var R;Tt((null===(R=v.url)||void 0===R?void 0:R.length)>0,D,"invalid-continue-uri"),Tt(void 0===v.dynamicLinkDomain||v.dynamicLinkDomain.length>0,D,"invalid-dynamic-link-domain"),g.continueUrl=v.url,g.dynamicLinkDomain=v.dynamicLinkDomain,g.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(Tt(v.iOS.bundleId.length>0,D,"missing-ios-bundle-id"),g.iOSBundleId=v.iOS.bundleId),v.android&&(Tt(v.android.packageName.length>0,D,"missing-android-pkg-name"),g.androidInstallApp=v.android.installApp,g.androidMinimumVersionCode=v.android.minimumVersion,g.androidPackageName=v.android.packageName)}function co(D,g,v){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,y.Z)(function*(D,g,v){const R=(0,A.m9)(D),ee={requestType:"PASSWORD_RESET",email:g};v&&ls(R,ee,v),yield Oa(R,ee)})).apply(this,arguments)}function vo(D,g,v){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,y.Z)(function*(D,g,v){yield bi((0,A.m9)(D),{oobCode:g,newPassword:v})})).apply(this,arguments)}function Eo(D,g){return qs.apply(this,arguments)}function qs(){return(qs=(0,y.Z)(function*(D,g){yield Hs((0,A.m9)(D),{oobCode:g})})).apply(this,arguments)}function la(D,g){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,y.Z)(function*(D,g){const v=(0,A.m9)(D),R=yield bi(v,{oobCode:g}),ee=R.requestType;switch(Tt(ee,v,"internal-error"),ee){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Tt(R.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Tt(R.mfaInfo,v,"internal-error");default:Tt(R.email,v,"internal-error")}let de=null;return R.mfaInfo&&(de=Fi._fromServerResponse(xt(v),R.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===R.requestType?R.newEmail:R.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===R.requestType?R.email:R.newEmail)||null,multiFactorInfo:de},operation:ee}})).apply(this,arguments)}function vi(D,g){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,y.Z)(function*(D,g){const{data:v}=yield la((0,A.m9)(D),g);return v.email})).apply(this,arguments)}function qa(D,g,v){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,y.Z)(function*(D,g,v){const R=xt(D),ee=yield $i(R,{returnSecureToken:!0,email:g,password:v}),de=yield ni._fromIdTokenResponse(R,"signIn",ee);return yield R._updateCurrentUser(de.user),de})).apply(this,arguments)}function No(D,g,v){return Os((0,A.m9)(D),De.credential(g,v))}function _a(D,g,v){return bo.apply(this,arguments)}function bo(){return(bo=(0,y.Z)(function*(D,g,v){const R=(0,A.m9)(D),ee={requestType:"EMAIL_SIGNIN",email:g};Tt(v.handleCodeInApp,R,"argument-error"),v&&ls(R,ee,v),yield Ws(R,ee)})).apply(this,arguments)}function w(D,g){const v=fe.parseLink(g);return"EMAIL_SIGNIN"===(null==v?void 0:v.operation)}function N(D,g,v){return T.apply(this,arguments)}function T(){return(T=(0,y.Z)(function*(D,g,v){const R=(0,A.m9)(D),ee=De.credentialWithLink(g,v||or());return Tt(ee._tenantId===(R.tenantId||null),R,"tenant-id-mismatch"),Os(R,ee)})).apply(this,arguments)}function q(D,g){return pe.apply(this,arguments)}function pe(){return(pe=(0,y.Z)(function*(D,g){return En(D,"POST","/v1/accounts:createAuthUri",rn(D,g))})).apply(this,arguments)}function vt(D,g){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,y.Z)(function*(D,g){const R={identifier:g,continueUri:vr()?or():"http://localhost"},{signinMethods:ee}=yield q((0,A.m9)(D),R);return ee||[]})).apply(this,arguments)}function vn(D,g){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,y.Z)(function*(D,g){const v=(0,A.m9)(D),ee={requestType:"VERIFY_EMAIL",idToken:yield D.getIdToken()};g&&ls(v.auth,ee,g);const{email:de}=yield Ro(v.auth,ee);de!==D.email&&(yield D.reload())})).apply(this,arguments)}function On(D,g,v){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,y.Z)(function*(D,g,v){const R=(0,A.m9)(D),de={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield D.getIdToken(),newEmail:g};v&&ls(R.auth,de,v);const{email:lt}=yield os(R.auth,de);lt!==D.email&&(yield D.reload())})).apply(this,arguments)}function Ci(D,g){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,y.Z)(function*(D,g){return En(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function lr(D,g){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,y.Z)(function*(D,{displayName:g,photoURL:v}){if(void 0===g&&void 0===v)return;const R=(0,A.m9)(D),de={idToken:yield R.getIdToken(),displayName:g,photoUrl:v,returnSecureToken:!0},lt=yield An(R,Ci(R.auth,de));R.displayName=lt.displayName||null,R.photoURL=lt.photoUrl||null;const zt=R.providerData.find(({providerId:Dn})=>"password"===Dn);zt&&(zt.displayName=R.displayName,zt.photoURL=R.photoURL),yield R._updateTokensIfNecessary(lt)})).apply(this,arguments)}function uo(D,g){return Hn((0,A.m9)(D),g,null)}function Fn(D,g){return Hn((0,A.m9)(D),null,g)}function Hn(D,g,v){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,y.Z)(function*(D,g,v){const{auth:R}=D,de={idToken:yield D.getIdToken(),returnSecureToken:!0};g&&(de.email=g),v&&(de.password=v);const lt=yield An(D,vs(R,de));yield D._updateTokensIfNecessary(lt,!0)})).apply(this,arguments)}class bt{constructor(g,v,R={}){this.isNewUser=g,this.providerId=v,this.profile=R}}class Lt extends bt{constructor(g,v,R,ee){super(g,v,R),this.username=ee}}class fi extends bt{constructor(g,v){super(g,"facebook.com",v)}}class wi extends Lt{constructor(g,v){super(g,"github.com",v,"string"==typeof(null==v?void 0:v.login)?null==v?void 0:v.login:null)}}class vc extends bt{constructor(g,v){super(g,"google.com",v)}}class ho extends Lt{constructor(g,v,R){super(g,"twitter.com",v,R)}}function va(D){const{user:g,_tokenResponse:v}=D;return g.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function(D){var g,v;if(!D)return null;const{providerId:R}=D,ee=D.rawUserInfo?JSON.parse(D.rawUserInfo):{},de=D.isNewUser||"identitytoolkit#SignupNewUserResponse"===D.kind;if(!R&&(null==D?void 0:D.idToken)){const lt=null===(v=null===(g=Qt(D.idToken))||void 0===g?void 0:g.firebase)||void 0===v?void 0:v.sign_in_provider;if(lt)return new bt(de,"anonymous"!==lt&&"custom"!==lt?lt:null)}if(!R)return null;switch(R){case"facebook.com":return new fi(de,ee);case"github.com":return new wi(de,ee);case"google.com":return new vc(de,ee);case"twitter.com":return new ho(de,ee,D.screenName||null);case"custom":case"anonymous":return new bt(de,null);default:return new bt(de,R,ee)}}(v)}function Ti(D,g,v,R){return(0,A.m9)(D).onIdTokenChanged(g,v,R)}function ms(D){return(0,A.m9)(D).signOut()}class fo{constructor(g,v,R){this.type=g,this.credential=v,this.auth=R}static _fromIdtoken(g,v){return new fo("enroll",g,v)}static _fromMfaPendingCredential(g){return new fo("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var v,R;if(null==g?void 0:g.multiFactorSession){if(null===(v=g.multiFactorSession)||void 0===v?void 0:v.pendingCredential)return fo._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(R=g.multiFactorSession)||void 0===R?void 0:R.idToken)return fo._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Mi{constructor(g,v,R){this.session=g,this.hints=v,this.signInResolver=R}static _fromError(g,v){const R=xt(g),ee=v.customData._serverResponse,de=(ee.mfaInfo||[]).map(zt=>Fi._fromServerResponse(R,zt));Tt(ee.mfaPendingCredential,R,"internal-error");const lt=fo._fromMfaPendingCredential(ee.mfaPendingCredential);return new Mi(lt,de,function(){var zt=(0,y.Z)(function*(Dn){const bn=yield Dn._process(R,lt);delete ee.mfaInfo,delete ee.mfaPendingCredential;const _r=Object.assign(Object.assign({},ee),{idToken:bn.idToken,refreshToken:bn.refreshToken});switch(v.operationType){case"signIn":const ai=yield ni._fromIdTokenResponse(R,v.operationType,_r);return yield R._updateCurrentUser(ai.user),ai;case"reauthenticate":return Tt(v.user,R,"internal-error"),ni._forOperation(v.user,v.operationType,_r);default:wn(R,"internal-error")}});return function(Dn){return zt.apply(this,arguments)}}())}resolveSignIn(g){var v=this;return(0,y.Z)(function*(){return v.signInResolver(g)})()}}function dr(D,g){var v;const R=(0,A.m9)(D),ee=g;return Tt(g.customData.operationType,R,"argument-error"),Tt(null===(v=ee.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,R,"argument-error"),Mi._fromError(R,ee)}function ba(D,g){return En(D,"POST","/v2/accounts/mfaEnrollment:start",rn(D,g))}class ui{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(R=>Fi._fromServerResponse(g.auth,R)))})}static _fromUser(g){return new ui(g)}getSession(){var g=this;return(0,y.Z)(function*(){return fo._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,v){var R=this;return(0,y.Z)(function*(){const ee=g,de=yield R.getSession(),lt=yield An(R.user,ee._process(R.user.auth,de,v));return yield R.user._updateTokensIfNecessary(lt),R.user.reload()})()}unenroll(g){var v=this;return(0,y.Z)(function*(){var R;const ee="string"==typeof g?g:g.uid,de=yield v.user.getIdToken(),lt=yield An(v.user,function(D,g){return En(D,"POST","/v2/accounts/mfaEnrollment:withdraw",rn(D,g))}(v.user.auth,{idToken:de,mfaEnrollmentId:ee}));v.enrolledFactors=v.enrolledFactors.filter(({uid:zt})=>zt!==ee),yield v.user._updateTokensIfNecessary(lt);try{yield v.user.reload()}catch(zt){if("auth/user-token-expired"!==(null===(R=zt)||void 0===R?void 0:R.code))throw zt}})()}}const xn=new WeakMap;function Ia(D){const g=(0,A.m9)(D);return xn.has(g)||xn.set(g,ui._fromUser(g)),xn.get(g)}const ca="__sak";class $s{constructor(g,v){this.storageRetriever=g,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(ca,"1"),this.storage.removeItem(ca),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,v){return this.storage.setItem(g,JSON.stringify(v)),Promise.resolve()}_get(g){const v=this.storage.getItem(g);return Promise.resolve(v?JSON.parse(v):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Qa=(()=>{class D extends $s{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,R)=>this.onStorageEvent(v,R),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const D=(0,A.z$)();return $r(D)||_t(D)}()&&function(){try{return!(!window||window===window.top)}catch(D){return!1}}(),this.fallbackToPolling=Te(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const R of Object.keys(this.listeners)){const ee=this.storage.getItem(R),de=this.localCache[R];ee!==de&&v(R,de,ee)}}onStorageEvent(v,R=!1){if(!v.key)return void this.forAllChangedKeys((zt,Dn,bn)=>{this.notifyListeners(zt,bn)});const ee=v.key;if(R?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const zt=this.storage.getItem(ee);if(v.newValue!==zt)null!==v.newValue?this.storage.setItem(ee,v.newValue):this.storage.removeItem(ee);else if(this.localCache[ee]===v.newValue&&!R)return}const de=()=>{const zt=this.storage.getItem(ee);!R&&this.localCache[ee]===zt||this.notifyListeners(ee,zt)},lt=this.storage.getItem(ee);(0,A.w1)()&&10===document.documentMode&&lt!==v.newValue&&v.newValue!==v.oldValue?setTimeout(de,10):de()}notifyListeners(v,R){this.localCache[v]=R;const ee=this.listeners[v];if(ee)for(const de of Array.from(ee))de(R&&JSON.parse(R))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,R,ee)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:R,newValue:ee}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,R){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(R)}_removeListener(v,R){this.listeners[v]&&(this.listeners[v].delete(R),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,R){var ee=()=>super._set,de=this;return(0,y.Z)(function*(){yield ee().call(de,v,R),de.localCache[v]=JSON.stringify(R)})()}_get(v){var R=()=>super._get,ee=this;return(0,y.Z)(function*(){const de=yield R().call(ee,v);return ee.localCache[v]=JSON.stringify(de),de})()}_remove(v){var R=()=>super._remove,ee=this;return(0,y.Z)(function*(){yield R().call(ee,v),delete ee.localCache[v]})()}}return D.type="LOCAL",D})(),x=(()=>{class D extends $s{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,R){}_removeListener(v,R){}}return D.type="SESSION",D})();let j=(()=>{class D{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const R=this.receivers.find(de=>de.isListeningto(v));if(R)return R;const ee=new D(v);return this.receivers.push(ee),ee}isListeningto(v){return this.eventTarget===v}handleEvent(v){var R=this;return(0,y.Z)(function*(){const ee=v,{eventId:de,eventType:lt,data:zt}=ee.data,Dn=R.handlersMap[lt];if(!(null==Dn?void 0:Dn.size))return;ee.ports[0].postMessage({status:"ack",eventId:de,eventType:lt});const bn=Array.from(Dn).map(function(){var ai=(0,y.Z)(function*(Oi){return Oi(ee.origin,zt)});return function(Oi){return ai.apply(this,arguments)}}()),_r=yield function(D){return Promise.all(D.map(function(){var g=(0,y.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(R){return{fulfilled:!1,reason:R}}});return function(v){return g.apply(this,arguments)}}()))}(bn);ee.ports[0].postMessage({status:"done",eventId:de,eventType:lt,response:_r})})()}_subscribe(v,R){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(R)}_unsubscribe(v,R){this.handlersMap[v]&&R&&this.handlersMap[v].delete(R),(!R||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return D.receivers=[],D})();function J(D="",g=10){let v="";for(let R=0;R<g;R++)v+=Math.floor(10*Math.random());return D+v}class ve{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,v,R=50){var ee=this;return(0,y.Z)(function*(){const de="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!de)throw new Error("connection_unavailable");let lt,zt;return new Promise((Dn,bn)=>{const _r=J("",20);de.port1.start();const ai=setTimeout(()=>{bn(new Error("unsupported_event"))},R);zt={messageChannel:de,onMessage(Oi){const Ts=Oi;if(Ts.data.eventId===_r)switch(Ts.data.status){case"ack":clearTimeout(ai),lt=setTimeout(()=>{bn(new Error("timeout"))},3e3);break;case"done":clearTimeout(lt),Dn(Ts.data.response);break;default:clearTimeout(ai),clearTimeout(lt),bn(new Error("invalid_response"))}}},ee.handlers.add(zt),de.port1.addEventListener("message",zt.onMessage),ee.target.postMessage({eventType:g,eventId:_r,data:v},[de.port2])}).finally(()=>{zt&&ee.removeMessageHandler(zt)})})()}}function qe(){return window}function qt(){return void 0!==qe().WorkerGlobalScope&&"function"==typeof qe().importScripts}function jr(){return(jr=(0,y.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(D){return null}})).apply(this,arguments)}const Dr="firebaseLocalStorageDb",no="firebaseLocalStorage",ys="fbase_key";class Io{constructor(g){this.request=g}toPromise(){return new Promise((g,v)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function oi(D,g){return D.transaction([no],g?"readwrite":"readonly").objectStore(no)}function hl(){const D=indexedDB.open(Dr,1);return new Promise((g,v)=>{D.addEventListener("error",()=>{v(D.error)}),D.addEventListener("upgradeneeded",()=>{const R=D.result;try{R.createObjectStore(no,{keyPath:ys})}catch(ee){v(ee)}}),D.addEventListener("success",(0,y.Z)(function*(){const R=D.result;R.objectStoreNames.contains(no)?g(R):(R.close(),yield function(){const D=indexedDB.deleteDatabase(Dr);return new Io(D).toPromise()}(),g(yield hl()))}))})}function Co(D,g,v){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,y.Z)(function*(D,g,v){const R=oi(D,!0).put({[ys]:g,value:v});return new Io(R).toPromise()})).apply(this,arguments)}function wo(){return(wo=(0,y.Z)(function*(D,g){const v=oi(D,!1).get(g),R=yield new Io(v).toPromise();return void 0===R?null:R.value})).apply(this,arguments)}function cs(D,g){const v=oi(D,!0).delete(g);return new Io(v).toPromise()}const po=(()=>{class D{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,y.Z)(function*(){return v.db||(v.db=yield hl()),v.db})()}_withRetries(v){var R=this;return(0,y.Z)(function*(){let ee=0;for(;;)try{const de=yield R._openDb();return yield v(de)}catch(de){if(ee++>3)throw de;R.db&&(R.db.close(),R.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,y.Z)(function*(){return qt()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,y.Z)(function*(){v.receiver=j._getInstance(qt()?self:null),v.receiver._subscribe("keyChanged",function(){var R=(0,y.Z)(function*(ee,de){return{keyProcessed:(yield v._poll()).includes(de.key)}});return function(ee,de){return R.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var R=(0,y.Z)(function*(ee,de){return["keyChanged"]});return function(ee,de){return R.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,y.Z)(function*(){var R,ee;if(v.activeServiceWorker=yield function(){return jr.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new ve(v.activeServiceWorker);const de=yield v.sender._send("ping",{},800);!de||(null===(R=de[0])||void 0===R?void 0:R.fulfilled)&&(null===(ee=de[0])||void 0===ee?void 0:ee.value.includes("keyChanged"))&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var R=this;return(0,y.Z)(function*(){if(R.sender&&R.activeServiceWorker&&function(){var D;return(null===(D=null==navigator?void 0:navigator.serviceWorker)||void 0===D?void 0:D.controller)||null}()===R.activeServiceWorker)try{yield R.sender._send("keyChanged",{key:v},R.serviceWorkerReceiverAvailable?800:50)}catch(ee){}})()}_isAvailable(){return(0,y.Z)(function*(){try{if(!indexedDB)return!1;const v=yield hl();return yield Co(v,ca,"1"),yield cs(v,ca),!0}catch(v){}return!1})()}_withPendingWrite(v){var R=this;return(0,y.Z)(function*(){R.pendingWrites++;try{yield v()}finally{R.pendingWrites--}})()}_set(v,R){var ee=this;return(0,y.Z)(function*(){return ee._withPendingWrite((0,y.Z)(function*(){return yield ee._withRetries(de=>Co(de,v,R)),ee.localCache[v]=R,ee.notifyServiceWorker(v)}))})()}_get(v){var R=this;return(0,y.Z)(function*(){const ee=yield R._withRetries(de=>function(D,g){return wo.apply(this,arguments)}(de,v));return R.localCache[v]=ee,ee})()}_remove(v){var R=this;return(0,y.Z)(function*(){return R._withPendingWrite((0,y.Z)(function*(){return yield R._withRetries(ee=>cs(ee,v)),delete R.localCache[v],R.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,y.Z)(function*(){const R=yield v._withRetries(lt=>{const zt=oi(lt,!1).getAll();return new Io(zt).toPromise()});if(!R)return[];if(0!==v.pendingWrites)return[];const ee=[],de=new Set;for(const{fbase_key:lt,value:zt}of R)de.add(lt),JSON.stringify(v.localCache[lt])!==JSON.stringify(zt)&&(v.notifyListeners(lt,zt),ee.push(lt));for(const lt of Object.keys(v.localCache))v.localCache[lt]&&!de.has(lt)&&(v.notifyListeners(lt,null),ee.push(lt));return ee})()}notifyListeners(v,R){this.localCache[v]=R;const ee=this.listeners[v];if(ee)for(const de of Array.from(ee))de(R)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,y.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,R){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(R)}_removeListener(v,R){this.listeners[v]&&(this.listeners[v].delete(R),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return D.type="LOCAL",D})();function is(D,g){return En(D,"POST","/v2/accounts/mfaSignIn:start",rn(D,g))}function Zo(){return(Zo=(0,y.Z)(function*(D){return(yield En(D,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Va(D){return new Promise((g,v)=>{const R=document.createElement("script");R.setAttribute("src",D),R.onload=g,R.onerror=ee=>{const de=yn("internal-error");de.customData=ee,v(de)},R.type="text/javascript",R.charset="UTF-8",function(){var D,g;return null!==(g=null===(D=document.getElementsByTagName("head"))||void 0===D?void 0:D[0])&&void 0!==g?g:document}().appendChild(R)})}function Zi(D){return`__${D}${Math.floor(1e6*Math.random())}`}const Bl=1e12;class ua{constructor(g){this.auth=g,this.counter=Bl,this._widgets=new Map}render(g,v){const R=this.counter;return this._widgets.set(R,new ks(g,this.auth.name,v||{})),this.counter++,R}reset(g){var v;const R=g||Bl;null===(v=this._widgets.get(R))||void 0===v||v.delete(),this._widgets.delete(R)}getResponse(g){var v;return(null===(v=this._widgets.get(g||Bl))||void 0===v?void 0:v.getResponse())||""}execute(g){var v=this;return(0,y.Z)(function*(){var R;return null===(R=v._widgets.get(g||Bl))||void 0===R||R.execute(),""})()}}class ks{constructor(g,v,R){this.params=R,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const ee="string"==typeof g?document.getElementById(g):g;Tt(ee,"argument-error",{appName:v}),this.container=ee,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(D){const g=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let R=0;R<50;R++)g.push(v.charAt(Math.floor(Math.random()*v.length)));return g.join("")}();const{callback:g,"expired-callback":v}=this.params;if(g)try{g(this.responseToken)}catch(R){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch(R){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Fo=Zi("rcb"),ws=new nr(3e4,6e4);class Ba{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(g=qe().grecaptcha)||void 0===g?void 0:g.render)}load(g,v=""){return Tt((D=v).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(D),g,"argument-error"),this.shouldResolveImmediately(v)?Promise.resolve(qe().grecaptcha):new Promise((R,ee)=>{const de=qe().setTimeout(()=>{ee(yn(g,"network-request-failed"))},ws.get());qe()[Fo]=()=>{qe().clearTimeout(de),delete qe()[Fo];const zt=qe().grecaptcha;if(!zt)return void ee(yn(g,"internal-error"));const Dn=zt.render;zt.render=(bn,_r)=>{const ai=Dn(bn,_r);return this.counter++,ai},this.hostLanguage=v,R(zt)},Va(`https://www.google.com/recaptcha/api.js??${(0,A.xO)({onload:Fo,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(de),ee(yn(g,"internal-error"))})});var D}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var v;return!!(null===(v=qe().grecaptcha)||void 0===v?void 0:v.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class bc{load(g){return(0,y.Z)(function*(){return new ua(g)})()}clearedOneInstance(){}}const da="recaptcha",pd={theme:"light",type:"image"};class Qo{constructor(g,v=Object.assign({},pd),R){this.parameters=v,this.type=da,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=xt(R),this.isInvisible="invisible"===this.parameters.size,Tt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const ee="string"==typeof g?document.getElementById(g):g;Tt(ee,this.auth,"argument-error"),this.container=ee,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new bc:new Ba,this.validateStartingState()}verify(){var g=this;return(0,y.Z)(function*(){g.assertNotDestroyed();const v=yield g.render(),R=g.getAssertedRecaptcha();return R.getResponse(v)||new Promise(de=>{const lt=zt=>{!zt||(g.tokenChangeListeners.delete(lt),de(zt))};g.tokenChangeListeners.add(lt),g.isInvisible&&R.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){Tt(!this.parameters.sitekey,this.auth,"argument-error"),Tt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Tt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return v=>{if(this.tokenChangeListeners.forEach(R=>R(v)),"function"==typeof g)g(v);else if("string"==typeof g){const R=qe()[g];"function"==typeof R&&R(v)}}}assertNotDestroyed(){Tt(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,y.Z)(function*(){if(yield g.init(),!g.widgetId){let v=g.container;if(!g.isInvisible){const R=document.createElement("div");v.appendChild(R),v=R}g.widgetId=g.getAssertedRecaptcha().render(v,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,y.Z)(function*(){Tt(vr()&&!qt(),g.auth,"internal-error"),yield function(){let D=null;return new Promise(g=>{"complete"!==document.readyState?(D=()=>g(),window.addEventListener("load",D)):g()}).catch(g=>{throw D&&window.removeEventListener("load",D),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const v=yield function(D){return Zo.apply(this,arguments)}(g.auth);Tt(v,g.auth,"internal-error"),g.parameters.sitekey=v})()}getAssertedRecaptcha(){return Tt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Bo{constructor(g,v){this.verificationId=g,this.onConfirmation=v}confirm(g){const v=Ni._fromVerification(this.verificationId,g);return this.onConfirmation(v)}}function Ja(D,g,v){return To.apply(this,arguments)}function To(){return(To=(0,y.Z)(function*(D,g,v){const R=xt(D),ee=yield $a(R,g,(0,A.m9)(v));return new Bo(ee,de=>Os(R,de))})).apply(this,arguments)}function Qc(D,g,v){return $o.apply(this,arguments)}function $o(){return($o=(0,y.Z)(function*(D,g,v){const R=(0,A.m9)(D);yield Ir(!1,R,"phone");const ee=yield $a(R.auth,g,(0,A.m9)(v));return new Bo(ee,de=>Vl(R,de))})).apply(this,arguments)}function Ic(D,g,v){return gl.apply(this,arguments)}function gl(){return(gl=(0,y.Z)(function*(D,g,v){const R=(0,A.m9)(D),ee=yield $a(R.auth,g,(0,A.m9)(v));return new Bo(ee,de=>aa(R,de))})).apply(this,arguments)}function $a(D,g,v){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,y.Z)(function*(D,g,v){var R;const ee=yield v.verify();try{let de;if(Tt("string"==typeof ee,D,"argument-error"),Tt(v.type===da,D,"argument-error"),de="string"==typeof g?{phoneNumber:g}:g,"session"in de){const lt=de.session;if("phoneNumber"in de)return Tt("enroll"===lt.type,D,"internal-error"),(yield ba(D,{idToken:lt.credential,phoneEnrollmentInfo:{phoneNumber:de.phoneNumber,recaptchaToken:ee}})).phoneSessionInfo.sessionInfo;{Tt("signin"===lt.type,D,"internal-error");const zt=(null===(R=de.multiFactorHint)||void 0===R?void 0:R.uid)||de.multiFactorUid;return Tt(zt,D,"missing-multi-factor-info"),(yield is(D,{mfaPendingCredential:lt.credential,mfaEnrollmentId:zt,phoneSignInInfo:{recaptchaToken:ee}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:lt}=yield Mo(D,{phoneNumber:de.phoneNumber,recaptchaToken:ee});return lt}}finally{v._reset()}})).apply(this,arguments)}function el(D,g){return ha.apply(this,arguments)}function ha(){return(ha=(0,y.Z)(function*(D,g){yield oo((0,A.m9)(D),g)})).apply(this,arguments)}let B=(()=>{class D{constructor(v){this.providerId=D.PROVIDER_ID,this.auth=xt(v)}verifyPhoneNumber(v,R){return $a(this.auth,v,(0,A.m9)(R))}static credential(v,R){return Ni._fromVerification(v,R)}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:R,temporaryProof:ee}=v;return R&&ee?Ni._fromTokenResponse(R,ee):null}}return D.PROVIDER_ID="phone",D.PHONE_SIGN_IN_METHOD="phone",D})();function Z(D,g){return g?Ln(g):(Tt(D._popupRedirectResolver,D,"argument-error"),D._popupRedirectResolver)}class me extends hi{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Yi(g,this._buildIdpRequest())}_linkToIdToken(g,v){return Yi(g,this._buildIdpRequest(v))}_getReauthenticationResolver(g){return Yi(g,this._buildIdpRequest())}_buildIdpRequest(g){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(v.idToken=g),v}}function ze(D){return Is(D.auth,new me(D),D.bypassAuthState)}function Et(D){const{auth:g,user:v}=D;return Tt(v,g,"internal-error"),ki(v,new me(D),D.bypassAuthState)}function Vt(D){return cn.apply(this,arguments)}function cn(){return(cn=(0,y.Z)(function*(D){const{auth:g,user:v}=D;return Tt(v,g,"internal-error"),oo(v,new me(D),D.bypassAuthState)})).apply(this,arguments)}class Bn{constructor(g,v,R,ee,de=!1){this.auth=g,this.resolver=R,this.user=ee,this.bypassAuthState=de,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var g=this;return new Promise(function(){var v=(0,y.Z)(function*(R,ee){g.pendingPromise={resolve:R,reject:ee};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(de){g.reject(de)}});return function(R,ee){return v.apply(this,arguments)}}())}onAuthEvent(g){var v=this;return(0,y.Z)(function*(){const{urlResponse:R,sessionId:ee,postBody:de,tenantId:lt,error:zt,type:Dn}=g;if(zt)return void v.reject(zt);const bn={auth:v.auth,requestUri:R,sessionId:ee,tenantId:lt||void 0,postBody:de||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(Dn)(bn))}catch(_r){v.reject(_r)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return ze;case"linkViaPopup":case"linkViaRedirect":return Vt;case"reauthViaPopup":case"reauthViaRedirect":return Et;default:wn(this.auth,"internal-error")}}resolve(g){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Yn=new nr(2e3,1e4);function kr(D,g,v){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,y.Z)(function*(D,g,v){const R=xt(D);mr(D,g,Ke);const ee=Z(R,v);return new Uo(R,"signInViaPopup",g,ee).executeNotNull()})).apply(this,arguments)}function fr(D,g,v){return Li.apply(this,arguments)}function Li(){return(Li=(0,y.Z)(function*(D,g,v){const R=(0,A.m9)(D);mr(R.auth,g,Ke);const ee=Z(R.auth,v);return new Uo(R.auth,"reauthViaPopup",g,ee,R).executeNotNull()})).apply(this,arguments)}function pi(D,g,v){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,y.Z)(function*(D,g,v){const R=(0,A.m9)(D);mr(R.auth,g,Ke);const ee=Z(R.auth,v);return new Uo(R.auth,"linkViaPopup",g,ee,R).executeNotNull()})).apply(this,arguments)}let Uo=(()=>{class D extends Bn{constructor(v,R,ee,de,lt){super(v,R,de,lt),this.provider=ee,this.authWindow=null,this.pollId=null,D.currentPopupAction&&D.currentPopupAction.cancel(),D.currentPopupAction=this}executeNotNull(){var v=this;return(0,y.Z)(function*(){const R=yield v.execute();return Tt(R,v.auth,"internal-error"),R})()}onExecution(){var v=this;return(0,y.Z)(function*(){Un(1===v.filter.length,"Popup operations only handle one event");const R=J();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],R),v.authWindow.associatedEvent=R,v.resolver._originValidation(v.auth).catch(ee=>{v.reject(ee)}),v.resolver._isIframeWebStorageSupported(v.auth,ee=>{ee||v.reject(yn(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,D.currentPopupAction=null}pollUserCancellation(){const v=()=>{var R,ee;this.pollId=(null===(ee=null===(R=this.authWindow)||void 0===R?void 0:R.window)||void 0===ee?void 0:ee.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(yn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(v,Yn.get())};v()}}return D.currentPopupAction=null,D})();const Jo=new Map;class ml extends Bn{constructor(g,v,R=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,R),this.eventId=null}execute(){var g=()=>super.execute,v=this;return(0,y.Z)(function*(){let R=Jo.get(v.auth._key());if(!R){try{const de=(yield function(D,g){return Ca.apply(this,arguments)}(v.resolver,v.auth))?yield g().call(v):null;R=()=>Promise.resolve(de)}catch(ee){R=()=>Promise.reject(ee)}Jo.set(v.auth._key(),R)}return v.bypassAuthState||Jo.set(v.auth._key(),()=>Promise.resolve(null)),R()})()}onAuthEvent(g){var v=()=>super.onAuthEvent,R=this;return(0,y.Z)(function*(){if("signInViaRedirect"===g.type)return v().call(R,g);if("unknown"!==g.type){if(g.eventId){const ee=yield R.auth._redirectUserForId(g.eventId);if(ee)return R.user=ee,v().call(R,g);R.resolve(null)}}else R.resolve(null)})()}onExecution(){return(0,y.Z)(function*(){})()}cleanUp(){}}function Ca(){return(Ca=(0,y.Z)(function*(D,g){const v=Do(g),R=yl(D);if(!(yield R._isAvailable()))return!1;const ee="true"===(yield R._get(v));return yield R._remove(v),ee})).apply(this,arguments)}function ja(D,g){return jo.apply(this,arguments)}function jo(){return(jo=(0,y.Z)(function*(D,g){return yl(D)._set(Do(g),"true")})).apply(this,arguments)}function Ho(){Jo.clear()}function Ha(D,g){Jo.set(D._key(),g)}function yl(D){return Ln(D._redirectPersistence)}function Do(D){return Wr("pendingRedirect",D.config.apiKey,D.name)}function Wa(D,g,v){return function(D,g,v){return gi.apply(this,arguments)}(D,g,v)}function gi(){return(gi=(0,y.Z)(function*(D,g,v){const R=xt(D);mr(D,g,Ke);const ee=Z(R,v);return yield ja(ee,R),ee._openRedirect(R,g,"signInViaRedirect")})).apply(this,arguments)}function Wo(D,g,v){return function(D,g,v){return ic.apply(this,arguments)}(D,g,v)}function ic(){return(ic=(0,y.Z)(function*(D,g,v){const R=(0,A.m9)(D);mr(R.auth,g,Ke);const ee=Z(R.auth,v);yield ja(ee,R.auth);const de=yield Ru(R);return ee._openRedirect(R.auth,g,"reauthViaRedirect",de)})).apply(this,arguments)}function xu(D,g,v){return function(D,g,v){return Wi.apply(this,arguments)}(D,g,v)}function Wi(){return(Wi=(0,y.Z)(function*(D,g,v){const R=(0,A.m9)(D);mr(R.auth,g,Ke);const ee=Z(R.auth,v);yield Ir(!1,R,g.providerId),yield ja(ee,R.auth);const de=yield Ru(R);return ee._openRedirect(R.auth,g,"linkViaRedirect",de)})).apply(this,arguments)}function Jc(D,g){return pa.apply(this,arguments)}function pa(){return(pa=(0,y.Z)(function*(D,g){return yield xt(D)._initializationPromise,sc(D,g,!1)})).apply(this,arguments)}function sc(D,g){return tl.apply(this,arguments)}function tl(){return(tl=(0,y.Z)(function*(D,g,v=!1){const R=xt(D),ee=Z(R,g),lt=yield new ml(R,ee,v).execute();return lt&&!v&&(delete lt.user._redirectEventId,yield R._persistUserIfCurrent(lt.user),yield R._setRedirectUser(null,g)),lt})).apply(this,arguments)}function Ru(D){return oc.apply(this,arguments)}function oc(){return(oc=(0,y.Z)(function*(D){const g=J(`${D.uid}:::`);return D._redirectEventId=g,yield D.auth._setRedirectUser(D),yield D.auth._persistUserIfCurrent(D),g})).apply(this,arguments)}class ph{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let v=!1;return this.consumers.forEach(R=>{this.isEventForConsumer(g,R)&&(v=!0,this.sendToConsumer(g,R),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function(D){switch(D.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eu(D);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=g,v=!0)),v}sendToConsumer(g,v){var R;if(g.error&&!eu(g)){const ee=(null===(R=g.error.code)||void 0===R?void 0:R.split("auth/")[1])||"internal-error";v.onError(yn(this.auth,ee))}else v.onAuthEvent(g)}isEventForConsumer(g,v){const R=null===v.eventId||!!g.eventId&&g.eventId===v.eventId;return v.filter.includes(g.type)&&R}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cc(g))}saveEventToCache(g){this.cachedEventUids.add(Cc(g)),this.lastProcessedEventTime=Date.now()}}function Cc(D){return[D.type,D.eventId,D.sessionId,D.tenantId].filter(g=>g).join("-")}function eu({type:D,error:g}){return"unknown"===D&&"auth/no-auth-event"===(null==g?void 0:g.code)}function tu(D){return md.apply(this,arguments)}function md(){return(md=(0,y.Z)(function*(D,g={}){return En(D,"GET","/v1/projects",g)})).apply(this,arguments)}const Mf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wc=/^https?/;function nl(){return(nl=(0,y.Z)(function*(D){if(D.config.emulator)return;const{authorizedDomains:g}=yield tu(D);for(const v of g)try{if(yd(v))return}catch(R){}wn(D,"unauthorized-domain")})).apply(this,arguments)}function yd(D){const g=or(),{protocol:v,hostname:R}=new URL(g);if(D.startsWith("chrome-extension://")){const lt=new URL(D);return""===lt.hostname&&""===R?"chrome-extension:"===v&&D.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===v&&lt.hostname===R}if(!wc.test(v))return!1;if(Mf.test(D))return R===D;const ee=D.replace(/\./g,"\\.");return new RegExp("^(.+\\."+ee+"|"+ee+")$","i").test(R)}const jl=new nr(3e4,6e4);function _l(){const D=qe().___jsl;if(null==D?void 0:D.H)for(const g of Object.keys(D.H))if(D.H[g].r=D.H[g].r||[],D.H[g].L=D.H[g].L||[],D.H[g].r=[...D.H[g].L],D.CP)for(let v=0;v<D.CP.length;v++)D.CP[v]=null}let Hl=null;function Mu(D){return Hl=Hl||function(D){return new Promise((g,v)=>{var R,ee,de;function lt(){_l(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{_l(),v(yn(D,"network-request-failed"))},timeout:jl.get()})}if(null===(ee=null===(R=qe().gapi)||void 0===R?void 0:R.iframes)||void 0===ee?void 0:ee.Iframe)g(gapi.iframes.getContext());else{if(!(null===(de=qe().gapi)||void 0===de?void 0:de.load)){const zt=Zi("iframefcb");return qe()[zt]=()=>{gapi.load?lt():v(yn(D,"network-request-failed"))},Va(`https://apis.google.com/js/api.js?onload=${zt}`).catch(Dn=>v(Dn))}lt()}}).catch(g=>{throw Hl=null,g})}(D),Hl}const Dc=new nr(5e3,15e3),Si={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Sc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nu(D){const g=D.config;Tt(g.authDomain,D,"auth-domain-config-required");const v=g.emulator?Ht(g,"emulator/auth/iframe"):`https://${D.config.authDomain}/__/auth/iframe`,R={apiKey:g.apiKey,appName:D.name,v:te.SDK_VERSION},ee=Sc.get(D.config.apiHost);ee&&(R.eid=ee);const de=D._getFrameworks();return de.length&&(R.fw=de.join(",")),`${v}?${(0,A.xO)(R).slice(1)}`}function _d(){return _d=(0,y.Z)(function*(D){const g=yield Mu(D),v=qe().gapi;return Tt(v,D,"internal-error"),g.open({where:document.body,url:nu(D),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Si,dontclear:!0},R=>new Promise(function(){var ee=(0,y.Z)(function*(de,lt){yield R.restyle({setHideOnLeave:!1});const zt=yn(D,"network-request-failed"),Dn=qe().setTimeout(()=>{lt(zt)},Dc.get());function bn(){qe().clearTimeout(Dn),de(R)}R.ping(bn).then(bn,()=>{lt(zt)})});return function(de,lt){return ee.apply(this,arguments)}}()))}),_d.apply(this,arguments)}const Ac={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class bd{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function Nu(D,g,v,R,ee,de){Tt(D.config.authDomain,D,"auth-domain-config-required"),Tt(D.config.apiKey,D,"invalid-api-key");const lt={apiKey:D.config.apiKey,appName:D.name,authType:v,redirectUrl:R,v:te.SDK_VERSION,eventId:ee};if(g instanceof Ke){g.setDefaultLanguage(D.languageCode),lt.providerId=g.providerId||"",(0,A.xb)(g.getCustomParameters())||(lt.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Dn,bn]of Object.entries(de||{}))lt[Dn]=bn}if(g instanceof Ft){const Dn=g.getScopes().filter(bn=>""!==bn);Dn.length>0&&(lt.scopes=Dn.join(","))}D.tenantId&&(lt.tid=D.tenantId);const zt=lt;for(const Dn of Object.keys(zt))void 0===zt[Dn]&&delete zt[Dn];return`${function({config:D}){return D.emulator?Ht(D,"emulator/auth/handler"):`https://${D.authDomain}/__/auth/handler`}(D)}?${(0,A.xO)(zt).slice(1)}`}const Jr="webStorageSupport",ku=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=x,this._completeRedirectFn=sc,this._overrideRedirectResult=Ha}_openPopup(g,v,R,ee){var de=this;return(0,y.Z)(function*(){var lt;Un(null===(lt=de.eventManagers[g._key()])||void 0===lt?void 0:lt.manager,"_initialize() not called before _openPopup()");const zt=Nu(g,v,R,or(),ee);return function(D,g,v,R=500,ee=600){const de=Math.max((window.screen.availHeight-ee)/2,0).toString(),lt=Math.max((window.screen.availWidth-R)/2,0).toString();let zt="";const Dn=Object.assign(Object.assign({},Ac),{width:R.toString(),height:ee.toString(),top:de,left:lt}),bn=(0,A.z$)().toLowerCase();v&&(zt=zi(bn)?"_blank":v),fs(bn)&&(g=g||"http://localhost",Dn.scrollbars="yes");const _r=Object.entries(Dn).reduce((Oi,[Ts,Il])=>`${Oi}${Ts}=${Il},`,"");if(function(D=(0,A.z$)()){var g;return _t(D)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(bn)&&"_self"!==zt)return function(D,g){const v=document.createElement("a");v.href=D,v.target=g;const R=document.createEvent("MouseEvent");R.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(R)}(g||"",zt),new bd(null);const ai=window.open(g||"",zt,_r);Tt(ai,D,"popup-blocked");try{ai.focus()}catch(Oi){}return new bd(ai)}(g,zt,J())})()}_openRedirect(g,v,R,ee){var de=this;return(0,y.Z)(function*(){return yield de._originValidation(g),D=Nu(g,v,R,or(),ee),qe().location.href=D,new Promise(()=>{});var D})()}_initialize(g){const v=g._key();if(this.eventManagers[v]){const{manager:ee,promise:de}=this.eventManagers[v];return ee?Promise.resolve(ee):(Un(de,"If manager is not set, promise should be"),de)}const R=this.initAndGetManager(g);return this.eventManagers[v]={promise:R},R.catch(()=>{delete this.eventManagers[v]}),R}initAndGetManager(g){var v=this;return(0,y.Z)(function*(){const R=yield function(D){return _d.apply(this,arguments)}(g),ee=new ph(g);return R.register("authEvent",de=>(Tt(null==de?void 0:de.authEvent,g,"invalid-auth-event"),{status:ee.onEvent(de.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[g._key()]={manager:ee},v.iframes[g._key()]=R,ee})()}_isIframeWebStorageSupported(g,v){this.iframes[g._key()].send(Jr,{type:Jr},ee=>{var de;const lt=null===(de=null==ee?void 0:ee[0])||void 0===de?void 0:de[Jr];void 0!==lt&&v(!!lt),wn(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const v=g._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function(D){return nl.apply(this,arguments)}(g)),this.originValidationPromises[v]}get _shouldInitProactively(){return Te()||$r()||_t()}};class mh extends class{constructor(g){this.factorId=g}_process(g,v,R){switch(v.type){case"enroll":return this._finalizeEnroll(g,v.credential,R);case"signin":return this._finalizeSignIn(g,v.credential);default:return un("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new mh(g)}_finalizeEnroll(g,v,R){return function(D,g){return En(D,"POST","/v2/accounts/mfaEnrollment:finalize",rn(D,g))}(g,{idToken:v,displayName:R,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,v){return function(D,g){return En(D,"POST","/v2/accounts/mfaSignIn:finalize",rn(D,g))}(g,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ga=(()=>{class D{constructor(){}static assertion(v){return mh._fromCredential(v)}}return D.FACTOR_ID="phone",D})();var yh="@firebase/auth",zl="0.20.10";class ru{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var v=this;return(0,y.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const v=this.auth.onIdTokenChanged(R=>{var ee;g((null===(ee=R)||void 0===ee?void 0:ee.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,v),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const v=this.internalListeners.get(g);!v||(this.internalListeners.delete(g),v(),this.updateProactiveRefresh())}assertAuthConfigured(){Tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const vh=(0,A.Pz)("authIdTokenMaxAge")||300;let wd=null;const Hr=D=>function(){var g=(0,y.Z)(function*(v){const R=v&&(yield v.getIdTokenResult()),ee=R&&((new Date).getTime()-Date.parse(R.issuedAtTime))/1e3;if(ee&&ee>vh)return;const de=null==R?void 0:R.token;wd!==de&&(wd=de,yield fetch(D,{method:de?"POST":"DELETE",headers:de?{Authorization:`Bearer ${de}`}:{}}))});return function(v){return g.apply(this,arguments)}}();function Eh(D=(0,te.getApp)()){const g=(0,te._getProvider)(D,"auth");if(g.isInitialized())return g.getImmediate();const v=function(D,g){const v=(0,te._getProvider)(D,"auth");if(v.isInitialized()){const ee=v.getImmediate(),de=v.getOptions();if((0,A.vZ)(de,null!=g?g:{}))return ee;wn(ee,"already-initialized")}return v.initialize({options:g})}(D,{popupRedirectResolver:ku,persistence:[po,Qa,x]}),R=(0,A.Pz)("authTokenSyncURL");if(R){const de=Hr(R);(function(D,g,v){(0,A.m9)(D).beforeAuthStateChanged(g,v)})(v,de,()=>de(v.currentUser)),Ti(v,lt=>de(lt))}const ee=(0,A.q4)("auth");return ee&&Pn(v,`http://${ee}`),v}var D;D="Browser",(0,te._registerComponent)(new dt.wA("auth",(g,{options:v})=>{const R=g.getProvider("app").getImmediate(),ee=g.getProvider("heartbeat"),{apiKey:de,authDomain:lt}=R.options;return((zt,Dn)=>{Tt(de&&!de.includes(":"),"invalid-api-key",{appName:zt.name}),Tt(!(null==lt?void 0:lt.includes(":")),"argument-error",{appName:zt.name});const bn={apiKey:de,authDomain:lt,clientPlatform:D,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rt(D)},_r=new Pt(zt,Dn,bn);return function(D,g){const v=(null==g?void 0:g.persistence)||[],R=(Array.isArray(v)?v:[v]).map(Ln);(null==g?void 0:g.errorMap)&&D._updateErrorMap(g.errorMap),D._initializeWithPersistence(R,null==g?void 0:g.popupRedirectResolver)}(_r,v),_r})(R,ee)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,v,R)=>{g.getProvider("auth-internal").initialize()})),(0,te._registerComponent)(new dt.wA("auth-internal",g=>{const v=xt(g.getProvider("auth").getImmediate());return new ru(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,te.registerVersion)(yh,zl,void 0),(0,te.registerVersion)(yh,zl,"esm2017")},1304:(en,it,F)=>{"use strict";F.d(it,{u7:()=>Tp,Jj:()=>oh,IX:()=>z_,my:()=>ae,xU:()=>cd,Lz:()=>ah,WA:()=>Lt,F8:()=>Pg,$q:()=>Df,W:()=>Iu,EK:()=>Mi,PU:()=>Zm,l7:()=>ua,Ky:()=>xn,Xb:()=>ui,Cf:()=>c,K9:()=>Ka,Me:()=>is,yq:()=>Ki,Wi:()=>gf,ET:()=>o_,Ab:()=>Af,vr:()=>u_,Fc:()=>K_,hJ:()=>jt,B$:()=>Wt,at:()=>z,oe:()=>s_,AK:()=>uv,TF:()=>Q_,JU:()=>tn,ST:()=>S0,fH:()=>q_,Ix:()=>Z_,Wu:()=>Ky,Lx:()=>qy,qY:()=>so,GL:()=>Sf,QT:()=>Jy,kl:()=>Ym,Xk:()=>qm,PL:()=>e_,UQ:()=>t_,zN:()=>n_,ad:()=>Y_,nP:()=>dv,b9:()=>ov,vh:()=>Wm,Pb:()=>X_,L$:()=>By,cf:()=>a_,sc:()=>P0,Xo:()=>Hm,IO:()=>sv,iE:()=>gr,Eo:()=>Wn,i3:()=>l_,Bt:()=>c_,pl:()=>r_,Ub:()=>Ci,qK:()=>av,TQ:()=>M0,e0:()=>zy,r7:()=>i_,Mx:()=>Vy,ar:()=>wp});var L,y=F(8239),A=F(8026),te=F(3910),ke=F(5422),oe=F(3854),Q="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ye={},Ce=Ce||{},re=Q||self;function he(){}function _e(s){var e=typeof s;return"array"==(e="object"!=e?e:s?Array.isArray(s)?"array":e:"null")||"object"==e&&"number"==typeof s.length}function le(s){var e=typeof s;return"object"==e&&null!=s||"function"==e}var ht="closure_uid_"+(1e9*Math.random()>>>0),Ae=0;function Ze(s,e,r){return s.call.apply(s.bind,arguments)}function Ge(s,e,r){if(!s)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var h=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(h,a),s.apply(e,h)}}return function(){return s.apply(e,arguments)}}function ft(s,e,r){return(ft=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ze:Ge).apply(null,arguments)}function Se(s,e){var r=Array.prototype.slice.call(arguments,1);return function(){var a=r.slice();return a.push.apply(a,arguments),s.apply(this,a)}}function Ue(s,e){function r(){}r.prototype=e.prototype,s.X=e.prototype,s.prototype=new r,s.prototype.constructor=s,s.Wb=function(a,h,m){for(var I=Array(arguments.length-2),O=2;O<arguments.length;O++)I[O-2]=arguments[O];return e.prototype[h].apply(a,I)}}function gt(){this.s=this.s,this.o=this.o}var $t={};gt.prototype.s=!1,gt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var s=function(s){return Object.prototype.hasOwnProperty.call(s,ht)&&s[ht]||(s[ht]=++Ae)}(this);delete $t[s]}},gt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const E=Array.prototype.indexOf?function(s,e){return Array.prototype.indexOf.call(s,e,void 0)}:function(s,e){if("string"==typeof s)return"string"!=typeof e||1!=e.length?-1:s.indexOf(e,0);for(let r=0;r<s.length;r++)if(r in s&&s[r]===e)return r;return-1};function pt(s){const e=s.length;if(0<e){const r=Array(e);for(let a=0;a<e;a++)r[a]=s[a];return r}return[]}function Dt(s,e){for(let r=1;r<arguments.length;r++){const a=arguments[r];if(_e(a)){const h=s.length||0,m=a.length||0;s.length=h+m;for(let I=0;I<m;I++)s[h+I]=a[I]}else s.push(a)}}function Pe(s,e){this.type=s,this.g=this.target=e,this.defaultPrevented=!1}Pe.prototype.h=function(){this.defaultPrevented=!0};var be=function(){if(!re.addEventListener||!Object.defineProperty)return!1;var s=!1,e=Object.defineProperty({},"passive",{get:function(){s=!0}});try{re.addEventListener("test",he,e),re.removeEventListener("test",he,e)}catch(r){}return s}();function Me(s){return/^[\s\xa0]*$/.test(s)}var et=String.prototype.trim?function(s){return s.trim()}:function(s){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(s)[1]};function dt(s,e){return s<e?-1:s>e?1:0}function nt(){var s=re.navigator;return s&&(s=s.userAgent)?s:""}function At(s){return-1!=nt().indexOf(s)}function Ie(s){return Ie[" "](s),s}Ie[" "]=he;var gn,s,Ve=At("Opera"),Fe=At("Trident")||At("MSIE"),tt=At("Edge"),St=tt||Fe,Bt=At("Gecko")&&!(-1!=nt().toLowerCase().indexOf("webkit")&&!At("Edge"))&&!(At("Trident")||At("MSIE"))&&!At("Edge"),Mt=-1!=nt().toLowerCase().indexOf("webkit")&&!At("Edge");function Nt(){var s=re.document;return s?s.documentMode:void 0}e:{var Nn="",wn=(s=nt(),Bt?/rv:([^\);]+)(\)|;)/.exec(s):tt?/Edge\/([\d\.]+)/.exec(s):Fe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(s):Mt?/WebKit\/(\S+)/.exec(s):Ve?/(?:Version)[ \/]?(\S+)/.exec(s):void 0);if(wn&&(Nn=wn?wn[1]:""),Fe){var yn=Nt();if(null!=yn&&yn>parseFloat(Nn)){gn=String(yn);break e}}gn=Nn}var Sn={};function mr(){return e=Sn,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let s=0;const e=et(String(gn)).split("."),r=et("9").split("."),a=Math.max(e.length,r.length);for(let I=0;0==s&&I<a;I++){var h=e[I]||"",m=r[I]||"";do{if(h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],m=/(\d*)(\D*)(.*)/.exec(m)||["","","",""],0==h[0].length&&0==m[0].length)break;s=dt(0==h[1].length?0:parseInt(h[1],10),0==m[1].length?0:parseInt(m[1],10))||dt(0==h[2].length,0==m[2].length)||dt(h[2],m[2]),h=h[3],m=m[3]}while(0==s)}return 0<=s}();var e}var un=re.document&&Fe&&(Nt()||parseInt(gn,10))||void 0;function Un(s,e){if(Pe.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var r=this.type=s.type,a=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=e,e=s.relatedTarget){if(Bt){e:{try{Ie(e.nodeName);var h=!0;break e}catch(m){}h=!1}h||(e=null)}}else"mouseover"==r?e=s.fromElement:"mouseout"==r&&(e=s.toElement);this.relatedTarget=e,a?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType="string"==typeof s.pointerType?s.pointerType:Xt[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&Un.X.h.call(this)}}Ue(Un,Pe);var Xt={2:"touch",3:"pen",4:"mouse"};Un.prototype.h=function(){Un.X.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var Ln="closure_listenable_"+(1e6*Math.random()|0),kn=0;function Xn(s,e,r,a,h){this.listener=s,this.proxy=null,this.src=e,this.type=r,this.capture=!!a,this.ha=h,this.key=++kn,this.ba=this.ea=!1}function or(s){s.ba=!0,s.listener=null,s.proxy=null,s.src=null,s.ha=null}function vr(s,e,r){for(const a in s)e.call(r,s[a],a,s)}function Er(s){const e={};for(const r in s)e[r]=s[r];return e}const hr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ei(s,e){let r,a;for(let h=1;h<arguments.length;h++){for(r in a=arguments[h],a)s[r]=a[r];for(let m=0;m<hr.length;m++)r=hr[m],Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}}function nr(s){this.src=s,this.g={},this.h=0}function Ht(s,e){var r=e.type;if(r in s.g){var m,a=s.g[r],h=E(a,e);(m=0<=h)&&Array.prototype.splice.call(a,h,1),m&&(or(e),0==s.g[r].length&&(delete s.g[r],s.h--))}}function It(s,e,r,a){for(var h=0;h<s.length;++h){var m=s[h];if(!m.ba&&m.listener==e&&m.capture==!!r&&m.ha==a)return h}return-1}nr.prototype.add=function(s,e,r,a,h){var m=s.toString();(s=this.g[m])||(s=this.g[m]=[],this.h++);var I=It(s,e,a,h);return-1<I?(e=s[I],r||(e.ea=!1)):((e=new Xn(e,this.src,m,!!a,h)).ea=r,s.push(e)),e};var ur="closure_lm_"+(1e6*Math.random()|0),pr={};function rn(s,e,r,a,h){if(a&&a.once)return rr(s,e,r,a,h);if(Array.isArray(e)){for(var m=0;m<e.length;m++)rn(s,e[m],r,a,h);return null}return r=se(r),s&&s[Ln]?s.N(e,r,le(a)?!!a.capture:!!a,h):En(s,e,r,!1,a,h)}function En(s,e,r,a,h,m){if(!e)throw Error("Invalid event type");var I=le(h)?!!h.capture:!!h,O=fn(s);if(O||(s[ur]=O=new nr(s)),(r=O.add(e,r,a,I,m)).proxy)return r;if(a=function(){const e=ti;return function s(r){return e.call(s.src,s.listener,r)}}(),r.proxy=a,a.src=s,a.listener=r,s.addEventListener)be||(h=I),void 0===h&&(h=!1),s.addEventListener(e.toString(),a,h);else if(s.attachEvent)s.attachEvent(Zn(e.toString()),a);else{if(!s.addListener||!s.removeListener)throw Error("addEventListener and attachEvent are unavailable.");s.addListener(a)}return r}function rr(s,e,r,a,h){if(Array.isArray(e)){for(var m=0;m<e.length;m++)rr(s,e[m],r,a,h);return null}return r=se(r),s&&s[Ln]?s.O(e,r,le(a)?!!a.capture:!!a,h):En(s,e,r,!0,a,h)}function ir(s,e,r,a,h){if(Array.isArray(e))for(var m=0;m<e.length;m++)ir(s,e[m],r,a,h);else a=le(a)?!!a.capture:!!a,r=se(r),s&&s[Ln]?(s=s.i,(e=String(e).toString())in s.g&&-1<(r=It(m=s.g[e],r,a,h))&&(or(m[r]),Array.prototype.splice.call(m,r,1),0==m.length&&(delete s.g[e],s.h--))):s&&(s=fn(s))&&(e=s.g[e.toString()],s=-1,e&&(s=It(e,r,a,h)),(r=-1<s?e[s]:null)&&Kn(r))}function Kn(s){if("number"!=typeof s&&s&&!s.ba){var e=s.src;if(e&&e[Ln])Ht(e.i,s);else{var r=s.type,a=s.proxy;e.removeEventListener?e.removeEventListener(r,a,s.capture):e.detachEvent?e.detachEvent(Zn(r),a):e.addListener&&e.removeListener&&e.removeListener(a),(r=fn(e))?(Ht(r,s),0==r.h&&(r.src=null,e[ur]=null)):or(s)}}}function Zn(s){return s in pr?pr[s]:pr[s]="on"+s}function ti(s,e){if(s.ba)s=!0;else{e=new Un(e,this);var r=s.listener,a=s.ha||s.src;s.ea&&Kn(s),s=r.call(a,e)}return s}function fn(s){return(s=s[ur])instanceof nr?s:null}var Xe="__closure_events_fn_"+(1e9*Math.random()>>>0);function se(s){return"function"==typeof s?s:(s[Xe]||(s[Xe]=function(e){return s.handleEvent(e)}),s[Xe])}function xe(){gt.call(this),this.i=new nr(this),this.P=this,this.I=null}function at(s,e){var r,a=s.I;if(a)for(r=[];a;a=a.I)r.push(a);if(s=s.P,a=e.type||e,"string"==typeof e)e=new Pe(e,s);else if(e instanceof Pe)e.target=e.target||s;else{var h=e;ei(e=new Pe(a,s),h)}if(h=!0,r)for(var m=r.length-1;0<=m;m--){var I=e.g=r[m];h=Ct(I,a,!0,e)&&h}if(h=Ct(I=e.g=s,a,!0,e)&&h,h=Ct(I,a,!1,e)&&h,r)for(m=0;m<r.length;m++)h=Ct(I=e.g=r[m],a,!1,e)&&h}function Ct(s,e,r,a){if(!(e=s.i.g[String(e)]))return!0;e=e.concat();for(var h=!0,m=0;m<e.length;++m){var I=e[m];if(I&&!I.ba&&I.capture==r){var O=I.listener,X=I.ha||I.src;I.ea&&Ht(s.i,I),h=!1!==O.call(X,a)&&h}}return h&&!a.defaultPrevented}Ue(xe,gt),xe.prototype[Ln]=!0,xe.prototype.removeEventListener=function(s,e,r,a){ir(this,s,e,r,a)},xe.prototype.M=function(){if(xe.X.M.call(this),this.i){var e,s=this.i;for(e in s.g){for(var r=s.g[e],a=0;a<r.length;a++)or(r[a]);delete s.g[e],s.h--}}this.I=null},xe.prototype.N=function(s,e,r,a){return this.i.add(String(s),e,!1,r,a)},xe.prototype.O=function(s,e,r,a){return this.i.add(String(s),e,!0,r,a)};var Be=re.JSON.stringify;function He(){var s=Vn;let e=null;return s.g&&(e=s.g,s.g=s.g.next,s.g||(s.h=null),e.next=null),e}var Qt,We=new class{constructor(s,e){this.i=s,this.j=e,this.h=0,this.g=null}get(){let s;return 0<this.h?(this.h--,s=this.g,this.g=s.next,s.next=null):s=this.i(),s}}(()=>new Ee,s=>s.reset());class Ee{constructor(){this.next=this.g=this.h=null}set(e,r){this.h=e,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function $e(s){re.setTimeout(()=>{throw s},0)}function wt(s,e){Qt||function(){var s=re.Promise.resolve(void 0);Qt=function(){s.then(mn)}}(),An||(Qt(),An=!0),Vn.add(s,e)}var An=!1,Vn=new class{constructor(){this.h=this.g=null}add(e,r){const a=We.get();a.set(e,r),this.h?this.h.next=a:this.g=a,this.h=a}};function mn(){for(var s;s=He();){try{s.h.call(s.g)}catch(r){$e(r)}var e=We;e.j(s),100>e.h&&(e.h++,s.next=e.g,e.g=s)}An=!1}function In(s,e){xe.call(this),this.h=s||1,this.g=e||re,this.j=ft(this.lb,this),this.l=Date.now()}function br(s){s.ca=!1,s.R&&(s.g.clearTimeout(s.R),s.R=null)}function Zt(s,e,r){if("function"==typeof s)r&&(s=ft(s,r));else{if(!s||"function"!=typeof s.handleEvent)throw Error("Invalid listener argument");s=ft(s.handleEvent,s)}return 2147483647<Number(e)?-1:re.setTimeout(s,e||0)}function Yt(s){s.g=Zt(()=>{s.g=null,s.i&&(s.i=!1,Yt(s))},s.j);const e=s.h;s.h=null,s.m.apply(null,e)}Ue(In,xe),(L=In.prototype).ca=!1,L.R=null,L.lb=function(){if(this.ca){var s=Date.now()-this.l;0<s&&s<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-s):(this.R&&(this.g.clearTimeout(this.R),this.R=null),at(this,"tick"),this.ca&&(br(this),this.start()))}},L.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},L.M=function(){In.X.M.call(this),br(this),delete this.g};class Ut extends gt{constructor(e,r){super(),this.m=e,this.j=r,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Yt(this)}M(){super.M(),this.g&&(re.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cn(s){gt.call(this),this.h=s,this.g={}}Ue(Cn,gt);var Mn=[];function dn(s,e,r,a){Array.isArray(r)||(r&&(Mn[0]=r.toString()),r=Mn);for(var h=0;h<r.length;h++){var m=rn(e,r[h],a||s.handleEvent,!1,s.h||s);if(!m)break;s.g[m.key]=m}}function Vr(s){vr(s.g,function(e,r){this.g.hasOwnProperty(r)&&Kn(e)},s),s.g={}}function Tr(){this.g=!0}function Xr(s,e,r,a){s.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(s,e){if(!s.g)return e;if(!e)return null;try{var r=JSON.parse(e);if(r)for(s=0;s<r.length;s++)if(Array.isArray(r[s])){var a=r[s];if(!(2>a.length)){var h=a[1];if(Array.isArray(h)&&!(1>h.length)){var m=h[0];if("noop"!=m&&"stop"!=m&&"close"!=m)for(var I=1;I<h.length;I++)h[I]=""}}}return Be(r)}catch(O){return e}}(s,r)+(a?" "+a:"")})}Cn.prototype.M=function(){Cn.X.M.call(this),Vr(this)},Cn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Tr.prototype.Aa=function(){this.g=!1},Tr.prototype.info=function(){};var Wr={},di=null;function Yr(){return di=di||new xe}function fs(s){Pe.call(this,Wr.Pa,s)}function $r(s){const e=Yr();at(e,new fs(e,s))}function zi(s,e){Pe.call(this,Wr.STAT_EVENT,s),this.stat=e}function qr(s){const e=Yr();at(e,new zi(e,s))}function mi(s,e){Pe.call(this,Wr.Qa,s),this.size=e}function Ar(s,e){if("function"!=typeof s)throw Error("Fn must not be null and must be a function");return re.setTimeout(function(){s()},e)}Wr.Pa="serverreachability",Ue(fs,Pe),Wr.STAT_EVENT="statevent",Ue(zi,Pe),Wr.Qa="timingevent",Ue(mi,Pe);var As={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},_t={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Y(){}function ue(){}Y.prototype.h=null;var Ot,Te={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Je(){Pe.call(this,"d")}function rt(){Pe.call(this,"c")}function Pt(){}function xt(s,e,r,a){this.l=s,this.j=e,this.m=r,this.U=a||1,this.S=new Cn(this),this.O=Pn,this.T=new In(s=St?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new on}function on(){this.i=null,this.g="",this.h=!1}Ue(Je,Pe),Ue(rt,Pe),Ue(Pt,Y),Pt.prototype.g=function(){return new XMLHttpRequest},Pt.prototype.i=function(){return{}},Ot=new Pt;var Pn=45e3,$n={},Gn={};function xr(s,e,r){s.K=1,s.v=zs(Ws(e)),s.s=r,s.P=!0,ss(s,null)}function ss(s,e){s.F=Date.now(),vs(s),s.A=Ws(s.v);var r=s.A,a=s.U;Array.isArray(a)||(a=[String(a)]),eo(r.i,"t",a),s.C=0,r=s.l.H,s.h=new on,s.g=qs(s.l,r?e:null,!s.s),0<s.N&&(s.L=new Ut(ft(s.La,s,s.g),s.N)),dn(s.S,s.g,"readystatechange",s.ib),e=s.H?Er(s.H):{},s.s?(s.u||(s.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",s.g.da(s.A,s.u,s.s,e)):(s.u="GET",s.g.da(s.A,s.u,null,e)),$r(1),function(s,e,r,a,h,m){s.info(function(){if(s.g)if(m)for(var I="",O=m.split("&"),X=0;X<O.length;X++){var ie=O[X].split("=");if(1<ie.length){var Oe=ie[0];ie=ie[1];var st=Oe.split("_");I=2<=st.length&&"type"==st[1]?I+(Oe+"=")+ie+"&":I+(Oe+"=redacted&")}}else I=null;else I=m;return"XMLHTTP REQ ("+a+") [attempt "+h+"]: "+e+"\n"+r+"\n"+I})}(s.j,s.u,s.A,s.m,s.U,s.s)}function hi(s){return!!s.g&&"GET"==s.u&&2!=s.K&&s.l.Da}function bi(s,e,r){let h,a=!0;for(;!s.I&&s.C<r.length;){if(h=xs(s,r),h==Gn){4==e&&(s.o=4,qr(14),a=!1),Xr(s.j,s.m,null,"[Incomplete Response]");break}if(h==$n){s.o=4,qr(15),Xr(s.j,s.m,r,"[Invalid Chunk]"),a=!1;break}Xr(s.j,s.m,h,null),je(s,h)}hi(s)&&h!=Gn&&h!=$n&&(s.h.g="",s.C=0),4!=e||0!=r.length||s.h.h||(s.o=1,qr(16),a=!1),s.i=s.i&&a,a?0<r.length&&!s.$&&(s.$=!0,(e=s.l).g==s&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+r.length),Fi(e),e.K=!0,qr(11))):(Xr(s.j,s.m,r,"[Invalid Chunked Response]"),Es(s),Hi(s))}function xs(s,e){var r=s.C,a=e.indexOf("\n",r);return-1==a?Gn:(r=Number(e.substring(r,a)),isNaN(r)?$n:(a+=1)+r>e.length?Gn:(e=e.substr(a,r),s.C=a+r,e))}function vs(s){s.V=Date.now()+s.O,li(s,s.O)}function li(s,e){if(null!=s.B)throw Error("WatchDog timer not null");s.B=Ar(ft(s.gb,s),e)}function Hs(s){s.B&&(re.clearTimeout(s.B),s.B=null)}function Hi(s){0==s.l.G||s.I||co(s.l,s)}function Es(s){Hs(s);var e=s.L;e&&"function"==typeof e.na&&e.na(),s.L=null,br(s.T),Vr(s.S),s.g&&(e=s.g,s.g=null,e.abort(),e.na())}function je(s,e){try{var r=s.l;if(0!=r.G&&(r.g==s||K(r.h,s)))if(!s.J&&K(r.h,s)&&3==r.G){try{var a=r.Fa.g.parse(e)}catch(ie){a=null}if(Array.isArray(a)&&3==a.length){var h=a;if(0==h[0])e:if(r.u)r.Ba=h[1],0<r.Ba-r.T&&37500>h[2]&&r.L&&0==r.A&&!r.v&&(r.v=Ar(ft(r.cb,r),6e3));else{if(r.g){if(!(r.g.F+3e3<s.F))break e;ls(r),qo(r)}gs(r),qr(18)}if(1>=fe(r.h)&&r.ja){try{r.ja()}catch(ie){}r.ja=void 0}}else vo(r,11)}else if((s.J||r.g==s)&&ls(r),!Me(e))for(h=r.Fa.g.parse(e),e=0;e<h.length;e++){let ie=h[e];if(r.T=ie[0],ie=ie[1],2==r.G)if("c"==ie[0]){r.I=ie[1],r.ka=ie[2];const Oe=ie[3];null!=Oe&&(r.ma=Oe,r.j.info("VER="+r.ma));const st=ie[4];null!=st&&(r.Ca=st,r.j.info("SVER="+r.Ca));const kt=ie[5];null!=kt&&"number"==typeof kt&&0<kt&&(r.J=a=1.5*kt,r.j.info("backChannelRequestTimeoutMs_="+a)),a=r;const nn=s.g;if(nn){const pn=nn.g?nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pn){var m=a.h;m.g||-1==pn.indexOf("spdy")&&-1==pn.indexOf("quic")&&-1==pn.indexOf("h2")||(m.j=m.l,m.g=new Set,m.h&&(De(m,m.h),m.h=null))}if(a.D){const qn=nn.g?nn.g.getResponseHeader("X-HTTP-Session-Id"):null;qn&&(a.za=qn,Ur(a.F,a.D,qn))}}r.G=3,r.l&&r.l.xa(),r.$&&(r.P=Date.now()-s.F,r.j.info("Handshake RTT: "+r.P+"ms"));var I=s;if((a=r).sa=Eo(a,a.H?a.ka:null,a.V),I.J){Ke(a.h,I);var O=I,X=a.J;X&&O.setTimeout(X),O.B&&(Hs(O),vs(O)),a.g=I}else Fa(a);0<r.i.length&&Vs(r)}else"stop"!=ie[0]&&"close"!=ie[0]||vo(r,7);else 3==r.G&&("stop"==ie[0]||"close"==ie[0]?"stop"==ie[0]?vo(r,7):Os(r):"noop"!=ie[0]&&r.l&&r.l.wa(ie),r.A=0)}$r(4)}catch(ie){}}function Ro(s,e){if(s.forEach&&"function"==typeof s.forEach)s.forEach(e,void 0);else if(_e(s)||"string"==typeof s)Array.prototype.forEach.call(s,e,void 0);else for(var r=function(s){if(s.oa&&"function"==typeof s.oa)return s.oa();if(!s.W||"function"!=typeof s.W){if("undefined"!=typeof Map&&s instanceof Map)return Array.from(s.keys());if(!("undefined"!=typeof Set&&s instanceof Set)){if(_e(s)||"string"==typeof s){var e=[];s=s.length;for(var r=0;r<s;r++)e.push(r);return e}e=[],r=0;for(const a in s)e[r++]=a;return e}}}(s),a=function(s){if(s.W&&"function"==typeof s.W)return s.W();if("undefined"!=typeof Map&&s instanceof Map||"undefined"!=typeof Set&&s instanceof Set)return Array.from(s.values());if("string"==typeof s)return s.split("");if(_e(s)){for(var e=[],r=s.length,a=0;a<r;a++)e.push(s[a]);return e}for(a in e=[],r=0,s)e[r++]=s[a];return e}(s),h=a.length,m=0;m<h;m++)e.call(void 0,a[m],r&&r[m],s)}(L=xt.prototype).setTimeout=function(s){this.O=s},L.ib=function(s){s=s.target;const e=this.L;e&&3==Ir(s)?e.l():this.La(s)},L.La=function(s){try{if(s==this.g)e:{const Oe=Ir(this.g);var e=this.g.Ea();const st=this.g.aa();if(!(3>Oe)&&(3!=Oe||St||this.g&&(this.h.h||this.g.fa()||Po(this.g)))){this.I||4!=Oe||7==e||$r(8==e||0>=st?3:2),Hs(this);var r=this.g.aa();this.Y=r;t:if(hi(this)){var a=Po(this.g);s="";var h=a.length,m=4==Ir(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Es(this),Hi(this);var I="";break t}this.h.i=new re.TextDecoder}for(e=0;e<h;e++)this.h.h=!0,s+=this.h.i.decode(a[e],{stream:m&&e==h-1});a.splice(0,h),this.h.g+=s,this.C=0,I=this.h.g}else I=this.g.fa();if(this.i=200==r,function(s,e,r,a,h,m,I){s.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+h+"]: "+e+"\n"+r+"\n"+m+" "+I})}(this.j,this.u,this.A,this.m,this.U,Oe,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var O,X=this.g;if((O=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Me(O)){var ie=O;break t}}ie=null}if(!(r=ie)){this.i=!1,this.o=3,qr(12),Es(this),Hi(this);break e}Xr(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,je(this,r)}this.P?(bi(this,Oe,I),St&&this.i&&3==Oe&&(dn(this.S,this.T,"tick",this.hb),this.T.start())):(Xr(this.j,this.m,I,null),je(this,I)),4==Oe&&Es(this),this.i&&!this.I&&(4==Oe?co(this.l,this):(this.i=!1,vs(this)))}else 400==r&&0<I.indexOf("Unknown SID")?(this.o=3,qr(12)):(this.o=0,qr(13)),Es(this),Hi(this)}}}catch(Oe){}},L.hb=function(){if(this.g){var s=Ir(this.g),e=this.g.fa();this.C<e.length&&(Hs(this),bi(this,s,e),this.i&&4!=s&&vs(this))}},L.cancel=function(){this.I=!0,Es(this)},L.gb=function(){this.B=null;const s=Date.now();0<=s-this.V?(function(s,e){s.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&($r(3),qr(17)),Es(this),this.o=2,Hi(this)):li(this,this.V-s)};var mo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ps(s,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,s instanceof ps){this.h=void 0!==e?e:s.h,Gs(this,s.j),this.s=s.s,this.g=s.g,os(this,s.m),this.l=s.l,e=s.i;var r=new Ri;r.i=e.i,e.g&&(r.g=new Map(e.g),r.h=e.h),yo(this,r),this.o=s.o}else s&&(r=String(s).match(mo))?(this.h=!!e,Gs(this,r[1]||"",!0),this.s=Ji(r[2]||""),this.g=Ji(r[3]||"",!0),os(this,r[4]),this.l=Ji(r[5]||"",!0),yo(this,r[6]||"",!0),this.o=Ji(r[7]||"")):(this.h=!!e,this.i=new Ri(null,this.h))}function Ws(s){return new ps(s)}function Gs(s,e,r){s.j=r?Ji(e,!0):e,s.j&&(s.j=s.j.replace(/:$/,""))}function os(s,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);s.m=e}else s.m=null}function yo(s,e,r){e instanceof Ri?(s.i=e,function(s,e){e&&!s.j&&(Gr(s),s.i=null,s.g.forEach(function(r,a){var h=a.toLowerCase();a!=h&&(Yo(this,a),eo(this,h,r))},s)),s.j=e}(s.i,s.h)):(r||(e=bs(e,ci)),s.i=new Ri(e,s.h))}function Ur(s,e,r){s.i.set(e,r)}function zs(s){return Ur(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function Ji(s,e){return s?e?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function bs(s,e,r){return"string"==typeof s?(s=encodeURI(s).replace(e,es),r&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function es(s){return"%"+((s=s.charCodeAt(0))>>4&15).toString(16)+(15&s).toString(16)}ps.prototype.toString=function(){var s=[],e=this.j;e&&s.push(bs(e,Yi,!0),":");var r=this.g;return(r||"file"==e)&&(s.push("//"),(e=this.s)&&s.push(bs(e,Yi,!0),"@"),s.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&s.push(":",String(r))),(r=this.l)&&(this.g&&"/"!=r.charAt(0)&&s.push("/"),s.push(bs(r,"/"==r.charAt(0)?_i:ra,!0))),(r=this.i.toString())&&s.push("?",r),(r=this.o)&&s.push("#",bs(r,Mo)),s.join("")};var Yi=/[#\/\?@]/g,ra=/[#\?:]/g,_i=/[#\?]/g,ci=/[#\?@]/g,Mo=/#/g;function Ri(s,e){this.h=this.g=null,this.i=s||null,this.j=!!e}function Gr(s){s.g||(s.g=new Map,s.h=0,s.i&&function(s,e){if(s){s=s.split("&");for(var r=0;r<s.length;r++){var a=s[r].indexOf("="),h=null;if(0<=a){var m=s[r].substring(0,a);h=s[r].substring(a+1)}else m=s[r];e(m,h?decodeURIComponent(h.replace(/\+/g," ")):"")}}}(s.i,function(e,r){s.add(decodeURIComponent(e.replace(/\+/g," ")),r)}))}function Yo(s,e){Gr(s),e=qi(s,e),s.g.has(e)&&(s.i=null,s.h-=s.g.get(e).length,s.g.delete(e))}function Ii(s,e){return Gr(s),e=qi(s,e),s.g.has(e)}function eo(s,e,r){Yo(s,e),0<r.length&&(s.i=null,s.g.set(qi(s,e),pt(r)),s.h+=r.length)}function qi(s,e){return e=String(e),s.j&&(e=e.toLowerCase()),e}function Ni(s){this.l=s||Bi,s=re.PerformanceNavigationTiming?0<(s=re.performance.getEntriesByType("navigation")).length&&("hq"==s[0].nextHopProtocol||"h2"==s[0].nextHopProtocol):!!(re.g&&re.g.Ga&&re.g.Ga()&&re.g.Ga().$b),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(L=Ri.prototype).add=function(s,e){Gr(this),this.i=null,s=qi(this,s);var r=this.g.get(s);return r||this.g.set(s,r=[]),r.push(e),this.h+=1,this},L.forEach=function(s,e){Gr(this),this.g.forEach(function(r,a){r.forEach(function(h){s.call(e,h,a,this)},this)},this)},L.oa=function(){Gr(this);const s=Array.from(this.g.values()),e=Array.from(this.g.keys()),r=[];for(let a=0;a<e.length;a++){const h=s[a];for(let m=0;m<h.length;m++)r.push(e[a])}return r},L.W=function(s){Gr(this);let e=[];if("string"==typeof s)Ii(this,s)&&(e=e.concat(this.g.get(qi(this,s))));else{s=Array.from(this.g.values());for(let r=0;r<s.length;r++)e=e.concat(s[r])}return e},L.set=function(s,e){return Gr(this),this.i=null,Ii(this,s=qi(this,s))&&(this.h-=this.g.get(s).length),this.g.set(s,[e]),this.h+=1,this},L.get=function(s,e){return s&&0<(s=this.W(s)).length?String(s[0]):e},L.toString=function(){if(this.i)return this.i;if(!this.g)return"";const s=[],e=Array.from(this.g.keys());for(var r=0;r<e.length;r++){var a=e[r];const m=encodeURIComponent(String(a)),I=this.W(a);for(a=0;a<I.length;a++){var h=m;""!==I[a]&&(h+="="+encodeURIComponent(String(I[a]))),s.push(h)}}return this.i=s.join("&")};var Bi=10;function W(s){return!!s.h||!!s.g&&s.g.size>=s.j}function fe(s){return s.h?1:s.g?s.g.size:0}function K(s,e){return s.h?s.h==e:!!s.g&&s.g.has(e)}function De(s,e){s.g?s.g.add(e):s.h=e}function Ke(s,e){s.h&&s.h==e?s.h=null:s.g&&s.g.has(e)&&s.g.delete(e)}function Ft(s){if(null!=s.h)return s.i.concat(s.h.D);if(null!=s.g&&0!==s.g.size){let e=s.i;for(const r of s.g.values())e=e.concat(r.D);return e}return pt(s.i)}function an(){}function G(){this.g=new an}function $(s,e,r){const a=r||"";try{Ro(s,function(h,m){let I=h;le(h)&&(I=Be(h)),e.push(a+m+"="+encodeURIComponent(I))})}catch(h){throw e.push(a+"type="+encodeURIComponent("_badmap")),h}}function ce(s,e,r,a,h){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,h(a)}catch(m){}}function mt(s){this.l=s.ac||null,this.j=s.jb||!1}function _n(s,e){xe.call(this),this.D=s,this.u=e,this.m=void 0,this.readyState=er,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ni.prototype.cancel=function(){if(this.i=Ft(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const s of this.g.values())s.cancel();this.g.clear()}},an.prototype.stringify=function(s){return re.JSON.stringify(s,void 0)},an.prototype.parse=function(s){return re.JSON.parse(s,void 0)},Ue(mt,Y),mt.prototype.g=function(){return new _n(this.l,this.j)},mt.prototype.i=function(s){return function(){return s}}({}),Ue(_n,xe);var er=0;function Kr(s){s.j.read().then(s.Ta.bind(s)).catch(s.ga.bind(s))}function $i(s){s.readyState=4,s.l=null,s.j=null,s.A=null,si(s)}function si(s){s.onreadystatechange&&s.onreadystatechange.call(s)}(L=_n.prototype).open=function(s,e){if(this.readyState!=er)throw this.abort(),Error("Error reopening a connection");this.C=s,this.B=e,this.readyState=1,si(this)},L.send=function(s){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};s&&(e.body=s),(this.D||re).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},L.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,$i(this)),this.readyState=er},L.Wa=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,si(this)),this.g&&(this.readyState=3,si(this),this.g)))if("arraybuffer"===this.responseType)s.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==re.ReadableStream&&"body"in s){if(this.j=s.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Kr(this)}else s.text().then(this.Va.bind(this),this.ga.bind(this))},L.Ta=function(s){if(this.g){if(this.u&&s.value)this.response.push(s.value);else if(!this.u){var e=s.value?s.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!s.done}))&&(this.response=this.responseText+=e)}s.done?$i(this):si(this),3==this.readyState&&Kr(this)}},L.Va=function(s){this.g&&(this.response=this.responseText=s,$i(this))},L.Ua=function(s){this.g&&(this.response=s,$i(this))},L.ga=function(){this.g&&$i(this)},L.setRequestHeader=function(s,e){this.v.append(s,e)},L.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},L.getAllResponseHeaders=function(){if(!this.h)return"";const s=[],e=this.h.entries();for(var r=e.next();!r.done;)s.push((r=r.value)[0]+": "+r[1]),r=e.next();return s.join("\r\n")},Object.defineProperty(_n.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(s){this.m=s?"include":"same-origin"}});var ni=re.JSON.parse;function Zr(s){xe.call(this),this.headers=new Map,this.u=s||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ar,this.K=this.L=!1}Ue(Zr,xe);var ar="",ia=/^https?$/i,_o=["POST","PUT"];function ka(s,e){s.h=!1,s.g&&(s.l=!0,s.g.abort(),s.l=!1),s.j=e,s.m=5,sa(s),oo(s)}function sa(s){s.D||(s.D=!0,at(s,"complete"),at(s,"error"))}function oa(s){if(s.h&&void 0!==Ce&&(!s.C[1]||4!=Ir(s)||2!=s.aa()))if(s.v&&4==Ir(s))Zt(s.Ha,0,s);else if(at(s,"readystatechange"),4==Ir(s)){s.h=!1;try{const O=s.aa();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var r;if(!(r=e)){var a;if(a=0===O){var h=String(s.H).match(mo)[1]||null;if(!h&&re.self&&re.self.location){var m=re.self.location.protocol;h=m.substr(0,m.length-1)}a=!ia.test(h?h.toLowerCase():"")}r=a}if(r)at(s,"complete"),at(s,"success");else{s.m=6;try{var I=2<Ir(s)?s.g.statusText:""}catch(X){I=""}s.j=I+" ["+s.aa()+"]",sa(s)}}finally{oo(s)}}}function oo(s,e){if(s.g){ln(s);const r=s.g,a=s.C[0]?he:null;s.g=null,s.C=null,e||at(s,"ready");try{r.onreadystatechange=a}catch(h){}}}function ln(s){s.g&&s.K&&(s.g.ontimeout=null),s.A&&(re.clearTimeout(s.A),s.A=null)}function Ir(s){return s.g?s.g.readyState:0}function Po(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.J){case ar:case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ki(s){let e="";return vr(s,function(r,a){e+=a,e+=":",e+=r,e+="\r\n"}),e}function ao(s,e,r){e:{for(a in r){var a=!1;break e}a=!0}a||(r=ki(r),"string"==typeof s?null!=r&&encodeURIComponent(String(r)):Ur(s,e,r))}function Is(s,e,r){return r&&r.internalChannelParams&&r.internalChannelParams[s]||e}function Ps(s){this.Ca=0,this.i=[],this.j=new Tr,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Is("failFast",!1,s),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Is("baseRetryDelayMs",5e3,s),this.bb=Is("retryDelaySeedMs",1e4,s),this.$a=Is("forwardChannelMaxRetries",2,s),this.ta=Is("forwardChannelRequestTimeoutMs",2e4,s),this.ra=s&&s.xmlHttpFactory||void 0,this.Da=s&&s.Zb||!1,this.J=void 0,this.H=s&&s.supportsCrossDomainXhr||!1,this.I="",this.h=new Ni(s&&s.concurrentRequestLimit),this.Fa=new G,this.O=s&&s.fastHandshake||!1,this.N=s&&s.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=s&&s.Xb||!1,s&&s.Aa&&this.j.Aa(),s&&s.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&s&&s.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Os(s){if(Vl(s),3==s.G){var e=s.U++,r=Ws(s.F);Ur(r,"SID",s.I),Ur(r,"RID",e),Ur(r,"TYPE","terminate"),ts(s,r),(e=new xt(s,s.j,e,void 0)).K=2,e.v=zs(Ws(r)),r=!1,re.navigator&&re.navigator.sendBeacon&&(r=re.navigator.sendBeacon(e.v.toString(),"")),!r&&re.Image&&((new Image).src=e.v,r=!0),r||(e.g=qs(e.l,null),e.g.da(e.v)),e.F=Date.now(),vs(e)}Oo(s)}function qo(s){s.g&&(Fi(s),s.g.cancel(),s.g=null)}function Vl(s){qo(s),s.u&&(re.clearTimeout(s.u),s.u=null),ls(s),s.h.cancel(),s.m&&("number"==typeof s.m&&re.clearTimeout(s.m),s.m=null)}function Vs(s){W(s.h)||s.m||(s.m=!0,wt(s.Ja,s),s.C=0)}function lo(s,e){var r;r=e?e.m:s.U++;const a=Ws(s.F);Ur(a,"SID",s.I),Ur(a,"RID",r),Ur(a,"AID",s.T),ts(s,a),s.o&&s.s&&ao(a,s.o,s.s),r=new xt(s,s.j,r,s.C+1),null===s.o&&(r.H=s.s),e&&(s.i=e.D.concat(s.i)),e=Ns(s,r,1e3),r.setTimeout(Math.round(.5*s.ta)+Math.round(.5*s.ta*Math.random())),De(s.h,r),xr(r,a,e)}function ts(s,e){s.ia&&vr(s.ia,function(r,a){Ur(e,a,r)}),s.l&&Ro({},function(r,a){Ur(e,a,r)})}function Ns(s,e,r){r=Math.min(s.i.length,r);var a=s.l?ft(s.l.Ra,s.l,s):null;e:{var h=s.i;let m=-1;for(;;){const I=["count="+r];-1==m?0<r?(m=h[0].h,I.push("ofs="+m)):m=0:I.push("ofs="+m);let O=!0;for(let X=0;X<r;X++){let ie=h[X].h;const Oe=h[X].g;if(ie-=m,0>ie)m=Math.max(0,h[X].h-100),O=!1;else try{$(Oe,I,"req"+ie+"_")}catch(st){a&&a(Oe)}}if(O){a=I.join("&");break e}}}return s=s.i.splice(0,r),e.D=s,a}function Fa(s){s.g||s.u||(s.Z=1,wt(s.Ia,s),s.A=0)}function gs(s){return!(s.g||s.u||3<=s.A||(s.Z++,s.u=Ar(ft(s.Ia,s),Ys(s,s.A)),s.A++,0))}function Fi(s){null!=s.B&&(re.clearTimeout(s.B),s.B=null)}function to(s){s.g=new xt(s,s.j,"rpc",s.Z),null===s.o&&(s.g.H=s.s),s.g.N=0;var e=Ws(s.sa);Ur(e,"RID","rpc"),Ur(e,"SID",s.I),Ur(e,"CI",s.L?"0":"1"),Ur(e,"AID",s.T),Ur(e,"TYPE","xmlhttp"),ts(s,e),s.o&&s.s&&ao(e,s.o,s.s),s.J&&s.g.setTimeout(s.J);var r=s.g;s=s.ka,r.K=1,r.v=zs(Ws(e)),r.s=null,r.P=!0,ss(r,s)}function ls(s){null!=s.v&&(re.clearTimeout(s.v),s.v=null)}function co(s,e){var r=null;if(s.g==e){ls(s),Fi(s),s.g=null;var a=2}else{if(!K(s.h,e))return;r=e.D,Ke(s.h,e),a=1}if(0!=s.G)if(s.pa=e.Y,e.i)if(1==a){r=e.s?e.s.length:0,e=Date.now()-e.F;var h=s.C;at(a=Yr(),new mi(a,r,e,h)),Vs(s)}else Fa(s);else if(3==(h=e.o)||0==h&&0<s.pa||!(1==a&&function(s,e){return!(fe(s.h)>=s.h.j-(s.m?1:0)||(s.m?(s.i=e.D.concat(s.i),0):1==s.G||2==s.G||s.C>=(s.Za?0:s.$a)||(s.m=Ar(ft(s.Ja,s,e),Ys(s,s.C)),s.C++,0)))}(s,e)||2==a&&gs(s)))switch(r&&0<r.length&&(e=s.h,e.i=e.i.concat(r)),h){case 1:vo(s,5);break;case 4:vo(s,10);break;case 3:vo(s,6);break;default:vo(s,2)}}function Ys(s,e){let r=s.Xa+Math.floor(Math.random()*s.bb);return s.l||(r*=2),r*e}function vo(s,e){if(s.j.info("Error code "+e),2==e){var r=null;s.l&&(r=null);var a=ft(s.kb,s);r||(r=new ps("//www.google.com/images/cleardot.gif"),re.location&&"http"==re.location.protocol||Gs(r,"https"),zs(r)),function(s,e){const r=new Tr;if(re.Image){const a=new Image;a.onload=Se(ce,r,a,"TestLoadImage: loaded",!0,e),a.onerror=Se(ce,r,a,"TestLoadImage: error",!1,e),a.onabort=Se(ce,r,a,"TestLoadImage: abort",!1,e),a.ontimeout=Se(ce,r,a,"TestLoadImage: timeout",!1,e),re.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=s}else e(!1)}(r.toString(),a)}else qr(2);s.G=0,s.l&&s.l.va(e),Oo(s),Vl(s)}function Oo(s){if(s.G=0,s.la=[],s.l){const e=Ft(s.h);(0!=e.length||0!=s.i.length)&&(Dt(s.la,e),Dt(s.la,s.i),s.h.i.length=0,pt(s.i),s.i.length=0),s.l.ua()}}function Eo(s,e,r){var a=r instanceof ps?Ws(r):new ps(r,void 0);if(""!=a.g)e&&(a.g=e+"."+a.g),os(a,a.m);else{var h=re.location;a=h.protocol,e=e?e+"."+h.hostname:h.hostname,h=+h.port;var m=new ps(null,void 0);a&&Gs(m,a),e&&(m.g=e),h&&os(m,h),r&&(m.l=r),a=m}return e=s.za,(r=s.D)&&e&&Ur(a,r,e),Ur(a,"VER",s.ma),ts(s,a),a}function qs(s,e,r){if(e&&!s.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Zr(r&&s.Da&&!s.ra?new mt({jb:!0}):s.ra)).Ka(s.H),e}function la(){}function Ks(){if(Fe&&!(10<=Number(un)))throw Error("Environmental error: no available transport.")}function vi(s,e){xe.call(this),this.g=new Ps(e),this.l=s,this.h=e&&e.messageUrlParams||null,s=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.s=s,s=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(s?s["X-WebChannel-Content-Type"]=e.messageContentType:s={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(s?s["X-WebChannel-Client-Profile"]=e.ya:s={"X-WebChannel-Client-Profile":e.ya}),this.g.S=s,(s=e&&e.Yb)&&!Me(s)&&(this.g.o=s),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Me(e)&&(this.g.D=e,null!==(s=this.h)&&e in s&&e in(s=this.h)&&delete s[e]),this.j=new Qs(this)}function Zs(s){Je.call(this);var e=s.__sm__;if(e){e:{for(const r in e){s=r;break e}s=void 0}(this.i=s)&&(s=this.i,e=null!==e&&s in e?e[s]:void 0),this.data=e}else this.data=s}function qa(){rt.call(this),this.status=1}function Qs(s){this.g=s}(L=Zr.prototype).Ka=function(s){this.L=s},L.da=function(s,e,r,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+s);e=e?e.toUpperCase():"GET",this.H=s,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ot.g(),this.C=function(s){return s.h||(s.h=s.i())}(this.u?this.u:Ot),this.g.onreadystatechange=ft(this.Ha,this);try{this.F=!0,this.g.open(e,String(s),!0),this.F=!1}catch(m){return void ka(this,m)}if(s=r||"",r=new Map(this.headers),a)if(Object.getPrototypeOf(a)===Object.prototype)for(var h in a)r.set(h,a[h]);else{if("function"!=typeof a.keys||"function"!=typeof a.get)throw Error("Unknown input type for opt_headers: "+String(a));for(const m of a.keys())r.set(m,a.get(m))}a=Array.from(r.keys()).find(m=>"content-type"==m.toLowerCase()),h=re.FormData&&s instanceof re.FormData,!(0<=E(_o,e))||a||h||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[m,I]of r)this.g.setRequestHeader(m,I);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ln(this),0<this.B&&((this.K=function(s){return Fe&&mr()&&"number"==typeof s.timeout&&void 0!==s.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ft(this.qa,this)):this.A=Zt(this.qa,this.B,this)),this.v=!0,this.g.send(s),this.v=!1}catch(m){ka(this,m)}},L.qa=function(){void 0!==Ce&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,at(this,"timeout"),this.abort(8))},L.abort=function(s){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=s||7,at(this,"complete"),at(this,"abort"),oo(this))},L.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),oo(this,!0)),Zr.X.M.call(this)},L.Ha=function(){this.s||(this.F||this.v||this.l?oa(this):this.fb())},L.fb=function(){oa(this)},L.aa=function(){try{return 2<Ir(this)?this.g.status:-1}catch(s){return-1}},L.fa=function(){try{return this.g?this.g.responseText:""}catch(s){return""}},L.Sa=function(s){if(this.g){var e=this.g.responseText;return s&&0==e.indexOf(s)&&(e=e.substring(s.length)),ni(e)}},L.Ea=function(){return this.m},L.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(L=Ps.prototype).ma=8,L.G=1,L.Ja=function(s){if(this.m)if(this.m=null,1==this.G){if(!s){this.U=Math.floor(1e5*Math.random()),s=this.U++;const h=new xt(this,this.j,s,void 0);let m=this.s;if(this.S&&(m?(m=Er(m),ei(m,this.S)):m=this.S),null!==this.o||this.N||(h.H=m,m=null),this.O)e:{for(var e=0,r=0;r<this.i.length;r++){var a=this.i[r];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(e+=a)){e=r;break e}if(4096===e||r===this.i.length-1){e=r+1;break e}}e=1e3}else e=1e3;e=Ns(this,h,e),Ur(r=Ws(this.F),"RID",s),Ur(r,"CVER",22),this.D&&Ur(r,"X-HTTP-Session-Id",this.D),ts(this,r),m&&(this.N?e="headers="+encodeURIComponent(String(ki(m)))+"&"+e:this.o&&ao(r,this.o,m)),De(this.h,h),this.Ya&&Ur(r,"TYPE","init"),this.O?(Ur(r,"$req",e),Ur(r,"SID","null"),h.Z=!0,xr(h,r,null)):xr(h,r,e),this.G=2}}else 3==this.G&&(s?lo(this,s):0==this.i.length||W(this.h)||lo(this))},L.Ia=function(){if(this.u=null,to(this),this.$&&!(this.K||null==this.g||0>=this.P)){var s=2*this.P;this.j.info("BP detection timer enabled: "+s),this.B=Ar(ft(this.eb,this),s)}},L.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,qr(10),qo(this),to(this))},L.cb=function(){null!=this.v&&(this.v=null,qo(this),gs(this),qr(19))},L.kb=function(s){s?(this.j.info("Successfully pinged google.com"),qr(2)):(this.j.info("Failed to ping google.com"),qr(1))},(L=la.prototype).xa=function(){},L.wa=function(){},L.va=function(){},L.ua=function(){},L.Ra=function(){},Ks.prototype.g=function(s,e){return new vi(s,e)},Ue(vi,xe),vi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var s=this.g,e=this.l,r=this.h||void 0;qr(0),s.V=e,s.ia=r||{},s.L=s.Y,s.F=Eo(s,null,s.V),Vs(s)},vi.prototype.close=function(){Os(this.g)},vi.prototype.u=function(s){var e=this.g;if("string"==typeof s){var r={};r.__data__=s,s=r}else this.v&&((r={}).__data__=Be(s),s=r);e.i.push(new class{constructor(s,e){this.h=s,this.g=e}}(e.ab++,s)),3==e.G&&Vs(e)},vi.prototype.M=function(){this.g.l=null,delete this.j,Os(this.g),delete this.g,vi.X.M.call(this)},Ue(Zs,Je),Ue(qa,rt),Ue(Qs,la),Qs.prototype.xa=function(){at(this.g,"a")},Qs.prototype.wa=function(s){at(this.g,new Zs(s))},Qs.prototype.va=function(s){at(this.g,new qa(s))},Qs.prototype.ua=function(){at(this.g,"b")},Ks.prototype.createWebChannel=Ks.prototype.g,vi.prototype.send=vi.prototype.u,vi.prototype.open=vi.prototype.m,vi.prototype.close=vi.prototype.close,As.NO_ERROR=0,As.TIMEOUT=8,As.HTTP_ERROR=6,_t.COMPLETE="complete",ue.EventType=Te,Te.OPEN="a",Te.CLOSE="b",Te.ERROR="c",Te.MESSAGE="d",xe.prototype.listen=xe.prototype.N,Zr.prototype.listenOnce=Zr.prototype.O,Zr.prototype.getLastError=Zr.prototype.Oa,Zr.prototype.getLastErrorCode=Zr.prototype.Ea,Zr.prototype.getStatus=Zr.prototype.aa,Zr.prototype.getResponseJson=Zr.prototype.Sa,Zr.prototype.getResponseText=Zr.prototype.fa,Zr.prototype.send=Zr.prototype.da,Zr.prototype.setWithCredentials=Zr.prototype.Ka;var No=ye.createWebChannelTransport=function(){return new Ks},_a=ye.getStatEventTarget=function(){return Yr()},bo=ye.ErrorCode=As,w=ye.EventType=_t,N=ye.Event=Wr,T=ye.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},q=ye.FetchXmlHttpFactory=mt,pe=ye.WebChannel=ue,vt=ye.XhrIo=Zr;const Jt="@firebase/firestore";class vn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");let Cr="9.12.1";const On=new ke.Yd("@firebase/firestore");function Lr(){return On.logLevel}function Ci(s){On.setLogLevel(s)}function Kt(s,...e){if(On.logLevel<=ke.in.DEBUG){const r=e.map(uo);On.debug(`Firestore (${Cr}): ${s}`,...r)}}function lr(s,...e){if(On.logLevel<=ke.in.ERROR){const r=e.map(uo);On.error(`Firestore (${Cr}): ${s}`,...r)}}function Ki(s,...e){if(On.logLevel<=ke.in.WARN){const r=e.map(uo);On.warn(`Firestore (${Cr}): ${s}`,...r)}}function uo(s){if("string"==typeof s)return s;try{return JSON.stringify(s)}catch(r){return s}}function Fn(s="Unexpected state"){const e=`FIRESTORE (${Cr}) INTERNAL ASSERTION FAILED: `+s;throw lr(e),new Error(e)}function Hn(s,e){s||Fn()}function Ka(s,e){s||Fn()}function hn(s,e){return s}const bt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Lt extends oe.ZR{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class fi{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}class wi{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(vn.UNAUTHENTICATED))}shutdown(){}}class ho{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class va{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){var a=this;let h=this.i;const m=ie=>this.i!==h?(h=this.i,r(ie)):Promise.resolve();let I=new fi;this.o=()=>{this.i++,this.currentUser=this.u(),I.resolve(),I=new fi,e.enqueueRetryable(()=>m(this.currentUser))};const O=()=>{const ie=I;e.enqueueRetryable((0,y.Z)(function*(){yield ie.promise,yield m(a.currentUser)}))},X=ie=>{Kt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=ie,this.auth.addAuthTokenListener(this.o),O()};this.t.onInit(ie=>X(ie)),setTimeout(()=>{if(!this.auth){const ie=this.t.getImmediate({optional:!0});ie?X(ie):(Kt("FirebaseAuthCredentialsProvider","Auth not yet detected"),I.resolve(),I=new fi)}},0),O()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(a=>this.i!==e?(Kt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Hn("string"==typeof a.accessToken),new wi(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Hn(null===e||"string"==typeof e),new vn(e)}}class rc{constructor(e,r,a,h){this.h=e,this.l=r,this.m=a,this.g=h,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Hn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Ti{constructor(e,r,a,h){this.h=e,this.l=r,this.m=a,this.g=h}getToken(){return Promise.resolve(new rc(this.h,this.l,this.m,this.g))}start(e,r){e.enqueueRetryable(()=>r(vn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Pr{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Bs{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,r){const a=m=>{null!=m.error&&Kt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const I=m.token!==this.A;return this.A=m.token,Kt("FirebaseAppCheckTokenProvider",`Received ${I?"new":"existing"} token.`),I?r(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable(()=>a(m))};const h=m=>{Kt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.appCheck.addTokenListener(this.o)};this.T.onInit(m=>h(m)),setTimeout(()=>{if(!this.appCheck){const m=this.T.getImmediate({optional:!0});m?h(m):Kt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Hn("string"==typeof r.token),this.A=r.token,new Pr(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ea(s){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(s);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(r);else for(let a=0;a<s;a++)r[a]=Math.floor(256*Math.random());return r}class ms{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let a="";for(;a.length<20;){const h=Ea(40);for(let m=0;m<h.length;++m)a.length<20&&h[m]<r&&(a+=e.charAt(h[m]%e.length))}return a}}function yr(s,e){return s<e?-1:s>e?1:0}function ko(s,e,r){return s.length===e.length&&s.every((a,h)=>r(a,e[h]))}function fo(s){return s+"\0"}class Mi{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Lt(bt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Lt(bt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Lt(bt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Lt(bt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Mi.fromMillis(Date.now())}static fromDate(e){return Mi.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),a=Math.floor(1e6*(e-1e3*r));return new Mi(r,a)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?yr(this.nanoseconds,e.nanoseconds):yr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class dr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new dr(e)}static min(){return new dr(new Mi(0,0))}static max(){return new dr(new Mi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ba{constructor(e,r,a){void 0===r?r=0:r>e.length&&Fn(),void 0===a?a=e.length-r:a>e.length-r&&Fn(),this.segments=e,this.offset=r,this.len=a}get length(){return this.len}isEqual(e){return 0===ba.comparator(this,e)}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof ba?e.forEach(a=>{r.push(a)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,a=this.limit();r<a;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const a=Math.min(e.length,r.length);for(let h=0;h<a;h++){const m=e.get(h),I=r.get(h);if(m<I)return-1;if(m>I)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class zr extends ba{construct(e,r,a){return new zr(e,r,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const r=[];for(const a of e){if(a.indexOf("//")>=0)throw new Lt(bt.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);r.push(...a.split("/").filter(h=>h.length>0))}return new zr(r)}static emptyPath(){return new zr([])}}const Zc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ui extends ba{construct(e,r,a){return new ui(e,r,a)}static isValidIdentifier(e){return Zc.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ui.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ui(["__name__"])}static fromServerFormat(e){const r=[];let a="",h=0;const m=()=>{if(0===a.length)throw new Lt(bt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(a),a=""};let I=!1;for(;h<e.length;){const O=e[h];if("\\"===O){if(h+1===e.length)throw new Lt(bt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const X=e[h+1];if("\\"!==X&&"."!==X&&"`"!==X)throw new Lt(bt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=X,h+=2}else"`"===O?(I=!I,h++):"."!==O||I?(a+=O,h++):(m(),h++)}if(m(),I)throw new Lt(bt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ui(r)}static emptyPath(){return new ui([])}}class xn{constructor(e){this.path=e}static fromPath(e){return new xn(zr.fromString(e))}static fromName(e){return new xn(zr.fromString(e).popFirst(5))}static empty(){return new xn(zr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===zr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,r){return zr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xn(new zr(e.slice()))}}class Ia{constructor(e,r,a,h){this.indexId=e,this.collectionGroup=r,this.fields=a,this.indexState=h}}function ca(s){return s.fields.find(e=>2===e.kind)}function $s(s){return s.fields.filter(e=>2!==e.kind)}Ia.UNKNOWN_ID=-1;class Or{constructor(e,r){this.fieldPath=e,this.kind=r}}class Ko{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Ko(0,x.min())}}function Qa(s,e){const r=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,h=dr.fromTimestamp(1e9===a?new Mi(r+1,0):new Mi(r,a));return new x(h,xn.empty(),e)}function V(s){return new x(s.readTime,s.key,-1)}class x{constructor(e,r,a){this.readTime=e,this.documentKey=r,this.largestBatchId=a}static min(){return new x(dr.min(),xn.empty(),-1)}static max(){return new x(dr.max(),xn.empty(),-1)}}function S(s,e){let r=s.readTime.compareTo(e.readTime);return 0!==r?r:(r=xn.comparator(s.documentKey,e.documentKey),0!==r?r:yr(s.largestBatchId,e.largestBatchId))}const j="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class J{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ve(s){return qe.apply(this,arguments)}function qe(){return qe=(0,y.Z)(function*(s){if(s.code!==bt.FAILED_PRECONDITION||s.message!==j)throw s;Kt("LocalStore","Unexpectedly lost primary lease")}),qe.apply(this,arguments)}class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Fn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new ge((a,h)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(a,h)},this.catchCallback=m=>{this.wrapFailure(r,m).next(a,h)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof ge?r:ge.resolve(r)}catch(r){return ge.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):ge.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):ge.reject(r)}static resolve(e){return new ge((r,a)=>{r(e)})}static reject(e){return new ge((r,a)=>{a(e)})}static waitFor(e){return new ge((r,a)=>{let h=0,m=0,I=!1;e.forEach(O=>{++h,O.next(()=>{++m,I&&m===h&&r()},X=>a(X))}),I=!0,m===h&&r()})}static or(e){let r=ge.resolve(!1);for(const a of e)r=r.next(h=>h?ge.resolve(h):a());return r}static forEach(e,r){const a=[];return e.forEach((h,m)=>{a.push(r.call(this,h,m))}),this.waitFor(a)}static mapArray(e,r){return new ge((a,h)=>{const m=e.length,I=new Array(m);let O=0;for(let X=0;X<m;X++){const ie=X;r(e[ie]).next(Oe=>{I[ie]=Oe,++O,O===m&&a(I)},Oe=>h(Oe))}})}static doWhile(e,r){return new ge((a,h)=>{const m=()=>{!0===e()?r().next(()=>{m()},h):a()};m()})}}class qt{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.P=new fi,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{r.error?this.P.reject(new tr(e,r.error)):this.P.resolve()},this.transaction.onerror=a=>{const h=ys(a.target.error);this.P.reject(new tr(e,h))}}static open(e,r,a,h){try{return new qt(r,e.transaction(h,a))}catch(m){throw new tr(r,m)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Kt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const r=this.transaction.objectStore(e);return new Dr(r)}}class Rn{constructor(e,r,a){this.name=e,this.version=r,this.S=a,12.2===Rn.D((0,oe.z$)())&&lr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Kt("SimpleDb","Removing database:",e),ns(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,oe.hl)())return!1;if(Rn.N())return!0;const e=(0,oe.z$)(),r=Rn.D(e),a=0<r&&r<10,h=Rn.k(e),m=0<h&&h<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||a||m)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,r){return e.store(r)}static D(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(a)}static k(e){const r=e.match(/Android ([\d.]+)/i),a=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(a)}F(e){var r=this;return(0,y.Z)(function*(){return r.db||(Kt("SimpleDb","Opening database:",r.name),r.db=yield new Promise((a,h)=>{const m=indexedDB.open(r.name,r.version);m.onsuccess=I=>{a(I.target.result)},m.onblocked=()=>{h(new tr(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},m.onerror=I=>{const O=I.target.error;h("VersionError"===O.name?new Lt(bt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===O.name?new Lt(bt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+O):new tr(e,O))},m.onupgradeneeded=I=>{Kt("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',I.oldVersion),r.S.$(I.target.result,m.transaction,I.oldVersion,r.version).next(()=>{Kt("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.B&&(r.db.onversionchange=a=>r.B(a)),r.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=r=>e(r))}runTransaction(e,r,a,h){var m=this;return(0,y.Z)(function*(){const I="readonly"===r;let O=0;for(;;){++O;try{m.db=yield m.F(e);const X=qt.open(m.db,e,I?"readonly":"readwrite",a),ie=h(X).next(Oe=>(X.V(),Oe)).catch(Oe=>(X.abort(Oe),ge.reject(Oe))).toPromise();return ie.catch(()=>{}),yield X.v,ie}catch(X){const ie=X,Oe="FirebaseError"!==ie.name&&O<3;if(Kt("SimpleDb","Transaction failed with error:",ie.message,"Retrying:",Oe),m.close(),!Oe)return Promise.reject(ie)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class jr{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return ns(this.U.delete())}}class tr extends Lt{constructor(e,r){super(bt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Nr(s){return"IndexedDbTransactionError"===s.name}class Dr{constructor(e){this.store=e}put(e,r){let a;return void 0!==r?(Kt("SimpleDb","PUT",this.store.name,e,r),a=this.store.put(r,e)):(Kt("SimpleDb","PUT",this.store.name,"<auto-key>",e),a=this.store.put(e)),ns(a)}add(e){return Kt("SimpleDb","ADD",this.store.name,e,e),ns(this.store.add(e))}get(e){return ns(this.store.get(e)).next(r=>(void 0===r&&(r=null),Kt("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return Kt("SimpleDb","DELETE",this.store.name,e),ns(this.store.delete(e))}count(){return Kt("SimpleDb","COUNT",this.store.name),ns(this.store.count())}W(e,r){const a=this.options(e,r);if(a.index||"function"!=typeof this.store.getAll){const h=this.cursor(a),m=[];return this.H(h,(I,O)=>{m.push(O)}).next(()=>m)}{const h=this.store.getAll(a.range);return new ge((m,I)=>{h.onerror=O=>{I(O.target.error)},h.onsuccess=O=>{m(O.target.result)}})}}J(e,r){const a=this.store.getAll(e,null===r?void 0:r);return new ge((h,m)=>{a.onerror=I=>{m(I.target.error)},a.onsuccess=I=>{h(I.target.result)}})}Y(e,r){Kt("SimpleDb","DELETE ALL",this.store.name);const a=this.options(e,r);a.X=!1;const h=this.cursor(a);return this.H(h,(m,I,O)=>O.delete())}Z(e,r){let a;r?a=e:(a={},r=e);const h=this.cursor(a);return this.H(h,r)}tt(e){const r=this.cursor({});return new ge((a,h)=>{r.onerror=m=>{const I=ys(m.target.error);h(I)},r.onsuccess=m=>{const I=m.target.result;I?e(I.primaryKey,I.value).next(O=>{O?I.continue():a()}):a()}})}H(e,r){const a=[];return new ge((h,m)=>{e.onerror=I=>{m(I.target.error)},e.onsuccess=I=>{const O=I.target.result;if(!O)return void h();const X=new jr(O),ie=r(O.primaryKey,O.value,X);if(ie instanceof ge){const Oe=ie.catch(st=>(X.done(),ge.reject(st)));a.push(Oe)}X.isDone?h():null===X.G?O.continue():O.continue(X.G)}}).next(()=>ge.waitFor(a))}options(e,r){let a;return void 0!==e&&("string"==typeof e?a=e:r=e),{index:a,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const a=this.store.index(e.index);return e.X?a.openKeyCursor(e.range,r):a.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function ns(s){return new ge((e,r)=>{s.onsuccess=a=>{e(a.target.result)},s.onerror=a=>{const h=ys(a.target.error);r(h)}})}let no=!1;function ys(s){const e=Rn.D((0,oe.z$)());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(r)>=0){const a=new Lt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return no||(no=!0,setTimeout(()=>{throw a},0)),a}}return s}class Io{constructor(e,r){this.asyncQueue=e,this.et=r,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var r=this;Kt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,y.Z)(function*(){r.task=null;try{Kt("IndexBackiller",`Documents written: ${yield r.et.st()}`)}catch(a){Nr(a)?Kt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",a):yield ve(a)}yield r.nt(6e4)}))}}class oi{constructor(e,r){this.localStore=e,this.persistence=r}st(e=50){var r=this;return(0,y.Z)(function*(){return r.persistence.runTransaction("Backfill Indexes","readwrite-primary",a=>r.it(a,e))})()}it(e,r){const a=new Set;let h=r,m=!0;return ge.doWhile(()=>!0===m&&h>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(I=>{if(null!==I&&!a.has(I))return Kt("IndexBackiller",`Processing collection: ${I}`),this.rt(e,I,h).next(O=>{h-=O,a.add(I)});m=!1})).next(()=>r-h)}rt(e,r,a){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(h=>this.localStore.localDocuments.getNextDocuments(e,r,h,a).next(m=>{const I=m.changes;return this.localStore.indexManager.updateIndexEntries(e,I).next(()=>this.ot(h,m)).next(O=>(Kt("IndexBackiller",`Updating offset: ${O}`),this.localStore.indexManager.updateCollectionGroup(e,r,O))).next(()=>I.size)}))}ot(e,r){let a=e;return r.changes.forEach((h,m)=>{const I=V(m);S(I,a)>0&&(a=I)}),new x(a.readTime,a.documentKey,Math.max(r.batchId,e.largestBatchId))}}class rs{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=a=>this.ut(a),this.ct=a=>r.writeSequenceNumber(a))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function hl(s){let e=0;for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&e++;return e}function Co(s,e){for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&e(r,s[r])}function Ui(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}rs.at=-1;class ji{constructor(e,r){this.comparator=e,this.root=r||cs.EMPTY}insert(e,r){return new ji(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,cs.BLACK,null,null))}remove(e){return new ji(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cs.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(0===a)return r.value;a<0?r=r.left:a>0&&(r=r.right)}return null}indexOf(e){let r=0,a=this.root;for(;!a.isEmpty();){const h=this.comparator(e,a.key);if(0===h)return r+a.left.size;h<0?a=a.left:(r+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,a)=>(e(r,a),!1))}toString(){const e=[];return this.inorderTraversal((r,a)=>(e.push(`${r}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wo(this.root,e,this.comparator,!1)}getReverseIterator(){return new wo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wo(this.root,e,this.comparator,!0)}}class wo{constructor(e,r,a,h){this.isReverse=h,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=r?a(e.key,r):1,r&&h&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(0===m){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cs{constructor(e,r,a,h,m){this.key=e,this.value=r,this.color=null!=a?a:cs.RED,this.left=null!=h?h:cs.EMPTY,this.right=null!=m?m:cs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,a,h,m){return new cs(null!=e?e:this.key,null!=r?r:this.value,null!=a?a:this.color,null!=h?h:this.left,null!=m?m:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,a){let h=this;const m=a(e,h.key);return h=m<0?h.copy(null,null,null,h.left.insert(e,r,a),null):0===m?h.copy(null,r,null,null,null):h.copy(null,null,null,null,h.right.insert(e,r,a)),h.fixUp()}removeMin(){if(this.left.isEmpty())return cs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let a,h=this;if(r(e,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(e,r),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),0===r(e,h.key)){if(h.right.isEmpty())return cs.EMPTY;a=h.right.min(),h=h.copy(a.key,a.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(e,r))}return h.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Fn();const e=this.left.check();if(e!==this.right.check())throw Fn();return e+(this.isRed()?0:1)}}cs.EMPTY=null,cs.RED=!0,cs.BLACK=!1,cs.EMPTY=new class{constructor(){this.size=0}get key(){throw Fn()}get value(){throw Fn()}get color(){throw Fn()}get left(){throw Fn()}get right(){throw Fn()}copy(s,e,r,a,h){return this}insert(s,e,r){return new cs(s,e)}remove(s,e){return this}isEmpty(){return!0}inorderTraversal(s){return!1}reverseTraversal(s){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class zn{constructor(e){this.comparator=e,this.data=new ji(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,a)=>(e(r),!1))}forEachInRange(e,r){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const h=a.getNext();if(this.comparator(h.key,e[1])>=0)return;r(h.key)}}forEachWhile(e,r){let a;for(a=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new fd(this.data.getIterator())}getIteratorFrom(e){return new fd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(a=>{r=r.add(a)}),r}isEqual(e){if(!(e instanceof zn)||this.size!==e.size)return!1;const r=this.data.getIterator(),a=e.data.getIterator();for(;r.hasNext();){const h=r.getNext().key,m=a.getNext().key;if(0!==this.comparator(h,m))return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new zn(this.comparator);return r.data=e,r}}class fd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function fl(s){return s.hasNext()?s.getNext():void 0}class po{constructor(e){this.fields=e,e.sort(ui.comparator)}static empty(){return new po([])}unionWith(e){let r=new zn(ui.comparator);for(const a of this.fields)r=r.add(a);for(const a of e)r=r.add(a);return new po(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return ko(this.fields,e.fields,(r,a)=>r.isEqual(a))}}function is(){return"undefined"!=typeof atob}class Cs{constructor(e){this.binaryString=e}static fromBase64String(e){const r=atob(e);return new Cs(r)}static fromUint8Array(e){const r=function(a){let h="";for(let m=0;m<a.length;++m)h+=String.fromCharCode(a[m]);return h}(e);return new Cs(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let a=0;a<e.length;a++)r[a]=e.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return yr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cs.EMPTY_BYTE_STRING=new Cs("");const hh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zo(s){if(Hn(!!s),"string"==typeof s){let e=0;const r=hh.exec(s);if(Hn(!!r),r[1]){let h=r[1];h=(h+"000000000").substr(0,9),e=Number(h)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:yi(s.seconds),nanos:yi(s.nanos)}}function yi(s){return"number"==typeof s?s:"string"==typeof s?Number(s):0}function Va(s){return"string"==typeof s?Cs.fromBase64String(s):Cs.fromUint8Array(s)}function Zi(s){var e,r;return"server_timestamp"===(null===(r=((null===(e=null==s?void 0:s.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function pl(s){const e=s.mapValue.fields.__previous_value__;return Zi(e)?pl(e):e}function Xa(s){const e=Zo(s.mapValue.fields.__local_write_time__.timestampValue);return new Mi(e.seconds,e.nanos)}class Bl{constructor(e,r,a,h,m,I,O,X){this.databaseId=e,this.appId=r,this.persistenceKey=a,this.host=h,this.ssl=m,this.forceLongPolling=I,this.autoDetectLongPolling=O,this.useFetchStreams=X}}class ua{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new ua("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ua&&e.projectId===this.projectId&&e.database===this.database}}function ks(s){return null==s}function _s(s){return 0===s&&1/s==-1/0}function Fo(s){return"number"==typeof s&&Number.isInteger(s)&&!_s(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const ws={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Lo={nullValue:"NULL_VALUE"};function Ba(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Zi(s)?4:$a(s)?9007199254740991:10:Fn()}function Vo(s,e){if(s===e)return!0;const r=Ba(s);if(r!==Ba(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Xa(s).isEqual(Xa(e));case 3:return function(a,h){if("string"==typeof a.timestampValue&&"string"==typeof h.timestampValue&&a.timestampValue.length===h.timestampValue.length)return a.timestampValue===h.timestampValue;const m=Zo(a.timestampValue),I=Zo(h.timestampValue);return m.seconds===I.seconds&&m.nanos===I.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return h=e,Va(s.bytesValue).isEqual(Va(h.bytesValue));case 7:return s.referenceValue===e.referenceValue;case 8:return function(a,h){return yi(a.geoPointValue.latitude)===yi(h.geoPointValue.latitude)&&yi(a.geoPointValue.longitude)===yi(h.geoPointValue.longitude)}(s,e);case 2:return function(a,h){if("integerValue"in a&&"integerValue"in h)return yi(a.integerValue)===yi(h.integerValue);if("doubleValue"in a&&"doubleValue"in h){const m=yi(a.doubleValue),I=yi(h.doubleValue);return m===I?_s(m)===_s(I):isNaN(m)&&isNaN(I)}return!1}(s,e);case 9:return ko(s.arrayValue.values||[],e.arrayValue.values||[],Vo);case 10:return function(a,h){const m=a.mapValue.fields||{},I=h.mapValue.fields||{};if(hl(m)!==hl(I))return!1;for(const O in m)if(m.hasOwnProperty(O)&&(void 0===I[O]||!Vo(m[O],I[O])))return!1;return!0}(s,e);default:return Fn()}var h}function bc(s,e){return void 0!==(s.values||[]).find(r=>Vo(r,e))}function da(s,e){if(s===e)return 0;const r=Ba(s),a=Ba(e);if(r!==a)return yr(r,a);switch(r){case 0:case 9007199254740991:return 0;case 1:return yr(s.booleanValue,e.booleanValue);case 2:return function(h,m){const I=yi(h.integerValue||h.doubleValue),O=yi(m.integerValue||m.doubleValue);return I<O?-1:I>O?1:I===O?0:isNaN(I)?isNaN(O)?0:-1:1}(s,e);case 3:return pd(s.timestampValue,e.timestampValue);case 4:return pd(Xa(s),Xa(e));case 5:return yr(s.stringValue,e.stringValue);case 6:return function(h,m){const I=Va(h),O=Va(m);return I.compareTo(O)}(s.bytesValue,e.bytesValue);case 7:return function(h,m){const I=h.split("/"),O=m.split("/");for(let X=0;X<I.length&&X<O.length;X++){const ie=yr(I[X],O[X]);if(0!==ie)return ie}return yr(I.length,O.length)}(s.referenceValue,e.referenceValue);case 8:return function(h,m){const I=yr(yi(h.latitude),yi(m.latitude));return 0!==I?I:yr(yi(h.longitude),yi(m.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return function(h,m){const I=h.values||[],O=m.values||[];for(let X=0;X<I.length&&X<O.length;++X){const ie=da(I[X],O[X]);if(ie)return ie}return yr(I.length,O.length)}(s.arrayValue,e.arrayValue);case 10:return function(h,m){if(h===ws.mapValue&&m===ws.mapValue)return 0;if(h===ws.mapValue)return 1;if(m===ws.mapValue)return-1;const I=h.fields||{},O=Object.keys(I),X=m.fields||{},ie=Object.keys(X);O.sort(),ie.sort();for(let Oe=0;Oe<O.length&&Oe<ie.length;++Oe){const st=yr(O[Oe],ie[Oe]);if(0!==st)return st;const kt=da(I[O[Oe]],X[ie[Oe]]);if(0!==kt)return kt}return yr(O.length,ie.length)}(s.mapValue,e.mapValue);default:throw Fn()}}function pd(s,e){if("string"==typeof s&&"string"==typeof e&&s.length===e.length)return yr(s,e);const r=Zo(s),a=Zo(e),h=yr(r.seconds,a.seconds);return 0!==h?h:yr(r.nanos,a.nanos)}function Qo(s){return ro(s)}function ro(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(a){const h=Zo(a);return`time(${h.seconds},${h.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?Va(s.bytesValue).toBase64():"referenceValue"in s?xn.fromName(s.referenceValue).toString():"geoPointValue"in s?`geo(${(e=s.geoPointValue).latitude},${e.longitude})`:"arrayValue"in s?function(a){let h="[",m=!0;for(const I of a.values||[])m?m=!1:h+=",",h+=ro(I);return h+"]"}(s.arrayValue):"mapValue"in s?function(a){const h=Object.keys(a.fields||{}).sort();let m="{",I=!0;for(const O of h)I?I=!1:m+=",",m+=`${O}:${ro(a.fields[O])}`;return m+"}"}(s.mapValue):Fn();var e}function Bo(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Ja(s){return!!s&&"integerValue"in s}function To(s){return!!s&&"arrayValue"in s}function Qc(s){return!!s&&"nullValue"in s}function $o(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Ic(s){return!!s&&"mapValue"in s}function gl(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&"object"==typeof s.timestampValue)return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return Co(s.mapValue.fields,(r,a)=>e.mapValue.fields[r]=gl(a)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(s.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=gl(s.arrayValue.values[r]);return e}return Object.assign({},s)}function $a(s){return"__max__"===(((s.mapValue||{}).fields||{}).__type__||{}).stringValue}function Xc(s){return"nullValue"in s?Lo:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?Bo(ua.empty(),xn.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?{mapValue:{}}:Fn()}function el(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?Bo(ua.empty(),xn.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?{mapValue:{}}:"mapValue"in s?ws:Fn()}function ha(s,e){const r=da(s.value,e.value);return 0!==r?r:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function B(s,e){const r=da(s.value,e.value);return 0!==r?r:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}class Z{constructor(e){this.value=e}static empty(){return new Z({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let a=0;a<e.length-1;++a)if(r=(r.mapValue.fields||{})[e.get(a)],!Ic(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=gl(r)}setAll(e){let r=ui.emptyPath(),a={},h=[];e.forEach((I,O)=>{if(!r.isImmediateParentOf(O)){const X=this.getFieldsMap(r);this.applyChanges(X,a,h),a={},h=[],r=O.popLast()}I?a[O.lastSegment()]=gl(I):h.push(O.lastSegment())});const m=this.getFieldsMap(r);this.applyChanges(m,a,h)}delete(e){const r=this.field(e.popLast());Ic(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Vo(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let a=0;a<e.length;++a){let h=r.mapValue.fields[e.get(a)];Ic(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},r.mapValue.fields[e.get(a)]=h),r=h}return r.mapValue.fields}applyChanges(e,r,a){Co(r,(h,m)=>e[h]=m);for(const h of a)delete e[h]}clone(){return new Z(gl(this.value))}}function me(s){const e=[];return Co(s.fields,(r,a)=>{const h=new ui([r]);if(Ic(a)){const m=me(a.mapValue).fields;if(0===m.length)e.push(h);else for(const I of m)e.push(h.child(I))}else e.push(h)}),new po(e)}class ze{constructor(e,r,a,h,m,I){this.key=e,this.documentType=r,this.version=a,this.readTime=h,this.data=m,this.documentState=I}static newInvalidDocument(e){return new ze(e,0,dr.min(),dr.min(),Z.empty(),0)}static newFoundDocument(e,r,a){return new ze(e,1,r,dr.min(),a,0)}static newNoDocument(e,r){return new ze(e,2,r,dr.min(),Z.empty(),0)}static newUnknownDocument(e,r){return new ze(e,3,r,dr.min(),Z.empty(),2)}convertToFoundDocument(e,r){return this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Z.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Z.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ze&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ze(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Et{constructor(e,r=null,a=[],h=[],m=null,I=null,O=null){this.path=e,this.collectionGroup=r,this.orderBy=a,this.filters=h,this.limit=m,this.startAt=I,this.endAt=O,this.ht=null}}function Vt(s,e=null,r=[],a=[],h=null,m=null,I=null){return new Et(s,e,r,a,h,m,I)}function cn(s){const e=hn(s);if(null===e.ht){let r=e.path.canonicalString();null!==e.collectionGroup&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(a=>{return(h=a).field.canonicalString()+h.op.toString()+Qo(h.value);var h}).join(","),r+="|ob:",r+=e.orderBy.map(a=>{return(h=a).field.canonicalString()+h.dir;var h}).join(","),ks(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(a=>Qo(a)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(a=>Qo(a)).join(",")),e.ht=r}return e.ht}function Yn(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let h=0;h<s.orderBy.length;h++)if(!Ha(s.orderBy[h],e.orderBy[h]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let h=0;h<s.filters.length;h++)if((r=s.filters[h]).op!==(a=e.filters[h]).op||!r.field.isEqual(a.field)||!Vo(r.value,a.value))return!1;var r,a;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Do(s.startAt,e.startAt)&&Do(s.endAt,e.endAt)}function kr(s){return xn.isDocumentKey(s.path)&&null===s.collectionGroup&&0===s.filters.length}function Rr(s,e){return s.filters.filter(r=>r instanceof pi&&r.field.isEqual(e))}function fr(s,e,r){let a=Lo,h=!0;for(const m of Rr(s,e)){let I=Lo,O=!0;switch(m.op){case"<":case"<=":I=Xc(m.value);break;case"==":case"in":case">=":I=m.value;break;case">":I=m.value,O=!1;break;case"!=":case"not-in":I=Lo}ha({value:a,inclusive:h},{value:I,inclusive:O})<0&&(a=I,h=O)}if(null!==r)for(let m=0;m<s.orderBy.length;++m)if(s.orderBy[m].field.isEqual(e)){const I=r.position[m];ha({value:a,inclusive:h},{value:I,inclusive:r.inclusive})<0&&(a=I,h=r.inclusive);break}return{value:a,inclusive:h}}function Li(s,e,r){let a=ws,h=!0;for(const m of Rr(s,e)){let I=ws,O=!0;switch(m.op){case">=":case">":I=el(m.value),O=!1;break;case"==":case"in":case"<=":I=m.value;break;case"<":I=m.value,O=!1;break;case"!=":case"not-in":I=ws}B({value:a,inclusive:h},{value:I,inclusive:O})>0&&(a=I,h=O)}if(null!==r)for(let m=0;m<s.orderBy.length;++m)if(s.orderBy[m].field.isEqual(e)){const I=r.position[m];B({value:a,inclusive:h},{value:I,inclusive:r.inclusive})>0&&(a=I,h=r.inclusive);break}return{value:a,inclusive:h}}class pi extends class{}{constructor(e,r,a){super(),this.field=e,this.op=r,this.value=a}static create(e,r,a){return e.isKeyField()?"in"===r||"not-in"===r?this.lt(e,r,a):new Ei(e,r,a):"array-contains"===r?new ml(e,a):"in"===r?new Ua(e,a):"not-in"===r?new Ca(e,a):"array-contains-any"===r?new ja(e,a):new pi(e,r,a)}static lt(e,r,a){return"in"===r?new Uo(e,a):new Xo(e,a)}matches(e){const r=e.data.field(this.field);return"!="===this.op?null!==r&&this.ft(da(r,this.value)):null!==r&&Ba(this.value)===Ba(r)&&this.ft(da(r,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Fn()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Ei extends pi{constructor(e,r,a){super(e,r,a),this.key=xn.fromName(a.referenceValue)}matches(e){const r=xn.comparator(e.key,this.key);return this.ft(r)}}class Uo extends pi{constructor(e,r){super(e,"in",r),this.keys=Jo(0,r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class Xo extends pi{constructor(e,r){super(e,"not-in",r),this.keys=Jo(0,r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function Jo(s,e){var r;return((null===(r=e.arrayValue)||void 0===r?void 0:r.values)||[]).map(a=>xn.fromName(a.referenceValue))}class ml extends pi{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return To(r)&&bc(r.arrayValue,this.value)}}class Ua extends pi{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return null!==r&&bc(this.value.arrayValue,r)}}class Ca extends pi{constructor(e,r){super(e,"not-in",r)}matches(e){if(bc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return null!==r&&!bc(this.value.arrayValue,r)}}class ja extends pi{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!To(r)||!r.arrayValue.values)&&r.arrayValue.values.some(a=>bc(this.value.arrayValue,a))}}class jo{constructor(e,r){this.position=e,this.inclusive=r}}class Ho{constructor(e,r="asc"){this.field=e,this.dir=r}}function Ha(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}function yl(s,e,r){let a=0;for(let h=0;h<s.position.length;h++){const m=e[h],I=s.position[h];if(a=m.field.isKeyField()?xn.comparator(xn.fromName(I.referenceValue),r.key):da(I,r.data.field(m.field)),"desc"===m.dir&&(a*=-1),0!==a)break}return a}function Do(s,e){if(null===s)return null===e;if(null===e||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let r=0;r<s.position.length;r++)if(!Vo(s.position[r],e.position[r]))return!1;return!0}class Wa{constructor(e,r=null,a=[],h=[],m=null,I="F",O=null,X=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=a,this.filters=h,this.limit=m,this.limitType=I,this.startAt=O,this.endAt=X,this._t=null,this.wt=null}}function gd(s,e,r,a,h,m,I,O){return new Wa(s,e,r,a,h,m,I,O)}function gi(s){return new Wa(s)}function Wo(s){return 0===s.filters.length&&null===s.limit&&null==s.startAt&&null==s.endAt&&(0===s.explicitOrderBy.length||1===s.explicitOrderBy.length&&s.explicitOrderBy[0].field.isKeyField())}function $l(s){return s.explicitOrderBy.length>0?s.explicitOrderBy[0].field:null}function ic(s){for(const e of s.filters)if(e.dt())return e.field;return null}function xu(s){return null!==s.collectionGroup}function fa(s){const e=hn(s);if(null===e._t){e._t=[];const r=ic(e),a=$l(e);if(null!==r&&null===a)r.isKeyField()||e._t.push(new Ho(r)),e._t.push(new Ho(ui.keyField(),"asc"));else{let h=!1;for(const m of e.explicitOrderBy)e._t.push(m),m.field.isKeyField()&&(h=!0);if(!h){const m=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Ho(ui.keyField(),m))}}}return e._t}function Wi(s){const e=hn(s);if(!e.wt)if("F"===e.limitType)e.wt=Vt(e.path,e.collectionGroup,fa(e),e.filters,e.limit,e.startAt,e.endAt);else{const r=[];for(const m of fa(e))r.push(new Ho(m.field,"desc"===m.dir?"asc":"desc"));const a=e.endAt?new jo(e.endAt.position,e.endAt.inclusive):null,h=e.startAt?new jo(e.startAt.position,e.startAt.inclusive):null;e.wt=Vt(e.path,e.collectionGroup,r,e.filters,e.limit,a,h)}return e.wt}function Jc(s,e,r){return new Wa(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,r,s.startAt,s.endAt)}function pa(s,e){return Yn(Wi(s),Wi(e))&&s.limitType===e.limitType}function sc(s){return`${cn(Wi(s))}|lt:${s.limitType}`}function tl(s){return`Query(target=${function(s){let e=s.path.canonicalString();return null!==s.collectionGroup&&(e+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(e+=`, filters: [${s.filters.map(r=>{return`${(a=r).field.canonicalString()} ${a.op} ${Qo(a.value)}`;var a}).join(", ")}]`),ks(s.limit)||(e+=", limit: "+s.limit),s.orderBy.length>0&&(e+=`, orderBy: [${s.orderBy.map(r=>{return`${(a=r).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),s.startAt&&(e+=", startAt: ",e+=s.startAt.inclusive?"b:":"a:",e+=s.startAt.position.map(r=>Qo(r)).join(",")),s.endAt&&(e+=", endAt: ",e+=s.endAt.inclusive?"a:":"b:",e+=s.endAt.position.map(r=>Qo(r)).join(",")),`Target(${e})`}(Wi(s))}; limitType=${s.limitType})`}function Ru(s,e){return e.isFoundDocument()&&function(r,a){const h=a.key.path;return null!==r.collectionGroup?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(h):xn.isDocumentKey(r.path)?r.path.isEqual(h):r.path.isImmediateParentOf(h)}(s,e)&&function(r,a){for(const h of r.explicitOrderBy)if(!h.field.isKeyField()&&null===a.data.field(h.field))return!1;return!0}(s,e)&&function(r,a){for(const h of r.filters)if(!h.matches(a))return!1;return!0}(s,e)&&(a=e,!((r=s).startAt&&!function(h,m,I){const O=yl(h,m,I);return h.inclusive?O<=0:O<0}(r.startAt,fa(r),a)||r.endAt&&!function(h,m,I){const O=yl(h,m,I);return h.inclusive?O>=0:O>0}(r.endAt,fa(r),a)));var r,a}function oc(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function fh(s){return(e,r)=>{let a=!1;for(const h of fa(s)){const m=ph(h,e,r);if(0!==m)return m;a=a||h.field.isKeyField()}return 0}}function ph(s,e,r){const a=s.field.isKeyField()?xn.comparator(e.key,r.key):function(h,m,I){const O=m.data.field(h),X=I.data.field(h);return null!==O&&null!==X?da(O,X):Fn()}(s.field,e,r);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return Fn()}}function Cc(s,e){if(s.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_s(e)?"-0":e}}function eu(s){return{integerValue:""+s}}function ac(s,e){return Fo(e)?eu(e):Cc(s,e)}class tu{constructor(){this._=void 0}}function md(s,e,r){return s instanceof Ul?function(a,h){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return h&&(m.fields.__previous_value__=h),{mapValue:m}}(r,e):s instanceof nl?yd(s,e):s instanceof jl?_l(s,e):function(a,h){const m=wc(a,h),I=Hl(m)+Hl(a.yt);return Ja(m)&&Ja(a.yt)?eu(I):Cc(a.It,I)}(s,e)}function Mf(s,e,r){return s instanceof nl?yd(s,e):s instanceof jl?_l(s,e):r}function wc(s,e){return s instanceof Tc?Ja(r=e)||(a=r)&&"doubleValue"in a?e:{integerValue:0}:null;var a,r}class Ul extends tu{}class nl extends tu{constructor(e){super(),this.elements=e}}function yd(s,e){const r=Mu(e);for(const a of s.elements)r.some(h=>Vo(h,a))||r.push(a);return{arrayValue:{values:r}}}class jl extends tu{constructor(e){super(),this.elements=e}}function _l(s,e){let r=Mu(e);for(const a of s.elements)r=r.filter(h=>!Vo(h,a));return{arrayValue:{values:r}}}class Tc extends tu{constructor(e,r){super(),this.It=e,this.yt=r}}function Hl(s){return yi(s.integerValue||s.doubleValue)}function Mu(s){return To(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class Dc{constructor(e,r){this.field=e,this.transform=r}}class vl{constructor(e,r){this.version=e,this.transformResults=r}}class Si{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Si}static exists(e){return new Si(void 0,e)}static updateTime(e){return new Si(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sc(s,e){return void 0!==s.updateTime?e.isFoundDocument()&&e.version.isEqual(s.updateTime):void 0===s.exists||s.exists===e.isFoundDocument()}class nu{}function gh(s,e){if(!s.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return s.isNoDocument()?new Wl(s.key,Si.none()):new xc(s.key,s.data,Si.none());{const r=s.data,a=Z.empty();let h=new zn(ui.comparator);for(let m of e.fields)if(!h.has(m)){let I=r.field(m);null===I&&m.length>1&&(m=m.popLast(),I=r.field(m)),null===I?a.delete(m):a.set(m,I),h=h.add(m)}return new El(s.key,a,new po(h.toArray()),Si.none())}}function _d(s,e,r){s instanceof xc?function(a,h,m){const I=a.value.clone(),O=Id(a.fieldTransforms,h,m.transformResults);I.setAll(O),h.convertToFoundDocument(m.version,I).setHasCommittedMutations()}(s,e,r):s instanceof El?function(a,h,m){if(!Sc(a.precondition,h))return void h.convertToUnknownDocument(m.version);const I=Id(a.fieldTransforms,h,m.transformResults),O=h.data;O.setAll(bd(a)),O.setAll(I),h.convertToFoundDocument(m.version,O).setHasCommittedMutations()}(s,e,r):e.convertToNoDocument(r.version).setHasCommittedMutations()}function Ac(s,e,r,a){return s instanceof xc?function(h,m,I,O){if(!Sc(h.precondition,m))return I;const X=h.value.clone(),ie=Ou(h.fieldTransforms,O,m);return X.setAll(ie),m.convertToFoundDocument(m.version,X).setHasLocalMutations(),null}(s,e,r,a):s instanceof El?function(h,m,I,O){if(!Sc(h.precondition,m))return I;const X=Ou(h.fieldTransforms,O,m),ie=m.data;return ie.setAll(bd(h)),ie.setAll(X),m.convertToFoundDocument(m.version,ie).setHasLocalMutations(),null===I?null:I.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(Oe=>Oe.field))}(s,e,r,a):(I=r,Sc(s.precondition,m=e)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):I);var m,I}function vd(s,e){let r=null;for(const a of s.fieldTransforms){const h=e.data.field(a.field),m=wc(a.transform,h||null);null!=m&&(null===r&&(r=Z.empty()),r.set(a.field,m))}return r||null}function Ed(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&(a=e.fieldTransforms,!!(void 0===(r=s.fieldTransforms)&&void 0===a||r&&a&&ko(r,a,(h,m)=>function(s,e){return s.field.isEqual(e.field)&&(a=e.transform,(r=s.transform)instanceof nl&&a instanceof nl||r instanceof jl&&a instanceof jl?ko(r.elements,a.elements,Vo):r instanceof Tc&&a instanceof Tc?Vo(r.yt,a.yt):r instanceof Ul&&a instanceof Ul);var r,a}(h,m))))&&(0===s.type?s.value.isEqual(e.value):1!==s.type||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask));var r,a}class xc extends nu{constructor(e,r,a,h=[]){super(),this.key=e,this.value=r,this.precondition=a,this.fieldTransforms=h,this.type=0}getFieldMask(){return null}}class El extends nu{constructor(e,r,a,h,m=[]){super(),this.key=e,this.data=r,this.fieldMask=a,this.precondition=h,this.fieldTransforms=m,this.type=1}getFieldMask(){return this.fieldMask}}function bd(s){const e=new Map;return s.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const a=s.data.field(r);e.set(r,a)}}),e}function Id(s,e,r){const a=new Map;Hn(s.length===r.length);for(let h=0;h<r.length;h++){const m=s[h],I=m.transform,O=e.data.field(m.field);a.set(m.field,Mf(I,O,r[h]))}return a}function Ou(s,e,r){const a=new Map;for(const h of s){const m=h.transform,I=r.data.field(h.field);a.set(h.field,md(m,I,e))}return a}class Wl extends nu{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Gl extends nu{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Nu{constructor(e){this.count=e}}var Pi,Jr;function Cd(s){switch(s){default:return Fn();case bt.CANCELLED:case bt.UNKNOWN:case bt.DEADLINE_EXCEEDED:case bt.RESOURCE_EXHAUSTED:case bt.INTERNAL:case bt.UNAVAILABLE:case bt.UNAUTHENTICATED:return!1;case bt.INVALID_ARGUMENT:case bt.NOT_FOUND:case bt.ALREADY_EXISTS:case bt.PERMISSION_DENIED:case bt.FAILED_PRECONDITION:case bt.ABORTED:case bt.OUT_OF_RANGE:case bt.UNIMPLEMENTED:case bt.DATA_LOSS:return!0}}function ku(s){if(void 0===s)return lr("GRPC error has no .code"),bt.UNKNOWN;switch(s){case Pi.OK:return bt.OK;case Pi.CANCELLED:return bt.CANCELLED;case Pi.UNKNOWN:return bt.UNKNOWN;case Pi.DEADLINE_EXCEEDED:return bt.DEADLINE_EXCEEDED;case Pi.RESOURCE_EXHAUSTED:return bt.RESOURCE_EXHAUSTED;case Pi.INTERNAL:return bt.INTERNAL;case Pi.UNAVAILABLE:return bt.UNAVAILABLE;case Pi.UNAUTHENTICATED:return bt.UNAUTHENTICATED;case Pi.INVALID_ARGUMENT:return bt.INVALID_ARGUMENT;case Pi.NOT_FOUND:return bt.NOT_FOUND;case Pi.ALREADY_EXISTS:return bt.ALREADY_EXISTS;case Pi.PERMISSION_DENIED:return bt.PERMISSION_DENIED;case Pi.FAILED_PRECONDITION:return bt.FAILED_PRECONDITION;case Pi.ABORTED:return bt.ABORTED;case Pi.OUT_OF_RANGE:return bt.OUT_OF_RANGE;case Pi.UNIMPLEMENTED:return bt.UNIMPLEMENTED;case Pi.DATA_LOSS:return bt.DATA_LOSS;default:return Fn()}}(Jr=Pi||(Pi={}))[Jr.OK=0]="OK",Jr[Jr.CANCELLED=1]="CANCELLED",Jr[Jr.UNKNOWN=2]="UNKNOWN",Jr[Jr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jr[Jr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jr[Jr.NOT_FOUND=5]="NOT_FOUND",Jr[Jr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jr[Jr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jr[Jr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jr[Jr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jr[Jr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jr[Jr.ABORTED=10]="ABORTED",Jr[Jr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jr[Jr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jr[Jr.INTERNAL=13]="INTERNAL",Jr[Jr.UNAVAILABLE=14]="UNAVAILABLE",Jr[Jr.DATA_LOSS=15]="DATA_LOSS";class bl{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),a=this.inner[r];if(void 0!==a)for(const[h,m]of a)if(this.equalsFn(h,e))return m}has(e){return void 0!==this.get(e)}set(e,r){const a=this.mapKeyFn(e),h=this.inner[a];if(void 0===h)return this.inner[a]=[[e,r]],void this.innerSize++;for(let m=0;m<h.length;m++)if(this.equalsFn(h[m][0],e))return void(h[m]=[e,r]);h.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),a=this.inner[r];if(void 0===a)return!1;for(let h=0;h<a.length;h++)if(this.equalsFn(a[h][0],e))return 1===a.length?delete this.inner[r]:a.splice(h,1),this.innerSize--,!0;return!1}forEach(e){Co(this.inner,(r,a)=>{for(const[h,m]of a)e(h,m)})}isEmpty(){return Ui(this.inner)}size(){return this.innerSize}}const mh=new ji(xn.comparator);function ga(){return mh}const yh=new ji(xn.comparator);function zl(...s){let e=yh;for(const r of s)e=e.insert(r.key,r);return e}function ru(s){let e=yh;return s.forEach((r,a)=>e=e.insert(r,a.overlayedDocument)),e}function wa(){return iu()}function _h(){return iu()}function iu(){return new bl(s=>s.toString(),(s,e)=>s.isEqual(e))}const vh=new ji(xn.comparator),wd=new zn(xn.comparator);function Hr(...s){let e=wd;for(const r of s)e=e.add(r);return e}const Eh=new zn(yr);function D(){return Eh}class g{constructor(e,r,a,h,m){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=a,this.documentUpdates=h,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,r,a){const h=new Map;return h.set(e,v.createSynthesizedTargetChangeForCurrentChange(e,r,a)),new g(dr.min(),h,D(),ga(),Hr())}}class v{constructor(e,r,a,h,m){this.resumeToken=e,this.current=r,this.addedDocuments=a,this.modifiedDocuments=h,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,r,a){return new v(a,r,Hr(),Hr(),Hr())}}class R{constructor(e,r,a,h){this.Tt=e,this.removedTargetIds=r,this.key=a,this.Et=h}}class ee{constructor(e,r){this.targetId=e,this.At=r}}class de{constructor(e,r,a=Cs.EMPTY_BYTE_STRING,h=null){this.state=e,this.targetIds=r,this.resumeToken=a,this.cause=h}}class lt{constructor(){this.Rt=0,this.bt=bn(),this.Pt=Cs.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Hr(),r=Hr(),a=Hr();return this.bt.forEach((h,m)=>{switch(m){case 0:e=e.add(h);break;case 2:r=r.add(h);break;case 1:a=a.add(h);break;default:Fn()}}),new v(this.Pt,this.vt,e,r,a)}Nt(){this.Vt=!1,this.bt=bn()}kt(e,r){this.Vt=!0,this.bt=this.bt.insert(e,r)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class zt{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=ga(),this.qt=Dn(),this.Kt=new zn(yr)}Gt(e){for(const r of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(r,e.Et):this.jt(r,e.key,e.Et);for(const r of e.removedTargetIds)this.jt(r,e.key,e.Et)}Wt(e){this.forEachTarget(e,r=>{const a=this.zt(r);switch(e.state){case 0:this.Ht(r)&&a.Ct(e.resumeToken);break;case 1:a.Ft(),a.St||a.Nt(),a.Ct(e.resumeToken);break;case 2:a.Ft(),a.St||this.removeTarget(r);break;case 3:this.Ht(r)&&(a.$t(),a.Ct(e.resumeToken));break;case 4:this.Ht(r)&&(this.Jt(r),a.Ct(e.resumeToken));break;default:Fn()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Lt.forEach((a,h)=>{this.Ht(h)&&r(h)})}Yt(e){const r=e.targetId,a=e.At.count,h=this.Xt(r);if(h){const m=h.target;if(kr(m))if(0===a){const I=new xn(m.path);this.jt(r,I,ze.newNoDocument(I,dr.min()))}else Hn(1===a);else this.Zt(r)!==a&&(this.Jt(r),this.Kt=this.Kt.add(r))}}te(e){const r=new Map;this.Lt.forEach((m,I)=>{const O=this.Xt(I);if(O){if(m.current&&kr(O.target)){const X=new xn(O.target.path);null!==this.Ut.get(X)||this.ee(I,X)||this.jt(I,X,ze.newNoDocument(X,e))}m.Dt&&(r.set(I,m.xt()),m.Nt())}});let a=Hr();this.qt.forEach((m,I)=>{let O=!0;I.forEachWhile(X=>{const ie=this.Xt(X);return!ie||2===ie.purpose||(O=!1,!1)}),O&&(a=a.add(m))}),this.Ut.forEach((m,I)=>I.setReadTime(e));const h=new g(e,r,this.Kt,this.Ut,a);return this.Ut=ga(),this.qt=Dn(),this.Kt=new zn(yr),h}Qt(e,r){if(!this.Ht(e))return;const a=this.ee(e,r.key)?2:0;this.zt(e).kt(r.key,a),this.Ut=this.Ut.insert(r.key,r),this.qt=this.qt.insert(r.key,this.ne(r.key).add(e))}jt(e,r,a){if(!this.Ht(e))return;const h=this.zt(e);this.ee(e,r)?h.kt(r,1):h.Ot(r),this.qt=this.qt.insert(r,this.ne(r).delete(e)),a&&(this.Ut=this.Ut.insert(r,a))}removeTarget(e){this.Lt.delete(e)}Zt(e){const r=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let r=this.Lt.get(e);return r||(r=new lt,this.Lt.set(e,r)),r}ne(e){let r=this.qt.get(e);return r||(r=new zn(yr),this.qt=this.qt.insert(e,r)),r}Ht(e){const r=null!==this.Xt(e);return r||Kt("WatchChangeAggregator","Detected inactive target",e),r}Xt(e){const r=this.Lt.get(e);return r&&r.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new lt),this.Bt.getRemoteKeysForTarget(e).forEach(r=>{this.jt(e,r,null)})}ee(e,r){return this.Bt.getRemoteKeysForTarget(e).has(r)}}function Dn(){return new ji(xn.comparator)}function bn(){return new ji(xn.comparator)}const _r={asc:"ASCENDING",desc:"DESCENDING"},ai={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Oi{constructor(e,r){this.databaseId=e,this.gt=r}}function Ts(s,e){return s.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Il(s,e){return s.gt?e.toBase64():e.toUint8Array()}function Fu(s,e){return Ts(s,e.toTimestamp())}function Xs(s){return Hn(!!s),dr.fromTimestamp(function(e){const r=Zo(e);return new Mi(r.seconds,r.nanos)}(s))}function Lu(s,e){return(r=s,new zr(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function Cl(s){const e=zr.fromString(s);return Hn(Op(e)),e}function Fs(s,e){return Lu(s.databaseId,e.path)}function Us(s,e){const r=Cl(e);if(r.get(1)!==s.databaseId.projectId)throw new Lt(bt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+s.databaseId.projectId);if(r.get(3)!==s.databaseId.database)throw new Lt(bt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+s.databaseId.database);return new xn(Rc(r))}function wl(s,e){return Lu(s.databaseId,e)}function su(s){const e=Cl(s);return 4===e.length?zr.emptyPath():Rc(e)}function Ls(s){return new zr(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Rc(s){return Hn(s.length>4&&"documents"===s.get(4)),s.popFirst(5)}function Tl(s,e,r){return{name:Fs(s,e),fields:r.value.mapValue.fields}}function Td(s,e,r){const a=Us(s,e.name),h=Xs(e.updateTime),m=new Z({mapValue:{fields:e.fields}}),I=ze.newFoundDocument(a,h,m);return r&&I.setHasCommittedMutations(),r?I.setHasCommittedMutations():I}function Mc(s,e){let r;if(e instanceof xc)r={update:Tl(s,e.key,e.value)};else if(e instanceof Wl)r={delete:Fs(s,e.key)};else if(e instanceof El)r={update:Tl(s,e.key,e.data),updateMask:rm(e.fieldMask)};else{if(!(e instanceof Gl))return Fn();r={verify:Fs(s,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(a=>function(h,m){const I=m.transform;if(I instanceof Ul)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(I instanceof nl)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:I.elements}};if(I instanceof jl)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:I.elements}};if(I instanceof Tc)return{fieldPath:m.field.canonicalString(),increment:I.yt};throw Fn()}(0,a))),e.precondition.isNone||(r.currentDocument=void 0!==(h=e.precondition).updateTime?{updateTime:Fu(s,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:Fn()),r;var h}function Ih(s,e){const r=e.currentDocument?void 0!==(h=e.currentDocument).updateTime?Si.updateTime(Xs(h.updateTime)):void 0!==h.exists?Si.exists(h.exists):Si.none():Si.none(),a=e.updateTransforms?e.updateTransforms.map(h=>function(m,I){let O=null;"setToServerValue"in I?(Hn("REQUEST_TIME"===I.setToServerValue),O=new Ul):"appendMissingElements"in I?O=new nl(I.appendMissingElements.values||[]):"removeAllFromArray"in I?O=new jl(I.removeAllFromArray.values||[]):"increment"in I?O=new Tc(m,I.increment):Fn();const X=ui.fromServerFormat(I.fieldPath);return new Dc(X,O)}(s,h)):[];var h;if(e.update){const h=Us(s,e.update.name),m=new Z({mapValue:{fields:e.update.fields}});if(e.updateMask){const I=new po((e.updateMask.fieldPaths||[]).map(ie=>ui.fromServerFormat(ie)));return new El(h,m,I,r,a)}return new xc(h,m,r,a)}if(e.delete){const h=Us(s,e.delete);return new Wl(h,r)}if(e.verify){const h=Us(s,e.verify);return new Gl(h,r)}return Fn()}function Ch(s,e){return{documents:[wl(s,e.path)]}}function wh(s,e){const r={structuredQuery:{}},a=e.path;null!==e.collectionGroup?(r.parent=wl(s,a),r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r.parent=wl(s,a.popLast()),r.structuredQuery.from=[{collectionId:a.lastSegment()}]);const h=function(X){if(0===X.length)return;const ie=X.map(Oe=>function(st){if("=="===st.op){if($o(st.value))return{unaryFilter:{field:Pc(st.field),op:"IS_NAN"}};if(Qc(st.value))return{unaryFilter:{field:Pc(st.field),op:"IS_NULL"}}}else if("!="===st.op){if($o(st.value))return{unaryFilter:{field:Pc(st.field),op:"IS_NOT_NAN"}};if(Qc(st.value))return{unaryFilter:{field:Pc(st.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pc(st.field),op:Th(st.op),value:st.value}}}(Oe));return 1===ie.length?ie[0]:{compositeFilter:{op:"AND",filters:ie}}}(e.filters);h&&(r.structuredQuery.where=h);const m=function(X){if(0!==X.length)return X.map(ie=>{return{field:Pc((Oe=ie).field),direction:Sd(Oe.dir)};var Oe})}(e.orderBy);m&&(r.structuredQuery.orderBy=m);const I=(ie=e.limit,s.gt||ks(ie)?ie:{value:ie});var ie,O,X;return null!==I&&(r.structuredQuery.limit=I),e.startAt&&(r.structuredQuery.startAt={before:(O=e.startAt).inclusive,values:O.position}),e.endAt&&(r.structuredQuery.endAt={before:!(X=e.endAt).inclusive,values:X.position}),r}function Pf(s){let e=su(s.parent);const r=s.structuredQuery,a=r.from?r.from.length:0;let h=null;if(a>0){Hn(1===a);const Oe=r.from[0];Oe.allDescendants?h=Oe.collectionId:e=e.child(Oe.collectionId)}let m=[];r.where&&(m=Bu(r.where));let I=[];r.orderBy&&(I=r.orderBy.map(Oe=>{return new Ho(Ad((st=Oe).field),function(kt){switch(kt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(st.direction));var st}));let O=null;r.limit&&(O=function(Oe){let st;return st="object"==typeof Oe?Oe.value:Oe,ks(st)?null:st}(r.limit));let X=null;var Oe;r.startAt&&(X=new jo((Oe=r.startAt).values||[],!!Oe.before));let ie=null;return r.endAt&&(ie=function(Oe){return new jo(Oe.values||[],!Oe.before)}(r.endAt)),gd(e,h,I,m,O,"F",X,ie)}function Bu(s){return s?void 0!==s.unaryFilter?[Dh(s)]:void 0!==s.fieldFilter?[$u(s)]:void 0!==s.compositeFilter?s.compositeFilter.filters.map(e=>Bu(e)).reduce((e,r)=>e.concat(r)):Fn():[]}function Sd(s){return _r[s]}function Th(s){return ai[s]}function Pc(s){return{fieldPath:s.canonicalString()}}function Ad(s){return ui.fromServerFormat(s.fieldPath)}function $u(s){return pi.create(Ad(s.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Fn()}}(s.fieldFilter.op),s.fieldFilter.value)}function Dh(s){switch(s.unaryFilter.op){case"IS_NAN":const e=Ad(s.unaryFilter.field);return pi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const r=Ad(s.unaryFilter.field);return pi.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ad(s.unaryFilter.field);return pi.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Ad(s.unaryFilter.field);return pi.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Fn()}}function rm(s){const e=[];return s.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function Op(s){return s.length>=4&&"projects"===s.get(0)&&"databases"===s.get(2)}function js(s){let e="";for(let r=0;r<s.length;r++)e.length>0&&(e=Np(e)),e=Of(s.get(r),e);return Np(e)}function Of(s,e){let r=e;const a=s.length;for(let h=0;h<a;h++){const m=s.charAt(h);switch(m){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=m}}return r}function Np(s){return s+"\x01\x01"}function Dl(s){const e=s.length;if(Hn(e>=2),2===e)return Hn("\x01"===s.charAt(0)&&"\x01"===s.charAt(1)),zr.emptyPath();const r=e-2,a=[];let h="";for(let m=0;m<e;){const I=s.indexOf("\x01",m);switch((I<0||I>r)&&Fn(),s.charAt(I+1)){case"\x01":const O=s.substring(m,I);let X;0===h.length?X=O:(h+=O,X=h,h=""),a.push(X);break;case"\x10":h+=s.substring(m,I),h+="\0";break;case"\x11":h+=s.substring(m,I+1);break;default:Fn()}m=I+2}return new zr(a)}const kp=["userId","batchId"];function Sh(s,e){return[s,js(e)]}function Uu(s,e,r){return[s,js(e),r]}const Ta={},Ah=["prefixPath","collectionGroup","readTime","documentId"],Nf=["prefixPath","collectionGroup","documentId"],xh=["collectionGroup","readTime","prefixPath","documentId"],Oc=["canonicalId","targetId"],Fp=["targetId","path"],kf=["path","targetId"],im=["collectionId","parent"],Rh=["indexId","uid"],Lp=["uid","sequenceNumber"],ju=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Da=["indexId","uid","orderedDocumentKey"],Vp=["userId","collectionPath","documentId"],by=["userId","collectionPath","largestBatchId"],Bp=["userId","collectionGroup","largestBatchId"],sm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],rl=[...sm,"documentOverlays"],ou=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xd=ou,om=[...xd,"indexConfiguration","indexState","indexEntries"];class Nc extends J{constructor(e,r){super(),this.ie=e,this.currentSequenceNumber=r}}function Vi(s,e){const r=hn(s);return Rn.M(r.ie,e)}class kc{constructor(e,r,a,h){this.batchId=e,this.localWriteTime=r,this.baseMutations=a,this.mutations=h}applyToRemoteDocument(e,r){const a=r.mutationResults;for(let h=0;h<this.mutations.length;h++){const m=this.mutations[h];m.key.isEqual(e.key)&&_d(m,e,a[h])}}applyToLocalView(e,r){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(r=Ac(a,e,r,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(r=Ac(a,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const a=_h();return this.mutations.forEach(h=>{const m=e.get(h.key),I=m.overlayedDocument;let O=this.applyToLocalView(I,m.mutatedFields);O=r.has(h.key)?null:O;const X=gh(I,O);null!==X&&a.set(h.key,X),I.isValidDocument()||I.convertToNoDocument(dr.min())}),a}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Hr())}isEqual(e){return this.batchId===e.batchId&&ko(this.mutations,e.mutations,(r,a)=>Ed(r,a))&&ko(this.baseMutations,e.baseMutations,(r,a)=>Ed(r,a))}}class Mh{constructor(e,r,a,h){this.batch=e,this.commitVersion=r,this.mutationResults=a,this.docVersions=h}static from(e,r,a){Hn(e.mutations.length===a.length);let h=vh;const m=e.mutations;for(let I=0;I<m.length;I++)h=h.insert(m[I].key,a[I].version);return new Mh(e,r,a,h)}}class Hu{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class il{constructor(e,r,a,h,m=dr.min(),I=dr.min(),O=Cs.EMPTY_BYTE_STRING){this.target=e,this.targetId=r,this.purpose=a,this.sequenceNumber=h,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=I,this.resumeToken=O}withSequenceNumber(e){return new il(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,r){return new il(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new il(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class au{constructor(e){this.re=e}}function lu(s,e){const r=e.key,a={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Go(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())a.document={name:Fs(h=s.re,(m=e).key),fields:m.data.value.mapValue.fields,updateTime:Ts(h,m.version.toTimestamp())};else if(e.isNoDocument())a.noDocument={path:r.path.toArray(),readTime:lc(e.version)};else{if(!e.isUnknownDocument())return Fn();a.unknownDocument={path:r.path.toArray(),version:lc(e.version)}}var h,m;return a}function Go(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function lc(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function cu(s){const e=new Mi(s.seconds,s.nanoseconds);return dr.fromTimestamp(e)}function sl(s,e){const r=(e.baseMutations||[]).map(m=>Ih(s.re,m));for(let m=0;m<e.mutations.length-1;++m){const I=e.mutations[m];m+1<e.mutations.length&&void 0!==e.mutations[m+1].transform&&(I.updateTransforms=e.mutations[m+1].transform.fieldTransforms,e.mutations.splice(m+1,1),++m)}const a=e.mutations.map(m=>Ih(s.re,m)),h=Mi.fromMillis(e.localWriteTimeMs);return new kc(e.batchId,h,r,a)}function Wu(s){const e=cu(s.readTime),r=void 0!==s.lastLimboFreeSnapshotVersion?cu(s.lastLimboFreeSnapshotVersion):dr.min();let a;var h;return void 0!==s.query.documents?(Hn(1===(h=s.query).documents.length),a=Wi(gi(su(h.documents[0])))):a=Wi(Pf(s.query)),new il(a,s.targetId,0,s.lastListenSequenceNumber,e,r,Cs.fromBase64String(s.resumeToken))}function Sa(s,e){const r=lc(e.snapshotVersion),a=lc(e.lastLimboFreeSnapshotVersion);let h;h=kr(e.target)?Ch(s.re,e.target):wh(s.re,e.target);const m=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:cn(e.target),readTime:r,resumeToken:m,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:a,query:h}}function Oh(s){const e=Pf({parent:s.parent,structuredQuery:s.structuredQuery});return"LAST"===s.limitType?Jc(e,e.limit,"L"):e}function Ff(s,e){return new Hu(e.largestBatchId,Ih(s.re,e.overlayMutation))}function Lf(s,e){const r=e.path.lastSegment();return[s,js(e.path.popLast()),r]}function $p(s,e,r,a){return{indexId:s,uid:e.uid||"",sequenceNumber:r,readTime:lc(a.readTime),documentKey:js(a.documentKey.path),largestBatchId:a.largestBatchId}}class Up{getBundleMetadata(e,r){return Nh(e).get(r).next(a=>{if(a)return{id:(h=a).bundleId,createTime:cu(h.createTime),version:h.version};var h})}saveBundleMetadata(e,r){return Nh(e).put({bundleId:(a=r).id,createTime:lc(Xs(a.createTime)),version:a.version});var a}getNamedQuery(e,r){return kh(e).get(r).next(a=>{if(a)return{name:(h=a).name,query:Oh(h.bundledQuery),readTime:cu(h.readTime)};var h})}saveNamedQuery(e,r){return kh(e).put({name:(a=r).name,readTime:lc(Xs(a.readTime)),bundledQuery:a.bundledQuery});var a}}function Nh(s){return Vi(s,"bundles")}function kh(s){return Vi(s,"namedQueries")}class Yl{constructor(e,r){this.It=e,this.userId=r}static oe(e,r){return new Yl(e,r.uid||"")}getOverlay(e,r){return Gu(e).get(Lf(this.userId,r)).next(a=>a?Ff(this.It,a):null)}getOverlays(e,r){const a=wa();return ge.forEach(r,h=>this.getOverlay(e,h).next(m=>{null!==m&&a.set(h,m)})).next(()=>a)}saveOverlays(e,r,a){const h=[];return a.forEach((m,I)=>{const O=new Hu(r,I);h.push(this.ue(e,O))}),ge.waitFor(h)}removeOverlaysForBatchId(e,r,a){const h=new Set;r.forEach(I=>h.add(js(I.getCollectionPath())));const m=[];return h.forEach(I=>{const O=IDBKeyRange.bound([this.userId,I,a],[this.userId,I,a+1],!1,!0);m.push(Gu(e).Y("collectionPathOverlayIndex",O))}),ge.waitFor(m)}getOverlaysForCollection(e,r,a){const h=wa(),m=js(r),I=IDBKeyRange.bound([this.userId,m,a],[this.userId,m,Number.POSITIVE_INFINITY],!0);return Gu(e).W("collectionPathOverlayIndex",I).next(O=>{for(const X of O){const ie=Ff(this.It,X);h.set(ie.getKey(),ie)}return h})}getOverlaysForCollectionGroup(e,r,a,h){const m=wa();let I;const O=IDBKeyRange.bound([this.userId,r,a],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Gu(e).Z({index:"collectionGroupOverlayIndex",range:O},(X,ie,Oe)=>{const st=Ff(this.It,ie);m.size()<h||st.largestBatchId===I?(m.set(st.getKey(),st),I=st.largestBatchId):Oe.done()}).next(()=>m)}ue(e,r){return Gu(e).put(function(a,h,m){const[I,O,X]=Lf(h,m.mutation.key);return{userId:h,collectionPath:O,documentId:X,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:Mc(a.re,m.mutation)}}(this.It,this.userId,r))}}function Gu(s){return Vi(s,"documentOverlays")}class Fc{constructor(){}ce(e,r){this.ae(e,r),r.he()}ae(e,r){if("nullValue"in e)this.le(r,5);else if("booleanValue"in e)this.le(r,10),r.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(r,15),r.fe(yi(e.integerValue));else if("doubleValue"in e){const a=yi(e.doubleValue);isNaN(a)?this.le(r,13):(this.le(r,15),_s(a)?r.fe(0):r.fe(a))}else if("timestampValue"in e){const a=e.timestampValue;this.le(r,20),"string"==typeof a?r.de(a):(r.de(`${a.seconds||""}`),r.fe(a.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,r),this.we(r);else if("bytesValue"in e)this.le(r,30),r.me(Va(e.bytesValue)),this.we(r);else if("referenceValue"in e)this.ge(e.referenceValue,r);else if("geoPointValue"in e){const a=e.geoPointValue;this.le(r,45),r.fe(a.latitude||0),r.fe(a.longitude||0)}else"mapValue"in e?$a(e)?this.le(r,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,r),this.we(r)):"arrayValue"in e?(this.pe(e.arrayValue,r),this.we(r)):Fn()}_e(e,r){this.le(r,25),this.Ie(e,r)}Ie(e,r){r.de(e)}ye(e,r){const a=e.fields||{};this.le(r,55);for(const h of Object.keys(a))this._e(h,r),this.ae(a[h],r)}pe(e,r){const a=e.values||[];this.le(r,50);for(const h of a)this.ae(h,r)}ge(e,r){this.le(r,37),xn.fromName(e).path.forEach(a=>{this.le(r,60),this.Ie(a,r)})}le(e,r){e.fe(r)}we(e){e.fe(2)}}function jp(s){if(0===s)return 8;let e=0;return s>>4==0&&(e+=4,s<<=4),s>>6==0&&(e+=2,s<<=2),s>>7==0&&(e+=1),e}function Rd(s){const e=64-function(r){let a=0;for(let h=0;h<8;++h){const m=jp(255&r[h]);if(a+=m,8!==m)break}return a}(s);return Math.ceil(e/8)}Fc.Te=new Fc;class ql{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const r=e[Symbol.iterator]();let a=r.next();for(;!a.done;)this.Ae(a.value),a=r.next();this.Re()}be(e){const r=e[Symbol.iterator]();let a=r.next();for(;!a.done;)this.Pe(a.value),a=r.next();this.ve()}Ve(e){for(const r of e){const a=r.charCodeAt(0);if(a<128)this.Ae(a);else if(a<2048)this.Ae(960|a>>>6),this.Ae(128|63&a);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a);else{const h=r.codePointAt(0);this.Ae(240|h>>>18),this.Ae(128|63&h>>>12),this.Ae(128|63&h>>>6),this.Ae(128|63&h)}}this.Re()}Se(e){for(const r of e){const a=r.charCodeAt(0);if(a<128)this.Pe(a);else if(a<2048)this.Pe(960|a>>>6),this.Pe(128|63&a);else if(r<"\ud800"||"\udbff"<r)this.Pe(480|a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a);else{const h=r.codePointAt(0);this.Pe(240|h>>>18),this.Pe(128|63&h>>>12),this.Pe(128|63&h>>>6),this.Pe(128|63&h)}}this.ve()}De(e){const r=this.Ce(e),a=Rd(r);this.xe(1+a),this.buffer[this.position++]=255&a;for(let h=r.length-a;h<r.length;++h)this.buffer[this.position++]=255&r[h]}Ne(e){const r=this.Ce(e),a=Rd(r);this.xe(1+a),this.buffer[this.position++]=~(255&a);for(let h=r.length-a;h<r.length;++h)this.buffer[this.position++]=~(255&r[h])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const r=function(h){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,h,!1),new Uint8Array(m.buffer)}(e),a=0!=(128&r[0]);r[0]^=a?255:128;for(let h=1;h<r.length;++h)r[h]^=a?255:0;return r}Ae(e){const r=255&e;0===r?(this.Oe(0),this.Oe(255)):255===r?(this.Oe(255),this.Oe(0)):this.Oe(r)}Pe(e){const r=255&e;0===r?(this.Fe(0),this.Fe(255)):255===r?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const r=e+this.position;if(r<=this.buffer.length)return;let a=2*this.buffer.length;a<r&&(a=r);const h=new Uint8Array(a);h.set(this.buffer),this.buffer=h}}class Hp{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class Fh{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Md{constructor(){this.Be=new ql,this.Le=new Hp(this.Be),this.Ue=new Fh(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Kl{constructor(e,r,a,h){this.indexId=e,this.documentKey=r,this.arrayValue=a,this.directionalValue=h}Ke(){const e=this.directionalValue.length,r=0===e||255===this.directionalValue[e-1]?e+1:e,a=new Uint8Array(r);return a.set(this.directionalValue,0),r!==e?a.set([0],this.directionalValue.length):++a[a.length-1],new Kl(this.indexId,this.documentKey,this.arrayValue,a)}}function uu(s,e){let r=s.indexId-e.indexId;return 0!==r?r:(r=Lh(s.arrayValue,e.arrayValue),0!==r?r:(r=Lh(s.directionalValue,e.directionalValue),0!==r?r:xn.comparator(s.documentKey,e.documentKey)))}function Lh(s,e){for(let r=0;r<s.length&&r<e.length;++r){const a=s[r]-e[r];if(0!==a)return a}return s.length-e.length}class Wp{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const r of e.filters){const a=r;a.dt()?this.je=a:this.Qe.push(a)}}We(e){const r=ca(e);if(void 0!==r&&!this.ze(r))return!1;const a=$s(e);let h=0,m=0;for(;h<a.length&&this.ze(a[h]);++h);if(h===a.length)return!0;if(void 0!==this.je){const I=a[h];if(!this.He(this.je,I)||!this.Je(this.Ge[m++],I))return!1;++h}for(;h<a.length;++h){const I=a[h];if(m>=this.Ge.length||!this.Je(this.Ge[m++],I))return!1}return!0}ze(e){for(const r of this.Qe)if(this.He(r,e))return!0;return!1}He(e,r){return!(void 0===e||!e.field.isEqual(r.fieldPath))&&2===r.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,r){return!!e.field.isEqual(r.fieldPath)&&(0===r.kind&&"asc"===e.dir||1===r.kind&&"desc"===e.dir)}}class Gp{constructor(){this.Ye=new Pd}addToCollectionParentIndex(e,r){return this.Ye.add(r),ge.resolve()}getCollectionParents(e,r){return ge.resolve(this.Ye.getEntries(r))}addFieldIndex(e,r){return ge.resolve()}deleteFieldIndex(e,r){return ge.resolve()}getDocumentsMatchingTarget(e,r){return ge.resolve(null)}getIndexType(e,r){return ge.resolve(0)}getFieldIndexes(e,r){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,r){return ge.resolve(x.min())}getMinOffsetFromCollectionGroup(e,r){return ge.resolve(x.min())}updateCollectionGroup(e,r,a){return ge.resolve()}updateIndexEntries(e,r){return ge.resolve()}}class Pd{constructor(){this.index={}}add(e){const r=e.lastSegment(),a=e.popLast(),h=this.index[r]||new zn(zr.comparator),m=!h.has(a);return this.index[r]=h.add(a),m}has(e){const r=e.lastSegment(),a=e.popLast(),h=this.index[r];return h&&h.has(a)}getEntries(e){return(this.index[e]||new zn(zr.comparator)).toArray()}}const du=new Uint8Array(0);class Od{constructor(e,r){this.user=e,this.databaseId=r,this.Xe=new Pd,this.Ze=new bl(a=>cn(a),(a,h)=>Yn(a,h)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.Xe.has(r)){const a=r.lastSegment(),h=r.popLast();e.addOnCommittedListener(()=>{this.Xe.add(r)});const m={collectionId:a,parent:js(h)};return Nd(e).put(m)}return ge.resolve()}getCollectionParents(e,r){const a=[],h=IDBKeyRange.bound([r,""],[fo(r),""],!1,!0);return Nd(e).W(h).next(m=>{for(const I of m){if(I.collectionId!==r)break;a.push(Dl(I.parent))}return a})}addFieldIndex(e,r){const a=Ga(e),h={indexId:(I=r).indexId,collectionGroup:I.collectionGroup,fields:I.fields.map(O=>[O.fieldPath.canonicalString(),O.kind])};var I;delete h.indexId;const m=a.add(h);if(r.indexState){const I=zu(e);return m.next(O=>{I.put($p(O,this.user,r.indexState.sequenceNumber,r.indexState.offset))})}return m.next()}deleteFieldIndex(e,r){const a=Ga(e),h=zu(e),m=Sl(e);return a.delete(r.indexId).next(()=>h.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>m.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,r){const a=Sl(e);let h=!0;const m=new Map;return ge.forEach(this.tn(r),I=>this.en(e,I).next(O=>{h&&(h=!!O),m.set(I,O)})).next(()=>{if(h){let I=Hr();const O=[];return ge.forEach(m,(X,ie)=>{var Oe;Kt("IndexedDbIndexManager",`Using index ${Oe=X,`id=${Oe.indexId}|cg=${Oe.collectionGroup}|f=${Oe.fields.map(Qi=>`${Qi.fieldPath}:${Qi.kind}`).join(",")}`} to execute ${cn(r)}`);const st=function(Qi,na){const ds=ca(na);if(void 0===ds)return null;for(const Gi of Rr(Qi,ds.fieldPath))switch(Gi.op){case"array-contains-any":return Gi.value.arrayValue.values||[];case"array-contains":return[Gi.value]}return null}(ie,X),kt=function(Qi,na){const ds=new Map;for(const Gi of $s(na))for(const So of Rr(Qi,Gi.fieldPath))switch(So.op){case"==":case"in":ds.set(Gi.fieldPath.canonicalString(),So.value);break;case"not-in":case"!=":return ds.set(Gi.fieldPath.canonicalString(),So.value),Array.from(ds.values())}return null}(ie,X),nn=function(Qi,na){const ds=[];let Gi=!0;for(const So of $s(na)){const Dp=0===So.kind?fr(Qi,So.fieldPath,Qi.startAt):Li(Qi,So.fieldPath,Qi.startAt);ds.push(Dp.value),Gi&&(Gi=Dp.inclusive)}return new jo(ds,Gi)}(ie,X),pn=function(Qi,na){const ds=[];let Gi=!0;for(const So of $s(na)){const Dp=0===So.kind?Li(Qi,So.fieldPath,Qi.endAt):fr(Qi,So.fieldPath,Qi.endAt);ds.push(Dp.value),Gi&&(Gi=Dp.inclusive)}return new jo(ds,Gi)}(ie,X),qn=this.nn(X,ie,nn),sr=this.nn(X,ie,pn),Ai=this.sn(X,ie,kt),Ss=this.rn(X.indexId,st,qn,nn.inclusive,sr,pn.inclusive,Ai);return ge.forEach(Ss,Qi=>a.J(Qi,r.limit).next(na=>{na.forEach(ds=>{const Gi=xn.fromSegments(ds.documentKey);I.has(Gi)||(I=I.add(Gi),O.push(Gi))})}))}).next(()=>O)}return ge.resolve(null)})}tn(e){let r=this.Ze.get(e);return r||(r=[e],this.Ze.set(e,r),r)}rn(e,r,a,h,m,I,O){const X=(null!=r?r.length:1)*Math.max(a.length,m.length),ie=X/(null!=r?r.length:1),Oe=[];for(let st=0;st<X;++st){const kt=r?this.on(r[st/ie]):du,nn=this.un(e,kt,a[st%ie],h),pn=this.cn(e,kt,m[st%ie],I),qn=O.map(sr=>this.un(e,kt,sr,!0));Oe.push(...this.createRange(nn,pn,qn))}return Oe}un(e,r,a,h){const m=new Kl(e,xn.empty(),r,a);return h?m:m.Ke()}cn(e,r,a,h){const m=new Kl(e,xn.empty(),r,a);return h?m.Ke():m}en(e,r){const a=new Wp(r),h=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,h).next(m=>{let I=null;for(const O of m)a.We(O)&&(!I||O.fields.length>I.fields.length)&&(I=O);return I})}getIndexType(e,r){let a=2;return ge.forEach(this.tn(r),h=>this.en(e,h).next(m=>{m?0!==a&&m.fields.length<function(I){let O=new zn(ui.comparator),X=!1;for(const ie of I.filters){const Oe=ie;Oe.field.isKeyField()||("array-contains"===Oe.op||"array-contains-any"===Oe.op?X=!0:O=O.add(Oe.field))}for(const ie of I.orderBy)ie.field.isKeyField()||(O=O.add(ie.field));return O.size+(X?1:0)}(h)&&(a=1):a=0})).next(()=>a)}an(e,r){const a=new Md;for(const h of $s(e)){const m=r.data.field(h.fieldPath);if(null==m)return null;const I=a.qe(h.kind);Fc.Te.ce(m,I)}return a.$e()}on(e){const r=new Md;return Fc.Te.ce(e,r.qe(0)),r.$e()}hn(e,r){const a=new Md;return Fc.Te.ce(Bo(this.databaseId,r),a.qe(function(h){const m=$s(h);return 0===m.length?0:m[m.length-1].kind}(e))),a.$e()}sn(e,r,a){if(null===a)return[];let h=[];h.push(new Md);let m=0;for(const I of $s(e)){const O=a[m++];for(const X of h)if(this.ln(r,I.fieldPath)&&To(O))h=this.fn(h,I,O);else{const ie=X.qe(I.kind);Fc.Te.ce(O,ie)}}return this.dn(h)}nn(e,r,a){return this.sn(e,r,a.position)}dn(e){const r=[];for(let a=0;a<e.length;++a)r[a]=e[a].$e();return r}fn(e,r,a){const h=[...e],m=[];for(const I of a.arrayValue.values||[])for(const O of h){const X=new Md;X.seed(O.$e()),Fc.Te.ce(I,X.qe(r.kind)),m.push(X)}return m}ln(e,r){return!!e.filters.find(a=>a instanceof pi&&a.field.isEqual(r)&&("in"===a.op||"not-in"===a.op))}getFieldIndexes(e,r){const a=Ga(e),h=zu(e);return(r?a.W("collectionGroupIndex",IDBKeyRange.bound(r,r)):a.W()).next(m=>{const I=[];return ge.forEach(m,O=>h.get([O.indexId,this.uid]).next(X=>{I.push(function(ie,Oe){const st=Oe?new Ko(Oe.sequenceNumber,new x(cu(Oe.readTime),new xn(Dl(Oe.documentKey)),Oe.largestBatchId)):Ko.empty(),kt=ie.fields.map(([nn,pn])=>new Or(ui.fromServerFormat(nn),pn));return new Ia(ie.indexId,ie.collectionGroup,kt,st)}(O,X))})).next(()=>I)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>0===r.length?null:(r.sort((a,h)=>{const m=a.indexState.sequenceNumber-h.indexState.sequenceNumber;return 0!==m?m:yr(a.collectionGroup,h.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,a){const h=Ga(e),m=zu(e);return this._n(e).next(I=>h.W("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(O=>ge.forEach(O,X=>m.put($p(X.indexId,this.user,I,a)))))}updateIndexEntries(e,r){const a=new Map;return ge.forEach(r,(h,m)=>{const I=a.get(h.collectionGroup);return(I?ge.resolve(I):this.getFieldIndexes(e,h.collectionGroup)).next(O=>(a.set(h.collectionGroup,O),ge.forEach(O,X=>this.wn(e,h,X).next(ie=>{const Oe=this.mn(m,X);return ie.isEqual(Oe)?ge.resolve():this.gn(e,m,X,ie,Oe)}))))})}yn(e,r,a,h){return Sl(e).put({indexId:h.indexId,uid:this.uid,arrayValue:h.arrayValue,directionalValue:h.directionalValue,orderedDocumentKey:this.hn(a,r.key),documentKey:r.key.path.toArray()})}pn(e,r,a,h){return Sl(e).delete([h.indexId,this.uid,h.arrayValue,h.directionalValue,this.hn(a,r.key),r.key.path.toArray()])}wn(e,r,a){const h=Sl(e);let m=new zn(uu);return h.Z({index:"documentKeyIndex",range:IDBKeyRange.only([a.indexId,this.uid,this.hn(a,r)])},(I,O)=>{m=m.add(new Kl(a.indexId,r,O.arrayValue,O.directionalValue))}).next(()=>m)}mn(e,r){let a=new zn(uu);const h=this.an(r,e);if(null==h)return a;const m=ca(r);if(null!=m){const I=e.data.field(m.fieldPath);if(To(I))for(const O of I.arrayValue.values||[])a=a.add(new Kl(r.indexId,e.key,this.on(O),h))}else a=a.add(new Kl(r.indexId,e.key,du,h));return a}gn(e,r,a,h,m){Kt("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const I=[];return function(O,X,ie,Oe,st){const kt=O.getIterator(),nn=X.getIterator();let pn=fl(kt),qn=fl(nn);for(;pn||qn;){let sr=!1,Ai=!1;if(pn&&qn){const Ss=ie(pn,qn);Ss<0?Ai=!0:Ss>0&&(sr=!0)}else null!=pn?Ai=!0:sr=!0;sr?(Oe(qn),qn=fl(nn)):Ai?(st(pn),pn=fl(kt)):(pn=fl(kt),qn=fl(nn))}}(h,m,uu,O=>{I.push(this.yn(e,r,a,O))},O=>{I.push(this.pn(e,r,a,O))}),ge.waitFor(I)}_n(e){let r=1;return zu(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(a,h,m)=>{m.done(),r=h.sequenceNumber+1}).next(()=>r)}createRange(e,r,a){a=a.sort((I,O)=>uu(I,O)).filter((I,O,X)=>!O||0!==uu(I,X[O-1]));const h=[];h.push(e);for(const I of a){const O=uu(I,e),X=uu(I,r);if(0===O)h[0]=e.Ke();else if(O>0&&X<0)h.push(I),h.push(I.Ke());else if(X>0)break}h.push(r);const m=[];for(let I=0;I<h.length;I+=2)m.push(IDBKeyRange.bound([h[I].indexId,this.uid,h[I].arrayValue,h[I].directionalValue,du,[]],[h[I+1].indexId,this.uid,h[I+1].arrayValue,h[I+1].directionalValue,du,[]]));return m}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(Yu)}getMinOffset(e,r){return ge.mapArray(this.tn(r),a=>this.en(e,a).next(h=>h||Fn())).next(Yu)}}function Nd(s){return Vi(s,"collectionParents")}function Sl(s){return Vi(s,"indexEntries")}function Ga(s){return Vi(s,"indexConfiguration")}function zu(s){return Vi(s,"indexState")}function Yu(s){Hn(0!==s.length);let e=s[0].indexState.offset,r=e.largestBatchId;for(let a=1;a<s.length;a++){const h=s[a].indexState.offset;S(h,e)<0&&(e=h),r<h.largestBatchId&&(r=h.largestBatchId)}return new x(e.readTime,e.documentKey,r)}const cc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Aa{constructor(e,r,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=a}static withCacheSize(e){return new Aa(e,Aa.DEFAULT_COLLECTION_PERCENTILE,Aa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Lc(s,e,r){const a=s.store("mutations"),h=s.store("documentMutations"),m=[],I=IDBKeyRange.only(r.batchId);let O=0;const X=a.Z({range:I},(Oe,st,kt)=>(O++,kt.delete()));m.push(X.next(()=>{Hn(1===O)}));const ie=[];for(const Oe of r.mutations){const st=Uu(e,Oe.key.path,r.batchId);m.push(h.delete(st)),ie.push(Oe.key)}return ge.waitFor(m).next(()=>ie)}function Vh(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw Fn();e=s.noDocument}return JSON.stringify(e).length}Aa.DEFAULT_COLLECTION_PERCENTILE=10,Aa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Aa.DEFAULT=new Aa(41943040,Aa.DEFAULT_COLLECTION_PERCENTILE,Aa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Aa.DISABLED=new Aa(-1,0,0);class kd{constructor(e,r,a,h){this.userId=e,this.It=r,this.indexManager=a,this.referenceDelegate=h,this.In={}}static oe(e,r,a,h){Hn(""!==e.uid);const m=e.isAuthenticated()?e.uid:"";return new kd(m,r,a,h)}checkEmpty(e){let r=!0;const a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Al(e).Z({index:"userMutationsIndex",range:a},(h,m,I)=>{r=!1,I.done()}).next(()=>r)}addMutationBatch(e,r,a,h){const m=Zl(e),I=Al(e);return I.add({}).next(O=>{Hn("number"==typeof O);const X=new kc(O,r,a,h),ie=function(kt,nn,pn){const qn=pn.baseMutations.map(Ai=>Mc(kt.re,Ai)),sr=pn.mutations.map(Ai=>Mc(kt.re,Ai));return{userId:nn,batchId:pn.batchId,localWriteTimeMs:pn.localWriteTime.toMillis(),baseMutations:qn,mutations:sr}}(this.It,this.userId,X),Oe=[];let st=new zn((kt,nn)=>yr(kt.canonicalString(),nn.canonicalString()));for(const kt of h){const nn=Uu(this.userId,kt.key.path,O);st=st.add(kt.key.path.popLast()),Oe.push(I.put(ie)),Oe.push(m.put(nn,Ta))}return st.forEach(kt=>{Oe.push(this.indexManager.addToCollectionParentIndex(e,kt))}),e.addOnCommittedListener(()=>{this.In[O]=X.keys()}),ge.waitFor(Oe).next(()=>X)})}lookupMutationBatch(e,r){return Al(e).get(r).next(a=>a?(Hn(a.userId===this.userId),sl(this.It,a)):null)}Tn(e,r){return this.In[r]?ge.resolve(this.In[r]):this.lookupMutationBatch(e,r).next(a=>{if(a){const h=a.keys();return this.In[r]=h,h}return null})}getNextMutationBatchAfterBatchId(e,r){const a=r+1,h=IDBKeyRange.lowerBound([this.userId,a]);let m=null;return Al(e).Z({index:"userMutationsIndex",range:h},(I,O,X)=>{O.userId===this.userId&&(Hn(O.batchId>=a),m=sl(this.It,O)),X.done()}).next(()=>m)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let a=-1;return Al(e).Z({index:"userMutationsIndex",range:r,reverse:!0},(h,m,I)=>{a=m.batchId,I.done()}).next(()=>a)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Al(e).W("userMutationsIndex",r).next(a=>a.map(h=>sl(this.It,h)))}getAllMutationBatchesAffectingDocumentKey(e,r){const a=Sh(this.userId,r.path),h=IDBKeyRange.lowerBound(a),m=[];return Zl(e).Z({range:h},(I,O,X)=>{const[ie,Oe,st]=I,kt=Dl(Oe);if(ie===this.userId&&r.path.isEqual(kt))return Al(e).get(st).next(nn=>{if(!nn)throw Fn();Hn(nn.userId===this.userId),m.push(sl(this.It,nn))});X.done()}).next(()=>m)}getAllMutationBatchesAffectingDocumentKeys(e,r){let a=new zn(yr);const h=[];return r.forEach(m=>{const I=Sh(this.userId,m.path),O=IDBKeyRange.lowerBound(I),X=Zl(e).Z({range:O},(ie,Oe,st)=>{const[kt,nn,pn]=ie,qn=Dl(nn);kt===this.userId&&m.path.isEqual(qn)?a=a.add(pn):st.done()});h.push(X)}),ge.waitFor(h).next(()=>this.En(e,a))}getAllMutationBatchesAffectingQuery(e,r){const a=r.path,h=a.length+1,m=Sh(this.userId,a),I=IDBKeyRange.lowerBound(m);let O=new zn(yr);return Zl(e).Z({range:I},(X,ie,Oe)=>{const[st,kt,nn]=X,pn=Dl(kt);st===this.userId&&a.isPrefixOf(pn)?pn.length===h&&(O=O.add(nn)):Oe.done()}).next(()=>this.En(e,O))}En(e,r){const a=[],h=[];return r.forEach(m=>{h.push(Al(e).get(m).next(I=>{if(null===I)throw Fn();Hn(I.userId===this.userId),a.push(sl(this.It,I))}))}),ge.waitFor(h).next(()=>a)}removeMutationBatch(e,r){return Lc(e.ie,this.userId,r).next(a=>(e.addOnCommittedListener(()=>{this.An(r.batchId)}),ge.forEach(a,h=>this.referenceDelegate.markPotentiallyOrphaned(e,h))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return ge.resolve();const a=IDBKeyRange.lowerBound([this.userId]),h=[];return Zl(e).Z({range:a},(m,I,O)=>{if(m[0]===this.userId){const X=Dl(m[1]);h.push(X)}else O.done()}).next(()=>{Hn(0===h.length)})})}containsKey(e,r){return Bh(e,this.userId,r)}Rn(e){return Vf(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Bh(s,e,r){const a=Sh(e,r.path),h=a[1],m=IDBKeyRange.lowerBound(a);let I=!1;return Zl(s).Z({range:m,X:!0},(O,X,ie)=>{const[Oe,st,kt]=O;Oe===e&&st===h&&(I=!0),ie.done()}).next(()=>I)}function Al(s){return Vi(s,"mutations")}function Zl(s){return Vi(s,"documentMutations")}function Vf(s){return Vi(s,"mutationQueues")}class Ql{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Ql(0)}static vn(){return new Ql(-1)}}class am{constructor(e,r){this.referenceDelegate=e,this.It=r}allocateTargetId(e){return this.Vn(e).next(r=>{const a=new Ql(r.highestTargetId);return r.highestTargetId=a.next(),this.Sn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(r=>dr.fromTimestamp(new Mi(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,a){return this.Vn(e).next(h=>(h.highestListenSequenceNumber=r,a&&(h.lastRemoteSnapshotVersion=a.toTimestamp()),r>h.highestListenSequenceNumber&&(h.highestListenSequenceNumber=r),this.Sn(e,h)))}addTargetData(e,r){return this.Dn(e,r).next(()=>this.Vn(e).next(a=>(a.targetCount+=1,this.Cn(r,a),this.Sn(e,a))))}updateTargetData(e,r){return this.Dn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>hu(e).delete(r.targetId)).next(()=>this.Vn(e)).next(a=>(Hn(a.targetCount>0),a.targetCount-=1,this.Sn(e,a)))}removeTargets(e,r,a){let h=0;const m=[];return hu(e).Z((I,O)=>{const X=Wu(O);X.sequenceNumber<=r&&null===a.get(X.targetId)&&(h++,m.push(this.removeTargetData(e,X)))}).next(()=>ge.waitFor(m)).next(()=>h)}forEachTarget(e,r){return hu(e).Z((a,h)=>{const m=Wu(h);r(m)})}Vn(e){return $h(e).get("targetGlobalKey").next(r=>(Hn(null!==r),r))}Sn(e,r){return $h(e).put("targetGlobalKey",r)}Dn(e,r){return hu(e).put(Sa(this.It,r))}Cn(e,r){let a=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,a=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,a=!0),a}getTargetCount(e){return this.Vn(e).next(r=>r.targetCount)}getTargetData(e,r){const a=cn(r),h=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]);let m=null;return hu(e).Z({range:h,index:"queryTargetsIndex"},(I,O,X)=>{const ie=Wu(O);Yn(r,ie.target)&&(m=ie,X.done())}).next(()=>m)}addMatchingKeys(e,r,a){const h=[],m=Vc(e);return r.forEach(I=>{const O=js(I.path);h.push(m.put({targetId:a,path:O})),h.push(this.referenceDelegate.addReference(e,a,I))}),ge.waitFor(h)}removeMatchingKeys(e,r,a){const h=Vc(e);return ge.forEach(r,m=>{const I=js(m.path);return ge.waitFor([h.delete([a,I]),this.referenceDelegate.removeReference(e,a,m)])})}removeMatchingKeysForTargetId(e,r){const a=Vc(e),h=IDBKeyRange.bound([r],[r+1],!1,!0);return a.delete(h)}getMatchingKeysForTargetId(e,r){const a=IDBKeyRange.bound([r],[r+1],!1,!0),h=Vc(e);let m=Hr();return h.Z({range:a,X:!0},(I,O,X)=>{const ie=Dl(I[1]),Oe=new xn(ie);m=m.add(Oe)}).next(()=>m)}containsKey(e,r){const a=js(r.path),h=IDBKeyRange.bound([a],[fo(a)],!1,!0);let m=0;return Vc(e).Z({index:"documentTargetsIndex",X:!0,range:h},([I,O],X,ie)=>{0!==I&&(m++,ie.done())}).next(()=>m>0)}se(e,r){return hu(e).get(r).next(a=>a?Wu(a):null)}}function hu(s){return Vi(s,"targets")}function $h(s){return Vi(s,"targetGlobal")}function Vc(s){return Vi(s,"targetDocuments")}function za([s,e],[r,a]){const h=yr(s,r);return 0===h?yr(e,a):h}class zp{constructor(e){this.xn=e,this.buffer=new zn(za),this.Nn=0}kn(){return++this.Nn}On(e){const r=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(r);else{const a=this.buffer.last();za(r,a)<0&&(this.buffer=this.buffer.delete(a).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Uh{constructor(e,r,a){this.garbageCollector=e,this.asyncQueue=r,this.localStore=a,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var r=this;Kt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,y.Z)(function*(){r.Mn=null;try{yield r.localStore.collectGarbage(r.garbageCollector)}catch(a){Nr(a)?Kt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield ve(a)}yield r.Fn(3e5)}))}}class Yp{constructor(e,r){this.$n=e,this.params=r}calculateTargetCount(e,r){return this.$n.Bn(e).next(a=>Math.floor(r/100*a))}nthSequenceNumber(e,r){if(0===r)return ge.resolve(rs.at);const a=new zp(r);return this.$n.forEachTarget(e,h=>a.On(h.sequenceNumber)).next(()=>this.$n.Ln(e,h=>a.On(h))).next(()=>a.maxValue)}removeTargets(e,r,a){return this.$n.removeTargets(e,r,a)}removeOrphanedDocuments(e,r){return this.$n.removeOrphanedDocuments(e,r)}collect(e,r){return-1===this.params.cacheSizeCollectionThreshold?(Kt("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(cc)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(Kt("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cc):this.Un(e,r))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,r){let a,h,m,I,O,X,ie;const Oe=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(st=>(st>this.params.maximumSequenceNumbersToCollect?(Kt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${st}`),h=this.params.maximumSequenceNumbersToCollect):h=st,I=Date.now(),this.nthSequenceNumber(e,h))).next(st=>(a=st,O=Date.now(),this.removeTargets(e,a,r))).next(st=>(m=st,X=Date.now(),this.removeOrphanedDocuments(e,a))).next(st=>(ie=Date.now(),Lr()<=ke.in.DEBUG&&Kt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${I-Oe}ms\n\tDetermined least recently used ${h} in `+(O-I)+`ms\n\tRemoved ${m} targets in `+(X-O)+`ms\n\tRemoved ${st} documents in `+(ie-X)+`ms\nTotal Duration: ${ie-Oe}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:m,documentsRemoved:st})))}}class xa{constructor(e,r){this.db=e,this.garbageCollector=new Yp(this,r)}Bn(e){const r=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(a=>r.next(h=>a+h))}qn(e){let r=0;return this.Ln(e,a=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Ln(e,r){return this.Kn(e,(a,h)=>r(h))}addReference(e,r,a){return fu(e,a)}removeReference(e,r,a){return fu(e,a)}removeTargets(e,r,a){return this.db.getTargetCache().removeTargets(e,r,a)}markPotentiallyOrphaned(e,r){return fu(e,r)}Gn(e,r){return function(a,h){let m=!1;return Vf(a).tt(I=>Bh(a,I,h).next(O=>(O&&(m=!0),ge.resolve(!O)))).next(()=>m)}(e,r)}removeOrphanedDocuments(e,r){const a=this.db.getRemoteDocumentCache().newChangeBuffer(),h=[];let m=0;return this.Kn(e,(I,O)=>{if(O<=r){const X=this.Gn(e,I).next(ie=>{if(!ie)return m++,a.getEntry(e,I).next(()=>(a.removeEntry(I,dr.min()),Vc(e).delete([0,js(I.path)])))});h.push(X)}}).next(()=>ge.waitFor(h)).next(()=>a.apply(e)).next(()=>m)}removeTarget(e,r){const a=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,a)}updateLimboDocument(e,r){return fu(e,r)}Kn(e,r){const a=Vc(e);let h,m=rs.at;return a.Z({index:"documentTargetsIndex"},([I,O],{path:X,sequenceNumber:ie})=>{0===I?(m!==rs.at&&r(new xn(Dl(h)),m),m=ie,h=X):m=rs.at}).next(()=>{m!==rs.at&&r(new xn(Dl(h)),m)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function fu(s,e){return Vc(s).put((a=s.currentSequenceNumber,{targetId:0,path:js(e.path),sequenceNumber:a}));var a}class uc{constructor(){this.changes=new bl(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,ze.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const a=this.changes.get(r);return void 0!==a?ge.resolve(a):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Fd{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,a){return Mr(e).put(a)}removeEntry(e,r,a){return Mr(e).delete(function(h,m){const I=h.path.toArray();return[I.slice(0,I.length-2),I[I.length-2],Go(m),I[I.length-1]]}(r,a))}updateMetadata(e,r){return this.getMetadata(e).next(a=>(a.byteSize+=r,this.Qn(e,a)))}getEntry(e,r){let a=ze.newInvalidDocument(r);return Mr(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ol(r))},(h,m)=>{a=this.jn(r,m)}).next(()=>a)}Wn(e,r){let a={size:0,document:ze.newInvalidDocument(r)};return Mr(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ol(r))},(h,m)=>{a={document:this.jn(r,m),size:Vh(m)}}).next(()=>a)}getEntries(e,r){let a=ga();return this.zn(e,r,(h,m)=>{const I=this.jn(h,m);a=a.insert(h,I)}).next(()=>a)}Hn(e,r){let a=ga(),h=new ji(xn.comparator);return this.zn(e,r,(m,I)=>{const O=this.jn(m,I);a=a.insert(m,O),h=h.insert(m,Vh(I))}).next(()=>({documents:a,Jn:h}))}zn(e,r,a){if(r.isEmpty())return ge.resolve();let h=new zn(Ld);r.forEach(X=>h=h.add(X));const m=IDBKeyRange.bound(ol(h.first()),ol(h.last())),I=h.getIterator();let O=I.getNext();return Mr(e).Z({index:"documentKeyIndex",range:m},(X,ie,Oe)=>{const st=xn.fromSegments([...ie.prefixPath,ie.collectionGroup,ie.documentId]);for(;O&&Ld(O,st)<0;)a(O,null),O=I.getNext();O&&O.isEqual(st)&&(a(O,ie),O=I.hasNext()?I.getNext():null),O?Oe.j(ol(O)):Oe.done()}).next(()=>{for(;O;)a(O,null),O=I.hasNext()?I.getNext():null})}getAllFromCollection(e,r,a){const h=[r.popLast().toArray(),r.lastSegment(),Go(a.readTime),a.documentKey.path.isEmpty()?"":a.documentKey.path.lastSegment()],m=[r.popLast().toArray(),r.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Mr(e).W(IDBKeyRange.bound(h,m,!0)).next(I=>{let O=ga();for(const X of I){const ie=this.jn(xn.fromSegments(X.prefixPath.concat(X.collectionGroup,X.documentId)),X);O=O.insert(ie.key,ie)}return O})}getAllFromCollectionGroup(e,r,a,h){let m=ga();const I=qp(r,a),O=qp(r,x.max());return Mr(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(I,O,!0)},(X,ie,Oe)=>{const st=this.jn(xn.fromSegments(ie.prefixPath.concat(ie.collectionGroup,ie.documentId)),ie);m=m.insert(st.key,st),m.size===h&&Oe.done()}).next(()=>m)}newChangeBuffer(e){return new pu(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return Bf(e).get("remoteDocumentGlobalKey").next(r=>(Hn(!!r),r))}Qn(e,r){return Bf(e).put("remoteDocumentGlobalKey",r)}jn(e,r){if(r){const a=function(s,e){let r;if(e.document)r=Td(s.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const a=xn.fromSegments(e.noDocument.path),h=cu(e.noDocument.readTime);r=ze.newNoDocument(a,h),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Fn();{const a=xn.fromSegments(e.unknownDocument.path),h=cu(e.unknownDocument.version);r=ze.newUnknownDocument(a,h)}}return e.readTime&&r.setReadTime(function(a){const h=new Mi(a[0],a[1]);return dr.fromTimestamp(h)}(e.readTime)),r}(this.It,r);if(!a.isNoDocument()||!a.version.isEqual(dr.min()))return a}return ze.newInvalidDocument(e)}}function Ya(s){return new Fd(s)}class pu extends uc{constructor(e,r){super(),this.Yn=e,this.trackRemovals=r,this.Xn=new bl(a=>a.toString(),(a,h)=>a.isEqual(h))}applyChanges(e){const r=[];let a=0,h=new zn((m,I)=>yr(m.canonicalString(),I.canonicalString()));return this.changes.forEach((m,I)=>{const O=this.Xn.get(m);if(r.push(this.Yn.removeEntry(e,m,O.readTime)),I.isValidDocument()){const X=lu(this.Yn.It,I);h=h.add(m.path.popLast()),a+=Vh(X)-O.size,r.push(this.Yn.addEntry(e,m,X))}else if(a-=O.size,this.trackRemovals){const X=lu(this.Yn.It,I.convertToNoDocument(dr.min()));r.push(this.Yn.addEntry(e,m,X))}}),h.forEach(m=>{r.push(this.Yn.indexManager.addToCollectionParentIndex(e,m))}),r.push(this.Yn.updateMetadata(e,a)),ge.waitFor(r)}getFromCache(e,r){return this.Yn.Wn(e,r).next(a=>(this.Xn.set(r,{size:a.size,readTime:a.document.readTime}),a.document))}getAllFromCache(e,r){return this.Yn.Hn(e,r).next(({documents:a,Jn:h})=>(h.forEach((m,I)=>{this.Xn.set(m,{size:I,readTime:a.get(m).readTime})}),a))}}function Bf(s){return Vi(s,"remoteDocumentGlobal")}function Mr(s){return Vi(s,"remoteDocumentsV14")}function ol(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qp(s,e){const r=e.documentKey.path.toArray();return[s,Go(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function Ld(s,e){const r=s.path.toArray(),a=e.path.toArray();let h=0;for(let m=0;m<r.length-2&&m<a.length-2;++m)if(h=yr(r[m],a[m]),h)return h;return h=yr(r.length,a.length),h||(h=yr(r[r.length-2],a[a.length-2]),h||yr(r[r.length-1],a[a.length-1]))}class xl{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}class Vd{constructor(e,r,a,h){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=a,this.indexManager=h}getDocument(e,r){let a=null;return this.documentOverlayCache.getOverlay(e,r).next(h=>(a=h,this.getBaseDocument(e,r,a))).next(h=>(null!==a&&Ac(a.mutation,h,po.empty(),Mi.now()),h))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(a=>this.getLocalViewOfDocuments(e,a,Hr()).next(()=>a))}getLocalViewOfDocuments(e,r,a=Hr()){const h=wa();return this.populateOverlays(e,h,r).next(()=>this.computeViews(e,r,h,a).next(m=>{let I=zl();return m.forEach((O,X)=>{I=I.insert(O,X.overlayedDocument)}),I}))}getOverlayedDocuments(e,r){const a=wa();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,Hr()))}populateOverlays(e,r,a){const h=[];return a.forEach(m=>{r.has(m)||h.push(m)}),this.documentOverlayCache.getOverlays(e,h).next(m=>{m.forEach((I,O)=>{r.set(I,O)})})}computeViews(e,r,a,h){let m=ga();const I=iu(),O=iu();return r.forEach((X,ie)=>{const Oe=a.get(ie.key);h.has(ie.key)&&(void 0===Oe||Oe.mutation instanceof El)?m=m.insert(ie.key,ie):void 0!==Oe&&(I.set(ie.key,Oe.mutation.getFieldMask()),Ac(Oe.mutation,ie,Oe.mutation.getFieldMask(),Mi.now()))}),this.recalculateAndSaveOverlays(e,m).next(X=>(X.forEach((ie,Oe)=>I.set(ie,Oe)),r.forEach((ie,Oe)=>{var st;return O.set(ie,new xl(Oe,null!==(st=I.get(ie))&&void 0!==st?st:null))}),O))}recalculateAndSaveOverlays(e,r){const a=iu();let h=new ji((I,O)=>I-O),m=Hr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(I=>{for(const O of I)O.keys().forEach(X=>{const ie=r.get(X);if(null===ie)return;let Oe=a.get(X)||po.empty();Oe=O.applyToLocalView(ie,Oe),a.set(X,Oe);const st=(h.get(O.batchId)||Hr()).add(X);h=h.insert(O.batchId,st)})}).next(()=>{const I=[],O=h.getReverseIterator();for(;O.hasNext();){const X=O.getNext(),ie=X.key,Oe=X.value,st=_h();Oe.forEach(kt=>{if(!m.has(kt)){const nn=gh(r.get(kt),a.get(kt));null!==nn&&st.set(kt,nn),m=m.add(kt)}}),I.push(this.documentOverlayCache.saveOverlays(e,ie,st))}return ge.waitFor(I)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,r,a){return xn.isDocumentKey((h=r).path)&&null===h.collectionGroup&&0===h.filters.length?this.getDocumentsMatchingDocumentQuery(e,r.path):xu(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,a):this.getDocumentsMatchingCollectionQuery(e,r,a);var h}getNextDocuments(e,r,a,h){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,a,h).next(m=>{const I=h-m.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,a.largestBatchId,h-m.size):ge.resolve(wa());let O=-1,X=m;return I.next(ie=>ge.forEach(ie,(Oe,st)=>(O<st.largestBatchId&&(O=st.largestBatchId),m.get(Oe)?ge.resolve():this.getBaseDocument(e,Oe,st).next(kt=>{X=X.insert(Oe,kt)}))).next(()=>this.populateOverlays(e,ie,m)).next(()=>this.computeViews(e,X,ie,Hr())).next(Oe=>({batchId:O,changes:ru(Oe)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new xn(r)).next(a=>{let h=zl();return a.isFoundDocument()&&(h=h.insert(a.key,a)),h})}getDocumentsMatchingCollectionGroupQuery(e,r,a){const h=r.collectionGroup;let m=zl();return this.indexManager.getCollectionParents(e,h).next(I=>ge.forEach(I,O=>{const X=(ie=r,Oe=O.child(h),new Wa(Oe,null,ie.explicitOrderBy.slice(),ie.filters.slice(),ie.limit,ie.limitType,ie.startAt,ie.endAt));var ie,Oe;return this.getDocumentsMatchingCollectionQuery(e,X,a).next(ie=>{ie.forEach((Oe,st)=>{m=m.insert(Oe,st)})})}).next(()=>m))}getDocumentsMatchingCollectionQuery(e,r,a){let h;return this.remoteDocumentCache.getAllFromCollection(e,r.path,a).next(m=>(h=m,this.documentOverlayCache.getOverlaysForCollection(e,r.path,a.largestBatchId))).next(m=>{m.forEach((O,X)=>{const ie=X.getKey();null===h.get(ie)&&(h=h.insert(ie,ze.newInvalidDocument(ie)))});let I=zl();return h.forEach((O,X)=>{const ie=m.get(O);void 0!==ie&&Ac(ie.mutation,X,po.empty(),Mi.now()),Ru(r,X)&&(I=I.insert(O,X))}),I})}getBaseDocument(e,r,a){return null===a||1===a.mutation.type?this.remoteDocumentCache.getEntry(e,r):ge.resolve(ze.newInvalidDocument(r))}}class lm{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,r){return ge.resolve(this.Zn.get(r))}saveBundleMetadata(e,r){var a;return this.Zn.set(r.id,{id:(a=r).id,version:a.version,createTime:Xs(a.createTime)}),ge.resolve()}getNamedQuery(e,r){return ge.resolve(this.ts.get(r))}saveNamedQuery(e,r){return this.ts.set(r.name,{name:(a=r).name,query:Oh(a.bundledQuery),readTime:Xs(a.readTime)}),ge.resolve();var a}}class $f{constructor(){this.overlays=new ji(xn.comparator),this.es=new Map}getOverlay(e,r){return ge.resolve(this.overlays.get(r))}getOverlays(e,r){const a=wa();return ge.forEach(r,h=>this.getOverlay(e,h).next(m=>{null!==m&&a.set(h,m)})).next(()=>a)}saveOverlays(e,r,a){return a.forEach((h,m)=>{this.ue(e,r,m)}),ge.resolve()}removeOverlaysForBatchId(e,r,a){const h=this.es.get(a);return void 0!==h&&(h.forEach(m=>this.overlays=this.overlays.remove(m)),this.es.delete(a)),ge.resolve()}getOverlaysForCollection(e,r,a){const h=wa(),m=r.length+1,I=new xn(r.child("")),O=this.overlays.getIteratorFrom(I);for(;O.hasNext();){const X=O.getNext().value,ie=X.getKey();if(!r.isPrefixOf(ie.path))break;ie.path.length===m&&X.largestBatchId>a&&h.set(X.getKey(),X)}return ge.resolve(h)}getOverlaysForCollectionGroup(e,r,a,h){let m=new ji((ie,Oe)=>ie-Oe);const I=this.overlays.getIterator();for(;I.hasNext();){const ie=I.getNext().value;if(ie.getKey().getCollectionGroup()===r&&ie.largestBatchId>a){let Oe=m.get(ie.largestBatchId);null===Oe&&(Oe=wa(),m=m.insert(ie.largestBatchId,Oe)),Oe.set(ie.getKey(),ie)}}const O=wa(),X=m.getIterator();for(;X.hasNext()&&(X.getNext().value.forEach((ie,Oe)=>O.set(ie,Oe)),!(O.size()>=h)););return ge.resolve(O)}ue(e,r,a){const h=this.overlays.get(a.key);if(null!==h){const I=this.es.get(h.largestBatchId).delete(a.key);this.es.set(h.largestBatchId,I)}this.overlays=this.overlays.insert(a.key,new Hu(r,a));let m=this.es.get(r);void 0===m&&(m=Hr(),this.es.set(r,m)),this.es.set(r,m.add(a.key))}}class Rl{constructor(){this.ns=new zn(io.ss),this.rs=new zn(io.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,r){const a=new io(e,r);this.ns=this.ns.add(a),this.rs=this.rs.add(a)}us(e,r){e.forEach(a=>this.addReference(a,r))}removeReference(e,r){this.cs(new io(e,r))}hs(e,r){e.forEach(a=>this.removeReference(a,r))}ls(e){const r=new xn(new zr([])),a=new io(r,e),h=new io(r,e+1),m=[];return this.rs.forEachInRange([a,h],I=>{this.cs(I),m.push(I.key)}),m}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const r=new xn(new zr([])),a=new io(r,e),h=new io(r,e+1);let m=Hr();return this.rs.forEachInRange([a,h],I=>{m=m.add(I.key)}),m}containsKey(e){const r=new io(e,0),a=this.ns.firstAfterOrEqual(r);return null!==a&&e.isEqual(a.key)}}class io{constructor(e,r){this.key=e,this._s=r}static ss(e,r){return xn.comparator(e.key,r.key)||yr(e._s,r._s)}static os(e,r){return yr(e._s,r._s)||xn.comparator(e.key,r.key)}}class qu{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.ws=1,this.gs=new zn(io.ss)}checkEmpty(e){return ge.resolve(0===this.mutationQueue.length)}addMutationBatch(e,r,a,h){const m=this.ws;this.ws++;const I=new kc(m,r,a,h);this.mutationQueue.push(I);for(const O of h)this.gs=this.gs.add(new io(O.key,m)),this.indexManager.addToCollectionParentIndex(e,O.key.path.popLast());return ge.resolve(I)}lookupMutationBatch(e,r){return ge.resolve(this.ys(r))}getNextMutationBatchAfterBatchId(e,r){const h=this.ps(r+1),m=h<0?0:h;return ge.resolve(this.mutationQueue.length>m?this.mutationQueue[m]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const a=new io(r,0),h=new io(r,Number.POSITIVE_INFINITY),m=[];return this.gs.forEachInRange([a,h],I=>{const O=this.ys(I._s);m.push(O)}),ge.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,r){let a=new zn(yr);return r.forEach(h=>{const m=new io(h,0),I=new io(h,Number.POSITIVE_INFINITY);this.gs.forEachInRange([m,I],O=>{a=a.add(O._s)})}),ge.resolve(this.Is(a))}getAllMutationBatchesAffectingQuery(e,r){const a=r.path,h=a.length+1;let m=a;xn.isDocumentKey(m)||(m=m.child(""));const I=new io(new xn(m),0);let O=new zn(yr);return this.gs.forEachWhile(X=>{const ie=X.key.path;return!!a.isPrefixOf(ie)&&(ie.length===h&&(O=O.add(X._s)),!0)},I),ge.resolve(this.Is(O))}Is(e){const r=[];return e.forEach(a=>{const h=this.ys(a);null!==h&&r.push(h)}),r}removeMutationBatch(e,r){Hn(0===this.Ts(r.batchId,"removed")),this.mutationQueue.shift();let a=this.gs;return ge.forEach(r.mutations,h=>{const m=new io(h.key,r.batchId);return a=a.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,h.key)}).next(()=>{this.gs=a})}An(e){}containsKey(e,r){const a=new io(r,0),h=this.gs.firstAfterOrEqual(a);return ge.resolve(r.isEqual(h&&h.key))}performConsistencyCheck(e){return ge.resolve()}Ts(e,r){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const r=this.ps(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class Ku{constructor(e){this.Es=e,this.docs=new ji(xn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const a=r.key,h=this.docs.get(a),m=h?h.size:0,I=this.Es(r);return this.docs=this.docs.insert(a,{document:r.mutableCopy(),size:I}),this.size+=I-m,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const a=this.docs.get(r);return ge.resolve(a?a.document.mutableCopy():ze.newInvalidDocument(r))}getEntries(e,r){let a=ga();return r.forEach(h=>{const m=this.docs.get(h);a=a.insert(h,m?m.document.mutableCopy():ze.newInvalidDocument(h))}),ge.resolve(a)}getAllFromCollection(e,r,a){let h=ga();const m=new xn(r.child("")),I=this.docs.getIteratorFrom(m);for(;I.hasNext();){const{key:O,value:{document:X}}=I.getNext();if(!r.isPrefixOf(O.path))break;O.path.length>r.length+1||S(V(X),a)<=0||(h=h.insert(X.key,X.mutableCopy()))}return ge.resolve(h)}getAllFromCollectionGroup(e,r,a,h){Fn()}As(e,r){return ge.forEach(this.docs,a=>r(a))}newChangeBuffer(e){return new jh(this)}getSize(e){return ge.resolve(this.size)}}class jh extends uc{constructor(e){super(),this.Yn=e}applyChanges(e){const r=[];return this.changes.forEach((a,h)=>{h.isValidDocument()?r.push(this.Yn.addEntry(e,h)):this.Yn.removeEntry(a)}),ge.waitFor(r)}getFromCache(e,r){return this.Yn.getEntry(e,r)}getAllFromCache(e,r){return this.Yn.getEntries(e,r)}}class Hh{constructor(e){this.persistence=e,this.Rs=new bl(r=>cn(r),Yn),this.lastRemoteSnapshotVersion=dr.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Rl,this.targetCount=0,this.vs=Ql.Pn()}forEachTarget(e,r){return this.Rs.forEach((a,h)=>r(h)),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,r,a){return a&&(this.lastRemoteSnapshotVersion=a),r>this.bs&&(this.bs=r),ge.resolve()}Dn(e){this.Rs.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.vs=new Ql(r),this.highestTargetId=r),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,r){return this.Dn(r),this.targetCount+=1,ge.resolve()}updateTargetData(e,r){return this.Dn(r),ge.resolve()}removeTargetData(e,r){return this.Rs.delete(r.target),this.Ps.ls(r.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,r,a){let h=0;const m=[];return this.Rs.forEach((I,O)=>{O.sequenceNumber<=r&&null===a.get(O.targetId)&&(this.Rs.delete(I),m.push(this.removeMatchingKeysForTargetId(e,O.targetId)),h++)}),ge.waitFor(m).next(()=>h)}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,r){const a=this.Rs.get(r)||null;return ge.resolve(a)}addMatchingKeys(e,r,a){return this.Ps.us(r,a),ge.resolve()}removeMatchingKeys(e,r,a){this.Ps.hs(r,a);const h=this.persistence.referenceDelegate,m=[];return h&&r.forEach(I=>{m.push(h.markPotentiallyOrphaned(e,I))}),ge.waitFor(m)}removeMatchingKeysForTargetId(e,r){return this.Ps.ls(r),ge.resolve()}getMatchingKeysForTargetId(e,r){const a=this.Ps.ds(r);return ge.resolve(a)}containsKey(e,r){return ge.resolve(this.Ps.containsKey(r))}}class Kp{constructor(e,r){this.Vs={},this.overlays={},this.Ss=new rs(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new Hh(this),this.indexManager=new Gp,this.remoteDocumentCache=new Ku(a=>this.referenceDelegate.xs(a)),this.It=new au(r),this.Ns=new lm(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new $f,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let a=this.Vs[e.toKey()];return a||(a=new qu(r,this.referenceDelegate),this.Vs[e.toKey()]=a),a}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,r,a){Kt("MemoryPersistence","Starting transaction:",e);const h=new Xl(this.Ss.next());return this.referenceDelegate.ks(),a(h).next(m=>this.referenceDelegate.Os(h).next(()=>m)).toPromise().then(m=>(h.raiseOnCommittedEvent(),m))}Ms(e,r){return ge.or(Object.values(this.Vs).map(a=>()=>a.containsKey(e,r)))}}class Xl extends J{constructor(e){super(),this.currentSequenceNumber=e}}class Bc{constructor(e){this.persistence=e,this.Fs=new Rl,this.$s=null}static Bs(e){return new Bc(e)}get Ls(){if(this.$s)return this.$s;throw Fn()}addReference(e,r,a){return this.Fs.addReference(a,r),this.Ls.delete(a.toString()),ge.resolve()}removeReference(e,r,a){return this.Fs.removeReference(a,r),this.Ls.add(a.toString()),ge.resolve()}markPotentiallyOrphaned(e,r){return this.Ls.add(r.toString()),ge.resolve()}removeTarget(e,r){this.Fs.ls(r.targetId).forEach(h=>this.Ls.add(h.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,r.targetId).next(h=>{h.forEach(m=>this.Ls.add(m.toString()))}).next(()=>a.removeTargetData(e,r))}ks(){this.$s=new Set}Os(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.Ls,a=>{const h=xn.fromPath(a);return this.Us(e,h).next(m=>{m||r.removeEntry(h,dr.min())})}).next(()=>(this.$s=null,r.apply(e)))}updateLimboDocument(e,r){return this.Us(e,r).next(a=>{a?this.Ls.delete(r.toString()):this.Ls.add(r.toString())})}xs(e){return 0}Us(e,r){return ge.or([()=>ge.resolve(this.Fs.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ms(e,r)])}}class Bd{constructor(e){this.It=e}$(e,r,a,h){const m=new qt("createOrUpgrade",r);var O;a<1&&h>=1&&(e.createObjectStore("owner"),(O=e).createObjectStore("mutationQueues",{keyPath:"userId"}),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kp,{unique:!0}),O.createObjectStore("documentMutations"),$d(e),function(O){O.createObjectStore("remoteDocuments")}(e));let I=ge.resolve();return a<3&&h>=3&&(0!==a&&(function(O){O.deleteObjectStore("targetDocuments"),O.deleteObjectStore("targets"),O.deleteObjectStore("targetGlobal")}(e),$d(e)),I=I.next(()=>function(O){const X=O.store("targetGlobal"),ie={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:dr.min().toTimestamp(),targetCount:0};return X.put("targetGlobalKey",ie)}(m))),a<4&&h>=4&&(0!==a&&(I=I.next(()=>function(O,X){return X.store("mutations").W().next(ie=>{O.deleteObjectStore("mutations"),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kp,{unique:!0});const Oe=X.store("mutations"),st=ie.map(kt=>Oe.put(kt));return ge.waitFor(st)})}(e,m))),I=I.next(()=>{!function(O){O.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),a<5&&h>=5&&(I=I.next(()=>this.qs(m))),a<6&&h>=6&&(I=I.next(()=>(function(O){O.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(m)))),a<7&&h>=7&&(I=I.next(()=>this.Gs(m))),a<8&&h>=8&&(I=I.next(()=>this.Qs(e,m))),a<9&&h>=9&&(I=I.next(()=>{!function(O){O.objectStoreNames.contains("remoteDocumentChanges")&&O.deleteObjectStore("remoteDocumentChanges")}(e)})),a<10&&h>=10&&(I=I.next(()=>this.js(m))),a<11&&h>=11&&(I=I.next(()=>{(function(O){O.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(O){O.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),a<12&&h>=12&&(I=I.next(()=>{!function(O){const X=O.createObjectStore("documentOverlays",{keyPath:Vp});X.createIndex("collectionPathOverlayIndex",by,{unique:!1}),X.createIndex("collectionGroupOverlayIndex",Bp,{unique:!1})}(e)})),a<13&&h>=13&&(I=I.next(()=>function(O){const X=O.createObjectStore("remoteDocumentsV14",{keyPath:Ah});X.createIndex("documentKeyIndex",Nf),X.createIndex("collectionGroupIndex",xh)}(e)).next(()=>this.Ws(e,m)).next(()=>e.deleteObjectStore("remoteDocuments"))),a<14&&h>=14&&(I=I.next(()=>this.zs(e,m))),a<15&&h>=15&&(I=I.next(()=>function(O){O.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),O.createObjectStore("indexState",{keyPath:Rh}).createIndex("sequenceNumberIndex",Lp,{unique:!1}),O.createObjectStore("indexEntries",{keyPath:ju}).createIndex("documentKeyIndex",Da,{unique:!1})}(e))),I}Ks(e){let r=0;return e.store("remoteDocuments").Z((a,h)=>{r+=Vh(h)}).next(()=>{const a={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",a)})}qs(e){const r=e.store("mutationQueues"),a=e.store("mutations");return r.W().next(h=>ge.forEach(h,m=>{const I=IDBKeyRange.bound([m.userId,-1],[m.userId,m.lastAcknowledgedBatchId]);return a.W("userMutationsIndex",I).next(O=>ge.forEach(O,X=>{Hn(X.userId===m.userId);const ie=sl(this.It,X);return Lc(e,m.userId,ie).next(()=>{})}))}))}Gs(e){const r=e.store("targetDocuments"),a=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(h=>{const m=[];return a.Z((I,O)=>{const X=new zr(I),ie=[0,js(X)];m.push(r.get(ie).next(Oe=>Oe?ge.resolve():r.put({targetId:0,path:js(X),sequenceNumber:h.highestListenSequenceNumber})))}).next(()=>ge.waitFor(m))})}Qs(e,r){e.createObjectStore("collectionParents",{keyPath:im});const a=r.store("collectionParents"),h=new Pd,m=I=>{if(h.add(I)){const O=I.lastSegment(),X=I.popLast();return a.put({collectionId:O,parent:js(X)})}};return r.store("remoteDocuments").Z({X:!0},(I,O)=>{const X=new zr(I);return m(X.popLast())}).next(()=>r.store("documentMutations").Z({X:!0},([I,O,X],ie)=>{const Oe=Dl(O);return m(Oe.popLast())}))}js(e){const r=e.store("targets");return r.Z((a,h)=>{const m=Wu(h),I=Sa(this.It,m);return r.put(I)})}Ws(e,r){const a=r.store("remoteDocuments"),h=[];return a.Z((m,I)=>{const O=r.store("remoteDocumentsV14"),X=(ie=I,ie.document?new xn(zr.fromString(ie.document.name).popFirst(5)):ie.noDocument?xn.fromSegments(ie.noDocument.path):ie.unknownDocument?xn.fromSegments(ie.unknownDocument.path):Fn()).path.toArray();var ie;const Oe={prefixPath:X.slice(0,X.length-2),collectionGroup:X[X.length-2],documentId:X[X.length-1],readTime:I.readTime||[0,0],unknownDocument:I.unknownDocument,noDocument:I.noDocument,document:I.document,hasCommittedMutations:!!I.hasCommittedMutations};h.push(O.put(Oe))}).next(()=>ge.waitFor(h))}zs(e,r){const a=r.store("mutations"),h=Ya(this.It),m=new Kp(Bc.Bs,this.It.re);return a.W().next(I=>{const O=new Map;return I.forEach(X=>{var ie;let Oe=null!==(ie=O.get(X.userId))&&void 0!==ie?ie:Hr();sl(this.It,X).keys().forEach(st=>Oe=Oe.add(st)),O.set(X.userId,Oe)}),ge.forEach(O,(X,ie)=>{const Oe=new vn(ie),st=Yl.oe(this.It,Oe),kt=m.getIndexManager(Oe),nn=kd.oe(Oe,this.It,kt,m.referenceDelegate);return new Vd(h,nn,st,kt).recalculateAndSaveOverlaysForDocumentKeys(new Nc(r,rs.at),X).next()})})}}function $d(s){s.createObjectStore("targetDocuments",{keyPath:Fp}).createIndex("documentTargetsIndex",kf,{unique:!0}),s.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Oc,{unique:!0}),s.createObjectStore("targetGlobal")}const al="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Wh{constructor(e,r,a,h,m,I,O,X,ie,Oe,st=15){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=a,this.Hs=m,this.window=I,this.document=O,this.Js=ie,this.Ys=Oe,this.Xs=st,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=kt=>Promise.resolve(),!Wh.C())throw new Lt(bt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xa(this,h),this.ii=r+"main",this.It=new au(X),this.ri=new Rn(this.ii,this.Xs,new Bd(this.It)),this.Cs=new am(this.referenceDelegate,this.It),this.remoteDocumentCache=Ya(this.It),this.Ns=new Up,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===Oe&&lr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Lt(bt.FAILED_PRECONDITION,al);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new rs(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var r=this;return this.si=function(){var a=(0,y.Z)(function*(h){if(r.started)return e(h)});return function(h){return a.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var r=(0,y.Z)(function*(a){null===a.newVersion&&(yield e())});return function(a){return r.apply(this,arguments)}}())}setNetworkEnabled(e){var r=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,y.Z)(function*(){r.started&&(yield r.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Uf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(r=>{r||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(r=>this.isPrimary&&!r?this._i(e).next(()=>!1):!!r&&this.wi(e).next(()=>!0))).catch(e=>{if(Nr(e))return Kt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Kt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Zu(e).get("owner").next(r=>ge.resolve(this.mi(r)))}gi(e){return Uf(e).delete(this.clientId)}yi(){var e=this;return(0,y.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const r=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",a=>{const h=Vi(a,"clientMetadata");return h.W().next(m=>{const I=e.Ii(m,18e5),O=m.filter(X=>-1===I.indexOf(X));return ge.forEach(O,X=>h.delete(X.clientId)).next(()=>O)})}).catch(()=>[]);if(e.oi)for(const a of r)e.oi.removeItem(e.Ti(a.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ge.resolve(!0):Zu(e).get("owner").next(r=>{if(null!==r&&this.pi(r.leaseTimestampMs,5e3)&&!this.Ei(r.ownerId)){if(this.mi(r)&&this.networkEnabled)return!0;if(!this.mi(r)){if(!r.allowTabSynchronization)throw new Lt(bt.FAILED_PRECONDITION,al);return!1}}return!(!this.networkEnabled||!this.inForeground)||Uf(e).W().next(a=>void 0===this.Ii(a,5e3).find(h=>{if(this.clientId!==h.clientId){const I=!this.inForeground&&h.inForeground,O=this.networkEnabled===h.networkEnabled;if(!this.networkEnabled&&h.networkEnabled||I&&O)return!0}return!1}))}).next(r=>(this.isPrimary!==r&&Kt("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var e=this;return(0,y.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],r=>{const a=new Nc(r,rs.at);return e._i(a).next(()=>e.gi(a))}),e.ri.close(),e.Pi()})()}Ii(e,r){return e.filter(a=>this.pi(a.updateTimeMs,r)&&!this.Ei(a.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Uf(e).W().next(r=>this.Ii(r,18e5).map(a=>a.clientId)))}get started(){return this.Ds}getMutationQueue(e,r){return kd.oe(e,this.It,r,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Od(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Yl.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,r,a){Kt("IndexedDbPersistence","Starting transaction:",e);const h="readonly"===r?"readonly":"readwrite",m=15===(I=this.Xs)?om:14===I?xd:13===I?ou:12===I?rl:11===I?sm:void Fn();var I;let O;return this.ri.runTransaction(e,h,m,X=>(O=new Nc(X,this.Ss?this.Ss.next():rs.at),"readwrite-primary"===r?this.fi(O).next(ie=>!!ie||this.di(O)).next(ie=>{if(!ie)throw lr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Lt(bt.FAILED_PRECONDITION,j);return a(O)}).next(ie=>this.wi(O).next(()=>ie)):this.Vi(O).next(()=>a(O)))).then(X=>(O.raiseOnCommittedEvent(),X))}Vi(e){return Zu(e).get("owner").next(r=>{if(null!==r&&this.pi(r.leaseTimestampMs,5e3)&&!this.Ei(r.ownerId)&&!this.mi(r)&&!(this.Ys||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Lt(bt.FAILED_PRECONDITION,al)})}wi(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zu(e).put("owner",r)}static C(){return Rn.C()}_i(e){const r=Zu(e);return r.get("owner").next(a=>this.mi(a)?(Kt("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):ge.resolve())}pi(e,r){const a=Date.now();return!(e<a-r||e>a&&(lr(`Detected an update time that is in the future: ${e} > ${a}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,oe.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var r;try{const a=null!==(null===(r=this.oi)||void 0===r?void 0:r.getItem(this.Ti(e)));return Kt("IndexedDbPersistence",`Client '${e}' ${a?"is":"is not"} zombied in LocalStorage`),a}catch(a){return lr("IndexedDbPersistence","Failed to get zombied client id.",a),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){lr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Zu(s){return Vi(s,"owner")}function Uf(s){return Vi(s,"clientMetadata")}function jf(s,e){let r=s.projectId;return s.isDefaultDatabase||(r+="."+s.database),"firestore/"+e+"/"+r+"/"}class Hf{constructor(e,r,a,h){this.targetId=e,this.fromCache=r,this.Si=a,this.Di=h}static Ci(e,r){let a=Hr(),h=Hr();for(const m of r.docChanges)switch(m.type){case 0:a=a.add(m.doc.key);break;case 1:h=h.add(m.doc.key)}return new Hf(e,r.fromCache,a,h)}}class Wf{constructor(){this.xi=!1}initialize(e,r){this.Ni=e,this.indexManager=r,this.xi=!0}getDocumentsMatchingQuery(e,r,a,h){return this.ki(e,r).next(m=>m||this.Oi(e,r,h,a)).next(m=>m||this.Mi(e,r))}ki(e,r){if(Wo(r))return ge.resolve(null);let a=Wi(r);return this.indexManager.getIndexType(e,a).next(h=>0===h?null:(null!==r.limit&&1===h&&(r=Jc(r,null,"F"),a=Wi(r)),this.indexManager.getDocumentsMatchingTarget(e,a).next(m=>{const I=Hr(...m);return this.Ni.getDocuments(e,I).next(O=>this.indexManager.getMinOffset(e,a).next(X=>{const ie=this.Fi(r,O);return this.$i(r,ie,I,X.readTime)?this.ki(e,Jc(r,null,"F")):this.Bi(e,ie,r,X)}))})))}Oi(e,r,a,h){return Wo(r)||h.isEqual(dr.min())?this.Mi(e,r):this.Ni.getDocuments(e,a).next(m=>{const I=this.Fi(r,m);return this.$i(r,I,a,h)?this.Mi(e,r):(Lr()<=ke.in.DEBUG&&Kt("QueryEngine","Re-using previous result from %s to execute query: %s",h.toString(),tl(r)),this.Bi(e,I,r,Qa(h,-1)))})}Fi(e,r){let a=new zn(fh(e));return r.forEach((h,m)=>{Ru(e,m)&&(a=a.add(m))}),a}$i(e,r,a,h){if(null===e.limit)return!1;if(a.size!==r.size)return!0;const m="F"===e.limitType?r.last():r.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(h)>0)}Mi(e,r){return Lr()<=ke.in.DEBUG&&Kt("QueryEngine","Using full collection scan to execute query:",tl(r)),this.Ni.getDocumentsMatchingQuery(e,r,x.min())}Bi(e,r,a,h){return this.Ni.getDocumentsMatchingQuery(e,a,h).next(m=>(r.forEach(I=>{m=m.insert(I.key,I)}),m))}}class Zp{constructor(e,r,a,h){this.persistence=e,this.Li=r,this.It=h,this.Ui=new ji(yr),this.qi=new bl(m=>cn(m),Yn),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(a)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Vd(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ui))}}function Qp(s,e,r,a){return new Zp(s,e,r,a)}function Gh(s,e){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,y.Z)(function*(s,e){const r=hn(s);return yield r.persistence.runTransaction("Handle user change","readonly",a=>{let h;return r.mutationQueue.getAllMutationBatches(a).next(m=>(h=m,r.Qi(e),r.mutationQueue.getAllMutationBatches(a))).next(m=>{const I=[],O=[];let X=Hr();for(const ie of h){I.push(ie.batchId);for(const Oe of ie.mutations)X=X.add(Oe.key)}for(const ie of m){O.push(ie.batchId);for(const Oe of ie.mutations)X=X.add(Oe.key)}return r.localDocuments.getDocuments(a,X).next(ie=>({ji:ie,removedBatchIds:I,addedBatchIds:O}))})})}),Xp.apply(this,arguments)}function Iy(s,e){const r=hn(s);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const h=e.batch.keys(),m=r.Gi.newChangeBuffer({trackRemovals:!0});return function(I,O,X,ie){const Oe=X.batch,st=Oe.keys();let kt=ge.resolve();return st.forEach(nn=>{kt=kt.next(()=>ie.getEntry(O,nn)).next(pn=>{const qn=X.docVersions.get(nn);Hn(null!==qn),pn.version.compareTo(qn)<0&&(Oe.applyToRemoteDocument(pn,X),pn.isValidDocument()&&(pn.setReadTime(X.commitVersion),ie.addEntry(pn)))})}),kt.next(()=>I.mutationQueue.removeMutationBatch(O,Oe))}(r,a,e,m).next(()=>m.apply(a)).next(()=>r.mutationQueue.performConsistencyCheck(a)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(a,h,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(I){let O=Hr();for(let X=0;X<I.mutationResults.length;++X)I.mutationResults[X].transformResults.length>0&&(O=O.add(I.batch.mutations[X].key));return O}(e))).next(()=>r.localDocuments.getDocuments(a,h))})}function cm(s){const e=hn(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Cs.getLastRemoteSnapshotVersion(r))}function Cy(s,e){const r=hn(s),a=e.snapshotVersion;let h=r.Ui;return r.persistence.runTransaction("Apply remote event","readwrite-primary",m=>{const I=r.Gi.newChangeBuffer({trackRemovals:!0});h=r.Ui;const O=[];e.targetChanges.forEach((Oe,st)=>{const kt=h.get(st);if(!kt)return;O.push(r.Cs.removeMatchingKeys(m,Oe.removedDocuments,st).next(()=>r.Cs.addMatchingKeys(m,Oe.addedDocuments,st)));let nn=kt.withSequenceNumber(m.currentSequenceNumber);var pn,qn,sr;e.targetMismatches.has(st)?nn=nn.withResumeToken(Cs.EMPTY_BYTE_STRING,dr.min()).withLastLimboFreeSnapshotVersion(dr.min()):Oe.resumeToken.approximateByteSize()>0&&(nn=nn.withResumeToken(Oe.resumeToken,a)),h=h.insert(st,nn),qn=nn,sr=Oe,(0===(pn=kt).resumeToken.approximateByteSize()||qn.snapshotVersion.toMicroseconds()-pn.snapshotVersion.toMicroseconds()>=3e8||sr.addedDocuments.size+sr.modifiedDocuments.size+sr.removedDocuments.size>0)&&O.push(r.Cs.updateTargetData(m,nn))});let X=ga(),ie=Hr();if(e.documentUpdates.forEach(Oe=>{e.resolvedLimboDocuments.has(Oe)&&O.push(r.persistence.referenceDelegate.updateLimboDocument(m,Oe))}),O.push(um(m,I,e.documentUpdates).next(Oe=>{X=Oe.Wi,ie=Oe.zi})),!a.isEqual(dr.min())){const Oe=r.Cs.getLastRemoteSnapshotVersion(m).next(st=>r.Cs.setTargetsMetadata(m,m.currentSequenceNumber,a));O.push(Oe)}return ge.waitFor(O).next(()=>I.apply(m)).next(()=>r.localDocuments.getLocalViewOfDocuments(m,X,ie)).next(()=>X)}).then(m=>(r.Ui=h,m))}function um(s,e,r){let a=Hr(),h=Hr();return r.forEach(m=>a=a.add(m)),e.getEntries(s,a).next(m=>{let I=ga();return r.forEach((O,X)=>{const ie=m.get(O);X.isFoundDocument()!==ie.isFoundDocument()&&(h=h.add(O)),X.isNoDocument()&&X.version.isEqual(dr.min())?(e.removeEntry(O,X.readTime),I=I.insert(O,X)):!ie.isValidDocument()||X.version.compareTo(ie.version)>0||0===X.version.compareTo(ie.version)&&ie.hasPendingWrites?(e.addEntry(X),I=I.insert(O,X)):Kt("LocalStore","Ignoring outdated watch update for ",O,". Current version:",ie.version," Watch version:",X.version)}),{Wi:I,zi:h}})}function wy(s,e){const r=hn(s);return r.persistence.runTransaction("Get next mutation batch","readonly",a=>(void 0===e&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function Ud(s,e){const r=hn(s);return r.persistence.runTransaction("Allocate target","readwrite",a=>{let h;return r.Cs.getTargetData(a,e).next(m=>m?(h=m,ge.resolve(h)):r.Cs.allocateTargetId(a).next(I=>(h=new il(e,I,0,a.currentSequenceNumber),r.Cs.addTargetData(a,h).next(()=>h))))}).then(a=>{const h=r.Ui.get(a.targetId);return(null===h||a.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(r.Ui=r.Ui.insert(a.targetId,a),r.qi.set(e,a.targetId)),a})}function jd(s,e,r){return Jp.apply(this,arguments)}function Jp(){return Jp=(0,y.Z)(function*(s,e,r){const a=hn(s),h=a.Ui.get(e),m=r?"readwrite":"readwrite-primary";try{r||(yield a.persistence.runTransaction("Release target",m,I=>a.persistence.referenceDelegate.removeTarget(I,h)))}catch(I){if(!Nr(I))throw I;Kt("LocalStore",`Failed to update sequence numbers for target ${e}: ${I}`)}a.Ui=a.Ui.remove(e),a.qi.delete(h.target)}),Jp.apply(this,arguments)}function Gf(s,e,r){const a=hn(s);let h=dr.min(),m=Hr();return a.persistence.runTransaction("Execute query","readonly",I=>function(O,X,ie){const Oe=hn(O),st=Oe.qi.get(ie);return void 0!==st?ge.resolve(Oe.Ui.get(st)):Oe.Cs.getTargetData(X,ie)}(a,I,Wi(e)).next(O=>{if(O)return h=O.lastLimboFreeSnapshotVersion,a.Cs.getMatchingKeysForTargetId(I,O.targetId).next(X=>{m=X})}).next(()=>a.Li.getDocumentsMatchingQuery(I,e,r?h:dr.min(),r?m:Hr())).next(O=>(zh(a,oc(e),O),{documents:O,Hi:m})))}function dm(s,e){const r=hn(s),a=hn(r.Cs),h=r.Ui.get(e);return h?Promise.resolve(h.target):r.persistence.runTransaction("Get target data","readonly",m=>a.se(m,e).next(I=>I?I.target:null))}function dc(s,e){const r=hn(s),a=r.Ki.get(e)||dr.min();return r.persistence.runTransaction("Get new document changes","readonly",h=>r.Gi.getAllFromCollectionGroup(h,e,Qa(a,-1),Number.MAX_SAFE_INTEGER)).then(h=>(zh(r,e,h),h))}function zh(s,e,r){let a=s.Ki.get(e)||dr.min();r.forEach((h,m)=>{m.readTime.compareTo(a)>0&&(a=m.readTime)}),s.Ki.set(e,a)}function Yh(){return Yh=(0,y.Z)(function*(s,e,r,a){const h=hn(s);let m=Hr(),I=ga();for(const ie of r){const Oe=e.Ji(ie.metadata.name);ie.document&&(m=m.add(Oe));const st=e.Yi(ie);st.setReadTime(e.Xi(ie.metadata.readTime)),I=I.insert(Oe,st)}const O=h.Gi.newChangeBuffer({trackRemovals:!0}),X=yield Ud(h,(ie=a,Wi(gi(zr.fromString(`__bundle__/docs/${ie}`)))));var ie;return h.persistence.runTransaction("Apply bundle documents","readwrite",ie=>um(ie,O,I).next(Oe=>(O.apply(ie),Oe)).next(Oe=>h.Cs.removeMatchingKeysForTargetId(ie,X.targetId).next(()=>h.Cs.addMatchingKeys(ie,m,X.targetId)).next(()=>h.localDocuments.getLocalViewOfDocuments(ie,Oe.Wi,Oe.zi)).next(()=>Oe.Wi)))}),Yh.apply(this,arguments)}function Hd(s,e){return Wd.apply(this,arguments)}function Wd(){return Wd=(0,y.Z)(function*(s,e,r=Hr()){const a=yield Ud(s,Wi(Oh(e.bundledQuery))),h=hn(s);return h.persistence.runTransaction("Save named query","readwrite",m=>{const I=Xs(e.readTime);if(a.snapshotVersion.compareTo(I)>=0)return h.Ns.saveNamedQuery(m,e);const O=a.withResumeToken(Cs.EMPTY_BYTE_STRING,I);return h.Ui=h.Ui.insert(O.targetId,O),h.Cs.updateTargetData(m,O).next(()=>h.Cs.removeMatchingKeysForTargetId(m,a.targetId)).next(()=>h.Cs.addMatchingKeys(m,r,a.targetId)).next(()=>h.Ns.saveNamedQuery(m,e))})}),Wd.apply(this,arguments)}function qh(s,e){return`firestore_clients_${s}_${e}`}function zf(s,e,r){let a=`firestore_mutations_${s}_${r}`;return e.isAuthenticated()&&(a+=`_${e.uid}`),a}function Jl(s,e){return`firestore_targets_${s}_${e}`}class Gd{constructor(e,r,a,h){this.user=e,this.batchId=r,this.state=a,this.error=h}static Zi(e,r,a){const h=JSON.parse(a);let m,I="object"==typeof h&&-1!==["pending","acknowledged","rejected"].indexOf(h.state)&&(void 0===h.error||"object"==typeof h.error);return I&&h.error&&(I="string"==typeof h.error.message&&"string"==typeof h.error.code,I&&(m=new Lt(h.error.code,h.error.message))),I?new Gd(e,r,h.state,m):(lr("SharedClientState",`Failed to parse mutation state for ID '${r}': ${a}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zd{constructor(e,r,a){this.targetId=e,this.state=r,this.error=a}static Zi(e,r){const a=JSON.parse(r);let h,m="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return m&&a.error&&(m="string"==typeof a.error.message&&"string"==typeof a.error.code,m&&(h=new Lt(a.error.code,a.error.message))),m?new zd(e,a.state,h):(lr("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yf{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Zi(e,r){const a=JSON.parse(r);let h="object"==typeof a&&a.activeTargetIds instanceof Array,m=D();for(let I=0;h&&I<a.activeTargetIds.length;++I)h=Fo(a.activeTargetIds[I]),m=m.add(a.activeTargetIds[I]);return h?new Yf(e,m):(lr("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class Qu{constructor(e,r){this.clientId=e,this.onlineState=r}static Zi(e){const r=JSON.parse(e);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new Qu(r.clientId,r.onlineState):(lr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class qf{constructor(){this.activeTargetIds=D()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Kh{constructor(e,r,a,h,m){this.window=e,this.Hs=r,this.persistenceKey=a,this.sr=h,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new ji(yr),this.started=!1,this.cr=[];const I=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=m,this.ar=qh(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new qf),this.lr=new RegExp(`^firestore_clients_${I}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${I}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${I}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(O){return`firestore_bundle_loaded_v2_${O}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,y.Z)(function*(){const r=yield e.syncEngine.vi();for(const h of r){if(h===e.sr)continue;const m=e.getItem(qh(e.persistenceKey,h));if(m){const I=Yf.Zi(h,m);I&&(e.ur=e.ur.insert(I.clientId,I))}}e.gr();const a=e.storage.getItem(e.wr);if(a){const h=e.yr(a);h&&e.pr(h)}for(const h of e.cr)e.rr(h);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let r=!1;return this.ur.forEach((a,h)=>{h.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,r,a){this.Tr(e,r,a),this.Er(e)}addLocalQueryTarget(e){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Jl(this.persistenceKey,e));if(a){const h=zd.Zi(e,a);h&&(r=h.state)}}return this.Ar.er(e),this.gr(),r}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Jl(this.persistenceKey,e))}updateQueryState(e,r,a){this.Rr(e,r,a)}handleUserChange(e,r,a){r.forEach(h=>{this.Er(h)}),this.currentUser=e,a.forEach(h=>{this.addPendingMutation(h)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return Kt("SharedClientState","READ",e,r),r}setItem(e,r){Kt("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){Kt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var r=this;const a=e;if(a.storageArea===this.storage){if(Kt("SharedClientState","EVENT",a.key,a.newValue),a.key===this.ar)return void lr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,y.Z)(function*(){if(r.started){if(null!==a.key)if(r.lr.test(a.key)){if(null==a.newValue){const h=r.vr(a.key);return r.Vr(h,null)}{const h=r.Sr(a.key,a.newValue);if(h)return r.Vr(h.clientId,h)}}else if(r.dr.test(a.key)){if(null!==a.newValue){const h=r.Dr(a.key,a.newValue);if(h)return r.Cr(h)}}else if(r._r.test(a.key)){if(null!==a.newValue){const h=r.Nr(a.key,a.newValue);if(h)return r.kr(h)}}else if(a.key===r.wr){if(null!==a.newValue){const h=r.yr(a.newValue);if(h)return r.pr(h)}}else if(a.key===r.hr){const h=function(m){let I=rs.at;if(null!=m)try{const O=JSON.parse(m);Hn("number"==typeof O),I=O}catch(O){lr("SharedClientState","Failed to read sequence number from WebStorage",O)}return I}(a.newValue);h!==rs.at&&r.sequenceNumberHandler(h)}else if(a.key===r.mr){const h=r.Or(a.newValue);yield Promise.all(h.map(m=>r.syncEngine.Mr(m)))}}else r.cr.push(a)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,r,a){const h=new Gd(this.currentUser,e,r,a),m=zf(this.persistenceKey,this.currentUser,e);this.setItem(m,h.tr())}Er(e){const r=zf(this.persistenceKey,this.currentUser,e);this.removeItem(r)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,r,a){const h=Jl(this.persistenceKey,e),m=new zd(e,r,a);this.setItem(h,m.tr())}Pr(e){const r=JSON.stringify(Array.from(e));this.setItem(this.mr,r)}vr(e){const r=this.lr.exec(e);return r?r[1]:null}Sr(e,r){const a=this.vr(e);return Yf.Zi(a,r)}Dr(e,r){const a=this.dr.exec(e),h=Number(a[1]);return Gd.Zi(new vn(void 0!==a[2]?a[2]:null),h,r)}Nr(e,r){const a=this._r.exec(e),h=Number(a[1]);return zd.Zi(h,r)}yr(e){return Qu.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var r=this;return(0,y.Z)(function*(){if(e.user.uid===r.currentUser.uid)return r.syncEngine.Fr(e.batchId,e.state,e.error);Kt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,r){const a=r?this.ur.insert(e,r):this.ur.remove(e),h=this.Ir(this.ur),m=this.Ir(a),I=[],O=[];return m.forEach(X=>{h.has(X)||I.push(X)}),h.forEach(X=>{m.has(X)||O.push(X)}),this.syncEngine.Br(I,O).then(()=>{this.ur=a})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let r=D();return e.forEach((a,h)=>{r=r.unionWith(h.activeTargetIds)}),r}}class eg{constructor(){this.Lr=new qf,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,a){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,r,a){this.Ur[e]=r}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new qf,Promise.resolve()}handleUserChange(e,r,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class tg{qr(e){}shutdown(){}}class Xu{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Kt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Kt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Ju={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Kf{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class ed extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,r,a,h,m){const I=this.ho(e,r);Kt("RestConnection","Sending: ",I,a);const O={};return this.lo(O,h,m),this.fo(e,I,O,a).then(X=>(Kt("RestConnection","Received: ",X),X),X=>{throw Ki("RestConnection",`${e} failed with error: `,X,"url: ",I,"request:",a),X})}_o(e,r,a,h,m,I){return this.ao(e,r,a,h,m)}lo(e,r,a){e["X-Goog-Api-Client"]="gl-js/ fire/"+Cr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((h,m)=>e[m]=h),a&&a.headers.forEach((h,m)=>e[m]=h)}ho(e,r){return`${this.oo}/v1/${r}:${Ju[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,r,a,h){return new Promise((m,I)=>{const O=new vt;O.setWithCredentials(!0),O.listenOnce(w.COMPLETE,()=>{try{switch(O.getLastErrorCode()){case bo.NO_ERROR:const ie=O.getResponseJson();Kt("Connection","XHR received:",JSON.stringify(ie)),m(ie);break;case bo.TIMEOUT:Kt("Connection",'RPC "'+e+'" timed out'),I(new Lt(bt.DEADLINE_EXCEEDED,"Request time out"));break;case bo.HTTP_ERROR:const Oe=O.getStatus();if(Kt("Connection",'RPC "'+e+'" failed with status:',Oe,"response text:",O.getResponseText()),Oe>0){const st=O.getResponseJson().error;if(st&&st.status&&st.message){const kt=function(nn){const pn=nn.toLowerCase().replace(/_/g,"-");return Object.values(bt).indexOf(pn)>=0?pn:bt.UNKNOWN}(st.status);I(new Lt(kt,st.message))}else I(new Lt(bt.UNKNOWN,"Server responded with status "+O.getStatus()))}else I(new Lt(bt.UNAVAILABLE,"Connection failed."));break;default:Fn()}}finally{Kt("Connection",'RPC "'+e+'" completed.')}});const X=JSON.stringify(h);O.send(r,"POST",X,a,15)})}wo(e,r,a){const h=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=No(),I=_a(),O={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(O.xmlHttpFactory=new q({})),this.lo(O.initMessageHeaders,r,a),O.encodeInitMessageHeaders=!0;const X=h.join("");Kt("Connection","Creating WebChannel: "+X,O);const ie=m.createWebChannel(X,O);let Oe=!1,st=!1;const kt=new Kf({Hr:pn=>{st?Kt("Connection","Not sending because WebChannel is closed:",pn):(Oe||(Kt("Connection","Opening WebChannel transport."),ie.open(),Oe=!0),Kt("Connection","WebChannel sending:",pn),ie.send(pn))},Jr:()=>ie.close()}),nn=(pn,qn,sr)=>{pn.listen(qn,Ai=>{try{sr(Ai)}catch(Ss){setTimeout(()=>{throw Ss},0)}})};return nn(ie,pe.EventType.OPEN,()=>{st||Kt("Connection","WebChannel transport opened.")}),nn(ie,pe.EventType.CLOSE,()=>{st||(st=!0,Kt("Connection","WebChannel transport closed"),kt.io())}),nn(ie,pe.EventType.ERROR,pn=>{st||(st=!0,Ki("Connection","WebChannel transport errored:",pn),kt.io(new Lt(bt.UNAVAILABLE,"The operation could not be completed")))}),nn(ie,pe.EventType.MESSAGE,pn=>{var qn;if(!st){const sr=pn.data[0];Hn(!!sr);const Ai=sr,Ss=Ai.error||(null===(qn=Ai[0])||void 0===qn?void 0:qn.error);if(Ss){Kt("Connection","WebChannel received error:",Ss);const Qi=Ss.status;let na=function(Gi){const So=Pi[Gi];if(void 0!==So)return ku(So)}(Qi),ds=Ss.message;void 0===na&&(na=bt.INTERNAL,ds="Unknown error status: "+Qi+" with message "+Ss.message),st=!0,kt.io(new Lt(na,ds)),ie.close()}else Kt("Connection","WebChannel received:",sr),kt.ro(sr)}}),nn(I,N.STAT_EVENT,pn=>{pn.stat===T.PROXY?Kt("Connection","Detected buffering proxy"):pn.stat===T.NOPROXY&&Kt("Connection","Detected no buffering proxy")}),setTimeout(()=>{kt.so()},0),kt}}function td(){return"undefined"!=typeof window?window:null}function hc(){return"undefined"!=typeof document?document:null}function Yd(s){return new Oi(s,!0)}class Zh{constructor(e,r,a=1e3,h=1.5,m=6e4){this.Hs=e,this.timerId=r,this.mo=a,this.yo=h,this.po=m,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const r=Math.floor(this.Io+this.bo()),a=Math.max(0,Date.now()-this.Eo),h=Math.max(0,r-a);h>0&&Kt("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.Io} ms, delay with jitter: ${r} ms, last attempt: ${a} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,h,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Zf{constructor(e,r,a,h,m,I,O,X){this.Hs=e,this.vo=a,this.Vo=h,this.So=m,this.authCredentialsProvider=I,this.appCheckCredentialsProvider=O,this.listener=X,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Zh(e,r)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,y.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,y.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,r){var a=this;return(0,y.Z)(function*(){a.Uo(),a.qo(),a.No.cancel(),a.Do++,4!==e?a.No.reset():r&&r.code===bt.RESOURCE_EXHAUSTED?(lr(r.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),a.No.Ao()):r&&r.code===bt.UNAUTHENTICATED&&3!==a.state&&(a.authCredentialsProvider.invalidateToken(),a.appCheckCredentialsProvider.invalidateToken()),null!==a.stream&&(a.Ko(),a.stream.close(),a.stream=null),a.state=e,yield a.listener.Zr(r)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),r=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,h])=>{this.Do===r&&this.Qo(a,h)},a=>{e(()=>{const h=new Lt(bt.UNKNOWN,"Fetching auth token failed: "+a.message);return this.jo(h)})})}Qo(e,r){const a=this.Go(this.Do);this.stream=this.Wo(e,r),this.stream.Yr(()=>{a(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(h=>{a(()=>this.jo(h))}),this.stream.onMessage(h=>{a(()=>this.onMessage(h))})}Mo(){var e=this;this.state=5,this.No.Ro((0,y.Z)(function*(){e.state=0,e.start()}))}jo(e){return Kt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return r=>{this.Hs.enqueueAndForget(()=>this.Do===e?r():(Kt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ng extends Zf{constructor(e,r,a,h,m,I){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,a,h,I),this.It=m}Wo(e,r){return this.So.wo("Listen",e,r)}onMessage(e){this.No.reset();const r=function(s,e){let r;if("targetChange"in e){const a="NO_CHANGE"===(X=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===X?1:"REMOVE"===X?2:"CURRENT"===X?3:"RESET"===X?4:Fn(),h=e.targetChange.targetIds||[],m=function(X,ie){return X.gt?(Hn(void 0===ie||"string"==typeof ie),Cs.fromBase64String(ie||"")):(Hn(void 0===ie||ie instanceof Uint8Array),Cs.fromUint8Array(ie||new Uint8Array))}(s,e.targetChange.resumeToken),I=e.targetChange.cause,O=I&&function(X){const ie=void 0===X.code?bt.UNKNOWN:ku(X.code);return new Lt(ie,X.message||"")}(I);r=new de(a,h,m,O||null)}else if("documentChange"in e){const a=e.documentChange,h=Us(s,a.document.name),m=Xs(a.document.updateTime),I=new Z({mapValue:{fields:a.document.fields}}),O=ze.newFoundDocument(h,m,I);r=new R(a.targetIds||[],a.removedTargetIds||[],O.key,O)}else if("documentDelete"in e){const a=e.documentDelete,h=Us(s,a.document),m=a.readTime?Xs(a.readTime):dr.min(),I=ze.newNoDocument(h,m);r=new R([],a.removedTargetIds||[],I.key,I)}else if("documentRemove"in e){const a=e.documentRemove,h=Us(s,a.document);r=new R([],a.removedTargetIds||[],h,null)}else{if(!("filter"in e))return Fn();{const a=e.filter,m=new Nu(a.count||0);r=new ee(a.targetId,m)}}var X;return r}(this.It,e),a=function(h){if(!("targetChange"in h))return dr.min();const m=h.targetChange;return m.targetIds&&m.targetIds.length?dr.min():m.readTime?Xs(m.readTime):dr.min()}(e);return this.listener.zo(r,a)}Ho(e){const r={};r.database=Ls(this.It),r.addTarget=function(h,m){let I;const O=m.target;return I=kr(O)?{documents:Ch(h,O)}:{query:wh(h,O)},I.targetId=m.targetId,m.resumeToken.approximateByteSize()>0?I.resumeToken=Il(h,m.resumeToken):m.snapshotVersion.compareTo(dr.min())>0&&(I.readTime=Ts(h,m.snapshotVersion.toTimestamp())),I}(this.It,e);const a=function(s,e){const r=function(a,h){switch(h){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Fn()}}(0,e.purpose);return null==r?null:{"goog-listen-tags":r}}(0,e);a&&(r.labels=a),this.Lo(r)}Jo(e){const r={};r.database=Ls(this.It),r.removeTarget=e,this.Lo(r)}}class rg extends Zf{constructor(e,r,a,h,m,I){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,a,h,I),this.It=m,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,r){return this.So.wo("Write",e,r)}onMessage(e){if(Hn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const r=function(s,e){return s&&s.length>0?(Hn(void 0!==e),s.map(r=>function(a,h){let m=Xs(a.updateTime?a.updateTime:h);return m.isEqual(dr.min())&&(m=Xs(h)),new vl(m,a.transformResults||[])}(r,e))):[]}(e.writeResults,e.commitTime),a=Xs(e.commitTime);return this.listener.tu(a,r)}return Hn(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Ls(this.It),this.Lo(e)}Zo(e){const r={streamToken:this.lastStreamToken,writes:e.map(a=>Mc(this.It,a))};this.Lo(r)}}class Qh extends class{}{constructor(e,r,a,h){super(),this.authCredentials=e,this.appCheckCredentials=r,this.So=a,this.It=h,this.su=!1}iu(){if(this.su)throw new Lt(bt.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,r,a){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.So.ao(e,r,a,h,m)).catch(h=>{throw"FirebaseError"===h.name?(h.code===bt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Lt(bt.UNKNOWN,h.toString())})}_o(e,r,a,h){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,I])=>this.So._o(e,r,a,m,I,h)).catch(m=>{throw"FirebaseError"===m.name?(m.code===bt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new Lt(bt.UNKNOWN,m.toString())})}terminate(){this.su=!0}}class hm{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const r=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(lr(r),this.uu=!1):Kt("OnlineStateTracker",r)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class ig{constructor(e,r,a,h,m){var I=this;this.localStore=e,this.datastore=r,this.asyncQueue=a,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=m,this.gu.qr(O=>{a.enqueueAndForget((0,y.Z)(function*(){var X;gu(I)&&(Kt("RemoteStore","Restarting streams for network reachability change."),yield(X=(0,y.Z)(function*(ie){const Oe=hn(ie);Oe.wu.add(4),yield rd(Oe),Oe.yu.set("Unknown"),Oe.wu.delete(4),yield nd(Oe)}),function(ie){return X.apply(this,arguments)})(I))}))}),this.yu=new hm(a,h)}}function nd(s){return Xh.apply(this,arguments)}function Xh(){return Xh=(0,y.Z)(function*(s){if(gu(s))for(const e of s.mu)yield e(!0)}),Xh.apply(this,arguments)}function rd(s){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,y.Z)(function*(s){for(const e of s.mu)yield e(!1)}),Jh.apply(this,arguments)}function ef(s,e){const r=hn(s);r._u.has(e.targetId)||(r._u.set(e.targetId,e),pm(r)?sg(r):$c(r).Oo()&&Ra(r,e))}function Kd(s,e){const r=hn(s),a=$c(r);r._u.delete(e),a.Oo()&&fm(r,e),0===r._u.size&&(a.Oo()?a.$o():gu(r)&&r.yu.set("Unknown"))}function Ra(s,e){s.pu.Mt(e.targetId),$c(s).Ho(e)}function fm(s,e){s.pu.Mt(e),$c(s).Jo(e)}function sg(s){s.pu=new zt({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),se:e=>s._u.get(e)||null}),$c(s).start(),s.yu.cu()}function pm(s){return gu(s)&&!$c(s).ko()&&s._u.size>0}function gu(s){return 0===hn(s).wu.size}function og(s){s.pu=void 0}function H_(s){return ag.apply(this,arguments)}function ag(){return ag=(0,y.Z)(function*(s){s._u.forEach((e,r)=>{Ra(s,e)})}),ag.apply(this,arguments)}function lg(s,e){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,y.Z)(function*(s,e){og(s),pm(s)?(s.yu.lu(e),sg(s)):s.yu.set("Unknown")}),Xf.apply(this,arguments)}function Ty(s,e,r){return cg.apply(this,arguments)}function cg(){return cg=(0,y.Z)(function*(s,e,r){if(s.yu.set("Online"),e instanceof de&&2===e.state&&e.cause)try{yield(a=(0,y.Z)(function*(h,m){const I=m.cause;for(const O of m.targetIds)h._u.has(O)&&(yield h.remoteSyncer.rejectListen(O,I),h._u.delete(O),h.pu.removeTarget(O))}),function(h,m){return a.apply(this,arguments)})(s,e)}catch(a){Kt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),a),yield Jf(s,a)}else if(e instanceof R?s.pu.Gt(e):e instanceof ee?s.pu.Yt(e):s.pu.Wt(e),!r.isEqual(dr.min()))try{const a=yield cm(s.localStore);r.compareTo(a)>=0&&(yield function(h,m){const I=h.pu.te(m);return I.targetChanges.forEach((O,X)=>{if(O.resumeToken.approximateByteSize()>0){const ie=h._u.get(X);ie&&h._u.set(X,ie.withResumeToken(O.resumeToken,m))}}),I.targetMismatches.forEach(O=>{const X=h._u.get(O);if(!X)return;h._u.set(O,X.withResumeToken(Cs.EMPTY_BYTE_STRING,X.snapshotVersion)),fm(h,O);const ie=new il(X.target,O,1,X.sequenceNumber);Ra(h,ie)}),h.remoteSyncer.applyRemoteEvent(I)}(s,r))}catch(a){Kt("RemoteStore","Failed to raise snapshot:",a),yield Jf(s,a)}var a}),cg.apply(this,arguments)}function Jf(s,e,r){return ep.apply(this,arguments)}function ep(){return ep=(0,y.Z)(function*(s,e,r){if(!Nr(e))throw e;s.wu.add(1),yield rd(s),s.yu.set("Offline"),r||(r=()=>cm(s.localStore)),s.asyncQueue.enqueueRetryable((0,y.Z)(function*(){Kt("RemoteStore","Retrying IndexedDB access"),yield r(),s.wu.delete(1),yield nd(s)}))}),ep.apply(this,arguments)}function gm(s,e){return e().catch(r=>Jf(s,r,e))}function id(s){return ug.apply(this,arguments)}function ug(){return ug=(0,y.Z)(function*(s){const e=hn(s),r=pc(e);let a=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;mm(e);)try{const h=yield wy(e.localStore,a);if(null===h){0===e.du.length&&r.$o();break}a=h.batchId,ym(e,h)}catch(h){yield Jf(e,h)}dg(e)&&_m(e)}),ug.apply(this,arguments)}function mm(s){return gu(s)&&s.du.length<10}function ym(s,e){s.du.push(e);const r=pc(s);r.Oo()&&r.Xo&&r.Zo(e.mutations)}function dg(s){return gu(s)&&!pc(s).ko()&&s.du.length>0}function _m(s){pc(s).start()}function fc(s){return tf.apply(this,arguments)}function tf(){return tf=(0,y.Z)(function*(s){pc(s).nu()}),tf.apply(this,arguments)}function Dy(s){return hg.apply(this,arguments)}function hg(){return hg=(0,y.Z)(function*(s){const e=pc(s);for(const r of s.du)e.Zo(r.mutations)}),hg.apply(this,arguments)}function W_(s,e,r){return tp.apply(this,arguments)}function tp(){return tp=(0,y.Z)(function*(s,e,r){const a=s.du.shift(),h=Mh.from(a,e,r);yield gm(s,()=>s.remoteSyncer.applySuccessfulWrite(h)),yield id(s)}),tp.apply(this,arguments)}function Sy(s,e){return fg.apply(this,arguments)}function fg(){return fg=(0,y.Z)(function*(s,e){var r;e&&pc(s).Xo&&(yield(r=(0,y.Z)(function*(a,h){if(Cd(m=h.code)&&m!==bt.ABORTED){const I=a.du.shift();pc(a).Fo(),yield gm(a,()=>a.remoteSyncer.rejectFailedWrite(I.batchId,h)),yield id(a)}var m}),function(a,h){return r.apply(this,arguments)})(s,e)),dg(s)&&_m(s)}),fg.apply(this,arguments)}function vm(s,e){return nf.apply(this,arguments)}function nf(){return nf=(0,y.Z)(function*(s,e){const r=hn(s);r.asyncQueue.verifyOperationInProgress(),Kt("RemoteStore","RemoteStore received new credentials");const a=gu(r);r.wu.add(3),yield rd(r),a&&r.yu.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(e),r.wu.delete(3),yield nd(r)}),nf.apply(this,arguments)}function pg(s,e){return gg.apply(this,arguments)}function gg(){return gg=(0,y.Z)(function*(s,e){const r=hn(s);e?(r.wu.delete(2),yield nd(r)):e||(r.wu.add(2),yield rd(r),r.yu.set("Unknown"))}),gg.apply(this,arguments)}function $c(s){return s.Iu||(s.Iu=function(e,r,a){const h=hn(e);return h.iu(),new ng(r,h.So,h.authCredentials,h.appCheckCredentials,h.It,a)}(s.datastore,s.asyncQueue,{Yr:H_.bind(null,s),Zr:lg.bind(null,s),zo:Ty.bind(null,s)}),s.mu.push(function(){var e=(0,y.Z)(function*(r){r?(s.Iu.Fo(),pm(s)?sg(s):s.yu.set("Unknown")):(yield s.Iu.stop(),og(s))});return function(r){return e.apply(this,arguments)}}())),s.Iu}function pc(s){return s.Tu||(s.Tu=function(e,r,a){const h=hn(e);return h.iu(),new rg(r,h.So,h.authCredentials,h.appCheckCredentials,h.It,a)}(s.datastore,s.asyncQueue,{Yr:fc.bind(null,s),Zr:Sy.bind(null,s),eu:Dy.bind(null,s),tu:W_.bind(null,s)}),s.mu.push(function(){var e=(0,y.Z)(function*(r){r?(s.Tu.Fo(),yield id(s)):(yield s.Tu.stop(),s.du.length>0&&(Kt("RemoteStore",`Stopping write stream with ${s.du.length} pending writes`),s.du=[]))});return function(r){return e.apply(this,arguments)}}())),s.Tu}class mg{constructor(e,r,a,h,m){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=a,this.op=h,this.removalCallback=m,this.deferred=new fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(I=>{})}static createAndSchedule(e,r,a,h,m){const I=Date.now()+a,O=new mg(e,r,I,h,m);return O.start(a),O}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Lt(bt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mu(s,e){if(lr("AsyncQueue",`${e}: ${s}`),Nr(s))return new Lt(bt.UNAVAILABLE,`${e}: ${s}`);throw s}class yu{constructor(e){this.comparator=e?(r,a)=>e(r,a)||xn.comparator(r.key,a.key):(r,a)=>xn.comparator(r.key,a.key),this.keyedMap=zl(),this.sortedSet=new ji(this.comparator)}static emptySet(e){return new yu(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,a)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof yu)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;r.hasNext();){const h=r.getNext().key,m=a.getNext().key;if(!h.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,r){const a=new yu;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=r,a}}class yg{constructor(){this.Eu=new ji(xn.comparator)}track(e){const r=e.doc.key,a=this.Eu.get(r);a?0!==e.type&&3===a.type?this.Eu=this.Eu.insert(r,e):3===e.type&&1!==a.type?this.Eu=this.Eu.insert(r,{type:a.type,doc:e.doc}):2===e.type&&2===a.type?this.Eu=this.Eu.insert(r,{type:2,doc:e.doc}):2===e.type&&0===a.type?this.Eu=this.Eu.insert(r,{type:0,doc:e.doc}):1===e.type&&0===a.type?this.Eu=this.Eu.remove(r):1===e.type&&2===a.type?this.Eu=this.Eu.insert(r,{type:1,doc:a.doc}):0===e.type&&1===a.type?this.Eu=this.Eu.insert(r,{type:2,doc:e.doc}):Fn():this.Eu=this.Eu.insert(r,e)}Au(){const e=[];return this.Eu.inorderTraversal((r,a)=>{e.push(a)}),e}}class Zd{constructor(e,r,a,h,m,I,O,X,ie){this.query=e,this.docs=r,this.oldDocs=a,this.docChanges=h,this.mutatedKeys=m,this.fromCache=I,this.syncStateChanged=O,this.excludesMetadataChanges=X,this.hasCachedResults=ie}static fromInitialDocuments(e,r,a,h,m){const I=[];return r.forEach(O=>{I.push({type:0,doc:O})}),new Zd(e,r,yu.emptySet(r),I,a,h,!0,!1,m)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pa(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,a=e.docChanges;if(r.length!==a.length)return!1;for(let h=0;h<r.length;h++)if(r[h].type!==a[h].type||!r[h].doc.isEqual(a[h].doc))return!1;return!0}}class Ay{constructor(){this.Ru=void 0,this.listeners=[]}}class _g{constructor(){this.queries=new bl(e=>sc(e),pa),this.onlineState="Unknown",this.bu=new Set}}function Em(s,e){return vg.apply(this,arguments)}function vg(){return vg=(0,y.Z)(function*(s,e){const r=hn(s),a=e.query;let h=!1,m=r.queries.get(a);if(m||(h=!0,m=new Ay),h)try{m.Ru=yield r.onListen(a)}catch(I){const O=mu(I,`Initialization of query '${tl(e.query)}' failed`);return void e.onError(O)}r.queries.set(a,m),m.listeners.push(e),e.Pu(r.onlineState),m.Ru&&e.vu(m.Ru)&&rf(r)}),vg.apply(this,arguments)}function np(s,e){return rp.apply(this,arguments)}function rp(){return rp=(0,y.Z)(function*(s,e){const r=hn(s),a=e.query;let h=!1;const m=r.queries.get(a);if(m){const I=m.listeners.indexOf(e);I>=0&&(m.listeners.splice(I,1),h=0===m.listeners.length)}if(h)return r.queries.delete(a),r.onUnlisten(a)}),rp.apply(this,arguments)}function bm(s,e){const r=hn(s);let a=!1;for(const h of e){const I=r.queries.get(h.query);if(I){for(const O of I.listeners)O.vu(h)&&(a=!0);I.Ru=h}}a&&rf(r)}function Eg(s,e,r){const a=hn(s),h=a.queries.get(e);if(h)for(const m of h.listeners)m.onError(r);a.queries.delete(e)}function rf(s){s.bu.forEach(e=>{e.next()})}class Pl{constructor(e,r,a){this.query=e,this.Vu=r,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=a||{}}vu(e){if(!this.options.includeMetadataChanges){const a=[];for(const h of e.docChanges)3!==h.type&&a.push(h);e=new Zd(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),r=!0):this.xu(e,this.onlineState)&&(this.Nu(e),r=!0),this.Du=e,r}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let r=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),r=!0),r}xu(e,r){return!e.fromCache||(!this.options.ku||!("Offline"!==r))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===r)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Zd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class sf{constructor(e,r){this.payload=e,this.byteLength=r}Ou(){return"metadata"in this.payload}}class ip{constructor(e){this.It=e}Ji(e){return Us(this.It,e)}Yi(e){return e.metadata.exists?Td(this.It,e.document,!1):ze.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Xs(e)}}class Im{constructor(e,r,a){this.Mu=e,this.localStore=r,this.It=a,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Cm(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++r;const a=zr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(a.get(a.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}$u(e){const r=new Map,a=new ip(this.It);for(const h of e)if(h.metadata.queries){const m=a.Ji(h.metadata.name);for(const I of h.metadata.queries){const O=(r.get(I)||Hr()).add(m);r.set(I,O)}}return r}complete(){var e=this;return(0,y.Z)(function*(){const r=yield function(s,e,r,a){return Yh.apply(this,arguments)}(e.localStore,new ip(e.It),e.documents,e.Mu.id),a=e.$u(e.documents);for(const h of e.queries)yield Hd(e.localStore,h,a.get(h.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:r}})()}}function Cm(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}class Uc{constructor(e){this.key=e}}class sp{constructor(e){this.key=e}}class sd{constructor(e,r){this.query=e,this.Uu=r,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Hr(),this.mutatedKeys=Hr(),this.Gu=fh(e),this.Qu=new yu(this.Gu)}get ju(){return this.Uu}Wu(e,r){const a=r?r.zu:new yg,h=r?r.Qu:this.Qu;let m=r?r.mutatedKeys:this.mutatedKeys,I=h,O=!1;const X="F"===this.query.limitType&&h.size===this.query.limit?h.last():null,ie="L"===this.query.limitType&&h.size===this.query.limit?h.first():null;if(e.inorderTraversal((Oe,st)=>{const kt=h.get(Oe),nn=Ru(this.query,st)?st:null,pn=!!kt&&this.mutatedKeys.has(kt.key),qn=!!nn&&(nn.hasLocalMutations||this.mutatedKeys.has(nn.key)&&nn.hasCommittedMutations);let sr=!1;kt&&nn?kt.data.isEqual(nn.data)?pn!==qn&&(a.track({type:3,doc:nn}),sr=!0):this.Hu(kt,nn)||(a.track({type:2,doc:nn}),sr=!0,(X&&this.Gu(nn,X)>0||ie&&this.Gu(nn,ie)<0)&&(O=!0)):!kt&&nn?(a.track({type:0,doc:nn}),sr=!0):kt&&!nn&&(a.track({type:1,doc:kt}),sr=!0,(X||ie)&&(O=!0)),sr&&(nn?(I=I.add(nn),m=qn?m.add(Oe):m.delete(Oe)):(I=I.delete(Oe),m=m.delete(Oe)))}),null!==this.query.limit)for(;I.size>this.query.limit;){const Oe="F"===this.query.limitType?I.last():I.first();I=I.delete(Oe.key),m=m.delete(Oe.key),a.track({type:1,doc:Oe})}return{Qu:I,zu:a,$i:O,mutatedKeys:m}}Hu(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,a){const h=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const m=e.zu.Au();m.sort((ie,Oe)=>function(st,kt){const nn=pn=>{switch(pn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fn()}};return nn(st)-nn(kt)}(ie.type,Oe.type)||this.Gu(ie.doc,Oe.doc)),this.Ju(a);const I=r?this.Yu():[],O=0===this.Ku.size&&this.current?1:0,X=O!==this.qu;return this.qu=O,0!==m.length||X?{snapshot:new Zd(this.query,e.Qu,h,m,e.mutatedKeys,0===O,X,!1,!!a&&a.resumeToken.approximateByteSize()>0),Xu:I}:{Xu:I}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new yg,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(r=>this.Uu=this.Uu.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Uu=this.Uu.delete(r)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Hr(),this.Qu.forEach(a=>{this.Zu(a.key)&&(this.Ku=this.Ku.add(a.key))});const r=[];return e.forEach(a=>{this.Ku.has(a)||r.push(new sp(a))}),this.Ku.forEach(a=>{e.has(a)||r.push(new Uc(a))}),r}tc(e){this.Uu=e.Hi,this.Ku=Hr();const r=this.Wu(e.documents);return this.applyChanges(r,!0)}ec(){return Zd.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class Qd{constructor(e,r,a){this.query=e,this.targetId=r,this.view=a}}class wm{constructor(e){this.key=e,this.nc=!1}}class op{constructor(e,r,a,h,m,I){this.localStore=e,this.remoteStore=r,this.eventManager=a,this.sharedClientState=h,this.currentUser=m,this.maxConcurrentLimboResolutions=I,this.sc={},this.ic=new bl(O=>sc(O),pa),this.rc=new Map,this.oc=new Set,this.uc=new ji(xn.comparator),this.cc=new Map,this.ac=new Rl,this.hc={},this.lc=new Map,this.fc=Ql.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function bg(s,e){return ap.apply(this,arguments)}function ap(){return ap=(0,y.Z)(function*(s,e){const r=ff(s);let a,h;const m=r.ic.get(e);if(m)a=m.targetId,r.sharedClientState.addLocalQueryTarget(a),h=m.view.ec();else{const I=yield Ud(r.localStore,Wi(e));r.isPrimaryClient&&ef(r.remoteStore,I);const O=r.sharedClientState.addLocalQueryTarget(I.targetId);a=I.targetId,h=yield af(r,e,a,"current"===O,I.resumeToken)}return h}),ap.apply(this,arguments)}function af(s,e,r,a,h){return lp.apply(this,arguments)}function lp(){return lp=(0,y.Z)(function*(s,e,r,a,h){s._c=(st,kt,nn)=>{return(pn=(0,y.Z)(function*(qn,sr,Ai,Ss){let Qi=sr.view.Wu(Ai);Qi.$i&&(Qi=yield Gf(qn.localStore,sr.query,!1).then(({documents:Gi})=>sr.view.Wu(Gi,Qi)));const na=Ss&&Ss.targetChanges.get(sr.targetId),ds=sr.view.applyChanges(Qi,qn.isPrimaryClient,na);return Ol(qn,sr.targetId,ds.Xu),ds.snapshot}),function(qn,sr,Ai,Ss){return pn.apply(this,arguments)})(s,st,kt,nn);var pn};const m=yield Gf(s.localStore,e,!0),I=new sd(e,m.Hi),O=I.Wu(m.documents),X=v.createSynthesizedTargetChangeForCurrentChange(r,a&&"Offline"!==s.onlineState,h),ie=I.applyChanges(O,s.isPrimaryClient,X);Ol(s,r,ie.Xu);const Oe=new Qd(e,r,I);return s.ic.set(e,Oe),s.rc.has(r)?s.rc.get(r).push(e):s.rc.set(r,[e]),ie.snapshot}),lp.apply(this,arguments)}function cp(s,e){return _u.apply(this,arguments)}function _u(){return _u=(0,y.Z)(function*(s,e){const r=hn(s),a=r.ic.get(e),h=r.rc.get(a.targetId);if(h.length>1)return r.rc.set(a.targetId,h.filter(m=>!pa(m,e))),void r.ic.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||(yield jd(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),Kd(r.remoteStore,a.targetId),Wc(r,a.targetId)}).catch(ve))):(Wc(r,a.targetId),yield jd(r.localStore,a.targetId,!0))}),_u.apply(this,arguments)}function lf(){return lf=(0,y.Z)(function*(s,e,r){const a=yp(s);try{const h=yield function(m,I){const O=hn(m),X=Mi.now(),ie=I.reduce((kt,nn)=>kt.add(nn.key),Hr());let Oe,st;return O.persistence.runTransaction("Locally write mutations","readwrite",kt=>{let nn=ga(),pn=Hr();return O.Gi.getEntries(kt,ie).next(qn=>{nn=qn,nn.forEach((sr,Ai)=>{Ai.isValidDocument()||(pn=pn.add(sr))})}).next(()=>O.localDocuments.getOverlayedDocuments(kt,nn)).next(qn=>{Oe=qn;const sr=[];for(const Ai of I){const Ss=vd(Ai,Oe.get(Ai.key).overlayedDocument);null!=Ss&&sr.push(new El(Ai.key,Ss,me(Ss.value.mapValue),Si.exists(!0)))}return O.mutationQueue.addMutationBatch(kt,X,sr,I)}).next(qn=>{st=qn;const sr=qn.applyToLocalDocumentSet(Oe,pn);return O.documentOverlayCache.saveOverlays(kt,qn.batchId,sr)})}).then(()=>({batchId:st.batchId,changes:ru(Oe)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(h.batchId),function(m,I,O){let X=m.hc[m.currentUser.toKey()];X||(X=new ji(yr)),X=X.insert(I,O),m.hc[m.currentUser.toKey()]=X}(a,h.batchId,r),yield Gc(a,h.changes),yield id(a.remoteStore)}catch(h){const m=mu(h,"Failed to persist write");r.reject(m)}}),lf.apply(this,arguments)}function vu(s,e){return cf.apply(this,arguments)}function cf(){return cf=(0,y.Z)(function*(s,e){const r=hn(s);try{const a=yield Cy(r.localStore,e);e.targetChanges.forEach((h,m)=>{const I=r.cc.get(m);I&&(Hn(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1),h.addedDocuments.size>0?I.nc=!0:h.modifiedDocuments.size>0?Hn(I.nc):h.removedDocuments.size>0&&(Hn(I.nc),I.nc=!1))}),yield Gc(r,a,e)}catch(a){yield ve(a)}}),cf.apply(this,arguments)}function Ig(s,e,r){const a=hn(s);if(a.isPrimaryClient&&0===r||!a.isPrimaryClient&&1===r){const h=[];a.ic.forEach((m,I)=>{const O=I.view.Pu(e);O.snapshot&&h.push(O.snapshot)}),function(m,I){const O=hn(m);O.onlineState=I;let X=!1;O.queries.forEach((ie,Oe)=>{for(const st of Oe.listeners)st.Pu(I)&&(X=!0)}),X&&rf(O)}(a.eventManager,e),h.length&&a.sc.zo(h),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}function Cg(s,e,r){return jc.apply(this,arguments)}function jc(){return jc=(0,y.Z)(function*(s,e,r){const a=hn(s);a.sharedClientState.updateQueryState(e,"rejected",r);const h=a.cc.get(e),m=h&&h.key;if(m){let I=new ji(xn.comparator);I=I.insert(m,ze.newNoDocument(m,dr.min()));const O=Hr().add(m),X=new g(dr.min(),new Map,new zn(yr),I,O);yield vu(a,X),a.uc=a.uc.remove(m),a.cc.delete(e),Xd(a)}else yield jd(a.localStore,e,!1).then(()=>Wc(a,e,r)).catch(ve)}),jc.apply(this,arguments)}function Tm(s,e){return up.apply(this,arguments)}function up(){return up=(0,y.Z)(function*(s,e){const r=hn(s),a=e.batch.batchId;try{const h=yield Iy(r.localStore,e);us(r,a,null),Hc(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),yield Gc(r,h)}catch(h){yield ve(h)}}),up.apply(this,arguments)}function Dm(s,e,r){return ec.apply(this,arguments)}function ec(){return ec=(0,y.Z)(function*(s,e,r){const a=hn(s);try{const h=yield function(m,I){const O=hn(m);return O.persistence.runTransaction("Reject batch","readwrite-primary",X=>{let ie;return O.mutationQueue.lookupMutationBatch(X,I).next(Oe=>(Hn(null!==Oe),ie=Oe.keys(),O.mutationQueue.removeMutationBatch(X,Oe))).next(()=>O.mutationQueue.performConsistencyCheck(X)).next(()=>O.documentOverlayCache.removeOverlaysForBatchId(X,ie,I)).next(()=>O.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(X,ie)).next(()=>O.localDocuments.getDocuments(X,ie))})}(a.localStore,e);us(a,e,r),Hc(a,e),a.sharedClientState.updateMutationState(e,"rejected",r),yield Gc(a,h)}catch(h){yield ve(h)}}),ec.apply(this,arguments)}function ma(){return ma=(0,y.Z)(function*(s,e){const r=hn(s);gu(r.remoteStore)||Kt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const a=yield function(m){const I=hn(m);return I.persistence.runTransaction("Get highest unacknowledged batch id","readonly",O=>I.mutationQueue.getHighestUnacknowledgedBatchId(O))}(r.localStore);if(-1===a)return void e.resolve();const h=r.lc.get(a)||[];h.push(e),r.lc.set(a,h)}catch(a){const h=mu(a,"Initialization of waitForPendingWrites() operation failed");e.reject(h)}}),ma.apply(this,arguments)}function Hc(s,e){(s.lc.get(e)||[]).forEach(r=>{r.resolve()}),s.lc.delete(e)}function us(s,e,r){const a=hn(s);let h=a.hc[a.currentUser.toKey()];if(h){const m=h.get(e);m&&(r?m.reject(r):m.resolve(),h=h.remove(e)),a.hc[a.currentUser.toKey()]=h}}function Wc(s,e,r=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.rc.get(e))s.ic.delete(a),r&&s.sc.wc(a,r);s.rc.delete(e),s.isPrimaryClient&&s.ac.ls(e).forEach(a=>{s.ac.containsKey(a)||Sm(s,a)})}function Sm(s,e){s.oc.delete(e.path.canonicalString());const r=s.uc.get(e);null!==r&&(Kd(s.remoteStore,r),s.uc=s.uc.remove(e),s.cc.delete(r),Xd(s))}function Ol(s,e,r){for(const a of r)a instanceof Uc?(s.ac.addReference(a.key,e),tc(s,a)):a instanceof sp?(Kt("SyncEngine","Document no longer in limbo: "+a.key),s.ac.removeReference(a.key,e),s.ac.containsKey(a.key)||Sm(s,a.key)):Fn()}function tc(s,e){const r=e.key,a=r.path.canonicalString();s.uc.get(r)||s.oc.has(a)||(Kt("SyncEngine","New document in limbo: "+r),s.oc.add(a),Xd(s))}function Xd(s){for(;s.oc.size>0&&s.uc.size<s.maxConcurrentLimboResolutions;){const e=s.oc.values().next().value;s.oc.delete(e);const r=new xn(zr.fromString(e)),a=s.fc.next();s.cc.set(a,new wm(r)),s.uc=s.uc.insert(r,a),ef(s.remoteStore,new il(Wi(gi(r.path)),a,2,rs.at))}}function Gc(s,e,r){return dp.apply(this,arguments)}function dp(){return dp=(0,y.Z)(function*(s,e,r){const a=hn(s),h=[],m=[],I=[];var O;a.ic.isEmpty()||(a.ic.forEach((O,X)=>{I.push(a._c(X,e,r).then(ie=>{if((ie||r)&&a.isPrimaryClient&&a.sharedClientState.updateQueryState(X.targetId,(null==ie?void 0:ie.fromCache)?"not-current":"current"),ie){h.push(ie);const Oe=Hf.Ci(X.targetId,ie);m.push(Oe)}}))}),yield Promise.all(I),a.sc.zo(h),yield(O=(0,y.Z)(function*(X,ie){const Oe=hn(X);try{yield Oe.persistence.runTransaction("notifyLocalViewChanges","readwrite",st=>ge.forEach(ie,kt=>ge.forEach(kt.Si,nn=>Oe.persistence.referenceDelegate.addReference(st,kt.targetId,nn)).next(()=>ge.forEach(kt.Di,nn=>Oe.persistence.referenceDelegate.removeReference(st,kt.targetId,nn)))))}catch(st){if(!Nr(st))throw st;Kt("LocalStore","Failed to update sequence numbers: "+st)}for(const st of ie){const kt=st.targetId;if(!st.fromCache){const nn=Oe.Ui.get(kt),qn=nn.withLastLimboFreeSnapshotVersion(nn.snapshotVersion);Oe.Ui=Oe.Ui.insert(kt,qn)}}}),function(X,ie){return O.apply(this,arguments)})(a.localStore,m))}),dp.apply(this,arguments)}function wg(s,e){return Jd.apply(this,arguments)}function Jd(){return Jd=(0,y.Z)(function*(s,e){const r=hn(s);if(!r.currentUser.isEqual(e)){Kt("SyncEngine","User change. New user:",e.toKey());const a=yield Gh(r.localStore,e);r.currentUser=e,(h=r).lc.forEach(I=>{I.forEach(O=>{O.reject(new Lt(bt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.lc.clear(),r.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),yield Gc(r,a.ji)}var h}),Jd.apply(this,arguments)}function hp(s,e){const r=hn(s),a=r.cc.get(e);if(a&&a.nc)return Hr().add(a.key);{let h=Hr();const m=r.rc.get(e);if(!m)return h;for(const I of m){const O=r.ic.get(I);h=h.unionWith(O.view.ju)}return h}}function fp(s,e){return zc.apply(this,arguments)}function zc(){return zc=(0,y.Z)(function*(s,e){const r=hn(s),a=yield Gf(r.localStore,e.query,!0),h=e.view.tc(a);return r.isPrimaryClient&&Ol(r,e.targetId,h.Xu),h}),zc.apply(this,arguments)}function Am(s,e){return uf.apply(this,arguments)}function uf(){return uf=(0,y.Z)(function*(s,e){const r=hn(s);return dc(r.localStore,e).then(a=>Gc(r,a))}),uf.apply(this,arguments)}function eh(s,e,r,a){return th.apply(this,arguments)}function th(){return th=(0,y.Z)(function*(s,e,r,a){const h=hn(s),m=yield function(I,O){const X=hn(I),ie=hn(X.mutationQueue);return X.persistence.runTransaction("Lookup mutation documents","readonly",Oe=>ie.Tn(Oe,O).next(st=>st?X.localDocuments.getDocuments(Oe,st):ge.resolve(null)))}(h.localStore,e);var O;null!==m?("pending"===r?yield id(h.remoteStore):"acknowledged"===r||"rejected"===r?(us(h,e,a||null),Hc(h,e),O=e,hn(hn(h.localStore).mutationQueue).An(O)):Fn(),yield Gc(h,m)):Kt("SyncEngine","Cannot apply mutation batch with id: "+e)}),th.apply(this,arguments)}function nh(){return nh=(0,y.Z)(function*(s,e){const r=hn(s);if(ff(r),yp(r),!0===e&&!0!==r.dc){const a=r.sharedClientState.getAllActiveQueryTargets(),h=yield df(r,a.toArray());r.dc=!0,yield pg(r.remoteStore,!0);for(const m of h)ef(r.remoteStore,m)}else if(!1===e&&!1!==r.dc){const a=[];let h=Promise.resolve();r.rc.forEach((m,I)=>{r.sharedClientState.isLocalQueryTarget(I)?a.push(I):h=h.then(()=>(Wc(r,I),jd(r.localStore,I,!0))),Kd(r.remoteStore,I)}),yield h,yield df(r,a),function(m){const I=hn(m);I.cc.forEach((O,X)=>{Kd(I.remoteStore,X)}),I.ac.fs(),I.cc=new Map,I.uc=new ji(xn.comparator)}(r),r.dc=!1,yield pg(r.remoteStore,!1)}}),nh.apply(this,arguments)}function df(s,e,r){return hf.apply(this,arguments)}function hf(){return hf=(0,y.Z)(function*(s,e,r){const a=hn(s),h=[],m=[];for(const I of e){let O;const X=a.rc.get(I);if(X&&0!==X.length){O=yield Ud(a.localStore,Wi(X[0]));for(const ie of X){const Oe=a.ic.get(ie),st=yield fp(a,Oe);st.snapshot&&m.push(st.snapshot)}}else{const ie=yield dm(a.localStore,I);O=yield Ud(a.localStore,ie),yield af(a,Tg(ie),I,!1,O.resumeToken)}h.push(O)}return a.sc.zo(m),h}),hf.apply(this,arguments)}function Tg(s){return gd(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function xm(s){const e=hn(s);return hn(hn(e.localStore).persistence).vi()}function Dg(s,e,r,a){return gp.apply(this,arguments)}function gp(){return gp=(0,y.Z)(function*(s,e,r,a){const h=hn(s);if(h.dc)return void Kt("SyncEngine","Ignoring unexpected query state notification.");const m=h.rc.get(e);if(m&&m.length>0)switch(r){case"current":case"not-current":{const I=yield dc(h.localStore,oc(m[0])),O=g.createSynthesizedRemoteEventForCurrentChange(e,"current"===r,Cs.EMPTY_BYTE_STRING);yield Gc(h,I,O);break}case"rejected":yield jd(h.localStore,e,!0),Wc(h,e,a);break;default:Fn()}}),gp.apply(this,arguments)}function Sg(s,e,r){return mp.apply(this,arguments)}function mp(){return mp=(0,y.Z)(function*(s,e,r){const a=ff(s);if(a.dc){for(const h of e){if(a.rc.has(h)){Kt("SyncEngine","Adding an already active target "+h);continue}const m=yield dm(a.localStore,h),I=yield Ud(a.localStore,m);yield af(a,Tg(m),I.targetId,!1,I.resumeToken),ef(a.remoteStore,I)}for(const h of r)a.rc.has(h)&&(yield jd(a.localStore,h,!1).then(()=>{Kd(a.remoteStore,h),Wc(a,h)}).catch(ve))}}),mp.apply(this,arguments)}function ff(s){const e=hn(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=vu.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hp.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Cg.bind(null,e),e.sc.zo=bm.bind(null,e.eventManager),e.sc.wc=Eg.bind(null,e.eventManager),e}function yp(s){const e=hn(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Tm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Dm.bind(null,e),e}class Ag{constructor(){this.synchronizeTabs=!1}initialize(e){var r=this;return(0,y.Z)(function*(){r.It=Yd(e.databaseInfo.databaseId),r.sharedClientState=r.gc(e),r.persistence=r.yc(e),yield r.persistence.start(),r.localStore=r.Ic(e),r.gcScheduler=r.Tc(e,r.localStore),r.indexBackfillerScheduler=r.Ec(e,r.localStore)})()}Tc(e,r){return null}Ec(e,r){return null}Ic(e){return Qp(this.persistence,new Wf,e.initialUser,this.It)}yc(e){return new Kp(Bc.Bs,this.It)}gc(e){return new eg}terminate(){var e=this;return(0,y.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Mm extends Ag{constructor(e,r,a){super(),this.Ac=e,this.cacheSizeBytes=r,this.forceOwnership=a,this.synchronizeTabs=!1}initialize(e){var r=()=>super.initialize,a=this;return(0,y.Z)(function*(){yield r().call(a,e),yield a.Ac.initialize(a,e),yield yp(a.Ac.syncEngine),yield id(a.Ac.remoteStore),yield a.persistence.li(()=>(a.gcScheduler&&!a.gcScheduler.started&&a.gcScheduler.start(),a.indexBackfillerScheduler&&!a.indexBackfillerScheduler.started&&a.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return Qp(this.persistence,new Wf,e.initialUser,this.It)}Tc(e,r){return new Uh(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,r)}Ec(e,r){const a=new oi(r,this.persistence);return new Io(e.asyncQueue,a)}yc(e){const r=jf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),a=void 0!==this.cacheSizeBytes?Aa.withCacheSize(this.cacheSizeBytes):Aa.DEFAULT;return new Wh(this.synchronizeTabs,r,e.clientId,a,e.asyncQueue,td(),hc(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new eg}}class _p extends Mm{constructor(e,r){super(e,r,!1),this.Ac=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(e){var r=()=>super.initialize,a=this;return(0,y.Z)(function*(){yield r().call(a,e);const h=a.Ac.syncEngine;a.sharedClientState instanceof Kh&&(a.sharedClientState.syncEngine={Fr:eh.bind(null,h),$r:Dg.bind(null,h),Br:Sg.bind(null,h),vi:xm.bind(null,h),Mr:Am.bind(null,h)},yield a.sharedClientState.start()),yield a.persistence.li(function(){var m=(0,y.Z)(function*(I){yield function(s,e){return nh.apply(this,arguments)}(a.Ac.syncEngine,I),a.gcScheduler&&(I&&!a.gcScheduler.started?a.gcScheduler.start():I||a.gcScheduler.stop()),a.indexBackfillerScheduler&&(I&&!a.indexBackfillerScheduler.started?a.indexBackfillerScheduler.start():I||a.indexBackfillerScheduler.stop())});return function(I){return m.apply(this,arguments)}}())})()}gc(e){const r=td();if(!Kh.C(r))throw new Lt(bt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const a=jf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Kh(r,e.asyncQueue,a,e.clientId,e.initialUser)}}class vp{initialize(e,r){var a=this;return(0,y.Z)(function*(){a.localStore||(a.localStore=e.localStore,a.sharedClientState=e.sharedClientState,a.datastore=a.createDatastore(r),a.remoteStore=a.createRemoteStore(r),a.eventManager=a.createEventManager(r),a.syncEngine=a.createSyncEngine(r,!e.synchronizeTabs),a.sharedClientState.onlineStateHandler=h=>Ig(a.syncEngine,h,1),a.remoteStore.remoteSyncer.handleCredentialChange=wg.bind(null,a.syncEngine),yield pg(a.remoteStore,a.syncEngine.isPrimaryClient))})()}createEventManager(e){return new _g}createDatastore(e){const r=Yd(e.databaseInfo.databaseId),a=new ed(e.databaseInfo);return new Qh(e.authCredentials,e.appCheckCredentials,a,r)}createRemoteStore(e){return r=this.localStore,a=this.datastore,h=e.asyncQueue,m=O=>Ig(this.syncEngine,O,0),I=Xu.C()?new Xu:new tg,new ig(r,a,h,m,I);var r,a,h,m,I}createSyncEngine(e,r){return function(a,h,m,I,O,X,ie){const Oe=new op(a,h,m,I,O,X);return ie&&(Oe.dc=!0),Oe}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}terminate(){return(e=(0,y.Z)(function*(r){const a=hn(r);Kt("RemoteStore","RemoteStore shutting down."),a.wu.add(5),yield rd(a),a.gu.shutdown(),a.yu.set("Unknown")}),function(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function pf(s,e,r){if(!r)throw new Lt(bt.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function gf(s,e,r,a){if(!0===e&&!0===a)throw new Lt(bt.INVALID_ARGUMENT,`${s} and ${r} cannot be used together.`)}function Pm(s){if(!xn.isDocumentKey(s))throw new Lt(bt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function ll(s){if(xn.isDocumentKey(s))throw new Lt(bt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function d(s){if(void 0===s)return"undefined";if(null===s)return"null";if("string"==typeof s)return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if("number"==typeof s||"boolean"==typeof s)return""+s;if("object"==typeof s){if(s instanceof Array)return"an array";{const e=(r=s).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof s?"a function":Fn()}function c(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Lt(bt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=d(s);throw new Lt(bt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return s}function l(s,e){if(e<=0)throw new Lt(bt.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}const p=new Map;class b{constructor(e){var r;if(void 0===e.host){if(void 0!==e.ssl)throw new Lt(bt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(r=e.ssl)||void 0===r||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Lt(bt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,gf("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class P{constructor(e,r,a,h){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=a,this._app=h,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new b({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Lt(bt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Lt(bt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new b(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new vc;switch(r.type){case"gapi":return new Ti(r.client,r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Lt(bt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=p.get(e);r&&(Kt("ComponentProvider","Removing Datastore"),p.delete(e),r.terminate())}(this),Promise.resolve()}}function z(s,e,r,a={}){var h;const m=(s=c(s,P))._getSettings();if("firestore.googleapis.com"!==m.host&&m.host!==e&&Ki("Host has been set in both settings() and useEmulator(), emulator host will be used"),s._setSettings(Object.assign(Object.assign({},m),{host:`${e}:${r}`,ssl:!1})),a.mockUserToken){let I,O;if("string"==typeof a.mockUserToken)I=a.mockUserToken,O=vn.MOCK_USER;else{I=(0,oe.Sg)(a.mockUserToken,null===(h=s._app)||void 0===h?void 0:h.options.projectId);const X=a.mockUserToken.sub||a.mockUserToken.user_id;if(!X)throw new Lt(bt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");O=new vn(X)}s._authCredentials=new ho(new wi(I,O))}}class ae{constructor(e,r,a){this.converter=r,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qe(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ae(this.firestore,e,this._key)}}class Ne{constructor(e,r,a){this.converter=r,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Ne(this.firestore,e,this._query)}}class Qe extends Ne{constructor(e,r,a){super(e,r,gi(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ae(this.firestore,null,new xn(e))}withConverter(e){return new Qe(this.firestore,e,this._path)}}function jt(s,e,...r){if(s=(0,oe.m9)(s),pf("collection","path",e),s instanceof P){const a=zr.fromString(e,...r);return ll(a),new Qe(s,null,a)}{if(!(s instanceof ae||s instanceof Qe))throw new Lt(bt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(zr.fromString(e,...r));return ll(a),new Qe(s.firestore,null,a)}}function Wt(s,e){if(s=c(s,P),pf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Lt(bt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ne(s,null,(r=e,new Wa(zr.emptyPath(),r)));var r}function tn(s,e,...r){if(s=(0,oe.m9)(s),1===arguments.length&&(e=ms.R()),pf("doc","path",e),s instanceof P){const a=zr.fromString(e,...r);return Pm(a),new ae(s,null,new xn(a))}{if(!(s instanceof ae||s instanceof Qe))throw new Lt(bt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(zr.fromString(e,...r));return Pm(a),new ae(s.firestore,s instanceof Qe?s.converter:null,new xn(a))}}function Wn(s,e){return s=(0,oe.m9)(s),e=(0,oe.m9)(e),(s instanceof ae||s instanceof Qe)&&(e instanceof ae||e instanceof Qe)&&s.firestore===e.firestore&&s.path===e.path&&s.converter===e.converter}function gr(s,e){return s=(0,oe.m9)(s),e=(0,oe.m9)(e),s instanceof Ne&&e instanceof Ne&&s.firestore===e.firestore&&pa(s._query,e._query)&&s.converter===e.converter}function Di(s,e=10240){let r=0;return{read:()=>(0,y.Z)(function*(){if(r<s.byteLength){const a={value:s.slice(r,r+e),done:!1};return r+=e,a}return{done:!0}})(),cancel:()=>(0,y.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Js{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}class nc{constructor(e,r){this.Pc=e,this.It=r,this.metadata=new fi,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(a=>{a&&a.Ou()?this.metadata.resolve(a.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==a?void 0:a.payload)}`))},a=>this.metadata.reject(a))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,y.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,y.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,y.Z)(function*(){const r=yield e.Sc();if(null===r)return null;const a=e.vc.decode(r),h=Number(a);isNaN(h)&&e.Dc(`length string (${a}) is not valid number`);const m=yield e.Cc(h);return new sf(JSON.parse(m),r.length+h)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,y.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const r=e.xc();r<0&&e.Dc("Reached the end of bundle when a length string is expected.");const a=e.buffer.slice(0,r);return e.buffer=e.buffer.slice(r),a})()}Cc(e){var r=this;return(0,y.Z)(function*(){for(;r.buffer.length<e;)(yield r.Nc())&&r.Dc("Reached the end of bundle when more is expected.");const a=r.vc.decode(r.buffer.slice(0,e));return r.buffer=r.buffer.slice(e),a})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,y.Z)(function*(){const r=yield e.Pc.read();if(!r.done){const a=new Uint8Array(e.buffer.length+r.value.length);a.set(e.buffer),a.set(r.value,e.buffer.length),e.buffer=a}return r.done})()}}class gc{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var r=this;return(0,y.Z)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw new Lt(bt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const a=yield(h=(0,y.Z)(function*(m,I){const O=hn(m),X=Ls(O.It)+"/documents",ie={documents:I.map(nn=>Fs(O.It,nn))},Oe=yield O._o("BatchGetDocuments",X,ie,I.length),st=new Map;Oe.forEach(nn=>{const pn=function(s,e){return"found"in e?function(r,a){Hn(!!a.found);const h=Us(r,a.found.name),m=Xs(a.found.updateTime),I=new Z({mapValue:{fields:a.found.fields}});return ze.newFoundDocument(h,m,I)}(s,e):"missing"in e?function(r,a){Hn(!!a.missing),Hn(!!a.readTime);const h=Us(r,a.missing),m=Xs(a.readTime);return ze.newNoDocument(h,m)}(s,e):Fn()}(O.It,nn);st.set(pn.key.toString(),pn)});const kt=[];return I.forEach(nn=>{const pn=st.get(nn.toString());Hn(!!pn),kt.push(pn)}),kt}),function(m,I){return h.apply(this,arguments)})(r.datastore,e);var h;return a.forEach(h=>r.recordVersion(h)),a})()}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(a){this.lastWriteError=a}this.writtenDocs.add(e.toString())}delete(e){this.write(new Wl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,y.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const r=e.readVersions;var a;e.mutations.forEach(a=>{r.delete(a.key.toString())}),r.forEach((a,h)=>{const m=xn.fromPath(h);e.mutations.push(new Gl(m,e.precondition(m)))}),yield(a=(0,y.Z)(function*(h,m){const I=hn(h),O=Ls(I.It)+"/documents",X={writes:m.map(ie=>Mc(I.It,ie))};yield I.ao("Commit",O,X)}),function(h,m){return a.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Fn();r=dr.min()}const a=this.readVersions.get(e.key.toString());if(a){if(!r.isEqual(a))throw new Lt(bt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(dr.min())?Si.exists(!1):Si.updateTime(r):Si.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(dr.min()))throw new Lt(bt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Si.updateTime(r)}return Si.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Ep{constructor(e,r,a,h,m){this.asyncQueue=e,this.datastore=r,this.options=a,this.updateFunction=h,this.deferred=m,this.kc=a.maxAttempts,this.No=new Zh(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,y.Z)(function*(){const r=new gc(e.datastore),a=e.Mc(r);a&&a.then(h=>{e.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{e.deferred.resolve(h)}).catch(m=>{e.Fc(m)}))}).catch(h=>{e.Fc(h)})}))}Mc(e){try{const r=this.updateFunction(e);return!ks(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const r=e.code;return"aborted"===r||"failed-precondition"===r||!Cd(r)}return!1}}class G_{constructor(e,r,a,h){var m=this;this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=a,this.databaseInfo=h,this.user=vn.UNAUTHENTICATED,this.clientId=ms.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(a,function(){var I=(0,y.Z)(function*(O){Kt("FirestoreClient","Received user=",O.uid),yield m.authCredentialListener(O),m.user=O});return function(O){return I.apply(this,arguments)}}()),this.appCheckCredentials.start(a,I=>(Kt("FirestoreClient","Received new app check token=",I),this.appCheckCredentialListener(I,this.user)))}getConfiguration(){var e=this;return(0,y.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Lt(bt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const r=new fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,y.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),r.resolve()}catch(a){const h=mu(a,"Failed to shutdown persistence");r.reject(h)}})),r.promise}}function Ry(s,e){return bp.apply(this,arguments)}function bp(){return bp=(0,y.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress(),Kt("FirestoreClient","Initializing OfflineComponentProvider");const r=yield s.getConfiguration();yield e.initialize(r);let a=r.initialUser;s.setCredentialChangeListener(function(){var h=(0,y.Z)(function*(m){a.isEqual(m)||(yield Gh(e.localStore,m),a=m)});return function(m){return h.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s.offlineComponents=e}),bp.apply(this,arguments)}function mc(s,e){return rh.apply(this,arguments)}function rh(){return rh=(0,y.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress();const r=yield ta(s);Kt("FirestoreClient","Initializing OnlineComponentProvider");const a=yield s.getConfiguration();yield e.initialize(r,a),s.setCredentialChangeListener(h=>vm(e.remoteStore,h)),s.setAppCheckTokenChangeListener((h,m)=>vm(e.remoteStore,m)),s.onlineComponents=e}),rh.apply(this,arguments)}function ta(s){return Eu.apply(this,arguments)}function Eu(){return Eu=(0,y.Z)(function*(s){return s.offlineComponents||(Kt("FirestoreClient","Using default OfflineComponentProvider"),yield Ry(s,new Ag)),s.offlineComponents}),Eu.apply(this,arguments)}function ih(s){return cl.apply(this,arguments)}function cl(){return cl=(0,y.Z)(function*(s){return s.onlineComponents||(Kt("FirestoreClient","Using default OnlineComponentProvider"),yield mc(s,new vp)),s.onlineComponents}),cl.apply(this,arguments)}function Rg(s){return ta(s).then(e=>e.persistence)}function bu(s){return ta(s).then(e=>e.localStore)}function od(s){return ih(s).then(e=>e.remoteStore)}function ad(s){return ih(s).then(e=>e.syncEngine)}function yc(s){return ld.apply(this,arguments)}function ld(){return ld=(0,y.Z)(function*(s){const e=yield ih(s),r=e.eventManager;return r.onListen=bg.bind(null,e.syncEngine),r.onUnlisten=cp.bind(null,e.syncEngine),r}),ld.apply(this,arguments)}function Om(s,e,r={}){const a=new fi;return s.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return function(h,m,I,O,X){const ie=new Js({next:st=>{m.enqueueAndForget(()=>np(h,Oe));const kt=st.docs.has(I);!kt&&st.fromCache?X.reject(new Lt(bt.UNAVAILABLE,"Failed to get document because the client is offline.")):kt&&st.fromCache&&O&&"server"===O.source?X.reject(new Lt(bt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):X.resolve(st)},error:st=>X.reject(st)}),Oe=new Pl(gi(I.path),ie,{includeMetadataChanges:!0,ku:!0});return Em(h,Oe)}(yield yc(s),s.asyncQueue,e,r,a)})),a.promise}function Nm(s,e,r={}){const a=new fi;return s.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return function(h,m,I,O,X){const ie=new Js({next:st=>{m.enqueueAndForget(()=>np(h,Oe)),st.fromCache&&"server"===O.source?X.reject(new Lt(bt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):X.resolve(st)},error:st=>X.reject(st)}),Oe=new Pl(I,ie,{includeMetadataChanges:!0,ku:!0});return Em(h,Oe)}(yield yc(s),s.asyncQueue,e,r,a)})),a.promise}class ky{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new Zh(this,"async_queue_retry"),this.Wc=()=>{const r=hc();r&&Kt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.No.Po()};const e=hc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const r=hc();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const r=new fi;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,y.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(r){if(!Nr(r))throw r;Kt("AsyncQueue","Operation failed with retryable error: "+r)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const r=this.Bc.then(()=>(this.Gc=!0,e().catch(a=>{throw this.Kc=a,this.Gc=!1,lr("INTERNAL UNHANDLED ERROR: ",function(m){let I=m.message||"";return m.stack&&(I=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),I}(a)),a}).then(a=>(this.Gc=!1,a))));return this.Bc=r,r}enqueueAfterDelay(e,r,a){this.zc(),this.jc.indexOf(e)>-1&&(r=0);const h=mg.createAndSchedule(this,e,r,a,m=>this.Yc(m));return this.qc.push(h),h}zc(){this.Kc&&Fn()}verifyOperationInProgress(){}Xc(){var e=this;return(0,y.Z)(function*(){let r;do{r=e.Bc,yield r}while(r!==e.Bc)})()}Zc(e){for(const r of this.qc)if(r.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((r,a)=>r.targetTimeMs-a.targetTimeMs);for(const r of this.qc)if(r.skipDelay(),"all"!==e&&r.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const r=this.qc.indexOf(e);this.qc.splice(r,1)}}function Mg(s){return function(e,r){if("object"!=typeof e||null===e)return!1;const a=e;for(const h of["next","error","complete"])if(h in a&&"function"==typeof a[h])return!0;return!1}(s)}class Fy{constructor(){this._progressObserver={},this._taskCompletionResolver=new fi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,a){this._progressObserver={next:e,error:r,complete:a}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const z_=-1;class Ds extends P{constructor(e,r,a,h){super(e,r,a,h),this.type="firestore",this._queue=new ky,this._persistenceKey=(null==h?void 0:h.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ly(this),this._firestoreClient.terminate()}}function Y_(s,e){const r="object"==typeof s?s:(0,A.getApp)(),a="string"==typeof s?s:e||"(default)",h=(0,A._getProvider)(r,"firestore").getImmediate({identifier:a});if(!h._initialized){const m=(0,oe.P0)("firestore");m&&z(h,...m)}return h}function so(s){return s._firestoreClient||Ly(s),s._firestoreClient.verifyNotTerminated(),s._firestoreClient}function Ly(s){var e;const r=s._freezeSettings(),a=(m=(null===(e=s._app)||void 0===e?void 0:e.options.appId)||"",new Bl(s._databaseId,m,s._persistenceKey,(O=r).host,O.ssl,O.experimentalForceLongPolling,O.experimentalAutoDetectLongPolling,O.useFetchStreams));var m,O;s._firestoreClient=new G_(s._authCredentials,s._appCheckCredentials,s._queue,a)}function S0(s,e){J_(s=c(s,Ds));const r=so(s),a=s._freezeSettings(),h=new vp;return km(r,h,new Mm(h,a.cacheSizeBytes,null==e?void 0:e.forceOwnership))}function q_(s){J_(s=c(s,Ds));const e=so(s),r=s._freezeSettings(),a=new vp;return km(e,a,new _p(a,r.cacheSizeBytes))}function km(s,e,r){const a=new fi;return s.asyncQueue.enqueue((0,y.Z)(function*(){try{yield Ry(s,r),yield mc(s,e),a.resolve()}catch(h){const m=h;if(!("FirebaseError"===(I=m).name?I.code===bt.FAILED_PRECONDITION||I.code===bt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&I instanceof DOMException)||22===I.code||20===I.code||11===I.code))throw m;Ki("Error enabling offline persistence. Falling back to persistence disabled: "+m),a.reject(m)}var I})).then(()=>a.promise)}function K_(s){if(s._initialized&&!s._terminated)throw new Lt(bt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new fi;return s._queue.enqueueAndForgetEvenWhileRestricted((0,y.Z)(function*(){try{yield(r=(0,y.Z)(function*(a){if(!Rn.C())return Promise.resolve();const h=a+"main";yield Rn.delete(h)}),function(a){return r.apply(this,arguments)})(jf(s._databaseId,s._persistenceKey)),e.resolve()}catch(r){e.reject(r)}var r})),e.promise}function Vy(s){return function(e){const r=new fi;return e.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return function(s,e){return ma.apply(this,arguments)}(yield ad(e),r)})),r.promise}(so(s=c(s,Ds)))}function Z_(s){return function(s){return s.asyncQueue.enqueue((0,y.Z)(function*(){const e=yield Rg(s),r=yield od(s);return e.setNetworkEnabled(!0),function(a){const h=hn(a);return h.wu.delete(0),nd(h)}(r)}))}(so(s=c(s,Ds)))}function Q_(s){return function(s){return s.asyncQueue.enqueue((0,y.Z)(function*(){const e=yield Rg(s),r=yield od(s);return e.setNetworkEnabled(!1),(a=(0,y.Z)(function*(h){const m=hn(h);m.wu.add(0),yield rd(m),m.yu.set("Offline")}),function(h){return a.apply(this,arguments)})(r);var a}))}(so(s=c(s,Ds)))}function X_(s,e){const r=so(s=c(s,Ds)),a=new Fy;return function(s,e,r,a){const h=function(m,I){let O;return O="string"==typeof m?(new TextEncoder).encode(m):m,X=function(X,ie){if(X instanceof Uint8Array)return Di(X,void 0);if(X instanceof ArrayBuffer)return Di(new Uint8Array(X),void 0);if(X instanceof ReadableStream)return X.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(O),new nc(X,I);var X}(r,Yd(e));s.asyncQueue.enqueueAndForget((0,y.Z)(function*(){!function(s,e,r){const a=hn(s);var h;(h=(0,y.Z)(function*(m,I,O){try{const X=yield I.getMetadata();if(yield function(kt,nn){const pn=hn(kt),qn=Xs(nn.createTime);return pn.persistence.runTransaction("hasNewerBundle","readonly",sr=>pn.Ns.getBundleMetadata(sr,nn.id)).then(sr=>!!sr&&sr.createTime.compareTo(qn)>=0)}(m.localStore,X))return yield I.close(),O._completeWith({taskState:"Success",documentsLoaded:(kt=X).totalDocuments,bytesLoaded:kt.totalBytes,totalDocuments:kt.totalDocuments,totalBytes:kt.totalBytes}),Promise.resolve(new Set);O._updateProgress(Cm(X));const ie=new Im(X,m.localStore,I.It);let Oe=yield I.mc();for(;Oe;){const kt=yield ie.Fu(Oe);kt&&O._updateProgress(kt),Oe=yield I.mc()}const st=yield ie.complete();return yield Gc(m,st.Lu,void 0),yield function(kt,nn){const pn=hn(kt);return pn.persistence.runTransaction("Save bundle","readwrite",qn=>pn.Ns.saveBundleMetadata(qn,nn))}(m.localStore,X),O._completeWith(st.progress),Promise.resolve(st.Bu)}catch(X){return Ki("SyncEngine",`Loading bundle failed with ${X}`),O._failWith(X),Promise.resolve(new Set)}var kt}),function(m,I,O){return h.apply(this,arguments)})(a,e,r).then(h=>{a.sharedClientState.notifyBundleLoaded(h)})}(yield ad(s),h,a)}))}(r,s._databaseId,e,a),a}function By(s,e){return function(s,e){return s.asyncQueue.enqueue((0,y.Z)(function*(){return function(r,a){const h=hn(r);return h.persistence.runTransaction("Get named query","readonly",m=>h.Ns.getNamedQuery(m,a))}(yield bu(s),e)}))}(so(s=c(s,Ds)),e).then(r=>r?new Ne(s,null,r.query):null)}function J_(s){if(s._initialized||s._terminated)throw new Lt(bt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class oh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oh(Cs.fromBase64String(e))}catch(r){throw new Lt(bt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new oh(Cs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ah{constructor(...e){for(let r=0;r<e.length;++r)if(0===e[r].length)throw new Lt(bt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ui(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class vf{constructor(e){this._methodName=e}}class Pg{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Lt(bt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Lt(bt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return yr(this._lat,e._lat)||yr(this._long,e._long)}}const ev=/^__.*__$/;class Fm{constructor(e,r,a){this.data=e,this.fieldMask=r,this.fieldTransforms=a}toMutation(e,r){return null!==this.fieldMask?new El(e,this.data,this.fieldMask,r,this.fieldTransforms):new xc(e,this.data,r,this.fieldTransforms)}}class Og{constructor(e,r,a){this.data=e,this.fieldMask=r,this.fieldTransforms=a}toMutation(e,r){return new El(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function $y(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fn()}}class Lm{constructor(e,r,a,h,m,I){this.settings=e,this.databaseId=r,this.It=a,this.ignoreUndefinedProperties=h,void 0===m&&this.na(),this.fieldTransforms=m||[],this.fieldMask=I||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Lm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var r;const a=null===(r=this.path)||void 0===r?void 0:r.child(e),h=this.ia({path:a,oa:!1});return h.ua(e),h}ca(e){var r;const a=null===(r=this.path)||void 0===r?void 0:r.child(e),h=this.ia({path:a,oa:!1});return h.na(),h}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Cp(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(r=>e.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>e.isPrefixOf(r.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if($y(this.sa)&&ev.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class x0{constructor(e,r,a){this.databaseId=e,this.ignoreUndefinedProperties=r,this.It=a||Yd(e)}da(e,r,a,h=!1){return new Lm({sa:e,methodName:r,fa:a,path:ui.emptyPath(),oa:!1,la:h},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Ef(s){const e=s._freezeSettings(),r=Yd(s._databaseId);return new x0(s._databaseId,!!e.ignoreUndefinedProperties,r)}function Ng(s,e,r,a,h,m={}){const I=s.da(m.merge||m.mergeFields?2:0,e,r,h);Um("Data must be an object, but it was:",I,a);const O=$m(a,I);let X,ie;if(m.merge)X=new po(I.fieldMask),ie=I.fieldTransforms;else if(m.mergeFields){const Oe=[];for(const st of m.mergeFields){const kt=jm(e,st,r);if(!I.contains(kt))throw new Lt(bt.INVALID_ARGUMENT,`Field '${kt}' is specified in your field mask but missing from your input data.`);Hy(Oe,kt)||Oe.push(kt)}X=new po(Oe),ie=I.fieldTransforms.filter(st=>X.covers(st.field))}else X=null,ie=I.fieldTransforms;return new Fm(new Z(O),X,ie)}class bf extends vf{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bf}}function tv(s,e,r){return new Lm({sa:3,fa:e.settings.fa,methodName:s._methodName,oa:r},e.databaseId,e.It,e.ignoreUndefinedProperties)}class Vm extends vf{_toFieldTransform(e){return new Dc(e.path,new Ul)}isEqual(e){return e instanceof Vm}}class If extends vf{constructor(e,r){super(e),this._a=r}_toFieldTransform(e){const r=tv(this,e,!0),a=this._a.map(m=>lh(m,r)),h=new nl(a);return new Dc(e.path,h)}isEqual(e){return this===e}}class nv extends vf{constructor(e,r){super(e),this._a=r}_toFieldTransform(e){const r=tv(this,e,!0),a=this._a.map(m=>lh(m,r)),h=new jl(a);return new Dc(e.path,h)}isEqual(e){return this===e}}class Uy extends vf{constructor(e,r){super(e),this.wa=r}_toFieldTransform(e){const r=new Tc(e.It,ac(e.It,this.wa));return new Dc(e.path,r)}isEqual(e){return this===e}}function Bm(s,e,r,a){const h=s.da(1,e,r);Um("Data must be an object, but it was:",h,a);const m=[],I=Z.empty();Co(a,(X,ie)=>{const Oe=Fg(e,X,r);ie=(0,oe.m9)(ie);const st=h.ca(Oe);if(ie instanceof bf)m.push(Oe);else{const kt=lh(ie,st);null!=kt&&(m.push(Oe),I.set(Oe,kt))}});const O=new po(m);return new Og(I,O,h.fieldTransforms)}function kg(s,e,r,a,h,m){const I=s.da(1,e,r),O=[jm(e,a,r)],X=[h];if(m.length%2!=0)throw new Lt(bt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let kt=0;kt<m.length;kt+=2)O.push(jm(e,m[kt])),X.push(m[kt+1]);const ie=[],Oe=Z.empty();for(let kt=O.length-1;kt>=0;--kt)if(!Hy(ie,O[kt])){const nn=O[kt];let pn=X[kt];pn=(0,oe.m9)(pn);const qn=I.ca(nn);if(pn instanceof bf)ie.push(nn);else{const sr=lh(pn,qn);null!=sr&&(ie.push(nn),Oe.set(nn,sr))}}const st=new po(ie);return new Og(Oe,st,I.fieldTransforms)}function Ip(s,e,r,a=!1){return lh(r,s.da(a?4:3,e))}function lh(s,e){if(jy(s=(0,oe.m9)(s)))return Um("Unsupported field value:",e,s),$m(s,e);if(s instanceof vf)return function(r,a){if(!$y(a.sa))throw a.ha(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.ha(`${r._methodName}() is not currently supported inside arrays`);const h=r._toFieldTransform(a);h&&a.fieldTransforms.push(h)}(s,e),null;if(void 0===s&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(r,a){const h=[];let m=0;for(const I of r){let O=lh(I,a.aa(m));null==O&&(O={nullValue:"NULL_VALUE"}),h.push(O),m++}return{arrayValue:{values:h}}}(s,e)}return function(r,a){if(null===(r=(0,oe.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return ac(a.It,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const h=Mi.fromDate(r);return{timestampValue:Ts(a.It,h)}}if(r instanceof Mi){const h=new Mi(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ts(a.It,h)}}if(r instanceof Pg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof oh)return{bytesValue:Il(a.It,r._byteString)};if(r instanceof ae){const h=a.databaseId,m=r.firestore._databaseId;if(!m.isEqual(h))throw a.ha(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Lu(r.firestore._databaseId||a.databaseId,r._key.path)}}throw a.ha(`Unsupported field value: ${d(r)}`)}(s,e)}function $m(s,e){const r={};return Ui(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Co(s,(a,h)=>{const m=lh(h,e.ra(a));null!=m&&(r[a]=m)}),{mapValue:{fields:r}}}function jy(s){return!("object"!=typeof s||null===s||s instanceof Array||s instanceof Date||s instanceof Mi||s instanceof Pg||s instanceof oh||s instanceof ae||s instanceof vf)}function Um(s,e,r){if(!jy(r)||"object"!=typeof(a=r)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const a=d(r);throw e.ha("an object"===a?s+" a custom object":s+" "+a)}var a}function jm(s,e,r){if((e=(0,oe.m9)(e))instanceof ah)return e._internalPath;if("string"==typeof e)return Fg(s,e);throw Cp("Field path arguments must be of type string or ",s,!1,void 0,r)}const rv=new RegExp("[~\\*/\\[\\]]");function Fg(s,e,r){if(e.search(rv)>=0)throw Cp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,r);try{return new ah(...e.split("."))._internalPath}catch(a){throw Cp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,r)}}function Cp(s,e,r,a,h){const m=a&&!a.isEmpty(),I=void 0!==h;let O=`Function ${e}() called with invalid data`;r&&(O+=" (via `toFirestore()`)"),O+=". ";let X="";return(m||I)&&(X+=" (found",m&&(X+=` in field ${a}`),I&&(X+=` in document ${h}`),X+=")"),new Lt(bt.INVALID_ARGUMENT,O+s+X)}function Hy(s,e){return s.some(r=>r.isEqual(e))}class Cf{constructor(e,r,a,h,m){this._firestore=e,this._userDataWriter=r,this._key=a,this._document=h,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new ae(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Wy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(wf("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r)}}}class Wy extends Cf{data(){return super.data()}}function wf(s,e){return"string"==typeof e?Fg(s,e):e instanceof ah?e._internalPath:e._delegate._internalPath}function iv(s){if("L"===s.limitType&&0===s.explicitOrderBy.length)throw new Lt(bt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ch{}function sv(s,...e){for(const r of e)s=r._apply(s);return s}class R0 extends ch{constructor(e,r,a){super(),this.ma=e,this.ga=r,this.ya=a,this.type="where"}_apply(e){const r=Ef(e.firestore),a=function(h,m,I,O,X,ie,Oe){let st;if(X.isKeyField()){if("array-contains"===ie||"array-contains-any"===ie)throw new Lt(bt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ie}' queries on documentId().`);if("in"===ie||"not-in"===ie){Bg(Oe,ie);const nn=[];for(const pn of Oe)nn.push(Gm(O,h,pn));st={arrayValue:{values:nn}}}else st=Gm(O,h,Oe)}else"in"!==ie&&"not-in"!==ie&&"array-contains-any"!==ie||Bg(Oe,ie),st=Ip(I,"where",Oe,"in"===ie||"not-in"===ie);const kt=pi.create(X,ie,st);return function(nn,pn){if(pn.dt()){const sr=ic(nn);if(null!==sr&&!sr.isEqual(pn.field))throw new Lt(bt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${sr.toString()}' and '${pn.field.toString()}'`);const Ai=$l(nn);null!==Ai&&zm(0,pn.field,Ai)}const qn=function(sr,Ai){for(const Ss of sr.filters)if(Ai.indexOf(Ss.op)>=0)return Ss.op;return null}(nn,function(sr){switch(sr){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(pn.op));if(null!==qn)throw new Lt(bt.INVALID_ARGUMENT,qn===pn.op?`Invalid query. You cannot use more than one '${pn.op.toString()}' filter.`:`Invalid query. You cannot use '${pn.op.toString()}' filters with '${qn.toString()}' filters.`)}(h,kt),kt}(e._query,0,r,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Ne(e.firestore,e.converter,function(h,m){const I=h.filters.concat([m]);return new Wa(h.path,h.collectionGroup,h.explicitOrderBy.slice(),I,h.limit,h.limitType,h.startAt,h.endAt)}(e._query,a))}}function wp(s,e,r){const a=e,h=wf("where",s);return new R0(h,a,r)}class Gy extends ch{constructor(e,r){super(),this.ma=e,this.pa=r,this.type="orderBy"}_apply(e){const r=function(a,h,m){if(null!==a.startAt)throw new Lt(bt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new Lt(bt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const I=new Ho(h,m);return function(O,X){if(null===$l(O)){const ie=ic(O);null!==ie&&zm(0,ie,X.field)}}(a,I),I}(e._query,this.ma,this.pa);return new Ne(e.firestore,e.converter,function(a,h){const m=a.explicitOrderBy.concat([h]);return new Wa(a.path,a.collectionGroup,m,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}function Hm(s,e="asc"){const r=e,a=wf("orderBy",s);return new Gy(a,r)}class Lg extends ch{constructor(e,r,a){super(),this.type=e,this.Ia=r,this.Ta=a}_apply(e){return new Ne(e.firestore,e.converter,Jc(e._query,this.Ia,this.Ta))}}function ov(s){return l("limit",s),new Lg("limit",s,"F")}function Wm(s){return l("limitToLast",s),new Lg("limitToLast",s,"L")}class Vg extends ch{constructor(e,r,a){super(),this.type=e,this.Ea=r,this.Aa=a}_apply(e){const r=Zy(e,this.type,this.Ea,this.Aa);return new Ne(e.firestore,e.converter,(h=r,new Wa((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,h,a.endAt)));var a,h}}function zy(...s){return new Vg("startAt",s,!0)}function M0(...s){return new Vg("startAfter",s,!1)}class Yy extends ch{constructor(e,r,a){super(),this.type=e,this.Ea=r,this.Aa=a}_apply(e){const r=Zy(e,this.type,this.Ea,this.Aa);return new Ne(e.firestore,e.converter,(h=r,new Wa((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,h)));var a,h}}function qy(...s){return new Yy("endBefore",s,!1)}function Ky(...s){return new Yy("endAt",s,!0)}function Zy(s,e,r,a){if(r[0]=(0,oe.m9)(r[0]),r[0]instanceof Cf)return function(h,m,I,O,X){if(!O)throw new Lt(bt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${I}().`);const ie=[];for(const Oe of fa(h))if(Oe.field.isKeyField())ie.push(Bo(m,O.key));else{const st=O.data.field(Oe.field);if(Zi(st))throw new Lt(bt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Oe.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===st){const kt=Oe.field.canonicalString();throw new Lt(bt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${kt}' (used as the orderBy) does not exist.`)}ie.push(st)}return new jo(ie,X)}(s._query,s.firestore._databaseId,e,r[0]._document,a);{const h=Ef(s.firestore);return function(m,I,O,X,ie,Oe){const st=m.explicitOrderBy;if(ie.length>st.length)throw new Lt(bt.INVALID_ARGUMENT,`Too many arguments provided to ${X}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const kt=[];for(let nn=0;nn<ie.length;nn++){const pn=ie[nn];if(st[nn].field.isKeyField()){if("string"!=typeof pn)throw new Lt(bt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${X}(), but got a ${typeof pn}`);if(!xu(m)&&-1!==pn.indexOf("/"))throw new Lt(bt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${X}() must be a plain document ID, but '${pn}' contains a slash.`);const qn=m.path.child(zr.fromString(pn));if(!xn.isDocumentKey(qn))throw new Lt(bt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${X}() must result in a valid document path, but '${qn}' is not because it contains an odd number of segments.`);const sr=new xn(qn);kt.push(Bo(I,sr))}else{const qn=Ip(O,X,pn);kt.push(qn)}}return new jo(kt,Oe)}(s._query,s.firestore._databaseId,h,e,r,a)}}function Gm(s,e,r){if("string"==typeof(r=(0,oe.m9)(r))){if(""===r)throw new Lt(bt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xu(e)&&-1!==r.indexOf("/"))throw new Lt(bt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const a=e.path.child(zr.fromString(r));if(!xn.isDocumentKey(a))throw new Lt(bt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Bo(s,new xn(a))}if(r instanceof ae)return Bo(s,r._key);throw new Lt(bt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${d(r)}.`)}function Bg(s,e){if(!Array.isArray(s)||0===s.length)throw new Lt(bt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(s.length>10)throw new Lt(bt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function zm(s,e,r){if(!r.isEqual(e))throw new Lt(bt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}class Tp{convertValue(e,r="none"){switch(Ba(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Va(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw Fn()}}convertObject(e,r){const a={};return Co(e.fields,(h,m)=>{a[h]=this.convertValue(m,r)}),a}convertGeoPoint(e){return new Pg(yi(e.latitude),yi(e.longitude))}convertArray(e,r){return(e.values||[]).map(a=>this.convertValue(a,r))}convertServerTimestamp(e,r){switch(r){case"previous":const a=pl(e);return null==a?null:this.convertValue(a,r);case"estimate":return this.convertTimestamp(Xa(e));default:return null}}convertTimestamp(e){const r=Zo(e);return new Mi(r.seconds,r.nanos)}convertDocumentKey(e,r){const a=zr.fromString(e);Hn(Op(a));const h=new ua(a.get(1),a.get(3)),m=new xn(a.popFirst(5));return h.isEqual(r)||lr(`Document ${m} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),m}}function Tf(s,e,r){let a;return a=s?r&&(r.merge||r.mergeFields)?s.toFirestore(e,r):s.toFirestore(e):e,a}class Qy extends Tp{constructor(e){super(),this.firestore=e}convertBytes(e){return new oh(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new ae(this.firestore,null,r)}}class uh{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cd extends Cf{constructor(e,r,a,h,m,I){super(e,r,a,h,I),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Df(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const a=this._document.data.field(wf("DocumentSnapshot.get",e));if(null!==a)return this._userDataWriter.convertValue(a,r.serverTimestamps)}}}class Df extends cd{data(e={}){return super.data(e)}}class Iu{constructor(e,r,a,h){this._firestore=e,this._userDataWriter=r,this._snapshot=h,this.metadata=new uh(h.hasPendingWrites,h.fromCache),this.query=a}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,r){this._snapshot.docs.forEach(a=>{e.call(r,new Df(this._firestore,this._userDataWriter,a.key,a,new uh(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Lt(bt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,h){if(a._snapshot.oldDocs.isEmpty()){let m=0;return a._snapshot.docChanges.map(I=>({type:"added",doc:new Df(a._firestore,a._userDataWriter,I.doc.key,I.doc,new uh(a._snapshot.mutatedKeys.has(I.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:m++}))}{let m=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(I=>h||3!==I.type).map(I=>{const O=new Df(a._firestore,a._userDataWriter,I.doc.key,I.doc,new uh(a._snapshot.mutatedKeys.has(I.doc.key),a._snapshot.fromCache),a.query.converter);let X=-1,ie=-1;return 0!==I.type&&(X=m.indexOf(I.doc.key),m=m.delete(I.doc.key)),1!==I.type&&(m=m.add(I.doc),ie=m.indexOf(I.doc.key)),{type:Xy(I.type),doc:O,oldIndex:X,newIndex:ie}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Xy(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fn()}}function av(s,e){return s instanceof cd&&e instanceof cd?s._firestore===e._firestore&&s._key.isEqual(e._key)&&(null===s._document?null===e._document:s._document.isEqual(e._document))&&s._converter===e._converter:s instanceof Iu&&e instanceof Iu&&s._firestore===e._firestore&&gr(s.query,e.query)&&s.metadata.isEqual(e.metadata)&&s._snapshot.isEqual(e._snapshot)}function Jy(s){s=c(s,ae);const e=c(s.firestore,Ds);return Om(so(e),s._key).then(r=>Km(e,s,r))}class Cu extends Tp{constructor(e){super(),this.firestore=e}convertBytes(e){return new oh(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new ae(this.firestore,null,r)}}function Ym(s){s=c(s,ae);const e=c(s.firestore,Ds),r=so(e),a=new Cu(e);return function(s,e){const r=new fi;return s.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return(a=(0,y.Z)(function*(h,m,I){try{const O=yield function(X,ie){const Oe=hn(X);return Oe.persistence.runTransaction("read document","readonly",st=>Oe.localDocuments.getDocument(st,ie))}(h,m);O.isFoundDocument()?I.resolve(O):O.isNoDocument()?I.resolve(null):I.reject(new Lt(bt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(O){const X=mu(O,`Failed to get document '${m} from cache`);I.reject(X)}}),function(h,m,I){return a.apply(this,arguments)})(yield bu(s),e,r);var a})),r.promise}(r,s._key).then(h=>new cd(e,a,s._key,h,new uh(null!==h&&h.hasLocalMutations,!0),s.converter))}function qm(s){s=c(s,ae);const e=c(s.firestore,Ds);return Om(so(e),s._key,{source:"server"}).then(r=>Km(e,s,r))}function e_(s){s=c(s,Ne);const e=c(s.firestore,Ds),r=so(e),a=new Cu(e);return iv(s._query),Nm(r,s._query).then(h=>new Iu(e,a,s,h))}function t_(s){s=c(s,Ne);const e=c(s.firestore,Ds),r=so(e),a=new Cu(e);return function(s,e){const r=new fi;return s.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return(a=(0,y.Z)(function*(h,m,I){try{const O=yield Gf(h,m,!0),X=new sd(m,O.Hi),ie=X.Wu(O.documents),Oe=X.applyChanges(ie,!1);I.resolve(Oe.snapshot)}catch(O){const X=mu(O,`Failed to execute query '${m} against cache`);I.reject(X)}}),function(h,m,I){return a.apply(this,arguments)})(yield bu(s),e,r);var a})),r.promise}(r,s._query).then(h=>new Iu(e,a,s,h))}function n_(s){s=c(s,Ne);const e=c(s.firestore,Ds),r=so(e),a=new Cu(e);return Nm(r,s._query,{source:"server"}).then(h=>new Iu(e,a,s,h))}function r_(s,e,r){s=c(s,ae);const a=c(s.firestore,Ds),h=Tf(s.converter,e,r);return Sf(a,[Ng(Ef(a),"setDoc",s._key,h,null!==s.converter,r).toMutation(s._key,Si.none())])}function i_(s,e,r,...a){s=c(s,ae);const h=c(s.firestore,Ds),m=Ef(h);let I;return I="string"==typeof(e=(0,oe.m9)(e))||e instanceof ah?kg(m,"updateDoc",s._key,e,r,a):Bm(m,"updateDoc",s._key,e),Sf(h,[I.toMutation(s._key,Si.exists(!0))])}function s_(s){return Sf(c(s.firestore,Ds),[new Wl(s._key,Si.none())])}function o_(s,e){const r=c(s.firestore,Ds),a=tn(s),h=Tf(s.converter,e);return Sf(r,[Ng(Ef(s.firestore),"addDoc",a._key,h,null!==s.converter,{}).toMutation(a._key,Si.exists(!1))]).then(()=>a)}function a_(s,...e){var r,a,h;s=(0,oe.m9)(s);let m={includeMetadataChanges:!1},I=0;"object"!=typeof e[I]||Mg(e[I])||(m=e[I],I++);const O={includeMetadataChanges:m.includeMetadataChanges};if(Mg(e[I])){const st=e[I];e[I]=null===(r=st.next)||void 0===r?void 0:r.bind(st),e[I+1]=null===(a=st.error)||void 0===a?void 0:a.bind(st),e[I+2]=null===(h=st.complete)||void 0===h?void 0:h.bind(st)}let X,ie,Oe;if(s instanceof ae)ie=c(s.firestore,Ds),Oe=gi(s._key.path),X={next:st=>{e[I]&&e[I](Km(ie,s,st))},error:e[I+1],complete:e[I+2]};else{const st=c(s,Ne);ie=c(st.firestore,Ds),Oe=st._query;const kt=new Cu(ie);X={next:nn=>{e[I]&&e[I](new Iu(ie,kt,st,nn))},error:e[I+1],complete:e[I+2]},iv(s._query)}return function(st,kt,nn,pn){const qn=new Js(pn),sr=new Pl(kt,qn,nn);return st.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return Em(yield yc(st),sr)})),()=>{qn.bc(),st.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return np(yield yc(st),sr)}))}}(so(ie),Oe,O,X)}function P0(s,e){return function(s,e){const r=new Js(e);return s.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return a=yield yc(s),h=r,hn(a).bu.add(h),void h.next();var a,h})),()=>{r.bc(),s.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return a=yield yc(s),h=r,void hn(a).bu.delete(h);var a,h}))}}(so(s=c(s,Ds)),Mg(e)?e:{next:e})}function Sf(s,e){return function(r,a){const h=new fi;return r.asyncQueue.enqueueAndForget((0,y.Z)(function*(){return function(s,e,r){return lf.apply(this,arguments)}(yield ad(r),a,h)})),h.promise}(so(s),e)}function Km(s,e,r){const a=r.docs.get(e._key),h=new Cu(s);return new cd(s,h,e._key,a,new uh(r.hasPendingWrites,r.fromCache),e.converter)}const zo={maxAttempts:5};class Zm{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Ef(e)}set(e,r,a){this._verifyNotCommitted();const h=ud(e,this._firestore),m=Tf(h.converter,r,a),I=Ng(this._dataReader,"WriteBatch.set",h._key,m,null!==h.converter,a);return this._mutations.push(I.toMutation(h._key,Si.none())),this}update(e,r,a,...h){this._verifyNotCommitted();const m=ud(e,this._firestore);let I;return I="string"==typeof(r=(0,oe.m9)(r))||r instanceof ah?kg(this._dataReader,"WriteBatch.update",m._key,r,a,h):Bm(this._dataReader,"WriteBatch.update",m._key,r),this._mutations.push(I.toMutation(m._key,Si.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=ud(e,this._firestore);return this._mutations=this._mutations.concat(new Wl(r._key,Si.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Lt(bt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ud(s,e){if((s=(0,oe.m9)(s)).firestore!==e)throw new Lt(bt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}class cv extends class{constructor(e,r){this._firestore=e,this._transaction=r,this._dataReader=Ef(e)}get(e){const r=ud(e,this._firestore),a=new Qy(this._firestore);return this._transaction.lookup([r._key]).then(h=>{if(!h||1!==h.length)return Fn();const m=h[0];if(m.isFoundDocument())return new Cf(this._firestore,a,m.key,m,r.converter);if(m.isNoDocument())return new Cf(this._firestore,a,r._key,null,r.converter);throw Fn()})}set(e,r,a){const h=ud(e,this._firestore),m=Tf(h.converter,r,a),I=Ng(this._dataReader,"Transaction.set",h._key,m,null!==h.converter,a);return this._transaction.set(h._key,I),this}update(e,r,a,...h){const m=ud(e,this._firestore);let I;return I="string"==typeof(r=(0,oe.m9)(r))||r instanceof ah?kg(this._dataReader,"Transaction.update",m._key,r,a,h):Bm(this._dataReader,"Transaction.update",m._key,r),this._transaction.update(m._key,I),this}delete(e){const r=ud(e,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=ud(e,this._firestore),a=new Cu(this._firestore);return super.get(e).then(h=>new cd(this._firestore,a,r._key,h._document,new uh(!1,!1),r.converter))}}function l_(s,e,r){s=c(s,Ds);const a=Object.assign(Object.assign({},zo),r);return function(h){if(h.maxAttempts<1)throw new Lt(bt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(a),function(h,m,I){const O=new fi;return h.asyncQueue.enqueueAndForget((0,y.Z)(function*(){const X=yield function(s){return ih(s).then(e=>e.datastore)}(h);new Ep(h.asyncQueue,X,I,m,O).run()})),O.promise}(so(s),h=>e(new cv(s,h)),a)}function uv(){return new bf("deleteField")}function c_(){return new Vm("serverTimestamp")}function u_(...s){return new If("arrayUnion",s)}function Af(...s){return new nv("arrayRemove",s)}function dv(s){return new Uy("increment",s)}!function(s,e=!0){Cr=A.SDK_VERSION,(0,A._registerComponent)(new te.wA("firestore",(r,{instanceIdentifier:a,options:h})=>{const m=r.getProvider("app").getImmediate(),I=new Ds(new va(r.getProvider("auth-internal")),new Bs(r.getProvider("app-check-internal")),function(O,X){if(!Object.prototype.hasOwnProperty.apply(O.options,["projectId"]))throw new Lt(bt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ua(O.options.projectId,X)}(m,a),m);return h=Object.assign({useFetchStreams:e},h),I._setSettings(h),I},"PUBLIC").setMultipleInstances(!0)),(0,A.registerVersion)(Jt,"3.7.1",s),(0,A.registerVersion)(Jt,"3.7.1","esm2017")}()},3854:(en,it,F)=>{"use strict";F.d(it,{BH:()=>Ye,LL:()=>St,ZR:()=>tt,gQ:()=>Er,zI:()=>pt,hu:()=>A,g5:()=>te,US:()=>Q,tV:()=>Ce,h$:()=>ye,L:()=>L,$s:()=>se,r3:()=>cr,Sg:()=>Ve,ne:()=>hr,p$:()=>re,vZ:()=>Xt,ZB:()=>he,gK:()=>pr,pd:()=>vr,aH:()=>At,q4:()=>dt,P0:()=>nt,Pz:()=>Ie,m9:()=>Ct,z$:()=>le,GJ:()=>mr,jU:()=>Ae,ru:()=>Ze,xb:()=>un,w1:()=>Se,hl:()=>$t,uI:()=>we,UG:()=>ht,Yr:()=>gt,b$:()=>Ge,G6:()=>ut,w9:()=>Sn,cI:()=>Nt,UI:()=>Un,xO:()=>Xn,zd:()=>or,DV:()=>Tt,ug:()=>ir,dS:()=>rr,Wl:()=>gn,Dv:()=>ur,Wj:()=>En,lb:()=>Jn,eu:()=>E});const A=function(Be,He){if(!Be)throw te(He)},te=function(Be){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Be)},ke=function(Be){const He=[];let ct=0;for(let We=0;We<Be.length;We++){let Ee=Be.charCodeAt(We);Ee<128?He[ct++]=Ee:Ee<2048?(He[ct++]=Ee>>6|192,He[ct++]=63&Ee|128):55296==(64512&Ee)&&We+1<Be.length&&56320==(64512&Be.charCodeAt(We+1))?(Ee=65536+((1023&Ee)<<10)+(1023&Be.charCodeAt(++We)),He[ct++]=Ee>>18|240,He[ct++]=Ee>>12&63|128,He[ct++]=Ee>>6&63|128,He[ct++]=63&Ee|128):(He[ct++]=Ee>>12|224,He[ct++]=Ee>>6&63|128,He[ct++]=63&Ee|128)}return He},Q={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Be,He){if(!Array.isArray(Be))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ct=He?this.byteToCharMapWebSafe_:this.byteToCharMap_,We=[];for(let Ee=0;Ee<Be.length;Ee+=3){const $e=Be[Ee],wt=Ee+1<Be.length,Qt=wt?Be[Ee+1]:0,jn=Ee+2<Be.length,An=jn?Be[Ee+2]:0;let In=(15&Qt)<<2|An>>6,br=63&An;jn||(br=64,wt||(In=64)),We.push(ct[$e>>2],ct[(3&$e)<<4|Qt>>4],ct[In],ct[br])}return We.join("")},encodeString(Be,He){return this.HAS_NATIVE_SUPPORT&&!He?btoa(Be):this.encodeByteArray(ke(Be),He)},decodeString(Be,He){return this.HAS_NATIVE_SUPPORT&&!He?atob(Be):function(Be){const He=[];let ct=0,We=0;for(;ct<Be.length;){const Ee=Be[ct++];if(Ee<128)He[We++]=String.fromCharCode(Ee);else if(Ee>191&&Ee<224){const $e=Be[ct++];He[We++]=String.fromCharCode((31&Ee)<<6|63&$e)}else if(Ee>239&&Ee<365){const jn=((7&Ee)<<18|(63&Be[ct++])<<12|(63&Be[ct++])<<6|63&Be[ct++])-65536;He[We++]=String.fromCharCode(55296+(jn>>10)),He[We++]=String.fromCharCode(56320+(1023&jn))}else{const $e=Be[ct++],wt=Be[ct++];He[We++]=String.fromCharCode((15&Ee)<<12|(63&$e)<<6|63&wt)}}return He.join("")}(this.decodeStringToByteArray(Be,He))},decodeStringToByteArray(Be,He){this.init_();const ct=He?this.charToByteMapWebSafe_:this.charToByteMap_,We=[];for(let Ee=0;Ee<Be.length;){const $e=ct[Be.charAt(Ee++)],Qt=Ee<Be.length?ct[Be.charAt(Ee)]:0;++Ee;const An=Ee<Be.length?ct[Be.charAt(Ee)]:64;++Ee;const mn=Ee<Be.length?ct[Be.charAt(Ee)]:64;if(++Ee,null==$e||null==Qt||null==An||null==mn)throw Error();We.push($e<<2|Qt>>4),64!==An&&(We.push(Qt<<4&240|An>>2),64!==mn&&We.push(An<<6&192|mn))}return We},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Be=0;Be<this.ENCODED_VALS.length;Be++)this.byteToCharMap_[Be]=this.ENCODED_VALS.charAt(Be),this.charToByteMap_[this.byteToCharMap_[Be]]=Be,this.byteToCharMapWebSafe_[Be]=this.ENCODED_VALS_WEBSAFE.charAt(Be),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Be]]=Be,Be>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Be)]=Be,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Be)]=Be)}}},ye=function(Be){const He=ke(Be);return Q.encodeByteArray(He,!0)},L=function(Be){return ye(Be).replace(/\./g,"")},Ce=function(Be){try{return Q.decodeString(Be,!0)}catch(He){console.error("base64Decode failed: ",He)}return null};function re(Be){return he(void 0,Be)}function he(Be,He){if(!(He instanceof Object))return He;switch(He.constructor){case Date:return new Date(He.getTime());case Object:void 0===Be&&(Be={});break;case Array:Be=[];break;default:return He}for(const ct in He)!He.hasOwnProperty(ct)||!_e(ct)||(Be[ct]=he(Be[ct],He[ct]));return Be}function _e(Be){return"__proto__"!==Be}function le(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function we(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(le())}function ht(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Be){return!1}}function Ae(){return"object"==typeof self&&self.self===self}function Ze(){const Be="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Be&&void 0!==Be.id}function Ge(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Se(){const Be=le();return Be.indexOf("MSIE ")>=0||Be.indexOf("Trident/")>=0}function gt(){return!1}function ut(){return!ht()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $t(){return"object"==typeof indexedDB}function E(){return new Promise((Be,He)=>{try{let ct=!0;const We="validate-browser-context-for-indexeddb-analytics-module",Ee=self.indexedDB.open(We);Ee.onsuccess=()=>{Ee.result.close(),ct||self.indexedDB.deleteDatabase(We),Be(!0)},Ee.onupgradeneeded=()=>{ct=!1},Ee.onerror=()=>{var $e;He((null===($e=Ee.error)||void 0===$e?void 0:$e.message)||"")}}catch(ct){He(ct)}})}function pt(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const et=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const Be=process.env.__FIREBASE_DEFAULTS__;return Be?JSON.parse(Be):void 0})()||(()=>{if("undefined"==typeof document)return;let Be;try{Be=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(ct){return}const He=Be&&Ce(Be[1]);return He&&JSON.parse(He)})()}catch(Be){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Be}`)}},dt=Be=>{var He,ct;return null===(ct=null===(He=et())||void 0===He?void 0:He.emulatorHosts)||void 0===ct?void 0:ct[Be]},nt=Be=>{const He=dt(Be);if(!He)return;const ct=He.lastIndexOf(":");if(ct<=0||ct+1===He.length)throw new Error(`Invalid host ${He} with no separate hostname and port!`);const We=parseInt(He.substring(ct+1),10);return"["===He[0]?[He.substring(1,ct-1),We]:[He.substring(0,ct),We]},At=()=>{var Be;return null===(Be=et())||void 0===Be?void 0:Be.config},Ie=Be=>{var He;return null===(He=et())||void 0===He?void 0:He[`_${Be}`]};class Ye{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((He,ct)=>{this.resolve=He,this.reject=ct})}wrapCallback(He){return(ct,We)=>{ct?this.reject(ct):this.resolve(We),"function"==typeof He&&(this.promise.catch(()=>{}),1===He.length?He(ct):He(ct,We))}}}function Ve(Be,He){if(Be.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const We=He||"demo-project",Ee=Be.iat||0,$e=Be.sub||Be.user_id;if(!$e)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const wt=Object.assign({iss:`https://securetoken.google.com/${We}`,aud:We,iat:Ee,exp:Ee+3600,auth_time:Ee,sub:$e,user_id:$e,firebase:{sign_in_provider:"custom",identities:{}}},Be);return[L(JSON.stringify({alg:"none",type:"JWT"})),L(JSON.stringify(wt)),""].join(".")}class tt extends Error{constructor(He,ct,We){super(ct),this.code=He,this.customData=We,this.name="FirebaseError",Object.setPrototypeOf(this,tt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,St.prototype.create)}}class St{constructor(He,ct,We){this.service=He,this.serviceName=ct,this.errors=We}create(He,...ct){const We=ct[0]||{},Ee=`${this.service}/${He}`,$e=this.errors[He],wt=$e?function(Be,He){return Be.replace(Mt,(ct,We)=>{const Ee=He[We];return null!=Ee?String(Ee):`<${We}?>`})}($e,We):"Error";return new tt(Ee,`${this.serviceName}: ${wt} (${Ee}).`,We)}}const Mt=/\{\$([^}]+)}/g;function Nt(Be){return JSON.parse(Be)}function gn(Be){return JSON.stringify(Be)}const Nn=function(Be){let He={},ct={},We={},Ee="";try{const $e=Be.split(".");He=Nt(Ce($e[0])||""),ct=Nt(Ce($e[1])||""),Ee=$e[2],We=ct.d||{},delete ct.d}catch($e){}return{header:He,claims:ct,data:We,signature:Ee}},Sn=function(Be){const ct=Nn(Be).claims;return!!ct&&"object"==typeof ct&&ct.hasOwnProperty("iat")},mr=function(Be){const He=Nn(Be).claims;return"object"==typeof He&&!0===He.admin};function cr(Be,He){return Object.prototype.hasOwnProperty.call(Be,He)}function Tt(Be,He){if(Object.prototype.hasOwnProperty.call(Be,He))return Be[He]}function un(Be){for(const He in Be)if(Object.prototype.hasOwnProperty.call(Be,He))return!1;return!0}function Un(Be,He,ct){const We={};for(const Ee in Be)Object.prototype.hasOwnProperty.call(Be,Ee)&&(We[Ee]=He.call(ct,Be[Ee],Ee,Be));return We}function Xt(Be,He){if(Be===He)return!0;const ct=Object.keys(Be),We=Object.keys(He);for(const Ee of ct){if(!We.includes(Ee))return!1;const $e=Be[Ee],wt=He[Ee];if(Ln($e)&&Ln(wt)){if(!Xt($e,wt))return!1}else if($e!==wt)return!1}for(const Ee of We)if(!ct.includes(Ee))return!1;return!0}function Ln(Be){return null!==Be&&"object"==typeof Be}function Xn(Be){const He=[];for(const[ct,We]of Object.entries(Be))Array.isArray(We)?We.forEach(Ee=>{He.push(encodeURIComponent(ct)+"="+encodeURIComponent(Ee))}):He.push(encodeURIComponent(ct)+"="+encodeURIComponent(We));return He.length?"&"+He.join("&"):""}function or(Be){const He={};return Be.replace(/^\?/,"").split("&").forEach(We=>{if(We){const[Ee,$e]=We.split("=");He[decodeURIComponent(Ee)]=decodeURIComponent($e)}}),He}function vr(Be){const He=Be.indexOf("?");if(!He)return"";const ct=Be.indexOf("#",He);return Be.substring(He,ct>0?ct:void 0)}class Er{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let He=1;He<this.blockSize;++He)this.pad_[He]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(He,ct){ct||(ct=0);const We=this.W_;if("string"==typeof He)for(let mn=0;mn<16;mn++)We[mn]=He.charCodeAt(ct)<<24|He.charCodeAt(ct+1)<<16|He.charCodeAt(ct+2)<<8|He.charCodeAt(ct+3),ct+=4;else for(let mn=0;mn<16;mn++)We[mn]=He[ct]<<24|He[ct+1]<<16|He[ct+2]<<8|He[ct+3],ct+=4;for(let mn=16;mn<80;mn++){const In=We[mn-3]^We[mn-8]^We[mn-14]^We[mn-16];We[mn]=4294967295&(In<<1|In>>>31)}let An,Vn,Ee=this.chain_[0],$e=this.chain_[1],wt=this.chain_[2],Qt=this.chain_[3],jn=this.chain_[4];for(let mn=0;mn<80;mn++){mn<40?mn<20?(An=Qt^$e&(wt^Qt),Vn=1518500249):(An=$e^wt^Qt,Vn=1859775393):mn<60?(An=$e&wt|Qt&($e|wt),Vn=2400959708):(An=$e^wt^Qt,Vn=3395469782);const In=(Ee<<5|Ee>>>27)+An+jn+Vn+We[mn]&4294967295;jn=Qt,Qt=wt,wt=4294967295&($e<<30|$e>>>2),$e=Ee,Ee=In}this.chain_[0]=this.chain_[0]+Ee&4294967295,this.chain_[1]=this.chain_[1]+$e&4294967295,this.chain_[2]=this.chain_[2]+wt&4294967295,this.chain_[3]=this.chain_[3]+Qt&4294967295,this.chain_[4]=this.chain_[4]+jn&4294967295}update(He,ct){if(null==He)return;void 0===ct&&(ct=He.length);const We=ct-this.blockSize;let Ee=0;const $e=this.buf_;let wt=this.inbuf_;for(;Ee<ct;){if(0===wt)for(;Ee<=We;)this.compress_(He,Ee),Ee+=this.blockSize;if("string"==typeof He){for(;Ee<ct;)if($e[wt]=He.charCodeAt(Ee),++wt,++Ee,wt===this.blockSize){this.compress_($e),wt=0;break}}else for(;Ee<ct;)if($e[wt]=He[Ee],++wt,++Ee,wt===this.blockSize){this.compress_($e),wt=0;break}}this.inbuf_=wt,this.total_+=ct}digest(){const He=[];let ct=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Ee=this.blockSize-1;Ee>=56;Ee--)this.buf_[Ee]=255&ct,ct/=256;this.compress_(this.buf_);let We=0;for(let Ee=0;Ee<5;Ee++)for(let $e=24;$e>=0;$e-=8)He[We]=this.chain_[Ee]>>$e&255,++We;return He}}function hr(Be,He){const ct=new ei(Be,He);return ct.subscribe.bind(ct)}class ei{constructor(He,ct){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ct,this.task.then(()=>{He(this)}).catch(We=>{this.error(We)})}next(He){this.forEachObserver(ct=>{ct.next(He)})}error(He){this.forEachObserver(ct=>{ct.error(He)}),this.close(He)}complete(){this.forEachObserver(He=>{He.complete()}),this.close()}subscribe(He,ct,We){let Ee;if(void 0===He&&void 0===ct&&void 0===We)throw new Error("Missing Observer.");Ee=function(Be,He){if("object"!=typeof Be||null===Be)return!1;for(const ct of["next","error","complete"])if(ct in Be&&"function"==typeof Be[ct])return!0;return!1}(He)?He:{next:He,error:ct,complete:We},void 0===Ee.next&&(Ee.next=It),void 0===Ee.error&&(Ee.error=It),void 0===Ee.complete&&(Ee.complete=It);const $e=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ee.error(this.finalError):Ee.complete()}catch(wt){}}),this.observers.push(Ee),$e}unsubscribeOne(He){void 0===this.observers||void 0===this.observers[He]||(delete this.observers[He],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(He){if(!this.finalized)for(let ct=0;ct<this.observers.length;ct++)this.sendOne(ct,He)}sendOne(He,ct){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[He])try{ct(this.observers[He])}catch(We){"undefined"!=typeof console&&console.error&&console.error(We)}})}close(He){this.finalized||(this.finalized=!0,void 0!==He&&(this.finalError=He),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function It(){}const ur=function(Be,He,ct,We){let Ee;if(We<He?Ee="at least "+He:We>ct&&(Ee=0===ct?"none":"no more than "+ct),Ee)throw new Error(Be+" failed: Was called with "+We+(1===We?" argument.":" arguments.")+" Expects "+Ee+".")};function pr(Be,He){return`${Be} failed: ${He} argument `}function En(Be,He,ct,We){if((!We||ct)&&"function"!=typeof ct)throw new Error(pr(Be,He)+"must be a valid function.")}function Jn(Be,He,ct,We){if((!We||ct)&&("object"!=typeof ct||null===ct))throw new Error(pr(Be,He)+"must be a valid context object.")}const rr=function(Be){const He=[];let ct=0;for(let We=0;We<Be.length;We++){let Ee=Be.charCodeAt(We);if(Ee>=55296&&Ee<=56319){const $e=Ee-55296;We++,A(We<Be.length,"Surrogate pair missing trail surrogate."),Ee=65536+($e<<10)+(Be.charCodeAt(We)-56320)}Ee<128?He[ct++]=Ee:Ee<2048?(He[ct++]=Ee>>6|192,He[ct++]=63&Ee|128):Ee<65536?(He[ct++]=Ee>>12|224,He[ct++]=Ee>>6&63|128,He[ct++]=63&Ee|128):(He[ct++]=Ee>>18|240,He[ct++]=Ee>>12&63|128,He[ct++]=Ee>>6&63|128,He[ct++]=63&Ee|128)}return He},ir=function(Be){let He=0;for(let ct=0;ct<Be.length;ct++){const We=Be.charCodeAt(ct);We<128?He++:We<2048?He+=2:We>=55296&&We<=56319?(He+=4,ct++):He+=3}return He};function se(Be,He=1e3,ct=2){const We=He*Math.pow(ct,Be),Ee=Math.round(.5*We*(Math.random()-.5)*2);return Math.min(144e5,We+Ee)}function Ct(Be){return Be&&Be._delegate?Be._delegate:Be}},8945:(en,it,F)=>{"use strict";function oe(w,N,T,q){var Jt,pe=arguments.length,vt=pe<3?N:null===q?q=Object.getOwnPropertyDescriptor(N,T):q;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)vt=Reflect.decorate(w,N,T,q);else for(var vn=w.length-1;vn>=0;vn--)(Jt=w[vn])&&(vt=(pe<3?Jt(vt):pe>3?Jt(N,T,vt):Jt(N,T))||vt);return pe>3&&vt&&Object.defineProperty(N,T,vt),vt}function Q(w,N){return function(T,q){N(T,q,w)}}function L(w,N,T,q){return new(T||(T=Promise))(function(vt,Jt){function vn(Lr){try{On(q.next(Lr))}catch(Ci){Jt(Ci)}}function Cr(Lr){try{On(q.throw(Lr))}catch(Ci){Jt(Ci)}}function On(Lr){Lr.done?vt(Lr.value):function(vt){return vt instanceof T?vt:new T(function(Jt){Jt(vt)})}(Lr.value).then(vn,Cr)}On((q=q.apply(w,N||[])).next())})}F.d(it,{Br:()=>to,w:()=>xe,dr:()=>Vr,oU:()=>Fr,cs:()=>Os,YG:()=>Xi,Sm:()=>Qn,W2:()=>Ar,Gu:()=>Je,gu:()=>rt,pK:()=>on,Ie:()=>Pn,u8:()=>xr,IK:()=>ss,td:()=>hi,Q$:()=>bi,q_:()=>xs,z0:()=>li,fG:()=>Hs,uN:()=>Rs,I_:()=>Oa,jP:()=>ao,t9:()=>es,n0:()=>Yi,PQ:()=>Mo,g2:()=>eo,wd:()=>as,ho:()=>Ms,sr:()=>Ni,Pc:()=>bo,r4:()=>qa,HT:()=>ls,t4:()=>wt,QI:()=>We,j9:()=>$e});var E=F(7716),pt=F(665),Dt=F(8583),Pe=F(174),be=F(7235),dt=(F(7689),F(5392),F(7807)),nt=F(9461),At=F(7585),Ie=F(1567),Ye=F(4425),Ve=F(6951),Fe=F(3291),St=(F(960),F(3150)),wn=F(8891),yn=F(9796),Sn=F(9105),mr=F(8002);function Tt(w,N,T,q){return(0,Sn.m)(T)&&(q=T,T=void 0),q?Tt(w,N,T).pipe((0,mr.U)(pe=>(0,yn.k)(pe)?q(...pe):q(pe))):new wn.y(pe=>{un(w,N,function(Jt){pe.next(arguments.length>1?Array.prototype.slice.call(arguments):Jt)},pe,T)})}function un(w,N,T,q,pe){let vt;if(function(w){return w&&"function"==typeof w.addEventListener&&"function"==typeof w.removeEventListener}(w)){const Jt=w;w.addEventListener(N,T,pe),vt=()=>Jt.removeEventListener(N,T,pe)}else if(function(w){return w&&"function"==typeof w.on&&"function"==typeof w.off}(w)){const Jt=w;w.on(N,T),vt=()=>Jt.off(N,T)}else if(function(w){return w&&"function"==typeof w.addListener&&"function"==typeof w.removeListener}(w)){const Jt=w;w.addListener(N,T),vt=()=>Jt.removeListener(N,T)}else{if(!w||!w.length)throw new TypeError("Invalid event target");for(let Jt=0,vn=w.length;Jt<vn;Jt++)un(w[Jt],N,T,q,pe)}q.add(vt)}var kn=F(9765),Xn=F(6215),or=F(5435),vr=F(3190),Er=F(7519);const ei=At.i,It=["*"],En=w=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(w):"function"==typeof requestAnimationFrame?requestAnimationFrame(w):setTimeout(w);let Jn=(()=>{class w{constructor(T,q){this.injector=T,this.el=q,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(T){this.el.nativeElement.value=this.lastValue=null==T?"":T,rr(this.el)}handleChangeEvent(T,q){T===this.el.nativeElement&&(q!==this.lastValue&&(this.lastValue=q,this.onChange(q)),rr(this.el))}_handleBlurEvent(T){T===this.el.nativeElement&&(this.onTouched(),rr(this.el))}registerOnChange(T){this.onChange=T}registerOnTouched(T){this.onTouched=T}setDisabledState(T){this.el.nativeElement.disabled=T}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let T;try{T=this.injector.get(pt.a5)}catch(pe){}if(!T)return;T.statusChanges&&(this.statusChanges=T.statusChanges.subscribe(()=>rr(this.el)));const q=T.control;q&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(vt=>{if(q[vt]){const Jt=q[vt].bind(q);q[vt]=(...vn)=>{Jt(...vn),rr(this.el)}}})}}return w.\u0275fac=function(T){E.$Z()},w.\u0275dir=E.lG2({type:w,hostBindings:function(T,q){1&T&&E.NdJ("ionBlur",function(vt){return q._handleBlurEvent(vt.target)})}}),oe([(0,E.L6J)("ionBlur",["$event.target"])],w.prototype,"_handleBlurEvent",null),w})();const rr=w=>{En(()=>{const N=w.nativeElement,T=ir(N);Zn(N,T);const q=N.closest("ion-item");q&&Zn(q,T)})},ir=w=>{const N=w.classList,T=[];for(let q=0;q<N.length;q++){const pe=N.item(q);null!==pe&&fn(pe,"ng-")&&T.push(`ion-${pe.substr(3)}`)}return T},Zn=(w,N)=>{const T=w.classList;["ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"].forEach(q=>T.remove(q)),N.forEach(q=>T.add(q))},fn=(w,N)=>w.substr(0,N.length)===N;var se;let xe=se=class extends Jn{constructor(N,T){super(N,T)}writeValue(N){this.el.nativeElement.checked=this.lastValue=null!=N&&N,rr(this.el)}_handleIonChange(N){this.handleChangeEvent(N,N.checked)}};var at;xe.\u0275fac=function(N){return new(N||xe)(E.Y36(E.zs3),E.Y36(E.SBq))},xe.\u0275dir=E.lG2({type:xe,selectors:[["ion-checkbox"],["ion-toggle"]],hostBindings:function(N,T){1&N&&E.NdJ("ionChange",function(pe){return T._handleIonChange(pe.target)})},features:[E._Bn([{provide:pt.JU,useExisting:se,multi:!0}]),E.qOj]}),xe.ctorParameters=()=>[{type:E.zs3},{type:E.SBq}],oe([(0,E.L6J)("ionChange",["$event.target"])],xe.prototype,"_handleIonChange",null);let Ct=at=class extends Jn{constructor(N,T){super(N,T)}_handleIonChange(N){this.handleChangeEvent(N,N.value)}registerOnChange(N){super.registerOnChange(T=>{N(""===T?null:parseFloat(T))})}};var Be;Ct.\u0275fac=function(N){return new(N||Ct)(E.Y36(E.zs3),E.Y36(E.SBq))},Ct.\u0275dir=E.lG2({type:Ct,selectors:[["ion-input","type","number"]],hostBindings:function(N,T){1&N&&E.NdJ("ionChange",function(pe){return T._handleIonChange(pe.target)})},features:[E._Bn([{provide:pt.JU,useExisting:at,multi:!0}]),E.qOj]}),Ct.ctorParameters=()=>[{type:E.zs3},{type:E.SBq}],oe([(0,E.L6J)("ionChange",["$event.target"])],Ct.prototype,"_handleIonChange",null);let He=Be=class extends Jn{constructor(N,T){super(N,T)}_handleIonSelect(N){this.handleChangeEvent(N,N.checked)}};var ct;He.\u0275fac=function(N){return new(N||He)(E.Y36(E.zs3),E.Y36(E.SBq))},He.\u0275dir=E.lG2({type:He,selectors:[["ion-radio"]],hostBindings:function(N,T){1&N&&E.NdJ("ionSelect",function(pe){return T._handleIonSelect(pe.target)})},features:[E._Bn([{provide:pt.JU,useExisting:Be,multi:!0}]),E.qOj]}),He.ctorParameters=()=>[{type:E.zs3},{type:E.SBq}],oe([(0,E.L6J)("ionSelect",["$event.target"])],He.prototype,"_handleIonSelect",null);let We=ct=class extends Jn{constructor(N,T){super(N,T)}_handleChangeEvent(N){this.handleChangeEvent(N,N.value)}};var Ee;We.\u0275fac=function(N){return new(N||We)(E.Y36(E.zs3),E.Y36(E.SBq))},We.\u0275dir=E.lG2({type:We,selectors:[["ion-range"],["ion-select"],["ion-radio-group"],["ion-segment"],["ion-datetime"]],hostBindings:function(N,T){1&N&&E.NdJ("ionChange",function(pe){return T._handleChangeEvent(pe.target)})},features:[E._Bn([{provide:pt.JU,useExisting:ct,multi:!0}]),E.qOj]}),We.ctorParameters=()=>[{type:E.zs3},{type:E.SBq}],oe([(0,E.L6J)("ionChange",["$event.target"])],We.prototype,"_handleChangeEvent",null);let $e=Ee=class extends Jn{constructor(N,T){super(N,T)}_handleInputEvent(N){this.handleChangeEvent(N,N.value)}};$e.\u0275fac=function(N){return new(N||$e)(E.Y36(E.zs3),E.Y36(E.SBq))},$e.\u0275dir=E.lG2({type:$e,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(N,T){1&N&&E.NdJ("ionChange",function(pe){return T._handleInputEvent(pe.target)})},features:[E._Bn([{provide:pt.JU,useExisting:Ee,multi:!0}]),E.qOj]}),$e.ctorParameters=()=>[{type:E.zs3},{type:E.SBq}],oe([(0,E.L6J)("ionChange",["$event.target"])],$e.prototype,"_handleInputEvent",null);let wt=class{constructor(N,T){this.doc=N,this.backButton=new kn.xQ,this.keyboardDidShow=new kn.xQ,this.keyboardDidHide=new kn.xQ,this.pause=new kn.xQ,this.resume=new kn.xQ,this.resize=new kn.xQ,T.run(()=>{let q;this.win=N.defaultView,this.backButton.subscribeWithPriority=function(pe,vt){return this.subscribe(Jt=>Jt.register(pe,vn=>T.run(()=>vt(vn))))},An(this.pause,N,"pause"),An(this.resume,N,"resume"),An(this.backButton,N,"ionBackButton"),An(this.resize,this.win,"resize"),An(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),An(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(pe=>{q=pe}),this.win&&this.win.cordova?N.addEventListener("deviceready",()=>{q("cordova")},{once:!0}):q("dom")})}is(N){return(0,At.a)(this.win,N)}platforms(){return(0,At.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(N){return Qt(this.win.location.href,N)}isLandscape(){return!this.isPortrait()}isPortrait(){return this.win.matchMedia&&this.win.matchMedia("(orientation: portrait)").matches}testUserAgent(N){const T=this.win.navigator;return!!(T&&T.userAgent&&T.userAgent.indexOf(N)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}};wt.\u0275fac=function(N){return new(N||wt)(E.LFG(Dt.K0),E.LFG(E.R0b))},wt.\u0275prov=E.Yz7({token:wt,factory:function(w){return wt.\u0275fac(w)},providedIn:"root"}),wt.ngInjectableDef=(0,E.Yz7)({factory:function(){return new wt((0,E.LFG)(Dt.K0),(0,E.LFG)(E.R0b))},token:wt,providedIn:"root"}),wt=oe([Q(0,(0,E.tBr)(Dt.K0))],wt);const Qt=(w,N)=>{N=N.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");const q=new RegExp("[\\?&]"+N+"=([^&#]*)").exec(w);return q?decodeURIComponent(q[1].replace(/\+/g," ")):null},An=(w,N,T)=>{N&&N.addEventListener(T,q=>{w.next(null!=q?q.detail:void 0)})};let mn=class{constructor(N,T,q,pe){this.location=T,this.serializer=q,this.router=pe,this.direction=Zt,this.animated=Yt,this.guessDirection="forward",this.lastNavId=-1,pe&&pe.events.subscribe(vt=>{if(vt instanceof Pe.OD){const Jt=vt.restoredState?vt.restoredState.navigationId:vt.id;this.guessDirection=Jt<this.lastNavId?"back":"forward",this.guessAnimation=vt.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?vt.id:Jt}}),N.backButton.subscribeWithPriority(0,vt=>{this.pop(),vt()})}navigateForward(N,T={}){return this.setDirection("forward",T.animated,T.animationDirection,T.animation),this.navigate(N,T)}navigateBack(N,T={}){return this.setDirection("back",T.animated,T.animationDirection,T.animation),this.navigate(N,T)}navigateRoot(N,T={}){return this.setDirection("root",T.animated,T.animationDirection,T.animation),this.navigate(N,T)}back(N={animated:!0,animationDirection:"back"}){return this.setDirection("back",N.animated,N.animationDirection,N.animation),this.location.back()}pop(){return L(this,void 0,void 0,function*(){let N=this.topOutlet;for(;N&&!(yield N.pop());)N=N.parentOutlet})}setDirection(N,T,q,pe){this.direction=N,this.animated=In(N,T,q),this.animationBuilder=pe}setTopOutlet(N){this.topOutlet=N}consumeTransition(){let T,N="root";const q=this.animationBuilder;return"auto"===this.direction?(N=this.guessDirection,T=this.guessAnimation):(T=this.animated,N=this.direction),this.direction=Zt,this.animated=Yt,this.animationBuilder=void 0,{direction:N,animation:T,animationBuilder:q}}navigate(N,T){if(Array.isArray(N))return this.router.navigate(N,T);{const q=this.serializer.parse(N.toString());return void 0!==T.queryParams&&(q.queryParams=Object.assign({},T.queryParams)),void 0!==T.fragment&&(q.fragment=T.fragment),this.router.navigateByUrl(q,T)}}};mn.\u0275fac=function(N){return new(N||mn)(E.LFG(wt),E.LFG(Dt.Ye),E.LFG(Pe.Hx),E.LFG(Pe.F0,8))},mn.\u0275prov=E.Yz7({token:mn,factory:function(w){return mn.\u0275fac(w)},providedIn:"root"}),mn.ngInjectableDef=(0,E.Yz7)({factory:function(){return new mn((0,E.LFG)(wt),(0,E.LFG)(Dt.Ye),(0,E.LFG)(Pe.Hx),(0,E.LFG)(Pe.F0,8))},token:mn,providedIn:"root"}),mn=oe([Q(3,(0,E.FiY)())],mn);const In=(w,N,T)=>{if(!1!==N){if(void 0!==T)return T;if("forward"===w||"back"===w)return w;if("root"===w&&!0===N)return"forward"}},Zt="auto",Yt=void 0,Ut=(w,N)=>{const T=w.prototype;N.forEach(q=>{Object.defineProperty(T,q,{get(){return this.el[q]},set(pe){this.z.runOutsideAngular(()=>this.el[q]=pe)}})})},Cn=(w,N)=>{const T=w.prototype;N.forEach(q=>{T[q]=function(){const pe=arguments;return this.z.runOutsideAngular(()=>this.el[q].apply(this.el,pe))}})},Mn=(w,N,T)=>{T.forEach(q=>w[q]=Tt(N,q))};function dn(w){return function(T){return w.inputs&&Ut(T,w.inputs),w.methods&&Cn(T,w.methods),T}}let Vr=(()=>{let w=class{constructor(T,q,pe){this.z=pe,T.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-app"]],ngContentSelectors:It,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w})(),Fr=(()=>{let w=class{constructor(T,q,pe){this.z=pe,T.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-back-button"]],inputs:{color:"color",defaultHref:"defaultHref",disabled:"disabled",icon:"icon",mode:"mode",routerAnimation:"routerAnimation",text:"text",type:"type"},ngContentSelectors:It,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=oe([dn({inputs:["color","defaultHref","disabled","icon","mode","routerAnimation","text","type"]})],w),w})(),Xi=(()=>{let w=class{constructor(T,q,pe){this.z=pe,T.detach(),this.el=q.nativeElement,Mn(this,this.el,["ionFocus","ionBlur"])}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:It,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=oe([dn({inputs:["buttonType","color","disabled","download","expand","fill","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],w),w})(),Qn=(()=>{let w=class{constructor(T,q,pe){this.z=pe,T.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},ngContentSelectors:It,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=oe([dn({inputs:["collapse"]})],w),w})(),Ar=(()=>{let w=class{constructor(T,q,pe){this.z=pe,T.detach(),this.el=q.nativeElement,Mn(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:It,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=oe([dn({inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],w),w})(),Je=(()=>{let w=class{constructor(T,q,pe){this.z=pe,T.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:It,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=oe([dn({inputs:["collapse","mode","translucent"]})],w),w})(),rt=(()=>{let w=class{constructor(T,q,pe){this.z=pe,T.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-icon"]],inputs:{ariaHidden:"ariaHidden",ariaLabel:"ariaLabel",color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:It,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=oe([dn({inputs:["ariaHidden","ariaLabel","color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],w),w})(),on=(()=>{let w=class{constructor(T,q,pe){this.z=pe,T.detach(),this.el=q.nativeElement,Mn(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:It,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=oe([dn({inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","debounce","disabled","enterkeyhint","inputmode","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],w),w})(),Pn=(()=>{let w=class{constructor(T,q,pe){this.z=pe,T.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-item"]],inputs:{button:"button",color:"color",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:It,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=oe([dn({inputs:["button","color","detail","detailIcon","disabled","download","href","lines","mode","rel","routerAnimation","routerDirection","target","type"]})],w),w})(),xr=(()=>{let w=class{constructor(T,q,pe){this.z=pe,T.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-item-option"]],inputs:{color:"color",disabled:"disabled",download:"download",expandable:"expandable",href:"href",mode:"mode",rel:"rel",target:"target",type:"type"},ngContentSelectors:It,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=oe([dn({inputs:["color","disabled","download","expandable","href","mode","rel","target","type"]})],w),w})(),ss=(()=>{let w=class{constructor(T,q,pe){this.z=pe,T.detach(),this.el=q.nativeElement,Mn(this,this.el,["ionSwipe"])}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-item-options"]],inputs:{side:"side"},ngContentSelectors:It,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=oe([dn({inputs:["side"]})],w),w})(),hi=(()=>{let w=class{constructor(T,q,pe){this.z=pe,T.detach(),this.el=q.nativeElement,Mn(this,this.el,["ionDrag"])}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-item-sliding"]],inputs:{disabled:"disabled"},ngContentSelectors:It,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=oe([dn({inputs:["disabled"],methods:["getOpenAmount","getSlidingRatio","open","close","closeOpened"]})],w),w})(),bi=(()=>{let w=class{constructor(T,q,pe){this.z=pe,T.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:It,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=oe([dn({inputs:["color","mode","position"]})],w),w})(),xs=(()=>{let w=class{constructor(T,q,pe){this.z=pe,T.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:It,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=oe([dn({inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],w),w})(),li=(()=>{let w=class{constructor(T,q,pe){this.z=pe,T.detach(),this.el=q.nativeElement,Mn(this,this.el,["ionWillOpen","ionWillClose","ionDidOpen","ionDidClose"])}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-menu"]],inputs:{contentId:"contentId",disabled:"disabled",maxEdgeStart:"maxEdgeStart",menuId:"menuId",side:"side",swipeGesture:"swipeGesture",type:"type"},ngContentSelectors:It,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=oe([dn({inputs:["contentId","disabled","maxEdgeStart","menuId","side","swipeGesture","type"],methods:["isOpen","isActive","open","close","toggle","setOpen"]})],w),w})(),Hs=(()=>{let w=class{constructor(T,q,pe){this.z=pe,T.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-menu-button"]],inputs:{autoHide:"autoHide",color:"color",disabled:"disabled",menu:"menu",mode:"mode",type:"type"},ngContentSelectors:It,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=oe([dn({inputs:["autoHide","color","disabled","menu","mode","type"]})],w),w})(),Rs=(()=>{let w=class{constructor(T,q,pe){this.z=pe,T.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-note"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:It,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=oe([dn({inputs:["color","mode"]})],w),w})(),Oa=(()=>{let w=class{constructor(T,q,pe){this.z=pe,T.detach(),this.el=q.nativeElement,Mn(this,this.el,["ionChange","ionFocus","ionBlur"])}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-range"]],inputs:{color:"color",debounce:"debounce",disabled:"disabled",dualKnobs:"dualKnobs",max:"max",min:"min",mode:"mode",name:"name",pin:"pin",snaps:"snaps",step:"step",ticks:"ticks",value:"value"},ngContentSelectors:It,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=oe([dn({inputs:["color","debounce","disabled","dualKnobs","max","min","mode","name","pin","snaps","step","ticks","value"]})],w),w})(),es=(()=>{let w=class{constructor(T,q,pe){this.z=pe,T.detach(),this.el=q.nativeElement,Mn(this,this.el,["ionChange","ionCancel","ionFocus","ionBlur"])}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-select"]],inputs:{cancelText:"cancelText",compareWith:"compareWith",disabled:"disabled",interface:"interface",interfaceOptions:"interfaceOptions",mode:"mode",multiple:"multiple",name:"name",okText:"okText",placeholder:"placeholder",selectedText:"selectedText",value:"value"},ngContentSelectors:It,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=oe([dn({inputs:["cancelText","compareWith","disabled","interface","interfaceOptions","mode","multiple","name","okText","placeholder","selectedText","value"],methods:["open"]})],w),w})(),Yi=(()=>{let w=class{constructor(T,q,pe){this.z=pe,T.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-select-option"]],inputs:{disabled:"disabled",value:"value"},ngContentSelectors:It,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=oe([dn({inputs:["disabled","value"]})],w),w})(),Mo=(()=>{let w=class{constructor(T,q,pe){this.z=pe,T.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-spinner"]],inputs:{color:"color",duration:"duration",name:"name",paused:"paused"},ngContentSelectors:It,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=oe([dn({inputs:["color","duration","name","paused"]})],w),w})(),eo=(()=>{let w=class{constructor(T,q,pe){this.z=pe,T.detach(),this.el=q.nativeElement,Mn(this,this.el,["ionChange","ionInput","ionBlur","ionFocus"])}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-textarea"]],inputs:{autoGrow:"autoGrow",autocapitalize:"autocapitalize",autofocus:"autofocus",clearOnEdit:"clearOnEdit",color:"color",cols:"cols",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",maxlength:"maxlength",minlength:"minlength",mode:"mode",name:"name",placeholder:"placeholder",readonly:"readonly",required:"required",rows:"rows",spellcheck:"spellcheck",value:"value",wrap:"wrap"},ngContentSelectors:It,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=oe([dn({inputs:["autoGrow","autocapitalize","autofocus","clearOnEdit","color","cols","debounce","disabled","enterkeyhint","inputmode","maxlength","minlength","mode","name","placeholder","readonly","required","rows","spellcheck","value","wrap"],methods:["setFocus","getInputElement"]})],w),w})(),as=(()=>{let w=class{constructor(T,q,pe){this.z=pe,T.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:It,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=oe([dn({inputs:["color","size"]})],w),w})(),Ms=(()=>{let w=class{constructor(T,q,pe){this.z=pe,T.detach(),this.el=q.nativeElement,Mn(this,this.el,["ionChange","ionFocus","ionBlur"])}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-toggle"]],inputs:{checked:"checked",color:"color",disabled:"disabled",mode:"mode",name:"name",value:"value"},ngContentSelectors:It,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=oe([dn({inputs:["checked","color","disabled","mode","name","value"]})],w),w})(),Ni=(()=>{let w=class{constructor(T,q,pe){this.z=pe,T.detach(),this.el=q.nativeElement}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(E.R0b))},w.\u0275cmp=E.Xpm({type:w,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:It,decls:1,vars:0,template:function(T,q){1&T&&(E.F$t(),E.Hsn(0))},encapsulation:2,changeDetection:0}),w=oe([dn({inputs:["color","mode"]})],w),w})(),Bi=class{get(N,T){const q=fe();return q?q.get(N,T):null}getBoolean(N,T){const q=fe();return!!q&&q.getBoolean(N,T)}getNumber(N,T){const q=fe();return q?q.getNumber(N,T):0}set(N,T){console.warn("[DEPRECATION][Config]: The Config.set() method is deprecated and will be removed in Ionic Framework 6.0. Please see https://ionicframework.com/docs/angular/config for alternatives.");const q=fe();q&&q.set(N,T)}};Bi.\u0275fac=function(N){return new(N||Bi)},Bi.\u0275prov=E.Yz7({token:Bi,factory:function(w){return Bi.\u0275fac(w)},providedIn:"root"}),Bi.ngInjectableDef=(0,E.Yz7)({factory:function(){return new Bi},token:Bi,providedIn:"root"});const W=new E.OlP("USERCONFIG"),fe=()=>{if("undefined"!=typeof window){const w=window.Ionic;if(w&&w.config)return w.config}return null};class De{constructor(N={}){this.data=N}get(N){return this.data[N]}}let Ke=(()=>{let w=class{constructor(T,q){this.zone=T,this.appRef=q}create(T,q,pe){return new Ft(T,q,pe,this.appRef,this.zone)}};return w.\u0275fac=function(T){return new(T||w)(E.LFG(E.R0b),E.LFG(E.z2F))},w.\u0275prov=E.Yz7({token:w,factory:function(N){return w.\u0275fac(N)}}),w})();class Ft{constructor(N,T,q,pe,vt){this.resolver=N,this.injector=T,this.location=q,this.appRef=pe,this.zone=vt,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(N,T,q,pe){return this.zone.run(()=>new Promise(vt=>{vt(an(this.zone,this.resolver,this.injector,this.location,this.appRef,this.elRefMap,this.elEventsMap,N,T,q,pe))}))}removeViewFromDom(N,T){return this.zone.run(()=>new Promise(q=>{const pe=this.elRefMap.get(T);if(pe){pe.destroy(),this.elRefMap.delete(T);const vt=this.elEventsMap.get(T);vt&&(vt(),this.elEventsMap.delete(T))}q()}))}}const an=(w,N,T,q,pe,vt,Jt,vn,Cr,On,Lr)=>{const Ci=N.resolveComponentFactory(Cr),Kt=E.zs3.create({providers:ce(On),parent:T}),lr=q?q.createComponent(Ci,q.length,Kt):Ci.create(Kt),Ki=lr.instance,uo=lr.location.nativeElement;if(On&&Object.assign(Ki,On),Lr)for(const Hn of Lr)uo.classList.add(Hn);const Fn=$(w,Ki,uo);return vn.appendChild(uo),q||pe.attachView(lr.hostView),lr.changeDetectorRef.reattach(),vt.set(uo,lr),Jt.set(uo,Fn),uo},G=[Ye.L,Ye.a,Ye.b,Ye.c,Ye.d],$=(w,N,T)=>w.run(()=>{const q=G.filter(pe=>"function"==typeof N[pe]).map(pe=>{const vt=Jt=>N[pe](Jt.detail);return T.addEventListener(pe,vt),()=>T.removeEventListener(pe,vt)});return()=>q.forEach(pe=>pe())}),k=new E.OlP("NavParamsToken"),ce=w=>[{provide:k,useValue:w},{provide:De,useFactory:_n,deps:[k]}],_n=w=>new De(w),$i=(w,N)=>((w=w.filter(T=>T.stackId!==N.stackId)).push(N),w),_o=(w,N)=>{const T=w.createUrlTree(["."],{relativeTo:N});return w.serializeUrl(T)},ka=(w,N)=>{if(!w)return;const T=sa(N);for(let q=0;q<T.length;q++){if(q>=w.length)return T[q];if(T[q]!==w[q])return}},sa=w=>w.split("/").map(N=>N.trim()).filter(N=>""!==N),oa=w=>{w&&(w.ref.destroy(),w.unlistenEvents())};class oo{constructor(N,T,q,pe,vt,Jt){this.containerEl=T,this.router=q,this.navCtrl=pe,this.zone=vt,this.location=Jt,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==N?sa(N):void 0}createView(N,T){const q=_o(this.router,T),pe=N&&N.location&&N.location.nativeElement,vt=$(this.zone,N.instance,pe);return{id:this.nextId++,stackId:ka(this.tabsPrefix,q),unlistenEvents:vt,element:pe,ref:N,url:q}}getExistingView(N){const T=_o(this.router,N),q=this.views.find(pe=>pe.url===T);return q&&q.ref.changeDetectorRef.reattach(),q}setActive(N){const T=this.navCtrl.consumeTransition();let{direction:q,animation:pe,animationBuilder:vt}=T;const Jt=this.activeView,vn=((w,N)=>!N||w.stackId!==N.stackId)(N,Jt);vn&&(q="back",pe=void 0);const Cr=this.views.slice();let On;const Lr=this.router;Lr.getCurrentNavigation?On=Lr.getCurrentNavigation():Lr.navigations&&Lr.navigations.value&&(On=Lr.navigations.value),On&&On.extras&&On.extras.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const Ci=this.views.includes(N),Kt=this.insertView(N,q);Ci||N.ref.changeDetectorRef.detectChanges();const lr=N.animationBuilder;return void 0===vt&&"back"===q&&!vn&&void 0!==lr&&(vt=lr),Jt&&(Jt.animationBuilder=vt),this.zone.runOutsideAngular(()=>this.wait(()=>(Jt&&Jt.ref.changeDetectorRef.detach(),N.ref.changeDetectorRef.reattach(),this.transition(N,Jt,pe,this.canGoBack(1),!1,vt).then(()=>ln(N,Kt,Cr,this.location)).then(()=>({enteringView:N,direction:q,animation:pe,tabSwitch:vn})))))}canGoBack(N,T=this.getActiveStackId()){return this.getStack(T).length>N}pop(N,T=this.getActiveStackId()){return this.zone.run(()=>{const q=this.getStack(T);if(q.length<=N)return Promise.resolve(!1);const pe=q[q.length-N-1];let vt=pe.url;const Jt=pe.savedData;if(Jt){const Cr=Jt.get("primary");Cr&&Cr.route&&Cr.route._routerState&&Cr.route._routerState.snapshot&&Cr.route._routerState.snapshot.url&&(vt=Cr.route._routerState.snapshot.url)}const{animationBuilder:vn}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(vt,Object.assign({},pe.savedExtras,{animation:vn})).then(()=>!0)})}startBackTransition(){const N=this.activeView;if(N){const T=this.getStack(N.stackId),q=T[T.length-2],pe=q.animationBuilder;return this.wait(()=>this.transition(q,N,"back",this.canGoBack(2),!0,pe))}return Promise.resolve()}endBackTransition(N){N?(this.skipTransition=!0,this.pop(1)):this.activeView&&Po(this.activeView,this.views,this.views,this.location)}getLastUrl(N){const T=this.getStack(N);return T.length>0?T[T.length-1]:void 0}getRootUrl(N){const T=this.getStack(N);return T.length>0?T[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(oa),this.activeView=void 0,this.views=[]}getStack(N){return this.views.filter(T=>T.stackId===N)}insertView(N,T){return this.activeView=N,this.views=((w,N,T)=>"root"===T?$i(w,N):"forward"===T?((w,N)=>(w.indexOf(N)>=0?w=w.filter(q=>q.stackId!==N.stackId||q.id<=N.id):w.push(N),w))(w,N):((w,N)=>w.indexOf(N)>=0?w.filter(q=>q.stackId!==N.stackId||q.id<=N.id):$i(w,N))(w,N))(this.views,N,T),this.views.slice()}transition(N,T,q,pe,vt,Jt){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(T===N)return Promise.resolve(!1);const vn=N?N.element:void 0,Cr=T?T.element:void 0,On=this.containerEl;return vn&&vn!==Cr&&(vn.classList.add("ion-page"),vn.classList.add("ion-page-invisible"),vn.parentElement!==On&&On.appendChild(vn),On.commit)?On.commit(vn,Cr,{deepWait:!0,duration:void 0===q?0:void 0,direction:q,showGoBack:pe,progressAnimation:vt,animationBuilder:Jt}):Promise.resolve(!1)}wait(N){return L(this,void 0,void 0,function*(){void 0!==this.runningTask&&(yield this.runningTask,this.runningTask=void 0);const T=this.runningTask=N();return T.finally(()=>this.runningTask=void 0),T})}}const ln=(w,N,T,q)=>"function"==typeof requestAnimationFrame?new Promise(pe=>{requestAnimationFrame(()=>{Po(w,N,T,q),pe()})}):Promise.resolve(),Po=(w,N,T,q)=>{T.filter(pe=>!N.includes(pe)).forEach(oa),N.forEach(pe=>{const Jt=q.path().split("?")[0].split("#")[0];if(pe!==w&&pe.url!==Jt){const vn=pe.element;vn.setAttribute("aria-hidden","true"),vn.classList.add("ion-page-hidden"),pe.ref.changeDetectorRef.detach()}})};let ao=(()=>{let w=class{constructor(T,q,pe,vt,Jt,vn,Cr,On,Lr,Ci,Kt,lr,Ki){this.parentContexts=T,this.location=q,this.resolver=pe,this.config=vn,this.navCtrl=Cr,this.parentOutlet=Ki,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new Xn.X(null),this.stackEvents=new E.vpe,this.activateEvents=new E.vpe,this.deactivateEvents=new E.vpe,this.nativeEl=Lr.nativeElement,this.name=vt||Pe.eC,this.tabsPrefix="true"===Jt?_o(Ci,lr):void 0,this.stackCtrl=new oo(this.tabsPrefix,this.nativeEl,Ci,Cr,Kt,On),T.onChildOutletCreated(this.name,this)}set animation(T){this.nativeEl.animation=T}set animated(T){this.nativeEl.animated=T}set swipeGesture(T){this._swipeGesture=T,this.nativeEl.swipeHandler=T?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:q=>this.stackCtrl.endBackTransition(q)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){if(!this.activated){const T=this.getContext();T&&T.route&&this.activateWith(T.route,T.resolver||null)}new Promise(T=>(0,Ie.c)(this.nativeEl,T)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(T,q){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const q=this.getContext();this.activatedView.savedData=new Map(q.children.contexts);const pe=this.activatedView.savedData.get("primary");if(pe&&q.route&&(pe.route=Object.assign({},q.route)),this.activatedView.savedExtras={},q.route){const vt=q.route.snapshot;this.activatedView.savedExtras.queryParams=vt.queryParams,this.activatedView.savedExtras.fragment=vt.fragment}}const T=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,q){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=T;let pe,vt=this.stackCtrl.getExistingView(T);if(vt){pe=this.activated=vt.ref;const Jt=vt.savedData;Jt&&(this.getContext().children.contexts=Jt),this.updateActivatedRouteProxy(pe.instance,T)}else{const Cr=(q=q||this.resolver).resolveComponentFactory(T._futureSnapshot.routeConfig.component),On=this.parentContexts.getOrCreateContext(this.name).children,Lr=new Xn.X(null),Ci=this.createActivatedRouteProxy(Lr,T),Kt=new Is(Ci,On,this.location.injector);pe=this.activated=this.location.createComponent(Cr,this.location.length,Kt),Lr.next(pe.instance),vt=this.stackCtrl.createView(this.activated,T),this.proxyMap.set(pe.instance,Ci),this.currentActivatedRoute$.next({component:pe.instance,activatedRoute:T})}this.activatedView=vt,this.stackCtrl.setActive(vt).then(Jt=>{this.navCtrl.setTopOutlet(this),this.activateEvents.emit(pe.instance),this.stackEvents.emit(Jt)})}canGoBack(T=1,q){return this.stackCtrl.canGoBack(T,q)}pop(T=1,q){return this.stackCtrl.pop(T,q)}getLastUrl(T){const q=this.stackCtrl.getLastUrl(T);return q?q.url:void 0}getLastRouteView(T){return this.stackCtrl.getLastUrl(T)}getRootView(T){return this.stackCtrl.getRootUrl(T)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(T,q){const pe=new Pe.gz;return pe._futureSnapshot=q._futureSnapshot,pe._routerState=q._routerState,pe.snapshot=q.snapshot,pe.outlet=q.outlet,pe.component=q.component,pe._paramMap=this.proxyObservable(T,"paramMap"),pe._queryParamMap=this.proxyObservable(T,"queryParamMap"),pe.url=this.proxyObservable(T,"url"),pe.params=this.proxyObservable(T,"params"),pe.queryParams=this.proxyObservable(T,"queryParams"),pe.fragment=this.proxyObservable(T,"fragment"),pe.data=this.proxyObservable(T,"data"),pe}proxyObservable(T,q){return T.pipe((0,or.h)(pe=>!!pe),(0,vr.w)(pe=>this.currentActivatedRoute$.pipe((0,or.h)(vt=>null!==vt&&vt.component===pe),(0,vr.w)(vt=>vt&&vt.activatedRoute[q]),(0,Er.x)())))}updateActivatedRouteProxy(T,q){const pe=this.proxyMap.get(T);if(!pe)throw new Error("Could not find activated route proxy for view");pe._futureSnapshot=q._futureSnapshot,pe._routerState=q._routerState,pe.snapshot=q.snapshot,pe.outlet=q.outlet,pe.component=q.component,this.currentActivatedRoute$.next({component:T,activatedRoute:q})}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(Pe.y6),E.Y36(E.s_b),E.Y36(E._Vd),E.$8M("name"),E.$8M("tabs"),E.Y36(Bi),E.Y36(mn),E.Y36(Dt.Ye),E.Y36(E.SBq),E.Y36(Pe.F0),E.Y36(E.R0b),E.Y36(Pe.gz),E.Y36(w,12))},w.\u0275dir=E.lG2({type:w,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",swipeGesture:"swipeGesture"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),oe([(0,E.r_U)()],w.prototype,"stackEvents",void 0),oe([(0,E.r_U)("activate")],w.prototype,"activateEvents",void 0),oe([(0,E.r_U)("deactivate")],w.prototype,"deactivateEvents",void 0),w=oe([Q(3,(0,E.ahi)("name")),Q(4,(0,E.FiY)()),Q(4,(0,E.ahi)("tabs")),Q(12,(0,E.tp0)()),Q(12,(0,E.FiY)())],w),w})();class Is{constructor(N,T,q){this.route=N,this.childContexts=T,this.parent=q}get(N,T){return N===Pe.gz?this.route:N===Pe.y6?this.childContexts:this.parent.get(N,T)}}let Os=(()=>{let w=class{constructor(T,q,pe){this.routerOutlet=T,this.navCtrl=q,this.config=pe}onClick(T){const q=this.defaultHref||this.config.get("backButtonDefaultHref");this.routerOutlet&&this.routerOutlet.canGoBack()?(this.navCtrl.setDirection("back",void 0,void 0,this.routerAnimation),this.routerOutlet.pop(),T.preventDefault()):null!=q&&(this.navCtrl.navigateBack(q,{animation:this.routerAnimation}),T.preventDefault())}};return w.\u0275fac=function(T){return new(T||w)(E.Y36(ao,8),E.Y36(mn),E.Y36(Bi))},w.\u0275dir=E.lG2({type:w,selectors:[["ion-back-button"]],hostBindings:function(T,q){1&T&&E.NdJ("click",function(vt){return q.onClick(vt)})},inputs:{defaultHref:"defaultHref",routerAnimation:"routerAnimation"}}),oe([(0,E.L6J)("click",["$event"])],w.prototype,"onClick",null),w=oe([Q(0,(0,E.FiY)())],w),w})();class gs{constructor(N){this.ctrl=N}create(N){return this.ctrl.create(N||{})}dismiss(N,T,q){return this.ctrl.dismiss(N,T,q)}getTop(){return this.ctrl.getTop()}}let Fi=class extends gs{constructor(){super(Fe.b)}};Fi.\u0275fac=function(N){return new(N||Fi)},Fi.\u0275prov=E.Yz7({token:Fi,factory:function(w){return Fi.\u0275fac(w)},providedIn:"root"}),Fi.ngInjectableDef=(0,E.Yz7)({factory:function(){return new Fi},token:Fi,providedIn:"root"});let to=class extends gs{constructor(){super(Fe.a)}};to.\u0275fac=function(N){return new(N||to)},to.\u0275prov=E.Yz7({token:to,factory:function(w){return to.\u0275fac(w)},providedIn:"root"}),to.ngInjectableDef=(0,E.Yz7)({factory:function(){return new to},token:to,providedIn:"root"});let ls=class extends gs{constructor(){super(Fe.l)}};ls.\u0275fac=function(N){return new(N||ls)},ls.\u0275prov=E.Yz7({token:ls,factory:function(w){return ls.\u0275fac(w)},providedIn:"root"}),ls.ngInjectableDef=(0,E.Yz7)({factory:function(){return new ls},token:ls,providedIn:"root"});let co=class{open(N){return Ve.m.open(N)}close(N){return Ve.m.close(N)}toggle(N){return Ve.m.toggle(N)}enable(N,T){return Ve.m.enable(N,T)}swipeGesture(N,T){return Ve.m.swipeGesture(N,T)}isOpen(N){return Ve.m.isOpen(N)}isEnabled(N){return Ve.m.isEnabled(N)}get(N){return Ve.m.get(N)}getOpen(){return Ve.m.getOpen()}getMenus(){return Ve.m.getMenus()}};co.\u0275fac=function(N){return new(N||co)},co.\u0275prov=E.Yz7({token:co,factory:function(w){return co.\u0275fac(w)},providedIn:"root"}),co.ngInjectableDef=(0,E.Yz7)({factory:function(){return new co},token:co,providedIn:"root"});let Ys=class extends gs{constructor(){super(Fe.p)}};Ys.\u0275fac=function(N){return new(N||Ys)},Ys.\u0275prov=E.Yz7({token:Ys,factory:function(w){return Ys.\u0275fac(w)},providedIn:"root"}),Ys.ngInjectableDef=(0,E.Yz7)({factory:function(){return new Ys},token:Ys,providedIn:"root"});let vo=(()=>{let w=class extends gs{constructor(T,q,pe){super(Fe.m),this.angularDelegate=T,this.resolver=q,this.injector=pe}create(T){return super.create(Object.assign({},T,{delegate:this.angularDelegate.create(this.resolver,this.injector)}))}};return w.\u0275fac=function(T){return new(T||w)(E.LFG(Ke),E.LFG(E._Vd),E.LFG(E.zs3))},w.\u0275prov=E.Yz7({token:w,factory:function(N){return w.\u0275fac(N)}}),w})(),Oo=(()=>{let w=class extends gs{constructor(T,q,pe){super(Fe.c),this.angularDelegate=T,this.resolver=q,this.injector=pe}create(T){return super.create(Object.assign({},T,{delegate:this.angularDelegate.create(this.resolver,this.injector)}))}};return w.\u0275fac=function(T){return new(T||w)(E.LFG(Ke),E.LFG(E._Vd),E.LFG(E.zs3))},w.\u0275prov=E.Yz7({token:w,factory:function(N){return w.\u0275fac(N)}}),w})(),Eo=class extends gs{constructor(){super(Fe.t)}};Eo.\u0275fac=function(N){return new(N||Eo)},Eo.\u0275prov=E.Yz7({token:Eo,factory:function(w){return Eo.\u0275fac(w)},providedIn:"root"}),Eo.ngInjectableDef=(0,E.Yz7)({factory:function(){return new Eo},token:Eo,providedIn:"root"});let qs=class{read(N){la().read(N)}write(N){la().write(N)}};qs.\u0275fac=function(N){return new(N||qs)},qs.\u0275prov=E.Yz7({token:qs,factory:function(w){return qs.\u0275fac(w)},providedIn:"root"}),qs.ngInjectableDef=(0,E.Yz7)({factory:function(){return new qs},token:qs,providedIn:"root"});const la=()=>{const w="undefined"!=typeof window?window:null;if(null!=w){const N=w.Ionic;return N&&N.queue?N.queue:{read:T=>w.requestAnimationFrame(T),write:T=>w.requestAnimationFrame(T)}}return{read:N=>N(),write:N=>N()}};let vi=class{create(N){return(0,be.c)(N)}easingTime(N,T,q,pe,vt){return(0,dt.g)(N,T,q,pe,vt)}};vi.\u0275fac=function(N){return new(N||vi)},vi.\u0275prov=E.Yz7({token:vi,factory:function(w){return vi.\u0275fac(w)},providedIn:"root"}),vi.ngInjectableDef=(0,E.Yz7)({factory:function(){return new vi},token:vi,providedIn:"root"});let Zs=class{constructor(N){this.zone=N}create(N,T=!1){return T&&Object.getOwnPropertyNames(N).forEach(q=>{if("function"==typeof N[q]){const pe=N[q];N[q]=(...vt)=>this.zone.run(()=>pe(...vt))}}),(0,nt.createGesture)(N)}};Zs.\u0275fac=function(N){return new(N||Zs)(E.LFG(E.R0b))},Zs.\u0275prov=E.Yz7({token:Zs,factory:function(w){return Zs.\u0275fac(w)},providedIn:"root"}),Zs.ngInjectableDef=(0,E.Yz7)({factory:function(){return new Zs((0,E.LFG)(E.R0b))},token:Zs,providedIn:"root"});class qa{shouldDetach(N){return!1}shouldAttach(N){return!1}store(N,T){}retrieve(N){return null}shouldReuseRoute(N,T){if(N.routeConfig!==T.routeConfig)return!1;const q=N.params,pe=T.params,vt=Object.keys(q),Jt=Object.keys(pe);if(vt.length!==Jt.length)return!1;for(const vn of vt)if(pe[vn]!==q[vn])return!1;return!0}}const Qs=(w,N,T)=>()=>{if(N.defaultView&&"undefined"!=typeof window){(w=>{const N=window,T=N.Ionic;T&&T.config&&"Object"!==T.config.constructor.name||(N.Ionic=N.Ionic||{},N.Ionic.config=Object.assign(Object.assign({},N.Ionic.config),w))})(Object.assign({},w,{_zoneGate:vt=>T.run(vt)}));const pe="__zone_symbol__addEventListener"in N.body?"__zone_symbol__addEventListener":"addEventListener";return function(){var w=[];if("undefined"!=typeof window){var N=window;(!N.customElements||N.Element&&(!N.Element.prototype.closest||!N.Element.prototype.matches||!N.Element.prototype.remove||!N.Element.prototype.getRootNode))&&w.push(F.e(6748).then(F.t.bind(F,5141,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||N.NodeList&&!N.NodeList.prototype.forEach||!N.fetch||!function(){try{var q=new URL("b","http://a");return q.pathname="c%20d","http://a/c%20d"===q.href&&q.searchParams}catch(pe){return!1}}()||"undefined"==typeof WeakMap)&&w.push(F.e(2214).then(F.t.bind(F,7656,23)))}return Promise.all(w)}().then(()=>((w,N)=>"undefined"==typeof window?Promise.resolve():(St.C&&St.C.supports&&St.C.supports("color","var(--c)")?(0,St.a)():F.e(1843).then(F.t.bind(F,5902,23)).then(()=>(St.p.$cssShim$=St.w.__cssshim)?St.p.$cssShim$.i():0)).then(()=>(ei(),(0,St.b)(JSON.parse('[["ion-select_3",[[2,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"options":[16]},[[0,"ionChange","onSelect"]]],[33,"ion-select",{"disabled":[4],"cancelText":[1,"cancel-text"],"okText":[1,"ok-text"],"placeholder":[1],"name":[1],"selectedText":[1,"selected-text"],"multiple":[4],"interface":[1],"interfaceOptions":[8,"interface-options"],"compareWith":[1,"compare-with"],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}]]],["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"activated":[32]}]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-modal",[[34,"ion-modal",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"swipeToClose":[4,"swipe-to-close"],"presentingElement":[16],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-popover",[[34,"ion-popover",{"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-app_8",[[0,"ion-app"],[34,"ion-buttons",{"collapse":[4]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"]]],[36,"ion-footer",{"translucent":[4]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-slide_2",[[0,"ion-slide"],[36,"ion-slides",{"options":[8],"pager":[4],"scrollbar":[4],"update":[64],"updateAutoHeight":[64],"slideTo":[64],"slideNext":[64],"slidePrev":[64],"getActiveIndex":[64],"getPreviousIndex":[64],"length":[64],"isEnd":[64],"isBeginning":[64],"startAutoplay":[64],"stopAutoplay":[64],"lockSwipeToNext":[64],"lockSwipeToPrev":[64],"lockSwipes":[64],"getSwiper":[64]}]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[1]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-input",[[34,"ion-input",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"inputmode":[1],"max":[1],"maxlength":[2],"min":[1],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"snaps":[4],"step":[2],"ticks":[4],"disabled":[4],"value":[1026],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-textarea",[[34,"ion-textarea",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[4,"auto-grow"],"value":[1025],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"activated":[32]}]]],["ion-virtual-scroll",[[0,"ion-virtual-scroll",{"approxItemHeight":[2,"approx-item-height"],"approxHeaderHeight":[2,"approx-header-height"],"approxFooterHeight":[2,"approx-footer-height"],"headerFn":[16],"footerFn":[16],"items":[16],"itemHeight":[16],"headerHeight":[16],"footerHeight":[16],"renderItem":[16],"renderHeader":[16],"renderFooter":[16],"nodeRender":[16],"domRender":[16],"totalHeight":[32],"positionForItem":[64],"checkRange":[64],"checkEnd":[64]},[[9,"resize","onResize"]]]]],["ion-datetime_3",[[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[33,"ion-datetime",{"name":[1],"disabled":[4],"readonly":[4],"min":[1025],"max":[1025],"displayFormat":[1,"display-format"],"displayTimezone":[1,"display-timezone"],"pickerFormat":[1,"picker-format"],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"monthNames":[1,"month-names"],"monthShortNames":[1,"month-short-names"],"dayNames":[1,"day-names"],"dayShortNames":[1,"day-short-names"],"pickerOptions":[16],"placeholder":[1],"value":[1025],"isExpanded":[32],"open":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ariaLabel":[1537,"aria-label"],"ariaHidden":[513,"aria-hidden"],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[33,"ion-note",{"color":[513]}],[1,"ion-skeleton-text",{"animated":[4]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"href":[1],"rel":[1],"lines":[1],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"multipleInputs":[32],"focusable":[32]},[[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}]]]]'),N))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:En,jmp:vt=>T.runOutsideAngular(vt),ael(vt,Jt,vn,Cr){vt[pe](Jt,vn,Cr)},rel(vt,Jt,vn,Cr){vt.removeEventListener(Jt,vn,Cr)}}))}};var No;let bo=No=class{static forRoot(N){return{ngModule:No,providers:[{provide:W,useValue:N},{provide:E.ip1,useFactory:Qs,multi:!0,deps:[W,Dt.K0,E.R0b]}]}}};bo.\u0275fac=function(N){return new(N||bo)},bo.\u0275mod=E.oAB({type:bo}),bo.\u0275inj=E.cJS({providers:[Ke,vo,Oo],imports:[[Dt.ez]]})},7235:(en,it,F)=>{"use strict";F.d(it,{c:()=>ht});var y=F(1567);let A;const ke=Ae=>Ae.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oe=Ae=>{if(void 0===A){const Ge=void 0!==Ae.style.webkitAnimationName;A=void 0===Ae.style.animationName&&Ge?"-webkit-":""}return A},Q=(Ae,Ze,Ge)=>{const ft=Ze.startsWith("animation")?oe(Ae):"";Ae.style.setProperty(ft+Ze,Ge)},ye=(Ae,Ze)=>{const Ge=Ze.startsWith("animation")?oe(Ae):"";Ae.style.removeProperty(Ge+Ze)},re=[],we=(Ae=[],Ze)=>{if(void 0!==Ze){const Ge=Array.isArray(Ze)?Ze:[Ze];return[...Ae,...Ge]}return Ae},ht=Ae=>{let Ze,Ge,ft,Se,Ue,gt,Dt,Ie,Ye,Ve,Fe,Mt,Nt,ut=[],$t=[],E=[],pt=!1,Pe={},be=[],Me=[],et={},dt=0,nt=!1,At=!1,tt=!0,St=!1,Bt=!0;const gn=Ae,Nn=[],wn=[],yn=[],Sn=[],mr=[],cr=[],Tt=[],un=[],Un=[],Xt=[],Ln="function"==typeof AnimationEffect||"function"==typeof window.AnimationEffect,kn="function"==typeof Element&&"function"==typeof Element.prototype.animate&&Ln,ei=(H,ue)=>((ue&&ue.oneTimeCallback?wn:Nn).push({c:H,o:ue}),Nt),Ht=()=>{if(kn)Xt.forEach(H=>{H.cancel()}),Xt.length=0;else{const H=yn.slice();(0,y.r)(()=>{H.forEach(ue=>{ye(ue,"animation-name"),ye(ue,"animation-duration"),ye(ue,"animation-timing-function"),ye(ue,"animation-iteration-count"),ye(ue,"animation-delay"),ye(ue,"animation-play-state"),ye(ue,"animation-fill-mode"),ye(ue,"animation-direction")})})}},It=()=>{mr.forEach(H=>{H&&H.parentNode&&H.parentNode.removeChild(H)}),mr.length=0},se=()=>void 0!==Ue?Ue:Dt?Dt.getFill():"both",xe=()=>void 0!==Ye?Ye:void 0!==gt?gt:Dt?Dt.getDirection():"normal",at=()=>nt?"linear":void 0!==ft?ft:Dt?Dt.getEasing():"linear",Ct=()=>At?0:void 0!==Ve?Ve:void 0!==Ge?Ge:Dt?Dt.getDuration():0,Be=()=>void 0!==Se?Se:Dt?Dt.getIterations():1,He=()=>void 0!==Fe?Fe:void 0!==Ze?Ze:Dt?Dt.getDelay():0,Yt=()=>{0!==dt&&(dt--,0===dt&&((()=>{Yr(),un.forEach(rt=>rt()),Un.forEach(rt=>rt());const H=tt?1:0,ue=be,Te=Me,Je=et;yn.forEach(rt=>{const Ot=rt.classList;ue.forEach(Pt=>Ot.add(Pt)),Te.forEach(Pt=>Ot.remove(Pt));for(const Pt in Je)Je.hasOwnProperty(Pt)&&Q(rt,Pt,Je[Pt])}),Nn.forEach(rt=>rt.c(H,Nt)),wn.forEach(rt=>rt.c(H,Nt)),wn.length=0,Bt=!0,tt&&(St=!0),tt=!0})(),Dt&&Dt.animationFinish()))},Mn=(H=!0)=>{(()=>{cr.forEach(Je=>Je()),Tt.forEach(Je=>Je());const H=$t,ue=E,Te=Pe;yn.forEach(Je=>{const rt=Je.classList;H.forEach(Ot=>rt.add(Ot)),ue.forEach(Ot=>rt.remove(Ot));for(const Ot in Te)Te.hasOwnProperty(Ot)&&Q(Je,Ot,Te[Ot])})})(),ut.length>0&&(kn?(yn.forEach(H=>{const ue=H.animate(ut,{id:gn,delay:He(),duration:Ct(),easing:at(),iterations:Be(),fill:se(),direction:xe()});ue.pause(),Xt.push(ue)}),Xt.length>0&&(Xt[0].onfinish=()=>{Yt()})):((H=!0)=>{It();const ue=(Ae=>(Ae.forEach(Ze=>{for(const Ge in Ze)if(Ze.hasOwnProperty(Ge)){const ft=Ze[Ge];if("easing"===Ge)Ze["animation-timing-function"]=ft,delete Ze[Ge];else{const Se=ke(Ge);Se!==Ge&&(Ze[Se]=ft,delete Ze[Ge])}}}),Ae))(ut);yn.forEach(Te=>{if(ue.length>0){const Je=((Ae=[])=>Ae.map(Ze=>{const Ge=Ze.offset,ft=[];for(const Se in Ze)Ze.hasOwnProperty(Se)&&"offset"!==Se&&ft.push(`${Se}: ${Ze[Se]};`);return`${100*Ge}% { ${ft.join(" ")} }`}).join(" "))(ue);Mt=void 0!==Ae?Ae:(Ae=>{let Ze=re.indexOf(Ae);return Ze<0&&(Ze=re.push(Ae)-1),`ion-animation-${Ze}`})(Je);const rt=((Ae,Ze,Ge)=>{const ft=(Ae=>{const Ze=Ae.getRootNode();return Ze.head||Ze})(Ge),Se=oe(Ge),Ue=ft.querySelector("#"+Ae);if(Ue)return Ue;const gt=(Ge.ownerDocument||document).createElement("style");return gt.id=Ae,gt.textContent=`@${Se}keyframes ${Ae} { ${Ze} } @${Se}keyframes ${Ae}-alt { ${Ze} }`,ft.appendChild(gt),gt})(Mt,Je,Te);mr.push(rt),Q(Te,"animation-duration",`${Ct()}ms`),Q(Te,"animation-timing-function",at()),Q(Te,"animation-delay",`${He()}ms`),Q(Te,"animation-fill-mode",se()),Q(Te,"animation-direction",xe());const Ot=Be()===1/0?"infinite":Be().toString();Q(Te,"animation-iteration-count",Ot),Q(Te,"animation-play-state","paused"),H&&Q(Te,"animation-name",`${rt.id}-alt`),(0,y.r)(()=>{Q(Te,"animation-name",rt.id||null)})}})})(H)),pt=!0},dn=H=>{if(H=Math.min(Math.max(H,0),.9999),kn)Xt.forEach(ue=>{ue.currentTime=ue.effect.getComputedTiming().delay+Ct()*H,ue.pause()});else{const ue=`-${Ct()*H}ms`;yn.forEach(Te=>{ut.length>0&&(Q(Te,"animation-delay",ue),Q(Te,"animation-play-state","paused"))})}},Vr=H=>{Xt.forEach(ue=>{ue.effect.updateTiming({delay:He(),duration:Ct(),easing:at(),iterations:Be(),fill:se(),direction:xe()})}),void 0!==H&&dn(H)},Tr=(H=!0,ue)=>{(0,y.r)(()=>{yn.forEach(Te=>{Q(Te,"animation-name",Mt||null),Q(Te,"animation-duration",`${Ct()}ms`),Q(Te,"animation-timing-function",at()),Q(Te,"animation-delay",void 0!==ue?`-${ue*Ct()}ms`:`${He()}ms`),Q(Te,"animation-fill-mode",se()||null),Q(Te,"animation-direction",xe()||null);const Je=Be()===1/0?"infinite":Be().toString();Q(Te,"animation-iteration-count",Je),H&&Q(Te,"animation-name",`${Mt}-alt`),(0,y.r)(()=>{Q(Te,"animation-name",Mt||null)})})})},Fr=(H=!1,ue=!0,Te)=>(H&&Sn.forEach(Je=>{Je.update(H,ue,Te)}),kn?Vr(Te):Tr(ue,Te),Nt),Qn=()=>{pt&&(kn?Xt.forEach(H=>{H.pause()}):yn.forEach(H=>{Q(H,"animation-play-state","paused")}))},di=()=>{Ie=void 0,Yt()},Yr=()=>{Ie&&clearTimeout(Ie)},mi=H=>new Promise(ue=>{H&&H.sync&&(At=!0,ei(()=>At=!1,{oneTimeCallback:!0})),pt||Mn(),St&&(kn?(dn(0),Vr()):Tr(),St=!1),Bt&&(dt=Sn.length+1,Bt=!1),ei(()=>ue(),{oneTimeCallback:!0}),Sn.forEach(Te=>{Te.play()}),kn?(Xt.forEach(H=>{H.play()}),(0===ut.length||0===yn.length)&&Yt()):(()=>{if(Yr(),(0,y.r)(()=>{yn.forEach(H=>{ut.length>0&&Q(H,"animation-play-state","running")})}),0===ut.length||0===yn.length)Yt();else{const H=He()||0,ue=Ct()||0,Te=Be()||1;isFinite(Te)&&(Ie=setTimeout(di,H+ue*Te+100)),((Ae,Ze)=>{let Ge;const ft={passive:!0},Ue=gt=>{Ae===gt.target&&(Ge&&Ge(),Yr(),(0,y.r)(()=>{yn.forEach(H=>{ye(H,"animation-duration"),ye(H,"animation-delay"),ye(H,"animation-play-state")}),(0,y.r)(Yt)}))};Ae&&(Ae.addEventListener("webkitAnimationEnd",Ue,ft),Ae.addEventListener("animationend",Ue,ft),Ge=()=>{Ae.removeEventListener("webkitAnimationEnd",Ue,ft),Ae.removeEventListener("animationend",Ue,ft)})})(yn[0])}})()}),As=(H,ue)=>{const Te=ut[0];return void 0===Te||void 0!==Te.offset&&0!==Te.offset?ut=[{offset:0,[H]:ue},...ut]:Te[H]=ue,Nt};return Nt={parentAnimation:Dt,elements:yn,childAnimations:Sn,id:gn,animationFinish:Yt,from:As,to:(H,ue)=>{const Te=ut[ut.length-1];return void 0===Te||void 0!==Te.offset&&1!==Te.offset?ut=[...ut,{offset:1,[H]:ue}]:Te[H]=ue,Nt},fromTo:(H,ue,Te)=>As(H,ue).to(H,Te),parent:H=>(Dt=H,Nt),play:mi,pause:()=>(Sn.forEach(H=>{H.pause()}),Qn(),Nt),stop:()=>{Sn.forEach(H=>{H.stop()}),pt&&(Ht(),pt=!1),nt=!1,At=!1,Bt=!0,Ye=void 0,Ve=void 0,Fe=void 0,dt=0,St=!1,tt=!0},destroy:H=>(Sn.forEach(ue=>{ue.destroy(H)}),(H=>{Ht(),H&&It()})(H),yn.length=0,Sn.length=0,ut.length=0,Nn.length=0,wn.length=0,pt=!1,Bt=!0,Nt),keyframes:H=>(ut=H,Nt),addAnimation:H=>{if(null!=H)if(Array.isArray(H))for(const ue of H)ue.parent(Nt),Sn.push(ue);else H.parent(Nt),Sn.push(H);return Nt},addElement:H=>{if(null!=H)if(1===H.nodeType)yn.push(H);else if(H.length>=0)for(let ue=0;ue<H.length;ue++)yn.push(H[ue]);else console.error("Invalid addElement value");return Nt},update:Fr,fill:H=>(Ue=H,Fr(!0),Nt),direction:H=>(gt=H,Fr(!0),Nt),iterations:H=>(Se=H,Fr(!0),Nt),duration:H=>(!kn&&0===H&&(H=1),Ge=H,Fr(!0),Nt),easing:H=>(ft=H,Fr(!0),Nt),delay:H=>(Ze=H,Fr(!0),Nt),getWebAnimations:()=>Xt,getKeyframes:()=>ut,getFill:se,getDirection:xe,getDelay:He,getIterations:Be,getEasing:at,getDuration:Ct,afterAddRead:H=>(un.push(H),Nt),afterAddWrite:H=>(Un.push(H),Nt),afterClearStyles:(H=[])=>{for(const ue of H)et[ue]="";return Nt},afterStyles:(H={})=>(et=H,Nt),afterRemoveClass:H=>(Me=we(Me,H),Nt),afterAddClass:H=>(be=we(be,H),Nt),beforeAddRead:H=>(cr.push(H),Nt),beforeAddWrite:H=>(Tt.push(H),Nt),beforeClearStyles:(H=[])=>{for(const ue of H)Pe[ue]="";return Nt},beforeStyles:(H={})=>(Pe=H,Nt),beforeRemoveClass:H=>(E=we(E,H),Nt),beforeAddClass:H=>($t=we($t,H),Nt),onFinish:ei,progressStart:(H=!1,ue)=>(Sn.forEach(Te=>{Te.progressStart(H,ue)}),Qn(),nt=H,pt?Fr(!1,!0,ue):Mn(),Nt),progressStep:H=>(Sn.forEach(ue=>{ue.progressStep(H)}),dn(H),Nt),progressEnd:(H,ue,Te)=>(nt=!1,Sn.forEach(Je=>{Je.progressEnd(H,ue,Te)}),void 0!==Te&&(Ve=Te),St=!1,tt=!0,0===H?(Ye="reverse"===xe()?"normal":"reverse","reverse"===Ye&&(tt=!1),kn?(Fr(),dn(1-ue)):(Fe=(1-ue)*Ct()*-1,Fr(!1,!1))):1===H&&(kn?(Fr(),dn(ue)):(Fe=ue*Ct()*-1,Fr(!1,!1))),void 0!==H&&(ei(()=>{Ve=void 0,Ye=void 0,Fe=void 0},{oneTimeCallback:!0}),Dt||mi()),Nt)}}},7807:(en,it,F)=>{"use strict";F.d(it,{g:()=>y});const y=(Q,ye,L,Ce,re)=>te(Q[1],ye[1],L[1],Ce[1],re).map(he=>A(Q[0],ye[0],L[0],Ce[0],he)),A=(Q,ye,L,Ce,re)=>re*(3*ye*Math.pow(re-1,2)+re*(-3*L*re+3*L+Ce*re))-Q*Math.pow(re-1,3),te=(Q,ye,L,Ce,re)=>oe((Ce-=re)-3*(L-=re)+3*(ye-=re)-(Q-=re),3*L-6*ye+3*Q,3*ye-3*Q,Q).filter(_e=>_e>=0&&_e<=1),oe=(Q,ye,L,Ce)=>{if(0===Q)return((Q,ye,L)=>{const Ce=ye*ye-4*Q*L;return Ce<0?[]:[(-ye+Math.sqrt(Ce))/(2*Q),(-ye-Math.sqrt(Ce))/(2*Q)]})(ye,L,Ce);const re=(3*(L/=Q)-(ye/=Q)*ye)/3,he=(2*ye*ye*ye-9*ye*L+27*(Ce/=Q))/27;if(0===re)return[Math.pow(-he,1/3)];if(0===he)return[Math.sqrt(-re),-Math.sqrt(-re)];const _e=Math.pow(he/2,2)+Math.pow(re/3,3);if(0===_e)return[Math.pow(he/2,.5)-ye/3];if(_e>0)return[Math.pow(-he/2+Math.sqrt(_e),1/3)-Math.pow(he/2+Math.sqrt(_e),1/3)-ye/3];const le=Math.sqrt(Math.pow(-re/3,3)),we=Math.acos(-he/(2*Math.sqrt(Math.pow(-re/3,3)))),ht=2*Math.pow(le,1/3);return[ht*Math.cos(we/3)-ye/3,ht*Math.cos((we+2*Math.PI)/3)-ye/3,ht*Math.cos((we+4*Math.PI)/3)-ye/3]}},960:(en,it,F)=>{"use strict";F.d(it,{G:()=>oe});class A{constructor(ye,L,Ce,re,he){this.id=L,this.name=Ce,this.disableScroll=he,this.priority=1e6*re+L,this.ctrl=ye}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const ye=this.ctrl.capture(this.name,this.id,this.priority);return ye&&this.disableScroll&&this.ctrl.disableScroll(this.id),ye}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class te{constructor(ye,L,Ce,re){this.id=L,this.disable=Ce,this.disableScroll=re,this.ctrl=ye}block(){if(this.ctrl){if(this.disable)for(const ye of this.disable)this.ctrl.disableGesture(ye,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const ye of this.disable)this.ctrl.enableGesture(ye,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const ke="backdrop-no-scroll",oe=new class{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(ye){return new A(this,this.newID(),ye.name,ye.priority||0,!!ye.disableScroll)}createBlocker(ye={}){return new te(this,this.newID(),ye.disable,!!ye.disableScroll)}start(ye,L,Ce){return this.canStart(ye)?(this.requestedStart.set(L,Ce),!0):(this.requestedStart.delete(L),!1)}capture(ye,L,Ce){if(!this.start(ye,L,Ce))return!1;const re=this.requestedStart;let he=-1e4;if(re.forEach(_e=>{he=Math.max(he,_e)}),he===Ce){this.capturedId=L,re.clear();const _e=new CustomEvent("ionGestureCaptured",{detail:{gestureName:ye}});return document.dispatchEvent(_e),!0}return re.delete(L),!1}release(ye){this.requestedStart.delete(ye),this.capturedId===ye&&(this.capturedId=void 0)}disableGesture(ye,L){let Ce=this.disabledGestures.get(ye);void 0===Ce&&(Ce=new Set,this.disabledGestures.set(ye,Ce)),Ce.add(L)}enableGesture(ye,L){const Ce=this.disabledGestures.get(ye);void 0!==Ce&&Ce.delete(L)}disableScroll(ye){this.disabledScroll.add(ye),1===this.disabledScroll.size&&document.body.classList.add(ke)}enableScroll(ye){this.disabledScroll.delete(ye),0===this.disabledScroll.size&&document.body.classList.remove(ke)}canStart(ye){return!(void 0!==this.capturedId||this.isDisabled(ye))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(ye){const L=this.disabledGestures.get(ye);return!!(L&&L.size>0)}newID(){return this.gestureId++,this.gestureId}}},3087:(en,it,F)=>{"use strict";F.r(it),F.d(it,{MENU_BACK_BUTTON_PRIORITY:()=>oe,OVERLAY_BACK_BUTTON_PRIORITY:()=>ke,blockHardwareBackButton:()=>A,startHardwareBackButton:()=>te});var y=F(8239);const A=()=>{document.addEventListener("backbutton",()=>{})},te=()=>{const Q=document;let ye=!1;Q.addEventListener("backbutton",()=>{if(ye)return;let L=0,Ce=[];const re=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(le,we){Ce.push({priority:le,handler:we,id:L++})}}});Q.dispatchEvent(re);const he=function(){var le=(0,y.Z)(function*(we){try{if(we&&we.handler){const ht=we.handler(_e);null!=ht&&(yield ht)}}catch(ht){console.error(ht)}});return function(ht){return le.apply(this,arguments)}}(),_e=()=>{if(Ce.length>0){let le={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};Ce.forEach(we=>{we.priority>=le.priority&&(le=we)}),ye=!0,Ce=Ce.filter(we=>we.id!==le.id),he(le).then(()=>ye=!1)}};_e()})},ke=100,oe=99},1567:(en,it,F)=>{"use strict";F.d(it,{a:()=>oe,b:()=>Q,c:()=>y,d:()=>he,e:()=>_e,f:()=>Ge,g:()=>ye,h:()=>A,i:()=>ke,j:()=>re,k:()=>le,l:()=>Ce,m:()=>we,n:()=>Ze,o:()=>ft,p:()=>Ae,q:()=>ht,r:()=>L});const y=(Se,Ue)=>{Se.componentOnReady?Se.componentOnReady().then(gt=>Ue(gt)):L(()=>Ue(Se))},A=(Se,Ue=[])=>{const gt={};return Ue.forEach(ut=>{Se.hasAttribute(ut)&&(null!==Se.getAttribute(ut)&&(gt[ut]=Se.getAttribute(ut)),Se.removeAttribute(ut))}),gt},te=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],ke=Se=>A(Se,te),oe=(Se,Ue,gt,ut)=>{if("undefined"!=typeof window){const $t=window,E=$t&&$t.Ionic&&$t.Ionic.config;if(E){const pt=E.get("_ael");if(pt)return pt(Se,Ue,gt,ut);if(E._ael)return E._ael(Se,Ue,gt,ut)}}return Se.addEventListener(Ue,gt,ut)},Q=(Se,Ue,gt,ut)=>{if("undefined"!=typeof window){const $t=window,E=$t&&$t.Ionic&&$t.Ionic.config;if(E){const pt=E.get("_rel");if(pt)return pt(Se,Ue,gt,ut);if(E._rel)return E._rel(Se,Ue,gt,ut)}}return Se.removeEventListener(Ue,gt,ut)},ye=(Se,Ue=Se)=>Se.shadowRoot||Ue,L=Se=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Se):"function"==typeof requestAnimationFrame?requestAnimationFrame(Se):setTimeout(Se),Ce=Se=>!!Se.shadowRoot&&!!Se.attachShadow,re=Se=>{const Ue=Se.closest("ion-item");return Ue?Ue.querySelector("ion-label"):null},he=(Se,Ue)=>{let gt;const ut=Se.getAttribute("aria-labelledby"),$t=Se.id;let E=null!==ut&&""!==ut.trim()?ut:Ue+"-lbl",pt=null!==ut&&""!==ut.trim()?document.getElementById(ut):re(Se);return pt?(null===ut&&(pt.id=E),gt=pt.textContent,pt.setAttribute("aria-hidden","true")):""!==$t.trim()&&(pt=document.querySelector(`label[for="${$t}"]`),pt&&(""!==pt.id?E=pt.id:pt.id=E=`${$t}-lbl`,gt=pt.textContent)),{label:pt,labelId:E,labelText:gt}},_e=(Se,Ue,gt,ut,$t)=>{if(Se||Ce(Ue)){let E=Ue.querySelector("input.aux-input");E||(E=Ue.ownerDocument.createElement("input"),E.type="hidden",E.classList.add("aux-input"),Ue.appendChild(E)),E.disabled=$t,E.name=gt,E.value=ut||""}},le=(Se,Ue,gt)=>Math.max(Se,Math.min(Ue,gt)),we=(Se,Ue)=>{if(!Se){const gt="ASSERT: "+Ue;throw console.error(gt),new Error(gt)}},ht=Se=>Se.timeStamp||Date.now(),Ae=Se=>{if(Se){const Ue=Se.changedTouches;if(Ue&&Ue.length>0){const gt=Ue[0];return{x:gt.clientX,y:gt.clientY}}if(void 0!==Se.pageX)return{x:Se.pageX,y:Se.pageY}}return{x:0,y:0}},Ze=Se=>{const Ue="rtl"===document.dir;switch(Se){case"start":return Ue;case"end":return!Ue;default:throw new Error(`"${Se}" is not a valid value for [side]. Use "start" or "end" instead.`)}},Ge=(Se,Ue)=>{const gt=Se._original||Se;return{_original:Se,emit:ft(gt.emit.bind(gt),Ue)}},ft=(Se,Ue=0)=>{let gt;return(...ut)=>{clearTimeout(gt),gt=setTimeout(Se,Ue,...ut)}}},6951:(en,it,F)=>{"use strict";F.d(it,{m:()=>he});var y=F(8239),A=F(3087),te=F(1567),ke=F(7585),oe=F(7235);const Q=_e=>(0,oe.c)().duration(_e?400:300),ye=_e=>{let le,we;const ht=_e.width+8,Ae=(0,oe.c)(),Ze=(0,oe.c)();_e.isEndSide?(le=ht+"px",we="0px"):(le=-ht+"px",we="0px"),Ae.addElement(_e.menuInnerEl).fromTo("transform",`translateX(${le})`,`translateX(${we})`);const ft="ios"===(0,ke.b)(_e),Se=ft?.2:.25;return Ze.addElement(_e.backdropEl).fromTo("opacity",.01,Se),Q(ft).addAnimation([Ae,Ze])},L=_e=>{let le,we;const ht=(0,ke.b)(_e),Ae=_e.width;_e.isEndSide?(le=-Ae+"px",we=Ae+"px"):(le=Ae+"px",we=-Ae+"px");const Ze=(0,oe.c)().addElement(_e.menuInnerEl).fromTo("transform",`translateX(${we})`,"translateX(0px)"),Ge=(0,oe.c)().addElement(_e.contentEl).fromTo("transform","translateX(0px)",`translateX(${le})`),ft=(0,oe.c)().addElement(_e.backdropEl).fromTo("opacity",.01,.32);return Q("ios"===ht).addAnimation([Ze,Ge,ft])},Ce=_e=>{const le=(0,ke.b)(_e),we=_e.width*(_e.isEndSide?-1:1)+"px",ht=(0,oe.c)().addElement(_e.contentEl).fromTo("transform","translateX(0px)",`translateX(${we})`);return Q("ios"===le).addAnimation(ht)},he=(()=>{const _e=new Map,le=[],we=function(){var Ye=(0,y.Z)(function*(Ve){const Fe=yield Ue(Ve);return!!Fe&&Fe.open()});return function(Fe){return Ye.apply(this,arguments)}}(),ht=function(){var Ye=(0,y.Z)(function*(Ve){const Fe=yield void 0!==Ve?Ue(Ve):gt();return void 0!==Fe&&Fe.close()});return function(Fe){return Ye.apply(this,arguments)}}(),Ae=function(){var Ye=(0,y.Z)(function*(Ve){const Fe=yield Ue(Ve);return!!Fe&&Fe.toggle()});return function(Fe){return Ye.apply(this,arguments)}}(),Ze=function(){var Ye=(0,y.Z)(function*(Ve,Fe){const tt=yield Ue(Fe);return tt&&(tt.disabled=!Ve),tt});return function(Fe,tt){return Ye.apply(this,arguments)}}(),Ge=function(){var Ye=(0,y.Z)(function*(Ve,Fe){const tt=yield Ue(Fe);return tt&&(tt.swipeGesture=Ve),tt});return function(Fe,tt){return Ye.apply(this,arguments)}}(),ft=function(){var Ye=(0,y.Z)(function*(Ve){if(null!=Ve){const Fe=yield Ue(Ve);return void 0!==Fe&&Fe.isOpen()}return void 0!==(yield gt())});return function(Fe){return Ye.apply(this,arguments)}}(),Se=function(){var Ye=(0,y.Z)(function*(Ve){const Fe=yield Ue(Ve);return!!Fe&&!Fe.disabled});return function(Fe){return Ye.apply(this,arguments)}}(),Ue=function(){var Ye=(0,y.Z)(function*(Ve){return yield Ie(),"start"===Ve||"end"===Ve?At(St=>St.side===Ve&&!St.disabled)||At(St=>St.side===Ve):null!=Ve?At(tt=>tt.menuId===Ve):At(tt=>!tt.disabled)||(le.length>0?le[0].el:void 0)});return function(Fe){return Ye.apply(this,arguments)}}(),gt=function(){var Ye=(0,y.Z)(function*(){return yield Ie(),et()});return function(){return Ye.apply(this,arguments)}}(),ut=function(){var Ye=(0,y.Z)(function*(){return yield Ie(),dt()});return function(){return Ye.apply(this,arguments)}}(),$t=function(){var Ye=(0,y.Z)(function*(){return yield Ie(),nt()});return function(){return Ye.apply(this,arguments)}}(),E=(Ye,Ve)=>{_e.set(Ye,Ve)},Pe=Ye=>{const Ve=Ye.side;le.filter(Fe=>Fe.side===Ve&&Fe!==Ye).forEach(Fe=>Fe.disabled=!0)},be=function(){var Ye=(0,y.Z)(function*(Ve,Fe,tt){if(nt())return!1;if(Fe){const St=yield gt();St&&Ve.el!==St&&(yield St.setOpen(!1,!1))}return Ve._setOpen(Fe,tt)});return function(Fe,tt,St){return Ye.apply(this,arguments)}}(),et=()=>At(Ye=>Ye._isOpen),dt=()=>le.map(Ye=>Ye.el),nt=()=>le.some(Ye=>Ye.isAnimating),At=Ye=>{const Ve=le.find(Ye);if(void 0!==Ve)return Ve.el},Ie=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(Ye=>new Promise(Ve=>(0,te.c)(Ye,Ve))));return E("reveal",Ce),E("push",L),E("overlay",ye),"undefined"!=typeof document&&document.addEventListener("ionBackButton",Ye=>{const Ve=et();Ve&&Ye.detail.register(A.MENU_BACK_BUTTON_PRIORITY,()=>Ve.close())}),{registerAnimation:E,get:Ue,getMenus:ut,getOpen:gt,isEnabled:Se,swipeGesture:Ge,isAnimating:$t,isOpen:ft,enable:Ze,toggle:Ae,close:ht,open:we,_getOpenSync:et,_createAnimation:(Ye,Ve)=>{const Fe=_e.get(Ye);if(!Fe)throw new Error("animation not registered");return Fe(Ve)},_register:Ye=>{le.indexOf(Ye)<0&&(Ye.disabled||Pe(Ye),le.push(Ye))},_unregister:Ye=>{const Ve=le.indexOf(Ye);Ve>-1&&le.splice(Ve,1)},_setOpen:be,_setActiveMenu:Pe}})()},9461:(en,it,F)=>{"use strict";F.r(it),F.d(it,{GESTURE_CONTROLLER:()=>y.G,createGesture:()=>Ce});var y=F(960);const A=(le,we,ht,Ae)=>{const Ze=te(le)?{capture:!!Ae.capture,passive:!!Ae.passive}:!!Ae.capture;let Ge,ft;return le.__zone_symbol__addEventListener?(Ge="__zone_symbol__addEventListener",ft="__zone_symbol__removeEventListener"):(Ge="addEventListener",ft="removeEventListener"),le[Ge](we,ht,Ze),()=>{le[ft](we,ht,Ze)}},te=le=>{if(void 0===ke)try{const we=Object.defineProperty({},"passive",{get:()=>{ke=!0}});le.addEventListener("optsTest",()=>{},we)}catch(we){ke=!1}return!!ke};let ke;const ye=le=>le instanceof Document?le:le.ownerDocument,Ce=le=>{let we=!1,ht=!1,Ae=!0,Ze=!1;const Ge=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},le),ft=Ge.canStart,Se=Ge.onWillStart,Ue=Ge.onStart,gt=Ge.onEnd,ut=Ge.notCaptured,$t=Ge.onMove,E=Ge.threshold,pt=Ge.passive,Dt=Ge.blurOnStart,Pe={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},be=((le,we,ht)=>{const Ae=ht*(Math.PI/180),Ze="x"===le,Ge=Math.cos(Ae),ft=we*we;let Se=0,Ue=0,gt=!1,ut=0;return{start($t,E){Se=$t,Ue=E,ut=0,gt=!0},detect($t,E){if(!gt)return!1;const pt=$t-Se,Dt=E-Ue,Pe=pt*pt+Dt*Dt;if(Pe<ft)return!1;const be=Math.sqrt(Pe),Me=(Ze?pt:Dt)/be;return ut=Me>Ge?1:Me<-Ge?-1:0,gt=!1,!0},isGesture:()=>0!==ut,getDirection:()=>ut}})(Ge.direction,Ge.threshold,Ge.maxAngle),Me=y.G.createGesture({name:le.gestureName,priority:le.gesturePriority,disableScroll:le.disableScroll}),nt=()=>{!we||(Ze=!1,$t&&$t(Pe))},At=()=>!(Me&&!Me.capture()||(we=!0,Ae=!1,Pe.startX=Pe.currentX,Pe.startY=Pe.currentY,Pe.startTime=Pe.currentTime,Se?Se(Pe).then(Ye):Ye(),0)),Ye=()=>{Dt&&(()=>{if("undefined"!=typeof document){const Bt=document.activeElement;null!==Bt&&Bt.blur&&Bt.blur()}})(),Ue&&Ue(Pe),Ae=!0},Ve=()=>{we=!1,ht=!1,Ze=!1,Ae=!0,Me.release()},Fe=Bt=>{const Mt=we,Nt=Ae;if(Ve(),Nt){if(re(Pe,Bt),Mt)return void(gt&&gt(Pe));ut&&ut(Pe)}},tt=((le,we,ht,Ae,Ze)=>{let Ge,ft,Se,Ue,gt,ut,$t,E=0;const pt=Ie=>{E=Date.now()+2e3,we(Ie)&&(!ft&&ht&&(ft=A(le,"touchmove",ht,Ze)),Se||(Se=A(Ie.target,"touchend",Pe,Ze)),Ue||(Ue=A(Ie.target,"touchcancel",Pe,Ze)))},Dt=Ie=>{E>Date.now()||!we(Ie)||(!ut&&ht&&(ut=A(ye(le),"mousemove",ht,Ze)),$t||($t=A(ye(le),"mouseup",be,Ze)))},Pe=Ie=>{Me(),Ae&&Ae(Ie)},be=Ie=>{et(),Ae&&Ae(Ie)},Me=()=>{ft&&ft(),Se&&Se(),Ue&&Ue(),ft=Se=Ue=void 0},et=()=>{ut&&ut(),$t&&$t(),ut=$t=void 0},dt=()=>{Me(),et()},nt=(Ie=!0)=>{Ie?(Ge||(Ge=A(le,"touchstart",pt,Ze)),gt||(gt=A(le,"mousedown",Dt,Ze))):(Ge&&Ge(),gt&&gt(),Ge=gt=void 0,dt())};return{enable:nt,stop:dt,destroy:()=>{nt(!1),Ae=ht=we=void 0}}})(Ge.el,Bt=>{const Mt=_e(Bt);return!(ht||!Ae||(he(Bt,Pe),Pe.startX=Pe.currentX,Pe.startY=Pe.currentY,Pe.startTime=Pe.currentTime=Mt,Pe.velocityX=Pe.velocityY=Pe.deltaX=Pe.deltaY=0,Pe.event=Bt,ft&&!1===ft(Pe))||(Me.release(),!Me.start()))&&(ht=!0,0===E?At():(be.start(Pe.startX,Pe.startY),!0))},Bt=>{we?!Ze&&Ae&&(Ze=!0,re(Pe,Bt),requestAnimationFrame(nt)):(re(Pe,Bt),be.detect(Pe.currentX,Pe.currentY)&&(!be.isGesture()||!At())&&St())},Fe,{capture:!1,passive:pt}),St=()=>{Ve(),tt.stop(),ut&&ut(Pe)};return{enable(Bt=!0){Bt||(we&&Fe(void 0),Ve()),tt.enable(Bt)},destroy(){Me.destroy(),tt.destroy()}}},re=(le,we)=>{if(!we)return;const ht=le.currentX,Ae=le.currentY,Ze=le.currentTime;he(we,le);const Ge=le.currentX,ft=le.currentY,Ue=(le.currentTime=_e(we))-Ze;if(Ue>0&&Ue<100){const ut=(ft-Ae)/Ue;le.velocityX=(Ge-ht)/Ue*.7+.3*le.velocityX,le.velocityY=.7*ut+.3*le.velocityY}le.deltaX=Ge-le.startX,le.deltaY=ft-le.startY,le.event=we},he=(le,we)=>{let ht=0,Ae=0;if(le){const Ze=le.changedTouches;if(Ze&&Ze.length>0){const Ge=Ze[0];ht=Ge.clientX,Ae=Ge.clientY}else void 0!==le.pageX&&(ht=le.pageX,Ae=le.pageY)}we.currentX=ht,we.currentY=Ae},_e=le=>le.timeStamp||Date.now()},3150:(en,it,F)=>{"use strict";F.d(it,{B:()=>_t,C:()=>_e,H:()=>mr,a:()=>Ae,b:()=>Cn,c:()=>As,e:()=>Zn,f:()=>Ar,g:()=>Bt,h:()=>yn,i:()=>Kn,j:()=>Be,k:()=>Mn,p:()=>we,r:()=>Tr,s:()=>St,w:()=>he});var y=F(8239);let te,ke,oe,Q=!1,ye=!1,L=!1,Ce=!1,re=!1;const he="undefined"!=typeof window?window:{},_e=he.CSS,le=he.document||{head:{}},we={$flags$:0,$resourcesUrl$:"",jmp:Y=>Y(),raf:Y=>requestAnimationFrame(Y),ael:(Y,H,ue,Te)=>Y.addEventListener(H,ue,Te),rel:(Y,H,ue,Te)=>Y.removeEventListener(H,ue,Te),ce:(Y,H)=>new CustomEvent(Y,H)},ht=(()=>(le.head.attachShadow+"").indexOf("[native")>-1)(),Ae=Y=>Promise.resolve(Y),Ze=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replace}catch(Y){}return!1})(),Ge=(Y,H,ue,Te)=>{ue&&ue.map(([Je,rt,Ot])=>{const Pt=Se(Y,Je),xt=ft(H,Ot),on=Ue(Je);we.ael(Pt,rt,xt,on),(H.$rmListeners$=H.$rmListeners$||[]).push(()=>we.rel(Pt,rt,xt,on))})},ft=(Y,H)=>ue=>{try{256&Y.$flags$?Y.$lazyInstance$[H](ue):(Y.$queuedListeners$=Y.$queuedListeners$||[]).push([H,ue])}catch(Te){Xr(Te)}},Se=(Y,H)=>4&H?le:8&H?he:16&H?le.body:Y,Ue=Y=>0!=(2&Y),pt="s-id",Dt="sty-id",Me="http://www.w3.org/1999/xlink",nt=new WeakMap,At=(Y,H,ue)=>{let Te=Wr.get(Y);Ze&&ue?(Te=Te||new CSSStyleSheet,Te.replace(H)):Te=H,Wr.set(Y,Te)},Ie=(Y,H,ue,Te)=>{let Je=Ve(H,ue),rt=Wr.get(Je);if(Y=11===Y.nodeType?Y:le,rt)if("string"==typeof rt){let Pt,Ot=nt.get(Y=Y.head||Y);if(Ot||nt.set(Y,Ot=new Set),!Ot.has(Je)){if(Y.host&&(Pt=Y.querySelector(`[${Dt}="${Je}"]`)))Pt.innerHTML=rt;else{if(we.$cssShim$){Pt=we.$cssShim$.createHostStyle(Te,Je,rt,!!(10&H.$flags$));const xt=Pt["s-sc"];xt&&(Je=xt,Ot=null)}else Pt=le.createElement("style"),Pt.innerHTML=rt;Y.insertBefore(Pt,Y.querySelector("link"))}Ot&&Ot.add(Je)}}else Y.adoptedStyleSheets.includes(rt)||(Y.adoptedStyleSheets=[...Y.adoptedStyleSheets,rt]);return Je},Ve=(Y,H)=>"sc-"+(H&&32&Y.$flags$?Y.$tagName$+"-"+H:Y.$tagName$),Fe=Y=>Y.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),St=Y=>di.push(Y),Bt=Y=>Vr(Y).$modeName$,Mt={},wn=Y=>"object"==(Y=typeof Y)||"function"===Y,yn=(Y,H,...ue)=>{let Te=null,Je=null,rt=null,Ot=!1,Pt=!1,xt=[];const on=$n=>{for(let Gn=0;Gn<$n.length;Gn++)Te=$n[Gn],Array.isArray(Te)?on(Te):null!=Te&&"boolean"!=typeof Te&&((Ot="function"!=typeof Y&&!wn(Te))&&(Te=String(Te)),Ot&&Pt?xt[xt.length-1].$text$+=Te:xt.push(Ot?Sn(null,Te):Te),Pt=Ot)};if(on(ue),H){H.key&&(Je=H.key),H.name&&(rt=H.name);{const $n=H.className||H.class;$n&&(H.class="object"!=typeof $n?$n:Object.keys($n).filter(Gn=>$n[Gn]).join(" "))}}if("function"==typeof Y)return Y(null===H?{}:H,xt,Tt);const Pn=Sn(Y,null);return Pn.$attrs$=H,xt.length>0&&(Pn.$children$=xt),Pn.$key$=Je,Pn.$name$=rt,Pn},Sn=(Y,H)=>({$flags$:0,$tag$:Y,$text$:H,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),mr={},Tt={forEach:(Y,H)=>Y.map(un).forEach(H),map:(Y,H)=>Y.map(un).map(H).map(Un)},un=Y=>({vattrs:Y.$attrs$,vchildren:Y.$children$,vkey:Y.$key$,vname:Y.$name$,vtag:Y.$tag$,vtext:Y.$text$}),Un=Y=>{if("function"==typeof Y.vtag){const ue=Object.assign({},Y.vattrs);return Y.vkey&&(ue.key=Y.vkey),Y.vname&&(ue.name=Y.vname),yn(Y.vtag,ue,...Y.vchildren||[])}const H=Sn(Y.vtag,Y.vtext);return H.$attrs$=Y.vattrs,H.$children$=Y.vchildren,H.$key$=Y.vkey,H.$name$=Y.vname,H},Xt=(Y,H,ue,Te,Je,rt)=>{if(ue!==Te){let Ot=wr(Y,H),Pt=H.toLowerCase();if("class"===H){const xt=Y.classList,on=kn(ue),Pn=kn(Te);xt.remove(...on.filter($n=>$n&&!Pn.includes($n))),xt.add(...Pn.filter($n=>$n&&!on.includes($n)))}else if("style"===H){for(const xt in ue)(!Te||null==Te[xt])&&(xt.includes("-")?Y.style.removeProperty(xt):Y.style[xt]="");for(const xt in Te)(!ue||Te[xt]!==ue[xt])&&(xt.includes("-")?Y.style.setProperty(xt,Te[xt]):Y.style[xt]=Te[xt])}else if("key"!==H)if("ref"===H)Te&&Te(Y);else if(Ot||"o"!==H[0]||"n"!==H[1]){const xt=wn(Te);if((Ot||xt&&null!==Te)&&!Je)try{if(Y.tagName.includes("-"))Y[H]=Te;else{let Pn=null==Te?"":Te;"list"===H?Ot=!1:(null==ue||Y[H]!=Pn)&&(Y[H]=Pn)}}catch(Pn){}let on=!1;Pt!==(Pt=Pt.replace(/^xlink\:?/,""))&&(H=Pt,on=!0),null==Te||!1===Te?(!1!==Te||""===Y.getAttribute(H))&&(on?Y.removeAttributeNS(Me,H):Y.removeAttribute(H)):(!Ot||4&rt||Je)&&!xt&&(Te=!0===Te?"":Te,on?Y.setAttributeNS(Me,H,Te):Y.setAttribute(H,Te))}else H="-"===H[2]?H.slice(3):wr(he,Pt)?Pt.slice(2):Pt[2]+H.slice(3),ue&&we.rel(Y,H,ue,!1),Te&&we.ael(Y,H,Te,!1)}},Ln=/\s/,kn=Y=>Y?Y.split(Ln):[],Xn=(Y,H,ue,Te)=>{const Je=11===H.$elm$.nodeType&&H.$elm$.host?H.$elm$.host:H.$elm$,rt=Y&&Y.$attrs$||Mt,Ot=H.$attrs$||Mt;for(Te in rt)Te in Ot||Xt(Je,Te,rt[Te],void 0,ue,H.$flags$);for(Te in Ot)Xt(Je,Te,rt[Te],Ot[Te],ue,H.$flags$)},or=(Y,H,ue,Te)=>{let Ot,Pt,xt,Je=H.$children$[ue],rt=0;if(Q||(L=!0,"slot"===Je.$tag$&&(te&&Te.classList.add(te+"-s"),Je.$flags$|=Je.$children$?2:1)),null!==Je.$text$)Ot=Je.$elm$=le.createTextNode(Je.$text$);else if(1&Je.$flags$)Ot=Je.$elm$=le.createTextNode("");else{if(Ce||(Ce="svg"===Je.$tag$),Ot=Je.$elm$=le.createElementNS(Ce?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&Je.$flags$?"slot-fb":Je.$tag$),Ce&&"foreignObject"===Je.$tag$&&(Ce=!1),Xn(null,Je,Ce),(Y=>null!=Y)(te)&&Ot["s-si"]!==te&&Ot.classList.add(Ot["s-si"]=te),Je.$children$)for(rt=0;rt<Je.$children$.length;++rt)Pt=or(Y,Je,rt,Ot),Pt&&Ot.appendChild(Pt);"svg"===Je.$tag$?Ce=!1:"foreignObject"===Ot.tagName&&(Ce=!0)}return Ot["s-hn"]=oe,3&Je.$flags$&&(Ot["s-sr"]=!0,Ot["s-cr"]=ke,Ot["s-sn"]=Je.$name$||"",xt=Y&&Y.$children$&&Y.$children$[ue],xt&&xt.$tag$===Je.$tag$&&Y.$elm$&&vr(Y.$elm$,!1)),Ot},vr=(Y,H)=>{we.$flags$|=1;const ue=Y.childNodes;for(let Te=ue.length-1;Te>=0;Te--){const Je=ue[Te];Je["s-hn"]!==oe&&Je["s-ol"]&&(It(Je).insertBefore(Je,Ht(Je)),Je["s-ol"].remove(),Je["s-ol"]=void 0,L=!0),H&&vr(Je,H)}we.$flags$&=-2},Er=(Y,H,ue,Te,Je,rt)=>{let Pt,Ot=Y["s-cr"]&&Y["s-cr"].parentNode||Y;for(Ot.shadowRoot&&Ot.tagName===oe&&(Ot=Ot.shadowRoot);Je<=rt;++Je)Te[Je]&&(Pt=or(null,ue,Je,Y),Pt&&(Te[Je].$elm$=Pt,Ot.insertBefore(Pt,Ht(H))))},hr=(Y,H,ue,Te,Je)=>{for(;H<=ue;++H)(Te=Y[H])&&(Je=Te.$elm$,rr(Te),ye=!0,Je["s-ol"]?Je["s-ol"].remove():vr(Je,!0),Je.remove())},nr=(Y,H)=>Y.$tag$===H.$tag$&&("slot"===Y.$tag$?Y.$name$===H.$name$:Y.$key$===H.$key$),Ht=Y=>Y&&Y["s-ol"]||Y,It=Y=>(Y["s-ol"]?Y["s-ol"]:Y).parentNode,ur=(Y,H)=>{const ue=H.$elm$=Y.$elm$,Te=Y.$children$,Je=H.$children$,rt=H.$tag$,Ot=H.$text$;let Pt;null===Ot?(Ce="svg"===rt||"foreignObject"!==rt&&Ce,"slot"===rt||Xn(Y,H,Ce),null!==Te&&null!==Je?((Y,H,ue,Te)=>{let ss,hi,Je=0,rt=0,Ot=0,Pt=0,xt=H.length-1,on=H[0],Pn=H[xt],$n=Te.length-1,Gn=Te[0],xr=Te[$n];for(;Je<=xt&&rt<=$n;)if(null==on)on=H[++Je];else if(null==Pn)Pn=H[--xt];else if(null==Gn)Gn=Te[++rt];else if(null==xr)xr=Te[--$n];else if(nr(on,Gn))ur(on,Gn),on=H[++Je],Gn=Te[++rt];else if(nr(Pn,xr))ur(Pn,xr),Pn=H[--xt],xr=Te[--$n];else if(nr(on,xr))("slot"===on.$tag$||"slot"===xr.$tag$)&&vr(on.$elm$.parentNode,!1),ur(on,xr),Y.insertBefore(on.$elm$,Pn.$elm$.nextSibling),on=H[++Je],xr=Te[--$n];else if(nr(Pn,Gn))("slot"===on.$tag$||"slot"===xr.$tag$)&&vr(Pn.$elm$.parentNode,!1),ur(Pn,Gn),Y.insertBefore(Pn.$elm$,on.$elm$),Pn=H[--xt],Gn=Te[++rt];else{for(Ot=-1,Pt=Je;Pt<=xt;++Pt)if(H[Pt]&&null!==H[Pt].$key$&&H[Pt].$key$===Gn.$key$){Ot=Pt;break}Ot>=0?(hi=H[Ot],hi.$tag$!==Gn.$tag$?ss=or(H&&H[rt],ue,Ot,Y):(ur(hi,Gn),H[Ot]=void 0,ss=hi.$elm$),Gn=Te[++rt]):(ss=or(H&&H[rt],ue,rt,Y),Gn=Te[++rt]),ss&&It(on.$elm$).insertBefore(ss,Ht(on.$elm$))}Je>xt?Er(Y,null==Te[$n+1]?null:Te[$n+1].$elm$,ue,Te,rt,$n):rt>$n&&hr(H,Je,xt)})(ue,Te,H,Je):null!==Je?(null!==Y.$text$&&(ue.textContent=""),Er(ue,null,H,Je,0,Je.length-1)):null!==Te&&hr(Te,0,Te.length-1),Ce&&"svg"===rt&&(Ce=!1)):(Pt=ue["s-cr"])?Pt.parentNode.textContent=Ot:Y.$text$!==Ot&&(ue.data=Ot)},pr=Y=>{let ue,Te,Je,rt,Ot,Pt,H=Y.childNodes;for(Te=0,Je=H.length;Te<Je;Te++)if(ue=H[Te],1===ue.nodeType){if(ue["s-sr"])for(Ot=ue["s-sn"],ue.hidden=!1,rt=0;rt<Je;rt++)if(Pt=H[rt].nodeType,H[rt]["s-hn"]!==ue["s-hn"]||""!==Ot){if(1===Pt&&Ot===H[rt].getAttribute("slot")){ue.hidden=!0;break}}else if(1===Pt||3===Pt&&""!==H[rt].textContent.trim()){ue.hidden=!0;break}pr(ue)}},rn=[],En=Y=>{let H,ue,Te,Je,rt,Ot,Pt=0,xt=Y.childNodes,on=xt.length;for(;Pt<on;Pt++){if(H=xt[Pt],H["s-sr"]&&(ue=H["s-cr"])&&ue.parentNode)for(Te=ue.parentNode.childNodes,Je=H["s-sn"],Ot=Te.length-1;Ot>=0;Ot--)ue=Te[Ot],!ue["s-cn"]&&!ue["s-nr"]&&ue["s-hn"]!==H["s-hn"]&&(Jn(ue,Je)?(rt=rn.find(Pn=>Pn.$nodeToRelocate$===ue),ye=!0,ue["s-sn"]=ue["s-sn"]||Je,rt?rt.$slotRefNode$=H:rn.push({$slotRefNode$:H,$nodeToRelocate$:ue}),ue["s-sr"]&&rn.map(Pn=>{Jn(Pn.$nodeToRelocate$,ue["s-sn"])&&(rt=rn.find($n=>$n.$nodeToRelocate$===ue),rt&&!Pn.$slotRefNode$&&(Pn.$slotRefNode$=rt.$slotRefNode$))})):rn.some(Pn=>Pn.$nodeToRelocate$===ue)||rn.push({$nodeToRelocate$:ue}));1===H.nodeType&&En(H)}},Jn=(Y,H)=>1===Y.nodeType?null===Y.getAttribute("slot")&&""===H||Y.getAttribute("slot")===H:Y["s-sn"]===H||""===H,rr=Y=>{Y.$attrs$&&Y.$attrs$.ref&&Y.$attrs$.ref(null),Y.$children$&&Y.$children$.map(rr)},Kn=Y=>Vr(Y).$hostElement$,Zn=(Y,H,ue)=>{const Te=Kn(Y);return{emit:Je=>ti(Te,H,{bubbles:!!(4&ue),composed:!!(2&ue),cancelable:!!(1&ue),detail:Je})}},ti=(Y,H,ue)=>{const Te=we.ce(H,ue);return Y.dispatchEvent(Te),Te},fn=(Y,H)=>{H&&!Y.$onRenderResolve$&&H["s-p"]&&H["s-p"].push(new Promise(ue=>Y.$onRenderResolve$=ue))},Xe=(Y,H)=>{if(Y.$flags$|=16,!(4&Y.$flags$))return fn(Y,Y.$ancestorComponent$),As(()=>se(Y,H));Y.$flags$|=512},se=(Y,H)=>{const Te=Y.$lazyInstance$;let Je;return H&&(Y.$flags$|=256,Y.$queuedListeners$&&(Y.$queuedListeners$.map(([rt,Ot])=>ct(Te,rt,Ot)),Y.$queuedListeners$=null),Je=ct(Te,"componentWillLoad")),Je=We(Je,()=>ct(Te,"componentWillRender")),We(Je,()=>xe(Y,Te,H))},xe=function(){var Y=(0,y.Z)(function*(H,ue,Te){const Je=H.$hostElement$,Ot=Je["s-rc"];Te&&(Y=>{const H=Y.$cmpMeta$,ue=Y.$hostElement$,Te=H.$flags$,rt=Ie(ht&&ue.shadowRoot?ue.shadowRoot:ue.getRootNode(),H,Y.$modeName$,ue);10&Te&&(ue["s-sc"]=rt,ue.classList.add(rt+"-h"),2&Te&&ue.classList.add(rt+"-s"))})(H);at(H,ue),we.$cssShim$&&we.$cssShim$.updateHost(Je),Ot&&(Ot.map(xt=>xt()),Je["s-rc"]=void 0);{const xt=Je["s-p"],on=()=>Ct(H);0===xt.length?on():(Promise.all(xt).then(on),H.$flags$|=4,xt.length=0)}});return function(ue,Te,Je){return Y.apply(this,arguments)}}(),at=(Y,H,ue)=>{try{H=H.render&&H.render(),Y.$flags$&=-17,Y.$flags$|=2,((Y,H)=>{const ue=Y.$hostElement$,Te=Y.$cmpMeta$,Je=Y.$vnode$||Sn(null,null),rt=(Y=>Y&&Y.$tag$===mr)(H)?H:yn(null,null,H);if(oe=ue.tagName,Te.$attrsToReflect$&&(rt.$attrs$=rt.$attrs$||{},Te.$attrsToReflect$.map(([Ot,Pt])=>rt.$attrs$[Pt]=ue[Ot])),rt.$tag$=null,rt.$flags$|=4,Y.$vnode$=rt,rt.$elm$=Je.$elm$=ue.shadowRoot||ue,te=ue["s-sc"],ke=ue["s-cr"],Q=ht&&0!=(1&Te.$flags$),ye=!1,ur(Je,rt),we.$flags$|=1,L){En(rt.$elm$);let Ot,Pt,xt,on,Pn,$n,Gn=0;for(;Gn<rn.length;Gn++)Ot=rn[Gn],Pt=Ot.$nodeToRelocate$,Pt["s-ol"]||(xt=le.createTextNode(""),xt["s-nr"]=Pt,Pt.parentNode.insertBefore(Pt["s-ol"]=xt,Pt));for(Gn=0;Gn<rn.length;Gn++)if(Ot=rn[Gn],Pt=Ot.$nodeToRelocate$,Ot.$slotRefNode$){for(on=Ot.$slotRefNode$.parentNode,Pn=Ot.$slotRefNode$.nextSibling,xt=Pt["s-ol"];xt=xt.previousSibling;)if($n=xt["s-nr"],$n&&$n["s-sn"]===Pt["s-sn"]&&on===$n.parentNode&&($n=$n.nextSibling,!$n||!$n["s-nr"])){Pn=$n;break}(!Pn&&on!==Pt.parentNode||Pt.nextSibling!==Pn)&&Pt!==Pn&&(!Pt["s-hn"]&&Pt["s-ol"]&&(Pt["s-hn"]=Pt["s-ol"].parentNode.nodeName),on.insertBefore(Pt,Pn))}else 1===Pt.nodeType&&(Pt.hidden=!0)}ye&&pr(rt.$elm$),we.$flags$&=-2,rn.length=0})(Y,H)}catch(Te){Xr(Te,Y.$hostElement$)}return null},Ct=Y=>{const ue=Y.$hostElement$,Je=Y.$lazyInstance$,rt=Y.$ancestorComponent$;64&Y.$flags$?ct(Je,"componentDidUpdate"):(Y.$flags$|=64,Ee(ue),ct(Je,"componentDidLoad"),Y.$onReadyResolve$(ue),rt||He()),Y.$onInstanceResolve$(ue),Y.$onRenderResolve$&&(Y.$onRenderResolve$(),Y.$onRenderResolve$=void 0),512&Y.$flags$&&mi(()=>Xe(Y,!1)),Y.$flags$&=-517},Be=Y=>{{const H=Vr(Y),ue=H.$hostElement$.isConnected;return ue&&2==(18&H.$flags$)&&Xe(H,!1),ue}},He=Y=>{Ee(le.documentElement),mi(()=>ti(he,"appload",{detail:{namespace:"ionic"}}))},ct=(Y,H,ue)=>{if(Y&&Y[H])try{return Y[H](ue)}catch(Te){Xr(Te)}},We=(Y,H)=>Y&&Y.then?Y.then(H):H(),Ee=Y=>Y.classList.add("hydrated"),wt=(Y,H,ue,Te,Je,rt,Ot)=>{let Pt,xt,on,Pn;if(1===rt.nodeType){for(Pt=rt.getAttribute("c-id"),Pt&&(xt=Pt.split("."),(xt[0]===Ot||"0"===xt[0])&&(on={$flags$:0,$hostId$:xt[0],$nodeId$:xt[1],$depth$:xt[2],$index$:xt[3],$tag$:rt.tagName.toLowerCase(),$elm$:rt,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},H.push(on),rt.removeAttribute("c-id"),Y.$children$||(Y.$children$=[]),Y.$children$[on.$index$]=on,Y=on,Te&&"0"===on.$depth$&&(Te[on.$index$]=on.$elm$))),Pn=rt.childNodes.length-1;Pn>=0;Pn--)wt(Y,H,ue,Te,Je,rt.childNodes[Pn],Ot);if(rt.shadowRoot)for(Pn=rt.shadowRoot.childNodes.length-1;Pn>=0;Pn--)wt(Y,H,ue,Te,Je,rt.shadowRoot.childNodes[Pn],Ot)}else if(8===rt.nodeType)xt=rt.nodeValue.split("."),(xt[1]===Ot||"0"===xt[1])&&(Pt=xt[0],on={$flags$:0,$hostId$:xt[1],$nodeId$:xt[2],$depth$:xt[3],$index$:xt[4],$elm$:rt,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===Pt?(on.$elm$=rt.nextSibling,on.$elm$&&3===on.$elm$.nodeType&&(on.$text$=on.$elm$.textContent,H.push(on),rt.remove(),Y.$children$||(Y.$children$=[]),Y.$children$[on.$index$]=on,Te&&"0"===on.$depth$&&(Te[on.$index$]=on.$elm$))):on.$hostId$===Ot&&("s"===Pt?(on.$tag$="slot",rt["s-sn"]=xt[5]?on.$name$=xt[5]:"",rt["s-sr"]=!0,Te&&(on.$elm$=le.createElement(on.$tag$),on.$name$&&on.$elm$.setAttribute("name",on.$name$),rt.parentNode.insertBefore(on.$elm$,rt),rt.remove(),"0"===on.$depth$&&(Te[on.$index$]=on.$elm$)),ue.push(on),Y.$children$||(Y.$children$=[]),Y.$children$[on.$index$]=on):"r"===Pt&&(Te?rt.remove():(Je["s-cr"]=rt,rt["s-cn"]=!0))));else if(Y&&"style"===Y.$tag$){const $n=Sn(null,rt.textContent);$n.$elm$=rt,$n.$index$="0",Y.$children$=[$n]}},Qt=(Y,H)=>{if(1===Y.nodeType){let ue=0;for(;ue<Y.childNodes.length;ue++)Qt(Y.childNodes[ue],H);if(Y.shadowRoot)for(ue=0;ue<Y.shadowRoot.childNodes.length;ue++)Qt(Y.shadowRoot.childNodes[ue],H)}else if(8===Y.nodeType){const ue=Y.nodeValue.split(".");"o"===ue[0]&&(H.set(ue[1]+"."+ue[2],Y),Y.nodeValue="",Y["s-en"]=ue[3])}},mn=(Y,H,ue)=>{if(H.$members$){Y.watchers&&(H.$watchers$=Y.watchers);const Te=Object.entries(H.$members$),Je=Y.prototype;if(Te.map(([rt,[Ot]])=>{31&Ot||2&ue&&32&Ot?Object.defineProperty(Je,rt,{get(){return((Y,H)=>Vr(this).$instanceValues$.get(H))(0,rt)},set(Pt){((Y,H,ue,Te)=>{const Je=Vr(Y),rt=Je.$hostElement$,Ot=Je.$instanceValues$.get(H),Pt=Je.$flags$,xt=Je.$lazyInstance$;if(ue=((Y,H)=>null==Y||wn(Y)?Y:4&H?"false"!==Y&&(""===Y||!!Y):2&H?parseFloat(Y):1&H?String(Y):Y)(ue,Te.$members$[H][0]),(!(8&Pt)||void 0===Ot)&&ue!==Ot&&(Je.$instanceValues$.set(H,ue),xt)){if(Te.$watchers$&&128&Pt){const on=Te.$watchers$[H];on&&on.map(Pn=>{try{xt[Pn](ue,Ot,H)}catch($n){Xr($n,rt)}})}2==(18&Pt)&&Xe(Je,!1)}})(this,rt,Pt,H)},configurable:!0,enumerable:!0}):1&ue&&64&Ot&&Object.defineProperty(Je,rt,{value(...Pt){const xt=Vr(this);return xt.$onInstancePromise$.then(()=>xt.$lazyInstance$[rt](...Pt))}})}),1&ue){const rt=new Map;Je.attributeChangedCallback=function(Ot,Pt,xt){we.jmp(()=>{const on=rt.get(Ot);this[on]=(null!==xt||"boolean"!=typeof this[on])&&xt})},Y.observedAttributes=Te.filter(([Ot,Pt])=>15&Pt[0]).map(([Ot,Pt])=>{const xt=Pt[1]||Ot;return rt.set(xt,Ot),512&Pt[0]&&H.$attrsToReflect$.push([Ot,xt]),xt})}}return Y},In=function(){var Y=(0,y.Z)(function*(H,ue,Te,Je,rt){if(0==(32&ue.$flags$)){{if(ue.$flags$|=32,(rt=Qn(Te)).then){const on=()=>{};rt=yield rt,on()}rt.isProxied||(Te.$watchers$=rt.watchers,mn(rt,Te,2),rt.isProxied=!0);const xt=()=>{};ue.$flags$|=8;try{new rt(ue)}catch(on){Xr(on)}ue.$flags$&=-9,ue.$flags$|=128,xt(),br(ue.$lazyInstance$)}if(rt.style){let xt=rt.style;"string"!=typeof xt&&(xt=xt[ue.$modeName$=(Y=>di.map(H=>H(Y)).find(H=>!!H))(H)]);const on=Ve(Te,ue.$modeName$);if(!Wr.has(on)){const Pn=()=>{};8&Te.$flags$&&(xt=yield F.e(8810).then(F.bind(F,8810)).then($n=>$n.scopeCss(xt,on,!1))),At(on,xt,!!(1&Te.$flags$)),Pn()}}}const Ot=ue.$ancestorComponent$,Pt=()=>Xe(ue,!0);Ot&&Ot["s-rc"]?Ot["s-rc"].push(Pt):Pt()});return function(ue,Te,Je,rt,Ot){return Y.apply(this,arguments)}}(),br=Y=>{ct(Y,"connectedCallback")},Yt=Y=>{const H=Y["s-cr"]=le.createComment("");H["s-cn"]=!0,Y.insertBefore(H,Y.firstChild)},Cn=(Y,H={})=>{const Te=[],Je=H.exclude||[],rt=he.customElements,Ot=le.head,Pt=Ot.querySelector("meta[charset]"),xt=le.createElement("style"),on=[],Pn=le.querySelectorAll(`[${Dt}]`);let $n,Gn=!0,xr=0;for(Object.assign(we,H),we.$resourcesUrl$=new URL(H.resourcesUrl||"./",le.baseURI).href,we.$flags$|=2;xr<Pn.length;xr++)At(Pn[xr].getAttribute(Dt),Fe(Pn[xr].innerHTML),!0);Y.map(ss=>ss[1].map(hi=>{const bi={$flags$:hi[0],$tagName$:hi[1],$members$:hi[2],$listeners$:hi[3]};bi.$members$=hi[2],bi.$listeners$=hi[3],bi.$attrsToReflect$=[],bi.$watchers$={},!ht&&1&bi.$flags$&&(bi.$flags$|=8);const xs=bi.$tagName$,vs=class extends HTMLElement{constructor(li){super(li),Fr(li=this,bi),1&bi.$flags$&&(ht?li.attachShadow({mode:"open",delegatesFocus:!!(16&bi.$flags$)}):"shadowRoot"in li||(li.shadowRoot=li))}connectedCallback(){$n&&(clearTimeout($n),$n=null),Gn?on.push(this):we.jmp(()=>(Y=>{if(0==(1&we.$flags$)){const H=Vr(Y),ue=H.$cmpMeta$,Te=()=>{};if(1&H.$flags$)Ge(Y,H,ue.$listeners$),br(H.$lazyInstance$);else{let Je;if(H.$flags$|=1,Je=Y.getAttribute(pt),Je){if(ht&&1&ue.$flags$){const rt=Ie(Y.shadowRoot,ue,Y.getAttribute("s-mode"));Y.classList.remove(rt+"-h",rt+"-s")}((Y,H,ue,Te)=>{const rt=Y.shadowRoot,Ot=[],xt=rt?[]:null,on=Te.$vnode$=Sn(H,null);we.$orgLocNodes$||Qt(le.body,we.$orgLocNodes$=new Map),Y[pt]=ue,Y.removeAttribute(pt),wt(on,Ot,[],xt,Y,Y,ue),Ot.map(Pn=>{const $n=Pn.$hostId$+"."+Pn.$nodeId$,Gn=we.$orgLocNodes$.get($n),xr=Pn.$elm$;Gn&&ht&&""===Gn["s-en"]&&Gn.parentNode.insertBefore(xr,Gn.nextSibling),rt||(xr["s-hn"]=H,Gn&&(xr["s-ol"]=Gn,xr["s-ol"]["s-nr"]=xr)),we.$orgLocNodes$.delete($n)}),rt&&xt.map(Pn=>{Pn&&rt.appendChild(Pn)})})(Y,ue.$tagName$,Je,H)}Je||12&ue.$flags$&&Yt(Y);{let rt=Y;for(;rt=rt.parentNode||rt.host;)if(1===rt.nodeType&&rt.hasAttribute("s-id")&&rt["s-p"]||rt["s-p"]){fn(H,H.$ancestorComponent$=rt);break}}ue.$members$&&Object.entries(ue.$members$).map(([rt,[Ot]])=>{if(31&Ot&&Y.hasOwnProperty(rt)){const Pt=Y[rt];delete Y[rt],Y[rt]=Pt}}),mi(()=>In(Y,H,ue))}Te()}})(this))}disconnectedCallback(){we.jmp(()=>(Y=>{if(0==(1&we.$flags$)){const H=Vr(Y),ue=H.$lazyInstance$;H.$rmListeners$&&(H.$rmListeners$.map(Te=>Te()),H.$rmListeners$=void 0),we.$cssShim$&&we.$cssShim$.removeHost(Y),ct(ue,"disconnectedCallback")}})(this))}componentOnReady(){return Vr(this).$onReadyPromise$}};bi.$lazyBundleId$=ss[0],!Je.includes(xs)&&!rt.get(xs)&&(Te.push(xs),rt.define(xs,mn(vs,bi,1)))})),xt.innerHTML=Te+"{visibility:hidden}.hydrated{visibility:inherit}",xt.setAttribute("data-styles",""),Ot.insertBefore(xt,Pt?Pt.nextSibling:Ot.firstChild),Gn=!1,on.length?on.map(ss=>ss.connectedCallback()):we.jmp(()=>$n=setTimeout(He,30))},Mn=Y=>{const H=new URL(Y,we.$resourcesUrl$);return H.origin!==he.location.origin?H.href:H.pathname},dn=new WeakMap,Vr=Y=>dn.get(Y),Tr=(Y,H)=>dn.set(H.$lazyInstance$=Y,H),Fr=(Y,H)=>{const ue={$flags$:0,$hostElement$:Y,$cmpMeta$:H,$instanceValues$:new Map};return ue.$onInstancePromise$=new Promise(Te=>ue.$onInstanceResolve$=Te),ue.$onReadyPromise$=new Promise(Te=>ue.$onReadyResolve$=Te),Y["s-p"]=[],Y["s-rc"]=[],Ge(Y,ue,H.$listeners$),dn.set(Y,ue)},wr=(Y,H)=>H in Y,Xr=(Y,H)=>(0,console.error)(Y,H),Xi=new Map,Qn=(Y,H,ue)=>{const Te=Y.$tagName$.replace(/-/g,"_"),Je=Y.$lazyBundleId$,rt=Xi.get(Je);return rt?rt[Te]:F(863)(`./${Je}.entry.js`).then(Ot=>(Xi.set(Je,Ot),Ot[Te]),Xr)},Wr=new Map,di=[],Yr=[],fs=[],$r=(Y,H)=>ue=>{Y.push(ue),re||(re=!0,H&&4&we.$flags$?mi(qr):we.raf(qr))},zi=Y=>{for(let H=0;H<Y.length;H++)try{Y[H](performance.now())}catch(ue){Xr(ue)}Y.length=0},qr=()=>{zi(Yr),zi(fs),(re=Yr.length>0)&&we.raf(qr)},mi=Y=>Ae().then(Y),Ar=$r(Yr,!1),As=$r(fs,!0),_t={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},4425:(en,it,F)=>{"use strict";F.d(it,{L:()=>ke,a:()=>oe,b:()=>Q,c:()=>ye,d:()=>L,e:()=>E,g:()=>Pe,l:()=>ut,s:()=>pt,t:()=>he});var y=F(8239),A=F(3150),te=F(1567);const ke="ionViewWillEnter",oe="ionViewDidEnter",Q="ionViewWillLeave",ye="ionViewDidLeave",L="ionViewWillUnload",he=be=>new Promise((Me,et)=>{(0,A.c)(()=>{_e(be),le(be).then(dt=>{dt.animation&&dt.animation.destroy(),we(be),Me(dt)},dt=>{we(be),et(dt)})})}),_e=be=>{const Me=be.enteringEl,et=be.leavingEl;Dt(Me,et,be.direction),be.showGoBack?Me.classList.add("can-go-back"):Me.classList.remove("can-go-back"),pt(Me,!1),Me.style.setProperty("pointer-events","none"),et&&(pt(et,!1),et.style.setProperty("pointer-events","none"))},le=function(){var be=(0,y.Z)(function*(Me){const et=yield ht(Me);return et&&A.B.isBrowser?Ae(et,Me):Ze(Me)});return function(et){return be.apply(this,arguments)}}(),we=be=>{const Me=be.enteringEl,et=be.leavingEl;Me.classList.remove("ion-page-invisible"),Me.style.removeProperty("pointer-events"),void 0!==et&&(et.classList.remove("ion-page-invisible"),et.style.removeProperty("pointer-events"))},ht=function(){var be=(0,y.Z)(function*(Me){return Me.leavingEl&&Me.animated&&0!==Me.duration?Me.animationBuilder?Me.animationBuilder:"ios"===Me.mode?(yield Promise.resolve().then(F.bind(F,7689))).iosTransitionAnimation:(yield Promise.resolve().then(F.bind(F,5392))).mdTransitionAnimation:void 0});return function(et){return be.apply(this,arguments)}}(),Ae=function(){var be=(0,y.Z)(function*(Me,et){yield Ge(et,!0);const dt=Me(et.baseEl,et);Ue(et.enteringEl,et.leavingEl);const nt=yield Se(dt,et);return et.progressCallback&&et.progressCallback(void 0),nt&&gt(et.enteringEl,et.leavingEl),{hasCompleted:nt,animation:dt}});return function(et,dt){return be.apply(this,arguments)}}(),Ze=function(){var be=(0,y.Z)(function*(Me){const et=Me.enteringEl,dt=Me.leavingEl;return yield Ge(Me,!1),Ue(et,dt),gt(et,dt),{hasCompleted:!0}});return function(et){return be.apply(this,arguments)}}(),Ge=function(){var be=(0,y.Z)(function*(Me,et){const nt=(void 0!==Me.deepWait?Me.deepWait:et)?[E(Me.enteringEl),E(Me.leavingEl)]:[$t(Me.enteringEl),$t(Me.leavingEl)];yield Promise.all(nt),yield ft(Me.viewIsReady,Me.enteringEl)});return function(et,dt){return be.apply(this,arguments)}}(),ft=function(){var be=(0,y.Z)(function*(Me,et){Me&&(yield Me(et))});return function(et,dt){return be.apply(this,arguments)}}(),Se=(be,Me)=>{const et=Me.progressCallback,dt=new Promise(nt=>{be.onFinish(At=>nt(1===At))});return et?(be.progressStart(!0),et(be)):be.play(),dt},Ue=(be,Me)=>{ut(Me,Q),ut(be,ke)},gt=(be,Me)=>{ut(be,oe),ut(Me,ye)},ut=(be,Me)=>{if(be){const et=new CustomEvent(Me,{bubbles:!1,cancelable:!1});be.dispatchEvent(et)}},$t=be=>be?new Promise(Me=>(0,te.c)(be,Me)):Promise.resolve(),E=function(){var be=(0,y.Z)(function*(Me){const et=Me;if(et){if(null!=et.componentOnReady&&null!=(yield et.componentOnReady()))return;yield Promise.all(Array.from(et.children).map(E))}});return function(et){return be.apply(this,arguments)}}(),pt=(be,Me)=>{Me?(be.setAttribute("aria-hidden","true"),be.classList.add("ion-page-hidden")):(be.hidden=!1,be.removeAttribute("aria-hidden"),be.classList.remove("ion-page-hidden"))},Dt=(be,Me,et)=>{void 0!==be&&(be.style.zIndex="back"===et?"99":"101"),void 0!==Me&&(Me.style.zIndex="100")},Pe=be=>be.classList.contains("ion-page")?be:be.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||be},7585:(en,it,F)=>{"use strict";F.d(it,{a:()=>te,b:()=>nt,c:()=>E,g:()=>A,i:()=>At});var y=F(3150);const A=Ie=>ke(Ie),te=(Ie,Ye)=>("string"==typeof Ie&&(Ye=Ie,Ie=void 0),A(Ie).includes(Ye)),ke=(Ie=window)=>{if(void 0===Ie)return[];Ie.Ionic=Ie.Ionic||{};let Ye=Ie.Ionic.platforms;return null==Ye&&(Ye=Ie.Ionic.platforms=oe(Ie),Ye.forEach(Ve=>Ie.document.documentElement.classList.add(`plt-${Ve}`))),Ye},oe=Ie=>Object.keys(ut).filter(Ye=>ut[Ye](Ie)),ye=Ie=>!!(Ue(Ie,/iPad/i)||Ue(Ie,/Macintosh/i)&&we(Ie)),re=Ie=>Ue(Ie,/android|sink/i),we=Ie=>gt(Ie,"(any-pointer:coarse)"),Ae=Ie=>Ze(Ie)||Ge(Ie),Ze=Ie=>!!(Ie.cordova||Ie.phonegap||Ie.PhoneGap),Ge=Ie=>{const Ye=Ie.Capacitor;return!(!Ye||!Ye.isNative)},Ue=(Ie,Ye)=>Ye.test(Ie.navigator.userAgent),gt=(Ie,Ye)=>Ie.matchMedia(Ye).matches,ut={ipad:ye,iphone:Ie=>Ue(Ie,/iPhone/i),ios:Ie=>Ue(Ie,/iPhone|iPod/i)||ye(Ie),android:re,phablet:Ie=>{const Ye=Ie.innerWidth,Ve=Ie.innerHeight,Fe=Math.min(Ye,Ve),tt=Math.max(Ye,Ve);return Fe>390&&Fe<520&&tt>620&&tt<800},tablet:Ie=>{const Ye=Ie.innerWidth,Ve=Ie.innerHeight,Fe=Math.min(Ye,Ve),tt=Math.max(Ye,Ve);return ye(Ie)||(Ie=>re(Ie)&&!Ue(Ie,/mobile/i))(Ie)||Fe>460&&Fe<820&&tt>780&&tt<1400},cordova:Ze,capacitor:Ge,electron:Ie=>Ue(Ie,/electron/i),pwa:Ie=>!(!Ie.matchMedia("(display-mode: standalone)").matches&&!Ie.navigator.standalone),mobile:we,mobileweb:Ie=>we(Ie)&&!Ae(Ie),desktop:Ie=>!we(Ie),hybrid:Ae};class $t{constructor(){this.m=new Map}reset(Ye){this.m=new Map(Object.entries(Ye))}get(Ye,Ve){const Fe=this.m.get(Ye);return void 0!==Fe?Fe:Ve}getBoolean(Ye,Ve=!1){const Fe=this.m.get(Ye);return void 0===Fe?Ve:"string"==typeof Fe?"true"===Fe:!!Fe}getNumber(Ye,Ve){const Fe=parseFloat(this.m.get(Ye));return isNaN(Fe)?void 0!==Ve?Ve:NaN:Fe}set(Ye,Ve){this.m.set(Ye,Ve)}}const E=new $t,et="ionic-persist-config";let dt;const nt=Ie=>Ie&&(0,y.g)(Ie)||dt,At=(Ie={})=>{if("undefined"==typeof window)return;const Ye=window.document,Ve=window,Fe=Ve.Ionic=Ve.Ionic||{};ke(Ve);const tt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(Ie=>{try{const Ye=Ie.sessionStorage.getItem(et);return null!==Ye?JSON.parse(Ye):{}}catch(Ye){return{}}})(Ve)),{persistConfig:!1}),Fe.config),(Ie=>{const Ye={};return Ie.location.search.slice(1).split("&").map(Ve=>Ve.split("=")).map(([Ve,Fe])=>[decodeURIComponent(Ve),decodeURIComponent(Fe)]).filter(([Ve])=>((Ie,Ye)=>Ie.substr(0,Ye.length)===Ye)(Ve,"ionic:")).map(([Ve,Fe])=>[Ve.slice("ionic:".length),Fe]).forEach(([Ve,Fe])=>{Ye[Ve]=Fe}),Ye})(Ve)),Ie);E.reset(tt),E.getBoolean("persistConfig")&&((Ie,Ye)=>{try{Ie.sessionStorage.setItem(et,JSON.stringify(Ye))}catch(Ve){return}})(Ve,tt),Fe.config=E,Fe.mode=dt=E.get("mode",Ye.documentElement.getAttribute("mode")||(te(Ve,"ios")?"ios":"md")),E.set("mode",dt),Ye.documentElement.setAttribute("mode",dt),Ye.documentElement.classList.add(dt),E.getBoolean("_testing")&&E.set("animated",!1);const St=Mt=>Mt.tagName&&Mt.tagName.startsWith("ION-"),Bt=Mt=>["ios","md"].includes(Mt);(0,y.s)(Mt=>{for(;Mt;){const Nt=Mt.mode||Mt.getAttribute("mode");if(Nt){if(Bt(Nt))return Nt;St(Mt)&&console.warn('Invalid ionic mode: "'+Nt+'", expected: "ios" or "md"')}Mt=Mt.parentElement}return dt})}},7689:(en,it,F)=>{"use strict";F.r(it),F.d(it,{iosTransitionAnimation:()=>_e,shadow:()=>Q});var y=F(7235),A=F(4425);F(3150);const oe=le=>document.querySelector(`${le}.ion-cloned-element`),Q=le=>le.shadowRoot||le,ye=le=>{const we="ION-TABS"===le.tagName?le:le.querySelector("ion-tabs"),ht="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=we){const Ae=we.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Ae?Ae.querySelector(ht):null}return le.querySelector(ht)},L=(le,we)=>{const ht="ION-TABS"===le.tagName?le:le.querySelector("ion-tabs");let Ae=[];if(null!=ht){const Ze=ht.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=Ze&&(Ae=Ze.querySelectorAll("ion-buttons"))}else Ae=le.querySelectorAll("ion-buttons");for(const Ze of Ae){const Ge=Ze.closest("ion-header"),ft=Ge&&!Ge.classList.contains("header-collapse-condense-inactive"),Se=Ze.querySelector("ion-back-button"),Ue=Ze.classList.contains("buttons-collapse"),gt="start"===Ze.slot||""===Ze.slot;if(null!==Se&&gt&&(Ue&&ft&&we||!Ue))return Se}return null},re=(le,we,ht,Ae,Ze,Ge)=>{const ft=we?`calc(100% - ${Ge.right+4}px)`:Ge.left-4+"px",Se=we?"7px":"-7px",Ue=we?"-4px":"4px",gt=we?"-4px":"4px",ut=we?"right":"left",$t=we?"left":"right",Dt=ht?[{offset:0,opacity:1,transform:`translate3d(${Ue}, ${Ge.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Se}, ${Ze.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${Se}, ${Ze.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${Ue}, ${Ge.top-46}px, 0) scale(1)`}],Me=ht?[{offset:0,opacity:1,transform:`translate3d(${gt}, ${Ge.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${gt}, ${Ge.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${gt}, ${Ge.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${gt}, ${Ge.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${gt}, ${Ge.top-46}px, 0) scale(1)`}],et=(0,y.c)(),dt=(0,y.c)(),nt=oe("ion-back-button"),At=Q(nt).querySelector(".button-text"),Ie=Q(nt).querySelector("ion-icon");nt.text=Ae.text,nt.mode=Ae.mode,nt.icon=Ae.icon,nt.color=Ae.color,nt.disabled=Ae.disabled,nt.style.setProperty("display","block"),nt.style.setProperty("position","fixed"),dt.addElement(Ie),et.addElement(At),et.beforeStyles({"transform-origin":`${ut} center`}).beforeAddWrite(()=>{Ae.style.setProperty("display","none"),nt.style.setProperty(ut,ft)}).afterAddWrite(()=>{Ae.style.setProperty("display",""),nt.style.setProperty("display","none"),nt.style.removeProperty(ut)}).keyframes(Dt),dt.beforeStyles({"transform-origin":`${$t} center`}).keyframes(Me),le.addAnimation([et,dt])},he=(le,we,ht,Ae,Ze,Ge)=>{const ft=we?`calc(100% - ${Ze.right}px)`:`${Ze.left}px`,Se=we?"-18px":"18px",Ue=we?"right":"left",$t=ht?[{offset:0,opacity:0,transform:`translate3d(${Se}, ${Ge.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${Ze.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${Ze.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Se}, ${Ge.top-4}px, 0) scale(0.5)`}],E=oe("ion-title"),pt=(0,y.c)();E.innerText=Ae.innerText,E.size=Ae.size,E.color=Ae.color,pt.addElement(E),pt.beforeStyles({"transform-origin":`${Ue} center`,height:"46px",display:"",position:"relative",[Ue]:ft}).beforeAddWrite(()=>{Ae.style.setProperty("display","none")}).afterAddWrite(()=>{Ae.style.setProperty("display",""),E.style.setProperty("display","none")}).keyframes($t),le.addAnimation(pt)},_e=(le,we)=>{try{const ht="cubic-bezier(0.32,0.72,0,1)",Ae="opacity",Ze="transform",Ge="0%",ft=.8,Se="rtl"===le.ownerDocument.dir,Ue=Se?"-99.5%":"99.5%",gt=Se?"33%":"-33%",ut=we.enteringEl,$t=we.leavingEl,E="back"===we.direction,pt=ut.querySelector(":scope > ion-content"),Dt=ut.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),Pe=ut.querySelectorAll(":scope > ion-header > ion-toolbar"),be=(0,y.c)(),Me=(0,y.c)();if(be.addElement(ut).duration(we.duration||540).easing(we.easing||ht).fill("both").beforeRemoveClass("ion-page-invisible"),$t&&le){const At=(0,y.c)();At.addElement(le),be.addAnimation(At)}if(pt||0!==Pe.length||0!==Dt.length?(Me.addElement(pt),Me.addElement(Dt)):Me.addElement(ut.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),be.addAnimation(Me),E?Me.beforeClearStyles([Ae]).fromTo("transform",`translateX(${gt})`,`translateX(${Ge})`).fromTo(Ae,ft,1):Me.beforeClearStyles([Ae]).fromTo("transform",`translateX(${Ue})`,`translateX(${Ge})`),pt){const At=Q(pt).querySelector(".transition-effect");if(At){const Ie=At.querySelector(".transition-cover"),Ye=At.querySelector(".transition-shadow"),Ve=(0,y.c)(),Fe=(0,y.c)(),tt=(0,y.c)();Ve.addElement(At).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Fe.addElement(Ie).beforeClearStyles([Ae]).fromTo(Ae,0,.1),tt.addElement(Ye).beforeClearStyles([Ae]).fromTo(Ae,.03,.7),Ve.addAnimation([Fe,tt]),Me.addAnimation([Ve])}}const et=ut.querySelector("ion-header.header-collapse-condense"),{forward:dt,backward:nt}=((le,we,ht,Ae,Ze)=>{const Ge=L(Ae,ht),ft=ye(Ze),Se=ye(Ae),Ue=L(Ze,ht),gt=null!==Ge&&null!==ft&&!ht,ut=null!==Se&&null!==Ue&&ht;if(gt){const $t=ft.getBoundingClientRect(),E=Ge.getBoundingClientRect();he(le,we,ht,ft,$t,E),re(le,we,ht,Ge,$t,E)}else if(ut){const $t=Se.getBoundingClientRect(),E=Ue.getBoundingClientRect();he(le,we,ht,Se,$t,E),re(le,we,ht,Ue,$t,E)}return{forward:gt,backward:ut}})(be,Se,E,ut,$t);if(Pe.forEach(At=>{const Ie=(0,y.c)();Ie.addElement(At),be.addAnimation(Ie);const Ye=(0,y.c)();Ye.addElement(At.querySelector("ion-title"));const Ve=(0,y.c)(),Fe=Array.from(At.querySelectorAll("ion-buttons,[menuToggle]")),tt=At.closest("ion-header"),St=tt&&tt.classList.contains("header-collapse-condense-inactive");let Bt;Bt=Fe.filter(E?wn=>{const yn=wn.classList.contains("buttons-collapse");return yn&&!St||!yn}:wn=>!wn.classList.contains("buttons-collapse")),Ve.addElement(Bt);const Mt=(0,y.c)();Mt.addElement(At.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const Nt=(0,y.c)();Nt.addElement(Q(At).querySelector(".toolbar-background"));const gn=(0,y.c)(),Nn=At.querySelector("ion-back-button");if(Nn&&gn.addElement(Nn),Ie.addAnimation([Ye,Ve,Mt,Nt,gn]),Ve.fromTo(Ae,.01,1),Mt.fromTo(Ae,.01,1),E)St||Ye.fromTo("transform",`translateX(${gt})`,`translateX(${Ge})`).fromTo(Ae,.01,1),Mt.fromTo("transform",`translateX(${gt})`,`translateX(${Ge})`),gn.fromTo(Ae,.01,1);else if(et||Ye.fromTo("transform",`translateX(${Ue})`,`translateX(${Ge})`).fromTo(Ae,.01,1),Mt.fromTo("transform",`translateX(${Ue})`,`translateX(${Ge})`),Nt.beforeClearStyles([Ae,"transform"]),(null==tt?void 0:tt.translucent)?Nt.fromTo("transform",Se?"translateX(-100%)":"translateX(100%)","translateX(0px)"):Nt.fromTo(Ae,.01,"var(--opacity)"),dt||gn.fromTo(Ae,.01,1),Nn&&!dt){const yn=(0,y.c)();yn.addElement(Q(Nn).querySelector(".button-text")).fromTo("transform",Se?"translateX(-100px)":"translateX(100px)","translateX(0px)"),Ie.addAnimation(yn)}}),$t){const At=(0,y.c)(),Ie=$t.querySelector(":scope > ion-content"),Ye=$t.querySelectorAll(":scope > ion-header > ion-toolbar"),Ve=$t.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(Ie||0!==Ye.length||0!==Ve.length?(At.addElement(Ie),At.addElement(Ve)):At.addElement($t.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),be.addAnimation(At),E){At.beforeClearStyles([Ae]).fromTo("transform",`translateX(${Ge})`,Se?"translateX(-100%)":"translateX(100%)");const Fe=(0,A.g)($t);be.afterAddWrite(()=>{"normal"===be.getDirection()&&Fe.style.setProperty("display","none")})}else At.fromTo("transform",`translateX(${Ge})`,`translateX(${gt})`).fromTo(Ae,1,ft);if(Ie){const Fe=Q(Ie).querySelector(".transition-effect");if(Fe){const tt=Fe.querySelector(".transition-cover"),St=Fe.querySelector(".transition-shadow"),Bt=(0,y.c)(),Mt=(0,y.c)(),Nt=(0,y.c)();Bt.addElement(Fe).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Mt.addElement(tt).beforeClearStyles([Ae]).fromTo(Ae,.1,0),Nt.addElement(St).beforeClearStyles([Ae]).fromTo(Ae,.7,.03),Bt.addAnimation([Mt,Nt]),At.addAnimation([Bt])}}Ye.forEach(Fe=>{const tt=(0,y.c)();tt.addElement(Fe);const St=(0,y.c)();St.addElement(Fe.querySelector("ion-title"));const Bt=(0,y.c)(),Mt=Fe.querySelectorAll("ion-buttons,[menuToggle]"),Nt=Fe.closest("ion-header"),gn=Nt&&Nt.classList.contains("header-collapse-condense-inactive"),Nn=Array.from(Mt).filter(Tt=>{const un=Tt.classList.contains("buttons-collapse");return un&&!gn||!un});Bt.addElement(Nn);const wn=(0,y.c)(),yn=Fe.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");yn.length>0&&wn.addElement(yn);const Sn=(0,y.c)();Sn.addElement(Q(Fe).querySelector(".toolbar-background"));const mr=(0,y.c)(),cr=Fe.querySelector("ion-back-button");if(cr&&mr.addElement(cr),tt.addAnimation([St,Bt,wn,mr,Sn]),be.addAnimation(tt),mr.fromTo(Ae,.99,0),Bt.fromTo(Ae,.99,0),wn.fromTo(Ae,.99,0),E){if(gn||St.fromTo("transform",`translateX(${Ge})`,Se?"translateX(-100%)":"translateX(100%)").fromTo(Ae,.99,0),wn.fromTo("transform",`translateX(${Ge})`,Se?"translateX(-100%)":"translateX(100%)"),Sn.beforeClearStyles([Ae,"transform"]),(null==Nt?void 0:Nt.translucent)?Sn.fromTo("transform","translateX(0px)",Se?"translateX(-100%)":"translateX(100%)"):Sn.fromTo(Ae,"var(--opacity)",0),cr&&!nt){const un=(0,y.c)();un.addElement(Q(cr).querySelector(".button-text")).fromTo("transform",`translateX(${Ge})`,`translateX(${(Se?-124:124)+"px"})`),tt.addAnimation(un)}}else gn||St.fromTo("transform",`translateX(${Ge})`,`translateX(${gt})`).fromTo(Ae,.99,0).afterClearStyles([Ze,Ae]),wn.fromTo("transform",`translateX(${Ge})`,`translateX(${gt})`).afterClearStyles([Ze,Ae]),mr.afterClearStyles([Ae]),St.afterClearStyles([Ae]),Bt.afterClearStyles([Ae])})}return be}catch(ht){throw ht}}},5392:(en,it,F)=>{"use strict";F.r(it),F.d(it,{mdTransitionAnimation:()=>ke});var y=F(7235),A=F(4425);F(3150);const ke=(oe,Q)=>{const Ce="back"===Q.direction,he=Q.leavingEl,_e=(0,A.g)(Q.enteringEl),le=_e.querySelector("ion-toolbar"),we=(0,y.c)();if(we.addElement(_e).fill("both").beforeRemoveClass("ion-page-invisible"),Ce?we.duration(Q.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):we.duration(Q.duration||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),le){const ht=(0,y.c)();ht.addElement(le),we.addAnimation(ht)}if(he&&Ce){we.duration(Q.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const ht=(0,y.c)();ht.addElement((0,A.g)(he)).onFinish(Ae=>{1===Ae&&ht.elements.length>0&&ht.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),we.addAnimation(ht)}return we}},3291:(en,it,F)=>{"use strict";F.d(it,{B:()=>Ve,a:()=>L,b:()=>Ce,c:()=>le,d:()=>Dt,e:()=>ht,f:()=>be,g:()=>dt,h:()=>Q,i:()=>At,l:()=>re,m:()=>he,p:()=>_e,s:()=>Ye,t:()=>we});var y=F(8239),A=F(7585),te=F(3087),ke=F(1567);let oe=0;const Q=new WeakMap,ye=Fe=>({create:tt=>Ae(Fe,tt),dismiss:(tt,St,Bt)=>ut(document,tt,St,Fe,Bt),getTop:()=>(0,y.Z)(function*(){return E(document,Fe)})()}),L=ye("ion-alert"),Ce=ye("ion-action-sheet"),re=ye("ion-loading"),he=ye("ion-modal"),_e=ye("ion-picker"),le=ye("ion-popover"),we=ye("ion-toast"),ht=Fe=>{"undefined"!=typeof document&&gt(document);const tt=oe++;Fe.overlayIndex=tt,Fe.hasAttribute("id")||(Fe.id=`ion-overlay-${tt}`)},Ae=(Fe,tt)=>"undefined"!=typeof customElements?customElements.whenDefined(Fe).then(()=>{const St=document.createElement(Fe);return St.classList.add("overlay-hidden"),Object.assign(St,tt),Me(document).appendChild(St),new Promise(Bt=>(0,ke.c)(St,Bt))}):Promise.resolve(),Ze='[tabindex]:not([tabindex^="-"]), input:not([type=hidden]):not([tabindex^="-"]), textarea:not([tabindex^="-"]), button:not([tabindex^="-"]), select:not([tabindex^="-"]), .ion-focusable:not([tabindex^="-"])',Ge="input:not([type=hidden]), textarea, button, select",gt=Fe=>{0===oe&&(oe=1,Fe.addEventListener("focus",tt=>((Fe,tt)=>{const St=E(tt),Bt=Fe.target;if(St&&Bt)if(St===Bt)St.lastFocus=void 0;else{const Mt=(0,ke.g)(St);if(!Mt.contains(Bt))return;const Nt=Mt.querySelector(".ion-overlay-wrapper");if(!Nt)return;if(Nt.contains(Bt))St.lastFocus=Bt;else{const gn=St.lastFocus;((Fe,tt)=>{let St=Fe.querySelector(Ze);const Bt=St&&St.shadowRoot;Bt&&(St=Bt.querySelector(Ge)||St),St?St.focus():tt.focus()})(Nt,St),gn===tt.activeElement&&((Fe,tt)=>{const St=Array.from(Fe.querySelectorAll(Ze));let Bt=St.length>0?St[St.length-1]:null;const Mt=Bt&&Bt.shadowRoot;Mt&&(Bt=Mt.querySelector(Ge)||Bt),Bt?Bt.focus():tt.focus()})(Nt,St),St.lastFocus=tt.activeElement}}})(tt,Fe),!0),Fe.addEventListener("ionBackButton",tt=>{const St=E(Fe);St&&St.backdropDismiss&&tt.detail.register(te.OVERLAY_BACK_BUTTON_PRIORITY,()=>St.dismiss(void 0,Ve))}),Fe.addEventListener("keyup",tt=>{if("Escape"===tt.key){const St=E(Fe);St&&St.backdropDismiss&&St.dismiss(void 0,Ve)}}))},ut=(Fe,tt,St,Bt,Mt)=>{const Nt=E(Fe,Bt,Mt);return Nt?Nt.dismiss(tt,St):Promise.reject("overlay does not exist")},E=(Fe,tt,St)=>{const Bt=((Fe,tt)=>(void 0===tt&&(tt="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(Fe.querySelectorAll(tt)).filter(St=>St.overlayIndex>0)))(Fe,tt);return void 0===St?Bt[Bt.length-1]:Bt.find(Mt=>Mt.id===St)},pt=(Fe=!1)=>{const St=Me(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");!St||(Fe?St.setAttribute("aria-hidden","true"):St.removeAttribute("aria-hidden"))},Dt=function(){var Fe=(0,y.Z)(function*(tt,St,Bt,Mt,Nt){if(tt.presented)return;pt(!0),tt.presented=!0,tt.willPresent.emit();const gn=(0,A.b)(tt),Nn=tt.enterAnimation?tt.enterAnimation:A.c.get(St,"ios"===gn?Bt:Mt);(yield et(tt,Nn,tt.el,Nt))&&tt.didPresent.emit(),"ION-TOAST"!==tt.el.tagName&&Pe(tt.el),tt.keyboardClose&&tt.el.focus()});return function(St,Bt,Mt,Nt,gn){return Fe.apply(this,arguments)}}(),Pe=function(){var Fe=(0,y.Z)(function*(tt){let St=document.activeElement;if(!St)return;const Bt=St&&St.shadowRoot;Bt&&(St=Bt.querySelector(Ge)||St),yield tt.onDidDismiss(),St.focus()});return function(St){return Fe.apply(this,arguments)}}(),be=function(){var Fe=(0,y.Z)(function*(tt,St,Bt,Mt,Nt,gn,Nn){if(!tt.presented)return!1;pt(!1),tt.presented=!1;try{tt.el.style.setProperty("pointer-events","none"),tt.willDismiss.emit({data:St,role:Bt});const wn=(0,A.b)(tt),yn=tt.leaveAnimation?tt.leaveAnimation:A.c.get(Mt,"ios"===wn?Nt:gn);"gesture"!==Bt&&(yield et(tt,yn,tt.el,Nn)),tt.didDismiss.emit({data:St,role:Bt}),Q.delete(tt)}catch(wn){console.error(wn)}return tt.el.remove(),!0});return function(St,Bt,Mt,Nt,gn,Nn,wn){return Fe.apply(this,arguments)}}(),Me=Fe=>Fe.querySelector("ion-app")||Fe.body,et=function(){var Fe=(0,y.Z)(function*(tt,St,Bt,Mt){Bt.classList.remove("overlay-hidden");const gn=St(Bt.shadowRoot||tt.el,Mt);(!tt.animated||!A.c.getBoolean("animated",!0))&&gn.duration(0),tt.keyboardClose&&gn.beforeAddWrite(()=>{const wn=Bt.ownerDocument.activeElement;wn&&wn.matches("input, ion-input, ion-textarea")&&wn.blur()});const Nn=Q.get(tt)||[];return Q.set(tt,[...Nn,gn]),yield gn.play(),!0});return function(St,Bt,Mt,Nt){return Fe.apply(this,arguments)}}(),dt=(Fe,tt)=>{let St;const Bt=new Promise(Mt=>St=Mt);return nt(Fe,tt,Mt=>{St(Mt.detail)}),Bt},nt=(Fe,tt,St)=>{const Bt=Mt=>{(0,ke.b)(Fe,tt,Bt),St(Mt)};(0,ke.a)(Fe,tt,Bt)},At=Fe=>"cancel"===Fe||Fe===Ve,Ie=Fe=>Fe(),Ye=(Fe,tt)=>{if("function"==typeof Fe)return A.c.get("_zoneGate",Ie)(()=>{try{return Fe(tt)}catch(Bt){console.error(Bt)}})},Ve="backdrop"},2329:(en,it,F)=>{"use strict";F.d(it,{Mq:()=>y.getApp,C6:()=>y.getApps,ZF:()=>y.initializeApp,KN:()=>y.registerVersion});var y=F(8026);(0,y.registerVersion)("firebase","9.12.1","app")},7841:(en,it,F)=>{"use strict";F.d(it,{Z:()=>y.Z});var y=F(3394);y.Z.registerVersion("firebase","9.12.1","app-compat")},4828:(en,it,F)=>{"use strict";F.r(it);var y=F(8239),A=F(3394),te=F(3607),ke=F(3854),ye=(F(8026),F(5422),F(3910));function L(){return window}function he(){return(he=(0,y.Z)(function*(We,Ee,$e){var wt;const{BuildInfo:Qt}=L();(0,te.aq)(Ee.sessionId,"AuthEvent did not contain a session ID");const jn=yield Ge(Ee.sessionId),An={};return(0,te.ar)()?An.ibi=Qt.packageName:(0,te.as)()?An.apn=Qt.packageName:(0,te.at)(We,"operation-not-supported-in-this-environment"),Qt.displayName&&(An.appDisplayName=Qt.displayName),An.sessionId=jn,(0,te.au)(We,$e,Ee.type,void 0,null!==(wt=Ee.eventId)&&void 0!==wt?wt:void 0,An)})).apply(this,arguments)}function le(){return(le=(0,y.Z)(function*(We){const{BuildInfo:Ee}=L(),$e={};(0,te.ar)()?$e.iosBundleId=Ee.packageName:(0,te.as)()?$e.androidPackageName=Ee.packageName:(0,te.at)(We,"operation-not-supported-in-this-environment"),yield(0,te.av)(We,$e)})).apply(this,arguments)}function Ae(){return(Ae=(0,y.Z)(function*(We,Ee,$e){const{cordova:wt}=L();let Qt=()=>{};try{yield new Promise((jn,An)=>{let Vn=null;function mn(){var Zt;jn();const Yt=null===(Zt=wt.plugins.browsertab)||void 0===Zt?void 0:Zt.close;"function"==typeof Yt&&Yt(),"function"==typeof(null==$e?void 0:$e.close)&&$e.close()}function In(){Vn||(Vn=window.setTimeout(()=>{An((0,te.aw)(We,"redirect-cancelled-by-user"))},2e3))}function br(){"visible"===(null==document?void 0:document.visibilityState)&&In()}Ee.addPassiveListener(mn),document.addEventListener("resume",In,!1),(0,te.as)()&&document.addEventListener("visibilitychange",br,!1),Qt=()=>{Ee.removePassiveListener(mn),document.removeEventListener("resume",In,!1),document.removeEventListener("visibilitychange",br,!1),Vn&&window.clearTimeout(Vn)}})}finally{Qt()}})).apply(this,arguments)}function Ge(We){return ft.apply(this,arguments)}function ft(){return(ft=(0,y.Z)(function*(We){const Ee=Se(We),$e=yield crypto.subtle.digest("SHA-256",Ee);return Array.from(new Uint8Array($e)).map(Qt=>Qt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Se(We){if((0,te.aq)(/[0-9a-zA-Z]+/.test(We),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(We);const Ee=new ArrayBuffer(We.length),$e=new Uint8Array(Ee);for(let wt=0;wt<We.length;wt++)$e[wt]=We.charCodeAt(wt);return $e}class gt extends te.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Ee=>{this.resolveInialized=Ee})}addPassiveListener(Ee){this.passiveListeners.add(Ee)}removePassiveListener(Ee){this.passiveListeners.delete(Ee)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Ee){return this.resolveInialized(),this.passiveListeners.forEach($e=>$e(Ee)),super.onEvent(Ee)}initialized(){var Ee=this;return(0,y.Z)(function*(){yield Ee.initPromise})()}}function E(We){return pt.apply(this,arguments)}function pt(){return(pt=(0,y.Z)(function*(We){const Ee=yield be()._get(Me(We));return Ee&&(yield be()._remove(Me(We))),Ee})).apply(this,arguments)}function Pe(){const We=[],Ee="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let $e=0;$e<20;$e++){const wt=Math.floor(Math.random()*Ee.length);We.push(Ee.charAt(wt))}return We.join("")}function be(){return(0,te.ay)(te.b)}function Me(We){return(0,te.az)("authEvent",We.config.apiKey,We.name)}function nt(We){if(!(null==We?void 0:We.includes("?")))return{};const[Ee,...$e]=We.split("?");return(0,ke.zd)($e.join("?"))}function Ve(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,te.aw)("no-auth-event")}}function Mt(){var We;return(null===(We=null==self?void 0:self.location)||void 0===We?void 0:We.protocol)||null}function gn(We=(0,ke.z$)()){return!("file:"!==Mt()&&"ionic:"!==Mt()&&"capacitor:"!==Mt()||!We.toLowerCase().match(/iphone|ipad|ipod|android/))}function mr(){try{const We=self.localStorage,Ee=te.aI();if(We)return We.setItem(Ee,"1"),We.removeItem(Ee),!function(We=(0,ke.z$)()){return(0,ke.w1)()&&11===(null==document?void 0:document.documentMode)||function(We=(0,ke.z$)()){return/Edge\/\d+/.test(We)}(We)}()||(0,ke.hl)()}catch(We){return cr()&&(0,ke.hl)()}return!1}function cr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Tt(){return("http:"===Mt()||"https:"===Mt()||(0,ke.ru)()||gn())&&!((0,ke.b$)()||(0,ke.UG)())&&mr()&&!cr()}function un(){return gn()&&"undefined"!=typeof document}function Xt(){return(Xt=(0,y.Z)(function*(){return!!un()&&new Promise(We=>{const Ee=setTimeout(()=>{We(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Ee),We(!0)})})})).apply(this,arguments)}const kn={LOCAL:"local",NONE:"none",SESSION:"session"},Xn=te.ax,or="persistence";function Er(We){return hr.apply(this,arguments)}function hr(){return(hr=(0,y.Z)(function*(We){yield We._initializationPromise;const Ee=nr(),$e=te.az(or,We.config.apiKey,We.name);Ee&&Ee.setItem($e,We._getPersistence())})).apply(this,arguments)}function nr(){var We;try{return(null===(We="undefined"!=typeof window?window:null)||void 0===We?void 0:We.sessionStorage)||null}catch(Ee){return null}}const Ht=te.ax;class It{constructor(){this.browserResolver=te.ay(te.k),this.cordovaResolver=te.ay(class{constructor(){this._redirectPersistence=te.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=te.aB,this._overrideRedirectResult=te.aC}_initialize(Ee){var $e=this;return(0,y.Z)(function*(){const wt=Ee._key();let Qt=$e.eventManagers.get(wt);return Qt||(Qt=new gt(Ee),$e.eventManagers.set(wt,Qt),$e.attachCallbackListeners(Ee,Qt)),Qt})()}_openPopup(Ee){(0,te.at)(Ee,"operation-not-supported-in-this-environment")}_openRedirect(Ee,$e,wt,Qt){var jn=this;return(0,y.Z)(function*(){!function(We){var Ee,$e,wt,Qt,jn,An,Vn,mn,In,br;const Zt=L();(0,te.ax)("function"==typeof(null===(Ee=null==Zt?void 0:Zt.universalLinks)||void 0===Ee?void 0:Ee.subscribe),We,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,te.ax)(void 0!==(null===($e=null==Zt?void 0:Zt.BuildInfo)||void 0===$e?void 0:$e.packageName),We,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,te.ax)("function"==typeof(null===(jn=null===(Qt=null===(wt=null==Zt?void 0:Zt.cordova)||void 0===wt?void 0:wt.plugins)||void 0===Qt?void 0:Qt.browsertab)||void 0===jn?void 0:jn.openUrl),We,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,te.ax)("function"==typeof(null===(mn=null===(Vn=null===(An=null==Zt?void 0:Zt.cordova)||void 0===An?void 0:An.plugins)||void 0===Vn?void 0:Vn.browsertab)||void 0===mn?void 0:mn.isAvailable),We,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,te.ax)("function"==typeof(null===(br=null===(In=null==Zt?void 0:Zt.cordova)||void 0===In?void 0:In.InAppBrowser)||void 0===br?void 0:br.open),We,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Ee);const An=yield jn._initialize(Ee);yield An.initialized(),An.resetRedirect(),(0,te.aD)(),yield jn._originValidation(Ee);const Vn=function(We,Ee,$e=null){return{type:Ee,eventId:$e,urlResponse:null,sessionId:Pe(),postBody:null,tenantId:We.tenantId,error:(0,te.aw)(We,"no-auth-event")}}(Ee,wt,Qt);yield function(We,Ee){return be()._set(Me(We),Ee)}(Ee,Vn);const mn=yield function(We,Ee,$e){return he.apply(this,arguments)}(Ee,Vn,$e),In=yield function(We){const{cordova:Ee}=L();return new Promise($e=>{Ee.plugins.browsertab.isAvailable(wt=>{let Qt=null;wt?Ee.plugins.browsertab.openUrl(We):Qt=Ee.InAppBrowser.open(We,(0,te.ap)()?"_blank":"_system","location=yes"),$e(Qt)})})}(mn);return function(We,Ee,$e){return Ae.apply(this,arguments)}(Ee,An,In)})()}_isIframeWebStorageSupported(Ee,$e){throw new Error("Method not implemented.")}_originValidation(Ee){const $e=Ee._key();return this.originValidationPromises[$e]||(this.originValidationPromises[$e]=function(We){return le.apply(this,arguments)}(Ee)),this.originValidationPromises[$e]}attachCallbackListeners(Ee,$e){const{universalLinks:wt,handleOpenURL:Qt,BuildInfo:jn}=L(),An=setTimeout((0,y.Z)(function*(){yield E(Ee),$e.onEvent(Ve())}),500),Vn=function(){var br=(0,y.Z)(function*(Zt){clearTimeout(An);const Yt=yield E(Ee);let Ut=null;Yt&&(null==Zt?void 0:Zt.url)&&(Ut=function(We,Ee){var $e,wt;const Qt=function(We){const Ee=nt(We),$e=Ee.link?decodeURIComponent(Ee.link):void 0,wt=nt($e).link,Qt=Ee.deep_link_id?decodeURIComponent(Ee.deep_link_id):void 0;return nt(Qt).link||Qt||wt||$e||We}(Ee);if(Qt.includes("/__/auth/callback")){const jn=nt(Qt),An=jn.firebaseError?function(We){try{return JSON.parse(We)}catch(Ee){return null}}(decodeURIComponent(jn.firebaseError)):null,Vn=null===(wt=null===($e=null==An?void 0:An.code)||void 0===$e?void 0:$e.split("auth/"))||void 0===wt?void 0:wt[1],mn=Vn?(0,te.aw)(Vn):null;return mn?{type:We.type,eventId:We.eventId,tenantId:We.tenantId,error:mn,urlResponse:null,sessionId:null,postBody:null}:{type:We.type,eventId:We.eventId,tenantId:We.tenantId,sessionId:We.sessionId,urlResponse:Qt,postBody:null}}return null}(Yt,Zt.url)),$e.onEvent(Ut||Ve())});return function(Yt){return br.apply(this,arguments)}}();void 0!==wt&&"function"==typeof wt.subscribe&&wt.subscribe(null,Vn);const mn=Qt,In=`${jn.packageName.toLowerCase()}://`;L().handleOpenURL=function(){var br=(0,y.Z)(function*(Zt){if(Zt.toLowerCase().startsWith(In)&&Vn({url:Zt}),"function"==typeof mn)try{mn(Zt)}catch(Yt){console.error(Yt)}});return function(Zt){return br.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=te.a,this._completeRedirectFn=te.aB,this._overrideRedirectResult=te.aC}_initialize(Ee){var $e=this;return(0,y.Z)(function*(){return yield $e.selectUnderlyingResolver(),$e.assertedUnderlyingResolver._initialize(Ee)})()}_openPopup(Ee,$e,wt,Qt){var jn=this;return(0,y.Z)(function*(){return yield jn.selectUnderlyingResolver(),jn.assertedUnderlyingResolver._openPopup(Ee,$e,wt,Qt)})()}_openRedirect(Ee,$e,wt,Qt){var jn=this;return(0,y.Z)(function*(){return yield jn.selectUnderlyingResolver(),jn.assertedUnderlyingResolver._openRedirect(Ee,$e,wt,Qt)})()}_isIframeWebStorageSupported(Ee,$e){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Ee,$e)}_originValidation(Ee){return this.assertedUnderlyingResolver._originValidation(Ee)}get _shouldInitProactively(){return un()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ht(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Ee=this;return(0,y.Z)(function*(){if(Ee.underlyingResolver)return;const $e=yield function(){return Xt.apply(this,arguments)}();Ee.underlyingResolver=$e?Ee.cordovaResolver:Ee.browserResolver})()}}function ur(We){return We.unwrap()}function rn(We){return Jn(We)}function Jn(We){const{_tokenResponse:Ee}=We instanceof ke.ZR?We.customData:We;if(!Ee)return null;if(!(We instanceof ke.ZR)&&"temporaryProof"in Ee&&"phoneNumber"in Ee)return te.P.credentialFromResult(We);const $e=Ee.providerId;if(!$e||$e===te.o.PASSWORD)return null;let wt;switch($e){case te.o.GOOGLE:wt=te.Q;break;case te.o.FACEBOOK:wt=te.N;break;case te.o.GITHUB:wt=te.T;break;case te.o.TWITTER:wt=te.W;break;default:const{oauthIdToken:Qt,oauthAccessToken:jn,oauthTokenSecret:An,pendingToken:Vn,nonce:mn}=Ee;return jn||An||Qt||Vn?Vn?$e.startsWith("saml.")?te.aL._create($e,Vn):te.J._fromParams({providerId:$e,signInMethod:$e,pendingToken:Vn,idToken:Qt,accessToken:jn}):new te.U($e).credential({idToken:Qt,accessToken:jn,rawNonce:mn}):null}return We instanceof ke.ZR?wt.credentialFromError(We):wt.credentialFromResult(We)}function rr(We,Ee){return Ee.catch($e=>{throw $e instanceof ke.ZR&&function(We,Ee){var $e,wt;const Qt=null===($e=Ee.customData)||void 0===$e?void 0:$e._tokenResponse;if("auth/multi-factor-auth-required"===(null===(wt=Ee)||void 0===wt?void 0:wt.code))Ee.resolver=new Zn(We,te.an(We,Ee));else if(Qt){const jn=Jn(Ee),An=Ee;jn&&(An.credential=jn,An.tenantId=Qt.tenantId||void 0,An.email=Qt.email||void 0,An.phoneNumber=Qt.phoneNumber||void 0)}}(We,$e),$e}).then($e=>{const Qt=$e.user;return{operationType:$e.operationType,credential:rn($e),additionalUserInfo:te.al($e),user:ti.getOrCreate(Qt)}})}function ir(We,Ee){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,y.Z)(function*(We,Ee){const $e=yield Ee;return{verificationId:$e.verificationId,confirm:wt=>rr(We,$e.confirm(wt))}})).apply(this,arguments)}class Zn{constructor(Ee,$e){this.resolver=$e,this.auth=Ee.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Ee){return rr(ur(this.auth),this.resolver.resolveSignIn(Ee))}}class ti{constructor(Ee){this._delegate=Ee,this.multiFactor=te.ao(Ee)}static getOrCreate(Ee){return ti.USER_MAP.has(Ee)||ti.USER_MAP.set(Ee,new ti(Ee)),ti.USER_MAP.get(Ee)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Ee){return this._delegate.getIdTokenResult(Ee)}getIdToken(Ee){return this._delegate.getIdToken(Ee)}linkAndRetrieveDataWithCredential(Ee){return this.linkWithCredential(Ee)}linkWithCredential(Ee){var $e=this;return(0,y.Z)(function*(){return rr($e.auth,te.Z($e._delegate,Ee))})()}linkWithPhoneNumber(Ee,$e){var wt=this;return(0,y.Z)(function*(){return ir(wt.auth,te.l(wt._delegate,Ee,$e))})()}linkWithPopup(Ee){var $e=this;return(0,y.Z)(function*(){return rr($e.auth,te.d($e._delegate,Ee,It))})()}linkWithRedirect(Ee){var $e=this;return(0,y.Z)(function*(){return yield Er(te.aE($e.auth)),te.g($e._delegate,Ee,It)})()}reauthenticateAndRetrieveDataWithCredential(Ee){return this.reauthenticateWithCredential(Ee)}reauthenticateWithCredential(Ee){var $e=this;return(0,y.Z)(function*(){return rr($e.auth,te._($e._delegate,Ee))})()}reauthenticateWithPhoneNumber(Ee,$e){return ir(this.auth,te.r(this._delegate,Ee,$e))}reauthenticateWithPopup(Ee){return rr(this.auth,te.e(this._delegate,Ee,It))}reauthenticateWithRedirect(Ee){var $e=this;return(0,y.Z)(function*(){return yield Er(te.aE($e.auth)),te.h($e._delegate,Ee,It)})()}sendEmailVerification(Ee){return te.ab(this._delegate,Ee)}unlink(Ee){var $e=this;return(0,y.Z)(function*(){return yield te.ak($e._delegate,Ee),$e})()}updateEmail(Ee){return te.ag(this._delegate,Ee)}updatePassword(Ee){return te.ah(this._delegate,Ee)}updatePhoneNumber(Ee){return te.u(this._delegate,Ee)}updateProfile(Ee){return te.af(this._delegate,Ee)}verifyBeforeUpdateEmail(Ee,$e){return te.ac(this._delegate,Ee,$e)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ti.USER_MAP=new WeakMap;const fn=te.ax;let Xe=(()=>{class We{constructor($e,wt){if(this.app=$e,wt.isInitialized())return this._delegate=wt.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Qt}=$e.options;fn(Qt,"invalid-api-key",{appName:$e.name}),fn(Qt,"invalid-api-key",{appName:$e.name});const jn="undefined"!=typeof window?It:void 0;this._delegate=wt.initialize({options:{persistence:xe(Qt,$e.name),popupRedirectResolver:jn}}),this._delegate._updateErrorMap(te.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ti.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode($e){this._delegate.languageCode=$e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId($e){this._delegate.tenantId=$e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator($e,wt){te.G(this._delegate,$e,wt)}applyActionCode($e){return te.a2(this._delegate,$e)}checkActionCode($e){return te.a3(this._delegate,$e)}confirmPasswordReset($e,wt){return te.a1(this._delegate,$e,wt)}createUserWithEmailAndPassword($e,wt){var Qt=this;return(0,y.Z)(function*(){return rr(Qt._delegate,te.a5(Qt._delegate,$e,wt))})()}fetchProvidersForEmail($e){return this.fetchSignInMethodsForEmail($e)}fetchSignInMethodsForEmail($e){return te.aa(this._delegate,$e)}isSignInWithEmailLink($e){return te.a8(this._delegate,$e)}getRedirectResult(){var $e=this;return(0,y.Z)(function*(){fn(Tt(),$e._delegate,"operation-not-supported-in-this-environment");const wt=yield te.j($e._delegate,It);return wt?rr($e._delegate,Promise.resolve(wt)):{credential:null,user:null}})()}addFrameworkForLogging($e){!function(We,Ee){(0,te.aE)(We)._logFramework(Ee)}(this._delegate,$e)}onAuthStateChanged($e,wt,Qt){const{next:jn,error:An,complete:Vn}=se($e,wt,Qt);return this._delegate.onAuthStateChanged(jn,An,Vn)}onIdTokenChanged($e,wt,Qt){const{next:jn,error:An,complete:Vn}=se($e,wt,Qt);return this._delegate.onIdTokenChanged(jn,An,Vn)}sendSignInLinkToEmail($e,wt){return te.a7(this._delegate,$e,wt)}sendPasswordResetEmail($e,wt){return te.a0(this._delegate,$e,wt||void 0)}setPersistence($e){var wt=this;return(0,y.Z)(function*(){let Qt;switch(function(We,Ee){Xn(Object.values(kn).includes(Ee),We,"invalid-persistence-type"),(0,ke.b$)()?Xn(Ee!==kn.SESSION,We,"unsupported-persistence-type"):(0,ke.UG)()?Xn(Ee===kn.NONE,We,"unsupported-persistence-type"):cr()?Xn(Ee===kn.NONE||Ee===kn.LOCAL&&(0,ke.hl)(),We,"unsupported-persistence-type"):Xn(Ee===kn.NONE||mr(),We,"unsupported-persistence-type")}(wt._delegate,$e),$e){case kn.SESSION:Qt=te.a;break;case kn.LOCAL:Qt=(yield te.ay(te.i)._isAvailable())?te.i:te.b;break;case kn.NONE:Qt=te.L;break;default:return te.at("argument-error",{appName:wt._delegate.name})}return wt._delegate.setPersistence(Qt)})()}signInAndRetrieveDataWithCredential($e){return this.signInWithCredential($e)}signInAnonymously(){return rr(this._delegate,te.X(this._delegate))}signInWithCredential($e){return rr(this._delegate,te.Y(this._delegate,$e))}signInWithCustomToken($e){return rr(this._delegate,te.$(this._delegate,$e))}signInWithEmailAndPassword($e,wt){return rr(this._delegate,te.a6(this._delegate,$e,wt))}signInWithEmailLink($e,wt){return rr(this._delegate,te.a9(this._delegate,$e,wt))}signInWithPhoneNumber($e,wt){return ir(this._delegate,te.s(this._delegate,$e,wt))}signInWithPopup($e){var wt=this;return(0,y.Z)(function*(){return fn(Tt(),wt._delegate,"operation-not-supported-in-this-environment"),rr(wt._delegate,te.c(wt._delegate,$e,It))})()}signInWithRedirect($e){var wt=this;return(0,y.Z)(function*(){return fn(Tt(),wt._delegate,"operation-not-supported-in-this-environment"),yield Er(wt._delegate),te.f(wt._delegate,$e,It)})()}updateCurrentUser($e){return this._delegate.updateCurrentUser($e)}verifyPasswordResetCode($e){return te.a4(this._delegate,$e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return We.Persistence=kn,We})();function se(We,Ee,$e){let wt=We;"function"!=typeof We&&({next:wt,error:Ee,complete:$e}=We);const Qt=wt;return{next:An=>Qt(An&&ti.getOrCreate(An)),error:Ee,complete:$e}}function xe(We,Ee){const $e=function(We,Ee){const $e=nr();if(!$e)return[];const wt=te.az(or,We,Ee);switch($e.getItem(wt)){case kn.NONE:return[te.L];case kn.LOCAL:return[te.i,te.a];case kn.SESSION:return[te.a];default:return[]}}(We,Ee);if("undefined"!=typeof self&&!$e.includes(te.i)&&$e.push(te.i),"undefined"!=typeof window)for(const wt of[te.b,te.a])$e.includes(wt)||$e.push(wt);return $e.includes(te.L)||$e.push(te.L),$e}class at{constructor(){this.providerId="phone",this._delegate=new te.P(ur(A.Z.auth()))}static credential(Ee,$e){return te.P.credential(Ee,$e)}verifyPhoneNumber(Ee,$e){return this._delegate.verifyPhoneNumber(Ee,$e)}unwrap(){return this._delegate}}at.PHONE_SIGN_IN_METHOD=te.P.PHONE_SIGN_IN_METHOD,at.PROVIDER_ID=te.P.PROVIDER_ID;const Ct=te.ax;var We;(We=A.Z).INTERNAL.registerComponent(new ye.wA("auth-compat",Ee=>{const $e=Ee.getProvider("app-compat").getImmediate(),wt=Ee.getProvider("auth");return new Xe($e,wt)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:te.A.EMAIL_SIGNIN,PASSWORD_RESET:te.A.PASSWORD_RESET,RECOVER_EMAIL:te.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:te.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:te.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:te.A.VERIFY_EMAIL}},EmailAuthProvider:te.M,FacebookAuthProvider:te.N,GithubAuthProvider:te.T,GoogleAuthProvider:te.Q,OAuthProvider:te.U,SAMLAuthProvider:te.V,PhoneAuthProvider:at,PhoneMultiFactorGenerator:te.m,RecaptchaVerifier:class{constructor(Ee,$e,wt=A.Z.app()){var Qt;Ct(null===(Qt=wt.options)||void 0===Qt?void 0:Qt.apiKey,"invalid-api-key",{appName:wt.name}),this._delegate=new te.R(Ee,$e,wt.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:te.W,Auth:Xe,AuthCredential:te.H,Error:ke.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),We.registerVersion("@firebase/auth-compat","0.2.23")},6215:(en,it,F)=>{"use strict";F.d(it,{X:()=>te});var y=F(9765),A=F(7971);class te extends y.xQ{constructor(oe){super(),this._value=oe}get value(){return this.getValue()}_subscribe(oe){const Q=super._subscribe(oe);return Q&&!Q.closed&&oe.next(this._value),Q}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new A.N;return this._value}next(oe){super.next(this._value=oe)}}},8891:(en,it,F)=>{"use strict";F.d(it,{y:()=>Ce});var y=F(7393),te=F(9181),ke=F(6490),Q=F(6554),ye=F(4022),L=F(2494);let Ce=(()=>{class he{constructor(le){this._isScalar=!1,le&&(this._subscribe=le)}lift(le){const we=new he;return we.source=this,we.operator=le,we}subscribe(le,we,ht){const{operator:Ae}=this,Ze=function(he,_e,le){if(he){if(he instanceof y.L)return he;if(he[te.b])return he[te.b]()}return he||_e||le?new y.L(he,_e,le):new y.L(ke.c)}(le,we,ht);if(Ze.add(Ae?Ae.call(Ze,this.source):this.source||L.v.useDeprecatedSynchronousErrorHandling&&!Ze.syncErrorThrowable?this._subscribe(Ze):this._trySubscribe(Ze)),L.v.useDeprecatedSynchronousErrorHandling&&Ze.syncErrorThrowable&&(Ze.syncErrorThrowable=!1,Ze.syncErrorThrown))throw Ze.syncErrorValue;return Ze}_trySubscribe(le){try{return this._subscribe(le)}catch(we){L.v.useDeprecatedSynchronousErrorHandling&&(le.syncErrorThrown=!0,le.syncErrorValue=we),function(he){for(;he;){const{closed:_e,destination:le,isStopped:we}=he;if(_e||we)return!1;he=le&&le instanceof y.L?le:null}return!0}(le)?le.error(we):console.warn(we)}}forEach(le,we){return new(we=re(we))((ht,Ae)=>{let Ze;Ze=this.subscribe(Ge=>{try{le(Ge)}catch(ft){Ae(ft),Ze&&Ze.unsubscribe()}},Ae,ht)})}_subscribe(le){const{source:we}=this;return we&&we.subscribe(le)}[Q.L](){return this}pipe(...le){return 0===le.length?this:(0,ye.U)(le)(this)}toPromise(le){return new(le=re(le))((we,ht)=>{let Ae;this.subscribe(Ze=>Ae=Ze,Ze=>ht(Ze),()=>we(Ae))})}}return he.create=_e=>new he(_e),he})();function re(he){if(he||(he=L.v.Promise||Promise),!he)throw new Error("no Promise impl found");return he}},6490:(en,it,F)=>{"use strict";F.d(it,{c:()=>te});var y=F(2494),A=F(4449);const te={closed:!0,next(ke){},error(ke){if(y.v.useDeprecatedSynchronousErrorHandling)throw ke;(0,A.z)(ke)},complete(){}}},5197:(en,it,F)=>{"use strict";F.d(it,{L:()=>A});var y=F(7393);class A extends y.L{notifyNext(ke,oe,Q,ye,L){this.destination.next(oe)}notifyError(ke,oe){this.destination.error(ke)}notifyComplete(ke){this.destination.complete()}}},9765:(en,it,F)=>{"use strict";F.d(it,{Yc:()=>ye,xQ:()=>L});var y=F(8891),A=F(7393),te=F(5319),ke=F(7971),oe=F(8858),Q=F(9181);class ye extends A.L{constructor(he){super(he),this.destination=he}}let L=(()=>{class re extends y.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Q.b](){return new ye(this)}lift(_e){const le=new Ce(this,this);return le.operator=_e,le}next(_e){if(this.closed)throw new ke.N;if(!this.isStopped){const{observers:le}=this,we=le.length,ht=le.slice();for(let Ae=0;Ae<we;Ae++)ht[Ae].next(_e)}}error(_e){if(this.closed)throw new ke.N;this.hasError=!0,this.thrownError=_e,this.isStopped=!0;const{observers:le}=this,we=le.length,ht=le.slice();for(let Ae=0;Ae<we;Ae++)ht[Ae].error(_e);this.observers.length=0}complete(){if(this.closed)throw new ke.N;this.isStopped=!0;const{observers:_e}=this,le=_e.length,we=_e.slice();for(let ht=0;ht<le;ht++)we[ht].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(_e){if(this.closed)throw new ke.N;return super._trySubscribe(_e)}_subscribe(_e){if(this.closed)throw new ke.N;return this.hasError?(_e.error(this.thrownError),te.w.EMPTY):this.isStopped?(_e.complete(),te.w.EMPTY):(this.observers.push(_e),new oe.W(this,_e))}asObservable(){const _e=new y.y;return _e.source=this,_e}}return re.create=(he,_e)=>new Ce(he,_e),re})();class Ce extends L{constructor(he,_e){super(),this.destination=he,this.source=_e}next(he){const{destination:_e}=this;_e&&_e.next&&_e.next(he)}error(he){const{destination:_e}=this;_e&&_e.error&&this.destination.error(he)}complete(){const{destination:he}=this;he&&he.complete&&this.destination.complete()}_subscribe(he){const{source:_e}=this;return _e?this.source.subscribe(he):te.w.EMPTY}}},8858:(en,it,F)=>{"use strict";F.d(it,{W:()=>A});var y=F(5319);class A extends y.w{constructor(ke,oe){super(),this.subject=ke,this.subscriber=oe,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ke=this.subject,oe=ke.observers;if(this.subject=null,!oe||0===oe.length||ke.isStopped||ke.closed)return;const Q=oe.indexOf(this.subscriber);-1!==Q&&oe.splice(Q,1)}}},7393:(en,it,F)=>{"use strict";F.d(it,{L:()=>ye});var y=F(9105),A=F(6490),te=F(5319),ke=F(9181),oe=F(2494),Q=F(4449);class ye extends te.w{constructor(re,he,_e){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=A.c;break;case 1:if(!re){this.destination=A.c;break}if("object"==typeof re){re instanceof ye?(this.syncErrorThrowable=re.syncErrorThrowable,this.destination=re,re.add(this)):(this.syncErrorThrowable=!0,this.destination=new L(this,re));break}default:this.syncErrorThrowable=!0,this.destination=new L(this,re,he,_e)}}[ke.b](){return this}static create(re,he,_e){const le=new ye(re,he,_e);return le.syncErrorThrowable=!1,le}next(re){this.isStopped||this._next(re)}error(re){this.isStopped||(this.isStopped=!0,this._error(re))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(re){this.destination.next(re)}_error(re){this.destination.error(re),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:re}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=re,this}}class L extends ye{constructor(re,he,_e,le){super(),this._parentSubscriber=re;let we,ht=this;(0,y.m)(he)?we=he:he&&(we=he.next,_e=he.error,le=he.complete,he!==A.c&&(ht=Object.create(he),(0,y.m)(ht.unsubscribe)&&this.add(ht.unsubscribe.bind(ht)),ht.unsubscribe=this.unsubscribe.bind(this))),this._context=ht,this._next=we,this._error=_e,this._complete=le}next(re){if(!this.isStopped&&this._next){const{_parentSubscriber:he}=this;oe.v.useDeprecatedSynchronousErrorHandling&&he.syncErrorThrowable?this.__tryOrSetError(he,this._next,re)&&this.unsubscribe():this.__tryOrUnsub(this._next,re)}}error(re){if(!this.isStopped){const{_parentSubscriber:he}=this,{useDeprecatedSynchronousErrorHandling:_e}=oe.v;if(this._error)_e&&he.syncErrorThrowable?(this.__tryOrSetError(he,this._error,re),this.unsubscribe()):(this.__tryOrUnsub(this._error,re),this.unsubscribe());else if(he.syncErrorThrowable)_e?(he.syncErrorValue=re,he.syncErrorThrown=!0):(0,Q.z)(re),this.unsubscribe();else{if(this.unsubscribe(),_e)throw re;(0,Q.z)(re)}}}complete(){if(!this.isStopped){const{_parentSubscriber:re}=this;if(this._complete){const he=()=>this._complete.call(this._context);oe.v.useDeprecatedSynchronousErrorHandling&&re.syncErrorThrowable?(this.__tryOrSetError(re,he),this.unsubscribe()):(this.__tryOrUnsub(he),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(re,he){try{re.call(this._context,he)}catch(_e){if(this.unsubscribe(),oe.v.useDeprecatedSynchronousErrorHandling)throw _e;(0,Q.z)(_e)}}__tryOrSetError(re,he,_e){if(!oe.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{he.call(this._context,_e)}catch(le){return oe.v.useDeprecatedSynchronousErrorHandling?(re.syncErrorValue=le,re.syncErrorThrown=!0,!0):((0,Q.z)(le),!0)}return!1}_unsubscribe(){const{_parentSubscriber:re}=this;this._context=null,this._parentSubscriber=null,re.unsubscribe()}}},5319:(en,it,F)=>{"use strict";F.d(it,{w:()=>Q});var y=F(9796),A=F(1555),te=F(9105);const oe=(()=>{function L(Ce){return Error.call(this),this.message=Ce?`${Ce.length} errors occurred during unsubscription:\n${Ce.map((re,he)=>`${he+1}) ${re.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ce,this}return L.prototype=Object.create(Error.prototype),L})();class Q{constructor(Ce){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,Ce&&(this._ctorUnsubscribe=!0,this._unsubscribe=Ce)}unsubscribe(){let Ce;if(this.closed)return;let{_parentOrParents:re,_ctorUnsubscribe:he,_unsubscribe:_e,_subscriptions:le}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,re instanceof Q)re.remove(this);else if(null!==re)for(let we=0;we<re.length;++we)re[we].remove(this);if((0,te.m)(_e)){he&&(this._unsubscribe=void 0);try{_e.call(this)}catch(we){Ce=we instanceof oe?ye(we.errors):[we]}}if((0,y.k)(le)){let we=-1,ht=le.length;for(;++we<ht;){const Ae=le[we];if((0,A.K)(Ae))try{Ae.unsubscribe()}catch(Ze){Ce=Ce||[],Ze instanceof oe?Ce=Ce.concat(ye(Ze.errors)):Ce.push(Ze)}}}if(Ce)throw new oe(Ce)}add(Ce){let re=Ce;if(!Ce)return Q.EMPTY;switch(typeof Ce){case"function":re=new Q(Ce);case"object":if(re===this||re.closed||"function"!=typeof re.unsubscribe)return re;if(this.closed)return re.unsubscribe(),re;if(!(re instanceof Q)){const le=re;re=new Q,re._subscriptions=[le]}break;default:throw new Error("unrecognized teardown "+Ce+" added to Subscription.")}let{_parentOrParents:he}=re;if(null===he)re._parentOrParents=this;else if(he instanceof Q){if(he===this)return re;re._parentOrParents=[he,this]}else{if(-1!==he.indexOf(this))return re;he.push(this)}const _e=this._subscriptions;return null===_e?this._subscriptions=[re]:_e.push(re),re}remove(Ce){const re=this._subscriptions;if(re){const he=re.indexOf(Ce);-1!==he&&re.splice(he,1)}}}var L;function ye(L){return L.reduce((Ce,re)=>Ce.concat(re instanceof oe?re.errors:re),[])}Q.EMPTY=((L=new Q).closed=!0,L)},2494:(en,it,F)=>{"use strict";F.d(it,{v:()=>A});let y=!1;const A={Promise:void 0,set useDeprecatedSynchronousErrorHandling(te){if(te){const ke=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ke.stack)}else y&&console.log("RxJS: Back to a better error behavior. Thank you. <3");y=te},get useDeprecatedSynchronousErrorHandling(){return y}}},5345:(en,it,F)=>{"use strict";F.d(it,{IY:()=>ke,Ds:()=>Q,ft:()=>L});var y=F(7393),A=F(8891),te=F(7444);class ke extends y.L{constructor(re){super(),this.parent=re}_next(re){this.parent.notifyNext(re)}_error(re){this.parent.notifyError(re),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Q extends y.L{notifyNext(re){this.destination.next(re)}notifyError(re){this.destination.error(re)}notifyComplete(){this.destination.complete()}}function L(Ce,re){if(re.closed)return;if(Ce instanceof A.y)return Ce.subscribe(re);let he;try{he=(0,te.s)(Ce)(re)}catch(_e){re.error(_e)}return he}},2441:(en,it,F)=>{"use strict";F.d(it,{c:()=>oe,N:()=>Q});var y=F(9765),A=F(8891),te=F(5319),ke=F(1307);class oe extends A.y{constructor(he,_e){super(),this.source=he,this.subjectFactory=_e,this._refCount=0,this._isComplete=!1}_subscribe(he){return this.getSubject().subscribe(he)}getSubject(){const he=this._subject;return(!he||he.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let he=this._connection;return he||(this._isComplete=!1,he=this._connection=new te.w,he.add(this.source.subscribe(new ye(this.getSubject(),this))),he.closed&&(this._connection=null,he=te.w.EMPTY)),he}refCount(){return(0,ke.x)()(this)}}const Q=(()=>{const re=oe.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:re._subscribe},_isComplete:{value:re._isComplete,writable:!0},getSubject:{value:re.getSubject},connect:{value:re.connect},refCount:{value:re.refCount}}})();class ye extends y.Yc{constructor(he,_e){super(he),this.connectable=_e}_error(he){this._unsubscribe(),super._error(he)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const he=this.connectable;if(he){this.connectable=null;const _e=he._connection;he._refCount=0,he._subject=null,he._connection=null,_e&&_e.unsubscribe()}}}},8071:(en,it,F)=>{"use strict";F.d(it,{z:()=>ke});var y=F(5917),A=F(3282);function ke(...oe){return(0,A.J)(1)((0,y.of)(...oe))}},9193:(en,it,F)=>{"use strict";F.d(it,{E:()=>A,c:()=>te});var y=F(8891);const A=new y.y(oe=>oe.complete());function te(oe){return oe?function(oe){return new y.y(Q=>oe.schedule(()=>Q.complete()))}(oe):A}},4402:(en,it,F)=>{"use strict";F.d(it,{D:()=>ht});var y=F(8891),A=F(7444),te=F(5319),ke=F(6554),ye=F(4087),L=F(377),he=F(4072),_e=F(9489);function ht(Ae,Ze){return Ze?function(Ae,Ze){if(null!=Ae){if(function(Ae){return Ae&&"function"==typeof Ae[ke.L]}(Ae))return function(Ae,Ze){return new y.y(Ge=>{const ft=new te.w;return ft.add(Ze.schedule(()=>{const Se=Ae[ke.L]();ft.add(Se.subscribe({next(Ue){ft.add(Ze.schedule(()=>Ge.next(Ue)))},error(Ue){ft.add(Ze.schedule(()=>Ge.error(Ue)))},complete(){ft.add(Ze.schedule(()=>Ge.complete()))}}))})),ft})}(Ae,Ze);if((0,he.t)(Ae))return function(Ae,Ze){return new y.y(Ge=>{const ft=new te.w;return ft.add(Ze.schedule(()=>Ae.then(Se=>{ft.add(Ze.schedule(()=>{Ge.next(Se),ft.add(Ze.schedule(()=>Ge.complete()))}))},Se=>{ft.add(Ze.schedule(()=>Ge.error(Se)))}))),ft})}(Ae,Ze);if((0,_e.z)(Ae))return(0,ye.r)(Ae,Ze);if(function(Ae){return Ae&&"function"==typeof Ae[L.hZ]}(Ae)||"string"==typeof Ae)return function(Ae,Ze){if(!Ae)throw new Error("Iterable cannot be null");return new y.y(Ge=>{const ft=new te.w;let Se;return ft.add(()=>{Se&&"function"==typeof Se.return&&Se.return()}),ft.add(Ze.schedule(()=>{Se=Ae[L.hZ](),ft.add(Ze.schedule(function(){if(Ge.closed)return;let Ue,gt;try{const ut=Se.next();Ue=ut.value,gt=ut.done}catch(ut){return void Ge.error(ut)}gt?Ge.complete():(Ge.next(Ue),this.schedule())}))})),ft})}(Ae,Ze)}throw new TypeError((null!==Ae&&typeof Ae||Ae)+" is not observable")}(Ae,Ze):Ae instanceof y.y?Ae:new y.y((0,A.s)(Ae))}},6693:(en,it,F)=>{"use strict";F.d(it,{n:()=>ke});var y=F(8891),A=F(5015),te=F(4087);function ke(oe,Q){return Q?(0,te.r)(oe,Q):new y.y((0,A.V)(oe))}},6682:(en,it,F)=>{"use strict";F.d(it,{T:()=>oe});var y=F(8891),A=F(4869),te=F(3282),ke=F(6693);function oe(...Q){let ye=Number.POSITIVE_INFINITY,L=null,Ce=Q[Q.length-1];return(0,A.K)(Ce)?(L=Q.pop(),Q.length>1&&"number"==typeof Q[Q.length-1]&&(ye=Q.pop())):"number"==typeof Ce&&(ye=Q.pop()),null===L&&1===Q.length&&Q[0]instanceof y.y?Q[0]:(0,te.J)(ye)((0,ke.n)(Q,L))}},5917:(en,it,F)=>{"use strict";F.d(it,{of:()=>ke});var y=F(4869),A=F(6693),te=F(4087);function ke(...oe){let Q=oe[oe.length-1];return(0,y.K)(Q)?(oe.pop(),(0,te.r)(oe,Q)):(0,A.n)(oe)}},5242:(en,it,F)=>{"use strict";F.d(it,{d:()=>A});var y=F(7393);function A(oe=null){return Q=>Q.lift(new te(oe))}class te{constructor(Q){this.defaultValue=Q}call(Q,ye){return ye.subscribe(new ke(Q,this.defaultValue))}}class ke extends y.L{constructor(Q,ye){super(Q),this.defaultValue=ye,this.isEmpty=!0}_next(Q){this.isEmpty=!1,this.destination.next(Q)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},7519:(en,it,F)=>{"use strict";F.d(it,{x:()=>A});var y=F(7393);function A(oe,Q){return ye=>ye.lift(new te(oe,Q))}class te{constructor(Q,ye){this.compare=Q,this.keySelector=ye}call(Q,ye){return ye.subscribe(new ke(Q,this.compare,this.keySelector))}}class ke extends y.L{constructor(Q,ye,L){super(Q),this.keySelector=L,this.hasKey=!1,"function"==typeof ye&&(this.compare=ye)}compare(Q,ye){return Q===ye}_next(Q){let ye;try{const{keySelector:Ce}=this;ye=Ce?Ce(Q):Q}catch(Ce){return this.destination.error(Ce)}let L=!1;if(this.hasKey)try{const{compare:Ce}=this;L=Ce(this.key,ye)}catch(Ce){return this.destination.error(Ce)}else this.hasKey=!0;L||(this.key=ye,this.destination.next(Q))}}},5435:(en,it,F)=>{"use strict";F.d(it,{h:()=>A});var y=F(7393);function A(oe,Q){return function(L){return L.lift(new te(oe,Q))}}class te{constructor(Q,ye){this.predicate=Q,this.thisArg=ye}call(Q,ye){return ye.subscribe(new ke(Q,this.predicate,this.thisArg))}}class ke extends y.L{constructor(Q,ye,L){super(Q),this.predicate=ye,this.thisArg=L,this.count=0}_next(Q){let ye;try{ye=this.predicate.call(this.thisArg,Q,this.count++)}catch(L){return void this.destination.error(L)}ye&&this.destination.next(Q)}}},8049:(en,it,F)=>{"use strict";F.d(it,{P:()=>ye});var y=F(3410),A=F(5435),te=F(5257),ke=F(5242),oe=F(4635),Q=F(4487);function ye(L,Ce){const re=arguments.length>=2;return he=>he.pipe(L?(0,A.h)((_e,le)=>L(_e,le,he)):Q.y,(0,te.q)(1),re?(0,ke.d)(Ce):(0,oe.T)(()=>new y.K))}},8002:(en,it,F)=>{"use strict";F.d(it,{U:()=>A});var y=F(7393);function A(oe,Q){return function(L){if("function"!=typeof oe)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return L.lift(new te(oe,Q))}}class te{constructor(Q,ye){this.project=Q,this.thisArg=ye}call(Q,ye){return ye.subscribe(new ke(Q,this.project,this.thisArg))}}class ke extends y.L{constructor(Q,ye,L){super(Q),this.project=ye,this.count=0,this.thisArg=L||this}_next(Q){let ye;try{ye=this.project.call(this.thisArg,Q,this.count++)}catch(L){return void this.destination.error(L)}this.destination.next(ye)}}},3282:(en,it,F)=>{"use strict";F.d(it,{J:()=>te});var y=F(9773),A=F(4487);function te(ke=Number.POSITIVE_INFINITY){return(0,y.zg)(A.y,ke)}},9773:(en,it,F)=>{"use strict";F.d(it,{zg:()=>ke});var y=F(8002),A=F(4402),te=F(5345);function ke(L,Ce,re=Number.POSITIVE_INFINITY){return"function"==typeof Ce?he=>he.pipe(ke((_e,le)=>(0,A.D)(L(_e,le)).pipe((0,y.U)((we,ht)=>Ce(_e,we,le,ht))),re)):("number"==typeof Ce&&(re=Ce),he=>he.lift(new oe(L,re)))}class oe{constructor(Ce,re=Number.POSITIVE_INFINITY){this.project=Ce,this.concurrent=re}call(Ce,re){return re.subscribe(new Q(Ce,this.project,this.concurrent))}}class Q extends te.Ds{constructor(Ce,re,he=Number.POSITIVE_INFINITY){super(Ce),this.project=re,this.concurrent=he,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(Ce){this.active<this.concurrent?this._tryNext(Ce):this.buffer.push(Ce)}_tryNext(Ce){let re;const he=this.index++;try{re=this.project(Ce,he)}catch(_e){return void this.destination.error(_e)}this.active++,this._innerSub(re)}_innerSub(Ce){const re=new te.IY(this),he=this.destination;he.add(re);const _e=(0,te.ft)(Ce,re);_e!==re&&he.add(_e)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(Ce){this.destination.next(Ce)}notifyComplete(){const Ce=this.buffer;this.active--,Ce.length>0?this._next(Ce.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(en,it,F)=>{"use strict";F.d(it,{ht:()=>he,QV:()=>Ce});var y=F(7393),A=F(9193),te=F(5917),ke=F(8891);class L{constructor(we,ht,Ae){this.kind=we,this.value=ht,this.error=Ae,this.hasValue="N"===we}observe(we){switch(this.kind){case"N":return we.next&&we.next(this.value);case"E":return we.error&&we.error(this.error);case"C":return we.complete&&we.complete()}}do(we,ht,Ae){switch(this.kind){case"N":return we&&we(this.value);case"E":return ht&&ht(this.error);case"C":return Ae&&Ae()}}accept(we,ht,Ae){return we&&"function"==typeof we.next?this.observe(we):this.do(we,ht,Ae)}toObservable(){switch(this.kind){case"N":return(0,te.of)(this.value);case"E":return le=this.error,new ke.y(ht=>ht.error(le));case"C":return(0,A.c)()}var le;throw new Error("unexpected notification kind value")}static createNext(we){return void 0!==we?new L("N",we):L.undefinedValueNotification}static createError(we){return new L("E",void 0,we)}static createComplete(){return L.completeNotification}}function Ce(le,we=0){return function(Ae){return Ae.lift(new re(le,we))}}L.completeNotification=new L("C"),L.undefinedValueNotification=new L("N",void 0);class re{constructor(we,ht=0){this.scheduler=we,this.delay=ht}call(we,ht){return ht.subscribe(new he(we,this.scheduler,this.delay))}}class he extends y.L{constructor(we,ht,Ae=0){super(we),this.scheduler=ht,this.delay=Ae}static dispatch(we){const{notification:ht,destination:Ae}=we;ht.observe(Ae),this.unsubscribe()}scheduleMessage(we){this.destination.add(this.scheduler.schedule(he.dispatch,this.delay,new _e(we,this.destination)))}_next(we){this.scheduleMessage(L.createNext(we))}_error(we){this.scheduleMessage(L.createError(we)),this.unsubscribe()}_complete(){this.scheduleMessage(L.createComplete()),this.unsubscribe()}}class _e{constructor(we,ht){this.notification=we,this.destination=ht}}},1307:(en,it,F)=>{"use strict";F.d(it,{x:()=>A});var y=F(7393);function A(){return function(Q){return Q.lift(new te(Q))}}class te{constructor(Q){this.connectable=Q}call(Q,ye){const{connectable:L}=this;L._refCount++;const Ce=new ke(Q,L),re=ye.subscribe(Ce);return Ce.closed||(Ce.connection=L.connect()),re}}class ke extends y.L{constructor(Q,ye){super(Q),this.connectable=ye}_unsubscribe(){const{connectable:Q}=this;if(!Q)return void(this.connection=null);this.connectable=null;const ye=Q._refCount;if(ye<=0)return void(this.connection=null);if(Q._refCount=ye-1,ye>1)return void(this.connection=null);const{connection:L}=this,Ce=Q._connection;this.connection=null,Ce&&(!L||Ce===L)&&Ce.unsubscribe()}}},2145:(en,it,F)=>{"use strict";F.d(it,{R:()=>A});var y=F(7393);function A(oe,Q){let ye=!1;return arguments.length>=2&&(ye=!0),function(Ce){return Ce.lift(new te(oe,Q,ye))}}class te{constructor(Q,ye,L=!1){this.accumulator=Q,this.seed=ye,this.hasSeed=L}call(Q,ye){return ye.subscribe(new ke(Q,this.accumulator,this.seed,this.hasSeed))}}class ke extends y.L{constructor(Q,ye,L,Ce){super(Q),this.accumulator=ye,this._seed=L,this.hasSeed=Ce,this.index=0}get seed(){return this._seed}set seed(Q){this.hasSeed=!0,this._seed=Q}_next(Q){if(this.hasSeed)return this._tryNext(Q);this.seed=Q,this.destination.next(Q)}_tryNext(Q){const ye=this.index++;let L;try{L=this.accumulator(this.seed,Q,ye)}catch(Ce){this.destination.error(Ce)}this.seed=L,this.destination.next(L)}}},8819:(en,it,F)=>{"use strict";F.d(it,{B:()=>ye});var y=F(2441);var ke=F(1307),oe=F(9765);function Q(){return new oe.xQ}function ye(){return L=>(0,ke.x)()(function(L,Ce){return function(he){let _e;_e="function"==typeof L?L:function(){return L};const le=Object.create(he,y.N);return le.source=he,le.subjectFactory=_e,le}}(Q)(L))}},9761:(en,it,F)=>{"use strict";F.d(it,{O:()=>te});var y=F(8071),A=F(4869);function te(...ke){const oe=ke[ke.length-1];return(0,A.K)(oe)?(ke.pop(),Q=>(0,y.z)(ke,Q,oe)):Q=>(0,y.z)(ke,Q)}},3101:(en,it,F)=>{"use strict";F.d(it,{R:()=>Ze});var y=F(8891);let A=1;const te=Promise.resolve(),ke={};function oe(ft){return ft in ke&&(delete ke[ft],!0)}const Q={setImmediate(ft){const Se=A++;return ke[Se]=!0,te.then(()=>oe(Se)&&ft()),Se},clearImmediate(ft){oe(ft)}};var L=F(6465),re=F(6102);const le=new class extends re.v{flush(Se){this.active=!0,this.scheduled=void 0;const{actions:Ue}=this;let gt,ut=-1,$t=Ue.length;Se=Se||Ue.shift();do{if(gt=Se.execute(Se.state,Se.delay))break}while(++ut<$t&&(Se=Ue.shift()));if(this.active=!1,gt){for(;++ut<$t&&(Se=Ue.shift());)Se.unsubscribe();throw gt}}}(class extends L.o{constructor(Se,Ue){super(Se,Ue),this.scheduler=Se,this.work=Ue}requestAsyncId(Se,Ue,gt=0){return null!==gt&&gt>0?super.requestAsyncId(Se,Ue,gt):(Se.actions.push(this),Se.scheduled||(Se.scheduled=Q.setImmediate(Se.flush.bind(Se,null))))}recycleAsyncId(Se,Ue,gt=0){if(null!==gt&&gt>0||null===gt&&this.delay>0)return super.recycleAsyncId(Se,Ue,gt);0===Se.actions.length&&(Q.clearImmediate(Ue),Se.scheduled=void 0)}});var we=F(9796);class Ae extends y.y{constructor(Se,Ue=0,gt=le){var ft;super(),this.source=Se,this.delayTime=Ue,this.scheduler=gt,(!(!(0,we.k)(ft=Ue)&&ft-parseFloat(ft)+1>=0)||Ue<0)&&(this.delayTime=0),(!gt||"function"!=typeof gt.schedule)&&(this.scheduler=le)}static create(Se,Ue=0,gt=le){return new Ae(Se,Ue,gt)}static dispatch(Se){const{source:Ue,subscriber:gt}=Se;return this.add(Ue.subscribe(gt))}_subscribe(Se){return this.scheduler.schedule(Ae.dispatch,this.delayTime,{source:this.source,subscriber:Se})}}function Ze(ft,Se=0){return function(gt){return gt.lift(new Ge(ft,Se))}}class Ge{constructor(Se,Ue){this.scheduler=Se,this.delay=Ue}call(Se,Ue){return new Ae(Ue,this.delay,this.scheduler).subscribe(Se)}}},3190:(en,it,F)=>{"use strict";F.d(it,{w:()=>ke});var y=F(8002),A=F(4402),te=F(5345);function ke(ye,L){return"function"==typeof L?Ce=>Ce.pipe(ke((re,he)=>(0,A.D)(ye(re,he)).pipe((0,y.U)((_e,le)=>L(re,_e,he,le))))):Ce=>Ce.lift(new oe(ye))}class oe{constructor(L){this.project=L}call(L,Ce){return Ce.subscribe(new Q(L,this.project))}}class Q extends te.Ds{constructor(L,Ce){super(L),this.project=Ce,this.index=0}_next(L){let Ce;const re=this.index++;try{Ce=this.project(L,re)}catch(he){return void this.destination.error(he)}this._innerSub(Ce)}_innerSub(L){const Ce=this.innerSubscription;Ce&&Ce.unsubscribe();const re=new te.IY(this),he=this.destination;he.add(re),this.innerSubscription=(0,te.ft)(L,re),this.innerSubscription!==re&&he.add(this.innerSubscription)}_complete(){const{innerSubscription:L}=this;(!L||L.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(L){this.destination.next(L)}}},5257:(en,it,F)=>{"use strict";F.d(it,{q:()=>ke});var y=F(7393),A=F(7108),te=F(9193);function ke(ye){return L=>0===ye?(0,te.c)():L.lift(new oe(ye))}class oe{constructor(L){if(this.total=L,this.total<0)throw new A.W}call(L,Ce){return Ce.subscribe(new Q(L,this.total))}}class Q extends y.L{constructor(L,Ce){super(L),this.total=Ce,this.count=0}_next(L){const Ce=this.total,re=++this.count;re<=Ce&&(this.destination.next(L),re===Ce&&(this.destination.complete(),this.unsubscribe()))}}},3342:(en,it,F)=>{"use strict";F.d(it,{b:()=>ke});var y=F(7393);function A(){}var te=F(9105);function ke(ye,L,Ce){return function(he){return he.lift(new oe(ye,L,Ce))}}class oe{constructor(L,Ce,re){this.nextOrObserver=L,this.error=Ce,this.complete=re}call(L,Ce){return Ce.subscribe(new Q(L,this.nextOrObserver,this.error,this.complete))}}class Q extends y.L{constructor(L,Ce,re,he){super(L),this._tapNext=A,this._tapError=A,this._tapComplete=A,this._tapError=re||A,this._tapComplete=he||A,(0,te.m)(Ce)?(this._context=this,this._tapNext=Ce):Ce&&(this._context=Ce,this._tapNext=Ce.next||A,this._tapError=Ce.error||A,this._tapComplete=Ce.complete||A)}_next(L){try{this._tapNext.call(this._context,L)}catch(Ce){return void this.destination.error(Ce)}this.destination.next(L)}_error(L){try{this._tapError.call(this._context,L)}catch(Ce){return void this.destination.error(Ce)}this.destination.error(L)}_complete(){try{this._tapComplete.call(this._context)}catch(L){return void this.destination.error(L)}return this.destination.complete()}}},4635:(en,it,F)=>{"use strict";F.d(it,{T:()=>te});var y=F(3410),A=F(7393);function te(ye=Q){return L=>L.lift(new ke(ye))}class ke{constructor(L){this.errorFactory=L}call(L,Ce){return Ce.subscribe(new oe(L,this.errorFactory))}}class oe extends A.L{constructor(L,Ce){super(L),this.errorFactory=Ce,this.hasValue=!1}_next(L){this.hasValue=!0,this.destination.next(L)}_complete(){if(this.hasValue)return this.destination.complete();{let L;try{L=this.errorFactory()}catch(Ce){L=Ce}this.destination.error(L)}}}function Q(){return new y.K}},4087:(en,it,F)=>{"use strict";F.d(it,{r:()=>te});var y=F(8891),A=F(5319);function te(ke,oe){return new y.y(Q=>{const ye=new A.w;let L=0;return ye.add(oe.schedule(function(){L!==ke.length?(Q.next(ke[L++]),Q.closed||ye.add(this.schedule())):Q.complete()})),ye})}},6465:(en,it,F)=>{"use strict";F.d(it,{o:()=>te});var y=F(5319);class A extends y.w{constructor(oe,Q){super()}schedule(oe,Q=0){return this}}class te extends A{constructor(oe,Q){super(oe,Q),this.scheduler=oe,this.work=Q,this.pending=!1}schedule(oe,Q=0){if(this.closed)return this;this.state=oe;const ye=this.id,L=this.scheduler;return null!=ye&&(this.id=this.recycleAsyncId(L,ye,Q)),this.pending=!0,this.delay=Q,this.id=this.id||this.requestAsyncId(L,this.id,Q),this}requestAsyncId(oe,Q,ye=0){return setInterval(oe.flush.bind(oe,this),ye)}recycleAsyncId(oe,Q,ye=0){if(null!==ye&&this.delay===ye&&!1===this.pending)return Q;clearInterval(Q)}execute(oe,Q){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ye=this._execute(oe,Q);if(ye)return ye;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,Q){let L,ye=!1;try{this.work(oe)}catch(Ce){ye=!0,L=!!Ce&&Ce||new Error(Ce)}if(ye)return this.unsubscribe(),L}_unsubscribe(){const oe=this.id,Q=this.scheduler,ye=Q.actions,L=ye.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==L&&ye.splice(L,1),null!=oe&&(this.id=this.recycleAsyncId(Q,oe,null)),this.delay=null}}},6102:(en,it,F)=>{"use strict";F.d(it,{v:()=>A});let y=(()=>{class te{constructor(oe,Q=te.now){this.SchedulerAction=oe,this.now=Q}schedule(oe,Q=0,ye){return new this.SchedulerAction(this,oe).schedule(ye,Q)}}return te.now=()=>Date.now(),te})();class A extends y{constructor(ke,oe=y.now){super(ke,()=>A.delegate&&A.delegate!==this?A.delegate.now():oe()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ke,oe=0,Q){return A.delegate&&A.delegate!==this?A.delegate.schedule(ke,oe,Q):super.schedule(ke,oe,Q)}flush(ke){const{actions:oe}=this;if(this.active)return void oe.push(ke);let Q;this.active=!0;do{if(Q=ke.execute(ke.state,ke.delay))break}while(ke=oe.shift());if(this.active=!1,Q){for(;ke=oe.shift();)ke.unsubscribe();throw Q}}}},3637:(en,it,F)=>{"use strict";F.d(it,{z:()=>te});var y=F(6465);const te=new(F(6102).v)(y.o)},7771:(en,it,F)=>{"use strict";F.d(it,{c:()=>Q,N:()=>oe});var y=F(6465),te=F(6102);const oe=new class extends te.v{}(class extends y.o{constructor(L,Ce){super(L,Ce),this.scheduler=L,this.work=Ce}schedule(L,Ce=0){return Ce>0?super.schedule(L,Ce):(this.delay=Ce,this.state=L,this.scheduler.flush(this),this)}execute(L,Ce){return Ce>0||this.closed?super.execute(L,Ce):this._execute(L,Ce)}requestAsyncId(L,Ce,re=0){return null!==re&&re>0||null===re&&this.delay>0?super.requestAsyncId(L,Ce,re):L.flush(this)}}),Q=oe},377:(en,it,F)=>{"use strict";F.d(it,{hZ:()=>A});const A="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(en,it,F)=>{"use strict";F.d(it,{L:()=>y});const y="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(en,it,F)=>{"use strict";F.d(it,{b:()=>y});const y="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7108:(en,it,F)=>{"use strict";F.d(it,{W:()=>A});const A=(()=>{function te(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return te.prototype=Object.create(Error.prototype),te})()},3410:(en,it,F)=>{"use strict";F.d(it,{K:()=>A});const A=(()=>{function te(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return te.prototype=Object.create(Error.prototype),te})()},7971:(en,it,F)=>{"use strict";F.d(it,{N:()=>A});const A=(()=>{function te(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return te.prototype=Object.create(Error.prototype),te})()},4449:(en,it,F)=>{"use strict";function y(A){setTimeout(()=>{throw A},0)}F.d(it,{z:()=>y})},4487:(en,it,F)=>{"use strict";function y(A){return A}F.d(it,{y:()=>y})},9796:(en,it,F)=>{"use strict";F.d(it,{k:()=>y});const y=Array.isArray||(A=>A&&"number"==typeof A.length)},9489:(en,it,F)=>{"use strict";F.d(it,{z:()=>y});const y=A=>A&&"number"==typeof A.length&&"function"!=typeof A},9105:(en,it,F)=>{"use strict";function y(A){return"function"==typeof A}F.d(it,{m:()=>y})},1555:(en,it,F)=>{"use strict";function y(A){return null!==A&&"object"==typeof A}F.d(it,{K:()=>y})},4072:(en,it,F)=>{"use strict";function y(A){return!!A&&"function"!=typeof A.subscribe&&"function"==typeof A.then}F.d(it,{t:()=>y})},4869:(en,it,F)=>{"use strict";function y(A){return A&&"function"==typeof A.schedule}F.d(it,{K:()=>y})},4022:(en,it,F)=>{"use strict";F.d(it,{z:()=>A,U:()=>te});var y=F(4487);function A(...ke){return te(ke)}function te(ke){return 0===ke.length?y.y:1===ke.length?ke[0]:function(Q){return ke.reduce((ye,L)=>L(ye),Q)}}},7444:(en,it,F)=>{"use strict";F.d(it,{s:()=>he});var y=F(5015),A=F(4449),ke=F(377),Q=F(6554),L=F(9489),Ce=F(4072),re=F(1555);const he=_e=>{if(_e&&"function"==typeof _e[Q.L])return(_e=>le=>{const we=_e[Q.L]();if("function"!=typeof we.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return we.subscribe(le)})(_e);if((0,L.z)(_e))return(0,y.V)(_e);if((0,Ce.t)(_e))return(_e=>le=>(_e.then(we=>{le.closed||(le.next(we),le.complete())},we=>le.error(we)).then(null,A.z),le))(_e);if(_e&&"function"==typeof _e[ke.hZ])return(_e=>le=>{const we=_e[ke.hZ]();for(;;){let ht;try{ht=we.next()}catch(Ae){return le.error(Ae),le}if(ht.done){le.complete();break}if(le.next(ht.value),le.closed)break}return"function"==typeof we.return&&le.add(()=>{we.return&&we.return()}),le})(_e);{const we=`You provided ${(0,re.K)(_e)?"an invalid object":`'${_e}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(we)}}},5015:(en,it,F)=>{"use strict";F.d(it,{V:()=>y});const y=A=>te=>{for(let ke=0,oe=A.length;ke<oe&&!te.closed;ke++)te.next(A[ke]);te.complete()}},509:(en,it,F)=>{"use strict";F.d(it,{D:()=>oe});var y=F(7393);class A extends y.L{constructor(ye,L,Ce){super(),this.parent=ye,this.outerValue=L,this.outerIndex=Ce,this.index=0}_next(ye){this.parent.notifyNext(this.outerValue,ye,this.outerIndex,this.index++,this)}_error(ye){this.parent.notifyError(ye,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var te=F(7444),ke=F(8891);function oe(Q,ye,L,Ce,re=new A(Q,L,Ce)){if(!re.closed)return ye instanceof ke.y?ye.subscribe(re):(0,te.s)(ye)(re)}},994:(en,it,F)=>{"use strict";F.d(it,{r:()=>re});var y=F(8945),A=F(7716),te=F(3071),ke=F(7556),oe=F(174),Q=F(8583);function ye(he,_e){1&he&&(A.TgZ(0,"ion-buttons",3),A.TgZ(1,"ion-menu-button"),A._UZ(2,"ion-icon",4),A.qZA(),A.qZA())}function L(he,_e){1&he&&(A.TgZ(0,"ion-buttons",3),A._UZ(1,"ion-back-button",5),A.qZA())}function Ce(he,_e){if(1&he){const le=A.EpF();A.TgZ(0,"ion-menu",6,7),A.TgZ(2,"ion-header"),A.TgZ(3,"ion-toolbar",0),A.TgZ(4,"ion-title"),A._uU(5,"User Information"),A.qZA(),A.qZA(),A.qZA(),A.TgZ(6,"ion-content"),A.TgZ(7,"div",8),A.TgZ(8,"div",9),A.TgZ(9,"div",10),A._UZ(10,"ion-icon",11),A.qZA(),A.TgZ(11,"div",12),A.TgZ(12,"div",13),A._uU(13),A.qZA(),A.TgZ(14,"div",14),A._uU(15),A.qZA(),A.qZA(),A.qZA(),A.TgZ(16,"div",15),A.TgZ(17,"ion-button",16),A.NdJ("click",function(){return A.CHM(le),A.oxw().navigateToSettings()}),A._uU(18,"App Settings"),A.qZA(),A.TgZ(19,"ion-button",17),A.NdJ("click",function(){return A.CHM(le),A.oxw().logout()}),A._uU(20,"Logout"),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA()}if(2&he){const le=A.oxw();A.xp6(13),A.Oqu(le.user.displayName),A.xp6(2),A.Oqu(le.user.email)}}let re=(()=>{class he{constructor(le,we,ht){this.userSvc=le,this.auth=we,this.router=ht}ngOnInit(){this.user=this.userSvc.getUserDataFromLocalStorage(),this.user.displayName||(this.user.displayName="",this.userSvc.getUserInfo(this.user.id).subscribe(le=>{this.user.displayName=le.displayName,this.userSvc.saveUserToLocalStorage(this.user)}))}logout(){this.auth.logout().then(()=>{this.router.navigateByUrl("/login",{replaceUrl:!0})})}navigateToSettings(){this.router.navigateByUrl("/home/settings"),this.menu.toggle()}}return he.\u0275fac=function(le){return new(le||he)(A.Y36(te.K),A.Y36(ke.e),A.Y36(oe.F0))},he.\u0275cmp=A.Xpm({type:he,selectors:[["app-nav"]],viewQuery:function(le,we){if(1&le&&A.Gf(y.z0,5),2&le){let ht;A.iGM(ht=A.CRH())&&(we.menu=ht.first)}},inputs:{pageTitle:"pageTitle",showBackButton:"showBackButton"},decls:7,vars:4,consts:[["color","primary"],["slot","start",4,"ngIf"],["side","start","menuId","first","contentId","main",4,"ngIf"],["slot","start"],["name","person-circle-outline","size","large"],["defaultHref","/home"],["side","start","menuId","first","contentId","main"],["menu",""],[1,"nav-content"],[1,"user-container"],[1,"avatar"],["name","person-circle-outline",1,"avatar-alt"],[1,"user-info"],[1,"display-name"],[1,"email"],[1,"button-container"],["color","primary",3,"click"],["color","danger",3,"click"]],template:function(le,we){1&le&&(A.TgZ(0,"ion-header"),A.TgZ(1,"ion-toolbar",0),A.YNc(2,ye,3,0,"ion-buttons",1),A.YNc(3,L,2,0,"ion-buttons",1),A.TgZ(4,"ion-title"),A._uU(5),A.qZA(),A.qZA(),A.qZA(),A.YNc(6,Ce,21,2,"ion-menu",2)),2&le&&(A.xp6(2),A.Q6J("ngIf",we.user&&!we.showBackButton),A.xp6(1),A.Q6J("ngIf",we.showBackButton),A.xp6(2),A.Oqu(we.pageTitle),A.xp6(1),A.Q6J("ngIf",we.user&&!we.showBackButton))},directives:[y.Gu,y.sr,Q.O5,y.wd,y.Sm,y.fG,y.gu,y.oU,y.cs,y.z0,y.W2,y.YG],styles:[".nav-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:calc(100vh - 60px);align-items:center}.nav-content[_ngcontent-%COMP%]   .user-container[_ngcontent-%COMP%]{padding:3rem 1rem;text-align:center}.nav-content[_ngcontent-%COMP%]   .user-container[_ngcontent-%COMP%]   .avatar-alt[_ngcontent-%COMP%]{font-size:5em}.nav-content[_ngcontent-%COMP%]   .user-container[_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%]{font-weight:500;font-size:1.5em}.nav-content[_ngcontent-%COMP%]   .user-container[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{color:var(--ion-color-secondary)}.nav-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:100%}.nav-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:last-child{margin-bottom:3rem}"]}),he})()},6175:(en,it,F)=>{"use strict";F.d(it,{q:()=>ke});var y=F(8583),A=F(8945),te=F(7716);let ke=(()=>{class oe{}return oe.\u0275fac=function(ye){return new(ye||oe)},oe.\u0275mod=te.oAB({type:oe}),oe.\u0275inj=te.cJS({imports:[[y.ez,A.Pc]]}),oe})()},8176:(en,it,F)=>{"use strict";F.r(it),F.d(it,{HomeModule:()=>dt});var y=F(8583),A=F(8945),te=F(174),ke=F(8239),oe=F(5257);const ye=(0,F(3796).fo)("TextToSpeech",{web:()=>F.e(322).then(F.bind(F,322)).then(nt=>new nt.TextToSpeechWeb)});"speechSynthesis"in window&&(window,console.log("using window.speechSynthesis"));var L=F(7716),Ce=F(547),re=F(3071),he=F(994);function _e(nt,At){if(1&nt&&(L.TgZ(0,"ion-select-option",8),L._uU(1),L.qZA()),2&nt){const Ie=At.$implicit;L.Q6J("value",Ie.index),L.xp6(1),L.hij(" ",Ie.default?"(Default) "+Ie.name:Ie.name," ")}}function le(nt,At){if(1&nt){const Ie=L.EpF();L.TgZ(0,"ion-select",6),L.NdJ("ionChange",function(Ve){return L.CHM(Ie),L.oxw().handleSelectVoiceChange(Ve)}),L.YNc(1,_e,2,2,"ion-select-option",7),L.qZA()}if(2&nt){const Ie=L.oxw();L.Q6J("value",Ie.selectedVoice),L.xp6(1),L.Q6J("ngForOf",Ie.voices)}}function we(nt,At){if(1&nt&&(L.TgZ(0,"ion-select-option",8),L._uU(1),L.qZA()),2&nt){const Ie=At.$implicit;L.Q6J("value",Ie.lang),L.xp6(1),L.hij(" ",Ie.default?"(Default) "+Ie.name:Ie.name," ")}}function ht(nt,At){if(1&nt){const Ie=L.EpF();L.TgZ(0,"ion-select",6),L.NdJ("ionChange",function(Ve){return L.CHM(Ie),L.oxw().handleSelectVoiceChange(Ve)}),L.YNc(1,we,2,2,"ion-select-option",7),L.qZA()}if(2&nt){const Ie=L.oxw();L.Q6J("value",Ie.selectedVoice),L.xp6(1),L.Q6J("ngForOf",Ie.voices)}}let Ae=(()=>{class nt{constructor(Ie,Ye,Ve){this.prefSvc=Ie,this.userSvc=Ye,this.platform=Ve}ngOnInit(){this.isIOS=this.platform.is("ios"),this.userInfo=this.userSvc.getUserDataFromLocalStorage(),this.prefSvc.getPreferencesFromFirebase(this.userInfo.id).pipe((0,oe.q)(1)).subscribe(Ie=>{this.preferences=Ie,this.selectedVoice=this.isIOS?this.preferences.iosVoiceProfile:this.preferences.androidVoiceProfile,this.loadSettings()}),ye.getSupportedVoices().then(Ie=>{this.voices=this.getEnglishVoices(Ie.voices),this.selectedVoice=this.isIOS?this.preferences?this.preferences.iosVoiceProfile:"en-US":this.preferences?this.preferences.androidVoiceProfile:0})}loadSettings(){var Ie=this;return(0,ke.Z)(function*(){Ie.darkThemeEnabled="dark"==Ie.preferences.theme,Ie.minVolume=Ie.preferences.minVolumeToPlayAudio||10,Ie.speechRate=Ie.preferences.speechRate||100})()}getEnglishVoices(Ie){return Ie.forEach((Ye,Ve)=>{Ye.index=Ve}),Ie.filter(Ye=>Ye.lang.startsWith("en"))}getVoicesForWeb(){return(0,ke.Z)(function*(){return new Promise(Ie=>{void 0!==window.speechSynthesis.onvoiceschanged&&setTimeout(()=>{const Ve=window.speechSynthesis.getVoices();Ie(Ve)},1e3)})})()}handleThemeChange(Ie){var Ye=this;return(0,ke.Z)(function*(){Ie.detail.checked?(Ye.preferences.theme="dark",Ye.darkThemeEnabled=!0):(Ye.preferences.theme="light",Ye.darkThemeEnabled=!1),document.body.setAttribute("color-theme",Ye.preferences.theme)})()}handleSelectVoiceChange(Ie){this.platform.is("ios")?this.preferences.iosVoiceProfile=Ie.detail.value:this.preferences.androidVoiceProfile=Ie.detail.value,this.selectedVoice=Ie.detail.value}handleMinVolumeChange(Ie){this.preferences.minVolumeToPlayAudio=Ie.detail.value,this.minVolume=Ie.detail.value}handleSpeechRateChange(Ie){this.preferences.speechRate=Ie.detail.value,this.speechRate=Ie.detail.value}ngOnDestroy(){this.prefSvc.setLocalPreferences(this.preferences),this.prefSvc.savePreference(this.userInfo.id,this.preferences)}}return nt.\u0275fac=function(Ie){return new(Ie||nt)(L.Y36(Ce.O),L.Y36(re.K),L.Y36(A.t4))},nt.\u0275cmp=L.Xpm({type:nt,selectors:[["app-settings"]],decls:20,vars:8,consts:[["pageTitle","Preferences",3,"showBackButton"],[1,"ion-padding-vertical"],["color","light","slot","end",3,"checked","ionChange"],["placeholder","Loading...",3,"value","ionChange",4,"ngIf"],["position","stacked"],["size","small",3,"value","pin","ionChange"],["placeholder","Loading...",3,"value","ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(Ie,Ye){1&Ie&&(L._UZ(0,"app-nav",0),L.TgZ(1,"ion-content"),L.TgZ(2,"ion-list",1),L.TgZ(3,"ion-item"),L.TgZ(4,"ion-label"),L._uU(5,"Enable Dark Mode"),L.qZA(),L.TgZ(6,"ion-toggle",2),L.NdJ("ionChange",function(Fe){return Ye.handleThemeChange(Fe)}),L.qZA(),L.qZA(),L.TgZ(7,"ion-item"),L.TgZ(8,"ion-label"),L._uU(9,"Playback Voice"),L.qZA(),L.YNc(10,le,2,2,"ion-select",3),L.YNc(11,ht,2,2,"ion-select",3),L.qZA(),L.TgZ(12,"ion-item"),L.TgZ(13,"ion-label",4),L._uU(14,"Minimum volume to play audio comments"),L.qZA(),L.TgZ(15,"ion-range",5),L.NdJ("ionChange",function(Fe){return Ye.handleMinVolumeChange(Fe)}),L.qZA(),L.qZA(),L.TgZ(16,"ion-item"),L.TgZ(17,"ion-label",4),L._uU(18,"Speech Speed Rate"),L.qZA(),L.TgZ(19,"ion-range",5),L.NdJ("ionChange",function(Fe){return Ye.handleSpeechRateChange(Fe)}),L.qZA(),L.qZA(),L.qZA(),L.qZA()),2&Ie&&(L.Q6J("showBackButton",!0),L.xp6(6),L.Q6J("checked",Ye.darkThemeEnabled),L.xp6(4),L.Q6J("ngIf",!Ye.isIOS),L.xp6(1),L.Q6J("ngIf",Ye.isIOS),L.xp6(4),L.Q6J("value",Ye.minVolume)("pin",!0),L.xp6(4),L.Q6J("value",Ye.speechRate)("pin",!0))},directives:[he.r,A.W2,A.q_,A.Ie,A.Q$,A.ho,A.w,y.O5,A.QI,A.I_,A.t9,y.sg,A.n0],styles:["ion-select[_ngcontent-%COMP%]{font-size:.85em}"]}),nt})();var Ze=F(1796),Ge=F(3792),ft=F(7556);function Se(nt,At){1&nt&&L._UZ(0,"ion-icon",3)}let Ue=(()=>{class nt{constructor(Ie,Ye,Ve,Fe){this.commentService=Ie,this.userService=Ye,this.alertController=Ve,this.platform=Fe}ngOnInit(){this.comment.speak&&this.processMessage()}getTimeStamp(){if(null==this.comment.createdTime)return"Saving...";let Ie=this.comment.createdTime.seconds,Ye="";this.comment.updatedTime&&this.comment.textEdited&&(Ye="Edited ",Ie=this.comment.updatedTime.seconds);const Ve=new Date(1e3*Ie),Fe=Ve.getDate(),tt=Ve.getMonth();return`${Ye}${Ve.getFullYear()}-${Fe}-${tt+1} ${Ve.getHours()}:${Ve.getMinutes()}`}processMessage(){var Ie=this;return(0,ke.Z)(function*(){const Ye=(yield(yield Ze.u.get({key:"minVolumeToPlayAudio"})).value)||"10",Ve=yield(yield ye.getSystemVolume()).volume;console.log(Ve),Ve>parseInt(Ye,10)?yield Ie.speakMessage():yield Ie.showAlertMessage(Ie.comment.content)})()}speakMessage(){var Ie=this;return(0,ke.Z)(function*(){const Ye=(yield(yield Ze.u.get({key:"speechRate"})).value)||"100";try{const Ve={text:Ie.comment.content,lang:"en-US",rate:parseInt(Ye,10)/100,pitch:1,volume:1,category:"ambient"};if(Ie.platform.is("ios")){const St=(yield(yield Ze.u.get({key:"iosVoiceProfile"})).value)||"en-US";Ve.lang=St}else{const St=(yield(yield Ze.u.get({key:"androidVoiceProfile"})).value)||"0";Ve.voice=parseInt(St,10)}console.log(Ve),yield ye.speak(Ve);const Fe=Ie.userService.getUserDataFromLocalStorage(),tt=Object.assign({},Ie.comment);delete tt.id,Ie.commentService.updateComment(Fe.id,Ie.comment.id,Object.assign(Object.assign({},tt),{speak:!1}),!1)}catch(Ve){console.log(Ve)}})()}showAlertMessage(Ie,Ye=1e4){var Ve=this;return(0,ke.Z)(function*(){const Fe=yield Ve.alertController.create({header:"You received an important message",message:Ie,buttons:["OK"]});yield Fe.present();const tt=setTimeout((0,ke.Z)(function*(){yield Fe.dismiss(),clearTimeout(tt)}),Ye)})()}}return nt.\u0275fac=function(Ie){return new(Ie||nt)(L.Y36(Ge.O),L.Y36(re.K),L.Y36(A.Br),L.Y36(A.t4))},nt.\u0275cmp=L.Xpm({type:nt,selectors:[["app-comment"]],inputs:{comment:"comment",commentId:"commentId",textToSpeechAvailable:"textToSpeechAvailable"},decls:6,vars:4,consts:[[3,"ngClass"],[1,"metadata"],["name","volume-medium-outline",4,"ngIf"],["name","volume-medium-outline"]],template:function(Ie,Ye){1&Ie&&(L.TgZ(0,"div",0),L._uU(1),L.TgZ(2,"div",1),L.YNc(3,Se,1,0,"ion-icon",2),L.TgZ(4,"p"),L._uU(5),L.qZA(),L.qZA(),L.qZA()),2&Ie&&(L.Q6J("ngClass",Ye.comment.speak?"comment-item apply-dark-theme-background speak":"comment-item apply-dark-theme-background"),L.xp6(1),L.hij(" ",Ye.comment.content," "),L.xp6(2),L.Q6J("ngIf",Ye.comment.speak),L.xp6(2),L.Oqu(Ye.getTimeStamp()))},directives:[y.mk,y.O5,A.gu],styles:[".comment-item[_ngcontent-%COMP%]{width:100%;background:#f1f1f1;padding:1rem 1em .5em;font-size:1em;border-radius:14px;white-space:pre-wrap}.comment-item.speak[_ngcontent-%COMP%]{background:#d3f2f5}.comment-item[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]{font-size:.75em;display:flex;align-items:center;justify-content:space-between;padding:0;margin:.5rem 0}.comment-item[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{justify-self:flex-end;flex-grow:1;text-align:right;margin:0}"]}),nt})();const gt=["scrollContent"];function ut(nt,At){1&nt&&(L.TgZ(0,"ion-item",12),L._UZ(1,"ion-spinner"),L.qZA())}function $t(nt,At){1&nt&&(L.TgZ(0,"ion-item"),L._uU(1,"You don't have any comments yet "),L.qZA())}function E(nt,At){if(1&nt){const Ie=L.EpF();L.TgZ(0,"ion-item-sliding",13),L.TgZ(1,"ion-item",13),L._UZ(2,"app-comment",14),L.qZA(),L.TgZ(3,"ion-item-options",15),L.TgZ(4,"ion-item-option",16),L.NdJ("click",function(){const Fe=L.CHM(Ie).$implicit;return L.oxw().editComment(Fe)}),L._UZ(5,"ion-icon",17),L.qZA(),L.qZA(),L.qZA()}if(2&nt){const Ie=At.$implicit,Ye=L.oxw();L.xp6(2),L.Q6J("textToSpeechAvailable",Ye.textToSpeechSupport)("commentId",Ie.id)("comment",Ie)}}function pt(nt,At){if(1&nt){const Ie=L.EpF();L.TgZ(0,"div",18),L.TgZ(1,"ion-button",19),L.NdJ("click",function(){return L.CHM(Ie),L.oxw().saveComment()}),L._UZ(2,"ion-icon",20),L.qZA(),L.TgZ(3,"ion-button",19),L.NdJ("click",function(){return L.CHM(Ie),L.oxw().saveComment(!0)}),L._UZ(4,"ion-icon",21),L.qZA(),L.qZA()}}function Dt(nt,At){if(1&nt){const Ie=L.EpF();L.TgZ(0,"div",18),L.TgZ(1,"ion-button",22),L.NdJ("click",function(){return L.CHM(Ie),L.oxw().saveComment()}),L._uU(2," Save "),L.qZA(),L.TgZ(3,"ion-button",22),L.NdJ("click",function(){return L.CHM(Ie),L.oxw().cancelEdit()}),L._uU(4," Cancel "),L.qZA(),L.qZA()}}const be=[{path:"",component:(()=>{class nt{constructor(Ie,Ye,Ve,Fe,tt){this.cmtSvc=Ie,this.auth=Ye,this.userSvc=Ve,this.prefSvc=Fe,this.router=tt,this.showEditButtons=!1,this.showSpinner=!0,this.textToSpeechSupport=!1}ngOnInit(){this.user=this.userSvc.getUserDataFromLocalStorage(),this.user.displayName||(this.user.displayName="",this.userSvc.getUserInfo(this.user.id).subscribe(Ie=>{this.user.displayName=Ie.displayName,this.userSvc.saveUserToLocalStorage(this.user)})),this.cmtSvc.getComments(this.user.id).subscribe(Ie=>{this.comments=Ie,this.showSpinner=!1,this.scrollToBottomOnInit()}),this.initializeSettings()}initializeSettings(){var Ie=this;return(0,ke.Z)(function*(){if(Ie.prefSvc.getPreferencesFromFirebase(Ie.user.id).subscribe(function(){var Ye=(0,ke.Z)(function*(Ve){Ve?Ie.prefSvc.setLocalPreferences(Ve):yield Ie.prefSvc.setDefaultPrefs(Ie.user.id)});return function(Ve){return Ye.apply(this,arguments)}}()),!document.body.getAttribute("color-theme")){const Ye=yield(yield Ze.u.get({key:"theme"})).value;document.body.setAttribute("color-theme",Ye||"")}})()}scrollToBottomOnInit(){const Ie=setTimeout(()=>{this.scrollContent.scrollToBottom(500),clearTimeout(Ie)},300)}saveComment(Ie=!1){if(console.log(ye.getSystemVolume()),null!==this.commentText&&""!==this.commentText){const Ye={content:this.commentText,speak:Ie};this.commentId&&null!==this.commentText?this.cmtSvc.updateComment(this.user.id,this.commentId,Ye,!0):this.cmtSvc.addComment(this.user.id,Ye),this.commentText="",this.commentId=null,this.showEditButtons=!1}}handleChange(Ie){this.commentText=Ie.target.innerHTML}editComment(Ie){this.commentId=Ie.id,this.commentText=Ie.content,this.showEditButtons=!0,this.slidingList.closeSlidingItems()}trackByFn(Ie,Ye){return Ye.id}cancelEdit(){this.commentId=null,this.commentText="",this.showEditButtons=!1}}return nt.\u0275fac=function(Ie){return new(Ie||nt)(L.Y36(Ge.O),L.Y36(ft.e),L.Y36(re.K),L.Y36(Ce.O),L.Y36(te.F0))},nt.\u0275cmp=L.Xpm({type:nt,selectors:[["app-home"]],viewQuery:function(Ie,Ye){if(1&Ie&&(L.Gf(A.q_,5),L.Gf(gt,5)),2&Ie){let Ve;L.iGM(Ve=L.CRH())&&(Ye.slidingList=Ve.first),L.iGM(Ve=L.CRH())&&(Ye.scrollContent=Ve.first)}},decls:15,vars:9,consts:[["pageTitle","Trail App"],["id","main",3,"scrollEvents","fullscreen"],["scrollContent",""],["slidingList",""],["class","ion-no-padding","lines","none",4,"ngIf"],[4,"ngIf"],["lines","none",4,"ngFor","ngForOf","ngForTrackBy"],["lines","none",1,"comment-spacer"],[1,"form-container"],[1,"form-row","apply-dark-theme-background"],["placeholder","Enter more information here...",3,"value","change"],["class","edit-btn-container",4,"ngIf"],["lines","none",1,"ion-no-padding"],["lines","none"],[3,"textToSpeechAvailable","commentId","comment"],["side","end"],[3,"click"],["slot","icon-only","name","pencil-outline"],[1,"edit-btn-container"],["shape","circle",3,"click"],["name","add-outline","size","large"],["name","volume-medium-outline"],["size","small",3,"click"]],template:function(Ie,Ye){1&Ie&&(L._UZ(0,"app-nav",0),L.TgZ(1,"ion-content",1,2),L.TgZ(3,"ion-list",null,3),L.YNc(5,ut,2,0,"ion-item",4),L.YNc(6,$t,2,0,"ion-item",5),L.YNc(7,E,6,3,"ion-item-sliding",6),L._UZ(8,"ion-item",7),L.qZA(),L.TgZ(9,"div",8),L.TgZ(10,"form"),L.TgZ(11,"div",9),L.TgZ(12,"ion-textarea",10),L.NdJ("change",function(Fe){return Ye.handleChange(Fe)}),L.qZA(),L.YNc(13,pt,5,0,"div",11),L.YNc(14,Dt,5,0,"div",11),L.qZA(),L.qZA(),L.qZA(),L.qZA()),2&Ie&&(L.xp6(1),L.Q6J("scrollEvents",!0)("fullscreen",!0),L.xp6(4),L.Q6J("ngIf",Ye.showSpinner),L.xp6(1),L.Q6J("ngIf",!(Ye.comments&&0!=Ye.comments.length||Ye.showSpinner)),L.xp6(1),L.Q6J("ngForOf",Ye.comments)("ngForTrackBy",Ye.trackByFn),L.xp6(5),L.s9C("value",Ye.commentText),L.xp6(1),L.Q6J("ngIf",!Ye.showEditButtons),L.xp6(1),L.Q6J("ngIf",Ye.showEditButtons))},directives:[he.r,A.W2,A.q_,y.O5,y.sg,A.Ie,A.g2,A.j9,A.PQ,A.td,Ue,A.IK,A.u8,A.gu,A.YG],styles:[".nav-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:calc(100vh - 60px);align-items:center}.nav-content[_ngcontent-%COMP%]   .user-container[_ngcontent-%COMP%]{padding:3rem 1rem;text-align:center}.nav-content[_ngcontent-%COMP%]   .user-container[_ngcontent-%COMP%]   .avatar-alt[_ngcontent-%COMP%]{font-size:5em}.nav-content[_ngcontent-%COMP%]   .user-container[_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%]{font-weight:500;font-size:1.5em}.nav-content[_ngcontent-%COMP%]   .user-container[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{color:var(--ion-color-secondary)}.nav-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:75%;margin-bottom:3rem}.form-row[_ngcontent-%COMP%]{position:fixed;display:flex;padding:1.5em 1em;align-items:center;width:100%;bottom:0;background-color:#fff;z-index:999}.form-row[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-weight:500}ion-button[shape=circle][_ngcontent-%COMP%]{--border-radius: 50%;width:56px;height:56px}app-comment[_ngcontent-%COMP%]{width:100%}ion-list[_ngcontent-%COMP%]{margin-top:1em}.scroll-container[_ngcontent-%COMP%]{height:calc(100vh - 220px);overflow-y:scroll}.edit-btn-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}ion-spinner[_ngcontent-%COMP%]{margin:2rem auto}ion-item-sliding[_ngcontent-%COMP%]{margin-bottom:1rem}ion-textarea[_ngcontent-%COMP%]{align-self:flex-start}.comment-spacer[_ngcontent-%COMP%]{height:220px}"]}),nt})()},{path:"settings",component:Ae}];let Me=(()=>{class nt{}return nt.\u0275fac=function(Ie){return new(Ie||nt)},nt.\u0275mod=L.oAB({type:nt}),nt.\u0275inj=L.cJS({imports:[[te.Bz.forChild(be)],te.Bz]}),nt})();var et=F(6175);let dt=(()=>{class nt{}return nt.\u0275fac=function(Ie){return new(Ie||nt)},nt.\u0275mod=L.oAB({type:nt}),nt.\u0275inj=L.cJS({imports:[[y.ez,A.Pc,Me,et.q]]}),nt})()},7545:(en,it,F)=>{"use strict";F.r(it),F.d(it,{LoginModule:()=>Se});var y=F(8583),A=F(8945),te=F(665),ke=F(174),oe=F(8239),Q=F(7716),ye=F(7556),L=F(994);function Ce(Ue,gt){1&Ue&&(Q.TgZ(0,"ion-note",10),Q._uU(1,"Email is invalid"),Q.qZA())}function re(Ue,gt){1&Ue&&(Q.TgZ(0,"ion-note",10),Q._uU(1,"Password needs to be 6 characters"),Q.qZA())}function he(Ue,gt){if(1&Ue){const ut=Q.EpF();Q.TgZ(0,"form",3),Q.NdJ("ngSubmit",function(){return Q.CHM(ut),Q.oxw().login()}),Q.TgZ(1,"ion-item",4),Q._UZ(2,"ion-input",5),Q.YNc(3,Ce,2,0,"ion-note",6),Q.qZA(),Q.TgZ(4,"ion-item",4),Q._UZ(5,"ion-input",7),Q.YNc(6,re,2,0,"ion-note",6),Q.qZA(),Q.TgZ(7,"ion-button",8),Q._uU(8," Log in "),Q.qZA(),Q.TgZ(9,"ion-button",9),Q.NdJ("click",function(){return Q.CHM(ut),Q.oxw().createUser()}),Q._uU(10,"Create account "),Q.qZA(),Q.qZA()}if(2&Ue){const ut=Q.oxw();Q.Q6J("formGroup",ut.credentials),Q.xp6(3),Q.Q6J("ngIf",(ut.email.dirty||ut.email.touched)&&ut.email.errors),Q.xp6(3),Q.Q6J("ngIf",(ut.password.dirty||ut.password.touched)&&ut.password.errors)}}function _e(Ue,gt){1&Ue&&(Q.TgZ(0,"ion-note",10),Q._uU(1,"Name is required"),Q.qZA())}function le(Ue,gt){1&Ue&&(Q.TgZ(0,"ion-note",10),Q._uU(1,"Email is invalid"),Q.qZA())}function we(Ue,gt){1&Ue&&(Q.TgZ(0,"ion-note",10),Q._uU(1,"Password needs to be 6 characters"),Q.qZA())}function ht(Ue,gt){if(1&Ue){const ut=Q.EpF();Q.TgZ(0,"form",3),Q.NdJ("ngSubmit",function(){return Q.CHM(ut),Q.oxw().register()}),Q.TgZ(1,"ion-item",4),Q._UZ(2,"ion-input",11),Q.YNc(3,_e,2,0,"ion-note",6),Q.qZA(),Q.TgZ(4,"ion-item",4),Q._UZ(5,"ion-input",5),Q.YNc(6,le,2,0,"ion-note",6),Q.qZA(),Q.TgZ(7,"ion-item",4),Q._UZ(8,"ion-input",7),Q.YNc(9,we,2,0,"ion-note",6),Q.qZA(),Q.TgZ(10,"ion-button",8),Q._uU(11," Register "),Q.qZA(),Q.TgZ(12,"ion-button",12),Q.NdJ("click",function(){return Q.CHM(ut),Q.oxw().cancelRegister()}),Q._uU(13," Cancel "),Q.qZA(),Q.qZA()}if(2&Ue){const ut=Q.oxw();Q.Q6J("formGroup",ut.userRegistration),Q.xp6(3),Q.Q6J("ngIf",(ut.name.dirty||ut.name.touched)&&ut.name.errors),Q.xp6(3),Q.Q6J("ngIf",(ut.email.dirty||ut.email.touched)&&ut.email.errors),Q.xp6(3),Q.Q6J("ngIf",(ut.password.dirty||ut.password.touched)&&ut.password.errors)}}const Ze=[{path:"",component:(()=>{class Ue{constructor(ut,$t,E,pt,Dt){this.fb=ut,this.loadingController=$t,this.alertController=E,this.authService=pt,this.router=Dt,this.showRegister=!1}ngOnInit(){this.credentials=this.fb.group({email:["",[te.kI.required,te.kI.email]],password:["",[te.kI.required,te.kI.minLength(6)]]}),this.userRegistration=this.fb.group({name:["",[te.kI.required]],email:["",[te.kI.required,te.kI.email]],password:["",[te.kI.required,te.kI.minLength(6)]]})}get email(){return this.credentials.get("email")}get password(){return this.credentials.get("password")}get regEmail(){return this.userRegistration.get("email")}get regPassword(){return this.userRegistration.get("password")}get name(){return this.userRegistration.get("name")}login(){var ut=this;return(0,oe.Z)(function*(){const $t=yield ut.loadingController.create();yield $t.present();const E=yield ut.authService.login(ut.credentials.value);yield $t.dismiss(),E?ut.router.navigateByUrl("/home",{replaceUrl:!0}):ut.showAlert("Login failed","Please try again!")})()}register(){var ut=this;return(0,oe.Z)(function*(){const $t=yield ut.loadingController.create();yield $t.present();const E=yield ut.authService.register(ut.userRegistration.value);yield $t.dismiss(),E?ut.router.navigateByUrl("/home",{replaceUrl:!0}):ut.showAlert("Registration failed","Please try again!")})()}createUser(){this.showRegister=!0}showAlert(ut,$t){var E=this;return(0,oe.Z)(function*(){yield(yield E.alertController.create({header:ut,message:$t,buttons:["OK"]})).present()})()}cancelRegister(){this.userRegistration.reset(),this.showRegister=!1}}return Ue.\u0275fac=function(ut){return new(ut||Ue)(Q.Y36(te.qu),Q.Y36(A.HT),Q.Y36(A.Br),Q.Y36(ye.e),Q.Y36(ke.F0))},Ue.\u0275cmp=Q.Xpm({type:Ue,selectors:[["app-login"]],decls:4,vars:2,consts:[["pageTitle","Login"],[1,"ion-padding"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],["fill","solid",1,"ion-margin-bottom"],["type","email","placeholder","Email","formControlName","email"],["slot","error",4,"ngIf"],["type","password","placeholder","Password","formControlName","password"],["size","medium","shape","round","color","primary","type","submit","expand","block",1,"ion-margin-bottom"],["size","medium","shape","round","type","button","expand","block","color","light",3,"click"],["slot","error"],["type","text","placeholder","Name","formControlName","name"],["size","medium","shape","round","color","primary","type","button","expand","block",1,"ion-margin-bottom",3,"click"]],template:function(ut,$t){1&ut&&(Q._UZ(0,"app-nav",0),Q.TgZ(1,"ion-content",1),Q.YNc(2,he,11,3,"form",2),Q.YNc(3,ht,14,4,"form",2),Q.qZA()),2&ut&&(Q.xp6(2),Q.Q6J("ngIf",!$t.showRegister),Q.xp6(1),Q.Q6J("ngIf",$t.showRegister))},directives:[L.r,A.W2,y.O5,te._Y,te.JL,te.sg,A.Ie,A.pK,A.j9,te.JJ,te.u,A.YG,A.uN],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]}),Ue})()}];let Ge=(()=>{class Ue{}return Ue.\u0275fac=function(ut){return new(ut||Ue)},Ue.\u0275mod=Q.oAB({type:Ue}),Ue.\u0275inj=Q.cJS({imports:[[ke.Bz.forChild(Ze)],ke.Bz]}),Ue})();var ft=F(6175);let Se=(()=>{class Ue{}return Ue.\u0275fac=function(ut){return new(ut||Ue)},Ue.\u0275mod=Q.oAB({type:Ue}),Ue.\u0275inj=Q.cJS({providers:[],imports:[[y.ez,te.u5,te.UX,A.Pc,Ge,ft.q]]}),Ue})()},7556:(en,it,F)=>{"use strict";F.d(it,{e:()=>Q});var y=F(8239),A=F(7910),te=F(7716),ke=F(3071),oe=F(547);let Q=(()=>{class ye{constructor(Ce,re,he){this.auth=Ce,this.userSvc=re,this.prefService=he}register({email:Ce,password:re,name:he}){var _e=this;return(0,y.Z)(function*(){try{const le=yield(0,A.Xb)(_e.auth,Ce,re);_e.userSvc.addUserInfo(le.user.uid,{displayName:he});const we={id:le.user.uid,email:le.user.email,displayName:he};return yield _e.prefService.setDefaultPrefs(we.id),_e.userSvc.saveUserToLocalStorage(we),le}catch(le){return null}})()}login({email:Ce,password:re}){var he=this;return(0,y.Z)(function*(){try{const _e=yield(0,A.e5)(he.auth,Ce,re);return he.userSvc.saveUserToLocalStorage({id:_e.user.uid,email:_e.user.email}),_e}catch(_e){return null}})()}logout(){return this.userSvc.clearStorage(),(0,A.w7)(this.auth)}}return ye.\u0275fac=function(Ce){return new(Ce||ye)(te.LFG(A.gx),te.LFG(ke.K),te.LFG(oe.O))},ye.\u0275prov=te.Yz7({token:ye,factory:ye.\u0275fac,providedIn:"root"}),ye})()},3792:(en,it,F)=>{"use strict";F.d(it,{O:()=>oe});var y=F(2502),A=F(1304),te=F(7716),ke=F(9781);let oe=(()=>{class Q{constructor(L,Ce){this.firestore=L,this.afs=Ce,this.COMMENTS_COLLECTION="comments/comment"}getComments(L){const Ce=(0,A.hJ)(this.firestore,`${L}/${this.COMMENTS_COLLECTION}`),re=(0,y.IO)(Ce,(0,y.Xo)("createdTime","asc"));return(0,y.BS)(re,{idField:"id"})}addComment(L,Ce){const re=(0,A.hJ)(this.firestore,`${L}/${this.COMMENTS_COLLECTION}`);return(0,A.ET)(re,Object.assign(Object.assign({},Ce),{createdTime:A.EK.fromDate(new Date)}))}updateComment(L,Ce,re,he=!1){const _e=(0,A.JU)(this.firestore,`${L}/${this.COMMENTS_COLLECTION}/${Ce}`);(0,A.r7)(_e,Object.assign(Object.assign({},re),{textEdited:he,updatedTime:A.EK.fromDate(new Date)}))}}return Q.\u0275fac=function(L){return new(L||Q)(te.LFG(y.gg),te.LFG(ke.ST))},Q.\u0275prov=te.Yz7({token:Q,factory:Q.\u0275fac,providedIn:"root"}),Q})()},547:(en,it,F)=>{"use strict";F.d(it,{O:()=>oe});var y=F(8239),A=F(2502),te=F(1796),ke=F(7716);let oe=(()=>{class Q{constructor(L){this.firestore=L,this.FIRESTORE_USER_PREFS_PATH="user_prefs"}getPreferencesFromFirebase(L){const Ce=(0,A.JU)(this.firestore,`${L}/${this.FIRESTORE_USER_PREFS_PATH}`);return(0,A._1)(Ce)}savePreference(L,Ce){const re=(0,A.JU)(this.firestore,`${L}/${this.FIRESTORE_USER_PREFS_PATH}`);return console.log(Ce),(0,A.pl)(re,Ce)}setDefaultPrefs(L){return new Promise(Ce=>{const re={minVolumeToPlayAudio:10,theme:"light",iosVoiceProfile:"en-US",androidVoiceProfile:0,speechRate:100};this.savePreference(L,re),this.setLocalPreferences(re),Ce()})}setLocalPreferences(L){return(0,y.Z)(function*(){for(const[Ce,re]of Object.entries(L))"string"==typeof re&&(yield te.u.set({key:Ce,value:re})),"object"==typeof re&&(yield te.u.set({key:Ce,value:JSON.stringify(re)})),"number"==typeof re&&(yield te.u.set({key:Ce,value:re.toString(10)}))})()}}return Q.\u0275fac=function(L){return new(L||Q)(ke.LFG(A.gg))},Q.\u0275prov=ke.Yz7({token:Q,factory:Q.\u0275fac,providedIn:"root"}),Q})()},3071:(en,it,F)=>{"use strict";F.d(it,{K:()=>ke});var y=F(2502),A=F(1304),te=F(7716);let ke=(()=>{class oe{constructor(ye){this.firestore=ye,this.USER_INFO_PATH="user_info"}getUserInfo(ye){const L=(0,A.JU)(this.firestore,`${ye}/${this.USER_INFO_PATH}`);return(0,y._1)(L)}addUserInfo(ye,L){const Ce=(0,A.JU)(this.firestore,`${ye}/${this.USER_INFO_PATH}`);return(0,A.pl)(Ce,L)}updateUserInfo(ye,L){const Ce=(0,A.JU)(this.firestore,`${ye}/${this.USER_INFO_PATH}`);return(0,A.pl)(Ce,L)}saveUserToLocalStorage(ye){localStorage.setItem("userData",JSON.stringify(ye))}getUserDataFromLocalStorage(){return JSON.parse(localStorage.getItem("userData")||"{}")}clearStorage(){localStorage.clear()}}return oe.\u0275fac=function(ye){return new(ye||oe)(te.LFG(y.gg))},oe.\u0275prov=te.Yz7({token:oe,factory:oe.\u0275fac,providedIn:"root"}),oe})()},657:(en,it,F)=>{"use strict";var y=F(8583),A=F(7716);class te extends y.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ke extends te{static makeCurrent(){(0,y.HT)(new ke)}onAndCancel(c,l,p){return c.addEventListener(l,p,!1),()=>{c.removeEventListener(l,p,!1)}}dispatchEvent(c,l){c.dispatchEvent(l)}remove(c){c.parentNode&&c.parentNode.removeChild(c)}createElement(c,l){return(l=l||this.getDefaultDocument()).createElement(c)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(c){return c.nodeType===Node.ELEMENT_NODE}isShadowRoot(c){return c instanceof DocumentFragment}getGlobalEventTarget(c,l){return"window"===l?window:"document"===l?c:"body"===l?c.body:null}getBaseHref(c){const l=(oe=oe||document.querySelector("base"),oe?oe.getAttribute("href"):null);return null==l?null:function(d){ye=ye||document.createElement("a"),ye.setAttribute("href",d);const c=ye.pathname;return"/"===c.charAt(0)?c:`/${c}`}(l)}resetBaseElement(){oe=null}getUserAgent(){return window.navigator.userAgent}getCookie(c){return(0,y.Mx)(document.cookie,c)}}let ye,oe=null;const Ce=new A.OlP("TRANSITION_ID"),he=[{provide:A.ip1,useFactory:function(d,c,l){return()=>{l.get(A.CZH).donePromise.then(()=>{const p=(0,y.q)(),b=c.querySelectorAll(`style[ng-transition="${d}"]`);for(let P=0;P<b.length;P++)p.remove(b[P])})}},deps:[Ce,y.K0,A.zs3],multi:!0}];class _e{static init(){(0,A.VLi)(new _e)}addToWindow(c){A.dqk.getAngularTestability=(p,b=!0)=>{const P=c.findTestabilityInTree(p,b);if(null==P)throw new Error("Could not find testability for element.");return P},A.dqk.getAllAngularTestabilities=()=>c.getAllTestabilities(),A.dqk.getAllAngularRootElements=()=>c.getAllRootElements(),A.dqk.frameworkStabilizers||(A.dqk.frameworkStabilizers=[]),A.dqk.frameworkStabilizers.push(p=>{const b=A.dqk.getAllAngularTestabilities();let P=b.length,z=!1;const ae=function(Ne){z=z||Ne,P--,0==P&&p(z)};b.forEach(function(Ne){Ne.whenStable(ae)})})}findTestabilityInTree(c,l,p){if(null==l)return null;const b=c.getTestability(l);return null!=b?b:p?(0,y.q)().isShadowRoot(l)?this.findTestabilityInTree(c,l.host,!0):this.findTestabilityInTree(c,l.parentElement,!0):null}}let le=(()=>{class d{build(){return new XMLHttpRequest}}return d.\u0275fac=function(l){return new(l||d)},d.\u0275prov=A.Yz7({token:d,factory:d.\u0275fac}),d})();const be=new A.OlP("EventManagerPlugins");let Me=(()=>{class d{constructor(l,p){this._zone=p,this._eventNameToPlugin=new Map,l.forEach(b=>b.manager=this),this._plugins=l.slice().reverse()}addEventListener(l,p,b){return this._findPluginFor(p).addEventListener(l,p,b)}addGlobalEventListener(l,p,b){return this._findPluginFor(p).addGlobalEventListener(l,p,b)}getZone(){return this._zone}_findPluginFor(l){const p=this._eventNameToPlugin.get(l);if(p)return p;const b=this._plugins;for(let P=0;P<b.length;P++){const z=b[P];if(z.supports(l))return this._eventNameToPlugin.set(l,z),z}throw new Error(`No event manager plugin found for event ${l}`)}}return d.\u0275fac=function(l){return new(l||d)(A.LFG(be),A.LFG(A.R0b))},d.\u0275prov=A.Yz7({token:d,factory:d.\u0275fac}),d})();class et{constructor(c){this._doc=c}addGlobalEventListener(c,l,p){const b=(0,y.q)().getGlobalEventTarget(this._doc,c);if(!b)throw new Error(`Unsupported event target ${b} for event ${l}`);return this.addEventListener(b,l,p)}}let dt=(()=>{class d{constructor(){this._stylesSet=new Set}addStyles(l){const p=new Set;l.forEach(b=>{this._stylesSet.has(b)||(this._stylesSet.add(b),p.add(b))}),this.onStylesAdded(p)}onStylesAdded(l){}getAllStyles(){return Array.from(this._stylesSet)}}return d.\u0275fac=function(l){return new(l||d)},d.\u0275prov=A.Yz7({token:d,factory:d.\u0275fac}),d})(),nt=(()=>{class d extends dt{constructor(l){super(),this._doc=l,this._hostNodes=new Map,this._hostNodes.set(l.head,[])}_addStylesToHost(l,p,b){l.forEach(P=>{const z=this._doc.createElement("style");z.textContent=P,b.push(p.appendChild(z))})}addHost(l){const p=[];this._addStylesToHost(this._stylesSet,l,p),this._hostNodes.set(l,p)}removeHost(l){const p=this._hostNodes.get(l);p&&p.forEach(At),this._hostNodes.delete(l)}onStylesAdded(l){this._hostNodes.forEach((p,b)=>{this._addStylesToHost(l,b,p)})}ngOnDestroy(){this._hostNodes.forEach(l=>l.forEach(At))}}return d.\u0275fac=function(l){return new(l||d)(A.LFG(y.K0))},d.\u0275prov=A.Yz7({token:d,factory:d.\u0275fac}),d})();function At(d){(0,y.q)().remove(d)}const Ie={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ye=/%COMP%/g;function Nt(d,c,l){for(let p=0;p<c.length;p++){let b=c[p];Array.isArray(b)?Nt(d,b,l):(b=b.replace(Ye,d),l.push(b))}return l}function gn(d){return c=>{if("__ngUnwrap__"===c)return d;!1===d(c)&&(c.preventDefault(),c.returnValue=!1)}}let wn=(()=>{class d{constructor(l,p,b){this.eventManager=l,this.sharedStylesHost=p,this.appId=b,this.rendererByCompId=new Map,this.defaultRenderer=new yn(l)}createRenderer(l,p){if(!l||!p)return this.defaultRenderer;switch(p.encapsulation){case A.ifc.Emulated:{let b=this.rendererByCompId.get(p.id);return b||(b=new Tt(this.eventManager,this.sharedStylesHost,p,this.appId),this.rendererByCompId.set(p.id,b)),b.applyToHost(l),b}case 1:case A.ifc.ShadowDom:return new un(this.eventManager,this.sharedStylesHost,l,p);default:if(!this.rendererByCompId.has(p.id)){const b=Nt(p.id,p.styles,[]);this.sharedStylesHost.addStyles(b),this.rendererByCompId.set(p.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return d.\u0275fac=function(l){return new(l||d)(A.LFG(Me),A.LFG(nt),A.LFG(A.AFp))},d.\u0275prov=A.Yz7({token:d,factory:d.\u0275fac}),d})();class yn{constructor(c){this.eventManager=c,this.data=Object.create(null)}destroy(){}createElement(c,l){return l?document.createElementNS(Ie[l]||l,c):document.createElement(c)}createComment(c){return document.createComment(c)}createText(c){return document.createTextNode(c)}appendChild(c,l){c.appendChild(l)}insertBefore(c,l,p){c&&c.insertBefore(l,p)}removeChild(c,l){c&&c.removeChild(l)}selectRootElement(c,l){let p="string"==typeof c?document.querySelector(c):c;if(!p)throw new Error(`The selector "${c}" did not match any elements`);return l||(p.textContent=""),p}parentNode(c){return c.parentNode}nextSibling(c){return c.nextSibling}setAttribute(c,l,p,b){if(b){l=b+":"+l;const P=Ie[b];P?c.setAttributeNS(P,l,p):c.setAttribute(l,p)}else c.setAttribute(l,p)}removeAttribute(c,l,p){if(p){const b=Ie[p];b?c.removeAttributeNS(b,l):c.removeAttribute(`${p}:${l}`)}else c.removeAttribute(l)}addClass(c,l){c.classList.add(l)}removeClass(c,l){c.classList.remove(l)}setStyle(c,l,p,b){b&(A.JOm.DashCase|A.JOm.Important)?c.style.setProperty(l,p,b&A.JOm.Important?"important":""):c.style[l]=p}removeStyle(c,l,p){p&A.JOm.DashCase?c.style.removeProperty(l):c.style[l]=""}setProperty(c,l,p){c[l]=p}setValue(c,l){c.nodeValue=l}listen(c,l,p){return"string"==typeof c?this.eventManager.addGlobalEventListener(c,l,gn(p)):this.eventManager.addEventListener(c,l,gn(p))}}class Tt extends yn{constructor(c,l,p,b){super(c),this.component=p;const P=Nt(b+"-"+p.id,p.styles,[]);l.addStyles(P),this.contentAttr="_ngcontent-%COMP%".replace(Ye,b+"-"+p.id),this.hostAttr="_nghost-%COMP%".replace(Ye,b+"-"+p.id)}applyToHost(c){super.setAttribute(c,this.hostAttr,"")}createElement(c,l){const p=super.createElement(c,l);return super.setAttribute(p,this.contentAttr,""),p}}class un extends yn{constructor(c,l,p,b){super(c),this.sharedStylesHost=l,this.hostEl=p,this.shadowRoot=p.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const P=Nt(b.id,b.styles,[]);for(let z=0;z<P.length;z++){const ae=document.createElement("style");ae.textContent=P[z],this.shadowRoot.appendChild(ae)}}nodeOrShadowRoot(c){return c===this.hostEl?this.shadowRoot:c}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(c,l){return super.appendChild(this.nodeOrShadowRoot(c),l)}insertBefore(c,l,p){return super.insertBefore(this.nodeOrShadowRoot(c),l,p)}removeChild(c,l){return super.removeChild(this.nodeOrShadowRoot(c),l)}parentNode(c){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(c)))}}let Un=(()=>{class d extends et{constructor(l){super(l)}supports(l){return!0}addEventListener(l,p,b){return l.addEventListener(p,b,!1),()=>this.removeEventListener(l,p,b)}removeEventListener(l,p,b){return l.removeEventListener(p,b)}}return d.\u0275fac=function(l){return new(l||d)(A.LFG(y.K0))},d.\u0275prov=A.Yz7({token:d,factory:d.\u0275fac}),d})();const nr=["alt","control","meta","shift"],It={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ur={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},rr={alt:d=>d.altKey,control:d=>d.ctrlKey,meta:d=>d.metaKey,shift:d=>d.shiftKey};let ir=(()=>{class d extends et{constructor(l){super(l)}supports(l){return null!=d.parseEventName(l)}addEventListener(l,p,b){const P=d.parseEventName(p),z=d.eventCallback(P.fullKey,b,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,y.q)().onAndCancel(l,P.domEventName,z))}static parseEventName(l){const p=l.toLowerCase().split("."),b=p.shift();if(0===p.length||"keydown"!==b&&"keyup"!==b)return null;const P=d._normalizeKey(p.pop());let z="";if(nr.forEach(Ne=>{const Qe=p.indexOf(Ne);Qe>-1&&(p.splice(Qe,1),z+=Ne+".")}),z+=P,0!=p.length||0===P.length)return null;const ae={};return ae.domEventName=b,ae.fullKey=z,ae}static getEventFullKey(l){let p="",b=function(d){let c=d.key;if(null==c){if(c=d.keyIdentifier,null==c)return"Unidentified";c.startsWith("U+")&&(c=String.fromCharCode(parseInt(c.substring(2),16)),3===d.location&&ur.hasOwnProperty(c)&&(c=ur[c]))}return It[c]||c}(l);return b=b.toLowerCase()," "===b?b="space":"."===b&&(b="dot"),nr.forEach(P=>{P!=b&&rr[P](l)&&(p+=P+".")}),p+=b,p}static eventCallback(l,p,b){return P=>{d.getEventFullKey(P)===l&&b.runGuarded(()=>p(P))}}static _normalizeKey(l){return"esc"===l?"escape":l}}return d.\u0275fac=function(l){return new(l||d)(A.LFG(y.K0))},d.\u0275prov=A.Yz7({token:d,factory:d.\u0275fac}),d})();const We=(0,A.eFA)(A._c5,"browser",[{provide:A.Lbi,useValue:y.bD},{provide:A.g9A,useValue:function(){ke.makeCurrent(),_e.init()},multi:!0},{provide:y.K0,useFactory:function(){return(0,A.RDi)(document),document},deps:[]}]),Ee=[[],{provide:A.zSh,useValue:"root"},{provide:A.qLn,useFactory:function(){return new A.qLn},deps:[]},{provide:be,useClass:Un,multi:!0,deps:[y.K0,A.R0b,A.Lbi]},{provide:be,useClass:ir,multi:!0,deps:[y.K0]},[],{provide:wn,useClass:wn,deps:[Me,nt,A.AFp]},{provide:A.FYo,useExisting:wn},{provide:dt,useExisting:nt},{provide:nt,useClass:nt,deps:[y.K0]},{provide:A.dDg,useClass:A.dDg,deps:[A.R0b]},{provide:Me,useClass:Me,deps:[be,A.R0b]},{provide:y.JF,useClass:le,deps:[]},[]];let $e=(()=>{class d{constructor(l){if(l)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(l){return{ngModule:d,providers:[{provide:A.AFp,useValue:l.appId},{provide:Ce,useExisting:A.AFp},he]}}}return d.\u0275fac=function(l){return new(l||d)(A.LFG(d,12))},d.\u0275mod=A.oAB({type:d}),d.\u0275inj=A.cJS({providers:Ee,imports:[y.ez,A.hGG]}),d})();"undefined"!=typeof window&&window;var Wr=F(174),di=F(665),Yr=F(8945),fs=F(4022),$r=F(8002),zi=F(5257),qr=F(7910),mi=F(2329);const Ar=(0,$r.U)(d=>!!d);let As=(()=>{class d{constructor(l,p){this.router=l,this.auth=p,this.canActivate=(b,P)=>{const z=b.data.authGuardPipe||(()=>Ar);return(0,qr.EA)(this.auth).pipe((0,zi.q)(1),z(b,P),(0,$r.U)(ae=>"boolean"==typeof ae?ae:Array.isArray(ae)?this.router.createUrlTree(ae):this.router.parseUrl(ae)))}}}return d.\u0275fac=function(l){return new(l||d)(A.LFG(Wr.F0),A.LFG(qr.gx))},d.\u0275prov=A.Yz7({token:d,factory:d.\u0275fac,providedIn:"any"}),d})();const _t=d=>({canActivate:[As],data:{authGuardPipe:d}}),Pn=[Object.assign({path:"",loadChildren:()=>Promise.resolve().then(F.bind(F,7545)).then(d=>d.LoginModule)},_t(()=>{return d=["home"],(0,fs.z)(Ar,(0,$r.U)(c=>c&&d||!0));var d})),Object.assign({path:"home",loadChildren:()=>Promise.resolve().then(F.bind(F,8176)).then(d=>d.HomeModule)},_t(()=>{return d=[""],(0,fs.z)(Ar,(0,$r.U)(c=>c||d));var d})),{path:"**",redirectTo:"",pathMatch:"full"}];let $n=(()=>{class d{}return d.\u0275fac=function(l){return new(l||d)},d.\u0275mod=A.oAB({type:d}),d.\u0275inj=A.cJS({imports:[[Wr.Bz.forRoot(Pn,{preloadingStrategy:Wr.wm})],Wr.Bz]}),d})();var Gn=F(8239),xr=F(1796);let ss=(()=>{class d{constructor(l){this.platform=l,this.title="trailApp",this.initializeApp()}initializeApp(){this.platform.ready().then((0,Gn.Z)(function*(){if(console.log("ready"),!document.body.getAttribute("color-theme")){const l=yield(yield xr.u.get({key:"theme"})).value;document.body.setAttribute("color-theme",l||"")}}))}}return d.\u0275fac=function(l){return new(l||d)(A.Y36(Yr.t4))},d.\u0275cmp=A.Xpm({type:d,selectors:[["app-root"]],decls:2,vars:0,template:function(l,p){1&l&&(A.TgZ(0,"ion-app"),A._UZ(1,"ion-router-outlet"),A.qZA())},directives:[Yr.dr,Yr.jP],styles:[""]}),d})();var hi=F(8176),bi=F(127),xs=F(2502);const vs_firebase={projectId:"trail-app-aa3ab",appId:"1:274367012522:web:30b70ab84769c87aca3ad3",databaseURL:"https://trail-app-aa3ab-default-rtdb.firebaseio.com",storageBucket:"trail-app-aa3ab.appspot.com",apiKey:"AIzaSyBVh_gUX8-vRECj9rPbevw38_FAyV6e12s",authDomain:"trail-app-aa3ab.firebaseapp.com",messagingSenderId:"274367012522"};var li=F(2805),Hs=F(841),Hi=F(8026),Es=F(3910),je=F(3854),Rs=F(5422);const xo="@firebase/database";let mo="";function Oa(d){mo=d}class ps{constructor(c){this.domStorage_=c,this.prefix_="firebase:"}set(c,l){null==l?this.domStorage_.removeItem(this.prefixedName_(c)):this.domStorage_.setItem(this.prefixedName_(c),(0,je.Wl)(l))}get(c){const l=this.domStorage_.getItem(this.prefixedName_(c));return null==l?null:(0,je.cI)(l)}remove(c){this.domStorage_.removeItem(this.prefixedName_(c))}prefixedName_(c){return this.prefix_+c}toString(){return this.domStorage_.toString()}}class Ws{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(c,l){null==l?delete this.cache_[c]:this.cache_[c]=l}get(c){return(0,je.r3)(this.cache_,c)?this.cache_[c]:null}remove(c){delete this.cache_[c]}}const Gs=function(d){try{if("undefined"!=typeof window&&void 0!==window[d]){const c=window[d];return c.setItem("firebase:sentinel","cache"),c.removeItem("firebase:sentinel"),new ps(c)}}catch(c){}return new Ws},os=Gs("localStorage"),yo=Gs("sessionStorage"),Ur=new Rs.Yd("@firebase/database"),zs=function(){let d=1;return function(){return d++}}(),Ji=function(d){const c=(0,je.dS)(d),l=new je.gQ;l.update(c);const p=l.digest();return je.US.encodeByteArray(p)},bs=function(...d){let c="";for(let l=0;l<d.length;l++){const p=d[l];Array.isArray(p)||p&&"object"==typeof p&&"number"==typeof p.length?c+=bs.apply(null,p):c+="object"==typeof p?(0,je.Wl)(p):p,c+=" "}return c};let es=null,Yi=!0;const ra=function(d,c){(0,je.hu)(!c||!0===d||!1===d,"Can't turn on custom loggers persistently."),!0===d?(Ur.logLevel=Rs.in.VERBOSE,es=Ur.log.bind(Ur),c&&yo.set("logging_enabled",!0)):"function"==typeof d?es=d:(es=null,yo.remove("logging_enabled"))},_i=function(...d){if(!0===Yi&&(Yi=!1,null===es&&!0===yo.get("logging_enabled")&&ra(!0)),es){const c=bs.apply(null,d);es(c)}},ci=function(d){return function(...c){_i(d,...c)}},Mo=function(...d){const c="FIREBASE INTERNAL ERROR: "+bs(...d);Ur.error(c)},Ri=function(...d){const c=`FIREBASE FATAL ERROR: ${bs(...d)}`;throw Ur.error(c),new Error(c)},Gr=function(...d){const c="FIREBASE WARNING: "+bs(...d);Ur.warn(c)},Ii=function(d){return"number"==typeof d&&(d!=d||d===Number.POSITIVE_INFINITY||d===Number.NEGATIVE_INFINITY)},qi="[MIN_NAME]",as="[MAX_NAME]",Ms=function(d,c){if(d===c)return 0;if(d===qi||c===as)return-1;if(c===qi||d===as)return 1;{const l=ce(d),p=ce(c);return null!==l?null!==p?l-p==0?d.length-c.length:l-p:-1:null!==p?1:d<c?-1:1}},Ni=function(d,c){return d===c?0:d<c?-1:1},Bi=function(d,c){if(c&&d in c)return c[d];throw new Error("Missing required key ("+d+") in object: "+(0,je.Wl)(c))},W=function(d){if("object"!=typeof d||null===d)return(0,je.Wl)(d);const c=[];for(const p in d)c.push(p);c.sort();let l="{";for(let p=0;p<c.length;p++)0!==p&&(l+=","),l+=(0,je.Wl)(c[p]),l+=":",l+=W(d[c[p]]);return l+="}",l},fe=function(d,c){const l=d.length;if(l<=c)return[d];const p=[];for(let b=0;b<l;b+=c)p.push(d.substring(b,b+c>l?l:b+c));return p};function K(d,c){for(const l in d)d.hasOwnProperty(l)&&c(l,d[l])}const De=function(d){(0,je.hu)(!Ii(d),"Invalid JSON number");const p=1023;let b,P,z,ae,Ne;0===d?(P=0,z=0,b=1/d==-1/0?1:0):(b=d<0,(d=Math.abs(d))>=Math.pow(2,1-p)?(ae=Math.min(Math.floor(Math.log(d)/Math.LN2),p),P=ae+p,z=Math.round(d*Math.pow(2,52-ae)-Math.pow(2,52))):(P=0,z=Math.round(d/Math.pow(2,-1074))));const Qe=[];for(Ne=52;Ne;Ne-=1)Qe.push(z%2?1:0),z=Math.floor(z/2);for(Ne=11;Ne;Ne-=1)Qe.push(P%2?1:0),P=Math.floor(P/2);Qe.push(b?1:0),Qe.reverse();const jt=Qe.join("");let Wt="";for(Ne=0;Ne<64;Ne+=8){let tn=parseInt(jt.substr(Ne,8),2).toString(16);1===tn.length&&(tn="0"+tn),Wt+=tn}return Wt.toLowerCase()},G=new RegExp("^-?(0*)\\d{1,10}$"),$=-2147483648,k=2147483647,ce=function(d){if(G.test(d)){const c=Number(d);if(c>=$&&c<=k)return c}return null},mt=function(d){try{d()}catch(c){setTimeout(()=>{throw Gr("Exception was thrown by user callback.",c.stack||""),c},Math.floor(0))}},er=function(d,c){const l=setTimeout(d,c);return"number"==typeof l&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(l):"object"==typeof l&&l.unref&&l.unref(),l};class Kr{constructor(c,l){this.appName_=c,this.appCheckProvider=l,this.appCheck=null==l?void 0:l.getImmediate({optional:!0}),this.appCheck||null==l||l.get().then(p=>this.appCheck=p)}getToken(c){return this.appCheck?this.appCheck.getToken(c):new Promise((l,p)=>{setTimeout(()=>{this.appCheck?this.getToken(c).then(l,p):l(null)},0)})}addTokenChangeListener(c){var l;null===(l=this.appCheckProvider)||void 0===l||l.get().then(p=>p.addTokenListener(c))}notifyForInvalidToken(){Gr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class $i{constructor(c,l,p){this.appName_=c,this.firebaseOptions_=l,this.authProvider_=p,this.auth_=null,this.auth_=p.getImmediate({optional:!0}),this.auth_||p.onInit(b=>this.auth_=b)}getToken(c){return this.auth_?this.auth_.getToken(c).catch(l=>l&&"auth/token-not-initialized"===l.code?(_i("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(l)):new Promise((l,p)=>{setTimeout(()=>{this.auth_?this.getToken(c).then(l,p):l(null)},0)})}addTokenChangeListener(c){this.auth_?this.auth_.addAuthTokenListener(c):this.authProvider_.get().then(l=>l.addAuthTokenListener(c))}removeTokenChangeListener(c){this.authProvider_.get().then(l=>l.removeAuthTokenListener(c))}notifyForInvalidToken(){let c='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';c+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Gr(c)}}let si=(()=>{class d{constructor(l){this.accessToken=l}getToken(l){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(l){l(this.accessToken)}removeTokenChangeListener(l){}notifyForInvalidToken(){}}return d.OWNER="owner",d})();const Na=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,oo="websocket",ln="long_polling";class Ir{constructor(c,l,p,b,P=!1,z="",ae=!1){this.secure=l,this.namespace=p,this.webSocketOnly=b,this.nodeAdmin=P,this.persistenceKey=z,this.includeNamespaceInQueryParams=ae,this._host=c.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=os.get("host:"+c)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(c){c!==this.internalHost&&(this.internalHost=c,this.isCacheableHost()&&os.set("host:"+this._host,this.internalHost))}toString(){let c=this.toURLString();return this.persistenceKey&&(c+="<"+this.persistenceKey+">"),c}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function ki(d,c,l){let p;if((0,je.hu)("string"==typeof c,"typeof type must == string"),(0,je.hu)("object"==typeof l,"typeof params must == object"),c===oo)p=(d.secure?"wss://":"ws://")+d.internalHost+"/.ws?";else{if(c!==ln)throw new Error("Unknown connection type: "+c);p=(d.secure?"https://":"http://")+d.internalHost+"/.lp?"}(function(d){return d.host!==d.internalHost||d.isCustomHost()||d.includeNamespaceInQueryParams})(d)&&(l.ns=d.namespace);const b=[];return K(l,(P,z)=>{b.push(P+"="+z)}),p+b.join("&")}class ao{constructor(){this.counters_={}}incrementCounter(c,l=1){(0,je.r3)(this.counters_,c)||(this.counters_[c]=0),this.counters_[c]+=l}get(){return(0,je.p$)(this.counters_)}}const Is={},Ps={};function Os(d){const c=d.toString();return Is[c]||(Is[c]=new ao),Is[c]}class Vl{constructor(c){this.onMessage_=c,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(c,l){this.closeAfterResponse=c,this.onClose=l,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(c,l){for(this.pendingResponses[c]=l;this.pendingResponses[this.currentResponseNum];){const p=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let b=0;b<p.length;++b)p[b]&&mt(()=>{this.onMessage_(p[b])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ks{constructor(c,l,p,b,P,z,ae){this.connId=c,this.repoInfo=l,this.applicationId=p,this.appCheckToken=b,this.authToken=P,this.transportSessionId=z,this.lastSessionId=ae,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ci(c),this.stats_=Os(l),this.urlFn=Ne=>(this.appCheckToken&&(Ne.ac=this.appCheckToken),ki(l,ln,Ne))}open(c,l){this.curSegmentNum=0,this.onDisconnect_=l,this.myPacketOrderer=new Vl(c),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(d){if((0,je.Yr)()||"complete"===document.readyState)d();else{let c=!1;const l=function(){document.body?c||(c=!0,d()):setTimeout(l,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&l()}),window.attachEvent("onload",l))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new vi((...P)=>{const[z,ae,Ne,Qe,jt]=P;if(this.incrementIncomingBytes_(P),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===z)this.id=ae,this.password=Ne;else{if("close"!==z)throw new Error("Unrecognized command received: "+z);ae?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(ae,()=>{this.onClosed_()})):this.onClosed_()}},(...P)=>{const[z,ae]=P;this.incrementIncomingBytes_(P),this.myPacketOrderer.handleResponse(z,ae)},()=>{this.onClosed_()},this.urlFn);const p={start:"t"};p.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(p.cb=this.scriptTagHolder.uniqueCallbackIdentifier),p.v="5",this.transportSessionId&&(p.s=this.transportSessionId),this.lastSessionId&&(p.ls=this.lastSessionId),this.applicationId&&(p.p=this.applicationId),this.appCheckToken&&(p.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Na.test(location.hostname)&&(p.r="f");const b=this.urlFn(p);this.log_("Connecting via long-poll to "+b),this.scriptTagHolder.addTag(b,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ks.forceAllow_=!0}static forceDisallow(){Ks.forceDisallow_=!0}static isAvailable(){return!((0,je.Yr)()||!Ks.forceAllow_&&(Ks.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(c){const l=(0,je.Wl)(c);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const p=(0,je.h$)(l),b=fe(p,1840);for(let P=0;P<b.length;P++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,b.length,b[P]),this.curSegmentNum++}addDisconnectPingFrame(c,l){if((0,je.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const p={dframe:"t"};p.id=c,p.pw=l,this.myDisconnFrame.src=this.urlFn(p),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(c){const l=(0,je.Wl)(c).length;this.bytesReceived+=l,this.stats_.incrementCounter("bytes_received",l)}}class vi{constructor(c,l,p,b){if(this.onDisconnect=p,this.urlFn=b,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,je.Yr)())this.commandCB=c,this.onMessageCB=l;else{this.uniqueCallbackIdentifier=zs(),window["pLPCommand"+this.uniqueCallbackIdentifier]=c,window["pRTLPCB"+this.uniqueCallbackIdentifier]=l,this.myIFrame=vi.createIFrame_();let P="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(P='<script>document.domain="'+document.domain+'";<\/script>');const z="<html><body>"+P+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(z),this.myIFrame.doc.close()}catch(ae){_i("frame writing exception"),ae.stack&&_i(ae.stack),_i(ae)}}}static createIFrame_(){const c=document.createElement("iframe");if(c.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(c);try{c.contentWindow.document||_i("No IE domain setting required")}catch(l){const p=document.domain;c.src="javascript:void((function(){document.open();document.domain='"+p+"';document.close();})())"}return c.contentDocument?c.doc=c.contentDocument:c.contentWindow?c.doc=c.contentWindow.document:c.document&&(c.doc=c.document),c}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const c=this.onDisconnect;c&&(this.onDisconnect=null,c())}startLongPoll(c,l){for(this.myID=c,this.myPW=l,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const c={};c.id=this.myID,c.pw=this.myPW,c.ser=this.currentSerial;let l=this.urlFn(c),p="",b=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+p.length<=1870;){const z=this.pendingSegs.shift();p=p+"&seg"+b+"="+z.seg+"&ts"+b+"="+z.ts+"&d"+b+"="+z.d,b++}return l+=p,this.addLongPollTag_(l,this.currentSerial),!0}return!1}enqueueSegment(c,l,p){this.pendingSegs.push({seg:c,ts:l,d:p}),this.alive&&this.newRequest_()}addLongPollTag_(c,l){this.outstandingRequests.add(l);const p=()=>{this.outstandingRequests.delete(l),this.newRequest_()},b=setTimeout(p,Math.floor(25e3));this.addTag(c,()=>{clearTimeout(b),p()})}addTag(c,l){(0,je.Yr)()?this.doNodeLongPoll(c,l):setTimeout(()=>{try{if(!this.sendNewPolls)return;const p=this.myIFrame.doc.createElement("script");p.type="text/javascript",p.async=!0,p.src=c,p.onload=p.onreadystatechange=function(){const b=p.readyState;(!b||"loaded"===b||"complete"===b)&&(p.onload=p.onreadystatechange=null,p.parentNode&&p.parentNode.removeChild(p),l())},p.onerror=()=>{_i("Long-poll script failed to load: "+c),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(p)}catch(p){}},Math.floor(1))}}let Qs=null;"undefined"!=typeof MozWebSocket?Qs=MozWebSocket:"undefined"!=typeof WebSocket&&(Qs=WebSocket);let No=(()=>{class d{constructor(l,p,b,P,z,ae,Ne){this.connId=l,this.applicationId=b,this.appCheckToken=P,this.authToken=z,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ci(this.connId),this.stats_=Os(p),this.connURL=d.connectionURL_(p,ae,Ne,P,b),this.nodeAdmin=p.nodeAdmin}static connectionURL_(l,p,b,P,z){const ae={v:"5"};return!(0,je.Yr)()&&"undefined"!=typeof location&&location.hostname&&Na.test(location.hostname)&&(ae.r="f"),p&&(ae.s=p),b&&(ae.ls=b),P&&(ae.ac=P),z&&(ae.p=z),ki(l,oo,ae)}open(l,p){this.onDisconnect=p,this.onMessage=l,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,os.set("previous_websocket_failure",!0);try{let b;if((0,je.Yr)()){b={headers:{"User-Agent":`Firebase/5/${mo}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(b.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(b.headers["X-Firebase-AppCheck"]=this.appCheckToken);const z=process.env,ae=0===this.connURL.indexOf("wss://")?z.HTTPS_PROXY||z.https_proxy:z.HTTP_PROXY||z.http_proxy;ae&&(b.proxy={origin:ae})}this.mySock=new Qs(this.connURL,[],b)}catch(b){this.log_("Error instantiating WebSocket.");const P=b.message||b.data;return P&&this.log_(P),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=b=>{this.handleIncomingFrame(b)},this.mySock.onerror=b=>{this.log_("WebSocket error.  Closing connection.");const P=b.message||b.data;P&&this.log_(P),this.onClosed_()}}start(){}static forceDisallow(){d.forceDisallow_=!0}static isAvailable(){let l=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const b=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);b&&b.length>1&&parseFloat(b[1])<4.4&&(l=!0)}return!l&&null!==Qs&&!d.forceDisallow_}static previouslyFailed(){return os.isInMemoryStorage||!0===os.get("previous_websocket_failure")}markConnectionHealthy(){os.remove("previous_websocket_failure")}appendFrame_(l){if(this.frames.push(l),this.frames.length===this.totalFrames){const p=this.frames.join("");this.frames=null;const b=(0,je.cI)(p);this.onMessage(b)}}handleNewFrameCount_(l){this.totalFrames=l,this.frames=[]}extractFrameCount_(l){if((0,je.hu)(null===this.frames,"We already have a frame buffer"),l.length<=6){const p=Number(l);if(!isNaN(p))return this.handleNewFrameCount_(p),null}return this.handleNewFrameCount_(1),l}handleIncomingFrame(l){if(null===this.mySock)return;const p=l.data;if(this.bytesReceived+=p.length,this.stats_.incrementCounter("bytes_received",p.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(p);else{const b=this.extractFrameCount_(p);null!==b&&this.appendFrame_(b)}}send(l){this.resetKeepAlive();const p=(0,je.Wl)(l);this.bytesSent+=p.length,this.stats_.incrementCounter("bytes_sent",p.length);const b=fe(p,16384);b.length>1&&this.sendString_(String(b.length));for(let P=0;P<b.length;P++)this.sendString_(b[P])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(l){try{this.mySock.send(l)}catch(p){this.log_("Exception thrown from WebSocket.send():",p.message||p.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return d.responsesRequiredToBeHealthy=2,d.healthyTimeout=3e4,d})(),_a=(()=>{class d{constructor(l){this.initTransports_(l)}static get ALL_TRANSPORTS(){return[Ks,No]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(l){const p=No&&No.isAvailable();let b=p&&!No.previouslyFailed();if(l.webSocketOnly&&(p||Gr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),b=!0),b)this.transports_=[No];else{const P=this.transports_=[];for(const z of d.ALL_TRANSPORTS)z&&z.isAvailable()&&P.push(z);d.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return d.globalTransportInitialized_=!1,d})();class lr{constructor(c,l,p,b,P,z,ae,Ne,Qe,jt){this.id=c,this.repoInfo_=l,this.applicationId_=p,this.appCheckToken_=b,this.authToken_=P,this.onMessage_=z,this.onReady_=ae,this.onDisconnect_=Ne,this.onKill_=Qe,this.lastSessionId=jt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ci("c:"+this.id+":"),this.transportManager_=new _a(l),this.log_("Connection created"),this.start_()}start_(){const c=this.transportManager_.initialTransport();this.conn_=new c(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=c.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.conn_),p=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(l,p)},Math.floor(0));const b=c.healthyTimeout||0;b>0&&(this.healthyTimeout_=er(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(b)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(c){return l=>{c===this.conn_?this.onConnectionLost_(l):c===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(c){return l=>{2!==this.state_&&(c===this.rx_?this.onPrimaryMessageReceived_(l):c===this.secondaryConn_?this.onSecondaryMessageReceived_(l):this.log_("message on old connection"))}}sendRequest(c){this.sendData_({t:"d",d:c})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(c){if("t"in c){const l=c.t;"a"===l?this.upgradeIfSecondaryHealthy_():"r"===l?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===l&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(c){const l=Bi("t",c),p=Bi("d",c);if("c"===l)this.onSecondaryControl_(p);else{if("d"!==l)throw new Error("Unknown protocol layer: "+l);this.pendingDataMessages.push(p)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(c){const l=Bi("t",c),p=Bi("d",c);"c"===l?this.onControl_(p):"d"===l&&this.onDataMessage_(p)}onDataMessage_(c){this.onPrimaryResponse_(),this.onMessage_(c)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(c){const l=Bi("t",c);if("d"in c){const p=c.d;if("h"===l)this.onHandshake_(p);else if("n"===l){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let b=0;b<this.pendingDataMessages.length;++b)this.onDataMessage_(this.pendingDataMessages[b]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===l?this.onConnectionShutdown_(p):"r"===l?this.onReset_(p):"e"===l?Mo("Server Error: "+p):"o"===l?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Mo("Unknown control packet command: "+l)}}onHandshake_(c){const l=c.ts,p=c.v,b=c.h;this.sessionId=c.s,this.repoInfo_.host=b,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,l),"5"!==p&&Gr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const c=this.transportManager_.upgradeTransport();c&&this.startUpgrade_(c)}startUpgrade_(c){this.secondaryConn_=new c(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=c.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.secondaryConn_),p=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(l,p),er(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(c){this.log_("Reset packet received.  New host: "+c),this.repoInfo_.host=c,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(c,l){this.log_("Realtime connection established."),this.conn_=c,this.state_=1,this.onReady_&&(this.onReady_(l,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):er(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const c=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===c||this.rx_===c)&&this.close()}onConnectionLost_(c){this.conn_=null,c||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(os.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(c){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(c),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(c){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(c)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Ki{put(c,l,p,b){}merge(c,l,p,b){}refreshAuthToken(c){}refreshAppCheckToken(c){}onDisconnectPut(c,l,p){}onDisconnectMerge(c,l,p){}onDisconnectCancel(c,l){}reportStats(c){}}class uo{constructor(c){this.allowedEvents_=c,this.listeners_={},(0,je.hu)(Array.isArray(c)&&c.length>0,"Requires a non-empty array")}trigger(c,...l){if(Array.isArray(this.listeners_[c])){const p=[...this.listeners_[c]];for(let b=0;b<p.length;b++)p[b].callback.apply(p[b].context,l)}}on(c,l,p){this.validateEventType_(c),this.listeners_[c]=this.listeners_[c]||[],this.listeners_[c].push({callback:l,context:p});const b=this.getInitialEvent(c);b&&l.apply(p,b)}off(c,l,p){this.validateEventType_(c);const b=this.listeners_[c]||[];for(let P=0;P<b.length;P++)if(b[P].callback===l&&(!p||p===b[P].context))return void b.splice(P,1)}validateEventType_(c){(0,je.hu)(this.allowedEvents_.find(l=>l===c),"Unknown event: "+c)}}class Fn extends uo{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,je.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Fn}getInitialEvent(c){return(0,je.hu)("online"===c,"Unknown event type: "+c),[this.online_]}currentlyOnline(){return this.online_}}class hn{constructor(c,l){if(void 0===l){this.pieces_=c.split("/");let p=0;for(let b=0;b<this.pieces_.length;b++)this.pieces_[b].length>0&&(this.pieces_[p]=this.pieces_[b],p++);this.pieces_.length=p,this.pieceNum_=0}else this.pieces_=c,this.pieceNum_=l}toString(){let c="";for(let l=this.pieceNum_;l<this.pieces_.length;l++)""!==this.pieces_[l]&&(c+="/"+this.pieces_[l]);return c||"/"}}function bt(){return new hn("")}function Lt(d){return d.pieceNum_>=d.pieces_.length?null:d.pieces_[d.pieceNum_]}function fi(d){return d.pieces_.length-d.pieceNum_}function wi(d){let c=d.pieceNum_;return c<d.pieces_.length&&c++,new hn(d.pieces_,c)}function vc(d){return d.pieceNum_<d.pieces_.length?d.pieces_[d.pieces_.length-1]:null}function va(d,c=0){return d.pieces_.slice(d.pieceNum_+c)}function rc(d){if(d.pieceNum_>=d.pieces_.length)return null;const c=[];for(let l=d.pieceNum_;l<d.pieces_.length-1;l++)c.push(d.pieces_[l]);return new hn(c,0)}function Ti(d,c){const l=[];for(let p=d.pieceNum_;p<d.pieces_.length;p++)l.push(d.pieces_[p]);if(c instanceof hn)for(let p=c.pieceNum_;p<c.pieces_.length;p++)l.push(c.pieces_[p]);else{const p=c.split("/");for(let b=0;b<p.length;b++)p[b].length>0&&l.push(p[b])}return new hn(l,0)}function Pr(d){return d.pieceNum_>=d.pieces_.length}function Bs(d,c){const l=Lt(d),p=Lt(c);if(null===l)return c;if(l===p)return Bs(wi(d),wi(c));throw new Error("INTERNAL ERROR: innerPath ("+c+") is not within outerPath ("+d+")")}function Ec(d,c){const l=va(d,0),p=va(c,0);for(let b=0;b<l.length&&b<p.length;b++){const P=Ms(l[b],p[b]);if(0!==P)return P}return l.length===p.length?0:l.length<p.length?-1:1}function Ea(d,c){if(fi(d)!==fi(c))return!1;for(let l=d.pieceNum_,p=c.pieceNum_;l<=d.pieces_.length;l++,p++)if(d.pieces_[l]!==c.pieces_[p])return!1;return!0}function ms(d,c){let l=d.pieceNum_,p=c.pieceNum_;if(fi(d)>fi(c))return!1;for(;l<d.pieces_.length;){if(d.pieces_[l]!==c.pieces_[p])return!1;++l,++p}return!0}class yr{constructor(c,l){this.errorPrefix_=l,this.parts_=va(c,0),this.byteLength_=Math.max(1,this.parts_.length);for(let p=0;p<this.parts_.length;p++)this.byteLength_+=(0,je.ug)(this.parts_[p]);Mi(this)}}function Mi(d){if(d.byteLength_>768)throw new Error(d.errorPrefix_+"has a key path longer than 768 bytes ("+d.byteLength_+").");if(d.parts_.length>32)throw new Error(d.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+dr(d))}function dr(d){return 0===d.parts_.length?"":"in property '"+d.parts_.join(".")+"'"}class ba extends uo{constructor(){let c,l;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(l="visibilitychange",c="hidden"):void 0!==document.mozHidden?(l="mozvisibilitychange",c="mozHidden"):void 0!==document.msHidden?(l="msvisibilitychange",c="msHidden"):void 0!==document.webkitHidden&&(l="webkitvisibilitychange",c="webkitHidden")),this.visible_=!0,l&&document.addEventListener(l,()=>{const p=!document[c];p!==this.visible_&&(this.visible_=p,this.trigger("visible",p))},!1)}static getInstance(){return new ba}getInitialEvent(c){return(0,je.hu)("visible"===c,"Unknown event type: "+c),[this.visible_]}}const zr=1e3;let Ko,La=(()=>{class d extends Ki{constructor(l,p,b,P,z,ae,Ne,Qe){if(super(),this.repoInfo_=l,this.applicationId_=p,this.onDataUpdate_=b,this.onConnectStatus_=P,this.onServerInfoUpdate_=z,this.authTokenProvider_=ae,this.appCheckTokenProvider_=Ne,this.authOverride_=Qe,this.id=d.nextPersistentConnectionId_++,this.log_=ci("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=zr,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Qe&&!(0,je.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ba.getInstance().on("visible",this.onVisible_,this),-1===l.host.indexOf("fblocal")&&Fn.getInstance().on("online",this.onOnline_,this)}sendRequest(l,p,b){const P=++this.requestNumber_,z={r:P,a:l,b:p};this.log_((0,je.Wl)(z)),(0,je.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(z),b&&(this.requestCBHash_[P]=b)}get(l){this.initConnection_();const p=new je.BH,b={p:l._path.toString(),q:l._queryObject};return this.outstandingGets_.push({action:"g",request:b,onComplete:ae=>{const Ne=ae.d;"ok"===ae.s?p.resolve(Ne):p.reject(Ne)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),p.promise}listen(l,p,b,P){this.initConnection_();const z=l._queryIdentifier,ae=l._path.toString();this.log_("Listen called for "+ae+" "+z),this.listens.has(ae)||this.listens.set(ae,new Map),(0,je.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,je.hu)(!this.listens.get(ae).has(z),"listen() called twice for same path/queryId.");const Ne={onComplete:P,hashFn:p,query:l,tag:b};this.listens.get(ae).set(z,Ne),this.connected_&&this.sendListen_(Ne)}sendGet_(l){const p=this.outstandingGets_[l];this.sendRequest("g",p.request,b=>{delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),p.onComplete&&p.onComplete(b)})}sendListen_(l){const p=l.query,b=p._path.toString(),P=p._queryIdentifier;this.log_("Listen on "+b+" for "+P);const z={p:b};l.tag&&(z.q=p._queryObject,z.t=l.tag),z.h=l.hashFn(),this.sendRequest("q",z,Ne=>{const Qe=Ne.d,jt=Ne.s;d.warnOnListenWarnings_(Qe,p),(this.listens.get(b)&&this.listens.get(b).get(P))===l&&(this.log_("listen response",Ne),"ok"!==jt&&this.removeListen_(b,P),l.onComplete&&l.onComplete(jt,Qe))})}static warnOnListenWarnings_(l,p){if(l&&"object"==typeof l&&(0,je.r3)(l,"w")){const b=(0,je.DV)(l,"w");if(Array.isArray(b)&&~b.indexOf("no_index")){const P='".indexOn": "'+p._queryParams.getIndex().toString()+'"',z=p._path.toString();Gr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${P} at ${z} to your security rules for better performance.`)}}}refreshAuthToken(l){this.authToken_=l,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(l)}reduceReconnectDelayIfAdminCredential_(l){(l&&40===l.length||(0,je.GJ)(l))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(l){this.appCheckToken_=l,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const l=this.authToken_,p=(0,je.w9)(l)?"auth":"gauth",b={cred:l};null===this.authOverride_?b.noauth=!0:"object"==typeof this.authOverride_&&(b.authvar=this.authOverride_),this.sendRequest(p,b,P=>{const z=P.s,ae=P.d||"error";this.authToken_===l&&("ok"===z?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(z,ae))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},l=>{const p=l.s,b=l.d||"error";"ok"===p?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(p,b)})}unlisten(l,p){const b=l._path.toString(),P=l._queryIdentifier;this.log_("Unlisten called for "+b+" "+P),(0,je.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(b,P)&&this.connected_&&this.sendUnlisten_(b,P,l._queryObject,p)}sendUnlisten_(l,p,b,P){this.log_("Unlisten on "+l+" for "+p);const z={p:l};P&&(z.q=b,z.t=P),this.sendRequest("n",z)}onDisconnectPut(l,p,b){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",l,p,b):this.onDisconnectRequestQueue_.push({pathString:l,action:"o",data:p,onComplete:b})}onDisconnectMerge(l,p,b){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",l,p,b):this.onDisconnectRequestQueue_.push({pathString:l,action:"om",data:p,onComplete:b})}onDisconnectCancel(l,p){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",l,null,p):this.onDisconnectRequestQueue_.push({pathString:l,action:"oc",data:null,onComplete:p})}sendOnDisconnect_(l,p,b,P){const z={p,d:b};this.log_("onDisconnect "+l,z),this.sendRequest(l,z,ae=>{P&&setTimeout(()=>{P(ae.s,ae.d)},Math.floor(0))})}put(l,p,b,P){this.putInternal("p",l,p,b,P)}merge(l,p,b,P){this.putInternal("m",l,p,b,P)}putInternal(l,p,b,P,z){this.initConnection_();const ae={p,d:b};void 0!==z&&(ae.h=z),this.outstandingPuts_.push({action:l,request:ae,onComplete:P}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+p)}sendPut_(l){const p=this.outstandingPuts_[l].action,b=this.outstandingPuts_[l].request,P=this.outstandingPuts_[l].onComplete;this.outstandingPuts_[l].queued=this.connected_,this.sendRequest(p,b,z=>{this.log_(p+" response",z),delete this.outstandingPuts_[l],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),P&&P(z.s,z.d)})}reportStats(l){if(this.connected_){const p={c:l};this.log_("reportStats",p),this.sendRequest("s",p,b=>{"ok"!==b.s&&this.log_("reportStats","Error sending stats: "+b.d)})}}onDataMessage_(l){if("r"in l){this.log_("from server: "+(0,je.Wl)(l));const p=l.r,b=this.requestCBHash_[p];b&&(delete this.requestCBHash_[p],b(l.b))}else{if("error"in l)throw"A server-side error has occurred: "+l.error;"a"in l&&this.onDataPush_(l.a,l.b)}}onDataPush_(l,p){this.log_("handleServerMessage",l,p),"d"===l?this.onDataUpdate_(p.p,p.d,!1,p.t):"m"===l?this.onDataUpdate_(p.p,p.d,!0,p.t):"c"===l?this.onListenRevoked_(p.p,p.q):"ac"===l?this.onAuthRevoked_(p.s,p.d):"apc"===l?this.onAppCheckRevoked_(p.s,p.d):"sd"===l?this.onSecurityDebugPacket_(p):Mo("Unrecognized action received from server: "+(0,je.Wl)(l)+"\nAre you using the latest client?")}onReady_(l,p){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(l),this.lastSessionId=p,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(l){(0,je.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(l))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(l){l&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=zr,this.realtime_||this.scheduleConnect_(0)),this.visible_=l}onOnline_(l){l?(this.log_("Browser went online."),this.reconnectDelay_=zr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=zr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const l=(new Date).getTime()-this.lastConnectionAttemptTime_;let p=Math.max(0,this.reconnectDelay_-l);p=Math.random()*p,this.log_("Trying to reconnect in "+p+"ms"),this.scheduleConnect_(p),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var l=this;return(0,Gn.Z)(function*(){if(l.shouldReconnect_()){l.log_("Making a connection attempt"),l.lastConnectionAttemptTime_=(new Date).getTime(),l.lastConnectionEstablishedTime_=null;const p=l.onDataMessage_.bind(l),b=l.onReady_.bind(l),P=l.onRealtimeDisconnect_.bind(l),z=l.id+":"+d.nextConnectionId_++,ae=l.lastSessionId;let Ne=!1,Qe=null;const jt=function(){Qe?Qe.close():(Ne=!0,P())};l.realtime_={close:jt,sendRequest:function(Wn){(0,je.hu)(Qe,"sendRequest call when we're not connected not allowed."),Qe.sendRequest(Wn)}};const tn=l.forceTokenRefresh_;l.forceTokenRefresh_=!1;try{const[Wn,gr]=yield Promise.all([l.authTokenProvider_.getToken(tn),l.appCheckTokenProvider_.getToken(tn)]);Ne?_i("getToken() completed but was canceled"):(_i("getToken() completed. Creating connection."),l.authToken_=Wn&&Wn.accessToken,l.appCheckToken_=gr&&gr.token,Qe=new lr(z,l.repoInfo_,l.applicationId_,l.appCheckToken_,l.authToken_,p,b,P,Di=>{Gr(Di+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")},ae))}catch(Wn){l.log_("Failed to get token: "+Wn),Ne||(l.repoInfo_.nodeAdmin&&Gr(Wn),jt())}}})()}interrupt(l){_i("Interrupting connection for reason: "+l),this.interruptReasons_[l]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(l){_i("Resuming connection for reason: "+l),delete this.interruptReasons_[l],(0,je.xb)(this.interruptReasons_)&&(this.reconnectDelay_=zr,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(l){const p=l-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:p})}cancelSentTransactions_(){for(let l=0;l<this.outstandingPuts_.length;l++){const p=this.outstandingPuts_[l];p&&"h"in p.request&&p.queued&&(p.onComplete&&p.onComplete("disconnect"),delete this.outstandingPuts_[l],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(l,p){let b;b=p?p.map(z=>W(z)).join("$"):"default";const P=this.removeListen_(l,b);P&&P.onComplete&&P.onComplete("permission_denied")}removeListen_(l,p){const b=new hn(l).toString();let P;if(this.listens.has(b)){const z=this.listens.get(b);P=z.get(p),z.delete(p),0===z.size&&this.listens.delete(b)}else P=void 0;return P}onAuthRevoked_(l,p){_i("Auth token revoked: "+l+"/"+p),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===l||"permission_denied"===l)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(l,p){_i("App check token revoked: "+l+"/"+p),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===l||"permission_denied"===l)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(l){this.securityDebugCallback_?this.securityDebugCallback_(l):"msg"in l&&console.log("FIREBASE: "+l.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const l of this.listens.values())for(const p of l.values())this.sendListen_(p);for(let l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){const l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(let l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)}sendConnectStats_(){const l={};let p="js";(0,je.Yr)()&&(p=this.repoInfo_.nodeAdmin?"admin_node":"node"),l["sdk."+p+"."+mo.replace(/\./g,"-")]=1,(0,je.uI)()?l["framework.cordova"]=1:(0,je.b$)()&&(l["framework.reactnative"]=1),this.reportStats(l)}shouldReconnect_(){const l=Fn.getInstance().currentlyOnline();return(0,je.xb)(this.interruptReasons_)&&l}}return d.nextPersistentConnectionId_=0,d.nextConnectionId_=0,d})();class Or{constructor(c,l){this.name=c,this.node=l}static Wrap(c,l){return new Or(c,l)}}class Za{getCompare(){return this.compare.bind(this)}indexedValueChanged(c,l){const p=new Or(qi,c),b=new Or(qi,l);return 0!==this.compare(p,b)}minPost(){return Or.MIN}}class Qa extends Za{static get __EMPTY_NODE(){return Ko}static set __EMPTY_NODE(c){Ko=c}compare(c,l){return Ms(c.name,l.name)}isDefinedOn(c){throw(0,je.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(c,l){return!1}minPost(){return Or.MIN}maxPost(){return new Or(as,Ko)}makePost(c,l){return(0,je.hu)("string"==typeof c,"KeyIndex indexValue must always be a string."),new Or(c,Ko)}toString(){return".key"}}const V=new Qa;class x{constructor(c,l,p,b,P=null){this.isReverse_=b,this.resultGenerator_=P,this.nodeStack_=[];let z=1;for(;!c.isEmpty();)if(z=l?p(c.key,l):1,b&&(z*=-1),z<0)c=this.isReverse_?c.left:c.right;else{if(0===z){this.nodeStack_.push(c);break}this.nodeStack_.push(c),c=this.isReverse_?c.right:c.left}}getNext(){if(0===this.nodeStack_.length)return null;let l,c=this.nodeStack_.pop();if(l=this.resultGenerator_?this.resultGenerator_(c.key,c.value):{key:c.key,value:c.value},this.isReverse_)for(c=c.left;!c.isEmpty();)this.nodeStack_.push(c),c=c.right;else for(c=c.right;!c.isEmpty();)this.nodeStack_.push(c),c=c.left;return l}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const c=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(c.key,c.value):{key:c.key,value:c.value}}}let ge,S=(()=>{class d{constructor(l,p,b,P,z){this.key=l,this.value=p,this.color=null!=b?b:d.RED,this.left=null!=P?P:J.EMPTY_NODE,this.right=null!=z?z:J.EMPTY_NODE}copy(l,p,b,P,z){return new d(null!=l?l:this.key,null!=p?p:this.value,null!=b?b:this.color,null!=P?P:this.left,null!=z?z:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(l){return this.left.inorderTraversal(l)||!!l(this.key,this.value)||this.right.inorderTraversal(l)}reverseTraversal(l){return this.right.reverseTraversal(l)||l(this.key,this.value)||this.left.reverseTraversal(l)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(l,p,b){let P=this;const z=b(l,P.key);return P=z<0?P.copy(null,null,null,P.left.insert(l,p,b),null):0===z?P.copy(null,p,null,null,null):P.copy(null,null,null,null,P.right.insert(l,p,b)),P.fixUp_()}removeMin_(){if(this.left.isEmpty())return J.EMPTY_NODE;let l=this;return!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.removeMin_(),null),l.fixUp_()}remove(l,p){let b,P;if(b=this,p(l,b.key)<0)!b.left.isEmpty()&&!b.left.isRed_()&&!b.left.left.isRed_()&&(b=b.moveRedLeft_()),b=b.copy(null,null,null,b.left.remove(l,p),null);else{if(b.left.isRed_()&&(b=b.rotateRight_()),!b.right.isEmpty()&&!b.right.isRed_()&&!b.right.left.isRed_()&&(b=b.moveRedRight_()),0===p(l,b.key)){if(b.right.isEmpty())return J.EMPTY_NODE;P=b.right.min_(),b=b.copy(P.key,P.value,null,null,b.right.removeMin_())}b=b.copy(null,null,null,null,b.right.remove(l,p))}return b.fixUp_()}isRed_(){return this.color}fixUp_(){let l=this;return l.right.isRed_()&&!l.left.isRed_()&&(l=l.rotateLeft_()),l.left.isRed_()&&l.left.left.isRed_()&&(l=l.rotateRight_()),l.left.isRed_()&&l.right.isRed_()&&(l=l.colorFlip_()),l}moveRedLeft_(){let l=this.colorFlip_();return l.right.left.isRed_()&&(l=l.copy(null,null,null,null,l.right.rotateRight_()),l=l.rotateLeft_(),l=l.colorFlip_()),l}moveRedRight_(){let l=this.colorFlip_();return l.left.left.isRed_()&&(l=l.rotateRight_(),l=l.colorFlip_()),l}rotateLeft_(){const l=this.copy(null,null,d.RED,null,this.right.left);return this.right.copy(null,null,this.color,l,null)}rotateRight_(){const l=this.copy(null,null,d.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,l)}colorFlip_(){const l=this.left.copy(null,null,!this.left.color,null,null),p=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,l,p)}checkMaxDepth_(){const l=this.check_();return Math.pow(2,l)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const l=this.left.check_();if(l!==this.right.check_())throw new Error("Black depths differ");return l+(this.isRed_()?0:1)}}return d.RED=!0,d.BLACK=!1,d})();class J{constructor(c,l=J.EMPTY_NODE){this.comparator_=c,this.root_=l}insert(c,l){return new J(this.comparator_,this.root_.insert(c,l,this.comparator_).copy(null,null,S.BLACK,null,null))}remove(c){return new J(this.comparator_,this.root_.remove(c,this.comparator_).copy(null,null,S.BLACK,null,null))}get(c){let l,p=this.root_;for(;!p.isEmpty();){if(l=this.comparator_(c,p.key),0===l)return p.value;l<0?p=p.left:l>0&&(p=p.right)}return null}getPredecessorKey(c){let l,p=this.root_,b=null;for(;!p.isEmpty();){if(l=this.comparator_(c,p.key),0===l){if(p.left.isEmpty())return b?b.key:null;for(p=p.left;!p.right.isEmpty();)p=p.right;return p.key}l<0?p=p.left:l>0&&(b=p,p=p.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(c){return this.root_.inorderTraversal(c)}reverseTraversal(c){return this.root_.reverseTraversal(c)}getIterator(c){return new x(this.root_,null,this.comparator_,!1,c)}getIteratorFrom(c,l){return new x(this.root_,c,this.comparator_,!1,l)}getReverseIteratorFrom(c,l){return new x(this.root_,c,this.comparator_,!0,l)}getReverseIterator(c){return new x(this.root_,null,this.comparator_,!0,c)}}function ve(d,c){return Ms(d.name,c.name)}function qe(d,c){return Ms(d,c)}J.EMPTY_NODE=new class{copy(c,l,p,b,P){return this}insert(c,l,p){return new S(c,l,null)}remove(c,l){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(c){return!1}reverseTraversal(c){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Rn=function(d){return"number"==typeof d?"number:"+De(d):"string:"+d},jr=function(d){if(d.isLeafNode()){const c=d.val();(0,je.hu)("string"==typeof c||"number"==typeof c||"object"==typeof c&&(0,je.r3)(c,".sv"),"Priority must be a string or number.")}else(0,je.hu)(d===ge||d.isEmpty(),"priority of unexpected type.");(0,je.hu)(d===ge||d.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let tr,Dr,ns,Nr=(()=>{class d{constructor(l,p=d.__childrenNodeConstructor.EMPTY_NODE){this.value_=l,this.priorityNode_=p,this.lazyHash_=null,(0,je.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),jr(this.priorityNode_)}static set __childrenNodeConstructor(l){tr=l}static get __childrenNodeConstructor(){return tr}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(l){return new d(this.value_,l)}getImmediateChild(l){return".priority"===l?this.priorityNode_:d.__childrenNodeConstructor.EMPTY_NODE}getChild(l){return Pr(l)?this:".priority"===Lt(l)?this.priorityNode_:d.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(l,p){return null}updateImmediateChild(l,p){return".priority"===l?this.updatePriority(p):p.isEmpty()&&".priority"!==l?this:d.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(l,p).updatePriority(this.priorityNode_)}updateChild(l,p){const b=Lt(l);return null===b?p:p.isEmpty()&&".priority"!==b?this:((0,je.hu)(".priority"!==b||1===fi(l),".priority must be the last token in a path"),this.updateImmediateChild(b,d.__childrenNodeConstructor.EMPTY_NODE.updateChild(wi(l),p)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(l,p){return!1}val(l){return l&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let l="";this.priorityNode_.isEmpty()||(l+="priority:"+Rn(this.priorityNode_.val())+":");const p=typeof this.value_;l+=p+":",l+="number"===p?De(this.value_):this.value_,this.lazyHash_=Ji(l)}return this.lazyHash_}getValue(){return this.value_}compareTo(l){return l===d.__childrenNodeConstructor.EMPTY_NODE?1:l instanceof d.__childrenNodeConstructor?-1:((0,je.hu)(l.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(l))}compareToLeafNode_(l){const p=typeof l.value_,b=typeof this.value_,P=d.VALUE_TYPE_ORDER.indexOf(p),z=d.VALUE_TYPE_ORDER.indexOf(b);return(0,je.hu)(P>=0,"Unknown leaf type: "+p),(0,je.hu)(z>=0,"Unknown leaf type: "+b),P===z?"object"===b?0:this.value_<l.value_?-1:this.value_===l.value_?0:1:z-P}withIndex(){return this}isIndexed(){return!0}equals(l){if(l===this)return!0;if(l.isLeafNode()){const p=l;return this.value_===p.value_&&this.priorityNode_.equals(p.priorityNode_)}return!1}}return d.VALUE_TYPE_ORDER=["object","boolean","number","string"],d})();const oi=new class extends Za{compare(c,l){const p=c.node.getPriority(),b=l.node.getPriority(),P=p.compareTo(b);return 0===P?Ms(c.name,l.name):P}isDefinedOn(c){return!c.getPriority().isEmpty()}indexedValueChanged(c,l){return!c.getPriority().equals(l.getPriority())}minPost(){return Or.MIN}maxPost(){return new Or(as,new Nr("[PRIORITY-POST]",ns))}makePost(c,l){const p=Dr(c);return new Or(l,new Nr("[PRIORITY-POST]",p))}toString(){return".priority"}},rs=Math.log(2);class hl{constructor(c){this.count=parseInt(Math.log(c+1)/rs,10),this.current_=this.count-1;const b=(P=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=c+1&b}nextBitIsOne(){const c=!(this.bits_&1<<this.current_);return this.current_--,c}}const Co=function(d,c,l,p){d.sort(c);const b=function(Ne,Qe){const jt=Qe-Ne;let Wt,tn;if(0===jt)return null;if(1===jt)return Wt=d[Ne],tn=l?l(Wt):Wt,new S(tn,Wt.node,S.BLACK,null,null);{const Wn=parseInt(jt/2,10)+Ne,gr=b(Ne,Wn),Di=b(Wn+1,Qe);return Wt=d[Wn],tn=l?l(Wt):Wt,new S(tn,Wt.node,S.BLACK,gr,Di)}},ae=function(Ne){let Qe=null,jt=null,Wt=d.length;const tn=function(gr,Di){const Js=Wt-gr,nc=Wt;Wt-=gr;const Nl=b(Js+1,nc),kl=d[Js],xg=l?l(kl):kl;Wn(new S(xg,kl.node,Di,null,Nl))},Wn=function(gr){Qe?(Qe.left=gr,Qe=gr):(jt=gr,Qe=gr)};for(let gr=0;gr<Ne.count;++gr){const Di=Ne.nextBitIsOne(),Js=Math.pow(2,Ne.count-(gr+1));Di?tn(Js,S.BLACK):(tn(Js,S.BLACK),tn(Js,S.RED))}return jt}(new hl(d.length));return new J(p||c,ae)};let Ui;const ji={};class wo{constructor(c,l){this.indexes_=c,this.indexSet_=l}static get Default(){return(0,je.hu)(ji&&oi,"ChildrenNode.ts has not been loaded"),Ui=Ui||new wo({".priority":ji},{".priority":oi}),Ui}get(c){const l=(0,je.DV)(this.indexes_,c);if(!l)throw new Error("No index defined for "+c);return l instanceof J?l:null}hasIndex(c){return(0,je.r3)(this.indexSet_,c.toString())}addIndex(c,l){(0,je.hu)(c!==V,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const p=[];let b=!1;const P=l.getIterator(Or.Wrap);let ae,z=P.getNext();for(;z;)b=b||c.isDefinedOn(z.node),p.push(z),z=P.getNext();ae=b?Co(p,c.getCompare()):ji;const Ne=c.toString(),Qe=Object.assign({},this.indexSet_);Qe[Ne]=c;const jt=Object.assign({},this.indexes_);return jt[Ne]=ae,new wo(jt,Qe)}addToIndexes(c,l){const p=(0,je.UI)(this.indexes_,(b,P)=>{const z=(0,je.DV)(this.indexSet_,P);if((0,je.hu)(z,"Missing index implementation for "+P),b===ji){if(z.isDefinedOn(c.node)){const ae=[],Ne=l.getIterator(Or.Wrap);let Qe=Ne.getNext();for(;Qe;)Qe.name!==c.name&&ae.push(Qe),Qe=Ne.getNext();return ae.push(c),Co(ae,z.getCompare())}return ji}{const ae=l.get(c.name);let Ne=b;return ae&&(Ne=Ne.remove(new Or(c.name,ae))),Ne.insert(c,c.node)}});return new wo(p,this.indexSet_)}removeFromIndexes(c,l){const p=(0,je.UI)(this.indexes_,b=>{if(b===ji)return b;{const P=l.get(c.name);return P?b.remove(new Or(c.name,P)):b}});return new wo(p,this.indexSet_)}}let cs,zn=(()=>{class d{constructor(l,p,b){this.children_=l,this.priorityNode_=p,this.indexMap_=b,this.lazyHash_=null,this.priorityNode_&&jr(this.priorityNode_),this.children_.isEmpty()&&(0,je.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return cs||(cs=new d(new J(qe),null,wo.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||cs}updatePriority(l){return this.children_.isEmpty()?this:new d(this.children_,l,this.indexMap_)}getImmediateChild(l){if(".priority"===l)return this.getPriority();{const p=this.children_.get(l);return null===p?cs:p}}getChild(l){const p=Lt(l);return null===p?this:this.getImmediateChild(p).getChild(wi(l))}hasChild(l){return null!==this.children_.get(l)}updateImmediateChild(l,p){if((0,je.hu)(p,"We should always be passing snapshot nodes"),".priority"===l)return this.updatePriority(p);{const b=new Or(l,p);let P,z;p.isEmpty()?(P=this.children_.remove(l),z=this.indexMap_.removeFromIndexes(b,this.children_)):(P=this.children_.insert(l,p),z=this.indexMap_.addToIndexes(b,this.children_));const ae=P.isEmpty()?cs:this.priorityNode_;return new d(P,ae,z)}}updateChild(l,p){const b=Lt(l);if(null===b)return p;{(0,je.hu)(".priority"!==Lt(l)||1===fi(l),".priority must be the last token in a path");const P=this.getImmediateChild(b).updateChild(wi(l),p);return this.updateImmediateChild(b,P)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(l){if(this.isEmpty())return null;const p={};let b=0,P=0,z=!0;if(this.forEachChild(oi,(ae,Ne)=>{p[ae]=Ne.val(l),b++,z&&d.INTEGER_REGEXP_.test(ae)?P=Math.max(P,Number(ae)):z=!1}),!l&&z&&P<2*b){const ae=[];for(const Ne in p)ae[Ne]=p[Ne];return ae}return l&&!this.getPriority().isEmpty()&&(p[".priority"]=this.getPriority().val()),p}hash(){if(null===this.lazyHash_){let l="";this.getPriority().isEmpty()||(l+="priority:"+Rn(this.getPriority().val())+":"),this.forEachChild(oi,(p,b)=>{const P=b.hash();""!==P&&(l+=":"+p+":"+P)}),this.lazyHash_=""===l?"":Ji(l)}return this.lazyHash_}getPredecessorChildName(l,p,b){const P=this.resolveIndex_(b);if(P){const z=P.getPredecessorKey(new Or(l,p));return z?z.name:null}return this.children_.getPredecessorKey(l)}getFirstChildName(l){const p=this.resolveIndex_(l);if(p){const b=p.minKey();return b&&b.name}return this.children_.minKey()}getFirstChild(l){const p=this.getFirstChildName(l);return p?new Or(p,this.children_.get(p)):null}getLastChildName(l){const p=this.resolveIndex_(l);if(p){const b=p.maxKey();return b&&b.name}return this.children_.maxKey()}getLastChild(l){const p=this.getLastChildName(l);return p?new Or(p,this.children_.get(p)):null}forEachChild(l,p){const b=this.resolveIndex_(l);return b?b.inorderTraversal(P=>p(P.name,P.node)):this.children_.inorderTraversal(p)}getIterator(l){return this.getIteratorFrom(l.minPost(),l)}getIteratorFrom(l,p){const b=this.resolveIndex_(p);if(b)return b.getIteratorFrom(l,P=>P);{const P=this.children_.getIteratorFrom(l.name,Or.Wrap);let z=P.peek();for(;null!=z&&p.compare(z,l)<0;)P.getNext(),z=P.peek();return P}}getReverseIterator(l){return this.getReverseIteratorFrom(l.maxPost(),l)}getReverseIteratorFrom(l,p){const b=this.resolveIndex_(p);if(b)return b.getReverseIteratorFrom(l,P=>P);{const P=this.children_.getReverseIteratorFrom(l.name,Or.Wrap);let z=P.peek();for(;null!=z&&p.compare(z,l)>0;)P.getNext(),z=P.peek();return P}}compareTo(l){return this.isEmpty()?l.isEmpty()?0:-1:l.isLeafNode()||l.isEmpty()?1:l===fl?-1:0}withIndex(l){if(l===V||this.indexMap_.hasIndex(l))return this;{const p=this.indexMap_.addIndex(l,this.children_);return new d(this.children_,this.priorityNode_,p)}}isIndexed(l){return l===V||this.indexMap_.hasIndex(l)}equals(l){if(l===this)return!0;if(l.isLeafNode())return!1;{const p=l;if(this.getPriority().equals(p.getPriority())){if(this.children_.count()===p.children_.count()){const b=this.getIterator(oi),P=p.getIterator(oi);let z=b.getNext(),ae=P.getNext();for(;z&&ae;){if(z.name!==ae.name||!z.node.equals(ae.node))return!1;z=b.getNext(),ae=P.getNext()}return null===z&&null===ae}return!1}return!1}}resolveIndex_(l){return l===V?null:this.indexMap_.get(l.toString())}}return d.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,d})();const fl=new class extends zn{constructor(){super(new J(qe),zn.EMPTY_NODE,wo.Default)}compareTo(c){return c===this?0:1}equals(c){return c===this}getPriority(){return this}getImmediateChild(c){return zn.EMPTY_NODE}isEmpty(){return!1}};function is(d,c=null){if(null===d)return zn.EMPTY_NODE;if("object"==typeof d&&".priority"in d&&(c=d[".priority"]),(0,je.hu)(null===c||"string"==typeof c||"number"==typeof c||"object"==typeof c&&".sv"in c,"Invalid priority type found: "+typeof c),"object"==typeof d&&".value"in d&&null!==d[".value"]&&(d=d[".value"]),"object"!=typeof d||".sv"in d)return new Nr(d,is(c));if(d instanceof Array){let l=zn.EMPTY_NODE;return K(d,(p,b)=>{if((0,je.r3)(d,p)&&"."!==p.substring(0,1)){const P=is(b);(P.isLeafNode()||!P.isEmpty())&&(l=l.updateImmediateChild(p,P))}}),l.updatePriority(is(c))}{const l=[];let p=!1;if(K(d,(z,ae)=>{if("."!==z.substring(0,1)){const Ne=is(ae);Ne.isEmpty()||(p=p||!Ne.getPriority().isEmpty(),l.push(new Or(z,Ne)))}}),0===l.length)return zn.EMPTY_NODE;const P=Co(l,ve,z=>z.name,qe);if(p){const z=Co(l,oi.getCompare());return new zn(P,is(c),new wo({".priority":z},{".priority":oi}))}return new zn(P,is(c),wo.Default)}}Object.defineProperties(Or,{MIN:{value:new Or(qi,zn.EMPTY_NODE)},MAX:{value:new Or(as,fl)}}),Qa.__EMPTY_NODE=zn.EMPTY_NODE,Nr.__childrenNodeConstructor=zn,ge=fl,ns=fl,function(d){Dr=d}(is);class Cs extends Za{constructor(c){super(),this.indexPath_=c,(0,je.hu)(!Pr(c)&&".priority"!==Lt(c),"Can't create PathIndex with empty path or .priority key")}extractChild(c){return c.getChild(this.indexPath_)}isDefinedOn(c){return!c.getChild(this.indexPath_).isEmpty()}compare(c,l){const p=this.extractChild(c.node),b=this.extractChild(l.node),P=p.compareTo(b);return 0===P?Ms(c.name,l.name):P}makePost(c,l){const p=is(c),b=zn.EMPTY_NODE.updateChild(this.indexPath_,p);return new Or(l,b)}maxPost(){const c=zn.EMPTY_NODE.updateChild(this.indexPath_,fl);return new Or(as,c)}toString(){return va(this.indexPath_,0).join("/")}}const Zo=new class extends Za{compare(c,l){const p=c.node.compareTo(l.node);return 0===p?Ms(c.name,l.name):p}isDefinedOn(c){return!0}indexedValueChanged(c,l){return!c.equals(l)}minPost(){return Or.MIN}maxPost(){return Or.MAX}makePost(c,l){const p=is(c);return new Or(l,p)}toString(){return".value"}},yi="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Xa=function(){let d=0;const c=[];return function(l){const p=l===d;let b;d=l;const P=new Array(8);for(b=7;b>=0;b--)P[b]=yi.charAt(l%64),l=Math.floor(l/64);(0,je.hu)(0===l,"Cannot push at time == 0");let z=P.join("");if(p){for(b=11;b>=0&&63===c[b];b--)c[b]=0;c[b]++}else for(b=0;b<12;b++)c[b]=Math.floor(64*Math.random());for(b=0;b<12;b++)z+=yi.charAt(c[b]);return(0,je.hu)(20===z.length,"nextPushId: Length should be 20."),z}}(),Bl=function(d){if(d===""+k)return"-";const c=ce(d);if(null!=c)return""+(c+1);const l=new Array(d.length);for(let z=0;z<l.length;z++)l[z]=d.charAt(z);if(l.length<786)return l.push("-"),l.join("");let p=l.length-1;for(;p>=0&&"z"===l[p];)p--;if(-1===p)return as;const P=yi.charAt(yi.indexOf(l[p])+1);return l[p]=P,l.slice(0,p+1).join("")},ua=function(d){if(d===""+$)return qi;const c=ce(d);if(null!=c)return""+(c-1);const l=new Array(d.length);for(let p=0;p<l.length;p++)l[p]=d.charAt(p);return"-"===l[l.length-1]?1===l.length?""+k:(delete l[l.length-1],l.join("")):(l[l.length-1]=yi.charAt(yi.indexOf(l[l.length-1])-1),l.join("")+"z".repeat(786-l.length))};function ks(d){return{type:"value",snapshotNode:d}}function _s(d,c){return{type:"child_added",snapshotNode:c,childName:d}}function Fo(d,c){return{type:"child_removed",snapshotNode:c,childName:d}}function ws(d,c,l){return{type:"child_changed",snapshotNode:c,childName:d,oldSnap:l}}class Ba{constructor(c){this.index_=c}updateChild(c,l,p,b,P,z){(0,je.hu)(c.isIndexed(this.index_),"A node must be indexed if only a child is updated");const ae=c.getImmediateChild(l);return ae.getChild(b).equals(p.getChild(b))&&ae.isEmpty()===p.isEmpty()||(null!=z&&(p.isEmpty()?c.hasChild(l)?z.trackChildChange(Fo(l,ae)):(0,je.hu)(c.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):ae.isEmpty()?z.trackChildChange(_s(l,p)):z.trackChildChange(ws(l,p,ae))),c.isLeafNode()&&p.isEmpty())?c:c.updateImmediateChild(l,p).withIndex(this.index_)}updateFullNode(c,l,p){return null!=p&&(c.isLeafNode()||c.forEachChild(oi,(b,P)=>{l.hasChild(b)||p.trackChildChange(Fo(b,P))}),l.isLeafNode()||l.forEachChild(oi,(b,P)=>{if(c.hasChild(b)){const z=c.getImmediateChild(b);z.equals(P)||p.trackChildChange(ws(b,P,z))}else p.trackChildChange(_s(b,P))})),l.withIndex(this.index_)}updatePriority(c,l){return c.isEmpty()?zn.EMPTY_NODE:c.updatePriority(l)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Vo{constructor(c){this.indexedFilter_=new Ba(c.getIndex()),this.index_=c.getIndex(),this.startPost_=Vo.getStartPost_(c),this.endPost_=Vo.getEndPost_(c)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(c){return this.index_.compare(this.getStartPost(),c)<=0&&this.index_.compare(c,this.getEndPost())<=0}updateChild(c,l,p,b,P,z){return this.matches(new Or(l,p))||(p=zn.EMPTY_NODE),this.indexedFilter_.updateChild(c,l,p,b,P,z)}updateFullNode(c,l,p){l.isLeafNode()&&(l=zn.EMPTY_NODE);let b=l.withIndex(this.index_);b=b.updatePriority(zn.EMPTY_NODE);const P=this;return l.forEachChild(oi,(z,ae)=>{P.matches(new Or(z,ae))||(b=b.updateImmediateChild(z,zn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(c,b,p)}updatePriority(c,l){return c}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(c){if(c.hasStart()){const l=c.getIndexStartName();return c.getIndex().makePost(c.getIndexStartValue(),l)}return c.getIndex().minPost()}static getEndPost_(c){if(c.hasEnd()){const l=c.getIndexEndName();return c.getIndex().makePost(c.getIndexEndValue(),l)}return c.getIndex().maxPost()}}class bc{constructor(c){this.rangedFilter_=new Vo(c),this.index_=c.getIndex(),this.limit_=c.getLimit(),this.reverse_=!c.isViewFromLeft()}updateChild(c,l,p,b,P,z){return this.rangedFilter_.matches(new Or(l,p))||(p=zn.EMPTY_NODE),c.getImmediateChild(l).equals(p)?c:c.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(c,l,p,b,P,z):this.fullLimitUpdateChild_(c,l,p,P,z)}updateFullNode(c,l,p){let b;if(l.isLeafNode()||l.isEmpty())b=zn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<l.numChildren()&&l.isIndexed(this.index_)){let P;b=zn.EMPTY_NODE.withIndex(this.index_),P=this.reverse_?l.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let z=0;for(;P.hasNext()&&z<this.limit_;){const ae=P.getNext();let Ne;if(Ne=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),ae)<=0:this.index_.compare(ae,this.rangedFilter_.getEndPost())<=0,!Ne)break;b=b.updateImmediateChild(ae.name,ae.node),z++}}else{let P,z,ae,Ne;if(b=l.withIndex(this.index_),b=b.updatePriority(zn.EMPTY_NODE),this.reverse_){Ne=b.getReverseIterator(this.index_),P=this.rangedFilter_.getEndPost(),z=this.rangedFilter_.getStartPost();const Wt=this.index_.getCompare();ae=(tn,Wn)=>Wt(Wn,tn)}else Ne=b.getIterator(this.index_),P=this.rangedFilter_.getStartPost(),z=this.rangedFilter_.getEndPost(),ae=this.index_.getCompare();let Qe=0,jt=!1;for(;Ne.hasNext();){const Wt=Ne.getNext();!jt&&ae(P,Wt)<=0&&(jt=!0),jt&&Qe<this.limit_&&ae(Wt,z)<=0?Qe++:b=b.updateImmediateChild(Wt.name,zn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(c,b,p)}updatePriority(c,l){return c}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(c,l,p,b,P){let z;if(this.reverse_){const Wt=this.index_.getCompare();z=(tn,Wn)=>Wt(Wn,tn)}else z=this.index_.getCompare();const ae=c;(0,je.hu)(ae.numChildren()===this.limit_,"");const Ne=new Or(l,p),Qe=this.reverse_?ae.getFirstChild(this.index_):ae.getLastChild(this.index_),jt=this.rangedFilter_.matches(Ne);if(ae.hasChild(l)){const Wt=ae.getImmediateChild(l);let tn=b.getChildAfterChild(this.index_,Qe,this.reverse_);for(;null!=tn&&(tn.name===l||ae.hasChild(tn.name));)tn=b.getChildAfterChild(this.index_,tn,this.reverse_);const Wn=null==tn?1:z(tn,Ne);if(jt&&!p.isEmpty()&&Wn>=0)return null!=P&&P.trackChildChange(ws(l,p,Wt)),ae.updateImmediateChild(l,p);{null!=P&&P.trackChildChange(Fo(l,Wt));const Di=ae.updateImmediateChild(l,zn.EMPTY_NODE);return null!=tn&&this.rangedFilter_.matches(tn)?(null!=P&&P.trackChildChange(_s(tn.name,tn.node)),Di.updateImmediateChild(tn.name,tn.node)):Di}}return p.isEmpty()?c:jt&&z(Qe,Ne)>=0?(null!=P&&(P.trackChildChange(Fo(Qe.name,Qe.node)),P.trackChildChange(_s(l,p))),ae.updateImmediateChild(l,p).updateImmediateChild(Qe.name,zn.EMPTY_NODE)):c}}class da{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=oi}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,je.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,je.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:qi}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,je.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,je.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:as}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,je.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===oi}copy(){const c=new da;return c.limitSet_=this.limitSet_,c.limit_=this.limit_,c.startSet_=this.startSet_,c.indexStartValue_=this.indexStartValue_,c.startNameSet_=this.startNameSet_,c.indexStartName_=this.indexStartName_,c.endSet_=this.endSet_,c.indexEndValue_=this.indexEndValue_,c.endNameSet_=this.endNameSet_,c.indexEndName_=this.indexEndName_,c.index_=this.index_,c.viewFrom_=this.viewFrom_,c}}function Bo(d,c,l){const p=d.copy();return p.startSet_=!0,void 0===c&&(c=null),p.indexStartValue_=c,null!=l?(p.startNameSet_=!0,p.indexStartName_=l):(p.startNameSet_=!1,p.indexStartName_=""),p}function To(d,c,l){const p=d.copy();return p.endSet_=!0,void 0===c&&(c=null),p.indexEndValue_=c,void 0!==l?(p.endNameSet_=!0,p.indexEndName_=l):(p.endNameSet_=!1,p.indexEndName_=""),p}function $o(d,c){const l=d.copy();return l.index_=c,l}function Ic(d){const c={};if(d.isDefault())return c;let l;return d.index_===oi?l="$priority":d.index_===Zo?l="$value":d.index_===V?l="$key":((0,je.hu)(d.index_ instanceof Cs,"Unrecognized index type!"),l=d.index_.toString()),c.orderBy=(0,je.Wl)(l),d.startSet_&&(c.startAt=(0,je.Wl)(d.indexStartValue_),d.startNameSet_&&(c.startAt+=","+(0,je.Wl)(d.indexStartName_))),d.endSet_&&(c.endAt=(0,je.Wl)(d.indexEndValue_),d.endNameSet_&&(c.endAt+=","+(0,je.Wl)(d.indexEndName_))),d.limitSet_&&(d.isViewFromLeft()?c.limitToFirst=d.limit_:c.limitToLast=d.limit_),c}function gl(d){const c={};if(d.startSet_&&(c.sp=d.indexStartValue_,d.startNameSet_&&(c.sn=d.indexStartName_)),d.endSet_&&(c.ep=d.indexEndValue_,d.endNameSet_&&(c.en=d.indexEndName_)),d.limitSet_){c.l=d.limit_;let l=d.viewFrom_;""===l&&(l=d.isViewFromLeft()?"l":"r"),c.vf=l}return d.index_!==oi&&(c.i=d.index_.toString()),c}class $a extends Ki{constructor(c,l,p,b){super(),this.repoInfo_=c,this.onDataUpdate_=l,this.authTokenProvider_=p,this.appCheckTokenProvider_=b,this.log_=ci("p:rest:"),this.listens_={}}reportStats(c){throw new Error("Method not implemented.")}static getListenId_(c,l){return void 0!==l?"tag$"+l:((0,je.hu)(c._queryParams.isDefault(),"should have a tag if it's not a default query."),c._path.toString())}listen(c,l,p,b){const P=c._path.toString();this.log_("Listen called for "+P+" "+c._queryIdentifier);const z=$a.getListenId_(c,p),ae={};this.listens_[z]=ae;const Ne=Ic(c._queryParams);this.restRequest_(P+".json",Ne,(Qe,jt)=>{let Wt=jt;if(404===Qe&&(Wt=null,Qe=null),null===Qe&&this.onDataUpdate_(P,Wt,!1,p),(0,je.DV)(this.listens_,z)===ae){let tn;tn=Qe?401===Qe?"permission_denied":"rest_error:"+Qe:"ok",b(tn,null)}})}unlisten(c,l){const p=$a.getListenId_(c,l);delete this.listens_[p]}get(c){const l=Ic(c._queryParams),p=c._path.toString(),b=new je.BH;return this.restRequest_(p+".json",l,(P,z)=>{let ae=z;404===P&&(ae=null,P=null),null===P?(this.onDataUpdate_(p,ae,!1,null),b.resolve(ae)):b.reject(new Error(ae))}),b.promise}refreshAuthToken(c){}restRequest_(c,l={},p){return l.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([b,P])=>{b&&b.accessToken&&(l.auth=b.accessToken),P&&P.token&&(l.ac=P.token);const z=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+c+"?ns="+this.repoInfo_.namespace+(0,je.xO)(l);this.log_("Sending REST request for "+z);const ae=new XMLHttpRequest;ae.onreadystatechange=()=>{if(p&&4===ae.readyState){this.log_("REST Response for "+z+" received. status:",ae.status,"response:",ae.responseText);let Ne=null;if(ae.status>=200&&ae.status<300){try{Ne=(0,je.cI)(ae.responseText)}catch(Qe){Gr("Failed to parse JSON response for "+z+": "+ae.responseText)}p(null,Ne)}else 401!==ae.status&&404!==ae.status&&Gr("Got unsuccessful REST response for "+z+" Status: "+ae.status),p(ae.status);p=null}},ae.open("GET",z,!0),ae.send()})}}class Xc{constructor(){this.rootNode_=zn.EMPTY_NODE}getNode(c){return this.rootNode_.getChild(c)}updateSnapshot(c,l){this.rootNode_=this.rootNode_.updateChild(c,l)}}function el(){return{value:null,children:new Map}}function ha(d,c,l){if(Pr(c))d.value=l,d.children.clear();else if(null!==d.value)d.value=d.value.updateChild(c,l);else{const p=Lt(c);d.children.has(p)||d.children.set(p,el()),ha(d.children.get(p),c=wi(c),l)}}function B(d,c){if(Pr(c))return d.value=null,d.children.clear(),!0;if(null!==d.value){if(d.value.isLeafNode())return!1;{const l=d.value;return d.value=null,l.forEachChild(oi,(p,b)=>{ha(d,new hn(p),b)}),B(d,c)}}if(d.children.size>0){const l=Lt(c);return c=wi(c),d.children.has(l)&&B(d.children.get(l),c)&&d.children.delete(l),0===d.children.size}return!0}function Z(d,c,l){null!==d.value?l(c,d.value):function(d,c){d.children.forEach((l,p)=>{c(p,l)})}(d,(p,b)=>{Z(b,new hn(c.toString()+"/"+p),l)})}class ze{constructor(c){this.collection_=c,this.last_=null}get(){const c=this.collection_.get(),l=Object.assign({},c);return this.last_&&K(this.last_,(p,b)=>{l[p]=l[p]-b}),this.last_=c,l}}class Bn{constructor(c,l){this.server_=l,this.statsToReport_={},this.statsListener_=new ze(c);const p=1e4+2e4*Math.random();er(this.reportStats_.bind(this),Math.floor(p))}reportStats_(){const c=this.statsListener_.get(),l={};let p=!1;K(c,(b,P)=>{P>0&&(0,je.r3)(this.statsToReport_,b)&&(l[b]=P,p=!0)}),p&&this.server_.reportStats(l),er(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Yn=(()=>(function(d){d[d.OVERWRITE=0]="OVERWRITE",d[d.MERGE=1]="MERGE",d[d.ACK_USER_WRITE=2]="ACK_USER_WRITE",d[d.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Yn||(Yn={})),Yn))();function fr(d){return{fromUser:!1,fromServer:!0,queryId:d,tagged:!0}}class Li{constructor(c,l,p){this.path=c,this.affectedTree=l,this.revert=p,this.type=Yn.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(c){if(Pr(this.path)){if(null!=this.affectedTree.value)return(0,je.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const l=this.affectedTree.subtree(new hn(c));return new Li(bt(),l,this.revert)}}return(0,je.hu)(Lt(this.path)===c,"operationForChild called for unrelated child."),new Li(wi(this.path),this.affectedTree,this.revert)}}class pi{constructor(c,l){this.source=c,this.path=l,this.type=Yn.LISTEN_COMPLETE}operationForChild(c){return Pr(this.path)?new pi(this.source,bt()):new pi(this.source,wi(this.path))}}class Ei{constructor(c,l,p){this.source=c,this.path=l,this.snap=p,this.type=Yn.OVERWRITE}operationForChild(c){return Pr(this.path)?new Ei(this.source,bt(),this.snap.getImmediateChild(c)):new Ei(this.source,wi(this.path),this.snap)}}class Uo{constructor(c,l,p){this.source=c,this.path=l,this.children=p,this.type=Yn.MERGE}operationForChild(c){if(Pr(this.path)){const l=this.children.subtree(new hn(c));return l.isEmpty()?null:l.value?new Ei(this.source,bt(),l.value):new Uo(this.source,bt(),l)}return(0,je.hu)(Lt(this.path)===c,"Can't get a merge for a child not on the path of the operation"),new Uo(this.source,wi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Xo{constructor(c,l,p){this.node_=c,this.fullyInitialized_=l,this.filtered_=p}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(c){if(Pr(c))return this.isFullyInitialized()&&!this.filtered_;const l=Lt(c);return this.isCompleteForChild(l)}isCompleteForChild(c){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(c)}getNode(){return this.node_}}class Jo{constructor(c){this.query_=c,this.index_=this.query_._queryParams.getIndex()}}function Ua(d,c,l,p,b,P){const z=p.filter(ae=>ae.type===l);z.sort((ae,Ne)=>function(d,c,l){if(null==c.childName||null==l.childName)throw(0,je.g5)("Should only compare child_ events.");const p=new Or(c.childName,c.snapshotNode),b=new Or(l.childName,l.snapshotNode);return d.index_.compare(p,b)}(d,ae,Ne)),z.forEach(ae=>{const Ne=function(d,c,l){return"value"===c.type||"child_removed"===c.type||(c.prevName=l.getPredecessorChildName(c.childName,c.snapshotNode,d.index_)),c}(d,ae,P);b.forEach(Qe=>{Qe.respondsTo(ae.type)&&c.push(Qe.createEvent(Ne,d.query_))})})}function jo(d,c){return{eventCache:d,serverCache:c}}function Ho(d,c,l,p){return jo(new Xo(c,l,p),d.serverCache)}function Ha(d,c,l,p){return jo(d.eventCache,new Xo(c,l,p))}function yl(d){return d.eventCache.isFullyInitialized()?d.eventCache.getNode():null}function Do(d){return d.serverCache.isFullyInitialized()?d.serverCache.getNode():null}let Wa;class gi{constructor(c,l=(()=>(Wa||(Wa=new J(Ni)),Wa))()){this.value=c,this.children=l}static fromObject(c){let l=new gi(null);return K(c,(p,b)=>{l=l.set(new hn(p),b)}),l}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(c,l){if(null!=this.value&&l(this.value))return{path:bt(),value:this.value};if(Pr(c))return null;{const p=Lt(c),b=this.children.get(p);if(null!==b){const P=b.findRootMostMatchingPathAndValue(wi(c),l);return null!=P?{path:Ti(new hn(p),P.path),value:P.value}:null}return null}}findRootMostValueAndPath(c){return this.findRootMostMatchingPathAndValue(c,()=>!0)}subtree(c){if(Pr(c))return this;{const l=Lt(c),p=this.children.get(l);return null!==p?p.subtree(wi(c)):new gi(null)}}set(c,l){if(Pr(c))return new gi(l,this.children);{const p=Lt(c),P=(this.children.get(p)||new gi(null)).set(wi(c),l),z=this.children.insert(p,P);return new gi(this.value,z)}}remove(c){if(Pr(c))return this.children.isEmpty()?new gi(null):new gi(null,this.children);{const l=Lt(c),p=this.children.get(l);if(p){const b=p.remove(wi(c));let P;return P=b.isEmpty()?this.children.remove(l):this.children.insert(l,b),null===this.value&&P.isEmpty()?new gi(null):new gi(this.value,P)}return this}}get(c){if(Pr(c))return this.value;{const l=Lt(c),p=this.children.get(l);return p?p.get(wi(c)):null}}setTree(c,l){if(Pr(c))return l;{const p=Lt(c),P=(this.children.get(p)||new gi(null)).setTree(wi(c),l);let z;return z=P.isEmpty()?this.children.remove(p):this.children.insert(p,P),new gi(this.value,z)}}fold(c){return this.fold_(bt(),c)}fold_(c,l){const p={};return this.children.inorderTraversal((b,P)=>{p[b]=P.fold_(Ti(c,b),l)}),l(c,this.value,p)}findOnPath(c,l){return this.findOnPath_(c,bt(),l)}findOnPath_(c,l,p){const b=!!this.value&&p(l,this.value);if(b)return b;if(Pr(c))return null;{const P=Lt(c),z=this.children.get(P);return z?z.findOnPath_(wi(c),Ti(l,P),p):null}}foreachOnPath(c,l){return this.foreachOnPath_(c,bt(),l)}foreachOnPath_(c,l,p){if(Pr(c))return this;{this.value&&p(l,this.value);const b=Lt(c),P=this.children.get(b);return P?P.foreachOnPath_(wi(c),Ti(l,b),p):new gi(null)}}foreach(c){this.foreach_(bt(),c)}foreach_(c,l){this.children.inorderTraversal((p,b)=>{b.foreach_(Ti(c,p),l)}),this.value&&l(c,this.value)}foreachChild(c){this.children.inorderTraversal((l,p)=>{p.value&&c(l,p.value)})}}class Wo{constructor(c){this.writeTree_=c}static empty(){return new Wo(new gi(null))}}function $l(d,c,l){if(Pr(c))return new Wo(new gi(l));{const p=d.writeTree_.findRootMostValueAndPath(c);if(null!=p){const b=p.path;let P=p.value;const z=Bs(b,c);return P=P.updateChild(z,l),new Wo(d.writeTree_.set(b,P))}{const b=new gi(l),P=d.writeTree_.setTree(c,b);return new Wo(P)}}}function ic(d,c,l){let p=d;return K(l,(b,P)=>{p=$l(p,Ti(c,b),P)}),p}function xu(d,c){if(Pr(c))return Wo.empty();{const l=d.writeTree_.setTree(c,new gi(null));return new Wo(l)}}function fa(d,c){return null!=Wi(d,c)}function Wi(d,c){const l=d.writeTree_.findRootMostValueAndPath(c);return null!=l?d.writeTree_.get(l.path).getChild(Bs(l.path,c)):null}function Jc(d){const c=[],l=d.writeTree_.value;return null!=l?l.isLeafNode()||l.forEachChild(oi,(p,b)=>{c.push(new Or(p,b))}):d.writeTree_.children.inorderTraversal((p,b)=>{null!=b.value&&c.push(new Or(p,b.value))}),c}function pa(d,c){if(Pr(c))return d;{const l=Wi(d,c);return new Wo(null!=l?new gi(l):d.writeTree_.subtree(c))}}function sc(d){return d.writeTree_.isEmpty()}function tl(d,c){return Ru(bt(),d.writeTree_,c)}function Ru(d,c,l){if(null!=c.value)return l.updateChild(d,c.value);{let p=null;return c.children.inorderTraversal((b,P)=>{".priority"===b?((0,je.hu)(null!==P.value,"Priority writes must always be leaf nodes"),p=P.value):l=Ru(Ti(d,b),P,l)}),!l.getChild(d).isEmpty()&&null!==p&&(l=l.updateChild(Ti(d,".priority"),p)),l}}function oc(d,c){return nu(c,d)}function ac(d,c){if(d.snap)return ms(d.path,c);for(const l in d.children)if(d.children.hasOwnProperty(l)&&ms(Ti(d.path,l),c))return!0;return!1}function md(d){return d.visible}function Mf(d,c,l){let p=Wo.empty();for(let b=0;b<d.length;++b){const P=d[b];if(c(P)){const z=P.path;let ae;if(P.snap)ms(l,z)?(ae=Bs(l,z),p=$l(p,ae,P.snap)):ms(z,l)&&(ae=Bs(z,l),p=$l(p,bt(),P.snap.getChild(ae)));else{if(!P.children)throw(0,je.g5)("WriteRecord should have .snap or .children");if(ms(l,z))ae=Bs(l,z),p=ic(p,ae,P.children);else if(ms(z,l))if(ae=Bs(z,l),Pr(ae))p=ic(p,bt(),P.children);else{const Ne=(0,je.DV)(P.children,Lt(ae));if(Ne){const Qe=Ne.getChild(wi(ae));p=$l(p,bt(),Qe)}}}}}return p}function wc(d,c,l,p,b){if(p||b){const P=pa(d.visibleWrites,c);return!b&&sc(P)?l:b||null!=l||fa(P,bt())?tl(Mf(d.allWrites,function(Qe){return(Qe.visible||b)&&(!p||!~p.indexOf(Qe.writeId))&&(ms(Qe.path,c)||ms(c,Qe.path))},c),l||zn.EMPTY_NODE):null}{const P=Wi(d.visibleWrites,c);if(null!=P)return P;{const z=pa(d.visibleWrites,c);return sc(z)?l:null!=l||fa(z,bt())?tl(z,l||zn.EMPTY_NODE):null}}}function Hl(d,c,l,p){return wc(d.writeTree,d.treePath,c,l,p)}function Mu(d,c){return function(d,c,l){let p=zn.EMPTY_NODE;const b=Wi(d.visibleWrites,c);if(b)return b.isLeafNode()||b.forEachChild(oi,(P,z)=>{p=p.updateImmediateChild(P,z)}),p;if(l){const P=pa(d.visibleWrites,c);return l.forEachChild(oi,(z,ae)=>{const Ne=tl(pa(P,new hn(z)),ae);p=p.updateImmediateChild(z,Ne)}),Jc(P).forEach(z=>{p=p.updateImmediateChild(z.name,z.node)}),p}return Jc(pa(d.visibleWrites,c)).forEach(z=>{p=p.updateImmediateChild(z.name,z.node)}),p}(d.writeTree,d.treePath,c)}function Dc(d,c,l,p){return function(d,c,l,p,b){(0,je.hu)(p||b,"Either existingEventSnap or existingServerSnap must exist");const P=Ti(c,l);if(fa(d.visibleWrites,P))return null;{const z=pa(d.visibleWrites,P);return sc(z)?b.getChild(l):tl(z,b.getChild(l))}}(d.writeTree,d.treePath,c,l,p)}function Pu(d,c){return function(d,c){return Wi(d.visibleWrites,c)}(d.writeTree,Ti(d.treePath,c))}function Si(d,c,l){return function(d,c,l,p){const b=Ti(c,l),P=Wi(d.visibleWrites,b);return null!=P?P:p.isCompleteForChild(l)?tl(pa(d.visibleWrites,b),p.getNode().getImmediateChild(l)):null}(d.writeTree,d.treePath,c,l)}function Sc(d,c){return nu(Ti(d.treePath,c),d.writeTree)}function nu(d,c){return{treePath:d,writeTree:c}}class gh{constructor(){this.changeMap=new Map}trackChildChange(c){const l=c.type,p=c.childName;(0,je.hu)("child_added"===l||"child_changed"===l||"child_removed"===l,"Only child changes supported for tracking"),(0,je.hu)(".priority"!==p,"Only non-priority child changes can be tracked.");const b=this.changeMap.get(p);if(b){const P=b.type;if("child_added"===l&&"child_removed"===P)this.changeMap.set(p,ws(p,c.snapshotNode,b.snapshotNode));else if("child_removed"===l&&"child_added"===P)this.changeMap.delete(p);else if("child_removed"===l&&"child_changed"===P)this.changeMap.set(p,Fo(p,b.oldSnap));else if("child_changed"===l&&"child_added"===P)this.changeMap.set(p,_s(p,c.snapshotNode));else{if("child_changed"!==l||"child_changed"!==P)throw(0,je.g5)("Illegal combination of changes: "+c+" occurred after "+b);this.changeMap.set(p,ws(p,c.snapshotNode,b.oldSnap))}}else this.changeMap.set(p,c)}getChanges(){return Array.from(this.changeMap.values())}}const Ac=new class{getCompleteChild(c){return null}getChildAfterChild(c,l,p){return null}};class vd{constructor(c,l,p=null){this.writes_=c,this.viewCache_=l,this.optCompleteServerCache_=p}getCompleteChild(c){const l=this.viewCache_.eventCache;if(l.isCompleteForChild(c))return l.getNode().getImmediateChild(c);{const p=null!=this.optCompleteServerCache_?new Xo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Si(this.writes_,c,p)}}getChildAfterChild(c,l,p){const b=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Do(this.viewCache_),P=function(d,c,l,p,b,P){return function(d,c,l,p,b,P,z){let ae;const Ne=pa(d.visibleWrites,c),Qe=Wi(Ne,bt());if(null!=Qe)ae=Qe;else{if(null==l)return[];ae=tl(Ne,l)}if(ae=ae.withIndex(z),ae.isEmpty()||ae.isLeafNode())return[];{const jt=[],Wt=z.getCompare(),tn=P?ae.getReverseIteratorFrom(p,z):ae.getIteratorFrom(p,z);let Wn=tn.getNext();for(;Wn&&jt.length<b;)0!==Wt(Wn,p)&&jt.push(Wn),Wn=tn.getNext();return jt}}(d.writeTree,d.treePath,c,l,p,b,P)}(this.writes_,b,l,1,p,c);return 0===P.length?null:P[0]}}function Id(d,c,l,p,b,P){const z=c.eventCache;if(null!=Pu(p,l))return c;{let ae,Ne;if(Pr(l))if((0,je.hu)(c.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),c.serverCache.isFiltered()){const Qe=Do(c),Wt=Mu(p,Qe instanceof zn?Qe:zn.EMPTY_NODE);ae=d.filter.updateFullNode(c.eventCache.getNode(),Wt,P)}else{const Qe=Hl(p,Do(c));ae=d.filter.updateFullNode(c.eventCache.getNode(),Qe,P)}else{const Qe=Lt(l);if(".priority"===Qe){(0,je.hu)(1===fi(l),"Can't have a priority with additional path components");const jt=z.getNode();Ne=c.serverCache.getNode();const Wt=Dc(p,l,jt,Ne);ae=null!=Wt?d.filter.updatePriority(jt,Wt):z.getNode()}else{const jt=wi(l);let Wt;if(z.isCompleteForChild(Qe)){Ne=c.serverCache.getNode();const tn=Dc(p,l,z.getNode(),Ne);Wt=null!=tn?z.getNode().getImmediateChild(Qe).updateChild(jt,tn):z.getNode().getImmediateChild(Qe)}else Wt=Si(p,Qe,c.serverCache);ae=null!=Wt?d.filter.updateChild(z.getNode(),Qe,Wt,jt,b,P):z.getNode()}}return Ho(c,ae,z.isFullyInitialized()||Pr(l),d.filter.filtersNodes())}}function Ou(d,c,l,p,b,P,z,ae){const Ne=c.serverCache;let Qe;const jt=z?d.filter:d.filter.getIndexedFilter();if(Pr(l))Qe=jt.updateFullNode(Ne.getNode(),p,null);else if(jt.filtersNodes()&&!Ne.isFiltered()){const Wn=Ne.getNode().updateChild(l,p);Qe=jt.updateFullNode(Ne.getNode(),Wn,null)}else{const Wn=Lt(l);if(!Ne.isCompleteForPath(l)&&fi(l)>1)return c;const gr=wi(l),Js=Ne.getNode().getImmediateChild(Wn).updateChild(gr,p);Qe=".priority"===Wn?jt.updatePriority(Ne.getNode(),Js):jt.updateChild(Ne.getNode(),Wn,Js,gr,Ac,null)}const Wt=Ha(c,Qe,Ne.isFullyInitialized()||Pr(l),jt.filtersNodes());return Id(d,Wt,l,b,new vd(b,Wt,P),ae)}function Wl(d,c,l,p,b,P,z){const ae=c.eventCache;let Ne,Qe;const jt=new vd(b,c,P);if(Pr(l))Qe=d.filter.updateFullNode(c.eventCache.getNode(),p,z),Ne=Ho(c,Qe,!0,d.filter.filtersNodes());else{const Wt=Lt(l);if(".priority"===Wt)Qe=d.filter.updatePriority(c.eventCache.getNode(),p),Ne=Ho(c,Qe,ae.isFullyInitialized(),ae.isFiltered());else{const tn=wi(l),Wn=ae.getNode().getImmediateChild(Wt);let gr;if(Pr(tn))gr=p;else{const Di=jt.getCompleteChild(Wt);gr=null!=Di?".priority"===vc(tn)&&Di.getChild(rc(tn)).isEmpty()?Di:Di.updateChild(tn,p):zn.EMPTY_NODE}Ne=Wn.equals(gr)?c:Ho(c,d.filter.updateChild(ae.getNode(),Wt,gr,tn,jt,z),ae.isFullyInitialized(),d.filter.filtersNodes())}}return Ne}function Gl(d,c){return d.eventCache.isCompleteForChild(c)}function Pi(d,c,l){return l.foreach((p,b)=>{c=c.updateChild(p,b)}),c}function Jr(d,c,l,p,b,P,z,ae){if(c.serverCache.getNode().isEmpty()&&!c.serverCache.isFullyInitialized())return c;let Qe,Ne=c;Qe=Pr(l)?p:new gi(null).setTree(l,p);const jt=c.serverCache.getNode();return Qe.children.inorderTraversal((Wt,tn)=>{if(jt.hasChild(Wt)){const gr=Pi(0,c.serverCache.getNode().getImmediateChild(Wt),tn);Ne=Ou(d,Ne,new hn(Wt),gr,b,P,z,ae)}}),Qe.children.inorderTraversal((Wt,tn)=>{const Wn=!c.serverCache.isCompleteForChild(Wt)&&null===tn.value;if(!jt.hasChild(Wt)&&!Wn){const Di=Pi(0,c.serverCache.getNode().getImmediateChild(Wt),tn);Ne=Ou(d,Ne,new hn(Wt),Di,b,P,z,ae)}}),Ne}class mh{constructor(c,l){this.query_=c,this.eventRegistrations_=[];const p=this.query_._queryParams,b=new Ba(p.getIndex()),P=function(d){return d.loadsAllData()?new Ba(d.getIndex()):d.hasLimit()?new bc(d):new Vo(d)}(p);this.processor_=function(d){return{filter:d}}(P);const z=l.serverCache,ae=l.eventCache,Ne=b.updateFullNode(zn.EMPTY_NODE,z.getNode(),null),Qe=P.updateFullNode(zn.EMPTY_NODE,ae.getNode(),null),jt=new Xo(Ne,z.isFullyInitialized(),b.filtersNodes()),Wt=new Xo(Qe,ae.isFullyInitialized(),P.filtersNodes());this.viewCache_=jo(Wt,jt),this.eventGenerator_=new Jo(this.query_)}get query(){return this.query_}}function zl(d,c){const l=Do(d.viewCache_);return l&&(d.query._queryParams.loadsAllData()||!Pr(c)&&!l.getImmediateChild(Lt(c)).isEmpty())?l.getChild(c):null}function ru(d){return 0===d.eventRegistrations_.length}function _h(d,c,l){const p=[];if(l){(0,je.hu)(null==c,"A cancel should cancel all event registrations.");const b=d.query._path;d.eventRegistrations_.forEach(P=>{const z=P.createCancelEvent(l,b);z&&p.push(z)})}if(c){let b=[];for(let P=0;P<d.eventRegistrations_.length;++P){const z=d.eventRegistrations_[P];if(z.matches(c)){if(c.hasAnyCallback()){b=b.concat(d.eventRegistrations_.slice(P+1));break}}else b.push(z)}d.eventRegistrations_=b}else d.eventRegistrations_=[];return p}function iu(d,c,l,p){c.type===Yn.MERGE&&null!==c.source.queryId&&((0,je.hu)(Do(d.viewCache_),"We should always have a full cache before handling merges"),(0,je.hu)(yl(d.viewCache_),"Missing event cache, even though we have a server cache"));const b=d.viewCache_,P=function(d,c,l,p,b){const P=new gh;let z,ae;if(l.type===Yn.OVERWRITE){const Qe=l;Qe.source.fromUser?z=Wl(d,c,Qe.path,Qe.snap,p,b,P):((0,je.hu)(Qe.source.fromServer,"Unknown source."),ae=Qe.source.tagged||c.serverCache.isFiltered()&&!Pr(Qe.path),z=Ou(d,c,Qe.path,Qe.snap,p,b,ae,P))}else if(l.type===Yn.MERGE){const Qe=l;Qe.source.fromUser?z=function(d,c,l,p,b,P,z){let ae=c;return p.foreach((Ne,Qe)=>{const jt=Ti(l,Ne);Gl(c,Lt(jt))&&(ae=Wl(d,ae,jt,Qe,b,P,z))}),p.foreach((Ne,Qe)=>{const jt=Ti(l,Ne);Gl(c,Lt(jt))||(ae=Wl(d,ae,jt,Qe,b,P,z))}),ae}(d,c,Qe.path,Qe.children,p,b,P):((0,je.hu)(Qe.source.fromServer,"Unknown source."),ae=Qe.source.tagged||c.serverCache.isFiltered(),z=Jr(d,c,Qe.path,Qe.children,p,b,ae,P))}else if(l.type===Yn.ACK_USER_WRITE){const Qe=l;z=Qe.revert?function(d,c,l,p,b,P){let z;if(null!=Pu(p,l))return c;{const ae=new vd(p,c,b),Ne=c.eventCache.getNode();let Qe;if(Pr(l)||".priority"===Lt(l)){let jt;if(c.serverCache.isFullyInitialized())jt=Hl(p,Do(c));else{const Wt=c.serverCache.getNode();(0,je.hu)(Wt instanceof zn,"serverChildren would be complete if leaf node"),jt=Mu(p,Wt)}Qe=d.filter.updateFullNode(Ne,jt,P)}else{const jt=Lt(l);let Wt=Si(p,jt,c.serverCache);null==Wt&&c.serverCache.isCompleteForChild(jt)&&(Wt=Ne.getImmediateChild(jt)),Qe=null!=Wt?d.filter.updateChild(Ne,jt,Wt,wi(l),ae,P):c.eventCache.getNode().hasChild(jt)?d.filter.updateChild(Ne,jt,zn.EMPTY_NODE,wi(l),ae,P):Ne,Qe.isEmpty()&&c.serverCache.isFullyInitialized()&&(z=Hl(p,Do(c)),z.isLeafNode()&&(Qe=d.filter.updateFullNode(Qe,z,P)))}return z=c.serverCache.isFullyInitialized()||null!=Pu(p,bt()),Ho(c,Qe,z,d.filter.filtersNodes())}}(d,c,Qe.path,p,b,P):function(d,c,l,p,b,P,z){if(null!=Pu(b,l))return c;const ae=c.serverCache.isFiltered(),Ne=c.serverCache;if(null!=p.value){if(Pr(l)&&Ne.isFullyInitialized()||Ne.isCompleteForPath(l))return Ou(d,c,l,Ne.getNode().getChild(l),b,P,ae,z);if(Pr(l)){let Qe=new gi(null);return Ne.getNode().forEachChild(V,(jt,Wt)=>{Qe=Qe.set(new hn(jt),Wt)}),Jr(d,c,l,Qe,b,P,ae,z)}return c}{let Qe=new gi(null);return p.foreach((jt,Wt)=>{const tn=Ti(l,jt);Ne.isCompleteForPath(tn)&&(Qe=Qe.set(jt,Ne.getNode().getChild(tn)))}),Jr(d,c,l,Qe,b,P,ae,z)}}(d,c,Qe.path,Qe.affectedTree,p,b,P)}else{if(l.type!==Yn.LISTEN_COMPLETE)throw(0,je.g5)("Unknown operation type: "+l.type);z=function(d,c,l,p,b){const P=c.serverCache;return Id(d,Ha(c,P.getNode(),P.isFullyInitialized()||Pr(l),P.isFiltered()),l,p,Ac,b)}(d,c,l.path,p,P)}const Ne=P.getChanges();return function(d,c,l){const p=c.eventCache;if(p.isFullyInitialized()){const b=p.getNode().isLeafNode()||p.getNode().isEmpty(),P=yl(d);(l.length>0||!d.eventCache.isFullyInitialized()||b&&!p.getNode().equals(P)||!p.getNode().getPriority().equals(P.getPriority()))&&l.push(ks(yl(c)))}}(c,z,Ne),{viewCache:z,changes:Ne}}(d.processor_,b,c,l,p);return function(d,c){(0,je.hu)(c.eventCache.getNode().isIndexed(d.filter.getIndex()),"Event snap not indexed"),(0,je.hu)(c.serverCache.getNode().isIndexed(d.filter.getIndex()),"Server snap not indexed")}(d.processor_,P.viewCache),(0,je.hu)(P.viewCache.serverCache.isFullyInitialized()||!b.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),d.viewCache_=P.viewCache,wd(d,P.changes,P.viewCache.eventCache.getNode(),null)}function wd(d,c,l,p){return function(d,c,l,p){const b=[],P=[];return c.forEach(z=>{"child_changed"===z.type&&d.index_.indexedValueChanged(z.oldSnap,z.snapshotNode)&&P.push(function(d,c){return{type:"child_moved",snapshotNode:c,childName:d}}(z.childName,z.snapshotNode))}),Ua(d,b,"child_removed",c,p,l),Ua(d,b,"child_added",c,p,l),Ua(d,b,"child_moved",P,p,l),Ua(d,b,"child_changed",c,p,l),Ua(d,b,"value",c,p,l),b}(d.eventGenerator_,c,l,p?[p]:d.eventRegistrations_)}let Hr,Ts;class Eh{constructor(){this.views=new Map}}function R(d,c,l,p){const b=c.source.queryId;if(null!==b){const P=d.views.get(b);return(0,je.hu)(null!=P,"SyncTree gave us an op for an invalid query."),iu(P,c,l,p)}{let P=[];for(const z of d.views.values())P=P.concat(iu(z,c,l,p));return P}}function ee(d,c,l,p,b){const z=d.views.get(c._queryIdentifier);if(!z){let ae=Hl(l,b?p:null),Ne=!1;ae?Ne=!0:p instanceof zn?(ae=Mu(l,p),Ne=!1):(ae=zn.EMPTY_NODE,Ne=!1);const Qe=jo(new Xo(ae,Ne,!1),new Xo(p,b,!1));return new mh(c,Qe)}return z}function zt(d){const c=[];for(const l of d.views.values())l.query._queryParams.loadsAllData()||c.push(l);return c}function Dn(d,c){let l=null;for(const p of d.views.values())l=l||zl(p,c);return l}function bn(d,c){return c._queryParams.loadsAllData()?Oi(d):d.views.get(c._queryIdentifier)}function _r(d,c){return null!=bn(d,c)}function ai(d){return null!=Oi(d)}function Oi(d){for(const c of d.views.values())if(c.query._queryParams.loadsAllData())return c;return null}let Xs=1;class Lu{constructor(c){this.listenProvider_=c,this.syncPointTree_=new gi(null),this.pendingWriteTree_={visibleWrites:Wo.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Cl(d,c,l,p,b){return function(d,c,l,p,b){(0,je.hu)(p>d.lastWriteId,"Stacking an older write on top of newer ones"),void 0===b&&(b=!0),d.allWrites.push({path:c,snap:l,writeId:p,visible:b}),b&&(d.visibleWrites=$l(d.visibleWrites,c,l)),d.lastWriteId=p}(d.pendingWriteTree_,c,l,p,b),b?Vu(d,new Ei({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},c,l)):[]}function Us(d,c,l=!1){const p=function(d,c){for(let l=0;l<d.allWrites.length;l++){const p=d.allWrites[l];if(p.writeId===c)return p}return null}(d.pendingWriteTree_,c);if(function(d,c){const l=d.allWrites.findIndex(ae=>ae.writeId===c);(0,je.hu)(l>=0,"removeWrite called with nonexistent writeId.");const p=d.allWrites[l];d.allWrites.splice(l,1);let b=p.visible,P=!1,z=d.allWrites.length-1;for(;b&&z>=0;){const ae=d.allWrites[z];ae.visible&&(z>=l&&ac(ae,p.path)?b=!1:ms(p.path,ae.path)&&(P=!0)),z--}return!!b&&(P?(function(d){d.visibleWrites=Mf(d.allWrites,md,bt()),d.lastWriteId=d.allWrites.length>0?d.allWrites[d.allWrites.length-1].writeId:-1}(d),!0):(p.snap?d.visibleWrites=xu(d.visibleWrites,p.path):K(p.children,Ne=>{d.visibleWrites=xu(d.visibleWrites,Ti(p.path,Ne))}),!0))}(d.pendingWriteTree_,c)){let P=new gi(null);return null!=p.snap?P=P.set(bt(),!0):K(p.children,z=>{P=P.set(new hn(z),!0)}),Vu(d,new Li(p.path,P,l))}return[]}function wl(d,c,l){return Vu(d,new Ei({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c,l))}function Tl(d,c,l,p,b=!1){const P=c._path,z=d.syncPointTree_.get(P);let ae=[];if(z&&("default"===c._queryIdentifier||_r(z,c))){const Ne=function(d,c,l,p){const b=c._queryIdentifier,P=[];let z=[];const ae=ai(d);if("default"===b)for(const[Ne,Qe]of d.views.entries())z=z.concat(_h(Qe,l,p)),ru(Qe)&&(d.views.delete(Ne),Qe.query._queryParams.loadsAllData()||P.push(Qe.query));else{const Ne=d.views.get(b);Ne&&(z=z.concat(_h(Ne,l,p)),ru(Ne)&&(d.views.delete(b),Ne.query._queryParams.loadsAllData()||P.push(Ne.query)))}return ae&&!ai(d)&&P.push(new((0,je.hu)(Hr,"Reference.ts has not been loaded"),Hr)(c._repo,c._path)),{removed:P,events:z}}(z,c,l,p);(function(d){return 0===d.views.size})(z)&&(d.syncPointTree_=d.syncPointTree_.remove(P));const Qe=Ne.removed;if(ae=Ne.events,!b){const jt=-1!==Qe.findIndex(tn=>tn._queryParams.loadsAllData()),Wt=d.syncPointTree_.findOnPath(P,(tn,Wn)=>ai(Wn));if(jt&&!Wt){const tn=d.syncPointTree_.subtree(P);if(!tn.isEmpty()){const Wn=function(d){return d.fold((c,l,p)=>{if(l&&ai(l))return[Oi(l)];{let b=[];return l&&(b=zt(l)),K(p,(P,z)=>{b=b.concat(z)}),b}})}(tn);for(let gr=0;gr<Wn.length;++gr){const Di=Wn[gr],Js=Di.query,nc=Pf(d,Di);d.listenProvider_.startListening($u(Js),Dd(d,Js),nc.hashFn,nc.onComplete)}}}if(!Wt&&Qe.length>0&&!p)if(jt){const tn=null;d.listenProvider_.stopListening($u(c),tn)}else Qe.forEach(tn=>{const Wn=d.queryToTagMap.get(Bu(tn));d.listenProvider_.stopListening($u(tn),Wn)})}!function(d,c){for(let l=0;l<c.length;++l){const p=c[l];if(!p._queryParams.loadsAllData()){const b=Bu(p),P=d.queryToTagMap.get(b);d.queryToTagMap.delete(b),d.tagToQueryMap.delete(P)}}}(d,Qe)}return ae}function Td(d,c,l,p){const b=Sd(d,p);if(null!=b){const P=Th(b),z=P.path,ae=P.queryId,Ne=Bs(z,c);return Pc(d,z,new Ei(fr(ae),Ne,l))}return[]}function bh(d,c,l,p=!1){const b=c._path;let P=null,z=!1;d.syncPointTree_.foreachOnPath(b,(tn,Wn)=>{const gr=Bs(tn,b);P=P||Dn(Wn,gr),z=z||ai(Wn)});let Ne,ae=d.syncPointTree_.get(b);ae?(z=z||ai(ae),P=P||Dn(ae,bt())):(ae=new Eh,d.syncPointTree_=d.syncPointTree_.set(b,ae)),null!=P?Ne=!0:(Ne=!1,P=zn.EMPTY_NODE,d.syncPointTree_.subtree(b).foreachChild((Wn,gr)=>{const Di=Dn(gr,bt());Di&&(P=P.updateImmediateChild(Wn,Di))}));const Qe=_r(ae,c);if(!Qe&&!c._queryParams.loadsAllData()){const tn=Bu(c);(0,je.hu)(!d.queryToTagMap.has(tn),"View does not exist, but we have a tag");const Wn=Xs++;d.queryToTagMap.set(tn,Wn),d.tagToQueryMap.set(Wn,tn)}let Wt=function(d,c,l,p,b,P){const z=ee(d,c,p,b,P);return d.views.has(c._queryIdentifier)||d.views.set(c._queryIdentifier,z),function(d,c){d.eventRegistrations_.push(c)}(z,l),function(d,c){const l=d.viewCache_.eventCache,p=[];return l.getNode().isLeafNode()||l.getNode().forEachChild(oi,(P,z)=>{p.push(_s(P,z))}),l.isFullyInitialized()&&p.push(ks(l.getNode())),wd(d,p,l.getNode(),c)}(z,l)}(ae,c,l,oc(d.pendingWriteTree_,b),P,Ne);if(!Qe&&!z&&!p){const tn=bn(ae,c);Wt=Wt.concat(function(d,c,l){const p=c._path,b=Dd(d,c),P=Pf(d,l),z=d.listenProvider_.startListening($u(c),b,P.hashFn,P.onComplete),ae=d.syncPointTree_.subtree(p);if(b)(0,je.hu)(!ai(ae.value),"If we're adding a query, it shouldn't be shadowed");else{const Ne=ae.fold((Qe,jt,Wt)=>{if(!Pr(Qe)&&jt&&ai(jt))return[Oi(jt).query];{let tn=[];return jt&&(tn=tn.concat(zt(jt).map(Wn=>Wn.query))),K(Wt,(Wn,gr)=>{tn=tn.concat(gr)}),tn}});for(let Qe=0;Qe<Ne.length;++Qe){const jt=Ne[Qe];d.listenProvider_.stopListening($u(jt),Dd(d,jt))}}return z}(d,c,tn))}return Wt}function Mc(d,c,l){const b=d.pendingWriteTree_,P=d.syncPointTree_.findOnPath(c,(z,ae)=>{const Qe=Dn(ae,Bs(z,c));if(Qe)return Qe});return wc(b,c,P,l,!0)}function Vu(d,c){return Ch(c,d.syncPointTree_,null,oc(d.pendingWriteTree_,bt()))}function Ch(d,c,l,p){if(Pr(d.path))return wh(d,c,l,p);{const b=c.get(bt());null==l&&null!=b&&(l=Dn(b,bt()));let P=[];const z=Lt(d.path),ae=d.operationForChild(z),Ne=c.children.get(z);if(Ne&&ae){const Qe=l?l.getImmediateChild(z):null,jt=Sc(p,z);P=P.concat(Ch(ae,Ne,Qe,jt))}return b&&(P=P.concat(R(b,d,p,l))),P}}function wh(d,c,l,p){const b=c.get(bt());null==l&&null!=b&&(l=Dn(b,bt()));let P=[];return c.children.inorderTraversal((z,ae)=>{const Ne=l?l.getImmediateChild(z):null,Qe=Sc(p,z),jt=d.operationForChild(z);jt&&(P=P.concat(wh(jt,ae,Ne,Qe)))}),b&&(P=P.concat(R(b,d,p,l))),P}function Pf(d,c){const l=c.query,p=Dd(d,l);return{hashFn:()=>(function(d){return d.viewCache_.serverCache.getNode()}(c)||zn.EMPTY_NODE).hash(),onComplete:b=>{if("ok"===b)return p?function(d,c,l){const p=Sd(d,l);if(p){const b=Th(p),P=b.path,z=b.queryId,ae=Bs(P,c);return Pc(d,P,new pi(fr(z),ae))}return[]}(d,l._path,p):function(d,c){return Vu(d,new pi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c))}(d,l._path);{const P=function(d,c){let l="Unknown Error";"too_big"===d?l="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===d?l="Client doesn't have permission to access the desired data.":"unavailable"===d&&(l="The service is unavailable");const p=new Error(d+" at "+c._path.toString()+": "+l);return p.code=d.toUpperCase(),p}(b,l);return Tl(d,l,null,P)}}}}function Dd(d,c){const l=Bu(c);return d.queryToTagMap.get(l)}function Bu(d){return d._path.toString()+"$"+d._queryIdentifier}function Sd(d,c){return d.tagToQueryMap.get(c)}function Th(d){const c=d.indexOf("$");return(0,je.hu)(-1!==c&&c<d.length-1,"Bad queryKey."),{queryId:d.substr(c+1),path:new hn(d.substr(0,c))}}function Pc(d,c,l){const p=d.syncPointTree_.get(c);return(0,je.hu)(p,"Missing sync point for query tag that we're tracking"),R(p,l,oc(d.pendingWriteTree_,c),null)}function $u(d){return d._queryParams.loadsAllData()&&!d._queryParams.isDefault()?new((0,je.hu)(Ts,"Reference.ts has not been loaded"),Ts)(d._repo,d._path):d}class js{constructor(c){this.node_=c}getImmediateChild(c){const l=this.node_.getImmediateChild(c);return new js(l)}node(){return this.node_}}class Of{constructor(c,l){this.syncTree_=c,this.path_=l}getImmediateChild(c){const l=Ti(this.path_,c);return new Of(this.syncTree_,l)}node(){return Mc(this.syncTree_,this.path_)}}const Dl=function(d,c,l){return d&&"object"==typeof d?((0,je.hu)(".sv"in d,"Unexpected leaf node or priority contents"),"string"==typeof d[".sv"]?kp(d[".sv"],c,l):"object"==typeof d[".sv"]?Sh(d[".sv"],c):void(0,je.hu)(!1,"Unexpected server value: "+JSON.stringify(d,null,2))):d},kp=function(d,c,l){if("timestamp"===d)return l.timestamp;(0,je.hu)(!1,"Unexpected server value: "+d)},Sh=function(d,c,l){d.hasOwnProperty("increment")||(0,je.hu)(!1,"Unexpected server value: "+JSON.stringify(d,null,2));const p=d.increment;"number"!=typeof p&&(0,je.hu)(!1,"Unexpected increment value: "+p);const b=c.node();if((0,je.hu)(null!=b,"Expected ChildrenNode.EMPTY_NODE for nulls"),!b.isLeafNode())return p;const z=b.getValue();return"number"!=typeof z?p:z+p},Uu=function(d,c,l,p){return Ah(c,new Of(l,d),p)},Ta=function(d,c,l){return Ah(d,new js(c),l)};function Ah(d,c,l){const p=d.getPriority().val(),b=Dl(p,c.getImmediateChild(".priority"),l);let P;if(d.isLeafNode()){const z=d,ae=Dl(z.getValue(),c,l);return ae!==z.getValue()||b!==z.getPriority().val()?new Nr(ae,is(b)):d}{const z=d;return P=z,b!==z.getPriority().val()&&(P=P.updatePriority(new Nr(b))),z.forEachChild(oi,(ae,Ne)=>{const Qe=Ah(Ne,c.getImmediateChild(ae),l);Qe!==Ne&&(P=P.updateImmediateChild(ae,Qe))}),P}}class Nf{constructor(c="",l=null,p={children:{},childCount:0}){this.name=c,this.parent=l,this.node=p}}function xh(d,c){let l=c instanceof hn?c:new hn(c),p=d,b=Lt(l);for(;null!==b;){const P=(0,je.DV)(p.node.children,b)||{children:{},childCount:0};p=new Nf(b,p,P),l=wi(l),b=Lt(l)}return p}function Oc(d){return d.node.value}function Fp(d,c){d.node.value=c,Vp(d)}function kf(d){return d.node.childCount>0}function Rh(d,c){K(d.node.children,(l,p)=>{c(new Nf(l,d,p))})}function Lp(d,c,l,p){l&&!p&&c(d),Rh(d,b=>{Lp(b,c,!0,p)}),l&&p&&c(d)}function Da(d){return new hn(null===d.parent?d.name:Da(d.parent)+"/"+d.name)}function Vp(d){null!==d.parent&&function(d,c,l){const p=function(d){return void 0===Oc(d)&&!kf(d)}(l),b=(0,je.r3)(d.node.children,c);p&&b?(delete d.node.children[c],d.node.childCount--,Vp(d)):!p&&!b&&(d.node.children[c]=l.node,d.node.childCount++,Vp(d))}(d.parent,d.name,d)}const Bp=/[\[\].#$\/\u0000-\u001F\u007F]/,sm=/[\[\].#$\u0000-\u001F\u007F]/,rl=10485760,ou=function(d){return"string"==typeof d&&0!==d.length&&!Bp.test(d)},xd=function(d){return"string"==typeof d&&0!==d.length&&!sm.test(d)},Nc=function(d){return null===d||"string"==typeof d||"number"==typeof d&&!Ii(d)||d&&"object"==typeof d&&(0,je.r3)(d,".sv")},Vi=function(d,c,l,p){p&&void 0===c||kc((0,je.gK)(d,"value"),c,l)},kc=function(d,c,l){const p=l instanceof hn?new yr(l,d):l;if(void 0===c)throw new Error(d+"contains undefined "+dr(p));if("function"==typeof c)throw new Error(d+"contains a function "+dr(p)+" with contents = "+c.toString());if(Ii(c))throw new Error(d+"contains "+c.toString()+" "+dr(p));if("string"==typeof c&&c.length>rl/3&&(0,je.ug)(c)>rl)throw new Error(d+"contains a string greater than "+rl+" utf8 bytes "+dr(p)+" ('"+c.substring(0,50)+"...')");if(c&&"object"==typeof c){let b=!1,P=!1;if(K(c,(z,ae)=>{if(".value"===z)b=!0;else if(".priority"!==z&&".sv"!==z&&(P=!0,!ou(z)))throw new Error(d+" contains an invalid key ("+z+") "+dr(p)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(d,c){d.parts_.length>0&&(d.byteLength_+=1),d.parts_.push(c),d.byteLength_+=(0,je.ug)(c),Mi(d)})(p,z),kc(d,ae,p),function(d){const c=d.parts_.pop();d.byteLength_-=(0,je.ug)(c),d.parts_.length>0&&(d.byteLength_-=1)}(p)}),b&&P)throw new Error(d+' contains ".value" child '+dr(p)+" in addition to actual children.")}},Hu=function(d,c,l,p){if(p&&void 0===c)return;const b=(0,je.gK)(d,"values");if(!c||"object"!=typeof c||Array.isArray(c))throw new Error(b+" must be an object containing the children to replace.");const P=[];K(c,(z,ae)=>{const Ne=new hn(z);if(kc(b,ae,Ti(l,Ne)),".priority"===vc(Ne)&&!Nc(ae))throw new Error(b+"contains an invalid value for '"+Ne.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");P.push(Ne)}),function(d,c){let l,p;for(l=0;l<c.length;l++){p=c[l];const P=va(p);for(let z=0;z<P.length;z++)if((".priority"!==P[z]||z!==P.length-1)&&!ou(P[z]))throw new Error(d+"contains an invalid key ("+P[z]+") in path "+p.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}c.sort(Ec);let b=null;for(l=0;l<c.length;l++){if(p=c[l],null!==b&&ms(b,p))throw new Error(d+"contains a path "+b.toString()+" that is ancestor of another path "+p.toString());b=p}}(b,P)},il=function(d,c,l){if(!l||void 0!==c){if(Ii(c))throw new Error((0,je.gK)(d,"priority")+"is "+c.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Nc(c))throw new Error((0,je.gK)(d,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},au=function(d,c,l,p){if(!(p&&void 0===l||ou(l)))throw new Error((0,je.gK)(d,c)+'was an invalid key = "'+l+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Ph=function(d,c,l,p){if(!(p&&void 0===l||xd(l)))throw new Error((0,je.gK)(d,c)+'was an invalid path = "'+l+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Go=function(d,c){if(".info"===Lt(c))throw new Error(d+" failed = Can't modify data under /.info/")},lc=function(d,c){const l=c.path.toString();if("string"!=typeof c.repoInfo.host||0===c.repoInfo.host.length||!ou(c.repoInfo.namespace)&&"localhost"!==c.repoInfo.host.split(":")[0]||0!==l.length&&!function(d){return d&&(d=d.replace(/^\/*\.info(\/|$)/,"/")),xd(d)}(l))throw new Error((0,je.gK)(d,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class cu{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function sl(d,c){let l=null;for(let p=0;p<c.length;p++){const b=c[p],P=b.getPath();null!==l&&!Ea(P,l.path)&&(d.eventLists_.push(l),l=null),null===l&&(l={events:[],path:P}),l.events.push(b)}l&&d.eventLists_.push(l)}function Wu(d,c,l){sl(d,l),Oh(d,p=>Ea(p,c))}function Sa(d,c,l){sl(d,l),Oh(d,p=>ms(p,c)||ms(c,p))}function Oh(d,c){d.recursionDepth_++;let l=!0;for(let p=0;p<d.eventLists_.length;p++){const b=d.eventLists_[p];b&&(c(b.path)?(Ff(d.eventLists_[p]),d.eventLists_[p]=null):l=!1)}l&&(d.eventLists_=[]),d.recursionDepth_--}function Ff(d){for(let c=0;c<d.events.length;c++){const l=d.events[c];if(null!==l){d.events[c]=null;const p=l.getEventRunner();es&&_i("event: "+l.toString()),mt(p)}}}const Lf="repo_interrupt";class Up{constructor(c,l,p,b){this.repoInfo_=c,this.forceRestClient_=l,this.authTokenProvider_=p,this.appCheckProvider_=b,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new cu,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=el(),this.transactionQueueTree_=new Nf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function kh(d){const l=d.infoData_.getNode(new hn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+l}function Yl(d){return function(d){return(d=d||{}).timestamp=d.timestamp||(new Date).getTime(),d}({timestamp:kh(d)})}function Gu(d,c,l,p,b){d.dataUpdateCount++;const P=new hn(c);l=d.interceptServerDataCallback_?d.interceptServerDataCallback_(c,l):l;let z=[];if(b)if(p){const Ne=(0,je.UI)(l,Qe=>is(Qe));z=function(d,c,l,p){const b=Sd(d,p);if(b){const P=Th(b),z=P.path,ae=P.queryId,Ne=Bs(z,c),Qe=gi.fromObject(l);return Pc(d,z,new Uo(fr(ae),Ne,Qe))}return[]}(d.serverSyncTree_,P,Ne,b)}else{const Ne=is(l);z=Td(d.serverSyncTree_,P,Ne,b)}else if(p){const Ne=(0,je.UI)(l,Qe=>is(Qe));z=function(d,c,l){const p=gi.fromObject(l);return Vu(d,new Uo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c,p))}(d.serverSyncTree_,P,Ne)}else{const Ne=is(l);z=wl(d.serverSyncTree_,P,Ne)}let ae=P;z.length>0&&(ae=Lc(d,P)),Sa(d.eventQueue_,ae,z)}function Fc(d,c){Rd(d,"connected",c),!1===c&&function(d){Sl(d,"onDisconnectEvents");const c=Yl(d),l=el();Z(d.onDisconnect_,bt(),(b,P)=>{const z=Uu(b,P,d.serverSyncTree_,c);ha(l,b,z)});let p=[];Z(l,bt(),(b,P)=>{p=p.concat(wl(d.serverSyncTree_,b,P));const z=Vf(d,b);Lc(d,z)}),d.onDisconnect_=el(),Sa(d.eventQueue_,bt(),p)}(d)}function Rd(d,c,l){const p=new hn("/.info/"+c),b=is(l);d.infoData_.updateSnapshot(p,b);const P=wl(d.infoSyncTree_,p,b);Sa(d.eventQueue_,p,P)}function ql(d){return d.nextWriteId_++}function Fh(d,c,l,p,b){Sl(d,"set",{path:c.toString(),value:l,priority:p});const P=Yl(d),z=is(l,p),ae=Mc(d.serverSyncTree_,c),Ne=Ta(z,ae,P),Qe=ql(d),jt=Cl(d.serverSyncTree_,c,Ne,Qe,!0);sl(d.eventQueue_,jt),d.server_.put(c.toString(),z.val(!0),(tn,Wn)=>{const gr="ok"===tn;gr||Gr("set at "+c+" failed: "+tn);const Di=Us(d.serverSyncTree_,Qe,!gr);Sa(d.eventQueue_,c,Di),Ga(0,b,tn,Wn)});const Wt=Vf(d,c);Lc(d,Wt),Sa(d.eventQueue_,Wt,[])}function uu(d,c,l){d.server_.onDisconnectCancel(c.toString(),(p,b)=>{"ok"===p&&B(d.onDisconnect_,c),Ga(0,l,p,b)})}function Lh(d,c,l,p){const b=is(l);d.server_.onDisconnectPut(c.toString(),b.val(!0),(P,z)=>{"ok"===P&&ha(d.onDisconnect_,c,b),Ga(0,p,P,z)})}function du(d,c,l){let p;p=".info"===Lt(c._path)?Tl(d.infoSyncTree_,c,l):Tl(d.serverSyncTree_,c,l),Wu(d.eventQueue_,c._path,p)}function Od(d){d.persistentConnection_&&d.persistentConnection_.interrupt(Lf)}function Sl(d,...c){let l="";d.persistentConnection_&&(l=d.persistentConnection_.id+":"),_i(l,...c)}function Ga(d,c,l,p){c&&mt(()=>{if("ok"===l)c(null);else{const b=(l||"error").toUpperCase();let P=b;p&&(P+=": "+p);const z=new Error(P);z.code=b,c(z)}})}function Yu(d,c,l){return Mc(d.serverSyncTree_,c,l)||zn.EMPTY_NODE}function cc(d,c=d.transactionQueueTree_){if(c||Zl(d,c),Oc(c)){const l=Bh(d,c);(0,je.hu)(l.length>0,"Sending zero length transaction queue"),l.every(b=>0===b.status)&&function(d,c,l){const p=l.map(Qe=>Qe.currentWriteId),b=Yu(d,c,p);let P=b;const z=b.hash();for(let Qe=0;Qe<l.length;Qe++){const jt=l[Qe];(0,je.hu)(0===jt.status,"tryToSendTransactionQueue_: items in queue should all be run."),jt.status=1,jt.retryCount++;const Wt=Bs(c,jt.path);P=P.updateChild(Wt,jt.currentOutputSnapshotRaw)}const ae=P.val(!0),Ne=c;d.server_.put(Ne.toString(),ae,Qe=>{Sl(d,"transaction put response",{path:Ne.toString(),status:Qe});let jt=[];if("ok"===Qe){const Wt=[];for(let tn=0;tn<l.length;tn++)l[tn].status=2,jt=jt.concat(Us(d.serverSyncTree_,l[tn].currentWriteId)),l[tn].onComplete&&Wt.push(()=>l[tn].onComplete(null,!0,l[tn].currentOutputSnapshotResolved)),l[tn].unwatcher();Zl(d,xh(d.transactionQueueTree_,c)),cc(d,d.transactionQueueTree_),Sa(d.eventQueue_,c,jt);for(let tn=0;tn<Wt.length;tn++)mt(Wt[tn])}else{if("datastale"===Qe)for(let Wt=0;Wt<l.length;Wt++)l[Wt].status=3===l[Wt].status?4:0;else{Gr("transaction at "+Ne.toString()+" failed: "+Qe);for(let Wt=0;Wt<l.length;Wt++)l[Wt].status=4,l[Wt].abortReason=Qe}Lc(d,c)}},z)}(d,Da(c),l)}else kf(c)&&Rh(c,l=>{cc(d,l)})}function Lc(d,c){const l=kd(d,c),p=Da(l);return function(d,c,l){if(0===c.length)return;const p=[];let b=[];const z=c.filter(ae=>0===ae.status).map(ae=>ae.currentWriteId);for(let ae=0;ae<c.length;ae++){const Ne=c[ae],Qe=Bs(l,Ne.path);let Wt,jt=!1;if((0,je.hu)(null!==Qe,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Ne.status)jt=!0,Wt=Ne.abortReason,b=b.concat(Us(d.serverSyncTree_,Ne.currentWriteId,!0));else if(0===Ne.status)if(Ne.retryCount>=25)jt=!0,Wt="maxretry",b=b.concat(Us(d.serverSyncTree_,Ne.currentWriteId,!0));else{const tn=Yu(d,Ne.path,z);Ne.currentInputSnapshot=tn;const Wn=c[ae].update(tn.val());if(void 0!==Wn){kc("transaction failed: Data returned ",Wn,Ne.path);let gr=is(Wn);"object"==typeof Wn&&null!=Wn&&(0,je.r3)(Wn,".priority")||(gr=gr.updatePriority(tn.getPriority()));const Js=Ne.currentWriteId,nc=Yl(d),Nl=Ta(gr,tn,nc);Ne.currentOutputSnapshotRaw=gr,Ne.currentOutputSnapshotResolved=Nl,Ne.currentWriteId=ql(d),z.splice(z.indexOf(Js),1),b=b.concat(Cl(d.serverSyncTree_,Ne.path,Nl,Ne.currentWriteId,Ne.applyLocally)),b=b.concat(Us(d.serverSyncTree_,Js,!0))}else jt=!0,Wt="nodata",b=b.concat(Us(d.serverSyncTree_,Ne.currentWriteId,!0))}Sa(d.eventQueue_,l,b),b=[],jt&&(c[ae].status=2,setTimeout(c[ae].unwatcher,Math.floor(0)),c[ae].onComplete&&p.push("nodata"===Wt?()=>c[ae].onComplete(null,!1,c[ae].currentInputSnapshot):()=>c[ae].onComplete(new Error(Wt),!1,null)))}Zl(d,d.transactionQueueTree_);for(let ae=0;ae<p.length;ae++)mt(p[ae]);cc(d,d.transactionQueueTree_)}(d,Bh(d,l),p),p}function kd(d,c){let l,p=d.transactionQueueTree_;for(l=Lt(c);null!==l&&void 0===Oc(p);)p=xh(p,l),l=Lt(c=wi(c));return p}function Bh(d,c){const l=[];return Al(d,c,l),l.sort((p,b)=>p.order-b.order),l}function Al(d,c,l){const p=Oc(c);if(p)for(let b=0;b<p.length;b++)l.push(p[b]);Rh(c,b=>{Al(d,b,l)})}function Zl(d,c){const l=Oc(c);if(l){let p=0;for(let b=0;b<l.length;b++)2!==l[b].status&&(l[p]=l[b],p++);l.length=p,Fp(c,l.length>0?l:void 0)}Rh(c,p=>{Zl(d,p)})}function Vf(d,c){const l=Da(kd(d,c)),p=xh(d.transactionQueueTree_,c);return function(d,c,l){let p=d.parent;for(;null!==p;){if(c(p))return!0;p=p.parent}}(p,b=>{Ql(d,b)}),Ql(d,p),Lp(p,b=>{Ql(d,b)}),l}function Ql(d,c){const l=Oc(c);if(l){const p=[];let b=[],P=-1;for(let z=0;z<l.length;z++)3===l[z].status||(1===l[z].status?((0,je.hu)(P===z-1,"All SENT items should be at beginning of queue."),P=z,l[z].status=3,l[z].abortReason="set"):((0,je.hu)(0===l[z].status,"Unexpected transaction status in abort"),l[z].unwatcher(),b=b.concat(Us(d.serverSyncTree_,l[z].currentWriteId,!0)),l[z].onComplete&&p.push(l[z].onComplete.bind(null,new Error("set"),!1,null))));-1===P?Fp(c,void 0):l.length=P+1,Sa(d.eventQueue_,Da(c),b);for(let z=0;z<p.length;z++)mt(p[z])}}const $h=function(d,c){const l=Vc(d),p=l.namespace;return"firebase.com"===l.domain&&Ri(l.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!p||"undefined"===p)&&"localhost"!==l.domain&&Ri("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),l.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Gr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Ir(l.host,l.secure,p,"ws"===l.scheme||"wss"===l.scheme,c,"",p!==l.subdomain),path:new hn(l.pathString)}},Vc=function(d){let c="",l="",p="",b="",P="",z=!0,ae="https",Ne=443;if("string"==typeof d){let Qe=d.indexOf("//");Qe>=0&&(ae=d.substring(0,Qe-1),d=d.substring(Qe+2));let jt=d.indexOf("/");-1===jt&&(jt=d.length);let Wt=d.indexOf("?");-1===Wt&&(Wt=d.length),c=d.substring(0,Math.min(jt,Wt)),jt<Wt&&(b=function(d){let c="";const l=d.split("/");for(let p=0;p<l.length;p++)if(l[p].length>0){let b=l[p];try{b=decodeURIComponent(b.replace(/\+/g," "))}catch(P){}c+="/"+b}return c}(d.substring(jt,Wt)));const tn=function(d){const c={};"?"===d.charAt(0)&&(d=d.substring(1));for(const l of d.split("&")){if(0===l.length)continue;const p=l.split("=");2===p.length?c[decodeURIComponent(p[0])]=decodeURIComponent(p[1]):Gr(`Invalid query segment '${l}' in query '${d}'`)}return c}(d.substring(Math.min(d.length,Wt)));Qe=c.indexOf(":"),Qe>=0?(z="https"===ae||"wss"===ae,Ne=parseInt(c.substring(Qe+1),10)):Qe=c.length;const Wn=c.slice(0,Qe);if("localhost"===Wn.toLowerCase())l="localhost";else if(Wn.split(".").length<=2)l=Wn;else{const gr=c.indexOf(".");p=c.substring(0,gr).toLowerCase(),l=c.substring(gr+1),P=p}"ns"in tn&&(P=tn.ns)}return{host:c,port:Ne,domain:l,subdomain:p,secure:z,scheme:ae,pathString:b,namespace:P}};class za{constructor(c,l,p,b){this.eventType=c,this.eventRegistration=l,this.snapshot=p,this.prevName=b}getPath(){const c=this.snapshot.ref;return"value"===this.eventType?c._path:c.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,je.Wl)(this.snapshot.exportVal())}}class zp{constructor(c,l,p){this.eventRegistration=c,this.error=l,this.path=p}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Uh{constructor(c,l){this.snapshotCallback=c,this.cancelCallback=l}onValue(c,l){this.snapshotCallback.call(null,c,l)}onCancel(c){return(0,je.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,c)}get hasCancelCallback(){return!!this.cancelCallback}matches(c){return this.snapshotCallback===c.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===c.snapshotCallback.userCallback&&this.snapshotCallback.context===c.snapshotCallback.context}}class Yp{constructor(c,l){this._repo=c,this._path=l}cancel(){const c=new je.BH;return uu(this._repo,this._path,c.wrapCallback(()=>{})),c.promise}remove(){Go("OnDisconnect.remove",this._path);const c=new je.BH;return Lh(this._repo,this._path,null,c.wrapCallback(()=>{})),c.promise}set(c){Go("OnDisconnect.set",this._path),Vi("OnDisconnect.set",c,this._path,!1);const l=new je.BH;return Lh(this._repo,this._path,c,l.wrapCallback(()=>{})),l.promise}setWithPriority(c,l){Go("OnDisconnect.setWithPriority",this._path),Vi("OnDisconnect.setWithPriority",c,this._path,!1),il("OnDisconnect.setWithPriority",l,!1);const p=new je.BH;return function(d,c,l,p,b){const P=is(l,p);d.server_.onDisconnectPut(c.toString(),P.val(!0),(z,ae)=>{"ok"===z&&ha(d.onDisconnect_,c,P),Ga(0,b,z,ae)})}(this._repo,this._path,c,l,p.wrapCallback(()=>{})),p.promise}update(c){Go("OnDisconnect.update",this._path),Hu("OnDisconnect.update",c,this._path,!1);const l=new je.BH;return function(d,c,l,p){if((0,je.xb)(l))return _i("onDisconnect().update() called with empty data.  Don't do anything."),void Ga(0,p,"ok",void 0);d.server_.onDisconnectMerge(c.toString(),l,(b,P)=>{"ok"===b&&K(l,(z,ae)=>{const Ne=is(ae);ha(d.onDisconnect_,Ti(c,z),Ne)}),Ga(0,p,b,P)})}(this._repo,this._path,c,l.wrapCallback(()=>{})),l.promise}}class xa{constructor(c,l,p,b){this._repo=c,this._path=l,this._queryParams=p,this._orderByCalled=b}get key(){return Pr(this._path)?null:vc(this._path)}get ref(){return new Ya(this._repo,this._path)}get _queryIdentifier(){const c=gl(this._queryParams),l=W(c);return"{}"===l?"default":l}get _queryObject(){return gl(this._queryParams)}isEqual(c){if(!((c=(0,je.m9)(c))instanceof xa))return!1;const l=this._repo===c._repo,p=Ea(this._path,c._path);return l&&p&&this._queryIdentifier===c._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(d){let c="";for(let l=d.pieceNum_;l<d.pieces_.length;l++)""!==d.pieces_[l]&&(c+="/"+encodeURIComponent(String(d.pieces_[l])));return c||"/"}(this._path)}}function fu(d,c){if(!0===d._orderByCalled)throw new Error(c+": You can't combine multiple orderBy calls.")}function uc(d){let c=null,l=null;if(d.hasStart()&&(c=d.getIndexStartValue()),d.hasEnd()&&(l=d.getIndexEndValue()),d.getIndex()===V){const p="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",b="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(d.hasStart()){if(d.getIndexStartName()!==qi)throw new Error(p);if("string"!=typeof c)throw new Error(b)}if(d.hasEnd()){if(d.getIndexEndName()!==as)throw new Error(p);if("string"!=typeof l)throw new Error(b)}}else if(d.getIndex()===oi){if(null!=c&&!Nc(c)||null!=l&&!Nc(l))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,je.hu)(d.getIndex()instanceof Cs||d.getIndex()===Zo,"unknown index type."),null!=c&&"object"==typeof c||null!=l&&"object"==typeof l)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Fd(d){if(d.hasStart()&&d.hasEnd()&&d.hasLimit()&&!d.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ya extends xa{constructor(c,l){super(c,l,new da,!1)}get parent(){const c=rc(this._path);return null===c?null:new Ya(this._repo,c)}get root(){let c=this;for(;null!==c.parent;)c=c.parent;return c}}class pu{constructor(c,l,p){this._node=c,this.ref=l,this._index=p}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(c){const l=new hn(c),p=ol(this.ref,c);return new pu(this._node.getChild(l),p,oi)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(c){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(p,b)=>c(new pu(b,ol(this.ref,p),oi)))}hasChild(c){const l=new hn(c);return!this._node.getChild(l).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Bf(d,c){return(d=(0,je.m9)(d))._checkNotDeleted("ref"),void 0!==c?ol(d._root,c):d._root}function Mr(d,c){(d=(0,je.m9)(d))._checkNotDeleted("refFromURL");const l=$h(c,d._repo.repoInfo_.nodeAdmin);lc("refFromURL",l);const p=l.repoInfo;return!d._repo.repoInfo_.isCustomHost()&&p.host!==d._repo.repoInfo_.host&&Ri("refFromURL: Host name does not match the current database: (found "+p.host+" but expected "+d._repo.repoInfo_.host+")"),Bf(d,l.path.toString())}function ol(d,c){return null===Lt((d=(0,je.m9)(d))._path)?(l=c,l&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),Ph("child","path",l,!1)):Ph("child","path",c,!1),new Ya(d._repo,Ti(d._path,c));var l}function Vd(d,c){d=(0,je.m9)(d),Go("set",d._path),Vi("set",c,d._path,!1);const l=new je.BH;return Fh(d._repo,d._path,c,null,l.wrapCallback(()=>{})),l.promise}function Rl(d,c){Hu("update",c,d._path,!1);const l=new je.BH;return function(d,c,l,p){Sl(d,"update",{path:c.toString(),value:l});let b=!0;const P=Yl(d),z={};if(K(l,(ae,Ne)=>{b=!1,z[ae]=Uu(Ti(c,ae),is(Ne),d.serverSyncTree_,P)}),b)_i("update() called with empty data.  Don't do anything."),Ga(0,p,"ok",void 0);else{const ae=ql(d),Ne=function(d,c,l,p){!function(d,c,l,p){(0,je.hu)(p>d.lastWriteId,"Stacking an older merge on top of newer ones"),d.allWrites.push({path:c,children:l,writeId:p,visible:!0}),d.visibleWrites=ic(d.visibleWrites,c,l),d.lastWriteId=p}(d.pendingWriteTree_,c,l,p);const b=gi.fromObject(l);return Vu(d,new Uo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},c,b))}(d.serverSyncTree_,c,z,ae);sl(d.eventQueue_,Ne),d.server_.merge(c.toString(),l,(Qe,jt)=>{const Wt="ok"===Qe;Wt||Gr("update at "+c+" failed: "+Qe);const tn=Us(d.serverSyncTree_,ae,!Wt),Wn=tn.length>0?Lc(d,c):c;Sa(d.eventQueue_,Wn,tn),Ga(0,p,Qe,jt)}),K(l,Qe=>{const jt=Vf(d,Ti(c,Qe));Lc(d,jt)}),Sa(d.eventQueue_,c,[])}}(d._repo,d._path,c,l.wrapCallback(()=>{})),l.promise}function io(d){d=(0,je.m9)(d);const c=new Uh(()=>{}),l=new qu(c);return function(d,c,l){const p=function(d,c){const l=c._path;let p=null;d.syncPointTree_.foreachOnPath(l,(Qe,jt)=>{const Wt=Bs(Qe,l);p=p||Dn(jt,Wt)});let b=d.syncPointTree_.get(l);b?p=p||Dn(b,bt()):(b=new Eh,d.syncPointTree_=d.syncPointTree_.set(l,b));const P=null!=p,z=P?new Xo(p,!0,!1):null;return function(d){return yl(d.viewCache_)}(ee(b,c,oc(d.pendingWriteTree_,c._path),P?z.getNode():zn.EMPTY_NODE,P))}(d.serverSyncTree_,c);return null!=p?Promise.resolve(p):d.server_.get(c).then(b=>{const P=is(b).withIndex(c._queryParams.getIndex());let z;if(bh(d.serverSyncTree_,c,l,!0),c._queryParams.loadsAllData())z=wl(d.serverSyncTree_,c._path,P);else{const ae=Dd(d.serverSyncTree_,c);z=Td(d.serverSyncTree_,c._path,P,ae)}return Sa(d.eventQueue_,c._path,z),Tl(d.serverSyncTree_,c,l,null,!0),P},b=>(Sl(d,"get for query "+(0,je.Wl)(c)+" failed: "+b),Promise.reject(new Error(b))))}(d._repo,d,l).then(p=>new pu(p,new Ya(d._repo,d._path),d._queryParams.getIndex()))}class qu{constructor(c){this.callbackContext=c}respondsTo(c){return"value"===c}createEvent(c,l){const p=l._queryParams.getIndex();return new za("value",this,new pu(c.snapshotNode,new Ya(l._repo,l._path),p))}getEventRunner(c){return"cancel"===c.getEventType()?()=>this.callbackContext.onCancel(c.error):()=>this.callbackContext.onValue(c.snapshot,null)}createCancelEvent(c,l){return this.callbackContext.hasCancelCallback?new zp(this,c,l):null}matches(c){return c instanceof qu&&(!c.callbackContext||!this.callbackContext||c.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Ku{constructor(c,l){this.eventType=c,this.callbackContext=l}respondsTo(c){let l="children_added"===c?"child_added":c;return l="children_removed"===l?"child_removed":l,this.eventType===l}createCancelEvent(c,l){return this.callbackContext.hasCancelCallback?new zp(this,c,l):null}createEvent(c,l){(0,je.hu)(null!=c.childName,"Child events should have a childName.");const p=ol(new Ya(l._repo,l._path),c.childName),b=l._queryParams.getIndex();return new za(c.type,this,new pu(c.snapshotNode,p,b),c.prevName)}getEventRunner(c){return"cancel"===c.getEventType()?()=>this.callbackContext.onCancel(c.error):()=>this.callbackContext.onValue(c.snapshot,c.prevName)}matches(c){return c instanceof Ku&&this.eventType===c.eventType&&(!this.callbackContext||!c.callbackContext||this.callbackContext.matches(c.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function jh(d,c,l,p,b){let P;if("object"==typeof p&&(P=void 0,b=p),"function"==typeof p&&(P=p),b&&b.onlyOnce){const Ne=l,Qe=(jt,Wt)=>{du(d._repo,d,ae),Ne(jt,Wt)};Qe.userCallback=l.userCallback,Qe.context=l.context,l=Qe}const z=new Uh(l,P||void 0),ae="value"===c?new qu(z):new Ku(c,z);return function(d,c,l){let p;p=".info"===Lt(c._path)?bh(d.infoSyncTree_,c,l):bh(d.serverSyncTree_,c,l),Wu(d.eventQueue_,c._path,p)}(d._repo,d,ae),()=>du(d._repo,d,ae)}function Hh(d,c,l,p){return jh(d,"value",c,l,p)}function Kp(d,c,l,p){return jh(d,"child_added",c,l,p)}function Xl(d,c,l,p){return jh(d,"child_changed",c,l,p)}function Bc(d,c,l,p){return jh(d,"child_moved",c,l,p)}function Bd(d,c,l,p){return jh(d,"child_removed",c,l,p)}function $d(d,c,l){let p=null;const b=l?new Uh(l):null;"value"===c?p=new qu(b):c&&(p=new Ku(c,b)),du(d._repo,d,p)}class al{}class Wh extends al{constructor(c,l){super(),this._value=c,this._key=l}_apply(c){Vi("endAt",this._value,c._path,!0);const l=To(c._queryParams,this._value,this._key);if(Fd(l),uc(l),c._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new xa(c._repo,c._path,l,c._orderByCalled)}}class Uf extends al{constructor(c,l){super(),this._value=c,this._key=l}_apply(c){Vi("endBefore",this._value,c._path,!1);const l=function(d,c,l){let p,b;return d.index_===V?("string"==typeof c&&(c=ua(c)),b=To(d,c,l)):(p=null==l?qi:ua(l),b=To(d,c,p)),b.endBeforeSet_=!0,b}(c._queryParams,this._value,this._key);if(Fd(l),uc(l),c._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new xa(c._repo,c._path,l,c._orderByCalled)}}class Hf extends al{constructor(c,l){super(),this._value=c,this._key=l}_apply(c){Vi("startAt",this._value,c._path,!0);const l=Bo(c._queryParams,this._value,this._key);if(Fd(l),uc(l),c._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new xa(c._repo,c._path,l,c._orderByCalled)}}class Zp extends al{constructor(c,l){super(),this._value=c,this._key=l}_apply(c){Vi("startAfter",this._value,c._path,!1);const l=function(d,c,l){let p;if(d.index_===V)"string"==typeof c&&(c=Bl(c)),p=Bo(d,c,l);else{let b;b=null==l?as:Bl(l),p=Bo(d,c,b)}return p.startAfterSet_=!0,p}(c._queryParams,this._value,this._key);if(Fd(l),uc(l),c._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new xa(c._repo,c._path,l,c._orderByCalled)}}class Gh extends al{constructor(c){super(),this._limit=c}_apply(c){if(c._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new xa(c._repo,c._path,function(d,c){const l=d.copy();return l.limitSet_=!0,l.limit_=c,l.viewFrom_="l",l}(c._queryParams,this._limit),c._orderByCalled)}}class Iy extends al{constructor(c){super(),this._limit=c}_apply(c){if(c._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new xa(c._repo,c._path,function(d,c){const l=d.copy();return l.limitSet_=!0,l.limit_=c,l.viewFrom_="r",l}(c._queryParams,this._limit),c._orderByCalled)}}class Cy extends al{constructor(c){super(),this._path=c}_apply(c){fu(c,"orderByChild");const l=new hn(this._path);if(Pr(l))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const p=new Cs(l),b=$o(c._queryParams,p);return uc(b),new xa(c._repo,c._path,b,!0)}}class wy extends al{_apply(c){fu(c,"orderByKey");const l=$o(c._queryParams,V);return uc(l),new xa(c._repo,c._path,l,!0)}}class jd extends al{_apply(c){fu(c,"orderByPriority");const l=$o(c._queryParams,oi);return uc(l),new xa(c._repo,c._path,l,!0)}}class Gf extends al{_apply(c){fu(c,"orderByValue");const l=$o(c._queryParams,Zo);return uc(l),new xa(c._repo,c._path,l,!0)}}class dc extends al{constructor(c,l){super(),this._value=c,this._key=l}_apply(c){if(Vi("equalTo",this._value,c._path,!1),c._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(c._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Wh(this._value,this._key)._apply(new Hf(this._value,this._key)._apply(c))}}function Ml(d,...c){let l=(0,je.m9)(d);for(const p of c)l=p._apply(l);return l}(function(d){(0,je.hu)(!Hr,"__referenceConstructor has already been defined"),Hr=d})(Ya),function(d){(0,je.hu)(!Ts,"__referenceConstructor has already been defined"),Ts=d}(Ya);const Hd={};function zf(d,c,l,p,b){let P=p||d.options.databaseURL;void 0===P&&(d.options.projectId||Ri("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_i("Using default host for project ",d.options.projectId),P=`${d.options.projectId}-default-rtdb.firebaseio.com`);let Ne,Qe,z=$h(P,b),ae=z.repoInfo;"undefined"!=typeof process&&process.env&&(Qe=process.env.FIREBASE_DATABASE_EMULATOR_HOST),Qe?(Ne=!0,P=`http://${Qe}?ns=${ae.namespace}`,z=$h(P,b),ae=z.repoInfo):Ne=!z.repoInfo.secure;const jt=b&&Ne?new si(si.OWNER):new $i(d.name,d.options,c);lc("Invalid Firebase Database URL",z),Pr(z.path)||Ri("Database URL must point to the root of a Firebase Database (not including a child path).");const Wt=function(d,c,l,p){let b=Hd[c.name];b||(b={},Hd[c.name]=b);let P=b[d.toURLString()];return P&&Ri("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),P=new Up(d,false,l,p),b[d.toURLString()]=P,P}(ae,d,jt,new Kr(d.name,l));return new Yf(Wt,d)}class Yf{constructor(c,l){this._repoInternal=c,this.app=l,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(d,c,l){if(d.stats_=Os(d.repoInfo_),d.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)d.server_=new $a(d.repoInfo_,(p,b,P,z)=>{Gu(d,p,b,P,z)},d.authTokenProvider_,d.appCheckProvider_),setTimeout(()=>Fc(d,!0),0);else{if(null!=l){if("object"!=typeof l)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,je.Wl)(l)}catch(p){throw new Error("Invalid authOverride provided: "+p)}}d.persistentConnection_=new La(d.repoInfo_,c,(p,b,P,z)=>{Gu(d,p,b,P,z)},p=>{Fc(d,p)},p=>{!function(d,c){K(c,(l,p)=>{Rd(d,l,p)})}(d,p)},d.authTokenProvider_,d.appCheckProvider_,l),d.server_=d.persistentConnection_}d.authTokenProvider_.addTokenChangeListener(p=>{d.server_.refreshAuthToken(p)}),d.appCheckProvider_.addTokenChangeListener(p=>{d.server_.refreshAppCheckToken(p.token)}),d.statsReporter_=function(d,c){const l=d.toString();return Ps[l]||(Ps[l]=c()),Ps[l]}(d.repoInfo_,()=>new Bn(d.stats_,d.server_)),d.infoData_=new Xc,d.infoSyncTree_=new Lu({startListening:(p,b,P,z)=>{let ae=[];const Ne=d.infoData_.getNode(p._path);return Ne.isEmpty()||(ae=wl(d.infoSyncTree_,p._path,Ne),setTimeout(()=>{z("ok")},0)),ae},stopListening:()=>{}}),Rd(d,"connected",!1),d.serverSyncTree_=new Lu({startListening:(p,b,P,z)=>(d.server_.listen(p,P,b,(ae,Ne)=>{const Qe=z(ae,Ne);Sa(d.eventQueue_,p._path,Qe)}),[]),stopListening:(p,b)=>{d.server_.unlisten(p,b)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ya(this._repo,bt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(d,c){const l=Hd[c];(!l||l[d.key]!==d)&&Ri(`Database ${c}(${d.repoInfo_}) has already been deleted.`),Od(d),delete l[d.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(c){null===this._rootInternal&&Ri("Cannot call "+c+" on a deleted database.")}}function Qu(){_a.IS_TRANSPORT_INITIALIZED&&Gr("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function qf(){Qu(),Ks.forceDisallow()}function Kh(){Qu(),No.forceDisallow(),Ks.forceAllow()}function eg(d=(0,Hi.getApp)(),c){const l=(0,Hi._getProvider)(d,"database").getImmediate({identifier:c}),p=(0,je.P0)("database");return p&&tg(l,...p),l}function tg(d,c,l,p={}){(d=(0,je.m9)(d))._checkNotDeleted("useEmulator"),d._instanceStarted&&Ri("Cannot call useEmulator() after instance has already been initialized.");const b=d._repoInternal;let P;if(b.repoInfo_.nodeAdmin)p.mockUserToken&&Ri('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),P=new si(si.OWNER);else if(p.mockUserToken){const z="string"==typeof p.mockUserToken?p.mockUserToken:(0,je.Sg)(p.mockUserToken,d.app.options.projectId);P=new si(z)}!function(d,c,l,p){d.repoInfo_=new Ir(`${c}:${l}`,!1,d.repoInfo_.namespace,d.repoInfo_.webSocketOnly,d.repoInfo_.nodeAdmin,d.repoInfo_.persistenceKey,d.repoInfo_.includeNamespaceInQueryParams),p&&(d.authTokenProvider_=p)}(b,c,l,P)}function Kf(d,c){ra(d,c)}class Zh{constructor(c,l){this.committed=c,this.snapshot=l}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}La.prototype.simpleListen=function(d,c){this.sendRequest("q",{p:d},c)},La.prototype.echo=function(d,c){this.sendRequest("echo",{d},c)},Oa(Hi.SDK_VERSION),(0,Hi._registerComponent)(new Es.wA("database",(c,{instanceIdentifier:l})=>zf(c.getProvider("app").getImmediate(),c.getProvider("auth-internal"),c.getProvider("app-check-internal"),l),"PUBLIC").setMultipleInstances(!0)),(0,Hi.registerVersion)(xo,"0.13.9",void 0),(0,Hi.registerVersion)(xo,"0.13.9","esm2017");class Qh{constructor(c){return c}}const qd="database",ig=new A.OlP("angularfire2.database-instances");function Xh(d){return(c,l)=>{const p=c.runOutsideAngular(()=>d(l));return new Qh(p)}}const rd={provide:class{constructor(){return(0,li.vb)(qd)}},deps:[[new A.FiY,ig]]},Jh={provide:Qh,useFactory:function(d,c){const l=(0,li.JM)(qd,d,c);return l&&new Qh(l)},deps:[[new A.FiY,ig],bi.Ot]};let ef=(()=>{class d{constructor(){(0,mi.KN)("angularfire",li.q4.full,"rtdb")}}return d.\u0275fac=function(l){return new(l||d)},d.\u0275mod=A.oAB({type:d}),d.\u0275inj=A.cJS({providers:[Jh,rd]}),d})();function Kd(d,...c){return{ngModule:ef,providers:[{provide:ig,useFactory:Xh(d),multi:!0,deps:[A.R0b,A.zs3,li.HU,bi.z6,[new A.FiY,qr.dh],[new A.FiY,Hs.nm],...c]}]}}const mm=(0,li.u3)(eg,!0);var Eg=F(7545),rf=F(3637),Pl=F(8891),sf=F(5917),ip=F(6682),Im=F(8819),Cm=F(3190),Uc=F(2145),sp=F(7519),sd=F(5197),Qd=F(509);class op{constructor(c,l){this.observables=c,this.project=l}call(c,l){return l.subscribe(new bg(c,this.observables,this.project))}}class bg extends sd.L{constructor(c,l,p){super(c),this.observables=l,this.project=p,this.toRespond=[];const b=l.length;this.values=new Array(b);for(let P=0;P<b;P++)this.toRespond.push(P);for(let P=0;P<b;P++)this.add((0,Qd.D)(this,l[P],void 0,P))}notifyNext(c,l,p){this.values[p]=l;const b=this.toRespond;if(b.length>0){const P=b.indexOf(p);-1!==P&&b.splice(P,1)}}notifyComplete(){}_next(c){if(0===this.toRespond.length){const l=[c,...this.values];this.project?this._tryProject(l):this.destination.next(l)}}_tryProject(c){let l;try{l=this.project.apply(this,c)}catch(p){return void this.destination.error(p)}this.destination.next(l)}}var ap=F(7393);class lp{constructor(c){this.predicate=c}call(c,l){return l.subscribe(new cp(c,this.predicate))}}class cp extends ap.L{constructor(c,l){super(c),this.predicate=l,this.skipping=!0,this.index=0}_next(c){const l=this.destination;this.skipping&&this.tryCallPredicate(c),this.skipping||l.next(c)}tryCallPredicate(c){try{const l=this.predicate(c,this.index++);this.skipping=Boolean(l)}catch(l){this.destination.error(l)}}}var _u=F(8939),lf=(F(4828),F(3394));const Ig=new Rs.Yd("@firebase/database-compat"),Cg=function(d){Ig.warn("FIREBASE WARNING: "+d)};class up{constructor(c){this._delegate=c}cancel(c){(0,je.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,je.Wj)("OnDisconnect.cancel","onComplete",c,!0);const l=this._delegate.cancel();return c&&l.then(()=>c(null),p=>c(p)),l}remove(c){(0,je.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,je.Wj)("OnDisconnect.remove","onComplete",c,!0);const l=this._delegate.remove();return c&&l.then(()=>c(null),p=>c(p)),l}set(c,l){(0,je.Dv)("OnDisconnect.set",1,2,arguments.length),(0,je.Wj)("OnDisconnect.set","onComplete",l,!0);const p=this._delegate.set(c);return l&&p.then(()=>l(null),b=>l(b)),p}setWithPriority(c,l,p){(0,je.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,je.Wj)("OnDisconnect.setWithPriority","onComplete",p,!0);const b=this._delegate.setWithPriority(c,l);return p&&b.then(()=>p(null),P=>p(P)),b}update(c,l){if((0,je.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(c)){const b={};for(let P=0;P<c.length;++P)b[""+P]=c[P];c=b,Cg("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,je.Wj)("OnDisconnect.update","onComplete",l,!0);const p=this._delegate.update(c);return l&&p.then(()=>l(null),b=>l(b)),p}}class Dm{constructor(c,l){this.committed=c,this.snapshot=l}toJSON(){return(0,je.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class ec{constructor(c,l){this._database=c,this._delegate=l}val(){return(0,je.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,je.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,je.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,je.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(c){return(0,je.Dv)("DataSnapshot.child",0,1,arguments.length),c=String(c),Ph("DataSnapshot.child","path",c,!1),new ec(this._database,this._delegate.child(c))}hasChild(c){return(0,je.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Ph("DataSnapshot.hasChild","path",c,!1),this._delegate.hasChild(c)}getPriority(){return(0,je.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(c){return(0,je.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,je.Wj)("DataSnapshot.forEach","action",c,!1),this._delegate.forEach(l=>c(new ec(this._database,l)))}hasChildren(){return(0,je.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,je.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,je.Dv)("DataSnapshot.ref",0,0,arguments.length),new ma(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ea{constructor(c,l){this.database=c,this._delegate=l}on(c,l,p,b){var P;(0,je.Dv)("Query.on",2,4,arguments.length),(0,je.Wj)("Query.on","callback",l,!1);const z=ea.getCancelAndContextArgs_("Query.on",p,b),ae=(Qe,jt)=>{l.call(z.context,new ec(this.database,Qe),jt)};ae.userCallback=l,ae.context=z.context;const Ne=null===(P=z.cancel)||void 0===P?void 0:P.bind(z.context);switch(c){case"value":return Hh(this._delegate,ae,Ne),l;case"child_added":return Kp(this._delegate,ae,Ne),l;case"child_removed":return Bd(this._delegate,ae,Ne),l;case"child_changed":return Xl(this._delegate,ae,Ne),l;case"child_moved":return Bc(this._delegate,ae,Ne),l;default:throw new Error((0,je.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(c,l,p){if((0,je.Dv)("Query.off",0,3,arguments.length),function(d,c,l){if(void 0!==c)switch(c){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,je.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,c),(0,je.Wj)("Query.off","callback",l,!0),(0,je.lb)("Query.off","context",p,!0),l){const b=()=>{};b.userCallback=l,b.context=p,$d(this._delegate,c,b)}else $d(this._delegate,c)}get(){return io(this._delegate).then(c=>new ec(this.database,c))}once(c,l,p,b){(0,je.Dv)("Query.once",1,4,arguments.length),(0,je.Wj)("Query.once","callback",l,!0);const P=ea.getCancelAndContextArgs_("Query.once",p,b),z=new je.BH,ae=(Qe,jt)=>{const Wt=new ec(this.database,Qe);l&&l.call(P.context,Wt,jt),z.resolve(Wt)};ae.userCallback=l,ae.context=P.context;const Ne=Qe=>{P.cancel&&P.cancel.call(P.context,Qe),z.reject(Qe)};switch(c){case"value":Hh(this._delegate,ae,Ne,{onlyOnce:!0});break;case"child_added":Kp(this._delegate,ae,Ne,{onlyOnce:!0});break;case"child_removed":Bd(this._delegate,ae,Ne,{onlyOnce:!0});break;case"child_changed":Xl(this._delegate,ae,Ne,{onlyOnce:!0});break;case"child_moved":Bc(this._delegate,ae,Ne,{onlyOnce:!0});break;default:throw new Error((0,je.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return z.promise}limitToFirst(c){return(0,je.Dv)("Query.limitToFirst",1,1,arguments.length),new ea(this.database,Ml(this._delegate,function(d){if("number"!=typeof d||Math.floor(d)!==d||d<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Gh(d)}(c)))}limitToLast(c){return(0,je.Dv)("Query.limitToLast",1,1,arguments.length),new ea(this.database,Ml(this._delegate,function(d){if("number"!=typeof d||Math.floor(d)!==d||d<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Iy(d)}(c)))}orderByChild(c){return(0,je.Dv)("Query.orderByChild",1,1,arguments.length),new ea(this.database,Ml(this._delegate,function(d){if("$key"===d)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===d)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===d)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ph("orderByChild","path",d,!1),new Cy(d)}(c)))}orderByKey(){return(0,je.Dv)("Query.orderByKey",0,0,arguments.length),new ea(this.database,Ml(this._delegate,new wy))}orderByPriority(){return(0,je.Dv)("Query.orderByPriority",0,0,arguments.length),new ea(this.database,Ml(this._delegate,new jd))}orderByValue(){return(0,je.Dv)("Query.orderByValue",0,0,arguments.length),new ea(this.database,Ml(this._delegate,new Gf))}startAt(c=null,l){return(0,je.Dv)("Query.startAt",0,2,arguments.length),new ea(this.database,Ml(this._delegate,function(d=null,c){return au("startAt","key",c,!0),new Hf(d,c)}(c,l)))}startAfter(c=null,l){return(0,je.Dv)("Query.startAfter",0,2,arguments.length),new ea(this.database,Ml(this._delegate,function(d,c){return au("startAfter","key",c,!0),new Zp(d,c)}(c,l)))}endAt(c=null,l){return(0,je.Dv)("Query.endAt",0,2,arguments.length),new ea(this.database,Ml(this._delegate,function(d,c){return au("endAt","key",c,!0),new Wh(d,c)}(c,l)))}endBefore(c=null,l){return(0,je.Dv)("Query.endBefore",0,2,arguments.length),new ea(this.database,Ml(this._delegate,function(d,c){return au("endBefore","key",c,!0),new Uf(d,c)}(c,l)))}equalTo(c,l){return(0,je.Dv)("Query.equalTo",1,2,arguments.length),new ea(this.database,Ml(this._delegate,function(d,c){return au("equalTo","key",c,!0),new dc(d,c)}(c,l)))}toString(){return(0,je.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,je.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(c){if((0,je.Dv)("Query.isEqual",1,1,arguments.length),!(c instanceof ea))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(c._delegate)}static getCancelAndContextArgs_(c,l,p){const b={cancel:void 0,context:void 0};if(l&&p)b.cancel=l,(0,je.Wj)(c,"cancel",b.cancel,!0),b.context=p,(0,je.lb)(c,"context",b.context,!0);else if(l)if("object"==typeof l&&null!==l)b.context=l;else{if("function"!=typeof l)throw new Error((0,je.gK)(c,"cancelOrContext")+" must either be a cancel callback or a context object.");b.cancel=l}return b}get ref(){return new ma(this.database,new Ya(this._delegate._repo,this._delegate._path))}}class ma extends ea{constructor(c,l){super(c,new xa(l._repo,l._path,new da,!1)),this.database=c,this._delegate=l}getKey(){return(0,je.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(c){return(0,je.Dv)("Reference.child",1,1,arguments.length),"number"==typeof c&&(c=String(c)),new ma(this.database,ol(this._delegate,c))}getParent(){(0,je.Dv)("Reference.parent",0,0,arguments.length);const c=this._delegate.parent;return c?new ma(this.database,c):null}getRoot(){return(0,je.Dv)("Reference.root",0,0,arguments.length),new ma(this.database,this._delegate.root)}set(c,l){(0,je.Dv)("Reference.set",1,2,arguments.length),(0,je.Wj)("Reference.set","onComplete",l,!0);const p=Vd(this._delegate,c);return l&&p.then(()=>l(null),b=>l(b)),p}update(c,l){if((0,je.Dv)("Reference.update",1,2,arguments.length),Array.isArray(c)){const b={};for(let P=0;P<c.length;++P)b[""+P]=c[P];c=b,Cg("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Go("Reference.update",this._delegate._path),(0,je.Wj)("Reference.update","onComplete",l,!0);const p=Rl(this._delegate,c);return l&&p.then(()=>l(null),b=>l(b)),p}setWithPriority(c,l,p){(0,je.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,je.Wj)("Reference.setWithPriority","onComplete",p,!0);const b=function(d,c,l){if(Go("setWithPriority",d._path),Vi("setWithPriority",c,d._path,!1),il("setWithPriority",l,!1),".length"===d.key||".keys"===d.key)throw"setWithPriority failed: "+d.key+" is a read-only object.";const p=new je.BH;return Fh(d._repo,d._path,c,l,p.wrapCallback(()=>{})),p.promise}(this._delegate,c,l);return p&&b.then(()=>p(null),P=>p(P)),b}remove(c){(0,je.Dv)("Reference.remove",0,1,arguments.length),(0,je.Wj)("Reference.remove","onComplete",c,!0);const l=function(d){return Go("remove",d._path),Vd(d,null)}(this._delegate);return c&&l.then(()=>c(null),p=>c(p)),l}transaction(c,l,p){(0,je.Dv)("Reference.transaction",1,3,arguments.length),(0,je.Wj)("Reference.transaction","transactionUpdate",c,!1),(0,je.Wj)("Reference.transaction","onComplete",l,!0),function(d,c,l,p){if(void 0!==l&&"boolean"!=typeof l)throw new Error((0,je.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,p);const b=function(d,c,l){var p;if(d=(0,je.m9)(d),Go("Reference.transaction",d._path),".length"===d.key||".keys"===d.key)throw"Reference.transaction failed: "+d.key+" is a read-only object.";const b=null===(p=null==l?void 0:l.applyLocally)||void 0===p||p,P=new je.BH,ae=Hh(d,()=>{});return function(d,c,l,p,b,P){Sl(d,"transaction on "+c);const z={path:c,update:l,onComplete:p,status:null,order:zs(),applyLocally:P,retryCount:0,unwatcher:b,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},ae=Yu(d,c,void 0);z.currentInputSnapshot=ae;const Ne=z.update(ae.val());if(void 0===Ne)z.unwatcher(),z.currentOutputSnapshotRaw=null,z.currentOutputSnapshotResolved=null,z.onComplete&&z.onComplete(null,!1,z.currentInputSnapshot);else{kc("transaction failed: Data returned ",Ne,z.path),z.status=0;const Qe=xh(d.transactionQueueTree_,c),jt=Oc(Qe)||[];let Wt;jt.push(z),Fp(Qe,jt),"object"==typeof Ne&&null!==Ne&&(0,je.r3)(Ne,".priority")?(Wt=(0,je.DV)(Ne,".priority"),(0,je.hu)(Nc(Wt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Wt=(Mc(d.serverSyncTree_,c)||zn.EMPTY_NODE).getPriority().val();const tn=Yl(d),Wn=is(Ne,Wt),gr=Ta(Wn,ae,tn);z.currentOutputSnapshotRaw=Wn,z.currentOutputSnapshotResolved=gr,z.currentWriteId=ql(d);const Di=Cl(d.serverSyncTree_,c,gr,z.currentWriteId,z.applyLocally);Sa(d.eventQueue_,c,Di),cc(d,d.transactionQueueTree_)}}(d._repo,d._path,c,(Ne,Qe,jt)=>{let Wt=null;Ne?P.reject(Ne):(Wt=new pu(jt,new Ya(d._repo,d._path),oi),P.resolve(new Zh(Qe,Wt)))},ae,b),P.promise}(this._delegate,c,{applyLocally:p}).then(P=>new Dm(P.committed,new ec(this.database,P.snapshot)));return l&&b.then(P=>l(null,P.committed,P.snapshot),P=>l(P,!1,null)),b}setPriority(c,l){(0,je.Dv)("Reference.setPriority",1,2,arguments.length),(0,je.Wj)("Reference.setPriority","onComplete",l,!0);const p=function(d,c){d=(0,je.m9)(d),Go("setPriority",d._path),il("setPriority",c,!1);const l=new je.BH;return Fh(d._repo,Ti(d._path,".priority"),c,null,l.wrapCallback(()=>{})),l.promise}(this._delegate,c);return l&&p.then(()=>l(null),b=>l(b)),p}push(c,l){(0,je.Dv)("Reference.push",0,2,arguments.length),(0,je.Wj)("Reference.push","onComplete",l,!0);const p=function(d,c){d=(0,je.m9)(d),Go("push",d._path),Vi("push",c,d._path,!0);const l=kh(d._repo),p=Xa(l),b=ol(d,p),P=ol(d,p);let z;return z=null!=c?Vd(P,c).then(()=>P):Promise.resolve(P),b.then=z.then.bind(z),b.catch=z.then.bind(z,void 0),b}(this._delegate,c),b=p.then(z=>new ma(this.database,z));l&&b.then(()=>l(null),z=>l(z));const P=new ma(this.database,p);return P.then=b.then.bind(b),P.catch=b.catch.bind(b,void 0),P}onDisconnect(){return Go("Reference.onDisconnect",this._delegate._path),new up(new Yp(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Hc{constructor(c,l){this._delegate=c,this.app=l,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:qf,forceLongPolling:Kh}}useEmulator(c,l,p={}){tg(this._delegate,c,l,p)}ref(c){if((0,je.Dv)("database.ref",0,1,arguments.length),c instanceof ma){const l=Mr(this._delegate,c.toString());return new ma(this,l)}{const l=Bf(this._delegate,c);return new ma(this,l)}}refFromURL(c){(0,je.Dv)("database.refFromURL",1,1,arguments.length);const p=Mr(this._delegate,c);return new ma(this,p)}goOffline(){return(0,je.Dv)("database.goOffline",0,0,arguments.length),function(d){(d=(0,je.m9)(d))._checkNotDeleted("goOffline"),Od(d._repo)}(this._delegate)}goOnline(){return(0,je.Dv)("database.goOnline",0,0,arguments.length),function(d){(d=(0,je.m9)(d))._checkNotDeleted("goOnline"),function(d){d.persistentConnection_&&d.persistentConnection_.resume(Lf)}(d._repo)}(this._delegate)}}Hc.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:d=>function(d){return{".sv":{increment:d}}}(d)};var Wc=Object.freeze({__proto__:null,initStandalone:function({app:d,url:c,version:l,customAuthImpl:p,namespace:b,nodeAdmin:P=!1}){Oa(l);const z=new Es.zt("auth-internal",new Es.H0("database-standalone"));return z.setComponent(new Es.wA("auth-internal",()=>p,"PRIVATE")),{instance:new Hc(zf(d,z,void 0,c,P),d),namespace:b}}});const Sm=Hc.ServerValue;!function(d){d.INTERNAL.registerComponent(new Es.wA("database-compat",(c,{instanceIdentifier:l})=>{const p=c.getProvider("app-compat").getImmediate(),b=c.getProvider("database").getImmediate({identifier:l});return new Hc(b,p)},"PUBLIC").setServiceProps({Reference:ma,Query:ea,Database:Hc,DataSnapshot:ec,enableLogging:Kf,INTERNAL:Wc,ServerValue:Sm}).setMultipleInstances(!0)),d.registerVersion("@firebase/database-compat","0.2.9")}(lf.Z);var tc=F(8006),Xd=F(7841);function wg(d){return null==d}function Jd(d){return"function"==typeof d.set}function hp(d,c){return Jd(c)?c:d.ref(c)}function fp(d,c){if(function(d){return"string"==typeof d}(d))return c.stringCase();if(Jd(d))return c.firebaseCase();if(function(d){return"function"==typeof d.exportVal}(d))return c.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof d)}function zc(d,c,l="on",p=rf.z){return new Pl.y(b=>{let P=null;return P=d[l](c,(z,ae)=>{p.schedule(()=>{b.next({snapshot:z,prevKey:ae})}),"once"===l&&p.schedule(()=>b.complete())},z=>{p.schedule(()=>b.error(z))}),"on"===l?{unsubscribe(){null!=P&&d.off(c,P)}}:{unsubscribe(){}}}).pipe((0,$r.U)(b=>{const{snapshot:P,prevKey:z}=b;let ae=null;return P.exists()&&(ae=P.key),{type:c,payload:P,prevKey:z,key:ae}}),(0,Im.B)())}function uf(d,c){const l=d.length;for(let p=0;p<l;p++)if(d[p].payload.key===c)return p;return-1}function th(d,c){const{payload:l,prevKey:p,key:b}=c,P=uf(d,b),z=function(d,c){if(wg(c))return 0;{const l=uf(d,c);return-1===l?d.length:l+1}}(d,p);switch(c.type){case"value":if(c.payload&&c.payload.exists()){let ae=null;c.payload.forEach(Ne=>{const Qe={payload:Ne,type:"value",prevKey:ae,key:Ne.key};return ae=Ne.key,d=[...d,Qe],!1})}return d;case"child_added":if(P>-1){const ae=d[P-1];(ae&&ae.key||null)!==p&&(d=d.filter(Ne=>Ne.payload.key!==l.key)).splice(z,0,c)}else{if(null==p)return[c,...d];(d=d.slice()).splice(z,0,c)}return d;case"child_removed":return d.filter(ae=>ae.payload.key!==l.key);case"child_changed":return d.map(ae=>ae.payload.key===b?c:ae);case"child_moved":if(P>-1){const ae=d.splice(P,1)[0];return(d=d.slice()).splice(z,0,ae),d}return d;default:return d}}function pp(d){return(wg(d)||0===d.length)&&(d=["child_added","child_removed","child_changed","child_moved"]),d}function nh(d,c,l){return function(d,c,l){return zc(d,"value","once",l).pipe((0,Cm.w)(p=>{const b=[(0,sf.of)(p)];return c.forEach(P=>b.push(zc(d,P,"on",l))),(0,ip.T)(...b).pipe((0,Uc.R)(th,[]))}),(0,sp.x)())}(d,c=pp(c),l)}function df(d,c,l){const p=(c=pp(c)).map(b=>zc(d,b,"on",l));return(0,ip.T)(...p)}function Dg(d,c){return function(p,b){return fp(p,{stringCase:()=>d.child(p)[c](b),firebaseCase:()=>p[c](b),snapshotCase:()=>p.ref[c](b)})}}function gp(d){return function(l){return l?fp(l,{stringCase:()=>d.child(l).remove(),firebaseCase:()=>l.remove(),snapshotCase:()=>l.ref.remove()}):d.remove()}}function mp(d,c){return function(){return zc(d,"value","on",c)}}const yp=new A.OlP("angularfire2.realtimeDatabaseURL"),Rm=new A.OlP("angularfire2.database.use-emulator");let Ag=(()=>{class d{constructor(l,p,b,P,z,ae,Ne,Qe,jt,Wt,tn,Wn,gr,Di,Js){this.schedulers=ae;const nc=Ne,Nl=(0,_u.on)(l,z,p);Qe&&(0,tc.nw)(Nl,z,jt,tn,Wn,gr,Wt,Di),this.database=(0,_u.cc)(`${Nl.name}.database.${b}`,"AngularFireDatabase",Nl.name,()=>{const kl=z.runOutsideAngular(()=>Nl.database(b||void 0));return nc&&kl.useEmulator(...nc),kl},[nc])}list(l,p){const b=this.schedulers.ngZone.runOutsideAngular(()=>hp(this.database,l));let P=b;return p&&(P=p(b)),function(d,c){const l=c.schedulers.outsideAngular,p=c.schedulers.ngZone.run(()=>d.ref);return{query:d,update:Dg(p,"update"),set:Dg(p,"set"),push:b=>p.push(b),remove:gp(p),snapshotChanges:b=>nh(d,b,l).pipe(li.iC),stateChanges:b=>df(d,b,l).pipe(li.iC),auditTrail:b=>function(d,c,l){return function(d,c,l){return function(d,c){return zc(d,"value","on",c).pipe((0,$r.U)(l=>{let p;return l.payload.forEach(b=>(p=b.key,!1)),{data:l,lastKeyToLoad:p}}))}(d,l).pipe(function(...d){return c=>{let l;return"function"==typeof d[d.length-1]&&(l=d.pop()),c.lift(new op(d,l))}}(c),(0,$r.U)(([b,P])=>{const z=b.lastKeyToLoad,ae=P.map(Ne=>Ne.key);return{actions:P,lastKeyToLoad:z,loadedKeys:ae}}),function(d){return c=>c.lift(new lp(d))}(b=>-1===b.loadedKeys.indexOf(b.lastKeyToLoad)),(0,$r.U)(b=>b.actions))}(d,df(d,c).pipe((0,Uc.R)((b,P)=>[...b,P],[])),l)}(d,b,l).pipe(li.iC),valueChanges:(b,P)=>nh(d,b,l).pipe((0,$r.U)(ae=>ae.map(Ne=>P&&P.idField?Object.assign(Object.assign({},Ne.payload.val()),{[P.idField]:Ne.key}):Ne.payload.val())),li.iC)}}(P,this)}object(l){return function(d,c){return{query:d,snapshotChanges:()=>mp(d,c.schedulers.outsideAngular)().pipe(li.iC),update:l=>d.ref.update(l),set:l=>d.ref.set(l),remove:()=>d.ref.remove(),valueChanges:()=>mp(d,c.schedulers.outsideAngular)().pipe(li.iC,(0,$r.U)(p=>p.payload.exists()?p.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>hp(this.database,l)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return d.\u0275fac=function(l){return new(l||d)(A.LFG(_u.Dh),A.LFG(_u.xv,8),A.LFG(yp,8),A.LFG(A.Lbi),A.LFG(A.R0b),A.LFG(li.HU),A.LFG(Rm,8),A.LFG(tc.zQ,8),A.LFG(tc.Qv,8),A.LFG(tc.L6,8),A.LFG(tc._Q,8),A.LFG(tc.rT,8),A.LFG(tc.lh,8),A.LFG(tc.f7,8),A.LFG(Hs.nm,8))},d.\u0275prov=A.Yz7({token:d,factory:d.\u0275fac,providedIn:"any"}),d})(),Mm=(()=>{class d{constructor(){Xd.Z.registerVersion("angularfire",li.q4.full,"rtdb-compat")}}return d.\u0275fac=function(l){return new(l||d)},d.\u0275mod=A.oAB({type:d}),d.\u0275inj=A.cJS({providers:[Ag]}),d})();var _p=F(3792),vp=F(3071),pf=F(9781),gf=F(6175);let Pm=(()=>{class d{}return d.\u0275fac=function(l){return new(l||d)},d.\u0275mod=A.oAB({type:d}),d.\u0275inj=A.cJS({imports:[[y.ez,gf.q,Yr.Pc,di.u5,di.UX]]}),d})(),ll=(()=>{class d{}return d.\u0275fac=function(l){return new(l||d)},d.\u0275mod=A.oAB({type:d,bootstrap:[ss]}),d.\u0275inj=A.cJS({providers:[{provide:Wr.wN,useClass:Yr.r4},vp.K,_p.O,Ag],imports:[[$e,Yr.Pc.forRoot(),$n,hi.HomeModule,Eg.LoginModule,di.UX,gf.q,Pm,di.u5,Mm,pf.yb.enablePersistence(),_u.hO.initializeApp(vs_firebase),(0,bi.hX)(()=>(0,bi.ZF)(vs_firebase)),(0,qr.AR)(()=>(0,qr.v0)()),Kd(()=>mm()),(0,xs.Cm)(()=>(0,xs.ad)())]]}),d})();We().bootstrapModule(ll).catch(d=>console.error(d))},863:(en,it,F)=>{var y={"./ion-action-sheet.entry.js":[7321,8592,7321],"./ion-alert.entry.js":[6108,8592,6108],"./ion-app_8.entry.js":[1489,8592,1489],"./ion-avatar_3.entry.js":[305,8592,305],"./ion-back-button.entry.js":[5830,8592,5830],"./ion-backdrop.entry.js":[7757,7757],"./ion-button_2.entry.js":[392,8592,392],"./ion-card_5.entry.js":[6911,8592,6911],"./ion-checkbox.entry.js":[937,8592,937],"./ion-chip.entry.js":[8695,8592,8695],"./ion-col_3.entry.js":[6034,6034],"./ion-datetime_3.entry.js":[8837,8592,8837],"./ion-fab_3.entry.js":[4195,8592,4195],"./ion-img.entry.js":[1709,1709],"./ion-infinite-scroll_2.entry.js":[5931,8592,3087],"./ion-input.entry.js":[4513,8592,4513],"./ion-item-option_3.entry.js":[8056,8592,8056],"./ion-item_8.entry.js":[862,8592,862],"./ion-loading.entry.js":[7509,8592,7509],"./ion-menu_3.entry.js":[6272,8592,6030],"./ion-modal.entry.js":[1855,8592,1855],"./ion-nav_2.entry.js":[8708,8592,8708],"./ion-popover.entry.js":[3527,8592,3527],"./ion-progress-bar.entry.js":[4694,8592,4694],"./ion-radio_2.entry.js":[9222,8592,9222],"./ion-range.entry.js":[5277,8592,5277],"./ion-refresher_2.entry.js":[9921,8592,9921],"./ion-reorder_2.entry.js":[3122,8592,3122],"./ion-ripple-effect.entry.js":[1602,1602],"./ion-route_4.entry.js":[5174,8592,5174],"./ion-searchbar.entry.js":[7895,8592,7895],"./ion-segment_2.entry.js":[6164,8592,6164],"./ion-select_3.entry.js":[592,8592,592],"./ion-slide_2.entry.js":[7162,7162],"./ion-spinner.entry.js":[1374,8592,1374],"./ion-split-pane.entry.js":[7896,7896],"./ion-tab-bar_2.entry.js":[5043,8592,5043],"./ion-tab_2.entry.js":[7802,8592,7802],"./ion-text.entry.js":[9072,8592,9072],"./ion-textarea.entry.js":[2191,8592,2191],"./ion-toast.entry.js":[801,8592,801],"./ion-toggle.entry.js":[7110,8592,7110],"./ion-virtual-scroll.entry.js":[431,431]};function A(te){if(!F.o(y,te))return Promise.resolve().then(()=>{var Q=new Error("Cannot find module '"+te+"'");throw Q.code="MODULE_NOT_FOUND",Q});var ke=y[te],oe=ke[0];return Promise.all(ke.slice(1).map(F.e)).then(()=>F(oe))}A.keys=()=>Object.keys(y),A.id=863,en.exports=A},3394:(en,it,F)=>{"use strict";F.d(it,{Z:()=>ht});var y=F(3854),A=F(3910),te=F(8026),ke=F(5422);class oe{constructor(Ze,Ge){this._delegate=Ze,this.firebase=Ge,(0,te._addComponent)(Ze,new A.wA("app-compat",()=>this,"PUBLIC")),this.container=Ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ze){this._delegate.automaticDataCollectionEnabled=Ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ze=>{this._delegate.checkDestroyed(),Ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,te.deleteApp)(this._delegate)))}_getService(Ze,Ge=te._DEFAULT_ENTRY_NAME){var ft;this._delegate.checkDestroyed();const Se=this._delegate.container.getProvider(Ze);return!Se.isInitialized()&&"EXPLICIT"===(null===(ft=Se.getComponent())||void 0===ft?void 0:ft.instantiationMode)&&Se.initialize(),Se.getImmediate({identifier:Ge})}_removeServiceInstance(Ze,Ge=te._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ze).clearInstance(Ge)}_addComponent(Ze){(0,te._addComponent)(this._delegate,Ze)}_addOrOverwriteComponent(Ze){(0,te._addOrOverwriteComponent)(this._delegate,Ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ye=new y.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),re=function Ce(){const Ae=function(Ae){const Ze={},Ge={__esModule:!0,initializeApp:function(E,pt={}){const Dt=te.initializeApp(E,pt);if((0,y.r3)(Ze,Dt.name))return Ze[Dt.name];const Pe=new Ae(Dt,Ge);return Ze[Dt.name]=Pe,Pe},app:Se,registerVersion:te.registerVersion,setLogLevel:te.setLogLevel,onLog:te.onLog,apps:null,SDK_VERSION:te.SDK_VERSION,INTERNAL:{registerComponent:function(E){const pt=E.name,Dt=pt.replace("-compat","");if(te._registerComponent(E)&&"PUBLIC"===E.type){const Pe=(be=Se())=>{if("function"!=typeof be[Dt])throw ye.create("invalid-app-argument",{appName:pt});return be[Dt]()};void 0!==E.serviceProps&&(0,y.ZB)(Pe,E.serviceProps),Ge[Dt]=Pe,Ae.prototype[Dt]=function(...be){return this._getService.bind(this,pt).apply(this,E.multipleInstances?be:[])}}return"PUBLIC"===E.type?Ge[Dt]:null},removeApp:function(E){delete Ze[E]},useAsService:function(E,pt){return"serverAuth"===pt?null:pt},modularAPIs:te}};function Se(E){if(!(0,y.r3)(Ze,E=E||te._DEFAULT_ENTRY_NAME))throw ye.create("no-app",{appName:E});return Ze[E]}return Ge.default=Ge,Object.defineProperty(Ge,"apps",{get:function(){return Object.keys(Ze).map(E=>Ze[E])}}),Se.App=Ae,Ge}(oe);return Ae.INTERNAL=Object.assign(Object.assign({},Ae.INTERNAL),{createFirebaseNamespace:Ce,extendNamespace:function(Ge){(0,y.ZB)(Ae,Ge)},createSubscribe:y.ne,ErrorFactory:y.LL,deepExtend:y.ZB}),Ae}(),he=new ke.Yd("@firebase/app-compat");if((0,y.jU)()&&void 0!==self.firebase){he.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ae=self.firebase.SDK_VERSION;Ae&&Ae.indexOf("LITE")>=0&&he.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ht=re;(0,te.registerVersion)("@firebase/app-compat","0.1.37",undefined)},8026:(en,it,F)=>{"use strict";F.r(it),F.d(it,{FirebaseError:()=>ke.ZR,SDK_VERSION:()=>mr,_DEFAULT_ENTRY_NAME:()=>Ye,_addComponent:()=>St,_addOrOverwriteComponent:()=>Bt,_apps:()=>Fe,_clearComponents:()=>Nn,_components:()=>tt,_getProvider:()=>Nt,_registerComponent:()=>Mt,_removeServiceInstance:()=>gn,deleteApp:()=>Un,getApp:()=>Tt,getApps:()=>un,initializeApp:()=>cr,onLog:()=>kn,registerVersion:()=>Ln,setLogLevel:()=>Xn});var y=F(8239),A=F(3910),te=F(5422),ke=F(3854),oe=F(2268);class Q{constructor(Xe){this.container=Xe}getPlatformInfoString(){return this.container.getProviders().map(se=>{if(function(fn){const Xe=fn.getComponent();return"VERSION"===(null==Xe?void 0:Xe.type)}(se)){const xe=se.getImmediate();return`${xe.library}/${xe.version}`}return null}).filter(se=>se).join(" ")}}const L="@firebase/app",re=new te.Yd("@firebase/app"),Ye="[DEFAULT]",Ve={[L]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Fe=new Map,tt=new Map;function St(fn,Xe){try{fn.container.addComponent(Xe)}catch(se){re.debug(`Component ${Xe.name} failed to register with FirebaseApp ${fn.name}`,se)}}function Bt(fn,Xe){fn.container.addOrOverwriteComponent(Xe)}function Mt(fn){const Xe=fn.name;if(tt.has(Xe))return re.debug(`There were multiple attempts to register component ${Xe}.`),!1;tt.set(Xe,fn);for(const se of Fe.values())St(se,fn);return!0}function Nt(fn,Xe){const se=fn.container.getProvider("heartbeat").getImmediate({optional:!0});return se&&se.triggerHeartbeat(),fn.container.getProvider(Xe)}function gn(fn,Xe,se=Ye){Nt(fn,Xe).clearInstance(se)}function Nn(){tt.clear()}const yn=new ke.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Sn{constructor(Xe,se,xe){this._isDeleted=!1,this._options=Object.assign({},Xe),this._config=Object.assign({},se),this._name=se.name,this._automaticDataCollectionEnabled=se.automaticDataCollectionEnabled,this._container=xe,this.container.addComponent(new A.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Xe){this.checkDestroyed(),this._automaticDataCollectionEnabled=Xe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Xe){this._isDeleted=Xe}checkDestroyed(){if(this.isDeleted)throw yn.create("app-deleted",{appName:this._name})}}const mr="9.12.1";function cr(fn,Xe={}){let se=fn;"object"!=typeof Xe&&(Xe={name:Xe});const xe=Object.assign({name:Ye,automaticDataCollectionEnabled:!1},Xe),at=xe.name;if("string"!=typeof at||!at)throw yn.create("bad-app-name",{appName:String(at)});if(se||(se=(0,ke.aH)()),!se)throw yn.create("no-options");const Ct=Fe.get(at);if(Ct){if((0,ke.vZ)(se,Ct.options)&&(0,ke.vZ)(xe,Ct.config))return Ct;throw yn.create("duplicate-app",{appName:at})}const Be=new A.H0(at);for(const ct of tt.values())Be.addComponent(ct);const He=new Sn(se,xe,Be);return Fe.set(at,He),He}function Tt(fn=Ye){const Xe=Fe.get(fn);if(!Xe&&fn===Ye)return cr();if(!Xe)throw yn.create("no-app",{appName:fn});return Xe}function un(){return Array.from(Fe.values())}function Un(fn){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,y.Z)(function*(fn){const Xe=fn.name;Fe.has(Xe)&&(Fe.delete(Xe),yield Promise.all(fn.container.getProviders().map(se=>se.delete())),fn.isDeleted=!0)})).apply(this,arguments)}function Ln(fn,Xe,se){var xe;let at=null!==(xe=Ve[fn])&&void 0!==xe?xe:fn;se&&(at+=`-${se}`);const Ct=at.match(/\s|\//),Be=Xe.match(/\s|\//);if(Ct||Be){const He=[`Unable to register library "${at}" with version "${Xe}":`];return Ct&&He.push(`library name "${at}" contains illegal characters (whitespace or "/")`),Ct&&Be&&He.push("and"),Be&&He.push(`version name "${Xe}" contains illegal characters (whitespace or "/")`),void re.warn(He.join(" "))}Mt(new A.wA(`${at}-version`,()=>({library:at,version:Xe}),"VERSION"))}function kn(fn,Xe){if(null!==fn&&"function"!=typeof fn)throw yn.create("invalid-log-argument");(0,te.Am)(fn,Xe)}function Xn(fn){(0,te.Ub)(fn)}const Er="firebase-heartbeat-store";let hr=null;function ei(){return hr||(hr=(0,oe.X3)("firebase-heartbeat-database",1,{upgrade:(fn,Xe)=>{0===Xe&&fn.createObjectStore(Er)}}).catch(fn=>{throw yn.create("idb-open",{originalErrorMessage:fn.message})})),hr}function Ht(){return(Ht=(0,y.Z)(function*(fn){var Xe;try{return(yield ei()).transaction(Er).objectStore(Er).get(pr(fn))}catch(se){if(se instanceof ke.ZR)re.warn(se.message);else{const xe=yn.create("idb-get",{originalErrorMessage:null===(Xe=se)||void 0===Xe?void 0:Xe.message});re.warn(xe.message)}}})).apply(this,arguments)}function It(fn,Xe){return ur.apply(this,arguments)}function ur(){return(ur=(0,y.Z)(function*(fn,Xe){var se;try{const at=(yield ei()).transaction(Er,"readwrite");return yield at.objectStore(Er).put(Xe,pr(fn)),at.done}catch(xe){if(xe instanceof ke.ZR)re.warn(xe.message);else{const at=yn.create("idb-set",{originalErrorMessage:null===(se=xe)||void 0===se?void 0:se.message});re.warn(at.message)}}})).apply(this,arguments)}function pr(fn){return`${fn.name}!${fn.options.appId}`}class Jn{constructor(Xe){this.container=Xe,this._heartbeatsCache=null;const se=this.container.getProvider("app").getImmediate();this._storage=new Kn(se),this._heartbeatsCachePromise=this._storage.read().then(xe=>(this._heartbeatsCache=xe,xe))}triggerHeartbeat(){var Xe=this;return(0,y.Z)(function*(){const xe=Xe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),at=rr();if(null===Xe._heartbeatsCache&&(Xe._heartbeatsCache=yield Xe._heartbeatsCachePromise),Xe._heartbeatsCache.lastSentHeartbeatDate!==at&&!Xe._heartbeatsCache.heartbeats.some(Ct=>Ct.date===at))return Xe._heartbeatsCache.heartbeats.push({date:at,agent:xe}),Xe._heartbeatsCache.heartbeats=Xe._heartbeatsCache.heartbeats.filter(Ct=>{const Be=new Date(Ct.date).valueOf();return Date.now()-Be<=2592e6}),Xe._storage.overwrite(Xe._heartbeatsCache)})()}getHeartbeatsHeader(){var Xe=this;return(0,y.Z)(function*(){if(null===Xe._heartbeatsCache&&(yield Xe._heartbeatsCachePromise),null===Xe._heartbeatsCache||0===Xe._heartbeatsCache.heartbeats.length)return"";const se=rr(),{heartbeatsToSend:xe,unsentEntries:at}=function(fn,Xe=1024){const se=[];let xe=fn.slice();for(const at of fn){const Ct=se.find(Be=>Be.agent===at.agent);if(Ct){if(Ct.dates.push(at.date),Zn(se)>Xe){Ct.dates.pop();break}}else if(se.push({agent:at.agent,dates:[at.date]}),Zn(se)>Xe){se.pop();break}xe=xe.slice(1)}return{heartbeatsToSend:se,unsentEntries:xe}}(Xe._heartbeatsCache.heartbeats),Ct=(0,ke.L)(JSON.stringify({version:2,heartbeats:xe}));return Xe._heartbeatsCache.lastSentHeartbeatDate=se,at.length>0?(Xe._heartbeatsCache.heartbeats=at,yield Xe._storage.overwrite(Xe._heartbeatsCache)):(Xe._heartbeatsCache.heartbeats=[],Xe._storage.overwrite(Xe._heartbeatsCache)),Ct})()}}function rr(){return(new Date).toISOString().substring(0,10)}class Kn{constructor(Xe){this.app=Xe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,y.Z)(function*(){return!!(0,ke.hl)()&&(0,ke.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Xe=this;return(0,y.Z)(function*(){return(yield Xe._canUseIndexedDBPromise)&&(yield function(fn){return Ht.apply(this,arguments)}(Xe.app))||{heartbeats:[]}})()}overwrite(Xe){var se=this;return(0,y.Z)(function*(){var xe;if(yield se._canUseIndexedDBPromise){const Ct=yield se.read();return It(se.app,{lastSentHeartbeatDate:null!==(xe=Xe.lastSentHeartbeatDate)&&void 0!==xe?xe:Ct.lastSentHeartbeatDate,heartbeats:Xe.heartbeats})}})()}add(Xe){var se=this;return(0,y.Z)(function*(){var xe;if(yield se._canUseIndexedDBPromise){const Ct=yield se.read();return It(se.app,{lastSentHeartbeatDate:null!==(xe=Xe.lastSentHeartbeatDate)&&void 0!==xe?xe:Ct.lastSentHeartbeatDate,heartbeats:[...Ct.heartbeats,...Xe.heartbeats]})}})()}}function Zn(fn){return(0,ke.L)(JSON.stringify({version:2,heartbeats:fn})).length}Mt(new A.wA("platform-logger",Xe=>new Q(Xe),"PRIVATE")),Mt(new A.wA("heartbeat",Xe=>new Jn(Xe),"PRIVATE")),Ln(L,"0.8.2",""),Ln(L,"0.8.2","esm2017"),Ln("fire-js","")},3910:(en,it,F)=>{"use strict";F.d(it,{wA:()=>te,H0:()=>L,zt:()=>oe});var y=F(8239),A=F(3854);class te{constructor(re,he,_e){this.name=re,this.instanceFactory=he,this.type=_e,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(re){return this.instantiationMode=re,this}setMultipleInstances(re){return this.multipleInstances=re,this}setServiceProps(re){return this.serviceProps=re,this}setInstanceCreatedCallback(re){return this.onInstanceCreated=re,this}}const ke="[DEFAULT]";class oe{constructor(re,he){this.name=re,this.container=he,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(re){const he=this.normalizeInstanceIdentifier(re);if(!this.instancesDeferred.has(he)){const _e=new A.BH;if(this.instancesDeferred.set(he,_e),this.isInitialized(he)||this.shouldAutoInitialize())try{const le=this.getOrInitializeService({instanceIdentifier:he});le&&_e.resolve(le)}catch(le){}}return this.instancesDeferred.get(he).promise}getImmediate(re){var he;const _e=this.normalizeInstanceIdentifier(null==re?void 0:re.identifier),le=null!==(he=null==re?void 0:re.optional)&&void 0!==he&&he;if(!this.isInitialized(_e)&&!this.shouldAutoInitialize()){if(le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:_e})}catch(we){if(le)return null;throw we}}getComponent(){return this.component}setComponent(re){if(re.name!==this.name)throw Error(`Mismatching Component ${re.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=re,this.shouldAutoInitialize()){if("EAGER"===re.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ke})}catch(he){}for(const[he,_e]of this.instancesDeferred.entries()){const le=this.normalizeInstanceIdentifier(he);try{const we=this.getOrInitializeService({instanceIdentifier:le});_e.resolve(we)}catch(we){}}}}clearInstance(re=ke){this.instancesDeferred.delete(re),this.instancesOptions.delete(re),this.instances.delete(re)}delete(){var re=this;return(0,y.Z)(function*(){const he=Array.from(re.instances.values());yield Promise.all([...he.filter(_e=>"INTERNAL"in _e).map(_e=>_e.INTERNAL.delete()),...he.filter(_e=>"_delete"in _e).map(_e=>_e._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(re=ke){return this.instances.has(re)}getOptions(re=ke){return this.instancesOptions.get(re)||{}}initialize(re={}){const{options:he={}}=re,_e=this.normalizeInstanceIdentifier(re.instanceIdentifier);if(this.isInitialized(_e))throw Error(`${this.name}(${_e}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const le=this.getOrInitializeService({instanceIdentifier:_e,options:he});for(const[we,ht]of this.instancesDeferred.entries())_e===this.normalizeInstanceIdentifier(we)&&ht.resolve(le);return le}onInit(re,he){var _e;const le=this.normalizeInstanceIdentifier(he),we=null!==(_e=this.onInitCallbacks.get(le))&&void 0!==_e?_e:new Set;we.add(re),this.onInitCallbacks.set(le,we);const ht=this.instances.get(le);return ht&&re(ht,le),()=>{we.delete(re)}}invokeOnInitCallbacks(re,he){const _e=this.onInitCallbacks.get(he);if(_e)for(const le of _e)try{le(re,he)}catch(we){}}getOrInitializeService({instanceIdentifier:re,options:he={}}){let _e=this.instances.get(re);if(!_e&&this.component&&(_e=this.component.instanceFactory(this.container,{instanceIdentifier:(Ce=re,Ce===ke?void 0:Ce),options:he}),this.instances.set(re,_e),this.instancesOptions.set(re,he),this.invokeOnInitCallbacks(_e,re),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,re,_e)}catch(le){}var Ce;return _e||null}normalizeInstanceIdentifier(re=ke){return this.component?this.component.multipleInstances?re:ke:re}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class L{constructor(re){this.name=re,this.providers=new Map}addComponent(re){const he=this.getProvider(re.name);if(he.isComponentSet())throw new Error(`Component ${re.name} has already been registered with ${this.name}`);he.setComponent(re)}addOrOverwriteComponent(re){this.getProvider(re.name).isComponentSet()&&this.providers.delete(re.name),this.addComponent(re)}getProvider(re){if(this.providers.has(re))return this.providers.get(re);const he=new oe(re,this);return this.providers.set(re,he),he}getProviders(){return Array.from(this.providers.values())}}},5422:(en,it,F)=>{"use strict";F.d(it,{in:()=>A,Yd:()=>ye,Ub:()=>L,Am:()=>Ce});const y=[];var A=(()=>{return(re=A||(A={}))[re.DEBUG=0]="DEBUG",re[re.VERBOSE=1]="VERBOSE",re[re.INFO=2]="INFO",re[re.WARN=3]="WARN",re[re.ERROR=4]="ERROR",re[re.SILENT=5]="SILENT",A;var re})();const te={debug:A.DEBUG,verbose:A.VERBOSE,info:A.INFO,warn:A.WARN,error:A.ERROR,silent:A.SILENT},ke=A.INFO,oe={[A.DEBUG]:"log",[A.VERBOSE]:"log",[A.INFO]:"info",[A.WARN]:"warn",[A.ERROR]:"error"},Q=(re,he,..._e)=>{if(he<re.logLevel)return;const le=(new Date).toISOString(),we=oe[he];if(!we)throw new Error(`Attempted to log a message with an invalid logType (value: ${he})`);console[we](`[${le}]  ${re.name}:`,..._e)};class ye{constructor(he){this.name=he,this._logLevel=ke,this._logHandler=Q,this._userLogHandler=null,y.push(this)}get logLevel(){return this._logLevel}set logLevel(he){if(!(he in A))throw new TypeError(`Invalid value "${he}" assigned to \`logLevel\``);this._logLevel=he}setLogLevel(he){this._logLevel="string"==typeof he?te[he]:he}get logHandler(){return this._logHandler}set logHandler(he){if("function"!=typeof he)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=he}get userLogHandler(){return this._userLogHandler}set userLogHandler(he){this._userLogHandler=he}debug(...he){this._userLogHandler&&this._userLogHandler(this,A.DEBUG,...he),this._logHandler(this,A.DEBUG,...he)}log(...he){this._userLogHandler&&this._userLogHandler(this,A.VERBOSE,...he),this._logHandler(this,A.VERBOSE,...he)}info(...he){this._userLogHandler&&this._userLogHandler(this,A.INFO,...he),this._logHandler(this,A.INFO,...he)}warn(...he){this._userLogHandler&&this._userLogHandler(this,A.WARN,...he),this._logHandler(this,A.WARN,...he)}error(...he){this._userLogHandler&&this._userLogHandler(this,A.ERROR,...he),this._logHandler(this,A.ERROR,...he)}}function L(re){y.forEach(he=>{he.setLogLevel(re)})}function Ce(re,he){for(const _e of y){let le=null;he&&he.level&&(le=te[he.level]),_e.userLogHandler=null===re?null:(we,ht,...Ae)=>{const Ze=Ae.map(Ge=>{if(null==Ge)return null;if("string"==typeof Ge)return Ge;if("number"==typeof Ge||"boolean"==typeof Ge)return Ge.toString();if(Ge instanceof Error)return Ge.message;try{return JSON.stringify(Ge)}catch(ft){return null}}).filter(Ge=>Ge).join(" ");ht>=(null!=le?le:we.logLevel)&&re({level:A[ht].toLowerCase(),message:Ze,args:Ae,type:we.name})}}}},2268:(en,it,F)=>{"use strict";F.d(it,{Lj:()=>Ue,X3:()=>Se});var y=F(8239);let te,ke;const ye=new WeakMap,L=new WeakMap,Ce=new WeakMap,re=new WeakMap,he=new WeakMap;let we={get(pt,Dt,Pe){if(pt instanceof IDBTransaction){if("done"===Dt)return L.get(pt);if("objectStoreNames"===Dt)return pt.objectStoreNames||Ce.get(pt);if("store"===Dt)return Pe.objectStoreNames[1]?void 0:Pe.objectStore(Pe.objectStoreNames[0])}return Ge(pt[Dt])},set:(pt,Dt,Pe)=>(pt[Dt]=Pe,!0),has:(pt,Dt)=>pt instanceof IDBTransaction&&("done"===Dt||"store"===Dt)||Dt in pt};function Ze(pt){return"function"==typeof pt?function(pt){return pt!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ke||(ke=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(pt)?function(...Dt){return pt.apply(ft(this),Dt),Ge(ye.get(this))}:function(...Dt){return Ge(pt.apply(ft(this),Dt))}:function(Dt,...Pe){const be=pt.call(ft(this),Dt,...Pe);return Ce.set(be,Dt.sort?Dt.sort():[Dt]),Ge(be)}}(pt):(pt instanceof IDBTransaction&&function(pt){if(L.has(pt))return;const Dt=new Promise((Pe,be)=>{const Me=()=>{pt.removeEventListener("complete",et),pt.removeEventListener("error",dt),pt.removeEventListener("abort",dt)},et=()=>{Pe(),Me()},dt=()=>{be(pt.error||new DOMException("AbortError","AbortError")),Me()};pt.addEventListener("complete",et),pt.addEventListener("error",dt),pt.addEventListener("abort",dt)});L.set(pt,Dt)}(pt),((pt,Dt)=>Dt.some(Pe=>pt instanceof Pe))(pt,te||(te=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(pt,we):pt)}function Ge(pt){if(pt instanceof IDBRequest)return function(pt){const Dt=new Promise((Pe,be)=>{const Me=()=>{pt.removeEventListener("success",et),pt.removeEventListener("error",dt)},et=()=>{Pe(Ge(pt.result)),Me()},dt=()=>{be(pt.error),Me()};pt.addEventListener("success",et),pt.addEventListener("error",dt)});return Dt.then(Pe=>{Pe instanceof IDBCursor&&ye.set(Pe,pt)}).catch(()=>{}),he.set(Dt,pt),Dt}(pt);if(re.has(pt))return re.get(pt);const Dt=Ze(pt);return Dt!==pt&&(re.set(pt,Dt),he.set(Dt,pt)),Dt}const ft=pt=>he.get(pt);function Se(pt,Dt,{blocked:Pe,upgrade:be,blocking:Me,terminated:et}={}){const dt=indexedDB.open(pt,Dt),nt=Ge(dt);return be&&dt.addEventListener("upgradeneeded",At=>{be(Ge(dt.result),At.oldVersion,At.newVersion,Ge(dt.transaction))}),Pe&&dt.addEventListener("blocked",()=>Pe()),nt.then(At=>{et&&At.addEventListener("close",()=>et()),Me&&At.addEventListener("versionchange",()=>Me())}).catch(()=>{}),nt}function Ue(pt,{blocked:Dt}={}){const Pe=indexedDB.deleteDatabase(pt);return Dt&&Pe.addEventListener("blocked",()=>Dt()),Ge(Pe).then(()=>{})}const gt=["get","getKey","getAll","getAllKeys","count"],ut=["put","add","delete","clear"],$t=new Map;function E(pt,Dt){if(!(pt instanceof IDBDatabase)||Dt in pt||"string"!=typeof Dt)return;if($t.get(Dt))return $t.get(Dt);const Pe=Dt.replace(/FromIndex$/,""),be=Dt!==Pe,Me=ut.includes(Pe);if(!(Pe in(be?IDBIndex:IDBObjectStore).prototype)||!Me&&!gt.includes(Pe))return;const et=function(){var dt=(0,y.Z)(function*(nt,...At){const Ie=this.transaction(nt,Me?"readwrite":"readonly");let Ye=Ie.store;return be&&(Ye=Ye.index(At.shift())),(yield Promise.all([Ye[Pe](...At),Me&&Ie.done]))[0]});return function(At){return dt.apply(this,arguments)}}();return $t.set(Dt,et),et}var pt;we=BI(VI({},pt=we),{get:(Dt,Pe,be)=>E(Dt,Pe)||pt.get(Dt,Pe,be),has:(Dt,Pe)=>!!E(Dt,Pe)||pt.has(Dt,Pe)})},8239:(en,it,F)=>{"use strict";function y(te,ke,oe,Q,ye,L,Ce){try{var re=te[L](Ce),he=re.value}catch(_e){return void oe(_e)}re.done?ke(he):Promise.resolve(he).then(Q,ye)}function A(te){return function(){var ke=this,oe=arguments;return new Promise(function(Q,ye){var L=te.apply(ke,oe);function Ce(he){y(L,Q,ye,Ce,re,"next",he)}function re(he){y(L,Q,ye,Ce,re,"throw",he)}Ce(void 0)})}}F.d(it,{Z:()=>A})}},en=>{en(en.s=657)}]);